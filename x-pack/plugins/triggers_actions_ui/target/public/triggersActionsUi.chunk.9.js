/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window["triggersActionsUi_bundle_jsonpfunction"]=window["triggersActionsUi_bundle_jsonpfunction"]||[]).push([[9,5],{104:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return actionTypeCompare}));function actionTypeCompare(a,b,preconfiguredConnectors){const aEnabled=getIsEnabledValue(a,preconfiguredConnectors);const bEnabled=getIsEnabledValue(b,preconfiguredConnectors);if(aEnabled===true&&bEnabled===false){return-1}if(aEnabled===false&&bEnabled===true){return 1}return a.name.localeCompare(b.name)}const getIsEnabledValue=(actionType,preconfiguredConnectors)=>{let isEnabled=actionType.enabled;if(!actionType.enabledInConfig&&preconfiguredConnectors&&preconfiguredConnectors.length>0){isEnabled=preconfiguredConnectors.find(connector=>connector.actionTypeId===actionType.id)!==undefined}return isEnabled}},105:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(106);case"v7light":return __webpack_require__(108);case"v8dark":return __webpack_require__(110);case"v8light":return __webpack_require__(112)}},106:function(module,exports,__webpack_require__){var api=__webpack_require__(25);var content=__webpack_require__(107);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},107:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(26);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".actCheckActionTypeEnabled__disabledActionWarningCard {\n  background-color: #25262E; }\n\n.actAccordionActionForm {\n  background-color: #25262E; }\n\n.actAccordionActionForm .euiCard {\n  box-shadow: none; }\n\n.actAccordionActionForm__button {\n  padding: 12px; }\n\n.actConnectorsListGrid .euiToolTipAnchor,\n.actConnectorsListGrid .euiCard {\n  height: 100%; }\n",""]);module.exports=exports},108:function(module,exports,__webpack_require__){var api=__webpack_require__(25);var content=__webpack_require__(109);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},109:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(26);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".actCheckActionTypeEnabled__disabledActionWarningCard {\n  background-color: #F5F7FA; }\n\n.actAccordionActionForm {\n  background-color: #F5F7FA; }\n\n.actAccordionActionForm .euiCard {\n  box-shadow: none; }\n\n.actAccordionActionForm__button {\n  padding: 12px; }\n\n.actConnectorsListGrid .euiToolTipAnchor,\n.actConnectorsListGrid .euiCard {\n  height: 100%; }\n",""]);module.exports=exports},110:function(module,exports,__webpack_require__){var api=__webpack_require__(25);var content=__webpack_require__(111);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},111:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(26);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".actCheckActionTypeEnabled__disabledActionWarningCard {\n  background-color: #25262E; }\n\n.actAccordionActionForm {\n  background-color: #25262E; }\n\n.actAccordionActionForm .euiCard {\n  box-shadow: none; }\n\n.actAccordionActionForm__button {\n  padding: 12px; }\n\n.actConnectorsListGrid .euiToolTipAnchor,\n.actConnectorsListGrid .euiCard {\n  height: 100%; }\n",""]);module.exports=exports},112:function(module,exports,__webpack_require__){var api=__webpack_require__(25);var content=__webpack_require__(113);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},113:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(26);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".actCheckActionTypeEnabled__disabledActionWarningCard {\n  background-color: #F5F7FA; }\n\n.actAccordionActionForm {\n  background-color: #F5F7FA; }\n\n.actAccordionActionForm .euiCard {\n  box-shadow: none; }\n\n.actAccordionActionForm__button {\n  padding: 12px; }\n\n.actConnectorsListGrid .euiToolTipAnchor,\n.actConnectorsListGrid .euiCard {\n  height: 100%; }\n",""]);module.exports=exports},124:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return transformActionVariables}));__webpack_require__.d(__webpack_exports__,"a",(function(){return AlertProvidedActionVariables}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__);function transformActionVariables(actionVariables){const alwaysProvidedVars=getAlwaysProvidedActionVariables();const contextVars=actionVariables.context?prefixKeys(actionVariables.context,"context."):[];const paramsVars=prefixKeys(actionVariables.params,"params.");const stateVars=prefixKeys(actionVariables.state,"state.");return alwaysProvidedVars.concat(contextVars,paramsVars,stateVars)}let AlertProvidedActionVariables;(function(AlertProvidedActionVariables){AlertProvidedActionVariables["alertId"]="alertId";AlertProvidedActionVariables["alertName"]="alertName";AlertProvidedActionVariables["spaceId"]="spaceId";AlertProvidedActionVariables["tags"]="tags";AlertProvidedActionVariables["alertInstanceId"]="alertInstanceId"})(AlertProvidedActionVariables||(AlertProvidedActionVariables={}));function prefixKeys(actionVariables,prefix){return actionVariables.map(actionVariable=>({...actionVariable,name:`${prefix}${actionVariable.name}`}))}function getAlwaysProvidedActionVariables(){const result=[];result.push({name:AlertProvidedActionVariables.alertId,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.triggersActionsUI.actionVariables.alertIdLabel",{defaultMessage:"The id of the alert."})});result.push({name:AlertProvidedActionVariables.alertName,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.triggersActionsUI.actionVariables.alertNameLabel",{defaultMessage:"The name of the alert."})});result.push({name:AlertProvidedActionVariables.spaceId,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.triggersActionsUI.actionVariables.spaceIdLabel",{defaultMessage:"The spaceId of the alert."})});result.push({name:AlertProvidedActionVariables.tags,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.triggersActionsUI.actionVariables.tagsLabel",{defaultMessage:"The tags of the alert."})});result.push({name:"date",description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.triggersActionsUI.actionVariables.dateLabel",{defaultMessage:"The date the alert scheduled the action."})});result.push({name:"alertInstanceId",description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.triggersActionsUI.actionVariables.alertInstanceIdLabel",{defaultMessage:"The alert instance id that scheduled actions for the alert."})});result.push({name:"alertActionGroup",description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.triggersActionsUI.actionVariables.alertActionGroupLabel",{defaultMessage:"The alert action group that was used to scheduled actions for the alert."})});result.push({name:"alertActionSubgroup",description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.triggersActionsUI.actionVariables.alertActionSubgroupLabel",{defaultMessage:"The alert action subgroup that was used to scheduled actions for the alert."})});result.push({name:"alertActionGroupName",description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.triggersActionsUI.actionVariables.alertActionGroupNameLabel",{defaultMessage:"The human readable name of the alert action group that was used to scheduled actions for the alert."})});result.push({name:"kibanaBaseUrl",description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.triggersActionsUI.actionVariables.kibanaBaseUrlLabel",{defaultMessage:"The configured server.publicBaseUrl value or empty string if not configured."})});return result}},197:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(198);case"v7light":return __webpack_require__(200);case"v8dark":return __webpack_require__(202);case"v8light":return __webpack_require__(204)}},198:function(module,exports,__webpack_require__){var api=__webpack_require__(25);var content=__webpack_require__(199);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},199:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(26);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".actConnectorModal {\n  z-index: 9000; }\n\n.euiComboBoxOptionsList {\n  z-index: 9001; }\n",""]);module.exports=exports},200:function(module,exports,__webpack_require__){var api=__webpack_require__(25);var content=__webpack_require__(201);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},201:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(26);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".actConnectorModal {\n  z-index: 9000; }\n\n.euiComboBoxOptionsList {\n  z-index: 9001; }\n",""]);module.exports=exports},202:function(module,exports,__webpack_require__){var api=__webpack_require__(25);var content=__webpack_require__(203);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},203:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(26);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".actConnectorModal {\n  z-index: 9000; }\n\n.euiComboBoxOptionsList {\n  z-index: 9001; }\n",""]);module.exports=exports},204:function(module,exports,__webpack_require__){var api=__webpack_require__(25);var content=__webpack_require__(205);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},205:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(26);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".actConnectorModal {\n  z-index: 9000; }\n\n.euiComboBoxOptionsList {\n  z-index: 9001; }\n",""]);module.exports=exports},55:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"ActionForm",(function(){return ActionForm}));__webpack_require__.d(__webpack_exports__,"default",(function(){return ActionForm}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(8);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);var action_connector_api=__webpack_require__(35);var section_loading=__webpack_require__(90);var action_connector_form=__webpack_require__(96);var connector_reducer=__webpack_require__(97);var connector_add_modal=__webpack_require__(197);var lib_capabilities=__webpack_require__(87);var kibana=__webpack_require__(34);var value_validators=__webpack_require__(5);const ConnectorAddModal=({actionType:actionType,onClose:onClose,postSaveEventHandler:postSaveEventHandler,consumer:consumer,actionTypeRegistry:actionTypeRegistry})=>{const{http:http,notifications:{toasts:toasts},application:{capabilities:capabilities}}=Object(kibana["b"])().services;let hasErrors=false;const initialConnector=Object(external_kbnSharedDeps_React_["useMemo"])(()=>({actionTypeId:actionType.id,config:{},secrets:{}}),[actionType.id]);const[isSaving,setIsSaving]=Object(external_kbnSharedDeps_React_["useState"])(false);const canSave=Object(lib_capabilities["d"])(capabilities);const reducer=Object(connector_reducer["a"])();const[{connector:connector},dispatch]=Object(external_kbnSharedDeps_React_["useReducer"])(reducer,{connector:initialConnector});const setConnector=value=>{dispatch({command:{type:"setConnector"},payload:{key:"connector",value:value}})};const[serverError,setServerError]=Object(external_kbnSharedDeps_React_["useState"])(undefined);const closeModal=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setConnector(initialConnector);setServerError(undefined);onClose()},[initialConnector,onClose]);const actionTypeModel=actionTypeRegistry.get(actionType.id);const{configErrors:configErrors,connectorBaseErrors:connectorBaseErrors,connectorErrors:connectorErrors,secretsErrors:secretsErrors}=Object(action_connector_form["b"])(connector,actionTypeModel);hasErrors=!!Object.keys(connectorErrors).find(errorKey=>connectorErrors[errorKey].length>=1);const onActionConnectorSave=async()=>await Object(action_connector_api["a"])({http:http,connector:connector}).then(savedConnector=>{if(toasts){toasts.addSuccess(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.addModalConnectorForm.updateSuccessNotificationText",{defaultMessage:"Created '{connectorName}'",values:{connectorName:savedConnector.name}}))}return savedConnector}).catch(errorRes=>{setServerError(errorRes);return undefined});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],{className:"actConnectorModal","data-test-subj":"connectorAddModal",onClose:closeModal},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"m",alignItems:"center"},actionTypeModel&&actionTypeModel.iconClass?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:actionTypeModel.iconClass,size:"xl"})):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",{id:"flyoutTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"{actionTypeName} connector",id:"xpack.triggersActionsUI.sections.addModalConnectorForm.flyoutTitle",values:{actionTypeName:actionType.name}}))))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],null,external_kbnSharedDeps_React_default.a.createElement(action_connector_form["a"],{connector:connector,actionTypeName:actionType.name,dispatch:dispatch,serverError:serverError,errors:connectorErrors,actionTypeRegistry:actionTypeRegistry,consumer:consumer})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:closeModal},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.addModalConnectorForm.cancelButtonLabel",{defaultMessage:"Cancel"})),canSave?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,color:"secondary","data-test-subj":"saveActionButtonModal",type:"submit",iconType:"check",isLoading:isSaving,onClick:async()=>{if(hasErrors){setConnector(Object(value_validators["b"])(connector,configErrors,secretsErrors,connectorBaseErrors));return}setIsSaving(true);const savedAction=await onActionConnectorSave();setIsSaving(false);if(savedAction){if(postSaveEventHandler){postSaveEventHandler(savedAction)}closeModal()}}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.addModalConnectorForm.saveButtonLabel",defaultMessage:"Save"})):null))};var external_kbnSharedDeps_Lodash_=__webpack_require__(4);var types=__webpack_require__(9);var check_action_type_enabled=__webpack_require__(98);var action_variables=__webpack_require__(124);const preconfiguredMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.actionForm.preconfiguredTitleMessage",{defaultMessage:"(preconfigured)"});const ActionTypeForm=({actionItem:actionItem,actionConnector:actionConnector,actionParamsErrors:actionParamsErrors,index:index,onAddConnector:onAddConnector,onConnectorSelected:onConnectorSelected,onDeleteAction:onDeleteAction,setActionParamsProperty:setActionParamsProperty,actionTypesIndex:actionTypesIndex,connectors:connectors,defaultActionGroupId:defaultActionGroupId,defaultActionMessage:defaultActionMessage,messageVariables:messageVariables,actionGroups:actionGroups,setActionGroupIdByIndex:setActionGroupIdByIndex,actionTypeRegistry:actionTypeRegistry,isActionGroupDisabledForActionType:isActionGroupDisabledForActionType,defaultParams:defaultParams})=>{var _actionGroups$find,_selectedActionGroup$;const{application:{capabilities:capabilities}}=Object(kibana["b"])().services;const[isOpen,setIsOpen]=Object(external_kbnSharedDeps_React_["useState"])(true);const[availableActionVariables,setAvailableActionVariables]=Object(external_kbnSharedDeps_React_["useState"])([]);const defaultActionGroup=actionGroups===null||actionGroups===void 0?void 0:actionGroups.find(({id:id})=>id===defaultActionGroupId);const selectedActionGroup=(_actionGroups$find=actionGroups===null||actionGroups===void 0?void 0:actionGroups.find(({id:id})=>id===actionItem.group))!==null&&_actionGroups$find!==void 0?_actionGroups$find:defaultActionGroup;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{setAvailableActionVariables(messageVariables?getAvailableActionVariables(messageVariables,selectedActionGroup):[]);if(defaultParams){for(const[key,paramValue]of Object.entries(defaultParams)){setActionParamsProperty(key,paramValue,index)}}},[actionItem.group]);const canSave=Object(lib_capabilities["d"])(capabilities);const getSelectedOptions=actionItemId=>{const selectedConnector=connectors.find(connector=>connector.id===actionItemId);if(!selectedConnector||actionTypesIndex&&!actionTypesIndex[selectedConnector.actionTypeId].enabledInConfig&&!selectedConnector.isPreconfigured){return[]}const optionTitle=`${selectedConnector.name} ${selectedConnector.isPreconfigured?preconfiguredMessage:""}`;return[{label:optionTitle,value:optionTitle,id:actionItemId,"data-test-subj":"itemActionConnector"}]};const actionType=actionTypesIndex[actionItem.actionTypeId];const actionGroupDisplay=(actionGroupId,actionGroupName,actionTypeId)=>isActionGroupDisabledForActionType?isActionGroupDisabledForActionType(actionGroupId,actionTypeId)?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.addNewActionConnectorActionGroup.display",{defaultMessage:"{actionGroupName} (Not Currently Supported)",values:{actionGroupName:actionGroupName}}):actionGroupName:actionGroupName;const isActionGroupDisabled=(actionGroupId,actionTypeId)=>isActionGroupDisabledForActionType?isActionGroupDisabledForActionType(actionGroupId,actionTypeId):false;const optionsList=connectors.filter(connectorItem=>connectorItem.actionTypeId===actionItem.actionTypeId&&(actionType.enabledInConfig||connectorItem.isPreconfigured)).map(({name:name,id:id,isPreconfigured:isPreconfigured})=>({label:`${name} ${isPreconfigured?preconfiguredMessage:""}`,key:id,id:id}));const actionTypeRegistered=actionTypeRegistry.get(actionConnector.actionTypeId);if(!actionTypeRegistered)return null;const ParamsFieldsComponent=actionTypeRegistered.actionParamsFields;const checkEnabledResult=Object(check_action_type_enabled["a"])(actionTypesIndex[actionConnector.actionTypeId],connectors.filter(connector=>connector.isPreconfigured));const accordionContent=checkEnabledResult.isEnabled?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,actionGroups&&selectedActionGroup&&setActionGroupIdByIndex&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{component:"div"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormControlLayout"],{fullWidth:true,prepend:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormLabel"],{htmlFor:`addNewActionConnectorActionGroup-${actionItem.actionTypeId}`},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.alertForm.actionRunWhenInActionGroup",defaultMessage:"Run when"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperSelect"],{fullWidth:true,id:`addNewActionConnectorActionGroup-${actionItem.actionTypeId}`,"data-test-subj":`addNewActionConnectorActionGroup-${index}`,options:actionGroups.map(({id:value,name:name})=>({value:value,inputDisplay:actionGroupDisplay(value,name,actionItem.actionTypeId),disabled:isActionGroupDisabled(value,actionItem.actionTypeId),"data-test-subj":`addNewActionConnectorActionGroup-${index}-option-${value}`})),valueOfSelected:selectedActionGroup.id,onChange:group=>{setActionGroupIdByIndex(group,index)}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{component:"div"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.alertForm.actionIdLabel",defaultMessage:"{connectorInstance} connector",values:{connectorInstance:actionTypesIndex?actionTypesIndex[actionConnector.actionTypeId].name:actionConnector.actionTypeId}}),labelAppend:canSave&&actionTypesIndex&&actionTypesIndex[actionConnector.actionTypeId].enabledInConfig?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs","data-test-subj":`addNewActionConnectorButton-${actionItem.actionTypeId}`,onClick:onAddConnector},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Add connector",id:"xpack.triggersActionsUI.sections.alertForm.addNewConnectorEmptyButton"})):null},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{fullWidth:true,singleSelection:{asPlainText:true},options:optionsList,id:`selectActionConnector-${actionItem.id}`,"data-test-subj":`selectActionConnector-${actionItem.actionTypeId}`,selectedOptions:getSelectedOptions(actionItem.id),onChange:selectedOptions=>{var _selectedOptions$0$id;onConnectorSelected((_selectedOptions$0$id=selectedOptions[0].id)!==null&&_selectedOptions$0$id!==void 0?_selectedOptions$0$id:"")},isClearable:false})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xl"}),ParamsFieldsComponent?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiErrorBoundary"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Suspense"],{fallback:null},external_kbnSharedDeps_React_default.a.createElement(ParamsFieldsComponent,{actionParams:actionItem.params,index:index,errors:actionParamsErrors.errors,editAction:setActionParamsProperty,messageVariables:availableActionVariables,defaultMessage:(_selectedActionGroup$=selectedActionGroup===null||selectedActionGroup===void 0?void 0:selectedActionGroup.defaultActionMessage)!==null&&_selectedActionGroup$!==void 0?_selectedActionGroup$:defaultActionMessage,actionConnector:actionConnector}))):null):checkEnabledResult.messageCard;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:index},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{initialIsOpen:true,id:index.toString(),onToggle:setIsOpen,paddingSize:"l",className:"actAccordionActionForm",buttonContentClassName:"actAccordionActionForm__button","data-test-subj":`alertActionAccordion-${index}`,buttonContent:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"l",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:actionTypeRegistered.iconClass,size:"m"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"{actionConnectorName}",id:"xpack.triggersActionsUI.sections.alertForm.existingAlertActionTypeEditTitle",values:{actionConnectorName:`${actionConnector.name} ${actionConnector.isPreconfigured?preconfiguredMessage:""}`}})),selectedActionGroup&&!isOpen&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],null,selectedActionGroup.name)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},checkEnabledResult.isEnabled===false&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"alert",color:"danger",content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.actionDisabledTitle",{defaultMessage:"This action is disabled"}),position:"right"})))))))),extraAction:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"minusInCircle",color:"danger",className:"actAccordionActionForm__extraAction","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.accordion.deleteIconAriaLabel",{defaultMessage:"Delete"}),onClick:onDeleteAction})},accordionContent),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))};function getAvailableActionVariables(actionVariables,actionGroup){return Object(action_variables["b"])(actionGroup!==null&&actionGroup!==void 0&&actionGroup.omitOptionalMessageVariables?Object(external_kbnSharedDeps_Lodash_["pick"])(actionVariables,...types["l"]):actionVariables).sort((a,b)=>a.name.toUpperCase().localeCompare(b.name.toUpperCase()))}const AddConnectorInline=({actionTypesIndex:actionTypesIndex,actionItem:actionItem,index:index,connectors:connectors,onAddConnector:onAddConnector,onDeleteConnector:onDeleteConnector,onSelectConnector:onSelectConnector,actionTypeRegistry:actionTypeRegistry,emptyActionsIds:emptyActionsIds})=>{const{application:{capabilities:capabilities}}=Object(kibana["b"])().services;const canSave=Object(lib_capabilities["d"])(capabilities);const[connectorOptionsList,setConnectorOptionsList]=Object(external_kbnSharedDeps_React_["useState"])([]);const[isEmptyActionId,setIsEmptyActionId]=Object(external_kbnSharedDeps_React_["useState"])(false);const[errors,setErrors]=Object(external_kbnSharedDeps_React_["useState"])([]);const actionTypeName=actionTypesIndex?actionTypesIndex[actionItem.actionTypeId].name:actionItem.actionTypeId;const actionType=actionTypesIndex[actionItem.actionTypeId];const actionTypeRegistered=actionTypeRegistry.get(actionItem.actionTypeId);const noConnectorsLabel=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.alertForm.emptyConnectorsLabel",defaultMessage:"No {actionTypeName} connectors",values:{actionTypeName:actionTypeName}});const unableToLoadConnectorLabel=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"danger"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.alertForm.unableToLoadConnectorTitle",defaultMessage:"Unable to load connector."}));Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(connectors){const altConnectorOptions=connectors.filter(connector=>connector.actionTypeId===actionItem.actionTypeId&&((actionType===null||actionType===void 0?void 0:actionType.enabledInConfig)||connector.isPreconfigured)).map(({name:name,id:id,isPreconfigured:isPreconfigured})=>({label:`${name} ${isPreconfigured?"(preconfigured)":""}`,key:id,id:id}));setConnectorOptionsList(altConnectorOptions);if(altConnectorOptions.length>0){setErrors([`Unable to load ${actionTypeRegistered.actionTypeTitle} connector`])}}setIsEmptyActionId(!!emptyActionsIds.find(emptyId=>actionItem.id===emptyId))},[]);const connectorsDropdown=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{component:"div"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.alertForm.connectorAddInline.actionIdLabel",defaultMessage:"Use another {connectorInstance} connector",values:{connectorInstance:actionTypeName}}),labelAppend:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs","data-test-subj":`addNewActionConnectorButton-${actionItem.actionTypeId}`,onClick:onAddConnector},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Add connector",id:"xpack.triggersActionsUI.sections.alertForm.connectorAddInline.addNewConnectorEmptyButton"})),error:errors,isInvalid:errors.length>0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{fullWidth:true,singleSelection:{asPlainText:true},options:connectorOptionsList,id:`selectActionConnector-${actionItem.id}-${index}`,"data-test-subj":`selectActionConnector-${actionItem.actionTypeId}-${index}`,onChange:selectedOptions=>{setTimeout(()=>{var _selectedOptions$0$id;onSelectConnector((_selectedOptions$0$id=selectedOptions[0].id)!==null&&_selectedOptions$0$id!==void 0?_selectedOptions$0$id:"")})},isClearable:false}))));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:index},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{initialIsOpen:true,id:index.toString(),className:"actAccordionActionForm",buttonContentClassName:"actAccordionActionForm__button","data-test-subj":`alertActionAccordion-${index}`,buttonContent:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:actionTypeRegistered.iconClass,size:"m"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"{actionConnectorName}",id:"xpack.triggersActionsUI.sections.alertForm.newAlertActionTypeEditTitle",values:{actionConnectorName:actionTypeRegistered.actionTypeTitle}})))),!isEmptyActionId&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"alert",size:"m",color:"danger","data-test-subj":`alertActionAccordionErrorTooltip`,content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Unable to load connector.",id:"xpack.triggersActionsUI.sections.alertForm.unableToLoadConnectorTitle'"})}))),extraAction:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"minusInCircle",color:"danger",className:"actAccordionActionForm__extraAction","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.accordion.deleteIconAriaLabel",{defaultMessage:"Delete"}),onClick:onDeleteConnector}),paddingSize:"l"},canSave?connectorOptionsList.length>0?connectorsDropdown:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:isEmptyActionId?noConnectorsLabel:unableToLoadConnectorLabel,actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"primary",fill:true,size:"s","data-test-subj":`createActionConnectorButton-${index}`,onClick:onAddConnector},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.alertForm.addConnectorButtonLabel",defaultMessage:"Create a connector"}))}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:noConnectorsLabel},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.alertForm.unauthorizedToCreateForEmptyConnectors",defaultMessage:"Only authorized users can configure a connector. Contact your administrator."})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}))};var action_type_compare=__webpack_require__(104);var constants=__webpack_require__(12);const ActionForm=({actions:actions,defaultActionGroupId:defaultActionGroupId,setActionIdByIndex:setActionIdByIndex,setActionGroupIdByIndex:setActionGroupIdByIndex,setActions:setActions,setActionParamsProperty:setActionParamsProperty,actionTypes:actionTypes,messageVariables:messageVariables,actionGroups:actionGroups,defaultActionMessage:defaultActionMessage,setHasActionsDisabled:setHasActionsDisabled,setHasActionsWithBrokenConnector:setHasActionsWithBrokenConnector,actionTypeRegistry:actionTypeRegistry,getDefaultActionParams:getDefaultActionParams,isActionGroupDisabledForActionType:isActionGroupDisabledForActionType})=>{const{http:http,notifications:{toasts:toasts}}=Object(kibana["b"])().services;const[addModalVisible,setAddModalVisibility]=Object(external_kbnSharedDeps_React_["useState"])(false);const[activeActionItem,setActiveActionItem]=Object(external_kbnSharedDeps_React_["useState"])(undefined);const[isAddActionPanelOpen,setIsAddActionPanelOpen]=Object(external_kbnSharedDeps_React_["useState"])(true);const[connectors,setConnectors]=Object(external_kbnSharedDeps_React_["useState"])([]);const[isLoadingConnectors,setIsLoadingConnectors]=Object(external_kbnSharedDeps_React_["useState"])(false);const[isLoadingActionTypes,setIsLoadingActionTypes]=Object(external_kbnSharedDeps_React_["useState"])(false);const[actionTypesIndex,setActionTypesIndex]=Object(external_kbnSharedDeps_React_["useState"])(undefined);const[emptyActionsIds,setEmptyActionsIds]=Object(external_kbnSharedDeps_React_["useState"])([]);const closeAddConnectorModal=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setAddModalVisibility(false),[setAddModalVisibility]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{(async()=>{try{setIsLoadingActionTypes(true);const registeredActionTypes=(actionTypes!==null&&actionTypes!==void 0?actionTypes:await Object(action_connector_api["d"])({http:http})).sort((a,b)=>a.name.localeCompare(b.name));const index={};for(const actionTypeItem of registeredActionTypes){index[actionTypeItem.id]=actionTypeItem}setActionTypesIndex(index)}catch(e){toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.unableToLoadActionTypesMessage",{defaultMessage:"Unable to load action types"})})}finally{setIsLoadingActionTypes(false)}})()},[]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{(async()=>{try{setIsLoadingConnectors(true);const loadedConnectors=await Object(action_connector_api["e"])({http:http});setConnectors(loadedConnectors)}catch(e){toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.unableToLoadActionsMessage",{defaultMessage:"Unable to load connectors"})})}finally{setIsLoadingConnectors(false)}})()},[]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const setActionTypesAvalilability=()=>{const preconfiguredConnectors=connectors.filter(connector=>connector.isPreconfigured);const hasActionsDisabled=actions.some(action=>actionTypesIndex&&!actionTypesIndex[action.actionTypeId].enabled&&!Object(check_action_type_enabled["a"])(actionTypesIndex[action.actionTypeId],preconfiguredConnectors).isEnabled);if(setHasActionsDisabled){setHasActionsDisabled(hasActionsDisabled)}};if(connectors.length>0&&actionTypesIndex){setActionTypesAvalilability()}},[connectors,actionTypesIndex]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const hasActionWithBrokenConnector=actions.some(action=>!connectors.find(connector=>connector.id===action.id));if(setHasActionsWithBrokenConnector){setHasActionsWithBrokenConnector(hasActionWithBrokenConnector)}},[actions,connectors]);function addActionType(actionTypeModel){if(!defaultActionGroupId){toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.unableToAddAction",{defaultMessage:"Unable to add action, because default action group is not defined"})});return}setIsAddActionPanelOpen(false);const actionTypeConnectors=connectors.filter(field=>field.actionTypeId===actionTypeModel.id);if(actionTypeConnectors.length>0){actions.push({id:"",actionTypeId:actionTypeModel.id,group:defaultActionGroupId,params:{}});setActionIdByIndex(actionTypeConnectors[0].id,actions.length-1)}if(actionTypeConnectors.length===0){actions.push({id:"",actionTypeId:actionTypeModel.id,group:defaultActionGroupId,params:{}});setActionIdByIndex(actions.length.toString(),actions.length-1);setEmptyActionsIds([...emptyActionsIds,actions.length.toString()])}}let actionTypeNodes=null;let hasDisabledByLicenseActionTypes=false;if(actionTypesIndex){const preconfiguredConnectors=connectors.filter(connector=>connector.isPreconfigured);actionTypeNodes=actionTypeRegistry.list().filter(({id:id})=>actionTypes!==null&&actionTypes!==void 0?actionTypes:!constants["DEFAULT_HIDDEN_ACTION_TYPES"].includes(id)&&!constants["DEFAULT_HIDDEN_ONLY_ON_ALERTS_ACTION_TYPES"].includes(id)).filter(item=>actionTypesIndex[item.id]).filter(item=>!!item.actionParamsFields).sort((a,b)=>Object(action_type_compare["a"])(actionTypesIndex[a.id],actionTypesIndex[b.id],preconfiguredConnectors)).map((function(item,index){const actionType=actionTypesIndex[item.id];const checkEnabledResult=Object(check_action_type_enabled["a"])(actionTypesIndex[item.id],preconfiguredConnectors);if(!actionType.enabledInConfig&&!checkEnabledResult.isEnabled){return null}if(!actionType.enabledInLicense){hasDisabledByLicenseActionTypes=true}const keyPadItem=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiKeyPadMenuItem"],{key:index,isDisabled:!checkEnabledResult.isEnabled,"data-test-subj":`${item.id}-ActionTypeSelectOption`,label:actionTypesIndex[item.id].name,onClick:()=>addActionType(item)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{size:"xl",type:item.iconClass}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,key:`keypad-${item.id}`},checkEnabledResult.isEnabled&&keyPadItem,checkEnabledResult.isEnabled===false&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:checkEnabledResult.message},keyPadItem))}))}return isLoadingConnectors?external_kbnSharedDeps_React_default.a.createElement(section_loading["a"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.alertForm.loadingConnectorsDescription",defaultMessage:"Loading connectors…"})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Actions",id:"xpack.triggersActionsUI.sections.alertForm.actionSectionsTitle"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),actionTypesIndex&&actions.map((actionItem,index)=>{var _actionTypeRegistry$g;const actionConnector=connectors.find(field=>field.id===actionItem.id);if(!actionConnector){return external_kbnSharedDeps_React_default.a.createElement(AddConnectorInline,{actionTypesIndex:actionTypesIndex,actionItem:actionItem,index:index,key:`action-form-action-at-${index}`,actionTypeRegistry:actionTypeRegistry,emptyActionsIds:emptyActionsIds,connectors:connectors,onDeleteConnector:()=>{const updatedActions=actions.filter((_item,i)=>i!==index);setActions(updatedActions);setIsAddActionPanelOpen(updatedActions.filter(item=>item.id!==actionItem.id).length===0);setActiveActionItem(undefined)},onAddConnector:()=>{setActiveActionItem({actionTypeId:actionItem.actionTypeId,indices:actions.map((item,idx)=>item.id===actionItem.id?idx:-1).filter(idx=>idx>=0)});setAddModalVisibility(true)},onSelectConnector:connectorId=>{setActionIdByIndex(connectorId,index)}})}const actionParamsErrors=(_actionTypeRegistry$g=actionTypeRegistry.get(actionItem.actionTypeId))===null||_actionTypeRegistry$g===void 0?void 0:_actionTypeRegistry$g.validateParams(actionItem.params);return external_kbnSharedDeps_React_default.a.createElement(ActionTypeForm,{actionItem:actionItem,actionConnector:actionConnector,actionParamsErrors:actionParamsErrors,index:index,key:`action-form-action-at-${index}`,setActionParamsProperty:setActionParamsProperty,actionTypesIndex:actionTypesIndex,connectors:connectors,defaultActionGroupId:defaultActionGroupId,messageVariables:messageVariables,actionGroups:actionGroups,defaultActionMessage:defaultActionMessage,defaultParams:getDefaultActionParams===null||getDefaultActionParams===void 0?void 0:getDefaultActionParams(actionItem.actionTypeId,actionItem.group),isActionGroupDisabledForActionType:isActionGroupDisabledForActionType,setActionGroupIdByIndex:setActionGroupIdByIndex,onAddConnector:()=>{setActiveActionItem({actionTypeId:actionItem.actionTypeId,indices:[index]});setAddModalVisibility(true)},onConnectorSelected:id=>{setActionIdByIndex(id,index)},actionTypeRegistry:actionTypeRegistry,onDeleteAction:()=>{const updatedActions=actions.filter((_item,i)=>i!==index);setActions(updatedActions);setIsAddActionPanelOpen(updatedActions.filter(item=>item.id!==actionItem.id).length===0);setActiveActionItem(undefined)}})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),isAddActionPanelOpen?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{id:"alertActionTypeTitle",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Select an action type",id:"xpack.triggersActionsUI.sections.alertForm.selectAlertActionTypeTitle"})))),hasDisabledByLicenseActionTypes&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:constants["VIEW_LICENSE_OPTIONS_LINK"],target:"_blank",external:true,className:"actActionForm__getMoreActionsLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Get more actions",id:"xpack.triggersActionsUI.sections.actionForm.getMoreActionsTitle"})))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"m",wrap:true},isLoadingActionTypes?external_kbnSharedDeps_React_default.a.createElement(section_loading["a"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.alertForm.loadingActionTypesDescription",defaultMessage:"Loading action types…"})):actionTypeNodes)):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s","data-test-subj":"addAlertActionButton",onClick:()=>setIsAddActionPanelOpen(true)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.alertForm.addActionButtonLabel",defaultMessage:"Add action"})))),actionTypesIndex&&activeActionItem&&addModalVisible?external_kbnSharedDeps_React_default.a.createElement(ConnectorAddModal,{actionType:actionTypesIndex[activeActionItem.actionTypeId],onClose:closeAddConnectorModal,postSaveEventHandler:savedAction=>{connectors.push(savedAction);const indicesToUpdate=activeActionItem.indices||[];indicesToUpdate.forEach(index=>setActionIdByIndex(savedAction.id,index))},actionTypeRegistry:actionTypeRegistry}):null)}},87:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return hasShowActionsCapability}));__webpack_require__.d(__webpack_exports__,"d",(function(){return hasSaveActionsCapability}));__webpack_require__.d(__webpack_exports__,"c",(function(){return hasExecuteActionsCapability}));__webpack_require__.d(__webpack_exports__,"b",(function(){return hasDeleteActionsCapability}));__webpack_require__.d(__webpack_exports__,"a",(function(){return hasAllPrivilege}));const hasShowActionsCapability=capabilities=>{var _capabilities$actions;return capabilities===null||capabilities===void 0?void 0:(_capabilities$actions=capabilities.actions)===null||_capabilities$actions===void 0?void 0:_capabilities$actions.show};const hasSaveActionsCapability=capabilities=>{var _capabilities$actions2;return capabilities===null||capabilities===void 0?void 0:(_capabilities$actions2=capabilities.actions)===null||_capabilities$actions2===void 0?void 0:_capabilities$actions2.save};const hasExecuteActionsCapability=capabilities=>{var _capabilities$actions3;return capabilities===null||capabilities===void 0?void 0:(_capabilities$actions3=capabilities.actions)===null||_capabilities$actions3===void 0?void 0:_capabilities$actions3.execute};const hasDeleteActionsCapability=capabilities=>{var _capabilities$actions4;return capabilities===null||capabilities===void 0?void 0:(_capabilities$actions4=capabilities.actions)===null||_capabilities$actions4===void 0?void 0:_capabilities$actions4.delete};function hasAllPrivilege(alert,alertType){var _alertType$authorized,_alertType$authorized2;return(_alertType$authorized=alertType===null||alertType===void 0?void 0:(_alertType$authorized2=alertType.authorizedConsumers[alert.consumer])===null||_alertType$authorized2===void 0?void 0:_alertType$authorized2.all)!==null&&_alertType$authorized!==void 0?_alertType$authorized:false}function hasReadPrivilege(alert,alertType){var _alertType$authorized3,_alertType$authorized4;return(_alertType$authorized3=alertType===null||alertType===void 0?void 0:(_alertType$authorized4=alertType.authorizedConsumers[alert.consumer])===null||_alertType$authorized4===void 0?void 0:_alertType$authorized4.read)!==null&&_alertType$authorized3!==void 0?_alertType$authorized3:false}},90:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SectionLoading}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2);var _elastic_eui__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__);const SectionLoading=({children:children})=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiEmptyPrompt"],{title:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiLoadingSpinner"],{size:"xl"}),body:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiText"],{color:"subdued"},children),"data-test-subj":"sectionLoading"})},96:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getConnectorErrors}));__webpack_require__.d(__webpack_exports__,"a",(function(){return ActionConnectorForm}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2);var _elastic_eui__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__);var _kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8);var _kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__);var _lib_capabilities__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(87);var _common_lib_kibana__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(34);var _components_section_loading__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(90);function validateBaseProperties(actionObject){const validationResult={errors:{}};const verrors={name:new Array};validationResult.errors=verrors;if(!actionObject.name){verrors.name.push(_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("xpack.triggersActionsUI.sections.actionConnectorForm.error.requiredNameText",{defaultMessage:"Name is required."}))}return validationResult}function getConnectorErrors(connector,actionTypeModel){const connectorValidationResult=actionTypeModel===null||actionTypeModel===void 0?void 0:actionTypeModel.validateConnector(connector);const configErrors=connectorValidationResult.config?connectorValidationResult.config.errors:{};const secretsErrors=connectorValidationResult.secrets?connectorValidationResult.secrets.errors:{};const connectorBaseErrors=validateBaseProperties(connector).errors;const connectorErrors={...configErrors,...secretsErrors,...connectorBaseErrors};return{configErrors:configErrors,secretsErrors:secretsErrors,connectorBaseErrors:connectorBaseErrors,connectorErrors:connectorErrors}}const ActionConnectorForm=({connector:connector,dispatch:dispatch,actionTypeName:actionTypeName,serverError:serverError,errors:errors,actionTypeRegistry:actionTypeRegistry,consumer:consumer})=>{const{docLinks:docLinks,application:{capabilities:capabilities}}=Object(_common_lib_kibana__WEBPACK_IMPORTED_MODULE_5__["b"])().services;const canSave=Object(_lib_capabilities__WEBPACK_IMPORTED_MODULE_4__["d"])(capabilities);const setActionProperty=(key,value)=>{dispatch({command:{type:"setProperty"},payload:{key:key,value:value}})};const setActionConfigProperty=(key,value)=>{dispatch({command:{type:"setConfigProperty"},payload:{key:key,value:value}})};const setActionSecretsProperty=(key,value)=>{dispatch({command:{type:"setSecretsProperty"},payload:{key:key,value:value}})};const actionTypeRegistered=actionTypeRegistry.get(connector.actionTypeId);if(!actionTypeRegistered)return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__["Fragment"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiCallOut"],{title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("xpack.triggersActionsUI.sections.actionConnectorForm.actions.actionTypeConfigurationWarningTitleText",{defaultMessage:"Action type not registered"}),color:"warning",iconType:"help"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiText"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.actionConnectorForm.actions.actionConfigurationWarningDescriptionText",defaultMessage:"To create this connector, you must configure at least one {actionType} account. {docLink}",values:{actionType:actionTypeName!==null&&actionTypeName!==void 0?actionTypeName:connector.actionTypeId,docLink:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiLink"],{href:docLinks.links.alerting.actionTypes,target:"_blank"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.actionConnectorForm.actions.actionConfigurationWarningHelpLinkText",defaultMessage:"Learn more."}))}})))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiSpacer"],null));const FieldsComponent=actionTypeRegistered.actionConnectorFields;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiForm"],{isInvalid:!!serverError,error:serverError===null||serverError===void 0?void 0:serverError.body.message},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFormRow"],{id:"actionName",fullWidth:true,label:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.actionConnectorForm.actionNameLabel",defaultMessage:"Connector name"}),isInvalid:errors.name.length>0&&connector.name!==undefined,error:errors.name},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFieldText"],{fullWidth:true,readOnly:!canSave,isInvalid:errors.name.length>0&&connector.name!==undefined,name:"name",placeholder:"Untitled","data-test-subj":"nameInput",value:connector.name||"",onChange:e=>{setActionProperty("name",e.target.value)},onBlur:()=>{if(!connector.name){setActionProperty("name","")}}})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiSpacer"],{size:"m"}),FieldsComponent!==null?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiTitle"],{size:"xxs"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h4",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.actionConnectorForm.connectorSettingsLabel",defaultMessage:"Connector settings"}))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiSpacer"],{size:"s"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiErrorBoundary"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__["Suspense"],{fallback:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_section_loading__WEBPACK_IMPORTED_MODULE_6__["a"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.actionConnectorForm.loadingConnectorSettingsDescription",defaultMessage:"Loading connector settings…"}))},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FieldsComponent,{action:connector,errors:errors,readOnly:!canSave,editActionConfig:setActionConfigProperty,editActionSecrets:setActionSecretsProperty,consumer:consumer})))):null)}},97:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createConnectorReducer}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);var lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);const createConnectorReducer=()=>(state,action)=>{const{connector:connector}=state;switch(action.command.type){case"setConnector":{const{key:key,value:value}=action.payload;if(key==="connector"){return{...state,connector:value}}else{return state}}case"setProperty":{const{key:key,value:value}=action.payload;if(Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isEqual"])(connector[key],value)){return state}else{return{...state,connector:{...connector,[key]:value}}}}case"setConfigProperty":{const{key:key,value:value}=action.payload;if(Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isEqual"])(connector.config[key],value)){return state}else{return{...state,connector:{...connector,config:{...connector.config,[key]:value}}}}}case"setSecretsProperty":{const{key:key,value:value}=action.payload;if(Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isEqual"])(connector.secrets[key],value)){return state}else{return{...state,connector:{...connector,secrets:{...connector.secrets,[key]:value}}}}}}}},98:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return checkActionTypeEnabled}));__webpack_require__.d(__webpack_exports__,"a",(function(){return checkActionFormActionTypeEnabled}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4);var lodash__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__);var _kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8);var _kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__);var _elastic_eui__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2);var _elastic_eui__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__);var _common_constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(12);var _check_action_type_enabled_scss__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(105);var _check_action_type_enabled_scss__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_check_action_type_enabled_scss__WEBPACK_IMPORTED_MODULE_6__);const getLicenseCheckResult=actionType=>({isEnabled:false,message:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("xpack.triggersActionsUI.checkActionTypeEnabled.actionTypeDisabledByLicenseMessage",{defaultMessage:"This connector requires a {minimumLicenseRequired} license.",values:{minimumLicenseRequired:Object(lodash__WEBPACK_IMPORTED_MODULE_1__["upperFirst"])(actionType.minimumLicenseRequired)}}),messageCard:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__["EuiCard"],{titleSize:"xs",title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.actionTypeDisabledByLicenseMessageTitle",{defaultMessage:"This feature requires a {minimumLicenseRequired} license.",values:{minimumLicenseRequired:Object(lodash__WEBPACK_IMPORTED_MODULE_1__["upperFirst"])(actionType.minimumLicenseRequired)}}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.actionTypeDisabledByLicenseMessageDescription",{defaultMessage:"To re-enable this action, please upgrade your license."}),className:"actCheckActionTypeEnabled__disabledActionWarningCard",children:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__["EuiLink"],{href:_common_constants__WEBPACK_IMPORTED_MODULE_5__["VIEW_LICENSE_OPTIONS_LINK"],target:"_blank"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__["FormattedMessage"],{defaultMessage:"View license options",id:"xpack.triggersActionsUI.sections.alertForm.actionTypeDisabledByLicenseLinkTitle"}))})});const configurationCheckResult={isEnabled:false,message:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("xpack.triggersActionsUI.checkActionTypeEnabled.actionTypeDisabledByConfigMessage",{defaultMessage:"This connector is disabled by the Kibana configuration."}),messageCard:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__["EuiCard"],{title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.actionTypeDisabledByConfigMessageTitle",{defaultMessage:"This feature is disabled by the Kibana configuration."}),description:"",className:"actCheckActionTypeEnabled__disabledActionWarningCard"})};function checkActionTypeEnabled(actionType){if((actionType===null||actionType===void 0?void 0:actionType.enabledInLicense)===false){return getLicenseCheckResult(actionType)}if((actionType===null||actionType===void 0?void 0:actionType.enabledInConfig)===false){return configurationCheckResult}return{isEnabled:true}}function checkActionFormActionTypeEnabled(actionType,preconfiguredConnectors){if((actionType===null||actionType===void 0?void 0:actionType.enabledInLicense)===false){return getLicenseCheckResult(actionType)}if((actionType===null||actionType===void 0?void 0:actionType.enabledInConfig)===false&&!preconfiguredConnectors.find(preconfiguredConnector=>preconfiguredConnector.actionTypeId===actionType.id)){return configurationCheckResult}return{isEnabled:true}}}}]);