/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window["observability_bundle_jsonpfunction"]=window["observability_bundle_jsonpfunction"]||[]).push([[3],{32:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",(function(){return HeaderMenuPortal}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(30);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var createPortalNode=function(){var initialProps={};var parent;var lastPlaceholder;var portalNode=Object.assign(document.createElement("div"),{setPortalProps:function(props){initialProps=props},getInitialPortalProps:function(){return initialProps},mount:function(newParent,newPlaceholder){if(newPlaceholder===lastPlaceholder){return}portalNode.unmount();newParent.replaceChild(portalNode,newPlaceholder);parent=newParent;lastPlaceholder=newPlaceholder},unmount:function(expectedPlaceholder){if(expectedPlaceholder&&expectedPlaceholder!==lastPlaceholder){return}if(parent&&lastPlaceholder){parent.replaceChild(lastPlaceholder,portalNode);parent=undefined;lastPlaceholder=undefined}}});return portalNode};var web_InPortal=function(_super){__extends(InPortal,_super);function InPortal(props){var _this=_super.call(this,props)||this;_this.addPropsChannel=function(){Object.assign(_this.props.node,{setPortalProps:function(props){_this.setState({nodeProps:props})}})};_this.state={nodeProps:_this.props.node.getInitialPortalProps()};return _this}InPortal.prototype.componentDidMount=function(){this.addPropsChannel()};InPortal.prototype.componentDidUpdate=function(){this.addPropsChannel()};InPortal.prototype.render=function(){var _this=this;var _a=this.props,children=_a.children,node=_a.node;return external_kbnSharedDeps_ReactDom_["createPortal"](external_kbnSharedDeps_React_["Children"].map(children,(function(child){if(!external_kbnSharedDeps_React_["isValidElement"](child))return child;return external_kbnSharedDeps_React_["cloneElement"](child,_this.state.nodeProps)})),node)};return InPortal}(external_kbnSharedDeps_React_["PureComponent"]);var web_OutPortal=function(_super){__extends(OutPortal,_super);function OutPortal(props){var _this=_super.call(this,props)||this;_this.placeholderNode=external_kbnSharedDeps_React_["createRef"]();_this.passPropsThroughPortal();return _this}OutPortal.prototype.passPropsThroughPortal=function(){var propsForTarget=Object.assign({},this.props,{node:undefined});this.props.node.setPortalProps(propsForTarget)};OutPortal.prototype.componentDidMount=function(){var node=this.props.node;var placeholder=this.placeholderNode.current;var parent=placeholder.parentNode;node.mount(parent,placeholder);this.passPropsThroughPortal()};OutPortal.prototype.componentDidUpdate=function(){var node=this.props.node;var placeholder=this.placeholderNode.current;var parent=placeholder.parentNode;node.mount(parent,placeholder);this.passPropsThroughPortal()};OutPortal.prototype.componentWillUnmount=function(){var node=this.props.node;node.unmount(this.placeholderNode.current)};OutPortal.prototype.render=function(){return external_kbnSharedDeps_React_["createElement"]("div",{ref:this.placeholderNode})};return OutPortal}(external_kbnSharedDeps_React_["PureComponent"]);var public_=__webpack_require__(9);function HeaderMenuPortal({children:children,setHeaderActionMenu:setHeaderActionMenu}){const portalNode=Object(external_kbnSharedDeps_React_["useMemo"])(()=>createPortalNode(),[]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{let unmount=()=>{};setHeaderActionMenu(element=>{const mount=Object(public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement(web_OutPortal,{node:portalNode}));unmount=mount(element);return unmount});return()=>{portalNode.unmount();unmount()}},[portalNode,setHeaderActionMenu]);return external_kbnSharedDeps_React_default.a.createElement(web_InPortal,{node:portalNode},children)}}}]);