/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window["infra_bundle_jsonpfunction"]=window["infra_bundle_jsonpfunction"]||[]).push([[6],{101:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DEFAULT_LEGEND}));__webpack_require__.d(__webpack_exports__,"b",(function(){return DEFAULT_WAFFLE_OPTIONS_STATE}));__webpack_require__.d(__webpack_exports__,"c",(function(){return WaffleOptionsProvider}));__webpack_require__.d(__webpack_exports__,"d",(function(){return useWaffleOptionsContext}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var io_ts__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0);var io_ts__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(io_ts__WEBPACK_IMPORTED_MODULE_1__);var fp_ts_lib_pipeable__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(22);var fp_ts_lib_pipeable__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(fp_ts_lib_pipeable__WEBPACK_IMPORTED_MODULE_2__);var fp_ts_lib_Either__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(14);var fp_ts_lib_Either__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(fp_ts_lib_Either__WEBPACK_IMPORTED_MODULE_3__);var fp_ts_lib_function__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(15);var fp_ts_lib_function__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(fp_ts_lib_function__WEBPACK_IMPORTED_MODULE_4__);var constate__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(83);var constate__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(constate__WEBPACK_IMPORTED_MODULE_5__);var _alerting_use_alert_prefill__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(122);var _lib_lib__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(30);var _common_http_api_snapshot_api__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(92);var _utils_use_url_state__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(104);var _common_inventory_models_types__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(89);const DEFAULT_LEGEND={palette:"cool",steps:10,reverseColors:false};const DEFAULT_WAFFLE_OPTIONS_STATE={metric:{type:"cpu"},groupBy:[],nodeType:"host",view:"map",customOptions:[],boundsOverride:{max:1,min:0},autoBounds:true,accountId:"",region:"",customMetrics:[],legend:DEFAULT_LEGEND,source:"default",sort:{by:"name",direction:"desc"}};const useWaffleOptions=()=>{const[urlState,setUrlState]=Object(_utils_use_url_state__WEBPACK_IMPORTED_MODULE_9__["b"])({defaultState:DEFAULT_WAFFLE_OPTIONS_STATE,decodeUrlState:decodeUrlState,encodeUrlState:encodeUrlState,urlStateKey:"waffleOptions"});const[state,setState]=Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(urlState);Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(()=>setUrlState(state),[setUrlState,state]);const changeMetric=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(metric=>setState(previous=>({...previous,metric:metric})),[setState]);const changeGroupBy=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(groupBy=>setState(previous=>({...previous,groupBy:groupBy})),[setState]);const changeNodeType=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(nodeType=>setState(previous=>({...previous,nodeType:nodeType})),[setState]);const changeView=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(view=>setState(previous=>({...previous,view:view})),[setState]);const changeCustomOptions=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(customOptions=>setState(previous=>({...previous,customOptions:customOptions})),[setState]);const changeAutoBounds=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(autoBounds=>setState(previous=>({...previous,autoBounds:autoBounds})),[setState]);const changeBoundsOverride=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(boundsOverride=>setState(previous=>({...previous,boundsOverride:boundsOverride})),[setState]);const changeAccount=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(accountId=>setState(previous=>({...previous,accountId:accountId})),[setState]);const changeRegion=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(region=>setState(previous=>({...previous,region:region})),[setState]);const changeCustomMetrics=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(customMetrics=>{setState(previous=>({...previous,customMetrics:customMetrics}))},[setState]);const changeLegend=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(legend=>{setState(previous=>({...previous,legend:legend}))},[setState]);const changeSort=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(sort=>{setState(previous=>({...previous,sort:sort}))},[setState]);const{inventoryPrefill:inventoryPrefill}=Object(_alerting_use_alert_prefill__WEBPACK_IMPORTED_MODULE_6__["b"])();Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(()=>{const{setNodeType:setNodeType,setMetric:setMetric,setCustomMetrics:setCustomMetrics}=inventoryPrefill;setNodeType(state.nodeType);setMetric(state.metric);setCustomMetrics(state.customMetrics)},[state,inventoryPrefill]);return{...DEFAULT_WAFFLE_OPTIONS_STATE,...state,changeMetric:changeMetric,changeGroupBy:changeGroupBy,changeNodeType:changeNodeType,changeView:changeView,changeCustomOptions:changeCustomOptions,changeAutoBounds:changeAutoBounds,changeBoundsOverride:changeBoundsOverride,changeAccount:changeAccount,changeRegion:changeRegion,changeCustomMetrics:changeCustomMetrics,changeLegend:changeLegend,changeSort:changeSort,setWaffleOptionsState:setState}};const WaffleLegendOptionsRT=io_ts__WEBPACK_IMPORTED_MODULE_1__["type"]({palette:_lib_lib__WEBPACK_IMPORTED_MODULE_7__["d"],steps:io_ts__WEBPACK_IMPORTED_MODULE_1__["number"],reverseColors:io_ts__WEBPACK_IMPORTED_MODULE_1__["boolean"]});const WaffleSortOptionRT=io_ts__WEBPACK_IMPORTED_MODULE_1__["type"]({by:io_ts__WEBPACK_IMPORTED_MODULE_1__["keyof"]({name:null,value:null}),direction:io_ts__WEBPACK_IMPORTED_MODULE_1__["keyof"]({asc:null,desc:null})});const WaffleOptionsStateRT=io_ts__WEBPACK_IMPORTED_MODULE_1__["intersection"]([io_ts__WEBPACK_IMPORTED_MODULE_1__["type"]({metric:_common_http_api_snapshot_api__WEBPACK_IMPORTED_MODULE_8__["f"],groupBy:_common_http_api_snapshot_api__WEBPACK_IMPORTED_MODULE_8__["e"],nodeType:_common_inventory_models_types__WEBPACK_IMPORTED_MODULE_10__["c"],view:io_ts__WEBPACK_IMPORTED_MODULE_1__["string"],customOptions:io_ts__WEBPACK_IMPORTED_MODULE_1__["array"](io_ts__WEBPACK_IMPORTED_MODULE_1__["type"]({text:io_ts__WEBPACK_IMPORTED_MODULE_1__["string"],field:io_ts__WEBPACK_IMPORTED_MODULE_1__["string"]})),boundsOverride:io_ts__WEBPACK_IMPORTED_MODULE_1__["type"]({min:io_ts__WEBPACK_IMPORTED_MODULE_1__["number"],max:io_ts__WEBPACK_IMPORTED_MODULE_1__["number"]}),autoBounds:io_ts__WEBPACK_IMPORTED_MODULE_1__["boolean"],accountId:io_ts__WEBPACK_IMPORTED_MODULE_1__["string"],region:io_ts__WEBPACK_IMPORTED_MODULE_1__["string"],customMetrics:io_ts__WEBPACK_IMPORTED_MODULE_1__["array"](_common_http_api_snapshot_api__WEBPACK_IMPORTED_MODULE_8__["d"]),sort:WaffleSortOptionRT}),io_ts__WEBPACK_IMPORTED_MODULE_1__["partial"]({source:io_ts__WEBPACK_IMPORTED_MODULE_1__["string"],legend:WaffleLegendOptionsRT})]);const encodeUrlState=state=>WaffleOptionsStateRT.encode(state);const decodeUrlState=value=>{const state=Object(fp_ts_lib_pipeable__WEBPACK_IMPORTED_MODULE_2__["pipe"])(WaffleOptionsStateRT.decode(value),Object(fp_ts_lib_Either__WEBPACK_IMPORTED_MODULE_3__["fold"])(Object(fp_ts_lib_function__WEBPACK_IMPORTED_MODULE_4__["constant"])(undefined),fp_ts_lib_function__WEBPACK_IMPORTED_MODULE_4__["identity"]));if(state){state.source="url"}return state};const WaffleOptions=constate__WEBPACK_IMPORTED_MODULE_5___default()(useWaffleOptions);const[WaffleOptionsProvider,useWaffleOptionsContext]=WaffleOptions},121:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return MetricsAndGroupByToolbarItems}));var external_kbnSharedDeps_React_=__webpack_require__(1);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(8);var snapshot_metric_i18n=__webpack_require__(170);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);var common_=__webpack_require__(11);var dropdown_button=__webpack_require__(131);const LABELS={name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.sortNameLabel",{defaultMessage:"Name"}),value:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.sort.valueLabel",{defaultMessage:"Metric value"})};const WaffleSortControls=({sort:sort,onChange:onChange})=>{const[isOpen,setIsOpen]=Object(external_kbnSharedDeps_React_["useState"])(false);const showPopover=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setIsOpen(true)},[setIsOpen]);const closePopover=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setIsOpen(false)},[setIsOpen]);const label=LABELS[sort.by];const button=external_kbnSharedDeps_React_default.a.createElement(dropdown_button["a"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.sortLabel",{defaultMessage:"Sort by"}),onClick:showPopover},label);const selectName=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{onChange({...sort,by:"name"});closePopover()},[closePopover,onChange,sort]);const selectValue=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{onChange({...sort,by:"value"});closePopover()},[closePopover,onChange,sort]);const toggleSort=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{onChange({...sort,direction:sort.direction==="asc"?"desc":"asc"})},[sort,onChange]);const panels=Object(external_kbnSharedDeps_React_["useMemo"])(()=>[{id:0,title:"",items:[{name:LABELS.name,icon:sort.by==="name"?"check":"empty",onClick:selectName},{name:LABELS.value,icon:sort.by==="value"?"check":"empty",onClick:selectValue}]}],[sort.by,selectName,selectValue]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{isOpen:isOpen,id:"sortPopover",button:button,anchorPosition:"downLeft",panelPaddingSize:"none",closePopover:closePopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:0,panels:panels}),external_kbnSharedDeps_React_default.a.createElement(SwitchContainer,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{compressed:true,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.sortDirectionLabel",{defaultMessage:"Reverse direction"}),checked:sort.direction==="desc",onChange:toggleSort})))};const SwitchContainer=Object(common_["withTheme"])(({children:children,theme:theme})=>external_kbnSharedDeps_React_default.a.createElement("div",{style:{padding:theme===null||theme===void 0?void 0:theme.eui.paddingSizes.m,borderTop:`1px solid ${theme===null||theme===void 0?void 0:theme.eui.euiBorderColor}`}},children));var get_custom_metric_label=__webpack_require__(140);var snapshot_api=__webpack_require__(92);var uuid=__webpack_require__(36);var uuid_default=__webpack_require__.n(uuid);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(12);const AGGREGATION_LABELS={["avg"]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customMetrics.aggregationLables.avg",{defaultMessage:"Average"}),["max"]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customMetrics.aggregationLables.max",{defaultMessage:"Max"}),["min"]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customMetrics.aggregationLables.min",{defaultMessage:"Min"}),["rate"]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customMetrics.aggregationLables.rate",{defaultMessage:"Rate"})};const CustomMetricForm=Object(common_["withTheme"])(({theme:theme,onCancel:onCancel,fields:fields,onChange:onChange,metric:metric})=>{const[label,setLabel]=Object(external_kbnSharedDeps_React_["useState"])(metric?metric.label:void 0);const[aggregation,setAggregation]=Object(external_kbnSharedDeps_React_["useState"])(metric?metric.aggregation:"avg");const[field,setField]=Object(external_kbnSharedDeps_React_["useState"])(metric?metric.field:void 0);const handleSubmit=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{if(metric&&aggregation&&field){onChange({...metric,label:label,aggregation:aggregation,field:field})}else if(aggregation&&field){const newMetric={type:"custom",id:uuid_default.a.v1(),label:label,aggregation:aggregation,field:field};onChange(newMetric)}},[metric,aggregation,field,onChange,label]);const handleLabelChange=Object(external_kbnSharedDeps_React_["useCallback"])(e=>{setLabel(e.target.value)},[setLabel]);const handleFieldChange=Object(external_kbnSharedDeps_React_["useCallback"])(selectedOptions=>{setField(selectedOptions[0].label)},[setField]);const handleAggregationChange=Object(external_kbnSharedDeps_React_["useCallback"])(e=>{const value=e.target.value;const aggValue=snapshot_api["c"].is(value)?value:"avg";setAggregation(aggValue)},[setAggregation]);const fieldOptions=fields.filter(f=>f.aggregatable&&f.type==="number"&&!(field&&field===f.name)).map(f=>({label:f.name}));const aggregationOptions=snapshot_api["b"].map(k=>({text:AGGREGATION_LABELS[k],value:k}));const isSubmitDisabled=!field||!aggregation;const title=metric?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customMetricPanelLabel.edit",{defaultMessage:"Edit custom metric"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customMetricPanelLabel.add",{defaultMessage:"Add custom metric"});const titleAriaLabel=metric?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customMetricPanelLabel.editAriaLabel",{defaultMessage:"Back to custom metrics edit mode"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customMetricPanelLabel.addAriaLabel",{defaultMessage:"Back to metric picker"});return external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:685}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"arrowLeft",onClick:onCancel,color:"text",size:"xs",flush:"left",style:{fontWeight:700,textTransform:"uppercase"},"aria-label":titleAriaLabel},title)),external_kbnSharedDeps_React_default.a.createElement("div",{style:{padding:theme===null||theme===void 0?void 0:theme.eui.paddingSizes.m,borderBottom:`${theme===null||theme===void 0?void 0:theme.eui.euiBorderWidthThin} solid ${theme===null||theme===void 0?void 0:theme.eui.euiBorderColor}`}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customMetrics.metricLabel",{defaultMessage:"Metric"}),display:"rowCompressed",fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{onChange:handleAggregationChange,value:aggregation,options:aggregationOptions,fullWidth:true})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("span",null,"of"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{fullWidth:true,placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customMetrics.fieldPlaceholder",{defaultMessage:"Select a field"}),singleSelection:{asPlainText:true},selectedOptions:field?[{label:field}]:[],options:fieldOptions,onChange:handleFieldChange,isClearable:false})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customMetrics.labelLabel",{defaultMessage:"Label (optional)"}),display:"rowCompressed",fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{name:"label",placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customMetrics.labelPlaceholder",{defaultMessage:'Choose a name to appear in the "Metric" dropdown'}),value:label,fullWidth:true,onChange:handleLabelChange}))),external_kbnSharedDeps_React_default.a.createElement("div",{style:{padding:theme===null||theme===void 0?void 0:theme.eui.paddingSizes.m,textAlign:"right"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:onCancel,size:"s",style:{paddingRight:theme===null||theme===void 0?void 0:theme.eui.paddingSizes.xl}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.waffle.customMetrics.cancelLabel",defaultMessage:"Cancel"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{type:"submit",size:"s",fill:true,onClick:handleSubmit,disabled:isSubmitDisabled},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.waffle.customMetrics.submitLabel",defaultMessage:"Save"})))))});var types=__webpack_require__(89);const MetricsContextMenu=({onClose:onClose,onChange:onChange,metric:metric,options:options,customMetrics:customMetrics})=>{const id=snapshot_api["d"].is(metric)&&metric.id?metric.id:metric.type;const handleClick=Object(external_kbnSharedDeps_React_["useCallback"])(val=>{if(!types["f"].is(val)){const selectedMetric=customMetrics.find(m=>m.id===val);if(selectedMetric){onChange(selectedMetric)}}else{onChange({type:val})}onClose()},[customMetrics,onChange,onClose]);const panels=[{id:0,title:"",items:[...options.map(o=>{const icon=o.value===id?"check":"empty";const panel={name:o.text,onClick:()=>handleClick(o.value),icon:icon};return panel}),...customMetrics.map(m=>{const icon=m.id===id?"check":"empty";const panel={name:Object(get_custom_metric_label["a"])(m),onClick:()=>handleClick(m.id),icon:icon};return panel})]}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:0,panels:panels})};const ModeSwitcher=Object(common_["withTheme"])(({onSave:onSave,onEditCancel:onEditCancel,onEdit:onEdit,onAdd:onAdd,mode:mode,customMetrics:customMetrics,theme:theme})=>{if(["editMetric","addMetric"].includes(mode)){return null}return external_kbnSharedDeps_React_default.a.createElement("div",{style:{borderTop:`${theme===null||theme===void 0?void 0:theme.eui.euiBorderWidthThin} solid ${theme===null||theme===void 0?void 0:theme.eui.euiBorderColor}`,padding:12}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},mode==="edit"?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",flush:"left",onClick:onEditCancel,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customMetrics.modeSwitcher.cancelAriaLabel",{defaultMessage:"Cancel edit mode"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.waffle.customMetrics.modeSwitcher.cancel",defaultMessage:"Cancel"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:onSave,size:"s",fill:true,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customMetrics.modeSwitcher.saveButtonAriaLabel",{defaultMessage:"Save changes to custom metrics"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.waffle.customMetrics.modeSwitcher.saveButton",defaultMessage:"Save"})))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",flush:"left",onClick:onEdit,disabled:customMetrics.length===0,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customMetrics.modeSwitcher.editAriaLabel",{defaultMessage:"Edit custom metrics"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.waffle.customMetrics.modeSwitcher.edit",defaultMessage:"Edit"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:onAdd,size:"s",flush:"right","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customMetrics.modeSwitcher.addMetricAriaLabel",{defaultMessage:"Add custom metric"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.waffle.customMetrics.modeSwitcher.addMetric",defaultMessage:"Add metric"}))))))});const ICON_WIDTH=36;const MetricsEditMode=Object(common_["withTheme"])(({theme:theme,customMetrics:customMetrics,options:options,onEdit:onEdit,onDelete:onDelete})=>external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:256}},options.map(option=>external_kbnSharedDeps_React_default.a.createElement("div",{key:option.value,style:{padding:"14px 14px 13px 36px"}},external_kbnSharedDeps_React_default.a.createElement("span",{style:{color:theme===null||theme===void 0?void 0:theme.eui.euiButtonColorDisabled}},option.text))),customMetrics.map(metric=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{key:metric.id,alignItems:"center",gutterSize:"none",style:{padding:"10px 0px 9px"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,style:{width:ICON_WIDTH}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"pencil",onClick:()=>onEdit(metric),"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customMetrics.editMode.editButtonAriaLabel",{defaultMessage:"Edit custom metric for {name}",values:{name:Object(get_custom_metric_label["a"])(metric)}})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:1,style:{overflow:"hidden"}},Object(get_custom_metric_label["a"])(metric)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,style:{width:ICON_WIDTH,textAlign:"right"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"trash",color:"danger",onClick:()=>onDelete(metric),"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customMetrics.editMode.deleteAriaLabel",{defaultMessage:"Delete custom metric for {name}",values:{name:Object(get_custom_metric_label["a"])(metric)}})}))))));const WaffleMetricControls=({fields:fields,onChange:onChange,onChangeCustomMetrics:onChangeCustomMetrics,metric:metric,options:options,customMetrics:customMetrics})=>{var _options$find;const[isPopoverOpen,setPopoverState]=Object(external_kbnSharedDeps_React_["useState"])(false);const[mode,setMode]=Object(external_kbnSharedDeps_React_["useState"])("pick");const[editModeCustomMetrics,setEditModeCustomMetrics]=Object(external_kbnSharedDeps_React_["useState"])([]);const[editCustomMetric,setEditCustomMetric]=Object(external_kbnSharedDeps_React_["useState"])();const handleClose=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setPopoverState(false)},[setPopoverState]);const handleToggle=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setPopoverState(!isPopoverOpen)},[isPopoverOpen]);const handleCustomMetric=Object(external_kbnSharedDeps_React_["useCallback"])(newMetric=>{onChangeCustomMetrics([...customMetrics,newMetric]);onChange(newMetric);setMode("pick")},[customMetrics,onChange,onChangeCustomMetrics,setMode]);const setModeToEdit=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setMode("edit");setEditModeCustomMetrics(customMetrics)},[customMetrics]);const setModeToAdd=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setMode("addMetric")},[setMode]);const setModeToPick=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setMode("pick");setEditModeCustomMetrics([])},[setMode]);const handleDeleteCustomMetric=Object(external_kbnSharedDeps_React_["useCallback"])(m=>{if(snapshot_api["d"].is(metric)&&m.id===metric.id){onChange({type:options[0].value})}const newMetrics=editModeCustomMetrics.filter(v=>v.id!==m.id);setEditModeCustomMetrics(newMetrics)},[editModeCustomMetrics,metric,onChange,options]);const handleEditCustomMetric=Object(external_kbnSharedDeps_React_["useCallback"])(currentMetric=>{const newMetrics=customMetrics.map(m=>m.id===currentMetric.id&&currentMetric||m);onChangeCustomMetrics(newMetrics);setModeToPick();setEditCustomMetric(void 0);setEditModeCustomMetrics([])},[customMetrics,onChangeCustomMetrics,setModeToPick]);const handleSelectMetricToEdit=Object(external_kbnSharedDeps_React_["useCallback"])(currentMetric=>{setEditCustomMetric(currentMetric);setMode("editMetric")},[setMode,setEditCustomMetric]);const handleSaveEdit=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{onChangeCustomMetrics(editModeCustomMetrics);setMode("pick")},[editModeCustomMetrics,onChangeCustomMetrics]);if(!options.length||!metric.type){throw Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.unableToSelectMetricErrorTitle",{defaultMessage:"Unable to select options or value for metric."}))}const id=snapshot_api["d"].is(metric)&&metric.id?metric.id:metric.type;const currentLabel=snapshot_api["d"].is(metric)?Object(get_custom_metric_label["a"])(metric):(_options$find=options.find(o=>o.value===id))===null||_options$find===void 0?void 0:_options$find.text;if(!currentLabel){return null}const button=external_kbnSharedDeps_React_default.a.createElement(dropdown_button["a"],{onClick:handleToggle,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.metriclabel",{defaultMessage:"Metric"})},currentLabel);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{isOpen:isPopoverOpen,id:"metricsPanel",button:button,anchorPosition:"downLeft",panelPaddingSize:"none",closePopover:handleClose},mode==="pick"?external_kbnSharedDeps_React_default.a.createElement(MetricsContextMenu,{onChange:onChange,onClose:handleClose,metric:metric,customMetrics:customMetrics,options:options}):null,mode==="addMetric"?external_kbnSharedDeps_React_default.a.createElement(CustomMetricForm,{fields:fields,customMetrics:customMetrics,onChange:handleCustomMetric,onCancel:setModeToPick}):null,mode==="editMetric"?external_kbnSharedDeps_React_default.a.createElement(CustomMetricForm,{metric:editCustomMetric,fields:fields,customMetrics:customMetrics,onChange:handleEditCustomMetric,onCancel:setModeToEdit}):null,mode==="edit"?external_kbnSharedDeps_React_default.a.createElement(MetricsEditMode,{customMetrics:editModeCustomMetrics,options:options,onEdit:handleSelectMetricToEdit,onDelete:handleDeleteCustomMetric}):null,external_kbnSharedDeps_React_default.a.createElement(ModeSwitcher,{onEditCancel:setModeToPick,onEdit:setModeToEdit,onAdd:setModeToAdd,mode:mode,onSave:handleSaveEdit,customMetrics:customMetrics})))};function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const initialState={selectedOptions:[]};class custom_field_panel_CustomFieldPanel extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args);_defineProperty(this,"state",initialState);_defineProperty(this,"handleSubmit",()=>{this.props.onSubmit(this.state.selectedOptions[0].label)});_defineProperty(this,"handleFieldSelection",selectedOptions=>{this.setState({selectedOptions:selectedOptions})})}render(){const{fields:fields,currentOptions:currentOptions}=this.props;const options=fields.filter(f=>f.aggregatable&&f.type==="string"&&!(currentOptions&&currentOptions.some(o=>o.field===f.name))).map(f=>({label:f.name}));const isSubmitDisabled=!this.state.selectedOptions.length;return external_kbnSharedDeps_React_default.a.createElement("div",{style:{padding:16}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customGroupByFieldLabel",{defaultMessage:"Field"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customGroupByHelpText",{defaultMessage:"This is the field used for the terms aggregation"}),display:"rowCompressed",fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customGroupByDropdownPlacehoder",{defaultMessage:"Select one"}),singleSelection:{asPlainText:true},selectedOptions:this.state.selectedOptions,options:options,onChange:this.handleFieldSelection,fullWidth:true,isClearable:false})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{disabled:isSubmitDisabled,type:"submit",size:"s",fill:true,onClick:this.handleSubmit},"Add")))}}_defineProperty(custom_field_panel_CustomFieldPanel,"displayName","CustomFieldPanel");function waffle_group_by_controls_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const waffle_group_by_controls_initialState={isPopoverOpen:false};class waffle_group_by_controls_WaffleGroupByControls extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args);waffle_group_by_controls_defineProperty(this,"state",waffle_group_by_controls_initialState);waffle_group_by_controls_defineProperty(this,"handleRemove",field=>()=>{const{groupBy:groupBy}=this.props;this.props.onChange(groupBy.filter(g=>g.field!==field));const options=this.props.customOptions.filter(g=>g.field!==field);this.props.onChangeCustomOptions(options);setTimeout(()=>this.handleClose())});waffle_group_by_controls_defineProperty(this,"handleClose",()=>{this.setState({isPopoverOpen:false})});waffle_group_by_controls_defineProperty(this,"handleToggle",()=>{this.setState(state=>({isPopoverOpen:!state.isPopoverOpen}))});waffle_group_by_controls_defineProperty(this,"handleCustomField",field=>{const options=[...this.props.customOptions,{text:field,field:field}];this.props.onChangeCustomOptions(options);const fn=this.handleClick(field);fn()});waffle_group_by_controls_defineProperty(this,"handleClick",field=>()=>{const{groupBy:groupBy}=this.props;if(groupBy.some(g=>g.field===field)){this.handleRemove(field)()}else if(this.props.groupBy.length<2){this.props.onChange([...groupBy,{field:field}])}this.handleClose()})}render(){const{nodeType:nodeType,groupBy:groupBy}=this.props;const customOptions=this.props.customOptions.map(option=>({...option,toolTipContent:option.text}));const options=this.props.options.concat(customOptions);if(!options.length){throw Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.unableToSelectGroupErrorMessage",{defaultMessage:"Unable to select group by options for {nodeType}",values:{nodeType:nodeType}}))}const isMaxGroupingsSelected=groupBy.length>=2;const maxGroupByTooltip=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.maxGroupByTooltip",{defaultMessage:"Only two groupings can be selected at a time"});const panels=[{id:"firstPanel",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.selectTwoGroupingsTitle",{defaultMessage:"Select up to two groupings"}),items:[{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customGroupByOptionName",{defaultMessage:"Custom field"}),disabled:isMaxGroupingsSelected,toolTipContent:isMaxGroupingsSelected?maxGroupByTooltip:null,icon:"empty",panel:"customPanel"},...options.map(o=>{const icon=groupBy.some(g=>g.field===o.field)?"check":"empty";const panel={name:o.text,onClick:this.handleClick(o.field),icon:icon};if(o.toolTipContent){panel.toolTipContent=o.toolTipContent}if(isMaxGroupingsSelected&&icon==="empty"){panel.toolTipContent=maxGroupByTooltip;panel.disabled=true}return panel})]},{id:"customPanel",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.customGroupByPanelTitle",{defaultMessage:"Group By Custom Field"}),width:685,content:external_kbnSharedDeps_React_default.a.createElement(custom_field_panel_CustomFieldPanel,{currentOptions:this.props.customOptions,onSubmit:this.handleCustomField,fields:this.props.fields})}];const buttonBody=groupBy.length>0?groupBy.map(g=>options.find(o=>o.field===g.field)).filter(o=>o!=null).map(o=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"hollow",key:o&&o.field},o&&o.text)):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.waffle.groupByAllTitle",defaultMessage:"All"});const button=external_kbnSharedDeps_React_default.a.createElement(dropdown_button["a"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.groupByLabel",{defaultMessage:"Group by"}),onClick:this.handleToggle},buttonBody);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{isOpen:this.state.isPopoverOpen,id:"groupByPanel",button:button,panelPaddingSize:"none",closePopover:this.handleClose},external_kbnSharedDeps_React_default.a.createElement(StyledContextMenu,{initialPanelId:"firstPanel",panels:panels}))}}waffle_group_by_controls_defineProperty(waffle_group_by_controls_WaffleGroupByControls,"displayName","WaffleGroupByControls");const StyledContextMenu=Object(common_["euiStyled"])(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"])`
  width: 320px;
  & .euiContextMenuItem__text {
    overflow: hidden;
    text-overflow: ellipsis;
  }
`;var toolbar_wrapper=__webpack_require__(290);const MetricsAndGroupByToolbarItems=props=>{const metricOptions=Object(external_kbnSharedDeps_React_["useMemo"])(()=>props.metricTypes.map(snapshot_metric_i18n["a"]).filter(v=>v),[props.metricTypes]);const groupByOptions=Object(external_kbnSharedDeps_React_["useMemo"])(()=>props.groupByFields.map(toolbar_wrapper["b"]),[props.groupByFields]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(WaffleMetricControls,{fields:props.createDerivedIndexPattern("metrics").fields,options:metricOptions,metric:props.metric,onChange:props.changeMetric,onChangeCustomMetrics:props.changeCustomMetrics,customMetrics:props.customMetrics})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(waffle_group_by_controls_WaffleGroupByControls,{options:groupByOptions,groupBy:props.groupBy,nodeType:props.nodeType,onChange:props.changeGroupBy,fields:props.createDerivedIndexPattern("metrics").fields,onChangeCustomOptions:props.changeCustomOptions,customOptions:props.customOptions})),props.view==="map"&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(WaffleSortControls,{sort:props.sort,onChange:props.changeSort})))}},131:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DropdownButton}));var _elastic_eui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8);var _elastic_eui__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_elastic_eui__WEBPACK_IMPORTED_MODULE_0__);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);var react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);var _src_plugins_kibana_react_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(11);var _src_plugins_kibana_react_common__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_src_plugins_kibana_react_common__WEBPACK_IMPORTED_MODULE_2__);const DropdownButton=Object(_src_plugins_kibana_react_common__WEBPACK_IMPORTED_MODULE_2__["withTheme"])(({onClick:onClick,label:label,theme:theme,children:children})=>react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_0__["EuiFlexGroup"],{alignItems:"center",gutterSize:"none",style:{border:theme===null||theme===void 0?void 0:theme.eui.euiFormInputGroupBorder,boxShadow:`0px 3px 2px ${theme===null||theme===void 0?void 0:theme.eui.euiTableActionsBorderColor}, 0px 1px 1px ${theme===null||theme===void 0?void 0:theme.eui.euiTableActionsBorderColor}`}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_0__["EuiFlexItem"],{grow:false,style:{padding:12,background:theme===null||theme===void 0?void 0:theme.eui.euiFormInputGroupLabelBackground,fontSize:"0.75em",fontWeight:600,color:theme===null||theme===void 0?void 0:theme.eui.euiTitleColor}},label),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_0__["EuiFlexItem"],{grow:false},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_0__["EuiButtonEmpty"],{color:"text",iconType:"arrowDown",onClick:onClick,iconSide:"right",size:"xs"},children))))},140:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getCustomMetricLabel}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__);const getCustomMetricLabel=metric=>{const METRIC_LABELS={avg:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.aggregationNames.avg",{defaultMessage:"Avg of {field}",values:{field:metric.field}}),max:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.aggregationNames.max",{defaultMessage:"Max of {field}",values:{field:metric.field}}),min:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.aggregationNames.min",{defaultMessage:"Min of {field}",values:{field:metric.field}}),rate:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.aggregationNames.rate",{defaultMessage:"Rate of {field}",values:{field:metric.field}})};return metric.label?metric.label:METRIC_LABELS[metric.aggregation]}},170:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return toMetricOpt}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__);var lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(21);var lodash__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);const TranslationsLowercase={CPUUsage:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.cpuUsageText",{defaultMessage:"CPU usage"}),MemoryUsage:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.memoryUsageText",{defaultMessage:"memory usage"}),InboundTraffic:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.inboundTrafficText",{defaultMessage:"inbound traffic"}),OutboundTraffic:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.outboundTrafficText",{defaultMessage:"outbound traffic"}),LogRate:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.hostLogRateText",{defaultMessage:"log rate"}),Load:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.loadText",{defaultMessage:"load"}),Count:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.countText",{defaultMessage:"count"}),DiskIOReadBytes:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.diskIOReadBytes",{defaultMessage:"disk reads"}),DiskIOWriteBytes:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.diskIOWriteBytes",{defaultMessage:"disk writes"}),s3BucketSize:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.s3BucketSize",{defaultMessage:"bucket size"}),s3TotalRequests:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.s3TotalRequests",{defaultMessage:"total requests"}),s3NumberOfObjects:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.s3NumberOfObjects",{defaultMessage:"number of objects"}),s3DownloadBytes:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.s3DownloadBytes",{defaultMessage:"downloads (bytes)"}),s3UploadBytes:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.s3UploadBytes",{defaultMessage:"uploads (bytes)"}),rdsConnections:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.rdsConnections",{defaultMessage:"connections"}),rdsQueriesExecuted:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.rdsQueriesExecuted",{defaultMessage:"queries executed"}),rdsActiveTransactions:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.rdsActiveTransactions",{defaultMessage:"active transactions"}),rdsLatency:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.rdsLatency",{defaultMessage:"latency"}),sqsMessagesVisible:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.sqsMessagesVisible",{defaultMessage:"messages available"}),sqsMessagesDelayed:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.sqsMessagesDelayed",{defaultMessage:"messages delayed"}),sqsMessagesSent:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.sqsMessagesSent",{defaultMessage:"messages added"}),sqsMessagesEmpty:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.sqsMessagesEmpty",{defaultMessage:"messages returned empty"}),sqsOldestMessage:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.waffle.metricOptions.sqsOldestMessage",{defaultMessage:"oldest message"})};const Translations=Object(lodash__WEBPACK_IMPORTED_MODULE_1__["mapValues"])(TranslationsLowercase,translation=>`${translation[0].toUpperCase()}${translation.slice(1)}`);const toMetricOpt=metric=>{switch(metric){case"cpu":return{text:Translations.CPUUsage,textLC:TranslationsLowercase.CPUUsage,value:"cpu"};case"memory":return{text:Translations.MemoryUsage,textLC:TranslationsLowercase.MemoryUsage,value:"memory"};case"rx":return{text:Translations.InboundTraffic,textLC:TranslationsLowercase.InboundTraffic,value:"rx"};case"tx":return{text:Translations.OutboundTraffic,textLC:TranslationsLowercase.OutboundTraffic,value:"tx"};case"logRate":return{text:Translations.LogRate,textLC:TranslationsLowercase.LogRate,value:"logRate"};case"load":return{text:Translations.Load,textLC:TranslationsLowercase.Load,value:"load"};case"count":return{text:Translations.Count,textLC:TranslationsLowercase.Count,value:"count"};case"diskIOReadBytes":return{text:Translations.DiskIOReadBytes,textLC:TranslationsLowercase.DiskIOReadBytes,value:"diskIOReadBytes"};case"diskIOWriteBytes":return{text:Translations.DiskIOWriteBytes,textLC:TranslationsLowercase.DiskIOWriteBytes,value:"diskIOWriteBytes"};case"s3BucketSize":return{text:Translations.s3BucketSize,textLC:TranslationsLowercase.s3BucketSize,value:"s3BucketSize"};case"s3TotalRequests":return{text:Translations.s3TotalRequests,textLC:TranslationsLowercase.s3TotalRequests,value:"s3TotalRequests"};case"s3NumberOfObjects":return{text:Translations.s3NumberOfObjects,textLC:TranslationsLowercase.s3NumberOfObjects,value:"s3NumberOfObjects"};case"s3DownloadBytes":return{text:Translations.s3DownloadBytes,textLC:TranslationsLowercase.s3DownloadBytes,value:"s3DownloadBytes"};case"s3UploadBytes":return{text:Translations.s3UploadBytes,textLC:TranslationsLowercase.s3UploadBytes,value:"s3UploadBytes"};case"rdsConnections":return{text:Translations.rdsConnections,textLC:TranslationsLowercase.rdsConnections,value:"rdsConnections"};case"rdsQueriesExecuted":return{text:Translations.rdsQueriesExecuted,textLC:TranslationsLowercase.rdsQueriesExecuted,value:"rdsQueriesExecuted"};case"rdsActiveTransactions":return{text:Translations.rdsActiveTransactions,textLC:TranslationsLowercase.rdsActiveTransactions,value:"rdsActiveTransactions"};case"rdsLatency":return{text:Translations.rdsLatency,textLC:TranslationsLowercase.rdsLatency,value:"rdsLatency"};case"sqsMessagesVisible":return{text:Translations.sqsMessagesVisible,textLC:TranslationsLowercase.sqsMessagesVisible,value:"sqsMessagesVisible"};case"sqsMessagesDelayed":return{text:Translations.sqsMessagesDelayed,textLC:TranslationsLowercase.sqsMessagesDelayed,value:"sqsMessagesDelayed"};case"sqsMessagesSent":return{text:Translations.sqsMessagesSent,textLC:TranslationsLowercase.sqsMessagesSent,value:"sqsMessagesSent"};case"sqsMessagesEmpty":return{text:Translations.sqsMessagesEmpty,textLC:TranslationsLowercase.sqsMessagesEmpty,value:"sqsMessagesEmpty"};case"sqsOldestMessage":return{text:Translations.sqsOldestMessage,textLC:TranslationsLowercase.sqsOldestMessage,value:"sqsOldestMessage"}}}},175:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CloudToolbarItems}));var external_kbnSharedDeps_React_=__webpack_require__(1);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(8);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);var dropdown_button=__webpack_require__(131);const WaffleAccountsControls=props=>{const{accountId:accountId,options:options}=props;const[isOpen,setIsOpen]=Object(external_kbnSharedDeps_React_["useState"])(false);const showPopover=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setIsOpen(true)},[setIsOpen]);const closePopover=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setIsOpen(false)},[setIsOpen]);const currentLabel=options.find(o=>o.value===accountId);const changeAccount=Object(external_kbnSharedDeps_React_["useCallback"])(val=>{if(accountId===val){props.changeAccount("")}else{props.changeAccount(val)}closePopover()},[accountId,closePopover,props]);const panels=Object(external_kbnSharedDeps_React_["useMemo"])(()=>[{id:0,title:"",items:options.map(o=>{const icon=o.value===accountId?"check":"empty";const panel={name:o.name,onClick:()=>changeAccount(o.value),icon:icon};return panel})}],[options,accountId,changeAccount]);const button=external_kbnSharedDeps_React_default.a.createElement(dropdown_button["a"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.accountLabel",{defaultMessage:"Account"}),onClick:showPopover},currentLabel?currentLabel.name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.accountAllTitle",{defaultMessage:"All"}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{isOpen:isOpen,id:"accontPopOver",button:button,anchorPosition:"downLeft",panelPaddingSize:"none",closePopover:closePopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:0,panels:panels}))};const WaffleRegionControls=props=>{const{region:region,options:options}=props;const[isOpen,setIsOpen]=Object(external_kbnSharedDeps_React_["useState"])(false);const showPopover=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setIsOpen(true)},[setIsOpen]);const closePopover=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setIsOpen(false)},[setIsOpen]);const currentLabel=options.find(o=>region===o);const changeRegion=Object(external_kbnSharedDeps_React_["useCallback"])(val=>{if(region===val){props.changeRegion("")}else{props.changeRegion(val)}closePopover()},[region,closePopover,props]);const panels=Object(external_kbnSharedDeps_React_["useMemo"])(()=>[{id:0,title:"",items:options.map(o=>{const icon=o===region?"check":"empty";const panel={name:o,onClick:()=>changeRegion(o),icon:icon};return panel})}],[changeRegion,options,region]);const button=external_kbnSharedDeps_React_default.a.createElement(dropdown_button["a"],{onClick:showPopover,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.regionLabel",{defaultMessage:"Region"})},currentLabel||external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.region",{defaultMessage:"All"}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{isOpen:isOpen,id:"regionPanel",button:button,anchorPosition:"downLeft",panelPaddingSize:"none",closePopover:closePopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:0,panels:panels}))};const CloudToolbarItems=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,props.accounts.length>0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(WaffleAccountsControls,{changeAccount:props.changeAccount,accountId:props.accountId,options:props.accounts})),props.regions.length>0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(WaffleRegionControls,{changeRegion:props.changeRegion,region:props.region,options:props.regions})))},272:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return fieldToName}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__);const availabilityZoneName=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.groupByDisplayNames.availabilityZone",{defaultMessage:"Availability zone"});const machineTypeName=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.groupByDisplayNames.machineType",{defaultMessage:"Machine type"});const fieldToName=field=>{const LOOKUP={"kubernetes.namespace":_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.groupByDisplayNames.kubernetesNamespace",{defaultMessage:"Namespace"}),"kubernetes.node.name":_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.groupByDisplayNames.kubernetesNodeName",{defaultMessage:"Node"}),"host.name":_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.groupByDisplayNames.hostName",{defaultMessage:"Host"}),"cloud.availability_zone":availabilityZoneName,"cloud.machine.type":machineTypeName,"cloud.project.id":_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.groupByDisplayNames.projectID",{defaultMessage:"Project ID"}),"cloud.provider":_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.groupByDisplayNames.provider",{defaultMessage:"Cloud provider"}),"service.type":_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.groupByDisplayNames.serviceType",{defaultMessage:"Service type"}),"aws.cloud.availability_zone":availabilityZoneName,"aws.cloud.machine.type":machineTypeName,"aws.tags":_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.groupByDisplayNames.tags",{defaultMessage:"Tags"}),"aws.ec2.instance.image.id":_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.groupByDisplayNames.image",{defaultMessage:"Image"}),"aws.ec2.instance.state.name":_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.groupByDisplayNames.state.name",{defaultMessage:"State"}),"cloud.region":_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.groupByDisplayNames.cloud.region",{defaultMessage:"Region"}),"aws.rds.db_instance.class":_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.groupByDisplayNames.rds.db_instance.class",{defaultMessage:"Instance Class"}),"aws.rds.db_instance.status":_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.groupByDisplayNames.rds.db_instance.status",{defaultMessage:"Status"})};return LOOKUP[field]||field}},273:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return hostMetricTypes}));__webpack_require__.d(__webpack_exports__,"a",(function(){return HostToolbarItems}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _shared_components_metrics_and_groupby_toolbar_items__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(121);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const hostMetricTypes=["cpu","memory","load","rx","tx","logRate"];const hostGroupByFields=["cloud.availability_zone","cloud.machine.type","cloud.project.id","cloud.provider","service.type"];const HostToolbarItems=props=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_components_metrics_and_groupby_toolbar_items__WEBPACK_IMPORTED_MODULE_1__["a"],_extends({},props,{metricTypes:hostMetricTypes,groupByFields:hostGroupByFields}))},274:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return containerMetricTypes}));__webpack_require__.d(__webpack_exports__,"a",(function(){return ContainerToolbarItems}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _shared_components_metrics_and_groupby_toolbar_items__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(121);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const containerMetricTypes=["cpu","memory","rx","tx"];const containerGroupByFields=["host.name","cloud.availability_zone","cloud.machine.type","cloud.project.id","cloud.provider","service.type"];const ContainerToolbarItems=props=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_components_metrics_and_groupby_toolbar_items__WEBPACK_IMPORTED_MODULE_1__["a"],_extends({},props,{metricTypes:containerMetricTypes,groupByFields:containerGroupByFields}))},275:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return podMetricTypes}));__webpack_require__.d(__webpack_exports__,"a",(function(){return PodToolbarItems}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _shared_components_metrics_and_groupby_toolbar_items__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(121);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const podMetricTypes=["cpu","memory","rx","tx"];const podGroupByFields=["kubernetes.namespace","kubernetes.node.name","service.type"];const PodToolbarItems=props=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_components_metrics_and_groupby_toolbar_items__WEBPACK_IMPORTED_MODULE_1__["a"],_extends({},props,{metricTypes:podMetricTypes,groupByFields:podGroupByFields}))},276:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return ec2MetricTypes}));__webpack_require__.d(__webpack_exports__,"a",(function(){return AwsEC2ToolbarItems}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _shared_components_metrics_and_groupby_toolbar_items__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(121);var _shared_components_cloud_toolbar_items__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(175);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const ec2MetricTypes=["cpu","rx","tx","diskIOReadBytes","diskIOWriteBytes"];const ec2groupByFields=["cloud.availability_zone","cloud.machine.type","aws.ec2.instance.image.id","aws.ec2.instance.state.name"];const AwsEC2ToolbarItems=props=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_components_cloud_toolbar_items__WEBPACK_IMPORTED_MODULE_2__["a"],props),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_components_metrics_and_groupby_toolbar_items__WEBPACK_IMPORTED_MODULE_1__["a"],_extends({},props,{metricTypes:ec2MetricTypes,groupByFields:ec2groupByFields})))},277:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return s3MetricTypes}));__webpack_require__.d(__webpack_exports__,"a",(function(){return AwsS3ToolbarItems}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _shared_components_metrics_and_groupby_toolbar_items__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(121);var _shared_components_cloud_toolbar_items__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(175);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const s3MetricTypes=["s3BucketSize","s3NumberOfObjects","s3TotalRequests","s3DownloadBytes","s3UploadBytes"];const s3GroupByFields=["cloud.region"];const AwsS3ToolbarItems=props=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_components_cloud_toolbar_items__WEBPACK_IMPORTED_MODULE_2__["a"],props),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_components_metrics_and_groupby_toolbar_items__WEBPACK_IMPORTED_MODULE_1__["a"],_extends({},props,{metricTypes:s3MetricTypes,groupByFields:s3GroupByFields})))},278:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return rdsMetricTypes}));__webpack_require__.d(__webpack_exports__,"a",(function(){return AwsRDSToolbarItems}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _shared_components_metrics_and_groupby_toolbar_items__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(121);var _shared_components_cloud_toolbar_items__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(175);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const rdsMetricTypes=["cpu","rdsConnections","rdsQueriesExecuted","rdsActiveTransactions","rdsLatency"];const rdsGroupByFields=["cloud.availability_zone","aws.rds.db_instance.class","aws.rds.db_instance.status"];const AwsRDSToolbarItems=props=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_components_cloud_toolbar_items__WEBPACK_IMPORTED_MODULE_2__["a"],props),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_components_metrics_and_groupby_toolbar_items__WEBPACK_IMPORTED_MODULE_1__["a"],_extends({},props,{metricTypes:rdsMetricTypes,groupByFields:rdsGroupByFields})))},279:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return sqsMetricTypes}));__webpack_require__.d(__webpack_exports__,"a",(function(){return AwsSQSToolbarItems}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _shared_components_metrics_and_groupby_toolbar_items__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(121);var _shared_components_cloud_toolbar_items__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(175);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const sqsMetricTypes=["sqsMessagesVisible","sqsMessagesDelayed","sqsMessagesSent","sqsMessagesEmpty","sqsOldestMessage"];const sqsGroupByFields=["cloud.region"];const AwsSQSToolbarItems=props=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_components_cloud_toolbar_items__WEBPACK_IMPORTED_MODULE_2__["a"],props),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_shared_components_metrics_and_groupby_toolbar_items__WEBPACK_IMPORTED_MODULE_1__["a"],_extends({},props,{metricTypes:sqsMetricTypes,groupByFields:sqsGroupByFields})))},290:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ToolbarWrapper}));__webpack_require__.d(__webpack_exports__,"b",(function(){return toGroupByOpt}));var external_kbnSharedDeps_React_=__webpack_require__(1);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(8);var field_to_display_name=__webpack_require__(272);var source=__webpack_require__(88);var use_waffle_options=__webpack_require__(101);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);var inventory_models=__webpack_require__(94);var dropdown_button=__webpack_require__(131);const getDisplayNameForType=type=>{const inventoryModel=Object(inventory_models["b"])(type);return inventoryModel.displayName};const WaffleInventorySwitcher=()=>{const{changeNodeType:changeNodeType,changeGroupBy:changeGroupBy,changeMetric:changeMetric,changeAccount:changeAccount,changeRegion:changeRegion,changeCustomMetrics:changeCustomMetrics,nodeType:nodeType}=Object(use_waffle_options["d"])();const[isOpen,setIsOpen]=Object(external_kbnSharedDeps_React_["useState"])(false);const closePopover=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setIsOpen(false),[]);const openPopover=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setIsOpen(true),[]);const goToNodeType=Object(external_kbnSharedDeps_React_["useCallback"])(targetNodeType=>{closePopover();changeNodeType(targetNodeType);changeGroupBy([]);changeCustomMetrics([]);changeAccount("");changeRegion("");const inventoryModel=Object(inventory_models["b"])(targetNodeType);changeMetric({type:inventoryModel.metrics.defaultSnapshot})},[closePopover,changeNodeType,changeGroupBy,changeCustomMetrics,changeAccount,changeRegion,changeMetric]);const goToHost=Object(external_kbnSharedDeps_React_["useCallback"])(()=>goToNodeType("host"),[goToNodeType]);const goToK8=Object(external_kbnSharedDeps_React_["useCallback"])(()=>goToNodeType("pod"),[goToNodeType]);const goToDocker=Object(external_kbnSharedDeps_React_["useCallback"])(()=>goToNodeType("container"),[goToNodeType]);const goToAwsEC2=Object(external_kbnSharedDeps_React_["useCallback"])(()=>goToNodeType("awsEC2"),[goToNodeType]);const goToAwsS3=Object(external_kbnSharedDeps_React_["useCallback"])(()=>goToNodeType("awsS3"),[goToNodeType]);const goToAwsRDS=Object(external_kbnSharedDeps_React_["useCallback"])(()=>goToNodeType("awsRDS"),[goToNodeType]);const goToAwsSQS=Object(external_kbnSharedDeps_React_["useCallback"])(()=>goToNodeType("awsSQS"),[goToNodeType]);const panels=Object(external_kbnSharedDeps_React_["useMemo"])(()=>[{id:"firstPanel",items:[{name:getDisplayNameForType("host"),onClick:goToHost},{name:getDisplayNameForType("pod"),onClick:goToK8},{name:getDisplayNameForType("container"),onClick:goToDocker},{name:"AWS",panel:"awsPanel"}]},{id:"awsPanel",title:"AWS",items:[{name:getDisplayNameForType("awsEC2"),onClick:goToAwsEC2},{name:getDisplayNameForType("awsS3"),onClick:goToAwsS3},{name:getDisplayNameForType("awsRDS"),onClick:goToAwsRDS},{name:getDisplayNameForType("awsSQS"),onClick:goToAwsSQS}]}],[goToAwsEC2,goToAwsRDS,goToAwsS3,goToAwsSQS,goToDocker,goToHost,goToK8]);const selectedText=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getDisplayNameForType(nodeType),[nodeType]);const button=external_kbnSharedDeps_React_default.a.createElement(dropdown_button["a"],{onClick:openPopover,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.waffle.showLabel",{defaultMessage:"Show"})},selectedText);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"contextMenu",button:button,isOpen:isOpen,closePopover:closePopover,panelPaddingSize:"none",anchorPosition:"downLeft"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:"firstPanel",panels:panels}))};const ToolbarWrapper=props=>{const{changeMetric:changeMetric,changeGroupBy:changeGroupBy,changeCustomOptions:changeCustomOptions,changeAccount:changeAccount,changeRegion:changeRegion,changeSort:changeSort,customOptions:customOptions,groupBy:groupBy,metric:metric,nodeType:nodeType,accountId:accountId,view:view,region:region,legend:legend,sort:sort,customMetrics:customMetrics,changeCustomMetrics:changeCustomMetrics}=Object(use_waffle_options["d"])();const{createDerivedIndexPattern:createDerivedIndexPattern}=Object(source["b"])();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false,wrap:true,gutterSize:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(WaffleInventorySwitcher,null)),props.children({createDerivedIndexPattern:createDerivedIndexPattern,changeMetric:changeMetric,changeGroupBy:changeGroupBy,changeAccount:changeAccount,changeRegion:changeRegion,changeCustomOptions:changeCustomOptions,changeSort:changeSort,customOptions:customOptions,groupBy:groupBy,sort:sort,view:view,metric:metric,nodeType:nodeType,region:region,accountId:accountId,legend:legend,customMetrics:customMetrics,changeCustomMetrics:changeCustomMetrics}))};const toGroupByOpt=field=>({text:Object(field_to_display_name["a"])(field),field:field})}}]);