/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window["maps_bundle_jsonpfunction"]=window["maps_bundle_jsonpfunction"]||[]).push([[1],Array(48).concat([function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(54);exports.__esModule=true;var _Provider=_interopRequireDefault(__webpack_require__(170));exports.Provider=_Provider["default"];var _connectAdvanced=_interopRequireDefault(__webpack_require__(120));exports.connectAdvanced=_connectAdvanced["default"];var _Context=__webpack_require__(61);exports.ReactReduxContext=_Context.ReactReduxContext;var _connect=_interopRequireDefault(__webpack_require__(177));exports.connect=_connect["default"];var _useDispatch=__webpack_require__(186);exports.useDispatch=_useDispatch.useDispatch;exports.createDispatchHook=_useDispatch.createDispatchHook;var _useSelector=__webpack_require__(187);exports.useSelector=_useSelector.useSelector;exports.createSelectorHook=_useSelector.createSelectorHook;var _useStore=__webpack_require__(129);exports.useStore=_useStore.useStore;exports.createStoreHook=_useStore.createStoreHook;var _batch=__webpack_require__(119);var _reactBatchedUpdates=__webpack_require__(188);exports.batch=_reactBatchedUpdates.unstable_batchedUpdates;var _shallowEqual=_interopRequireDefault(__webpack_require__(123));exports.shallowEqual=_shallowEqual["default"];(0,_batch.setBatch)(_reactBatchedUpdates.unstable_batchedUpdates)},function(module,exports){(function(){module.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},function(module,exports,__webpack_require__){const debug=__webpack_require__(73);const{MAX_LENGTH:MAX_LENGTH,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER}=__webpack_require__(72);const{re:re,t:t}=__webpack_require__(64);const{compareIdentifiers:compareIdentifiers}=__webpack_require__(88);class SemVer{constructor(version,options){if(!options||typeof options!=="object"){options={loose:!!options,includePrerelease:false}}if(version instanceof SemVer){if(version.loose===!!options.loose&&version.includePrerelease===!!options.includePrerelease){return version}else{version=version.version}}else if(typeof version!=="string"){throw new TypeError(`Invalid Version: ${version}`)}if(version.length>MAX_LENGTH){throw new TypeError(`version is longer than ${MAX_LENGTH} characters`)}debug("SemVer",version,options);this.options=options;this.loose=!!options.loose;this.includePrerelease=!!options.includePrerelease;const m=version.trim().match(options.loose?re[t.LOOSE]:re[t.FULL]);if(!m){throw new TypeError(`Invalid Version: ${version}`)}this.raw=version;this.major=+m[1];this.minor=+m[2];this.patch=+m[3];if(this.major>MAX_SAFE_INTEGER||this.major<0){throw new TypeError("Invalid major version")}if(this.minor>MAX_SAFE_INTEGER||this.minor<0){throw new TypeError("Invalid minor version")}if(this.patch>MAX_SAFE_INTEGER||this.patch<0){throw new TypeError("Invalid patch version")}if(!m[4]){this.prerelease=[]}else{this.prerelease=m[4].split(".").map(id=>{if(/^[0-9]+$/.test(id)){const num=+id;if(num>=0&&num<MAX_SAFE_INTEGER){return num}}return id})}this.build=m[5]?m[5].split("."):[];this.format()}format(){this.version=`${this.major}.${this.minor}.${this.patch}`;if(this.prerelease.length){this.version+=`-${this.prerelease.join(".")}`}return this.version}toString(){return this.version}compare(other){debug("SemVer.compare",this.version,this.options,other);if(!(other instanceof SemVer)){if(typeof other==="string"&&other===this.version){return 0}other=new SemVer(other,this.options)}if(other.version===this.version){return 0}return this.compareMain(other)||this.comparePre(other)}compareMain(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options)}return compareIdentifiers(this.major,other.major)||compareIdentifiers(this.minor,other.minor)||compareIdentifiers(this.patch,other.patch)}comparePre(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options)}if(this.prerelease.length&&!other.prerelease.length){return-1}else if(!this.prerelease.length&&other.prerelease.length){return 1}else if(!this.prerelease.length&&!other.prerelease.length){return 0}let i=0;do{const a=this.prerelease[i];const b=other.prerelease[i];debug("prerelease compare",i,a,b);if(a===undefined&&b===undefined){return 0}else if(b===undefined){return 1}else if(a===undefined){return-1}else if(a===b){continue}else{return compareIdentifiers(a,b)}}while(++i)}compareBuild(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options)}let i=0;do{const a=this.build[i];const b=other.build[i];debug("prerelease compare",i,a,b);if(a===undefined&&b===undefined){return 0}else if(b===undefined){return 1}else if(a===undefined){return-1}else if(a===b){continue}else{return compareIdentifiers(a,b)}}while(++i)}inc(release,identifier){switch(release){case"premajor":this.prerelease.length=0;this.patch=0;this.minor=0;this.major++;this.inc("pre",identifier);break;case"preminor":this.prerelease.length=0;this.patch=0;this.minor++;this.inc("pre",identifier);break;case"prepatch":this.prerelease.length=0;this.inc("patch",identifier);this.inc("pre",identifier);break;case"prerelease":if(this.prerelease.length===0){this.inc("patch",identifier)}this.inc("pre",identifier);break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0){this.major++}this.minor=0;this.patch=0;this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0){this.minor++}this.patch=0;this.prerelease=[];break;case"patch":if(this.prerelease.length===0){this.patch++}this.prerelease=[];break;case"pre":if(this.prerelease.length===0){this.prerelease=[0]}else{let i=this.prerelease.length;while(--i>=0){if(typeof this.prerelease[i]==="number"){this.prerelease[i]++;i=-2}}if(i===-1){this.prerelease.push(0)}}if(identifier){if(this.prerelease[0]===identifier){if(isNaN(this.prerelease[1])){this.prerelease=[identifier,0]}}else{this.prerelease=[identifier,0]}}break;default:throw new Error(`invalid increment argument: ${release}`)}this.format();this.raw=this.version;return this}}module.exports=SemVer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var earthRadius=6371008.8;var factors={meters:earthRadius,metres:earthRadius,millimeters:earthRadius*1e3,millimetres:earthRadius*1e3,centimeters:earthRadius*100,centimetres:earthRadius*100,kilometers:earthRadius/1e3,kilometres:earthRadius/1e3,miles:earthRadius/1609.344,nauticalmiles:earthRadius/1852,inches:earthRadius*39.37,yards:earthRadius/1.0936,feet:earthRadius*3.28084,radians:1,degrees:earthRadius/111325};var unitsFactors={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:1/1e3,kilometres:1/1e3,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/earthRadius,degrees:1/111325};var areaFactors={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006};function feature(geometry,properties,options){options=options||{};if(!isObject(options))throw new Error("options is invalid");var bbox=options.bbox;var id=options.id;if(geometry===undefined)throw new Error("geometry is required");if(properties&&properties.constructor!==Object)throw new Error("properties must be an Object");if(bbox)validateBBox(bbox);if(id!==0&&id)validateId(id);var feat={type:"Feature"};if(id===0||id)feat.id=id;if(bbox)feat.bbox=bbox;feat.properties=properties||{};feat.geometry=geometry;return feat}function geometry(type,coordinates,options){options=options||{};if(!isObject(options))throw new Error("options is invalid");var bbox=options.bbox;if(!type)throw new Error("type is required");if(!coordinates)throw new Error("coordinates is required");if(!Array.isArray(coordinates))throw new Error("coordinates must be an Array");if(bbox)validateBBox(bbox);var geom;switch(type){case"Point":geom=point(coordinates).geometry;break;case"LineString":geom=lineString(coordinates).geometry;break;case"Polygon":geom=polygon(coordinates).geometry;break;case"MultiPoint":geom=multiPoint(coordinates).geometry;break;case"MultiLineString":geom=multiLineString(coordinates).geometry;break;case"MultiPolygon":geom=multiPolygon(coordinates).geometry;break;default:throw new Error(type+" is invalid")}if(bbox)geom.bbox=bbox;return geom}function point(coordinates,properties,options){if(!coordinates)throw new Error("coordinates is required");if(!Array.isArray(coordinates))throw new Error("coordinates must be an Array");if(coordinates.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber(coordinates[0])||!isNumber(coordinates[1]))throw new Error("coordinates must contain numbers");return feature({type:"Point",coordinates:coordinates},properties,options)}function points(coordinates,properties,options){if(!coordinates)throw new Error("coordinates is required");if(!Array.isArray(coordinates))throw new Error("coordinates must be an Array");return featureCollection(coordinates.map((function(coords){return point(coords,properties)})),options)}function polygon(coordinates,properties,options){if(!coordinates)throw new Error("coordinates is required");for(var i=0;i<coordinates.length;i++){var ring=coordinates[i];if(ring.length<4){throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.")}for(var j=0;j<ring[ring.length-1].length;j++){if(i===0&&j===0&&!isNumber(ring[0][0])||!isNumber(ring[0][1]))throw new Error("coordinates must contain numbers");if(ring[ring.length-1][j]!==ring[0][j]){throw new Error("First and last Position are not equivalent.")}}}return feature({type:"Polygon",coordinates:coordinates},properties,options)}function polygons(coordinates,properties,options){if(!coordinates)throw new Error("coordinates is required");if(!Array.isArray(coordinates))throw new Error("coordinates must be an Array");return featureCollection(coordinates.map((function(coords){return polygon(coords,properties)})),options)}function lineString(coordinates,properties,options){if(!coordinates)throw new Error("coordinates is required");if(coordinates.length<2)throw new Error("coordinates must be an array of two or more positions");if(!isNumber(coordinates[0][1])||!isNumber(coordinates[0][1]))throw new Error("coordinates must contain numbers");return feature({type:"LineString",coordinates:coordinates},properties,options)}function lineStrings(coordinates,properties,options){if(!coordinates)throw new Error("coordinates is required");if(!Array.isArray(coordinates))throw new Error("coordinates must be an Array");return featureCollection(coordinates.map((function(coords){return lineString(coords,properties)})),options)}function featureCollection(features,options){options=options||{};if(!isObject(options))throw new Error("options is invalid");var bbox=options.bbox;var id=options.id;if(!features)throw new Error("No features passed");if(!Array.isArray(features))throw new Error("features must be an Array");if(bbox)validateBBox(bbox);if(id)validateId(id);var fc={type:"FeatureCollection"};if(id)fc.id=id;if(bbox)fc.bbox=bbox;fc.features=features;return fc}function multiLineString(coordinates,properties,options){if(!coordinates)throw new Error("coordinates is required");return feature({type:"MultiLineString",coordinates:coordinates},properties,options)}function multiPoint(coordinates,properties,options){if(!coordinates)throw new Error("coordinates is required");return feature({type:"MultiPoint",coordinates:coordinates},properties,options)}function multiPolygon(coordinates,properties,options){if(!coordinates)throw new Error("coordinates is required");return feature({type:"MultiPolygon",coordinates:coordinates},properties,options)}function geometryCollection(geometries,properties,options){if(!geometries)throw new Error("geometries is required");if(!Array.isArray(geometries))throw new Error("geometries must be an Array");return feature({type:"GeometryCollection",geometries:geometries},properties,options)}function round(num,precision){if(num===undefined||num===null||isNaN(num))throw new Error("num is required");if(precision&&!(precision>=0))throw new Error("precision must be a positive number");var multiplier=Math.pow(10,precision||0);return Math.round(num*multiplier)/multiplier}function radiansToLength(radians,units){if(radians===undefined||radians===null)throw new Error("radians is required");if(units&&typeof units!=="string")throw new Error("units must be a string");var factor=factors[units||"kilometers"];if(!factor)throw new Error(units+" units is invalid");return radians*factor}function lengthToRadians(distance,units){if(distance===undefined||distance===null)throw new Error("distance is required");if(units&&typeof units!=="string")throw new Error("units must be a string");var factor=factors[units||"kilometers"];if(!factor)throw new Error(units+" units is invalid");return distance/factor}function lengthToDegrees(distance,units){return radiansToDegrees(lengthToRadians(distance,units))}function bearingToAzimuth(bearing){if(bearing===null||bearing===undefined)throw new Error("bearing is required");var angle=bearing%360;if(angle<0)angle+=360;return angle}function radiansToDegrees(radians){if(radians===null||radians===undefined)throw new Error("radians is required");var degrees=radians%(2*Math.PI);return degrees*180/Math.PI}function degreesToRadians(degrees){if(degrees===null||degrees===undefined)throw new Error("degrees is required");var radians=degrees%360;return radians*Math.PI/180}function convertLength(length,originalUnit,finalUnit){if(length===null||length===undefined)throw new Error("length is required");if(!(length>=0))throw new Error("length must be a positive number");return radiansToLength(lengthToRadians(length,originalUnit),finalUnit||"kilometers")}function convertArea(area,originalUnit,finalUnit){if(area===null||area===undefined)throw new Error("area is required");if(!(area>=0))throw new Error("area must be a positive number");var startFactor=areaFactors[originalUnit||"meters"];if(!startFactor)throw new Error("invalid original units");var finalFactor=areaFactors[finalUnit||"kilometers"];if(!finalFactor)throw new Error("invalid final units");return area/startFactor*finalFactor}function isNumber(num){return!isNaN(num)&&num!==null&&!Array.isArray(num)}function isObject(input){return!!input&&input.constructor===Object}function validateBBox(bbox){if(!bbox)throw new Error("bbox is required");if(!Array.isArray(bbox))throw new Error("bbox must be an Array");if(bbox.length!==4&&bbox.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");bbox.forEach((function(num){if(!isNumber(num))throw new Error("bbox must only contain numbers")}))}function validateId(id){if(!id)throw new Error("id is required");if(["string","number"].indexOf(typeof id)===-1)throw new Error("id must be a number or a string")}function radians2degrees(){throw new Error("method has been renamed to `radiansToDegrees`")}function degrees2radians(){throw new Error("method has been renamed to `degreesToRadians`")}function distanceToDegrees(){throw new Error("method has been renamed to `lengthToDegrees`")}function distanceToRadians(){throw new Error("method has been renamed to `lengthToRadians`")}function radiansToDistance(){throw new Error("method has been renamed to `radiansToLength`")}function bearingToAngle(){throw new Error("method has been renamed to `bearingToAzimuth`")}function convertDistance(){throw new Error("method has been renamed to `convertLength`")}exports.earthRadius=earthRadius;exports.factors=factors;exports.unitsFactors=unitsFactors;exports.areaFactors=areaFactors;exports.feature=feature;exports.geometry=geometry;exports.point=point;exports.points=points;exports.polygon=polygon;exports.polygons=polygons;exports.lineString=lineString;exports.lineStrings=lineStrings;exports.featureCollection=featureCollection;exports.multiLineString=multiLineString;exports.multiPoint=multiPoint;exports.multiPolygon=multiPolygon;exports.geometryCollection=geometryCollection;exports.round=round;exports.radiansToLength=radiansToLength;exports.lengthToRadians=lengthToRadians;exports.lengthToDegrees=lengthToDegrees;exports.bearingToAzimuth=bearingToAzimuth;exports.radiansToDegrees=radiansToDegrees;exports.degreesToRadians=degreesToRadians;exports.convertLength=convertLength;exports.convertArea=convertArea;exports.isNumber=isNumber;exports.isObject=isObject;exports.validateBBox=validateBBox;exports.validateId=validateId;exports.radians2degrees=radians2degrees;exports.degrees2radians=degrees2radians;exports.distanceToDegrees=distanceToDegrees;exports.distanceToRadians=distanceToRadians;exports.radiansToDistance=radiansToDistance;exports.bearingToAngle=bearingToAngle;exports.convertDistance=convertDistance},function(module,exports,__webpack_require__){"use strict";var undefined;var $TypeError=TypeError;var $gOPD=Object.getOwnPropertyDescriptor;if($gOPD){try{$gOPD({},"")}catch(e){$gOPD=null}}var throwTypeError=function(){throw new $TypeError};var ThrowTypeError=$gOPD?function(){try{arguments.callee;return throwTypeError}catch(calleeThrows){try{return $gOPD(arguments,"callee").get}catch(gOPDthrows){return throwTypeError}}}():throwTypeError;var hasSymbols=__webpack_require__(157)();var getProto=Object.getPrototypeOf||function(x){return x.__proto__};var generator;var generatorFunction=generator?getProto(generator):undefined;var asyncFn;var asyncFunction=asyncFn?asyncFn.constructor:undefined;var asyncGen;var asyncGenFunction=asyncGen?getProto(asyncGen):undefined;var asyncGenIterator=asyncGen?asyncGen():undefined;var TypedArray=typeof Uint8Array==="undefined"?undefined:getProto(Uint8Array);var INTRINSICS={"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer==="undefined"?undefined:ArrayBuffer,"%ArrayBufferPrototype%":typeof ArrayBuffer==="undefined"?undefined:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":hasSymbols?getProto([][Symbol.iterator]()):undefined,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":asyncFunction,"%AsyncFunctionPrototype%":asyncFunction?asyncFunction.prototype:undefined,"%AsyncGenerator%":asyncGen?getProto(asyncGenIterator):undefined,"%AsyncGeneratorFunction%":asyncGenFunction,"%AsyncGeneratorPrototype%":asyncGenFunction?asyncGenFunction.prototype:undefined,"%AsyncIteratorPrototype%":asyncGenIterator&&hasSymbols&&Symbol.asyncIterator?asyncGenIterator[Symbol.asyncIterator]():undefined,"%Atomics%":typeof Atomics==="undefined"?undefined:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":typeof DataView==="undefined"?undefined:DataView,"%DataViewPrototype%":typeof DataView==="undefined"?undefined:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":typeof Float32Array==="undefined"?undefined:Float32Array,"%Float32ArrayPrototype%":typeof Float32Array==="undefined"?undefined:Float32Array.prototype,"%Float64Array%":typeof Float64Array==="undefined"?undefined:Float64Array,"%Float64ArrayPrototype%":typeof Float64Array==="undefined"?undefined:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":generator?getProto(generator()):undefined,"%GeneratorFunction%":generatorFunction,"%GeneratorPrototype%":generatorFunction?generatorFunction.prototype:undefined,"%Int8Array%":typeof Int8Array==="undefined"?undefined:Int8Array,"%Int8ArrayPrototype%":typeof Int8Array==="undefined"?undefined:Int8Array.prototype,"%Int16Array%":typeof Int16Array==="undefined"?undefined:Int16Array,"%Int16ArrayPrototype%":typeof Int16Array==="undefined"?undefined:Int8Array.prototype,"%Int32Array%":typeof Int32Array==="undefined"?undefined:Int32Array,"%Int32ArrayPrototype%":typeof Int32Array==="undefined"?undefined:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols?getProto(getProto([][Symbol.iterator]())):undefined,"%JSON%":typeof JSON==="object"?JSON:undefined,"%JSONParse%":typeof JSON==="object"?JSON.parse:undefined,"%Map%":typeof Map==="undefined"?undefined:Map,"%MapIteratorPrototype%":typeof Map==="undefined"||!hasSymbols?undefined:getProto((new Map)[Symbol.iterator]()),"%MapPrototype%":typeof Map==="undefined"?undefined:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise==="undefined"?undefined:Promise,"%PromisePrototype%":typeof Promise==="undefined"?undefined:Promise.prototype,"%PromiseProto_then%":typeof Promise==="undefined"?undefined:Promise.prototype.then,"%Promise_all%":typeof Promise==="undefined"?undefined:Promise.all,"%Promise_reject%":typeof Promise==="undefined"?undefined:Promise.reject,"%Promise_resolve%":typeof Promise==="undefined"?undefined:Promise.resolve,"%Proxy%":typeof Proxy==="undefined"?undefined:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":typeof Reflect==="undefined"?undefined:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":typeof Set==="undefined"?undefined:Set,"%SetIteratorPrototype%":typeof Set==="undefined"||!hasSymbols?undefined:getProto((new Set)[Symbol.iterator]()),"%SetPrototype%":typeof Set==="undefined"?undefined:Set.prototype,"%SharedArrayBuffer%":typeof SharedArrayBuffer==="undefined"?undefined:SharedArrayBuffer,"%SharedArrayBufferPrototype%":typeof SharedArrayBuffer==="undefined"?undefined:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":hasSymbols?getProto(""[Symbol.iterator]()):undefined,"%StringPrototype%":String.prototype,"%Symbol%":hasSymbols?Symbol:undefined,"%SymbolPrototype%":hasSymbols?Symbol.prototype:undefined,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypedArrayPrototype%":TypedArray?TypedArray.prototype:undefined,"%TypeError%":$TypeError,"%TypeErrorPrototype%":$TypeError.prototype,"%Uint8Array%":typeof Uint8Array==="undefined"?undefined:Uint8Array,"%Uint8ArrayPrototype%":typeof Uint8Array==="undefined"?undefined:Uint8Array.prototype,"%Uint8ClampedArray%":typeof Uint8ClampedArray==="undefined"?undefined:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray==="undefined"?undefined:Uint8ClampedArray.prototype,"%Uint16Array%":typeof Uint16Array==="undefined"?undefined:Uint16Array,"%Uint16ArrayPrototype%":typeof Uint16Array==="undefined"?undefined:Uint16Array.prototype,"%Uint32Array%":typeof Uint32Array==="undefined"?undefined:Uint32Array,"%Uint32ArrayPrototype%":typeof Uint32Array==="undefined"?undefined:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":typeof WeakMap==="undefined"?undefined:WeakMap,"%WeakMapPrototype%":typeof WeakMap==="undefined"?undefined:WeakMap.prototype,"%WeakSet%":typeof WeakSet==="undefined"?undefined:WeakSet,"%WeakSetPrototype%":typeof WeakSet==="undefined"?undefined:WeakSet.prototype};var bind=__webpack_require__(116);var $replace=bind.call(Function.call,String.prototype.replace);var rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=function stringToPath(string){var result=[];$replace(string,rePropName,(function(match,number,quote,subString){result[result.length]=quote?$replace(subString,reEscapeChar,"$1"):number||match}));return result};var getBaseIntrinsic=function getBaseIntrinsic(name,allowMissing){if(!(name in INTRINSICS)){throw new SyntaxError("intrinsic "+name+" does not exist!")}if(typeof INTRINSICS[name]==="undefined"&&!allowMissing){throw new $TypeError("intrinsic "+name+" exists, but is not available. Please file an issue!")}return INTRINSICS[name]};module.exports=function GetIntrinsic(name,allowMissing){if(typeof name!=="string"||name.length===0){throw new TypeError("intrinsic name must be a non-empty string")}if(arguments.length>1&&typeof allowMissing!=="boolean"){throw new TypeError('"allowMissing" argument must be a boolean')}var parts=stringToPath(name);var value=getBaseIntrinsic("%"+(parts.length>0?parts[0]:"")+"%",allowMissing);for(var i=1;i<parts.length;i+=1){if(value!=null){if($gOPD&&i+1>=parts.length){var desc=$gOPD(value,parts[i]);if(!allowMissing&&!(parts[i]in value)){throw new $TypeError("base intrinsic for "+name+" exists, but the property is not available.")}value=desc?desc.get||desc.value:value[parts[i]]}else{value=value[parts[i]]}}}return value}},function(module,exports,__webpack_require__){(function(){var DocumentPosition,NodeType,XMLCData,XMLComment,XMLDeclaration,XMLDocType,XMLDummy,XMLElement,XMLNamedNodeMap,XMLNode,XMLNodeList,XMLProcessingInstruction,XMLRaw,XMLText,getValue,isEmpty,isFunction,isObject,ref1,hasProp={}.hasOwnProperty;ref1=__webpack_require__(58),isObject=ref1.isObject,isFunction=ref1.isFunction,isEmpty=ref1.isEmpty,getValue=ref1.getValue;XMLElement=null;XMLCData=null;XMLComment=null;XMLDeclaration=null;XMLDocType=null;XMLRaw=null;XMLText=null;XMLProcessingInstruction=null;XMLDummy=null;NodeType=null;XMLNodeList=null;XMLNamedNodeMap=null;DocumentPosition=null;module.exports=XMLNode=function(){function XMLNode(parent1){this.parent=parent1;if(this.parent){this.options=this.parent.options;this.stringify=this.parent.stringify}this.value=null;this.children=[];this.baseURI=null;if(!XMLElement){XMLElement=__webpack_require__(97);XMLCData=__webpack_require__(99);XMLComment=__webpack_require__(100);XMLDeclaration=__webpack_require__(101);XMLDocType=__webpack_require__(102);XMLRaw=__webpack_require__(107);XMLText=__webpack_require__(108);XMLProcessingInstruction=__webpack_require__(109);XMLDummy=__webpack_require__(144);NodeType=__webpack_require__(49);XMLNodeList=__webpack_require__(252);XMLNamedNodeMap=__webpack_require__(98);DocumentPosition=__webpack_require__(253)}}Object.defineProperty(XMLNode.prototype,"nodeName",{get:function(){return this.name}});Object.defineProperty(XMLNode.prototype,"nodeType",{get:function(){return this.type}});Object.defineProperty(XMLNode.prototype,"nodeValue",{get:function(){return this.value}});Object.defineProperty(XMLNode.prototype,"parentNode",{get:function(){return this.parent}});Object.defineProperty(XMLNode.prototype,"childNodes",{get:function(){if(!this.childNodeList||!this.childNodeList.nodes){this.childNodeList=new XMLNodeList(this.children)}return this.childNodeList}});Object.defineProperty(XMLNode.prototype,"firstChild",{get:function(){return this.children[0]||null}});Object.defineProperty(XMLNode.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}});Object.defineProperty(XMLNode.prototype,"previousSibling",{get:function(){var i;i=this.parent.children.indexOf(this);return this.parent.children[i-1]||null}});Object.defineProperty(XMLNode.prototype,"nextSibling",{get:function(){var i;i=this.parent.children.indexOf(this);return this.parent.children[i+1]||null}});Object.defineProperty(XMLNode.prototype,"ownerDocument",{get:function(){return this.document()||null}});Object.defineProperty(XMLNode.prototype,"textContent",{get:function(){var child,j,len,ref2,str;if(this.nodeType===NodeType.Element||this.nodeType===NodeType.DocumentFragment){str="";ref2=this.children;for(j=0,len=ref2.length;j<len;j++){child=ref2[j];if(child.textContent){str+=child.textContent}}return str}else{return null}},set:function(value){throw new Error("This DOM method is not implemented."+this.debugInfo())}});XMLNode.prototype.setParent=function(parent){var child,j,len,ref2,results;this.parent=parent;if(parent){this.options=parent.options;this.stringify=parent.stringify}ref2=this.children;results=[];for(j=0,len=ref2.length;j<len;j++){child=ref2[j];results.push(child.setParent(this))}return results};XMLNode.prototype.element=function(name,attributes,text){var childNode,item,j,k,key,lastChild,len,len1,ref2,ref3,val;lastChild=null;if(attributes===null&&text==null){ref2=[{},null],attributes=ref2[0],text=ref2[1]}if(attributes==null){attributes={}}attributes=getValue(attributes);if(!isObject(attributes)){ref3=[attributes,text],text=ref3[0],attributes=ref3[1]}if(name!=null){name=getValue(name)}if(Array.isArray(name)){for(j=0,len=name.length;j<len;j++){item=name[j];lastChild=this.element(item)}}else if(isFunction(name)){lastChild=this.element(name.apply())}else if(isObject(name)){for(key in name){if(!hasProp.call(name,key))continue;val=name[key];if(isFunction(val)){val=val.apply()}if(!this.options.ignoreDecorators&&this.stringify.convertAttKey&&key.indexOf(this.stringify.convertAttKey)===0){lastChild=this.attribute(key.substr(this.stringify.convertAttKey.length),val)}else if(!this.options.separateArrayItems&&Array.isArray(val)&&isEmpty(val)){lastChild=this.dummy()}else if(isObject(val)&&isEmpty(val)){lastChild=this.element(key)}else if(!this.options.keepNullNodes&&val==null){lastChild=this.dummy()}else if(!this.options.separateArrayItems&&Array.isArray(val)){for(k=0,len1=val.length;k<len1;k++){item=val[k];childNode={};childNode[key]=item;lastChild=this.element(childNode)}}else if(isObject(val)){if(!this.options.ignoreDecorators&&this.stringify.convertTextKey&&key.indexOf(this.stringify.convertTextKey)===0){lastChild=this.element(val)}else{lastChild=this.element(key);lastChild.element(val)}}else{lastChild=this.element(key,val)}}}else if(!this.options.keepNullNodes&&text===null){lastChild=this.dummy()}else{if(!this.options.ignoreDecorators&&this.stringify.convertTextKey&&name.indexOf(this.stringify.convertTextKey)===0){lastChild=this.text(text)}else if(!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&name.indexOf(this.stringify.convertCDataKey)===0){lastChild=this.cdata(text)}else if(!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&name.indexOf(this.stringify.convertCommentKey)===0){lastChild=this.comment(text)}else if(!this.options.ignoreDecorators&&this.stringify.convertRawKey&&name.indexOf(this.stringify.convertRawKey)===0){lastChild=this.raw(text)}else if(!this.options.ignoreDecorators&&this.stringify.convertPIKey&&name.indexOf(this.stringify.convertPIKey)===0){lastChild=this.instruction(name.substr(this.stringify.convertPIKey.length),text)}else{lastChild=this.node(name,attributes,text)}}if(lastChild==null){throw new Error("Could not create any elements with: "+name+". "+this.debugInfo())}return lastChild};XMLNode.prototype.insertBefore=function(name,attributes,text){var child,i,newChild,refChild,removed;if(name!=null?name.type:void 0){newChild=name;refChild=attributes;newChild.setParent(this);if(refChild){i=children.indexOf(refChild);removed=children.splice(i);children.push(newChild);Array.prototype.push.apply(children,removed)}else{children.push(newChild)}return newChild}else{if(this.isRoot){throw new Error("Cannot insert elements at root level. "+this.debugInfo(name))}i=this.parent.children.indexOf(this);removed=this.parent.children.splice(i);child=this.parent.element(name,attributes,text);Array.prototype.push.apply(this.parent.children,removed);return child}};XMLNode.prototype.insertAfter=function(name,attributes,text){var child,i,removed;if(this.isRoot){throw new Error("Cannot insert elements at root level. "+this.debugInfo(name))}i=this.parent.children.indexOf(this);removed=this.parent.children.splice(i+1);child=this.parent.element(name,attributes,text);Array.prototype.push.apply(this.parent.children,removed);return child};XMLNode.prototype.remove=function(){var i,ref2;if(this.isRoot){throw new Error("Cannot remove the root element. "+this.debugInfo())}i=this.parent.children.indexOf(this);[].splice.apply(this.parent.children,[i,i-i+1].concat(ref2=[])),ref2;return this.parent};XMLNode.prototype.node=function(name,attributes,text){var child,ref2;if(name!=null){name=getValue(name)}attributes||(attributes={});attributes=getValue(attributes);if(!isObject(attributes)){ref2=[attributes,text],text=ref2[0],attributes=ref2[1]}child=new XMLElement(this,name,attributes);if(text!=null){child.text(text)}this.children.push(child);return child};XMLNode.prototype.text=function(value){var child;if(isObject(value)){this.element(value)}child=new XMLText(this,value);this.children.push(child);return this};XMLNode.prototype.cdata=function(value){var child;child=new XMLCData(this,value);this.children.push(child);return this};XMLNode.prototype.comment=function(value){var child;child=new XMLComment(this,value);this.children.push(child);return this};XMLNode.prototype.commentBefore=function(value){var child,i,removed;i=this.parent.children.indexOf(this);removed=this.parent.children.splice(i);child=this.parent.comment(value);Array.prototype.push.apply(this.parent.children,removed);return this};XMLNode.prototype.commentAfter=function(value){var child,i,removed;i=this.parent.children.indexOf(this);removed=this.parent.children.splice(i+1);child=this.parent.comment(value);Array.prototype.push.apply(this.parent.children,removed);return this};XMLNode.prototype.raw=function(value){var child;child=new XMLRaw(this,value);this.children.push(child);return this};XMLNode.prototype.dummy=function(){var child;child=new XMLDummy(this);return child};XMLNode.prototype.instruction=function(target,value){var insTarget,insValue,instruction,j,len;if(target!=null){target=getValue(target)}if(value!=null){value=getValue(value)}if(Array.isArray(target)){for(j=0,len=target.length;j<len;j++){insTarget=target[j];this.instruction(insTarget)}}else if(isObject(target)){for(insTarget in target){if(!hasProp.call(target,insTarget))continue;insValue=target[insTarget];this.instruction(insTarget,insValue)}}else{if(isFunction(value)){value=value.apply()}instruction=new XMLProcessingInstruction(this,target,value);this.children.push(instruction)}return this};XMLNode.prototype.instructionBefore=function(target,value){var child,i,removed;i=this.parent.children.indexOf(this);removed=this.parent.children.splice(i);child=this.parent.instruction(target,value);Array.prototype.push.apply(this.parent.children,removed);return this};XMLNode.prototype.instructionAfter=function(target,value){var child,i,removed;i=this.parent.children.indexOf(this);removed=this.parent.children.splice(i+1);child=this.parent.instruction(target,value);Array.prototype.push.apply(this.parent.children,removed);return this};XMLNode.prototype.declaration=function(version,encoding,standalone){var doc,xmldec;doc=this.document();xmldec=new XMLDeclaration(doc,version,encoding,standalone);if(doc.children.length===0){doc.children.unshift(xmldec)}else if(doc.children[0].type===NodeType.Declaration){doc.children[0]=xmldec}else{doc.children.unshift(xmldec)}return doc.root()||doc};XMLNode.prototype.dtd=function(pubID,sysID){var child,doc,doctype,i,j,k,len,len1,ref2,ref3;doc=this.document();doctype=new XMLDocType(doc,pubID,sysID);ref2=doc.children;for(i=j=0,len=ref2.length;j<len;i=++j){child=ref2[i];if(child.type===NodeType.DocType){doc.children[i]=doctype;return doctype}}ref3=doc.children;for(i=k=0,len1=ref3.length;k<len1;i=++k){child=ref3[i];if(child.isRoot){doc.children.splice(i,0,doctype);return doctype}}doc.children.push(doctype);return doctype};XMLNode.prototype.up=function(){if(this.isRoot){throw new Error("The root node has no parent. Use doc() if you need to get the document object.")}return this.parent};XMLNode.prototype.root=function(){var node;node=this;while(node){if(node.type===NodeType.Document){return node.rootObject}else if(node.isRoot){return node}else{node=node.parent}}};XMLNode.prototype.document=function(){var node;node=this;while(node){if(node.type===NodeType.Document){return node}else{node=node.parent}}};XMLNode.prototype.end=function(options){return this.document().end(options)};XMLNode.prototype.prev=function(){var i;i=this.parent.children.indexOf(this);if(i<1){throw new Error("Already at the first node. "+this.debugInfo())}return this.parent.children[i-1]};XMLNode.prototype.next=function(){var i;i=this.parent.children.indexOf(this);if(i===-1||i===this.parent.children.length-1){throw new Error("Already at the last node. "+this.debugInfo())}return this.parent.children[i+1]};XMLNode.prototype.importDocument=function(doc){var clonedRoot;clonedRoot=doc.root().clone();clonedRoot.parent=this;clonedRoot.isRoot=false;this.children.push(clonedRoot);return this};XMLNode.prototype.debugInfo=function(name){var ref2,ref3;name=name||this.name;if(name==null&&!((ref2=this.parent)!=null?ref2.name:void 0)){return""}else if(name==null){return"parent: <"+this.parent.name+">"}else if(!((ref3=this.parent)!=null?ref3.name:void 0)){return"node: <"+name+">"}else{return"node: <"+name+">, parent: <"+this.parent.name+">"}};XMLNode.prototype.ele=function(name,attributes,text){return this.element(name,attributes,text)};XMLNode.prototype.nod=function(name,attributes,text){return this.node(name,attributes,text)};XMLNode.prototype.txt=function(value){return this.text(value)};XMLNode.prototype.dat=function(value){return this.cdata(value)};XMLNode.prototype.com=function(value){return this.comment(value)};XMLNode.prototype.ins=function(target,value){return this.instruction(target,value)};XMLNode.prototype.doc=function(){return this.document()};XMLNode.prototype.dec=function(version,encoding,standalone){return this.declaration(version,encoding,standalone)};XMLNode.prototype.e=function(name,attributes,text){return this.element(name,attributes,text)};XMLNode.prototype.n=function(name,attributes,text){return this.node(name,attributes,text)};XMLNode.prototype.t=function(value){return this.text(value)};XMLNode.prototype.d=function(value){return this.cdata(value)};XMLNode.prototype.c=function(value){return this.comment(value)};XMLNode.prototype.r=function(value){return this.raw(value)};XMLNode.prototype.i=function(target,value){return this.instruction(target,value)};XMLNode.prototype.u=function(){return this.up()};XMLNode.prototype.importXMLBuilder=function(doc){return this.importDocument(doc)};XMLNode.prototype.replaceChild=function(newChild,oldChild){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLNode.prototype.removeChild=function(oldChild){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLNode.prototype.appendChild=function(newChild){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLNode.prototype.hasChildNodes=function(){return this.children.length!==0};XMLNode.prototype.cloneNode=function(deep){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLNode.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLNode.prototype.isSupported=function(feature,version){return true};XMLNode.prototype.hasAttributes=function(){return this.attribs.length!==0};XMLNode.prototype.compareDocumentPosition=function(other){var ref,res;ref=this;if(ref===other){return 0}else if(this.document()!==other.document()){res=DocumentPosition.Disconnected|DocumentPosition.ImplementationSpecific;if(Math.random()<.5){res|=DocumentPosition.Preceding}else{res|=DocumentPosition.Following}return res}else if(ref.isAncestor(other)){return DocumentPosition.Contains|DocumentPosition.Preceding}else if(ref.isDescendant(other)){return DocumentPosition.Contains|DocumentPosition.Following}else if(ref.isPreceding(other)){return DocumentPosition.Preceding}else{return DocumentPosition.Following}};XMLNode.prototype.isSameNode=function(other){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLNode.prototype.lookupPrefix=function(namespaceURI){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLNode.prototype.isDefaultNamespace=function(namespaceURI){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLNode.prototype.lookupNamespaceURI=function(prefix){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLNode.prototype.isEqualNode=function(node){var i,j,ref2;if(node.nodeType!==this.nodeType){return false}if(node.children.length!==this.children.length){return false}for(i=j=0,ref2=this.children.length-1;0<=ref2?j<=ref2:j>=ref2;i=0<=ref2?++j:--j){if(!this.children[i].isEqualNode(node.children[i])){return false}}return true};XMLNode.prototype.getFeature=function(feature,version){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLNode.prototype.setUserData=function(key,data,handler){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLNode.prototype.getUserData=function(key){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLNode.prototype.contains=function(other){if(!other){return false}return other===this||this.isDescendant(other)};XMLNode.prototype.isDescendant=function(node){var child,isDescendantChild,j,len,ref2;ref2=this.children;for(j=0,len=ref2.length;j<len;j++){child=ref2[j];if(node===child){return true}isDescendantChild=child.isDescendant(node);if(isDescendantChild){return true}}return false};XMLNode.prototype.isAncestor=function(node){return node.isDescendant(this)};XMLNode.prototype.isPreceding=function(node){var nodePos,thisPos;nodePos=this.treePosition(node);thisPos=this.treePosition(this);if(nodePos===-1||thisPos===-1){return false}else{return nodePos<thisPos}};XMLNode.prototype.isFollowing=function(node){var nodePos,thisPos;nodePos=this.treePosition(node);thisPos=this.treePosition(this);if(nodePos===-1||thisPos===-1){return false}else{return nodePos>thisPos}};XMLNode.prototype.treePosition=function(node){var found,pos;pos=0;found=false;this.foreachTreeNode(this.document(),(function(childNode){pos++;if(!found&&childNode===node){return found=true}}));if(found){return pos}else{return-1}};XMLNode.prototype.foreachTreeNode=function(node,func){var child,j,len,ref2,res;node||(node=this.document());ref2=node.children;for(j=0,len=ref2.length;j<len;j++){child=ref2[j];if(res=func(child)){return res}else{res=this.foreachTreeNode(child,func);if(res){return res}}}};return XMLNode}()}).call(this)},function(module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=_interopRequireDefault},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){if(typeof window==="object")g=window}module.exports=g},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(50);const compare=(a,b,loose)=>new SemVer(a,loose).compare(new SemVer(b,loose));module.exports=compare},function(module,exports,__webpack_require__){class Range{constructor(range,options){if(!options||typeof options!=="object"){options={loose:!!options,includePrerelease:false}}if(range instanceof Range){if(range.loose===!!options.loose&&range.includePrerelease===!!options.includePrerelease){return range}else{return new Range(range.raw,options)}}if(range instanceof Comparator){this.raw=range.value;this.set=[[range]];this.format();return this}this.options=options;this.loose=!!options.loose;this.includePrerelease=!!options.includePrerelease;this.raw=range;this.set=range.split(/\s*\|\|\s*/).map(range=>this.parseRange(range.trim())).filter(c=>c.length);if(!this.set.length){throw new TypeError(`Invalid SemVer Range: ${range}`)}this.format()}format(){this.range=this.set.map(comps=>comps.join(" ").trim()).join("||").trim();return this.range}toString(){return this.range}parseRange(range){const loose=this.options.loose;range=range.trim();const hr=loose?re[t.HYPHENRANGELOOSE]:re[t.HYPHENRANGE];range=range.replace(hr,hyphenReplace(this.options.includePrerelease));debug("hyphen replace",range);range=range.replace(re[t.COMPARATORTRIM],comparatorTrimReplace);debug("comparator trim",range,re[t.COMPARATORTRIM]);range=range.replace(re[t.TILDETRIM],tildeTrimReplace);range=range.replace(re[t.CARETTRIM],caretTrimReplace);range=range.split(/\s+/).join(" ");const compRe=loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR];return range.split(" ").map(comp=>parseComparator(comp,this.options)).join(" ").split(/\s+/).map(comp=>replaceGTE0(comp,this.options)).filter(this.options.loose?comp=>!!comp.match(compRe):()=>true).map(comp=>new Comparator(comp,this.options))}intersects(range,options){if(!(range instanceof Range)){throw new TypeError("a Range is required")}return this.set.some(thisComparators=>isSatisfiable(thisComparators,options)&&range.set.some(rangeComparators=>isSatisfiable(rangeComparators,options)&&thisComparators.every(thisComparator=>rangeComparators.every(rangeComparator=>thisComparator.intersects(rangeComparator,options)))))}test(version){if(!version){return false}if(typeof version==="string"){try{version=new SemVer(version,this.options)}catch(er){return false}}for(let i=0;i<this.set.length;i++){if(testSet(this.set[i],version,this.options)){return true}}return false}}module.exports=Range;const Comparator=__webpack_require__(75);const debug=__webpack_require__(73);const SemVer=__webpack_require__(50);const{re:re,t:t,comparatorTrimReplace:comparatorTrimReplace,tildeTrimReplace:tildeTrimReplace,caretTrimReplace:caretTrimReplace}=__webpack_require__(64);const isSatisfiable=(comparators,options)=>{let result=true;const remainingComparators=comparators.slice();let testComparator=remainingComparators.pop();while(result&&remainingComparators.length){result=remainingComparators.every(otherComparator=>testComparator.intersects(otherComparator,options));testComparator=remainingComparators.pop()}return result};const parseComparator=(comp,options)=>{debug("comp",comp,options);comp=replaceCarets(comp,options);debug("caret",comp);comp=replaceTildes(comp,options);debug("tildes",comp);comp=replaceXRanges(comp,options);debug("xrange",comp);comp=replaceStars(comp,options);debug("stars",comp);return comp};const isX=id=>!id||id.toLowerCase()==="x"||id==="*";const replaceTildes=(comp,options)=>comp.trim().split(/\s+/).map(comp=>replaceTilde(comp,options)).join(" ");const replaceTilde=(comp,options)=>{const r=options.loose?re[t.TILDELOOSE]:re[t.TILDE];return comp.replace(r,(_,M,m,p,pr)=>{debug("tilde",comp,_,M,m,p,pr);let ret;if(isX(M)){ret=""}else if(isX(m)){ret=`>=${M}.0.0 <${+M+1}.0.0-0`}else if(isX(p)){ret=`>=${M}.${m}.0 <${M}.${+m+1}.0-0`}else if(pr){debug("replaceTilde pr",pr);ret=`>=${M}.${m}.${p}-${pr} <${M}.${+m+1}.0-0`}else{ret=`>=${M}.${m}.${p} <${M}.${+m+1}.0-0`}debug("tilde return",ret);return ret})};const replaceCarets=(comp,options)=>comp.trim().split(/\s+/).map(comp=>replaceCaret(comp,options)).join(" ");const replaceCaret=(comp,options)=>{debug("caret",comp,options);const r=options.loose?re[t.CARETLOOSE]:re[t.CARET];const z=options.includePrerelease?"-0":"";return comp.replace(r,(_,M,m,p,pr)=>{debug("caret",comp,_,M,m,p,pr);let ret;if(isX(M)){ret=""}else if(isX(m)){ret=`>=${M}.0.0${z} <${+M+1}.0.0-0`}else if(isX(p)){if(M==="0"){ret=`>=${M}.${m}.0${z} <${M}.${+m+1}.0-0`}else{ret=`>=${M}.${m}.0${z} <${+M+1}.0.0-0`}}else if(pr){debug("replaceCaret pr",pr);if(M==="0"){if(m==="0"){ret=`>=${M}.${m}.${p}-${pr} <${M}.${m}.${+p+1}-0`}else{ret=`>=${M}.${m}.${p}-${pr} <${M}.${+m+1}.0-0`}}else{ret=`>=${M}.${m}.${p}-${pr} <${+M+1}.0.0-0`}}else{debug("no pr");if(M==="0"){if(m==="0"){ret=`>=${M}.${m}.${p}${z} <${M}.${m}.${+p+1}-0`}else{ret=`>=${M}.${m}.${p}${z} <${M}.${+m+1}.0-0`}}else{ret=`>=${M}.${m}.${p} <${+M+1}.0.0-0`}}debug("caret return",ret);return ret})};const replaceXRanges=(comp,options)=>{debug("replaceXRanges",comp,options);return comp.split(/\s+/).map(comp=>replaceXRange(comp,options)).join(" ")};const replaceXRange=(comp,options)=>{comp=comp.trim();const r=options.loose?re[t.XRANGELOOSE]:re[t.XRANGE];return comp.replace(r,(ret,gtlt,M,m,p,pr)=>{debug("xRange",comp,ret,gtlt,M,m,p,pr);const xM=isX(M);const xm=xM||isX(m);const xp=xm||isX(p);const anyX=xp;if(gtlt==="="&&anyX){gtlt=""}pr=options.includePrerelease?"-0":"";if(xM){if(gtlt===">"||gtlt==="<"){ret="<0.0.0-0"}else{ret="*"}}else if(gtlt&&anyX){if(xm){m=0}p=0;if(gtlt===">"){gtlt=">=";if(xm){M=+M+1;m=0;p=0}else{m=+m+1;p=0}}else if(gtlt==="<="){gtlt="<";if(xm){M=+M+1}else{m=+m+1}}if(gtlt==="<")pr="-0";ret=`${gtlt+M}.${m}.${p}${pr}`}else if(xm){ret=`>=${M}.0.0${pr} <${+M+1}.0.0-0`}else if(xp){ret=`>=${M}.${m}.0${pr} <${M}.${+m+1}.0-0`}debug("xRange return",ret);return ret})};const replaceStars=(comp,options)=>{debug("replaceStars",comp,options);return comp.trim().replace(re[t.STAR],"")};const replaceGTE0=(comp,options)=>{debug("replaceGTE0",comp,options);return comp.trim().replace(re[options.includePrerelease?t.GTE0PRE:t.GTE0],"")};const hyphenReplace=incPr=>($0,from,fM,fm,fp,fpr,fb,to,tM,tm,tp,tpr,tb)=>{if(isX(fM)){from=""}else if(isX(fm)){from=`>=${fM}.0.0${incPr?"-0":""}`}else if(isX(fp)){from=`>=${fM}.${fm}.0${incPr?"-0":""}`}else if(fpr){from=`>=${from}`}else{from=`>=${from}${incPr?"-0":""}`}if(isX(tM)){to=""}else if(isX(tm)){to=`<${+tM+1}.0.0-0`}else if(isX(tp)){to=`<${tM}.${+tm+1}.0-0`}else if(tpr){to=`<=${tM}.${tm}.${tp}-${tpr}`}else if(incPr){to=`<${tM}.${tm}.${+tp+1}-0`}else{to=`<=${to}`}return`${from} ${to}`.trim()};const testSet=(set,version,options)=>{for(let i=0;i<set.length;i++){if(!set[i].test(version)){return false}}if(version.prerelease.length&&!options.includePrerelease){for(let i=0;i<set.length;i++){debug(set[i].semver);if(set[i].semver===Comparator.ANY){continue}if(set[i].semver.prerelease.length>0){const allowed=set[i].semver;if(allowed.major===version.major&&allowed.minor===version.minor&&allowed.patch===version.patch){return true}}}return false}return true}},function(module,exports){(function(){var assign,getValue,isArray,isEmpty,isFunction,isObject,isPlainObject,slice=[].slice,hasProp={}.hasOwnProperty;assign=function(){var i,key,len,source,sources,target;target=arguments[0],sources=2<=arguments.length?slice.call(arguments,1):[];if(isFunction(Object.assign)){Object.assign.apply(null,arguments)}else{for(i=0,len=sources.length;i<len;i++){source=sources[i];if(source!=null){for(key in source){if(!hasProp.call(source,key))continue;target[key]=source[key]}}}}return target};isFunction=function(val){return!!val&&Object.prototype.toString.call(val)==="[object Function]"};isObject=function(val){var ref;return!!val&&((ref=typeof val)==="function"||ref==="object")};isArray=function(val){if(isFunction(Array.isArray)){return Array.isArray(val)}else{return Object.prototype.toString.call(val)==="[object Array]"}};isEmpty=function(val){var key;if(isArray(val)){return!val.length}else{for(key in val){if(!hasProp.call(val,key))continue;return false}return true}};isPlainObject=function(val){var ctor,proto;return isObject(val)&&(proto=Object.getPrototypeOf(val))&&(ctor=proto.constructor)&&typeof ctor==="function"&&ctor instanceof ctor&&Function.prototype.toString.call(ctor)===Function.prototype.toString.call(Object)};getValue=function(obj){if(isFunction(obj.valueOf)){return obj.valueOf()}else{return obj}};module.exports.assign=assign;module.exports.isFunction=isFunction;module.exports.isObject=isObject;module.exports.isArray=isArray;module.exports.isEmpty=isEmpty;module.exports.isPlainObject=isPlainObject;module.exports.getValue=getValue}).call(this)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var helpers_1=__webpack_require__(51);function getCoord(coord){if(!coord){throw new Error("coord is required")}if(!Array.isArray(coord)){if(coord.type==="Feature"&&coord.geometry!==null&&coord.geometry.type==="Point"){return coord.geometry.coordinates}if(coord.type==="Point"){return coord.coordinates}}if(Array.isArray(coord)&&coord.length>=2&&!Array.isArray(coord[0])&&!Array.isArray(coord[1])){return coord}throw new Error("coord must be GeoJSON Point or an Array of numbers")}exports.getCoord=getCoord;function getCoords(coords){if(Array.isArray(coords)){return coords}if(coords.type==="Feature"){if(coords.geometry!==null){return coords.geometry.coordinates}}else{if(coords.coordinates){return coords.coordinates}}throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}exports.getCoords=getCoords;function containsNumber(coordinates){if(coordinates.length>1&&helpers_1.isNumber(coordinates[0])&&helpers_1.isNumber(coordinates[1])){return true}if(Array.isArray(coordinates[0])&&coordinates[0].length){return containsNumber(coordinates[0])}throw new Error("coordinates must only contain numbers")}exports.containsNumber=containsNumber;function geojsonType(value,type,name){if(!type||!name){throw new Error("type and name required")}if(!value||value.type!==type){throw new Error("Invalid input to "+name+": must be a "+type+", given "+value.type)}}exports.geojsonType=geojsonType;function featureOf(feature,type,name){if(!feature){throw new Error("No feature passed")}if(!name){throw new Error(".featureOf() requires a name")}if(!feature||feature.type!=="Feature"||!feature.geometry){throw new Error("Invalid input to "+name+", Feature with geometry required")}if(!feature.geometry||feature.geometry.type!==type){throw new Error("Invalid input to "+name+": must be a "+type+", given "+feature.geometry.type)}}exports.featureOf=featureOf;function collectionOf(featureCollection,type,name){if(!featureCollection){throw new Error("No featureCollection passed")}if(!name){throw new Error(".collectionOf() requires a name")}if(!featureCollection||featureCollection.type!=="FeatureCollection"){throw new Error("Invalid input to "+name+", FeatureCollection required")}for(var _i=0,_a=featureCollection.features;_i<_a.length;_i++){var feature=_a[_i];if(!feature||feature.type!=="Feature"||!feature.geometry){throw new Error("Invalid input to "+name+", Feature with geometry required")}if(!feature.geometry||feature.geometry.type!==type){throw new Error("Invalid input to "+name+": must be a "+type+", given "+feature.geometry.type)}}}exports.collectionOf=collectionOf;function getGeom(geojson){if(geojson.type==="Feature"){return geojson.geometry}return geojson}exports.getGeom=getGeom;function getType(geojson,name){if(geojson.type==="FeatureCollection"){return"FeatureCollection"}if(geojson.type==="GeometryCollection"){return"GeometryCollection"}if(geojson.type==="Feature"&&geojson.geometry!==null){return geojson.geometry.type}return geojson.type}exports.getType=getType},function(module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(54);exports.__esModule=true;exports["default"]=exports.ReactReduxContext=void 0;var _react=_interopRequireDefault(__webpack_require__(2));var ReactReduxContext=_react["default"].createContext(null);exports.ReactReduxContext=ReactReduxContext;if(false){}var _default=ReactReduxContext;exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";var pna=__webpack_require__(80);var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){keys.push(key)}return keys};module.exports=Duplex;var util=Object.create(__webpack_require__(67));util.inherits=__webpack_require__(68);var Readable=__webpack_require__(148);var Writable=__webpack_require__(113);util.inherits(Duplex,Readable);{var keys=objectKeys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method]}}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);if(options&&options.readable===false)this.readable=false;if(options&&options.writable===false)this.writable=false;this.allowHalfOpen=true;if(options&&options.allowHalfOpen===false)this.allowHalfOpen=false;this.once("end",onend)}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:false,get:function(){return this._writableState.highWaterMark}});function onend(){if(this.allowHalfOpen||this._writableState.ended)return;pna.nextTick(onEndNT,this)}function onEndNT(self){self.end()}Object.defineProperty(Duplex.prototype,"destroyed",{get:function(){if(this._readableState===undefined||this._writableState===undefined){return false}return this._readableState.destroyed&&this._writableState.destroyed},set:function(value){if(this._readableState===undefined||this._writableState===undefined){return}this._readableState.destroyed=value;this._writableState.destroyed=value}});Duplex.prototype._destroy=function(err,cb){this.push(null);this.end();pna.nextTick(cb,err)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var helpers=__webpack_require__(51);function coordEach(geojson,callback,excludeWrapCoord){if(geojson===null)return;var j,k,l,geometry,stopG,coords,geometryMaybeCollection,wrapShrink=0,coordIndex=0,isGeometryCollection,type=geojson.type,isFeatureCollection=type==="FeatureCollection",isFeature=type==="Feature",stop=isFeatureCollection?geojson.features.length:1;for(var featureIndex=0;featureIndex<stop;featureIndex++){geometryMaybeCollection=isFeatureCollection?geojson.features[featureIndex].geometry:isFeature?geojson.geometry:geojson;isGeometryCollection=geometryMaybeCollection?geometryMaybeCollection.type==="GeometryCollection":false;stopG=isGeometryCollection?geometryMaybeCollection.geometries.length:1;for(var geomIndex=0;geomIndex<stopG;geomIndex++){var multiFeatureIndex=0;var geometryIndex=0;geometry=isGeometryCollection?geometryMaybeCollection.geometries[geomIndex]:geometryMaybeCollection;if(geometry===null)continue;coords=geometry.coordinates;var geomType=geometry.type;wrapShrink=excludeWrapCoord&&(geomType==="Polygon"||geomType==="MultiPolygon")?1:0;switch(geomType){case null:break;case"Point":if(callback(coords,coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++;multiFeatureIndex++;break;case"LineString":case"MultiPoint":for(j=0;j<coords.length;j++){if(callback(coords[j],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++;if(geomType==="MultiPoint")multiFeatureIndex++}if(geomType==="LineString")multiFeatureIndex++;break;case"Polygon":case"MultiLineString":for(j=0;j<coords.length;j++){for(k=0;k<coords[j].length-wrapShrink;k++){if(callback(coords[j][k],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++}if(geomType==="MultiLineString")multiFeatureIndex++;if(geomType==="Polygon")geometryIndex++}if(geomType==="Polygon")multiFeatureIndex++;break;case"MultiPolygon":for(j=0;j<coords.length;j++){geometryIndex=0;for(k=0;k<coords[j].length;k++){for(l=0;l<coords[j][k].length-wrapShrink;l++){if(callback(coords[j][k][l],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++}geometryIndex++}multiFeatureIndex++}break;case"GeometryCollection":for(j=0;j<geometry.geometries.length;j++)if(coordEach(geometry.geometries[j],callback,excludeWrapCoord)===false)return false;break;default:throw new Error("Unknown Geometry Type")}}}}function coordReduce(geojson,callback,initialValue,excludeWrapCoord){var previousValue=initialValue;coordEach(geojson,(function(currentCoord,coordIndex,featureIndex,multiFeatureIndex,geometryIndex){if(coordIndex===0&&initialValue===undefined)previousValue=currentCoord;else previousValue=callback(previousValue,currentCoord,coordIndex,featureIndex,multiFeatureIndex,geometryIndex)}),excludeWrapCoord);return previousValue}function propEach(geojson,callback){var i;switch(geojson.type){case"FeatureCollection":for(i=0;i<geojson.features.length;i++){if(callback(geojson.features[i].properties,i)===false)break}break;case"Feature":callback(geojson.properties,0);break}}function propReduce(geojson,callback,initialValue){var previousValue=initialValue;propEach(geojson,(function(currentProperties,featureIndex){if(featureIndex===0&&initialValue===undefined)previousValue=currentProperties;else previousValue=callback(previousValue,currentProperties,featureIndex)}));return previousValue}function featureEach(geojson,callback){if(geojson.type==="Feature"){callback(geojson,0)}else if(geojson.type==="FeatureCollection"){for(var i=0;i<geojson.features.length;i++){if(callback(geojson.features[i],i)===false)break}}}function featureReduce(geojson,callback,initialValue){var previousValue=initialValue;featureEach(geojson,(function(currentFeature,featureIndex){if(featureIndex===0&&initialValue===undefined)previousValue=currentFeature;else previousValue=callback(previousValue,currentFeature,featureIndex)}));return previousValue}function coordAll(geojson){var coords=[];coordEach(geojson,(function(coord){coords.push(coord)}));return coords}function geomEach(geojson,callback){var i,j,g,geometry,stopG,geometryMaybeCollection,isGeometryCollection,featureProperties,featureBBox,featureId,featureIndex=0,isFeatureCollection=geojson.type==="FeatureCollection",isFeature=geojson.type==="Feature",stop=isFeatureCollection?geojson.features.length:1;for(i=0;i<stop;i++){geometryMaybeCollection=isFeatureCollection?geojson.features[i].geometry:isFeature?geojson.geometry:geojson;featureProperties=isFeatureCollection?geojson.features[i].properties:isFeature?geojson.properties:{};featureBBox=isFeatureCollection?geojson.features[i].bbox:isFeature?geojson.bbox:undefined;featureId=isFeatureCollection?geojson.features[i].id:isFeature?geojson.id:undefined;isGeometryCollection=geometryMaybeCollection?geometryMaybeCollection.type==="GeometryCollection":false;stopG=isGeometryCollection?geometryMaybeCollection.geometries.length:1;for(g=0;g<stopG;g++){geometry=isGeometryCollection?geometryMaybeCollection.geometries[g]:geometryMaybeCollection;if(geometry===null){if(callback(null,featureIndex,featureProperties,featureBBox,featureId)===false)return false;continue}switch(geometry.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(callback(geometry,featureIndex,featureProperties,featureBBox,featureId)===false)return false;break}case"GeometryCollection":{for(j=0;j<geometry.geometries.length;j++){if(callback(geometry.geometries[j],featureIndex,featureProperties,featureBBox,featureId)===false)return false}break}default:throw new Error("Unknown Geometry Type")}}featureIndex++}}function geomReduce(geojson,callback,initialValue){var previousValue=initialValue;geomEach(geojson,(function(currentGeometry,featureIndex,featureProperties,featureBBox,featureId){if(featureIndex===0&&initialValue===undefined)previousValue=currentGeometry;else previousValue=callback(previousValue,currentGeometry,featureIndex,featureProperties,featureBBox,featureId)}));return previousValue}function flattenEach(geojson,callback){geomEach(geojson,(function(geometry,featureIndex,properties,bbox,id){var type=geometry===null?null:geometry.type;switch(type){case null:case"Point":case"LineString":case"Polygon":if(callback(helpers.feature(geometry,properties,{bbox:bbox,id:id}),featureIndex,0)===false)return false;return}var geomType;switch(type){case"MultiPoint":geomType="Point";break;case"MultiLineString":geomType="LineString";break;case"MultiPolygon":geomType="Polygon";break}for(var multiFeatureIndex=0;multiFeatureIndex<geometry.coordinates.length;multiFeatureIndex++){var coordinate=geometry.coordinates[multiFeatureIndex];var geom={type:geomType,coordinates:coordinate};if(callback(helpers.feature(geom,properties),featureIndex,multiFeatureIndex)===false)return false}}))}function flattenReduce(geojson,callback,initialValue){var previousValue=initialValue;flattenEach(geojson,(function(currentFeature,featureIndex,multiFeatureIndex){if(featureIndex===0&&multiFeatureIndex===0&&initialValue===undefined)previousValue=currentFeature;else previousValue=callback(previousValue,currentFeature,featureIndex,multiFeatureIndex)}));return previousValue}function segmentEach(geojson,callback){flattenEach(geojson,(function(feature,featureIndex,multiFeatureIndex){var segmentIndex=0;if(!feature.geometry)return;var type=feature.geometry.type;if(type==="Point"||type==="MultiPoint")return;var previousCoords;var previousFeatureIndex=0;var previousMultiIndex=0;var prevGeomIndex=0;if(coordEach(feature,(function(currentCoord,coordIndex,featureIndexCoord,multiPartIndexCoord,geometryIndex){if(previousCoords===undefined||featureIndex>previousFeatureIndex||multiPartIndexCoord>previousMultiIndex||geometryIndex>prevGeomIndex){previousCoords=currentCoord;previousFeatureIndex=featureIndex;previousMultiIndex=multiPartIndexCoord;prevGeomIndex=geometryIndex;segmentIndex=0;return}var currentSegment=helpers.lineString([previousCoords,currentCoord],feature.properties);if(callback(currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex)===false)return false;segmentIndex++;previousCoords=currentCoord}))===false)return false}))}function segmentReduce(geojson,callback,initialValue){var previousValue=initialValue;var started=false;segmentEach(geojson,(function(currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex){if(started===false&&initialValue===undefined)previousValue=currentSegment;else previousValue=callback(previousValue,currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex);started=true}));return previousValue}function lineEach(geojson,callback){if(!geojson)throw new Error("geojson is required");flattenEach(geojson,(function(feature,featureIndex,multiFeatureIndex){if(feature.geometry===null)return;var type=feature.geometry.type;var coords=feature.geometry.coordinates;switch(type){case"LineString":if(callback(feature,featureIndex,multiFeatureIndex,0,0)===false)return false;break;case"Polygon":for(var geometryIndex=0;geometryIndex<coords.length;geometryIndex++){if(callback(helpers.lineString(coords[geometryIndex],feature.properties),featureIndex,multiFeatureIndex,geometryIndex)===false)return false}break}}))}function lineReduce(geojson,callback,initialValue){var previousValue=initialValue;lineEach(geojson,(function(currentLine,featureIndex,multiFeatureIndex,geometryIndex){if(featureIndex===0&&initialValue===undefined)previousValue=currentLine;else previousValue=callback(previousValue,currentLine,featureIndex,multiFeatureIndex,geometryIndex)}));return previousValue}function findSegment(geojson,options){options=options||{};if(!helpers.isObject(options))throw new Error("options is invalid");var featureIndex=options.featureIndex||0;var multiFeatureIndex=options.multiFeatureIndex||0;var geometryIndex=options.geometryIndex||0;var segmentIndex=options.segmentIndex||0;var properties=options.properties;var geometry;switch(geojson.type){case"FeatureCollection":if(featureIndex<0)featureIndex=geojson.features.length+featureIndex;properties=properties||geojson.features[featureIndex].properties;geometry=geojson.features[featureIndex].geometry;break;case"Feature":properties=properties||geojson.properties;geometry=geojson.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":geometry=geojson;break;default:throw new Error("geojson is invalid")}if(geometry===null)return null;var coords=geometry.coordinates;switch(geometry.type){case"Point":case"MultiPoint":return null;case"LineString":if(segmentIndex<0)segmentIndex=coords.length+segmentIndex-1;return helpers.lineString([coords[segmentIndex],coords[segmentIndex+1]],properties,options);case"Polygon":if(geometryIndex<0)geometryIndex=coords.length+geometryIndex;if(segmentIndex<0)segmentIndex=coords[geometryIndex].length+segmentIndex-1;return helpers.lineString([coords[geometryIndex][segmentIndex],coords[geometryIndex][segmentIndex+1]],properties,options);case"MultiLineString":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(segmentIndex<0)segmentIndex=coords[multiFeatureIndex].length+segmentIndex-1;return helpers.lineString([coords[multiFeatureIndex][segmentIndex],coords[multiFeatureIndex][segmentIndex+1]],properties,options);case"MultiPolygon":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(geometryIndex<0)geometryIndex=coords[multiFeatureIndex].length+geometryIndex;if(segmentIndex<0)segmentIndex=coords[multiFeatureIndex][geometryIndex].length-segmentIndex-1;return helpers.lineString([coords[multiFeatureIndex][geometryIndex][segmentIndex],coords[multiFeatureIndex][geometryIndex][segmentIndex+1]],properties,options)}throw new Error("geojson is invalid")}function findPoint(geojson,options){options=options||{};if(!helpers.isObject(options))throw new Error("options is invalid");var featureIndex=options.featureIndex||0;var multiFeatureIndex=options.multiFeatureIndex||0;var geometryIndex=options.geometryIndex||0;var coordIndex=options.coordIndex||0;var properties=options.properties;var geometry;switch(geojson.type){case"FeatureCollection":if(featureIndex<0)featureIndex=geojson.features.length+featureIndex;properties=properties||geojson.features[featureIndex].properties;geometry=geojson.features[featureIndex].geometry;break;case"Feature":properties=properties||geojson.properties;geometry=geojson.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":geometry=geojson;break;default:throw new Error("geojson is invalid")}if(geometry===null)return null;var coords=geometry.coordinates;switch(geometry.type){case"Point":return helpers.point(coords,properties,options);case"MultiPoint":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;return helpers.point(coords[multiFeatureIndex],properties,options);case"LineString":if(coordIndex<0)coordIndex=coords.length+coordIndex;return helpers.point(coords[coordIndex],properties,options);case"Polygon":if(geometryIndex<0)geometryIndex=coords.length+geometryIndex;if(coordIndex<0)coordIndex=coords[geometryIndex].length+coordIndex;return helpers.point(coords[geometryIndex][coordIndex],properties,options);case"MultiLineString":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(coordIndex<0)coordIndex=coords[multiFeatureIndex].length+coordIndex;return helpers.point(coords[multiFeatureIndex][coordIndex],properties,options);case"MultiPolygon":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(geometryIndex<0)geometryIndex=coords[multiFeatureIndex].length+geometryIndex;if(coordIndex<0)coordIndex=coords[multiFeatureIndex][geometryIndex].length-coordIndex;return helpers.point(coords[multiFeatureIndex][geometryIndex][coordIndex],properties,options)}throw new Error("geojson is invalid")}exports.coordEach=coordEach;exports.coordReduce=coordReduce;exports.propEach=propEach;exports.propReduce=propReduce;exports.featureEach=featureEach;exports.featureReduce=featureReduce;exports.coordAll=coordAll;exports.geomEach=geomEach;exports.geomReduce=geomReduce;exports.flattenEach=flattenEach;exports.flattenReduce=flattenReduce;exports.segmentEach=segmentEach;exports.segmentReduce=segmentReduce;exports.lineEach=lineEach;exports.lineReduce=lineReduce;exports.findSegment=findSegment;exports.findPoint=findPoint},function(module,exports,__webpack_require__){const{MAX_SAFE_COMPONENT_LENGTH:MAX_SAFE_COMPONENT_LENGTH}=__webpack_require__(72);const debug=__webpack_require__(73);exports=module.exports={};const re=exports.re=[];const src=exports.src=[];const t=exports.t={};let R=0;const createToken=(name,value,isGlobal)=>{const index=R++;debug(index,value);t[name]=index;src[index]=value;re[index]=new RegExp(value,isGlobal?"g":undefined)};createToken("NUMERICIDENTIFIER","0|[1-9]\\d*");createToken("NUMERICIDENTIFIERLOOSE","[0-9]+");createToken("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");createToken("MAINVERSION",`(${src[t.NUMERICIDENTIFIER]})\\.`+`(${src[t.NUMERICIDENTIFIER]})\\.`+`(${src[t.NUMERICIDENTIFIER]})`);createToken("MAINVERSIONLOOSE",`(${src[t.NUMERICIDENTIFIERLOOSE]})\\.`+`(${src[t.NUMERICIDENTIFIERLOOSE]})\\.`+`(${src[t.NUMERICIDENTIFIERLOOSE]})`);createToken("PRERELEASEIDENTIFIER",`(?:${src[t.NUMERICIDENTIFIER]}|${src[t.NONNUMERICIDENTIFIER]})`);createToken("PRERELEASEIDENTIFIERLOOSE",`(?:${src[t.NUMERICIDENTIFIERLOOSE]}|${src[t.NONNUMERICIDENTIFIER]})`);createToken("PRERELEASE",`(?:-(${src[t.PRERELEASEIDENTIFIER]}(?:\\.${src[t.PRERELEASEIDENTIFIER]})*))`);createToken("PRERELEASELOOSE",`(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`);createToken("BUILDIDENTIFIER","[0-9A-Za-z-]+");createToken("BUILD",`(?:\\+(${src[t.BUILDIDENTIFIER]}(?:\\.${src[t.BUILDIDENTIFIER]})*))`);createToken("FULLPLAIN",`v?${src[t.MAINVERSION]}${src[t.PRERELEASE]}?${src[t.BUILD]}?`);createToken("FULL",`^${src[t.FULLPLAIN]}$`);createToken("LOOSEPLAIN",`[v=\\s]*${src[t.MAINVERSIONLOOSE]}${src[t.PRERELEASELOOSE]}?${src[t.BUILD]}?`);createToken("LOOSE",`^${src[t.LOOSEPLAIN]}$`);createToken("GTLT","((?:<|>)?=?)");createToken("XRANGEIDENTIFIERLOOSE",`${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);createToken("XRANGEIDENTIFIER",`${src[t.NUMERICIDENTIFIER]}|x|X|\\*`);createToken("XRANGEPLAIN",`[v=\\s]*(${src[t.XRANGEIDENTIFIER]})`+`(?:\\.(${src[t.XRANGEIDENTIFIER]})`+`(?:\\.(${src[t.XRANGEIDENTIFIER]})`+`(?:${src[t.PRERELEASE]})?${src[t.BUILD]}?`+`)?)?`);createToken("XRANGEPLAINLOOSE",`[v=\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${src[t.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${src[t.XRANGEIDENTIFIERLOOSE]})`+`(?:${src[t.PRERELEASELOOSE]})?${src[t.BUILD]}?`+`)?)?`);createToken("XRANGE",`^${src[t.GTLT]}\\s*${src[t.XRANGEPLAIN]}$`);createToken("XRANGELOOSE",`^${src[t.GTLT]}\\s*${src[t.XRANGEPLAINLOOSE]}$`);createToken("COERCE",`${"(^|[^\\d])"+"(\\d{1,"}${MAX_SAFE_COMPONENT_LENGTH}})`+`(?:\\.(\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`+`(?:\\.(\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`+`(?:$|[^\\d])`);createToken("COERCERTL",src[t.COERCE],true);createToken("LONETILDE","(?:~>?)");createToken("TILDETRIM",`(\\s*)${src[t.LONETILDE]}\\s+`,true);exports.tildeTrimReplace="$1~";createToken("TILDE",`^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`);createToken("TILDELOOSE",`^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`);createToken("LONECARET","(?:\\^)");createToken("CARETTRIM",`(\\s*)${src[t.LONECARET]}\\s+`,true);exports.caretTrimReplace="$1^";createToken("CARET",`^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`);createToken("CARETLOOSE",`^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`);createToken("COMPARATORLOOSE",`^${src[t.GTLT]}\\s*(${src[t.LOOSEPLAIN]})$|^$`);createToken("COMPARATOR",`^${src[t.GTLT]}\\s*(${src[t.FULLPLAIN]})$|^$`);createToken("COMPARATORTRIM",`(\\s*)${src[t.GTLT]}\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`,true);exports.comparatorTrimReplace="$1$2$3";createToken("HYPHENRANGE",`^\\s*(${src[t.XRANGEPLAIN]})`+`\\s+-\\s+`+`(${src[t.XRANGEPLAIN]})`+`\\s*$`);createToken("HYPHENRANGELOOSE",`^\\s*(${src[t.XRANGEPLAINLOOSE]})`+`\\s+-\\s+`+`(${src[t.XRANGEPLAINLOOSE]})`+`\\s*$`);createToken("STAR","(<|>)?=?\\s*\\*");createToken("GTE0","^\\s*>=\\s*0.0.0\\s*$");createToken("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},function(module,exports,__webpack_require__){const{MAX_LENGTH:MAX_LENGTH}=__webpack_require__(72);const{re:re,t:t}=__webpack_require__(64);const SemVer=__webpack_require__(50);const parse=(version,options)=>{if(!options||typeof options!=="object"){options={loose:!!options,includePrerelease:false}}if(version instanceof SemVer){return version}if(typeof version!=="string"){return null}if(version.length>MAX_LENGTH){return null}const r=options.loose?re[t.LOOSE]:re[t.FULL];if(!r.test(version)){return null}try{return new SemVer(version,options)}catch(er){return null}};module.exports=parse},function(module,exports,__webpack_require__){"use strict";var R=typeof Reflect==="object"?Reflect:null;var ReflectApply=R&&typeof R.apply==="function"?R.apply:function ReflectApply(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};var ReflectOwnKeys;if(R&&typeof R.ownKeys==="function"){ReflectOwnKeys=R.ownKeys}else if(Object.getOwnPropertySymbols){ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}}else{ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target)}}function ProcessEmitWarning(warning){if(console&&console.warn)console.warn(warning)}var NumberIsNaN=Number.isNaN||function NumberIsNaN(value){return value!==value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=undefined;var defaultMaxListeners=10;Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:true,get:function(){return defaultMaxListeners},set:function(arg){if(typeof arg!=="number"||arg<0||NumberIsNaN(arg)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".")}defaultMaxListeners=arg}});EventEmitter.init=function(){if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){if(typeof n!=="number"||n<0||NumberIsNaN(n)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".")}this._maxListeners=n;return this};function $getMaxListeners(that){if(that._maxListeners===undefined)return EventEmitter.defaultMaxListeners;return that._maxListeners}EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return $getMaxListeners(this)};EventEmitter.prototype.emit=function emit(type){var args=[];for(var i=1;i<arguments.length;i++)args.push(arguments[i]);var doError=type==="error";var events=this._events;if(events!==undefined)doError=doError&&events.error===undefined;else if(!doError)return false;if(doError){var er;if(args.length>0)er=args[0];if(er instanceof Error){throw er}var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));err.context=er;throw err}var handler=events[type];if(handler===undefined)return false;if(typeof handler==="function"){ReflectApply(handler,this,args)}else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)ReflectApply(listeners[i],this,args)}return true};function _addListener(target,type,listener,prepend){var m;var events;var existing;if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}events=target._events;if(events===undefined){events=target._events=Object.create(null);target._eventsCount=0}else{if(events.newListener!==undefined){target.emit("newListener",type,listener.listener?listener.listener:listener);events=target._events}existing=events[type]}if(existing===undefined){existing=events[type]=listener;++target._eventsCount}else{if(typeof existing==="function"){existing=events[type]=prepend?[listener,existing]:[existing,listener]}else if(prepend){existing.unshift(listener)}else{existing.push(listener)}m=$getMaxListeners(target);if(m>0&&existing.length>m&&!existing.warned){existing.warned=true;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners "+"added. Use emitter.setMaxListeners() to "+"increase limit");w.name="MaxListenersExceededWarning";w.emitter=target;w.type=type;w.count=existing.length;ProcessEmitWarning(w)}}return target}EventEmitter.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,false)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,true)};function onceWrapper(){var args=[];for(var i=0;i<arguments.length;i++)args.push(arguments[i]);if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;ReflectApply(this.listener,this.target,args)}}function _onceWrap(target,type,listener){var state={fired:false,wrapFn:undefined,target:target,type:type,listener:listener};var wrapped=onceWrapper.bind(state);wrapped.listener=listener;state.wrapFn=wrapped;return wrapped}EventEmitter.prototype.once=function once(type,listener){if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}this.on(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.prependOnceListener=function prependOnceListener(type,listener){if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}this.prependListener(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}events=this._events;if(events===undefined)return this;list=events[type];if(list===undefined)return this;if(list===listener||list.listener===listener){if(--this._eventsCount===0)this._events=Object.create(null);else{delete events[type];if(events.removeListener)this.emit("removeListener",type,list.listener||listener)}}else if(typeof list!=="function"){position=-1;for(i=list.length-1;i>=0;i--){if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener;position=i;break}}if(position<0)return this;if(position===0)list.shift();else{spliceOne(list,position)}if(list.length===1)events[type]=list[0];if(events.removeListener!==undefined)this.emit("removeListener",type,originalListener||listener)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events,i;events=this._events;if(events===undefined)return this;if(events.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(events[type]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete events[type]}return this}if(arguments.length===0){var keys=Object.keys(events);var key;for(i=0;i<keys.length;++i){key=keys[i];if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}listeners=events[type];if(typeof listeners==="function"){this.removeListener(type,listeners)}else if(listeners!==undefined){for(i=listeners.length-1;i>=0;i--){this.removeListener(type,listeners[i])}}return this};function _listeners(target,type,unwrap){var events=target._events;if(events===undefined)return[];var evlistener=events[type];if(evlistener===undefined)return[];if(typeof evlistener==="function")return unwrap?[evlistener.listener||evlistener]:[evlistener];return unwrap?unwrapListeners(evlistener):arrayClone(evlistener,evlistener.length)}EventEmitter.prototype.listeners=function listeners(type){return _listeners(this,type,true)};EventEmitter.prototype.rawListeners=function rawListeners(type){return _listeners(this,type,false)};EventEmitter.listenerCount=function(emitter,type){if(typeof emitter.listenerCount==="function"){return emitter.listenerCount(type)}else{return listenerCount.call(emitter,type)}};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(type){var events=this._events;if(events!==undefined){var evlistener=events[type];if(typeof evlistener==="function"){return 1}else if(evlistener!==undefined){return evlistener.length}}return 0}EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(arr,n){var copy=new Array(n);for(var i=0;i<n;++i)copy[i]=arr[i];return copy}function spliceOne(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}function unwrapListeners(arr){var ret=new Array(arr.length);for(var i=0;i<ret.length;++i){ret[i]=arr[i].listener||arr[i]}return ret}},function(module,exports,__webpack_require__){(function(Buffer){function isArray(arg){if(Array.isArray){return Array.isArray(arg)}return objectToString(arg)==="[object Array]"}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return objectToString(e)==="[object Error]"||e instanceof Error}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=Buffer.isBuffer;function objectToString(o){return Object.prototype.toString.call(o)}}).call(this,__webpack_require__(111).Buffer)},function(module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}}else{module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}}},function(module,exports,__webpack_require__){"use strict";var ES5Type=__webpack_require__(283);module.exports=function Type(x){if(typeof x==="symbol"){return"Symbol"}return ES5Type(x)}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){var classes=[];for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(!arg)continue;var argType=typeof arg;if(argType==="string"||argType==="number"){classes.push(arg)}else if(Array.isArray(arg)&&arg.length){var inner=classNames.apply(null,arg);if(inner){classes.push(inner)}}else if(argType==="object"){for(var key in arg){if(hasOwn.call(arg,key)&&arg[key]){classes.push(key)}}}}return classes.join(" ")}if(true&&module.exports){classNames.default=classNames;module.exports=classNames}else if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var meta_1=__webpack_require__(63);function bbox(geojson){var result=[Infinity,Infinity,-Infinity,-Infinity];meta_1.coordEach(geojson,(function(coord){if(result[0]>coord[0]){result[0]=coord[0]}if(result[1]>coord[1]){result[1]=coord[1]}if(result[2]<coord[0]){result[2]=coord[0]}if(result[3]<coord[1]){result[3]=coord[1]}}));return result}exports.default=bbox},function(module,exports){const SEMVER_SPEC_VERSION="2.0.0";const MAX_LENGTH=256;const MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;const MAX_SAFE_COMPONENT_LENGTH=16;module.exports={SEMVER_SPEC_VERSION:SEMVER_SPEC_VERSION,MAX_LENGTH:MAX_LENGTH,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER,MAX_SAFE_COMPONENT_LENGTH:MAX_SAFE_COMPONENT_LENGTH}},function(module,exports,__webpack_require__){(function(process){const debug=typeof process==="object"&&Object({IS_KIBANA_DISTRIBUTABLE:"true"})&&Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG)?(...args)=>console.error("SEMVER",...args):()=>{};module.exports=debug}).call(this,__webpack_require__(60))},function(module,exports,__webpack_require__){const compare=__webpack_require__(56);const gt=(a,b,loose)=>compare(a,b,loose)>0;module.exports=gt},function(module,exports,__webpack_require__){const ANY=Symbol("SemVer ANY");class Comparator{static get ANY(){return ANY}constructor(comp,options){if(!options||typeof options!=="object"){options={loose:!!options,includePrerelease:false}}if(comp instanceof Comparator){if(comp.loose===!!options.loose){return comp}else{comp=comp.value}}debug("comparator",comp,options);this.options=options;this.loose=!!options.loose;this.parse(comp);if(this.semver===ANY){this.value=""}else{this.value=this.operator+this.semver.version}debug("comp",this)}parse(comp){const r=this.options.loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR];const m=comp.match(r);if(!m){throw new TypeError(`Invalid comparator: ${comp}`)}this.operator=m[1]!==undefined?m[1]:"";if(this.operator==="="){this.operator=""}if(!m[2]){this.semver=ANY}else{this.semver=new SemVer(m[2],this.options.loose)}}toString(){return this.value}test(version){debug("Comparator.test",version,this.options.loose);if(this.semver===ANY||version===ANY){return true}if(typeof version==="string"){try{version=new SemVer(version,this.options)}catch(er){return false}}return cmp(version,this.operator,this.semver,this.options)}intersects(comp,options){if(!(comp instanceof Comparator)){throw new TypeError("a Comparator is required")}if(!options||typeof options!=="object"){options={loose:!!options,includePrerelease:false}}if(this.operator===""){if(this.value===""){return true}return new Range(comp.value,options).test(this.value)}else if(comp.operator===""){if(comp.value===""){return true}return new Range(this.value,options).test(comp.semver)}const sameDirectionIncreasing=(this.operator===">="||this.operator===">")&&(comp.operator===">="||comp.operator===">");const sameDirectionDecreasing=(this.operator==="<="||this.operator==="<")&&(comp.operator==="<="||comp.operator==="<");const sameSemVer=this.semver.version===comp.semver.version;const differentDirectionsInclusive=(this.operator===">="||this.operator==="<=")&&(comp.operator===">="||comp.operator==="<=");const oppositeDirectionsLessThan=cmp(this.semver,"<",comp.semver,options)&&(this.operator===">="||this.operator===">")&&(comp.operator==="<="||comp.operator==="<");const oppositeDirectionsGreaterThan=cmp(this.semver,">",comp.semver,options)&&(this.operator==="<="||this.operator==="<")&&(comp.operator===">="||comp.operator===">");return sameDirectionIncreasing||sameDirectionDecreasing||sameSemVer&&differentDirectionsInclusive||oppositeDirectionsLessThan||oppositeDirectionsGreaterThan}}module.exports=Comparator;const{re:re,t:t}=__webpack_require__(64);const cmp=__webpack_require__(134);const debug=__webpack_require__(73);const SemVer=__webpack_require__(50);const Range=__webpack_require__(57)},function(module,exports,__webpack_require__){const Range=__webpack_require__(57);const satisfies=(version,range,options)=>{try{range=new Range(range,options)}catch(er){return false}return range.test(version)};module.exports=satisfies},function(module,exports,__webpack_require__){(function(process){var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function getOwnPropertyDescriptors(obj){var keys=Object.keys(obj);var descriptors={};for(var i=0;i<keys.length;i++){descriptors[keys[i]]=Object.getOwnPropertyDescriptor(obj,keys[i])}return descriptors};var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,(function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}}));for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=" "+x}else{str+=" "+inspect(x)}}return str};exports.deprecate=function(fn,msg){if(typeof process!=="undefined"&&process.noDeprecation===true){return fn}if(typeof process==="undefined"){return function(){return exports.deprecate(fn,msg).apply(this,arguments)}}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg)}else if(process.traceDeprecation){console.trace(msg)}else{console.error(msg)}warned=true}return fn.apply(this,arguments)}return deprecated};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron))debugEnviron=Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG||"";set=set.toUpperCase();if(!debugs[set]){if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else{debugs[set]=function(){}}}return debugs[set]};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts}else if(opts){exports._extend(ctx,opts)}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth)}exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m"}else{return str}}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};array.forEach((function(val,idx){hash[val]=true}));return hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value)}if(isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0)){return formatError(value)}if(keys.length===0){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){base=" "+formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map((function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)}))}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach((function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}}));return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(desc.set){str=ctx.stylize("[Setter]","special")}}if(!hasOwnProperty(visibleKeys,key)){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null)}else{str=formatValue(ctx,desc.value,recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map((function(line){return"  "+line})).join("\n").substr(2)}else{str="\n"+str.split("\n").map((function(line){return"   "+line})).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce((function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=__webpack_require__(222);function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))};exports.inherits=__webpack_require__(223);exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var kCustomPromisifiedSymbol=typeof Symbol!=="undefined"?Symbol("util.promisify.custom"):undefined;exports.promisify=function promisify(original){if(typeof original!=="function")throw new TypeError('The "original" argument must be of type Function');if(kCustomPromisifiedSymbol&&original[kCustomPromisifiedSymbol]){var fn=original[kCustomPromisifiedSymbol];if(typeof fn!=="function"){throw new TypeError('The "util.promisify.custom" argument must be of type Function')}Object.defineProperty(fn,kCustomPromisifiedSymbol,{value:fn,enumerable:false,writable:false,configurable:true});return fn}function fn(){var promiseResolve,promiseReject;var promise=new Promise((function(resolve,reject){promiseResolve=resolve;promiseReject=reject}));var args=[];for(var i=0;i<arguments.length;i++){args.push(arguments[i])}args.push((function(err,value){if(err){promiseReject(err)}else{promiseResolve(value)}}));try{original.apply(this,args)}catch(err){promiseReject(err)}return promise}Object.setPrototypeOf(fn,Object.getPrototypeOf(original));if(kCustomPromisifiedSymbol)Object.defineProperty(fn,kCustomPromisifiedSymbol,{value:fn,enumerable:false,writable:false,configurable:true});return Object.defineProperties(fn,getOwnPropertyDescriptors(original))};exports.promisify.custom=kCustomPromisifiedSymbol;function callbackifyOnRejected(reason,cb){if(!reason){var newReason=new Error("Promise was rejected with a falsy value");newReason.reason=reason;reason=newReason}return cb(reason)}function callbackify(original){if(typeof original!=="function"){throw new TypeError('The "original" argument must be of type Function')}function callbackified(){var args=[];for(var i=0;i<arguments.length;i++){args.push(arguments[i])}var maybeCb=args.pop();if(typeof maybeCb!=="function"){throw new TypeError("The last argument must be of type Function")}var self=this;var cb=function(){return maybeCb.apply(self,arguments)};original.apply(this,args).then((function(ret){process.nextTick(cb,null,ret)}),(function(rej){process.nextTick(callbackifyOnRejected,rej,cb)}))}Object.setPrototypeOf(callbackified,Object.getPrototypeOf(original));Object.defineProperties(callbackified,getOwnPropertyDescriptors(original));return callbackified}exports.callbackify=callbackify}).call(this,__webpack_require__(60))},function(module,exports,__webpack_require__){(function(){var XMLCharacterData,XMLNode,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;XMLNode=__webpack_require__(53);module.exports=XMLCharacterData=function(superClass){extend(XMLCharacterData,superClass);function XMLCharacterData(parent){XMLCharacterData.__super__.constructor.call(this,parent);this.value=""}Object.defineProperty(XMLCharacterData.prototype,"data",{get:function(){return this.value},set:function(value){return this.value=value||""}});Object.defineProperty(XMLCharacterData.prototype,"length",{get:function(){return this.value.length}});Object.defineProperty(XMLCharacterData.prototype,"textContent",{get:function(){return this.value},set:function(value){return this.value=value||""}});XMLCharacterData.prototype.clone=function(){return Object.create(this)};XMLCharacterData.prototype.substringData=function(offset,count){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLCharacterData.prototype.appendData=function(arg){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLCharacterData.prototype.insertData=function(offset,arg){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLCharacterData.prototype.deleteData=function(offset,count){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLCharacterData.prototype.replaceData=function(offset,count,arg){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLCharacterData.prototype.isEqualNode=function(node){if(!XMLCharacterData.__super__.isEqualNode.apply(this,arguments).isEqualNode(node)){return false}if(node.data!==this.data){return false}return true};return XMLCharacterData}(XMLNode)}).call(this)},function(module,exports){(function(){module.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},function(module,exports,__webpack_require__){"use strict";(function(process){if(typeof process==="undefined"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0){module.exports={nextTick:nextTick}}else{module.exports=process}function nextTick(fn,arg1,arg2,arg3){if(typeof fn!=="function"){throw new TypeError('"callback" argument must be a function')}var len=arguments.length;var args,i;switch(len){case 0:case 1:return process.nextTick(fn);case 2:return process.nextTick((function afterTickOne(){fn.call(null,arg1)}));case 3:return process.nextTick((function afterTickTwo(){fn.call(null,arg1,arg2)}));case 4:return process.nextTick((function afterTickThree(){fn.call(null,arg1,arg2,arg3)}));default:args=new Array(len-1);i=0;while(i<args.length){args[i++]=arguments[i]}return process.nextTick((function afterTick(){fn.apply(null,args)}))}}}).call(this,__webpack_require__(60))},function(module,exports,__webpack_require__){var buffer=__webpack_require__(111);var Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src){dst[key]=src[key]}}if(Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow){module.exports=buffer}else{copyProps(buffer,exports);exports.Buffer=SafeBuffer}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}copyProps(Buffer,SafeBuffer);SafeBuffer.from=function(arg,encodingOrOffset,length){if(typeof arg==="number"){throw new TypeError("Argument must not be a number")}return Buffer(arg,encodingOrOffset,length)};SafeBuffer.alloc=function(size,fill,encoding){if(typeof size!=="number"){throw new TypeError("Argument must be a number")}var buf=Buffer(size);if(fill!==undefined){if(typeof encoding==="string"){buf.fill(fill,encoding)}else{buf.fill(fill)}}else{buf.fill(0)}return buf};SafeBuffer.allocUnsafe=function(size){if(typeof size!=="number"){throw new TypeError("Argument must be a number")}return Buffer(size)};SafeBuffer.allocUnsafeSlow=function(size){if(typeof size!=="number"){throw new TypeError("Argument must be a number")}return buffer.SlowBuffer(size)}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(52);var callBind=__webpack_require__(281);var $indexOf=callBind(GetIntrinsic("String.prototype.indexOf"));module.exports=function callBoundIntrinsic(name,allowMissing){var intrinsic=GetIntrinsic(name,!!allowMissing);if(typeof intrinsic==="function"&&$indexOf(name,".prototype.")){return callBind(intrinsic)}return intrinsic}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(116);module.exports=bind.call(Function.call,Object.prototype.hasOwnProperty)},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports["default"]=void 0;var _batch=__webpack_require__(119);var nullListeners={notify:function notify(){}};function createListenerCollection(){var batch=(0,_batch.getBatch)();var first=null;var last=null;return{clear:function clear(){first=null;last=null},notify:function notify(){batch((function(){var listener=first;while(listener){listener.callback();listener=listener.next}}))},get:function get(){var listeners=[];var listener=first;while(listener){listeners.push(listener);listener=listener.next}return listeners},subscribe:function subscribe(callback){var isSubscribed=true;var listener=last={callback:callback,next:null,prev:last};if(listener.prev){listener.prev.next=listener}else{first=listener}return function unsubscribe(){if(!isSubscribed||first===null)return;isSubscribed=false;if(listener.next){listener.next.prev=listener.prev}else{last=listener.prev}if(listener.prev){listener.prev.next=listener.next}else{first=listener.next}}}}}var Subscription=function(){function Subscription(store,parentSub){this.store=store;this.parentSub=parentSub;this.unsubscribe=null;this.listeners=nullListeners;this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var _proto=Subscription.prototype;_proto.addNestedSub=function addNestedSub(listener){this.trySubscribe();return this.listeners.subscribe(listener)};_proto.notifyNestedSubs=function notifyNestedSubs(){this.listeners.notify()};_proto.handleChangeWrapper=function handleChangeWrapper(){if(this.onStateChange){this.onStateChange()}};_proto.isSubscribed=function isSubscribed(){return Boolean(this.unsubscribe)};_proto.trySubscribe=function trySubscribe(){if(!this.unsubscribe){this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper);this.listeners=createListenerCollection()}};_proto.tryUnsubscribe=function tryUnsubscribe(){if(this.unsubscribe){this.unsubscribe();this.unsubscribe=null;this.listeners.clear();this.listeners=nullListeners}};return Subscription}();exports["default"]=Subscription},function(module,exports){function _extends(){module.exports=_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}module.exports=_extends},function(module,exports){function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}module.exports=_objectWithoutPropertiesLoose},function(module,exports,__webpack_require__){"use strict";var punycode=__webpack_require__(192);var util=__webpack_require__(193);exports.parse=urlParse;exports.resolve=urlResolve;exports.resolveObject=urlResolveObject;exports.format=urlFormat;exports.Url=Url;function Url(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:true,"javascript:":true},hostlessProtocol={javascript:true,"javascript:":true},slashedProtocol={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},querystring=__webpack_require__(194);function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&util.isObject(url)&&url instanceof Url)return url;var u=new Url;u.parse(url,parseQueryString,slashesDenoteHost);return u}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!util.isString(url)){throw new TypeError("Parameter 'url' must be a string, not "+typeof url)}var queryIndex=url.indexOf("?"),splitter=queryIndex!==-1&&queryIndex<url.indexOf("#")?"?":"#",uSplit=url.split(splitter),slashRegex=/\\/g;uSplit[0]=uSplit[0].replace(slashRegex,"/");url=uSplit.join(splitter);var rest=url;rest=rest.trim();if(!slashesDenoteHost&&url.split("#").length===1){var simplePath=simplePathPattern.exec(rest);if(simplePath){this.path=rest;this.href=rest;this.pathname=simplePath[1];if(simplePath[2]){this.search=simplePath[2];if(parseQueryString){this.query=querystring.parse(this.search.substr(1))}else{this.query=this.search.substr(1)}}else if(parseQueryString){this.search="";this.query={}}return this}}var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto;rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes=rest.substr(0,2)==="//";if(slashes&&!(proto&&hostlessProtocol[proto])){rest=rest.substr(2);this.slashes=true}}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){var hostEnd=-1;for(var i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}var auth,atSign;if(hostEnd===-1){atSign=rest.lastIndexOf("@")}else{atSign=rest.lastIndexOf("@",hostEnd)}if(atSign!==-1){auth=rest.slice(0,atSign);rest=rest.slice(atSign+1);this.auth=decodeURIComponent(auth)}hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}if(hostEnd===-1)hostEnd=rest.length;this.host=rest.slice(0,hostEnd);rest=rest.slice(hostEnd);this.parseHost();this.hostname=this.hostname||"";var ipv6Hostname=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ipv6Hostname){var hostparts=this.hostname.split(/\./);for(var i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(!part)continue;if(!part.match(hostnamePartPattern)){var newpart="";for(var j=0,k=part.length;j<k;j++){if(part.charCodeAt(j)>127){newpart+="x"}else{newpart+=part[j]}}if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i);var notHost=hostparts.slice(i+1);var bit=part.match(hostnamePartStart);if(bit){validParts.push(bit[1]);notHost.unshift(bit[2])}if(notHost.length){rest="/"+notHost.join(".")+rest}this.hostname=validParts.join(".");break}}}}if(this.hostname.length>hostnameMaxLen){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!ipv6Hostname){this.hostname=punycode.toASCII(this.hostname)}var p=this.port?":"+this.port:"";var h=this.hostname||"";this.host=h+p;this.href+=this.host;if(ipv6Hostname){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(rest[0]!=="/"){rest="/"+rest}}}if(!unsafeProtocol[lowerProto]){for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];if(rest.indexOf(ae)===-1)continue;var esc=encodeURIComponent(ae);if(esc===ae){esc=escape(ae)}rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");if(hash!==-1){this.hash=rest.substr(hash);rest=rest.slice(0,hash)}var qm=rest.indexOf("?");if(qm!==-1){this.search=rest.substr(qm);this.query=rest.substr(qm+1);if(parseQueryString){this.query=querystring.parse(this.query)}rest=rest.slice(0,qm)}else if(parseQueryString){this.search="";this.query={}}if(rest)this.pathname=rest;if(slashedProtocol[lowerProto]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var p=this.pathname||"";var s=this.search||"";this.path=p+s}this.href=this.format();return this};function urlFormat(obj){if(util.isString(obj))obj=urlParse(obj);if(!(obj instanceof Url))return Url.prototype.format.call(obj);return obj.format()}Url.prototype.format=function(){var auth=this.auth||"";if(auth){auth=encodeURIComponent(auth);auth=auth.replace(/%3A/i,":");auth+="@"}var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=false,query="";if(this.host){host=auth+this.host}else if(this.hostname){host=auth+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){host+=":"+this.port}}if(this.query&&util.isObject(this.query)&&Object.keys(this.query).length){query=querystring.stringify(this.query)}var search=this.search||query&&"?"+query||"";if(protocol&&protocol.substr(-1)!==":")protocol+=":";if(this.slashes||(!protocol||slashedProtocol[protocol])&&host!==false){host="//"+(host||"");if(pathname&&pathname.charAt(0)!=="/")pathname="/"+pathname}else if(!host){host=""}if(hash&&hash.charAt(0)!=="#")hash="#"+hash;if(search&&search.charAt(0)!=="?")search="?"+search;pathname=pathname.replace(/[?#]/g,(function(match){return encodeURIComponent(match)}));search=search.replace("#","%23");return protocol+host+pathname+search+hash};function urlResolve(source,relative){return urlParse(source,false,true).resolve(relative)}Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,false,true)).format()};function urlResolveObject(source,relative){if(!source)return relative;return urlParse(source,false,true).resolveObject(relative)}Url.prototype.resolveObject=function(relative){if(util.isString(relative)){var rel=new Url;rel.parse(relative,false,true);relative=rel}var result=new Url;var tkeys=Object.keys(this);for(var tk=0;tk<tkeys.length;tk++){var tkey=tkeys[tk];result[tkey]=this[tkey]}result.hash=relative.hash;if(relative.href===""){result.href=result.format();return result}if(relative.slashes&&!relative.protocol){var rkeys=Object.keys(relative);for(var rk=0;rk<rkeys.length;rk++){var rkey=rkeys[rk];if(rkey!=="protocol")result[rkey]=relative[rkey]}if(slashedProtocol[result.protocol]&&result.hostname&&!result.pathname){result.path=result.pathname="/"}result.href=result.format();return result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){var keys=Object.keys(relative);for(var v=0;v<keys.length;v++){var k=keys[v];result[k]=relative[k]}result.href=result.format();return result}result.protocol=relative.protocol;if(!relative.host&&!hostlessProtocol[relative.protocol]){var relPath=(relative.pathname||"").split("/");while(relPath.length&&!(relative.host=relPath.shift()));if(!relative.host)relative.host="";if(!relative.hostname)relative.hostname="";if(relPath[0]!=="")relPath.unshift("");if(relPath.length<2)relPath.unshift("");result.pathname=relPath.join("/")}else{result.pathname=relative.pathname}result.search=relative.search;result.query=relative.query;result.host=relative.host||"";result.auth=relative.auth;result.hostname=relative.hostname||relative.host;result.port=relative.port;if(result.pathname||result.search){var p=result.pathname||"";var s=result.search||"";result.path=p+s}result.slashes=result.slashes||relative.slashes;result.href=result.format();return result}var isSourceAbs=result.pathname&&result.pathname.charAt(0)==="/",isRelAbs=relative.host||relative.pathname&&relative.pathname.charAt(0)==="/",mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic){result.hostname="";result.port=null;if(result.host){if(srcPath[0]==="")srcPath[0]=result.host;else srcPath.unshift(result.host)}result.host="";if(relative.protocol){relative.hostname=null;relative.port=null;if(relative.host){if(relPath[0]==="")relPath[0]=relative.host;else relPath.unshift(relative.host)}relative.host=null}mustEndAbs=mustEndAbs&&(relPath[0]===""||srcPath[0]==="")}if(isRelAbs){result.host=relative.host||relative.host===""?relative.host:result.host;result.hostname=relative.hostname||relative.hostname===""?relative.hostname:result.hostname;result.search=relative.search;result.query=relative.query;srcPath=relPath}else if(relPath.length){if(!srcPath)srcPath=[];srcPath.pop();srcPath=srcPath.concat(relPath);result.search=relative.search;result.query=relative.query}else if(!util.isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}result.search=relative.search;result.query=relative.query;if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.href=result.format();return result}if(!srcPath.length){result.pathname=null;if(result.search){result.path="/"+result.search}else{result.path=null}result.href=result.format();return result}var last=srcPath.slice(-1)[0];var hasTrailingSlash=(result.host||relative.host||srcPath.length>1)&&(last==="."||last==="..")||last==="";var up=0;for(var i=srcPath.length;i>=0;i--){last=srcPath[i];if(last==="."){srcPath.splice(i,1)}else if(last===".."){srcPath.splice(i,1);up++}else if(up){srcPath.splice(i,1);up--}}if(!mustEndAbs&&!removeAllDots){for(;up--;up){srcPath.unshift("..")}}if(mustEndAbs&&srcPath[0]!==""&&(!srcPath[0]||srcPath[0].charAt(0)!=="/")){srcPath.unshift("")}if(hasTrailingSlash&&srcPath.join("/").substr(-1)!=="/"){srcPath.push("")}var isAbsolute=srcPath[0]===""||srcPath[0]&&srcPath[0].charAt(0)==="/";if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}mustEndAbs=mustEndAbs||result.host&&srcPath.length;if(mustEndAbs&&!isAbsolute){srcPath.unshift("")}if(!srcPath.length){result.pathname=null;result.path=null}else{result.pathname=srcPath.join("/")}if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.auth=relative.auth||result.auth;result.slashes=result.slashes||relative.slashes;result.href=result.format();return result};Url.prototype.parseHost=function(){var host=this.host;var port=portPattern.exec(host);if(port){port=port[0];if(port!==":"){this.port=port.substr(1)}host=host.substr(0,host.length-port.length)}if(host)this.hostname=host}},function(module,exports){const numeric=/^[0-9]+$/;const compareIdentifiers=(a,b)=>{const anum=numeric.test(a);const bnum=numeric.test(b);if(anum&&bnum){a=+a;b=+b}return a===b?0:anum&&!bnum?-1:bnum&&!anum?1:a<b?-1:1};const rcompareIdentifiers=(a,b)=>compareIdentifiers(b,a);module.exports={compareIdentifiers:compareIdentifiers,rcompareIdentifiers:rcompareIdentifiers}},function(module,exports,__webpack_require__){const compare=__webpack_require__(56);const eq=(a,b,loose)=>compare(a,b,loose)===0;module.exports=eq},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(50);const compareBuild=(a,b,loose)=>{const versionA=new SemVer(a,loose);const versionB=new SemVer(b,loose);return versionA.compare(versionB)||versionA.compareBuild(versionB)};module.exports=compareBuild},function(module,exports,__webpack_require__){const compare=__webpack_require__(56);const lt=(a,b,loose)=>compare(a,b,loose)<0;module.exports=lt},function(module,exports,__webpack_require__){const compare=__webpack_require__(56);const gte=(a,b,loose)=>compare(a,b,loose)>=0;module.exports=gte},function(module,exports,__webpack_require__){const compare=__webpack_require__(56);const lte=(a,b,loose)=>compare(a,b,loose)<=0;module.exports=lte},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(50);const Comparator=__webpack_require__(75);const{ANY:ANY}=Comparator;const Range=__webpack_require__(57);const satisfies=__webpack_require__(76);const gt=__webpack_require__(74);const lt=__webpack_require__(91);const lte=__webpack_require__(93);const gte=__webpack_require__(92);const outside=(version,range,hilo,options)=>{version=new SemVer(version,options);range=new Range(range,options);let gtfn,ltefn,ltfn,comp,ecomp;switch(hilo){case">":gtfn=gt;ltefn=lte;ltfn=lt;comp=">";ecomp=">=";break;case"<":gtfn=lt;ltefn=gte;ltfn=gt;comp="<";ecomp="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(version,range,options)){return false}for(let i=0;i<range.set.length;++i){const comparators=range.set[i];let high=null;let low=null;comparators.forEach(comparator=>{if(comparator.semver===ANY){comparator=new Comparator(">=0.0.0")}high=high||comparator;low=low||comparator;if(gtfn(comparator.semver,high.semver,options)){high=comparator}else if(ltfn(comparator.semver,low.semver,options)){low=comparator}});if(high.operator===comp||high.operator===ecomp){return false}if((!low.operator||low.operator===comp)&&ltefn(version,low.semver)){return false}else if(low.operator===ecomp&&ltfn(version,low.semver)){return false}}return true};module.exports=outside},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var invariant_1=__webpack_require__(59);var helpers_1=__webpack_require__(51);function distance(from,to,options){if(options===void 0){options={}}var coordinates1=invariant_1.getCoord(from);var coordinates2=invariant_1.getCoord(to);var dLat=helpers_1.degreesToRadians(coordinates2[1]-coordinates1[1]);var dLon=helpers_1.degreesToRadians(coordinates2[0]-coordinates1[0]);var lat1=helpers_1.degreesToRadians(coordinates1[1]);var lat2=helpers_1.degreesToRadians(coordinates2[1]);var a=Math.pow(Math.sin(dLat/2),2)+Math.pow(Math.sin(dLon/2),2)*Math.cos(lat1)*Math.cos(lat2);return helpers_1.radiansToLength(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),options.units)}exports.default=distance},function(module,exports){(function(){exports.defaults={.1:{explicitCharkey:false,trim:true,normalize:true,normalizeTags:false,attrkey:"@",charkey:"#",explicitArray:false,ignoreAttrs:false,mergeAttrs:false,explicitRoot:false,validator:null,xmlns:false,explicitChildren:false,childkey:"@@",charsAsChildren:false,includeWhiteChars:false,async:false,strict:true,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:false,trim:false,normalize:false,normalizeTags:false,attrkey:"$",charkey:"_",explicitArray:true,ignoreAttrs:false,mergeAttrs:false,explicitRoot:true,validator:null,xmlns:false,explicitChildren:false,preserveChildrenOrder:false,childkey:"$$",charsAsChildren:false,includeWhiteChars:false,async:false,strict:true,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:true},doctype:null,renderOpts:{pretty:true,indent:"  ",newline:"\n"},headless:false,chunkSize:1e4,emptyTag:"",cdata:false}}}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLAttribute,XMLElement,XMLNamedNodeMap,XMLNode,getValue,isFunction,isObject,ref,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;ref=__webpack_require__(58),isObject=ref.isObject,isFunction=ref.isFunction,getValue=ref.getValue;XMLNode=__webpack_require__(53);NodeType=__webpack_require__(49);XMLAttribute=__webpack_require__(143);XMLNamedNodeMap=__webpack_require__(98);module.exports=XMLElement=function(superClass){extend(XMLElement,superClass);function XMLElement(parent,name,attributes){var child,j,len,ref1;XMLElement.__super__.constructor.call(this,parent);if(name==null){throw new Error("Missing element name. "+this.debugInfo())}this.name=this.stringify.name(name);this.type=NodeType.Element;this.attribs={};this.schemaTypeInfo=null;if(attributes!=null){this.attribute(attributes)}if(parent.type===NodeType.Document){this.isRoot=true;this.documentObject=parent;parent.rootObject=this;if(parent.children){ref1=parent.children;for(j=0,len=ref1.length;j<len;j++){child=ref1[j];if(child.type===NodeType.DocType){child.name=this.name;break}}}}}Object.defineProperty(XMLElement.prototype,"tagName",{get:function(){return this.name}});Object.defineProperty(XMLElement.prototype,"namespaceURI",{get:function(){return""}});Object.defineProperty(XMLElement.prototype,"prefix",{get:function(){return""}});Object.defineProperty(XMLElement.prototype,"localName",{get:function(){return this.name}});Object.defineProperty(XMLElement.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}});Object.defineProperty(XMLElement.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}});Object.defineProperty(XMLElement.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}});Object.defineProperty(XMLElement.prototype,"attributes",{get:function(){if(!this.attributeMap||!this.attributeMap.nodes){this.attributeMap=new XMLNamedNodeMap(this.attribs)}return this.attributeMap}});XMLElement.prototype.clone=function(){var att,attName,clonedSelf,ref1;clonedSelf=Object.create(this);if(clonedSelf.isRoot){clonedSelf.documentObject=null}clonedSelf.attribs={};ref1=this.attribs;for(attName in ref1){if(!hasProp.call(ref1,attName))continue;att=ref1[attName];clonedSelf.attribs[attName]=att.clone()}clonedSelf.children=[];this.children.forEach((function(child){var clonedChild;clonedChild=child.clone();clonedChild.parent=clonedSelf;return clonedSelf.children.push(clonedChild)}));return clonedSelf};XMLElement.prototype.attribute=function(name,value){var attName,attValue;if(name!=null){name=getValue(name)}if(isObject(name)){for(attName in name){if(!hasProp.call(name,attName))continue;attValue=name[attName];this.attribute(attName,attValue)}}else{if(isFunction(value)){value=value.apply()}if(this.options.keepNullAttributes&&value==null){this.attribs[name]=new XMLAttribute(this,name,"")}else if(value!=null){this.attribs[name]=new XMLAttribute(this,name,value)}}return this};XMLElement.prototype.removeAttribute=function(name){var attName,j,len;if(name==null){throw new Error("Missing attribute name. "+this.debugInfo())}name=getValue(name);if(Array.isArray(name)){for(j=0,len=name.length;j<len;j++){attName=name[j];delete this.attribs[attName]}}else{delete this.attribs[name]}return this};XMLElement.prototype.toString=function(options){return this.options.writer.element(this,this.options.writer.filterOptions(options))};XMLElement.prototype.att=function(name,value){return this.attribute(name,value)};XMLElement.prototype.a=function(name,value){return this.attribute(name,value)};XMLElement.prototype.getAttribute=function(name){if(this.attribs.hasOwnProperty(name)){return this.attribs[name].value}else{return null}};XMLElement.prototype.setAttribute=function(name,value){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLElement.prototype.getAttributeNode=function(name){if(this.attribs.hasOwnProperty(name)){return this.attribs[name]}else{return null}};XMLElement.prototype.setAttributeNode=function(newAttr){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLElement.prototype.removeAttributeNode=function(oldAttr){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLElement.prototype.getElementsByTagName=function(name){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLElement.prototype.getAttributeNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLElement.prototype.setAttributeNS=function(namespaceURI,qualifiedName,value){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLElement.prototype.removeAttributeNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLElement.prototype.getAttributeNodeNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLElement.prototype.setAttributeNodeNS=function(newAttr){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLElement.prototype.getElementsByTagNameNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLElement.prototype.hasAttribute=function(name){return this.attribs.hasOwnProperty(name)};XMLElement.prototype.hasAttributeNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLElement.prototype.setIdAttribute=function(name,isId){if(this.attribs.hasOwnProperty(name)){return this.attribs[name].isId}else{return isId}};XMLElement.prototype.setIdAttributeNS=function(namespaceURI,localName,isId){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLElement.prototype.setIdAttributeNode=function(idAttr,isId){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLElement.prototype.getElementsByTagName=function(tagname){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLElement.prototype.getElementsByTagNameNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLElement.prototype.getElementsByClassName=function(classNames){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLElement.prototype.isEqualNode=function(node){var i,j,ref1;if(!XMLElement.__super__.isEqualNode.apply(this,arguments).isEqualNode(node)){return false}if(node.namespaceURI!==this.namespaceURI){return false}if(node.prefix!==this.prefix){return false}if(node.localName!==this.localName){return false}if(node.attribs.length!==this.attribs.length){return false}for(i=j=0,ref1=this.attribs.length-1;0<=ref1?j<=ref1:j>=ref1;i=0<=ref1?++j:--j){if(!this.attribs[i].isEqualNode(node.attribs[i])){return false}}return true};return XMLElement}(XMLNode)}).call(this)},function(module,exports){(function(){var XMLNamedNodeMap;module.exports=XMLNamedNodeMap=function(){function XMLNamedNodeMap(nodes){this.nodes=nodes}Object.defineProperty(XMLNamedNodeMap.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}});XMLNamedNodeMap.prototype.clone=function(){return this.nodes=null};XMLNamedNodeMap.prototype.getNamedItem=function(name){return this.nodes[name]};XMLNamedNodeMap.prototype.setNamedItem=function(node){var oldNode;oldNode=this.nodes[node.nodeName];this.nodes[node.nodeName]=node;return oldNode||null};XMLNamedNodeMap.prototype.removeNamedItem=function(name){var oldNode;oldNode=this.nodes[name];delete this.nodes[name];return oldNode||null};XMLNamedNodeMap.prototype.item=function(index){return this.nodes[Object.keys(this.nodes)[index]]||null};XMLNamedNodeMap.prototype.getNamedItemNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented.")};XMLNamedNodeMap.prototype.setNamedItemNS=function(node){throw new Error("This DOM method is not implemented.")};XMLNamedNodeMap.prototype.removeNamedItemNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented.")};return XMLNamedNodeMap}()}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLCData,XMLCharacterData,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;NodeType=__webpack_require__(49);XMLCharacterData=__webpack_require__(78);module.exports=XMLCData=function(superClass){extend(XMLCData,superClass);function XMLCData(parent,text){XMLCData.__super__.constructor.call(this,parent);if(text==null){throw new Error("Missing CDATA text. "+this.debugInfo())}this.name="#cdata-section";this.type=NodeType.CData;this.value=this.stringify.cdata(text)}XMLCData.prototype.clone=function(){return Object.create(this)};XMLCData.prototype.toString=function(options){return this.options.writer.cdata(this,this.options.writer.filterOptions(options))};return XMLCData}(XMLCharacterData)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLCharacterData,XMLComment,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;NodeType=__webpack_require__(49);XMLCharacterData=__webpack_require__(78);module.exports=XMLComment=function(superClass){extend(XMLComment,superClass);function XMLComment(parent,text){XMLComment.__super__.constructor.call(this,parent);if(text==null){throw new Error("Missing comment text. "+this.debugInfo())}this.name="#comment";this.type=NodeType.Comment;this.value=this.stringify.comment(text)}XMLComment.prototype.clone=function(){return Object.create(this)};XMLComment.prototype.toString=function(options){return this.options.writer.comment(this,this.options.writer.filterOptions(options))};return XMLComment}(XMLCharacterData)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLDeclaration,XMLNode,isObject,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;isObject=__webpack_require__(58).isObject;XMLNode=__webpack_require__(53);NodeType=__webpack_require__(49);module.exports=XMLDeclaration=function(superClass){extend(XMLDeclaration,superClass);function XMLDeclaration(parent,version,encoding,standalone){var ref;XMLDeclaration.__super__.constructor.call(this,parent);if(isObject(version)){ref=version,version=ref.version,encoding=ref.encoding,standalone=ref.standalone}if(!version){version="1.0"}this.type=NodeType.Declaration;this.version=this.stringify.xmlVersion(version);if(encoding!=null){this.encoding=this.stringify.xmlEncoding(encoding)}if(standalone!=null){this.standalone=this.stringify.xmlStandalone(standalone)}}XMLDeclaration.prototype.toString=function(options){return this.options.writer.declaration(this,this.options.writer.filterOptions(options))};return XMLDeclaration}(XMLNode)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLDTDAttList,XMLDTDElement,XMLDTDEntity,XMLDTDNotation,XMLDocType,XMLNamedNodeMap,XMLNode,isObject,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;isObject=__webpack_require__(58).isObject;XMLNode=__webpack_require__(53);NodeType=__webpack_require__(49);XMLDTDAttList=__webpack_require__(103);XMLDTDEntity=__webpack_require__(104);XMLDTDElement=__webpack_require__(105);XMLDTDNotation=__webpack_require__(106);XMLNamedNodeMap=__webpack_require__(98);module.exports=XMLDocType=function(superClass){extend(XMLDocType,superClass);function XMLDocType(parent,pubID,sysID){var child,i,len,ref,ref1,ref2;XMLDocType.__super__.constructor.call(this,parent);this.type=NodeType.DocType;if(parent.children){ref=parent.children;for(i=0,len=ref.length;i<len;i++){child=ref[i];if(child.type===NodeType.Element){this.name=child.name;break}}}this.documentObject=parent;if(isObject(pubID)){ref1=pubID,pubID=ref1.pubID,sysID=ref1.sysID}if(sysID==null){ref2=[pubID,sysID],sysID=ref2[0],pubID=ref2[1]}if(pubID!=null){this.pubID=this.stringify.dtdPubID(pubID)}if(sysID!=null){this.sysID=this.stringify.dtdSysID(sysID)}}Object.defineProperty(XMLDocType.prototype,"entities",{get:function(){var child,i,len,nodes,ref;nodes={};ref=this.children;for(i=0,len=ref.length;i<len;i++){child=ref[i];if(child.type===NodeType.EntityDeclaration&&!child.pe){nodes[child.name]=child}}return new XMLNamedNodeMap(nodes)}});Object.defineProperty(XMLDocType.prototype,"notations",{get:function(){var child,i,len,nodes,ref;nodes={};ref=this.children;for(i=0,len=ref.length;i<len;i++){child=ref[i];if(child.type===NodeType.NotationDeclaration){nodes[child.name]=child}}return new XMLNamedNodeMap(nodes)}});Object.defineProperty(XMLDocType.prototype,"publicId",{get:function(){return this.pubID}});Object.defineProperty(XMLDocType.prototype,"systemId",{get:function(){return this.sysID}});Object.defineProperty(XMLDocType.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}});XMLDocType.prototype.element=function(name,value){var child;child=new XMLDTDElement(this,name,value);this.children.push(child);return this};XMLDocType.prototype.attList=function(elementName,attributeName,attributeType,defaultValueType,defaultValue){var child;child=new XMLDTDAttList(this,elementName,attributeName,attributeType,defaultValueType,defaultValue);this.children.push(child);return this};XMLDocType.prototype.entity=function(name,value){var child;child=new XMLDTDEntity(this,false,name,value);this.children.push(child);return this};XMLDocType.prototype.pEntity=function(name,value){var child;child=new XMLDTDEntity(this,true,name,value);this.children.push(child);return this};XMLDocType.prototype.notation=function(name,value){var child;child=new XMLDTDNotation(this,name,value);this.children.push(child);return this};XMLDocType.prototype.toString=function(options){return this.options.writer.docType(this,this.options.writer.filterOptions(options))};XMLDocType.prototype.ele=function(name,value){return this.element(name,value)};XMLDocType.prototype.att=function(elementName,attributeName,attributeType,defaultValueType,defaultValue){return this.attList(elementName,attributeName,attributeType,defaultValueType,defaultValue)};XMLDocType.prototype.ent=function(name,value){return this.entity(name,value)};XMLDocType.prototype.pent=function(name,value){return this.pEntity(name,value)};XMLDocType.prototype.not=function(name,value){return this.notation(name,value)};XMLDocType.prototype.up=function(){return this.root()||this.documentObject};XMLDocType.prototype.isEqualNode=function(node){if(!XMLDocType.__super__.isEqualNode.apply(this,arguments).isEqualNode(node)){return false}if(node.name!==this.name){return false}if(node.publicId!==this.publicId){return false}if(node.systemId!==this.systemId){return false}return true};return XMLDocType}(XMLNode)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLDTDAttList,XMLNode,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;XMLNode=__webpack_require__(53);NodeType=__webpack_require__(49);module.exports=XMLDTDAttList=function(superClass){extend(XMLDTDAttList,superClass);function XMLDTDAttList(parent,elementName,attributeName,attributeType,defaultValueType,defaultValue){XMLDTDAttList.__super__.constructor.call(this,parent);if(elementName==null){throw new Error("Missing DTD element name. "+this.debugInfo())}if(attributeName==null){throw new Error("Missing DTD attribute name. "+this.debugInfo(elementName))}if(!attributeType){throw new Error("Missing DTD attribute type. "+this.debugInfo(elementName))}if(!defaultValueType){throw new Error("Missing DTD attribute default. "+this.debugInfo(elementName))}if(defaultValueType.indexOf("#")!==0){defaultValueType="#"+defaultValueType}if(!defaultValueType.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/)){throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(elementName))}if(defaultValue&&!defaultValueType.match(/^(#FIXED|#DEFAULT)$/)){throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(elementName))}this.elementName=this.stringify.name(elementName);this.type=NodeType.AttributeDeclaration;this.attributeName=this.stringify.name(attributeName);this.attributeType=this.stringify.dtdAttType(attributeType);if(defaultValue){this.defaultValue=this.stringify.dtdAttDefault(defaultValue)}this.defaultValueType=defaultValueType}XMLDTDAttList.prototype.toString=function(options){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(options))};return XMLDTDAttList}(XMLNode)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLDTDEntity,XMLNode,isObject,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;isObject=__webpack_require__(58).isObject;XMLNode=__webpack_require__(53);NodeType=__webpack_require__(49);module.exports=XMLDTDEntity=function(superClass){extend(XMLDTDEntity,superClass);function XMLDTDEntity(parent,pe,name,value){XMLDTDEntity.__super__.constructor.call(this,parent);if(name==null){throw new Error("Missing DTD entity name. "+this.debugInfo(name))}if(value==null){throw new Error("Missing DTD entity value. "+this.debugInfo(name))}this.pe=!!pe;this.name=this.stringify.name(name);this.type=NodeType.EntityDeclaration;if(!isObject(value)){this.value=this.stringify.dtdEntityValue(value);this.internal=true}else{if(!value.pubID&&!value.sysID){throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(name))}if(value.pubID&&!value.sysID){throw new Error("System identifier is required for a public external entity. "+this.debugInfo(name))}this.internal=false;if(value.pubID!=null){this.pubID=this.stringify.dtdPubID(value.pubID)}if(value.sysID!=null){this.sysID=this.stringify.dtdSysID(value.sysID)}if(value.nData!=null){this.nData=this.stringify.dtdNData(value.nData)}if(this.pe&&this.nData){throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(name))}}}Object.defineProperty(XMLDTDEntity.prototype,"publicId",{get:function(){return this.pubID}});Object.defineProperty(XMLDTDEntity.prototype,"systemId",{get:function(){return this.sysID}});Object.defineProperty(XMLDTDEntity.prototype,"notationName",{get:function(){return this.nData||null}});Object.defineProperty(XMLDTDEntity.prototype,"inputEncoding",{get:function(){return null}});Object.defineProperty(XMLDTDEntity.prototype,"xmlEncoding",{get:function(){return null}});Object.defineProperty(XMLDTDEntity.prototype,"xmlVersion",{get:function(){return null}});XMLDTDEntity.prototype.toString=function(options){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(options))};return XMLDTDEntity}(XMLNode)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLDTDElement,XMLNode,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;XMLNode=__webpack_require__(53);NodeType=__webpack_require__(49);module.exports=XMLDTDElement=function(superClass){extend(XMLDTDElement,superClass);function XMLDTDElement(parent,name,value){XMLDTDElement.__super__.constructor.call(this,parent);if(name==null){throw new Error("Missing DTD element name. "+this.debugInfo())}if(!value){value="(#PCDATA)"}if(Array.isArray(value)){value="("+value.join(",")+")"}this.name=this.stringify.name(name);this.type=NodeType.ElementDeclaration;this.value=this.stringify.dtdElementValue(value)}XMLDTDElement.prototype.toString=function(options){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(options))};return XMLDTDElement}(XMLNode)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLDTDNotation,XMLNode,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;XMLNode=__webpack_require__(53);NodeType=__webpack_require__(49);module.exports=XMLDTDNotation=function(superClass){extend(XMLDTDNotation,superClass);function XMLDTDNotation(parent,name,value){XMLDTDNotation.__super__.constructor.call(this,parent);if(name==null){throw new Error("Missing DTD notation name. "+this.debugInfo(name))}if(!value.pubID&&!value.sysID){throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(name))}this.name=this.stringify.name(name);this.type=NodeType.NotationDeclaration;if(value.pubID!=null){this.pubID=this.stringify.dtdPubID(value.pubID)}if(value.sysID!=null){this.sysID=this.stringify.dtdSysID(value.sysID)}}Object.defineProperty(XMLDTDNotation.prototype,"publicId",{get:function(){return this.pubID}});Object.defineProperty(XMLDTDNotation.prototype,"systemId",{get:function(){return this.sysID}});XMLDTDNotation.prototype.toString=function(options){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(options))};return XMLDTDNotation}(XMLNode)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLNode,XMLRaw,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;NodeType=__webpack_require__(49);XMLNode=__webpack_require__(53);module.exports=XMLRaw=function(superClass){extend(XMLRaw,superClass);function XMLRaw(parent,text){XMLRaw.__super__.constructor.call(this,parent);if(text==null){throw new Error("Missing raw text. "+this.debugInfo())}this.type=NodeType.Raw;this.value=this.stringify.raw(text)}XMLRaw.prototype.clone=function(){return Object.create(this)};XMLRaw.prototype.toString=function(options){return this.options.writer.raw(this,this.options.writer.filterOptions(options))};return XMLRaw}(XMLNode)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLCharacterData,XMLText,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;NodeType=__webpack_require__(49);XMLCharacterData=__webpack_require__(78);module.exports=XMLText=function(superClass){extend(XMLText,superClass);function XMLText(parent,text){XMLText.__super__.constructor.call(this,parent);if(text==null){throw new Error("Missing element text. "+this.debugInfo())}this.name="#text";this.type=NodeType.Text;this.value=this.stringify.text(text)}Object.defineProperty(XMLText.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}});Object.defineProperty(XMLText.prototype,"wholeText",{get:function(){var next,prev,str;str="";prev=this.previousSibling;while(prev){str=prev.data+str;prev=prev.previousSibling}str+=this.data;next=this.nextSibling;while(next){str=str+next.data;next=next.nextSibling}return str}});XMLText.prototype.clone=function(){return Object.create(this)};XMLText.prototype.toString=function(options){return this.options.writer.text(this,this.options.writer.filterOptions(options))};XMLText.prototype.splitText=function(offset){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLText.prototype.replaceWholeText=function(content){throw new Error("This DOM method is not implemented."+this.debugInfo())};return XMLText}(XMLCharacterData)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLCharacterData,XMLProcessingInstruction,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;NodeType=__webpack_require__(49);XMLCharacterData=__webpack_require__(78);module.exports=XMLProcessingInstruction=function(superClass){extend(XMLProcessingInstruction,superClass);function XMLProcessingInstruction(parent,target,value){XMLProcessingInstruction.__super__.constructor.call(this,parent);if(target==null){throw new Error("Missing instruction target. "+this.debugInfo())}this.type=NodeType.ProcessingInstruction;this.target=this.stringify.insTarget(target);this.name=this.target;if(value){this.value=this.stringify.insValue(value)}}XMLProcessingInstruction.prototype.clone=function(){return Object.create(this)};XMLProcessingInstruction.prototype.toString=function(options){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(options))};XMLProcessingInstruction.prototype.isEqualNode=function(node){if(!XMLProcessingInstruction.__super__.isEqualNode.apply(this,arguments).isEqualNode(node)){return false}if(node.target!==this.target){return false}return true};return XMLProcessingInstruction}(XMLCharacterData)}).call(this)},function(module,exports,__webpack_require__){(function(){var XMLStringWriter,XMLWriterBase,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;XMLWriterBase=__webpack_require__(146);module.exports=XMLStringWriter=function(superClass){extend(XMLStringWriter,superClass);function XMLStringWriter(options){XMLStringWriter.__super__.constructor.call(this,options)}XMLStringWriter.prototype.document=function(doc,options){var child,i,len,r,ref;options=this.filterOptions(options);r="";ref=doc.children;for(i=0,len=ref.length;i<len;i++){child=ref[i];r+=this.writeChildNode(child,options,0)}if(options.pretty&&r.slice(-options.newline.length)===options.newline){r=r.slice(0,-options.newline.length)}return r};return XMLStringWriter}(XMLWriterBase)}).call(this)},function(module,exports,__webpack_require__){"use strict";(function(global){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var base64=__webpack_require__(258);var ieee754=__webpack_require__(259);var isArray=__webpack_require__(147);exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;Buffer.TYPED_ARRAY_SUPPORT=global.TYPED_ARRAY_SUPPORT!==undefined?global.TYPED_ARRAY_SUPPORT:typedArraySupport();exports.kMaxLength=kMaxLength();function typedArraySupport(){try{var arr=new Uint8Array(1);arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return arr.foo()===42&&typeof arr.subarray==="function"&&arr.subarray(1,1).byteLength===0}catch(e){return false}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(that,length){if(kMaxLength()<length){throw new RangeError("Invalid typed array length")}if(Buffer.TYPED_ARRAY_SUPPORT){that=new Uint8Array(length);that.__proto__=Buffer.prototype}else{if(that===null){that=new Buffer(length)}that.length=length}return that}function Buffer(arg,encodingOrOffset,length){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer)){return new Buffer(arg,encodingOrOffset,length)}if(typeof arg==="number"){if(typeof encodingOrOffset==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return allocUnsafe(this,arg)}return from(this,arg,encodingOrOffset,length)}Buffer.poolSize=8192;Buffer._augment=function(arr){arr.__proto__=Buffer.prototype;return arr};function from(that,value,encodingOrOffset,length){if(typeof value==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&value instanceof ArrayBuffer){return fromArrayBuffer(that,value,encodingOrOffset,length)}if(typeof value==="string"){return fromString(that,value,encodingOrOffset)}return fromObject(that,value)}Buffer.from=function(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)};if(Buffer.TYPED_ARRAY_SUPPORT){Buffer.prototype.__proto__=Uint8Array.prototype;Buffer.__proto__=Uint8Array;if(typeof Symbol!=="undefined"&&Symbol.species&&Buffer[Symbol.species]===Buffer){Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:true})}}function assertSize(size){if(typeof size!=="number"){throw new TypeError('"size" argument must be a number')}else if(size<0){throw new RangeError('"size" argument must not be negative')}}function alloc(that,size,fill,encoding){assertSize(size);if(size<=0){return createBuffer(that,size)}if(fill!==undefined){return typeof encoding==="string"?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill)}return createBuffer(that,size)}Buffer.alloc=function(size,fill,encoding){return alloc(null,size,fill,encoding)};function allocUnsafe(that,size){assertSize(size);that=createBuffer(that,size<0?0:checked(size)|0);if(!Buffer.TYPED_ARRAY_SUPPORT){for(var i=0;i<size;++i){that[i]=0}}return that}Buffer.allocUnsafe=function(size){return allocUnsafe(null,size)};Buffer.allocUnsafeSlow=function(size){return allocUnsafe(null,size)};function fromString(that,string,encoding){if(typeof encoding!=="string"||encoding===""){encoding="utf8"}if(!Buffer.isEncoding(encoding)){throw new TypeError('"encoding" must be a valid string encoding')}var length=byteLength(string,encoding)|0;that=createBuffer(that,length);var actual=that.write(string,encoding);if(actual!==length){that=that.slice(0,actual)}return that}function fromArrayLike(that,array){var length=array.length<0?0:checked(array.length)|0;that=createBuffer(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255}return that}function fromArrayBuffer(that,array,byteOffset,length){array.byteLength;if(byteOffset<0||array.byteLength<byteOffset){throw new RangeError("'offset' is out of bounds")}if(array.byteLength<byteOffset+(length||0)){throw new RangeError("'length' is out of bounds")}if(byteOffset===undefined&&length===undefined){array=new Uint8Array(array)}else if(length===undefined){array=new Uint8Array(array,byteOffset)}else{array=new Uint8Array(array,byteOffset,length)}if(Buffer.TYPED_ARRAY_SUPPORT){that=array;that.__proto__=Buffer.prototype}else{that=fromArrayLike(that,array)}return that}function fromObject(that,obj){if(Buffer.isBuffer(obj)){var len=checked(obj.length)|0;that=createBuffer(that,len);if(that.length===0){return that}obj.copy(that,0,0,len);return that}if(obj){if(typeof ArrayBuffer!=="undefined"&&obj.buffer instanceof ArrayBuffer||"length"in obj){if(typeof obj.length!=="number"||isnan(obj.length)){return createBuffer(that,0)}return fromArrayLike(that,obj)}if(obj.type==="Buffer"&&isArray(obj.data)){return fromArrayLike(that,obj.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(length){if(length>=kMaxLength()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+kMaxLength().toString(16)+" bytes")}return length|0}function SlowBuffer(length){if(+length!=length){length=0}return Buffer.alloc(+length)}Buffer.isBuffer=function isBuffer(b){return!!(b!=null&&b._isBuffer)};Buffer.compare=function compare(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)){throw new TypeError("Arguments must be Buffers")}if(a===b)return 0;var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Buffer.concat=function concat(list,length){if(!isArray(list)){throw new TypeError('"list" argument must be an Array of Buffers')}if(list.length===0){return Buffer.alloc(0)}var i;if(length===undefined){length=0;for(i=0;i<list.length;++i){length+=list[i].length}}var buffer=Buffer.allocUnsafe(length);var pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(!Buffer.isBuffer(buf)){throw new TypeError('"list" argument must be an Array of Buffers')}buf.copy(buffer,pos);pos+=buf.length}return buffer};function byteLength(string,encoding){if(Buffer.isBuffer(string)){return string.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer)){return string.byteLength}if(typeof string!=="string"){string=""+string}var len=string.length;if(len===0)return 0;var loweredCase=false;for(;;){switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":case undefined:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return len*2;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase();loweredCase=true}}}Buffer.byteLength=byteLength;function slowToString(encoding,start,end){var loweredCase=false;if(start===undefined||start<0){start=0}if(start>this.length){return""}if(end===undefined||end>this.length){end=this.length}if(end<=0){return""}end>>>=0;start>>>=0;if(end<=start){return""}if(!encoding)encoding="utf8";while(true){switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase();loweredCase=true}}}Buffer.prototype._isBuffer=true;function swap(b,n,m){var i=b[n];b[n]=b[m];b[m]=i}Buffer.prototype.swap16=function swap16(){var len=this.length;if(len%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var i=0;i<len;i+=2){swap(this,i,i+1)}return this};Buffer.prototype.swap32=function swap32(){var len=this.length;if(len%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var i=0;i<len;i+=4){swap(this,i,i+3);swap(this,i+1,i+2)}return this};Buffer.prototype.swap64=function swap64(){var len=this.length;if(len%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var i=0;i<len;i+=8){swap(this,i,i+7);swap(this,i+1,i+6);swap(this,i+2,i+5);swap(this,i+3,i+4)}return this};Buffer.prototype.toString=function toString(){var length=this.length|0;if(length===0)return"";if(arguments.length===0)return utf8Slice(this,0,length);return slowToString.apply(this,arguments)};Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return true;return Buffer.compare(this,b)===0};Buffer.prototype.inspect=function inspect(){var str="";var max=exports.INSPECT_MAX_BYTES;if(this.length>0){str=this.toString("hex",0,max).match(/.{2}/g).join(" ");if(this.length>max)str+=" ... "}return"<Buffer "+str+">"};Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target)){throw new TypeError("Argument must be a Buffer")}if(start===undefined){start=0}if(end===undefined){end=target?target.length:0}if(thisStart===undefined){thisStart=0}if(thisEnd===undefined){thisEnd=this.length}if(start<0||end>target.length||thisStart<0||thisEnd>this.length){throw new RangeError("out of range index")}if(thisStart>=thisEnd&&start>=end){return 0}if(thisStart>=thisEnd){return-1}if(start>=end){return 1}start>>>=0;end>>>=0;thisStart>>>=0;thisEnd>>>=0;if(this===target)return 0;var x=thisEnd-thisStart;var y=end-start;var len=Math.min(x,y);var thisCopy=this.slice(thisStart,thisEnd);var targetCopy=target.slice(start,end);for(var i=0;i<len;++i){if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i];y=targetCopy[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(buffer.length===0)return-1;if(typeof byteOffset==="string"){encoding=byteOffset;byteOffset=0}else if(byteOffset>2147483647){byteOffset=2147483647}else if(byteOffset<-2147483648){byteOffset=-2147483648}byteOffset=+byteOffset;if(isNaN(byteOffset)){byteOffset=dir?0:buffer.length-1}if(byteOffset<0)byteOffset=buffer.length+byteOffset;if(byteOffset>=buffer.length){if(dir)return-1;else byteOffset=buffer.length-1}else if(byteOffset<0){if(dir)byteOffset=0;else return-1}if(typeof val==="string"){val=Buffer.from(val,encoding)}if(Buffer.isBuffer(val)){if(val.length===0){return-1}return arrayIndexOf(buffer,val,byteOffset,encoding,dir)}else if(typeof val==="number"){val=val&255;if(Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==="function"){if(dir){return Uint8Array.prototype.indexOf.call(buffer,val,byteOffset)}else{return Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset)}}return arrayIndexOf(buffer,[val],byteOffset,encoding,dir)}throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var indexSize=1;var arrLength=arr.length;var valLength=val.length;if(encoding!==undefined){encoding=String(encoding).toLowerCase();if(encoding==="ucs2"||encoding==="ucs-2"||encoding==="utf16le"||encoding==="utf-16le"){if(arr.length<2||val.length<2){return-1}indexSize=2;arrLength/=2;valLength/=2;byteOffset/=2}}function read(buf,i){if(indexSize===1){return buf[i]}else{return buf.readUInt16BE(i*indexSize)}}var i;if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++){if(read(arr,i)===read(val,foundIndex===-1?0:i-foundIndex)){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===valLength)return foundIndex*indexSize}else{if(foundIndex!==-1)i-=i-foundIndex;foundIndex=-1}}}else{if(byteOffset+valLength>arrLength)byteOffset=arrLength-valLength;for(i=byteOffset;i>=0;i--){var found=true;for(var j=0;j<valLength;j++){if(read(arr,i+j)!==read(val,j)){found=false;break}}if(found)return i}}return-1}Buffer.prototype.includes=function includes(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1};Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,true)};Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,false)};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}var strLen=string.length;if(strLen%2!==0)throw new TypeError("Invalid hex string");if(length>strLen/2){length=strLen/2}for(var i=0;i<length;++i){var parsed=parseInt(string.substr(i*2,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}Buffer.prototype.write=function write(string,offset,length,encoding){if(offset===undefined){encoding="utf8";length=this.length;offset=0}else if(length===undefined&&typeof offset==="string"){encoding=offset;length=this.length;offset=0}else if(isFinite(offset)){offset=offset|0;if(isFinite(length)){length=length|0;if(encoding===undefined)encoding="utf8"}else{encoding=length;length=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var remaining=this.length-offset;if(length===undefined||length>remaining)length=remaining;if(string.length>0&&(length<0||offset<0)||offset>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!encoding)encoding="utf8";var loweredCase=false;for(;;){switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase();loweredCase=true}}};Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf)}else{return base64.fromByteArray(buf.slice(start,end))}}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);var res=[];var i=start;while(i<end){var firstByte=buf[i];var codePoint=null;var bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:if(firstByte<128){codePoint=firstByte}break;case 2:secondByte=buf[i+1];if((secondByte&192)===128){tempCodePoint=(firstByte&31)<<6|secondByte&63;if(tempCodePoint>127){codePoint=tempCodePoint}}break;case 3:secondByte=buf[i+1];thirdByte=buf[i+2];if((secondByte&192)===128&&(thirdByte&192)===128){tempCodePoint=(firstByte&15)<<12|(secondByte&63)<<6|thirdByte&63;if(tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)){codePoint=tempCodePoint}}break;case 4:secondByte=buf[i+1];thirdByte=buf[i+2];fourthByte=buf[i+3];if((secondByte&192)===128&&(thirdByte&192)===128&&(fourthByte&192)===128){tempCodePoint=(firstByte&15)<<18|(secondByte&63)<<12|(thirdByte&63)<<6|fourthByte&63;if(tempCodePoint>65535&&tempCodePoint<1114112){codePoint=tempCodePoint}}}}if(codePoint===null){codePoint=65533;bytesPerSequence=1}else if(codePoint>65535){codePoint-=65536;res.push(codePoint>>>10&1023|55296);codePoint=56320|codePoint&1023}res.push(codePoint);i+=bytesPerSequence}return decodeCodePointsArray(res)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH){return String.fromCharCode.apply(String,codePoints)}var res="";var i=0;while(i<len){res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH))}return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i]&127)}return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i])}return ret}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;++i){out+=toHex(buf[i])}return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res="";for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}return res}Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0}else if(start>len){start=len}if(end<0){end+=len;if(end<0)end=0}else if(end>len){end=len}if(end<start)end=start;var newBuf;if(Buffer.TYPED_ARRAY_SUPPORT){newBuf=this.subarray(start,end);newBuf.__proto__=Buffer.prototype}else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,undefined);for(var i=0;i<sliceLen;++i){newBuf[i]=this[i+start]}}return newBuf};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}return val};Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert){checkOffset(offset,byteLength,this.length)}var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=256)){val+=this[offset+--byteLength]*mul}return val};Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8};Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1]};Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216};Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=256)){val+=this[offset+--i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readInt8=function readInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&128))return this[offset];return(255-this[offset]+1)*-1};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4)};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4)};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8)};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8)};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var mul=1;var i=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var i=byteLength-1;var mul=1;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,255,0);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);this[offset]=value&255;return offset+1};function objectWriteUInt16(buf,value,offset,littleEndian){if(value<0)value=65535+value+1;for(var i=0,j=Math.min(buf.length-offset,2);i<j;++i){buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>(littleEndian?i:1-i)*8}}Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8}else{objectWriteUInt16(this,value,offset,true)}return offset+2};Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&255}else{objectWriteUInt16(this,value,offset,false)}return offset+2};function objectWriteUInt32(buf,value,offset,littleEndian){if(value<0)value=4294967295+value+1;for(var i=0,j=Math.min(buf.length-offset,4);i<j;++i){buf[offset+i]=value>>>(littleEndian?i:3-i)*8&255}}Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value&255}else{objectWriteUInt32(this,value,offset,true)}return offset+4};Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255}else{objectWriteUInt32(this,value,offset,false)}return offset+4};Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0;var mul=1;var sub=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){if(value<0&&sub===0&&this[offset+i-1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1;var mul=1;var sub=0;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){if(value<0&&sub===0&&this[offset+i+1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,127,-128);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);if(value<0)value=255+value+1;this[offset]=value&255;return offset+1};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8}else{objectWriteUInt16(this,value,offset,true)}return offset+2};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&255}else{objectWriteUInt16(this,value,offset,false)}return offset+2};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24}else{objectWriteUInt32(this,value,offset,true)}return offset+4};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(value<0)value=4294967295+value+1;if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255}else{objectWriteUInt32(this,value,offset,false)}return offset+4};function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,4,34028234663852886e22,-34028234663852886e22)}ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)};function writeDouble(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,8,17976931348623157e292,-17976931348623157e292)}ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!start)start=0;if(!end&&end!==0)end=this.length;if(targetStart>=target.length)targetStart=target.length;if(!targetStart)targetStart=0;if(end>0&&end<start)end=start;if(end===start)return 0;if(target.length===0||this.length===0)return 0;if(targetStart<0){throw new RangeError("targetStart out of bounds")}if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-targetStart<end-start){end=target.length-targetStart+start}var len=end-start;var i;if(this===target&&start<targetStart&&targetStart<end){for(i=len-1;i>=0;--i){target[i+targetStart]=this[i+start]}}else if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT){for(i=0;i<len;++i){target[i+targetStart]=this[i+start]}}else{Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart)}return len};Buffer.prototype.fill=function fill(val,start,end,encoding){if(typeof val==="string"){if(typeof start==="string"){encoding=start;start=0;end=this.length}else if(typeof end==="string"){encoding=end;end=this.length}if(val.length===1){var code=val.charCodeAt(0);if(code<256){val=code}}if(encoding!==undefined&&typeof encoding!=="string"){throw new TypeError("encoding must be a string")}if(typeof encoding==="string"&&!Buffer.isEncoding(encoding)){throw new TypeError("Unknown encoding: "+encoding)}}else if(typeof val==="number"){val=val&255}if(start<0||this.length<start||this.length<end){throw new RangeError("Out of range index")}if(end<=start){return this}start=start>>>0;end=end===undefined?this.length:end>>>0;if(!val)val=0;var i;if(typeof val==="number"){for(i=start;i<end;++i){this[i]=val}}else{var bytes=Buffer.isBuffer(val)?val:utf8ToBytes(new Buffer(val,encoding).toString());var len=bytes.length;for(i=0;i<end-start;++i){this[i+start]=bytes[i%len]}}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(str){str=stringtrim(str).replace(INVALID_BASE64_RE,"");if(str.length<2)return"";while(str.length%4!==0){str=str+"="}return str}function stringtrim(str){if(str.trim)return str.trim();return str.replace(/^\s+|\s+$/g,"")}function toHex(n){if(n<16)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];for(var i=0;i<length;++i){codePoint=string.charCodeAt(i);if(codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){if((units-=3)>-1)bytes.push(239,191,189);continue}else if(i+1===length){if((units-=3)>-1)bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else if(leadSurrogate){if((units-=3)>-1)bytes.push(239,191,189)}leadSurrogate=null;if(codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<1114112){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else{throw new Error("Invalid code point")}}return bytes}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;++i){byteArray.push(str.charCodeAt(i)&255)}return byteArray}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;++i){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;++i){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i]}return i}function isnan(val){return val!==val}}).call(this,__webpack_require__(55))},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(148);exports.Stream=exports;exports.Readable=exports;exports.Writable=__webpack_require__(113);exports.Duplex=__webpack_require__(62);exports.Transform=__webpack_require__(152);exports.PassThrough=__webpack_require__(267)},function(module,exports,__webpack_require__){"use strict";(function(process,setImmediate,global){var pna=__webpack_require__(80);module.exports=Writable;function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb;this.next=null}function CorkedRequest(state){var _this=this;this.next=null;this.entry=null;this.finish=function(){onCorkedFinish(_this,state)}}var asyncWrite=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:pna.nextTick;var Duplex;Writable.WritableState=WritableState;var util=Object.create(__webpack_require__(67));util.inherits=__webpack_require__(68);var internalUtil={deprecate:__webpack_require__(266)};var Stream=__webpack_require__(149);var Buffer=__webpack_require__(81).Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}var destroyImpl=__webpack_require__(150);util.inherits(Writable,Stream);function nop(){}function WritableState(options,stream){Duplex=Duplex||__webpack_require__(62);options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.writableObjectMode;var hwm=options.highWaterMark;var writableHwm=options.writableHighWaterMark;var defaultHwm=this.objectMode?16:16*1024;if(hwm||hwm===0)this.highWaterMark=hwm;else if(isDuplex&&(writableHwm||writableHwm===0))this.highWaterMark=writableHwm;else this.highWaterMark=defaultHwm;this.highWaterMark=Math.floor(this.highWaterMark);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function getBuffer(){var current=this.bufferedRequest;var out=[];while(current){out.push(current);current=current.next}return out};(function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(_){}})();var realHasInstance;if(typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"){realHasInstance=Function.prototype[Symbol.hasInstance];Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){if(realHasInstance.call(this,object))return true;if(this!==Writable)return false;return object&&object._writableState instanceof WritableState}})}else{realHasInstance=function(object){return object instanceof this}}function Writable(options){Duplex=Duplex||__webpack_require__(62);if(!realHasInstance.call(Writable,this)&&!(this instanceof Duplex)){return new Writable(options)}this._writableState=new WritableState(options,this);this.writable=true;if(options){if(typeof options.write==="function")this._write=options.write;if(typeof options.writev==="function")this._writev=options.writev;if(typeof options.destroy==="function")this._destroy=options.destroy;if(typeof options.final==="function")this._final=options.final}Stream.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function writeAfterEnd(stream,cb){var er=new Error("write after end");stream.emit("error",er);pna.nextTick(cb,er)}function validChunk(stream,state,chunk,cb){var valid=true;var er=false;if(chunk===null){er=new TypeError("May not write null values to stream")}else if(typeof chunk!=="string"&&chunk!==undefined&&!state.objectMode){er=new TypeError("Invalid non-string/buffer chunk")}if(er){stream.emit("error",er);pna.nextTick(cb,er);valid=false}return valid}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;var isBuf=!state.objectMode&&_isUint8Array(chunk);if(isBuf&&!Buffer.isBuffer(chunk)){chunk=_uint8ArrayToBuffer(chunk)}if(typeof encoding==="function"){cb=encoding;encoding=null}if(isBuf)encoding="buffer";else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=="function")cb=nop;if(state.ended)writeAfterEnd(this,cb);else if(isBuf||validChunk(this,state,chunk,cb)){state.pendingcb++;ret=writeOrBuffer(this,state,isBuf,chunk,encoding,cb)}return ret};Writable.prototype.cork=function(){var state=this._writableState;state.corked++};Writable.prototype.uncork=function(){var state=this._writableState;if(state.corked){state.corked--;if(!state.writing&&!state.corked&&!state.finished&&!state.bufferProcessing&&state.bufferedRequest)clearBuffer(this,state)}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if(typeof encoding==="string")encoding=encoding.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+encoding);this._writableState.defaultEncoding=encoding;return this};function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==="string"){chunk=Buffer.from(chunk,encoding)}return chunk}Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:false,get:function(){return this._writableState.highWaterMark}});function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=decodeChunk(state,chunk,encoding);if(chunk!==newChunk){isBuf=true;encoding="buffer";chunk=newChunk}}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null};if(last){last.next=state.lastBufferedRequest}else{state.bufferedRequest=state.lastBufferedRequest}state.bufferedRequestCount+=1}else{doWrite(stream,state,false,len,chunk,encoding,cb)}return ret}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;if(writev)stream._writev(chunk,state.onwrite);else stream._write(chunk,encoding,state.onwrite);state.sync=false}function onwriteError(stream,state,sync,er,cb){--state.pendingcb;if(sync){pna.nextTick(cb,er);pna.nextTick(finishMaybe,stream,state);stream._writableState.errorEmitted=true;stream.emit("error",er)}else{cb(er);stream._writableState.errorEmitted=true;stream.emit("error",er);finishMaybe(stream,state)}}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state);if(!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest){clearBuffer(stream,state)}if(sync){asyncWrite(afterWrite,stream,state,finished,cb)}else{afterWrite(stream,state,finished,cb)}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);state.pendingcb--;cb();finishMaybe(stream,state)}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit("drain")}}function clearBuffer(stream,state){state.bufferProcessing=true;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount;var buffer=new Array(l);var holder=state.corkedRequestsFree;holder.entry=entry;var count=0;var allBuffers=true;while(entry){buffer[count]=entry;if(!entry.isBuf)allBuffers=false;entry=entry.next;count+=1}buffer.allBuffers=allBuffers;doWrite(stream,state,true,state.length,buffer,"",holder.finish);state.pendingcb++;state.lastBufferedRequest=null;if(holder.next){state.corkedRequestsFree=holder.next;holder.next=null}else{state.corkedRequestsFree=new CorkedRequest(state)}state.bufferedRequestCount=0}else{while(entry){var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,false,len,chunk,encoding,cb);entry=entry.next;state.bufferedRequestCount--;if(state.writing){break}}if(entry===null)state.lastBufferedRequest=null}state.bufferedRequest=entry;state.bufferProcessing=false}Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("_write() is not implemented"))};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==="function"){cb=chunk;chunk=null;encoding=null}else if(typeof encoding==="function"){cb=encoding;encoding=null}if(chunk!==null&&chunk!==undefined)this.write(chunk,encoding);if(state.corked){state.corked=1;this.uncork()}if(!state.ending&&!state.finished)endWritable(this,state,cb)};function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final((function(err){state.pendingcb--;if(err){stream.emit("error",err)}state.prefinished=true;stream.emit("prefinish");finishMaybe(stream,state)}))}function prefinish(stream,state){if(!state.prefinished&&!state.finalCalled){if(typeof stream._final==="function"){state.pendingcb++;state.finalCalled=true;pna.nextTick(callFinal,stream,state)}else{state.prefinished=true;stream.emit("prefinish")}}}function finishMaybe(stream,state){var need=needFinish(state);if(need){prefinish(stream,state);if(state.pendingcb===0){state.finished=true;stream.emit("finish")}}return need}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)pna.nextTick(cb);else stream.once("finish",cb)}state.ended=true;stream.writable=false}function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;while(entry){var cb=entry.callback;state.pendingcb--;cb(err);entry=entry.next}if(state.corkedRequestsFree){state.corkedRequestsFree.next=corkReq}else{state.corkedRequestsFree=corkReq}}Object.defineProperty(Writable.prototype,"destroyed",{get:function(){if(this._writableState===undefined){return false}return this._writableState.destroyed},set:function(value){if(!this._writableState){return}this._writableState.destroyed=value}});Writable.prototype.destroy=destroyImpl.destroy;Writable.prototype._undestroy=destroyImpl.undestroy;Writable.prototype._destroy=function(err,cb){this.end();cb(err)}}).call(this,__webpack_require__(60),__webpack_require__(151).setImmediate,__webpack_require__(55))},function(module,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(81).Buffer;var isEncoding=Buffer.isEncoding||function(encoding){encoding=""+encoding;switch(encoding&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function _normalizeEncoding(enc){if(!enc)return"utf8";var retried;while(true){switch(enc){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return enc;default:if(retried)return;enc=(""+enc).toLowerCase();retried=true}}}function normalizeEncoding(enc){var nenc=_normalizeEncoding(enc);if(typeof nenc!=="string"&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw new Error("Unknown encoding: "+enc);return nenc||enc}exports.StringDecoder=StringDecoder;function StringDecoder(encoding){this.encoding=normalizeEncoding(encoding);var nb;switch(this.encoding){case"utf16le":this.text=utf16Text;this.end=utf16End;nb=4;break;case"utf8":this.fillLast=utf8FillLast;nb=4;break;case"base64":this.text=base64Text;this.end=base64End;nb=3;break;default:this.write=simpleWrite;this.end=simpleEnd;return}this.lastNeed=0;this.lastTotal=0;this.lastChar=Buffer.allocUnsafe(nb)}StringDecoder.prototype.write=function(buf){if(buf.length===0)return"";var r;var i;if(this.lastNeed){r=this.fillLast(buf);if(r===undefined)return"";i=this.lastNeed;this.lastNeed=0}else{i=0}if(i<buf.length)return r?r+this.text(buf,i):this.text(buf,i);return r||""};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length){buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length);this.lastNeed-=buf.length};function utf8CheckByte(byte){if(byte<=127)return 0;else if(byte>>5===6)return 2;else if(byte>>4===14)return 3;else if(byte>>3===30)return 4;return byte>>6===2?-1:-2}function utf8CheckIncomplete(self,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0)self.lastNeed=nb-1;return nb}if(--j<i||nb===-2)return 0;nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0)self.lastNeed=nb-2;return nb}if(--j<i||nb===-2)return 0;nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0){if(nb===2)nb=0;else self.lastNeed=nb-3}return nb}return 0}function utf8CheckExtraBytes(self,buf,p){if((buf[0]&192)!==128){self.lastNeed=0;return"�"}if(self.lastNeed>1&&buf.length>1){if((buf[1]&192)!==128){self.lastNeed=1;return"�"}if(self.lastNeed>2&&buf.length>2){if((buf[2]&192)!==128){self.lastNeed=2;return"�"}}}}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed;var r=utf8CheckExtraBytes(this,buf,p);if(r!==undefined)return r;if(this.lastNeed<=buf.length){buf.copy(this.lastChar,p,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}buf.copy(this.lastChar,p,0,buf.length);this.lastNeed-=buf.length}function utf8Text(buf,i){var total=utf8CheckIncomplete(this,buf,i);if(!this.lastNeed)return buf.toString("utf8",i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);buf.copy(this.lastChar,0,end);return buf.toString("utf8",i,end)}function utf8End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed)return r+"�";return r}function utf16Text(buf,i){if((buf.length-i)%2===0){var r=buf.toString("utf16le",i);if(r){var c=r.charCodeAt(r.length-1);if(c>=55296&&c<=56319){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=buf[buf.length-2];this.lastChar[1]=buf[buf.length-1];return r.slice(0,-1)}}return r}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=buf[buf.length-1];return buf.toString("utf16le",i,buf.length-1)}function utf16End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,end)}return r}function base64Text(buf,i){var n=(buf.length-i)%3;if(n===0)return buf.toString("base64",i);this.lastNeed=3-n;this.lastTotal=3;if(n===1){this.lastChar[0]=buf[buf.length-1]}else{this.lastChar[0]=buf[buf.length-2];this.lastChar[1]=buf[buf.length-1]}return buf.toString("base64",i,buf.length-n)}function base64End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed)return r+this.lastChar.toString("base64",0,3-this.lastNeed);return r}function simpleWrite(buf){return buf.toString(this.encoding)}function simpleEnd(buf){return buf&&buf.length?this.write(buf):""}},function(module,exports,__webpack_require__){"use strict";var keys=__webpack_require__(274);var hasSymbols=typeof Symbol==="function"&&typeof Symbol("foo")==="symbol";var toStr=Object.prototype.toString;var concat=Array.prototype.concat;var origDefineProperty=Object.defineProperty;var isFunction=function(fn){return typeof fn==="function"&&toStr.call(fn)==="[object Function]"};var arePropertyDescriptorsSupported=function(){var obj={};try{origDefineProperty(obj,"x",{enumerable:false,value:obj});for(var _ in obj){return false}return obj.x===obj}catch(e){return false}};var supportsDescriptors=origDefineProperty&&arePropertyDescriptorsSupported();var defineProperty=function(object,name,value,predicate){if(name in object&&(!isFunction(predicate)||!predicate())){return}if(supportsDescriptors){origDefineProperty(object,name,{configurable:true,enumerable:false,value:value,writable:true})}else{object[name]=value}};var defineProperties=function(object,map){var predicates=arguments.length>2?arguments[2]:{};var props=keys(map);if(hasSymbols){props=concat.call(props,Object.getOwnPropertySymbols(map))}for(var i=0;i<props.length;i+=1){defineProperty(object,props[i],map[props[i]],predicates[props[i]])}};defineProperties.supportsDescriptors=!!supportsDescriptors;module.exports=defineProperties},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(279);module.exports=Function.prototype.bind||implementation},function(module,exports){},function(module,exports,__webpack_require__){var _typeof=__webpack_require__(171);function _getRequireWildcardCache(){if(typeof WeakMap!=="function")return null;var cache=new WeakMap;_getRequireWildcardCache=function _getRequireWildcardCache(){return cache};return cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache();if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj)}return newObj}module.exports=_interopRequireWildcard},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.getBatch=exports.setBatch=void 0;function defaultNoopBatch(callback){callback()}var batch=defaultNoopBatch;var setBatch=function setBatch(newBatch){return batch=newBatch};exports.setBatch=setBatch;var getBatch=function getBatch(){return batch};exports.getBatch=getBatch},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(118);var _interopRequireDefault=__webpack_require__(54);exports.__esModule=true;exports["default"]=connectAdvanced;var _extends2=_interopRequireDefault(__webpack_require__(85));var _objectWithoutPropertiesLoose2=_interopRequireDefault(__webpack_require__(86));var _hoistNonReactStatics=_interopRequireDefault(__webpack_require__(175));var _react=_interopRequireWildcard(__webpack_require__(2));var _reactIs=__webpack_require__(121);var _Subscription=_interopRequireDefault(__webpack_require__(84));var _useIsomorphicLayoutEffect=__webpack_require__(122);var _Context=__webpack_require__(61);var EMPTY_ARRAY=[];var NO_SUBSCRIPTION_ARRAY=[null,null];var stringifyComponent=function stringifyComponent(Comp){try{return JSON.stringify(Comp)}catch(err){return String(Comp)}};function storeStateUpdatesReducer(state,action){var updateCount=state[1];return[action.payload,updateCount+1]}function useIsomorphicLayoutEffectWithArgs(effectFunc,effectArgs,dependencies){(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)((function(){return effectFunc.apply(void 0,effectArgs)}),dependencies)}function captureWrapperProps(lastWrapperProps,lastChildProps,renderIsScheduled,wrapperProps,actualChildProps,childPropsFromStoreUpdate,notifyNestedSubs){lastWrapperProps.current=wrapperProps;lastChildProps.current=actualChildProps;renderIsScheduled.current=false;if(childPropsFromStoreUpdate.current){childPropsFromStoreUpdate.current=null;notifyNestedSubs()}}function subscribeUpdates(shouldHandleStateChanges,store,subscription,childPropsSelector,lastWrapperProps,lastChildProps,renderIsScheduled,childPropsFromStoreUpdate,notifyNestedSubs,forceComponentUpdateDispatch){if(!shouldHandleStateChanges)return;var didUnsubscribe=false;var lastThrownError=null;var checkForUpdates=function checkForUpdates(){if(didUnsubscribe){return}var latestStoreState=store.getState();var newChildProps,error;try{newChildProps=childPropsSelector(latestStoreState,lastWrapperProps.current)}catch(e){error=e;lastThrownError=e}if(!error){lastThrownError=null}if(newChildProps===lastChildProps.current){if(!renderIsScheduled.current){notifyNestedSubs()}}else{lastChildProps.current=newChildProps;childPropsFromStoreUpdate.current=newChildProps;renderIsScheduled.current=true;forceComponentUpdateDispatch({type:"STORE_UPDATED",payload:{error:error}})}};subscription.onStateChange=checkForUpdates;subscription.trySubscribe();checkForUpdates();var unsubscribeWrapper=function unsubscribeWrapper(){didUnsubscribe=true;subscription.tryUnsubscribe();subscription.onStateChange=null;if(lastThrownError){throw lastThrownError}};return unsubscribeWrapper}var initStateUpdates=function initStateUpdates(){return[null,0]};function connectAdvanced(selectorFactory,_ref){if(_ref===void 0){_ref={}}var _ref2=_ref,_ref2$getDisplayName=_ref2.getDisplayName,getDisplayName=_ref2$getDisplayName===void 0?function(name){return"ConnectAdvanced("+name+")"}:_ref2$getDisplayName,_ref2$methodName=_ref2.methodName,methodName=_ref2$methodName===void 0?"connectAdvanced":_ref2$methodName,_ref2$renderCountProp=_ref2.renderCountProp,renderCountProp=_ref2$renderCountProp===void 0?undefined:_ref2$renderCountProp,_ref2$shouldHandleSta=_ref2.shouldHandleStateChanges,shouldHandleStateChanges=_ref2$shouldHandleSta===void 0?true:_ref2$shouldHandleSta,_ref2$storeKey=_ref2.storeKey,storeKey=_ref2$storeKey===void 0?"store":_ref2$storeKey,_ref2$withRef=_ref2.withRef,withRef=_ref2$withRef===void 0?false:_ref2$withRef,_ref2$forwardRef=_ref2.forwardRef,forwardRef=_ref2$forwardRef===void 0?false:_ref2$forwardRef,_ref2$context=_ref2.context,context=_ref2$context===void 0?_Context.ReactReduxContext:_ref2$context,connectOptions=(0,_objectWithoutPropertiesLoose2["default"])(_ref2,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);if(false){var customStoreWarningMessage}var Context=context;return function wrapWithConnect(WrappedComponent){if(false){}var wrappedComponentName=WrappedComponent.displayName||WrappedComponent.name||"Component";var displayName=getDisplayName(wrappedComponentName);var selectorFactoryOptions=(0,_extends2["default"])({},connectOptions,{getDisplayName:getDisplayName,methodName:methodName,renderCountProp:renderCountProp,shouldHandleStateChanges:shouldHandleStateChanges,storeKey:storeKey,displayName:displayName,wrappedComponentName:wrappedComponentName,WrappedComponent:WrappedComponent});var pure=connectOptions.pure;function createChildSelector(store){return selectorFactory(store.dispatch,selectorFactoryOptions)}var usePureOnlyMemo=pure?_react.useMemo:function(callback){return callback()};function ConnectFunction(props){var _useMemo=(0,_react.useMemo)((function(){var forwardedRef=props.forwardedRef,wrapperProps=(0,_objectWithoutPropertiesLoose2["default"])(props,["forwardedRef"]);return[props.context,forwardedRef,wrapperProps]}),[props]),propsContext=_useMemo[0],forwardedRef=_useMemo[1],wrapperProps=_useMemo[2];var ContextToUse=(0,_react.useMemo)((function(){return propsContext&&propsContext.Consumer&&(0,_reactIs.isContextConsumer)(_react["default"].createElement(propsContext.Consumer,null))?propsContext:Context}),[propsContext,Context]);var contextValue=(0,_react.useContext)(ContextToUse);var didStoreComeFromProps=Boolean(props.store)&&Boolean(props.store.getState)&&Boolean(props.store.dispatch);var didStoreComeFromContext=Boolean(contextValue)&&Boolean(contextValue.store);if(false){}var store=didStoreComeFromProps?props.store:contextValue.store;var childPropsSelector=(0,_react.useMemo)((function(){return createChildSelector(store)}),[store]);var _useMemo2=(0,_react.useMemo)((function(){if(!shouldHandleStateChanges)return NO_SUBSCRIPTION_ARRAY;var subscription=new _Subscription["default"](store,didStoreComeFromProps?null:contextValue.subscription);var notifyNestedSubs=subscription.notifyNestedSubs.bind(subscription);return[subscription,notifyNestedSubs]}),[store,didStoreComeFromProps,contextValue]),subscription=_useMemo2[0],notifyNestedSubs=_useMemo2[1];var overriddenContextValue=(0,_react.useMemo)((function(){if(didStoreComeFromProps){return contextValue}return(0,_extends2["default"])({},contextValue,{subscription:subscription})}),[didStoreComeFromProps,contextValue,subscription]);var _useReducer=(0,_react.useReducer)(storeStateUpdatesReducer,EMPTY_ARRAY,initStateUpdates),_useReducer$=_useReducer[0],previousStateUpdateResult=_useReducer$[0],forceComponentUpdateDispatch=_useReducer[1];if(previousStateUpdateResult&&previousStateUpdateResult.error){throw previousStateUpdateResult.error}var lastChildProps=(0,_react.useRef)();var lastWrapperProps=(0,_react.useRef)(wrapperProps);var childPropsFromStoreUpdate=(0,_react.useRef)();var renderIsScheduled=(0,_react.useRef)(false);var actualChildProps=usePureOnlyMemo((function(){if(childPropsFromStoreUpdate.current&&wrapperProps===lastWrapperProps.current){return childPropsFromStoreUpdate.current}return childPropsSelector(store.getState(),wrapperProps)}),[store,previousStateUpdateResult,wrapperProps]);useIsomorphicLayoutEffectWithArgs(captureWrapperProps,[lastWrapperProps,lastChildProps,renderIsScheduled,wrapperProps,actualChildProps,childPropsFromStoreUpdate,notifyNestedSubs]);useIsomorphicLayoutEffectWithArgs(subscribeUpdates,[shouldHandleStateChanges,store,subscription,childPropsSelector,lastWrapperProps,lastChildProps,renderIsScheduled,childPropsFromStoreUpdate,notifyNestedSubs,forceComponentUpdateDispatch],[store,subscription,childPropsSelector]);var renderedWrappedComponent=(0,_react.useMemo)((function(){return _react["default"].createElement(WrappedComponent,(0,_extends2["default"])({},actualChildProps,{ref:forwardedRef}))}),[forwardedRef,WrappedComponent,actualChildProps]);var renderedChild=(0,_react.useMemo)((function(){if(shouldHandleStateChanges){return _react["default"].createElement(ContextToUse.Provider,{value:overriddenContextValue},renderedWrappedComponent)}return renderedWrappedComponent}),[ContextToUse,renderedWrappedComponent,overriddenContextValue]);return renderedChild}var Connect=pure?_react["default"].memo(ConnectFunction):ConnectFunction;Connect.WrappedComponent=WrappedComponent;Connect.displayName=displayName;if(forwardRef){var forwarded=_react["default"].forwardRef((function forwardConnectRef(props,ref){return _react["default"].createElement(Connect,(0,_extends2["default"])({},props,{forwardedRef:ref}))}));forwarded.displayName=displayName;forwarded.WrappedComponent=WrappedComponent;return(0,_hoistNonReactStatics["default"])(forwarded,WrappedComponent)}return(0,_hoistNonReactStatics["default"])(Connect,WrappedComponent)}}},function(module,exports,__webpack_require__){"use strict";if(true){module.exports=__webpack_require__(176)}else{}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.useIsomorphicLayoutEffect=void 0;var _react=__webpack_require__(2);var useIsomorphicLayoutEffect=typeof window!=="undefined"&&typeof window.document!=="undefined"&&typeof window.document.createElement!=="undefined"?_react.useLayoutEffect:_react.useEffect;exports.useIsomorphicLayoutEffect=useIsomorphicLayoutEffect},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports["default"]=shallowEqual;function is(x,y){if(x===y){return x!==0||y!==0||1/x===1/y}else{return x!==x&&y!==y}}function shallowEqual(objA,objB){if(is(objA,objB))return true;if(typeof objA!=="object"||objA===null||typeof objB!=="object"||objB===null){return false}var keysA=Object.keys(objA);var keysB=Object.keys(objB);if(keysA.length!==keysB.length)return false;for(var i=0;i<keysA.length;i++){if(!Object.prototype.hasOwnProperty.call(objB,keysA[i])||!is(objA[keysA[i]],objB[keysA[i]])){return false}}return true}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopDefault(ex){return ex&&typeof ex==="object"&&"default"in ex?ex["default"]:ex}var $$observable=_interopDefault(__webpack_require__(179));var randomString=function randomString(){return Math.random().toString(36).substring(7).split("").join(".")};var ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function PROBE_UNKNOWN_ACTION(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject(obj){if(typeof obj!=="object"||obj===null)return false;var proto=obj;while(Object.getPrototypeOf(proto)!==null){proto=Object.getPrototypeOf(proto)}return Object.getPrototypeOf(obj)===proto}function createStore(reducer,preloadedState,enhancer){var _ref2;if(typeof preloadedState==="function"&&typeof enhancer==="function"||typeof enhancer==="function"&&typeof arguments[3]==="function"){throw new Error("It looks like you are passing several store enhancers to "+"createStore(). This is not supported. Instead, compose them "+"together to a single function.")}if(typeof preloadedState==="function"&&typeof enhancer==="undefined"){enhancer=preloadedState;preloadedState=undefined}if(typeof enhancer!=="undefined"){if(typeof enhancer!=="function"){throw new Error("Expected the enhancer to be a function.")}return enhancer(createStore)(reducer,preloadedState)}if(typeof reducer!=="function"){throw new Error("Expected the reducer to be a function.")}var currentReducer=reducer;var currentState=preloadedState;var currentListeners=[];var nextListeners=currentListeners;var isDispatching=false;function ensureCanMutateNextListeners(){if(nextListeners===currentListeners){nextListeners=currentListeners.slice()}}function getState(){if(isDispatching){throw new Error("You may not call store.getState() while the reducer is executing. "+"The reducer has already received the state as an argument. "+"Pass it down from the top reducer instead of reading it from the store.")}return currentState}function subscribe(listener){if(typeof listener!=="function"){throw new Error("Expected the listener to be a function.")}if(isDispatching){throw new Error("You may not call store.subscribe() while the reducer is executing. "+"If you would like to be notified after the store has been updated, subscribe from a "+"component and invoke store.getState() in the callback to access the latest state. "+"See https://redux.js.org/api-reference/store#subscribelistener for more details.")}var isSubscribed=true;ensureCanMutateNextListeners();nextListeners.push(listener);return function unsubscribe(){if(!isSubscribed){return}if(isDispatching){throw new Error("You may not unsubscribe from a store listener while the reducer is executing. "+"See https://redux.js.org/api-reference/store#subscribelistener for more details.")}isSubscribed=false;ensureCanMutateNextListeners();var index=nextListeners.indexOf(listener);nextListeners.splice(index,1);currentListeners=null}}function dispatch(action){if(!isPlainObject(action)){throw new Error("Actions must be plain objects. "+"Use custom middleware for async actions.")}if(typeof action.type==="undefined"){throw new Error('Actions may not have an undefined "type" property. '+"Have you misspelled a constant?")}if(isDispatching){throw new Error("Reducers may not dispatch actions.")}try{isDispatching=true;currentState=currentReducer(currentState,action)}finally{isDispatching=false}var listeners=currentListeners=nextListeners;for(var i=0;i<listeners.length;i++){var listener=listeners[i];listener()}return action}function replaceReducer(nextReducer){if(typeof nextReducer!=="function"){throw new Error("Expected the nextReducer to be a function.")}currentReducer=nextReducer;dispatch({type:ActionTypes.REPLACE})}function observable(){var _ref;var outerSubscribe=subscribe;return _ref={subscribe:function subscribe(observer){if(typeof observer!=="object"||observer===null){throw new TypeError("Expected the observer to be an object.")}function observeState(){if(observer.next){observer.next(getState())}}observeState();var unsubscribe=outerSubscribe(observeState);return{unsubscribe:unsubscribe}}},_ref[$$observable]=function(){return this},_ref}dispatch({type:ActionTypes.INIT});return _ref2={dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:replaceReducer},_ref2[$$observable]=observable,_ref2}function warning(message){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(message)}try{throw new Error(message)}catch(e){}}function getUndefinedStateErrorMessage(key,action){var actionType=action&&action.type;var actionDescription=actionType&&'action "'+String(actionType)+'"'||"an action";return"Given "+actionDescription+', reducer "'+key+'" returned undefined. '+"To ignore an action, you must explicitly return the previous state. "+"If you want this reducer to hold no value, you can return null instead of undefined."}function getUnexpectedStateShapeWarningMessage(inputState,reducers,action,unexpectedKeyCache){var reducerKeys=Object.keys(reducers);var argumentName=action&&action.type===ActionTypes.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(reducerKeys.length===0){return"Store does not have a valid reducer. Make sure the argument passed "+"to combineReducers is an object whose values are reducers."}if(!isPlainObject(inputState)){return"The "+argumentName+' has unexpected type of "'+{}.toString.call(inputState).match(/\s([a-z|A-Z]+)/)[1]+'". Expected argument to be an object with the following '+('keys: "'+reducerKeys.join('", "')+'"')}var unexpectedKeys=Object.keys(inputState).filter((function(key){return!reducers.hasOwnProperty(key)&&!unexpectedKeyCache[key]}));unexpectedKeys.forEach((function(key){unexpectedKeyCache[key]=true}));if(action&&action.type===ActionTypes.REPLACE)return;if(unexpectedKeys.length>0){return"Unexpected "+(unexpectedKeys.length>1?"keys":"key")+" "+('"'+unexpectedKeys.join('", "')+'" found in '+argumentName+". ")+"Expected to find one of the known reducer keys instead: "+('"'+reducerKeys.join('", "')+'". Unexpected keys will be ignored.')}}function assertReducerShape(reducers){Object.keys(reducers).forEach((function(key){var reducer=reducers[key];var initialState=reducer(undefined,{type:ActionTypes.INIT});if(typeof initialState==="undefined"){throw new Error('Reducer "'+key+'" returned undefined during initialization. '+"If the state passed to the reducer is undefined, you must "+"explicitly return the initial state. The initial state may "+"not be undefined. If you don't want to set a value for this reducer, "+"you can use null instead of undefined.")}if(typeof reducer(undefined,{type:ActionTypes.PROBE_UNKNOWN_ACTION()})==="undefined"){throw new Error('Reducer "'+key+'" returned undefined when probed with a random type. '+("Don't try to handle "+ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the "+"current state for any unknown actions, unless it is undefined, "+"in which case you must return the initial state, regardless of the "+"action type. The initial state may not be undefined, but can be null.")}}))}function combineReducers(reducers){var reducerKeys=Object.keys(reducers);var finalReducers={};for(var i=0;i<reducerKeys.length;i++){var key=reducerKeys[i];if(false){}if(typeof reducers[key]==="function"){finalReducers[key]=reducers[key]}}var finalReducerKeys=Object.keys(finalReducers);var unexpectedKeyCache;if(false){}var shapeAssertionError;try{assertReducerShape(finalReducers)}catch(e){shapeAssertionError=e}return function combination(state,action){if(state===void 0){state={}}if(shapeAssertionError){throw shapeAssertionError}if(false){var warningMessage}var hasChanged=false;var nextState={};for(var _i=0;_i<finalReducerKeys.length;_i++){var _key=finalReducerKeys[_i];var reducer=finalReducers[_key];var previousStateForKey=state[_key];var nextStateForKey=reducer(previousStateForKey,action);if(typeof nextStateForKey==="undefined"){var errorMessage=getUndefinedStateErrorMessage(_key,action);throw new Error(errorMessage)}nextState[_key]=nextStateForKey;hasChanged=hasChanged||nextStateForKey!==previousStateForKey}hasChanged=hasChanged||finalReducerKeys.length!==Object.keys(state).length;return hasChanged?nextState:state}}function bindActionCreator(actionCreator,dispatch){return function(){return dispatch(actionCreator.apply(this,arguments))}}function bindActionCreators(actionCreators,dispatch){if(typeof actionCreators==="function"){return bindActionCreator(actionCreators,dispatch)}if(typeof actionCreators!=="object"||actionCreators===null){throw new Error("bindActionCreators expected an object or a function, instead received "+(actionCreators===null?"null":typeof actionCreators)+". "+'Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?')}var boundActionCreators={};for(var key in actionCreators){var actionCreator=actionCreators[key];if(typeof actionCreator==="function"){boundActionCreators[key]=bindActionCreator(actionCreator,dispatch)}}return boundActionCreators}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){keys.push.apply(keys,Object.getOwnPropertySymbols(object))}if(enumerableOnly)keys=keys.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function compose(){for(var _len=arguments.length,funcs=new Array(_len),_key=0;_key<_len;_key++){funcs[_key]=arguments[_key]}if(funcs.length===0){return function(arg){return arg}}if(funcs.length===1){return funcs[0]}return funcs.reduce((function(a,b){return function(){return a(b.apply(void 0,arguments))}}))}function applyMiddleware(){for(var _len=arguments.length,middlewares=new Array(_len),_key=0;_key<_len;_key++){middlewares[_key]=arguments[_key]}return function(createStore){return function(){var store=createStore.apply(void 0,arguments);var _dispatch=function dispatch(){throw new Error("Dispatching while constructing your middleware is not allowed. "+"Other middleware would not be applied to this dispatch.")};var middlewareAPI={getState:store.getState,dispatch:function dispatch(){return _dispatch.apply(void 0,arguments)}};var chain=middlewares.map((function(middleware){return middleware(middlewareAPI)}));_dispatch=compose.apply(void 0,chain)(store.dispatch);return _objectSpread2({},store,{dispatch:_dispatch})}}}function isCrushed(){}if(false){}exports.__DO_NOT_USE__ActionTypes=ActionTypes;exports.applyMiddleware=applyMiddleware;exports.bindActionCreators=bindActionCreators;exports.combineReducers=combineReducers;exports.compose=compose;exports.createStore=createStore},function(module,exports){module.exports=function(module){if(!module.webpackPolyfill){module.deprecate=function(){};module.paths=[];if(!module.children)module.children=[];Object.defineProperty(module,"loaded",{enumerable:true,get:function(){return module.l}});Object.defineProperty(module,"id",{enumerable:true,get:function(){return module.i}});module.webpackPolyfill=1}return module}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(54);exports.__esModule=true;exports.wrapMapToPropsConstant=wrapMapToPropsConstant;exports.getDependsOnOwnProps=getDependsOnOwnProps;exports.wrapMapToPropsFunc=wrapMapToPropsFunc;var _verifyPlainObject=_interopRequireDefault(__webpack_require__(127));function wrapMapToPropsConstant(getConstant){return function initConstantSelector(dispatch,options){var constant=getConstant(dispatch,options);function constantSelector(){return constant}constantSelector.dependsOnOwnProps=false;return constantSelector}}function getDependsOnOwnProps(mapToProps){return mapToProps.dependsOnOwnProps!==null&&mapToProps.dependsOnOwnProps!==undefined?Boolean(mapToProps.dependsOnOwnProps):mapToProps.length!==1}function wrapMapToPropsFunc(mapToProps,methodName){return function initProxySelector(dispatch,_ref){var displayName=_ref.displayName;var proxy=function mapToPropsProxy(stateOrDispatch,ownProps){return proxy.dependsOnOwnProps?proxy.mapToProps(stateOrDispatch,ownProps):proxy.mapToProps(stateOrDispatch)};proxy.dependsOnOwnProps=true;proxy.mapToProps=function detectFactoryAndVerify(stateOrDispatch,ownProps){proxy.mapToProps=mapToProps;proxy.dependsOnOwnProps=getDependsOnOwnProps(mapToProps);var props=proxy(stateOrDispatch,ownProps);if(typeof props==="function"){proxy.mapToProps=props;proxy.dependsOnOwnProps=getDependsOnOwnProps(props);props=proxy(stateOrDispatch,ownProps)}if(false){}return props};return proxy}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(54);exports.__esModule=true;exports["default"]=verifyPlainObject;var _isPlainObject=_interopRequireDefault(__webpack_require__(181));var _warning=_interopRequireDefault(__webpack_require__(128));function verifyPlainObject(value,displayName,methodName){if(!(0,_isPlainObject["default"])(value)){(0,_warning["default"])(methodName+"() in "+displayName+" must return a plain object. Instead received "+value+".")}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports["default"]=warning;function warning(message){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(message)}try{throw new Error(message)}catch(e){}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.createStoreHook=createStoreHook;exports.useStore=void 0;var _react=__webpack_require__(2);var _Context=__webpack_require__(61);var _useReduxContext2=__webpack_require__(130);function createStoreHook(context){if(context===void 0){context=_Context.ReactReduxContext}var useReduxContext=context===_Context.ReactReduxContext?_useReduxContext2.useReduxContext:function(){return(0,_react.useContext)(context)};return function useStore(){var _useReduxContext=useReduxContext(),store=_useReduxContext.store;return store}}var useStore=createStoreHook();exports.useStore=useStore},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.useReduxContext=useReduxContext;var _react=__webpack_require__(2);var _Context=__webpack_require__(61);function useReduxContext(){var contextValue=(0,_react.useContext)(_Context.ReactReduxContext);if(false){}return contextValue}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var helpers_1=__webpack_require__(51);function bboxPolygon(bbox,options){if(options===void 0){options={}}var west=Number(bbox[0]);var south=Number(bbox[1]);var east=Number(bbox[2]);var north=Number(bbox[3]);if(bbox.length===6){throw new Error("@turf/bbox-polygon does not support BBox with 6 positions")}var lowLeft=[west,south];var topLeft=[west,north];var topRight=[east,north];var lowRight=[east,south];return helpers_1.polygon([[lowLeft,lowRight,topRight,topLeft,lowLeft]],options.properties,{bbox:bbox,id:options.id})}exports.default=bboxPolygon},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});var bbox_1=__importDefault(__webpack_require__(71));var boolean_point_in_polygon_1=__importDefault(__webpack_require__(189));var boolean_point_on_line_1=__importDefault(__webpack_require__(190));var invariant_1=__webpack_require__(59);function booleanContains(feature1,feature2){var geom1=invariant_1.getGeom(feature1);var geom2=invariant_1.getGeom(feature2);var type1=invariant_1.getType(feature1);var type2=invariant_1.getType(feature2);var coords1=invariant_1.getCoords(feature1);var coords2=invariant_1.getCoords(feature2);switch(type1){case"Point":switch(type2){case"Point":return compareCoords(coords1,coords2);default:throw new Error("feature2 "+type2+" geometry not supported")}case"MultiPoint":switch(type2){case"Point":return isPointInMultiPoint(geom1,geom2);case"MultiPoint":return isMultiPointInMultiPoint(geom1,geom2);default:throw new Error("feature2 "+type2+" geometry not supported")}case"LineString":switch(type2){case"Point":return boolean_point_on_line_1.default(geom2,geom1,{ignoreEndVertices:true});case"LineString":return isLineOnLine(geom1,geom2);case"MultiPoint":return isMultiPointOnLine(geom1,geom2);default:throw new Error("feature2 "+type2+" geometry not supported")}case"Polygon":switch(type2){case"Point":return boolean_point_in_polygon_1.default(geom2,geom1,{ignoreBoundary:true});case"LineString":return isLineInPoly(geom1,geom2);case"Polygon":return isPolyInPoly(geom1,geom2);case"MultiPoint":return isMultiPointInPoly(geom1,geom2);default:throw new Error("feature2 "+type2+" geometry not supported")}default:throw new Error("feature1 "+type1+" geometry not supported")}}exports.default=booleanContains;function isPointInMultiPoint(multiPoint,pt){var i;var output=false;for(i=0;i<multiPoint.coordinates.length;i++){if(compareCoords(multiPoint.coordinates[i],pt.coordinates)){output=true;break}}return output}exports.isPointInMultiPoint=isPointInMultiPoint;function isMultiPointInMultiPoint(multiPoint1,multiPoint2){for(var _i=0,_a=multiPoint2.coordinates;_i<_a.length;_i++){var coord2=_a[_i];var matchFound=false;for(var _b=0,_c=multiPoint1.coordinates;_b<_c.length;_b++){var coord1=_c[_b];if(compareCoords(coord2,coord1)){matchFound=true;break}}if(!matchFound){return false}}return true}exports.isMultiPointInMultiPoint=isMultiPointInMultiPoint;function isMultiPointOnLine(lineString,multiPoint){var haveFoundInteriorPoint=false;for(var _i=0,_a=multiPoint.coordinates;_i<_a.length;_i++){var coord=_a[_i];if(boolean_point_on_line_1.default(coord,lineString,{ignoreEndVertices:true})){haveFoundInteriorPoint=true}if(!boolean_point_on_line_1.default(coord,lineString)){return false}}if(haveFoundInteriorPoint){return true}return false}exports.isMultiPointOnLine=isMultiPointOnLine;function isMultiPointInPoly(polygon,multiPoint){for(var _i=0,_a=multiPoint.coordinates;_i<_a.length;_i++){var coord=_a[_i];if(!boolean_point_in_polygon_1.default(coord,polygon,{ignoreBoundary:true})){return false}}return true}exports.isMultiPointInPoly=isMultiPointInPoly;function isLineOnLine(lineString1,lineString2){var haveFoundInteriorPoint=false;for(var _i=0,_a=lineString2.coordinates;_i<_a.length;_i++){var coords=_a[_i];if(boolean_point_on_line_1.default({type:"Point",coordinates:coords},lineString1,{ignoreEndVertices:true})){haveFoundInteriorPoint=true}if(!boolean_point_on_line_1.default({type:"Point",coordinates:coords},lineString1,{ignoreEndVertices:false})){return false}}return haveFoundInteriorPoint}exports.isLineOnLine=isLineOnLine;function isLineInPoly(polygon,linestring){var output=false;var i=0;var polyBbox=bbox_1.default(polygon);var lineBbox=bbox_1.default(linestring);if(!doBBoxOverlap(polyBbox,lineBbox)){return false}for(i;i<linestring.coordinates.length-1;i++){var midPoint=getMidpoint(linestring.coordinates[i],linestring.coordinates[i+1]);if(boolean_point_in_polygon_1.default({type:"Point",coordinates:midPoint},polygon,{ignoreBoundary:true})){output=true;break}}return output}exports.isLineInPoly=isLineInPoly;function isPolyInPoly(feature1,feature2){if(feature1.type==="Feature"&&feature1.geometry===null){return false}if(feature2.type==="Feature"&&feature2.geometry===null){return false}var poly1Bbox=bbox_1.default(feature1);var poly2Bbox=bbox_1.default(feature2);if(!doBBoxOverlap(poly1Bbox,poly2Bbox)){return false}var coords=invariant_1.getGeom(feature2).coordinates;for(var _i=0,coords_1=coords;_i<coords_1.length;_i++){var ring=coords_1[_i];for(var _a=0,ring_1=ring;_a<ring_1.length;_a++){var coord=ring_1[_a];if(!boolean_point_in_polygon_1.default(coord,feature1)){return false}}}return true}exports.isPolyInPoly=isPolyInPoly;function doBBoxOverlap(bbox1,bbox2){if(bbox1[0]>bbox2[0]){return false}if(bbox1[2]<bbox2[2]){return false}if(bbox1[1]>bbox2[1]){return false}if(bbox1[3]<bbox2[3]){return false}return true}exports.doBBoxOverlap=doBBoxOverlap;function compareCoords(pair1,pair2){return pair1[0]===pair2[0]&&pair1[1]===pair2[1]}exports.compareCoords=compareCoords;function getMidpoint(pair1,pair2){return[(pair1[0]+pair2[0])/2,(pair1[1]+pair2[1])/2]}exports.getMidpoint=getMidpoint},function(module,exports,__webpack_require__){const compare=__webpack_require__(56);const neq=(a,b,loose)=>compare(a,b,loose)!==0;module.exports=neq},function(module,exports,__webpack_require__){const eq=__webpack_require__(89);const neq=__webpack_require__(133);const gt=__webpack_require__(74);const gte=__webpack_require__(92);const lt=__webpack_require__(91);const lte=__webpack_require__(93);const cmp=(a,op,b,loose)=>{switch(op){case"===":if(typeof a==="object")a=a.version;if(typeof b==="object")b=b.version;return a===b;case"!==":if(typeof a==="object")a=a.version;if(typeof b==="object")b=b.version;return a!==b;case"":case"=":case"==":return eq(a,b,loose);case"!=":return neq(a,b,loose);case">":return gt(a,b,loose);case">=":return gte(a,b,loose);case"<":return lt(a,b,loose);case"<=":return lte(a,b,loose);default:throw new TypeError(`Invalid operator: ${op}`)}};module.exports=cmp},function(module,exports,__webpack_require__){"use strict";var getGlobal=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var global=getGlobal();module.exports=exports=global.fetch;if(global.fetch){exports.default=global.fetch.bind(global)}exports.Headers=global.Headers;exports.Request=global.Request;exports.Response=global.Response},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var helpers_1=__webpack_require__(51);var invariant_1=__webpack_require__(59);function destination(origin,distance,bearing,options){if(options===void 0){options={}}var coordinates1=invariant_1.getCoord(origin);var longitude1=helpers_1.degreesToRadians(coordinates1[0]);var latitude1=helpers_1.degreesToRadians(coordinates1[1]);var bearingRad=helpers_1.degreesToRadians(bearing);var radians=helpers_1.lengthToRadians(distance,options.units);var latitude2=Math.asin(Math.sin(latitude1)*Math.cos(radians)+Math.cos(latitude1)*Math.sin(radians)*Math.cos(bearingRad));var longitude2=longitude1+Math.atan2(Math.sin(bearingRad)*Math.sin(radians)*Math.cos(latitude1),Math.cos(radians)-Math.sin(latitude1)*Math.sin(latitude2));var lng=helpers_1.radiansToDegrees(longitude2);var lat=helpers_1.radiansToDegrees(latitude2);return helpers_1.point([lng,lat],options.properties)}exports.default=destination},function(module,exports,__webpack_require__){"use strict";var twoProduct=__webpack_require__(138);var robustSum=__webpack_require__(233);var robustScale=__webpack_require__(234);var robustSubtract=__webpack_require__(236);var NUM_EXPAND=5;var EPSILON=11102230246251565e-32;var ERRBOUND3=(3+16*EPSILON)*EPSILON;var ERRBOUND4=(7+56*EPSILON)*EPSILON;function cofactor(m,c){var result=new Array(m.length-1);for(var i=1;i<m.length;++i){var r=result[i-1]=new Array(m.length-1);for(var j=0,k=0;j<m.length;++j){if(j===c){continue}r[k++]=m[i][j]}}return result}function matrix(n){var result=new Array(n);for(var i=0;i<n;++i){result[i]=new Array(n);for(var j=0;j<n;++j){result[i][j]=["m",j,"[",n-i-1,"]"].join("")}}return result}function sign(n){if(n&1){return"-"}return""}function generateSum(expr){if(expr.length===1){return expr[0]}else if(expr.length===2){return["sum(",expr[0],",",expr[1],")"].join("")}else{var m=expr.length>>1;return["sum(",generateSum(expr.slice(0,m)),",",generateSum(expr.slice(m)),")"].join("")}}function determinant(m){if(m.length===2){return[["sum(prod(",m[0][0],",",m[1][1],"),prod(-",m[0][1],",",m[1][0],"))"].join("")]}else{var expr=[];for(var i=0;i<m.length;++i){expr.push(["scale(",generateSum(determinant(cofactor(m,i))),",",sign(i),m[0][i],")"].join(""))}return expr}}function orientation(n){var pos=[];var neg=[];var m=matrix(n);var args=[];for(var i=0;i<n;++i){if((i&1)===0){pos.push.apply(pos,determinant(cofactor(m,i)))}else{neg.push.apply(neg,determinant(cofactor(m,i)))}args.push("m"+i)}var posExpr=generateSum(pos);var negExpr=generateSum(neg);var funcName="orientation"+n+"Exact";var code=["function ",funcName,"(",args.join(),"){var p=",posExpr,",n=",negExpr,",d=sub(p,n);return d[d.length-1];};return ",funcName].join("");var proc=new Function("sum","prod","scale","sub",code);return proc(robustSum,twoProduct,robustScale,robustSubtract)}var orientation3Exact=orientation(3);var orientation4Exact=orientation(4);var CACHED=[function orientation0(){return 0},function orientation1(){return 0},function orientation2(a,b){return b[0]-a[0]},function orientation3(a,b,c){var l=(a[1]-c[1])*(b[0]-c[0]);var r=(a[0]-c[0])*(b[1]-c[1]);var det=l-r;var s;if(l>0){if(r<=0){return det}else{s=l+r}}else if(l<0){if(r>=0){return det}else{s=-(l+r)}}else{return det}var tol=ERRBOUND3*s;if(det>=tol||det<=-tol){return det}return orientation3Exact(a,b,c)},function orientation4(a,b,c,d){var adx=a[0]-d[0];var bdx=b[0]-d[0];var cdx=c[0]-d[0];var ady=a[1]-d[1];var bdy=b[1]-d[1];var cdy=c[1]-d[1];var adz=a[2]-d[2];var bdz=b[2]-d[2];var cdz=c[2]-d[2];var bdxcdy=bdx*cdy;var cdxbdy=cdx*bdy;var cdxady=cdx*ady;var adxcdy=adx*cdy;var adxbdy=adx*bdy;var bdxady=bdx*ady;var det=adz*(bdxcdy-cdxbdy)+bdz*(cdxady-adxcdy)+cdz*(adxbdy-bdxady);var permanent=(Math.abs(bdxcdy)+Math.abs(cdxbdy))*Math.abs(adz)+(Math.abs(cdxady)+Math.abs(adxcdy))*Math.abs(bdz)+(Math.abs(adxbdy)+Math.abs(bdxady))*Math.abs(cdz);var tol=ERRBOUND4*permanent;if(det>tol||-det>tol){return det}return orientation4Exact(a,b,c,d)}];function slowOrient(args){var proc=CACHED[args.length];if(!proc){proc=CACHED[args.length]=orientation(args.length)}return proc.apply(undefined,args)}function generateOrientationProc(){while(CACHED.length<=NUM_EXPAND){CACHED.push(orientation(CACHED.length))}var args=[];var procArgs=["slow"];for(var i=0;i<=NUM_EXPAND;++i){args.push("a"+i);procArgs.push("o"+i)}var code=["function getOrientation(",args.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(var i=2;i<=NUM_EXPAND;++i){code.push("case ",i,":return o",i,"(",args.slice(0,i).join(),");")}code.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");procArgs.push(code.join(""));var proc=Function.apply(undefined,procArgs);module.exports=proc.apply(undefined,[slowOrient].concat(CACHED));for(var i=0;i<=NUM_EXPAND;++i){module.exports[i]=CACHED[i]}}generateOrientationProc()},function(module,exports,__webpack_require__){"use strict";module.exports=twoProduct;var SPLITTER=+(Math.pow(2,27)+1);function twoProduct(a,b,result){var x=a*b;var c=SPLITTER*a;var abig=c-a;var ahi=c-abig;var alo=a-ahi;var d=SPLITTER*b;var bbig=d-b;var bhi=d-bbig;var blo=b-bhi;var err1=x-ahi*bhi;var err2=err1-alo*bhi;var err3=err2-ahi*blo;var y=alo*blo-err3;if(result){result[0]=y;result[1]=x;return result}return[y,x]}},function(module,exports,__webpack_require__){module.exports={layouts:{all:__webpack_require__(242)},svgArray:__webpack_require__(243),spritesheet:{1:__webpack_require__(244),2:__webpack_require__(245),4:__webpack_require__(246)}}},function(module,exports,__webpack_require__){(function(){"use strict";var builder,defaults,parser,processors,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;defaults=__webpack_require__(96);builder=__webpack_require__(247);parser=__webpack_require__(256);processors=__webpack_require__(153);exports.defaults=defaults.defaults;exports.processors=processors;exports.ValidationError=function(superClass){extend(ValidationError,superClass);function ValidationError(message){this.message=message}return ValidationError}(Error);exports.Builder=builder.Builder;exports.Parser=parser.Parser;exports.parseString=parser.parseString;exports.parseStringPromise=parser.parseStringPromise}).call(this)},function(module,exports){(function(){var XMLDOMImplementation;module.exports=XMLDOMImplementation=function(){function XMLDOMImplementation(){}XMLDOMImplementation.prototype.hasFeature=function(feature,version){return true};XMLDOMImplementation.prototype.createDocumentType=function(qualifiedName,publicId,systemId){throw new Error("This DOM method is not implemented.")};XMLDOMImplementation.prototype.createDocument=function(namespaceURI,qualifiedName,doctype){throw new Error("This DOM method is not implemented.")};XMLDOMImplementation.prototype.createHTMLDocument=function(title){throw new Error("This DOM method is not implemented.")};XMLDOMImplementation.prototype.getFeature=function(feature,version){throw new Error("This DOM method is not implemented.")};return XMLDOMImplementation}()}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLDOMConfiguration,XMLDOMImplementation,XMLDocument,XMLNode,XMLStringWriter,XMLStringifier,isPlainObject,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;isPlainObject=__webpack_require__(58).isPlainObject;XMLDOMImplementation=__webpack_require__(141);XMLDOMConfiguration=__webpack_require__(249);XMLNode=__webpack_require__(53);NodeType=__webpack_require__(49);XMLStringifier=__webpack_require__(145);XMLStringWriter=__webpack_require__(110);module.exports=XMLDocument=function(superClass){extend(XMLDocument,superClass);function XMLDocument(options){XMLDocument.__super__.constructor.call(this,null);this.name="#document";this.type=NodeType.Document;this.documentURI=null;this.domConfig=new XMLDOMConfiguration;options||(options={});if(!options.writer){options.writer=new XMLStringWriter}this.options=options;this.stringify=new XMLStringifier(options)}Object.defineProperty(XMLDocument.prototype,"implementation",{value:new XMLDOMImplementation});Object.defineProperty(XMLDocument.prototype,"doctype",{get:function(){var child,i,len,ref;ref=this.children;for(i=0,len=ref.length;i<len;i++){child=ref[i];if(child.type===NodeType.DocType){return child}}return null}});Object.defineProperty(XMLDocument.prototype,"documentElement",{get:function(){return this.rootObject||null}});Object.defineProperty(XMLDocument.prototype,"inputEncoding",{get:function(){return null}});Object.defineProperty(XMLDocument.prototype,"strictErrorChecking",{get:function(){return false}});Object.defineProperty(XMLDocument.prototype,"xmlEncoding",{get:function(){if(this.children.length!==0&&this.children[0].type===NodeType.Declaration){return this.children[0].encoding}else{return null}}});Object.defineProperty(XMLDocument.prototype,"xmlStandalone",{get:function(){if(this.children.length!==0&&this.children[0].type===NodeType.Declaration){return this.children[0].standalone==="yes"}else{return false}}});Object.defineProperty(XMLDocument.prototype,"xmlVersion",{get:function(){if(this.children.length!==0&&this.children[0].type===NodeType.Declaration){return this.children[0].version}else{return"1.0"}}});Object.defineProperty(XMLDocument.prototype,"URL",{get:function(){return this.documentURI}});Object.defineProperty(XMLDocument.prototype,"origin",{get:function(){return null}});Object.defineProperty(XMLDocument.prototype,"compatMode",{get:function(){return null}});Object.defineProperty(XMLDocument.prototype,"characterSet",{get:function(){return null}});Object.defineProperty(XMLDocument.prototype,"contentType",{get:function(){return null}});XMLDocument.prototype.end=function(writer){var writerOptions;writerOptions={};if(!writer){writer=this.options.writer}else if(isPlainObject(writer)){writerOptions=writer;writer=this.options.writer}return writer.document(this,writer.filterOptions(writerOptions))};XMLDocument.prototype.toString=function(options){return this.options.writer.document(this,this.options.writer.filterOptions(options))};XMLDocument.prototype.createElement=function(tagName){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.createTextNode=function(data){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.createComment=function(data){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.createCDATASection=function(data){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.createProcessingInstruction=function(target,data){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.createAttribute=function(name){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.createEntityReference=function(name){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.getElementsByTagName=function(tagname){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.importNode=function(importedNode,deep){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.createElementNS=function(namespaceURI,qualifiedName){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.createAttributeNS=function(namespaceURI,qualifiedName){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.getElementsByTagNameNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.getElementById=function(elementId){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.adoptNode=function(source){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.renameNode=function(node,namespaceURI,qualifiedName){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.getElementsByClassName=function(classNames){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.createEvent=function(eventInterface){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.createNodeIterator=function(root,whatToShow,filter){throw new Error("This DOM method is not implemented."+this.debugInfo())};XMLDocument.prototype.createTreeWalker=function(root,whatToShow,filter){throw new Error("This DOM method is not implemented."+this.debugInfo())};return XMLDocument}(XMLNode)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLAttribute,XMLNode;NodeType=__webpack_require__(49);XMLNode=__webpack_require__(53);module.exports=XMLAttribute=function(){function XMLAttribute(parent,name,value){this.parent=parent;if(this.parent){this.options=this.parent.options;this.stringify=this.parent.stringify}if(name==null){throw new Error("Missing attribute name. "+this.debugInfo(name))}this.name=this.stringify.name(name);this.value=this.stringify.attValue(value);this.type=NodeType.Attribute;this.isId=false;this.schemaTypeInfo=null}Object.defineProperty(XMLAttribute.prototype,"nodeType",{get:function(){return this.type}});Object.defineProperty(XMLAttribute.prototype,"ownerElement",{get:function(){return this.parent}});Object.defineProperty(XMLAttribute.prototype,"textContent",{get:function(){return this.value},set:function(value){return this.value=value||""}});Object.defineProperty(XMLAttribute.prototype,"namespaceURI",{get:function(){return""}});Object.defineProperty(XMLAttribute.prototype,"prefix",{get:function(){return""}});Object.defineProperty(XMLAttribute.prototype,"localName",{get:function(){return this.name}});Object.defineProperty(XMLAttribute.prototype,"specified",{get:function(){return true}});XMLAttribute.prototype.clone=function(){return Object.create(this)};XMLAttribute.prototype.toString=function(options){return this.options.writer.attribute(this,this.options.writer.filterOptions(options))};XMLAttribute.prototype.debugInfo=function(name){name=name||this.name;if(name==null){return"parent: <"+this.parent.name+">"}else{return"attribute: {"+name+"}, parent: <"+this.parent.name+">"}};XMLAttribute.prototype.isEqualNode=function(node){if(node.namespaceURI!==this.namespaceURI){return false}if(node.prefix!==this.prefix){return false}if(node.localName!==this.localName){return false}if(node.value!==this.value){return false}return true};return XMLAttribute}()}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLDummy,XMLNode,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;XMLNode=__webpack_require__(53);NodeType=__webpack_require__(49);module.exports=XMLDummy=function(superClass){extend(XMLDummy,superClass);function XMLDummy(parent){XMLDummy.__super__.constructor.call(this,parent);this.type=NodeType.Dummy}XMLDummy.prototype.clone=function(){return Object.create(this)};XMLDummy.prototype.toString=function(options){return""};return XMLDummy}(XMLNode)}).call(this)},function(module,exports){(function(){var XMLStringifier,bind=function(fn,me){return function(){return fn.apply(me,arguments)}},hasProp={}.hasOwnProperty;module.exports=XMLStringifier=function(){function XMLStringifier(options){this.assertLegalName=bind(this.assertLegalName,this);this.assertLegalChar=bind(this.assertLegalChar,this);var key,ref,value;options||(options={});this.options=options;if(!this.options.version){this.options.version="1.0"}ref=options.stringify||{};for(key in ref){if(!hasProp.call(ref,key))continue;value=ref[key];this[key]=value}}XMLStringifier.prototype.name=function(val){if(this.options.noValidation){return val}return this.assertLegalName(""+val||"")};XMLStringifier.prototype.text=function(val){if(this.options.noValidation){return val}return this.assertLegalChar(this.textEscape(""+val||""))};XMLStringifier.prototype.cdata=function(val){if(this.options.noValidation){return val}val=""+val||"";val=val.replace("]]>","]]]]><![CDATA[>");return this.assertLegalChar(val)};XMLStringifier.prototype.comment=function(val){if(this.options.noValidation){return val}val=""+val||"";if(val.match(/--/)){throw new Error("Comment text cannot contain double-hypen: "+val)}return this.assertLegalChar(val)};XMLStringifier.prototype.raw=function(val){if(this.options.noValidation){return val}return""+val||""};XMLStringifier.prototype.attValue=function(val){if(this.options.noValidation){return val}return this.assertLegalChar(this.attEscape(val=""+val||""))};XMLStringifier.prototype.insTarget=function(val){if(this.options.noValidation){return val}return this.assertLegalChar(""+val||"")};XMLStringifier.prototype.insValue=function(val){if(this.options.noValidation){return val}val=""+val||"";if(val.match(/\?>/)){throw new Error("Invalid processing instruction value: "+val)}return this.assertLegalChar(val)};XMLStringifier.prototype.xmlVersion=function(val){if(this.options.noValidation){return val}val=""+val||"";if(!val.match(/1\.[0-9]+/)){throw new Error("Invalid version number: "+val)}return val};XMLStringifier.prototype.xmlEncoding=function(val){if(this.options.noValidation){return val}val=""+val||"";if(!val.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/)){throw new Error("Invalid encoding: "+val)}return this.assertLegalChar(val)};XMLStringifier.prototype.xmlStandalone=function(val){if(this.options.noValidation){return val}if(val){return"yes"}else{return"no"}};XMLStringifier.prototype.dtdPubID=function(val){if(this.options.noValidation){return val}return this.assertLegalChar(""+val||"")};XMLStringifier.prototype.dtdSysID=function(val){if(this.options.noValidation){return val}return this.assertLegalChar(""+val||"")};XMLStringifier.prototype.dtdElementValue=function(val){if(this.options.noValidation){return val}return this.assertLegalChar(""+val||"")};XMLStringifier.prototype.dtdAttType=function(val){if(this.options.noValidation){return val}return this.assertLegalChar(""+val||"")};XMLStringifier.prototype.dtdAttDefault=function(val){if(this.options.noValidation){return val}return this.assertLegalChar(""+val||"")};XMLStringifier.prototype.dtdEntityValue=function(val){if(this.options.noValidation){return val}return this.assertLegalChar(""+val||"")};XMLStringifier.prototype.dtdNData=function(val){if(this.options.noValidation){return val}return this.assertLegalChar(""+val||"")};XMLStringifier.prototype.convertAttKey="@";XMLStringifier.prototype.convertPIKey="?";XMLStringifier.prototype.convertTextKey="#text";XMLStringifier.prototype.convertCDataKey="#cdata";XMLStringifier.prototype.convertCommentKey="#comment";XMLStringifier.prototype.convertRawKey="#raw";XMLStringifier.prototype.assertLegalChar=function(str){var regex,res;if(this.options.noValidation){return str}regex="";if(this.options.version==="1.0"){regex=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/;if(res=str.match(regex)){throw new Error("Invalid character in string: "+str+" at index "+res.index)}}else if(this.options.version==="1.1"){regex=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/;if(res=str.match(regex)){throw new Error("Invalid character in string: "+str+" at index "+res.index)}}return str};XMLStringifier.prototype.assertLegalName=function(str){var regex;if(this.options.noValidation){return str}this.assertLegalChar(str);regex=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/;if(!str.match(regex)){throw new Error("Invalid character in name")}return str};XMLStringifier.prototype.textEscape=function(str){var ampregex;if(this.options.noValidation){return str}ampregex=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g;return str.replace(ampregex,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")};XMLStringifier.prototype.attEscape=function(str){var ampregex;if(this.options.noValidation){return str}ampregex=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g;return str.replace(ampregex,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")};return XMLStringifier}()}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,WriterState,XMLCData,XMLComment,XMLDTDAttList,XMLDTDElement,XMLDTDEntity,XMLDTDNotation,XMLDeclaration,XMLDocType,XMLDummy,XMLElement,XMLProcessingInstruction,XMLRaw,XMLText,XMLWriterBase,assign,hasProp={}.hasOwnProperty;assign=__webpack_require__(58).assign;NodeType=__webpack_require__(49);XMLDeclaration=__webpack_require__(101);XMLDocType=__webpack_require__(102);XMLCData=__webpack_require__(99);XMLComment=__webpack_require__(100);XMLElement=__webpack_require__(97);XMLRaw=__webpack_require__(107);XMLText=__webpack_require__(108);XMLProcessingInstruction=__webpack_require__(109);XMLDummy=__webpack_require__(144);XMLDTDAttList=__webpack_require__(103);XMLDTDElement=__webpack_require__(105);XMLDTDEntity=__webpack_require__(104);XMLDTDNotation=__webpack_require__(106);WriterState=__webpack_require__(79);module.exports=XMLWriterBase=function(){function XMLWriterBase(options){var key,ref,value;options||(options={});this.options=options;ref=options.writer||{};for(key in ref){if(!hasProp.call(ref,key))continue;value=ref[key];this["_"+key]=this[key];this[key]=value}}XMLWriterBase.prototype.filterOptions=function(options){var filteredOptions,ref,ref1,ref2,ref3,ref4,ref5,ref6;options||(options={});options=assign({},this.options,options);filteredOptions={writer:this};filteredOptions.pretty=options.pretty||false;filteredOptions.allowEmpty=options.allowEmpty||false;filteredOptions.indent=(ref=options.indent)!=null?ref:"  ";filteredOptions.newline=(ref1=options.newline)!=null?ref1:"\n";filteredOptions.offset=(ref2=options.offset)!=null?ref2:0;filteredOptions.dontPrettyTextNodes=(ref3=(ref4=options.dontPrettyTextNodes)!=null?ref4:options.dontprettytextnodes)!=null?ref3:0;filteredOptions.spaceBeforeSlash=(ref5=(ref6=options.spaceBeforeSlash)!=null?ref6:options.spacebeforeslash)!=null?ref5:"";if(filteredOptions.spaceBeforeSlash===true){filteredOptions.spaceBeforeSlash=" "}filteredOptions.suppressPrettyCount=0;filteredOptions.user={};filteredOptions.state=WriterState.None;return filteredOptions};XMLWriterBase.prototype.indent=function(node,options,level){var indentLevel;if(!options.pretty||options.suppressPrettyCount){return""}else if(options.pretty){indentLevel=(level||0)+options.offset+1;if(indentLevel>0){return new Array(indentLevel).join(options.indent)}}return""};XMLWriterBase.prototype.endline=function(node,options,level){if(!options.pretty||options.suppressPrettyCount){return""}else{return options.newline}};XMLWriterBase.prototype.attribute=function(att,options,level){var r;this.openAttribute(att,options,level);r=" "+att.name+'="'+att.value+'"';this.closeAttribute(att,options,level);return r};XMLWriterBase.prototype.cdata=function(node,options,level){var r;this.openNode(node,options,level);options.state=WriterState.OpenTag;r=this.indent(node,options,level)+"<![CDATA[";options.state=WriterState.InsideTag;r+=node.value;options.state=WriterState.CloseTag;r+="]]>"+this.endline(node,options,level);options.state=WriterState.None;this.closeNode(node,options,level);return r};XMLWriterBase.prototype.comment=function(node,options,level){var r;this.openNode(node,options,level);options.state=WriterState.OpenTag;r=this.indent(node,options,level)+"\x3c!-- ";options.state=WriterState.InsideTag;r+=node.value;options.state=WriterState.CloseTag;r+=" --\x3e"+this.endline(node,options,level);options.state=WriterState.None;this.closeNode(node,options,level);return r};XMLWriterBase.prototype.declaration=function(node,options,level){var r;this.openNode(node,options,level);options.state=WriterState.OpenTag;r=this.indent(node,options,level)+"<?xml";options.state=WriterState.InsideTag;r+=' version="'+node.version+'"';if(node.encoding!=null){r+=' encoding="'+node.encoding+'"'}if(node.standalone!=null){r+=' standalone="'+node.standalone+'"'}options.state=WriterState.CloseTag;r+=options.spaceBeforeSlash+"?>";r+=this.endline(node,options,level);options.state=WriterState.None;this.closeNode(node,options,level);return r};XMLWriterBase.prototype.docType=function(node,options,level){var child,i,len,r,ref;level||(level=0);this.openNode(node,options,level);options.state=WriterState.OpenTag;r=this.indent(node,options,level);r+="<!DOCTYPE "+node.root().name;if(node.pubID&&node.sysID){r+=' PUBLIC "'+node.pubID+'" "'+node.sysID+'"'}else if(node.sysID){r+=' SYSTEM "'+node.sysID+'"'}if(node.children.length>0){r+=" [";r+=this.endline(node,options,level);options.state=WriterState.InsideTag;ref=node.children;for(i=0,len=ref.length;i<len;i++){child=ref[i];r+=this.writeChildNode(child,options,level+1)}options.state=WriterState.CloseTag;r+="]"}options.state=WriterState.CloseTag;r+=options.spaceBeforeSlash+">";r+=this.endline(node,options,level);options.state=WriterState.None;this.closeNode(node,options,level);return r};XMLWriterBase.prototype.element=function(node,options,level){var att,child,childNodeCount,firstChildNode,i,j,len,len1,name,prettySuppressed,r,ref,ref1,ref2;level||(level=0);prettySuppressed=false;r="";this.openNode(node,options,level);options.state=WriterState.OpenTag;r+=this.indent(node,options,level)+"<"+node.name;ref=node.attribs;for(name in ref){if(!hasProp.call(ref,name))continue;att=ref[name];r+=this.attribute(att,options,level)}childNodeCount=node.children.length;firstChildNode=childNodeCount===0?null:node.children[0];if(childNodeCount===0||node.children.every((function(e){return(e.type===NodeType.Text||e.type===NodeType.Raw)&&e.value===""}))){if(options.allowEmpty){r+=">";options.state=WriterState.CloseTag;r+="</"+node.name+">"+this.endline(node,options,level)}else{options.state=WriterState.CloseTag;r+=options.spaceBeforeSlash+"/>"+this.endline(node,options,level)}}else if(options.pretty&&childNodeCount===1&&(firstChildNode.type===NodeType.Text||firstChildNode.type===NodeType.Raw)&&firstChildNode.value!=null){r+=">";options.state=WriterState.InsideTag;options.suppressPrettyCount++;prettySuppressed=true;r+=this.writeChildNode(firstChildNode,options,level+1);options.suppressPrettyCount--;prettySuppressed=false;options.state=WriterState.CloseTag;r+="</"+node.name+">"+this.endline(node,options,level)}else{if(options.dontPrettyTextNodes){ref1=node.children;for(i=0,len=ref1.length;i<len;i++){child=ref1[i];if((child.type===NodeType.Text||child.type===NodeType.Raw)&&child.value!=null){options.suppressPrettyCount++;prettySuppressed=true;break}}}r+=">"+this.endline(node,options,level);options.state=WriterState.InsideTag;ref2=node.children;for(j=0,len1=ref2.length;j<len1;j++){child=ref2[j];r+=this.writeChildNode(child,options,level+1)}options.state=WriterState.CloseTag;r+=this.indent(node,options,level)+"</"+node.name+">";if(prettySuppressed){options.suppressPrettyCount--}r+=this.endline(node,options,level);options.state=WriterState.None}this.closeNode(node,options,level);return r};XMLWriterBase.prototype.writeChildNode=function(node,options,level){switch(node.type){case NodeType.CData:return this.cdata(node,options,level);case NodeType.Comment:return this.comment(node,options,level);case NodeType.Element:return this.element(node,options,level);case NodeType.Raw:return this.raw(node,options,level);case NodeType.Text:return this.text(node,options,level);case NodeType.ProcessingInstruction:return this.processingInstruction(node,options,level);case NodeType.Dummy:return"";case NodeType.Declaration:return this.declaration(node,options,level);case NodeType.DocType:return this.docType(node,options,level);case NodeType.AttributeDeclaration:return this.dtdAttList(node,options,level);case NodeType.ElementDeclaration:return this.dtdElement(node,options,level);case NodeType.EntityDeclaration:return this.dtdEntity(node,options,level);case NodeType.NotationDeclaration:return this.dtdNotation(node,options,level);default:throw new Error("Unknown XML node type: "+node.constructor.name)}};XMLWriterBase.prototype.processingInstruction=function(node,options,level){var r;this.openNode(node,options,level);options.state=WriterState.OpenTag;r=this.indent(node,options,level)+"<?";options.state=WriterState.InsideTag;r+=node.target;if(node.value){r+=" "+node.value}options.state=WriterState.CloseTag;r+=options.spaceBeforeSlash+"?>";r+=this.endline(node,options,level);options.state=WriterState.None;this.closeNode(node,options,level);return r};XMLWriterBase.prototype.raw=function(node,options,level){var r;this.openNode(node,options,level);options.state=WriterState.OpenTag;r=this.indent(node,options,level);options.state=WriterState.InsideTag;r+=node.value;options.state=WriterState.CloseTag;r+=this.endline(node,options,level);options.state=WriterState.None;this.closeNode(node,options,level);return r};XMLWriterBase.prototype.text=function(node,options,level){var r;this.openNode(node,options,level);options.state=WriterState.OpenTag;r=this.indent(node,options,level);options.state=WriterState.InsideTag;r+=node.value;options.state=WriterState.CloseTag;r+=this.endline(node,options,level);options.state=WriterState.None;this.closeNode(node,options,level);return r};XMLWriterBase.prototype.dtdAttList=function(node,options,level){var r;this.openNode(node,options,level);options.state=WriterState.OpenTag;r=this.indent(node,options,level)+"<!ATTLIST";options.state=WriterState.InsideTag;r+=" "+node.elementName+" "+node.attributeName+" "+node.attributeType;if(node.defaultValueType!=="#DEFAULT"){r+=" "+node.defaultValueType}if(node.defaultValue){r+=' "'+node.defaultValue+'"'}options.state=WriterState.CloseTag;r+=options.spaceBeforeSlash+">"+this.endline(node,options,level);options.state=WriterState.None;this.closeNode(node,options,level);return r};XMLWriterBase.prototype.dtdElement=function(node,options,level){var r;this.openNode(node,options,level);options.state=WriterState.OpenTag;r=this.indent(node,options,level)+"<!ELEMENT";options.state=WriterState.InsideTag;r+=" "+node.name+" "+node.value;options.state=WriterState.CloseTag;r+=options.spaceBeforeSlash+">"+this.endline(node,options,level);options.state=WriterState.None;this.closeNode(node,options,level);return r};XMLWriterBase.prototype.dtdEntity=function(node,options,level){var r;this.openNode(node,options,level);options.state=WriterState.OpenTag;r=this.indent(node,options,level)+"<!ENTITY";options.state=WriterState.InsideTag;if(node.pe){r+=" %"}r+=" "+node.name;if(node.value){r+=' "'+node.value+'"'}else{if(node.pubID&&node.sysID){r+=' PUBLIC "'+node.pubID+'" "'+node.sysID+'"'}else if(node.sysID){r+=' SYSTEM "'+node.sysID+'"'}if(node.nData){r+=" NDATA "+node.nData}}options.state=WriterState.CloseTag;r+=options.spaceBeforeSlash+">"+this.endline(node,options,level);options.state=WriterState.None;this.closeNode(node,options,level);return r};XMLWriterBase.prototype.dtdNotation=function(node,options,level){var r;this.openNode(node,options,level);options.state=WriterState.OpenTag;r=this.indent(node,options,level)+"<!NOTATION";options.state=WriterState.InsideTag;r+=" "+node.name;if(node.pubID&&node.sysID){r+=' PUBLIC "'+node.pubID+'" "'+node.sysID+'"'}else if(node.pubID){r+=' PUBLIC "'+node.pubID+'"'}else if(node.sysID){r+=' SYSTEM "'+node.sysID+'"'}options.state=WriterState.CloseTag;r+=options.spaceBeforeSlash+">"+this.endline(node,options,level);options.state=WriterState.None;this.closeNode(node,options,level);return r};XMLWriterBase.prototype.openNode=function(node,options,level){};XMLWriterBase.prototype.closeNode=function(node,options,level){};XMLWriterBase.prototype.openAttribute=function(att,options,level){};XMLWriterBase.prototype.closeAttribute=function(att,options,level){};return XMLWriterBase}()}).call(this)},function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return toString.call(arr)=="[object Array]"}},function(module,exports,__webpack_require__){"use strict";(function(global,process){var pna=__webpack_require__(80);module.exports=Readable;var isArray=__webpack_require__(147);var Duplex;Readable.ReadableState=ReadableState;var EE=__webpack_require__(66).EventEmitter;var EElistenerCount=function(emitter,type){return emitter.listeners(type).length};var Stream=__webpack_require__(149);var Buffer=__webpack_require__(81).Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}var util=Object.create(__webpack_require__(67));util.inherits=__webpack_require__(68);var debugUtil=__webpack_require__(262);var debug=void 0;if(debugUtil&&debugUtil.debuglog){debug=debugUtil.debuglog("stream")}else{debug=function(){}}var BufferList=__webpack_require__(263);var destroyImpl=__webpack_require__(150);var StringDecoder;util.inherits(Readable,Stream);var kProxyEvents=["error","close","destroy","pause","resume"];function prependListener(emitter,event,fn){if(typeof emitter.prependListener==="function")return emitter.prependListener(event,fn);if(!emitter._events||!emitter._events[event])emitter.on(event,fn);else if(isArray(emitter._events[event]))emitter._events[event].unshift(fn);else emitter._events[event]=[fn,emitter._events[event]]}function ReadableState(options,stream){Duplex=Duplex||__webpack_require__(62);options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.readableObjectMode;var hwm=options.highWaterMark;var readableHwm=options.readableHighWaterMark;var defaultHwm=this.objectMode?16:16*1024;if(hwm||hwm===0)this.highWaterMark=hwm;else if(isDuplex&&(readableHwm||readableHwm===0))this.highWaterMark=readableHwm;else this.highWaterMark=defaultHwm;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new BufferList;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.destroyed=false;this.defaultEncoding=options.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=__webpack_require__(114).StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding}}function Readable(options){Duplex=Duplex||__webpack_require__(62);if(!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this);this.readable=true;if(options){if(typeof options.read==="function")this._read=options.read;if(typeof options.destroy==="function")this._destroy=options.destroy}Stream.call(this)}Object.defineProperty(Readable.prototype,"destroyed",{get:function(){if(this._readableState===undefined){return false}return this._readableState.destroyed},set:function(value){if(!this._readableState){return}this._readableState.destroyed=value}});Readable.prototype.destroy=destroyImpl.destroy;Readable.prototype._undestroy=destroyImpl.undestroy;Readable.prototype._destroy=function(err,cb){this.push(null);cb(err)};Readable.prototype.push=function(chunk,encoding){var state=this._readableState;var skipChunkCheck;if(!state.objectMode){if(typeof chunk==="string"){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=Buffer.from(chunk,encoding);encoding=""}skipChunkCheck=true}}else{skipChunkCheck=true}return readableAddChunk(this,chunk,encoding,false,skipChunkCheck)};Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,true,false)};function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){var state=stream._readableState;if(chunk===null){state.reading=false;onEofChunk(stream,state)}else{var er;if(!skipChunkCheck)er=chunkInvalid(state,chunk);if(er){stream.emit("error",er)}else if(state.objectMode||chunk&&chunk.length>0){if(typeof chunk!=="string"&&!state.objectMode&&Object.getPrototypeOf(chunk)!==Buffer.prototype){chunk=_uint8ArrayToBuffer(chunk)}if(addToFront){if(state.endEmitted)stream.emit("error",new Error("stream.unshift() after end event"));else addChunk(stream,state,chunk,true)}else if(state.ended){stream.emit("error",new Error("stream.push() after EOF"))}else{state.reading=false;if(state.decoder&&!encoding){chunk=state.decoder.write(chunk);if(state.objectMode||chunk.length!==0)addChunk(stream,state,chunk,false);else maybeReadMore(stream,state)}else{addChunk(stream,state,chunk,false)}}}else if(!addToFront){state.reading=false}}return needMoreData(state)}function addChunk(stream,state,chunk,addToFront){if(state.flowing&&state.length===0&&!state.sync){stream.emit("data",chunk);stream.read(0)}else{state.length+=state.objectMode?1:chunk.length;if(addToFront)state.buffer.unshift(chunk);else state.buffer.push(chunk);if(state.needReadable)emitReadable(stream)}maybeReadMore(stream,state)}function chunkInvalid(state,chunk){var er;if(!_isUint8Array(chunk)&&typeof chunk!=="string"&&chunk!==undefined&&!state.objectMode){er=new TypeError("Invalid non-string/buffer chunk")}return er}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0)}Readable.prototype.isPaused=function(){return this._readableState.flowing===false};Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=__webpack_require__(114).StringDecoder;this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=enc;return this};var MAX_HWM=8388608;function computeNewHighWaterMark(n){if(n>=MAX_HWM){n=MAX_HWM}else{n--;n|=n>>>1;n|=n>>>2;n|=n>>>4;n|=n>>>8;n|=n>>>16;n++}return n}function howMuchToRead(n,state){if(n<=0||state.length===0&&state.ended)return 0;if(state.objectMode)return 1;if(n!==n){if(state.flowing&&state.length)return state.buffer.head.data.length;else return state.length}if(n>state.highWaterMark)state.highWaterMark=computeNewHighWaterMark(n);if(n<=state.length)return n;if(!state.ended){state.needReadable=true;return 0}return state.length}Readable.prototype.read=function(n){debug("read",n);n=parseInt(n,10);var state=this._readableState;var nOrig=n;if(n!==0)state.emittedReadable=false;if(n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended)){debug("read: emitReadable",state.length,state.ended);if(state.length===0&&state.ended)endReadable(this);else emitReadable(this);return null}n=howMuchToRead(n,state);if(n===0&&state.ended){if(state.length===0)endReadable(this);return null}var doRead=state.needReadable;debug("need readable",doRead);if(state.length===0||state.length-n<state.highWaterMark){doRead=true;debug("length less than watermark",doRead)}if(state.ended||state.reading){doRead=false;debug("reading or ended",doRead)}else if(doRead){debug("do read");state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false;if(!state.reading)n=howMuchToRead(nOrig,state)}var ret;if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=true;n=0}else{state.length-=n}if(state.length===0){if(!state.ended)state.needReadable=true;if(nOrig!==n&&state.ended)endReadable(this)}if(ret!==null)this.emit("data",ret);return ret};function onEofChunk(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length}}state.ended=true;emitReadable(stream)}function emitReadable(stream){var state=stream._readableState;state.needReadable=false;if(!state.emittedReadable){debug("emitReadable",state.flowing);state.emittedReadable=true;if(state.sync)pna.nextTick(emitReadable_,stream);else emitReadable_(stream)}}function emitReadable_(stream){debug("emit readable");stream.emit("readable");flow(stream)}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;pna.nextTick(maybeReadMore_,stream,state)}}function maybeReadMore_(stream,state){var len=state.length;while(!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark){debug("maybeReadMore read 0");stream.read(0);if(len===state.length)break;else len=state.length}state.readingMore=false}Readable.prototype._read=function(n){this.emit("error",new Error("_read() is not implemented"))};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break}state.pipesCount+=1;debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:unpipe;if(state.endEmitted)pna.nextTick(endFn);else src.once("end",endFn);dest.on("unpipe",onunpipe);function onunpipe(readable,unpipeInfo){debug("onunpipe");if(readable===src){if(unpipeInfo&&unpipeInfo.hasUnpiped===false){unpipeInfo.hasUnpiped=true;cleanup()}}}function onend(){debug("onend");dest.end()}var ondrain=pipeOnDrain(src);dest.on("drain",ondrain);var cleanedUp=false;function cleanup(){debug("cleanup");dest.removeListener("close",onclose);dest.removeListener("finish",onfinish);dest.removeListener("drain",ondrain);dest.removeListener("error",onerror);dest.removeListener("unpipe",onunpipe);src.removeListener("end",onend);src.removeListener("end",unpipe);src.removeListener("data",ondata);cleanedUp=true;if(state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain))ondrain()}var increasedAwaitDrain=false;src.on("data",ondata);function ondata(chunk){debug("ondata");increasedAwaitDrain=false;var ret=dest.write(chunk);if(false===ret&&!increasedAwaitDrain){if((state.pipesCount===1&&state.pipes===dest||state.pipesCount>1&&indexOf(state.pipes,dest)!==-1)&&!cleanedUp){debug("false write response, pause",src._readableState.awaitDrain);src._readableState.awaitDrain++;increasedAwaitDrain=true}src.pause()}}function onerror(er){debug("onerror",er);unpipe();dest.removeListener("error",onerror);if(EElistenerCount(dest,"error")===0)dest.emit("error",er)}prependListener(dest,"error",onerror);function onclose(){dest.removeListener("finish",onfinish);unpipe()}dest.once("close",onclose);function onfinish(){debug("onfinish");dest.removeListener("close",onclose);unpipe()}dest.once("finish",onfinish);function unpipe(){debug("unpipe");src.unpipe(dest)}dest.emit("pipe",src);if(!state.flowing){debug("pipe resume");src.resume()}return dest};function pipeOnDrain(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain);if(state.awaitDrain)state.awaitDrain--;if(state.awaitDrain===0&&EElistenerCount(src,"data")){state.flowing=true;flow(src)}}}Readable.prototype.unpipe=function(dest){var state=this._readableState;var unpipeInfo={hasUnpiped:false};if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;state.flowing=false;if(dest)dest.emit("unpipe",this,unpipeInfo);return this}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=false;for(var i=0;i<len;i++){dests[i].emit("unpipe",this,unpipeInfo)}return this}var index=indexOf(state.pipes,dest);if(index===-1)return this;state.pipes.splice(index,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit("unpipe",this,unpipeInfo);return this};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if(ev==="data"){if(this._readableState.flowing!==false)this.resume()}else if(ev==="readable"){var state=this._readableState;if(!state.endEmitted&&!state.readableListening){state.readableListening=state.needReadable=true;state.emittedReadable=false;if(!state.reading){pna.nextTick(nReadingNextTick,this)}else if(state.length){emitReadable(this)}}}return res};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(self){debug("readable nexttick read 0");self.read(0)}Readable.prototype.resume=function(){var state=this._readableState;if(!state.flowing){debug("resume");state.flowing=true;resume(this,state)}return this};function resume(stream,state){if(!state.resumeScheduled){state.resumeScheduled=true;pna.nextTick(resume_,stream,state)}}function resume_(stream,state){if(!state.reading){debug("resume read 0");stream.read(0)}state.resumeScheduled=false;state.awaitDrain=0;stream.emit("resume");flow(stream);if(state.flowing&&!state.reading)stream.read(0)}Readable.prototype.pause=function(){debug("call pause flowing=%j",this._readableState.flowing);if(false!==this._readableState.flowing){debug("pause");this._readableState.flowing=false;this.emit("pause")}return this};function flow(stream){var state=stream._readableState;debug("flow",state.flowing);while(state.flowing&&stream.read()!==null){}}Readable.prototype.wrap=function(stream){var _this=this;var state=this._readableState;var paused=false;stream.on("end",(function(){debug("wrapped end");if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)_this.push(chunk)}_this.push(null)}));stream.on("data",(function(chunk){debug("wrapped data");if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=_this.push(chunk);if(!ret){paused=true;stream.pause()}}));for(var i in stream){if(this[i]===undefined&&typeof stream[i]==="function"){this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i)}}for(var n=0;n<kProxyEvents.length;n++){stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]))}this._read=function(n){debug("wrapped _read",n);if(paused){paused=false;stream.resume()}};return this};Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:false,get:function(){return this._readableState.highWaterMark}});Readable._fromList=fromList;function fromList(n,state){if(state.length===0)return null;var ret;if(state.objectMode)ret=state.buffer.shift();else if(!n||n>=state.length){if(state.decoder)ret=state.buffer.join("");else if(state.buffer.length===1)ret=state.buffer.head.data;else ret=state.buffer.concat(state.length);state.buffer.clear()}else{ret=fromListPartial(n,state.buffer,state.decoder)}return ret}function fromListPartial(n,list,hasStrings){var ret;if(n<list.head.data.length){ret=list.head.data.slice(0,n);list.head.data=list.head.data.slice(n)}else if(n===list.head.data.length){ret=list.shift()}else{ret=hasStrings?copyFromBufferString(n,list):copyFromBuffer(n,list)}return ret}function copyFromBufferString(n,list){var p=list.head;var c=1;var ret=p.data;n-=ret.length;while(p=p.next){var str=p.data;var nb=n>str.length?str.length:n;if(nb===str.length)ret+=str;else ret+=str.slice(0,n);n-=nb;if(n===0){if(nb===str.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null}else{list.head=p;p.data=str.slice(nb)}break}++c}list.length-=c;return ret}function copyFromBuffer(n,list){var ret=Buffer.allocUnsafe(n);var p=list.head;var c=1;p.data.copy(ret);n-=p.data.length;while(p=p.next){var buf=p.data;var nb=n>buf.length?buf.length:n;buf.copy(ret,ret.length-n,0,nb);n-=nb;if(n===0){if(nb===buf.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null}else{list.head=p;p.data=buf.slice(nb)}break}++c}list.length-=c;return ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error('"endReadable()" called on non-empty stream');if(!state.endEmitted){state.ended=true;pna.nextTick(endReadableNT,state,stream)}}function endReadableNT(state,stream){if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit("end")}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i}return-1}}).call(this,__webpack_require__(55),__webpack_require__(60))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(66).EventEmitter},function(module,exports,__webpack_require__){"use strict";var pna=__webpack_require__(80);function destroy(err,cb){var _this=this;var readableDestroyed=this._readableState&&this._readableState.destroyed;var writableDestroyed=this._writableState&&this._writableState.destroyed;if(readableDestroyed||writableDestroyed){if(cb){cb(err)}else if(err&&(!this._writableState||!this._writableState.errorEmitted)){pna.nextTick(emitErrorNT,this,err)}return this}if(this._readableState){this._readableState.destroyed=true}if(this._writableState){this._writableState.destroyed=true}this._destroy(err||null,(function(err){if(!cb&&err){pna.nextTick(emitErrorNT,_this,err);if(_this._writableState){_this._writableState.errorEmitted=true}}else if(cb){cb(err)}}));return this}function undestroy(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finished=false;this._writableState.errorEmitted=false}}function emitErrorNT(self,err){self.emit("error",err)}module.exports={destroy:destroy,undestroy:undestroy}},function(module,exports,__webpack_require__){(function(global){var apply=Function.prototype.apply;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)};exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)};exports.clearTimeout=exports.clearInterval=function(timeout){if(timeout){timeout.close()}};function Timeout(id,clearFn){this._id=id;this._clearFn=clearFn}Timeout.prototype.unref=Timeout.prototype.ref=function(){};Timeout.prototype.close=function(){this._clearFn.call(window,this._id)};exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId);item._idleTimeout=msecs};exports.unenroll=function(item){clearTimeout(item._idleTimeoutId);item._idleTimeout=-1};exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;if(msecs>=0){item._idleTimeoutId=setTimeout((function onTimeout(){if(item._onTimeout)item._onTimeout()}),msecs)}};__webpack_require__(265);exports.setImmediate=typeof self!=="undefined"&&self.setImmediate||typeof global!=="undefined"&&global.setImmediate||this&&this.setImmediate;exports.clearImmediate=typeof self!=="undefined"&&self.clearImmediate||typeof global!=="undefined"&&global.clearImmediate||this&&this.clearImmediate}).call(this,__webpack_require__(55))},function(module,exports,__webpack_require__){"use strict";module.exports=Transform;var Duplex=__webpack_require__(62);var util=Object.create(__webpack_require__(67));util.inherits=__webpack_require__(68);util.inherits(Transform,Duplex);function afterTransform(er,data){var ts=this._transformState;ts.transforming=false;var cb=ts.writecb;if(!cb){return this.emit("error",new Error("write callback called multiple times"))}ts.writechunk=null;ts.writecb=null;if(data!=null)this.push(data);cb(er);var rs=this._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){this._read(rs.highWaterMark)}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);this._transformState={afterTransform:afterTransform.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(options){if(typeof options.transform==="function")this._transform=options.transform;if(typeof options.flush==="function")this._flush=options.flush}this.on("prefinish",prefinish)}function prefinish(){var _this=this;if(typeof this._flush==="function"){this._flush((function(er,data){done(_this,er,data)}))}else{done(this,null,null)}}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding)};Transform.prototype._transform=function(chunk,encoding,cb){throw new Error("_transform() is not implemented")};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark)}};Transform.prototype._read=function(n){var ts=this._transformState;if(ts.writechunk!==null&&ts.writecb&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)}else{ts.needTransform=true}};Transform.prototype._destroy=function(err,cb){var _this2=this;Duplex.prototype._destroy.call(this,err,(function(err2){cb(err2);_this2.emit("close")}))};function done(stream,er,data){if(er)return stream.emit("error",er);if(data!=null)stream.push(data);if(stream._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(stream._transformState.transforming)throw new Error("Calling transform done when still transforming");return stream.push(null)}},function(module,exports){(function(){"use strict";var prefixMatch;prefixMatch=new RegExp(/(?!xmlns)^.*:/);exports.normalize=function(str){return str.toLowerCase()};exports.firstCharLowerCase=function(str){return str.charAt(0).toLowerCase()+str.slice(1)};exports.stripPrefix=function(str){return str.replace(prefixMatch,"")};exports.parseNumbers=function(str){if(!isNaN(str)){str=str%1===0?parseInt(str,10):parseFloat(str)}return str};exports.parseBooleans=function(str){if(/^(?:true|false)$/i.test(str)){str=str.toLowerCase()==="true"}return str}}).call(this)},function(module,exports,__webpack_require__){"use strict";var toStr=Object.prototype.toString;module.exports=function isArguments(value){var str=toStr.call(value);var isArgs=str==="[object Arguments]";if(!isArgs){isArgs=str!=="[object Array]"&&value!==null&&typeof value==="object"&&typeof value.length==="number"&&value.length>=0&&toStr.call(value.callee)==="[object Function]"}return isArgs}},function(module,exports,__webpack_require__){"use strict";var isES5=typeof Object.defineProperty==="function"&&typeof Object.defineProperties==="function"&&typeof Object.getPrototypeOf==="function"&&typeof Object.setPrototypeOf==="function";if(!isES5){throw new TypeError("util.promisify requires a true ES5 environment")}var getOwnPropertyDescriptors=__webpack_require__(276);if(typeof Promise!=="function"){throw new TypeError("`Promise` must be globally available for util.promisify to work.")}var slice=Function.call.bind(Array.prototype.slice);var concat=Function.call.bind(Array.prototype.concat);var forEach=Function.call.bind(Array.prototype.forEach);var hasSymbols=typeof Symbol==="function"&&typeof Symbol("")==="symbol";var kCustomPromisifiedSymbol=hasSymbols?Symbol("util.promisify.custom"):null;var kCustomPromisifyArgsSymbol=hasSymbols?Symbol("customPromisifyArgs"):null;module.exports=function promisify(orig){if(typeof orig!=="function"){var error=new TypeError('The "original" argument must be of type function');error.name="TypeError [ERR_INVALID_ARG_TYPE]";error.code="ERR_INVALID_ARG_TYPE";throw error}if(hasSymbols&&orig[kCustomPromisifiedSymbol]){var customFunction=orig[kCustomPromisifiedSymbol];if(typeof customFunction!=="function"){throw new TypeError("The [util.promisify.custom] property must be a function")}Object.defineProperty(customFunction,kCustomPromisifiedSymbol,{configurable:true,enumerable:false,value:customFunction,writable:false});return customFunction}var argumentNames=orig[kCustomPromisifyArgsSymbol];var promisified=function fn(){var args=slice(arguments);var self=this;return new Promise((function(resolve,reject){orig.apply(self,concat(args,(function(err){var values=arguments.length>1?slice(arguments,1):[];if(err){reject(err)}else if(typeof argumentNames!=="undefined"&&values.length>1){var obj={};forEach(argumentNames,(function(name,index){obj[name]=values[index]}));resolve(obj)}else{resolve(values[0])}})))}))};Object.setPrototypeOf(promisified,Object.getPrototypeOf(orig));Object.defineProperty(promisified,kCustomPromisifiedSymbol,{configurable:true,enumerable:false,value:promisified,writable:false});return Object.defineProperties(promisified,getOwnPropertyDescriptors(orig))};module.exports.custom=kCustomPromisifiedSymbol;module.exports.customPromisifyArgs=kCustomPromisifyArgsSymbol},function(module,exports,__webpack_require__){"use strict";var CreateDataProperty=__webpack_require__(277);var IsCallable=__webpack_require__(161);var RequireObjectCoercible=__webpack_require__(162);var ToObject=__webpack_require__(297);var callBound=__webpack_require__(82);var $gOPD=Object.getOwnPropertyDescriptor;var $getOwnNames=Object.getOwnPropertyNames;var $getSymbols=Object.getOwnPropertySymbols;var $concat=callBound("Array.prototype.concat");var $reduce=callBound("Array.prototype.reduce");var getAll=$getSymbols?function(obj){return $concat($getOwnNames(obj),$getSymbols(obj))}:$getOwnNames;var isES5=IsCallable($gOPD)&&IsCallable($getOwnNames);module.exports=function getOwnPropertyDescriptors(value){RequireObjectCoercible(value);if(!isES5){throw new TypeError("getOwnPropertyDescriptors requires Object.getOwnPropertyDescriptor")}var O=ToObject(value);return $reduce(getAll(O),(function(acc,key){var descriptor=$gOPD(O,key);if(typeof descriptor!=="undefined"){CreateDataProperty(acc,key,descriptor)}return acc}),{})}},function(module,exports,__webpack_require__){"use strict";(function(global){var origSymbol=global.Symbol;var hasSymbolSham=__webpack_require__(278);module.exports=function hasNativeSymbols(){if(typeof origSymbol!=="function"){return false}if(typeof Symbol!=="function"){return false}if(typeof origSymbol("foo")!=="symbol"){return false}if(typeof Symbol("bar")!=="symbol"){return false}return hasSymbolSham()}}).call(this,__webpack_require__(55))},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(52);var $TypeError=GetIntrinsic("%TypeError%");var $SyntaxError=GetIntrinsic("%SyntaxError%");var has=__webpack_require__(83);var predicates={"Property Descriptor":function isPropertyDescriptor(Type,Desc){if(Type(Desc)!=="Object"){return false}var allowed={"[[Configurable]]":true,"[[Enumerable]]":true,"[[Get]]":true,"[[Set]]":true,"[[Value]]":true,"[[Writable]]":true};for(var key in Desc){if(has(Desc,key)&&!allowed[key]){return false}}var isData=has(Desc,"[[Value]]");var IsAccessor=has(Desc,"[[Get]]")||has(Desc,"[[Set]]");if(isData&&IsAccessor){throw new $TypeError("Property Descriptors may not be both accessor and data descriptors")}return true}};module.exports=function assertRecord(Type,recordType,argumentName,value){var predicate=predicates[recordType];if(typeof predicate!=="function"){throw new $SyntaxError("unknown record type: "+recordType)}if(!predicate(Type,value)){throw new $TypeError(argumentName+" must be a "+recordType)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function IsPropertyKey(argument){return typeof argument==="string"||typeof argument==="symbol"}},function(module,exports,__webpack_require__){"use strict";module.exports=function ToBoolean(value){return!!value}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(290)},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(296)},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(156);module.exports=function getPolyfill(){return typeof Object.getOwnPropertyDescriptors==="function"?Object.getOwnPropertyDescriptors:implementation}},function(module,exports,__webpack_require__){"use strict";var util=__webpack_require__(77);var implementation=__webpack_require__(155);module.exports=function getPolyfill(){if(typeof util.promisify==="function"){return util.promisify}return implementation}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var destination_1=__webpack_require__(136);var helpers_1=__webpack_require__(51);function circle(center,radius,options){if(options===void 0){options={}}var steps=options.steps||64;var properties=options.properties?options.properties:!Array.isArray(center)&&center.type==="Feature"&&center.properties?center.properties:{};var coordinates=[];for(var i=0;i<steps;i++){coordinates.push(destination_1.default(center,radius,i*-360/steps,options).geometry.coordinates)}coordinates.push(coordinates[0]);return helpers_1.polygon([coordinates],properties)}exports.default=circle},function(module,exports){},function(module,exports,__webpack_require__){(function(process){function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up--;up){parts.unshift("..")}}return parts}exports.resolve=function(){var resolvedPath="",resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if(typeof path!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!path){continue}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charAt(0)==="/"}resolvedPath=normalizeArray(filter(resolvedPath.split("/"),(function(p){return!!p})),!resolvedAbsolute).join("/");return(resolvedAbsolute?"/":"")+resolvedPath||"."};exports.normalize=function(path){var isAbsolute=exports.isAbsolute(path),trailingSlash=substr(path,-1)==="/";path=normalizeArray(filter(path.split("/"),(function(p){return!!p})),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path};exports.isAbsolute=function(path){return path.charAt(0)==="/"};exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,(function(p,index){if(typeof p!=="string"){throw new TypeError("Arguments to path.join must be strings")}return p})).join("/"))};exports.relative=function(from,to){from=exports.resolve(from).substr(1);to=exports.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!=="")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!=="")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split("/"));var toParts=trim(to.split("/"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push("..")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join("/")};exports.sep="/";exports.delimiter=":";exports.dirname=function(path){if(typeof path!=="string")path=path+"";if(path.length===0)return".";var code=path.charCodeAt(0);var hasRoot=code===47;var end=-1;var matchedSlash=true;for(var i=path.length-1;i>=1;--i){code=path.charCodeAt(i);if(code===47){if(!matchedSlash){end=i;break}}else{matchedSlash=false}}if(end===-1)return hasRoot?"/":".";if(hasRoot&&end===1){return"/"}return path.slice(0,end)};function basename(path){if(typeof path!=="string")path=path+"";var start=0;var end=-1;var matchedSlash=true;var i;for(i=path.length-1;i>=0;--i){if(path.charCodeAt(i)===47){if(!matchedSlash){start=i+1;break}}else if(end===-1){matchedSlash=false;end=i+1}}if(end===-1)return"";return path.slice(start,end)}exports.basename=function(path,ext){var f=basename(path);if(ext&&f.substr(-1*ext.length)===ext){f=f.substr(0,f.length-ext.length)}return f};exports.extname=function(path){if(typeof path!=="string")path=path+"";var startDot=-1;var startPart=0;var end=-1;var matchedSlash=true;var preDotState=0;for(var i=path.length-1;i>=0;--i){var code=path.charCodeAt(i);if(code===47){if(!matchedSlash){startPart=i+1;break}continue}if(end===-1){matchedSlash=false;end=i+1}if(code===46){if(startDot===-1)startDot=i;else if(preDotState!==1)preDotState=1}else if(startDot!==-1){preDotState=-1}}if(startDot===-1||end===-1||preDotState===0||preDotState===1&&startDot===end-1&&startDot===startPart+1){return""}return path.slice(startDot,end)};function filter(xs,f){if(xs.filter)return xs.filter(f);var res=[];for(var i=0;i<xs.length;i++){if(f(xs[i],i,xs))res.push(xs[i])}return res}var substr="ab".substr(-1)==="b"?function(str,start,len){return str.substr(start,len)}:function(str,start,len){if(start<0)start=str.length+start;return str.substr(start,len)}}).call(this,__webpack_require__(60))},function(module,exports,__webpack_require__){module.exports=minimatch;minimatch.Minimatch=Minimatch;var path={sep:"/"};try{path=__webpack_require__(167)}catch(er){}var GLOBSTAR=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={};var expand=__webpack_require__(321);var plTypes={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}};var qmark="[^/]";var star=qmark+"*?";var twoStarDot="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?";var twoStarNoDot="(?:(?!(?:\\/|^)\\.).)*?";var reSpecials=charSet("().*{}+?[]^$\\!");function charSet(s){return s.split("").reduce((function(set,c){set[c]=true;return set}),{})}var slashSplit=/\/+/;minimatch.filter=filter;function filter(pattern,options){options=options||{};return function(p,i,list){return minimatch(p,pattern,options)}}function ext(a,b){a=a||{};b=b||{};var t={};Object.keys(b).forEach((function(k){t[k]=b[k]}));Object.keys(a).forEach((function(k){t[k]=a[k]}));return t}minimatch.defaults=function(def){if(!def||!Object.keys(def).length)return minimatch;var orig=minimatch;var m=function minimatch(p,pattern,options){return orig.minimatch(p,pattern,ext(def,options))};m.Minimatch=function Minimatch(pattern,options){return new orig.Minimatch(pattern,ext(def,options))};return m};Minimatch.defaults=function(def){if(!def||!Object.keys(def).length)return Minimatch;return minimatch.defaults(def).Minimatch};function minimatch(p,pattern,options){if(typeof pattern!=="string"){throw new TypeError("glob pattern string required")}if(!options)options={};if(!options.nocomment&&pattern.charAt(0)==="#"){return false}if(pattern.trim()==="")return p==="";return new Minimatch(pattern,options).match(p)}function Minimatch(pattern,options){if(!(this instanceof Minimatch)){return new Minimatch(pattern,options)}if(typeof pattern!=="string"){throw new TypeError("glob pattern string required")}if(!options)options={};pattern=pattern.trim();if(path.sep!=="/"){pattern=pattern.split(path.sep).join("/")}this.options=options;this.set=[];this.pattern=pattern;this.regexp=null;this.negate=false;this.comment=false;this.empty=false;this.make()}Minimatch.prototype.debug=function(){};Minimatch.prototype.make=make;function make(){if(this._made)return;var pattern=this.pattern;var options=this.options;if(!options.nocomment&&pattern.charAt(0)==="#"){this.comment=true;return}if(!pattern){this.empty=true;return}this.parseNegate();var set=this.globSet=this.braceExpand();if(options.debug)this.debug=console.error;this.debug(this.pattern,set);set=this.globParts=set.map((function(s){return s.split(slashSplit)}));this.debug(this.pattern,set);set=set.map((function(s,si,set){return s.map(this.parse,this)}),this);this.debug(this.pattern,set);set=set.filter((function(s){return s.indexOf(false)===-1}));this.debug(this.pattern,set);this.set=set}Minimatch.prototype.parseNegate=parseNegate;function parseNegate(){var pattern=this.pattern;var negate=false;var options=this.options;var negateOffset=0;if(options.nonegate)return;for(var i=0,l=pattern.length;i<l&&pattern.charAt(i)==="!";i++){negate=!negate;negateOffset++}if(negateOffset)this.pattern=pattern.substr(negateOffset);this.negate=negate}minimatch.braceExpand=function(pattern,options){return braceExpand(pattern,options)};Minimatch.prototype.braceExpand=braceExpand;function braceExpand(pattern,options){if(!options){if(this instanceof Minimatch){options=this.options}else{options={}}}pattern=typeof pattern==="undefined"?this.pattern:pattern;if(typeof pattern==="undefined"){throw new TypeError("undefined pattern")}if(options.nobrace||!pattern.match(/\{.*\}/)){return[pattern]}return expand(pattern)}Minimatch.prototype.parse=parse;var SUBPARSE={};function parse(pattern,isSub){if(pattern.length>1024*64){throw new TypeError("pattern is too long")}var options=this.options;if(!options.noglobstar&&pattern==="**")return GLOBSTAR;if(pattern==="")return"";var re="";var hasMagic=!!options.nocase;var escaping=false;var patternListStack=[];var negativeLists=[];var stateChar;var inClass=false;var reClassStart=-1;var classStart=-1;var patternStart=pattern.charAt(0)==="."?"":options.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)";var self=this;function clearStateChar(){if(stateChar){switch(stateChar){case"*":re+=star;hasMagic=true;break;case"?":re+=qmark;hasMagic=true;break;default:re+="\\"+stateChar;break}self.debug("clearStateChar %j %j",stateChar,re);stateChar=false}}for(var i=0,len=pattern.length,c;i<len&&(c=pattern.charAt(i));i++){this.debug("%s\t%s %s %j",pattern,i,re,c);if(escaping&&reSpecials[c]){re+="\\"+c;escaping=false;continue}switch(c){case"/":return false;case"\\":clearStateChar();escaping=true;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s\t%s %s %j <-- stateChar",pattern,i,re,c);if(inClass){this.debug("  in class");if(c==="!"&&i===classStart+1)c="^";re+=c;continue}self.debug("call clearStateChar %j",stateChar);clearStateChar();stateChar=c;if(options.noext)clearStateChar();continue;case"(":if(inClass){re+="(";continue}if(!stateChar){re+="\\(";continue}patternListStack.push({type:stateChar,start:i-1,reStart:re.length,open:plTypes[stateChar].open,close:plTypes[stateChar].close});re+=stateChar==="!"?"(?:(?!(?:":"(?:";this.debug("plType %j %j",stateChar,re);stateChar=false;continue;case")":if(inClass||!patternListStack.length){re+="\\)";continue}clearStateChar();hasMagic=true;var pl=patternListStack.pop();re+=pl.close;if(pl.type==="!"){negativeLists.push(pl)}pl.reEnd=re.length;continue;case"|":if(inClass||!patternListStack.length||escaping){re+="\\|";escaping=false;continue}clearStateChar();re+="|";continue;case"[":clearStateChar();if(inClass){re+="\\"+c;continue}inClass=true;classStart=i;reClassStart=re.length;re+=c;continue;case"]":if(i===classStart+1||!inClass){re+="\\"+c;escaping=false;continue}if(inClass){var cs=pattern.substring(classStart+1,i);try{RegExp("["+cs+"]")}catch(er){var sp=this.parse(cs,SUBPARSE);re=re.substr(0,reClassStart)+"\\["+sp[0]+"\\]";hasMagic=hasMagic||sp[1];inClass=false;continue}}hasMagic=true;inClass=false;re+=c;continue;default:clearStateChar();if(escaping){escaping=false}else if(reSpecials[c]&&!(c==="^"&&inClass)){re+="\\"}re+=c}}if(inClass){cs=pattern.substr(classStart+1);sp=this.parse(cs,SUBPARSE);re=re.substr(0,reClassStart)+"\\["+sp[0];hasMagic=hasMagic||sp[1]}for(pl=patternListStack.pop();pl;pl=patternListStack.pop()){var tail=re.slice(pl.reStart+pl.open.length);this.debug("setting tail",re,pl);tail=tail.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(_,$1,$2){if(!$2){$2="\\"}return $1+$1+$2+"|"}));this.debug("tail=%j\n   %s",tail,tail,pl,re);var t=pl.type==="*"?star:pl.type==="?"?qmark:"\\"+pl.type;hasMagic=true;re=re.slice(0,pl.reStart)+t+"\\("+tail}clearStateChar();if(escaping){re+="\\\\"}var addPatternStart=false;switch(re.charAt(0)){case".":case"[":case"(":addPatternStart=true}for(var n=negativeLists.length-1;n>-1;n--){var nl=negativeLists[n];var nlBefore=re.slice(0,nl.reStart);var nlFirst=re.slice(nl.reStart,nl.reEnd-8);var nlLast=re.slice(nl.reEnd-8,nl.reEnd);var nlAfter=re.slice(nl.reEnd);nlLast+=nlAfter;var openParensBefore=nlBefore.split("(").length-1;var cleanAfter=nlAfter;for(i=0;i<openParensBefore;i++){cleanAfter=cleanAfter.replace(/\)[+*?]?/,"")}nlAfter=cleanAfter;var dollar="";if(nlAfter===""&&isSub!==SUBPARSE){dollar="$"}var newRe=nlBefore+nlFirst+nlAfter+dollar+nlLast;re=newRe}if(re!==""&&hasMagic){re="(?=.)"+re}if(addPatternStart){re=patternStart+re}if(isSub===SUBPARSE){return[re,hasMagic]}if(!hasMagic){return globUnescape(pattern)}var flags=options.nocase?"i":"";try{var regExp=new RegExp("^"+re+"$",flags)}catch(er){return new RegExp("$.")}regExp._glob=pattern;regExp._src=re;return regExp}minimatch.makeRe=function(pattern,options){return new Minimatch(pattern,options||{}).makeRe()};Minimatch.prototype.makeRe=makeRe;function makeRe(){if(this.regexp||this.regexp===false)return this.regexp;var set=this.set;if(!set.length){this.regexp=false;return this.regexp}var options=this.options;var twoStar=options.noglobstar?star:options.dot?twoStarDot:twoStarNoDot;var flags=options.nocase?"i":"";var re=set.map((function(pattern){return pattern.map((function(p){return p===GLOBSTAR?twoStar:typeof p==="string"?regExpEscape(p):p._src})).join("\\/")})).join("|");re="^(?:"+re+")$";if(this.negate)re="^(?!"+re+").*$";try{this.regexp=new RegExp(re,flags)}catch(ex){this.regexp=false}return this.regexp}minimatch.match=function(list,pattern,options){options=options||{};var mm=new Minimatch(pattern,options);list=list.filter((function(f){return mm.match(f)}));if(mm.options.nonull&&!list.length){list.push(pattern)}return list};Minimatch.prototype.match=match;function match(f,partial){this.debug("match",f,this.pattern);if(this.comment)return false;if(this.empty)return f==="";if(f==="/"&&partial)return true;var options=this.options;if(path.sep!=="/"){f=f.split(path.sep).join("/")}f=f.split(slashSplit);this.debug(this.pattern,"split",f);var set=this.set;this.debug(this.pattern,"set",set);var filename;var i;for(i=f.length-1;i>=0;i--){filename=f[i];if(filename)break}for(i=0;i<set.length;i++){var pattern=set[i];var file=f;if(options.matchBase&&pattern.length===1){file=[filename]}var hit=this.matchOne(file,pattern,partial);if(hit){if(options.flipNegate)return true;return!this.negate}}if(options.flipNegate)return false;return this.negate}Minimatch.prototype.matchOne=function(file,pattern,partial){var options=this.options;this.debug("matchOne",{this:this,file:file,pattern:pattern});this.debug("matchOne",file.length,pattern.length);for(var fi=0,pi=0,fl=file.length,pl=pattern.length;fi<fl&&pi<pl;fi++,pi++){this.debug("matchOne loop");var p=pattern[pi];var f=file[fi];this.debug(pattern,p,f);if(p===false)return false;if(p===GLOBSTAR){this.debug("GLOBSTAR",[pattern,p,f]);var fr=fi;var pr=pi+1;if(pr===pl){this.debug("** at the end");for(;fi<fl;fi++){if(file[fi]==="."||file[fi]===".."||!options.dot&&file[fi].charAt(0)===".")return false}return true}while(fr<fl){var swallowee=file[fr];this.debug("\nglobstar while",file,fr,pattern,pr,swallowee);if(this.matchOne(file.slice(fr),pattern.slice(pr),partial)){this.debug("globstar found match!",fr,fl,swallowee);return true}else{if(swallowee==="."||swallowee===".."||!options.dot&&swallowee.charAt(0)==="."){this.debug("dot detected!",file,fr,pattern,pr);break}this.debug("globstar swallow a segment, and continue");fr++}}if(partial){this.debug("\n>>> no match, partial?",file,fr,pattern,pr);if(fr===fl)return true}return false}var hit;if(typeof p==="string"){if(options.nocase){hit=f.toLowerCase()===p.toLowerCase()}else{hit=f===p}this.debug("string match",p,f,hit)}else{hit=f.match(p);this.debug("pattern match",p,f,hit)}if(!hit)return false}if(fi===fl&&pi===pl){return true}else if(fi===fl){return partial}else if(pi===pl){var emptyFileEnd=fi===fl-1&&file[fi]==="";return emptyFileEnd}throw new Error("wtf?")};function globUnescape(s){return s.replace(/\\(.)/g,"$1")}function regExpEscape(s){return s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(324);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(54);var _interopRequireWildcard=__webpack_require__(118);exports.__esModule=true;exports["default"]=void 0;var _react=_interopRequireWildcard(__webpack_require__(2));var _propTypes=_interopRequireDefault(__webpack_require__(172));var _Context=__webpack_require__(61);var _Subscription=_interopRequireDefault(__webpack_require__(84));function Provider(_ref){var store=_ref.store,context=_ref.context,children=_ref.children;var contextValue=(0,_react.useMemo)((function(){var subscription=new _Subscription["default"](store);subscription.onStateChange=subscription.notifyNestedSubs;return{store:store,subscription:subscription}}),[store]);var previousState=(0,_react.useMemo)((function(){return store.getState()}),[store]);(0,_react.useEffect)((function(){var subscription=contextValue.subscription;subscription.trySubscribe();if(previousState!==store.getState()){subscription.notifyNestedSubs()}return function(){subscription.tryUnsubscribe();subscription.onStateChange=null}}),[contextValue,previousState]);var Context=context||_Context.ReactReduxContext;return _react["default"].createElement(Context.Provider,{value:contextValue},children)}if(false){}var _default=Provider;exports["default"]=_default},function(module,exports){function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){module.exports=_typeof=function _typeof(obj){return typeof obj}}else{module.exports=_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}module.exports=_typeof},function(module,exports,__webpack_require__){if(false){var throwOnDirectAccess,ReactIs}else{module.exports=__webpack_require__(173)()}},function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret=__webpack_require__(174);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret===ReactPropTypesSecret){return}var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. "+"Use PropTypes.checkPropTypes() to call them. "+"Read more at http://fb.me/use-check-prop-types");err.name="Invariant Violation";throw err}shim.isRequired=shim;function getShim(){return shim}var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes}},function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret},function(module,exports,__webpack_require__){"use strict";var reactIs=__webpack_require__(121);var REACT_STATICS={childContextTypes:true,contextType:true,contextTypes:true,defaultProps:true,displayName:true,getDefaultProps:true,getDerivedStateFromError:true,getDerivedStateFromProps:true,mixins:true,propTypes:true,type:true};var KNOWN_STATICS={name:true,length:true,prototype:true,caller:true,callee:true,arguments:true,arity:true};var FORWARD_REF_STATICS={$$typeof:true,render:true,defaultProps:true,displayName:true,propTypes:true};var MEMO_STATICS={$$typeof:true,compare:true,defaultProps:true,displayName:true,propTypes:true,type:true};var TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;function getStatics(component){if(reactIs.isMemo(component)){return MEMO_STATICS}return TYPE_STATICS[component["$$typeof"]]||REACT_STATICS}var defineProperty=Object.defineProperty;var getOwnPropertyNames=Object.getOwnPropertyNames;var getOwnPropertySymbols=Object.getOwnPropertySymbols;var getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;var getPrototypeOf=Object.getPrototypeOf;var objectPrototype=Object.prototype;function hoistNonReactStatics(targetComponent,sourceComponent,blacklist){if(typeof sourceComponent!=="string"){if(objectPrototype){var inheritedComponent=getPrototypeOf(sourceComponent);if(inheritedComponent&&inheritedComponent!==objectPrototype){hoistNonReactStatics(targetComponent,inheritedComponent,blacklist)}}var keys=getOwnPropertyNames(sourceComponent);if(getOwnPropertySymbols){keys=keys.concat(getOwnPropertySymbols(sourceComponent))}var targetStatics=getStatics(targetComponent);var sourceStatics=getStatics(sourceComponent);for(var i=0;i<keys.length;++i){var key=keys[i];if(!KNOWN_STATICS[key]&&!(blacklist&&blacklist[key])&&!(sourceStatics&&sourceStatics[key])&&!(targetStatics&&targetStatics[key])){var descriptor=getOwnPropertyDescriptor(sourceComponent,key);try{defineProperty(targetComponent,key,descriptor)}catch(e){}}}}return targetComponent}module.exports=hoistNonReactStatics},function(module,exports,__webpack_require__){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b="function"===typeof Symbol&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m=b?Symbol.for("react.concurrent_mode"):60111,n=b?Symbol.for("react.forward_ref"):60112,p=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.suspense_list"):60120,r=b?Symbol.for("react.memo"):60115,t=b?Symbol.for("react.lazy"):60116,v=b?Symbol.for("react.block"):60121,w=b?Symbol.for("react.fundamental"):60117,x=b?Symbol.for("react.responder"):60118,y=b?Symbol.for("react.scope"):60119;function z(a){if("object"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;exports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return"object"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};exports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};exports.isValidElementType=function(a){return"string"===typeof a||"function"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||"object"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(54);exports.__esModule=true;exports.createConnect=createConnect;exports["default"]=void 0;var _extends2=_interopRequireDefault(__webpack_require__(85));var _objectWithoutPropertiesLoose2=_interopRequireDefault(__webpack_require__(86));var _connectAdvanced=_interopRequireDefault(__webpack_require__(120));var _shallowEqual=_interopRequireDefault(__webpack_require__(123));var _mapDispatchToProps=_interopRequireDefault(__webpack_require__(178));var _mapStateToProps=_interopRequireDefault(__webpack_require__(182));var _mergeProps=_interopRequireDefault(__webpack_require__(183));var _selectorFactory=_interopRequireDefault(__webpack_require__(184));function match(arg,factories,name){for(var i=factories.length-1;i>=0;i--){var result=factories[i](arg);if(result)return result}return function(dispatch,options){throw new Error("Invalid value of type "+typeof arg+" for "+name+" argument when connecting component "+options.wrappedComponentName+".")}}function strictEqual(a,b){return a===b}function createConnect(_temp){var _ref=_temp===void 0?{}:_temp,_ref$connectHOC=_ref.connectHOC,connectHOC=_ref$connectHOC===void 0?_connectAdvanced["default"]:_ref$connectHOC,_ref$mapStateToPropsF=_ref.mapStateToPropsFactories,mapStateToPropsFactories=_ref$mapStateToPropsF===void 0?_mapStateToProps["default"]:_ref$mapStateToPropsF,_ref$mapDispatchToPro=_ref.mapDispatchToPropsFactories,mapDispatchToPropsFactories=_ref$mapDispatchToPro===void 0?_mapDispatchToProps["default"]:_ref$mapDispatchToPro,_ref$mergePropsFactor=_ref.mergePropsFactories,mergePropsFactories=_ref$mergePropsFactor===void 0?_mergeProps["default"]:_ref$mergePropsFactor,_ref$selectorFactory=_ref.selectorFactory,selectorFactory=_ref$selectorFactory===void 0?_selectorFactory["default"]:_ref$selectorFactory;return function connect(mapStateToProps,mapDispatchToProps,mergeProps,_ref2){if(_ref2===void 0){_ref2={}}var _ref3=_ref2,_ref3$pure=_ref3.pure,pure=_ref3$pure===void 0?true:_ref3$pure,_ref3$areStatesEqual=_ref3.areStatesEqual,areStatesEqual=_ref3$areStatesEqual===void 0?strictEqual:_ref3$areStatesEqual,_ref3$areOwnPropsEqua=_ref3.areOwnPropsEqual,areOwnPropsEqual=_ref3$areOwnPropsEqua===void 0?_shallowEqual["default"]:_ref3$areOwnPropsEqua,_ref3$areStatePropsEq=_ref3.areStatePropsEqual,areStatePropsEqual=_ref3$areStatePropsEq===void 0?_shallowEqual["default"]:_ref3$areStatePropsEq,_ref3$areMergedPropsE=_ref3.areMergedPropsEqual,areMergedPropsEqual=_ref3$areMergedPropsE===void 0?_shallowEqual["default"]:_ref3$areMergedPropsE,extraOptions=(0,_objectWithoutPropertiesLoose2["default"])(_ref3,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]);var initMapStateToProps=match(mapStateToProps,mapStateToPropsFactories,"mapStateToProps");var initMapDispatchToProps=match(mapDispatchToProps,mapDispatchToPropsFactories,"mapDispatchToProps");var initMergeProps=match(mergeProps,mergePropsFactories,"mergeProps");return connectHOC(selectorFactory,(0,_extends2["default"])({methodName:"connect",getDisplayName:function getDisplayName(name){return"Connect("+name+")"},shouldHandleStateChanges:Boolean(mapStateToProps),initMapStateToProps:initMapStateToProps,initMapDispatchToProps:initMapDispatchToProps,initMergeProps:initMergeProps,pure:pure,areStatesEqual:areStatesEqual,areOwnPropsEqual:areOwnPropsEqual,areStatePropsEqual:areStatePropsEqual,areMergedPropsEqual:areMergedPropsEqual},extraOptions))}}var _default=createConnect();exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.whenMapDispatchToPropsIsFunction=whenMapDispatchToPropsIsFunction;exports.whenMapDispatchToPropsIsMissing=whenMapDispatchToPropsIsMissing;exports.whenMapDispatchToPropsIsObject=whenMapDispatchToPropsIsObject;exports["default"]=void 0;var _redux=__webpack_require__(124);var _wrapMapToProps=__webpack_require__(126);function whenMapDispatchToPropsIsFunction(mapDispatchToProps){return typeof mapDispatchToProps==="function"?(0,_wrapMapToProps.wrapMapToPropsFunc)(mapDispatchToProps,"mapDispatchToProps"):undefined}function whenMapDispatchToPropsIsMissing(mapDispatchToProps){return!mapDispatchToProps?(0,_wrapMapToProps.wrapMapToPropsConstant)((function(dispatch){return{dispatch:dispatch}})):undefined}function whenMapDispatchToPropsIsObject(mapDispatchToProps){return mapDispatchToProps&&typeof mapDispatchToProps==="object"?(0,_wrapMapToProps.wrapMapToPropsConstant)((function(dispatch){return(0,_redux.bindActionCreators)(mapDispatchToProps,dispatch)})):undefined}var _default=[whenMapDispatchToPropsIsFunction,whenMapDispatchToPropsIsMissing,whenMapDispatchToPropsIsObject];exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";(function(global,module){Object.defineProperty(exports,"__esModule",{value:true});var _ponyfill=__webpack_require__(180);var _ponyfill2=_interopRequireDefault(_ponyfill);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var root;if(typeof self!=="undefined"){root=self}else if(typeof window!=="undefined"){root=window}else if(typeof global!=="undefined"){root=global}else if(true){root=module}else{}var result=(0,_ponyfill2["default"])(root);exports["default"]=result}).call(this,__webpack_require__(55),__webpack_require__(125)(module))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=symbolObservablePonyfill;function symbolObservablePonyfill(root){var result;var _Symbol=root.Symbol;if(typeof _Symbol==="function"){if(_Symbol.observable){result=_Symbol.observable}else{result=_Symbol("observable");_Symbol.observable=result}}else{result="@@observable"}return result}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports["default"]=isPlainObject;function isPlainObject(obj){if(typeof obj!=="object"||obj===null)return false;var proto=Object.getPrototypeOf(obj);if(proto===null)return true;var baseProto=proto;while(Object.getPrototypeOf(baseProto)!==null){baseProto=Object.getPrototypeOf(baseProto)}return proto===baseProto}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.whenMapStateToPropsIsFunction=whenMapStateToPropsIsFunction;exports.whenMapStateToPropsIsMissing=whenMapStateToPropsIsMissing;exports["default"]=void 0;var _wrapMapToProps=__webpack_require__(126);function whenMapStateToPropsIsFunction(mapStateToProps){return typeof mapStateToProps==="function"?(0,_wrapMapToProps.wrapMapToPropsFunc)(mapStateToProps,"mapStateToProps"):undefined}function whenMapStateToPropsIsMissing(mapStateToProps){return!mapStateToProps?(0,_wrapMapToProps.wrapMapToPropsConstant)((function(){return{}})):undefined}var _default=[whenMapStateToPropsIsFunction,whenMapStateToPropsIsMissing];exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(54);exports.__esModule=true;exports.defaultMergeProps=defaultMergeProps;exports.wrapMergePropsFunc=wrapMergePropsFunc;exports.whenMergePropsIsFunction=whenMergePropsIsFunction;exports.whenMergePropsIsOmitted=whenMergePropsIsOmitted;exports["default"]=void 0;var _extends2=_interopRequireDefault(__webpack_require__(85));var _verifyPlainObject=_interopRequireDefault(__webpack_require__(127));function defaultMergeProps(stateProps,dispatchProps,ownProps){return(0,_extends2["default"])({},ownProps,{},stateProps,{},dispatchProps)}function wrapMergePropsFunc(mergeProps){return function initMergePropsProxy(dispatch,_ref){var displayName=_ref.displayName,pure=_ref.pure,areMergedPropsEqual=_ref.areMergedPropsEqual;var hasRunOnce=false;var mergedProps;return function mergePropsProxy(stateProps,dispatchProps,ownProps){var nextMergedProps=mergeProps(stateProps,dispatchProps,ownProps);if(hasRunOnce){if(!pure||!areMergedPropsEqual(nextMergedProps,mergedProps))mergedProps=nextMergedProps}else{hasRunOnce=true;mergedProps=nextMergedProps;if(false){}}return mergedProps}}}function whenMergePropsIsFunction(mergeProps){return typeof mergeProps==="function"?wrapMergePropsFunc(mergeProps):undefined}function whenMergePropsIsOmitted(mergeProps){return!mergeProps?function(){return defaultMergeProps}:undefined}var _default=[whenMergePropsIsFunction,whenMergePropsIsOmitted];exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(54);exports.__esModule=true;exports.impureFinalPropsSelectorFactory=impureFinalPropsSelectorFactory;exports.pureFinalPropsSelectorFactory=pureFinalPropsSelectorFactory;exports["default"]=finalPropsSelectorFactory;var _objectWithoutPropertiesLoose2=_interopRequireDefault(__webpack_require__(86));var _verifySubselectors=_interopRequireDefault(__webpack_require__(185));function impureFinalPropsSelectorFactory(mapStateToProps,mapDispatchToProps,mergeProps,dispatch){return function impureFinalPropsSelector(state,ownProps){return mergeProps(mapStateToProps(state,ownProps),mapDispatchToProps(dispatch,ownProps),ownProps)}}function pureFinalPropsSelectorFactory(mapStateToProps,mapDispatchToProps,mergeProps,dispatch,_ref){var areStatesEqual=_ref.areStatesEqual,areOwnPropsEqual=_ref.areOwnPropsEqual,areStatePropsEqual=_ref.areStatePropsEqual;var hasRunAtLeastOnce=false;var state;var ownProps;var stateProps;var dispatchProps;var mergedProps;function handleFirstCall(firstState,firstOwnProps){state=firstState;ownProps=firstOwnProps;stateProps=mapStateToProps(state,ownProps);dispatchProps=mapDispatchToProps(dispatch,ownProps);mergedProps=mergeProps(stateProps,dispatchProps,ownProps);hasRunAtLeastOnce=true;return mergedProps}function handleNewPropsAndNewState(){stateProps=mapStateToProps(state,ownProps);if(mapDispatchToProps.dependsOnOwnProps)dispatchProps=mapDispatchToProps(dispatch,ownProps);mergedProps=mergeProps(stateProps,dispatchProps,ownProps);return mergedProps}function handleNewProps(){if(mapStateToProps.dependsOnOwnProps)stateProps=mapStateToProps(state,ownProps);if(mapDispatchToProps.dependsOnOwnProps)dispatchProps=mapDispatchToProps(dispatch,ownProps);mergedProps=mergeProps(stateProps,dispatchProps,ownProps);return mergedProps}function handleNewState(){var nextStateProps=mapStateToProps(state,ownProps);var statePropsChanged=!areStatePropsEqual(nextStateProps,stateProps);stateProps=nextStateProps;if(statePropsChanged)mergedProps=mergeProps(stateProps,dispatchProps,ownProps);return mergedProps}function handleSubsequentCalls(nextState,nextOwnProps){var propsChanged=!areOwnPropsEqual(nextOwnProps,ownProps);var stateChanged=!areStatesEqual(nextState,state);state=nextState;ownProps=nextOwnProps;if(propsChanged&&stateChanged)return handleNewPropsAndNewState();if(propsChanged)return handleNewProps();if(stateChanged)return handleNewState();return mergedProps}return function pureFinalPropsSelector(nextState,nextOwnProps){return hasRunAtLeastOnce?handleSubsequentCalls(nextState,nextOwnProps):handleFirstCall(nextState,nextOwnProps)}}function finalPropsSelectorFactory(dispatch,_ref2){var initMapStateToProps=_ref2.initMapStateToProps,initMapDispatchToProps=_ref2.initMapDispatchToProps,initMergeProps=_ref2.initMergeProps,options=(0,_objectWithoutPropertiesLoose2["default"])(_ref2,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]);var mapStateToProps=initMapStateToProps(dispatch,options);var mapDispatchToProps=initMapDispatchToProps(dispatch,options);var mergeProps=initMergeProps(dispatch,options);if(false){}var selectorFactory=options.pure?pureFinalPropsSelectorFactory:impureFinalPropsSelectorFactory;return selectorFactory(mapStateToProps,mapDispatchToProps,mergeProps,dispatch,options)}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(54);exports.__esModule=true;exports["default"]=verifySubselectors;var _warning=_interopRequireDefault(__webpack_require__(128));function verify(selector,methodName,displayName){if(!selector){throw new Error("Unexpected value for "+methodName+" in "+displayName+".")}else if(methodName==="mapStateToProps"||methodName==="mapDispatchToProps"){if(!Object.prototype.hasOwnProperty.call(selector,"dependsOnOwnProps")){(0,_warning["default"])("The selector for "+methodName+" of "+displayName+" did not specify a value for dependsOnOwnProps.")}}}function verifySubselectors(mapStateToProps,mapDispatchToProps,mergeProps,displayName){verify(mapStateToProps,"mapStateToProps",displayName);verify(mapDispatchToProps,"mapDispatchToProps",displayName);verify(mergeProps,"mergeProps",displayName)}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.createDispatchHook=createDispatchHook;exports.useDispatch=void 0;var _Context=__webpack_require__(61);var _useStore=__webpack_require__(129);function createDispatchHook(context){if(context===void 0){context=_Context.ReactReduxContext}var useStore=context===_Context.ReactReduxContext?_useStore.useStore:(0,_useStore.createStoreHook)(context);return function useDispatch(){var store=useStore();return store.dispatch}}var useDispatch=createDispatchHook();exports.useDispatch=useDispatch},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(54);exports.__esModule=true;exports.createSelectorHook=createSelectorHook;exports.useSelector=void 0;var _react=__webpack_require__(2);var _useReduxContext2=__webpack_require__(130);var _Subscription=_interopRequireDefault(__webpack_require__(84));var _useIsomorphicLayoutEffect=__webpack_require__(122);var _Context=__webpack_require__(61);var refEquality=function refEquality(a,b){return a===b};function useSelectorWithStoreAndSubscription(selector,equalityFn,store,contextSub){var _useReducer=(0,_react.useReducer)((function(s){return s+1}),0),forceRender=_useReducer[1];var subscription=(0,_react.useMemo)((function(){return new _Subscription["default"](store,contextSub)}),[store,contextSub]);var latestSubscriptionCallbackError=(0,_react.useRef)();var latestSelector=(0,_react.useRef)();var latestSelectedState=(0,_react.useRef)();var selectedState;try{if(selector!==latestSelector.current||latestSubscriptionCallbackError.current){selectedState=selector(store.getState())}else{selectedState=latestSelectedState.current}}catch(err){if(latestSubscriptionCallbackError.current){err.message+="\nThe error may be correlated with this previous error:\n"+latestSubscriptionCallbackError.current.stack+"\n\n"}throw err}(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)((function(){latestSelector.current=selector;latestSelectedState.current=selectedState;latestSubscriptionCallbackError.current=undefined}));(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)((function(){function checkForUpdates(){try{var newSelectedState=latestSelector.current(store.getState());if(equalityFn(newSelectedState,latestSelectedState.current)){return}latestSelectedState.current=newSelectedState}catch(err){latestSubscriptionCallbackError.current=err}forceRender({})}subscription.onStateChange=checkForUpdates;subscription.trySubscribe();checkForUpdates();return function(){return subscription.tryUnsubscribe()}}),[store,subscription]);return selectedState}function createSelectorHook(context){if(context===void 0){context=_Context.ReactReduxContext}var useReduxContext=context===_Context.ReactReduxContext?_useReduxContext2.useReduxContext:function(){return(0,_react.useContext)(context)};return function useSelector(selector,equalityFn){if(equalityFn===void 0){equalityFn=refEquality}if(false){}var _useReduxContext=useReduxContext(),store=_useReduxContext.store,contextSub=_useReduxContext.subscription;return useSelectorWithStoreAndSubscription(selector,equalityFn,store,contextSub)}}var useSelector=createSelectorHook();exports.useSelector=useSelector},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.unstable_batchedUpdates=void 0;var _reactDom=__webpack_require__(37);exports.unstable_batchedUpdates=_reactDom.unstable_batchedUpdates},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var invariant_1=__webpack_require__(59);function booleanPointInPolygon(point,polygon,options){if(options===void 0){options={}}if(!point){throw new Error("point is required")}if(!polygon){throw new Error("polygon is required")}var pt=invariant_1.getCoord(point);var geom=invariant_1.getGeom(polygon);var type=geom.type;var bbox=polygon.bbox;var polys=geom.coordinates;if(bbox&&inBBox(pt,bbox)===false){return false}if(type==="Polygon"){polys=[polys]}var insidePoly=false;for(var i=0;i<polys.length&&!insidePoly;i++){if(inRing(pt,polys[i][0],options.ignoreBoundary)){var inHole=false;var k=1;while(k<polys[i].length&&!inHole){if(inRing(pt,polys[i][k],!options.ignoreBoundary)){inHole=true}k++}if(!inHole){insidePoly=true}}}return insidePoly}exports.default=booleanPointInPolygon;function inRing(pt,ring,ignoreBoundary){var isInside=false;if(ring[0][0]===ring[ring.length-1][0]&&ring[0][1]===ring[ring.length-1][1]){ring=ring.slice(0,ring.length-1)}for(var i=0,j=ring.length-1;i<ring.length;j=i++){var xi=ring[i][0];var yi=ring[i][1];var xj=ring[j][0];var yj=ring[j][1];var onBoundary=pt[1]*(xi-xj)+yi*(xj-pt[0])+yj*(pt[0]-xi)===0&&(xi-pt[0])*(xj-pt[0])<=0&&(yi-pt[1])*(yj-pt[1])<=0;if(onBoundary){return!ignoreBoundary}var intersect=yi>pt[1]!==yj>pt[1]&&pt[0]<(xj-xi)*(pt[1]-yi)/(yj-yi)+xi;if(intersect){isInside=!isInside}}return isInside}function inBBox(pt,bbox){return bbox[0]<=pt[0]&&bbox[1]<=pt[1]&&bbox[2]>=pt[0]&&bbox[3]>=pt[1]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var invariant_1=__webpack_require__(59);function booleanPointOnLine(pt,line,options){if(options===void 0){options={}}var ptCoords=invariant_1.getCoord(pt);var lineCoords=invariant_1.getCoords(line);for(var i=0;i<lineCoords.length-1;i++){var ignoreBoundary=false;if(options.ignoreEndVertices){if(i===0){ignoreBoundary="start"}if(i===lineCoords.length-2){ignoreBoundary="end"}if(i===0&&i+1===lineCoords.length-1){ignoreBoundary="both"}}if(isPointOnLineSegment(lineCoords[i],lineCoords[i+1],ptCoords,ignoreBoundary)){return true}}return false}function isPointOnLineSegment(lineSegmentStart,lineSegmentEnd,pt,excludeBoundary){var x=pt[0];var y=pt[1];var x1=lineSegmentStart[0];var y1=lineSegmentStart[1];var x2=lineSegmentEnd[0];var y2=lineSegmentEnd[1];var dxc=pt[0]-x1;var dyc=pt[1]-y1;var dxl=x2-x1;var dyl=y2-y1;var cross=dxc*dyl-dyc*dxl;if(cross!==0){return false}if(!excludeBoundary){if(Math.abs(dxl)>=Math.abs(dyl)){return dxl>0?x1<=x&&x<=x2:x2<=x&&x<=x1}return dyl>0?y1<=y&&y<=y2:y2<=y&&y<=y1}else if(excludeBoundary==="start"){if(Math.abs(dxl)>=Math.abs(dyl)){return dxl>0?x1<x&&x<=x2:x2<=x&&x<x1}return dyl>0?y1<y&&y<=y2:y2<=y&&y<y1}else if(excludeBoundary==="end"){if(Math.abs(dxl)>=Math.abs(dyl)){return dxl>0?x1<=x&&x<x2:x2<x&&x<=x1}return dyl>0?y1<=y&&y<y2:y2<y&&y<=y1}else if(excludeBoundary==="both"){if(Math.abs(dxl)>=Math.abs(dyl)){return dxl>0?x1<x&&x<x2:x2<x&&x<x1}return dyl>0?y1<y&&y<y2:y2<y&&y<y1}return false}exports.default=booleanPointOnLine},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.defaultMemoize=defaultMemoize;exports.createSelectorCreator=createSelectorCreator;exports.createStructuredSelector=createStructuredSelector;function defaultEqualityCheck(a,b){return a===b}function areArgumentsShallowlyEqual(equalityCheck,prev,next){if(prev===null||next===null||prev.length!==next.length){return false}var length=prev.length;for(var i=0;i<length;i++){if(!equalityCheck(prev[i],next[i])){return false}}return true}function defaultMemoize(func){var equalityCheck=arguments.length>1&&arguments[1]!==undefined?arguments[1]:defaultEqualityCheck;var lastArgs=null;var lastResult=null;return function(){if(!areArgumentsShallowlyEqual(equalityCheck,lastArgs,arguments)){lastResult=func.apply(null,arguments)}lastArgs=arguments;return lastResult}}function getDependencies(funcs){var dependencies=Array.isArray(funcs[0])?funcs[0]:funcs;if(!dependencies.every((function(dep){return typeof dep==="function"}))){var dependencyTypes=dependencies.map((function(dep){return typeof dep})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+dependencyTypes+"]"))}return dependencies}function createSelectorCreator(memoize){for(var _len=arguments.length,memoizeOptions=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){memoizeOptions[_key-1]=arguments[_key]}return function(){for(var _len2=arguments.length,funcs=Array(_len2),_key2=0;_key2<_len2;_key2++){funcs[_key2]=arguments[_key2]}var recomputations=0;var resultFunc=funcs.pop();var dependencies=getDependencies(funcs);var memoizedResultFunc=memoize.apply(undefined,[function(){recomputations++;return resultFunc.apply(null,arguments)}].concat(memoizeOptions));var selector=memoize((function(){var params=[];var length=dependencies.length;for(var i=0;i<length;i++){params.push(dependencies[i].apply(null,arguments))}return memoizedResultFunc.apply(null,params)}));selector.resultFunc=resultFunc;selector.dependencies=dependencies;selector.recomputations=function(){return recomputations};selector.resetRecomputations=function(){return recomputations=0};return selector}}var createSelector=exports.createSelector=createSelectorCreator(defaultMemoize);function createStructuredSelector(selectors){var selectorCreator=arguments.length>1&&arguments[1]!==undefined?arguments[1]:createSelector;if(typeof selectors!=="object"){throw new Error("createStructuredSelector expects first argument to be an object "+("where each property is a selector, instead received a "+typeof selectors))}var objectKeys=Object.keys(selectors);return selectorCreator(objectKeys.map((function(key){return selectors[key]})),(function(){for(var _len3=arguments.length,values=Array(_len3),_key3=0;_key3<_len3;_key3++){values[_key3]=arguments[_key3]}return values.reduce((function(composition,value,index){composition[objectKeys[index]]=value;return composition}),{})}))}},function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(root){var freeExports=true&&exports&&!exports.nodeType&&exports;var freeModule=true&&module&&!module.nodeType&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal){root=freeGlobal}var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw new RangeError(errors[type])}function map(array,fn){var length=array.length;var result=[];while(length--){result[length]=fn(array[length])}return result}function mapDomain(string,fn){var parts=string.split("@");var result="";if(parts.length>1){result=parts[0]+"@";string=parts[1]}string=string.replace(regexSeparators,".");var labels=string.split(".");var encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){return map(array,(function(value){var output="";if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value);return output})).join("")}function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error("not-basic")}output.push(input.charCodeAt(j))}for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error("invalid-input")}digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error("overflow")}i+=digit*w;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error("overflow")}w*=baseMinusT}out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<128){output.push(stringFromCharCode(currentValue))}}handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue}}handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error("overflow")}if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}++delta;++n}return output.join("")}function toUnicode(input){return mapDomain(input,(function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string}))}function toASCII(input){return mapDomain(input,(function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string}))}punycode={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode};if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return punycode}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})(this)}).call(this,__webpack_require__(125)(module),__webpack_require__(55))},function(module,exports,__webpack_require__){"use strict";module.exports={isString:function(arg){return typeof arg==="string"},isObject:function(arg){return typeof arg==="object"&&arg!==null},isNull:function(arg){return arg===null},isNullOrUndefined:function(arg){return arg==null}}},function(module,exports,__webpack_require__){"use strict";exports.decode=exports.parse=__webpack_require__(195);exports.encode=exports.stringify=__webpack_require__(196)},function(module,exports,__webpack_require__){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&";eq=eq||"=";var obj={};if(typeof qs!=="string"||qs.length===0){return obj}var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;if(options&&typeof options.maxKeys==="number"){maxKeys=options.maxKeys}var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys}for(var i=0;i<len;++i){var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1)}else{kstr=x;vstr=""}k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty(obj,k)){obj[k]=v}else if(isArray(obj[k])){obj[k].push(v)}else{obj[k]=[obj[k],v]}}return obj};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},function(module,exports,__webpack_require__){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){sep=sep||"&";eq=eq||"=";if(obj===null){obj=undefined}if(typeof obj==="object"){return map(objectKeys(obj),(function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(isArray(obj[k])){return map(obj[k],(function(v){return ks+encodeURIComponent(stringifyPrimitive(v))})).join(sep)}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]))}})).join(sep)}if(!name)return"";return encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj))};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};function map(xs,f){if(xs.map)return xs.map(f);var res=[];for(var i=0;i<xs.length;i++){res.push(f(xs[i],i))}return res}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))res.push(key)}return res}},function(module,exports,__webpack_require__){const internalRe=__webpack_require__(64);module.exports={re:internalRe.re,src:internalRe.src,tokens:internalRe.t,SEMVER_SPEC_VERSION:__webpack_require__(72).SEMVER_SPEC_VERSION,SemVer:__webpack_require__(50),compareIdentifiers:__webpack_require__(88).compareIdentifiers,rcompareIdentifiers:__webpack_require__(88).rcompareIdentifiers,parse:__webpack_require__(65),valid:__webpack_require__(198),clean:__webpack_require__(199),inc:__webpack_require__(200),diff:__webpack_require__(201),major:__webpack_require__(202),minor:__webpack_require__(203),patch:__webpack_require__(204),prerelease:__webpack_require__(205),compare:__webpack_require__(56),rcompare:__webpack_require__(206),compareLoose:__webpack_require__(207),compareBuild:__webpack_require__(90),sort:__webpack_require__(208),rsort:__webpack_require__(209),gt:__webpack_require__(74),lt:__webpack_require__(91),eq:__webpack_require__(89),neq:__webpack_require__(133),gte:__webpack_require__(92),lte:__webpack_require__(93),cmp:__webpack_require__(134),coerce:__webpack_require__(210),Comparator:__webpack_require__(75),Range:__webpack_require__(57),satisfies:__webpack_require__(76),toComparators:__webpack_require__(211),maxSatisfying:__webpack_require__(212),minSatisfying:__webpack_require__(213),minVersion:__webpack_require__(214),validRange:__webpack_require__(215),outside:__webpack_require__(94),gtr:__webpack_require__(216),ltr:__webpack_require__(217),intersects:__webpack_require__(218),simplifyRange:__webpack_require__(219),subset:__webpack_require__(220)}},function(module,exports,__webpack_require__){const parse=__webpack_require__(65);const valid=(version,options)=>{const v=parse(version,options);return v?v.version:null};module.exports=valid},function(module,exports,__webpack_require__){const parse=__webpack_require__(65);const clean=(version,options)=>{const s=parse(version.trim().replace(/^[=v]+/,""),options);return s?s.version:null};module.exports=clean},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(50);const inc=(version,release,options,identifier)=>{if(typeof options==="string"){identifier=options;options=undefined}try{return new SemVer(version,options).inc(release,identifier).version}catch(er){return null}};module.exports=inc},function(module,exports,__webpack_require__){const parse=__webpack_require__(65);const eq=__webpack_require__(89);const diff=(version1,version2)=>{if(eq(version1,version2)){return null}else{const v1=parse(version1);const v2=parse(version2);const hasPre=v1.prerelease.length||v2.prerelease.length;const prefix=hasPre?"pre":"";const defaultResult=hasPre?"prerelease":"";for(const key in v1){if(key==="major"||key==="minor"||key==="patch"){if(v1[key]!==v2[key]){return prefix+key}}}return defaultResult}};module.exports=diff},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(50);const major=(a,loose)=>new SemVer(a,loose).major;module.exports=major},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(50);const minor=(a,loose)=>new SemVer(a,loose).minor;module.exports=minor},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(50);const patch=(a,loose)=>new SemVer(a,loose).patch;module.exports=patch},function(module,exports,__webpack_require__){const parse=__webpack_require__(65);const prerelease=(version,options)=>{const parsed=parse(version,options);return parsed&&parsed.prerelease.length?parsed.prerelease:null};module.exports=prerelease},function(module,exports,__webpack_require__){const compare=__webpack_require__(56);const rcompare=(a,b,loose)=>compare(b,a,loose);module.exports=rcompare},function(module,exports,__webpack_require__){const compare=__webpack_require__(56);const compareLoose=(a,b)=>compare(a,b,true);module.exports=compareLoose},function(module,exports,__webpack_require__){const compareBuild=__webpack_require__(90);const sort=(list,loose)=>list.sort((a,b)=>compareBuild(a,b,loose));module.exports=sort},function(module,exports,__webpack_require__){const compareBuild=__webpack_require__(90);const rsort=(list,loose)=>list.sort((a,b)=>compareBuild(b,a,loose));module.exports=rsort},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(50);const parse=__webpack_require__(65);const{re:re,t:t}=__webpack_require__(64);const coerce=(version,options)=>{if(version instanceof SemVer){return version}if(typeof version==="number"){version=String(version)}if(typeof version!=="string"){return null}options=options||{};let match=null;if(!options.rtl){match=version.match(re[t.COERCE])}else{let next;while((next=re[t.COERCERTL].exec(version))&&(!match||match.index+match[0].length!==version.length)){if(!match||next.index+next[0].length!==match.index+match[0].length){match=next}re[t.COERCERTL].lastIndex=next.index+next[1].length+next[2].length}re[t.COERCERTL].lastIndex=-1}if(match===null)return null;return parse(`${match[2]}.${match[3]||"0"}.${match[4]||"0"}`,options)};module.exports=coerce},function(module,exports,__webpack_require__){const Range=__webpack_require__(57);const toComparators=(range,options)=>new Range(range,options).set.map(comp=>comp.map(c=>c.value).join(" ").trim().split(" "));module.exports=toComparators},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(50);const Range=__webpack_require__(57);const maxSatisfying=(versions,range,options)=>{let max=null;let maxSV=null;let rangeObj=null;try{rangeObj=new Range(range,options)}catch(er){return null}versions.forEach(v=>{if(rangeObj.test(v)){if(!max||maxSV.compare(v)===-1){max=v;maxSV=new SemVer(max,options)}}});return max};module.exports=maxSatisfying},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(50);const Range=__webpack_require__(57);const minSatisfying=(versions,range,options)=>{let min=null;let minSV=null;let rangeObj=null;try{rangeObj=new Range(range,options)}catch(er){return null}versions.forEach(v=>{if(rangeObj.test(v)){if(!min||minSV.compare(v)===1){min=v;minSV=new SemVer(min,options)}}});return min};module.exports=minSatisfying},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(50);const Range=__webpack_require__(57);const gt=__webpack_require__(74);const minVersion=(range,loose)=>{range=new Range(range,loose);let minver=new SemVer("0.0.0");if(range.test(minver)){return minver}minver=new SemVer("0.0.0-0");if(range.test(minver)){return minver}minver=null;for(let i=0;i<range.set.length;++i){const comparators=range.set[i];comparators.forEach(comparator=>{const compver=new SemVer(comparator.semver.version);switch(comparator.operator){case">":if(compver.prerelease.length===0){compver.patch++}else{compver.prerelease.push(0)}compver.raw=compver.format();case"":case">=":if(!minver||gt(minver,compver)){minver=compver}break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${comparator.operator}`)}})}if(minver&&range.test(minver)){return minver}return null};module.exports=minVersion},function(module,exports,__webpack_require__){const Range=__webpack_require__(57);const validRange=(range,options)=>{try{return new Range(range,options).range||"*"}catch(er){return null}};module.exports=validRange},function(module,exports,__webpack_require__){const outside=__webpack_require__(94);const gtr=(version,range,options)=>outside(version,range,">",options);module.exports=gtr},function(module,exports,__webpack_require__){const outside=__webpack_require__(94);const ltr=(version,range,options)=>outside(version,range,"<",options);module.exports=ltr},function(module,exports,__webpack_require__){const Range=__webpack_require__(57);const intersects=(r1,r2,options)=>{r1=new Range(r1,options);r2=new Range(r2,options);return r1.intersects(r2)};module.exports=intersects},function(module,exports,__webpack_require__){const satisfies=__webpack_require__(76);const compare=__webpack_require__(56);module.exports=(versions,range,options)=>{const set=[];let min=null;let prev=null;const v=versions.sort((a,b)=>compare(a,b,options));for(const version of v){const included=satisfies(version,range,options);if(included){prev=version;if(!min)min=version}else{if(prev){set.push([min,prev])}prev=null;min=null}}if(min)set.push([min,null]);const ranges=[];for(const[min,max]of set){if(min===max)ranges.push(min);else if(!max&&min===v[0])ranges.push("*");else if(!max)ranges.push(`>=${min}`);else if(min===v[0])ranges.push(`<=${max}`);else ranges.push(`${min} - ${max}`)}const simplified=ranges.join(" || ");const original=typeof range.raw==="string"?range.raw:String(range);return simplified.length<original.length?simplified:range}},function(module,exports,__webpack_require__){const Range=__webpack_require__(57);const{ANY:ANY}=__webpack_require__(75);const satisfies=__webpack_require__(76);const compare=__webpack_require__(56);const subset=(sub,dom,options)=>{sub=new Range(sub,options);dom=new Range(dom,options);let sawNonNull=false;OUTER:for(const simpleSub of sub.set){for(const simpleDom of dom.set){const isSub=simpleSubset(simpleSub,simpleDom,options);sawNonNull=sawNonNull||isSub!==null;if(isSub)continue OUTER}if(sawNonNull)return false}return true};const simpleSubset=(sub,dom,options)=>{if(sub.length===1&&sub[0].semver===ANY)return dom.length===1&&dom[0].semver===ANY;const eqSet=new Set;let gt,lt;for(const c of sub){if(c.operator===">"||c.operator===">=")gt=higherGT(gt,c,options);else if(c.operator==="<"||c.operator==="<=")lt=lowerLT(lt,c,options);else eqSet.add(c.semver)}if(eqSet.size>1)return null;let gtltComp;if(gt&&lt){gtltComp=compare(gt.semver,lt.semver,options);if(gtltComp>0)return null;else if(gtltComp===0&&(gt.operator!==">="||lt.operator!=="<="))return null}for(const eq of eqSet){if(gt&&!satisfies(eq,String(gt),options))return null;if(lt&&!satisfies(eq,String(lt),options))return null;for(const c of dom){if(!satisfies(eq,String(c),options))return false}return true}let higher,lower;let hasDomLT,hasDomGT;for(const c of dom){hasDomGT=hasDomGT||c.operator===">"||c.operator===">=";hasDomLT=hasDomLT||c.operator==="<"||c.operator==="<=";if(gt){if(c.operator===">"||c.operator===">="){higher=higherGT(gt,c,options);if(higher===c)return false}else if(gt.operator===">="&&!satisfies(gt.semver,String(c),options))return false}if(lt){if(c.operator==="<"||c.operator==="<="){lower=lowerLT(lt,c,options);if(lower===c)return false}else if(lt.operator==="<="&&!satisfies(lt.semver,String(c),options))return false}if(!c.operator&&(lt||gt)&&gtltComp!==0)return false}if(gt&&hasDomLT&&!lt&&gtltComp!==0)return false;if(lt&&hasDomGT&&!gt&&gtltComp!==0)return false;return true};const higherGT=(a,b,options)=>{if(!a)return b;const comp=compare(a.semver,b.semver,options);return comp>0?a:comp<0?b:b.operator===">"&&a.operator===">="?b:a};const lowerLT=(a,b,options)=>{if(!a)return b;const comp=compare(a.semver,b.semver,options);return comp<0?a:comp>0?b:b.operator==="<"&&a.operator==="<="?b:a};module.exports=subset},function(module,exports,__webpack_require__){"use strict";(function(global){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function compare(a,b){if(a===b){return 0}var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break}}if(x<y){return-1}if(y<x){return 1}return 0}function isBuffer(b){if(global.Buffer&&typeof global.Buffer.isBuffer==="function"){return global.Buffer.isBuffer(b)}return!!(b!=null&&b._isBuffer)}var util=__webpack_require__(77);var hasOwn=Object.prototype.hasOwnProperty;var pSlice=Array.prototype.slice;var functionsHaveNames=function(){return function foo(){}.name==="foo"}();function pToString(obj){return Object.prototype.toString.call(obj)}function isView(arrbuf){if(isBuffer(arrbuf)){return false}if(typeof global.ArrayBuffer!=="function"){return false}if(typeof ArrayBuffer.isView==="function"){return ArrayBuffer.isView(arrbuf)}if(!arrbuf){return false}if(arrbuf instanceof DataView){return true}if(arrbuf.buffer&&arrbuf.buffer instanceof ArrayBuffer){return true}return false}var assert=module.exports=ok;var regex=/\s*function\s+([^\(\s]*)\s*/;function getName(func){if(!util.isFunction(func)){return}if(functionsHaveNames){return func.name}var str=func.toString();var match=str.match(regex);return match&&match[1]}assert.AssertionError=function AssertionError(options){this.name="AssertionError";this.actual=options.actual;this.expected=options.expected;this.operator=options.operator;if(options.message){this.message=options.message;this.generatedMessage=false}else{this.message=getMessage(this);this.generatedMessage=true}var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace){Error.captureStackTrace(this,stackStartFunction)}else{var err=new Error;if(err.stack){var out=err.stack;var fn_name=getName(stackStartFunction);var idx=out.indexOf("\n"+fn_name);if(idx>=0){var next_line=out.indexOf("\n",idx+1);out=out.substring(next_line+1)}this.stack=out}}};util.inherits(assert.AssertionError,Error);function truncate(s,n){if(typeof s==="string"){return s.length<n?s:s.slice(0,n)}else{return s}}function inspect(something){if(functionsHaveNames||!util.isFunction(something)){return util.inspect(something)}var rawname=getName(something);var name=rawname?": "+rawname:"";return"[Function"+name+"]"}function getMessage(self){return truncate(inspect(self.actual),128)+" "+self.operator+" "+truncate(inspect(self.expected),128)}function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction})}assert.fail=fail;function ok(value,message){if(!value)fail(value,true,message,"==",assert.ok)}assert.ok=ok;assert.equal=function equal(actual,expected,message){if(actual!=expected)fail(actual,expected,message,"==",assert.equal)};assert.notEqual=function notEqual(actual,expected,message){if(actual==expected){fail(actual,expected,message,"!=",assert.notEqual)}};assert.deepEqual=function deepEqual(actual,expected,message){if(!_deepEqual(actual,expected,false)){fail(actual,expected,message,"deepEqual",assert.deepEqual)}};assert.deepStrictEqual=function deepStrictEqual(actual,expected,message){if(!_deepEqual(actual,expected,true)){fail(actual,expected,message,"deepStrictEqual",assert.deepStrictEqual)}};function _deepEqual(actual,expected,strict,memos){if(actual===expected){return true}else if(isBuffer(actual)&&isBuffer(expected)){return compare(actual,expected)===0}else if(util.isDate(actual)&&util.isDate(expected)){return actual.getTime()===expected.getTime()}else if(util.isRegExp(actual)&&util.isRegExp(expected)){return actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase}else if((actual===null||typeof actual!=="object")&&(expected===null||typeof expected!=="object")){return strict?actual===expected:actual==expected}else if(isView(actual)&&isView(expected)&&pToString(actual)===pToString(expected)&&!(actual instanceof Float32Array||actual instanceof Float64Array)){return compare(new Uint8Array(actual.buffer),new Uint8Array(expected.buffer))===0}else if(isBuffer(actual)!==isBuffer(expected)){return false}else{memos=memos||{actual:[],expected:[]};var actualIndex=memos.actual.indexOf(actual);if(actualIndex!==-1){if(actualIndex===memos.expected.indexOf(expected)){return true}}memos.actual.push(actual);memos.expected.push(expected);return objEquiv(actual,expected,strict,memos)}}function isArguments(object){return Object.prototype.toString.call(object)=="[object Arguments]"}function objEquiv(a,b,strict,actualVisitedObjects){if(a===null||a===undefined||b===null||b===undefined)return false;if(util.isPrimitive(a)||util.isPrimitive(b))return a===b;if(strict&&Object.getPrototypeOf(a)!==Object.getPrototypeOf(b))return false;var aIsArgs=isArguments(a);var bIsArgs=isArguments(b);if(aIsArgs&&!bIsArgs||!aIsArgs&&bIsArgs)return false;if(aIsArgs){a=pSlice.call(a);b=pSlice.call(b);return _deepEqual(a,b,strict)}var ka=objectKeys(a);var kb=objectKeys(b);var key,i;if(ka.length!==kb.length)return false;ka.sort();kb.sort();for(i=ka.length-1;i>=0;i--){if(ka[i]!==kb[i])return false}for(i=ka.length-1;i>=0;i--){key=ka[i];if(!_deepEqual(a[key],b[key],strict,actualVisitedObjects))return false}return true}assert.notDeepEqual=function notDeepEqual(actual,expected,message){if(_deepEqual(actual,expected,false)){fail(actual,expected,message,"notDeepEqual",assert.notDeepEqual)}};assert.notDeepStrictEqual=notDeepStrictEqual;function notDeepStrictEqual(actual,expected,message){if(_deepEqual(actual,expected,true)){fail(actual,expected,message,"notDeepStrictEqual",notDeepStrictEqual)}}assert.strictEqual=function strictEqual(actual,expected,message){if(actual!==expected){fail(actual,expected,message,"===",assert.strictEqual)}};assert.notStrictEqual=function notStrictEqual(actual,expected,message){if(actual===expected){fail(actual,expected,message,"!==",assert.notStrictEqual)}};function expectedException(actual,expected){if(!actual||!expected){return false}if(Object.prototype.toString.call(expected)=="[object RegExp]"){return expected.test(actual)}try{if(actual instanceof expected){return true}}catch(e){}if(Error.isPrototypeOf(expected)){return false}return expected.call({},actual)===true}function _tryBlock(block){var error;try{block()}catch(e){error=e}return error}function _throws(shouldThrow,block,expected,message){var actual;if(typeof block!=="function"){throw new TypeError('"block" argument must be a function')}if(typeof expected==="string"){message=expected;expected=null}actual=_tryBlock(block);message=(expected&&expected.name?" ("+expected.name+").":".")+(message?" "+message:".");if(shouldThrow&&!actual){fail(actual,expected,"Missing expected exception"+message)}var userProvidedMessage=typeof message==="string";var isUnwantedException=!shouldThrow&&util.isError(actual);var isUnexpectedException=!shouldThrow&&actual&&!expected;if(isUnwantedException&&userProvidedMessage&&expectedException(actual,expected)||isUnexpectedException){fail(actual,expected,"Got unwanted exception"+message)}if(shouldThrow&&actual&&expected&&!expectedException(actual,expected)||!shouldThrow&&actual){throw actual}}assert.throws=function(block,error,message){_throws(true,block,error,message)};assert.doesNotThrow=function(block,error,message){_throws(false,block,error,message)};assert.ifError=function(err){if(err)throw err};var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){if(hasOwn.call(obj,key))keys.push(key)}return keys}}).call(this,__webpack_require__(55))},function(module,exports){module.exports=function isBuffer(arg){return arg&&typeof arg==="object"&&typeof arg.copy==="function"&&typeof arg.fill==="function"&&typeof arg.readUInt8==="function"}},function(module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});var bearing_1=__importDefault(__webpack_require__(225));var destination_1=__importDefault(__webpack_require__(136));var distance_1=__importDefault(__webpack_require__(95));var helpers_1=__webpack_require__(51);var invariant_1=__webpack_require__(59);function along(line,distance,options){if(options===void 0){options={}}var geom=invariant_1.getGeom(line);var coords=geom.coordinates;var travelled=0;for(var i=0;i<coords.length;i++){if(distance>=travelled&&i===coords.length-1){break}else if(travelled>=distance){var overshot=distance-travelled;if(!overshot){return helpers_1.point(coords[i])}else{var direction=bearing_1.default(coords[i],coords[i-1])-180;var interpolated=destination_1.default(coords[i],overshot,direction,options);return interpolated}}else{travelled+=distance_1.default(coords[i],coords[i+1],options)}}return helpers_1.point(coords[coords.length-1])}exports.default=along},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var helpers_1=__webpack_require__(51);var invariant_1=__webpack_require__(59);function bearing(start,end,options){if(options===void 0){options={}}if(options.final===true){return calculateFinalBearing(start,end)}var coordinates1=invariant_1.getCoord(start);var coordinates2=invariant_1.getCoord(end);var lon1=helpers_1.degreesToRadians(coordinates1[0]);var lon2=helpers_1.degreesToRadians(coordinates2[0]);var lat1=helpers_1.degreesToRadians(coordinates1[1]);var lat2=helpers_1.degreesToRadians(coordinates2[1]);var a=Math.sin(lon2-lon1)*Math.cos(lat2);var b=Math.cos(lat1)*Math.sin(lat2)-Math.sin(lat1)*Math.cos(lat2)*Math.cos(lon2-lon1);return helpers_1.radiansToDegrees(Math.atan2(a,b))}function calculateFinalBearing(start,end){var bear=bearing(end,start);bear=(bear+180)%360;return bear}exports.default=bearing},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var meta_1=__webpack_require__(63);var RADIUS=6378137;function area(geojson){return meta_1.geomReduce(geojson,(function(value,geom){return value+calculateArea(geom)}),0)}exports.default=area;function calculateArea(geom){var total=0;var i;switch(geom.type){case"Polygon":return polygonArea(geom.coordinates);case"MultiPolygon":for(i=0;i<geom.coordinates.length;i++){total+=polygonArea(geom.coordinates[i])}return total;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function polygonArea(coords){var total=0;if(coords&&coords.length>0){total+=Math.abs(ringArea(coords[0]));for(var i=1;i<coords.length;i++){total-=Math.abs(ringArea(coords[i]))}}return total}function ringArea(coords){var p1;var p2;var p3;var lowerIndex;var middleIndex;var upperIndex;var i;var total=0;var coordsLength=coords.length;if(coordsLength>2){for(i=0;i<coordsLength;i++){if(i===coordsLength-2){lowerIndex=coordsLength-2;middleIndex=coordsLength-1;upperIndex=0}else if(i===coordsLength-1){lowerIndex=coordsLength-1;middleIndex=0;upperIndex=1}else{lowerIndex=i;middleIndex=i+1;upperIndex=i+2}p1=coords[lowerIndex];p2=coords[middleIndex];p3=coords[upperIndex];total+=(rad(p3[0])-rad(p1[0]))*Math.sin(rad(p2[1]))}total=total*RADIUS*RADIUS/2}return total}function rad(num){return num*Math.PI/180}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var convex_1=__webpack_require__(228);var centroid_1=__webpack_require__(239);var helpers_1=__webpack_require__(51);var invariant_1=__webpack_require__(59);var meta_1=__webpack_require__(63);function centerOfMass(geojson,options){if(options===void 0){options={}}switch(invariant_1.getType(geojson)){case"Point":return geojson;case"Polygon":var coords=[];meta_1.coordEach(geojson,(function(coord){coords.push(coord)}));var centre=centroid_1.default(geojson,{properties:options.properties});var translation=centre.geometry.coordinates;var sx=0;var sy=0;var sArea=0;var i,pi,pj,xi,xj,yi,yj,a;var neutralizedPoints=coords.map((function(point){return[point[0]-translation[0],point[1]-translation[1]]}));for(i=0;i<coords.length-1;i++){pi=neutralizedPoints[i];xi=pi[0];yi=pi[1];pj=neutralizedPoints[i+1];xj=pj[0];yj=pj[1];a=xi*yj-xj*yi;sArea+=a;sx+=(xi+xj)*a;sy+=(yi+yj)*a}if(sArea===0){return centre}else{var area=sArea*.5;var areaFactor=1/(6*area);return helpers_1.point([translation[0]+areaFactor*sx,translation[1]+areaFactor*sy],options.properties)}default:var hull=convex_1.default(geojson);if(hull)return centerOfMass(hull,{properties:options.properties});else return centroid_1.default(geojson,{properties:options.properties})}}exports.default=centerOfMass},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});var helpers_1=__webpack_require__(51);var meta_1=__webpack_require__(63);var concaveman_1=__importDefault(__webpack_require__(229));function convex(geojson,options){if(options===void 0){options={}}options.concavity=options.concavity||Infinity;var points=[];meta_1.coordEach(geojson,(function(coord){points.push([coord[0],coord[1]])}));if(!points.length){return null}var convexHull=concaveman_1.default(points,options.concavity);if(convexHull.length>3){return helpers_1.polygon([convexHull])}return null}exports.default=convex},function(module,exports,__webpack_require__){"use strict";var rbush=__webpack_require__(230);var convexHull=__webpack_require__(232);var Queue=__webpack_require__(237);var pointInPolygon=__webpack_require__(238);var orient=__webpack_require__(137)[3];module.exports=concaveman;module.exports.default=concaveman;function concaveman(points,concavity,lengthThreshold){concavity=Math.max(0,concavity===undefined?2:concavity);lengthThreshold=lengthThreshold||0;var hull=fastConvexHull(points);var tree=rbush(16,["[0]","[1]","[0]","[1]"]).load(points);var queue=[];for(var i=0,last;i<hull.length;i++){var p=hull[i];tree.remove(p);last=insertNode(p,last);queue.push(last)}var segTree=rbush(16);for(i=0;i<queue.length;i++)segTree.insert(updateBBox(queue[i]));var sqConcavity=concavity*concavity;var sqLenThreshold=lengthThreshold*lengthThreshold;while(queue.length){var node=queue.shift();var a=node.p;var b=node.next.p;var sqLen=getSqDist(a,b);if(sqLen<sqLenThreshold)continue;var maxSqLen=sqLen/sqConcavity;p=findCandidate(tree,node.prev.p,a,b,node.next.next.p,maxSqLen,segTree);if(p&&Math.min(getSqDist(p,a),getSqDist(p,b))<=maxSqLen){queue.push(node);queue.push(insertNode(p,node));tree.remove(p);segTree.remove(node);segTree.insert(updateBBox(node));segTree.insert(updateBBox(node.next))}}node=last;var concave=[];do{concave.push(node.p);node=node.next}while(node!==last);concave.push(node.p);return concave}function findCandidate(tree,a,b,c,d,maxDist,segTree){var queue=new Queue(null,compareDist);var node=tree.data;while(node){for(var i=0;i<node.children.length;i++){var child=node.children[i];var dist=node.leaf?sqSegDist(child,b,c):sqSegBoxDist(b,c,child);if(dist>maxDist)continue;queue.push({node:child,dist:dist})}while(queue.length&&!queue.peek().node.children){var item=queue.pop();var p=item.node;var d0=sqSegDist(p,a,b);var d1=sqSegDist(p,c,d);if(item.dist<d0&&item.dist<d1&&noIntersections(b,p,segTree)&&noIntersections(c,p,segTree))return p}node=queue.pop();if(node)node=node.node}return null}function compareDist(a,b){return a.dist-b.dist}function sqSegBoxDist(a,b,bbox){if(inside(a,bbox)||inside(b,bbox))return 0;var d1=sqSegSegDist(a[0],a[1],b[0],b[1],bbox.minX,bbox.minY,bbox.maxX,bbox.minY);if(d1===0)return 0;var d2=sqSegSegDist(a[0],a[1],b[0],b[1],bbox.minX,bbox.minY,bbox.minX,bbox.maxY);if(d2===0)return 0;var d3=sqSegSegDist(a[0],a[1],b[0],b[1],bbox.maxX,bbox.minY,bbox.maxX,bbox.maxY);if(d3===0)return 0;var d4=sqSegSegDist(a[0],a[1],b[0],b[1],bbox.minX,bbox.maxY,bbox.maxX,bbox.maxY);if(d4===0)return 0;return Math.min(d1,d2,d3,d4)}function inside(a,bbox){return a[0]>=bbox.minX&&a[0]<=bbox.maxX&&a[1]>=bbox.minY&&a[1]<=bbox.maxY}function noIntersections(a,b,segTree){var minX=Math.min(a[0],b[0]);var minY=Math.min(a[1],b[1]);var maxX=Math.max(a[0],b[0]);var maxY=Math.max(a[1],b[1]);var edges=segTree.search({minX:minX,minY:minY,maxX:maxX,maxY:maxY});for(var i=0;i<edges.length;i++){if(intersects(edges[i].p,edges[i].next.p,a,b))return false}return true}function intersects(p1,q1,p2,q2){return p1!==q2&&q1!==p2&&orient(p1,q1,p2)>0!==orient(p1,q1,q2)>0&&orient(p2,q2,p1)>0!==orient(p2,q2,q1)>0}function updateBBox(node){var p1=node.p;var p2=node.next.p;node.minX=Math.min(p1[0],p2[0]);node.minY=Math.min(p1[1],p2[1]);node.maxX=Math.max(p1[0],p2[0]);node.maxY=Math.max(p1[1],p2[1]);return node}function fastConvexHull(points){var left=points[0];var top=points[0];var right=points[0];var bottom=points[0];for(var i=0;i<points.length;i++){var p=points[i];if(p[0]<left[0])left=p;if(p[0]>right[0])right=p;if(p[1]<top[1])top=p;if(p[1]>bottom[1])bottom=p}var cull=[left,top,right,bottom];var filtered=cull.slice();for(i=0;i<points.length;i++){if(!pointInPolygon(points[i],cull))filtered.push(points[i])}var indices=convexHull(filtered);var hull=[];for(i=0;i<indices.length;i++)hull.push(filtered[indices[i]]);return hull}function insertNode(p,prev){var node={p:p,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};if(!prev){node.prev=node;node.next=node}else{node.next=prev.next;node.prev=prev;prev.next.prev=node;prev.next=node}return node}function getSqDist(p1,p2){var dx=p1[0]-p2[0],dy=p1[1]-p2[1];return dx*dx+dy*dy}function sqSegDist(p,p1,p2){var x=p1[0],y=p1[1],dx=p2[0]-x,dy=p2[1]-y;if(dx!==0||dy!==0){var t=((p[0]-x)*dx+(p[1]-y)*dy)/(dx*dx+dy*dy);if(t>1){x=p2[0];y=p2[1]}else if(t>0){x+=dx*t;y+=dy*t}}dx=p[0]-x;dy=p[1]-y;return dx*dx+dy*dy}function sqSegSegDist(x0,y0,x1,y1,x2,y2,x3,y3){var ux=x1-x0;var uy=y1-y0;var vx=x3-x2;var vy=y3-y2;var wx=x0-x2;var wy=y0-y2;var a=ux*ux+uy*uy;var b=ux*vx+uy*vy;var c=vx*vx+vy*vy;var d=ux*wx+uy*wy;var e=vx*wx+vy*wy;var D=a*c-b*b;var sc,sN,tc,tN;var sD=D;var tD=D;if(D===0){sN=0;sD=1;tN=e;tD=c}else{sN=b*e-c*d;tN=a*e-b*d;if(sN<0){sN=0;tN=e;tD=c}else if(sN>sD){sN=sD;tN=e+b;tD=c}}if(tN<0){tN=0;if(-d<0)sN=0;else if(-d>a)sN=sD;else{sN=-d;sD=a}}else if(tN>tD){tN=tD;if(-d+b<0)sN=0;else if(-d+b>a)sN=sD;else{sN=-d+b;sD=a}}sc=sN===0?0:sN/sD;tc=tN===0?0:tN/tD;var cx=(1-sc)*x0+sc*x1;var cy=(1-sc)*y0+sc*y1;var cx2=(1-tc)*x2+tc*x3;var cy2=(1-tc)*y2+tc*y3;var dx=cx2-cx;var dy=cy2-cy;return dx*dx+dy*dy}},function(module,exports,__webpack_require__){"use strict";module.exports=rbush;module.exports.default=rbush;var quickselect=__webpack_require__(231);function rbush(maxEntries,format){if(!(this instanceof rbush))return new rbush(maxEntries,format);this._maxEntries=Math.max(4,maxEntries||9);this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4));if(format){this._initFormat(format)}this.clear()}rbush.prototype={all:function(){return this._all(this.data,[])},search:function(bbox){var node=this.data,result=[],toBBox=this.toBBox;if(!intersects(bbox,node))return result;var nodesToSearch=[],i,len,child,childBBox;while(node){for(i=0,len=node.children.length;i<len;i++){child=node.children[i];childBBox=node.leaf?toBBox(child):child;if(intersects(bbox,childBBox)){if(node.leaf)result.push(child);else if(contains(bbox,childBBox))this._all(child,result);else nodesToSearch.push(child)}}node=nodesToSearch.pop()}return result},collides:function(bbox){var node=this.data,toBBox=this.toBBox;if(!intersects(bbox,node))return false;var nodesToSearch=[],i,len,child,childBBox;while(node){for(i=0,len=node.children.length;i<len;i++){child=node.children[i];childBBox=node.leaf?toBBox(child):child;if(intersects(bbox,childBBox)){if(node.leaf||contains(bbox,childBBox))return true;nodesToSearch.push(child)}}node=nodesToSearch.pop()}return false},load:function(data){if(!(data&&data.length))return this;if(data.length<this._minEntries){for(var i=0,len=data.length;i<len;i++){this.insert(data[i])}return this}var node=this._build(data.slice(),0,data.length-1,0);if(!this.data.children.length){this.data=node}else if(this.data.height===node.height){this._splitRoot(this.data,node)}else{if(this.data.height<node.height){var tmpNode=this.data;this.data=node;node=tmpNode}this._insert(node,this.data.height-node.height-1,true)}return this},insert:function(item){if(item)this._insert(item,this.data.height-1);return this},clear:function(){this.data=createNode([]);return this},remove:function(item,equalsFn){if(!item)return this;var node=this.data,bbox=this.toBBox(item),path=[],indexes=[],i,parent,index,goingUp;while(node||path.length){if(!node){node=path.pop();parent=path[path.length-1];i=indexes.pop();goingUp=true}if(node.leaf){index=findItem(item,node.children,equalsFn);if(index!==-1){node.children.splice(index,1);path.push(node);this._condense(path);return this}}if(!goingUp&&!node.leaf&&contains(node,bbox)){path.push(node);indexes.push(i);i=0;parent=node;node=node.children[0]}else if(parent){i++;node=parent.children[i];goingUp=false}else node=null}return this},toBBox:function(item){return item},compareMinX:compareNodeMinX,compareMinY:compareNodeMinY,toJSON:function(){return this.data},fromJSON:function(data){this.data=data;return this},_all:function(node,result){var nodesToSearch=[];while(node){if(node.leaf)result.push.apply(result,node.children);else nodesToSearch.push.apply(nodesToSearch,node.children);node=nodesToSearch.pop()}return result},_build:function(items,left,right,height){var N=right-left+1,M=this._maxEntries,node;if(N<=M){node=createNode(items.slice(left,right+1));calcBBox(node,this.toBBox);return node}if(!height){height=Math.ceil(Math.log(N)/Math.log(M));M=Math.ceil(N/Math.pow(M,height-1))}node=createNode([]);node.leaf=false;node.height=height;var N2=Math.ceil(N/M),N1=N2*Math.ceil(Math.sqrt(M)),i,j,right2,right3;multiSelect(items,left,right,N1,this.compareMinX);for(i=left;i<=right;i+=N1){right2=Math.min(i+N1-1,right);multiSelect(items,i,right2,N2,this.compareMinY);for(j=i;j<=right2;j+=N2){right3=Math.min(j+N2-1,right2);node.children.push(this._build(items,j,right3,height-1))}}calcBBox(node,this.toBBox);return node},_chooseSubtree:function(bbox,node,level,path){var i,len,child,targetNode,area,enlargement,minArea,minEnlargement;while(true){path.push(node);if(node.leaf||path.length-1===level)break;minArea=minEnlargement=Infinity;for(i=0,len=node.children.length;i<len;i++){child=node.children[i];area=bboxArea(child);enlargement=enlargedArea(bbox,child)-area;if(enlargement<minEnlargement){minEnlargement=enlargement;minArea=area<minArea?area:minArea;targetNode=child}else if(enlargement===minEnlargement){if(area<minArea){minArea=area;targetNode=child}}}node=targetNode||node.children[0]}return node},_insert:function(item,level,isNode){var toBBox=this.toBBox,bbox=isNode?item:toBBox(item),insertPath=[];var node=this._chooseSubtree(bbox,this.data,level,insertPath);node.children.push(item);extend(node,bbox);while(level>=0){if(insertPath[level].children.length>this._maxEntries){this._split(insertPath,level);level--}else break}this._adjustParentBBoxes(bbox,insertPath,level)},_split:function(insertPath,level){var node=insertPath[level],M=node.children.length,m=this._minEntries;this._chooseSplitAxis(node,m,M);var splitIndex=this._chooseSplitIndex(node,m,M);var newNode=createNode(node.children.splice(splitIndex,node.children.length-splitIndex));newNode.height=node.height;newNode.leaf=node.leaf;calcBBox(node,this.toBBox);calcBBox(newNode,this.toBBox);if(level)insertPath[level-1].children.push(newNode);else this._splitRoot(node,newNode)},_splitRoot:function(node,newNode){this.data=createNode([node,newNode]);this.data.height=node.height+1;this.data.leaf=false;calcBBox(this.data,this.toBBox)},_chooseSplitIndex:function(node,m,M){var i,bbox1,bbox2,overlap,area,minOverlap,minArea,index;minOverlap=minArea=Infinity;for(i=m;i<=M-m;i++){bbox1=distBBox(node,0,i,this.toBBox);bbox2=distBBox(node,i,M,this.toBBox);overlap=intersectionArea(bbox1,bbox2);area=bboxArea(bbox1)+bboxArea(bbox2);if(overlap<minOverlap){minOverlap=overlap;index=i;minArea=area<minArea?area:minArea}else if(overlap===minOverlap){if(area<minArea){minArea=area;index=i}}}return index},_chooseSplitAxis:function(node,m,M){var compareMinX=node.leaf?this.compareMinX:compareNodeMinX,compareMinY=node.leaf?this.compareMinY:compareNodeMinY,xMargin=this._allDistMargin(node,m,M,compareMinX),yMargin=this._allDistMargin(node,m,M,compareMinY);if(xMargin<yMargin)node.children.sort(compareMinX)},_allDistMargin:function(node,m,M,compare){node.children.sort(compare);var toBBox=this.toBBox,leftBBox=distBBox(node,0,m,toBBox),rightBBox=distBBox(node,M-m,M,toBBox),margin=bboxMargin(leftBBox)+bboxMargin(rightBBox),i,child;for(i=m;i<M-m;i++){child=node.children[i];extend(leftBBox,node.leaf?toBBox(child):child);margin+=bboxMargin(leftBBox)}for(i=M-m-1;i>=m;i--){child=node.children[i];extend(rightBBox,node.leaf?toBBox(child):child);margin+=bboxMargin(rightBBox)}return margin},_adjustParentBBoxes:function(bbox,path,level){for(var i=level;i>=0;i--){extend(path[i],bbox)}},_condense:function(path){for(var i=path.length-1,siblings;i>=0;i--){if(path[i].children.length===0){if(i>0){siblings=path[i-1].children;siblings.splice(siblings.indexOf(path[i]),1)}else this.clear()}else calcBBox(path[i],this.toBBox)}},_initFormat:function(format){var compareArr=["return a"," - b",";"];this.compareMinX=new Function("a","b",compareArr.join(format[0]));this.compareMinY=new Function("a","b",compareArr.join(format[1]));this.toBBox=new Function("a","return {minX: a"+format[0]+", minY: a"+format[1]+", maxX: a"+format[2]+", maxY: a"+format[3]+"};")}};function findItem(item,items,equalsFn){if(!equalsFn)return items.indexOf(item);for(var i=0;i<items.length;i++){if(equalsFn(item,items[i]))return i}return-1}function calcBBox(node,toBBox){distBBox(node,0,node.children.length,toBBox,node)}function distBBox(node,k,p,toBBox,destNode){if(!destNode)destNode=createNode(null);destNode.minX=Infinity;destNode.minY=Infinity;destNode.maxX=-Infinity;destNode.maxY=-Infinity;for(var i=k,child;i<p;i++){child=node.children[i];extend(destNode,node.leaf?toBBox(child):child)}return destNode}function extend(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);a.maxY=Math.max(a.maxY,b.maxY);return a}function compareNodeMinX(a,b){return a.minX-b.minX}function compareNodeMinY(a,b){return a.minY-b.minY}function bboxArea(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function bboxMargin(a){return a.maxX-a.minX+(a.maxY-a.minY)}function enlargedArea(a,b){return(Math.max(b.maxX,a.maxX)-Math.min(b.minX,a.minX))*(Math.max(b.maxY,a.maxY)-Math.min(b.minY,a.minY))}function intersectionArea(a,b){var minX=Math.max(a.minX,b.minX),minY=Math.max(a.minY,b.minY),maxX=Math.min(a.maxX,b.maxX),maxY=Math.min(a.maxY,b.maxY);return Math.max(0,maxX-minX)*Math.max(0,maxY-minY)}function contains(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function intersects(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function createNode(children){return{children:children,height:1,leaf:true,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function multiSelect(arr,left,right,n,compare){var stack=[left,right],mid;while(stack.length){right=stack.pop();left=stack.pop();if(right-left<=n)continue;mid=left+Math.ceil((right-left)/n/2)*n;quickselect(arr,mid,left,right,compare);stack.push(left,mid,mid,right)}}},function(module,exports,__webpack_require__){(function(global,factory){true?module.exports=factory():undefined})(this,(function(){"use strict";function quickselect(arr,k,left,right,compare){quickselectStep(arr,k,left||0,right||arr.length-1,compare||defaultCompare)}function quickselectStep(arr,k,left,right,compare){while(right>left){if(right-left>600){var n=right-left+1;var m=k-left+1;var z=Math.log(n);var s=.5*Math.exp(2*z/3);var sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1);var newLeft=Math.max(left,Math.floor(k-m*s/n+sd));var newRight=Math.min(right,Math.floor(k+(n-m)*s/n+sd));quickselectStep(arr,k,newLeft,newRight,compare)}var t=arr[k];var i=left;var j=right;swap(arr,left,k);if(compare(arr[right],t)>0)swap(arr,left,right);while(i<j){swap(arr,i,j);i++;j--;while(compare(arr[i],t)<0)i++;while(compare(arr[j],t)>0)j--}if(compare(arr[left],t)===0)swap(arr,left,j);else{j++;swap(arr,j,right)}if(j<=k)left=j+1;if(k<=j)right=j-1}}function swap(arr,i,j){var tmp=arr[i];arr[i]=arr[j];arr[j]=tmp}function defaultCompare(a,b){return a<b?-1:a>b?1:0}return quickselect}))},function(module,exports,__webpack_require__){"use strict";module.exports=monotoneConvexHull2D;var orient=__webpack_require__(137)[3];function monotoneConvexHull2D(points){var n=points.length;if(n<3){var result=new Array(n);for(var i=0;i<n;++i){result[i]=i}if(n===2&&points[0][0]===points[1][0]&&points[0][1]===points[1][1]){return[0]}return result}var sorted=new Array(n);for(var i=0;i<n;++i){sorted[i]=i}sorted.sort((function(a,b){var d=points[a][0]-points[b][0];if(d){return d}return points[a][1]-points[b][1]}));var lower=[sorted[0],sorted[1]];var upper=[sorted[0],sorted[1]];for(var i=2;i<n;++i){var idx=sorted[i];var p=points[idx];var m=lower.length;while(m>1&&orient(points[lower[m-2]],points[lower[m-1]],p)<=0){m-=1;lower.pop()}lower.push(idx);m=upper.length;while(m>1&&orient(points[upper[m-2]],points[upper[m-1]],p)>=0){m-=1;upper.pop()}upper.push(idx)}var result=new Array(upper.length+lower.length-2);var ptr=0;for(var i=0,nl=lower.length;i<nl;++i){result[ptr++]=lower[i]}for(var j=upper.length-2;j>0;--j){result[ptr++]=upper[j]}return result}},function(module,exports,__webpack_require__){"use strict";module.exports=linearExpansionSum;function scalarScalar(a,b){var x=a+b;var bv=x-a;var av=x-bv;var br=b-bv;var ar=a-av;var y=ar+br;if(y){return[y,x]}return[x]}function linearExpansionSum(e,f){var ne=e.length|0;var nf=f.length|0;if(ne===1&&nf===1){return scalarScalar(e[0],f[0])}var n=ne+nf;var g=new Array(n);var count=0;var eptr=0;var fptr=0;var abs=Math.abs;var ei=e[eptr];var ea=abs(ei);var fi=f[fptr];var fa=abs(fi);var a,b;if(ea<fa){b=ei;eptr+=1;if(eptr<ne){ei=e[eptr];ea=abs(ei)}}else{b=fi;fptr+=1;if(fptr<nf){fi=f[fptr];fa=abs(fi)}}if(eptr<ne&&ea<fa||fptr>=nf){a=ei;eptr+=1;if(eptr<ne){ei=e[eptr];ea=abs(ei)}}else{a=fi;fptr+=1;if(fptr<nf){fi=f[fptr];fa=abs(fi)}}var x=a+b;var bv=x-a;var y=b-bv;var q0=y;var q1=x;var _x,_bv,_av,_br,_ar;while(eptr<ne&&fptr<nf){if(ea<fa){a=ei;eptr+=1;if(eptr<ne){ei=e[eptr];ea=abs(ei)}}else{a=fi;fptr+=1;if(fptr<nf){fi=f[fptr];fa=abs(fi)}}b=q0;x=a+b;bv=x-a;y=b-bv;if(y){g[count++]=y}_x=q1+x;_bv=_x-q1;_av=_x-_bv;_br=x-_bv;_ar=q1-_av;q0=_ar+_br;q1=_x}while(eptr<ne){a=ei;b=q0;x=a+b;bv=x-a;y=b-bv;if(y){g[count++]=y}_x=q1+x;_bv=_x-q1;_av=_x-_bv;_br=x-_bv;_ar=q1-_av;q0=_ar+_br;q1=_x;eptr+=1;if(eptr<ne){ei=e[eptr]}}while(fptr<nf){a=fi;b=q0;x=a+b;bv=x-a;y=b-bv;if(y){g[count++]=y}_x=q1+x;_bv=_x-q1;_av=_x-_bv;_br=x-_bv;_ar=q1-_av;q0=_ar+_br;q1=_x;fptr+=1;if(fptr<nf){fi=f[fptr]}}if(q0){g[count++]=q0}if(q1){g[count++]=q1}if(!count){g[count++]=0}g.length=count;return g}},function(module,exports,__webpack_require__){"use strict";var twoProduct=__webpack_require__(138);var twoSum=__webpack_require__(235);module.exports=scaleLinearExpansion;function scaleLinearExpansion(e,scale){var n=e.length;if(n===1){var ts=twoProduct(e[0],scale);if(ts[0]){return ts}return[ts[1]]}var g=new Array(2*n);var q=[.1,.1];var t=[.1,.1];var count=0;twoProduct(e[0],scale,q);if(q[0]){g[count++]=q[0]}for(var i=1;i<n;++i){twoProduct(e[i],scale,t);var pq=q[1];twoSum(pq,t[0],q);if(q[0]){g[count++]=q[0]}var a=t[1];var b=q[1];var x=a+b;var bv=x-a;var y=b-bv;q[1]=x;if(y){g[count++]=y}}if(q[1]){g[count++]=q[1]}if(count===0){g[count++]=0}g.length=count;return g}},function(module,exports,__webpack_require__){"use strict";module.exports=fastTwoSum;function fastTwoSum(a,b,result){var x=a+b;var bv=x-a;var av=x-bv;var br=b-bv;var ar=a-av;if(result){result[0]=ar+br;result[1]=x;return result}return[ar+br,x]}},function(module,exports,__webpack_require__){"use strict";module.exports=robustSubtract;function scalarScalar(a,b){var x=a+b;var bv=x-a;var av=x-bv;var br=b-bv;var ar=a-av;var y=ar+br;if(y){return[y,x]}return[x]}function robustSubtract(e,f){var ne=e.length|0;var nf=f.length|0;if(ne===1&&nf===1){return scalarScalar(e[0],-f[0])}var n=ne+nf;var g=new Array(n);var count=0;var eptr=0;var fptr=0;var abs=Math.abs;var ei=e[eptr];var ea=abs(ei);var fi=-f[fptr];var fa=abs(fi);var a,b;if(ea<fa){b=ei;eptr+=1;if(eptr<ne){ei=e[eptr];ea=abs(ei)}}else{b=fi;fptr+=1;if(fptr<nf){fi=-f[fptr];fa=abs(fi)}}if(eptr<ne&&ea<fa||fptr>=nf){a=ei;eptr+=1;if(eptr<ne){ei=e[eptr];ea=abs(ei)}}else{a=fi;fptr+=1;if(fptr<nf){fi=-f[fptr];fa=abs(fi)}}var x=a+b;var bv=x-a;var y=b-bv;var q0=y;var q1=x;var _x,_bv,_av,_br,_ar;while(eptr<ne&&fptr<nf){if(ea<fa){a=ei;eptr+=1;if(eptr<ne){ei=e[eptr];ea=abs(ei)}}else{a=fi;fptr+=1;if(fptr<nf){fi=-f[fptr];fa=abs(fi)}}b=q0;x=a+b;bv=x-a;y=b-bv;if(y){g[count++]=y}_x=q1+x;_bv=_x-q1;_av=_x-_bv;_br=x-_bv;_ar=q1-_av;q0=_ar+_br;q1=_x}while(eptr<ne){a=ei;b=q0;x=a+b;bv=x-a;y=b-bv;if(y){g[count++]=y}_x=q1+x;_bv=_x-q1;_av=_x-_bv;_br=x-_bv;_ar=q1-_av;q0=_ar+_br;q1=_x;eptr+=1;if(eptr<ne){ei=e[eptr]}}while(fptr<nf){a=fi;b=q0;x=a+b;bv=x-a;y=b-bv;if(y){g[count++]=y}_x=q1+x;_bv=_x-q1;_av=_x-_bv;_br=x-_bv;_ar=q1-_av;q0=_ar+_br;q1=_x;fptr+=1;if(fptr<nf){fi=-f[fptr]}}if(q0){g[count++]=q0}if(q1){g[count++]=q1}if(!count){g[count++]=0}g.length=count;return g}},function(module,exports,__webpack_require__){"use strict";module.exports=TinyQueue;module.exports.default=TinyQueue;function TinyQueue(data,compare){if(!(this instanceof TinyQueue))return new TinyQueue(data,compare);this.data=data||[];this.length=this.data.length;this.compare=compare||defaultCompare;if(this.length>0){for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)}}function defaultCompare(a,b){return a<b?-1:a>b?1:0}TinyQueue.prototype={push:function(item){this.data.push(item);this.length++;this._up(this.length-1)},pop:function(){if(this.length===0)return undefined;var top=this.data[0];this.length--;if(this.length>0){this.data[0]=this.data[this.length];this._down(0)}this.data.pop();return top},peek:function(){return this.data[0]},_up:function(pos){var data=this.data;var compare=this.compare;var item=data[pos];while(pos>0){var parent=pos-1>>1;var current=data[parent];if(compare(item,current)>=0)break;data[pos]=current;pos=parent}data[pos]=item},_down:function(pos){var data=this.data;var compare=this.compare;var halfLength=this.length>>1;var item=data[pos];while(pos<halfLength){var left=(pos<<1)+1;var right=left+1;var best=data[left];if(right<this.length&&compare(data[right],best)<0){left=right;best=data[right]}if(compare(best,item)>=0)break;data[pos]=best;pos=left}data[pos]=item}}},function(module,exports){module.exports=function(point,vs){var x=point[0],y=point[1];var inside=false;for(var i=0,j=vs.length-1;i<vs.length;j=i++){var xi=vs[i][0],yi=vs[i][1];var xj=vs[j][0],yj=vs[j][1];var intersect=yi>y!=yj>y&&x<(xj-xi)*(y-yi)/(yj-yi)+xi;if(intersect)inside=!inside}return inside}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var meta_1=__webpack_require__(63);var helpers_1=__webpack_require__(51);function centroid(geojson,options){if(options===void 0){options={}}var xSum=0;var ySum=0;var len=0;meta_1.coordEach(geojson,(function(coord){xSum+=coord[0];ySum+=coord[1];len++}));return helpers_1.point([xSum/len,ySum/len],options.properties)}exports.default=centroid},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});var distance_1=__importDefault(__webpack_require__(95));var meta_1=__webpack_require__(63);function length(geojson,options){if(options===void 0){options={}}return meta_1.segmentReduce(geojson,(function(previousValue,segment){var coords=segment.geometry.coordinates;return previousValue+distance_1.default(coords[0],coords[1],options)}),0)}exports.default=length},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(Math){var trimLeft=/^\s+/,trimRight=/\s+$/,tinyCounter=0,mathRound=Math.round,mathMin=Math.min,mathMax=Math.max,mathRandom=Math.random;function tinycolor(color,opts){color=color?color:"";opts=opts||{};if(color instanceof tinycolor){return color}if(!(this instanceof tinycolor)){return new tinycolor(color,opts)}var rgb=inputToRGB(color);this._originalInput=color,this._r=rgb.r,this._g=rgb.g,this._b=rgb.b,this._a=rgb.a,this._roundA=mathRound(100*this._a)/100,this._format=opts.format||rgb.format;this._gradientType=opts.gradientType;if(this._r<1){this._r=mathRound(this._r)}if(this._g<1){this._g=mathRound(this._g)}if(this._b<1){this._b=mathRound(this._b)}this._ok=rgb.ok;this._tc_id=tinyCounter++}tinycolor.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var rgb=this.toRgb();return(rgb.r*299+rgb.g*587+rgb.b*114)/1e3},getLuminance:function(){var rgb=this.toRgb();var RsRGB,GsRGB,BsRGB,R,G,B;RsRGB=rgb.r/255;GsRGB=rgb.g/255;BsRGB=rgb.b/255;if(RsRGB<=.03928){R=RsRGB/12.92}else{R=Math.pow((RsRGB+.055)/1.055,2.4)}if(GsRGB<=.03928){G=GsRGB/12.92}else{G=Math.pow((GsRGB+.055)/1.055,2.4)}if(BsRGB<=.03928){B=BsRGB/12.92}else{B=Math.pow((BsRGB+.055)/1.055,2.4)}return.2126*R+.7152*G+.0722*B},setAlpha:function(value){this._a=boundAlpha(value);this._roundA=mathRound(100*this._a)/100;return this},toHsv:function(){var hsv=rgbToHsv(this._r,this._g,this._b);return{h:hsv.h*360,s:hsv.s,v:hsv.v,a:this._a}},toHsvString:function(){var hsv=rgbToHsv(this._r,this._g,this._b);var h=mathRound(hsv.h*360),s=mathRound(hsv.s*100),v=mathRound(hsv.v*100);return this._a==1?"hsv("+h+", "+s+"%, "+v+"%)":"hsva("+h+", "+s+"%, "+v+"%, "+this._roundA+")"},toHsl:function(){var hsl=rgbToHsl(this._r,this._g,this._b);return{h:hsl.h*360,s:hsl.s,l:hsl.l,a:this._a}},toHslString:function(){var hsl=rgbToHsl(this._r,this._g,this._b);var h=mathRound(hsl.h*360),s=mathRound(hsl.s*100),l=mathRound(hsl.l*100);return this._a==1?"hsl("+h+", "+s+"%, "+l+"%)":"hsla("+h+", "+s+"%, "+l+"%, "+this._roundA+")"},toHex:function(allow3Char){return rgbToHex(this._r,this._g,this._b,allow3Char)},toHexString:function(allow3Char){return"#"+this.toHex(allow3Char)},toHex8:function(allow4Char){return rgbaToHex(this._r,this._g,this._b,this._a,allow4Char)},toHex8String:function(allow4Char){return"#"+this.toHex8(allow4Char)},toRgb:function(){return{r:mathRound(this._r),g:mathRound(this._g),b:mathRound(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+mathRound(this._r)+", "+mathRound(this._g)+", "+mathRound(this._b)+")":"rgba("+mathRound(this._r)+", "+mathRound(this._g)+", "+mathRound(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:mathRound(bound01(this._r,255)*100)+"%",g:mathRound(bound01(this._g,255)*100)+"%",b:mathRound(bound01(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+mathRound(bound01(this._r,255)*100)+"%, "+mathRound(bound01(this._g,255)*100)+"%, "+mathRound(bound01(this._b,255)*100)+"%)":"rgba("+mathRound(bound01(this._r,255)*100)+"%, "+mathRound(bound01(this._g,255)*100)+"%, "+mathRound(bound01(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){if(this._a===0){return"transparent"}if(this._a<1){return false}return hexNames[rgbToHex(this._r,this._g,this._b,true)]||false},toFilter:function(secondColor){var hex8String="#"+rgbaToArgbHex(this._r,this._g,this._b,this._a);var secondHex8String=hex8String;var gradientType=this._gradientType?"GradientType = 1, ":"";if(secondColor){var s=tinycolor(secondColor);secondHex8String="#"+rgbaToArgbHex(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+gradientType+"startColorstr="+hex8String+",endColorstr="+secondHex8String+")"},toString:function(format){var formatSet=!!format;format=format||this._format;var formattedString=false;var hasAlpha=this._a<1&&this._a>=0;var needsAlphaFormat=!formatSet&&hasAlpha&&(format==="hex"||format==="hex6"||format==="hex3"||format==="hex4"||format==="hex8"||format==="name");if(needsAlphaFormat){if(format==="name"&&this._a===0){return this.toName()}return this.toRgbString()}if(format==="rgb"){formattedString=this.toRgbString()}if(format==="prgb"){formattedString=this.toPercentageRgbString()}if(format==="hex"||format==="hex6"){formattedString=this.toHexString()}if(format==="hex3"){formattedString=this.toHexString(true)}if(format==="hex4"){formattedString=this.toHex8String(true)}if(format==="hex8"){formattedString=this.toHex8String()}if(format==="name"){formattedString=this.toName()}if(format==="hsl"){formattedString=this.toHslString()}if(format==="hsv"){formattedString=this.toHsvString()}return formattedString||this.toHexString()},clone:function(){return tinycolor(this.toString())},_applyModification:function(fn,args){var color=fn.apply(null,[this].concat([].slice.call(args)));this._r=color._r;this._g=color._g;this._b=color._b;this.setAlpha(color._a);return this},lighten:function(){return this._applyModification(lighten,arguments)},brighten:function(){return this._applyModification(brighten,arguments)},darken:function(){return this._applyModification(darken,arguments)},desaturate:function(){return this._applyModification(desaturate,arguments)},saturate:function(){return this._applyModification(saturate,arguments)},greyscale:function(){return this._applyModification(greyscale,arguments)},spin:function(){return this._applyModification(spin,arguments)},_applyCombination:function(fn,args){return fn.apply(null,[this].concat([].slice.call(args)))},analogous:function(){return this._applyCombination(analogous,arguments)},complement:function(){return this._applyCombination(complement,arguments)},monochromatic:function(){return this._applyCombination(monochromatic,arguments)},splitcomplement:function(){return this._applyCombination(splitcomplement,arguments)},triad:function(){return this._applyCombination(triad,arguments)},tetrad:function(){return this._applyCombination(tetrad,arguments)}};tinycolor.fromRatio=function(color,opts){if(typeof color=="object"){var newColor={};for(var i in color){if(color.hasOwnProperty(i)){if(i==="a"){newColor[i]=color[i]}else{newColor[i]=convertToPercentage(color[i])}}}color=newColor}return tinycolor(color,opts)};function inputToRGB(color){var rgb={r:0,g:0,b:0};var a=1;var s=null;var v=null;var l=null;var ok=false;var format=false;if(typeof color=="string"){color=stringInputToObject(color)}if(typeof color=="object"){if(isValidCSSUnit(color.r)&&isValidCSSUnit(color.g)&&isValidCSSUnit(color.b)){rgb=rgbToRgb(color.r,color.g,color.b);ok=true;format=String(color.r).substr(-1)==="%"?"prgb":"rgb"}else if(isValidCSSUnit(color.h)&&isValidCSSUnit(color.s)&&isValidCSSUnit(color.v)){s=convertToPercentage(color.s);v=convertToPercentage(color.v);rgb=hsvToRgb(color.h,s,v);ok=true;format="hsv"}else if(isValidCSSUnit(color.h)&&isValidCSSUnit(color.s)&&isValidCSSUnit(color.l)){s=convertToPercentage(color.s);l=convertToPercentage(color.l);rgb=hslToRgb(color.h,s,l);ok=true;format="hsl"}if(color.hasOwnProperty("a")){a=color.a}}a=boundAlpha(a);return{ok:ok,format:color.format||format,r:mathMin(255,mathMax(rgb.r,0)),g:mathMin(255,mathMax(rgb.g,0)),b:mathMin(255,mathMax(rgb.b,0)),a:a}}function rgbToRgb(r,g,b){return{r:bound01(r,255)*255,g:bound01(g,255)*255,b:bound01(b,255)*255}}function rgbToHsl(r,g,b){r=bound01(r,255);g=bound01(g,255);b=bound01(b,255);var max=mathMax(r,g,b),min=mathMin(r,g,b);var h,s,l=(max+min)/2;if(max==min){h=s=0}else{var d=max-min;s=l>.5?d/(2-max-min):d/(max+min);switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break}h/=6}return{h:h,s:s,l:l}}function hslToRgb(h,s,l){var r,g,b;h=bound01(h,360);s=bound01(s,100);l=bound01(l,100);function hue2rgb(p,q,t){if(t<0)t+=1;if(t>1)t-=1;if(t<1/6)return p+(q-p)*6*t;if(t<1/2)return q;if(t<2/3)return p+(q-p)*(2/3-t)*6;return p}if(s===0){r=g=b=l}else{var q=l<.5?l*(1+s):l+s-l*s;var p=2*l-q;r=hue2rgb(p,q,h+1/3);g=hue2rgb(p,q,h);b=hue2rgb(p,q,h-1/3)}return{r:r*255,g:g*255,b:b*255}}function rgbToHsv(r,g,b){r=bound01(r,255);g=bound01(g,255);b=bound01(b,255);var max=mathMax(r,g,b),min=mathMin(r,g,b);var h,s,v=max;var d=max-min;s=max===0?0:d/max;if(max==min){h=0}else{switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break}h/=6}return{h:h,s:s,v:v}}function hsvToRgb(h,s,v){h=bound01(h,360)*6;s=bound01(s,100);v=bound01(v,100);var i=Math.floor(h),f=h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),mod=i%6,r=[v,q,p,p,t,v][mod],g=[t,v,v,q,p,p][mod],b=[p,p,t,v,v,q][mod];return{r:r*255,g:g*255,b:b*255}}function rgbToHex(r,g,b,allow3Char){var hex=[pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];if(allow3Char&&hex[0].charAt(0)==hex[0].charAt(1)&&hex[1].charAt(0)==hex[1].charAt(1)&&hex[2].charAt(0)==hex[2].charAt(1)){return hex[0].charAt(0)+hex[1].charAt(0)+hex[2].charAt(0)}return hex.join("")}function rgbaToHex(r,g,b,a,allow4Char){var hex=[pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16)),pad2(convertDecimalToHex(a))];if(allow4Char&&hex[0].charAt(0)==hex[0].charAt(1)&&hex[1].charAt(0)==hex[1].charAt(1)&&hex[2].charAt(0)==hex[2].charAt(1)&&hex[3].charAt(0)==hex[3].charAt(1)){return hex[0].charAt(0)+hex[1].charAt(0)+hex[2].charAt(0)+hex[3].charAt(0)}return hex.join("")}function rgbaToArgbHex(r,g,b,a){var hex=[pad2(convertDecimalToHex(a)),pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];return hex.join("")}tinycolor.equals=function(color1,color2){if(!color1||!color2){return false}return tinycolor(color1).toRgbString()==tinycolor(color2).toRgbString()};tinycolor.random=function(){return tinycolor.fromRatio({r:mathRandom(),g:mathRandom(),b:mathRandom()})};function desaturate(color,amount){amount=amount===0?0:amount||10;var hsl=tinycolor(color).toHsl();hsl.s-=amount/100;hsl.s=clamp01(hsl.s);return tinycolor(hsl)}function saturate(color,amount){amount=amount===0?0:amount||10;var hsl=tinycolor(color).toHsl();hsl.s+=amount/100;hsl.s=clamp01(hsl.s);return tinycolor(hsl)}function greyscale(color){return tinycolor(color).desaturate(100)}function lighten(color,amount){amount=amount===0?0:amount||10;var hsl=tinycolor(color).toHsl();hsl.l+=amount/100;hsl.l=clamp01(hsl.l);return tinycolor(hsl)}function brighten(color,amount){amount=amount===0?0:amount||10;var rgb=tinycolor(color).toRgb();rgb.r=mathMax(0,mathMin(255,rgb.r-mathRound(255*-(amount/100))));rgb.g=mathMax(0,mathMin(255,rgb.g-mathRound(255*-(amount/100))));rgb.b=mathMax(0,mathMin(255,rgb.b-mathRound(255*-(amount/100))));return tinycolor(rgb)}function darken(color,amount){amount=amount===0?0:amount||10;var hsl=tinycolor(color).toHsl();hsl.l-=amount/100;hsl.l=clamp01(hsl.l);return tinycolor(hsl)}function spin(color,amount){var hsl=tinycolor(color).toHsl();var hue=(hsl.h+amount)%360;hsl.h=hue<0?360+hue:hue;return tinycolor(hsl)}function complement(color){var hsl=tinycolor(color).toHsl();hsl.h=(hsl.h+180)%360;return tinycolor(hsl)}function triad(color){var hsl=tinycolor(color).toHsl();var h=hsl.h;return[tinycolor(color),tinycolor({h:(h+120)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+240)%360,s:hsl.s,l:hsl.l})]}function tetrad(color){var hsl=tinycolor(color).toHsl();var h=hsl.h;return[tinycolor(color),tinycolor({h:(h+90)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+180)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+270)%360,s:hsl.s,l:hsl.l})]}function splitcomplement(color){var hsl=tinycolor(color).toHsl();var h=hsl.h;return[tinycolor(color),tinycolor({h:(h+72)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+216)%360,s:hsl.s,l:hsl.l})]}function analogous(color,results,slices){results=results||6;slices=slices||30;var hsl=tinycolor(color).toHsl();var part=360/slices;var ret=[tinycolor(color)];for(hsl.h=(hsl.h-(part*results>>1)+720)%360;--results;){hsl.h=(hsl.h+part)%360;ret.push(tinycolor(hsl))}return ret}function monochromatic(color,results){results=results||6;var hsv=tinycolor(color).toHsv();var h=hsv.h,s=hsv.s,v=hsv.v;var ret=[];var modification=1/results;while(results--){ret.push(tinycolor({h:h,s:s,v:v}));v=(v+modification)%1}return ret}tinycolor.mix=function(color1,color2,amount){amount=amount===0?0:amount||50;var rgb1=tinycolor(color1).toRgb();var rgb2=tinycolor(color2).toRgb();var p=amount/100;var rgba={r:(rgb2.r-rgb1.r)*p+rgb1.r,g:(rgb2.g-rgb1.g)*p+rgb1.g,b:(rgb2.b-rgb1.b)*p+rgb1.b,a:(rgb2.a-rgb1.a)*p+rgb1.a};return tinycolor(rgba)};tinycolor.readability=function(color1,color2){var c1=tinycolor(color1);var c2=tinycolor(color2);return(Math.max(c1.getLuminance(),c2.getLuminance())+.05)/(Math.min(c1.getLuminance(),c2.getLuminance())+.05)};tinycolor.isReadable=function(color1,color2,wcag2){var readability=tinycolor.readability(color1,color2);var wcag2Parms,out;out=false;wcag2Parms=validateWCAG2Parms(wcag2);switch(wcag2Parms.level+wcag2Parms.size){case"AAsmall":case"AAAlarge":out=readability>=4.5;break;case"AAlarge":out=readability>=3;break;case"AAAsmall":out=readability>=7;break}return out};tinycolor.mostReadable=function(baseColor,colorList,args){var bestColor=null;var bestScore=0;var readability;var includeFallbackColors,level,size;args=args||{};includeFallbackColors=args.includeFallbackColors;level=args.level;size=args.size;for(var i=0;i<colorList.length;i++){readability=tinycolor.readability(baseColor,colorList[i]);if(readability>bestScore){bestScore=readability;bestColor=tinycolor(colorList[i])}}if(tinycolor.isReadable(baseColor,bestColor,{level:level,size:size})||!includeFallbackColors){return bestColor}else{args.includeFallbackColors=false;return tinycolor.mostReadable(baseColor,["#fff","#000"],args)}};var names=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var hexNames=tinycolor.hexNames=flip(names);function flip(o){var flipped={};for(var i in o){if(o.hasOwnProperty(i)){flipped[o[i]]=i}}return flipped}function boundAlpha(a){a=parseFloat(a);if(isNaN(a)||a<0||a>1){a=1}return a}function bound01(n,max){if(isOnePointZero(n)){n="100%"}var processPercent=isPercentage(n);n=mathMin(max,mathMax(0,parseFloat(n)));if(processPercent){n=parseInt(n*max,10)/100}if(Math.abs(n-max)<1e-6){return 1}return n%max/parseFloat(max)}function clamp01(val){return mathMin(1,mathMax(0,val))}function parseIntFromHex(val){return parseInt(val,16)}function isOnePointZero(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function isPercentage(n){return typeof n==="string"&&n.indexOf("%")!=-1}function pad2(c){return c.length==1?"0"+c:""+c}function convertToPercentage(n){if(n<=1){n=n*100+"%"}return n}function convertDecimalToHex(d){return Math.round(parseFloat(d)*255).toString(16)}function convertHexToDecimal(h){return parseIntFromHex(h)/255}var matchers=function(){var CSS_INTEGER="[-\\+]?\\d+%?";var CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?";var CSS_UNIT="(?:"+CSS_NUMBER+")|(?:"+CSS_INTEGER+")";var PERMISSIVE_MATCH3="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?";var PERMISSIVE_MATCH4="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?";return{CSS_UNIT:new RegExp(CSS_UNIT),rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function isValidCSSUnit(color){return!!matchers.CSS_UNIT.exec(color)}function stringInputToObject(color){color=color.replace(trimLeft,"").replace(trimRight,"").toLowerCase();var named=false;if(names[color]){color=names[color];named=true}else if(color=="transparent"){return{r:0,g:0,b:0,a:0,format:"name"}}var match;if(match=matchers.rgb.exec(color)){return{r:match[1],g:match[2],b:match[3]}}if(match=matchers.rgba.exec(color)){return{r:match[1],g:match[2],b:match[3],a:match[4]}}if(match=matchers.hsl.exec(color)){return{h:match[1],s:match[2],l:match[3]}}if(match=matchers.hsla.exec(color)){return{h:match[1],s:match[2],l:match[3],a:match[4]}}if(match=matchers.hsv.exec(color)){return{h:match[1],s:match[2],v:match[3]}}if(match=matchers.hsva.exec(color)){return{h:match[1],s:match[2],v:match[3],a:match[4]}}if(match=matchers.hex8.exec(color)){return{r:parseIntFromHex(match[1]),g:parseIntFromHex(match[2]),b:parseIntFromHex(match[3]),a:convertHexToDecimal(match[4]),format:named?"name":"hex8"}}if(match=matchers.hex6.exec(color)){return{r:parseIntFromHex(match[1]),g:parseIntFromHex(match[2]),b:parseIntFromHex(match[3]),format:named?"name":"hex"}}if(match=matchers.hex4.exec(color)){return{r:parseIntFromHex(match[1]+""+match[1]),g:parseIntFromHex(match[2]+""+match[2]),b:parseIntFromHex(match[3]+""+match[3]),a:convertHexToDecimal(match[4]+""+match[4]),format:named?"name":"hex8"}}if(match=matchers.hex3.exec(color)){return{r:parseIntFromHex(match[1]+""+match[1]),g:parseIntFromHex(match[2]+""+match[2]),b:parseIntFromHex(match[3]+""+match[3]),format:named?"name":"hex"}}return false}function validateWCAG2Parms(parms){var level,size;parms=parms||{level:"AA",size:"small"};level=(parms.level||"AA").toUpperCase();size=(parms.size||"small").toLowerCase();if(level!=="AA"&&level!=="AAA"){level="AA"}if(size!=="small"&&size!=="large"){size="small"}return{level:level,size:size}}if(true&&module.exports){module.exports=tinycolor}else if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return tinycolor}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})(Math)},function(module){module.exports=JSON.parse('{"all":["aerialway","airfield","airport","alcohol-shop","american-football","amusement-park","aquarium","arrow-es","art-gallery","attraction","bakery","bank","bar","barrier","baseball","basketball","bbq","beach","beer","bicycle","bicycle-share","blood-bank","boat-es","bowling-alley","bridge","building","building-alt1","bus","cafe","campsite","car","car-rental","car-repair","car-top-es","casino","castle","cemetery","charging-station","cinema","circle","circle-stroked","city","clothing-store","college","commercial","communications-tower","confectionery","convenience","cricket","cross","dam","danger","defibrillator","dentist","doctor","dog-park","drinking-water","embassy","emergency-phone","entrance","entrance-alt1","farm","fast-food","fence","ferry","fire-station","fitness-centre","florist","fuel","furniture","gaming","garden","garden-centre","gift","globe","golf","grocery","hairdresser","harbor","hardware","heart","heliport","home","horse-riding","hospital","ice-cream","industry","information","jewelry-store","karaoke","landmark","landuse","laundry","library","lighthouse","lodging","logging","marker","marker-stroked","mobile-phone","monument","mountain","museum","music","natural","oil-rig-es","optician","paint","park","park-alt1","parking","parking-garage","pharmacy","picnic-site","pitch","place-of-worship","playground","police","post","prison","rail","rail-light","rail-metro","ranger-station","recycling","religious-buddhist","religious-christian","religious-jewish","religious-muslim","residential-community","restaurant","restaurant-noodle","restaurant-pizza","restaurant-seafood","roadblock","rocket","school","scooter","shelter","shoe","shop","skateboard","skiing","slaughterhouse","slipway","snowmobile","soccer","square","square-stroked","stadium","star","star-stroked","suitcase","sushi","swimming","table-tennis","teahouse","telephone","tennis","theatre","toilet","town","town-hall","triangle","triangle-stroked","veterinary","viewpoint","village","volcano","volleyball","warehouse","waste-basket","watch","water","waterfall","watermill","wetland","wheelchair","windmill","zoo"]}')},function(module){module.exports=JSON.parse('["<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"aerialway-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9,4.5H6V3.1c0.1992-0.1183,0.3512-0.3021,0.43-0.52L9.5,2C9.7761,2,10,1.7761,10,1.5S9.7761,1,9.5,1&#xA;&#x9;L6.25,1.61C5.8847,1.1957,5.2528,1.156,4.8386,1.5213C4.713,1.6321,4.6172,1.7726,4.56,1.93L1.5,2.5C1.2239,2.5,1,2.7239,1,3&#xA;&#x9;s0.2239,0.5,0.5,0.5l3.25-0.61C4.8213,2.9732,4.9057,3.0442,5,3.1v1.4H2c-0.5523,0-1,0.4477-1,1V9c0,0.5523,0.4477,1,1,1h7&#xA;&#x9;c0.5523,0,1-0.4477,1-1V5.5C10,4.9477,9.5523,4.5,9,4.5z M5,8.5H2.5v-3H5V8.5z M8.5,8.5H6v-3h2.5V8.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"aerialway-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13,5H8V2.6c0.1854-0.1047,0.3325-0.2659,0.42-0.46L13.5,1.5C13.7761,1.5,14,1.2761,14,1s-0.2239-0.5-0.5-0.5L8.28,1.15&#xA;&#x9;C8.0954,0.9037,7.8077,0.7562,7.5,0.75C7.0963,0.752,6.7334,0.9966,6.58,1.37L1.5,2C1.2239,2,1,2.2239,1,2.5S1.2239,3,1.5,3&#xA;&#x9;l5.22-0.65C6.7967,2.4503,6.8917,2.5351,7,2.6V5H2C1.4477,5,1,5.4477,1,6v7c0,0.5523,0.4477,1,1,1h11c0.5523,0,1-0.4477,1-1V6&#xA;&#x9;C14,5.4477,13.5523,5,13,5z M7,11H3V7h4V11z M12,11H8V7h4V11z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"airfield-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path5\\" d=\\"M5,0.5H3.5C3,0.5,3,0,3.5,0h4&#xA;&#x9;C8,0,8,0.5,7.5,0.5H6C6,0.5,6.5,1,6.5,2v1H11v1.5l-4.5,2L6,10l1.5,0.5V11h-4v-0.5L5,10L4.5,6.5L0,4.5V3h4.5V2C4.5,1,5,0.5,5,0.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"airfield-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path5\\" d=\\"M6.8182,0.6818H4.7727&#xA;&#x9;C4.0909,0.6818,4.0909,0,4.7727,0h5.4545c0.6818,0,0.6818,0.6818,0,0.6818H8.1818c0,0,0.8182,0.5909,0.8182,1.9545V4h6v2L9,8l-0.5,5&#xA;&#x9;l2.5,1.3182V15H4v-0.6818L6.5,13L6,8L0,6V4h6V2.6364C6,1.2727,6.8182,0.6818,6.8182,0.6818z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"airport-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M6.5,6.4V6L11,6.5V5L6.5,3.2V1.5c0-1-0.5-1.5-1-1.5s-1,0.5-1,1.5v1.7L0,5v1.4L4.5,6v0.4v1.1v1.8L3,10v1l2.5-0.5L8,11v-1&#xA;&#x9;L6.5,9.2V7.5V6.4z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"airport-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path7712-0\\" d=\\"M15,6.8182L15,8.5l-6.5-1&#xA;&#x9;l-0.3182,4.7727L11,14v1l-3.5-0.6818L4,15v-1l2.8182-1.7273L6.5,7.5L0,8.5V6.8182L6.5,4.5v-3c0,0,0-1.5,1-1.5s1,1.5,1,1.5v2.8182&#xA;&#x9;L15,6.8182z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"alcohol-shop-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M7,4v2.5c0.0018,0.6341,0.4021,1.1986,1,1.41V10H7.5C7.2239,10,7,10.2239,7,10.5S7.2239,11,7.5,11h2&#xA;&#x9;c0.2761,0,0.5-0.2239,0.5-0.5S9.7761,10,9.5,10H9V7.91c0.5979-0.2114,0.9982-0.7759,1-1.41V4H7z M9.5,6.5c0,0.5523-0.4477,1-1,1&#xA;&#x9;s-1-0.4477-1-1v-2h2V6.5z M4.21,2.85V2.5c0.1961,0,0.355-0.1589,0.355-0.355S4.4061,1.79,4.21,1.79V1.44&#xA;&#x9;c0.0001-0.1933-0.1566-0.3501-0.3499-0.3501c-0.0034,0-0.0068,0-0.0101,0.0001H3.14C2.9468,1.0845,2.7857,1.2366,2.7801,1.4299&#xA;&#x9;C2.78,1.4332,2.78,1.4366,2.78,1.44v0.35c-0.1961,0-0.355,0.1589-0.355,0.355S2.5839,2.5,2.78,2.5v0.35C2.79,3.87,1,5,1,6v4.25&#xA;&#x9;c-0.0056,0.3866,0.3033,0.7044,0.6899,0.71c0.0067,0.0001,0.0134,0.0001,0.0201,0h3.58c0.3628-0.0329,0.6561-0.3097,0.71-0.67V6&#xA;&#x9;C6,5.09,4.21,3.81,4.21,2.85z M3.5,9C2.6716,9,2,8.3284,2,7.5S2.6716,6,3.5,6S5,6.6716,5,7.5S4.3284,9,3.5,9z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"alcohol-shop-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,4h-4v3.44l0,0c0,0,0,0,0,0.06c0.003,0.9096,0.6193,1.7026,1.5,1.93V13H11c-0.2761,0-0.5,0.2239-0.5,0.5&#xA;&#x9;S10.7239,14,11,14h2c0.2761,0,0.5-0.2239,0.5-0.5S13.2761,13,13,13h-0.5V9.43c0.8807-0.2274,1.497-1.0204,1.5-1.93c0,0,0,0,0-0.06&#xA;&#x9;l0,0V4z M13,7.5c0,0.5523-0.4477,1-1,1s-1-0.4477-1-1V5h2V7.5z M5.5,2.5V2C5.7761,2,6,1.7761,6,1.5S5.7761,1,5.5,1V0.5&#xA;&#x9;C5.5,0.2239,5.2761,0,5,0H4C3.7239,0,3.5,0.2239,3.5,0.5V1C3.2239,1,3,1.2239,3,1.5S3.2239,2,3.5,2v0.5C3.5,3.93,1,5.57,1,7v6&#xA;&#x9;c0,0.5523,0.4477,1,1,1h5c0.5318-0.0465,0.9535-0.4682,1-1V7C8,5.65,5.5,3.85,5.5,2.5z M4.5,12C3.1193,12,2,10.8807,2,9.5&#xA;&#x9;S3.1193,7,4.5,7S7,8.1193,7,9.5S5.8807,12,4.5,12z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"american-football-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.53,2C2.47,2,1,5.5,1,5.5S2.47,9,5.53,9S10,5.5,10,5.5S8.6,2,5.53,2z M7,6H4C3.7239,6,3.5,5.7761,3.5,5.5S3.7239,5,4,5h3&#xA;&#x9;c0.2761,0,0.5,0.2239,0.5,0.5S7.2761,6,7,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"american-football-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M7.53,3C3.09,3,1,7.5,1,7.5S3.09,12,7.53,12S14,7.5,14,7.5S12,3,7.53,3z M11,7v1.5C11,8.7761,10.7761,9,10.5,9&#xA;&#x9;S10,8.7761,10,8.5V8H8v0.5C8,8.7761,7.7761,9,7.5,9S7,8.7761,7,8.5V8H5v0.5C5,8.7761,4.7761,9,4.5,9S4,8.7761,4,8.5v-2&#xA;&#x9;C4,6.2239,4.2239,6,4.5,6S5,6.2239,5,6.5V7h2V6.5C7,6.2239,7.2239,6,7.5,6S8,6.2239,8,6.5V7h2V6.5C10,6.2239,10.2239,6,10.5,6&#xA;&#x9;S11,6.2239,11,6.5V7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"amusement-park-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path5082\\" d=\\"M5.5,1C3.0206,1,1,3.0206,1,5.5c0,1.7919,1.0627,3.3316,2.584,4.0547L2.5,11h6L7.416,9.5547&#xA;&#x9;C8.9373,8.8316,10,7.2919,10,5.5C10,3.0206,7.9794,1,5.5,1z M5.375,2.0117v1.9941c-0.3108,0.026-0.6057,0.1482-0.8438,0.3496&#xA;&#x9;L3.1191,2.9434C3.7146,2.3888,4.5013,2.0428,5.375,2.0117z M5.625,2.0117c0.8737,0.0311,1.6604,0.3771,2.2559,0.9316L6.4688,4.3555&#xA;&#x9;c-0.0007-0.0007-0.0013-0.0013-0.002-0.002C6.229,4.1532,5.9348,4.0317,5.625,4.0059V2.0117z M2.9434,3.1191l1.4121,1.4121&#xA;&#x9;c-0.0007,0.0007-0.0013,0.0013-0.002,0.002C4.1532,4.771,4.0317,5.0652,4.0059,5.375H2.0117&#xA;&#x9;C2.0428,4.5013,2.3888,3.7146,2.9434,3.1191z M8.0566,3.1191C8.6112,3.7146,8.9572,4.5013,8.9883,5.375H6.9941&#xA;&#x9;c-0.026-0.3108-0.1482-0.6057-0.3496-0.8438L8.0566,3.1191z M2.0117,5.625h1.9941c0.026,0.3108,0.1482,0.6057,0.3496,0.8438&#xA;&#x9;L2.9434,7.8809C2.3888,7.2854,2.0428,6.4987,2.0117,5.625z M6.9941,5.625h1.9941C8.9572,6.4987,8.6112,7.2854,8.0566,7.8809&#xA;&#x9;L6.6445,6.4688c0.0007-0.0007,0.0013-0.0013,0.002-0.002C6.8468,6.229,6.9683,5.9348,6.9941,5.625z M4.5312,6.6445&#xA;&#x9;c0.0007,0.0007,0.0013,0.0013,0.002,0.002C4.6716,6.7624,4.8297,6.8524,5,6.9121v2.0391C4.2765,8.8476,3.6278,8.5303,3.1191,8.0566&#xA;&#x9;L4.5312,6.6445z M6.4688,6.6445l1.4121,1.4121C7.3722,8.5303,6.7235,8.8476,6,8.9512V6.9121C6.1711,6.852,6.33,6.7613,6.4688,6.6445&#xA;&#x9;z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"amusement-park-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path5082\\" d=\\"M7.5,0C3.919,0,1,2.919,1,6.5c0,2.3161,1.2251,4.3484,3.0566,5.5H4l-1,2h9l-1-2h-0.0566&#xA;&#x9;C12.7749,10.8484,14,8.8161,14,6.5C14,2.919,11.081,0,7.5,0z M7.375,1.5059v3.5c-0.3108,0.026-0.6057,0.1482-0.8438,0.3496&#xA;&#x9;L4.0566,2.8809C4.9243,2.0555,6.0851,1.5376,7.375,1.5059z M7.625,1.5059c1.2899,0.0317,2.4507,0.5496,3.3184,1.375L8.4688,5.3555&#xA;&#x9;c-0.0007-0.0007-0.0013-0.0013-0.002-0.002C8.229,5.1532,7.9348,5.0317,7.625,5.0059V1.5059z M3.8809,3.0566l2.4746,2.4746&#xA;&#x9;c-0.0007,0.0007-0.0013,0.0013-0.002,0.002C6.1532,5.771,6.0317,6.0652,6.0059,6.375h-3.5&#xA;&#x9;C2.5376,5.0851,3.0555,3.9243,3.8809,3.0566z M11.1191,3.0566c0.8254,0.8676,1.3433,2.0285,1.375,3.3184h-3.5&#xA;&#x9;c-0.026-0.3108-0.1482-0.6057-0.3496-0.8438L11.1191,3.0566z M2.5059,6.625h3.5c0.026,0.3108,0.1482,0.6057,0.3496,0.8438&#xA;&#x9;L3.8809,9.9434C3.0555,9.0757,2.5376,7.9149,2.5059,6.625z M8.9941,6.625h3.5c-0.0317,1.2899-0.5496,2.4507-1.375,3.3184&#xA;&#x9;L8.6445,7.4688c0.0007-0.0007,0.0013-0.0013,0.002-0.002C8.8468,7.229,8.9683,6.9348,8.9941,6.625z M6.5312,7.6445&#xA;&#x9;c0.0007,0.0007,0.0013,0.0013,0.002,0.002C6.6716,7.7624,6.8297,7.8524,7,7.9121v3.5625c-1.1403-0.1124-2.1606-0.6108-2.9434-1.3555&#xA;&#x9;L6.5312,7.6445z M8.4688,7.6445l2.4746,2.4746c-0.7828,0.7447-1.803,1.243-2.9434,1.3555V7.9121&#xA;&#x9;C8.1711,7.852,8.33,7.7613,8.4688,7.6445z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"aquarium-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path3338\\" d=\\"M8,1C7.1243,1,6.1491,1.092,4.9961,1.5273&#xA;&#x9;C3.8431,1.9622,2.8479,2.6569,2,3.5C1.1477,4.3474,0,6,0,6.5s1.1354,1.9426,2.6777,2.6211&#xA;&#x9;c1.5424,0.6784,2.3909,0.7983,3.2832,0.8945c0.7968,0.086,1.9424-0.027,2.8848-0.2324C9.5925,9.6205,10.9937,9.3099,11,9&#xA;&#x9;c0,0-2.7561-0.063-3-0.5c-0.2486-0.4448-0.2494-1.5858,0-2c0.258-0.4283,2.5,1,2.5,1c0.6439,0.2576,0.6439-4.2576,0-4&#xA;&#x9;c0,0-2.2768,1.4474-2.5,1C7.7506,4,7.7506,3,8,2.5C8.2232,2.0526,11,2,11,2C11,1.5,8.8757,1,8,1z M3.5137,4.502&#xA;&#x9;c0.5598,0.0001,1.0136,0.4539,1.0137,1.0137C4.5272,6.0754,4.0735,6.5292,3.5137,6.5293C2.9539,6.5292,2.5001,6.0754,2.5,5.5156&#xA;&#x9;C2.5001,4.9558,2.9539,4.5021,3.5137,4.502z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"aquarium-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M10.9,11.6c-0.3-0.6-0.3-2.3,0-2.8c0.4-0.6,3.4,1.4,3.4,1.4c0.9,0.4,0.9-6.1,0-5.7&#xA;&#x9;c0,0-3.1,2.1-3.4,1.4c-0.3-0.7-0.3-2.1,0-2.8C11.2,2.5,15,2.4,15,2.4C15,1.7,12.1,1,10.9,1S8.4,1.1,6.8,1.8C5.2,2.4,3.9,3.4,2.7,4.6&#xA;&#x9;S0,8.2,0,8.9s1.5,2.8,3.7,3.7s3.3,1.1,4.5,1.3c1.1,0.1,2.6,0,3.9-0.3c1-0.2,2.9-0.7,2.9-1.1C15,12.3,11.2,12.2,10.9,11.6z M4.5,9.3&#xA;&#x9;C3.7,9.3,3,8.6,3,7.8s0.7-1.5,1.5-1.5S6,7,6,7.8S5.3,9.3,4.5,9.3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"arrow-es-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M6.68912398,9.49179828 C6.31352747,9.03258227 5.76080389,8.34688747 5.74868301,8.33447489 C5.68498686,8.26924579 5.59708162,8.22891566 5.5,8.22891566 C5.40215559,8.22891566 5.31363232,8.26988205 5.24982005,8.33601706 C5.23668308,8.34963221 4.67555385,9.04578733 4.30561702,9.50344914 C4.05607605,9.77151155 3.76174927,9.65438843 3.68323365,9.61819425 C3.15316969,9.38401112 2.86453945,9.14544458 2.67073059,9.00338745 C2.53083631,8.90084839 2.45346069,8.64973179 2.53083631,8.41444699 C2.99857207,6.99215 3.87240865,4.20383407 5.17605634,1.20963855 C5.23626027,1.08584236 5.35836421,1 5.5,1 C5.63991852,1 5.76077596,1.08377338 5.81756824,1.2051232 C7.12501397,4.20572268 8,7.02011108 8.46101379,8.41444699 C8.54510498,8.66885376 8.46030395,8.8727609 8.35740816,8.97040303 C8.22070313,9.10012817 7.82549445,9.39792108 7.28729653,9.63108766 C7.08,9.71022034 6.85346985,9.68 6.68912398,9.49179828 Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"arrow-es-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M10.2605799,13.3863593 C10.1395968,13.4287864 10.0527368,13.45 10,13.45 C9.86888463,13.45 9.7495566,13.3995324 9.66038175,13.3169629 C9.62336122,13.2826846 7.87888372,11.1717162 7.85312988,11.1460236 C7.76268134,11.05579 7.6378559,11 7.5,11 C7.36106093,11 7.23535789,11.0566702 7.14474446,11.1481569 C7.11712067,11.176047 5.38316951,13.2743383 5.3512134,13.3058781 C5.26092214,13.3949932 5.13688483,13.45 5,13.45 C4.94846592,13.45 4.86607927,13.4308817 4.75284004,13.3926451 C3.95322232,13.0192244 3.32116699,12.5002136 3.1295929,12.3130188 C3.04943242,12.222975 2.999749,12.1044865 2.999749,11.9743938 C2.999749,11.8971872 3.01724809,11.8240676 3.04849642,11.7587851 L7.04,1.29 L7.04612499,1.289958 C7.12548958,1.1187486 7.29887718,1 7.5,1 C7.6986843,1 7.87030186,1.11588651 7.9509469,1.28375376 L7.95635553,1.28371668 L11.962677,11.7834625 C11.993942,11.8487592 12.0005287,11.9135014 12.0005287,11.99073 C12.0005287,12.1135282 11.962677,12.2262726 11.8828125,12.3130188 C11.7159576,12.47 10.804184,13.1774445 10.2605799,13.3863593 Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"art-gallery-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8.21,3L5.85,0.65C5.6555,0.4539,5.339,0.4526,5.1429,0.6471C5.1419,0.6481,5.141,0.649,5.14,0.65L2.79,3H1.5&#xA;&#x9;C1.2239,3,1,3.2239,1,3.5v6C1,9.7761,1.2239,10,1.5,10h8C9.7761,10,10,9.7761,10,9.5v-6C10,3.2239,9.7761,3,9.5,3H8.21z M5.5,1.71&#xA;&#x9;L6.79,3H4.21L5.5,1.71z M9,9H2V4h7V9z M4.5,5.5C4.5,5.7761,4.2761,6,4,6S3.5,5.7761,3.5,5.5S3.7239,5,4,5S4.5,5.2239,4.5,5.5z M8,8&#xA;&#x9;H4l0.75-1.5l0.5,1L6.5,5L8,8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"art-gallery-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M10.71,4L7.85,1.15C7.6555,0.9539,7.339,0.9526,7.1429,1.1471C7.1419,1.1481,7.141,1.149,7.14,1.15L4.29,4H1.5&#xA;&#x9;C1.2239,4,1,4.2239,1,4.5v9C1,13.7761,1.2239,14,1.5,14h12c0.2761,0,0.5-0.2239,0.5-0.5v-9C14,4.2239,13.7761,4,13.5,4H10.71z&#xA;&#x9; M7.5,2.21L9.29,4H5.71L7.5,2.21z M13,13H2V5h11V13z M5,8C4.4477,8,4,7.5523,4,7s0.4477-1,1-1s1,0.4477,1,1S5.5523,8,5,8z M12,12&#xA;&#x9;H4.5L6,9l1.25,2.5L9.5,7L12,12z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"attraction-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect7143\\" d=\\"M4.5,1.5c0,0-0.5,0-0.7,0.5L3.5,2.5H1c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1h9&#xA;&#x9;c0.6,0,1-0.4,1-1v-5c0-0.6-0.4-1-1-1H7.5L7.2,2C7,1.5,6.5,1.5,6.5,1.5H4.5z M5.5,3.5C6.9,3.5,8,4.6,8,6S6.9,8.5,5.5,8.5S3,7.4,3,6&#xA;&#x9;S4.1,3.5,5.5,3.5z M5.5,5c-0.6,0-1,0.4-1,1s0.4,1,1,1s1-0.4,1-1S6.1,5,5.5,5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"attraction-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect7143\\" d=\\"M6,2C5.446,2,5.2478,2.5045,5,3L4.5,4h-2C1.669,4,1,4.669,1,5.5v5C1,11.331,1.669,12,2.5,12h10&#xA;&#x9;c0.831,0,1.5-0.669,1.5-1.5v-5C14,4.669,13.331,4,12.5,4h-2L10,3C9.75,2.5,9.554,2,9,2H6z M2.5,5C2.7761,5,3,5.2239,3,5.5&#xA;&#x9;S2.7761,6,2.5,6S2,5.7761,2,5.5S2.2239,5,2.5,5z M7.5,5c1.6569,0,3,1.3431,3,3s-1.3431,3-3,3s-3-1.3431-3-3S5.8431,5,7.5,5z&#xA;&#x9; M7.5,6.5C6.6716,6.5,6,7.1716,6,8l0,0c0,0.8284,0.6716,1.5,1.5,1.5l0,0C8.3284,9.5,9,8.8284,9,8l0,0C9,7.1716,8.3284,6.5,7.5,6.5&#xA;&#x9;L7.5,6.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bakery-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path5836\\" d=\\"M4.5,2c-1,0-1,1-1,1L5,7.5&#xA;&#x9;C5,7.5,5,8,5.5,8S6,7.5,6,7.5L7.5,3c0,0,0-1-1-1H4.5z M9,3.5l-2,4h1.5l1,1H10c1,0,1-0.9,1-0.9V6.3L9,3.5z M0,6.3v1.2&#xA;&#x9;c0,0,0.0296,1.0097,1,1c0.9704-0.0097,0.5,0,0.5,0l1-1H4l-2-4L0,6.3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bakery-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path5230\\" d=\\"M5.2941,4.3824L6,9.5&#xA;&#x9;c0,0,0,1,1,1h1c1,0,1-1,1-1l0.7059-5.1176C9.7059,3,7.5,3,7.5,3S5.291,3,5.2941,4.3824z M3.5,5C2,5,2,6,2,6l1,4h1.5&#xA;&#x9;c0.755,0,0.7941-0.7647,0.7941-0.7647L4.5,5H3.5z M1.5,7.5c0,0-0.6176-0.0294-1.0588,0.4118C0,8.3529,0,8.7941,0,8.7941V11h0.8824&#xA;&#x9;C2,11,2,10,2,10L1.5,7.5z\\"/>\\n  <path id=\\"path5230-2\\" d=\\"M11.5,5C13,5,13,6,13,6l-1,4h-1.5&#xA;&#x9;c-0.755,0-0.7941-0.7647-0.7941-0.7647L10.5,5H11.5z M13.5,7.5c0,0,0.6176-0.0294,1.0588,0.4118C15,8.3529,15,8.7941,15,8.7941V11&#xA;&#x9;h-0.8824C13,11,13,10,13,10L13.5,7.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bank-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path5622\\" d=\\"M1,2C0,2,0,3,0,3v5c0,1,1,1,1,1h9c1,0,1-1,1-1V3c0,0,0-1-1-1H1z M1,3h1.5C2.7761,3,3,3.2239,3,3.5&#xA;&#x9;S2.7761,4,2.5,4S2,3.7761,2,3.5L1.5,4C1.7761,4,2,4.2239,2,4.5S1.7761,5,1.5,5S1,4.7761,1,4.5V3z M5.5,3c1.1046,0,2,1.1193,2,2.5&#xA;&#x9;S6.6046,8,5.5,8s-2-1.1193-2-2.5S4.3954,3,5.5,3z M8.5,3H10v1.5C10,4.7761,9.7761,5,9.5,5S9,4.7761,9,4.5S9.2239,4,9.5,4L9,3.5&#xA;&#x9;C9,3.7761,8.7761,4,8.5,4S8,3.7761,8,3.5S8.2239,3,8.5,3z M1.5,6C1.7761,6,2,6.2239,2,6.5S1.7761,7,1.5,7L2,7.5&#xA;&#x9;C2,7.2239,2.2239,7,2.5,7S3,7.2239,3,7.5S2.7761,8,2.5,8H1V6.5C1,6.2239,1.2239,6,1.5,6z M9.5,6C9.7761,6,10,6.2239,10,6.5V8H8.5&#xA;&#x9;C8.2239,8,8,7.7761,8,7.5S8.2239,7,8.5,7S9,7.2239,9,7.5L9.5,7C9.2239,7,9,6.7761,9,6.5S9.2239,6,9.5,6z\\"/>\\n  <path id=\\"path5835\\" d=\\"M4.9023,4.25C4.8261,4.321,4.7584,4.4051,4.7012,4.5h1.5977c-0.0572-0.0949-0.125-0.179-0.2012-0.25H4.9023z&#xA;&#x9; M4.5859,4.75C4.5575,4.8303,4.5359,4.9141,4.5215,5h1.959C6.4661,4.9141,6.4445,4.8303,6.416,4.75H4.5859z M4.5,5.25&#xA;&#x9;C4.4998,5.3339,4.5063,5.4177,4.5195,5.5h1.959C6.4924,5.4178,6.4996,5.334,6.5,5.25H4.5z M4.5859,5.75&#xA;&#x9;C4.6171,5.8387,4.6564,5.9226,4.7031,6h1.5957c0.046-0.0775,0.0847-0.1614,0.1152-0.25H4.5859z M4.9023,6.25&#xA;&#x9;c0.0109,0.0107,0.022,0.0211,0.0332,0.0312L4.5,6.5h2L6.0645,6.2812C6.0757,6.2711,6.0868,6.2607,6.0977,6.25H4.9023z M4.582,6.75&#xA;&#x9;C4.611,6.8289,4.638,6.9091,4.6914,7h1.627c0.0524-0.091,0.0778-0.1711,0.1055-0.25H4.582z M4.8926,7.25&#xA;&#x9;C5.0395,7.3915,5.2332,7.5,5.5,7.5c0.2739,0,0.4701-0.1085,0.6172-0.25H4.8926z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bank-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect5668\\" d=\\"M1,3C0.446,3,0,3.446,0,4v7c0,0.554,0.446,1,1,1h13c0.554,0,1-0.446,1-1V4c0-0.554-0.446-1-1-1H1z M1,4h1.5&#xA;&#x9;C2.7761,4,3,4.2239,3,4.5S2.7761,5,2.5,5S2,4.7761,2,4.5L1.5,5C1.7761,5,2,5.2239,2,5.5S1.7761,6,1.5,6S1,5.7761,1,5.5V4z M7.5,4&#xA;&#x9;C8.8807,4,10,5.567,10,7.5l0,0C10,9.433,8.8807,11,7.5,11S5,9.433,5,7.5S6.1193,4,7.5,4z M12.5,4H14v1.5C14,5.7761,13.7761,6,13.5,6&#xA;&#x9;S13,5.7761,13,5.5S13.2239,5,13.5,5L13,4.5C13,4.7761,12.7761,5,12.5,5S12,4.7761,12,4.5S12.2239,4,12.5,4z M7.5,5.5&#xA;&#x9;c-0.323,0-0.5336,0.1088-0.6816,0.25h1.3633C8.0336,5.6088,7.823,5.5,7.5,5.5z M6.625,6C6.5795,6.091,6.5633,6.1711,6.5449,6.25&#xA;&#x9;h1.9102C8.4367,6.1711,8.4205,6.091,8.375,6H6.625z M6.5,6.5v0.25h2V6.5H6.5z M6.5,7v0.25h2V7H6.5z M6.5,7.5v0.25h2V7.5H6.5z M6.5,8&#xA;&#x9;L6.25,8.25h2L8.5,8H6.5z M6,8.5c0,0,0.0353,0.1024,0.1016,0.25H8.375L8,8.5H6z M1.5,9C1.7761,9,2,9.2239,2,9.5S1.7761,10,1.5,10&#xA;&#x9;L2,10.5C2,10.2239,2.2239,10,2.5,10S3,10.2239,3,10.5S2.7761,11,2.5,11H1V9.5C1,9.2239,1.2239,9,1.5,9z M6.2383,9&#xA;&#x9;C6.2842,9.0856,6.3144,9.159,6.375,9.25h2.2676C8.7092,9.1121,8.75,9,8.75,9H6.2383z M13.5,9C13.7761,9,14,9.2239,14,9.5V11h-1.5&#xA;&#x9;c-0.2761,0-0.5-0.2239-0.5-0.5s0.2239-0.5,0.5-0.5s0.5,0.2239,0.5,0.5l0.5-0.5C13.2239,10,13,9.7761,13,9.5S13.2239,9,13.5,9z&#xA;&#x9; M6.5664,9.5c0.0786,0.0912,0.1647,0.1763,0.2598,0.25h1.4199C8.3462,9.6727,8.4338,9.5883,8.5,9.5H6.5664z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bar-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path15601-4-2_2_\\" d=\\"M5.4883,1C4.9759,1,0.5,1,1,1.5L5,6v2.5C5,9,2.5,9,2.5,10h6&#xA;&#x9;C8.5,9,6,9,6,8.5V6l4-4.5C10.5,1,6.0006,1,5.4883,1z M2.5,2h6l-1,1h-4L2.5,2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bar-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path4\\" d=\\"M7.5,1c-2,0-7,0.25-6.5,0.75L7,8v4&#xA;&#x9;c0,1-3,0.5-3,2h7c0-1.5-3-1-3-2V8l6-6.25C14.5,1.25,9.5,1,7.5,1z M7.5,2c2.5,0,4.75,0.25,4.75,0.25L11.5,3h-8L2.75,2.25&#xA;&#x9;C2.75,2.25,5,2,7.5,2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"barrier-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.5,2h-8a.5.5,0,0,0-.5.5v4a.5.5,0,0,0,.5.5H2V9.5a.5.5,0,0,0,1,0V9H8v.5a.5.5,0,0,0,1,0V7h.5a.5.5,0,0,0,.5-.5v-4A.5.5,0,0,0,9.5,2ZM2,3H3.5l3,3h-2L2,3.5ZM2,6V4.5L3.5,6ZM3,8V7H8V8ZM9,6H7.5l-3-3h2L9,5.5ZM9,4.5,7.5,3H9Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"barrier-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13,3H2A1,1,0,0,0,1,4v6a1,1,0,0,0,1,1H3v2.5a.5.5,0,0,0,1,0V13h7v.5a.5.5,0,0,0,1,0V11h1a1,1,0,0,0,1-1V4A1,1,0,0,0,13,3Zm0,1V6L11,4ZM9.5,4,13,7.5V10L7,4Zm-4,6L2,6.5V4l6,6ZM2,10V8l2,2Zm9,2H4V11h7Zm-.207-2H9.5l-6-6h2l6,6Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"baseball-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M7,3c0,0.5523-0.4477,1-1,1S5,3.5523,5,3s0.4477-1,1-1S7,2.4477,7,3z M9.85,10.24L9.85,10.24l-3-4.85&#xA;&#x9;C6.7391,5.2011,6.5603,5.0616,6.35,5H2.5C2.2239,5,2,5.2239,2,5.5S2.2239,6,2.5,6H5l0.92,1.09l-2.73,3l0,0&#xA;&#x9;C3.0637,10.1876,2.9928,10.3405,3,10.5C3,10.7761,3.2239,11,3.5,11c0.1224-0.0006,0.2401-0.047,0.33-0.13l0,0l3-2.71L9,10.81l0,0&#xA;&#x9;c0.0912,0.1178,0.231,0.1877,0.38,0.19c0.2761,0,0.5-0.2239,0.5-0.5C9.8938,10.4122,9.8834,10.3223,9.85,10.24z M4,0.28&#xA;&#x9;C4,0.1254,3.8746,0,3.72,0C3.6221,0.0262,3.5348,0.0821,3.47,0.16L2,4.59C1.9941,4.6331,1.9941,4.6769,2,4.72&#xA;&#x9;C2,4.8746,2.1254,5,2.28,5c0.1015-0.0243,0.1926-0.0803,0.26-0.16L4,0.41C4.006,0.3669,4.006,0.3231,4,0.28z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"baseball-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M10,3.5C10,4.3284,9.3284,5,8.5,5S7,4.3284,7,3.5S7.6716,2,8.5,2S10,2.6716,10,3.5z M7,0.28C7,0.1254,6.8746,0,6.72,0&#xA;&#x9;c0,0,0,0,0,0C6.6221,0.0262,6.5348,0.0821,6.47,0.16L4,4.59C3.9941,4.6331,3.9941,4.6769,4,4.72C4,4.8746,4.1254,5,4.28,5&#xA;&#x9;c0.1015-0.0243,0.1926-0.0803,0.26-0.16L7,0.41C7.006,0.3669,7.006,0.3231,7,0.28z M12.9,14.2L12.9,14.2L10,6.39l0,0&#xA;&#x9;C9.9526,6.1627,9.7522,5.9999,9.52,6h-5c-0.2761,0-0.5,0.2239-0.5,0.5S4.2439,7,4.52,7H7l1.45,2.51l-4.27,4.61l0,0&#xA;&#x9;C4.0659,14.2132,3.9998,14.3527,4,14.5C4,14.7761,4.2239,15,4.5,15c0.1224-0.0006,0.2401-0.047,0.33-0.13l0,0l4.45-4.15l2.76,4l0,0&#xA;&#x9;c0.0895,0.1592,0.2574,0.2584,0.44,0.26c0.2796,0.0002,0.5092-0.2207,0.52-0.5C12.9958,14.3787,12.961,14.281,12.9,14.2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"basketball-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"icon_concepts:_sports_leisure\\" d=\\"M2.63,3.51a5.1555,5.1555,0,0,1,.34,1.48H2.04A3.2586,3.2586,0,0,1,2.63,3.51Zm.55-.63a6.2022,6.2022,0,0,1,.55,2.11H5.12V2.01A3.4256,3.4256,0,0,0,3.18,2.88Zm2.7-.87V4.99H7.27a6.2022,6.2022,0,0,1,.55-2.11A3.4256,3.4256,0,0,0,5.88,2.01Zm2.49,1.5a5.1555,5.1555,0,0,0-.34,1.48h.93A3.2586,3.2586,0,0,0,8.37,3.51ZM9.9,6.5a.4952.4952,0,0,1-.49.5H8.44L7.91,8.05v1.7a.2176.2176,0,0,1-.14.2.236.236,0,0,1-.08.02.1987.1987,0,0,1-.16-.07l-.75-.74-1.16.77a.2107.2107,0,0,1-.24,0L4.22,9.16l-.75.74a.2222.2222,0,0,1-.38-.15V8.05L2.57,7H1.6a.5.5,0,1,1,0-1H9.4a.4951.4951,0,0,1,.5.49ZM3.53,8V9.22l.5-.5c.01,0,.01-.01.02-.01L5.1,7H3.06l.45.9A.3561.3561,0,0,1,3.53,8Zm2.97.82-1-1.63-1,1.63,1,.67ZM7.94,7H5.9L6.95,8.71c.01,0,.01.01.02.01l.5.5V8a.3561.3561,0,0,1,.02-.1Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"basketball-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"icon_concepts:_sports_leisure\\" d=\\"M3.66,7.0016H2.03a5.3231,5.3231,0,0,1,1.01-2.71A8.7122,8.7122,0,0,1,3.66,7.0016Zm1.075,0h2.34v-4.97a5.4585,5.4585,0,0,0-3.24,1.44A9.2947,9.2947,0,0,1,4.735,7.0016Zm3.19-4.97v4.97h2.34a9.2947,9.2947,0,0,1,.9-3.53A5.4585,5.4585,0,0,0,7.925,2.0316Zm4.035,2.26a8.7122,8.7122,0,0,0-.62,2.71h1.63A5.3231,5.3231,0,0,0,11.96,4.2916ZM14,8.7516a.7555.7555,0,0,1-.75.75H11.72l-.76,1.52v2.38a.392.392,0,0,1-.24.35.5863.5863,0,0,1-.14.02.3274.3274,0,0,1-.26-.11l-1.02-1.01-1.59,1.06a.3975.3975,0,0,1-.42,0l-1.59-1.06-1.02,1.01a.3709.3709,0,0,1-.4.09.392.392,0,0,1-.24-.35v-2.38l-.76-1.52H1.75a.75.75,0,0,1,0-1.5h11.5A.749.749,0,0,1,14,8.75Zm-7.14.75H4.12l.63,1.27a.3175.3175,0,0,1,.04.16v1.56l.56-.55Zm1.98,2.55L7.5,9.8916l-1.34,2.16,1.34.9Zm2.05-2.55H8.14l1.51,2.44.56.55v-1.56a.3175.3175,0,0,1,.04-.16Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"bbq-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M4,1.75c0,0,0-1,1-1c0,0,0.5,0,0.5-0.5C5.5,0.1119,5.6119,0,5.75,0S6,0.1119,6,0.25c0,0,0,1-1,1c0,0-0.5,0-0.5,0.5&#xA;&#x9;C4.5,1.8881,4.3881,2,4.25,2S4,1.8881,4,1.75z M2.25,2C2.3881,2,2.5,1.8881,2.5,1.75c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1&#xA;&#x9;C4,0.1119,3.8881,0,3.75,0S3.5,0.1119,3.5,0.25c0,0.5-0.5,0.5-0.5,0.5c-1,0-1,1-1,1C2,1.8881,2.1119,2,2.25,2z M6.25,2&#xA;&#x9;C6.3881,2,6.5,1.8881,6.5,1.75c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1C8,0.1119,7.8881,0,7.75,0S7.5,0.1119,7.5,0.25&#xA;&#x9;c0,0.5-0.5,0.5-0.5,0.5c-1,0-1,1-1,1C6,1.8881,6.1119,2,6.25,2z M9.75,0C9.6119,0,9.5,0.1119,9.5,0.25c0,0.5-0.5,0.5-0.5,0.5&#xA;&#x9;c-1,0-1,1-1,1C8,1.8881,8.1119,2,8.25,2S8.5,1.8881,8.5,1.75c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1C10,0.1119,9.8881,0,9.75,0z&#xA;&#x9; M6.6746,5.865C6.6745,5.8654,6.6741,5.8657,6.674,5.866l2.3,4.782v0.009c0.055,0.1215,0.0014,0.2646-0.12,0.32&#xA;&#x9;c-0.1237,0.0574-0.2705,0.0037-0.328-0.12L7.845,9.5H4c0,0.2029-0.0411,0.4036-0.1209,0.5901&#xA;&#x9;C3.5532,10.8518,2.6717,11.205,1.91,10.8792c-0.7617-0.3259-1.115-1.2074-0.7891-1.9691C1.4468,8.1484,2.3283,7.7952,3.09,8.121&#xA;&#x9;c0.0531,0.0208,0.1048,0.0449,0.155,0.072L4.278,5.85C2.9692,5.5125,2.0408,4.351,2,3h7C9,3,8.9985,5.2823,6.6746,5.865z M3.25,9.5&#xA;&#x9;c0-0.4142-0.3358-0.75-0.75-0.75S1.75,9.0858,1.75,9.5s0.3358,0.75,0.75,0.75S3.25,9.9142,3.25,9.5z M6.1731,5.9562&#xA;&#x9;C5.9635,5.9829,5.7419,6,5.5,6C5.2147,6,4.787,5.953,4.787,5.953l-1.144,2.58C3.7659,8.6688,3.8607,8.8275,3.922,9h3.673&#xA;&#x9;L6.1731,5.9562z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"bbq-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M9.32,7.655C10.8782,7.108,11.9471,5.6506,12,4H3c0.053,1.6299,1.0978,3.0728,2.63,3.631L4.923,9.044&#xA;&#x9;c-1.3571-0.2355-2.6482,0.6737-2.8837,2.0308s0.6737,2.6482,2.0308,2.8837C4.9927,14.1187,5.9273,13.7485,6.49,13h4.223l0.335,0.717&#xA;&#x9;c0.0836,0.1735,0.2594,0.2836,0.452,0.283c0.0733,0.0003,0.1457-0.0158,0.212-0.047c0.2497-0.117,0.3575-0.4141,0.241-0.664&#xA;&#x9;L9.32,7.655z M4.5,12.75c-0.6904,0-1.25-0.5596-1.25-1.25s0.5596-1.25,1.25-1.25s1.25,0.5596,1.25,1.25&#xA;&#x9;C5.7484,12.1897,5.1897,12.7484,4.5,12.75z M6.95,12c0.2066-1.007-0.2268-2.0374-1.091-2.594L6.6,7.923&#xA;&#x9;c0.577,0.1042,1.168,0.1042,1.745,0l1.9,4.07L6.95,12z M4.75,1C4.6119,1,4.5,1.1119,4.5,1.25c0,0.5-0.5,0.5-0.5,0.5c-1,0-1,1-1,1&#xA;&#x9;C3,2.8881,3.1119,3,3.25,3S3.5,2.8881,3.5,2.75c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1C5,1.1119,4.8881,1,4.75,1z M6.75,1&#xA;&#x9;C6.6119,1,6.5,1.1119,6.5,1.25c0,0.5-0.5,0.5-0.5,0.5c-1,0-1,1-1,1C5,2.8881,5.1119,3,5.25,3S5.5,2.8881,5.5,2.75&#xA;&#x9;c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1C7,1.1119,6.8881,1,6.75,1z M8.75,1C8.6119,1,8.5,1.1119,8.5,1.25c0,0.5-0.5,0.5-0.5,0.5&#xA;&#x9;c-1,0-1,1-1,1C7,2.8881,7.1119,3,7.25,3S7.5,2.8881,7.5,2.75c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1C9,1.1119,8.8881,1,8.75,1z M10.75,1&#xA;&#x9;c-0.1381,0-0.25,0.1119-0.25,0.25c0,0.5-0.5,0.5-0.5,0.5c-1,0-1,1-1,1C9,2.8881,9.1119,3,9.25,3S9.5,2.8881,9.5,2.75&#xA;&#x9;c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1C11,1.1119,10.8881,1,10.75,1z M12.75,1c-0.1381,0-0.25,0.1119-0.25,0.25c0,0.5-0.5,0.5-0.5,0.5&#xA;&#x9;c-1,0-1,1-1,1C11,2.8881,11.1119,3,11.25,3s0.25-0.1119,0.25-0.25c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1C13,1.1119,12.8881,1,12.75,1z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"beach-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M3.5,1.65V4.47a1.7027,1.7027,0,0,0-.58-.04c-.28.07-.56.47-.83.57A3.1261,3.1261,0,0,1,3.5,1.65Zm2.31-.62L7.26,3.45a1.2164,1.2164,0,0,1,.45-.31c.27-.07.7.13,1,.09A3.1057,3.1057,0,0,0,5.81,1.03ZM.9839,10h8.99A4.8406,4.8406,0,0,0,6.9,8.68L5.57,3.74c.46-.04,1.02.06,1.27-.01L5.23,1.04a3.5252,3.5252,0,0,0-.62.11A2.96,2.96,0,0,0,4,1.38v3.1c.25-.08.68-.42,1.08-.6L6.35,8.63q-.39-.03-.84-.03C1.99,8.6.9839,10,.9839,10Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"beach-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M5.3608,1.67l-.01,4.02a4.4523,4.4523,0,0,0-1.1-.11c-.37.1-.74.63-1.1.76A4.2019,4.2019,0,0,1,5.3608,1.67Zm2.41-.64,2.03,3.45a3.1832,3.1832,0,0,1,.84-.61c.36-.1.94.17,1.34.11A4.2018,4.2018,0,0,0,7.7708,1.03ZM1.0008,13h13c-.66-.66-2.64-1.11-4.34-1.33l-1.87-7c.52-.05,1.15.03,1.53,0l-2.11-3.6h-.01a6.1743,6.1743,0,0,0-.7.14,4.3792,4.3792,0,0,0-.64.22l-.01,4.15c.35-.17.84-.54,1.3-.74l1.8,6.74c-.58-.05-1.09-.08-1.45-.08C6.0308,11.5,2.0008,12,1.0008,13Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"beer-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.5,1c-2.3,0-3,0.66-3,0.66v2c0.0328,0.9197,0.2577,1.8223,0.66,2.65c0.376,0.9646,0.376,2.0354,0,3c0,0,0,0.66,2.32,0.66&#xA;&#x9;S7.8,9.31,7.8,9.31c-0.376-0.9646-0.376-2.0354,0-3c0.4023-0.8277,0.6272-1.7303,0.66-2.65v-2C8.46,1.66,7.8,1,5.5,1z M5.5,9.28&#xA;&#x9;C4.9736,9.3066,4.4465,9.2458,3.94,9.1c0.1326-0.4787,0.1999-0.9732,0.2-1.47h2.72c-0.0144,0.2198-0.0144,0.4402,0,0.66&#xA;&#x9;C6.8939,8.5635,6.9474,8.8342,7.02,9.1C6.5269,9.2448,6.0136,9.309,5.5,9.29V9.28z M7.82,3.28c-1.5116,0.4425-3.1184,0.4425-4.63,0&#xA;&#x9;L3.18,2c1.5151-0.4422,3.1249-0.4422,4.64,0c0,0,0.03,1.33,0,1.33L7.82,3.28z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"beer-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M12,5V2c0,0-1-1-4.5-1S3,2,3,2v3c0.0288,1.3915,0.3706,2.7586,1,4c0.6255,1.4348,0.6255,3.0652,0,4.5c0,0,0,1,3.5,1&#xA;&#x9;s3.5-1,3.5-1c-0.6255-1.4348-0.6255-3.0652,0-4.5C11.6294,7.7586,11.9712,6.3915,12,5z M7.5,13.5&#xA;&#x9;c-0.7966,0.035-1.5937-0.0596-2.36-0.28c0.203-0.7224,0.304-1.4696,0.3-2.22h4.12c-0.004,0.7504,0.097,1.4976,0.3,2.22&#xA;&#x9;C9.0937,13.4404,8.2966,13.535,7.5,13.5z M7.5,5C6.3136,5.0299,5.1306,4.8609,4,4.5v-2C5.131,2.1411,6.3137,1.9722,7.5,2&#xA;&#x9;C8.6863,1.9722,9.869,2.1411,11,2.5v2C9.8694,4.8609,8.6864,5.0299,7.5,5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bicycle-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path4804\\" d=\\"&#xA;&#x9;M6.5,1.5c-0.6761-0.01-0.6761,1.0096,0,1H7V3.211L4.252,4.7813L3.7383,3.5h0.7148c0.6761,0.01,0.6761-1.0096,0-1H2.4258&#xA;&#x9;c-0.6761-0.01-0.6761,1.0096,0,1h0.2344l0.4316,1.0781C2.9011,4.5311,2.7047,4.5001,2.5,4.5001c-1.3748,0-2.5,1.1252-2.5,2.5&#xA;&#x9;s1.1252,2.5,2.5,2.5S5,8.3748,5,7.0001c0-0.4713-0.1399-0.9078-0.3691-1.2852l2.4707-1.4121L7.5039,4.711&#xA;&#x9;C6.6216,5.0981,6,5.9792,6,7.0001c0,1.3748,1.1252,2.5,2.5,2.5s2.5-1.1252,2.5-2.5c0-1.2959-1.0034-2.3575-2.2695-2.4766L8,3.793V2&#xA;&#x9;c0-0.2761-0.2239-0.5-0.5-0.5H6.5z M2.5,5.5C3.3344,5.5,4,6.1657,4,7S3.3344,8.5,2.5,8.5S1,7.8344,1,7S1.6656,5.5,2.5,5.5z&#xA;&#x9; M8.4551,5.504h0.002c0.0299,0.003,0.06,0.003,0.0898,0C9.3587,5.5289,10,6.1818,10,7.0001c0,0.8344-0.6656,1.5-1.5,1.5&#xA;&#x9;S7,7.8345,7,7.0001C7,6.1811,7.6424,5.5279,8.4551,5.504L8.4551,5.504z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bicycle-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path4668\\" d=\\"&#xA;&#x9;M7.5,2c-0.6761-0.01-0.6761,1.0096,0,1H9v1.2656l-2.8027,2.334L5.2226,4H5.5c0.6761,0.01,0.6761-1.0096,0-1h-2&#xA;&#x9;c-0.6761-0.01-0.6761,1.0096,0,1h0.6523L5.043,6.375C4.5752,6.1424,4.0559,6,3.5,6C1.5729,6,0,7.5729,0,9.5S1.5729,13,3.5,13&#xA;&#x9;S7,11.4271,7,9.5c0-0.6699-0.2003-1.2911-0.5293-1.8242L9.291,5.3262l0.4629,1.1602C8.7114,7.0937,8,8.2112,8,9.5&#xA;&#x9;c0,1.9271,1.5729,3.5,3.5,3.5S15,11.4271,15,9.5S13.4271,6,11.5,6c-0.2831,0-0.5544,0.0434-0.8184,0.1074L10,4.4023V2.5&#xA;&#x9;c0-0.2761-0.2239-0.5-0.5-0.5H7.5z M3.5,7c0.5923,0,1.1276,0.2119,1.5547,0.5527l-1.875,1.5625&#xA;&#x9;c-0.5109,0.4273,0.1278,1.1945,0.6406,0.7695l1.875-1.5625C5.8835,8.674,6,9.0711,6,9.5C6,10.8866,4.8866,12,3.5,12S1,10.8866,1,9.5&#xA;&#x9;S2.1133,7,3.5,7L3.5,7z M11.5,7C12.8866,7,14,8.1134,14,9.5S12.8866,12,11.5,12S9,10.8866,9,9.5c0-0.877,0.4468-1.6421,1.125-2.0879&#xA;&#x9;l0.9102,2.2734c0.246,0.6231,1.1804,0.2501,0.9297-0.3711l-0.9082-2.2695C11.2009,7.0193,11.3481,7,11.5,7L11.5,7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bicycle-share-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path4632\\" d=\\"M8,0.0004c-0.5523,0-1,0.4477-1,1s0.4477,1,1,1s1-0.4477,1-1&#xA;&#x9;S8.5523,0.0004,8,0.0004z M6.0137,2.0004C5.8763,1.9967,5.7436,2.0497,5.6465,2.1468l-2,2c-0.1952,0.1953-0.1952,0.5118,0,0.707&#xA;&#x9;L5,6.2074v2.293C4.9961,8.7765,5.2168,9.0035,5.4929,9.0074C5.7691,9.0114,5.9961,8.7907,6,8.5145&#xA;&#x9;c0.0001-0.0047,0.0001-0.0094,0-0.0141v-2.5c0.0005-0.1323-0.0515-0.2594-0.1445-0.3535l-0.752-0.752l1.166-1.2031l0.832,1.1094&#xA;&#x9;C7.1958,4.9263,7.3433,5.0001,7.5,5.0004h2c0.2762,0.0039,0.5032-0.2168,0.5071-0.4929c0.0039-0.2761-0.2168-0.5032-0.493-0.5071&#xA;&#x9;c-0.0047-0.0001-0.0094-0.0001-0.0141,0H7.75L6.4004,2.1996C6.3086,2.0777,6.1662,2.0043,6.0137,2.0004z M2.3633,6.0043&#xA;&#x9;C2.113,6.0182,1.8615,6.0708,1.6191,6.1625C0.6498,6.5293,0.0049,7.46,0.0039,8.4965s0.6411,1.9703,1.6094,2.3398&#xA;&#x9;s2.0683,0.1,2.7578-0.6738c0.1831-0.2068,0.164-0.5229-0.0428-0.706C4.1219,9.2736,3.8064,9.2924,3.623,9.4984&#xA;&#x9;c-0.4154,0.4663-1.0709,0.627-1.6543,0.4043C1.3853,9.68,1.003,9.1229,1.0039,8.4984S1.3886,7.319,1.9727,7.098&#xA;&#x9;c0.584-0.221,1.2402-0.0592,1.6543,0.4082C3.8101,7.713,4.1262,7.7322,4.3329,7.549c0.2068-0.1831,0.226-0.4992,0.0428-0.706&#xA;&#x9;C4.3755,6.8427,4.3752,6.8425,4.375,6.8422C4.0314,6.4543,3.5855,6.1936,3.1035,6.0746C2.8625,6.0151,2.6136,5.9904,2.3633,6.0043&#xA;&#x9;L2.3633,6.0043z M8.6426,6.0043C8.3923,5.9904,8.1433,6.0151,7.9023,6.0746c-0.482,0.119-0.9298,0.3797-1.2734,0.7676&#xA;&#x9;c-0.1834,0.2071-0.1641,0.5237,0.043,0.707s0.5237,0.1641,0.707-0.043C7.793,7.0388,8.4472,6.877,9.0312,7.098&#xA;&#x9;C9.6153,7.319,9.9991,7.8739,10,8.4984S9.6186,9.68,9.0352,9.9027c-0.5834,0.2227-1.2389,0.062-1.6543-0.4043&#xA;&#x9;c-0.1729-0.2153-0.4877-0.2497-0.703-0.0768s-0.2497,0.4877-0.0768,0.703c0.0106,0.0132,0.0218,0.0258,0.0337,0.0378&#xA;&#x9;c0.6895,0.7739,1.7895,1.0434,2.7578,0.6738C10.3609,10.4667,11.0015,9.5329,11,8.4964c-0.001-1.0365-0.6439-1.9671-1.6133-2.334&#xA;&#x9;C9.1444,6.0708,8.8928,6.0182,8.6426,6.0043L8.6426,6.0043z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bicycle-share-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"circle4604\\" d=\\"&#xA;&#x9;M10,1C9.4477,1,9,1.4477,9,2c0,0.5523,0.4477,1,1,1s1-0.4477,1-1C11,1.4477,10.5523,1,10,1z M8.1445,2.9941&#xA;&#x9;c-0.13,0.0005-0.2547,0.0517-0.3477,0.1426l-2.6406,2.5c-0.2256,0.2128-0.2051,0.5775,0.043,0.7637L7,7.75v2.75&#xA;&#x9;c-0.01,0.6762,1.0096,0.6762,1,0v-3c0.0003-0.1574-0.0735-0.3057-0.1992-0.4004L7.0332,6.5234l1.818-1.7212l0.7484,0.9985&#xA;&#x9;C9.6943,5.9265,9.8426,6.0003,10,6h1.5c0.6761,0.01,0.6761-1.0096,0-1h-1.25L9.5,4L8.9004,3.1992&#xA;&#x9;C8.8103,3.0756,8.6685,3,8.5156,2.9941H8.1445z M3,7c-1.6569,0-3,1.3432-3,3s1.3431,3,3,3s3-1.3432,3-3S4.6569,7,3,7z M12,7&#xA;&#x9;c-1.6569,0-3,1.3432-3,3s1.3431,3,3,3s3-1.3432,3-3S13.6569,7,12,7z M3,8c1.1046,0,2,0.8954,2,2s-0.8954,2-2,2s-2-0.8954-2-2&#xA;&#x9;S1.8954,8,3,8z M12,8c1.1046,0,2,0.8954,2,2s-0.8954,2-2,2s-2-0.8954-2-2S10.8954,8,12,8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\" id=\\"blood-bank-11\\">\\n  <path d=\\"M8.40515,4.64435H8.40643L5.5,1,2.59308,4.64435H2.59485A3.37087,3.37087,0,0,0,2,6.55859,3.464,3.464,0,0,0,5.5,9.98822,3.464,3.464,0,0,0,9,6.55859,3.37087,3.37087,0,0,0,8.40515,4.64435ZM8,7H6V9H5V7H3V6H5V4H6V6H8V7Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"blood-bank-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11.2,7.1L11.2,7.1L7.5,2L3.8,7.1h0C3.3,7.8,3,8.7,3,9.6C3,12,5,14,7.5,14c0,0,0,0,0,0C10,14,12,12,12,9.6c0,0,0,0,0,0&#xA;&#x9;C12,8.7,11.7,7.8,11.2,7.1z M10,10H8v2H7v-2H5V9h2V7h1v2h2V10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"boat-es-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.49155349,1 C5.8474897,1 7.18272402,1.81764454 7.62717076,3.42307692 C7.91542674,4.46431637 8.05002781,6.45947675 7.98310698,9.40499722 C7.97869503,9.59918917 7.80769593,9.70129941 7.71999041,9.72309588 C6.9771781,9.90769863 6.2343658,10 5.49155349,10 C4.74960052,10 4.00764755,9.90791206 3.26569459,9.72373619 C3.17712972,9.70175163 3,9.60085825 3,9.41035081 C3,6.46424944 3.06615372,4.46983047 3.35593621,3.42307692 C3.80248609,1.81004756 5.13561728,1 5.49155349,1 Z M3.71187243,4.80769231 L3.71187243,5.15384615 C3.87676711,4.83784365 4.62611891,4.46153846 5.48711363,4.46153846 C6.34810835,4.46153846 7.10633986,4.83784365 7.27123455,5.15384615 L7.27123455,4.80769231 C7.27123455,4.23416584 6.47000434,3.76923077 5.48711363,3.76923077 C4.50422292,3.76923077 3.71187243,4.23416584 3.71187243,4.80769231 Z M4.42374485,5.84615385 C4.03058857,5.84615385 3.71187243,6.15611056 3.71187243,6.53846154 L3.71187243,7.92307692 C3.71187243,8.3054279 4.03058857,8.61538462 4.42374485,8.61538462 L6.55936213,8.61538462 C6.95251841,8.61538462 7.27123455,8.3054279 7.27123455,7.92307692 L7.27123455,6.53846154 C7.27123455,6.15611056 6.95251841,5.84615385 6.55936213,5.84615385 L4.42374485,5.84615385 Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"boat-es-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M7.5,1 C8,1 9.87566518,2.18104212 10.5,4.5 C10.9049265,6.00401254 11.0940068,8.88591087 11,13.1405515 C10.9938023,13.421051 10.753592,13.5685436 10.630388,13.6000274 C9.58692536,13.8666758 8.54346268,14 7.5,14 C6.45774448,14 5.41548895,13.8669841 4.37323343,13.6009523 C4.24882229,13.5691968 4,13.4234619 4,13.1482845 C4,8.89280475 4.09292918,6.01197734 4.5,4.5 C5.1272892,2.1700687 7,1 7.5,1 Z M5,6.5 L5,7 C5.23163517,6.54355194 6.28428417,6 7.49376313,6 C8.70324208,6 9.76836483,6.54355194 10,7 L10,6.5 C10,5.67157288 8.874475,5 7.49376313,5 C6.11305125,5 5,5.67157288 5,6.5 Z M6,8 C5.44771525,8 5,8.44771525 5,9 L5,11 C5,11.5522847 5.44771525,12 6,12 L9,12 C9.55228475,12 10,11.5522847 10,11 L10,9 C10,8.44771525 9.55228475,8 9,8 L6,8 Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"bowling-alley-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"icon_concepts:_sports_leisure\\" d=\\"M6.02,3.94c.04-.1.13-.4.17-.49A2.8252,2.8252,0,0,0,4.5,3a3.5,3.5,0,0,0,0,7,2.88,2.88,0,0,0,1.54-.4,8.5971,8.5971,0,0,1-.4-2.61A12.7588,12.7588,0,0,1,6.02,3.94ZM2.5,6.98a.48.48,0,1,1,.48-.48A.4867.4867,0,0,1,2.5,6.98Zm1-2a.48.48,0,1,1,.48-.48A.4867.4867,0,0,1,3.5,4.98Zm1,2a.48.48,0,1,1,.48-.48A.4867.4867,0,0,1,4.5,6.98ZM8.0981,2.4992c0-.5-.1-.5-.1-1,0-.7816.5-.7.5-.7s.5-.0814.5.7c0,.5-.1.5-.1,1,0,1.5,1.075,2.5039,1.075,4.5,0,1.5-.475,3-.975,3h-1c-.5,0-.975-1.5-.975-3C7.0231,5.0031,8.0981,3.9992,8.0981,2.4992Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"bowling-alley-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"icon_concepts:_sports_leisure\\" d=\\"M8.83,5.39a11.0127,11.0127,0,0,0-.96,4.28,11.4686,11.4686,0,0,0,.58,3.69A4.9424,4.9424,0,0,1,6,14,5,5,0,1,1,8.98,4.99C8.94,5.12,8.88,5.25,8.83,5.39ZM4.12,8.5a.62.62,0,1,0-.62.62h0a.6105.6105,0,0,0,.62-.6009C4.12,8.5128,4.12,8.5064,4.12,8.5ZM4.5,7.12a.62.62,0,1,0-.62-.62h0a.6106.6106,0,0,0,.6011.62ZM6.12,8.5a.62.62,0,1,0-.62.62h0a.6105.6105,0,0,0,.62-.6009C6.12,8.5128,6.12,8.5064,6.12,8.5Zm4.8022-5.3341c0-.7222-.1444-.7222-.1444-1.4444a.7222.7222,0,0,1,1.4444-.0007v.0007c0,.7222-.1444.7222-.1444,1.4444,0,2.1667,1.5528,3.6168,1.5528,6.5,0,2.1667-.6861,4.3333-1.4083,4.3333H10.7778c-.7222,0-1.4083-2.1667-1.4083-4.3333C9.3694,6.7826,10.9222,5.3325,10.9222,3.1659Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"bridge-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M0,5.835V9h1c0-1.105,0.896-2.006,2-2.006c1.103,0,1.998,0.903,2,2.006h1c0-1.105,0.895-2.006,1.999-2.006&#xA;&#x9;C9.102,6.994,9.997,7.897,10,9h1V5.835C8.083,1.806,2.389,2.312,0,5.835z M2,6H0.5C0.919,5.449,1.426,4.966,2,4.582V6z M4,6H2.5&#xA;&#x9;V4.263C2.963,4.016,3.491,3.806,4,3.682V6z M6,6H4.5V3.578c0.496-0.081,1-0.102,1.5-0.062V6z M8,6H6.5V3.579&#xA;&#x9;C7.017,3.663,7.52,3.811,8,4.02V6z M8.5,6V4.264C9.28,4.691,9.968,5.287,10.5,6H8.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"bridge-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M0,8.842V13h2v-1c0.036-1.089,0.911-1.964,2-2c1.089,0.036,1.964,0.911,2,2v1h3v-1c0.036-1.089,0.911-1.964,2-2&#xA;&#x9;c1.089,0.036,1.964,0.911,2,2v1h2V8.842C10.6,3.082,3.071,4.4,0,8.842z M9.5,5.734c0.514,0.121,1.016,0.289,1.5,0.5V9H9.5V5.734z&#xA;&#x9; M9,5.634V9H7.5V5.506C8.003,5.506,8.505,5.549,9,5.634z M3.5,6.477C3.98,6.229,4.482,6.026,5,5.871V9H3.5V6.477z M5.5,9V5.73&#xA;&#x9;C5.993,5.615,6.495,5.543,7,5.515V9H5.5z M3,6.744V9H0.5C1.176,8.094,2.032,7.328,3,6.744z M11.5,9V6.5l-0.053-0.053&#xA;&#x9;C12.649,7.05,13.694,7.924,14.5,9H11.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"building-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M2,1v9h4V6h2v4h1V1H2z M5,9H3V6h2V9z M5,5H3V3h2V5z M8,5H6V3h2V5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"building-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M3,2v11h5v-3h3v3h1V2H3z M7,12H4v-2h3V12z M7,9H4V7h3V9z M7,6H4V4h3V6z M11,9H8V7h3V9z M11,6H8V4h3V6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"building-alt1-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8,9.5v-5C8,4.2,7.8,4,7.5,4H6V1L3,2v7.5H2V10h7V9.5H8z M5,9.5H4V3h1V9.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"building-alt1-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11,13.5v-9C11,4.2,10.8,4,10.5,4H9V1L5,2.1v11.4H2V14h11v-0.5H11z M7,13.5V3h1v10.5H7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bus-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path8043\\" d=\\"M3,0C2,0,1,0.5312,1,2v4v3.5c0,0,0,0.5,0.5,0.5L2,10.0156V10.5&#xA;&#x9;c0,0,0,0.5,0.5,0.5H3c0,0,0.5,0,0.5-0.5v-0.4844L7.5,10v0.5c0,0,0,0.5,0.5,0.5h0.5C9,11,9,10.5,9,10.5v-0.4844L9.5,10&#xA;&#x9;c0,0,0.5,0,0.5-0.5V6V2c0-1.5-1-2-2-2H3z M3.75,1h3.5C7.3885,1,7.5,1.1115,7.5,1.25S7.3885,1.5,7.25,1.5h-3.5&#xA;&#x9;C3.6115,1.5,3.5,1.3885,3.5,1.25S3.6115,1,3.75,1z M3,2h5c1,0,1,1,1,1v2c0,0,0,1-1,1H3C2,6,2,5,2,5V3C2,3,2,2,3,2z M2.75,7.5&#xA;&#x9;c0.4142,0,0.75,0.3358,0.75,0.75C3.5,8.6642,3.1642,9,2.75,9S2,8.6642,2,8.25C2,7.8358,2.3358,7.5,2.75,7.5z M8.25,7.5&#xA;&#x9;C8.6642,7.5,9,7.8358,9,8.25C9,8.6642,8.6642,9,8.25,9C7.8358,9,7.5,8.6642,7.5,8.25C7.5,7.8358,7.8358,7.5,8.25,7.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bus-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path8043\\" d=\\"M4,0C2.6364,0,1,0.7433,1,2.7461v5.4531V12c0,0,0,1,1,1v1c0,0,0,1,1,1s1-1,1-1v-1h7v1c0,0,0,1,1,1s1-1,1-1v-1&#xA;&#x9;c0,0,1,0,1-1V2.7461C14,0.7006,12.764,0,11.4004,0H4z M4.25,1.5h6.5C10.8885,1.5,11,1.6115,11,1.75S10.8885,2,10.75,2h-6.5&#xA;&#x9;C4.1115,2,4,1.8885,4,1.75S4.1115,1.5,4.25,1.5z M3,3h9c1,0,1,0.9668,1,0.9668V7c0,0,0,1-1,1H3C2,8,2,7,2,7V4C2,4,2,3,3,3z M3,10&#xA;&#x9;c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1s-1-0.4477-1-1S2.4477,10,3,10z M12,10c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1s-1-0.4477-1-1&#xA;&#x9;S11.4477,10,12,10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cafe-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M7,9.5C7,9.7761,6.7761,10,6.5,10h-4C2.2239,10,2,9.7761,2,9.5S2.2239,9,2.5,9h4C6.7761,9,7,9.2239,7,9.5z M8,3H7V2H2v4&#xA;&#x9;c0.0016,1.3807,1.1222,2.4987,2.5029,2.4971C5.4948,8.4959,6.3921,7.9085,6.79,7H8c1.1046,0,2-0.8954,2-2S9.1046,3,8,3z M8,6H7V4h1&#xA;&#x9;c0.5523,0,1,0.4477,1,1S8.5523,6,8,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cafe-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M12,5h-2V3H2v4c0.0133,2.2091,1.8149,3.9891,4.024,3.9758C7.4345,10.9673,8.7362,10.2166,9.45,9H12c1.1046,0,2-0.8954,2-2&#xA;&#x9;S13.1046,5,12,5z M12,8H9.86C9.9487,7.6739,9.9958,7.3379,10,7V6h2c0.5523,0,1,0.4477,1,1S12.5523,8,12,8z M10,12.5&#xA;&#x9;c0,0.2761-0.2239,0.5-0.5,0.5h-7C2.2239,13,2,12.7761,2,12.5S2.2239,12,2.5,12h7C9.7761,12,10,12.2239,10,12.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"campsite-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.92,2.19C5.7745,1.9553,5.4663,1.8829,5.2316,2.0284C5.166,2.0691,5.1107,2.1244,5.07,2.19L1.5,8h-1&#xA;&#x9;C0.2724,7.9555,0.0517,8.104,0.0072,8.3316C0.0034,8.3509,0.001,8.3704,0,8.39V9.5C-0.0056,9.7706,0.2092,9.9944,0.4798,10&#xA;&#x9;c0.0067,0.0001,0.0135,0.0001,0.0202,0h10c0.2706,0.0056,0.4944-0.2092,0.5-0.4798c0.0001-0.0067,0.0001-0.0135,0-0.0202V8.39&#xA;&#x9;c-0.0123-0.2316-0.21-0.4095-0.4416-0.3972C10.5388,7.9938,10.5193,7.9962,10.5,8h-1L5.92,2.19z M5.5,3l3,5h-6L5.5,3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"campsite-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect3335\\" d=\\"M7,1.5&#xA;&#x9;l-5.5,9H1c-1,0-1,1-1,1v1c0,0,0,1,1,1h13c1,0,1-1,1-1v-1c0,0,0-1-1-1h-0.5L8,1.5C7.8,1.1,7.2,1.1,7,1.5z M7.5,5l3.2,5.5H4.2L7.5,5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"car-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9,4L8.11,1.34C8.0418,1.1381,7.8531,1.0016,7.64,1H3.36C3.1469,1.0016,2.9582,1.1381,2.89,1.34L2,4C1.4477,4,1,4.4477,1,5&#xA;&#x9;v3h1v1c0,0.5523,0.4477,1,1,1s1-0.4477,1-1V8h3v1c0,0.5523,0.4477,1,1,1s1-0.4477,1-1V8h1V5C10,4.4477,9.5523,4,9,4z M3,7&#xA;&#x9;C2.4477,7,2,6.5523,2,6s0.4477-1,1-1s1,0.4477,1,1S3.5523,7,3,7z M3,4l0.62-2h3.76L8,4H3z M8,7C7.4477,7,7,6.5523,7,6s0.4477-1,1-1&#xA;&#x9;s1,0.4477,1,1S8.5523,7,8,7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"car-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,7c-0.004-0.6904-0.4787-1.2889-1.15-1.45l-1.39-3.24l0,0l0,0l0,0C11.3833,2.1233,11.2019,2.001,11,2H4&#xA;&#x9;C3.8124,2.0034,3.6425,2.1115,3.56,2.28l0,0l0,0l0,0L2.15,5.54C1.475,5.702,0.9994,6.3059,1,7v3.5h1v1c0,0.5523,0.4477,1,1,1&#xA;&#x9;s1-0.4477,1-1v-1h7v1c0,0.5523,0.4477,1,1,1s1-0.4477,1-1v-1h1V7z M4.3,3h6.4l1.05,2.5h-8.5L4.3,3z M3,9C2.4477,9,2,8.5523,2,8&#xA;&#x9;s0.4477-1,1-1s1,0.4477,1,1S3.5523,9,3,9z M12,9c-0.5523,0-1-0.4477-1-1s0.4477-1,1-1s1,0.4477,1,1S12.5523,9,12,9z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"car-rental-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <g>\\n    <path d=\\"M9.0252,7H8.84L8.5615,5.3301C8.4824,4.8491,8.0713,4.5,7.583,4.5H3.417c-0.4883,0-0.8994,0.3491-0.9785,0.8291L2.1599,7&#xA;&#x9;&#x9;H1.981C1.4391,7,1,7.4391,1,7.9809V10h1c0,0.5522,0.4477,1,1,1s1-0.4478,1-1h3c0,0.5522,0.4477,1,1,1s1-0.4478,1-1h1V7.9748&#xA;&#x9;&#x9;C10,7.4364,9.5635,7,9.0252,7z M3.25,9C2.8358,9,2.5,8.6642,2.5,8.25c0-0.4142,0.3358-0.75,0.75-0.75S4,7.8358,4,8.25&#xA;&#x9;&#x9;C4,8.6642,3.6642,9,3.25,9z M3.1708,7L3.417,5.5l4.1582-0.0068L7.8264,7H3.1708z M7.75,9C7.3358,9,7,8.6642,7,8.25&#xA;&#x9;&#x9;C7,7.8358,7.3358,7.5,7.75,7.5S8.5,7.8358,8.5,8.25C8.5,8.6642,8.1642,9,7.75,9z\\"/>\\n    <path d=\\"M9.4969,0H7.9973C7.4465,0,7,0.4465,7,0.9972V1H2.5l-1,1l1,1l1-1l1,1l1-1l1,1h0.5008C7.0031,3.5526,7.4509,4,8.004,4&#xA;&#x9;&#x9;h1.4938C9.7751,4,10,3.7751,10,3.4977V0.5031C10,0.2252,9.7748,0,9.4969,0z M9,2.5C9,2.7761,8.7761,3,8.5,3S8,2.7761,8,2.5v-1&#xA;&#x9;&#x9;C8,1.2238,8.2239,1,8.5,1S9,1.2238,9,1.5V2.5z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"car-rental-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <g>\\n    <path d=\\"M11.5039,1H10C9.2616,1,8.6238,1.4047,8.2774,2H3.5l-1,1l1,1l1-1l1,1l1-1l1,1h0.7774C8.6238,4.5953,9.2616,5,10,5h1.4982&#xA;&#x9;&#x9;C11.7753,5,12,4.7753,12,4.4982V1.4961C12,1.2221,11.7779,1,11.5039,1z M11,3.5C11,3.7761,10.7761,4,10.5,4S10,3.7761,10,3.5v-1&#xA;&#x9;&#x9;C10,2.2238,10.2239,2,10.5,2S11,2.2238,11,2.5V3.5z\\"/>\\n    <path d=\\"M10.9252,9.0103l-0.3636-2.1802C10.4824,6.3491,10.0713,6,9.583,6H5.417C4.9302,6,4.5186,6.3486,4.4385,6.8291&#xA;&#x9;&#x9;L4.0746,9.0117C3.4776,9.0436,3,9.5277,3,10.1327V13h1c0,0.5522,0.4477,1,1,1s1-0.4478,1-1h3c0,0.5522,0.4477,1,1,1s1-0.4478,1-1h1&#xA;&#x9;&#x9;v-2.8744C12,9.522,11.5219,9.0383,10.9252,9.0103z M4.75,12C4.3358,12,4,11.6642,4,11.25c0-0.4142,0.3358-0.75,0.75-0.75&#xA;&#x9;&#x9;s0.75,0.3358,0.75,0.75C5.5,11.6642,5.1642,12,4.75,12z M5.0887,9L5.417,7l4.1582-0.0068L9.9098,9H5.0887z M10.25,12&#xA;&#x9;&#x9;c-0.4142,0-0.75-0.3358-0.75-0.75c0-0.4142,0.3358-0.75,0.75-0.75S11,10.8358,11,11.25C11,11.6642,10.6642,12,10.25,12z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"car-repair-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.5,1.25H4.3517C4.0547,0.5176,3.3389,0,2.5,0C1.7616,0,1.1238,0.4047,0.7774,1H2.5L3,2L2.5,3H0.7774&#xA;&#x9;C1.1238,3.5953,1.7616,4,2.5,4c0.8389,0,1.5547-0.5176,1.8517-1.25H9.5c0.4141,0,0.75-0.3359,0.75-0.75S9.9141,1.25,9.5,1.25z\\"/>\\n  <path d=\\"M8.3105,7.0344l-0.249-1.2043C7.9824,5.3491,7.5713,5,7.083,5H3.917C3.4287,5,3.0176,5.3491,2.9424,5.8101L2.6891,7.0355&#xA;&#x9;C2.2987,7.1191,2,7.4498,2,7.8651V10h0.5c0,0.5522,0.4477,1,1,1s1-0.4478,1-1h2c0,0.5522,0.4477,1,1,1s1-0.4478,1-1H9V7.8597&#xA;&#x9;C9,7.4453,8.7008,7.1157,8.3105,7.0344z M3.75,9C3.3358,9,3,8.6642,3,8.25C3,7.8358,3.3358,7.5,3.75,7.5S4.5,7.8358,4.5,8.25&#xA;&#x9;C4.5,8.6642,4.1642,9,3.75,9z M3.7134,7L3.917,6l3.1621,0.0122L7.2831,7H3.7134z M7.25,9C6.8358,9,6.5,8.6642,6.5,8.25&#xA;&#x9;c0-0.4142,0.3358-0.75,0.75-0.75S8,7.8358,8,8.25C8,8.6642,7.6642,9,7.25,9z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"car-repair-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <g>\\n    <path d=\\"M10.9252,9.0103l-0.3636-2.1802C10.4824,6.3491,10.0713,6,9.583,6H5.417C4.9302,6,4.5186,6.3486,4.4385,6.8291&#xA;&#x9;&#x9;L4.0746,9.0117C3.4776,9.0436,3,9.5277,3,10.1327V13h1c0,0.5522,0.4477,1,1,1s1-0.4478,1-1h3c0,0.5522,0.4477,1,1,1s1-0.4478,1-1h1&#xA;&#x9;&#x9;v-2.8744C12,9.522,11.5219,9.0383,10.9252,9.0103z M4.75,12C4.3358,12,4,11.6642,4,11.25c0-0.4142,0.3358-0.75,0.75-0.75&#xA;&#x9;&#x9;s0.75,0.3358,0.75,0.75C5.5,11.6642,5.1642,12,4.75,12z M5.0887,9L5.417,7l4.1582-0.0068L9.9098,9H5.0887z M10.25,12&#xA;&#x9;&#x9;c-0.4142,0-0.75-0.3358-0.75-0.75c0-0.4142,0.3358-0.75,0.75-0.75S11,10.8358,11,11.25C11,11.6642,10.6642,12,10.25,12z\\"/>\\n    <path d=\\"M12,2H5.7889C5.4029,1.1177,4.5247,0.5,3.5,0.5S1.5971,1.1177,1.2111,2H3.5L4,3L3.5,4H1.2111&#xA;&#x9;&#x9;C1.5972,4.8821,2.4754,5.5,3.5,5.5S5.4028,4.8821,5.7889,4H12c0.5527,0,1-0.4478,1-1S12.5527,2,12,2z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"car-top-es-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8,5 L8,8.5 C8,9.26470196 7.23637967,10 6.5,10 L4.5,10 C3.76362033,10 3,9.26470196 3,8.5 L3,5 L2.33,5 C2.33,4.61764902 2.63181017,4.31 3,4.31 L3,3 C3,2 4,1 5,1 L6,1 C7,1 8,2 8,3 L8,4.31 C8.36818983,4.31 8.67,4.61764902 8.67,5 L8,5 Z M4,7 L3.75,7.75 C4.36111111,7.91666667 4.94444444,8 5.5,8 C6.05555556,8 6.63888889,7.91666667 7.25,7.75 L7,7 L5.5,7 L4,7 Z M3.75,4.25 L4,5 C4.55555556,4.83333333 5.05555556,4.75 5.5,4.75 C5.94444444,4.75 6.44444444,4.83333333 7,5 L7.25,4.25 C6.63888889,3.91666667 6.05555556,3.75 5.5,3.75 C4.94444444,3.75 4.36111111,3.91666667 3.75,4.25 Z M3.76193953,2.60929231 C3.86770819,2.70145623 4.09734355,2.5980894 4.27484444,2.37841601 C4.45234534,2.15874263 4.5104958,1.90594854 4.40472714,1.81378462 C4.29895847,1.72162069 4.06932312,1.82498753 3.89182222,2.04466091 C3.71432133,2.26433429 3.65617086,2.51712838 3.76193953,2.60929231 Z M7.24096539,2.60929231 C7.34673405,2.51712838 7.28858359,2.26433429 7.11108269,2.04466091 C6.9335818,1.82498753 6.70394644,1.72162069 6.59817778,1.81378462 C6.49240911,1.90594854 6.55055957,2.15874263 6.72806047,2.37841601 C6.90556137,2.5980894 7.13519672,2.70145623 7.24096539,2.60929231 Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"car-top-es-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11,7 L11,12 C11,13.1045695 10.1045695,14 9,14 L6,14 C4.8954305,14 4,13.1045695 4,12 L4,7 L3,7 C3,6.44771525 3.44771525,6 4,6 L4,4 C4,2.34314575 5.34314575,1 7,1 L8,1 C9.65685425,1 11,2.34314575 11,4 L11,6 C11.5522847,6 12,6.44771525 12,7 L11,7 Z M5.5,10 L5,11 C5.83333333,11.3333333 6.66666667,11.5 7.5,11.5 C8.33333333,11.5 9.16666667,11.3333333 10,11 L9.5,10 L7.5,10 L5.5,10 Z M5,6 L5.5,7 C6.16666667,6.66666667 6.83333333,6.5 7.5,6.5 C8.16666667,6.5 8.83333333,6.66666667 9.5,7 L10,6 C9.16666667,5.33333333 8.33333333,5 7.5,5 C6.66666667,5 5.83333333,5.33333333 5,6 Z M4.89290929,3.32453333 C5.05156229,3.45765901 5.39601532,3.30835135 5.66226667,2.99104535 C5.92851801,2.67373936 6.01574371,2.30859234 5.85709071,2.17546667 C5.69843771,2.04234099 5.35398468,2.19164865 5.08773333,2.50895465 C4.82148199,2.82626064 4.73425629,3.19140766 4.89290929,3.32453333 Z M10.1114481,3.32453333 C10.2701011,3.19140766 10.1828754,2.82626064 9.91662404,2.50895465 C9.65037269,2.19164865 9.30591967,2.04234099 9.14726667,2.17546667 C8.98861367,2.30859234 9.07583936,2.67373936 9.34209071,2.99104535 C9.60834205,3.30835135 9.95279508,3.45765901 10.1114481,3.32453333 Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"casino-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M6.1364,6.85C6.4266,7.2446,6.8886,7.5,7.4091,7.5C8.2877,7.5,9,6.7725,9,5.875c0-0.3667-0.1234-0.7014-0.324-0.9733&#xA;&#x9;L8.6818,4.9L5.5,1L2.3182,4.9L2.324,4.9017C2.1234,5.1736,2,5.5083,2,5.875C2,6.7725,2.7123,7.5,3.5909,7.5&#xA;&#x9;c0.5205,0,0.9825-0.2554,1.2728-0.65C4.918,6.776,5.0147,6.6443,5.125,6.4942V8.5c0,0.5-1.75,0.75-1.75,0.75&#xA;&#x9;C3.1679,9.25,3,9.4179,3,9.625S3.1679,10,3.375,10h1.75h0.75h1.75C7.8321,10,8,9.8321,8,9.625S7.8321,9.25,7.625,9.25&#xA;&#x9;c0,0-1.75-0.25-1.75-0.75V6.4942C5.9853,6.6443,6.082,6.776,6.1364,6.85z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"casino-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M8.5,10c0.4561,0.6072,1.1821,1,2,1c1.3807,0,2.5-1.1193,2.5-2.5c0-0.5642-0.1938-1.0789-0.509-1.4973L12.5,7l-5-6l-5,6&#xA;&#x9;l0.009,0.0027C2.1938,7.4211,2,7.9358,2,8.5C2,9.8807,3.1193,11,4.5,11c0.8179,0,1.5439-0.3928,2-1&#xA;&#x9;C6.5997,9.8672,6.7902,9.6135,7,9.3337V11.5C7,13,4.5,13,4.5,13C4.2239,13,4,13.2238,4,13.5C4,13.7761,4.2239,14,4.5,14H7h1h2.5&#xA;&#x9;c0.2761,0,0.5-0.2239,0.5-0.5c0-0.2762-0.2239-0.5-0.5-0.5c0,0-2.5,0-2.5-1.5V9.3337C8.2098,9.6135,8.4003,9.8672,8.5,10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"castle-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8.67,0.81v1.48C8.6812,2.6709,8.3815,2.9888,8.0006,3C8.0004,3,8.0002,3,8,3H3.09c-0.381,0.0056-0.6944-0.2988-0.7-0.6799&#xA;&#x9;C2.3899,2.3134,2.3899,2.3067,2.39,2.3V0.81c0-0.1905,0.1545-0.345,0.345-0.345S3.08,0.6195,3.08,0.81V1.5H4V1l0,0&#xA;&#x9;c0-0.2761,0.2239-0.5,0.5-0.5S5,0.7239,5,1l0,0v0.5h1V1l0,0c0-0.2761,0.2239-0.5,0.5-0.5S7,0.7239,7,1l0,0v0.5h1V0.81&#xA;&#x9;C7.9679,0.625,8.0919,0.449,8.2769,0.4169c0.185-0.0321,0.361,0.0919,0.3931,0.2769C8.6767,0.7323,8.6767,0.7716,8.67,0.81z&#xA;&#x9; M10.06,9.63c0,0.1933-0.1567,0.35-0.35,0.35h0H1.35C1.1567,9.9799,1.0001,9.8231,1.0002,9.6298&#xA;&#x9;C1.0004,9.4366,1.1569,9.2801,1.35,9.28H1.7c0.3754,0.0112,0.6888-0.284,0.7-0.6594c0.0004-0.0135,0.0004-0.0271,0-0.0406&#xA;&#x9;c0,0,0.7-3.2,0.7-3.89C3.0944,4.3145,3.3943,4.0056,3.7699,4C3.7766,3.9999,3.7833,3.9999,3.79,4h3.48&#xA;&#x9;c0.3754-0.0112,0.6888,0.284,0.7,0.6594c0.0004,0.0135,0.0004,0.0271,0,0.0406c0,0.7,0.7,3.89,0.7,3.89&#xA;&#x9;c-0.0112,0.3754,0.284,0.6888,0.6594,0.7c0.0135,0.0004,0.0271,0.0004,0.0406,0h0.34c0.1933,0,0.35,0.1567,0.35,0.35v0V9.63z&#xA;&#x9; M6.5,7.5c0-0.5523-0.4477-1-1-1s-1,0.4477-1,1v2h2V7.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"castle-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11,4H4C3.4477,4,3,3.5523,3,3V0.5C3,0.2239,3.2239,0,3.5,0S4,0.2239,4,0.5V2h1V1c0-0.5523,0.4477-1,1-1s1,0.4477,1,1v1h1V1&#xA;&#x9;c0-0.5523,0.4477-1,1-1s1,0.4477,1,1v1h1V0.5C11,0.2239,11.2239,0,11.5,0S12,0.2239,12,0.5V3C12,3.5523,11.5523,4,11,4z M14,14.5&#xA;&#x9;c0,0.2761-0.2239,0.5-0.5,0.5h-12C1.2239,15,1,14.7761,1,14.5S1.2239,14,1.5,14H2c0.5523,0,1-0.4477,1-1c0,0,1-6,1-7&#xA;&#x9;c0-0.5523,0.4477-1,1-1h5c0.5523,0,1,0.4477,1,1c0,1,1,7,1,7c0,0.5523,0.4477,1,1,1h0.5c0.2723-0.0001,0.4946,0.2178,0.5,0.49V14.5z&#xA;&#x9; M9,10.5C9,9.6716,8.3284,9,7.5,9S6,9.6716,6,10.5V14h3V10.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cemetery-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8.65,8H8l0,0l1-5.61c0.0167-0.1981-0.1304-0.3722-0.3286-0.3889C8.6577,1.9999,8.6438,1.9996,8.63,2H7.16&#xA;&#x9;c0-0.65-0.7-1-1.67-1S3.66,1.35,3.66,2H2.35C2.1512,2.0048,1.994,2.1699,1.9988,2.3686C1.999,2.3758,1.9994,2.3829,2,2.39L3,8l0,0&#xA;&#x9;H2.35C2.1567,7.9999,1.9999,8.1566,1.9999,8.3499c0,0.0034,0,0.0068,0.0001,0.0101V10h7V8.36&#xA;&#x9;c0.0055-0.1932-0.1466-0.3543-0.3399-0.3599C8.6568,8,8.6534,8,8.65,8z M7,5H4V4h3V5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cemetery-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11.46,12h-0.68L12,3.55c0.0175-0.2867-0.2008-0.5332-0.4874-0.5507C11.4884,2.9979,11.4641,2.9981,11.44,3h-1.18&#xA;&#x9;c0-0.92-1.23-2-2.75-2S4.77,2.08,4.77,3H3.54C3.253,2.9885,3.0111,3.2117,2.9995,3.4987C2.9988,3.5158,2.999,3.5329,3,3.55L4.2,12&#xA;&#x9;H3.55C3.2609,11.9886,3.0162,12.2112,3,12.5V14h9v-1.51C11.9839,12.2067,11.7435,11.9886,11.46,12z M4.5,5h6v1h-6V5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"charging-station-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.5,3H9V1.5C9,1.2239,8.7761,1,8.5,1S8,1.2239,8,1.5V3c0,0.5523,0.4477,1,1,1v4.25C9,8.3881,8.8881,8.5,8.75,8.5&#xA;&#x9;S8.5,8.3881,8.5,8.25V6.5C8.5,5.6716,7.8284,5,7,5V2c0-0.5523-0.4477-1-1-1H2C1.4477,1,1,1.4477,1,2v7c0,0.5523,0.4477,1,1,1h4&#xA;&#x9;c0.5523,0,1-0.4477,1-1V6c0.2761,0,0.5,0.2239,0.5,0.5v1.75c0,0.6904,0.5596,1.25,1.25,1.25S10,8.9404,10,8.25V3.5&#xA;&#x9;C10,3.2239,9.7761,3,9.5,3z M3.5,8.75H3L4,6H1.75L4.5,2.25H5L4,5h2.25L3.5,8.75z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"charging-station-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13,4V2.49C12.9946,2.2178,12.7723,1.9999,12.5,2c-0.2816,0.0047-0.5062,0.2367-0.5015,0.5184&#xA;&#x9;C11.9987,2.5289,11.9992,2.5395,12,2.55V5c0,0.5523,0.4477,1,1,1v5.5c0,0.2761-0.2239,0.5-0.5,0.5S12,11.7761,12,11.5v-2&#xA;&#x9;C12,8.6716,11.3284,8,10.5,8H9V2c0-0.5523-0.4477-1-1-1H2C1.4477,1,1,1.4477,1,2v11c0,0.5523,0.4477,1,1,1h6c0.5523,0,1-0.4477,1-1&#xA;&#x9;V9h1.5C10.7761,9,11,9.2239,11,9.5v2c0,0.8284,0.6716,1.5,1.5,1.5c0.8284,0,1.5-0.6716,1.5-1.5V5C14,4.4477,13.5523,4,13,4z&#xA;&#x9; M7.2004,7.3995l-2.6006,3.4674l-0.0164-0.0072C4.5369,10.9384,4.4667,11,4.3688,11c-0.1476,0-0.2672-0.1196-0.2672-0.2672&#xA;&#x9;c0-0.028,0.0217-0.0463,0.0297-0.0717l-0.0177-0.0078l0.7766-2.3245C4.9442,8.1671,4.8238,8,4.6533,8H2.9994&#xA;&#x9;C2.7936,8,2.6762,7.7651,2.7996,7.6005l2.6006-3.4674l0.0164,0.0072C5.4631,4.0616,5.5333,4,5.6312,4&#xA;&#x9;c0.1476,0,0.2672,0.1196,0.2672,0.2672c0,0.028-0.0217,0.0463-0.0297,0.0717l0.0176,0.0078L5.1099,6.6711&#xA;&#x9;C5.0558,6.8329,5.1762,7,5.3467,7h1.6539C7.2064,7,7.3238,7.2349,7.2004,7.3995z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cinema-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10,5.5v2C10,7.7761,9.7761,8,9.5,8S9,7.7761,9,7.5l0,0C8.9427,7.2478,8.7433,7.0523,8.49,7H8v1.63&#xA;&#x9;C8,8.8343,7.8343,9,7.63,9H1.37C1.1657,9,1,8.8343,1,8.63V5.37C1,5.1657,1.1657,5,1.37,5h6.26C7.8343,5,8,5.1657,8,5.37V6h0.49&#xA;&#x9;C8.7433,5.9477,8.9427,5.7522,9,5.5C9,5.2239,9.2239,5,9.5,5S10,5.2239,10,5.5z M2.5,2C1.6716,2,1,2.6716,1,3.5S1.6716,5,2.5,5&#xA;&#x9;S4,4.3284,4,3.5S3.3284,2,2.5,2z M2.5,4C2.2239,4,2,3.7761,2,3.5S2.2239,3,2.5,3S3,3.2239,3,3.5S2.7761,4,2.5,4z M6,1&#xA;&#x9;C4.8954,1,4,1.8954,4,3s0.8954,2,2,2s2-0.8954,2-2S7.1046,1,6,1z M6,4C5.4477,4,5,3.5523,5,3s0.4477-1,1-1s1,0.4477,1,1&#xA;&#x9;S6.5523,4,6,4z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cinema-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,7.5v2c0,0.2761-0.2239,0.5-0.5,0.5S13,9.7761,13,9.5c0,0,0.06-0.5-1-0.5h-1v2.5c0,0.2761-0.2239,0.5-0.5,0.5h-8&#xA;&#x9;C2.2239,12,2,11.7761,2,11.5v-4C2,7.2239,2.2239,7,2.5,7h8C10.7761,7,11,7.2239,11,7.5V8h1c1.06,0,1-0.5,1-0.5&#xA;&#x9;C13,7.2239,13.2239,7,13.5,7S14,7.2239,14,7.5z M4,3C2.8954,3,2,3.8954,2,5s0.8954,2,2,2s2-0.8954,2-2S5.1046,3,4,3z M4,6&#xA;&#x9;C3.4477,6,3,5.5523,3,5s0.4477-1,1-1s1,0.4477,1,1S4.5523,6,4,6z M8.5,2C7.1193,2,6,3.1193,6,4.5S7.1193,7,8.5,7S11,5.8807,11,4.5&#xA;&#x9;S9.8807,2,8.5,2z M8.5,6C7.6716,6,7,5.3284,7,4.5S7.6716,3,8.5,3S10,3.6716,10,4.5S9.3284,6,8.5,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"circle-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10,5.5C10,7.9853,7.9853,10,5.5,10S1,7.9853,1,5.5S3.0147,1,5.5,1S10,3.0147,10,5.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"circle-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,7.5c0,3.5899-2.9101,6.5-6.5,6.5S1,11.0899,1,7.5S3.9101,1,7.5,1S14,3.9101,14,7.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"circle-stroked-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path8564-5-6-2\\" d=\\"M5.5,0C8.5376,0,11,2.4624,11,5.5S8.5376,11,5.5,11S0,8.5376,0,5.5&#xA;&#x9;S2.4624,0,5.5,0z M5.5,1.2222c-2.3626,0-4.2778,1.9152-4.2778,4.2778S3.1374,9.7778,5.5,9.7778S9.7778,7.8626,9.7778,5.5&#xA;&#x9;S7.8626,1.2222,5.5,1.2222z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"circle-stroked-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path8564-5-6-4\\" d=\\"M7.5,0C11.6422,0,15,3.3578,15,7.5S11.6422,15,7.5,15&#xA;&#x9;S0,11.6422,0,7.5S3.3578,0,7.5,0z M7.5,1.6666c-3.2217,0-5.8333,2.6117-5.8333,5.8334S4.2783,13.3334,7.5,13.3334&#xA;&#x9;s5.8333-2.6117,5.8333-5.8334S10.7217,1.6666,7.5,1.6666z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\" id=\\"city-11\\">\\n  <path d=\\"M9.7514,3h-0.75V1.25c0-0.13807-0.11193-0.25-0.25-0.25C8.75137,1,8.75133,1,8.7513,1h-0.5&#xA;&#x9;c-0.13807,0-0.25,0.11193-0.25,0.25V3h-0.75c-0.13807,0-0.25,0.11193-0.25,0.25v3.751H5.2518c-0.13862,0-0.251,0.11238-0.251,0.251&#xA;&#x9;v2.5c0.0011,0.13784,0.11315,0.249,0.251,0.249h4.5006c0.13768-0.00055,0.249-0.11232,0.249-0.25V3.25&#xA;&#x9;C10.0014,3.11193,9.88947,3,9.7514,3z M6.0009,8.0012h1v1h-1V8.0012z M9.0009,9.0012h-1v-1h1V9.0012z M9.0009,7.0012h-1v-1h1V7.0012&#xA;&#x9;z M9.0009,5.0012h-1v-1h1V5.0012z M6.0009,1.2507C6.00129,1.11263,5.88967,1.00039,5.7516,1C5.75133,1,5.75107,1,5.7508,1H3.25&#xA;&#x9;C3.11193,1,3,1.11193,3,1.25V2H2.25C2.11193,2,2,2.11193,2,2.25V3H1.25C1.11193,3,1,3.11193,1,3.25v6.5014&#xA;&#x9;c0,0.13807,0.11193,0.25,0.25,0.25H4V6.0009h2V1.25L6.0009,1.2507z M3,9.0013H2v-1h1V9.0013z M3,7.0013H2v-1h1V7.0013z M3,5.0013H2&#xA;&#x9;v-1h1V5.0013z M5,5.0013H4v-1h1V5.0013z M5,3.0013H4V2h1v1V3.0013z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\" id=\\"city-15\\">\\n  <path d=\\"M13.6368,3.9994h-1.6387V1.3608C11.99804,1.16148,11.83642,0.99994,11.6371,1l0,0h-0.278&#xA;&#x9;c-0.19932,0-0.3609,0.16158-0.3609,0.3609l0,0v2.6385H9.36c-0.19932,0-0.3609,0.16158-0.3609,0.3609l0,0l0,0v5.6381h-3.637&#xA;&#x9;c-0.20042,0-0.3629,0.16248-0.3629,0.3629v3.2745c0.00055,0.20003,0.16287,0.3619,0.3629,0.3619h8.2747&#xA;&#x9;c0.19932,0,0.3609-0.16158,0.3609-0.3609l0,0V4.36c0-0.19932-0.16158-0.3609-0.3609-0.3609l0,0L13.6368,3.9994z M6.9989,11.9981h-1&#xA;&#x9;v-1h1V11.9981z M8.9989,11.9981h-1v-1h1V11.9981z M10.9989,11.9981h-1v-1h1V11.9981z M10.9989,9.9981h-1v-1h1V9.9981z&#xA;&#x9; M10.9989,7.9981h-1v-1h1V7.9981z M10.9989,5.9981h-1v-1h1V5.9981z M12.9989,11.9971h-1v-1h1V11.9971z M12.9989,9.9971h-1v-1h1&#xA;&#x9;V9.9971z M12.9989,7.9971h-1v-1h1V7.9971z M12.9989,5.9971h-1v-1h1V5.9971z M7.9987,1.3608C7.99864,1.16152,7.83708,1,7.6378,1H5.36&#xA;&#x9;C5.16068,1,4.9991,1.16158,4.9991,1.3609l0,0V3H3.36C3.16138,3.00049,3.00049,3.16138,3,3.36l0,0v0.6394H1.3608&#xA;&#x9;C1.16164,3.99945,1.00017,4.16084,1,4.36l0,0v9.2765c0,0.19932,0.16158,0.3609,0.3609,0.3609h2.6385V8.9986h3.9993V1.3608z&#xA;&#x9; M3,11.9981H2v-1h1V11.9981z M3,9.9981H2v-1h1V9.9981z M3,7.9981H2v-1h1V7.9981z M3,5.9981H2v-1h1V5.9981z M5,7.9981H4v-1h1V7.9981z&#xA;&#x9; M5,5.9981H4v-1h1V5.9981z M7,7.9981H6v-1h1V7.9981z M7,5.9981H6v-1h1V5.9981z M7,3.9981H6V3h1v1V3.9981z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"clothing-store-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect4181-0-0\\" d=\\"&#xA;&#x9;M2.5,1l-2,2v2h2v5h6V5h2V3l-2-2H7L5.5,4L4,1H2.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"clothing-store-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect4181-0-0\\" d=\\"&#xA;&#x9;M3.5,1L0,4v3h2.9L3,14h9V7h3V4l-3.5-3H10L7.5,5L5,1H3.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"college-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <g>\\n    <path d=\\"M2,7.3c0.3-0.2,0.5-0.5,0.5-0.8c0-0.4-0.2-0.7-0.6-0.9V4.4L5.5,6L11,3.5L5.5,1L0,3.5L1.2,4v1.6&#xA;  C0.8,5.8,0.6,6.1,0.6,6.5c0,0.3,0.2,0.6,0.5,0.8L0.6,9c-0.3,1,0.5,1,0.5,1h1c0,0,0.8,0,0.5-1L2,7.3z\\"/>\\n    <path d=\\"M3.5,6.2c0,0.1,0,0.2,0,0.3c0,0.4-0.2,0.8-0.4,1.1C3.3,8,3.5,8.4,3.5,9v0.6C4,9.8,4.7,10,5.5,10&#xA;  C8,10,9,8.5,9,8.5v-3L5.5,7.1L3.5,6.2z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"college-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M7.5,1L0,4.5l2,0.9v1.7C1.4,7.3,1,7.9,1,8.5s0.4,1.2,1,1.4V10l-0.9,2.1&#xA; C0.8,13,1,14,2.5,14s1.7-1,1.4-1.9L3,10c0.6-0.3,1-0.8,1-1.5S3.6,7.3,3,7.1V5.9L7.5,8L15,4.5L7.5,1z M11.9,7.5l-4.5,2L5,8.4v0.1&#xA; c0,0.7-0.3,1.3-0.8,1.8l0.6,1.4v0.1C4.9,12.2,5,12.6,4.9,13c0.7,0.3,1.5,0.5,2.5,0.5c3.3,0,4.5-2,4.5-3L11.9,7.5L11.9,7.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"commercial-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M0,5c-0.0224-1.0854,0.3309-2.1451,1-3h9c0.6691,0.8549,1.0224,1.9146,1,3H0z M2,6v5h4V7h2v4h1V6H2z M5,9H3V7h2V9z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"commercial-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,7H1c0.0881-1.3829,0.427-2.7383,1-4h11C13.5731,4.2617,13.9119,5.6171,14,7z M3,8h9v6h-1V9H8v5H3V8z M4,11h3V9H4V11z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"communications-tower-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <g id=\\"communications-tower-11\\">\\n    <path d=\\"M7.6553,3.5645h-.4V1.4482h.4ZM3.7017,1.4482h-.4V3.5645h.4Zm6-.2851h-.4V4.4414h.4Zm-8.023,0h-.4V4.4414h.4ZM5.7572,4.1683l.4366,0h0a.3541.3541,0,0,1,.3457.2812L7.5792,9.4366H9V10H2V9.4366H3.434L4.4731,4.45a.3548.3548,0,0,1,.3453-.2813l.4388,0V2.912h0A.9155.9155,0,0,1,4.59,2.0373a.9272.9272,0,1,1,1.167.8874Zm-.96,2.1881H6.2159L5.9072,4.875H5.106ZM4.383,8.3447H6.63L6.2786,6.6572H4.7346ZM6.8577,9.4366l-.1648-.7911H4.32l-.1648.7911Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"communications-tower-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <g id=\\"communications-tower-15\\">\\n    <path d=\\"M11.8545,6.4336l-.4131-.2813a4.7623,4.7623,0,0,0,.2813-4.8779l-.0835-.1533L12.0747.875l.0908.167a5.2619,5.2619,0,0,1-.311,5.3916Zm1.1521,7.1316V14h-11v-.4348H4.4952L6.0439,6.4a.5.5,0,0,1,.4888-.3945h.7255V4.6014A1.14,1.14,0,0,1,6.3756,3.5a1.1568,1.1568,0,1,1,2.3136,0,1.14,1.14,0,0,1-.931,1.1112V6.0059h.7223A.5.5,0,0,1,8.9692,6.4l1.5478,7.1648ZM8.4543,8.751H6.5588L6.236,10.2441H8.777ZM6.1279,10.7441l-.3233,1.4952H9.2082l-.3231-1.4952ZM6.936,7.0059,6.6669,8.251H8.3463L8.0771,7.0059ZM5.5179,13.5652H9.4948l-.1786-.8259h-3.62ZM5.21,5.0137a2.7523,2.7523,0,0,1,.0161-3.0518L4.812,1.6826a3.25,3.25,0,0,0-.019,3.6065ZM10.7568,3.5a3.2433,3.2433,0,0,0-.5341-1.7861l-.418.2754a2.7517,2.7517,0,0,1-.0176,3.0488l.4141.2793A3.2341,3.2341,0,0,0,10.7568,3.5ZM3.5342,6.1182A4.7637,4.7637,0,0,1,3.3813,1.13L2.9478.88a5.2643,5.2643,0,0,0,.1694,5.5137Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"confectionery-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <g id=\\"confectionary-11\\">\\n    <path d=\\"M9.2407,2.513a.7461.7461,0,0,0-.7461-.7461.7461.7461,0,1,0-1.4922,0V3.5132A2.4888,2.4888,0,0,0,3.5113,7H1.7485a.7461.7461,0,0,0,0,1.4922.7461.7461,0,0,0,.7461.7461.7461.7461,0,0,0,1.4922,0V7.4778A2.4887,2.4887,0,0,0,7.493,4.0052H9.2407a.7461.7461,0,0,0,0-1.4922ZM5.5,7.2842a1.7824,1.7824,0,0,1-.72-3.4135.8158.8158,0,0,1,.2438.1772A1.6481,1.6481,0,0,1,5.3252,5.124v.7373a1.9718,1.9718,0,0,0,.3877,1.3213,1.1554,1.1554,0,0,0,.0958.07A1.7759,1.7759,0,0,1,5.5,7.2842Zm.72-.1549a.8158.8158,0,0,1-.2438-.1772A1.6481,1.6481,0,0,1,5.6748,5.876V5.1387a1.9718,1.9718,0,0,0-.3877-1.3213,1.1554,1.1554,0,0,0-.0958-.07A1.78,1.78,0,0,1,6.22,7.1293Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"confectionery-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <g id=\\"confectionary-15\\">\\n    <path d=\\"M13,4a1,1,0,0,0-1-1,1,1,0,0,0-2,0V5.0673A3.4808,3.4808,0,0,0,4.3583,9H2a1,1,0,0,0,0,2,1,1,0,0,0,1,1,1,1,0,0,0,2,0V9.9326A3.4807,3.4807,0,0,0,10.6417,6H13a1,1,0,0,0,0-2ZM7.5,9.9925A2.484,2.484,0,0,1,6.3184,5.319a1.0809,1.0809,0,0,1,.5459.307A2.1243,2.1243,0,0,1,7.25,7.0117l.001.9561A2.5821,2.5821,0,0,0,7.76,9.7031a1.5462,1.5462,0,0,0,.2591.2333A2.4861,2.4861,0,0,1,7.5,9.9925ZM8.6815,9.681a1.0813,1.0813,0,0,1-.5458-.307A2.1243,2.1243,0,0,1,7.75,7.9883l-.001-.9561A2.5821,2.5821,0,0,0,7.24,5.2969a1.5557,1.5557,0,0,0-.2592-.2334A2.4843,2.4843,0,0,1,8.6815,9.681Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"convenience-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <g id=\\"convenience-store-11\\">\\n    <path d=\\"M8.8211,4.2685h-.62c-.1554-.6-.28-1.0651-.2826-1.0734l-.0111-.05c0-.0011-.12-.5479-.41-.5479H3.519c-.2889,0-.4091.5468-.41.5523-.008.0333-.136.5119-.293,1.1185h-.62c.1756-.6809.3228-1.2291.3228-1.2291s.1875-1.0417,1-1.0417h.4963a.4932.4932,0,0,1,.4829-.4153h2a.4932.4932,0,0,1,.4829.4153h.5171c.8125,0,1,1.0417,1,1.0417S8.6454,3.5876,8.8211,4.2685ZM2.9189,9.9954a.4945.4945,0,0,1-.4828-.368c-.23-.8736-.8-3.0538-.9379-3.63a.5.5,0,1,1,0-1h8a.5.5,0,0,1,0,1c-.1375.5763-.7156,2.7587-.9487,3.6313a.4948.4948,0,0,1-.4825.3665Zm1.094-3.2968a.5129.5129,0,0,0-1.0235,0V8.51a.5129.5129,0,0,0,1.0235,0Zm1.9971,0a.5129.5129,0,0,0-1.0235,0V8.51a.5129.5129,0,0,0,1.0235,0Zm2.0058,0a.5129.5129,0,0,0-1.0236,0V8.51a.5129.5129,0,0,0,1.0236,0Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"convenience-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <g id=\\"convenience-store-15\\">\\n    <path d=\\"M2.9982,3.0687s.1875-1.062,1-1.062H5.0043V1.7276a.5.5,0,0,1,.5-.5H9.4882a.5.5,0,0,1,.5.5v.2791h1.01a.8324.8324,0,0,1,.6373.2937,1.7589,1.7589,0,0,1,.3627.7683s.3108,1.5719.5921,2.9181h-.938L11,3,3.982,2.9956,3.3336,5.9868H2.382Zm11,4.9144a1,1,0,0,1-.9992,1l-1.0008,3.973s-.1875,1.0417-1,1.0417h-7c-.8125,0-1-1.0417-1-1.0417L1.9822,8.98a.9985.9985,0,0,1,.016-1.9968h11A1,1,0,0,1,13.9982,7.9831ZM5.0327,12.13,5.03,11.0051,4.6392,9.4686a.5373.5373,0,1,0-1.0649.1445L3.78,11.0075l.1874,1.2672A.5373.5373,0,1,0,5.0327,12.13Zm2-2.5967A.5332.5332,0,0,0,6.4994,9l-.0039.0008L6.4886,9a.4992.4992,0,0,0-.3575.1509.529.529,0,0,0-.1648.3828v2.68a.5332.5332,0,1,0,1.0663,0Zm1.998,0A.5314.5314,0,0,0,8.694,9.04a.4992.4992,0,0,0-.393,0,.5312.5312,0,0,0-.3366.4934v2.68a.5331.5331,0,1,0,1.0662,0Zm2.3857.08a.5373.5373,0,1,0-1.0649-.1445L9.96,10.9938,9.9579,12.13a.5373.5373,0,1,0,1.0649.1446Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cricket-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M6,1c0,0.5523-0.4477,1-1,1S4,1.5523,4,1s0.4477-1,1-1S6,0.4477,6,1z M8.88,5.18l-1-2l0,0l0,0&#xA;&#x9;C7.7859,3.0671,7.647,3.0012,7.5,3H2.77C2.3827,2.9815,2.0467,3.2651,2,3.65l0,0l-1,6.71l0,0c-0.0068,0.0464-0.0068,0.0936,0,0.14&#xA;&#x9;C1,10.7761,1.2239,11,1.5,11c0.2307,0.0129,0.4391-0.1371,0.5-0.36l0,0l1.22-3.89l0,0l0.21-0.83l0.4,0.44l0,0L5,7.6v2.9&#xA;&#x9;C5,10.7761,5.2239,11,5.5,11S6,10.7761,6,10.5v-3l0,0l0,0C5.9971,7.3984,5.9621,7.3004,5.9,7.22l0,0L4.45,5.5L5.5,4h1.71l0.92,1.84&#xA;&#x9;l0,0C8.2247,5.9439,8.3594,6.0022,8.5,6C8.7723,6.0001,8.9946,5.7822,9,5.51C8.9826,5.3931,8.9418,5.2808,8.88,5.18z M10.5,8&#xA;&#x9;C10.2239,8,10,8.2239,10,8.5S10.2239,9,10.5,9S11,8.7761,11,8.5S10.7761,8,10.5,8z M8.69,8V7.25C8.69,7.1119,8.5781,7,8.44,7&#xA;&#x9;S8.19,7.1119,8.19,7.25V8C8.0378,8.0855,7.9426,8.2455,7.94,8.42v2.08c0,0.2761,0.2239,0.5,0.5,0.5s0.5-0.2239,0.5-0.5V8.41&#xA;&#x9;C8.9339,8.2391,8.8392,8.0837,8.69,8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cricket-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M8,1.5C8,2.3284,7.3284,3,6.5,3S5,2.3284,5,1.5S5.6716,0,6.5,0S8,0.6716,8,1.5z M10.88,7.18L10.88,7.18l-2-2l0,0l0,0&#xA;&#x9;C8.7815,5.0616,8.6339,4.9952,8.48,5H3.75C3.3736,4.9915,3.0508,5.2669,3,5.64l0,0l-1,7.7l0,0c-0.0068,0.0464-0.0068,0.0936,0,0.14&#xA;&#x9;c0,0.2761,0.2239,0.5,0.5,0.5c0.2251,0.0153,0.4315-0.1251,0.5-0.34l0,0l1.2-3.89l0,0l0.26-0.83l0.4,0.44l0,0L6,10.6v2.9&#xA;&#x9;C6,13.7761,6.2239,14,6.5,14S7,13.7761,7,13.5v-3l0,0l0,0c-0.0081-0.0788-0.0356-0.1544-0.08-0.22l0,0L5.48,8.5l1-2.5h1.71l2,1.84&#xA;&#x9;l0,0c0.0928,0.1077,0.2278,0.1697,0.37,0.17C10.8163,7.9791,11.007,7.7581,11,7.5C10.9997,7.3824,10.9571,7.2688,10.88,7.18z&#xA;&#x9; M14,11.27c-0.4142,0-0.75,0.3358-0.75,0.75s0.3358,0.75,0.75,0.75s0.75-0.3358,0.75-0.75S14.4142,11.27,14,11.27z M10.76,9.74V9&#xA;&#x9;c0-0.1381-0.1119-0.25-0.25-0.25S10.26,8.8619,10.26,9v0.74c-0.1522,0.0855-0.2474,0.2455-0.25,0.42v3.34&#xA;&#x9;c0,0.2761,0.2239,0.5,0.5,0.5s0.5-0.2239,0.5-0.5v-3.34C11.0074,9.9855,10.9122,9.8255,10.76,9.74z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cross-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M2.2,1.19l3.3,3.3L8.8,1.2C8.9314,1.0663,9.1127,0.9938,9.3,1C9.6761,1.0243,9.9757,1.3239,10,1.7&#xA;&#x9;c0.0018,0.1806-0.0705,0.3541-0.2,0.48L6.49,5.5L9.8,8.82C9.9295,8.9459,10.0018,9.1194,10,9.3C9.9757,9.6761,9.6761,9.9757,9.3,10&#xA;&#x9;c-0.1873,0.0062-0.3686-0.0663-0.5-0.2L5.5,6.51L2.21,9.8c-0.1314,0.1337-0.3127,0.2062-0.5,0.2C1.3265,9.98,1.02,9.6735,1,9.29&#xA;&#x9;C0.9982,9.1094,1.0705,8.9359,1.2,8.81L4.51,5.5L1.19,2.18C1.0641,2.0524,0.9955,1.8792,1,1.7C1.0243,1.3239,1.3239,1.0243,1.7,1&#xA;&#x9;C1.8858,0.9912,2.0669,1.06,2.2,1.19z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cross-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M2.64,1.27L7.5,6.13l4.84-4.84C12.5114,1.1076,12.7497,1.0029,13,1c0.5523,0,1,0.4477,1,1&#xA;&#x9;c0.0047,0.2478-0.093,0.4866-0.27,0.66L8.84,7.5l4.89,4.89c0.1648,0.1612,0.2615,0.3796,0.27,0.61c0,0.5523-0.4477,1-1,1&#xA;&#x9;c-0.2577,0.0107-0.508-0.0873-0.69-0.27L7.5,8.87l-4.85,4.85C2.4793,13.8963,2.2453,13.9971,2,14c-0.5523,0-1-0.4477-1-1&#xA;&#x9;c-0.0047-0.2478,0.093-0.4866,0.27-0.66L6.16,7.5L1.27,2.61C1.1052,2.4488,1.0085,2.2304,1,2c0-0.5523,0.4477-1,1-1&#xA;&#x9;C2.2404,1.0029,2.4701,1.0998,2.64,1.27z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"dam-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10,7.51c0,0.2761-0.2239,0.5-0.5,0.5l0,0C9.241,8.0319,9.0006,8.1539,8.83,8.35c-0.2714,0.2887-0.6175,0.4964-1,0.6&#xA;&#x9;C7.2185,9.1316,6.5566,8.9924,6.07,8.58L5.73,8.23c-0.2997-0.2948-0.7803-0.2948-1.08,0L5,9.38&#xA;&#x9;c0.0664,0.268-0.0971,0.5392-0.3651,0.6055C4.5908,9.9965,4.5454,10.0013,4.5,10h-3C1.2239,10,1,9.7761,1,9.5v-8&#xA;&#x9;C0.9999,1.2277,1.2178,1.0054,1.49,1h0.7c0.2346-0.0011,0.4384,0.1611,0.49,0.39L3.41,3.9l0.1-0.06C3.67,3.72,3.82,3.57,4,3.44&#xA;&#x9;c0.7076-0.5968,1.7424-0.5968,2.45,0C6.6,3.57,6.74,3.71,6.89,3.83c0.2847,0.2546,0.7153,0.2546,1,0l0.41-0.4&#xA;&#x9;C8.6306,3.1458,9.0541,2.9928,9.49,3l0,0c0.2761,0,0.5,0.2239,0.5,0.5S9.7661,4,9.49,4l0,0C9.231,4.0219,8.9906,4.1439,8.82,4.34&#xA;&#x9;c-0.2714,0.2887-0.6175,0.4964-1,0.6C7.2085,5.1216,6.5466,4.9824,6.06,4.57L5.73,4.23C5.4324,3.9262,4.9449,3.9213,4.6411,4.2189&#xA;&#x9;C4.6374,4.2226,4.6337,4.2263,4.63,4.23C4.49,4.35,4.36,4.48,4.21,4.6C4.0521,4.7221,3.8768,4.8198,3.69,4.89l0.67,2.32&#xA;&#x9;c0.6727-0.3402,1.4836-0.2458,2.06,0.24c0.15,0.13,0.29,0.27,0.44,0.39c0.2847,0.2546,0.7153,0.2546,1,0L8.3,7.42&#xA;&#x9;C8.6321,7.1394,9.0554,6.99,9.49,7l0,0C9.7661,6.9944,9.9944,7.2137,10,7.4898C10.0001,7.4965,10.0001,7.5033,10,7.51z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"dam-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.94,9.5c0,0.2761-0.2239,0.5-0.5,0.5l0,0c-0.259,0.0219-0.4994,0.1439-0.67,0.34c-0.2714,0.2887-0.6175,0.4964-1,0.6&#xA;&#x9;c-0.6115,0.1816-1.2734,0.0424-1.76-0.37l-0.39-0.35c-0.2976-0.3038-0.7851-0.3087-1.0889-0.0111&#xA;&#x9;C8.5274,10.2126,8.5237,10.2163,8.52,10.22c-0.14,0.12-0.27,0.25-0.42,0.37c-0.7278,0.5784-1.7663,0.5489-2.46-0.07L5.3,10.19&#xA;&#x9;l-0.1-0.06l0.3,1.22l0.49,2c0.0829,0.2634-0.0634,0.5441-0.3267,0.6271C5.6105,13.9937,5.5553,14.0014,5.5,14h-4&#xA;&#x9;C1.2239,14,1,13.7761,1,13.5v-12C1,1.2239,1.2239,1,1.5,1h1.1c0.2346-0.0011,0.4384,0.1611,0.49,0.39L4,5.06V5.2&#xA;&#x9;c0.6569-0.314,1.4361-0.2205,2,0.24c0.16,0.13,0.31,0.28,0.47,0.41c0.2847,0.2546,0.7153,0.2546,1,0c0.16-0.13,0.31-0.28,0.47-0.41&#xA;&#x9;c0.7076-0.5968,1.7424-0.5968,2.45,0c0.15,0.13,0.29,0.27,0.44,0.39c0.2847,0.2546,0.7153,0.2546,1,0l0.47-0.41&#xA;&#x9;c0.3163-0.2672,0.7159-0.4157,1.13-0.42l0,0c0.2761,0,0.5,0.2239,0.5,0.5S13.7061,6,13.43,6l0,0&#xA;&#x9;c-0.259,0.0219-0.4994,0.1439-0.67,0.34c-0.2714,0.2887-0.6175,0.4964-1,0.6C11.1485,7.1216,10.4866,6.9824,10,6.57L9.67,6.23&#xA;&#x9;C9.3724,5.9262,8.8849,5.9213,8.5811,6.2189C8.5774,6.2226,8.5737,6.2263,8.57,6.23C8.43,6.35,8.3,6.48,8.15,6.6&#xA;&#x9;C7.4222,7.1784,6.3837,7.1489,5.69,6.53L5.3,6.19c-0.2847-0.2546-0.7153-0.2546-1,0L4.24,6.24L4.93,9&#xA;&#x9;C5.3226,9.029,5.6965,9.1793,6,9.43c0.16,0.13,0.31,0.28,0.47,0.41c0.2847,0.2546,0.7153,0.2546,1,0c0.16-0.13,0.31-0.28,0.47-0.41&#xA;&#x9;c0.7076-0.5968,1.7424-0.5968,2.45,0c0.15,0.13,0.29,0.27,0.44,0.39c0.2847,0.2546,0.7153,0.2546,1,0l0.47-0.41&#xA;&#x9;c0.3177-0.2636,0.7172-0.4085,1.13-0.41l0,0c0.2761-0.0055,0.5044,0.2138,0.5099,0.4899C13.94,9.4933,13.94,9.4966,13.94,9.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"danger-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M6.62,8.5l3.11,1.55l-0.45,0.89L5.5,9.06l-3.78,1.89l-0.45-0.89L4.38,8.5l-3.1-1.55l0.45-0.89L5.5,7.94l3.78-1.89l0.44,0.9&#xA;&#x9;L6.62,8.5z M8.5,3.21V3.5l-1,1v1l-2,1l-2-1v-1l-1-1V3C2.4438,1.3994,3.6958,0.0562,5.2964,0C5.3643-0.0024,5.4322-0.0024,5.5,0&#xA;&#x9;c1.7059,0.0484,3.0495,1.4705,3.0011,3.1764C8.5008,3.1876,8.5004,3.1988,8.5,3.21z M4.71,2.71c0-0.4363-0.3537-0.79-0.79-0.79&#xA;&#x9;S3.13,2.2737,3.13,2.71c0,0.4363,0.3537,0.79,0.79,0.79l0,0C4.3563,3.5,4.71,3.1463,4.71,2.71z M5,4.5H4.5v1H5V4.5z M6.5,4.5H6v1&#xA;&#x9;h0.5V4.5z M7.86,2.71c0-0.4363-0.3537-0.79-0.79-0.79S6.28,2.2737,6.28,2.71S6.6337,3.5,7.07,3.5l0,0&#xA;&#x9;C7.5063,3.5,7.86,3.1463,7.86,2.71z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"danger-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.94,14.68c-0.0749,0.194-0.262,0.3215-0.47,0.32c-0.0595,0.0107-0.1205,0.0107-0.18,0L7.5,12.56L1.7,15&#xA;&#x9;c-0.2572,0.1005-0.5472-0.0266-0.6476-0.2838C1.0516,14.7141,1.0508,14.7121,1.05,14.71c-0.1291-0.2441-0.0358-0.5467,0.2084-0.6757&#xA;&#x9;C1.2845,14.0205,1.3118,14.009,1.34,14l4.85-2l-4.85-2C1.0758,9.9197,0.9267,9.6404,1.007,9.3762s0.3596-0.4133,0.6238-0.333&#xA;&#x9;C1.6545,9.0504,1.6776,9.0594,1.7,9.07l5.8,2.41l5.8-2.41c0.2494-0.1185,0.5477-0.0124,0.6662,0.237&#xA;&#x9;c0.1185,0.2494,0.0124,0.5477-0.237,0.6662C13.7068,9.9839,13.6837,9.9928,13.66,10L8.8,12l4.85,2&#xA;&#x9;c0.2607,0.091,0.3983,0.3761,0.3074,0.6368C13.9523,14.6515,13.9465,14.6659,13.94,14.68z M12,4.23v0.45&#xA;&#x9;c-0.0021,0.2129-0.0722,0.4196-0.2,0.59C11.2414,5.8883,10.6399,6.4664,10,7v1.16c0.0015,0.208-0.126,0.3951-0.32,0.47L7.52,9.5&#xA;&#x9;H7.45L5.28,8.63C5.1016,8.5428,4.9917,8.3584,5,8.16V7C4.3528,6.4675,3.7446,5.8893,3.18,5.27C3.0593,5.0972,2.9963,4.8907,3,4.68&#xA;&#x9;V4.23C3.1669,2.0117,4.8974,0.2307,7.11,0h0.36l0,0h0.39C10.0862,0.2131,11.8348,1.9997,12,4.23z M6,4c0-0.5523-0.4477-1-1-1&#xA;&#x9;S4,3.4477,4,4s0.4477,1,1,1S6,4.5523,6,4z M7,7c0-0.2761-0.2239-0.5-0.5-0.5S6,6.7239,6,7v0.5C6,7.7761,6.2239,8,6.5,8&#xA;&#x9;S7,7.7761,7,7.5V7z M9,7c0-0.2761-0.2239-0.5-0.5-0.5S8,6.7239,8,7v0.5C8,7.7761,8.2239,8,8.5,8S9,7.7761,9,7.5V7z M11,4&#xA;&#x9;c0-0.5523-0.4477-1-1-1S9,3.4477,9,4s0.4477,1,1,1S11,4.5523,11,4z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\" id=\\"defibrillator-11\\">\\n  <path d=\\"M1.42,4.7955C-0.2131,1.5291,3.9327-.6514,5.512,2.6149,7.0914-.6514,11.2371,1.5291,9.6039,4.7955c-0.0225.0377-.0483,0.0732-0.071,0.1108H8.3867L7.5586,3.252a0.65,0.65,0,0,0-1.1172,0L5,6.1338,4.5586,5.252A0.6243,0.6243,0,0,0,4,4.9063H1.4913C1.4685,4.8687,1.4427,4.8332,1.42,4.7955ZM8,6.1563a0.6243,0.6243,0,0,1-.5586-0.3457L7,4.9287,5.5586,7.8105a0.6241,0.6241,0,0,1-1.1172,0L3.6133,6.1563H2.3006a24.2269,24.2269,0,0,0,2.8973,3.449L5.2134,9.6208A0.44,0.44,0,0,0,5.835,9.6053a24.2289,24.2289,0,0,0,2.8905-3.449H8Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\" id=\\"defibrillator-15\\">\\n  <path d=\\"M1.55,6.3381C-0.8368,1.7416,5.18-1.3228,7.502,3.2737c2.3215-4.5965,8.3387-1.5322,5.9523,3.0644-0.0869.1671-.2028,0.3456-0.3114,0.5212H11.335L9.5205,4.1377A0.6252,0.6252,0,0,0,8.42,4.2524l-1.6484,4.12-1.33-1.33A0.6254,0.6254,0,0,0,5,6.8594H1.8611C1.7525,6.6837,1.6366,6.5052,1.55,6.3381ZM11,8.1094a0.6263,0.6263,0,0,1-.5205-0.2783L9.1387,5.82,7.58,9.7168a0.6245,0.6245,0,0,1-.4546.38A0.6047,0.6047,0,0,1,7,10.1094a0.6251,0.6251,0,0,1-.4419-0.1826L4.7412,8.1094H2.7358a42.67,42.67,0,0,0,4.46,4.6732,0.4642,0.4642,0,0,0,.6222,0,43.26,43.26,0,0,0,4.4505-4.6732H11Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"dentist-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.48,6C4.857,6.0823,4.3088,6.4527,4,7c-0.46,1.21-0.14,3-0.82,3S2.7,8.49,2.5,7C2.2864,6.3547,2.0326,5.7235,1.74,5.11&#xA;&#x9;C1.53,3.7,1,1.28,2.67,1S4.35,2.52,5.5,2.52S6.67,0.72,8.33,1s1.14,2.7,0.93,4.11C8.9674,5.7235,8.7136,6.3547,8.5,7&#xA;&#x9;c-0.2,1.49,0,3-0.68,3S7.46,8.21,7,7C6.6912,6.4527,6.143,6.0823,5.52,6l0,0H5.48z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"dentist-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M4.36,14c-1,0-0.56-2.67-0.86-5c-0.1-0.76-1-1.49-1.12-2.06C2,5,1.39,1.44,3.66,1S6,3,7.54,3s1.57-2.36,3.85-2&#xA;&#x9;s1.59,3.9,1.29,5.9c-0.1,0.45-1.1,1.48-1.18,2.06c-0.33,2.4,0.32,5-0.8,5c-0.93,0-1.32-2.72-2-4.5C8.43,8.63,8.06,8,7.54,8&#xA;&#x9;C6,8,5.75,14,4.36,14z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"doctor-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.5,5.87c0.0017-0.8174-0.6596-1.4813-1.477-1.483S6.5417,5.0466,6.54,5.864C6.5386,6.54,6.9955,7.131,7.65,7.3v0.42&#xA;&#x9;c0,1.0245-0.8305,1.855-1.855,1.855S3.94,8.7445,3.94,7.72l0,0C3.9776,6.8275,4.3787,5.9893,5.05,5.4H5&#xA;&#x9;c0.718-0.4684,1.1564-1.2628,1.17-2.12V1.79c0-0.613-0.4969-1.11-1.11-1.11c-0.0033,0-0.0067,0-0.01,0H4.5&#xA;&#x9;c-0.2043,0-0.37,0.1657-0.37,0.37S4.2957,1.42,4.5,1.42h0.55c0.2043,0,0.37,0.1657,0.37,0.37v1.49l0,0&#xA;&#x9;c0,1.0178-0.8222,1.8445-1.84,1.85V5.4l0,0V5.13C2.5583,5.1355,1.7255,4.3117,1.72,3.29c0-0.0033,0-0.0067,0-0.01l0,0V1.79&#xA;&#x9;c0-0.2043,0.1657-0.37,0.37-0.37l0,0h0.52c0.2043,0,0.37-0.1657,0.3699-0.3701C2.9799,0.8456,2.8143,0.68,2.61,0.68H2.09&#xA;&#x9;C1.4848,0.6909,0.9999,1.1847,1,1.79v1.49C0.9978,4.1241,1.4086,4.9158,2.1,5.4l0,0c0.6676,0.591,1.065,1.429,1.1,2.32&#xA;&#x9;c0,1.4332,1.1618,2.595,2.595,2.595S8.39,9.1532,8.39,7.72V7.3C9.0424,7.1316,9.4986,6.5438,9.5,5.87z M8,6.61&#xA;&#x9;c-0.4087,0-0.74-0.3313-0.74-0.74S7.5913,5.13,8,5.13s0.74,0.3313,0.74,0.74l0,0C8.74,6.2787,8.4087,6.61,8,6.61z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"doctor-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M5.5,7C4.1193,7,3,5.8807,3,4.5l0,0v-2C3,2.2239,3.2239,2,3.5,2H4c0.2761,0,0.5-0.2239,0.5-0.5S4.2761,1,4,1H3.5&#xA;&#x9;C2.6716,1,2,1.6716,2,2.5v2c0.0013,1.1466,0.5658,2.2195,1.51,2.87l0,0C4.4131,8.1662,4.9514,9.297,5,10.5C5,12.433,6.567,14,8.5,14&#xA;&#x9;s3.5-1.567,3.5-3.5V9.93c1.0695-0.2761,1.7126-1.367,1.4365-2.4365C13.1603,6.424,12.0695,5.7809,11,6.057&#xA;&#x9;C9.9305,6.3332,9.2874,7.424,9.5635,8.4935C9.7454,9.198,10.2955,9.7481,11,9.93v0.57c0,1.3807-1.1193,2.5-2.5,2.5S6,11.8807,6,10.5&#xA;&#x9;c0.0511-1.2045,0.5932-2.3356,1.5-3.13l0,0C8.4404,6.7172,9.001,5.6448,9,4.5v-2C9,1.6716,8.3284,1,7.5,1H7&#xA;&#x9;C6.7239,1,6.5,1.2239,6.5,1.5S6.7239,2,7,2h0.5C7.7761,2,8,2.2239,8,2.5v2l0,0C8,5.8807,6.8807,7,5.5,7 M11.5,9&#xA;&#x9;c-0.5523,0-1-0.4477-1-1s0.4477-1,1-1s1,0.4477,1,1S12.0523,9,11.5,9z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"dog-park-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect4698\\" d=\\"M7.5,1&#xA;&#x9;c0,0-0.3457,0.0371-0.5,0.5l-0.5,2l2,1.5H10c1,0,1-1,1-1L9.5,2.5C9,2,8.5,2,8,2V1.5C8,1.5,8,1,7.5,1z M2.5,2&#xA;&#x9;c0,0-0.3534-0.0069-0.7227,0.1777S1,2.8333,1,3.5v0.9648C0.9996,4.4766,0.9996,4.4883,1,4.5V5v0.5C1,6.5,1,7,0.5,7C0.5,7,0,7,0,7.5&#xA;&#x9;v2c0,0,0,0.5,0.5,0.5S1,9.5,1,9.5V8c0.3537,0,0.6906-0.1371,1-0.2988V9.5c0,0,0,0.5,0.5,0.5S3,9.5,3,9.5V7h3l0.6641,1.9922&#xA;&#x9;C7,9.9999,7.5,10,7.5,10H8c0,0,0.5,0,0.5-0.5S8,9,8,9V6.5C8,5.6094,7.3678,5.2449,7,5L5.498,4H2V3.5&#xA;&#x9;c0-0.3333,0.0919-0.3624,0.2227-0.4277C2.3534,3.0069,2.5,3,2.5,3C3.1762,3.0096,3.1762,1.9904,2.5,2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" version=\\"1.1\\" id=\\"dog-park-15\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <g id=\\"g3\\">\\n    <path d=\\"M 10.300781 1.2207031 C 9.9144812 1.2207031 9.6 1.2 9.5 2 L 9.0996094 4.5214844 L 11.5 6.5 L 13.5 6.5 C 14.9 6.5 15 5.5410156 15 5.5410156 L 13.099609 3.3222656 C 12.399609 2.6222656 11.7 2.5 11 2.5 L 11 2 C 11 2 11.067481 1.2206031 10.300781 1.2207031 z M 4.75 1.5 C 4.75 1.5 3.7992187 1.5206031 3.1992188 1.7207031 C 2.5992187 1.9207031 2 2.6210938 2 3.6210938 L 2 7.5214844 C 2 9.2214844 1.3 9.5 1 9.5 C 1 9.5 0 9.5214844 0 10.521484 L 0 12.720703 C 0 12.720703 0.00078125 13.521484 0.80078125 13.521484 L 1 13.521484 L 1.5 13.521484 L 2 13.521484 L 2 13.021484 L 2 12.822266 C 2 12.422266 1.8 12.221094 1.5 12.121094 L 1.5 11.021484 C 2.5 11.021484 2.6 10.820703 3 10.720703 L 3.5507812 12.917969 C 3.6507813 13.217969 3.7507813 13.417578 4.0507812 13.517578 L 5.0507812 13.517578 L 6 13.5 L 6 12.699219 C 6 12.022819 5 12 5 12 L 5 9.5 L 8.5 9.5 L 9.1992188 12.121094 C 9.5992188 13.521094 10.5 13.5 10.5 13.5 L 11 13.5 L 12 13.5 L 12 12.699219 C 12 11.987419 11 12 11 12 L 11.099609 7.921875 L 8 5.5 L 3.5 5.5 L 3.5 3.5 C 3.5 3.1 3.7765 3.0053 4 3 C 4.4941 2.9882 4.75 3 4.75 3 C 5.1642 3 5.5 2.6642 5.5 2.25 C 5.5 1.8358 5.1642 1.5 4.75 1.5 z M 11.75 4 C 11.8881 4 12 4.1119 12 4.25 C 12 4.3881 11.8881 4.5 11.75 4.5 C 11.6119 4.5 11.5 4.3881 11.5 4.25 C 11.5 4.1119 11.6119 4 11.75 4 z \\" id=\\"path5\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\" id=\\"drinking-water-11\\">\\n  <path d=\\"M5,11H3a0.51,0.51,0,0,1-.5-0.4L1,5.6A0.5,0.5,0,0,1,1.5,5h5A0.5,0.5,0,0,1,7,5.6l-1.49,5A0.51,0.51,0,0,1,5,11ZM2.76,8L5.22,8,5.89,6H2.11Z\\"/>\\n  <path d=\\"M4.5,0h0A1.5,1.5,0,0,0,3,1.51v2a0.5,0.5,0,0,0,.5.5h1A0.5,0.5,0,0,0,5,3.5v-1A0.5,0.5,0,0,1,5.5,2H10V0H4.5Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\" id=\\"drinking-water-15\\">\\n  <path d=\\"M6,1A2,2,0,0,0,4,3V6.5a0.5,0.5,0,0,0,.5.5h2A0.5,0.5,0,0,0,7,6.5v-2A0.5,0.5,0,0,1,7.5,4H14V1H6Z\\"/>\\n  <path d=\\"M7,15H4a0.5,0.5,0,0,1-.48-0.38L2,8.62A0.5,0.5,0,0,1,2.5,8h6A0.5,0.5,0,0,1,9,8.62l-1.5,6A0.5,0.5,0,0,1,7,15ZM3.65,11l3.71,0L7.86,9H3.14Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"embassy-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.5,2C4.6014,2.0766,3.7537,2.4494,3.09,3.06C3.0316,3.1262,2.9995,3.2117,3,3.3v3.32&#xA;&#x9;C2.9889,6.8074,3.1318,6.9684,3.3193,6.9796C3.4115,6.985,3.5021,6.9527,3.57,6.89C4.1239,6.4637,4.8011,6.2286,5.5,6.22&#xA;&#x9;C6.61,6.22,6.85,7,8,7c0.6869-0.0671,1.3313-0.3629,1.83-0.84C9.9401,6.0917,10.0051,5.9695,10,5.84V2.37&#xA;&#x9;c0.0309-0.1908-0.0987-0.3705-0.2896-0.4014C9.6387,1.9569,9.5652,1.9679,9.5,2C9.0686,2.3529,8.5507,2.5842,8,2.67&#xA;&#x9;C6.85,2.67,6.65,2,5.5,2z M1.5,1.5c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1s-1-0.4477-1-1S0.9477,1.5,1.5,1.5z M2,4.5v6&#xA;&#x9;C2,10.7761,1.7761,11,1.5,11S1,10.7761,1,10.5v-6C1,4.2239,1.2239,4,1.5,4S2,4.2239,2,4.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"embassy-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M6.65,2C5.43,2,4.48,3.38,4.11,3.82C4.0365,3.9102,3.9975,4.0237,4,4.14v4.4C3.9884,8.7827,4.1758,8.9889,4.4185,9.0005&#xA;&#x9;C4.528,9.0057,4.6355,8.9699,4.72,8.9c0.4665-0.6264,1.1589-1.0461,1.93-1.17C8.06,7.73,8.6,9,10.07,9&#xA;&#x9;c0.9948-0.0976,1.9415-0.4756,2.73-1.09c0.1272-0.0934,0.2016-0.2422,0.2-0.4V2.45c0.0275-0.2414-0.1459-0.4595-0.3874-0.487&#xA;&#x9;C12.5332,1.954,12.4527,1.9668,12.38,2c-0.6813,0.5212-1.4706,0.8834-2.31,1.06C8.6,3.08,8.12,2,6.65,2z M2.5,3&#xA;&#x9;c-0.5523,0-1-0.4477-1-1s0.4477-1,1-1s1,0.4477,1,1S3.0523,3,2.5,3z M3,4v9.48c0,0.2761-0.2239,0.5-0.5,0.5S2,13.7561,2,13.48V4&#xA;&#x9;c0-0.2761,0.2239-0.5,0.5-0.5S3,3.7239,3,4z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"emergency-phone-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8.87,8.53a.73.73,0,0,0,0-1l-.74-.74a.73.73,0,0,0-1,0ZM4.27,3.97a.73.73,0,0,0,0-1l-.71-.71a.73.73,0,0,0-1,0ZM3.04,5.65,5.35,7.96a.37.37,0,0,0,.52,0l.44-.43L8.07,9.27A2.27,2.27,0,0,1,6.73,10h-1a1.345,1.345,0,0,1-1-.52L1.52,6.27a1.345,1.345,0,0,1-.52-1v-1a2.27,2.27,0,0,1,.73-1.34L3.47,4.69l-.43.44a.37.37,0,0,0,0,.52M8,2.5H6.5v1H8V5H9V3.5h1.5v-1H9V1H8Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"emergency-phone-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M7.875,11.49a.51.51,0,0,0,.72,0l.72-.72,2.18,2.16-.37.37a2.24,2.24,0,0,1-1.44.7H8.24a2.24,2.24,0,0,1-1.45-.7L1.72,8.23A2.24,2.24,0,0,1,1,6.78V5.33a2.24,2.24,0,0,1,.72-1.45l.36-.36L4.26,5.69l-.73.73a.51.51,0,0,0,0,.72Zm4.72.38a1,1,0,0,0,.036-1.414h0l-.036-.036-.72-.72a1,1,0,0,0-1.414-.036h0l-.036.036ZM5.315,4.62a1,1,0,0,0,.036-1.414h0L4.595,2.45a1,1,0,0,0-1.414-.036h0L3.14,2.45ZM10,2V4H8V5h2V7h1V5h2V4H11V2Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"entrance-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M4,2.25C4,1.8358,4.3358,1.5,4.75,1.5S5.5,1.8358,5.5,2.25S5.1642,3,4.75,3S4,2.6642,4,2.25z M9.27,4H7.88&#xA;&#x9;C7.6856,3.998,7.4985,4.0736,7.36,4.21l-4,4C3.224,8.344,3.0409,8.4194,2.85,8.42H1.73C1.3268,8.42,1,8.7468,1,9.15l0,0&#xA;&#x9;c0,0.4032,0.3268,0.73,0.73,0.73h1.89c0.1909-0.0006,0.374-0.076,0.51-0.21l4-4C8.2644,5.5576,8.4348,5.4972,8.61,5.5h0.66&#xA;&#x9;C9.6732,5.5,10,5.1732,10,4.77l0,0c0.0221-0.4026-0.2863-0.7468-0.6889-0.7689C9.2974,4.0003,9.2837,4,9.27,4z M4.75,3.5&#xA;&#x9;C4.3358,3.5,4,3.8358,4,4.25V6l1.5-1.5V4.25C5.5,3.8358,5.1642,3.5,4.75,3.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"entrance-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M7,6.5v-1c0-0.5523-0.4477-1-1-1s-1,0.4477-1,1v3L7,6.5z M4.65,10.56L5,3c0-0.5523,0.4477-1,1-1s1,0.4477,1,1S6.5523,4,6,4&#xA;&#x9;S5,3.5523,5,3L4.65,10.56z\\"/>\\n  <path d=\\"M14,6L14,6c0,0.5523-0.4477,1-1,1h-1.58c-0.2658-0.0015-0.5213,0.1028-0.71,0.29l-5.42,5.42&#xA;&#x9;c-0.1863,0.1847-0.4377,0.2889-0.7,0.29H2c-0.5523,0-1-0.4477-1-1l0,0c0-0.5523,0.4477-1,1-1h1.59&#xA;&#x9;c0.2623-0.0011,0.5137-0.1053,0.7-0.29l5.42-5.42C9.8987,5.1028,10.1542,4.9985,10.42,5H13C13.5523,5,14,5.4477,14,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"entrance-alt1-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M4.793,7.263A.5.5,0,0,0,5.5,7.97L7.743,5.677a.25.25,0,0,0,0-.354h0L5.489,3.042a.5.5,0,0,0-.707.707L6,5H1.5a.5.5,0,0,0,0,1H6ZM9,1H4.5a.5.5,0,0,0,0,1h4a.5.5,0,0,1,.5.5v6a.5.5,0,0,1-.5.5h-4a.5.5,0,0,0,0,1H9a1,1,0,0,0,1-1V2A1,1,0,0,0,9,1Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"entrance-alt1-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M6.554,9.639a.5.5,0,0,0,.707.707L9.928,7.669a.25.25,0,0,0,0-.354h0L7.261,4.639a.5.5,0,0,0-.707.707L8.2,7H1.5a.5.5,0,0,0,0,1H8.2ZM12,1H5.5a.5.5,0,0,0,0,1h6a.5.5,0,0,1,.5.5v10a.5.5,0,0,1-.5.5H5.25a.5.5,0,0,0,0,1H12a1,1,0,0,0,1-1V2A1,1,0,0,0,12,1Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"farm-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M6,5L4,4,2,5,1,7v3l1.5,0V8h3v2L7,10V7ZM5,7H3V5.5H5V7Z\\"/>\\n  <path d=\\"M10,2A1,1,0,0,0,8,2v8h2V2Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"farm-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M8,7L5,5,2,7,1,9v4H3V11H7v2H9V9ZM6,9H4V7H6V9Zm8,4H11V3.5a1.5,1.5,0,0,1,3,0V13Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"fast-food-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10,8L10,8c0,1.1046-0.8954,2-2,2H3c-1.1046,0-2-0.8954-2-2H10z M10,5H1C0.4477,5,0,5.4477,0,6s0.4477,1,1,1h9&#xA;&#x9;c0.5523,0,1-0.4477,1-1S10.5523,5,10,5z M8.55,1H2.46C1.6537,1,1,1.6536,1,2.46c0,0.0033,0,0.0067,0,0.01V4h9V2.47&#xA;&#x9;C10.0055,1.6637,9.3564,1.0055,8.55,1C8.55,1,8.55,1,8.55,1z M3.55,3C3.2752,3.0276,3.0301,2.8273,3.0025,2.5525&#xA;&#x9;C2.9749,2.2777,3.1753,2.0326,3.45,2.005c0.2748-0.0276,0.5199,0.1727,0.5475,0.4475C3.9991,2.4683,3.9999,2.4841,4,2.5&#xA;&#x9;C4,2.7761,3.7761,3,3.5,3H3.55z M7.55,3C7.2752,3.0276,7.0301,2.8273,7.0025,2.5525S7.1753,2.0326,7.45,2.005&#xA;&#x9;c0.2748-0.0276,0.5199,0.1727,0.5475,0.4475C7.9991,2.4683,7.9999,2.4841,8,2.5C8,2.7761,7.7761,3,7.5,3H7.55z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"fast-food-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,8c0,0.5523-0.4477,1-1,1H2C1.4477,9,1,8.5523,1,8s0.4477-1,1-1h11C13.5523,7,14,7.4477,14,8z M3.5,10H2&#xA;&#x9;c0,1.6569,1.3431,3,3,3h5c1.6569,0,3-1.3431,3-3H3.5z M3,6H2V4c0-1.1046,0.8954-2,2-2h7c1.1046,0,2,0.8954,2,2v2H3z M11,4.5&#xA;&#x9;C11,4.7761,11.2239,5,11.5,5S12,4.7761,12,4.5S11.7761,4,11.5,4S11,4.2239,11,4.5z M9,3.5C9,3.7761,9.2239,4,9.5,4S10,3.7761,10,3.5&#xA;&#x9;S9.7761,3,9.5,3S9,3.2239,9,3.5z M7,4.5C7,4.7761,7.2239,5,7.5,5S8,4.7761,8,4.5S7.7761,4,7.5,4S7,4.2239,7,4.5z M5,3.5&#xA;&#x9;C5,3.7761,5.2239,4,5.5,4S6,3.7761,6,3.5S5.7761,3,5.5,3S5,3.2239,5,3.5z M3,4.5C3,4.7761,3.2239,5,3.5,5S4,4.7761,4,4.5&#xA;&#x9;S3.7761,4,3.5,4S3,4.2239,3,4.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"fence-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.5,7H9V5h.5a.5.5,0,0,0,0-1H9V3l-.278-.555a.254.254,0,0,0-.443,0L8,3V4H7V3l-.278-.555a.254.254,0,0,0-.443,0L6,3V4H5V3l-.278-.555a.254.254,0,0,0-.443,0L4,3V4H3V3l-.278-.555a.254.254,0,0,0-.443,0L2,3V4H1.5a.5.5,0,0,0,0,1H2V7H1.5a.5.5,0,0,0,0,1H2v.5a.5.5,0,0,0,1,0V8H4v.5a.5.5,0,0,0,1,0V8H6v.5a.5.5,0,0,0,1,0V8H8v.5a.5.5,0,0,0,1,0V8h.5a.5.5,0,0,0,0-1ZM3,7V5H4V7ZM5,7V5H6V7ZM7,7V5H8V7Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"fence-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.5,10H13V7h.5a.5.5,0,0,0,0-1H13V4l-.286-.573a.249.249,0,0,0-.424-.006L12,4V6H11V4l-.286-.573a.249.249,0,0,0-.424-.006L10,4V6H9V4l-.286-.573a.249.249,0,0,0-.424-.006L8,4V6H7V4l-.286-.573a.249.249,0,0,0-.424-.006L6,4V6H5V4l-.286-.573a.249.249,0,0,0-.424-.006L4,4V6H3V4l-.286-.573a.249.249,0,0,0-.424-.006L2,4V6H1.5a.5.5,0,0,0,0,1H2v3H1.5a.5.5,0,0,0,0,1H2v1.5a.5.5,0,0,0,1,0V11H4v1.5a.5.5,0,0,0,1,0V11H6v1.5a.5.5,0,0,0,1,0V11H8v1.5a.5.5,0,0,0,1,0V11h1v1.5a.5.5,0,0,0,1,0V11h1v1.5a.5.5,0,0,0,1,0V11h.5a.5.5,0,0,0,0-1ZM3,10V7H4v3Zm2,0V7H6v3Zm2,0V7H8v3Zm2,0V7h1v3Zm2,0V7h1v3Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"ferry-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M11,9.45v0.77c-0.2167,0.0089-0.4213,0.1022-0.57,0.26c-0.2266,0.2196-0.5054,0.3779-0.81,0.46&#xA;&#x9;c-0.5149,0.1365-1.0639,0.0296-1.49-0.29L7.8,10.38c-0.2669-0.2313-0.6631-0.2313-0.93,0c-0.12,0.09-0.23,0.2-0.35,0.28&#xA;&#x9;c-0.6333,0.452-1.4889,0.4316-2.1-0.05l-0.33-0.27c-0.2457-0.185-0.5843-0.185-0.83,0c-0.16,0.11-0.3,0.25-0.46,0.36&#xA;&#x9;c-0.601,0.4185-1.399,0.4185-2,0l-0.26-0.21C0.4009,10.3346,0.2078,10.238,0,10.22V9.45c0.2162-0.0231,0.4345,0.015,0.63,0.11&#xA;&#x9;C0.8642,9.6894,1.0882,9.8365,1.3,10c0.1841,0.1814,0.4478,0.2567,0.7,0.2c0.093-0.0244,0.181-0.0651,0.26-0.12&#xA;&#x9;c0.13-0.09,0.25-0.2,0.38-0.3c0.616-0.4518,1.454-0.4518,2.07,0l0.4,0.31c0.2416,0.1752,0.5684,0.1752,0.81,0l0.4-0.31&#xA;&#x9;c0.6181-0.4567,1.4619-0.4567,2.08,0l0.38,0.3c0.2437,0.18,0.5763,0.18,0.82,0L10,9.77C10.2882,9.5546,10.6403,9.4419,11,9.45z&#xA;&#x9; M2.61,7.61L1,5l1-0.91V1.15C2.0163,0.5061,2.546-0.0057,3.19,0h4.62C8.454-0.0057,8.9837,0.5061,9,1.15v2.94L10,5L8.39,7.62&#xA;&#x9;C7.5729,7.0755,6.4952,7.1324,5.74,7.76L5.5,8l0,0L5.3,7.82C4.5536,7.1506,3.4512,7.0646,2.61,7.61z M2.81,3.61L5.5,2l2.69,1.63&#xA;&#x9;V1.15c0.0114-0.1985-0.1403-0.3686-0.3388-0.38c-0.0137-0.0008-0.0275-0.0008-0.0412,0H3.19&#xA;&#x9;C2.9915,0.7586,2.8214,0.9103,2.81,1.1088c-0.0008,0.0137-0.0008,0.0275,0,0.0412v2.48V3.61z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"ferry-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M5.33,11c0.6745,0.009,1.3262,0.245,1.85,0.67l0.26,0.23h0.05l0.31-0.28c0.9817-0.8115,2.379-0.8846,3.44-0.18L13.5,7L12,6&#xA;&#x9;V2.45c-0.0466-0.8-0.6989-1.4305-1.5-1.45H10c0.0343-0.518-0.3579-0.9657-0.8759-1C9.0828-0.0027,9.0413-0.0027,9,0H6&#xA;&#x9;C5.482-0.0343,5.0343,0.3579,5,0.8759C4.9973,0.9172,4.9973,0.9587,5,1H4.5C3.6989,1.0195,3.0466,1.65,3,2.45V6L1.5,7l2.25,4.53&#xA;&#x9;C4.2143,11.2041,4.7631,11.02,5.33,11z M4,2.45c0.0105-0.2594,0.2293-0.4611,0.4886-0.4506C4.4924,1.9996,4.4962,1.9998,4.5,2h6&#xA;&#x9;c0.259-0.0171,0.4829,0.1789,0.5,0.4379c0.0014,0.0207,0.0014,0.0414,0,0.0621v3l-3.5-2L4,5.45C4,5.45,4,2.45,4,2.45z M14,13v1&#xA;&#x9;c-0.2626,0.0194-0.5069,0.1416-0.68,0.34c-0.2717,0.2883-0.6178,0.4959-1,0.6c-0.6147,0.1815-1.2795,0.0425-1.77-0.37l-0.39-0.35&#xA;&#x9;c-0.3043-0.3026-0.7957-0.3026-1.1,0c-0.14,0.12-0.27,0.25-0.42,0.37c-0.7328,0.5856-1.7814,0.556-2.48-0.07l-0.39-0.35&#xA;&#x9;c-0.2864-0.2502-0.7136-0.2502-1,0c-0.19,0.15-0.36,0.32-0.55,0.47c-0.7043,0.5215-1.6732,0.4968-2.35-0.06l-0.31-0.27&#xA;&#x9;C1.4153,14.1443,1.2172,14.0346,1,14v-1c0.2585-0.032,0.5205,0.0169,0.75,0.14c0.2782,0.1722,0.5424,0.3661,0.79,0.58&#xA;&#x9;c0.2051,0.2235,0.5147,0.319,0.81,0.25c0.1125-0.0333,0.2177-0.0876,0.31-0.16c0.16-0.12,0.29-0.26,0.45-0.39&#xA;&#x9;c0.7106-0.5888,1.7394-0.5888,2.45,0c0.16,0.13,0.31,0.28,0.47,0.41c0.2864,0.2502,0.7136,0.2502,1,0c0.16-0.13,0.31-0.28,0.47-0.41&#xA;&#x9;c0.7123-0.5943,1.7477-0.5943,2.46,0c0.15,0.13,0.29,0.27,0.44,0.39c0.2864,0.2502,0.7136,0.2502,1,0l0.47-0.41&#xA;&#x9;C13.1895,13.1408,13.5886,12.9995,14,13z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"fire-station-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path10041-3-2\\" d=\\"M5.5,0l-2,4L2,2&#xA;&#x9;C1.595,2.7121,0,4.1667,0,6c0,2.7001,2.7999,5,5.5,5S11,8.7001,11,6c0-1.8333-1.595-3.2879-2-4L7.5,4L5.5,0z M5.5,5.5&#xA;&#x9;c0,0,2,1.585,2,3c0,0.6111-0.7778,1.2778-2,1.2778s-2-0.6667-2-1.2778C3.5,7.1336,5.5,5.5,5.5,5.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"fire-station-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path10041-3-3\\" d=\\"M7.5,0.5L5,4.5l-1.5-2&#xA;&#x9;C2.9452,3.4753,0.8036,5.7924,0.8036,8.3036C0.8036,12.002,3.8017,15,7.5,15s6.6964-2.998,6.6964-6.6964&#xA;&#x9;c0-2.5112-2.1416-4.8283-2.6964-5.8036l-1.5,2L7.5,0.5z M7.5,7c0,0,2.5,2.5618,2.5,4.5c0,0.8371-0.8259,2-2.5,2S5,12.3371,5,11.5&#xA;&#x9;C5,9.6283,7.5,7,7.5,7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"fitness-centre-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M7,6H4V5H7ZM2,3V4H1V5A.5.5,0,0,0,1,6V7H2V8H3.5V3Zm8,2V4H9V3H7.5V8H9V7h1V6a.5.5,0,0,0,0-1Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"fitness-centre-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"daec40ff-71f5-4432-9d75-dcba7b9c1b89\\" d=\\"M14.5,7V8h-1v2h-1v1H11V8H4v3H2.5V10h-1V8H.5V7h1V5h1V4H4V7h7V4h1.5V5h1V7Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"florist-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M1,2.5a3.1,3.1,0,0,0-1-2A3.9,3.9,0,0,1,2,2l.526-2,.437,2a3.9,3.9,0,0,1,2-1.5,3.1,3.1,0,0,0-1,2A1.307,1.307,0,0,1,2.662,4H2.409A1.36,1.36,0,0,1,1,2.5ZM9,8.982l2-.437L9,8.018a3.9,3.9,0,0,0,1.5-2,3.1,3.1,0,0,1-2,1A1.36,1.36,0,0,0,7,8.427V8.68a1.307,1.307,0,0,0,1.5,1.3,3.1,3.1,0,0,1,2,1A3.9,3.9,0,0,0,9,8.982ZM3.4,7.9,6.113,5.181a1.382,1.382,0,0,1-.436-.271L3.044,7.543l-.279-.279A11.045,11.045,0,0,0,3,4.5H2.5a15.272,15.272,0,0,1-.161,2.338L2.251,6.75a.247.247,0,0,0-.4.071L.059,10.657a.27.27,0,0,0-.026.108.25.25,0,0,0,.25.25.27.27,0,0,0,.089-.021L.378,11l3.8-1.85a.247.247,0,0,0,.068-.4l-.063-.063A12.768,12.768,0,0,1,6.5,8.5V8a10.381,10.381,0,0,0-2.724.275ZM7.243,2.522a.75.75,0,0,1,.018-1.5.739.739,0,0,1,.561.266.75.75,0,1,1,1.383,0,.739.739,0,0,1,.561-.266.75.75,0,0,1,.014,1.5.748.748,0,1,1-.561,1.26A.728.728,0,0,1,9.263,4a.75.75,0,1,1-1.5,0,.737.737,0,0,1,.05-.238.739.739,0,0,1-.558.26.75.75,0,0,1-.012-1.5ZM7.761,2.5a.75.75,0,1,0,.75-.75A.75.75,0,0,0,7.761,2.5Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"florist-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M1.5,1A2.7,2.7,0,0,1,4,3l.5-3L5,3A2.7,2.7,0,0,1,7.5,1c-.2.03-1,.26-1,2v.083A1.959,1.959,0,0,1,4.5,5H4.417A1.959,1.959,0,0,1,2.5,3C2.5,1.261,1.7,1.03,1.5,1ZM12.012,11l3-.5-3-.5A2.686,2.686,0,0,0,14,7.5c-.03.2-.248,1-1.988,1a2,2,0,0,0,0,4c1.739,0,1.958.8,1.988,1A2.686,2.686,0,0,0,12.012,11ZM9.688,5.548a1,1,0,0,1,0-2,1,1,0,0,1,0-2,.986.986,0,0,1,.852.507l.023-.012a.978.978,0,0,1-.116-.444,1,1,0,1,1,2,0,.978.978,0,0,1-.116.444l.019.01a.986.986,0,0,1,.85-.5,1,1,0,0,1,.025,2,1,1,0,0,1-.025,2,.986.986,0,0,1-.85-.5l-.016.009a.978.978,0,0,1,.113.44,1,1,0,0,1-2,0,.978.978,0,0,1,.113-.44l-.02-.011a.986.986,0,0,1-.852.507Zm.71-1.995A1.051,1.051,0,1,0,11.449,2.5,1.051,1.051,0,0,0,10.4,3.553v0ZM4.946,11.444l-.516-.515L8.892,6.475A1.746,1.746,0,0,1,8.44,6.22L4.076,10.575l-.519-.518A16.051,16.051,0,0,0,4.912,6a3.373,3.373,0,0,1-.412.035c-.041,0-.073-.008-.112-.01A16.953,16.953,0,0,1,3.131,9.631L2.76,9.26a.246.246,0,0,0-.4.079L.231,14.445a.287.287,0,0,0-.016.089.25.25,0,0,0,.25.25.289.289,0,0,0,.1-.019l5.1-2.124a.246.246,0,0,0,.079-.4l-.372-.372a16.874,16.874,0,0,1,3.612-1.256c0-.059-.015-.106-.015-.166A3.349,3.349,0,0,1,9,10.089,16.076,16.076,0,0,0,4.946,11.444Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"fuel-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.5,3H9V1.5l0,0C9,1.2239,8.7761,1,8.5,1S8,1.2239,8,1.5l0,0V3c0,0.5523,0.4477,1,1,1v4.25C9,8.3881,8.8881,8.5,8.75,8.5&#xA;&#x9;S8.5,8.3881,8.5,8.25V6.5C8.5,5.6716,7.8284,5,7,5V2c0-0.5523-0.4477-1-1-1H2C1.4477,1,1,1.4477,1,2v7c0,0.5523,0.4477,1,1,1h4&#xA;&#x9;c0.5523,0,1-0.4477,1-1V6c0.2761,0,0.5,0.2239,0.5,0.5v1.75c0,0.6904,0.5596,1.25,1.25,1.25S10,8.9404,10,8.25V3.5&#xA;&#x9;C10,3.2239,9.7761,3,9.5,3z M6,4.5C6.0056,4.7706,5.7908,4.9944,5.5202,5C5.5201,5,5.5201,5,5.52,5h-3&#xA;&#x9;C2.2384,5.0056,2.0056,4.7818,2,4.5002C2,4.5001,2,4.5001,2,4.5l0,0V3c0-0.2761,0.2239-0.5,0.5-0.5h3C5.7761,2.5,6,2.7239,6,3V4.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"fuel-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13,6L13,6v5.5c0,0.2761-0.2239,0.5-0.5,0.5S12,11.7761,12,11.5v-2C12,8.6716,11.3284,8,10.5,8H9V2c0-0.5523-0.4477-1-1-1H2&#xA;&#x9;C1.4477,1,1,1.4477,1,2v11c0,0.5523,0.4477,1,1,1h6c0.5523,0,1-0.4477,1-1V9h1.5C10.7761,9,11,9.2239,11,9.5v2&#xA;&#x9;c0,0.8284,0.6716,1.5,1.5,1.5s1.5-0.6716,1.5-1.5V5c0-0.5523-0.4477-1-1-1l0,0V2.49C12.9946,2.2178,12.7723,1.9999,12.5,2&#xA;&#x9;c-0.2816,0.0047-0.5062,0.2367-0.5015,0.5184C11.9987,2.5289,11.9992,2.5395,12,2.55V5C12,5.5523,12.4477,6,13,6s1-0.4477,1-1&#xA;&#x9;s-0.4477-1-1-1 M8,6.5C8,6.7761,7.7761,7,7.5,7h-5C2.2239,7,2,6.7761,2,6.5v-3C2,3.2239,2.2239,3,2.5,3h5C7.7761,3,8,3.2239,8,3.5&#xA;&#x9;V6.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"furniture-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <g>\\n    <path d=\\"M6,7.5552V6c0-0.2762-0.2239-0.5-0.5-0.5S5,5.7238,5,6v1.5552c-0.9391,0.1914-1.6886,0.9044-1.9231,1.827&#xA;&#x9;&#x9;C2.9976,9.6944,3.244,10,3.566,10H7.434c0.3221,0,0.5685-0.3056,0.4891-0.6177C7.6886,8.4596,6.9391,7.7466,6,7.5552z\\"/>\\n    <path d=\\"M9.1348,4.2697L7.6395,1.2789C7.554,1.108,7.3793,1,7.1881,1H3.8119C3.6207,1,3.446,1.108,3.3605,1.2789L1.8652,4.2697&#xA;&#x9;&#x9;C1.6974,4.6052,1.9414,5,2.3166,5H7v0.75C7,5.8881,7.1119,6,7.25,6S7.5,5.8881,7.5,5.75V5h1.1834&#xA;&#x9;&#x9;C9.0586,5,9.3026,4.6052,9.1348,4.2697z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"furniture-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <g>\\n    <path d=\\"M9,10.1419V8.5013C9,8.2244,8.7756,8,8.4987,8H7.5013C7.2244,8,7,8.2244,7,8.5013v1.6406&#xA;&#x9;&#x9;c-1.538,0.3984-2.7227,1.6744-2.9573,3.2719C3.9976,13.7202,4.2291,14,4.5389,14h6.9222c0.3098,0,0.5413-0.2798,0.4962-0.5862&#xA;&#x9;&#x9;C11.7227,11.8163,10.538,10.5403,9,10.1419z\\"/>\\n    <path d=\\"M13.6394,6.2788l-2.5016-5.0034C11.0533,1.1066,10.8808,1,10.692,1H5.308C5.1192,1,4.9467,1.1066,4.8622,1.2755&#xA;&#x9;&#x9;L2.3606,6.2788C2.1949,6.6102,2.4359,7,2.8063,7H11v1.5C11,8.7761,11.2239,9,11.5,9S12,8.7761,12,8.5V7h1.1937&#xA;&#x9;&#x9;C13.5641,7,13.8051,6.6102,13.6394,6.2788z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\" id=\\"gaming-11\\">\\n  <path d=\\"M9.715,5.8a2.046,2.046,0,0,0-2-1.8h-1.7V2.5c0-.2.2-.5.4-.5h2.1a.472.472,0,0,0,.5-.5.472.472,0,0,0-.5-.5h-2a1.453,1.453,0,0,0-1.5,1.4V4h-1.8a2.046,2.046,0,0,0-2,1.8l-.2,2.8a.991.991,0,0,0,.8,1.1,1.613,1.613,0,0,0,.9-.3L4.115,8h2.8l1.4,1.4a1.071,1.071,0,0,0,1.4.1,1.613,1.613,0,0,0,.3-.9ZM4.015,7h-2V6a.945.945,0,0,1,1-1h1Zm5,0h-2V5h1a1,1,0,0,1,1,1Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"gaming-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.1,12.5c-0.6,0.3-1.4,0.1-1.8-0.5l-1.1-1.4H4.8L3.7,12l0,0c-0.5,0.7-1.4,0.8-2.1,0.3c-0.5-0.4-0.7-1-0.6-1.5l0.7-3.7l0,0&#xA;&#x9;C1.9,5.9,3,5,4.2,5v0H7V3.5C7,2.7,7.6,2,8.4,2h3.1C11.8,2,12,2.2,12,2.5S11.8,3,11.5,3h-3C8.2,3,8,3.2,8,3.4c0,0,0,0.1,0,0.1V5h2.8&#xA;&#x9;v0c1.2,0,2.3,0.9,2.5,2.1l0,0l0.7,3.7l0,0C14.1,11.5,13.8,12.2,13.1,12.5z M6,7.5C6,6.7,5.3,6,4.5,6S3,6.7,3,7.5S3.7,9,4.5,9&#xA;&#x9;S6,8.3,6,7.5z M12,7.5C12,7.2,11.8,7,11.5,7H11V6.5C11,6.2,10.8,6,10.5,6S10,6.2,10,6.5V7H9.5C9.2,7,9,7.2,9,7.5S9.2,8,9.5,8H10v0.5&#xA;&#x9;C10,8.8,10.2,9,10.5,9S11,8.8,11,8.5V8h0.5C11.8,8,12,7.8,12,7.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"garden-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10,6c0.0043,2.2091-1.783,4.0035-3.9922,4.0078C5.9218,10.008,5.8358,10.0054,5.75,10&#xA;&#x9;c-2.2048,0.1381-4.1041-1.5374-4.2422-3.7422C1.5024,6.172,1.4998,6.086,1.5,6c1.6411-0.1206,3.1886,0.7762,3.9,2.26V5h-2&#xA;&#x9;C2.9085,5.0055,2.5056,4.6116,2.5001,4.1201C2.5,4.1167,2.5,4.1134,2.5,4.11V1.84C2.492,1.6469,2.6421,1.4838,2.8352,1.4758&#xA;&#x9;C2.9567,1.4708,3.0721,1.5292,3.14,1.63L4.28,3l1.17-2.33c0.0996-0.1657,0.3146-0.2193,0.4803-0.1197&#xA;&#x9;C5.9794,0.5798,6.0205,0.6209,6.05,0.67L7.22,3l1.13-1.38c0.0982-0.1665,0.3128-0.2219,0.4793-0.1237&#xA;&#x9;C8.946,1.5651,9.0125,1.6951,9,1.83v2.28C9,4.6015,8.6016,5,8.1101,5.0001C8.1067,5.0001,8.1034,5,8.1,5h-2v3.26&#xA;&#x9;C6.8114,6.7762,8.3589,5.8794,10,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"garden-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13,8c0,3.31-2.19,6-5.5,6S2,11.31,2,8c2.2643,0.0191,4.2694,1.4667,5,3.61V7H4.5C3.6716,7,3,6.3284,3,5.5v-3&#xA;&#x9;C3,2.2239,3.2239,2,3.5,2c0.1574,0,0.3056,0.0741,0.4,0.2l1.53,2l1.65-3c0.1498-0.232,0.4593-0.2985,0.6913-0.1487&#xA;&#x9;C7.8308,1.0898,7.8815,1.1404,7.92,1.2l1.65,3l1.53-2c0.1657-0.2209,0.4791-0.2657,0.7-0.1C11.9259,2.1944,12,2.3426,12,2.5v3&#xA;&#x9;C12,6.3284,11.3284,7,10.5,7H8v4.61C8.7306,9.4667,10.7357,8.0191,13,8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"garden-centre-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10.875,5.1642l-0.007-.008-0.029-.029-0.971-.971A0.5,0.5,0,0,0,9,4.4952V5.6429L7,7.6458V3A2,2,0,0,0,3,3,2,2,0,0,0,3,7V8A1,1,0,0,0,4,9H6a0.9843,0.9843,0,0,0,.8328-0.48L9.3606,5.9893H10.422A0.5,0.5,0,0,0,10.875,5.1642ZM1.5,5A1.5,1.5,0,0,1,3,3.5v3A1.5,1.5,0,0,1,1.5,5Zm2-2a1.5,1.5,0,0,1,3,0h-3Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\" version=\\"1.1\\" xmlns=\\"http://www.w3.org/2000/svg\\" id=\\"garden-centre-15\\">\\n  <path d=\\"M4,5L4,4.5C4,3.12 5.12,2 6.5,2C7.88,2 9,3.12 9,4.5L9,10.293L11.365,7.928L11.018,6.633C11.018,6.631 11.017,6.629 11.017,6.627L11.016,6.627L11.016,6.627C10.973,6.461 11.016,6.276 11.147,6.146C11.342,5.951 11.659,5.951 11.854,6.146L13.854,8.146C14.049,8.341 14.049,8.658 13.854,8.853C13.724,8.983 13.541,9.027 13.375,8.984C13.375,8.984 13.375,8.984 13.375,8.984C13.372,8.983 13.369,8.982 13.365,8.981L12.072,8.635L9,11.707L9,12C9,12.552 8.552,13 8,13L5,13C4.448,13 4,12.552 4,12L4,11.536L1.732,9.268C0.757,8.292 0.757,6.708 1.732,5.732C2.22,5.244 2.86,5 3.5,5L3.5,5L4,5ZM4,6L3.5,6L3.5,6C3.116,6 2.732,6.147 2.439,6.439C1.854,7.025 1.854,7.975 2.439,8.561L4,10.121L4,6ZM8,5L8,4.5C8,3.672 7.328,3 6.5,3C5.672,3 5,3.672 5,4.5L5,5L8,5Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"gift-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M0,5h4.5v1H0V5z M1,9.79C1,10.4583,1.5417,11,2.21,11c0.0033,0,0.0067,0,0.01,0h2.3V7H1V9.79z M7.64,4H3.36&#xA;&#x9;C2.6675,4.0686,2.0505,3.5629,1.9819,2.8704C1.9696,2.7467,1.9757,2.6219,2,2.5C1.9503,1.7229,2.5399,1.0526,3.3171,1.0028&#xA;&#x9;C3.3513,1.0006,3.3857,0.9997,3.42,1c1.0141-0.0115,1.8944,0.6969,2.1,1.69C5.7292,1.699,6.6072,0.9924,7.62,1&#xA;&#x9;c0.7893,0.026,1.4081,0.687,1.3821,1.4763C9.0016,2.4909,9.0009,2.5055,9,2.52c0.1185,0.6913-0.3458,1.3478-1.0371,1.4664&#xA;&#x9;C7.8563,4.0046,7.7478,4.0092,7.64,4z M4.82,3.25c0.0388-0.7888-0.5692-1.4597-1.358-1.4986C3.448,1.7508,3.434,1.7503,3.42,1.75&#xA;&#x9;C3.0447,1.7369,2.7298,2.0306,2.7168,2.4059C2.7157,2.4373,2.7167,2.4688,2.72,2.5C2.6811,2.8735,2.9524,3.2079,3.3259,3.2468&#xA;&#x9;C3.3572,3.25,3.3886,3.2511,3.42,3.25H4.82z M7.62,3.25c0.3753,0.0131,0.6902-0.2806,0.7032-0.6559&#xA;&#x9;c0.0011-0.0314,0-0.0628-0.0032-0.0941c0.0221-0.3915-0.2773-0.7268-0.6688-0.7489C7.6408,1.7505,7.6304,1.7501,7.62,1.75&#xA;&#x9;C6.8304,1.7656,6.2029,2.4184,6.2186,3.208C6.2188,3.222,6.2193,3.236,6.22,3.25H7.62z M6.52,5v1H11V5H6.52z M6.52,11h2.29&#xA;&#x9;c0.6604-0.0109,1.1901-0.5495,1.19-1.21V7H6.52V11z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"gift-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M6.5,5v2H0V5H6.5z M8.5,5v2H15V5H8.5z M1,8v4.5C1,13.3284,1.6716,14,2.5,14h4V8H1z M8.5,8v6h4c0.8284,0,1.5-0.6716,1.5-1.5&#xA;&#x9;V8H8.5z M10.5,0c-1.4033-0.0444-2.6497,0.8904-3,2.25C7.1497,0.8904,5.9033-0.0444,4.5,0c-1.0709-0.0337-1.9663,0.8072-2,1.8781&#xA;&#x9;C2.4987,1.9187,2.4987,1.9594,2.5,2C2.3443,2.9427,2.9822,3.8331,3.9249,3.9888C4.0853,4.0153,4.2486,4.0191,4.41,4h6.13&#xA;&#x9;c0.9548,0.1497,1.8503-0.5029,2-1.4577c0.0282-0.1797,0.0282-0.3626,0-0.5423c0.0002-1.1046-0.895-2.0002-1.9996-2.0004&#xA;&#x9;C10.5269-0.0004,10.5135-0.0003,10.5,0z M4.5,3c-0.506,0.0463-0.9537-0.3264-1-0.8323C3.4949,2.1119,3.4949,2.0558,3.5,2&#xA;&#x9;C3.4537,1.494,3.8264,1.0463,4.3323,1C4.3881,0.9949,4.4442,0.9949,4.5,1c1.1046,0,2,0.8954,2,2H4.5z M10.5,3h-2&#xA;&#x9;c0-1.1046,0.8954-2,2-2c0.5523,0,1,0.4477,1,1c0.0463,0.506-0.3264,0.9537-0.8323,1C10.6119,3.0051,10.5558,3.0051,10.5,3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"globe-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <g>\\n    <g>\\n      <path d=\\"M6.5,10H6V8.9496C7.0402,8.8331,7.9799,8.3841,8.682,7.682L8.1504,7.1504C7.4713,7.8294,6.5339,8.25,5.5,8.25&#xA;&#x9;&#x9;&#x9;c-2.0677,0-3.75-1.6823-3.75-3.75c0-1.0339,0.4206-1.9713,1.0996-2.6504L2.318,1.318C1.5037,2.1323,1,3.2573,1,4.5&#xA;&#x9;&#x9;&#x9;c0,2.314,1.7532,4.1979,4,4.4496V10H4.5C4.2239,10,4,10.2238,4,10.5C4,10.7761,4.2239,11,4.5,11h2C6.7761,11,7,10.7761,7,10.5&#xA;&#x9;&#x9;&#x9;C7,10.2238,6.7761,10,6.5,10z\\"/>\\n    </g>\\n    <g>\\n      <path d=\\"M5.5,7C6.8807,7,8,5.8807,8,4.5C8,3.1193,6.8807,2,5.5,2S3,3.1193,3,4.5C3,5.8807,4.1193,7,5.5,7z M4.9549,2.5847&#xA;&#x9;&#x9;&#x9;l0.4928,0.6168v0.8362l0.6129,1.1115h1.3224C7.2133,5.6406,6.8611,6.0414,6.4035,6.275L5.5,5.5h-1L3.5323,4.1791&#xA;&#x9;&#x9;&#x9;C3.6572,3.4099,4.2178,2.7946,4.9549,2.5847z\\"/>\\n    </g>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"globe-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <g>\\n    <g>\\n      <path d=\\"M11.9807,9.4807l-0.7208-0.7208C10.3425,9.8168,9.006,10.5,7.5,10.5c-2.757,0-5-2.243-5-5&#xA;&#x9;&#x9;&#x9;c0-1.506,0.6832-2.8425,1.7401-3.7599L3.5193,1.0193C2.2831,2.1183,1.5,3.7158,1.5,5.5c0,3.1449,2.4208,5.72,5.5,5.9747V13H6.5&#xA;&#x9;&#x9;&#x9;C6.2239,13,6,13.2238,6,13.5C6,13.7761,6.2239,14,6.5,14h2C8.7761,14,9,13.7761,9,13.5C9,13.2238,8.7761,13,8.5,13H8v-1.5273&#xA;&#x9;&#x9;&#x9;C9.5806,11.341,10.9858,10.5997,11.9807,9.4807z\\"/>\\n    </g>\\n    <g>\\n      <path d=\\"M7.5,9C9.433,9,11,7.433,11,5.5S9.433,2,7.5,2S4,3.567,4,5.5S5.567,9,7.5,9z M8.5,4l0.3638-0.5915&#xA;&#x9;&#x9;&#x9;c0.3463,0.2263,0.6249,0.5394,0.8235,0.9042L9.5,5h-1V4z M6.6563,3.1563L7.5,4v1L8,6h1.5h0.4396&#xA;&#x9;&#x9;&#x9;C9.7708,6.826,9.2026,7.5041,8.4381,7.8144L8,7H6.5L5.0504,5C5.2251,4.1396,5.8452,3.4486,6.6563,3.1563z\\"/>\\n    </g>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"golf-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path11685\\" d=\\"M4.0492,0.638&#xA;&#x9;C3.5323,1.1814,4.2729,1.813,4.7284,1.3132l0.4953-0.5434l2.3326,1.3937L3.3063,4.5C3.0126,4.6615,2.9648,4.9407,3.0724,5.2212&#xA;&#x9;l0.8886,2.3165l-0.9355,2.8046C2.8974,10.7268,3.1975,10.991,3.5001,11c0.1954,0.0058,0.3919-0.093,0.4747-0.3413l0.9199-2.7636&#xA;&#x9;l0.8535-0.2832L6,8.1172V10.5c0,0,0,0.5,0.5,0.5S7,10.5,7,10.5V8.1172C7,8,6.9893,7.8618,6.9358,7.7548L5.6546,4.415l2.5528-1.4035&#xA;&#x9;c0.1868-0.0802,0.2901-0.2535,0.2901-0.5115c0-0.2259-0.2177-0.413-0.4564-0.5556L4.9047,0.0706&#xA;&#x9;c-0.1595-0.0953-0.2749-0.043-0.3226,0.0071L4.0492,0.638z M3,2.0002c-0.5523,0-1,0.4477-1,1s0.4477,1,1,1s1-0.4477,1-1&#xA;&#x9;S3.5523,2.0002,3,2.0002z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"golf-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path11758\\" d=\\"&#xA;&#x9;M3.3999,1.1c0,0.1,0,0.2,0,0.2c0,0.4,0.3,0.7,0.7,0.7c0.3,0,0.5-0.2,0.6-0.5l0,0L4.9,1l5.6,2.3L6.6,6C6.2,6.3,6.2,6.7,6.3,7.1&#xA;&#x9;l0.9,2.1l-1.3,3.9C5.7,13.6,6.1,14,6.5,14c0.3,0,0.5-0.1,0.6-0.5l1.4-4l0.1,0.3v3.5c0,0,0,0.7,0.7,0.7s0.7-0.7,0.7-0.7V10&#xA;&#x9;c0-0.2,0-0.3-0.1-0.5L8.5,6.1l2.7-1.9c0.2-0.2,0.4-0.3,0.4-0.6s-0.2-0.5-0.4-0.6L4,0.1c-0.0878,0-0.118,0.0179-0.2001,0.1&#xA;&#x9;L3.3999,1.1z M5.5,3C4.7,3,4,3.7,4,4.5S4.7,6,5.5,6S7,5.3,7,4.5S6.2999,3,5.5,3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"grocery-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect7842-7\\" d=\\"M9.75,1.5C9.7464,1.4999,9.4324,1.4942,9.1191,1.6875C8.8041,1.8819,8.5,2.3013,8.5,3H8.2539H1l0.75,3.5&#xA;&#x9;C1.8571,7,2.5,7,2.5,7h6c0,0-0.0027,0.2466-0.1523,0.4961S7.9306,8,7.25,8H2C1.6619,7.9952,1.6619,8.5048,2,8.5h1.25h4&#xA;&#x9;c0.8194,0,1.302-0.3705,1.5273-0.7461C9.0027,7.3784,9,7,9,7V3c0-0.567,0.1959-0.7725,0.3809-0.8867&#xA;&#x9;C9.5659,1.9991,9.7461,2,9.7461,2C9.7474,2,9.7487,2,9.75,2h0.5c0.3381,0.0048,0.3381-0.5048,0-0.5H9.7539H9.75z M7.25,8.5&#xA;&#x9;C6.8358,8.5,6.5,8.8358,6.5,9.25S6.8358,10,7.25,10S8,9.6642,8,9.25S7.6642,8.5,7.25,8.5z M3.25,8.5C2.8358,8.5,2.5,8.8358,2.5,9.25&#xA;&#x9;S2.8358,10,3.25,10S4,9.6642,4,9.25S3.6642,8.5,3.25,8.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" version=\\"1.1\\" id=\\"grocery-15\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <g id=\\"g3\\">\\n    <path d=\\"M 13.199219 1.5 C 13.199219 1.5 11.808806 1.4588 11.253906 2 C 10.720406 2.5202 10.5 2.9177 10.5 4 L 1.1992188 4 L 2.59375 8.8144531 C 2.59725 8.8217531 2.6036219 8.8287375 2.6074219 8.8359375 C 2.8418219 9.4932375 3.4545469 9.9666406 4.1855469 9.9941406 C 4.1885469 9.9954406 4.1992187 10 4.1992188 10 L 10.699219 10 L 10.699219 10.199219 C 10.699219 10.199219 10.7 10.500391 10.5 10.900391 C 10.3 11.300391 10.200391 11.5 9.4003906 11.5 L 2.9003906 11.5 C 1.9003906 11.5 1.9003906 13 2.9003906 13 L 4.0996094 13 L 4.1992188 13 L 9.0996094 13 L 9.1992188 13 L 9.3007812 13 C 10.500781 13 11.399219 12.299609 11.699219 11.599609 C 11.999219 10.899609 12 10.300781 12 10.300781 L 12 10 L 12 4 C 12 3.4764 12.228619 3 12.699219 3 L 13.25 3 C 13.6642 3 14 2.6642 14 2.25 C 14 1.8358 13.6642 1.5 13.25 1.5 L 13.199219 1.5 z M 9.1992188 13 C 8.5992188 13 8.1992188 13.4 8.1992188 14 C 8.1992188 14.6 8.5992187 15 9.1992188 15 C 9.7992187 15 10.199219 14.6 10.199219 14 C 10.199219 13.4 9.7992188 13 9.1992188 13 z M 4.1992188 13 C 3.5992188 13 3.1992188 13.4 3.1992188 14 C 3.1992188 14.6 3.5992187 15 4.1992188 15 C 4.7992188 15 5.1992188 14.6 5.1992188 14 C 5.1992188 13.4 4.7992187 13 4.1992188 13 z \\" id=\\"path5\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"hairdresser-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path6232\\" d=\\"M1.5,2C0.6716,2,0,2.6716,0,3.5v1C0,5,0.5,5,0.5,5h1C3,5,4,5.5,4,5.5S3,6,1.5,6h-1C0.5,6,0,6,0,6.5v1&#xA;&#x9;C0,8.3284,0.6716,9,1.5,9S3,8.3284,3,7.5V6.8848C3.8082,6.727,4.5865,6.4316,5.2246,6.1426L8.5,8C10,8.75,11,8,11,8L6.5,5.5L11,3&#xA;&#x9;c0,0-1-0.75-2.5,0L5.2246,4.8574C4.5866,4.5684,3.8081,4.2731,3,4.1152V3.5039C3,3.5026,3,3.5013,3,3.5C3,2.6716,2.3284,2,1.5,2z&#xA;&#x9; M1.5,3C1.7761,3,2,3.2239,2,3.5S1.7761,4,1.5,4S1,3.7761,1,3.5S1.2239,3,1.5,3z M5.2324,5.25c0.0059-0.0002,0.0117-0.0002,0.0176,0&#xA;&#x9;c0.1381,0,0.25,0.1119,0.25,0.25S5.3881,5.75,5.25,5.75S5,5.6381,5,5.5C4.9997,5.3685,5.1013,5.2592,5.2324,5.25z M1.5,7&#xA;&#x9;C1.7761,7,2,7.2239,2,7.5S1.7761,8,1.5,8S1,7.7761,1,7.5S1.2239,7,1.5,7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"hairdresser-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M15,3c0,0-2-0.6-3.5,0.5l-4.3,3C6.4,5.9,5.2,5.2,4,4.8V4c0-1.1-0.9-2-2-2C0.9,2,0,2.9,0,4v1.5&#xA;&#x9;C0,6,0.5,6,0.5,6H2h0.5C4.5,6,6,7.5,6,7.5S4.5,9,2.5,9H2H0.5C0.5,9,0,9,0,9.5V11c0,1.1,0.9,2,2,2c1.1,0,2-0.9,2-2v-0.8&#xA;&#x9;c1.2-0.4,2.4-1.1,3.2-1.7l4.3,3C13,12.6,15,12,15,12L8.5,7.5L15,3z M3,5H2H1V4c0-0.6,0.4-1,1-1c0.6,0,1,0.4,1,1V5z M3,11&#xA;&#x9;c0,0.6-0.4,1-1,1c-0.6,0-1-0.4-1-1v-1h1h1V11z M7.25,8c-0.2761,0-0.5-0.2239-0.5-0.5S6.9739,7,7.25,7s0.5,0.2239,0.5,0.5&#xA;&#x9;S7.5261,8,7.25,8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"harbor-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path5263\\" d=\\"M5.5,0C4.1193,0,3,1.1193,3,2.5c0.0018,1.0981,0.7217,2.0466,1.75,2.3711V9.416&#xA;&#x9;c-0.659-0.115-1.3381-0.3753-1.8926-0.8574C2.0886,7.8901,1.5,6.8297,1.5,5c0.0055-0.4226-0.3391-0.7664-0.7617-0.7598&#xA;&#x9;C0.3248,4.2467-0.0054,4.5865,0,5c0,2.1703,0.7731,3.7349,1.873,4.6914S4.3333,11,5.5,11s2.527-0.3521,3.627-1.3086S11,7.1703,11,5&#xA;&#x9;c0.0143-1.0142-1.5143-1.0142-1.5,0c0,1.8297-0.5886,2.8901-1.3574,3.5586C7.5881,9.0407,6.909,9.3011,6.25,9.416V4.875&#xA;&#x9;C7.2795,4.55,7.9999,3.5995,8,2.5C8,1.1193,6.8807,0,5.5,0z M5.5,1.5c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1s-1-0.4477-1-1&#xA;&#x9;S4.9477,1.5,5.5,1.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"harbor-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path5263\\" d=\\"M7.5,0C5.5,0,4,1.567,4,3.5c0.0024,1.5629,1.0397,2.902,2.5,3.3379v6.0391&#xA;&#x9;c-0.9305-0.1647-1.8755-0.5496-2.6484-1.2695C2.7992,10.6273,2.002,9.0676,2.002,6.498c0.0077-0.5646-0.4531-1.0236-1.0176-1.0137&#xA;&#x9;C0.4329,5.493-0.0076,5.9465,0,6.498c0,3.0029,1.0119,5.1955,2.4902,6.5723C3.9685,14.4471,5.8379,15,7.5,15&#xA;&#x9;c1.6656,0,3.535-0.5596,5.0117-1.9395S14.998,9.4868,14.998,6.498c0.0648-1.3953-2.0628-1.3953-1.998,0&#xA;&#x9;c0,2.553-0.7997,4.1149-1.8535,5.0996C10.3731,12.3203,9.4288,12.7084,8.5,12.875V6.8418C9.9607,6.4058,10.9986,5.0642,11,3.5&#xA;&#x9;C11,1.567,9.5,0,7.5,0z M7.5,2C8.3284,2,9,2.6716,9,3.5S8.3284,5,7.5,5S6,4.3284,6,3.5S6.6716,2,7.5,2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"hardware-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <g id=\\"GaLBQ6.tif_2_\\">\\n    <g>\\n      <path d=\\"M1.2174,8.3652C0.8535,8.8127,0.9497,9.4896,1.423,9.8184c0.4178,0.2902,0.9442,0.238,1.3172-0.1347&#xA;&#x9;&#x9;&#x9;c1.2813-1.2802,2.562-2.5611,3.841-3.8436C6.6447,5.7764,6.6952,5.7546,6.788,5.7863c0.4279,0.1458,0.8659,0.1627,1.3055,0.0611&#xA;&#x9;&#x9;&#x9;c1.3402-0.3096,2.1605-1.6406,1.8354-2.9751C9.906,2.7783,9.8722,2.6868,9.8351,2.567C9.7998,2.6112,8.8376,3.5803,8.3764,4.0471&#xA;&#x9;&#x9;&#x9;c-0.0587,0.0595-0.1167,0.0784-0.195,0.0665C8.0791,4.0979,7.2868,4.034,7,4C6.9522,3.5907,6.9268,3.1638,6.8846,2.7619&#xA;&#x9;&#x9;&#x9;c-0.004-0.0378,0.0229-0.0894,0.0517-0.1185C7.2869,2.2885,8.2679,1.31,8.4116,1.1666C8.1,1.0195,7.5652,0.9615,7.1668,1.0263&#xA;&#x9;&#x9;&#x9;c-1.5072,0.245-2.4274,1.7518-1.95,3.1974c0.0262,0.0795,0.0098,0.1259-0.0469,0.1824L1.2174,8.3652z\\"/>\\n    </g>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"hardware-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.7919,3.2619c0,0-1.676,1.675-2.1163,2.1208c-0.085,0.0861-0.1688,0.1135-0.282,0.0961&#xA;&#x9;c-0.1481-0.0226-0.2974-0.038-0.4462-0.0558c-0.4072-0.0485-0.8145-0.0966-1.2292-0.1458C9.649,4.6852,9.5787,4.1049,9.5177,3.5236&#xA;&#x9;C9.512,3.4689,9.5509,3.3943,9.5925,3.3522c0.5071-0.5134,1.9261-1.9287,2.134-2.136c-0.4508-0.2129-1.2243-0.2968-1.8007-0.2031&#xA;&#x9;c-2.1801,0.3543-3.5112,2.534-2.8206,4.625C7.1432,5.753,7.1194,5.8201,7.0374,5.902C5.1891,7.7454,3.3436,9.5914,1.498,11.4374&#xA;&#x9;c-0.0616,0.0616-0.1231,0.124-0.1779,0.1913c-0.5264,0.6473-0.3873,1.6264,0.2974,2.102c0.6044,0.4197,1.3658,0.3442,1.9053-0.1948&#xA;&#x9;c1.8534-1.8519,3.7059-3.7047,5.556-5.5598C9.1707,7.884,9.2437,7.8526,9.3779,7.8983c0.6189,0.2109,1.2524,0.2354,1.8884,0.0884&#xA;&#x9;c1.9386-0.4478,3.1251-2.3732,2.6549-4.3034C13.8895,3.5532,13.843,3.4244,13.7919,3.2619z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"heart-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10.06,4.76c-1.1682,1.9568-2.5794,3.7577-4.2,5.36c-0.1865,0.1961-0.4967,0.2038-0.6927,0.0173&#xA;&#x9;C5.1614,10.1316,5.1556,10.1259,5.15,10.12C3.5259,8.5183,2.1113,6.7173,0.94,4.76c-1.82-3.64,2.8-6.07,4.56-2.43&#xA;&#x9;C7.26-1.31,11.88,1.12,10.06,4.76z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"heart-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.91,6.75c-1.17,2.25-4.3,5.31-6.07,6.94c-0.1903,0.1718-0.4797,0.1718-0.67,0C5.39,12.06,2.26,9,1.09,6.75&#xA;&#x9;C-1.48,1.8,5-1.5,7.5,3.45C10-1.5,16.48,1.8,13.91,6.75z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"heliport-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path10415\\" d=\\"M3,1&#xA;&#x9;C2.723,1,2.5,1.223,2.5,1.5S2.7236,1.9824,3,2h3v2H2.9141h-0.002C2.7004,3.4014,2.1349,3.0009,1.5,3C0.6716,3,0,3.6716,0,4.5&#xA;&#x9;S0.6716,6,1.5,6c0.3794-0.0007,0.7444-0.1452,1.0215-0.4043L4.5,8.5c0.6812,1,1.5,1,2,1h3.5352c0,0,0.9648-0.0008,0.9648-1v-1&#xA;&#x9;c0-0.5-0.5-1-0.5-1l-2-2c0,0-0.5-0.5-1-0.5H7V2h3c0.277,0,0.5-0.223,0.5-0.5S10.277,1,10,1H3z M1.5,4C1.7761,4,2,4.2239,2,4.5&#xA;&#x9;S1.7761,5,1.5,5S1,4.7761,1,4.5S1.2239,4,1.5,4z M7.75,5C7.75,5,8,5,8.5,5.5L10,7H7.5C7.5,7,7,7,7,6.5v-1C7,5.5,7,5,7.5,5H7.75z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"heliport-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path10415\\" d=\\"M4,2C3,2,3,3,4,3h4v1C7.723,4,7.5,4.223,7.5,4.5V5H5H3.9707H3.9316&#xA;&#x9;C3.7041,4.1201,2.9122,3.5011,2,3.5c-1.1046,0-2,0.8954-2,2s0.8954,2,2,2c0.3722-0.001,0.7368-0.1058,1.0527-0.3027L5.5,10.5&#xA;&#x9;C6.5074,11.9505,8.3182,12,9,12h5c0,0,1,0,1-1v-0.9941C15,9.2734,14.874,8.874,14.5,8.5l-3-3c0,0-0.5916-0.5-1.2734-0.5H9.5V4.5&#xA;&#x9;C9.5,4.223,9.277,4,9,4V3h4c1,0,1-1,0-1C13,2,4,2,4,2z M2,4.5c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1s-1-0.4477-1-1&#xA;&#x9;C1,4.9477,1.4477,4.5,2,4.5z M10,6c0.5,0,0.7896,0.3231,1,0.5L13.5,9H10c0,0-1,0-1-1V7C9,7,9,6,10,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\" id=\\"home-11\\">\\n  <path d=\\"M10.0015,4.7507c0,0.13807-0.11193,0.25-0.25,0.25H1.25c-0.13807,0-0.25-0.11193-0.25-0.25&#xA;&#x9;c-0.00054-0.07163,0.02839-0.14033,0.08-0.19l4.2378-3.4545l0.016-0.016c0.10112-0.09209,0.2577-0.08493,0.35,0.016l2.3174,1.8892&#xA;&#x9;V1.5c0-0.27614,0.22386-0.5,0.5-0.5s0.5,0.22386,0.5,0.5v2.31l0.92,0.75C9.9731,4.60979,10.00215,4.67878,10.0015,4.7507z M2,9.7514&#xA;&#x9;c-0.00111,0.13696,0.10902,0.24889,0.24598,0.25c0.00001,0,0.00001,0,0.00002,0h2.7547v-2h1v2h2.7526&#xA;&#x9;c0.13697,0,0.248-0.11103,0.248-0.248l0,0l0,0V6.0009H2V9.7514z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\" id=\\"home-15\\">\\n  <path d=\\"M2,13.7478c0,0.13807,0.11193,0.25,0.25,0.25h3.749v-3h3v3h3.749c0.13807,0,0.25-0.11193,0.25-0.25V7.9987H2&#xA;&#x9;C2,7.9987,2,13.7478,2,13.7478z M13.93,6.5778l-0.9319-0.8189V2c0-0.55228-0.44771-1-1-1s-1,0.44772-1,1v2L7.6808,1.09&#xA;&#x9;C7.5863,0.9897,7.42846,0.98478,7.3279,1.079L7.3169,1.09L1.0678,6.553C0.9734,6.65376,0.97856,6.81197,1.07932,6.90637&#xA;&#x9;C1.12478,6.94896,1.18451,6.97304,1.2468,6.9739L3,6.9989h10.7468c0.13807,0.00046,0.25037-0.1111,0.25083-0.24917&#xA;&#x9;C13.99784,6.68592,13.97365,6.62445,13.93,6.5779V6.5778z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"horse-riding-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M4,1A1,1,0,1,1,5,2,1,1,0,0,1,4,1Zm6.88,3.5L9,3V2.5L7,5H6L7,6V7.014a.5.5,0,1,1-1,0V6.5L4,5H3a1,1,0,0,0-.8.446A1.189,1.189,0,0,0,1.247,5,1.076,1.076,0,0,0,0,5.988C0,7.3.635,7.471.635,7.471a.33.33,0,0,0,.115.023A.253.253,0,0,0,1,7.25V6a.49.49,0,0,1,.48-.5H1.5A.5.5,0,0,1,2,6V8.014l-.3.6a1.609,1.609,0,0,0-.2.6v1.542A.244.244,0,0,0,1.744,11,.255.255,0,0,0,2,10.756V9.514a.367.367,0,0,1,.1-.3l.9-1.2V9l.467,1.816A.256.256,0,0,0,3.709,11a.25.25,0,0,0,.25-.25v-.016l-.242-1.61a.6.6,0,0,1,.025-.236L3.8,8.714,4,8H6V9l.466,1.816A.256.256,0,0,0,6.709,11a.25.25,0,0,0,.25-.25L6.718,9.124a.6.6,0,0,1,.025-.236L7,8a.877.877,0,0,0,.934-.661L8.5,4.5a.6.6,0,0,0,.71.454.562.562,0,0,0,.143-.07l.9.116a.721.721,0,0,0,.392.1A.331.331,0,0,0,11,4.784.406.406,0,0,0,10.88,4.5ZM6,3.5A.51.51,0,0,0,5.5,3h-1a.482.482,0,0,0-.5.5V5H6Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"horse-riding-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M6,1A1,1,0,1,1,7,2,1,1,0,0,1,6,1ZM8,3.5a.484.484,0,0,0,0-.058A.472.472,0,0,0,7.5,3h-1a.484.484,0,0,0-.058,0A.472.472,0,0,0,6,3.5V7H8Zm6.85,3.644L12.8,4.8l.085-.509a.478.478,0,0,0,.008-.063.25.25,0,0,0-.25-.25.346.346,0,0,0-.158.056L9,7H8L9,8V9.5a.5.5,0,0,1-1,0v-1L6,7H4a1.5,1.5,0,0,0-1.243.661A1.466,1.466,0,0,0,1.563,7H1.5A1.449,1.449,0,0,0,0,8.4v.086A3.781,3.781,0,0,0,.559,10.4a.278.278,0,0,0,.191.1A.25.25,0,0,0,1,10.25V9s-.02-.924.753-1c.5-.048.747.253.747.5V11L2,13v1.75a.25.25,0,0,0,.25.25.254.254,0,0,0,.25-.234V13L4,11v1l.5,2.8a.255.255,0,0,0,.246.2A.25.25,0,0,0,5,14.754H5L4.855,12.3,5.5,11H8v1l.508,2.813A.257.257,0,0,0,8.75,15,.25.25,0,0,0,9,14.75V12l.367-1a1.155,1.155,0,0,0,.543-.6l2.161-3.767a.863.863,0,0,0,1.023.4l1.066.818a.591.591,0,0,0,.35.135.487.487,0,0,0,.475-.4A.552.552,0,0,0,14.85,7.144Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"hospital-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10,4H7V1C6.9616,0.4644,6.5356,0.0384,6,0H5C4.4644,0.0384,4.0384,0.4644,4,1v3H1C0.4644,4.0384,0.0384,4.4644,0,5v1&#xA;&#x9;c0.0384,0.5356,0.4644,0.9616,1,1h3v3c0.0384,0.5356,0.4644,0.9616,1,1h1c0.5356-0.0384,0.9616-0.4644,1-1V7h3&#xA;&#x9;c0.5356-0.0384,0.9616-0.4644,1-1V5C11,4.4477,10.5523,4,10,4z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"hospital-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect4194\\" d=\\"M7,1C6.4,1,6,1.4,6,2v4H2C1.4,6,1,6.4,1,7v1&#xA;&#x9;c0,0.6,0.4,1,1,1h4v4c0,0.6,0.4,1,1,1h1c0.6,0,1-0.4,1-1V9h4c0.6,0,1-0.4,1-1V7c0-0.6-0.4-1-1-1H9V2c0-0.6-0.4-1-1-1H7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"ice-cream-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M4,6c0.541,0.0007,1.0676-0.1748,1.5-0.5C5.9324,5.8252,6.459,6.0007,7,6l-1,4.69c-0.1082,0.2541-0.4019,0.3723-0.656,0.264&#xA;&#x9;c-0.1188-0.0506-0.2134-0.1452-0.264-0.264L4,6z M7,2H6.91c0.2826-0.7787-0.1195-1.6391-0.8982-1.9218S4.3726,0.1978,4.09,0.9765&#xA;&#x9;C3.97,1.3071,3.97,1.6694,4.09,2H4C3.1716,2,2.5,2.6716,2.5,3.5S3.1716,5,4,5s1.5-0.6716,1.5-1.5l0,0l0,0l0,0&#xA;&#x9;C5.5,4.3284,6.1716,5,7,5s1.5-0.6716,1.5-1.5S7.8284,2,7,2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"ice-cream-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M5.44,8.17c0.7156,0.0006,1.414-0.2194,2-0.63C7.9037,7.8634,8.4391,8.0693,9,8.14h0.44L8,13.7&#xA;&#x9;c-0.1082,0.2541-0.4019,0.3723-0.656,0.264C7.2252,13.9134,7.1306,13.8188,7.08,13.7L5.44,8.17z\\"/>\\n  <path d=\\"M11.44,4.67c0,1.1046-0.8954,2-2,2s-2-0.8954-2-2l0,0l0,0l0,0c0,1.1046-0.8954,2-2,2s-2-0.8954-2-2s0.8954-2,2-2h0.12&#xA;&#x9;C5.1756,1.6345,5.7035,0.4834,6.739,0.099s2.1866,0.1435,2.571,1.179c0.1667,0.449,0.1667,0.9429,0,1.3919h0.13&#xA;&#x9;C10.5446,2.67,11.44,3.5654,11.44,4.67z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"industry-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10,1v8H1V6l2.11-1.78C3.43,3.9,4,3.91,4,4.36V6l2.13-1.86c0.1854-0.2047,0.5016-0.2203,0.7062-0.0349&#xA;&#x9;C6.9472,4.2056,7.0073,4.3505,7,4.5V8h2V1H10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"industry-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,1v12H1V8.72c0.0016-0.1419,0.0634-0.2764,0.17-0.37l3-3.22c0.2074-0.1823,0.5234-0.1618,0.7056,0.0456&#xA;&#x9;C4.9568,5.268,5.0011,5.387,5,5.51v3l3.16-3.37c0.2025-0.1878,0.5188-0.1759,0.7066,0.0266C8.9532,5.2599,9.0009,5.3827,9,5.51V11h3&#xA;&#x9;V1H14z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"information-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect8399\\" d=\\"&#xA;&#x9;M5.5989,0.9391c-0.6,0-1.1,0.5-1.1,1.1s0.5,1.1,1.1,1.1s1.1-0.5,1.1-1.1S6.1989,0.9391,5.5989,0.9391z M3,4L2.9989,4.7391&#xA;&#x9;C2.9989,4.7391,4.5,4.6353,4.5,6v1.5c0,1.5-1.5011,1.7391-1.5011,1.7391L3,10h5.2L8.1989,9.2391c0,0-1.2,0-1.2-1.5L7,5c0,0,0-1-1-1&#xA;&#x9;H3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"information-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect8399\\" d=\\"M7.5,1&#xA;&#x9;C6.7,1,6,1.7,6,2.5S6.7,4,7.5,4S9,3.3,9,2.5S8.3,1,7.5,1z M4,5v1c0,0,2,0,2,2v2c0,2-2,2-2,2v1h7v-1c0,0-2,0-2-2V6c0-0.5-0.5-1-1-1H4&#xA;&#x9;z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"jewelry-store-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M7.574,3.6944L6.7227,4.3329C7.4811,4.7628,8,5.5677,8,6.5C8,7.8785,6.8785,9,5.5,9S3,7.8785,3,6.5&#xA;&#x9;c0-0.9323,0.5189-1.7372,1.2773-2.1671L3.426,3.6944C2.5652,4.332,2,5.3465,2,6.5C2,8.433,3.567,10,5.5,10S9,8.433,9,6.5&#xA;&#x9;C9,5.3465,8.4348,4.332,7.574,3.6944z M7.5,2.5L6.5,1h-2l-1,1.5l2,1.5L7.5,2.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"jewelry-store-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M12,8.5c0,2.4853-2.0147,4.5-4.5,4.5S3,10.9853,3,8.5c0-1.8483,1.1164-3.4329,2.7099-4.1255l0.1761,0.137l0.7739,0.6019&#xA;&#x9;C5.1366,5.4922,4,6.8611,4,8.5C4,10.4299,5.5701,12,7.5,12S11,10.4299,11,8.5c0-1.6389-1.1366-3.0078-2.6599-3.3866l0.95-0.7388&#xA;&#x9;C10.8836,5.0672,12,6.6517,12,8.5z M7.5,4.5L10,2.5555L9,1H6L5,2.5555l1.5,1.1667L7.5,4.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"karaoke-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M4.5,4.4l-2,2l-1,1C1,7.8,0.9,8.5,1.2,9.1l0.6,0.7c0.6,0.4,1.3,0.2,1.7-0.3l1-1l2-2L4.5,4.4z M3.1,8.5L2.5,7.8l2-2l0.7,0.7&#xA;&#x9;L3.1,8.5z M5,2l1-1h3l1,1v3L9,6H8L5,3V2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\" id=\\"karaoke-15\\">\\n  <g>\\n    <path d=\\"M12.1,2.952A2.988,2.988,0,0,0,6.99,4.917l3.142,3.142A2.988,2.988,0,0,0,12.1,2.952Z\\"/>\\n    <path d=\\"M4.672,8.255,2.55,10.377a1,1,0,0,0,0,1.414l.707.707a1,1,0,0,0,1.414,0l2.121-2.121L8.914,8.255,6.793,6.134Zm.741,2.087-.707-.707L6.793,7.548l.707.707Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"landmark-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.5,9H8V5h1l1-2C9.3,3.1,8.7,3.1,8,3C7.3,2.7,6.6,2.4,6,2V1.5C6,1.2,5.8,1,5.5,1S5,1.2,5,1.5V2C4.4,2.4,3.7,2.7,3,3&#xA;&#x9;C2.3,3.1,1.7,3.1,1,3l1,2h1v4H1.5C1.2,9,1,9.2,1,9.5S1.2,10,1.5,10h8C9.8,10,10,9.8,10,9.5S9.8,9,9.5,9z M7,9H4V5h3V9z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"landmark-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M12.5,12H12v-0.5c0-0.3-0.2-0.5-0.5-0.5H11V6h1l1-2c-1,0.1-2,0.1-3,0C9.2,3.4,8.6,2.8,8,2V1.5C8,1.2,7.8,1,7.5,1&#xA;&#x9;S7,1.2,7,1.5V2C6.4,2.8,5.8,3.4,5,4C4,4.1,3,4.1,2,4l1,2h1v5c0,0-0.5,0-0.5,0C3.2,11,3,11.2,3,11.5V12H2.5C2.2,12,2,12.2,2,12.5V13&#xA;&#x9;h11v-0.5C13,12.2,12.8,12,12.5,12z M7,11H5V6h2V11z M10,11H8V6h2V11z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"landuse-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M1,4.749.995,2.057a.251.251,0,0,1,.1-.2L3.344.057A.251.251,0,0,1,3.657.052l2.249,1.8a.251.251,0,0,1,.094.2v2.7A.251.251,0,0,1,5.751,5h-1.5A.251.251,0,0,1,4,4.749V3H3V4.752A.251.251,0,0,1,2.746,5h-1.5A.247.247,0,0,1,1,4.749Zm4.753,2.6h0a.248.248,0,0,0-.173.072L4,9V6.5a.5.5,0,0,0-1,0V9H2V6.5a.5.5,0,0,0-1,0v4.25a.25.25,0,0,0,.25.25h4.5A.249.249,0,0,0,6,10.752V7.6A.25.25,0,0,0,5.753,7.347ZM11,3.253v6.5a.247.247,0,0,1-.247.247H7.247A.247.247,0,0,1,7,9.753v-6.5A.252.252,0,0,1,7.252,3H8V2.248A.248.248,0,0,1,8.248,2H9.754A.246.246,0,0,1,10,2.246V3h.747A.253.253,0,0,1,11,3.253ZM10,8H8V9h2Zm0-2H8V7h2Zm0-2H8V5h2Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"landuse-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M8.911,3.854A.248.248,0,0,1,9,4.044V7.75A.25.25,0,0,1,8.75,8H6.25A.25.25,0,0,1,6,7.75V6H5V7.75A.25.25,0,0,1,4.75,8H2.25A.25.25,0,0,1,2,7.75v-3.7a.248.248,0,0,1,.089-.19L5.343,1.132a.245.245,0,0,1,.315,0ZM7.752,9.5a.248.248,0,0,0-.138.042L5,11.5H4v-2a.5.5,0,0,0-1,0v2H2v-2a.5.5,0,0,0-1,0v4.25a.25.25,0,0,0,.25.25h6.5A.25.25,0,0,0,8,13.75v-4A.248.248,0,0,0,7.752,9.5ZM14,6.245v6.5a.253.253,0,0,1-.253.253H10.253A.253.253,0,0,1,10,12.747V6.25A.249.249,0,0,1,10.25,6H11V5.249A.249.249,0,0,1,11.249,5h1.5A.253.253,0,0,1,13,5.253V6h.755A.245.245,0,0,1,14,6.245ZM13,11H11v1h2Zm0-2H11v1h2Zm0-2H11V8h2Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"laundry-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path3291\\" d=\\"M5,0L4,2H2c0,0-1,0-1,1v7c0,0,0,1,1,1h7c1,0,1-1,1-1V1c0-1-1-1-1-1H5z M6,1h3v1H6V1z M5.5,4&#xA;&#x9;C6.8807,4,8,5.1193,8,6.5S6.8807,9,5.5,9S3,7.8807,3,6.5S4.1193,4,5.5,4z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"laundry-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path3291-2\\" d=\\"M8,1L6,3H3c0,0-1,0-1,1v9c0,1,1,1,1,1h9c0,0,1,0,1-1V2c0-1-1-1-1-1&#xA;&#x9;S8,1,8,1z M8.5,2h2C10.777,2,11,2.223,11,2.5S10.777,3,10.5,3h-2C8.223,3,8,2.777,8,2.5S8.223,2,8.5,2z M7.5,6&#xA;&#x9;c1.6569,0,3,1.3431,3,3s-1.3431,3-3,3s-3-1.3431-3-3S5.8431,6,7.5,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"library-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path5\\" d=\\"&#xA;&#x9;M0,1v7c3.26,0,5.4902,2,5.4902,2S7.76,8,11,8V1C7,1,5.4902,2.7246,5.4902,2.7246S4,1,0,1z M1,2c1.1953-0.0313,3.053,0.4015,4,1.3477&#xA;&#x9;L5.5,4L6,3.3477C6.9615,2.4183,8.8009,1.9878,10,2v5C8,7,6.6456,7.8564,5.4902,8.7812C4.3506,7.8533,3,7,1,7V2z M2,3.3027v0.1816&#xA;&#x9;c0.8234,0.1688,2.0997,0.6868,3,1.1758V4.4316C4.0828,3.9535,2.8241,3.46,2,3.3027z M9,3.3027C8.1759,3.46,6.9172,3.9535,6,4.4316&#xA;&#x9;v0.2285c0.9003-0.489,2.1766-1.007,3-1.1758V3.3027z M2,4.2227v0.1816c0.8217,0.1539,2.0985,0.6584,3,1.1328V5.3418&#xA;&#x9;C4.0827,4.8663,2.8238,4.3752,2,4.2227z M9,4.2227C8.1762,4.3752,6.9173,4.8663,6,5.3418v0.1953&#xA;&#x9;c0.9015-0.4744,2.1783-0.9789,3-1.1328V4.2227z M2,5.1172v0.1816c0.8216,0.1547,2.0984,0.659,3,1.1328V6.2363&#xA;&#x9;C4.0825,5.7614,2.8236,5.2707,2,5.1172z M9,5.1172C8.1764,5.2707,6.9175,5.7614,6,6.2363v0.1953&#xA;&#x9;c0.9016-0.4738,2.1784-0.9781,3-1.1328V5.1172z M2,6v0.1816C2.8201,6.322,4.097,6.811,5,7.2695V7.1191&#xA;&#x9;C4.0825,6.6445,2.8236,6.1538,2,6z M9,6C8.1764,6.1538,6.9175,6.6445,6,7.1191v0.1504C6.903,6.811,8.1799,6.322,9,6.1816V6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"library-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M7.47,4.92C7.47,4.92,5.7,3,1,3v8c4.7,0,6.47,2,6.47,2S9.3,11,14,11V3C9.3,3,7.47,4.92,7.47,4.92z M13,10&#xA;&#x9;c-1.9614,0.0492-3.8727,0.6299-5.53,1.68C5.836,10.6273,3.9432,10.0459,2,10V4c3.4,0.26,4.73,1.6,4.75,1.61l0.73,0.74L8.2,5.6&#xA;&#x9;c0,0,1.4-1.34,4.8-1.6V10z M8,10.24l-0.1-0.17c1.3011-0.5931,2.6827-0.9907,4.1-1.18v0.2c-1.3839,0.1953-2.7316,0.5929-4,1.18V10.24&#xA;&#x9;z M8,9.24L7.9,9.07C9.2016,8.4802,10.5832,8.086,12,7.9v0.2c-1.3844,0.1988-2.7321,0.5997-4,1.19V9.24z M8,8.24L7.9,8.07&#xA;&#x9;C9.2015,7.48,10.5831,7.0857,12,6.9v0.2c-1.3845,0.1981-2.7323,0.599-4,1.19V8.24z M8,7.24L7.9,7.07&#xA;&#x9;C9.2013,6.4794,10.583,6.0851,12,5.9v0.2c-1.3844,0.1986-2.7321,0.5996-4,1.19V7.24z M6.9,10.24C5.6639,9.6641,4.3499,9.2733,3,9.08&#xA;&#x9;v-0.2c1.3872,0.2028,2.7358,0.6141,4,1.22L6.9,10.24z M6.9,9.24C5.6629,8.671,4.3488,8.2869,3,8.1V7.9&#xA;&#x9;c1.386,0.2027,2.7341,0.6105,4,1.21L6.9,9.24z M6.9,8.24C5.6631,7.6705,4.3489,7.2863,3,7.1V6.9c1.3868,0.199,2.7354,0.607,4,1.21&#xA;&#x9;L6.9,8.24z M6.9,7.24C5.6629,6.671,4.3488,6.2869,3,6.1V5.9c1.386,0.2024,2.7342,0.6102,4,1.21L6.9,7.24z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"lighthouse-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M7,6l1,5H3l1-5h1.2V2H4.28C4.1042,1.9823,3.9759,1.8255,3.9936,1.6496C4.0042,1.544,4.0665,1.4504,4.16,1.4L5.38,1&#xA;&#x9;c0.0762-0.0347,0.1638-0.0347,0.24,0l1.22,0.4c0.1555,0.0839,0.2136,0.2781,0.1296,0.4336C6.9192,1.927,6.8257,1.9894,6.72,2H5.81v4&#xA;&#x9;H7z M8,3v0.5L11,3V2.5L8,3z M8,5.5L11,6V5.5L8,5V5.5z M3,3L0,2.5V3l3,0.5V3z M3,5L0,5.5V6l3-0.5V5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"lighthouse-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M4.5,6L0,7V6.5l4.5-1V6z M4.5,3.5L0,2.5V3l4.5,1V3.5z M10.5,3.5V4L15,3V2.5L10.5,3.5z M10.5,6L15,7V6.5l-4.5-1V6z M8,7V2&#xA;&#x9;h2.5c0.2761,0.0552,0.5448-0.1239,0.6-0.4c0.0552-0.2761-0.1239-0.5448-0.4-0.6l-3-1C7.5696-0.0586,7.4204-0.0586,7.29,0l-3,1&#xA;&#x9;c-0.2761,0.0552-0.4552,0.3239-0.4,0.6S4.2139,2.0552,4.49,2H7v5H5l-2,7h9l-2-7H8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"lodging-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect6430\\" d=\\"M1.5,2C1.2239,2,1,2.2239,1,2.5v6C1,8.7761,1.2239,9,1.5,9S2,8.7761,2,8.5V8h7v0.5C9,8.7761,9.2239,9,9.5,9&#xA;&#x9;S10,8.7761,10,8.5v-1C10,7.2239,9.7761,7,9.5,7H2V2.5C2,2.2239,1.7761,2,1.5,2z M3.5,2c-0.5523,0-1,0.4477-1,1s0.4477,1,1,1&#xA;&#x9;s1-0.4477,1-1S4.0523,2,3.5,2z M6,3C5.4477,3,5,3.4477,5,4v1H3C2.7239,5,2.5,5.2239,2.5,5.5S2.7239,6,3,6h7V5c0-1.1046-0.8954-2-2-2&#xA;&#x9;H6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"lodging-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect6507\\" d=\\"M0.5,2.5C0.2,2.5,0,2.7,0,3v7.5v2C0,12.8,0.2,13,0.5,13S1,12.8,1,12.5V11h13v1.5&#xA;&#x9;c0,0.3,0.2,0.5,0.5,0.5s0.5-0.2,0.5-0.5v-2c0-0.3-0.2-0.5-0.5-0.5H1V3C1,2.7,0.8,2.5,0.5,2.5z M3.5,3C2.7,3,2,3.7,2,4.5l0,0&#xA;&#x9;C2,5.3,2.7,6,3.5,6l0,0C4.3,6,5,5.3,5,4.5l0,0C5,3.7,4.3,3,3.5,3L3.5,3z M7,4C5.5,4,5.5,5.5,5.5,5.5V7h-3C2.2,7,2,7.2,2,7.5v1&#xA;&#x9;C2,8.8,2.2,9,2.5,9H6h9V6.5C15,4,12.5,4,12.5,4H7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"logging-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.25,1a.409.409,0,0,0-.11.01.668.668,0,0,0-.44.24L8,2H7.263A.25.25,0,0,0,7,2.236a.243.243,0,0,0,0,.025V3H6.263a.256.256,0,0,0-.19.073A.248.248,0,0,0,6,3.252V4H5.237a.275.275,0,0,0-.164.073A.248.248,0,0,0,5,4.252V5H4.249a.257.257,0,0,0-.176.075l.178.178.5.5L8.5,2H9v.5L5.25,6.25l.5.5.177.177A.249.249,0,0,0,6,6.749V6h.751a.25.25,0,0,0,.176-.073A.266.266,0,0,0,7,5.759V5h.748A.248.248,0,0,0,8,4.756H8V4h.751a.267.267,0,0,0,.176-.073A.258.258,0,0,0,9,3.733V3l.78-.72a.734.734,0,0,0,.21-.42L10,1.75A.755.755,0,0,0,9.25,1ZM2,8,1.569,6.8h0a1.422,1.422,0,0,1-.07-.465V6.25A.25.25,0,0,1,1.749,6h1a.25.25,0,0,0,0-.5H1.5A.5.5,0,0,0,1,6v.415a2,2,0,0,0,.106.642L1.57,8.43a1.841,1.841,0,0,0,.1.24,1.551,1.551,0,0,0,.624.643,1.342,1.342,0,0,0,1.315,0C3.869,9.122,5,8,5,8L3.5,6.5Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"logging-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.91,3.41,13.5,3l.2-.28c.02-.03.04-.05.06-.08A.969.969,0,0,0,14,1.99a1,1,0,0,0-1.62-.77c-.03.02-.06.05-.09.07L12,1.5l-.386-.386a.354.354,0,0,0-.525.475l.417.417-.5.5-.392-.392a.354.354,0,0,0-.525.475L10.5,3l-.5.5-.381-.381a.354.354,0,1,0-.528.472h0l.028.028L9.5,4,9,4.5l-.395-.395a.354.354,0,0,0-.517.483L8.5,5,8,5.5l-.365-.365a.354.354,0,0,0-.556.439h0C7.1,5.6,7.508,6,7.508,6L7,6.5l-.394-.392a.392.392,0,0,0-.5-.028.384.384,0,0,0-.028.5L6.1,6.6l.4.4L6,7.5l-.4-.4a.37.37,0,0,0-.5,0L6.248,8.244,12.09,2.41,12.5,2H13v.5l-.41.41L6.751,8.749,7.9,9.9a.355.355,0,0,0,0-.5l-.008-.009L7.5,9,8,8.5l.384.384a.354.354,0,0,0,.528-.472L8.5,8,9,7.5l.38.38a.354.354,0,0,0,.528-.472l-.02-.02L9.5,7l.5-.5.377.377A.35.35,0,0,0,10.64,7a.347.347,0,0,0,.252-.6L10.5,6l.5-.5.38.38a.354.354,0,0,0,.528-.472L11.88,5.38,11.5,5l.5-.5.381.381a.354.354,0,0,0,.528-.472l-.025-.025L12.5,4l.5-.5.382.382a.354.354,0,0,0,.528-.472ZM4.39,7.916C3.893,7.419,3.641,7,3,7H1.5a.5.5,0,0,0-.5.5v3A2.19,2.19,0,0,0,1.5,12l.815.811A2.251,2.251,0,0,0,5.493,13h0L7.5,11ZM3.5,10,2.262,11.238A1.3,1.3,0,0,1,2,10.5V8H3a.545.545,0,0,1,.335.194.455.455,0,0,1,.165.418Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"marker-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path4133\\" d=\\"M5.5-0.0176c-1.7866,0-3.8711,1.0918-3.8711,3.8711&#xA;&#x9;C1.6289,5.7393,4.6067,9.9082,5.5,11c0.7941-1.0918,3.871-5.1614,3.871-7.1466C9.371,1.0742,7.2866-0.0176,5.5-0.0176z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"marker-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path4133\\" d=\\"M7.5,0C5.0676,0,2.2297,1.4865,2.2297,5.2703&#xA;&#x9;C2.2297,7.8378,6.2838,13.5135,7.5,15c1.0811-1.4865,5.2703-7.027,5.2703-9.7297C12.7703,1.4865,9.9324,0,7.5,0z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"marker-stroked-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"Layer_7\\" d=\\"M5.486,11l-.365-.446c-.7-.858-3.544-4.739-3.544-6.638A3.726,3.726,0,0,1,5.132.026q.167-.008.333,0A3.726,3.726,0,0,1,9.353,3.583q.007.166,0,.331c0,1.6-1.806,4.268-3.38,6.415ZM5.465.916a2.817,2.817,0,0,0-3,3c0,1.268,1.883,4.161,2.987,5.62.935-1.282,3.011-4.217,3.011-5.62a2.817,2.817,0,0,0-3-3Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"marker-stroked-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"Layer_7\\" d=\\"M7.5,14.941l-.4-.495c-.973-1.189-4.9-6.556-4.9-9.16A5.066,5.066,0,0,1,7.036,0q.222-.01.445,0a5.066,5.066,0,0,1,5.286,4.836q.01.225,0,.45c0,2.213-2.669,6.111-4.678,8.851ZM7.481.986a4.077,4.077,0,0,0-4.3,4.3c0,1.832,2.759,6.038,4.286,8.034,1.25-1.71,4.315-5.989,4.315-8.034a4.077,4.077,0,0,0-4.3-4.3Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"mobile-phone-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M7,2V1.5a.5.5,0,0,0-1,0V2H4A1,1,0,0,0,3,3V9a1,1,0,0,0,1,1H7A1,1,0,0,0,8,9V3A1,1,0,0,0,7,2ZM5,9H4V8H5ZM5,7H4V6H5ZM7,9H6V8H7ZM7,7H6V6H7ZM7,5H4V3H7Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"mobile-phone-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M10,2h0V1.5a.5.5,0,0,0-1,0V2H5A1,1,0,0,0,4,3V13a1,1,0,0,0,1,1h5a1,1,0,0,0,1-1V3A1,1,0,0,0,10,2ZM6,13H5V12H6Zm0-2H5V10H6ZM6,9H5V8H6Zm2,4H7V12H8Zm0-2H7V10H8ZM8,9H7V8H8Zm2,4H9V12h1Zm0-2H9V10h1Zm0-2H9V8h1Zm0-2.5a.5.5,0,0,1-.5.5h-4A.5.5,0,0,1,5,6.5v-3A.5.5,0,0,1,5.5,3h4a.5.5,0,0,1,.5.5Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"monument-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path11719-7\\" d=\\"M5.5,0L4,2v4.5h3V2L5.5,0z M3,7L2,8&#xA;&#x9;v3h7V8L8,7H3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"monument-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path11719-7\\" d=\\"M7.5,0L6,2.5v7h3v-7L7.5,0z M3,11.5&#xA;&#x9;L3,15h9v-3.5L10.5,10h-6L3,11.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"mountain-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect3338\\" d=\\"M5.5176,1.2324C5.3165,1.2262,5.1271,1.328,5.0234,1.5l-4,6.6602&#xA;&#x9;C0.8007,8.5296,1.0679,8.9999,1.5,9h8c0.4321-0.0001,0.6993-0.4704,0.4766-0.8398l-4-6.6602&#xA;&#x9;C5.8793,1.3386,5.7062,1.2384,5.5176,1.2324z M5.5195,2.1543L8.4316,7H7.7598L6.416,5.7734L5.5195,7L4.625,5.7734L3.2812,7H2.6094&#xA;&#x9;C2.6094,7,5.5195,2.1543,5.5195,2.1543z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"mountain-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path5571\\" d=\\"M7.5,2C7.2,2,7.1,2.2,6.9,2.4&#xA;&#x9;l-5.8,9.5C1,12,1,12.2,1,12.3C1,12.8,1.4,13,1.7,13h11.6c0.4,0,0.7-0.2,0.7-0.7c0-0.2,0-0.2-0.1-0.4L8.2,2.4C8,2.2,7.8,2,7.5,2z&#xA;&#x9; M7.5,3.5L10.8,9H10L8.5,7.5L7.5,9l-1-1.5L5,9H4.1L7.5,3.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"museum-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.5,0L1,2v1h9V2L5.5,0z M2,4v4L1,9v1h9V9L9,8V4H2z M3.49,5c0.1354-0.0008,0.2653,0.0533,0.36,0.15L5.5,6.79l1.65-1.64&#xA;&#x9;c0.1972-0.1933,0.5137-0.1902,0.7071,0.007C7.947,5.2487,7.9982,5.3715,8,5.5v3C8,8.7761,7.7761,9,7.5,9S7,8.7761,7,8.5l0,0V6.71&#xA;&#x9;L5.85,7.85C5.6555,8.0461,5.339,8.0474,5.1429,7.8529C5.1419,7.8519,5.141,7.851,5.14,7.85L4,6.71V8.5C4,8.7761,3.7761,9,3.5,9&#xA;&#x9;S3,8.7761,3,8.5l0,0v-3C2.9999,5.2277,3.2178,5.0054,3.49,5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"museum-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path7509\\" d=\\"M7.5,0L1,3.4453V4h13V3.4453L7.5,0z M2,5v5l-1,1.5547V13h13v-1.4453L13,10&#xA;&#x9;V5H2z M4.6152,6c0.169-0.0023,0.3318,0.0639,0.4512,0.1836L7.5,8.6172l2.4336-2.4336c0.2445-0.2437,0.6402-0.2432,0.884,0.0013&#xA;&#x9;C10.9341,6.3017,10.9997,6.46,11,6.625v4.2422c0.0049,0.3452-0.271,0.629-0.6162,0.6338c-0.3452,0.0049-0.629-0.271-0.6338-0.6162&#xA;&#x9;c-0.0001-0.0059-0.0001-0.0118,0-0.0177V8.1328L7.9414,9.9414c-0.244,0.2433-0.6388,0.2433-0.8828,0L5.25,8.1328v2.7344&#xA;&#x9;c0.0049,0.3452-0.271,0.629-0.6162,0.6338C4.2887,11.5059,4.0049,11.2301,4,10.8849c-0.0001-0.0059-0.0001-0.0118,0-0.0177V6.625&#xA;&#x9;C4,6.2836,4.2739,6.0054,4.6152,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"music-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.5,0.5C9.4238,0.4993,9.3484,0.5164,9.28,0.55L3.5,2C3.2239,2,3,2.2239,3,2.5v4.59&#xA;&#x9;C2.219,6.8139,1.3619,7.2232,1.0858,8.0042S1.219,9.6423,2,9.9184s1.6381-0.1332,1.9142-0.9142C3.9715,8.8423,4.0005,8.6717,4,8.5&#xA;&#x9;V5.38l5-1.25v1.46C8.219,5.3139,7.3619,5.7232,7.0858,6.5042C6.8097,7.2853,7.219,8.1423,8,8.4184s1.6381-0.1332,1.9142-0.9142&#xA;&#x9;C9.9715,7.3423,10.0005,7.1717,10,7V1C10,0.7239,9.7761,0.5,9.5,0.5z M4,4.38v-1.5l5-1.25v1.5L4,4.38z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"music-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.5,1c-0.0804,0.0008-0.1594,0.0214-0.23,0.06L4.5,3.5C4.2239,3.5,4,3.7239,4,4v6.28C3.6971,10.1002,3.3522,10.0037,3,10&#xA;&#x9;c-1.1046,0-2,0.8954-2,2s0.8954,2,2,2s2-0.8954,2-2V7.36l8-2.22v3.64c-0.3029-0.1798-0.6478-0.2763-1-0.28c-1.1046,0-2,0.8954-2,2&#xA;&#x9;s0.8954,2,2,2s2-0.8954,2-2v-9C14,1.2239,13.7761,1,13.5,1z M13,4.14L5,6.36v-2l8-2.22C13,2.14,13,4.14,13,4.14z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"natural-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M4.579,9.579h0L3,8H4.4a.25.25,0,0,0,.25-.25.246.246,0,0,0-.079-.179L3,6h.736a.25.25,0,0,0,.25-.25.246.246,0,0,0-.078-.179h0l-1.2-1.253a.253.253,0,0,0-.4-.015c-.02.023-1.21,1.266-1.21,1.266a.245.245,0,0,0-.082.18.25.25,0,0,0,.25.25H2L.425,7.575h0A.249.249,0,0,0,.6,8H2L.434,9.566h0a.244.244,0,0,0-.082.18A.25.25,0,0,0,.6,10H2v1H3V10H4.4a.247.247,0,0,0,.179-.421Zm6.242-.938-2.1-4.2a.248.248,0,0,0-.443,0l-2.1,4.2A.248.248,0,0,0,6.4,9h4.2a.248.248,0,0,0,.221-.359ZM7.5,7l1-2,1,2Zm.279-5.921a.266.266,0,0,1-.049.148A3.513,3.513,0,0,0,7,3,2.141,2.141,0,0,1,5.709,4.911a.475.475,0,0,1-.419,0A2.141,2.141,0,0,1,4,3a3.5,3.5,0,0,0-.726-1.769.271.271,0,0,1-.046-.148.25.25,0,0,1,.25-.25.27.27,0,0,1,.067.009A2.939,2.939,0,0,1,5,2L5.25.224A.25.25,0,0,1,5.744.2L6,2A2.957,2.957,0,0,1,7.453.841.272.272,0,0,1,7.529.829.25.25,0,0,1,7.779,1.079Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"natural-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M8.753,6.278a.5.5,0,0,1-.51,0A4.109,4.109,0,0,1,6.5,3.5a2.779,2.779,0,0,0-.59-1.506l-.019-.027a.257.257,0,0,1-.056-.144.237.237,0,0,1,.25-.25.264.264,0,0,1,.057.011A3.523,3.523,0,0,1,7.5,2.5L8.28.94a.246.246,0,0,1,.44,0L9.5,2.5a3.4,3.4,0,0,1,1.339-.907.283.283,0,0,1,.1-.021c.175.009.212.119.221.249a.35.35,0,0,1-.043.141A5.2,5.2,0,0,0,10.5,3.5,4.113,4.113,0,0,1,8.753,6.278ZM5,8H6.289a.25.25,0,0,0,.25-.25.241.241,0,0,0-.061-.15L4.7,5.235a.255.255,0,0,0-.391,0L2.518,7.589a.274.274,0,0,0-.062.161.25.25,0,0,0,.25.25H4L1.335,10.6a.273.273,0,0,0-.058.152A.25.25,0,0,0,1.529,11H3L1.435,12.565a.255.255,0,0,0,.18.435H4v1H5V13H7.385a.255.255,0,0,0,.18-.435L6,11H7.471a.25.25,0,0,0,.25-.25.233.233,0,0,0-.058-.149Zm9.345,3.748a.252.252,0,0,1-.252.252H8.908a.252.252,0,0,1-.226-.365L11.27,6.451a.252.252,0,0,1,.451,0l2.6,5.184h0A.251.251,0,0,1,14.345,11.748ZM12.75,10,11.5,7.5,10.25,10Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\" xmlns=\\"http://www.w3.org/2000/svg\\" id=\\"oil-rig-es-11\\">\\n  <path d=\\"M10.2667 9.53333H8.8L7.33333 1.46667H6.6V0.733333H5.86667V0H5.13333V0.733333H4.4V1.46667H3.66667L2.2 9.53333H0.733333L0 11H11L10.2667 9.53333ZM4.268 2.2H6.732L7.13533 4.4H3.86467L4.268 2.2ZM6.6 5.13333L5.5 6.78333L4.4 5.13333H6.6ZM2.93333 9.53333L3.718 5.214L5.13333 7.33333L3.66667 9.53333H2.93333ZM4.4 9.53333L5.5 7.88333L6.6 9.53333H4.4ZM7.33333 9.53333L5.86667 7.33333L7.282 5.214L8.06667 9.53333H7.33333Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"oil-rig-es-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,13H12L10,2H9V1H8V0H7V1H6V2H5L3,13H1L0,15H15ZM5.82,3H9.18l.55,3H5.27ZM9,7,7.5,9.25,6,7ZM4,13,5.07,7.11,7,10,5,13Zm2,0,1.5-2.25L9,13Zm4,0L8,10,9.93,7.11,11,13Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"optician-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10.5,4c-0.0246,0-0.0457,0.0106-0.0694,0.014C10.2798,3.35,9.8149,3,9,3H7.5C6.6155,3,6.1454,3.4145,6.0433,4.1969&#xA;&#x9;C5.8868,4.1503,5.6987,4.1084,5.5,4.1084S5.1132,4.1503,4.9567,4.1969C4.8546,3.4145,4.3845,3,3.5,3H2&#xA;&#x9;C1.1851,3,0.7202,3.35,0.5694,4.014C0.5457,4.0106,0.5246,4,0.5,4C0.2239,4,0,4.2238,0,4.5C0,4.7761,0.2239,5,0.5,5&#xA;&#x9;c0,1.5,1,2,2.25,2S5,6.5,5,5V4.9735c0.1148-0.0472,0.3174-0.1151,0.5-0.1151S5.8852,4.9263,6,4.9735V5c0,1.5,1,2,2.25,2&#xA;&#x9;s2.25-0.5,2.25-2C10.7761,5,11,4.7761,11,4.5C11,4.2238,10.7761,4,10.5,4z M4.25,5c0,0.6492-0.1817,1.25-1.5,1.25&#xA;&#x9;S1.25,5.6492,1.25,5V4.5c0-0.5888,0.1612-0.75,0.75-0.75h1.5c0.5888,0,0.75,0.1612,0.75,0.75V5z M9.75,5&#xA;&#x9;c0,0.6492-0.1817,1.25-1.5,1.25S6.75,5.6492,6.75,5V4.5c0-0.5888,0.1612-0.75,0.75-0.75H9c0.5888,0,0.75,0.1612,0.75,0.75V5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"optician-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14.5,6h-0.6766c-0.2828-0.5892-0.8801-1-1.5763-1H9.752C8.9344,5,8.2513,5.5656,8.059,6.3246&#xA;&#x9;C7.8854,6.2835,7.6991,6.25,7.5,6.25S7.1146,6.2834,6.941,6.3245C6.7487,5.5656,6.0654,5,5.2476,5H2.7529&#xA;&#x9;C2.0566,5,1.4592,5.4108,1.1765,6H0.4992C0.2235,6,0,6.2234,0,6.4991v0.0016C0,6.7765,0.2235,7,0.4992,7H1v0.5&#xA;&#x9;C1,9.0889,2.0024,10,3.75,10h0.5C5.9976,10,7,9.0889,7,7.5V7.3413C7.1503,7.2933,7.3307,7.25,7.5,7.25&#xA;&#x9;c0.1693,0,0.3499,0.0433,0.5,0.0913V7.5C8,9.0889,9.002,10,10.75,10h0.5C12.998,10,14,9.0889,14,7.5V7h0.5&#xA;&#x9;C14.7761,7,15,6.7761,15,6.5C15,6.2238,14.7761,6,14.5,6z M6,7.5C6,8.1982,5.8013,9,4.25,9h-0.5C2.1987,9,2,8.1982,2,7.5V6.7524&#xA;&#x9;C2,6.3374,2.3379,6,2.7529,6h2.4946C5.6626,6,6,6.3374,6,6.7524V7.5z M13,7.5C13,8.1982,12.8008,9,11.25,9h-0.5&#xA;&#x9;C9.1992,9,9,8.1982,9,7.5V6.7524C9,6.3374,9.3369,6,9.752,6h2.4951C12.6621,6,13,6.3379,13,6.7529V7.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"paint-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10,2H9V1.3631C9,1.1625,8.8374,1,8.6369,1H1.3631C1.1626,1,1,1.1625,1,1.3631v2.2737C1,3.8374,1.1626,4,1.3631,4h7.2738&#xA;&#x9;C8.8374,4,9,3.8374,9,3.6368V3h0.5v2.0176L4.8965,5.9917C4.665,6.0405,4.5,6.2446,4.5,6.481v1.0959H4.459&#xA;&#x9;C4.2055,7.5769,4,7.7824,4,8.0359v2.0051C4,10.2945,4.2055,10.5,4.459,10.5h1.082C5.7945,10.5,6,10.2945,6,10.041V8.0359&#xA;&#x9;c0-0.2535-0.2055-0.459-0.459-0.459H5.5V6.8862l4.6035-0.9741C10.335,5.8633,10.5,5.6592,10.5,5.4229V2.5&#xA;&#x9;C10.5,2.2236,10.2764,2,10,2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"paint-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.5,2.5h-1V1.5027C12.5,1.225,12.2749,1,11.9973,1H1.5027C1.2251,1,1,1.225,1,1.5027v2.9946C1,4.7749,1.2251,5,1.5027,5&#xA;&#x9;h10.4946C12.2749,5,12.5,4.7749,12.5,4.4973V3.5H13v3.1021L6.8877,8.0127C6.6606,8.0654,6.5,8.2676,6.5,8.5v1.5074&#xA;&#x9;c-0.2783,0.02-0.5,0.246-0.5,0.5295v2.9261C6,13.7596,6.2404,14,6.5369,14h0.9261C7.7596,14,8,13.7596,8,13.4631v-2.9261&#xA;&#x9;c0-0.2834-0.2217-0.5095-0.5-0.5295v-1.11l6.1123-1.4102C13.8389,7.4351,14,7.2329,14,7V3C14,2.7236,13.7764,2.5,13.5,2.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"park-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M11,3.75C11,2.7835,10.2165,2,9.25,2c-0.2789,0.0012-0.5534,0.0698-0.8,0.2C8.4284,1.5308,7.8795,0.9997,7.21,1&#xA;&#x9;C7.1386,1.0103,7.0683,1.027,7,1.05C6.9091,0.4341,6.3724-0.0168,5.75,0C5.2633,0.0026,4.8224,0.2874,4.62,0.73&#xA;&#x9;C4.4366,0.6044,4.222,0.5317,4,0.52C3.5966,0.5282,3.223,0.7338,3,1.07C2.8417,1.0195,2.6761,0.9959,2.51,1&#xA;&#x9;C1.6761,0.9991,0.9992,1.6743,0.9983,2.5083C0.9981,2.7043,1.036,2.8985,1.11,3.08C0.302,3.2358-0.2268,4.0171-0.071,4.8251&#xA;&#x9;C0.0422,5.4122,0.4954,5.8748,1.08,6c0.2492,0.7843,1.087,1.218,1.8713,0.9688C3.2148,6.8851,3.4498,6.7297,3.63,6.52h0.12&#xA;&#x9;c0.3212-0.0009,0.6295-0.1264,0.86-0.35V10L3,11h5l-1.6-1V9c0.6623-0.8086,1.4694-1.4868,2.38-2&#xA;&#x9;c0.2593-0.0493,0.5009-0.1667,0.7-0.34l0,0l0,0C9.8179,6.3704,10.0086,5.9449,10,5.5c0.0033-0.0566,0.0033-0.1134,0-0.17&#xA;&#x9;C10.6103,5.0405,10.9996,4.4255,11,3.75z M6.36,8.25V6h0.18c0.1812-0.0015,0.3607-0.0353,0.53-0.1&#xA;&#x9;c0.1232,0.4546,0.4528,0.8249,0.89,1C7.375,7.2849,6.8378,7.7381,6.36,8.25z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"park-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,5.75c0.0113-0.6863-0.3798-1.3159-1-1.61C12.9475,3.4906,12.4014,2.9926,11.75,3&#xA;&#x9;c-0.0988,0.0079-0.1962,0.0281-0.29,0.06c-0.0607-0.66-0.6449-1.1458-1.3048-1.0851C9.8965,1.9987,9.6526,2.1058,9.46,2.28l0,0&#xA;&#x9;c0-0.6904-0.5596-1.25-1.25-1.25S6.96,1.5896,6.96,2.28C6.96,2.28,7,2.3,7,2.33C6.4886,1.8913,5.7184,1.9503,5.2797,2.4618&#xA;&#x9;C5.1316,2.6345,5.0347,2.8451,5,3.07C4.8417,3.0195,4.6761,2.9959,4.51,3C3.6816,2.9931,3.0044,3.659,2.9975,4.4874&#xA;&#x9;C2.9958,4.6872,3.0341,4.8852,3.11,5.07C2.3175,5.2915,1.8546,6.1136,2.0761,6.9061C2.2163,7.4078,2.6083,7.7998,3.11,7.94&#xA;&#x9;c0.2533,0.7829,1.0934,1.2123,1.8763,0.959C5.5216,8.7258,5.9137,8.2659,6,7.71C6.183,7.8691,6.4093,7.9701,6.65,8v5L5,14h5l-1.6-1&#xA;&#x9;v-2c0.7381-0.8915,1.6915-1.5799,2.77-2c0.8012,0.1879,1.603-0.3092,1.7909-1.1103C12.9893,7.7686,13.0025,7.6444,13,7.52&#xA;&#x9;c0.0029-0.0533,0.0029-0.1067,0-0.16C13.6202,7.0659,14.0113,6.4363,14,5.75z M8.4,10.26V6.82C8.6703,7.3007,9.1785,7.5987,9.73,7.6&#xA;&#x9;h0.28c0.0156,0.4391,0.2242,0.849,0.57,1.12C9.7643,9.094,9.0251,9.6162,8.4,10.26z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"park-alt1-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.571,8.563,7.425,6.424a.255.255,0,0,1-.069-.174A.25.25,0,0,1,7.6,6h.8a.25.25,0,0,0,.25-.25.246.246,0,0,0-.068-.165l-.008-.008L6.4,3.4a.27.27,0,0,1-.051-.149A.25.25,0,0,1,6.6,3H7.48a.257.257,0,0,0,.25-.258A.234.234,0,0,0,7.68,2.6L5.694.224A.223.223,0,0,0,5.343.186h0C5.327.2,3.352,2.578,3.352,2.578a.246.246,0,0,0-.068.164A.257.257,0,0,0,3.534,3H4.4a.25.25,0,0,1,.25.25.262.262,0,0,1-.066.17L2.431,5.571a.247.247,0,0,0-.077.178A.251.251,0,0,0,2.6,6h.789a.249.249,0,0,1,.25.249.3.3,0,0,1-.063.17L1.43,8.563A.253.253,0,0,0,1.6,9H5v1H6V9H9.4a.255.255,0,0,0,.249-.255A.248.248,0,0,0,9.571,8.563Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"park-alt1-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M9.428,10.429a.269.269,0,0,1-.074-.18A.25.25,0,0,1,9.6,10h1.447a.25.25,0,0,0,.25-.25.258.258,0,0,0-.079-.179L9.07,7.419a.3.3,0,0,1-.063-.17A.249.249,0,0,1,9.257,7H10.4a.251.251,0,0,0,.25-.251.247.247,0,0,0-.077-.178L8.432,4.434,8.418,4.42a.262.262,0,0,1-.066-.17A.25.25,0,0,1,8.6,4h.866a.25.25,0,0,0,.25-.25.246.246,0,0,0-.068-.164h.006L7.7,1.238a.253.253,0,0,0-.042-.044A.249.249,0,0,0,7.5,1.139h0a.249.249,0,0,0-.158.055.253.253,0,0,0-.042.044L5.352,3.586a.246.246,0,0,0-.068.164.25.25,0,0,0,.25.25H6.4a.241.241,0,0,1,.184.42l-.014.014L4.431,6.571a.247.247,0,0,0-.077.178A.251.251,0,0,0,4.6,7H5.745a.249.249,0,0,1,.25.249.3.3,0,0,1-.063.17L3.782,9.571A.258.258,0,0,0,3.7,9.75a.25.25,0,0,0,.25.25H5.4a.25.25,0,0,1,.248.249.269.269,0,0,1-.074.18l-2.14,2.132-.009.009a.248.248,0,0,0,0,.351A.256.256,0,0,0,3.605,13H7v1l1-.008V13h3.391a.263.263,0,0,0,.26-.254.248.248,0,0,0-.071-.177Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"parking-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8.1,6.1C7.4363,6.5788,6.6268,6.8121,5.81,6.76H3.9V10H2V1h3.93c0.7801-0.0414,1.5484,0.2041,2.16,0.69&#xA;&#x9;C8.6707,2.2518,8.9681,3.0449,8.9,3.85C8.9884,4.6825,8.6941,5.5101,8.1,6.1z M6.64,2.86c-0.289-0.2119-0.6421-0.3178-1-0.3H3.9&#xA;&#x9;v2.65h1.72c0.3612,0.0191,0.717-0.0947,1-0.32c0.2559-0.2675,0.3867-0.6308,0.36-1C7.0323,3.5125,6.9068,3.1321,6.64,2.86z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"parking-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11.85,8.37c-0.9532,0.7086-2.1239,1.0623-3.31,1H5.79V14H3V1h5.72c1.1305-0.0605,2.244,0.2952,3.13,1&#xA;&#x9;c0.8321,0.8147,1.2543,1.9601,1.15,3.12C13.1271,6.3214,12.7045,7.5159,11.85,8.37z M9.75,3.7C9.3254,3.3892,8.8052,3.237,8.28,3.27&#xA;&#x9;H5.79v3.82h2.49c0.5315,0.0326,1.056-0.1351,1.47-0.47c0.3795-0.3947,0.5693-0.9346,0.52-1.48C10.324,4.606,10.1327,4.0763,9.75,3.7&#xA;&#x9;z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"parking-garage-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M7.25,7.44C6.8067,7.7602,6.2657,7.9158,5.72,7.88H4.45V10H3.19V4H5.8c0.5201-0.0279,1.0324,0.1358,1.44,0.46&#xA;&#x9;c0.3847,0.372,0.5828,0.8966,0.54,1.43C7.8557,6.4611,7.6596,7.0348,7.25,7.44z M6.25,5.28c-0.1946-0.1475-0.4365-0.2186-0.68-0.2&#xA;&#x9;H4.45v1.76H5.6c0.246,0.0129,0.4882-0.0654,0.68-0.22c0.1746-0.1813,0.2621-0.4293,0.24-0.68c0.023-0.2449-0.0651-0.4871-0.24-0.66&#xA;&#x9;L6.25,5.28z M10.41,3.28c0.1349-0.2403,0.0499-0.5444-0.19-0.68l-4.5-2.5c-0.1521-0.0855-0.3379-0.0855-0.49,0l-4.5,2.5&#xA;&#x9;C0.4972,2.7485,0.4288,3.0576,0.5773,3.2904C0.7144,3.5054,0.9913,3.5828,1.22,3.47l4.28-2.4l4.26,2.37&#xA;&#x9;c0.2421,0.1328,0.546,0.0442,0.6789-0.1979C10.4392,3.2414,10.4396,3.2407,10.44,3.24L10.41,3.28z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"parking-garage-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M10.5,10.14c-0.6637,0.4788-1.4732,0.7121-2.29,0.66h-1.9V14h-1.9V5h3.92&#xA;&#x9;c0.7801-0.0414,1.5484,0.2041,2.16,0.69c0.5779,0.5595,0.875,1.3483,0.81,2.15C11.4042,8.6892,11.1088,9.5388,10.5,10.14z M9,6.9&#xA;&#x9;C8.711,6.6881,8.3579,6.5822,8,6.6H6.31v2.65H8c0.3612,0.0191,0.717-0.0947,1-0.32c0.2559-0.2675,0.3867-0.6308,0.36-1&#xA;&#x9;C9.4072,7.5493,9.274,7.1684,9,6.9z M14.41,4.21c0.114-0.2486,0.007-0.5427-0.24-0.66L7.5,0.45l-6.71,3.1&#xA;&#x9;C0.5387,3.666,0.429,3.9637,0.545,4.215C0.661,4.4663,0.9587,4.576,1.21,4.46l0,0L7.5,1.55l6.29,2.9&#xA;&#x9;c0.2486,0.114,0.5427,0.007,0.66-0.24H14.41z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"pharmacy-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M6,4l2-2C7.9899,1.9304,7.9899,1.8596,8,1.79c0-0.4142,0.3358-0.75,0.75-0.75S9.5,1.3758,9.5,1.79S9.1642,2.54,8.75,2.54&#xA;&#x9;H8.64L7.5,4H6z M9.48,5.83L8.65,7.5l0.83,1.67V10h-8V9.17L2.32,7.5L1.48,5.83V5h8V5.83z M7.5,7H6V5.5H5V7H3.5v1H5v1.5h1V8h1.5V7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"pharmacy-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M9.5,4l1.07-1.54c0.0599,0.0046,0.1201,0.0046,0.18,0c0.6904-0.0004,1.2497-0.5603,1.2494-1.2506&#xA;&#x9;C11.999,0.519,11.4391-0.0404,10.7487-0.04C10.0584-0.0396,9.499,0.5203,9.4994,1.2106c0,0.0131,0.0002,0.0262,0.0006,0.0394&#xA;&#x9;c0,0,0,0.07,0,0.1L7,4H9.5z M12,6V5H3v1l1.5,3.5L3,13v1h9v-1l-1-3.5L12,6z M10,10H8v2H7v-2H5V9h2V7h1v2h2V10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"picnic-site-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect4760\\" d=\\"M2.75,2C2.3345,2,2,2.3345,2,2.75S2.3345,3.5,2.75,3.5H4L3.5391,5H1.75C1.3345,5,1,5.3345,1,5.75&#xA;&#x9;S1.3345,6.5,1.75,6.5h1.3262L2,10h1l1.0762-3.5h2.8477L8,10h1L7.9238,6.5H9.25C9.6655,6.5,10,6.1655,10,5.75S9.6655,5,9.25,5H7.4609&#xA;&#x9;L7,3.5h1.25C8.6655,3.5,9,3.1655,9,2.75S8.6655,2,8.25,2H2.75z M5,3.5h1L6.4609,5H4.5391L5,3.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"picnic-site-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect4760\\" d=\\"M4,3C3.446,3,3,3.446,3,4s0.446,1,1,1h1.2969&#xA;&#x9;L4.6523,7H2.5c-0.554,0-1,0.446-1,1s0.446,1,1,1h1.5098L3.041,12.0098c-0.1284,0.3939,0.0868,0.8173,0.4807,0.9457&#xA;&#x9;s0.8173-0.0868,0.9457-0.4807c0.0005-0.0013,0.0009-0.0027,0.0013-0.004L5.5859,9h3.8281l1.1172,3.4707&#xA;&#x9;c0.1273,0.3943,0.5501,0.6107,0.9443,0.4834s0.6107-0.5501,0.4834-0.9443l0,0L10.9902,9H12.5c0.554,0,1-0.446,1-1s-0.446-1-1-1&#xA;&#x9;h-2.1523L9.7031,5H11c0.554,0,1-0.446,1-1s-0.446-1-1-1H4z M6.873,5H8.127l0.6445,2h-2.543L6.873,5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"pitch-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M4,2C3.4477,2,3,1.5523,3,1s0.4477-1,1-1s1,0.4477,1,1S4.5523,2,4,2z M10.5,8H9L8,5L7,3.25L8,3l2.3,1l0,0&#xA;&#x9;c0.2761,0.0994,0.5806-0.0439,0.68-0.32c0.0994-0.2761-0.0439-0.5806-0.32-0.68l0,0L8,2H6L4,3L3,4H1.47&#xA;&#x9;c-0.2761,0-0.5,0.2239-0.5,0.5S1.1939,5,1.47,5H4l1-1l1,2L4,7v3.5C4,10.7761,4.2239,11,4.5,11S5,10.7761,5,10.5V7.39L7,7l1,2h2.5&#xA;&#x9;C10.7761,9,11,8.7761,11,8.5S10.7761,8,10.5,8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"pitch-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M5,3C4.4477,3,4,2.5523,4,2s0.4477-1,1-1s1,0.4477,1,1S5.5523,3,5,3z M12.5,10H10L9,7L8,5.25L9,5l2.3,1l0,0&#xA;&#x9;c0.2761,0.1105,0.5895-0.0239,0.7-0.3S11.9761,5.1105,11.7,5l0,0L9,4H7L5,5L4,6H2.5C2.2239,6,2,6.2239,2,6.5S2.2239,7,2.5,7H5l1-1&#xA;&#x9;l1,2l-2,2v3.5C5,13.7761,5.2239,14,5.5,14S6,13.7761,6,13.5v-3.11L8,9l1,2h3.5c0.2761,0,0.5-0.2239,0.5-0.5S12.7761,10,12.5,10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"place-of-worship-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.52,0L4,2v1h3V2L5.52,0z M4,4L2,5v5h7V5L7,4H4z M11,5.5V10h-1V5.5C10,5.2239,10.2239,5,10.5,5S11,5.2239,11,5.5z M1,5.5&#xA;&#x9;V10H0V5.5C0,5.2239,0.2239,5,0.5,5S1,5.2239,1,5.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"place-of-worship-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path9064\\" d=\\"M7.5,0l-2,2v2h4V2&#xA;&#x9;L7.5,0z M5.5,4.5L4,6h7L9.5,4.5H5.5z M2,6.5c-0.5523,0-1,0.4477-1,1V13h2V7.5C3,6.9477,2.5523,6.5,2,6.5z M4,6.5V13h7V6.5H4z&#xA;&#x9; M13,6.5c-0.5523,0-1,0.4477-1,1V13h2V7.5C14,6.9477,13.5523,6.5,13,6.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"playground-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M1,0.79c0.1286-0.5371,0.6683-0.8683,1.2054-0.7397S3.0736,0.7186,2.945,1.2557C2.8183,1.7849,2.2917,2.1156,1.76,2&#xA;&#x9;C1.2203,1.8826,0.878,1.35,0.9954,0.8103C0.9968,0.8035,0.9984,0.7968,1,0.79z M10.85,8.16L10.85,8.16l-2-2l0,0&#xA;&#x9;C8.76,6.0612,8.6336,6.0034,8.5,6H8.37l0,0L6.5,6.55V4l0,0C6.746,4.0083,6.96,3.8328,7,3.59C7.0558,3.3225,6.8866,3.0598,6.62,3H6.5&#xA;&#x9;V0H6.28v3L1.82,3.55l0,0C1.4201,3.6111,1.0965,3.9072,1,4.3C0.9688,4.4416,0.9688,4.5884,1,4.73l0,0l0.81,3.13l0,0&#xA;&#x9;c0.1012,0.3354,0.3706,0.5933,0.71,0.68c0.1513,0.0357,0.3087,0.0357,0.46,0H3l3.29-0.89v1.62l-3,0.74l0,0&#xA;&#x9;c-0.2761,0.0856-0.4306,0.3789-0.345,0.655c0.0856,0.2761,0.3789,0.4306,0.655,0.345c0.0566,0.0051,0.1134,0.0051,0.17,0l4-1&#xA;&#x9;c0.2761-0.0828,0.4328-0.3739,0.35-0.65C8.0372,9.0839,7.7461,8.9272,7.47,9.01L7.27,9L6.5,9.22V7.58l1.83-0.51l1.81,1.78l0,0&#xA;&#x9;c0.1758,0.213,0.4909,0.2432,0.7039,0.0674c0.213-0.1758,0.2432-0.4909,0.0674-0.7039C10.8956,8.1945,10.8784,8.1766,10.86,8.16&#xA;&#x9;H10.85z M6.28,6.61L4.21,7.07L3.5,4.33L6.28,4V6.61z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"playground-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M2,1.15c0.2091-0.8016,1.0284-1.2819,1.83-1.0729s1.2819,1.0284,1.0729,1.83C4.7026,2.6752,3.9386,3.1542,3.16,3&#xA;&#x9;C2.3474,2.839,1.8191,2.0498,1.98,1.2371C1.9858,1.2079,1.9925,1.1788,2,1.15z M13,12.32c0.1032,0.5426-0.2531,1.066-0.7956,1.1692&#xA;&#x9;c-0.0015,0.0003-0.0029,0.0006-0.0044,0.0008c-0.4252,0.086-0.8574-0.1119-1.07-0.49l0,0L9.45,9.63L8,9.92L7.78,10H7.72v2.15&#xA;&#x9;L8.34,12h0.14c0.2871,0.0054,0.5155,0.2425,0.5101,0.5297C8.9862,12.7361,8.8606,12.9207,8.67,13l-5,1l0,0&#xA;&#x9;c-0.0563,0.0095-0.1137,0.0095-0.17,0c-0.2872,0-0.52-0.2328-0.52-0.52c0-0.2099,0.1262-0.3993,0.32-0.48l0,0l4.15-0.83V10&#xA;&#x9;l-3.22,0.58l0,0c-0.164,0.0423-0.336,0.0423-0.5,0c-0.3394-0.0867-0.6088-0.3446-0.71-0.68H3L2,5.83l0,0&#xA;&#x9;C1.9688,5.6884,1.9688,5.5416,2,5.4c0.0936-0.387,0.4078-0.6815,0.8-0.75l0,0l4.7-0.52V0h0.22v4.1h0.06L8,4.08L8.4,4h0.21&#xA;&#x9;c0.2673,0.0643,0.4326,0.3323,0.37,0.6C8.9361,4.835,8.729,5.0041,8.49,5L8,5.08H7.78H7.72v2.86h0.06L8,7.88l1.81-0.36l0,0l0,0&#xA;&#x9;c0.4275-0.0352,0.8299,0.2062,1,0.6l0,0l2,3.94l0,0C12.887,12.1358,12.9511,12.2236,13,12.32z M7.5,5.13L5,5.4l0.74,2.94L7.5,8V5.13&#xA;&#x9;z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"police-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"circle4929\\" d=\\"M4.5,0.5l0.5,1h3&#xA;&#x9;l0.5-1H4.5z M5,2v1c0,0.8284,0.6716,1.5,1.5,1.5S8,3.8284,8,3V2H5z M1.75,3C1,3,1,3.75,1,3.75v3&#xA;&#x9;c0.0006,0.506,0.4918,0.8663,0.9746,0.7148L4,6.8262V10l4-5H5c0,0-0.1945,0-0.4238,0.0723L2.5,5.7266V3.75C2.5,3.75,2.5,3,1.75,3z&#xA;&#x9; M8.7715,5.3887L5,10h4V6C9,5.7648,8.9064,5.5591,8.7715,5.3887z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"police-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect4718\\" d=\\"M5.5,1L6,2h5l0.5-1H5.5z M6,2.5v1.25c0,0,0,2.75,2.5,2.75S11,3.75,11,3.75V2.5H6z M1.9844,3.9863&#xA;&#x9;C1.4329,3.9949,0.9924,4.4485,1,5v4c-0.0001,0.6398,0.5922,1.1152,1.2168,0.9766L5,9.3574V14l5.8789-6.9297&#xA;&#x9;C10.7391,7.0294,10.5947,7,10.4414,7H6.5L3,7.7539V5C3.0077,4.4362,2.5481,3.9775,1.9844,3.9863z M11.748,7.7109L6.4121,14H12&#xA;&#x9;V8.5586C12,8.2451,11.9061,7.9548,11.748,7.7109z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"post-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10,5.5V9c0,0.5523-0.4477,1-1,1H2c-0.5523,0-1-0.4477-1-1V5.5C1,5.2239,1.2239,5,1.5,5c0.0692-0.0152,0.1408-0.0152,0.21,0&#xA;&#x9;l0,0L5.5,7l3.8-2l0,0c0.066-0.0138,0.134-0.0138,0.2,0C9.7761,5,10,5.2239,10,5.5z M1.25,2.92L1.25,2.92L1.33,3L5.5,5l4.19-2l0,0&#xA;&#x9;h0.06l0,0C9.9296,2.9019,10.0292,2.7025,10,2.5C10,2.2239,9.7761,2,9.5,2h-8C1.2239,2,1,2.2239,1,2.5&#xA;&#x9;C1.0026,2.6745,1.0978,2.8345,1.25,2.92z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"post-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,6.5V12c0,0.5523-0.4477,1-1,1H2c-0.5523,0-1-0.4477-1-1V6.5C1,6.2239,1.2239,6,1.5,6&#xA;&#x9;c0.0692-0.0152,0.1408-0.0152,0.21,0l0,0l5.79,4l5.8-4l0,0c0.066-0.0138,0.134-0.0138,0.2,0C13.7761,6,14,6.2239,14,6.5z M1.25,3.92&#xA;&#x9;L1.25,3.92L1.33,4L7.5,8l6.19-4l0,0h0.06l0,0c0.1796-0.0981,0.2792-0.2975,0.25-0.5C14,3.2239,13.7761,3,13.5,3h-12&#xA;&#x9;C1.2239,3,1,3.2239,1,3.5C1.0026,3.6745,1.0978,3.8345,1.25,3.92z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"prison-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect3607\\" d=\\"M2,1v9h7V1H2z M3,2h1v3H3V2z M5,2h1v3H5V2z M7,2h1v2H7V2z M7.5,5C7.7761,5,8,5.2239,8,5.5S7.7761,6,7.5,6&#xA;&#x9;S7,5.7761,7,5.5S7.2239,5,7.5,5z M3,6h1v3H3V6z M5,6h1v3H5V6z M7,7h1v2H7V7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"prison-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect3607\\" d=\\"M3.5,1v13H12V1H3.5z M9.5,2H11v3.5H9.5V2z M4.5,2.0547H6V7H4.5V2.0547z M7,2.0547h1.5V7H7V2.0547z M10.25,6.5&#xA;&#x9;C10.6642,6.5,11,6.8358,11,7.25S10.6642,8,10.25,8l0,0C9.8358,8,9.5,7.6642,9.5,7.25l0,0C9.5,6.8358,9.8358,6.5,10.25,6.5z M7,8&#xA;&#x9;h1.4727L8.5,13H7.0273L7,8z M4.5,8.166H6V13H4.5V8.166z M9.5,9H11v4H9.5V9z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"rail-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9,10.5C9,10.7761,8.7761,11,8.5,11c-0.1824-0.0029-0.3481-0.107-0.43-0.27l0,0L7.69,10H3.31l-0.37,0.74l0,0&#xA;&#x9;C2.8537,10.9023,2.6838,11.0027,2.5,11C2.2239,11,2,10.7761,2,10.5c0.0022-0.0847,0.0263-0.1674,0.07-0.24l0,0l1-2l0,0&#xA;&#x9;C3.1546,8.1008,3.3198,8.001,3.5,8c0.2751-0.0235,0.5172,0.1805,0.5407,0.4556C4.0479,8.5392,4.0339,8.6233,4,8.7L3.81,9h3.38L7,8.7&#xA;&#x9;C6.8991,8.443,7.0256,8.1528,7.2826,8.0518C7.514,7.9609,7.7771,8.0539,7.9,8.27l0,0l1,2l0,0C8.9527,10.3367,8.9872,10.416,9,10.5z&#xA;&#x9; M8,0H3C2.4477,0,2,0.4477,2,1v5c0,0.5523,0.4477,1,1,1h5c0.5523,0,1-0.4477,1-1V1C9,0.4477,8.5523,0,8,0z M3.5,6&#xA;&#x9;C3.2239,6,3,5.7761,3,5.5S3.2239,5,3.5,5S4,5.2239,4,5.5S3.7761,6,3.5,6z M3.5,4C3.2239,4,3,3.7761,3,3.5v-2&#xA;&#x9;C3,1.2239,3.2239,1,3.5,1h1.79v3H3.5z M7.5,6C7.2239,6,7,5.7761,7,5.5S7.2239,5,7.5,5S8,5.2239,8,5.5S7.7761,6,7.5,6z M8,3.5&#xA;&#x9;C8,3.7761,7.7761,4,7.5,4H5.69V1H7.5C7.7761,1,8,1.2239,8,1.5V3.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" version=\\"1.1\\" id=\\"rail-15\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M 3 1 C 2.4477 1 2 1.4477 2 2 L 2 10 C 2 10.5523 2.4477 11 3 11 L 12 11 C 12.5523 11 13 10.5523 13 10 L 13 2 C 13 1.4477 12.5523 1 12 1 L 3 1 z M 5.75 1.5 L 5.7597656 1.5 L 9.2597656 1.5 C 9.3978656 1.5 9.5097656 1.6119 9.5097656 1.75 C 9.5097656 1.8881 9.3978656 2 9.2597656 2 L 5.75 2 C 5.6119 2 5.5 1.8881 5.5 1.75 C 5.5 1.6119 5.6119 1.5 5.75 1.5 z M 3.5 3 L 7 3 L 7 7 L 3.5 7 C 3.2239 7 3 6.7761 3 6.5 L 3 3.5 C 3 3.2239 3.2239 3 3.5 3 z M 8 3 L 11.5 3 C 11.7761 3 12 3.2239 12 3.5 L 12 6.5 C 12 6.7761 11.7761 7 11.5 7 L 8 7 L 8 3 z M 5 8 C 5.5523 8 6 8.4477 6 9 C 6 9.5523 5.5523 10 5 10 C 4.4477 10 4 9.5523 4 9 C 4 8.4477 4.4477 8 5 8 z M 10 8 C 10.5523 8 11 8.4477 11 9 C 11 9.5523 10.5523 10 10 10 C 9.4477 10 9 9.5523 9 9 C 9 8.4477 9.4477 8 10 8 z M 10.445312 11.994141 C 10.380597 11.999652 10.314981 12.018581 10.253906 12.050781 C 10.030606 12.168381 9.9302313 12.433922 10.019531 12.669922 L 10.189453 13 L 4.8105469 13 L 4.9394531 12.730469 C 5.0371531 12.472169 4.9067375 12.183637 4.6484375 12.085938 C 4.4124375 11.996738 4.1468969 12.097113 4.0292969 12.320312 L 3.0292969 14.320312 C 3.0080969 14.377912 2.9986 14.4387 3 14.5 C 3 14.7761 3.2239 15 3.5 15 C 3.6802 14.999 3.8450875 14.899434 3.9296875 14.740234 L 3.9296875 14.689453 L 4 14.689453 L 4.3105469 14 L 10.689453 14 L 11 14.689453 L 11 14.740234 C 11.0846 14.899434 11.249488 14.999 11.429688 15 C 11.705787 15 11.929688 14.7761 11.929688 14.5 C 11.949587 14.4212 11.949587 14.338566 11.929688 14.259766 L 10.929688 12.259766 C 10.833163 12.076541 10.639459 11.977608 10.445312 11.994141 z \\" id=\\"path3\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"rail-light-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path14245\\" d=\\"M4,0&#xA;&#x9;C3.5,0,3.5,0.5,3.5,0.5S3.5,1,4,1h1v0.9707L4,2c0,0-1,0-1,1v3c0,2,2,2,2,2h1c0,0,2,0,2-2V3c0-1-1-1-1-1H6V1h1c0.5,0,0.5-0.5,0.5-0.5&#xA;&#x9;S7.5,0,7,0H4z M5.5,3L7,3.5V5H5.5H4V3.5L5.5,3z M5.5,6C5.777,6,6,6.223,6,6.5S5.777,7,5.5,7S5,6.777,5,6.5S5.223,6,5.5,6z&#xA;&#x9; M2.834,8.5L2,11h1.5l0.334-1h3.332L7.5,11H9L8.166,8.5H6.668L6.834,9H4.166l0.166-0.5H2.834z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"rail-light-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path14245\\" d=\\"M5.5,0C5,0,5,0.5,5,0.5v1C5,1.777,5.223,2,5.5,2S6,1.777,6,1.5V1h1v2H6c0,0-2,0-2,2v3c0,3,3,3,3,3h1&#xA;&#x9;c0,0,3,0,3-3V5c0-2-2-2-2-2H8V1h1v0.5C9,1.777,9.223,2,9.5,2S10,1.777,10,1.5v-1C10,0,9.5,0,9.5,0H5.5z M7.5,4l2.0449,0.7734L10,6.5&#xA;&#x9;C10.1316,7,9.5,7,9.5,7h-4c0,0-0.6316,0-0.5-0.5l0.4551-1.7266L7.5,4z M7.5,8C7.7761,8,8,8.2239,8,8.5S7.7761,9,7.5,9&#xA;&#x9;S7,8.7761,7,8.5S7.2239,8,7.5,8z M4.125,12L3,15h1.5l0.375-1h5.25l0.375,1H12l-1.125-3h-1.5l0.375,1h-4.5l0.375-1H4.125z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"rail-metro-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path14200\\" d=\\"M3.5,0C3,0,3,0.5,3,0.5L2,5v1c0,1.0244,1,1,1,1h5c0,0,1,0,1-1V5L8,0.5C8,0.5,8,0,7.5,0H3.5z M4,1h3l0.5,3h-4&#xA;&#x9;L4,1z M3.5,5C3.7761,5,4,5.2239,4,5.5S3.7761,6,3.5,6S3,5.7761,3,5.5S3.2239,5,3.5,5z M5.25,5h0.5C5.8885,5,6,5.1115,6,5.25&#xA;&#x9;S5.8885,5.5,5.75,5.5h-0.5C5.1115,5.5,5,5.3885,5,5.25S5.1115,5,5.25,5z M7.5,5C7.7761,5,8,5.2239,8,5.5S7.7761,6,7.5,6&#xA;&#x9;S7,5.7761,7,5.5S7.2239,5,7.5,5z M3,8l-1,3h1.5l0.334-1h3.332L7.5,11H9L8,8H6.5l0.334,1H4.166L4.5,8H3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"rail-metro-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path5258\\" d=\\"M5.5,0c0,0-0.75,0-1,1L3,6.5V10c0,1,1,1,1,1h7c0,0,1,0,1-1V6.5L10.5,1c-0.2727-1-1-1-1-1H5.5z M6.5,1.5h2&#xA;&#x9;c0,0,0.5357,0,0.75,1L10,6c0.2146,1.0017-1,1-1,1H6c0,0-1.2146,0.0017-1-1l0.75-3.5C5.9643,1.5,6.5,1.5,6.5,1.5z M5,8&#xA;&#x9;c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1S4,9.5523,4,9S4.4477,8,5,8z M6.75,8h1.5C8.3885,8,8.5,8.1115,8.5,8.25S8.3885,8.5,8.25,8.5&#xA;&#x9;h-1.5C6.6115,8.5,6.5,8.3885,6.5,8.25S6.6115,8,6.75,8z M10,8c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1S9,9.5523,9,9S9.4477,8,10,8z&#xA;&#x9; M4.125,12L3,15h1.5l0.375-1h5.25l0.375,1H12l-1.125-3h-1.5l0.375,1h-4.5l0.375-1H4.125z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"ranger-station-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect4911\\" d=\\"M6.334,0L5,1v3L1,6.0547V10h3V7&#xA;&#x9;h3v3h3V6.0547L6,4V2.25L6.334,2l1.332,1L9,2V0L7.666,1L6.334,0z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"ranger-station-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect4911\\" d=\\"M9,0.5l-2,1v3.7734L2,8v6h4v-4h3&#xA;&#x9;v4h4V8L8,5.2734V4l1-0.5l2,1l2-1v-3l-2,1L9,0.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"recycling-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.5,8.5C8.953,9.019,7.84,8.935,7,9v1L4.5,8.5L7,7v1h1c0.634,0,0.83,0,1.054-0.127&#xA;&#x9;c0.3524-0.1763,0.5267-0.5807,0.413-0.958C9.3824,6.5569,9.8667,6.4902,9.952,6.8C10.1235,7.4067,9.9502,8.0586,9.5,8.5z&#xA;&#x9; M1.9482,5.0922C1.9479,5.0928,1.9473,5.0934,1.947,5.094c-0.4,0.743-1.065,1.637-0.921,2.377&#xA;&#x9;c0.1311,0.6165,0.5882,1.1123,1.192,1.293c0.3722,0.1203,0.4663-0.3954,0.161-0.472C2.0002,8.1852,1.753,7.8215,1.793,7.43&#xA;&#x9;c0.012-0.258,0.122-0.42,0.461-0.956c0.134-0.211,0.309-0.485,0.537-0.843c0.0003-0.0004,0.0005-0.0008,0.0008-0.0012L3.635,6.167&#xA;&#x9;l0.078-2.914L1.105,4.555L1.9482,5.0922z M4.884,1.914c0.2504-0.3036,0.6828-0.3834,1.025-0.189C6.14,1.84,6.245,2.006,6.598,2.532&#xA;&#x9;c0.14,0.208,0.32,0.479,0.555,0.832l0.0001,0.0001L6.322,3.919l2.636,1.246L8.817,2.253L7.9843,2.8091&#xA;&#x9;C7.4644,2.1472,6.9173,1.1786,6.188,1.014C5.5701,0.8809,4.9288,1.0965,4.517,1.576C4.2529,1.9137,4.7157,2.1216,4.884,1.914z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"recycling-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M2.4556,8.6134C2.118,9.2112,1.501,10.3021,2.593,11.0312c0.3432,0.2268,0.7275,0.3836,1.131,0.4614&#xA;&#x9;C4.0314,11.5382,4.0466,12.0111,3.6855,12c-0.3849-0.0193-2.2596-0.1934-2.5606-1.5995c-0.1556-0.8213,0.0204-1.5571,0.504-2.3556&#xA;&#x9;L2.3263,6.812L1.0196,6.0688L4.5,4v4L3.1941,7.3057L2.4556,8.6134z M6.7,2.034c1.155-0.628,1.823,0.43,2.191,1.007l0.8059,1.2631&#xA;&#x9;L8.431,5.112L12,6.986L11.803,2.96l-1.2639,0.8066L9.779,2.578C9.2572,1.8321,8.875,1.2812,7.944,1.033&#xA;&#x9;C6.307,0.7203,5.3007,2.6194,5.311,2.607c-0.1639,0.2871,0.2156,0.5399,0.451,0.21C6.0202,2.4969,6.339,2.2309,6.7,2.034z&#xA;&#x9; M13.294,8.221c-0.0877-0.1897-0.5487-0.1413-0.419,0.267c0.1312,0.3892,0.1845,0.8003,0.157,1.21C12.939,11.01,11.684,11,11,11H9.5&#xA;&#x9;V9.5l-3.5,2l3.488,2.025L9.4926,12H11c0.8906,0.0153,1.5999-0.1759,2.2-0.713C14.4,10.226,13.294,8.221,13.294,8.221z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\" id=\\"religious-buddhist-11\\">\\n  <path d=\\"M11.0016,5.8008v-0.5H9.9895C9.93427,4.28235,9.53269,3.31335,8.8513,2.5544l0.8271-0.8271l-0.354-0.3541L8.5012,2.2&#xA;&#x9;c-0.75994-0.68207-1.73031-1.08369-2.75-1.1382V0h-0.5v1.0622c-0.99761,0.05474-1.94816,0.442-2.7,1.1l-0.876-0.886L1.32,1.6282&#xA;&#x9;L2.19,2.5C1.48299,3.26753,1.06626,4.25789,1.0118,5.3H0v0.5h1.0121C1.06715,6.81867,1.46863,7.78795,2.15,8.5472L1.3229,9.3743&#xA;&#x9;l0.3543,0.3541L2.5,8.9013c0.75994,0.68207,1.73031,1.08369,2.75,1.1382v0.9621h0.5v-0.9621&#xA;&#x9;C6.77029,9.98353,7.74071,9.58012,8.5,8.8963l0.82,0.8311l0.3551-0.3521L8.8553,8.5412c0.67858-0.75782,1.07864-1.72428,1.1342-2.74&#xA;&#x9;h1.0121V5.8008z M9.5624,5.3008H6.1009l2.4483-2.4444C9.15109,3.53478,9.50787,4.39554,9.5624,5.3008z M8.1952,2.5L5.7508,4.9467&#xA;&#x9;V1.4892C6.65579,1.54295,7.51655,1.89889,8.1952,2.5z M5.2508,1.4892v3.4L2.85,2.4614C3.5221,1.88298,4.36561,1.5414,5.2508,1.4892z&#xA;&#x9; M2.4914,2.8092l2.46,2.4914H1.4392c0.05523-0.92636,0.42665-1.80572,1.0522-2.4912L2.4914,2.8092z M1.4392,5.8008h3.4615&#xA;&#x9;L2.4524,8.2452C1.85051,7.56682,1.49373,6.70606,1.4392,5.8008z M2.8064,8.6008l2.4444-2.4469v3.4575&#xA;&#x9;C4.34592,9.55774,3.4852,9.20206,2.8064,8.6013V8.6008z M5.7508,9.6108V6.1109l2.45,2.4814&#xA;&#x9;c-0.67905,0.60519-1.54206,0.96416-2.45,1.0191V9.6108z M8.5508,8.2366L6.1479,5.8008h3.4145&#xA;&#x9;C9.5079,6.70256,9.15336,7.56019,8.5552,8.2372h-0.004L8.5508,8.2366z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\" id=\\"religious-buddhist-15\\">\\n  <path d=\\"M13.4978,6.9989h-0.5329c-0.09997-1.10708-0.53528-2.15731-1.2478-3.0105l0.378-0.3784&#xA;&#x9;c0.19605-0.19447,0.19733-0.51105,0.00286-0.7071C11.90698,2.71037,11.59733,2.70518,11.4,2.8912l0,0l-0.0123,0.0123L11.01,3.2815&#xA;&#x9;c-0.85331-0.71298-1.90385-1.14864-3.0113-1.2488V1.5c0-0.27614-0.22386-0.5-0.5-0.5s-0.5,0.22386-0.5,0.5v0.5327&#xA;&#x9;C5.8916,2.13306,4.84144,2.56871,3.9884,3.2815L3.61,2.9C3.41007,2.70952,3.09358,2.71717,2.9031,2.9171&#xA;&#x9;c-0.184,0.19312-0.184,0.49668,0,0.6898l0.3784,0.3775C2.56787,4.83856,2.13216,5.89031,2.0327,6.9989H1.5&#xA;&#x9;c-0.27614,0-0.5,0.22386-0.5,0.5s0.22386,0.5,0.5,0.5h0.5327c0.09987,1.10695,0.535,2.15711,1.2473,3.0103l-0.3779,0.3779&#xA;&#x9;c-0.19538,0.19514-0.19557,0.51173-0.00043,0.70711c0.19053,0.19076,0.49798,0.19611,0.69503,0.01209L3.609,12.094l0.3779-0.3779&#xA;&#x9;c0.8533,0.71312,1.90395,1.1488,3.0115,1.2488v0.5329c0,0.27614,0.22386,0.5,0.5,0.5s0.5-0.22386,0.5-0.5v-0.5329&#xA;&#x9;c1.10719-0.10026,2.15744-0.53592,3.0105-1.2488l0.3779,0.3779c0.19514,0.19538,0.51173,0.19557,0.70711,0.00043&#xA;&#x9;c0.19076-0.19053,0.19611-0.49798,0.01209-0.69503l-0.0123-0.0123l0,0l-0.3779-0.3779c0.71283-0.8531,1.14848-1.90333,1.2488-3.0105&#xA;&#x9;h0.5329c0.27609-0.00544,0.49549-0.23366,0.49006-0.50975C13.98227,7.22064,13.76611,7.00435,13.4978,6.9989z M7.9987,3.0505&#xA;&#x9;c0.83871,0.09248,1.63383,0.42154,2.2926,0.9488l-2.15,2.15c-0.04663-0.0218-0.09436-0.04116-0.143-0.058V3.0505H7.9987z&#xA;&#x9; M6.9987,3.0505V6.091c-0.04864,0.01684-0.09637,0.0362-0.143,0.058l-2.15-2.15c0.65897-0.52726,1.45431-0.85622,2.2932-0.9485&#xA;&#x9;H6.9987z M3.9987,4.7062l2.15,2.15c-0.0218,0.04663-0.04116,0.09436-0.058,0.143H3.0505&#xA;&#x9;c0.09243-0.83886,0.42154-1.63413,0.9489-2.293L3.9987,4.7062z M3.0505,7.9987H6.091c0.01687,0.04863,0.03623,0.09636,0.058,0.143&#xA;&#x9;l-2.15,2.15C3.47173,9.63281,3.14276,8.83753,3.0505,7.9987z M6.9989,11.9471c-0.83871-0.09248-1.63383-0.42154-2.2926-0.9488&#xA;&#x9;l2.15-2.15c0.04663,0.0218,0.09436,0.04116,0.143,0.058v3.0405L6.9989,11.9471z M7.9989,11.9471V8.9066&#xA;&#x9;c0.04864-0.01683,0.09638-0.03619,0.143-0.058l2.15,2.15c-0.65895,0.5273-1.4543,0.85627-2.2932,0.9485H7.9989z M10.9989,10.2914&#xA;&#x9;l-2.15-2.15c0.02177-0.04664,0.04113-0.09437,0.058-0.143h3.0415c-0.09276,0.83901-0.42232,1.6343-0.9502,2.293H10.9989z&#xA;&#x9; M8.9066,6.9989c-0.01684-0.04864-0.0362-0.09637-0.058-0.143l2.15-2.15c0.52726,0.65877,0.85632,1.45389,0.9488,2.2926H8.9066&#xA;&#x9;V6.9989z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"religious-christian-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect3338\\" d=\\"M4.5,0v3H2v2h2.5v6h2V5H9V3H6.5V0H4.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"religious-christian-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect3338\\" d=\\"M6,0.9552V4H3v3h3v8h3V7h3V4H9V1&#xA;&#x9;c0-1-0.9776-1-0.9776-1H6.9887C6.9887,0,6,0,6,0.9552z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"religious-jewish-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M11,8H7.1l-1.6,3L3.9,8H0l1.95-2.5L0,3h3.9l1.6-3l1.6,3H11L9.05,5.5L11,8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"religious-jewish-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M15,12H9.78L7.5,15l-2.26-3H0l2.7-4L0,4h5.3l2.2-4l2.34,4H15l-2.56,4L15,12z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"religious-muslim-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path16908\\" d=\\"M4.9,0C2.2,0,0,2.2,0,4.9&#xA;&#x9;s2.2,4.9,4.9,4.9c0.9,0,1.7-0.2,2.4-0.6H6.7c-2.4,0-4.3-1.9-4.3-4.3s1.9-4.3,4.3-4.3h0.6C6.5,0.2,5.8,0,4.9,0z M8.5,2L7.6845,3.7&#xA;&#x9;L6,4l1,1.5L6.5,7l2-1l2,1L10,5.5L11,4L9.5,3.7L8.5,2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"religious-muslim-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path7552-2-1\\" d=\\"M6.7941,0C3,0,0,3,0,6.7941&#xA;&#x9;s3,6.7941,6.7941,6.7941c2.1176,0,4.4118-0.7059,5.6471-2.2941C11.6471,11.8235,10.1471,12.4412,9,12.4412&#xA;&#x9;c-2.9118,0-5.1176-2.9118-5.1176-5.8235S6.0882,1.1471,9,1.1471c1.0588,0,2.5588,0.6176,3.4412,1.1471&#xA;&#x9;C11.2059,0.7059,8.9118,0,6.7941,0z M11,3l-1,2.5H7L9.5,7l-1,3L11,8.5l2.5,1.5l-1-3L15,5.5h-3L11,3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"residential-community-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8.8,8C9.5,7.9,10,7.2,10,6.5C10,5.7,9.3,5,8.5,5S7,5.7,7,6.5C7,7.2,7.5,7.9,8.2,8v1.5H6.4H6V1H2v8.5H1V10h1h4.4h1.9h0.5H10&#xA;&#x9;V9.5H8.8V8z M3,2h2v1H3V2z M3,4h2v1H3V4z M3,6h2v1H3V6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"residential-community-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11.8,13.5V11c0.7-0.1,1.2-0.7,1.2-1.5S12.3,8,11.5,8S10,8.7,10,9.5c0,0.7,0.5,1.4,1.2,1.5v2.5H7V2H2v11.5H1V14h13v-0.5&#xA;&#x9;H11.8z M6,11H3v-1h3V11z M6,9H3V8h3V9z M6,7H3V6h3V7z M6,5H3V4h3V5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"restaurant-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path11193\\" d=\\"M2.25,0l-0.5,3.5C1.6793,3.995,2.9908,4.9001,3,5.5V11h1V5.5c0-0.6,1.3207-1.505,1.25-2L4.75,0h-0.5&#xA;&#x9;L4.5,2.75l-0.75,0.5V0h-0.5v3.25L2.5,2.75L2.75,0H2.25z M9,0C7.5,0,7.0064,1.7242,7,3v3h1v5h1V0z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"restaurant-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path11774\\" d=\\"M3.5,0l-1,5.5c-0.1464,0.805,1.7815,1.181,1.75,2L4,14c-0.0384,0.9993,1,1,1,1s1.0384-0.0007,1-1L5.75,7.5&#xA;&#x9;c-0.0314-0.8176,1.7334-1.1808,1.75-2L6.5,0H6l0.25,4L5.5,4.5L5.25,0h-0.5L4.5,4.5L3.75,4L4,0H3.5z M12,0&#xA;&#x9;c-0.7364,0-1.9642,0.6549-2.4551,1.6367C9.1358,2.3731,9,4.0182,9,5v2.5c0,0.8182,1.0909,1,1.5,1L10,14c-0.0905,0.9959,1,1,1,1&#xA;&#x9;s1,0,1-1V0z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"restaurant-noodle-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <g id=\\"restaurant-noodle-11\\">\\n    <path d=\\"M3.4688,8.81,1,6.625V6h9v.625L7.5156,8.8259ZM2.9934,1.7137a.3324.3324,0,0,0-.6648,0v.88l-1.0979.24a.25.25,0,0,0,.0928.4913L2.3286,3.148V3.58L1.25,3.6019a.25.25,0,1,0,0,.5l1.0786.0221V5.3249h.6648ZM9.5,3.3519l-.4912.1932-4.1764.046V2.6652l4.0543-.7879.5192.1141A.5.5,0,1,0,9.22,1.0088L8.7751,1.28l-3.9427.8471V1.7137a.3324.3324,0,0,0-.6648,0v.5575l-.6259.1368v.4788l.6259-.11v.8208L3.5417,3.61v.4863l5.4566.0394L9.5,4.3519a.5.5,0,1,0,0-1ZM7.5313,9.7435H3.4531V9.988H7.5313Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"restaurant-noodle-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <g id=\\"restaurant-noodle-15\\">\\n    <path d=\\"M4.457,11.9892,1,8V7H14V8l-3.4961,3.9891ZM3.9882,2.5a.5.5,0,0,0-1,0v.5671l-1.7969.3675a.25.25,0,1,0,.094.4911l1.7029-.2776v.5662l-1.75.0357a.25.25,0,0,0,0,.5l1.75.0357V5.998h1Zm9.5,1.5-7.5.2625V2.9951l7.594-1.0737a.5.5,0,0,0-.1881-.9822L5.9792,2.4555a.4963.4963,0,0,0-.991.0445v.2276l-.493.1009V3.18l.493-.08V4.2974l-.493.01v.4608L13.4882,5a.5.5,0,0,0,0-1ZM10,13H5v.5757h5Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"restaurant-pizza-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <g id=\\"restaurant-pizza-11\\">\\n    <path d=\\"M1.9366,6.5067,1.0224,6.1A10.038,10.038,0,0,1,6.1,1.0224l.4064.9144h0a9.0333,9.0333,0,0,0-4.57,4.57ZM9.62,9.9471,2.897,6.9594A8.03,8.03,0,0,1,6.9594,2.897h0l.391.88a.7476.7476,0,0,0-.6288.7318.7578.7578,0,0,0,.7578.7578.7424.7424,0,0,0,.4578-.1694l2.01,4.5223A.2482.2482,0,0,1,9.62,9.9471ZM6.2524,6.4955a.75.75,0,1,0-.75.75A.75.75,0,0,0,6.2524,6.4955Zm1.9841,1.006a.74.74,0,1,0-.74.74A.74.74,0,0,0,8.2365,7.5015Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"restaurant-pizza-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <g id=\\"restaurant-pizza-15\\">\\n    <path d=\\"M2.3926,8.9315,1.0245,8.3148A14.0478,14.0478,0,0,1,8.7637.9994l.027.07L9.3022,2.4l-.0037.0013a12.6131,12.6131,0,0,0-6.9057,6.53Zm10.9631,4.96L3.42,9.413a11.6038,11.6038,0,0,1,6.354-6.0088l.0033-.0013.8163,2.1222c-.0281-.0022-.0521-.0162-.0808-.0162a1.062,1.062,0,1,0,.7642,1.7932L13.69,13.575A.2487.2487,0,0,1,13.3557,13.891Zm-4.93-5.3727a.9245.9245,0,1,0-.9245.9244A.9245.9245,0,0,0,8.4255,8.5183Zm3.0169,2.03a.9252.9252,0,1,0-.9252.9252A.9252.9252,0,0,0,11.4424,10.5478Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"restaurant-seafood-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <g id=\\"restaurant-seafood-11\\">\\n    <path d=\\"M8.478,7.1855H9.9722v.6H8.6465A3.3857,3.3857,0,0,1,9.6982,9.3311L9.13,9.5244A2.7584,2.7584,0,0,0,7.87,7.9763L6.3715,8.9914,4.53,8.9744,3.0376,8.0105A2.7482,2.7482,0,0,0,1.832,9.5244l-.5683-.1933A3.3857,3.3857,0,0,1,2.3154,7.7852H.99v-.6H2.4882a.539.539,0,0,1,.0727-.081l.7122-.6387-.7-1.1433c-.0146,0-.0246.0048-.04.0048,0,0-1.5334,0-1.5334-1.4445A4.9644,4.9644,0,0,1,2.5334.994L2,3V4H3l.9918-2.006v2a1.4231,1.4231,0,0,1-.7024,1.159l.5132.838.132-.1184a2.5517,2.5517,0,0,1,3.11,0l.116.1043.5148-.8381A1.4264,1.4264,0,0,1,7.0072,3.994v-2L8,4H9V3L8.4656.994A4.9682,4.9682,0,0,1,9.994,3.8828c0,1.4445-1.5284,1.4445-1.5284,1.4445-.0294,0-.05-.0083-.0777-.0094L7.6907,6.4531l.6729.6049A.5511.5511,0,0,1,8.478,7.1855Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"restaurant-seafood-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <g id=\\"restaurant-seafood-15\\">\\n    <path d=\\"M11.433,10.0889h2.49v.75H11.8525A4.81,4.81,0,0,1,13.4751,13.14l-.71.2422a4.01,4.01,0,0,0-1.74-2.1971,1.7775,1.7775,0,0,1-1.0352.4538L8.4374,12.9852H6.5188L4.9839,11.623a2.0222,2.0222,0,0,1-1.0929-.44,4.0093,4.0093,0,0,0-1.7426,2.1988l-.71-.2422a4.8146,4.8146,0,0,1,1.622-2.3007H.99v-.75H3.4839l.8633-.6764L3.3329,7.7567a2.2738,2.2738,0,0,1-.269.0293,2.0192,2.0192,0,0,1-2.0532-2.08c0-2.08,1.979-4.16,1.979-4.16L2.2531,5.9931l1.7255-.0012L4.9913,2.9852l0,2.9956a2.0936,2.0936,0,0,1-.6993,1.4121l.8536,1.3936L5.23,8.7208a3.8669,3.8669,0,0,1,4.4784,0l.0605.0474.869-1.4152a2.1177,2.1177,0,0,1-.6433-1.3722l0-2.9956.9836,3.0067,1.7547.0012-.7367-4.4466s1.982,2.08,1.982,4.16a2.0211,2.0211,0,0,1-2.0562,2.08,2.3125,2.3125,0,0,1-.3441-.0376L10.5676,9.3945l.8407.6593C11.4212,10.0638,11.4218,10.0782,11.433,10.0889Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"roadblock-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"g12530\\" d=\\"M5.5,0C2.4624,0,0,2.4624,0,5.5S2.4624,11,5.5,11S11,8.5376,11,5.5S8.5376,0,5.5,0z M2,4.5h7v2H2V4.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"roadblock-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"roadblock-24\\" d=\\"M7.5,0C3.3579,0,0,3.3579,0,7.5S3.3579,15,7.5,15S15,11.6421,15,7.5S11.6421,0,7.5,0z M3,6h9v3H3V6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"rocket-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path7143\\" d=\\"M9,1C7.488,1,5.4077,2.1459,4.0488,4H3C2.1988,4,1.8162,4.3675,1.5,5L1,6h1h1l1,1l1,1v1v1l1-0.5&#xA;&#x9;C6.6325,9.1838,7,8.8012,7,8V6.9512C8.8541,5.5923,10,3.512,10,2V1H9z M7.5,3C7.7761,3,8,3.2239,8,3.5S7.7761,4,7.5,4&#xA;&#x9;S7,3.7761,7,3.5S7.2239,3,7.5,3z M2.75,7.25L2.5,7.5C2,8,2,9,2,9s0.9448,0.0552,1.5-0.5l0.25-0.25L2.75,7.25z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"rocket-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path7143\\" d=\\"M12.5547,1c-2.1441,0-5.0211,1.471-6.9531,4H4&#xA;&#x9;C2.8427,5,2.1794,5.8638,1.7227,6.7773L1.1113,8h1.4434H4l1.5,1.5L7,11v1.4453v1.4434l1.2227-0.6113&#xA;&#x9;C9.1362,12.8206,10,12.1573,10,11V9.3984c2.529-1.932,4-4.809,4-6.9531V1H12.5547z M10,4c0.5523,0,1,0.4477,1,1l0,0&#xA;&#x9;c0,0.5523-0.4477,1-1,1l0,0C9.4477,6,9,5.5523,9,5v0C9,4.4477,9.4477,4,10,4L10,4z M3.5,10L3,10.5C2.2778,11.2222,2,13,2,13&#xA;&#x9;s1.698-0.198,2.5-1L5,11.5L3.5,10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"school-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8.5,9V8H10V6H7.5V5H10V3H8.5V2H10V1H6v9h4V9H8.5z M4,7H1V1h3V7z M4,8l-1.5,2L1,8H4z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"school-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11,13v-1h2v-1H9.5v-1H13V9h-2V8h2V7h-2V6h2V5H9.5V4H13V3h-2V2h2V1H8v13h5v-1H11z M6,11H2V1h4V11z M6,12l-2,2l-2-2H6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"scooter-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M1,9H3a.979.979,0,0,1-1,1A.979.979,0,0,1,1,9ZM9.753,4H9V3h.351a.282.282,0,0,0,.223-.148l.268-.536a.333.333,0,0,0,.009-.066A.25.25,0,0,0,9.6,2H9V1.5H6.25a.25.25,0,0,0,0,.5H8V4.5L5,7H4V5.5A.5.5,0,0,0,3.5,5H3V4H4.75A.25.25,0,0,0,5,3.75a.245.245,0,0,0-.223-.239V3.5L1.25,3A.25.25,0,0,0,1,3.25v.5A.25.25,0,0,0,1.25,4H2V5H1.5a.5.5,0,0,0-.5.5V8H6.172a1,1,0,0,0,.709-.294L7.3,7.292A1,1,0,0,1,8,7H9.752A.248.248,0,0,0,10,6.752v-2.5A.247.247,0,0,0,9.753,4ZM9,8a1,1,0,1,0,1,1A1,1,0,0,0,9,8Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"scooter-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M4.908,12a1.5,1.5,0,1,1-2.816,0Zm8.65-6C13.539,6,13,6,13,6V3h.351a.282.282,0,0,0,.223-.148l.268-.536a.334.334,0,0,0,.009-.066A.25.25,0,0,0,13.6,2H13V1.7a.215.215,0,0,0-.2-.2H9.25a.25.25,0,0,0,0,.5H12V6.6L7.6,10H6V7.5A.5.5,0,0,0,5.5,7H5V5H6.75a.25.25,0,0,0,0-.5L2.266,4.034c-.006,0-.01-.007-.016-.007a.25.25,0,0,0-.25.25V4.75A.25.25,0,0,0,2.25,5H3V7H2.5A1.538,1.538,0,0,0,1,8.5v2a.472.472,0,0,0,.442.5C1.461,11,7.5,11,7.5,11L10,10h3.5a.472.472,0,0,0,.5-.442C14,9.539,14,6.5,14,6.5A.472.472,0,0,0,13.558,6ZM12.5,11A1.5,1.5,0,1,0,14,12.5,1.538,1.538,0,0,0,12.5,11Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"shelter-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M4,5v3h6v2H2l0,0l0,0V5.67L1,6V4l9-3v2L4,5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"shelter-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M4,7v5h9.5v2H2l0,0l0,0V7.78L1,8.16V6l13-5v2.14L4,7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"shoe-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <g>\\n    <path d=\\"M7.5,5L5.8046,3.9827L4.8011,2.6763c-0.1514-0.1979-0.4349-0.2345-0.6275-0.083c-0.124,0.0961-0.1756,0.2449-0.164,0.3913&#xA;&#x9;&#x9;H4.0024V4H2V3.5C2,3.2238,1.7761,3,1.5,3S1,3.2238,1,3.5V4v1v1h3.5C5.5,6,6,7,7,7c1.0385,0,3,0,3,0l0.0038-0.5&#xA;&#x9;&#x9;C10.0038,5.9456,7.5,5,7.5,5z\\"/>\\n    <path d=\\"M5.5273,7.584C5.1172,7.3101,4.6514,7,4,7H1v1.4707C1,8.763,1.237,9,1.5293,9h1.9414C3.763,9,4,8.763,4,8.4707V8&#xA;&#x9;&#x9;c0.3486,0,0.6377,0.1924,0.9727,0.416C5.3828,8.6895,5.8486,9,6.5,9h3C9.7764,9,10,8.7764,10,8.5V8H6.5&#xA;&#x9;&#x9;C6.1514,8,5.8623,7.8071,5.5273,7.584z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"shoe-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <g>\\n    <path d=\\"M9.5,7C9.086,6.7652,8.6109,6.4041,8.1848,6.0524l-2.1743-2.831C5.8204,2.9729,5.4644,2.927,5.2227,3.1172&#xA;&#x9;&#x9;C5.0977,3.214,5.0262,3.3536,5.0097,3.5H5V5H3.2087C3.0751,5,2.9469,4.9469,2.8524,4.8524C2.8524,4.8524,2.5,4,2,4&#xA;&#x9;&#x9;S1.4997,4,1.4997,4C1.2238,4,1,4.2237,1,4.4997V6.25v0.634V9h5.5c1.5,0,2,1,3.5,1s4,0,4,0V9.5C14,8,10.5469,7.5938,9.5,7z\\"/>\\n    <path d=\\"M9.5,11c-0.6318,0-1.0469-0.207-1.5264-0.4473C7.4556,10.2939,6.8682,10,6,10H1.5004H1v1.4996&#xA;&#x9;&#x9;C1,11.7759,1.224,12,1.5004,12h3.9993C5.776,12,6,11.7759,6,11.4996V11c0.6318,0,1.0464,0.207,1.5264,0.4473&#xA;&#x9;&#x9;C8.0449,11.7061,8.6318,12,9.5,12h4c0.2764,0,0.5-0.2236,0.5-0.5V11H9.5z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"shop-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.6,4H8.49L8.2,2.27C8.0832,1.7303,7.6738,1.3015,7.14,1.16C6.8794,1.0669,6.6064,1.013,6.33,1H4.67&#xA;&#x9;c-0.2721,0.0075-0.5416,0.0547-0.8,0.14C3.3269,1.2815,2.9117,1.7199,2.8,2.27L2.51,4H1.34&#xA;&#x9;C1.1357,4.0055,0.9746,4.1755,0.9801,4.3798C0.9811,4.4173,0.9878,4.4545,1,4.49l1.21,4.7l0,0C2.3454,9.6605,2.7706,9.9885,3.26,10&#xA;&#x9;h4.48C8.2331,9.9928,8.6635,9.6639,8.8,9.19l0,0l1.2-4.7c0.0682-0.1926-0.0326-0.4041-0.2252-0.4723&#xA;&#x9;C9.7188,3.9978,9.6588,3.9918,9.6,4z M3.27,4l0.27-1.61c0.061-0.2688,0.2782-0.4741,0.55-0.52c0.1846-0.0591,0.3763-0.0928,0.57-0.1&#xA;&#x9;h1.67c0.1937,0.0072,0.3854,0.0409,0.57,0.1c0.2718,0.0459,0.489,0.2512,0.55,0.52L7.73,4H3.27z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"shop-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.33,6H11.5l-0.39-2.33c-0.1601-0.7182-0.7017-1.2905-1.41-1.49C9.3507,2.0676,8.9869,2.007,8.62,2H6.38&#xA;&#x9;C6.0131,2.007,5.6493,2.0676,5.3,2.18C4.5917,2.3795,4.0501,2.9518,3.89,3.67L3.5,6H1.67C1.3939,5.9983,1.1687,6.2208,1.167,6.497&#xA;&#x9;C1.1667,6.5489,1.1744,6.6005,1.19,6.65l1.88,6.3l0,0C3.2664,13.5746,3.8453,13.9996,4.5,14h6c0.651-0.0047,1.2247-0.4289,1.42-1.05&#xA;&#x9;l0,0l1.88-6.3c0.0829-0.2634-0.0635-0.5441-0.3269-0.627C13.4268,6.0084,13.3786,6.0007,13.33,6z M4.52,6l0.36-2.17&#xA;&#x9;c0.0807-0.3625,0.3736-0.6395,0.74-0.7C5.8663,3.0524,6.1219,3.0087,6.38,3h2.24c0.2614,0.0078,0.5205,0.0515,0.77,0.13&#xA;&#x9;c0.3664,0.0605,0.6593,0.3375,0.74,0.7L10.48,6h-6H4.52z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"skateboard-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"icon_concepts:_sports_leisure\\" d=\\"M8,6H3A2.0024,2.0024,0,0,1,1,4H2A1.001,1.001,0,0,0,3,5H8A1.001,1.001,0,0,0,9,4h1A2.0024,2.0024,0,0,1,8,6ZM8,7A1,1,0,1,0,9,8,1,1,0,0,0,8,7ZM3,7A1,1,0,1,0,4,8,1,1,0,0,0,3,7Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"skateboard-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"icon_concepts:_sports_leisure\\" d=\\"M11,8H4A2.0024,2.0024,0,0,1,2,6H3A1.001,1.001,0,0,0,4,7h7a1.001,1.001,0,0,0,1-1h1A2.0024,2.0024,0,0,1,11,8Zm0,1a1,1,0,1,0,1,1A1,1,0,0,0,11,9ZM4,9a1,1,0,1,0,1,1A1,1,0,0,0,4,9Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"skiing-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M11,3.68c-0.0021,0.602-0.4917,1.0883-1.0937,1.0863C9.3043,4.7642,8.818,4.2745,8.82,3.6726&#xA;&#x9;c0.0021-0.602,0.4917-1.0883,1.0937-1.0863C9.9425,2.5864,9.9713,2.5876,10,2.59C10.5666,2.6369,11.0019,3.1115,11,3.68z M10.17,9&#xA;&#x9;c-0.0623-0.1197-0.2083-0.1684-0.33-0.11C9.3623,9.1811,8.7807,9.247,8.25,9.07L3.69,6.81l1.9-1V3.68l1.09,0.55v2.18L7.77,7&#xA;&#x9;l1.09-0.55L7.77,5.86V2.59L5.59,1.5L4.5,2v3.32l-1.9,1l-2-1C0.4757,5.2592,0.3258,5.3107,0.265,5.435&#xA;&#x9;C0.2042,5.5593,0.2557,5.7092,0.38,5.77l0,0L8,9.54c0.2402,0.1011,0.4995,0.1489,0.76,0.14c0.4466-0.0082,0.8851-0.1212,1.28-0.33&#xA;&#x9;c0.1286-0.0502,0.1922-0.1951,0.142-0.3238C10.1785,9.0173,10.1745,9.0085,10.17,9z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"skiing-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M15,4.5C15,5.3284,14.3284,6,13.5,6S12,5.3284,12,4.5S12.6716,3,13.5,3S15,3.6716,15,4.5z M13.72,11.89&#xA;&#x9;c-0.0623-0.1197-0.2083-0.1684-0.33-0.11c-0.6846,0.4194-1.5208,0.5111-2.28,0.25L4.78,8.86L7.5,7.5v-3L9,5.25v3L10.5,9L12,8.25&#xA;&#x9;L10.5,7.5V3l-3-1.5L6,2.25v4.5L3.28,8.11L0.61,6.78C0.4857,6.7192,0.3358,6.7707,0.275,6.895C0.2142,7.0193,0.2657,7.1692,0.39,7.23&#xA;&#x9;l10.5,5.25c0.3156,0.135,0.6568,0.1998,1,0.19c0.5998-0.0103,1.1889-0.161,1.72-0.44c0.1236-0.0615,0.174-0.2116,0.1125-0.3352&#xA;&#x9;C13.7217,11.8932,13.7208,11.8916,13.72,11.89z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"slaughterhouse-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M11,5.75v.241C11,7,10,6.5,10,6.5H8A3.081,3.081,0,0,1,7,8a2.848,2.848,0,0,1-.416.9.26.26,0,0,0-.05.242l.458,1.55A.227.227,0,0,1,7,10.75a.25.25,0,0,1-.25.25.259.259,0,0,1-.244-.173L6,9V8.5H2.75l-.21.42a.25.25,0,0,0-.02.168L3,10.75a.25.25,0,0,1-.25.25.26.26,0,0,1-.237-.172L2,9V8.5a4.013,4.013,0,0,1-.843-.139,1.383,1.383,0,0,1-.5,1.045.242.242,0,0,0-.094.282l.414.99a.213.213,0,0,1,.011.072.25.25,0,0,1-.25.25.253.253,0,0,1-.228-.148L0,9.5a6.031,6.031,0,0,0,0-2v-2A1.486,1.486,0,0,1,2,4.1s.768.132,1.1.154A2.457,2.457,0,0,0,4,4.087,1.666,1.666,0,0,1,4.5,4a1.648,1.648,0,0,1,.844.257,3.166,3.166,0,0,0,.9.23L7,4.5s.966-.484,1-.5V3.5l.5.5A1.474,1.474,0,0,1,10,3.5.914.914,0,0,0,9,4l1,1,.68.529a.425.425,0,0,1,.07-.029A.238.238,0,0,1,11,5.75Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"slaughterhouse-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M15,8.1c0,1.376-1.363.694-1.363.694L12.5,9H11a5.309,5.309,0,0,1-1.5,2,3.272,3.272,0,0,1-.523,1.125c-.077.091-.061.2-.068.33L9,14.755a.264.264,0,0,1-.266.25A.242.242,0,0,1,8.5,14.8L8,11.5H4v3.253A.247.247,0,0,1,3.753,15h0a.25.25,0,0,1-.241-.2L3,12v-.5a8.2,8.2,0,0,1-1.426-.1A1.886,1.886,0,0,1,.9,12.826c-.128.083-.148.211-.133.386,0,0,.19,1.532.19,1.538a.25.25,0,0,1-.25.25.238.238,0,0,1-.23-.174l-.427-1.7a.35.35,0,0,1,.055-.3c.437-.68-.049-2.55-.049-2.55A1.354,1.354,0,0,1,0,9.922V7.5A2.027,2.027,0,0,1,2.736,5.586s.1.03.142.049a15.15,15.15,0,0,0,3.814.038l.179-.062a1.842,1.842,0,0,1,1.26,0,.972.972,0,0,1,.227.089,1.994,1.994,0,0,1,.287.171A1.8,1.8,0,0,0,9.5,6h1V5l.5.5c.5-1.5,2.5-1,2.5-1a1.687,1.687,0,0,0-1.5,1l2.5,2a.613.613,0,0,1,.186-.069A.318.318,0,0,1,15,7.752V8.1Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"slipway-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <g id=\\"slipway-final\\">\\n    <path d=\\"M1.0417,8l8,1.3794V10h-8Zm8-4-1,1v.625L3.7345,4.01l.0777-.2852.86-.8447H5.5a.35.35,0,0,0,0-.6992H4.529a.3478.3478,0,0,0-.2451.1L3.2546,3.291a.3566.3566,0,0,0-.0928.1582l-.0856.3137L1.0417,3C1.0948,4,1,5.5094,3,5.8844,3.9829,6.0687,8.0948,7,8.0948,7l1.9469-2Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"slipway-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <g id=\\"slipway-final\\">\\n    <path d=\\"M1.0417,11l12,1.495V13h-12Zm12-4-1,1v.5833L4.2381,5.3318l.0624-.1248L5.652,3.8447h.8311a.35.35,0,0,0,0-.6992H5.5065a.3518.3518,0,0,0-.248.1025L3.7643,4.7529a.3714.3714,0,0,0-.0654.0909l-.109.218L1.0417,4c0,2-.0293,3.9578,2.8595,4.4994C5.321,8.7656,12.0417,10,12.0417,10l2-2Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\" id=\\"snowmobile-11\\">\\n  <path d=\\"M4,8.5a.5.5,0,0,1-.5.5H.5a.5.5,0,0,1,0-1h3A.5.5,0,0,1,4,8.5Zm7-3a.5.5,0,0,0-.5-.5.9289.9289,0,0,0-.0969.0094L6,6H5.5A.5.5,0,0,1,5,5.5v-3a.5.5,0,0,0-.9314-.2528L3,4,.3118,5.038A.4989.4989,0,0,0,0,5.5a.5209.5209,0,0,0,.0864.2809L1,7l2.4113.0007a.4876.4876,0,0,1,.314.1149L5.7234,8.7709A.9964.9964,0,0,0,6.3591,9H9.4949a.5045.5045,0,0,0,.4512-.73L9,7l1.7792-1.0852A.5033.5033,0,0,0,11,5.5Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\" id=\\"snowmobile-15\\">\\n  <path d=\\"M15,11a1,1,0,0,1-1,1l0,0v0H9.4142a1,1,0,0,1-.7071-.2929L7.146,10.146A.4984.4984,0,0,0,6.7935,10H3.3343a1.0023,1.0023,0,0,1-.6015-.2006L1.3857,8.7888A1.0134,1.0134,0,0,1,1,8a.9953.9953,0,0,1,.4719-.8444L5,5,6.0385,3.3076h0A.5.5,0,0,1,7,3.5V7L8,8H9l5.4115-.9922a.5.5,0,0,1,.3555.915L13,9l1.6313,1.2243A.99.99,0,0,1,15,11ZM5.5,11H3.2247a3.0035,3.0035,0,0,1-1.44-.3679L.74,10.0612a.5.5,0,0,0-.48.8775l1.2687.6934A3.0032,3.0032,0,0,0,2.969,12H5.5a.5.5,0,0,0,0-1Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"soccer-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9,1.25C8.9996,1.9404,8.4397,2.4997,7.7494,2.4994S6.4996,1.9391,6.5,1.2487C6.5004,0.5584,7.0603-0.001,7.7506-0.0006&#xA;&#x9;C7.7638-0.0006,7.7769-0.0004,7.79,0C8.4647,0.0216,9.0003,0.575,9,1.25z M9,8.48c-0.5523,0-1,0.4477-1,1s0.4477,1,1,1s1-0.4477,1-1&#xA;&#x9;S9.5523,8.48,9,8.48z M10.81,5.09L8.94,3.18l0,0C8.8477,3.0648,8.7076,2.9984,8.56,3H1.51c-0.2761,0-0.5,0.2239-0.5,0.5&#xA;&#x9;S1.2339,4,1.51,4H5L2.07,8.3l0,0c-0.0138,0.066-0.0138,0.134,0,0.2C2.012,8.7761,2.1889,9.047,2.465,9.105&#xA;&#x9;C2.7411,9.163,3.012,8.9861,3.07,8.71H3L4.16,7H6l-1.93,3.24l0,0C4.0228,10.3184,3.9986,10.4085,4,10.5&#xA;&#x9;c-0.0552,0.2761,0.1239,0.5448,0.4,0.6c0.2761,0.0552,0.5448-0.1239,0.6-0.4l0,0l3.67-6.38l1.48,1.48&#xA;&#x9;c0.1812,0.2084,0.497,0.2305,0.7054,0.0493c0.2084-0.1812,0.2305-0.497,0.0493-0.7054C10.8879,5.1246,10.8696,5.1065,10.85,5.09&#xA;&#x9;L10.81,5.09z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"soccer-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11,1.5C11,2.3284,10.3284,3,9.5,3S8,2.3284,8,1.5S8.6716,0,9.5,0S11,0.6716,11,1.5z M11,11c-0.5523,0-1,0.4477-1,1&#xA;&#x9;s0.4477,1,1,1s1-0.4477,1-1S11.5523,11,11,11z M12.84,6.09l-1.91-1.91l0,0C10.8399,4.0675,10.7041,4.0014,10.56,4H3.5&#xA;&#x9;C3.2239,4,3,4.2239,3,4.5S3.2239,5,3.5,5h2.7L3,11.3l0,0c-0.0138,0.066-0.0138,0.134,0,0.2c-0.058,0.2761,0.1189,0.547,0.395,0.605&#xA;&#x9;C3.6711,12.163,3.942,11.9861,4,11.71l0,0L5,10h2l-1.93,4.24l0,0C5.0228,14.3184,4.9986,14.4085,5,14.5&#xA;&#x9;c-0.0552,0.2761,0.1239,0.5448,0.4,0.6c0.2761,0.0552,0.5448-0.1239,0.6-0.4l0,0l4.7-9.38l1.44,1.48&#xA;&#x9;c0.211,0.1782,0.5264,0.1516,0.7046-0.0593C13.0037,6.5523,13.0018,6.2761,12.84,6.09z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"square-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9,10H2c-0.5523,0-1-0.4477-1-1V2c0-0.5523,0.4477-1,1-1h7c0.5523,0,1,0.4477,1,1v7C10,9.5523,9.5523,10,9,10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"square-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13,14H2c-0.5523,0-1-0.4477-1-1V2c0-0.5523,0.4477-1,1-1h11c0.5523,0,1,0.4477,1,1v11C14,13.5523,13.5523,14,13,14z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"square-stroked-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.19,1H1.81C1.3626,1,1,1.3626,1,1.81v7.38C1,9.6374,1.3626,10,1.81,10c0,0,0,0,0,0h7.38C9.6374,10,10,9.6374,10,9.19v0&#xA;&#x9;V1.81C10,1.3626,9.6374,1,9.19,1L9.19,1L9.19,1z M2,2h7v7H2V2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"square-stroked-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M12.7,2.3v10.4H2.3V2.3H12.7 M13,1H2C1.4477,1,1,1.4477,1,2v11c0,0.5523,0.4477,1,1,1h11c0.5523,0,1-0.4477,1-1V2&#xA;&#x9;C14,1.4477,13.5523,1,13,1L13,1z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"stadium-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path4177\\" d=\\"M5,0v3v0.0117&#xA;&#x9;C2.7922,3.1089,1.0876,3.8182,1,4.6816c0,0,0,2.4594,0,3.6816C0.9995,9.2672,3.0143,10,5.5,10s4.5005-0.7328,4.5-1.6367V4.6816&#xA;&#x9;C9.9122,3.8177,8.2093,3.1082,6,3.0117V2.5723L8.5,1.5L5,0z M1.8184,5.752C2.1366,5.9302,2.5373,6.0838,3,6.2051v2.459&#xA;&#x9;C2.2493,8.4283,1.8213,8.0972,1.8184,7.75V5.752z M9.1816,5.7559V7.75C9.1803,8.0979,8.7521,8.4298,8,8.666V6.2031&#xA;&#x9;C8.4614,6.0836,8.862,5.932,9.1816,5.7559z M4,6.3984C4.4815,6.4652,4.9888,6.4995,5.5,6.5C6.0112,6.4995,6.5185,6.4652,7,6.3984&#xA;&#x9;v2.4922C6.5282,8.9624,6.0171,8.9997,5.5,9C4.9829,8.9997,4.4718,8.9624,4,8.8906V6.3984z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"stadium-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path4177\\" d=\\"M7,1v2v1.5v0.5098C4.1695,5.1037,2.0021,5.9665,2,7v4.5c0,1.1046,2.4624,2,5.5,2s5.5-0.8954,5.5-2V7&#xA;&#x9;c-0.0021-1.0335-2.1695-1.8963-5-1.9902V4.0625L11,2.75L7,1z M3,8.1465c0.5148,0.2671,1.2014,0.4843,2,0.6328v2.9668&#xA;&#x9;C3.7948,11.477,3,11.0199,3,10.5V8.1465z M12,8.1484V10.5c0,0.5199-0.7948,0.977-2,1.2461V8.7812&#xA;&#x9;C10.7986,8.6328,11.4852,8.4155,12,8.1484z M6,8.9219C6.4877,8.973,6.9925,8.9992,7.5,9C8.0073,8.9999,8.5121,8.9743,9,8.9238&#xA;&#x9;v2.9844C8.5287,11.964,8.0288,12,7.5,12S6.4713,11.964,6,11.9082V8.9219z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"star-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path4749-2-8-2\\" d=\\"M5.4,0L4,3.5H0l3,3L1.5,11l3.9-2.6&#xA;&#x9;L9.5,11L8,6.5l3-3H7L5.4,0z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"star-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path4749-2-8-2\\" d=\\"M7.5,0l-2,5h-5l4,3.5l-2,6l5-3.5&#xA;&#x9;l5,3.5l-2-6l4-3.5h-5L7.5,0z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"star-stroked-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path4749-2-8-2\\" d=\\"M5.5,2.69l0.59,1.47l0.25,0.63h1.81l-1,0.9l-0.5,0.44l0.18,0.63l0.56,1.69L6.07,7.53L5.5,7.12&#xA;&#x9;l-0.57,0.4L3.62,8.44l0.55-1.68l0.21-0.63L3.88,5.7l-1-0.9h1.78l0.25-0.63L5.5,2.69 M5.5,0L4,3.79H0.19l3,2.66L1.71,11L5.5,8.34&#xA;&#x9;L9.29,11L7.78,6.45l3-2.66H7L5.5,0L5.5,0z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"star-stroked-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path4749-2-8-2\\" d=\\"M7.5,3.19l1.07,2.68L8.82,6.5h3l-2,1.75l-0.5,0.44l0.23,0.63l1,3.13l-2.48-1.77&#xA;&#x9;l-0.57-0.4l-0.57,0.4l-2.52,1.77l1-3.13l0.21-0.63l-0.5-0.44l-2-1.75h3l0.25-0.63L7.5,3.19 M7.5,0.5l-2,5h-5l4,3.5l-2,6l5-3.5l5,3.5&#xA;&#x9;l-2-6l4-3.5h-5L7.5,0.5L7.5,0.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"suitcase-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path17\\" d=\\"M8,3V1.578L7.3601,1H3.6399&#xA;&#x9;L3,1.7477V3H1.5L1,3.5v6L1.5,10h8L10,9.5v-6L9.5,3H8z M4,2h3v1H4V2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"suitcase-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path17\\" d=\\"M11,4V2c0-1-1-1-1-1H5.0497&#xA;&#x9;c0,0-1.1039,0.0015-1.0497,1v2H2c0,0-1,0-1,1v7c0,1,1,1,1,1h11c0,0,1,0,1-1V5c0-1-1-1-1-1H11z M5.5,2.5h4V4h-4V2.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"sushi-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path4999\\" d=\\"M3.5,2.5C3.2,2.5,3,2.6,3,2.9l0,0H2.1c-1.1,0-2,0.8-2,1.9c0,0.5,0.3,1,0.7,1.4&#xA;&#x9;C0.3,6.5,0,6.9,0,7.5C0,8.3,0.7,9,1.6,9h1.9h2h1.9C8.3,9,9,8.3,9,7.5c0-0.2,0-0.4-0.1-0.6l1,0.5c0.4,0.2,0.8,0,1-0.3&#xA;&#x9;c0.2-0.4-0.053-0.7941-0.3427-0.9442L9.8,5.8l0.5-0.1c0.4-0.1,0.7-0.4,0.6-0.8c-0.1-0.4-0.4-0.6-0.8-0.6l0,0H10L8.4,4.6&#xA;&#x9;C8,3.9,7.3,3.1,6,3c0,0,0-0.5-0.5-0.5l0,0H3.5z M4,3.5h1v4.4l0,0l0,0H4l0,0l0,0V3.5z M7,5.9c0.2,0,0.3,0.1,0.4,0.3l0.1-0.1&#xA;&#x9;C7.6,5.9,7.8,5.9,8,6s0.2,0.3,0.1,0.5L7.8,7C7.9,7.1,8,7.2,8,7.4c0,0.3-0.2,0.5-0.6,0.5H6v-1h0.7V6.3C6.7,6.1,6.8,5.9,7,5.9z M1.9,6&#xA;&#x9;C2,6,2.2,6,2.3,6.2l0.1,0.2c0.1-0.1,0.2-0.1,0.3-0.1C2.9,6.3,3,6.5,3,6.6v0.8l0,0v0.5H1.6C1.2,7.9,1,7.7,1,7.4s0.2-0.5,0.6-0.5h0.3&#xA;&#x9;L1.7,6.5c-0.1-0.2,0-0.4,0.1-0.5C1.8,6,1.8,6,1.9,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"sushi-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path4999\\" d=\\"M5.5,3C5.2239,3,5,3.2239,5,3.5H2.75C1.2265,3.5,0,4.7265,0,6.25c0,0.8274,0.3687,1.5592,0.9434,2.0625&#xA;&#x9;C0.3803,8.6675,0,9.2893,0,10c0,1.0994,0.9006,2,2,2h3.5h2H10c1.0994,0,2-0.9006,2-2c0-0.4883-0.1863-0.9294-0.4805-1.2773&#xA;&#x9;l2.1777,0.9629c0.3716,0.1831,0.8213,0.0303,1.0044-0.3413c0.1831-0.3716,0.0303-0.8213-0.3413-1.0044&#xA;&#x9;c-0.0188-0.0093-0.038-0.0178-0.0576-0.0254l-1.8105-0.8027l1.6309-0.2715c0.4099-0.0599,0.6936-0.4408,0.6337-0.8507&#xA;&#x9;c-0.0544-0.3724-0.3765-0.6469-0.7528-0.6415c-0.0426,0.0003-0.085,0.0042-0.127,0.0117l-2.1309,0.3555&#xA;&#x9;C11.2595,4.9521,10.0387,3.7837,8,3.5488V3.5C8,3.2239,7.7761,3,7.5,3H5.5z M6,4h1v5v2H6V9V4z M9.5,8&#xA;&#x9;c0.259,0,0.4638,0.1974,0.4902,0.4492l0.0762-0.1328c0.1385-0.2399,0.4437-0.3201,0.6836-0.1816s0.3201,0.4418,0.1816,0.6816&#xA;&#x9;l-0.2578,0.4473C10.8727,9.445,11,9.7021,11,10c0,0.5626-0.4374,1-1,1H8V9h1V8.5C9,8.223,9.223,8,9.5,8z M2.4395,8.0703&#xA;&#x9;c0.1934-0.0242,0.3903,0.0662,0.4941,0.2461l0.2012,0.3477C3.226,8.5647,3.3538,8.5,3.5,8.5C3.777,8.5,4,8.723,4,9h1v2H2&#xA;&#x9;c-0.5626,0-1-0.4374-1-1s0.4374-1,1-1h0.1738L2.0684,8.8164C1.9299,8.5765,2.0101,8.2733,2.25,8.1348&#xA;&#x9;C2.31,8.1001,2.375,8.0784,2.4395,8.0703z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"swimming-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path8421-9-1-0-7\\" d=\\"M8.0039,0.4941l-0.6992,0.502L4.6035,2.5977&#xA;&#x9;C4.3036,2.6967,4.2042,3.1962,4.4023,3.4961l0.5996,1.002l-2.5,2l1,1.002l2-1.002L7.5039,7.5l1-1.002l-3.002-3.502l3.002-1.5v-1.002&#xA;&#x9;C8.5039,0.4941,8.0039,0.4941,8.0039,0.4941z M9.0059,2.9961c-0.553,0-1.002,0.4489-1.002,1.002s0.4489,1,1.002,1&#xA;&#x9;c0.553,0,1-0.447,1-1S9.5589,2.9961,9.0059,2.9961z M2,7.998L0,9v1l2-1l1.5,1l2-1l2,1L9,9l2,1V9L9,7.998L7.5,9l-2-1.002L3.5,9&#xA;&#x9;L2,7.998z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"swimming-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path16388\\" d=\\"M10.1113,2C9.9989,2,9.6758,2.1465,9.6758,2.1465L6.3535,3.8262&#xA;&#x9;C5.9111,4.0024,5.7358,4.7081,6.002,5.0605l0.9707,1.4082L3.002,8.498L5,9.998l2.502-1.5l2.5,1.5l1.002-1.002l-3-4l2.5566-1.5293&#xA;&#x9;c0.5286-0.2662,0.4434-0.7045,0.4434-0.9707C10.9999,2.2861,10.6437,2,10.1113,2z M12.252,5C11.2847,5,10.5,5.7827,10.5,6.75&#xA;&#x9;s0.7847,1.752,1.752,1.752s1.75-0.7847,1.75-1.752S13.2192,5,12.252,5z M2.5,10L0,11.5V13l2.5-1.5L5,13l2.502-1.5l2.5,1.5L12,11.5&#xA;&#x9;l3,1.5v-1.5L12,10l-1.998,1.5l-2.5-1.5L5,11.5L2.5,10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"table-tennis-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"icon_concepts:_sports_leisure\\" d=\\"M8.5928,7.2324a2.6052,2.6052,0,0,1-1.1448.642L3.1149,3.5413a2.604,2.604,0,0,1,.6419-1.1448C5.3189.8451,7.33.4386,8.9459,2.0541,10.5507,3.659,10.1549,5.6811,8.5928,7.2324ZM3,5.2531a2.5994,2.5994,0,0,1-.0135,1.1555,2.7324,2.7324,0,0,1-.3638.77C1.8845,8.0455,1.05,8.5163,1.05,8.8266A2.3857,2.3857,0,0,0,2.1734,9.95c.31,0,.77-.8024,1.6583-1.5621a2.5178,2.5178,0,0,1,.8024-.3959A2.6735,2.6735,0,0,1,5.7255,8Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"table-tennis-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"icon_concepts:_sports_leisure\\" d=\\"M11.9676,10.2275a3.8116,3.8116,0,0,1-1.9122.9831L3.7678,4.9338A4.0283,4.0283,0,0,1,4.7725,3.0324C7.03.7745,9.98.2235,12.3781,2.6219S14.2255,7.97,11.9676,10.2275Zm-6.987,1.6093A3.8422,3.8422,0,0,1,6.149,11.278,4.5328,4.5328,0,0,1,8,11.4452L3.5456,7a4.4126,4.4126,0,0,1,.1572,1.9223,3.6639,3.6639,0,0,1-.5208,1.1159c-1.072,1.263-2.132,1.727-2.132,2.1879A1.8378,1.8378,0,0,0,2.7739,13.95C3.2348,13.95,3.6917,12.9368,4.9806,11.8368Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"teahouse-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M6.2,4C7.4,3.7,8,3.7,8,2.5c0-0.6-0.4-0.8-1.6-1.3C5.6,0.9,5.3,0.9,5.3,0.1C5,1,5.2,1.3,6.1,1.8C8.1,2.8,6.2,4,6.2,4z&#xA;&#x9; M3.9,4C4.6,3.8,5,3.8,5,3.1C5,2.7,4.7,2.6,4,2.2C3.5,2,3.3,1.5,3.3,1C3.1,1.6,3.2,2.3,3.8,2.6C5,3.2,3.9,4,3.9,4z M9,5H2l1,3&#xA;&#x9;c0.3,0.4,0.6,0.7,1,1v2h3V9c0.4-0.3,0.7-0.6,1-1L9,5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"teahouse-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11,7c-0.2,1.4-0.5,2.7-1,4c-0.3,0.4-0.6,0.7-1,1v2H6v-2c-0.4-0.3-0.7-0.6-1-1C4.5,9.7,4.2,8.4,4,7H11z M8.1,5.7&#xA;&#x9;c1.2-0.3,1.7-0.3,1.8-1.5c0-0.6-0.4-0.8-1.5-1.4C7.5,2.4,7.1,1.8,7.2,1C6.8,1.9,7,3,8,3.5C10,4.5,8.1,5.7,8.1,5.7z M5.8,6&#xA;&#x9;c0.7-0.2,1.1-0.2,1.1-0.9c0-0.4-0.3-0.5-0.9-0.9C5.4,4,5.1,3.5,5.2,3C4.9,3.6,5.1,4.3,5.7,4.6C6.9,5.2,5.8,6,5.8,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\" id=\\"telephone-11\\">\\n  <path d=\\"M3,9.4a0.73,0.73,0,0,0,1,0l0.74-.74a0.73,0.73,0,0,0,0-1ZM7.56,4.8a0.73,0.73,0,0,0,1,0l0.71-.71a0.73,0.73,0,0,0,0-1ZM5.88,3.57L3.57,5.88a0.37,0.37,0,0,0,0,.52L4,6.84,2.26,8.6a2.27,2.27,0,0,1-.73-1.34v-1a1.3452,1.3452,0,0,1,.52-1L5.26,2.05a1.3452,1.3452,0,0,1,1-.52h1a2.27,2.27,0,0,1,1.34.73L6.84,4,6.4,3.57a0.37,0.37,0,0,0-.52,0\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\" id=\\"telephone-15\\">\\n  <path d=\\"M4.51,8.88a0.51,0.51,0,0,0,0,.72l0.72,0.72L3.07,12.5,2.7,12.13A2.24,2.24,0,0,1,2,10.69V9.24a2.24,2.24,0,0,1,.7-1.45L7.77,2.72A2.24,2.24,0,0,1,9.22,2h1.45a2.24,2.24,0,0,1,1.45.72l0.36,0.36L10.31,5.26,9.58,4.53a0.51,0.51,0,0,0-.72,0ZM4.13,13.6a1,1,0,0,0,1.4137.0363Q5.5623,13.6186,5.58,13.6l0.72-.72a1,1,0,0,0,.0363-1.4137Q6.3186,11.4477,6.3,11.43Zm7.25-7.28a1,1,0,0,0,1.4137.0363C12.8061,6.3445,13.55,5.6,13.55,5.6a1,1,0,0,0,.0363-1.4137Q13.5686,4.1677,13.55,4.15Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"tennis-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.38,1.63C8.5569.7765,6.6118.8078,5.24,2.24A4.26,4.26,0,0,0,4.05,5a4.1491,4.1491,0,0,1-.5,2.07.62.62,0,0,0-.67.12L1.19,8.88a.61.61,0,0,0,0,.85l.09.09a.5941.5941,0,0,0,.84.01l.01-.01L3.82,8.13a.5994.5994,0,0,0,.12-.67,5.8237,5.8237,0,0,1,2.21-.49A3.9655,3.9655,0,0,0,8.77,5.78C10.09,4.46,10.3421,2.6276,9.38,1.63ZM6.15,6.47a1.6589,1.6589,0,0,1-1.17-.44,1.923,1.923,0,0,1-.31-1.98L6.95,6.33A2.5434,2.5434,0,0,1,6.15,6.47Zm1.06-.23L4.77,3.8a3.72,3.72,0,0,1,.7-1.07L8.28,5.55A3.5558,3.5558,0,0,1,7.21,6.24Zm1.25-.87L5.64,2.54a3.9241,3.9241,0,0,1,1.04-.71h.01l2.5,2.5A3.578,3.578,0,0,1,8.46,5.37Zm.83-1.29L6.94,1.72a2.76,2.76,0,0,1,.92-.17,1.6156,1.6156,0,0,1,1.17.44,1.7156,1.7156,0,0,1,.41,1.52A3,3,0,0,1,9.29,4.08Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"tennis-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.1284,1.87c-1.5418-1.5406-4.5535-.7759-6.28,1.05a6.8282,6.8282,0,0,0-1.88,4.4,5.7275,5.7275,0,0,1-.57,2.72.6814.6814,0,0,0-.67.17l-2.49,2.5a.6941.6941,0,0,0,0,.98l.07.07a.7051.7051,0,0,0,.98,0l2.5-2.49a.683.683,0,0,0,.18-.66,8.5694,8.5694,0,0,1,3.12-.58,6.5487,6.5487,0,0,0,3.99-1.87C14.1084,6.13,14.579,3.3194,13.1284,1.87Zm-2.2-.04a2.3071,2.3071,0,0,1,1.64.61,2.548,2.548,0,0,1,.5,2.44l-2.95-2.96A3.8648,3.8648,0,0,1,10.9284,1.83Zm-4.57,6.81a2.6485,2.6485,0,0,1-.48-2.55l3.04,3.04A2.8522,2.8522,0,0,1,6.3584,8.64Zm2.88.39-3.26-3.27a5.1623,5.1623,0,0,1,.49-1.08l3.85,3.85A5.5093,5.5093,0,0,1,9.2384,9.03Zm1.34-.66-3.94-3.95a5.2032,5.2032,0,0,1,.74-.9l4.1,4.1A5.6869,5.6869,0,0,1,10.5784,8.37Zm1.11-.96-4.1-4.1a5.5714,5.5714,0,0,1,.84-.65l3.92,3.92A5.7187,5.7187,0,0,1,11.6884,7.41Zm.82-1.09L8.6984,2.5a4.1707,4.1707,0,0,1,1.09-.48l3.2,3.2A5.5656,5.5656,0,0,1,12.5084,6.32Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"theatre-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path6370\\" d=\\"M0.6055,0.6992C0.3027,0.6992,0,1.0019,0,1.3047v3.7344C0,6.4519,0.578,8,3,8h0.5V6.1836L1.2109,6.1758&#xA;&#x9;c0,0,0.3026-1.1367,1.8164-1.1367c0.3028,0,0.4036,0.0006,0.6055,0.1016V3.7266c0-0.6055,0.2018-1.0078,0.6055-1.3105&#xA;&#x9;C4.541,2.1133,4.789,2,5.3945,2H6V1.3945c0-0.3028-0.1972-0.6582-0.5-0.6582c-0.6055,0-1.1607,0.5684-2.4727,0.5684&#xA;&#x9;C2.0182,1.3047,1.211,0.6992,0.6055,0.6992z M1.75,2.5c0.4142,0,0.75,0.3358,0.75,0.75S2.1642,4,1.75,4S1,3.6642,1,3.25&#xA;&#x9;S1.3358,2.5,1.75,2.5z M5.5,3C5.1972,3,4.9453,3.4238,4.9453,3.7266v3.7344c0,1.4128,0.6053,3.0273,3.0273,3.0273&#xA;&#x9;S11,8.7729,11,7.4609V3.7266C11,3.4238,10.8028,3,10.5,3C9.8945,3,8.9083,3.5,8,3.5S6.1055,3,5.5,3z M6.75,5&#xA;&#x9;C7.1642,5,7.5,5.3358,7.5,5.75S7.1642,6.5,6.75,6.5S6,6.1642,6,5.75S6.3358,5,6.75,5z M9.25,5C9.6642,5,10,5.3358,10,5.75&#xA;&#x9;S9.6642,6.5,9.25,6.5S8.5,6.1642,8.5,5.75S8.8358,5,9.25,5z M6.1562,8.0664h3.7344c0,0-0.3026,1.2109-1.8164,1.2109&#xA;&#x9;S6.1562,8.0664,6.1562,8.0664z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"theatre-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path6342-3\\" d=\\"M2,1c0,0-1,0-1,1v5.1582C1,8.8885,1.354,11,4.5,11H5V8L2.5,9c0,0,0-2.5,2.5-2.5V5&#xA;&#x9;c0-0.7078,0.0868-1.3209,0.5-1.7754C5.8815,2.805,6.5046,1.9674,8.1562,2.7539L9,3.3027V2c0,0,0-1-1-1C7.2922,1,6.0224,2,5,2&#xA;&#x9;S2.7865,1,2,1z M3,3c0.5523,0,1,0.4477,1,1S3.5523,5,3,5S2,4.5523,2,4S2.4477,3,3,3z M7,4c0,0-1,0-1,1v5c0,2,1,4,4,4s4-2,4-4V5&#xA;&#x9;c0-1-1-1-1-1c-0.7078,0-1.9776,1-3,1S7.7865,4,7,4z M8,6c0.5523,0,1,0.4477,1,1S8.5523,8,8,8S7,7.5523,7,7S7.4477,6,8,6z M12,6&#xA;&#x9;c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1s-1-0.4477-1-1S11.4477,6,12,6z M7.5,10H10h2.5c0,0,0,2.5-2.5,2.5S7.5,10,7.5,10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"toilet-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M3.33,2.19c-0.6075,0-1.1-0.4925-1.1-1.1s0.4925-1.1,1.1-1.1s1.1,0.4925,1.1,1.1v0C4.43,1.6975,3.9375,2.19,3.33,2.19z&#xA;&#x9; M10.27,1.09c0-0.6075-0.4925-1.1-1.1-1.1c-0.6075,0-1.1,0.4925-1.1,1.1s0.4925,1.1,1.1,1.1c0.6036,0,1.0945-0.4864,1.1-1.09V1.09z&#xA;&#x9; M6.51,4.93L6.51,4.93L4.7,3.12l0,0C4.6306,3.0442,4.5328,3.0008,4.43,3H2.22C2.1271,3.0008,2.0378,3.0365,1.97,3.1H2L0.14,4.93&#xA;&#x9;c-0.1709,0.1218-0.2107,0.3591-0.0889,0.53s0.3591,0.2107,0.53,0.0889C0.6155,5.5244,0.6455,5.4944,0.67,5.46l1.58-1.58L0.77,8h1.46&#xA;&#x9;v2.51c-0.0055,0.0365-0.0055,0.0735,0,0.11c0.0339,0.2071,0.2293,0.3475,0.4364,0.3136C2.8274,10.9072,2.9536,10.781,2.98,10.62H3V8&#xA;&#x9;h0.69v2.63l0,0c0.0339,0.2071,0.2293,0.3475,0.4364,0.3136C4.2874,10.9172,4.4136,10.791,4.44,10.63&#xA;&#x9;c0.0055-0.0365,0.0055-0.0735,0-0.11V8h1.44L4.41,3.88L6,5.46l0,0c0.0718,0.0783,0.1738,0.1221,0.28,0.12&#xA;&#x9;c0.2099,0,0.38-0.1701,0.38-0.38l0,0C6.6518,5.0924,6.597,4.9938,6.51,4.93z M8.62,7v3.63&#xA;&#x9;c-0.0335,0.2016,0.1028,0.3921,0.3044,0.4256c0.2016,0.0335,0.3921-0.1028,0.4256-0.3044c0.0067-0.0401,0.0067-0.0811,0-0.1212V7H11&#xA;&#x9;V3.37C11,3.1657,10.8343,3,10.63,3H7.71C7.5057,3,7.34,3.1657,7.34,3.37V7H8.62z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"toilet-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M4.5,3C3.6716,3,3,2.3284,3,1.5S3.6716,0,4.5,0S6,0.6716,6,1.5S5.3284,3,4.5,3z M14,1.5C14,0.6716,13.3284,0,12.5,0&#xA;&#x9;S11,0.6716,11,1.5S11.6716,3,12.5,3S14,2.3284,14,1.5z M8.86,6.64L8.86,6.64L6.38,4.15l0,0C6.2798,4.0492,6.142,3.9949,6,4H3&#xA;&#x9;C2.8697,4.0003,2.7445,4.0503,2.65,4.14l0,0L0.14,6.63c-0.2261,0.177-0.2659,0.5039-0.0889,0.73s0.5039,0.2659,0.73,0.0889&#xA;&#x9;C0.8142,7.423,0.8441,7.3931,0.87,7.36L3,5.2L1,11h2v3.33c-0.0075,0.0497-0.0075,0.1003,0,0.15&#xA;&#x9;c0.0555,0.2761,0.3244,0.455,0.6005,0.3995C3.802,14.839,3.9595,14.6815,4,14.48l0,0V11h1v3.5l0,0&#xA;&#x9;c0.0555,0.2761,0.3244,0.455,0.6005,0.3995C5.802,14.859,5.9595,14.7015,6,14.5c0.0075-0.0497,0.0075-0.1003,0-0.15V11h2L6,5.2&#xA;&#x9;l2.14,2.16l0,0c0.0967,0.1081,0.2349,0.17,0.38,0.17C8.7954,7.5088,9.0061,7.2761,9,7C9.0023,6.8663,8.9521,6.737,8.86,6.64z&#xA;&#x9; M14.5,4h-4C10.2239,4,10,4.2239,10,4.5v5c0,0.2761,0.2239,0.5,0.5,0.5S11,9.7761,11,9.5v5c0,0.2761,0.2239,0.5,0.5,0.5&#xA;&#x9;s0.5-0.2239,0.5-0.5v-5h1v5c0,0.2761,0.2239,0.5,0.5,0.5s0.5-0.2239,0.5-0.5v-5c0,0.2761,0.2239,0.5,0.5,0.5S15,9.7761,15,9.5v-5&#xA;&#x9;C15,4.2239,14.7761,4,14.5,4z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"town-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M3.695,1.1a.256.256,0,0,0-.4,0L1.055,3.931A.254.254,0,0,0,1,4.088V9.75a.25.25,0,0,0,.25.25h1.5A.25.25,0,0,0,3,9.75V8H4V9.75a.25.25,0,0,0,.25.25H5V5.5a.615.615,0,0,1,.147-.4L6,4ZM3,7H2V6H3ZM3,5H2V4H3ZM8.194,3.742a.248.248,0,0,0-.387,0L6.054,5.932A.249.249,0,0,0,6,6.087V9.752A.248.248,0,0,0,6.248,10h3.5A.248.248,0,0,0,10,9.756h0V6.087a.249.249,0,0,0-.054-.155ZM7,6H8V7H7ZM9,9H8V8H9Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"town-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M10.651,7.121a.251.251,0,0,0-.314,0L8.092,8.929A.247.247,0,0,0,8,9.122v4.625A.253.253,0,0,0,8.253,14H9.747A.253.253,0,0,0,10,13.747h0V12h1v1.747a.253.253,0,0,0,.253.253h1.494A.253.253,0,0,0,13,13.747h0V9.12a.25.25,0,0,0-.094-.2ZM10,11H9V10h1Zm2,0H11V10h1ZM5.71,1.815a.252.252,0,0,0-.42,0L2.042,5.936A.252.252,0,0,0,2,6.076v7.671A.252.252,0,0,0,2.251,14h2.5A.252.252,0,0,0,5,13.748V12H6v1.748A.252.252,0,0,0,6.252,14H7V8a.5.5,0,0,1,.188-.391L9,6C9,5.95,5.71,1.815,5.71,1.815ZM4,10H3V9H4ZM4,7H3V6H4Zm2,3H5V9H6ZM6,7H5V6H6Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"town-hall-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.5,0L1,2v1h9V2L5.5,0z M2,4v4L1,9v1h9V9L9,8V4H2z M3,5h1v3H3V5z M5,5h1v3H5V5z M7,5h1v3H7V5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"town-hall-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path7509\\" d=\\"M7.5,0L1,3.4453V4h13V3.4453L7.5,0z M2,5v5l-1,1.5547V13h13v-1.4453L13,10V5H2z M4,6h1v5.5H4V6z M7,6h1v5.5H7&#xA;&#x9;V6z M10,6h1v5.5h-1V6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"triangle-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect3338\\" d=\\"M5.5174,1.2315&#xA;&#x9;C5.3163,1.2253,5.1276,1.328,5.024,1.5l-4,6.6598C0.8013,8.5293,1.0679,8.9999,1.5,9h8c0.4321-0.0001,0.6987-0.4707,0.476-0.8402&#xA;&#x9;l-4-6.6598C5.8787,1.3386,5.706,1.2375,5.5174,1.2315z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"triangle-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path21090-9\\" d=\\"M7.5385,2&#xA;&#x9;C7.2437,2,7.0502,2.1772,6.9231,2.3846l-5.8462,9.5385C1,12,1,12.1538,1,12.3077C1,12.8462,1.3846,13,1.6923,13h11.6154&#xA;&#x9;C13.6923,13,14,12.8462,14,12.3077c0-0.1538,0-0.2308-0.0769-0.3846L8.1538,2.3846C8.028,2.1765,7.7882,2,7.5385,2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"triangle-stroked-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect3338\\" d=\\"M5.5174,1.2315&#xA;&#x9;C5.3163,1.2253,5.1276,1.328,5.024,1.5l-4,6.6598C0.8013,8.5293,1.0679,8.9999,1.5,9h8c0.4321-0.0001,0.6987-0.4707,0.476-0.8402&#xA;&#x9;l-4-6.6598C5.8787,1.3386,5.706,1.2375,5.5174,1.2315z M5.5,2.8627l3.0191,5.0286H2.4809L5.5,2.8627z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"triangle-stroked-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect3338\\" d=\\"M7.5243,1.5004&#xA;&#x9;C7.2429,1.4913,6.9787,1.6423,6.8336,1.8952l-5.5,9.8692C1.0218,12.3078,1.395,12.9999,2,13h11&#xA;&#x9;c0.605-0.0001,0.9782-0.6922,0.6664-1.2355l-5.5-9.8692C8.0302,1.6579,7.7884,1.5092,7.5243,1.5004z M7.5,3.8993l4.1267,7.4704&#xA;&#x9;H3.3733L7.5,3.8993z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"veterinary-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.5,4.32C4.2852,4.3446,3.3204,5.3493,3.345,6.5641C3.3464,6.6363,3.3515,6.7083,3.36,6.78l0,0&#xA;&#x9;C2.9264,6.9258,2.5181,7.1384,2.15,7.41C1.5186,7.8752,1.384,8.7642,1.8492,9.3955C1.8528,9.4004,1.8564,9.4052,1.86,9.41&#xA;&#x9;c0.4895,0.6043,1.3633,0.7267,2,0.28C4.3412,9.3542,4.9132,9.1728,5.5,9.17c0.5836-0.006,1.1554,0.1648,1.64,0.49&#xA;&#x9;c0.6009,0.4953,1.4896,0.4096,1.9848-0.1913C9.1299,9.4625,9.135,9.4563,9.14,9.45c0.5003-0.5528,0.4578-1.4065-0.095-1.9068&#xA;&#x9;C9.0084,7.51,8.97,7.4789,8.93,7.45L8.85,7.41C8.4703,7.1575,8.0646,6.9463,7.64,6.78l0,0c0.1438-1.2065-0.7176-2.3011-1.9241-2.445&#xA;&#x9;C5.6442,4.3265,5.5722,4.3215,5.5,4.32z M1.63,3.12C1.0889,3.3737,0.8458,4.0102,1.08,4.56c0.0427,0.5931,0.5567,1.0401,1.15,1&#xA;&#x9;c0.5411-0.2537,0.7842-0.8902,0.55-1.44C2.7373,3.5269,2.2233,3.0799,1.63,3.12z M9.37,3.12c0.5411,0.2537,0.7842,0.8902,0.55,1.44&#xA;&#x9;c-0.0427,0.5931-0.5567,1.0401-1.15,1C8.2289,5.3063,7.9858,4.6698,8.22,4.12C8.2627,3.5269,8.7767,3.0799,9.37,3.12z M3.77,1&#xA;&#x9;C3.257,1.2045,3.0069,1.7862,3.2115,2.2992C3.2142,2.3062,3.2171,2.3131,3.22,2.32c0.0792,0.5925,0.5637,1.0478,1.16,1.09&#xA;&#x9;c0.513-0.2045,0.7631-0.7862,0.5585-1.2992C4.9358,2.1038,4.9329,2.0969,4.93,2.09C4.8508,1.4975,4.3663,1.0422,3.77,1z M7.23,1&#xA;&#x9;c0.513,0.2045,0.7631,0.7862,0.5585,1.2992C7.7858,2.3062,7.7829,2.3131,7.78,2.32C7.7008,2.9125,7.2163,3.3678,6.62,3.41&#xA;&#x9;C6.107,3.2055,5.8569,2.6238,6.0615,2.1108C6.0642,2.1038,6.0671,2.0969,6.07,2.09C6.1492,1.4975,6.6337,1.0422,7.23,1z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"veterinary-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path3340\\" d=\\"M7.5,6c-2.5,0-3,2.28-3,3.47l0,0c-0.6097,0.2059-1.1834,0.5062-1.7,0.89&#xA;&#x9;c-0.871,0.6614-1.0492,1.8998-0.4,2.78c0.6799,0.8542,1.9081,1.0297,2.8,0.4c0.6779-0.4601,1.4808-0.701,2.3-0.69&#xA;&#x9;c0.8192-0.011,1.6221,0.2299,2.3,0.69c0.8575,0.6854,2.1072,0.5515,2.8-0.3c0.6888-0.8134,0.5878-2.0313-0.2256-2.7201&#xA;&#x9;c-0.0243-0.0206-0.0491-0.0406-0.0744-0.0599l-0.1-0.1c-0.5333-0.3564-1.1032-0.6548-1.7-0.89l0,0C10.5,8.29,10,6,7.5,6z\\"/>\\n  <path id=\\"ellipse4153\\" d=\\"M2.08,4.3c-0.7348,0.3676-1.0652,1.2371-0.76,2c0.064,0.8282,0.7809,1.4517,1.61,1.4&#xA;&#x9;c0.7348-0.3676,1.0652-1.2371,0.76-2C3.626,4.8718,2.9091,4.2483,2.08,4.3z\\"/>\\n  <path id=\\"ellipse4163\\" d=\\"M12.93,4.3c0.7348,0.3676,1.0653,1.2371,0.76,2c-0.064,0.8282-0.7809,1.4517-1.61,1.4&#xA;&#x9;c-0.7348-0.3676-1.0653-1.2371-0.76-2C11.384,4.8718,12.1009,4.2483,12.93,4.3z\\"/>\\n  <path id=\\"ellipse4165\\" d=\\"M5.08,1.3c-0.68,0.09-1,0.94-0.76,1.87C4.4301,3.9951,5.1003,4.6321,5.93,4.7c0.68-0.09,1-0.94,0.76-1.87&#xA;&#x9;C6.5799,2.0049,5.9097,1.3679,5.08,1.3z\\"/>\\n  <path id=\\"ellipse4167\\" d=\\"M9.93,1.3c0.68,0.09,1,0.94,0.76,1.87C10.5791,3.9986,9.9036,4.6365,9.07,4.7c-0.68-0.08-1-0.94-0.76-1.87&#xA;&#x9;C8.4209,2.0014,9.0964,1.3634,9.93,1.3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"viewpoint-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"e46c0471-5704-47b4-a95f-3ffb079cac96\\" d=\\"M4.4029,5.7765a.852.852,0,0,0-.183.2151L.75,3.3215a5.78,5.78,0,0,1,1.1-1.11ZM9.15,2.2216,6.6059,5.7824a1.3786,1.3786,0,0,1,.1841.1992l3.47-2.66A5.78,5.78,0,0,0,9.15,2.2216ZM5.37,7.0087a1,1,0,1,0,1.122.8609A1,1,0,0,0,5.37,7.0087ZM4.72,1.0216a5.7742,5.7742,0,0,0-1.52.41L4.9676,5.4353a.815.815,0,0,1,.2382-.0618Zm1.56.01L5.8265,5.3853a.7611.7611,0,0,1,.2059.0441L7.79,1.4315A5.5185,5.5185,0,0,0,6.28,1.0316Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"viewpoint-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"cf3b542b-d2af-4732-9b92-9e3dc05e460f\\" d=\\"M6.02,8.425a2.3859,2.3859,0,0,0-.46.44l-4.55-3.5a7.9976,7.9976,0,0,1,1.51-1.51Zm6.46-4.56-3.5,4.55a2.3971,2.3971,0,0,1,.45.45l4.56-3.5A7.945,7.945,0,0,0,12.48,3.865ZM7.3042,10.0129a1.5,1.5,0,1,0,1.6829,1.2914h0A1.5,1.5,0,0,0,7.3042,10.0129ZM6.43,2.235a7.9329,7.9329,0,0,0-2.06.55l2.2,5.32a2.0438,2.0438,0,0,1,.61-.17Zm2.14.01-.75,5.69a2.49,2.49,0,0,1,.61.16l2.2-5.3A7.2129,7.2129,0,0,0,8.57,2.245Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"village-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M2.777,2.3.3,5.6a.272.272,0,0,0-.05.15A.25.25,0,0,0,.5,6H1V9.745A.255.255,0,0,0,1.255,10h2.49A.255.255,0,0,0,4,9.745H4V5.467A.253.253,0,0,1,4.064,5.3L5,4.5,3.2,2.316A.255.255,0,0,0,2.777,2.3ZM3,7H2V6H3ZM9.75,3h-.5A.25.25,0,0,0,9,3.25V5.2L7.658,4.126a.253.253,0,0,0-.316,0L5.1,5.926a.253.253,0,0,0-.095.2V9.747A.253.253,0,0,0,5.253,10H6.747A.253.253,0,0,0,7,9.747H7V8H8V9.747A.253.253,0,0,0,8.253,10H9.747A.253.253,0,0,0,10,9.747h0V3.25A.25.25,0,0,0,9.75,3ZM7,7H6V6H7ZM9,7H8V6H9Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"village-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M6.176,4.176a.249.249,0,0,0-.352,0l-4.4,4.4A.25.25,0,0,0,1.6,9H3v4.751A.249.249,0,0,0,3.249,14h3.5A.249.249,0,0,0,7,13.753H7V8.323a.249.249,0,0,1,.073-.176L8.5,6.5ZM6,12H5V11H6Zm0-2H5V9H6Zm6.75-4h-.5a.25.25,0,0,0-.25.25V8L10.676,6.176a.249.249,0,0,0-.352,0L8.056,8.932A.246.246,0,0,0,8,9.088v4.66A.249.249,0,0,0,8.246,14h1.5A.253.253,0,0,0,10,13.748h0V12h1v1.747a.253.253,0,0,0,.253.253h1.5A.25.25,0,0,0,13,13.751V6.25A.25.25,0,0,0,12.75,6ZM10,11H9V10h1Zm2,0H11V10h1Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"volcano-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect3338\\" d=\\"M3,1l1.5,3h2L8,3V2L6,3V1H5.5L5,2.5L3.5,1H3z M3.5215,5l-2.498,4.1602C0.8007,9.5296,1.0679,9.9999,1.5,10h8&#xA;&#x9;c0.4321-0.0001,0.6993-0.4704,0.4766-0.8398L7.4785,5H7v0.5C7,5.777,6.777,6,6.5,6S6,5.777,6,5.5C6,5.2239,5.7761,5,5.5,5&#xA;&#x9;S5,5.2239,5,5.5v2C5,7.777,4.777,8,4.5,8S4,7.777,4,7.5V5H3.5215z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"volcano-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path6447\\" d=\\"M8.4844,1.0002&#xA;&#x9;c-0.1464,0.005-0.2835,0.0731-0.375,0.1875L6.4492,3.2619L4.8438,1.7385C4.4079,1.3374,3.7599,1.893,4.0899,2.385l1.666,2.4004&#xA;&#x9;C5.9472,5.061,6.3503,5.0737,6.5586,4.8108C6.7249,4.6009,7,4.133,7.5,4.133s0.7929,0.4907,0.9414,0.6777&#xA;&#x9;c0.175,0.2204,0.4973,0.2531,0.7129,0.0723l1.668-1.4004c0.4408-0.3741,0.0006-1.0735-0.5273-0.8379L9,3.2268V1.5002&#xA;&#x9;C9.0002,1.2179,8.7666,0.9915,8.4844,1.0002L8.4844,1.0002z M5,6.0002L2.0762,11.924C1.9993,12.0009,2,12.155,2,12.3088&#xA;&#x9;c0,0.5385,0.3837,0.6914,0.6914,0.6914h9.6172c0.3846,0,0.6914-0.153,0.6914-0.6914c0-0.1538,0.0008-0.2309-0.0762-0.3848L10,6.0002&#xA;&#x9;c-0.5,0-1,0.5-1,1v0.5c0,0.277-0.223,0.5-0.5,0.5S8,7.7772,8,7.5002v-0.5c0-0.2761-0.2238-0.5-0.5-0.5S7,6.7241,7,7.0002v2&#xA;&#x9;c0,0.277-0.223,0.5-0.5,0.5S6,9.2772,6,9.0002v-2C6,6.5002,5.5,6.0002,5,6.0002z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"volleyball-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.99,5.73a3.6572,3.6572,0,0,1-.1.74A6.3224,6.3224,0,0,0,7.44,5.05a5.9537,5.9537,0,0,0-1.32-.27c-.03,0-.07-.01-.11-.01A4.6052,4.6052,0,0,1,5.5,3.64a1.0563,1.0563,0,0,1-.06-.24h.12a4.8784,4.8784,0,0,1,1.01.11,5.0388,5.0388,0,0,1,1.14.36,4.8341,4.8341,0,0,1,.94.53A5.1356,5.1356,0,0,1,9.99,5.73ZM9.33,7.31a5.1964,5.1964,0,0,0-1.36-.97c-.05.1-.11.19-.17.29a5.8645,5.8645,0,0,1-.59.82,7.1807,7.1807,0,0,1-.78.78,6.72,6.72,0,0,1-.93.65,6.3643,6.3643,0,0,1-1.86.72,4.524,4.524,0,0,0,3.72,0,4.1584,4.1584,0,0,0,1.25-.86,3.1983,3.1983,0,0,0,.43-.47,3.7473,3.7473,0,0,0,.48-.76A1.1915,1.1915,0,0,0,9.33,7.31ZM8.68,2.32a4.5077,4.5077,0,0,0-1.24-.88,3.979,3.979,0,0,0-.75-.28,4.3423,4.3423,0,0,0-1.03-.15,1.2787,1.2787,0,0,0-.32,0A5.3628,5.3628,0,0,0,5.25,2c0,.14.01.28.02.41a1.6165,1.6165,0,0,1,.22-.01,1.9237,1.9237,0,0,1,.24.01,6.6508,6.6508,0,0,1,1,.11,5.6947,5.6947,0,0,1,1,.28,6.7814,6.7814,0,0,1,1.02.47,6.6645,6.6645,0,0,1,.98.69A4.5655,4.5655,0,0,0,8.68,2.32ZM3.03,6.34a5.808,5.808,0,0,1-.4-.92,5.7849,5.7849,0,0,1-.28-1.03,6.86,6.86,0,0,1-.1-1.12V3.25a5.656,5.656,0,0,1,.07-.93A4.3939,4.3939,0,0,0,1.27,3.97,4.3206,4.3206,0,0,0,1,5.5a1.7671,1.7671,0,0,0,.01.23,4.4161,4.4161,0,0,0,.09.73,4.0749,4.0749,0,0,0,.31.91,1.0685,1.0685,0,0,0,.27-.07A5.0679,5.0679,0,0,0,3.2,6.63C3.14,6.53,3.08,6.44,3.03,6.34Zm3.88-.4a5.4992,5.4992,0,0,0-1.35-.19c-.02.03-.04.05-.06.08a6.2466,6.2466,0,0,1-.91,1.01,5.8334,5.8334,0,0,1-.8.61,6.5727,6.5727,0,0,1-1.83.82,3.1983,3.1983,0,0,0,.43.47,5.1724,5.1724,0,0,0,2.18-.51,5.4146,5.4146,0,0,0,.93-.55,5.5958,5.5958,0,0,0,.91-.84A4.8049,4.8049,0,0,0,7,6.01a.0517.0517,0,0,0,.02-.04A.2283.2283,0,0,0,6.91,5.94ZM4.88,4.78a5.6391,5.6391,0,0,1-.45-1.27,6.3861,6.3861,0,0,1-.16-.99c-.01-.17-.02-.35-.02-.52a5.83,5.83,0,0,1,.06-.84,3.9815,3.9815,0,0,0-.75.28A5.5806,5.5806,0,0,0,3.27,2.8c-.01.15-.02.3-.02.45a4.2153,4.2153,0,0,0,.04.62,4.7107,4.7107,0,0,0,.27,1.18,5.0984,5.0984,0,0,0,.42.92A.0517.0517,0,0,0,4,6.01a.1778.1778,0,0,0,.08-.07h.01a5.6817,5.6817,0,0,0,.84-1.06A.3131.3131,0,0,1,4.88,4.78Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"volleyball-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"e086ca83-8703-4df5-a97c-5939eb32113a\\" d=\\"M13.91,7.94a5.9086,5.9086,0,0,1-.13.94,8.8218,8.8218,0,0,0-2.17-1.49,8.89,8.89,0,0,0-1.4-.56,8.6142,8.6142,0,0,0-1.82-.35.221.221,0,0,0-.08-.01A7.32,7.32,0,0,1,7.5,4.59c-.01-.01-.01-.01,0-.02a7.7573,7.7573,0,0,1,1.52.15,7.0987,7.0987,0,0,1,1.56.5,6.8585,6.8585,0,0,1,1.4.78A7.4165,7.4165,0,0,1,13.91,7.94Zm-1.87-5a6.2232,6.2232,0,0,0-1.85-1.27,4.2725,4.2725,0,0,0-.98-.36,5.6412,5.6412,0,0,0-1.55-.23,1.2882,1.2882,0,0,0-.32,0A7.4263,7.4263,0,0,0,7.21,2.5c0,.2.01.39.02.58a2.28,2.28,0,0,1,.26-.01,2.6438,2.6438,0,0,1,.28.01,8.2865,8.2865,0,0,1,1.49.16,8.9879,8.9879,0,0,1,1.35.37,8.7922,8.7922,0,0,1,1.53.7,10.18,10.18,0,0,1,1.39.97A6.4588,6.4588,0,0,0,12.04,2.94ZM4.01,8.76a9.4084,9.4084,0,0,1-.62-1.37,9.1038,9.1038,0,0,1-.37-1.41,9.1748,9.1748,0,0,1-.16-1.67V4.28a8.455,8.455,0,0,1,.1-1.34A6.28,6.28,0,0,0,1.47,5.3a6.2222,6.2222,0,0,0-.4,2.2c0,.15.01.3.02.44a5.9086,5.9086,0,0,0,.13.94,5.7343,5.7343,0,0,0,.41,1.23c.22-.05.44-.11.65-.17a8.0188,8.0188,0,0,0,1.9-.88C4.12,8.96,4.06,8.86,4.01,8.76Zm2.6-2.28a9,9,0,0,1-.63-1.76,9.135,9.135,0,0,1-.24-1.48c-.02-.25-.03-.49-.03-.74a9.3777,9.3777,0,0,1,.08-1.19,4.2725,4.2725,0,0,0-.98.36,7.7038,7.7038,0,0,0-.42,1.94c-.02.22-.03.44-.03.67a7.2659,7.2659,0,0,0,.06.93,7.4258,7.4258,0,0,0,.37,1.63,6.4705,6.4705,0,0,0,.59,1.28A8.0174,8.0174,0,0,0,6.65,6.55.2522.2522,0,0,1,6.61,6.48ZM12.7,9.93s0-.01-.01,0a7.0128,7.0128,0,0,0-1.7-1.16c-.06.1-.11.19-.17.29a8.783,8.783,0,0,1-.88,1.22,8.9125,8.9125,0,0,1-1.06,1.07,10.4181,10.4181,0,0,1-1.38.98,8.9933,8.9933,0,0,1-2.64,1.02,6.2985,6.2985,0,0,0,5.28,0,5.9674,5.9674,0,0,0,2.42-1.89,4.8258,4.8258,0,0,0,.65-1.03A6.0315,6.0315,0,0,0,12.7,9.93Zm-5.17-2c-.01.01-.02.03-.03.04a9.26,9.26,0,0,1-1.25,1.4,9.5925,9.5925,0,0,1-1.19.91,9.2683,9.2683,0,0,1-2.62,1.18,6.0989,6.0989,0,0,0,.53.61,7.7353,7.7353,0,0,0,3.15-.72,7.3839,7.3839,0,0,0,1.38-.82A7.6429,7.6429,0,0,0,8.75,9.37a7.7441,7.7441,0,0,0,.82-1.15A7.3414,7.3414,0,0,0,7.53,7.93Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"warehouse-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M3,11H0V8h3V11z M7,8H4v3h3V8z M11,8H8v3h3V8z M5,4H2v3h3V4z M9,4H6v3h3V4z M10.44,3.24&#xA;&#x9;c0.1349-0.2403,0.0499-0.5444-0.19-0.68l-4.5-2.5c-0.1521-0.0855-0.3379-0.0855-0.49,0l-4.5,2.5&#xA;&#x9;C0.5272,2.7085,0.4588,3.0176,0.6073,3.2504C0.7444,3.4654,1.0213,3.5428,1.25,3.43L5.5,1.07l4.26,2.37&#xA;&#x9;c0.2421,0.1328,0.546,0.0442,0.6789-0.1979C10.4392,3.2414,10.4396,3.2407,10.44,3.24z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"warehouse-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.5,5c-0.0762,0.0003-0.1514-0.0168-0.22-0.05L7.5,2L1.72,4.93C1.4632,5.0515,1.1565,4.9418,1.035,4.685&#xA;&#x9;S1.0232,4.1215,1.28,4L7.5,0.92L13.72,4c0.2761,0.0608,0.4508,0.3339,0.39,0.61C14.0492,4.8861,13.7761,5.0608,13.5,5z M5,10H2v3h3&#xA;&#x9;V10z M9,10H6v3h3V10z M13,10h-3v3h3V10z M11,6H8v3h3V6z M7,6H4v3h3V6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"waste-basket-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9,4l-1.17,7H3.17L2,4H9z M9.25,2.25C9.25,2.3881,9.1381,2.5,9,2.5H2c-0.1381,0-0.25-0.1119-0.25-0.25S1.8619,2,2,2h2V0h3&#xA;&#x9;v0.5l0,0V2h2C9.1381,2,9.25,2.1119,9.25,2.25z M6.5,2V0.5h-2V2H6.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"waste-basket-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M12.41,5.58l-1.34,8c-0.0433,0.2368-0.2493,0.4091-0.49,0.41H4.42c-0.2407-0.0009-0.4467-0.1732-0.49-0.41l-1.34-8&#xA;&#x9;C2.5458,5.3074,2.731,5.0506,3.0035,5.0064C3.0288,5.0023,3.0544,5.0002,3.08,5h8.83c0.2761-0.0036,0.5028,0.2174,0.5064,0.4935&#xA;&#x9;C12.4168,5.5225,12.4146,5.5514,12.41,5.58z M13,3.5C13,3.7761,12.7761,4,12.5,4h-10C2.2239,4,2,3.7761,2,3.5S2.2239,3,2.5,3H5V1.5&#xA;&#x9;C5,1.2239,5.2239,1,5.5,1h4C9.7761,1,10,1.2239,10,1.5V3h2.5C12.7761,3,13,3.2239,13,3.5z M9,3V2H6v1H9z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"watch-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <g>\\n    <path d=\\"M9.0769,5.1538H8.9651C8.8412,3.9112,8.0789,2.8648,7,2.3497V1H4v1.3497C2.8208,2.9127,2,4.1062,2,5.5&#xA;&#x9;&#x9;s0.8208,2.5873,2,3.1503V10h3V8.6503c1.0789-0.5151,1.8413-1.5615,1.9651-2.8041h0.1118c0.1912,0,0.3462-0.155,0.3462-0.3461&#xA;&#x9;&#x9;S9.2681,5.1538,9.0769,5.1538z M5.5,8C4.1193,8,3,6.8807,3,5.5C3,4.1193,4.1193,3,5.5,3S8,4.1193,8,5.5C8,6.8807,6.8807,8,5.5,8z\\"/>\\n    <path d=\\"M6.5,5H6V4c0-0.2762-0.2239-0.5-0.5-0.5S5,3.7238,5,4v1.5C5,5.7761,5.2239,6,5.5,6h1C6.7761,6,7,5.7761,7,5.5&#xA;&#x9;&#x9;C7,5.2238,6.7761,5,6.5,5z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"watch-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M12.5,7H12c-0.0175,0-0.0323,0.0082-0.0494,0.0099C11.8021,5.6575,11.0757,4.4804,10,3.7599V1.4977&#xA;&#x9;&#x9;C10,1.2228,9.7772,1,9.5023,1H5.4977C5.2228,1,5,1.2228,5,1.4977v2.2621C3.7946,4.5673,3,5.9402,3,7.5s0.7946,2.9327,2,3.7401&#xA;&#x9;&#x9;v2.2621C5,13.7771,5.2228,14,5.4977,14h4.0045C9.7772,14,10,13.7771,10,13.5022v-2.2621c1.0757-0.7205,1.8021-1.8976,1.9506-3.2501&#xA;&#x9;&#x9;C11.9677,7.9918,11.9825,8,12,8h0.5C12.7761,8,13,7.7761,13,7.5C13,7.2238,12.7761,7,12.5,7z M7.5,11C5.567,11,4,9.433,4,7.5&#xA;&#x9;&#x9;S5.567,4,7.5,4S11,5.567,11,7.5S9.433,11,7.5,11z\\"/>\\n  <path d=\\"M9,7H8V5.5C8,5.2238,7.7761,5,7.5,5S7,5.2238,7,5.5v2C7,7.7761,7.2239,8,7.5,8H9c0.2761,0,0.5-0.2239,0.5-0.5&#xA;&#x9;&#x9;C9.5,7.2238,9.2761,7,9,7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"water-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.5,11C3.59,11,2,9,2,7s2.61-5.81,3.5-7C6.39,1.19,9,5,9,7S7.41,11,5.5,11z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"water-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M7.49,15C4.5288,14.827,2.1676,12.4615,2,9.5C2,6.6,6.25,1.66,7.49,0c1.24,1.66,5,6.59,5,9.49S10.17,15,7.49,15z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"waterfall-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.9,2H11V1H4C2.4,1,1,2.2,1,3.9c0,0,0,0,0,0c0,0,0,3.4,0,3.4C0,7.8-0.3,9,0.3,10c0.6,1,1.8,1.3,2.7,0.7&#xA;&#x9;c0.7,0.4,1.7,0.3,2.3-0.2c1.4,0.9,3.2,0.6,4.2-0.8c0.9-1.4,0.6-3.2-0.8-4.2C8.5,5.4,8.2,5.3,8,5.2V4C8,2.9,8.8,2,9.9,2z M9,8&#xA;&#x9;c0,1.1-0.9,2-2,2c-1,0-1.1-0.3-1.3-0.5H4.9C4.7,9.7,4.5,10,4,10S3.3,9.8,3.2,9.5H2.8C2.7,9.8,2.4,10,2,10c-0.6,0-1-0.4-1-1&#xA;&#x9;s0.4-1,1-1V7V5c0,0,0-0.5,0.5-0.5S3,5,3,5v2.5C3,7.5,3,8,3.5,8S4,7.5,4,7.5V6c0,0,0-0.5,0.5-0.5S5,6,5,6v1.5C5,7.5,5,8,5.5,8&#xA;&#x9;S6,7.5,6,7.5V5c0,0,0-0.5,0.5-0.5S7,5,7,5v1C8.1,6,9,6.9,9,8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"waterfall-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M12.9,3H15V1H5c0,0-4,0-4,4v5.5h0c-1.1,0.8-1.3,2.4-0.5,3.5s2.4,1.3,3.5,0.5c1,0.8,2.5,0.6,3.4-0.4C8,14.7,8.9,15,9.8,15&#xA;&#x9;c2.1,0,3.7-1.6,3.8-3.7c0-1.6-1-3-2.5-3.5V5C11,3.9,11.8,3,12.9,3z M10,8v0.5c1.5,0.1,2.6,1.5,2.5,3c-0.1,1.4-1.3,2.5-2.7,2.5&#xA;&#x9;c-1.1,0.1-1.8-0.6-2.1-1H6.9c-0.1,0.2-0.4,1-1.4,1s-1.3-0.6-1.4-1H3.9c-0.2,0.4-0.5,0.8-0.9,0.9c-0.9,0.3-1.7-0.2-1.9-1&#xA;&#x9;c-0.2-0.8,0.2-1.6,0.9-1.8V6c0-0.5,0.4-1,1-1c0,0,0,0,0,0h0c0.5,0,1,0.4,1,1c0,0,0,0,0,0c0,0,0,0,0,0v4.5C4,10.8,4.2,11,4.5,11&#xA;&#x9;S5,10.8,5,10.5V7c0-0.6,0.4-1,1-1s1,0.4,1,1v3.5C7,10.8,7.2,11,7.5,11S8,10.8,8,10.5V6c0-0.6,0.4-1,1-1s1,0.4,1,1V8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"watermill-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.9874,4.375C9.9216,2.5436,8.4563,1.0784,6.625,1.0126V1h-0.25v0.0126C5.274,1.0521,4.3123,1.6034,3.7004,2.4301L2.5059,1&#xA;&#x9;L0,4h1v4l1.8-1l1.8,1l1.1202-0.6218C5.2513,7.2512,4.825,7.021,4.4765,6.7003L6.252,4.9247c0.0385,0.0226,0.0788,0.0383,0.123,0.05&#xA;&#x9;v2.0399L6.4014,7L6.625,7.1243V4.9747c0.0442-0.0117,0.0845-0.0274,0.123-0.05l1.7755,1.7755&#xA;&#x9;C8.1429,7.0505,7.6736,7.3016,7.1526,7.4177l0.5937,0.3301C9.0195,7.2596,9.9359,6.0602,9.9874,4.625H10v-0.25H9.9874z&#xA;&#x9; M4.2997,6.5235C3.8347,6.0182,3.5435,5.3568,3.5126,4.625h2.5126c0.0117,0.0442,0.0274,0.0845,0.05,0.123L4.2997,6.5235z&#xA;&#x9; M6.0253,4.375H3.5126c0.0308-0.7318,0.3221-1.3932,0.7871-1.8985L6.0753,4.252C6.0527,4.2905,6.037,4.3308,6.0253,4.375z&#xA;&#x9; M6.375,4.0253c-0.0442,0.0117-0.0845,0.0274-0.123,0.05L4.4765,2.2997c0.5053-0.465,1.1667-0.7563,1.8985-0.7871V4.0253z&#xA;&#x9; M6.625,4.0253V1.5126c0.7318,0.0308,1.3932,0.3221,1.8985,0.7871L6.748,4.0753C6.7095,4.0527,6.6692,4.037,6.625,4.0253z&#xA;&#x9; M8.7003,6.5235L6.9247,4.748c0.0226-0.0385,0.0383-0.0788,0.05-0.123h2.5126C9.4565,5.3568,9.1653,6.0182,8.7003,6.5235z&#xA;&#x9; M6.9747,4.375c-0.0117-0.0442-0.0274-0.0845-0.05-0.123l1.7755-1.7755c0.465,0.5053,0.7563,1.1667,0.7871,1.8985H6.9747z M6.4014,8&#xA;&#x9;L4.6,9L3.808,8.56l0,0L2.8,8L1.792,8.56l0,0L1,9v1l1.8-1l1.8,1l1.8014-1L8.2,10L10,9V8L8.2,9L6.4014,8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"watermill-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M2,10.2L4,9l2.5,1.5l1.4659-0.8788C7.6592,9.4698,7.3716,9.285,7.1231,9.0536l1.4131-1.4131&#xA;&#x9;C8.7672,7.836,9.0557,7.9606,9.375,7.9874V9.224l0.25,0.1501V7.9874c0.3193-0.0268,0.6078-0.1514,0.8388-0.3469l1.4131,1.4131&#xA;&#x9;c-0.4059,0.3781-0.9044,0.6492-1.4528,0.8003L11.5,10.5l0.6984-0.4191C13.2863,9.2595,14,7.9682,14,6.5C14,4.0147,11.9853,2,9.5,2&#xA;&#x9;C8.1917,2,7.0241,2.5674,6.2018,3.4587L4.5,2L1,5h1V10.2z M12.0536,8.8769l-1.4131-1.4131c0.1954-0.231,0.3201-0.5196,0.3469-0.8388&#xA;&#x9;h1.9999C12.956,7.4946,12.6089,8.2806,12.0536,8.8769z M12.9874,6.375h-1.9999c-0.0268-0.3193-0.1514-0.6078-0.3469-0.8388&#xA;&#x9;l1.4131-1.4131C12.6089,4.7193,12.956,5.5054,12.9874,6.375z M9.625,3.0126c0.8696,0.0314,1.6557,0.3784,2.2519,0.9337&#xA;&#x9;l-1.4131,1.4131c-0.231-0.1954-0.5196-0.32-0.8388-0.3468C9.625,5.0126,9.625,3.0126,9.625,3.0126z M9.375,3.0126v1.9999&#xA;&#x9;C9.0558,5.0394,8.7672,5.164,8.5362,5.3594L7.1231,3.9463C7.7193,3.3911,8.5054,3.044,9.375,3.0126z M6.9464,4.1231l1.4131,1.4131&#xA;&#x9;C8.164,5.7672,8.0394,6.0557,8.0126,6.375h-2C6.044,5.5054,6.3911,4.7193,6.9464,4.1231z M8.0126,6.625&#xA;&#x9;c0.0268,0.3192,0.1515,0.6078,0.3469,0.8388L6.9464,8.8769C6.3911,8.2807,6.044,7.4946,6.0126,6.625H8.0126z M9.002,10L6.5,11.5&#xA;&#x9;L4,10l-2.5,1.5V13L4,11.5L6.5,13l2.502-1.5L11.5,13l2.5-1.5V10l-2.5,1.5L9.002,10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"wetland-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M1.11,3.33C1.4171,3.0907,1.8016,2.9732,2.19,3C3.0659,2.9354,3.8483,3.5449,4,4.41L4.57,7.8&#xA;&#x9;c-0.455-0.219-0.985-0.219-1.44,0L2.56,4.41C2.3459,3.7852,1.7699,3.3562,1.11,3.33z M5.45,8.21&#xA;&#x9;c0.276-0.2223,0.5966-0.3826,0.94-0.47l0.9-5.5c0.2141-0.6248,0.7901-1.0538,1.45-1.08C8.4346,0.9076,8.0456,0.7791,7.65,0.8&#xA;&#x9;C6.7643,0.7373,5.978,1.3629,5.84,2.24L4.9,7.88C5.0968,7.9658,5.2817,8.0767,5.45,8.21z M8.58,7.85L8.58,7.85&#xA;&#x9;C8.6925,7.7563,8.8129,7.6727,8.94,7.6l0.5-3.21c0.2108-0.6287,0.7875-1.0622,1.45-1.09c-0.3054-0.2524-0.6944-0.3809-1.09-0.36&#xA;&#x9;C8.9147,2.8833,8.1331,3.5129,8,4.39l-0.48,3c0.3812,0.0689,0.7409,0.2264,1.05,0.46H8.58z M10.14,8.75L10.14,8.75&#xA;&#x9;c-0.3136-0.0079-0.6193,0.0988-0.86,0.3l-0.34,0.3c-0.2017,0.1717-0.4983,0.1717-0.7,0L7.91,9.07&#xA;&#x9;c-0.5123-0.4282-1.2577-0.4282-1.77,0L5.8,9.37c-0.2,0.1661-0.49,0.1661-0.69,0L4.77,9.05C4.2553,8.6247,3.5099,8.6289,3,9.06&#xA;&#x9;C2.89,9.15,2.79,9.25,2.68,9.34C2.6141,9.3899,2.5395,9.4272,2.46,9.45C2.2484,9.4973,2.0276,9.4288,1.88,9.27&#xA;&#x9;C1.7014,9.1151,1.5108,8.9747,1.31,8.85C1.1537,8.7667,0.9762,8.7318,0.8,8.75l0,0c-0.1988,0-0.36,0.1612-0.36,0.36&#xA;&#x9;c0,0.1988,0.1612,0.36,0.36,0.36l0,0C0.9778,9.4824,1.1434,9.5652,1.26,9.7l0.22,0.2c0.4962,0.3888,1.1938,0.3888,1.69,0&#xA;&#x9;c0.14-0.1,0.26-0.23,0.4-0.34c0.2034-0.1775,0.5066-0.1775,0.71,0l0.25,0.29c0.514,0.4338,1.266,0.4338,1.78,0&#xA;&#x9;c0.11-0.08,0.2-0.18,0.3-0.27c0.2185-0.2174,0.5715-0.2174,0.79,0l0.29,0.3c0.3601,0.3115,0.8561,0.4138,1.31,0.27&#xA;&#x9;c0.2642-0.0794,0.5024-0.2278,0.69-0.43c0.1208-0.1486,0.2987-0.2394,0.49-0.25l0,0c0.2016-0.0138,0.3538-0.1884,0.34-0.39&#xA;&#x9;s-0.1884-0.3538-0.39-0.34L10.14,8.75z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"wetland-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M1.48,4.5C1.905,4.1467,2.4483,3.968,3,4c1.2273-0.0869,2.3154,0.7836,2.5,2l0.78,4.68c-0.6394-0.2893-1.3759-0.2709-2,0.05&#xA;&#x9;L3.48,6C3.1874,5.1347,2.3926,4.5387,1.48,4.5z M7.48,11.24c0.3816-0.3076,0.825-0.5293,1.3-0.65L10,3&#xA;&#x9;c0.2926-0.8653,1.0874-1.4613,2-1.5c-0.4198-0.3485-0.955-0.5269-1.5-0.5C9.2727,0.9131,8.1846,1.7836,8,3l-1.3,7.79&#xA;&#x9;C6.9786,10.9052,7.2408,11.0565,7.48,11.24z M11.8,10.74L11.8,10.74c0.1565-0.1277,0.3238-0.2414,0.5-0.34L13,6&#xA;&#x9;c0.2926-0.8653,1.0874-1.4613,2-1.5c-0.4198-0.3485-0.955-0.5269-1.5-0.5c-1.2273-0.0869-2.3154,0.7836-2.5,2l-0.67,4&#xA;&#x9;C10.8731,10.123,11.3778,10.377,11.8,10.74z M14,12L14,12c-0.4346-0.01-0.8579,0.1394-1.19,0.42l-0.47,0.41&#xA;&#x9;c-0.2847,0.2546-0.7153,0.2546-1,0c-0.15-0.12-0.29-0.26-0.44-0.39c-0.7076-0.5968-1.7424-0.5968-2.45,0&#xA;&#x9;c-0.16,0.13-0.31,0.28-0.47,0.41c-0.2847,0.2546-0.7153,0.2546-1,0c-0.16-0.13-0.31-0.28-0.47-0.41&#xA;&#x9;c-0.7059-0.5912-1.7341-0.5912-2.44,0c-0.15,0.13-0.29,0.27-0.44,0.39c-0.0892,0.0715-0.1909,0.1258-0.3,0.16&#xA;&#x9;c-0.2922,0.0652-0.5969-0.0301-0.8-0.25c-0.2475-0.214-0.5117-0.4079-0.79-0.58C1.5336,12.0421,1.2974,11.9865,1.06,12H1&#xA;&#x9;c-0.2761,0-0.5,0.2239-0.5,0.5S0.7239,13,1,13l0,0c0.246,0.0145,0.4762,0.126,0.64,0.31L2,13.57&#xA;&#x9;c0.6717,0.55,1.6308,0.5747,2.33,0.06c0.19-0.14,0.36-0.32,0.55-0.47c0.2847-0.2546,0.7153-0.2546,1,0l0.39,0.35&#xA;&#x9;c0.6937,0.6189,1.7322,0.6484,2.46,0.07c0.15-0.11,0.27-0.25,0.42-0.37c0.2976-0.3038,0.7851-0.3087,1.0889-0.0111&#xA;&#x9;c0.0037,0.0037,0.0074,0.0074,0.0111,0.0111l0.39,0.35c0.4866,0.4124,1.1485,0.5516,1.76,0.37c0.3825-0.1036,0.7286-0.3113,1-0.6&#xA;&#x9;c0.1549-0.1772,0.3674-0.294,0.6-0.33l0,0c0.2761,0,0.5-0.2239,0.5-0.5S14.2761,12,14,12z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"wheelchair-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9,2c0,0.5523-0.4477,1-1,1S7,2.5523,7,2s0.4477-1,1-1S9,1.4477,9,2z M2.5,4c0.0595,0.0109,0.1205,0.0109,0.18,0l0,0&#xA;&#x9;l1.79-0.83l0.46,0.48L4.39,4.5c0.7851,0.1244,1.5102,0.4957,2.07,1.06l0.44-0.8c0.1914-0.2972,0.1057-0.6932-0.1915-0.8846&#xA;&#x9;C6.7057,3.8736,6.7029,3.8718,6.7,3.87L4.85,2.15l0,0C4.7176,1.9875,4.4965,1.9272,4.3,2l0,0l-2,1l0,0&#xA;&#x9;C2.0239,3.0552,1.8448,3.3239,1.9,3.6S2.2239,4.0552,2.5,4z M6.59,8.2C6.5854,8.7633,6.4074,9.3115,6.08,9.77&#xA;&#x9;c-0.1844,0.2837-0.4263,0.5256-0.71,0.71C4.9099,10.8129,4.3578,10.9946,3.79,11C2.2475,10.9945,1,9.7425,1,8.2&#xA;&#x9;c0.0054-0.5678,0.1871-1.1199,0.52-1.58c0.2059-0.2655,0.4445-0.5041,0.71-0.71C2.6857,5.5846,3.2301,5.4066,3.79,5.4&#xA;&#x9;C5.3364,5.4,6.59,6.6536,6.59,8.2L6.59,8.2z M5.19,8.89C5.3032,8.6772,5.3648,8.4409,5.37,8.2C5.3645,7.3313,4.6587,6.63,3.79,6.63&#xA;&#x9;C3.5491,6.6352,3.3127,6.6968,3.1,6.81c-0.2885,0.1742-0.5317,0.414-0.71,0.7c-0.1147,0.2158-0.1764,0.4557-0.18,0.7&#xA;&#x9;c0.0055,0.8687,0.7113,1.57,1.58,1.57c0.2443-0.0036,0.4843-0.0653,0.7-0.18C4.7824,9.4299,5.024,9.1848,5.19,8.89z M9,6.4&#xA;&#x9;C8.9544,6.149,8.7238,5.9751,8.47,6H6.82c0.223,0.3051,0.3983,0.6423,0.52,1H8l1,2.59c0.0475,0.2328,0.2524,0.4,0.49,0.4h0.1&#xA;&#x9;c0.2725-0.0445,0.4574-0.3015,0.4129-0.5741C10.002,9.4106,10.001,9.4053,10,9.4L9,6.4z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"wheelchair-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M12,1.5C12,2.3284,11.3284,3,10.5,3S9,2.3284,9,1.5S9.6716,0,10.5,0S12,0.6716,12,1.5z M2.82,4.87l1.74-1.71l1.85,1.29&#xA;&#x9;L5.67,5.7c1.0747,0.3341,2.0207,0.9904,2.71,1.88l0.88-1.5c0.2295-0.4158,0.0785-0.939-0.3373-1.1685&#xA;&#x9;C8.9218,4.911,8.9209,4.9105,8.92,4.91L8.3,4.54L4.79,2.1C4.5927,1.9594,4.3231,1.9805,4.15,2.15l-2,2&#xA;&#x9;C1.9852,4.3716,2.0312,4.6848,2.2528,4.8496C2.4193,4.9735,2.645,4.9816,2.82,4.87z M8.13,10.94&#xA;&#x9;c-0.0143,1.2308-0.5794,2.3904-1.54,3.16c-0.7118,0.5804-1.6016,0.8982-2.52,0.9C1.8261,15,0.0055,13.1839,0,10.94&#xA;&#x9;c0.0023-0.9231,0.3238-1.8169,0.91-2.53c0.1868-0.232,0.398-0.4432,0.63-0.63c0.7131-0.5862,1.6069-0.9077,2.53-0.91&#xA;&#x9;C6.3139,6.8755,8.13,8.6961,8.13,10.94z M6,12.21C6.7679,11.2051,6.5758,9.7679,5.5709,9C4.7501,8.3727,3.6109,8.3727,2.79,9&#xA;&#x9;C2.5283,9.151,2.311,9.3683,2.16,9.63c-0.6923,1.0584-0.3956,2.4777,0.6628,3.17c0.7615,0.4981,1.7457,0.4981,2.5072,0&#xA;&#x9;C5.5805,12.6365,5.8061,12.4378,6,12.21z M14.2,13.21l-2.49-5C11.5906,7.9251,11.3088,7.7425,11,7.75H8.51&#xA;&#x9;c0.3293,0.4578,0.5856,0.9638,0.76,1.5h1.26l2.29,4.58c0.185,0.3728,0.6372,0.525,1.01,0.34c0.3728-0.185,0.525-0.6372,0.34-1.01&#xA;&#x9;L14.2,13.21z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"windmill-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M6.375,3.9375L5.9375,3.5L6.375,3.0625h0.4375L9,0.875L8.125,0L5.9375,2.1875V2.625L5.5,3.0625L5.0625,2.625V2.1875L2.875,0&#xA;&#x9;L2,0.875l2.1875,2.1875H4.625L5.0625,3.5L4.625,3.9375H4.1875L2,6.125L2.875,7l2.1875-2.1875V4.375L5.5,3.9375L5.9375,4.375v0.4375&#xA;&#x9;L8.125,7L9,6.125L6.8125,3.9375H6.375z M8.5,10H8L7,7.5L5.5,6L4,7.5L3,10H2.5C2.2239,10,2,10.2238,2,10.5&#xA;&#x9;C2,10.7761,2.2239,11,2.5,11h6C8.7761,11,9,10.7761,9,10.5C9,10.2238,8.7761,10,8.5,10z M6,9.9717C6,9.9873,5.9874,10,5.9717,10&#xA;&#x9;H5.0283C5.0126,10,5,9.9873,5,9.9717v-0.972C5,8.7238,5.2238,8.5,5.4998,8.5C5.7761,8.5,6,8.7239,6,9.0002V9.9717z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"windmill-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M6,5L3.5,7.5l1,1L7,6V5.5L7.5,5L8,5.5V6l2.5,2.5l1-1L9,5H8.5L8,4.5L8.5,4H9l2.5-2.5l-1-1L8,3v0.5L7.5,4L7,3.5V3L4.5,0.5&#xA;&#x9;l-1,1L6,4h0.5L7,4.5L6.5,5H6z M11.5,13h-1l-1-4l-2-2l-2,2l-1,4h-1C3.2239,13,3,13.2238,3,13.5C3,13.7761,3.2239,14,3.5,14h8&#xA;&#x9;c0.2761,0,0.5-0.2239,0.5-0.5C12,13.2238,11.7761,13,11.5,13z M8,13H7v-1.5024C7,11.2228,7.2228,11,7.4976,11&#xA;&#x9;C7.7751,11,8,11.2249,8,11.5024V13z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"zoo-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8,2C7.1,2,6.5,2.5,6.2,3.1C6.2,3.1,5.5,4,5,4H3C2.5,4,2,4.5,2,4.5l-2,2V7h0.5l1.2-1.2L1.9,6&#xA;&#x9;C1.9,6,1,7.7,1,9c0,0.5,0.5,0.5,0.5,0.5H2c0,0,0.2,0,0-0.2L1.8,9.1c0-0.5,0.8-1.4,1.2-1.9c0,0,0,0.8,0,1.4&#xA;&#x9;c0,0.3,0.1111,0.9,0.4111,0.9h0.5c0,0,0.2,0,0-0.2l-0.2-0.2C3.5111,8.7,4.3,7.5,4.3,7.5h1.8L6.6,9c0.2,0.5,0.5,0.5,0.5,0.5h1&#xA;&#x9;c0.2,0,0.7-0.2,0.2-0.5L8.1,8.8V7l0,0c1,0,1.1-1.3,1.5-1.7l0.7-0.1c0.2,0,0.8-0.2,0.8-0.8V4L9.9,3l0,0C9.4,2.4,8.7,2,8,2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"zoo-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path17499\\" d=\\"&#xA;&#x9;M8.3879,3.8928C8.3879,3.8928,7.6818,5,7,5H4.5C3.8182,5,3.2016,5.4086,2.7273,5.8636L0.5,8C0.231,8.258,0.0072,8.7681,0,9&#xA;&#x9;c-0.0156,0.5,0,1,0,1s1,0,1-1V8.5l1-1h0.5l0.158,0.2892c0,0-0.9535,1.8244-0.9535,3.5289C1.7046,12,2.3864,12,2.3864,12h0.6818&#xA;&#x9;c0,0,0.3409,0,0-0.3409l-0.3409-0.3409C2.7273,10.6364,3.5002,9.6667,4,9c0,0,0.0168,1.1579,0,2c-0.008,0.4096,0.2721,1,0.6818,1&#xA;&#x9;h0.6818c0,0,0.3409,0,0-0.3409l-0.3409-0.3409C4.7105,10.7495,5.5,8.5,5.5,8.5C6.7716,8.5,7,9,8.5,9l0.3636,2.3182&#xA;&#x9;C8.975,12.0282,9.5,12,9.5,12H11c0.3409,0,0.9611-0.3115,0.3409-0.7736L11,11V9c1.2142-0.1722,2-1,2-2h1c0.3214,0,1,0,1-0.5v-1&#xA;&#x9;l-1.7045-1.6818C12.5444,3.0772,12,2.5,11,2.5C9.5469,2.5,8.8636,3.0688,8.3879,3.8928z\\"/>\\n</svg>"]')},function(module){module.exports=JSON.parse('{"aerialway-15":{"width":21,"height":21,"x":0,"y":0,"pixelRatio":1,"sdf":true},"airfield-15":{"width":21,"height":21,"x":21,"y":0,"pixelRatio":1,"sdf":true},"airport-15":{"width":21,"height":21,"x":0,"y":21,"pixelRatio":1,"sdf":true},"alcohol-shop-15":{"width":21,"height":21,"x":21,"y":21,"pixelRatio":1,"sdf":true},"american-football-15":{"width":21,"height":21,"x":42,"y":0,"pixelRatio":1,"sdf":true},"amusement-park-15":{"width":21,"height":21,"x":63,"y":0,"pixelRatio":1,"sdf":true},"aquarium-15":{"width":21,"height":21,"x":42,"y":21,"pixelRatio":1,"sdf":true},"arrow-es-15":{"width":21,"height":21,"x":63,"y":21,"pixelRatio":1,"sdf":true},"art-gallery-15":{"width":21,"height":21,"x":0,"y":42,"pixelRatio":1,"sdf":true},"attraction-15":{"width":21,"height":21,"x":21,"y":42,"pixelRatio":1,"sdf":true},"bakery-15":{"width":21,"height":21,"x":42,"y":42,"pixelRatio":1,"sdf":true},"bank-15":{"width":21,"height":21,"x":63,"y":42,"pixelRatio":1,"sdf":true},"bar-15":{"width":21,"height":21,"x":0,"y":63,"pixelRatio":1,"sdf":true},"barrier-15":{"width":21,"height":21,"x":21,"y":63,"pixelRatio":1,"sdf":true},"baseball-15":{"width":21,"height":21,"x":42,"y":63,"pixelRatio":1,"sdf":true},"basketball-15":{"width":21,"height":21,"x":63,"y":63,"pixelRatio":1,"sdf":true},"bbq-15":{"width":21,"height":21,"x":84,"y":0,"pixelRatio":1,"sdf":true},"beach-15":{"width":21,"height":21,"x":105,"y":0,"pixelRatio":1,"sdf":true},"beer-15":{"width":21,"height":21,"x":126,"y":0,"pixelRatio":1,"sdf":true},"bicycle-15":{"width":21,"height":21,"x":147,"y":0,"pixelRatio":1,"sdf":true},"bicycle-share-15":{"width":21,"height":21,"x":84,"y":21,"pixelRatio":1,"sdf":true},"blood-bank-15":{"width":21,"height":21,"x":105,"y":21,"pixelRatio":1,"sdf":true},"boat-es-15":{"width":21,"height":21,"x":126,"y":21,"pixelRatio":1,"sdf":true},"bowling-alley-15":{"width":21,"height":21,"x":147,"y":21,"pixelRatio":1,"sdf":true},"bridge-15":{"width":21,"height":21,"x":84,"y":42,"pixelRatio":1,"sdf":true},"building-15":{"width":21,"height":21,"x":105,"y":42,"pixelRatio":1,"sdf":true},"building-alt1-15":{"width":21,"height":21,"x":126,"y":42,"pixelRatio":1,"sdf":true},"bus-15":{"width":21,"height":21,"x":147,"y":42,"pixelRatio":1,"sdf":true},"cafe-15":{"width":21,"height":21,"x":84,"y":63,"pixelRatio":1,"sdf":true},"campsite-15":{"width":21,"height":21,"x":105,"y":63,"pixelRatio":1,"sdf":true},"car-15":{"width":21,"height":21,"x":126,"y":63,"pixelRatio":1,"sdf":true},"car-rental-15":{"width":21,"height":21,"x":147,"y":63,"pixelRatio":1,"sdf":true},"car-repair-15":{"width":21,"height":21,"x":0,"y":84,"pixelRatio":1,"sdf":true},"car-top-es-15":{"width":21,"height":21,"x":21,"y":84,"pixelRatio":1,"sdf":true},"casino-15":{"width":21,"height":21,"x":42,"y":84,"pixelRatio":1,"sdf":true},"castle-15":{"width":21,"height":21,"x":63,"y":84,"pixelRatio":1,"sdf":true},"cemetery-15":{"width":21,"height":21,"x":84,"y":84,"pixelRatio":1,"sdf":true},"charging-station-15":{"width":21,"height":21,"x":105,"y":84,"pixelRatio":1,"sdf":true},"cinema-15":{"width":21,"height":21,"x":126,"y":84,"pixelRatio":1,"sdf":true},"circle-15":{"width":21,"height":21,"x":147,"y":84,"pixelRatio":1,"sdf":true},"circle-stroked-15":{"width":21,"height":21,"x":0,"y":105,"pixelRatio":1,"sdf":true},"city-15":{"width":21,"height":21,"x":21,"y":105,"pixelRatio":1,"sdf":true},"clothing-store-15":{"width":21,"height":21,"x":42,"y":105,"pixelRatio":1,"sdf":true},"college-15":{"width":21,"height":21,"x":63,"y":105,"pixelRatio":1,"sdf":true},"commercial-15":{"width":21,"height":21,"x":84,"y":105,"pixelRatio":1,"sdf":true},"communications-tower-15":{"width":21,"height":21,"x":105,"y":105,"pixelRatio":1,"sdf":true},"confectionery-15":{"width":21,"height":21,"x":126,"y":105,"pixelRatio":1,"sdf":true},"convenience-15":{"width":21,"height":21,"x":147,"y":105,"pixelRatio":1,"sdf":true},"cricket-15":{"width":21,"height":21,"x":0,"y":126,"pixelRatio":1,"sdf":true},"cross-15":{"width":21,"height":21,"x":21,"y":126,"pixelRatio":1,"sdf":true},"dam-15":{"width":21,"height":21,"x":42,"y":126,"pixelRatio":1,"sdf":true},"danger-15":{"width":21,"height":21,"x":63,"y":126,"pixelRatio":1,"sdf":true},"defibrillator-15":{"width":21,"height":21,"x":84,"y":126,"pixelRatio":1,"sdf":true},"dentist-15":{"width":21,"height":21,"x":105,"y":126,"pixelRatio":1,"sdf":true},"doctor-15":{"width":21,"height":21,"x":126,"y":126,"pixelRatio":1,"sdf":true},"dog-park-15":{"width":21,"height":21,"x":147,"y":126,"pixelRatio":1,"sdf":true},"drinking-water-15":{"width":21,"height":21,"x":0,"y":147,"pixelRatio":1,"sdf":true},"embassy-15":{"width":21,"height":21,"x":21,"y":147,"pixelRatio":1,"sdf":true},"emergency-phone-15":{"width":21,"height":21,"x":42,"y":147,"pixelRatio":1,"sdf":true},"entrance-15":{"width":21,"height":21,"x":63,"y":147,"pixelRatio":1,"sdf":true},"entrance-alt1-15":{"width":21,"height":21,"x":84,"y":147,"pixelRatio":1,"sdf":true},"farm-15":{"width":21,"height":21,"x":105,"y":147,"pixelRatio":1,"sdf":true},"fast-food-15":{"width":21,"height":21,"x":126,"y":147,"pixelRatio":1,"sdf":true},"fence-15":{"width":21,"height":21,"x":147,"y":147,"pixelRatio":1,"sdf":true},"ferry-15":{"width":21,"height":21,"x":168,"y":0,"pixelRatio":1,"sdf":true},"fire-station-15":{"width":21,"height":21,"x":189,"y":0,"pixelRatio":1,"sdf":true},"fitness-centre-15":{"width":21,"height":21,"x":210,"y":0,"pixelRatio":1,"sdf":true},"florist-15":{"width":21,"height":21,"x":231,"y":0,"pixelRatio":1,"sdf":true},"fuel-15":{"width":21,"height":21,"x":252,"y":0,"pixelRatio":1,"sdf":true},"furniture-15":{"width":21,"height":21,"x":273,"y":0,"pixelRatio":1,"sdf":true},"gaming-15":{"width":21,"height":21,"x":294,"y":0,"pixelRatio":1,"sdf":true},"garden-15":{"width":21,"height":21,"x":315,"y":0,"pixelRatio":1,"sdf":true},"garden-centre-15":{"width":21,"height":21,"x":168,"y":21,"pixelRatio":1,"sdf":true},"gift-15":{"width":21,"height":21,"x":189,"y":21,"pixelRatio":1,"sdf":true},"globe-15":{"width":21,"height":21,"x":210,"y":21,"pixelRatio":1,"sdf":true},"golf-15":{"width":21,"height":21,"x":231,"y":21,"pixelRatio":1,"sdf":true},"grocery-15":{"width":21,"height":21,"x":252,"y":21,"pixelRatio":1,"sdf":true},"hairdresser-15":{"width":21,"height":21,"x":273,"y":21,"pixelRatio":1,"sdf":true},"harbor-15":{"width":21,"height":21,"x":294,"y":21,"pixelRatio":1,"sdf":true},"hardware-15":{"width":21,"height":21,"x":315,"y":21,"pixelRatio":1,"sdf":true},"heart-15":{"width":21,"height":21,"x":168,"y":42,"pixelRatio":1,"sdf":true},"heliport-15":{"width":21,"height":21,"x":189,"y":42,"pixelRatio":1,"sdf":true},"home-15":{"width":21,"height":21,"x":210,"y":42,"pixelRatio":1,"sdf":true},"horse-riding-15":{"width":21,"height":21,"x":231,"y":42,"pixelRatio":1,"sdf":true},"hospital-15":{"width":21,"height":21,"x":252,"y":42,"pixelRatio":1,"sdf":true},"ice-cream-15":{"width":21,"height":21,"x":273,"y":42,"pixelRatio":1,"sdf":true},"industry-15":{"width":21,"height":21,"x":294,"y":42,"pixelRatio":1,"sdf":true},"information-15":{"width":21,"height":21,"x":315,"y":42,"pixelRatio":1,"sdf":true},"jewelry-store-15":{"width":21,"height":21,"x":168,"y":63,"pixelRatio":1,"sdf":true},"karaoke-15":{"width":21,"height":21,"x":189,"y":63,"pixelRatio":1,"sdf":true},"landmark-15":{"width":21,"height":21,"x":210,"y":63,"pixelRatio":1,"sdf":true},"landuse-15":{"width":21,"height":21,"x":231,"y":63,"pixelRatio":1,"sdf":true},"laundry-15":{"width":21,"height":21,"x":252,"y":63,"pixelRatio":1,"sdf":true},"library-15":{"width":21,"height":21,"x":273,"y":63,"pixelRatio":1,"sdf":true},"lighthouse-15":{"width":21,"height":21,"x":294,"y":63,"pixelRatio":1,"sdf":true},"lodging-15":{"width":21,"height":21,"x":315,"y":63,"pixelRatio":1,"sdf":true},"logging-15":{"width":21,"height":21,"x":168,"y":84,"pixelRatio":1,"sdf":true},"marker-15":{"width":21,"height":21,"x":189,"y":84,"pixelRatio":1,"sdf":true},"marker-stroked-15":{"width":21,"height":21,"x":210,"y":84,"pixelRatio":1,"sdf":true},"mobile-phone-15":{"width":21,"height":21,"x":231,"y":84,"pixelRatio":1,"sdf":true},"monument-15":{"width":21,"height":21,"x":252,"y":84,"pixelRatio":1,"sdf":true},"mountain-15":{"width":21,"height":21,"x":273,"y":84,"pixelRatio":1,"sdf":true},"museum-15":{"width":21,"height":21,"x":294,"y":84,"pixelRatio":1,"sdf":true},"music-15":{"width":21,"height":21,"x":315,"y":84,"pixelRatio":1,"sdf":true},"natural-15":{"width":21,"height":21,"x":168,"y":105,"pixelRatio":1,"sdf":true},"oil-rig-es-15":{"width":21,"height":21,"x":189,"y":105,"pixelRatio":1,"sdf":true},"optician-15":{"width":21,"height":21,"x":210,"y":105,"pixelRatio":1,"sdf":true},"paint-15":{"width":21,"height":21,"x":231,"y":105,"pixelRatio":1,"sdf":true},"park-15":{"width":21,"height":21,"x":252,"y":105,"pixelRatio":1,"sdf":true},"park-alt1-15":{"width":21,"height":21,"x":273,"y":105,"pixelRatio":1,"sdf":true},"parking-15":{"width":21,"height":21,"x":294,"y":105,"pixelRatio":1,"sdf":true},"parking-garage-15":{"width":21,"height":21,"x":315,"y":105,"pixelRatio":1,"sdf":true},"pharmacy-15":{"width":21,"height":21,"x":168,"y":126,"pixelRatio":1,"sdf":true},"picnic-site-15":{"width":21,"height":21,"x":189,"y":126,"pixelRatio":1,"sdf":true},"pitch-15":{"width":21,"height":21,"x":210,"y":126,"pixelRatio":1,"sdf":true},"place-of-worship-15":{"width":21,"height":21,"x":231,"y":126,"pixelRatio":1,"sdf":true},"playground-15":{"width":21,"height":21,"x":252,"y":126,"pixelRatio":1,"sdf":true},"police-15":{"width":21,"height":21,"x":273,"y":126,"pixelRatio":1,"sdf":true},"post-15":{"width":21,"height":21,"x":294,"y":126,"pixelRatio":1,"sdf":true},"prison-15":{"width":21,"height":21,"x":315,"y":126,"pixelRatio":1,"sdf":true},"rail-15":{"width":21,"height":21,"x":168,"y":147,"pixelRatio":1,"sdf":true},"rail-light-15":{"width":21,"height":21,"x":189,"y":147,"pixelRatio":1,"sdf":true},"rail-metro-15":{"width":21,"height":21,"x":210,"y":147,"pixelRatio":1,"sdf":true},"ranger-station-15":{"width":21,"height":21,"x":231,"y":147,"pixelRatio":1,"sdf":true},"recycling-15":{"width":21,"height":21,"x":252,"y":147,"pixelRatio":1,"sdf":true},"religious-buddhist-15":{"width":21,"height":21,"x":273,"y":147,"pixelRatio":1,"sdf":true},"religious-christian-15":{"width":21,"height":21,"x":294,"y":147,"pixelRatio":1,"sdf":true},"religious-jewish-15":{"width":21,"height":21,"x":315,"y":147,"pixelRatio":1,"sdf":true},"religious-muslim-15":{"width":21,"height":21,"x":0,"y":168,"pixelRatio":1,"sdf":true},"residential-community-15":{"width":21,"height":21,"x":21,"y":168,"pixelRatio":1,"sdf":true},"restaurant-15":{"width":21,"height":21,"x":42,"y":168,"pixelRatio":1,"sdf":true},"restaurant-noodle-15":{"width":21,"height":21,"x":63,"y":168,"pixelRatio":1,"sdf":true},"restaurant-pizza-15":{"width":21,"height":21,"x":84,"y":168,"pixelRatio":1,"sdf":true},"restaurant-seafood-15":{"width":21,"height":21,"x":105,"y":168,"pixelRatio":1,"sdf":true},"roadblock-15":{"width":21,"height":21,"x":126,"y":168,"pixelRatio":1,"sdf":true},"rocket-15":{"width":21,"height":21,"x":147,"y":168,"pixelRatio":1,"sdf":true},"school-15":{"width":21,"height":21,"x":168,"y":168,"pixelRatio":1,"sdf":true},"scooter-15":{"width":21,"height":21,"x":189,"y":168,"pixelRatio":1,"sdf":true},"shelter-15":{"width":21,"height":21,"x":210,"y":168,"pixelRatio":1,"sdf":true},"shoe-15":{"width":21,"height":21,"x":231,"y":168,"pixelRatio":1,"sdf":true},"shop-15":{"width":21,"height":21,"x":252,"y":168,"pixelRatio":1,"sdf":true},"skateboard-15":{"width":21,"height":21,"x":273,"y":168,"pixelRatio":1,"sdf":true},"skiing-15":{"width":21,"height":21,"x":294,"y":168,"pixelRatio":1,"sdf":true},"slaughterhouse-15":{"width":21,"height":21,"x":315,"y":168,"pixelRatio":1,"sdf":true},"slipway-15":{"width":21,"height":21,"x":0,"y":189,"pixelRatio":1,"sdf":true},"snowmobile-15":{"width":21,"height":21,"x":21,"y":189,"pixelRatio":1,"sdf":true},"soccer-15":{"width":21,"height":21,"x":42,"y":189,"pixelRatio":1,"sdf":true},"square-15":{"width":21,"height":21,"x":63,"y":189,"pixelRatio":1,"sdf":true},"square-stroked-15":{"width":21,"height":21,"x":84,"y":189,"pixelRatio":1,"sdf":true},"stadium-15":{"width":21,"height":21,"x":105,"y":189,"pixelRatio":1,"sdf":true},"star-15":{"width":21,"height":21,"x":126,"y":189,"pixelRatio":1,"sdf":true},"star-stroked-15":{"width":21,"height":21,"x":147,"y":189,"pixelRatio":1,"sdf":true},"suitcase-15":{"width":21,"height":21,"x":168,"y":189,"pixelRatio":1,"sdf":true},"sushi-15":{"width":21,"height":21,"x":189,"y":189,"pixelRatio":1,"sdf":true},"swimming-15":{"width":21,"height":21,"x":210,"y":189,"pixelRatio":1,"sdf":true},"table-tennis-15":{"width":21,"height":21,"x":231,"y":189,"pixelRatio":1,"sdf":true},"teahouse-15":{"width":21,"height":21,"x":252,"y":189,"pixelRatio":1,"sdf":true},"telephone-15":{"width":21,"height":21,"x":273,"y":189,"pixelRatio":1,"sdf":true},"tennis-15":{"width":21,"height":21,"x":294,"y":189,"pixelRatio":1,"sdf":true},"theatre-15":{"width":21,"height":21,"x":315,"y":189,"pixelRatio":1,"sdf":true},"toilet-15":{"width":21,"height":21,"x":0,"y":210,"pixelRatio":1,"sdf":true},"town-15":{"width":21,"height":21,"x":21,"y":210,"pixelRatio":1,"sdf":true},"town-hall-15":{"width":21,"height":21,"x":42,"y":210,"pixelRatio":1,"sdf":true},"triangle-15":{"width":21,"height":21,"x":63,"y":210,"pixelRatio":1,"sdf":true},"triangle-stroked-15":{"width":21,"height":21,"x":84,"y":210,"pixelRatio":1,"sdf":true},"veterinary-15":{"width":21,"height":21,"x":105,"y":210,"pixelRatio":1,"sdf":true},"viewpoint-15":{"width":21,"height":21,"x":126,"y":210,"pixelRatio":1,"sdf":true},"village-15":{"width":21,"height":21,"x":147,"y":210,"pixelRatio":1,"sdf":true},"volcano-15":{"width":21,"height":21,"x":168,"y":210,"pixelRatio":1,"sdf":true},"volleyball-15":{"width":21,"height":21,"x":189,"y":210,"pixelRatio":1,"sdf":true},"warehouse-15":{"width":21,"height":21,"x":210,"y":210,"pixelRatio":1,"sdf":true},"waste-basket-15":{"width":21,"height":21,"x":231,"y":210,"pixelRatio":1,"sdf":true},"watch-15":{"width":21,"height":21,"x":252,"y":210,"pixelRatio":1,"sdf":true},"water-15":{"width":21,"height":21,"x":273,"y":210,"pixelRatio":1,"sdf":true},"waterfall-15":{"width":21,"height":21,"x":294,"y":210,"pixelRatio":1,"sdf":true},"watermill-15":{"width":21,"height":21,"x":315,"y":210,"pixelRatio":1,"sdf":true},"wetland-15":{"width":21,"height":21,"x":0,"y":231,"pixelRatio":1,"sdf":true},"wheelchair-15":{"width":21,"height":21,"x":21,"y":231,"pixelRatio":1,"sdf":true},"windmill-15":{"width":21,"height":21,"x":42,"y":231,"pixelRatio":1,"sdf":true},"zoo-15":{"width":21,"height":21,"x":63,"y":231,"pixelRatio":1,"sdf":true},"aerialway-11":{"width":17,"height":17,"x":84,"y":231,"pixelRatio":1,"sdf":true},"airfield-11":{"width":17,"height":17,"x":101,"y":231,"pixelRatio":1,"sdf":true},"airport-11":{"width":17,"height":17,"x":118,"y":231,"pixelRatio":1,"sdf":true},"alcohol-shop-11":{"width":17,"height":17,"x":135,"y":231,"pixelRatio":1,"sdf":true},"american-football-11":{"width":17,"height":17,"x":152,"y":231,"pixelRatio":1,"sdf":true},"amusement-park-11":{"width":17,"height":17,"x":169,"y":231,"pixelRatio":1,"sdf":true},"aquarium-11":{"width":17,"height":17,"x":186,"y":231,"pixelRatio":1,"sdf":true},"arrow-es-11":{"width":17,"height":17,"x":203,"y":231,"pixelRatio":1,"sdf":true},"art-gallery-11":{"width":17,"height":17,"x":220,"y":231,"pixelRatio":1,"sdf":true},"attraction-11":{"width":17,"height":17,"x":237,"y":231,"pixelRatio":1,"sdf":true},"bakery-11":{"width":17,"height":17,"x":254,"y":231,"pixelRatio":1,"sdf":true},"bank-11":{"width":17,"height":17,"x":271,"y":231,"pixelRatio":1,"sdf":true},"bar-11":{"width":17,"height":17,"x":288,"y":231,"pixelRatio":1,"sdf":true},"barrier-11":{"width":17,"height":17,"x":305,"y":231,"pixelRatio":1,"sdf":true},"baseball-11":{"width":17,"height":17,"x":0,"y":252,"pixelRatio":1,"sdf":true},"basketball-11":{"width":17,"height":17,"x":17,"y":252,"pixelRatio":1,"sdf":true},"bbq-11":{"width":17,"height":17,"x":34,"y":252,"pixelRatio":1,"sdf":true},"beach-11":{"width":17,"height":17,"x":51,"y":252,"pixelRatio":1,"sdf":true},"beer-11":{"width":17,"height":17,"x":68,"y":252,"pixelRatio":1,"sdf":true},"bicycle-11":{"width":17,"height":17,"x":85,"y":252,"pixelRatio":1,"sdf":true},"bicycle-share-11":{"width":17,"height":17,"x":102,"y":252,"pixelRatio":1,"sdf":true},"blood-bank-11":{"width":17,"height":17,"x":119,"y":252,"pixelRatio":1,"sdf":true},"boat-es-11":{"width":17,"height":17,"x":136,"y":252,"pixelRatio":1,"sdf":true},"bowling-alley-11":{"width":17,"height":17,"x":153,"y":252,"pixelRatio":1,"sdf":true},"bridge-11":{"width":17,"height":17,"x":170,"y":252,"pixelRatio":1,"sdf":true},"building-11":{"width":17,"height":17,"x":187,"y":252,"pixelRatio":1,"sdf":true},"building-alt1-11":{"width":17,"height":17,"x":204,"y":252,"pixelRatio":1,"sdf":true},"bus-11":{"width":17,"height":17,"x":221,"y":252,"pixelRatio":1,"sdf":true},"cafe-11":{"width":17,"height":17,"x":238,"y":252,"pixelRatio":1,"sdf":true},"campsite-11":{"width":17,"height":17,"x":255,"y":252,"pixelRatio":1,"sdf":true},"car-11":{"width":17,"height":17,"x":272,"y":252,"pixelRatio":1,"sdf":true},"car-rental-11":{"width":17,"height":17,"x":289,"y":252,"pixelRatio":1,"sdf":true},"car-repair-11":{"width":17,"height":17,"x":306,"y":252,"pixelRatio":1,"sdf":true},"car-top-es-11":{"width":17,"height":17,"x":0,"y":269,"pixelRatio":1,"sdf":true},"casino-11":{"width":17,"height":17,"x":17,"y":269,"pixelRatio":1,"sdf":true},"castle-11":{"width":17,"height":17,"x":34,"y":269,"pixelRatio":1,"sdf":true},"cemetery-11":{"width":17,"height":17,"x":51,"y":269,"pixelRatio":1,"sdf":true},"charging-station-11":{"width":17,"height":17,"x":68,"y":269,"pixelRatio":1,"sdf":true},"cinema-11":{"width":17,"height":17,"x":85,"y":269,"pixelRatio":1,"sdf":true},"circle-11":{"width":17,"height":17,"x":102,"y":269,"pixelRatio":1,"sdf":true},"circle-stroked-11":{"width":17,"height":17,"x":119,"y":269,"pixelRatio":1,"sdf":true},"city-11":{"width":17,"height":17,"x":136,"y":269,"pixelRatio":1,"sdf":true},"clothing-store-11":{"width":17,"height":17,"x":153,"y":269,"pixelRatio":1,"sdf":true},"college-11":{"width":17,"height":17,"x":170,"y":269,"pixelRatio":1,"sdf":true},"commercial-11":{"width":17,"height":17,"x":187,"y":269,"pixelRatio":1,"sdf":true},"communications-tower-11":{"width":17,"height":17,"x":204,"y":269,"pixelRatio":1,"sdf":true},"confectionery-11":{"width":17,"height":17,"x":221,"y":269,"pixelRatio":1,"sdf":true},"convenience-11":{"width":17,"height":17,"x":238,"y":269,"pixelRatio":1,"sdf":true},"cricket-11":{"width":17,"height":17,"x":255,"y":269,"pixelRatio":1,"sdf":true},"cross-11":{"width":17,"height":17,"x":272,"y":269,"pixelRatio":1,"sdf":true},"dam-11":{"width":17,"height":17,"x":289,"y":269,"pixelRatio":1,"sdf":true},"danger-11":{"width":17,"height":17,"x":306,"y":269,"pixelRatio":1,"sdf":true},"defibrillator-11":{"width":17,"height":17,"x":0,"y":286,"pixelRatio":1,"sdf":true},"dentist-11":{"width":17,"height":17,"x":17,"y":286,"pixelRatio":1,"sdf":true},"doctor-11":{"width":17,"height":17,"x":34,"y":286,"pixelRatio":1,"sdf":true},"dog-park-11":{"width":17,"height":17,"x":51,"y":286,"pixelRatio":1,"sdf":true},"drinking-water-11":{"width":17,"height":17,"x":68,"y":286,"pixelRatio":1,"sdf":true},"embassy-11":{"width":17,"height":17,"x":85,"y":286,"pixelRatio":1,"sdf":true},"emergency-phone-11":{"width":17,"height":17,"x":102,"y":286,"pixelRatio":1,"sdf":true},"entrance-11":{"width":17,"height":17,"x":119,"y":286,"pixelRatio":1,"sdf":true},"entrance-alt1-11":{"width":17,"height":17,"x":136,"y":286,"pixelRatio":1,"sdf":true},"farm-11":{"width":17,"height":17,"x":153,"y":286,"pixelRatio":1,"sdf":true},"fast-food-11":{"width":17,"height":17,"x":170,"y":286,"pixelRatio":1,"sdf":true},"fence-11":{"width":17,"height":17,"x":187,"y":286,"pixelRatio":1,"sdf":true},"ferry-11":{"width":17,"height":17,"x":204,"y":286,"pixelRatio":1,"sdf":true},"fire-station-11":{"width":17,"height":17,"x":221,"y":286,"pixelRatio":1,"sdf":true},"fitness-centre-11":{"width":17,"height":17,"x":238,"y":286,"pixelRatio":1,"sdf":true},"florist-11":{"width":17,"height":17,"x":255,"y":286,"pixelRatio":1,"sdf":true},"fuel-11":{"width":17,"height":17,"x":272,"y":286,"pixelRatio":1,"sdf":true},"furniture-11":{"width":17,"height":17,"x":289,"y":286,"pixelRatio":1,"sdf":true},"gaming-11":{"width":17,"height":17,"x":306,"y":286,"pixelRatio":1,"sdf":true},"garden-11":{"width":17,"height":17,"x":0,"y":303,"pixelRatio":1,"sdf":true},"garden-centre-11":{"width":17,"height":17,"x":17,"y":303,"pixelRatio":1,"sdf":true},"gift-11":{"width":17,"height":17,"x":34,"y":303,"pixelRatio":1,"sdf":true},"globe-11":{"width":17,"height":17,"x":51,"y":303,"pixelRatio":1,"sdf":true},"golf-11":{"width":17,"height":17,"x":68,"y":303,"pixelRatio":1,"sdf":true},"grocery-11":{"width":17,"height":17,"x":85,"y":303,"pixelRatio":1,"sdf":true},"hairdresser-11":{"width":17,"height":17,"x":102,"y":303,"pixelRatio":1,"sdf":true},"harbor-11":{"width":17,"height":17,"x":119,"y":303,"pixelRatio":1,"sdf":true},"hardware-11":{"width":17,"height":17,"x":136,"y":303,"pixelRatio":1,"sdf":true},"heart-11":{"width":17,"height":17,"x":153,"y":303,"pixelRatio":1,"sdf":true},"heliport-11":{"width":17,"height":17,"x":170,"y":303,"pixelRatio":1,"sdf":true},"home-11":{"width":17,"height":17,"x":187,"y":303,"pixelRatio":1,"sdf":true},"horse-riding-11":{"width":17,"height":17,"x":204,"y":303,"pixelRatio":1,"sdf":true},"hospital-11":{"width":17,"height":17,"x":221,"y":303,"pixelRatio":1,"sdf":true},"ice-cream-11":{"width":17,"height":17,"x":238,"y":303,"pixelRatio":1,"sdf":true},"industry-11":{"width":17,"height":17,"x":255,"y":303,"pixelRatio":1,"sdf":true},"information-11":{"width":17,"height":17,"x":272,"y":303,"pixelRatio":1,"sdf":true},"jewelry-store-11":{"width":17,"height":17,"x":289,"y":303,"pixelRatio":1,"sdf":true},"karaoke-11":{"width":17,"height":17,"x":306,"y":303,"pixelRatio":1,"sdf":true},"landmark-11":{"width":17,"height":17,"x":323,"y":252,"pixelRatio":1,"sdf":true},"landuse-11":{"width":17,"height":17,"x":340,"y":252,"pixelRatio":1,"sdf":true},"laundry-11":{"width":17,"height":17,"x":357,"y":252,"pixelRatio":1,"sdf":true},"library-11":{"width":17,"height":17,"x":374,"y":252,"pixelRatio":1,"sdf":true},"lighthouse-11":{"width":17,"height":17,"x":391,"y":252,"pixelRatio":1,"sdf":true},"lodging-11":{"width":17,"height":17,"x":408,"y":252,"pixelRatio":1,"sdf":true},"logging-11":{"width":17,"height":17,"x":425,"y":252,"pixelRatio":1,"sdf":true},"marker-11":{"width":17,"height":17,"x":442,"y":252,"pixelRatio":1,"sdf":true},"marker-stroked-11":{"width":17,"height":17,"x":459,"y":252,"pixelRatio":1,"sdf":true},"mobile-phone-11":{"width":17,"height":17,"x":476,"y":252,"pixelRatio":1,"sdf":true},"monument-11":{"width":17,"height":17,"x":493,"y":252,"pixelRatio":1,"sdf":true},"mountain-11":{"width":17,"height":17,"x":510,"y":252,"pixelRatio":1,"sdf":true},"museum-11":{"width":17,"height":17,"x":527,"y":252,"pixelRatio":1,"sdf":true},"music-11":{"width":17,"height":17,"x":544,"y":252,"pixelRatio":1,"sdf":true},"natural-11":{"width":17,"height":17,"x":561,"y":252,"pixelRatio":1,"sdf":true},"oil-rig-es-11":{"width":17,"height":17,"x":578,"y":252,"pixelRatio":1,"sdf":true},"optician-11":{"width":17,"height":17,"x":595,"y":252,"pixelRatio":1,"sdf":true},"paint-11":{"width":17,"height":17,"x":612,"y":252,"pixelRatio":1,"sdf":true},"park-11":{"width":17,"height":17,"x":629,"y":252,"pixelRatio":1,"sdf":true},"park-alt1-11":{"width":17,"height":17,"x":646,"y":252,"pixelRatio":1,"sdf":true},"parking-11":{"width":17,"height":17,"x":323,"y":269,"pixelRatio":1,"sdf":true},"parking-garage-11":{"width":17,"height":17,"x":340,"y":269,"pixelRatio":1,"sdf":true},"pharmacy-11":{"width":17,"height":17,"x":357,"y":269,"pixelRatio":1,"sdf":true},"picnic-site-11":{"width":17,"height":17,"x":374,"y":269,"pixelRatio":1,"sdf":true},"pitch-11":{"width":17,"height":17,"x":391,"y":269,"pixelRatio":1,"sdf":true},"place-of-worship-11":{"width":17,"height":17,"x":408,"y":269,"pixelRatio":1,"sdf":true},"playground-11":{"width":17,"height":17,"x":425,"y":269,"pixelRatio":1,"sdf":true},"police-11":{"width":17,"height":17,"x":442,"y":269,"pixelRatio":1,"sdf":true},"post-11":{"width":17,"height":17,"x":459,"y":269,"pixelRatio":1,"sdf":true},"prison-11":{"width":17,"height":17,"x":476,"y":269,"pixelRatio":1,"sdf":true},"rail-11":{"width":17,"height":17,"x":493,"y":269,"pixelRatio":1,"sdf":true},"rail-light-11":{"width":17,"height":17,"x":510,"y":269,"pixelRatio":1,"sdf":true},"rail-metro-11":{"width":17,"height":17,"x":527,"y":269,"pixelRatio":1,"sdf":true},"ranger-station-11":{"width":17,"height":17,"x":544,"y":269,"pixelRatio":1,"sdf":true},"recycling-11":{"width":17,"height":17,"x":561,"y":269,"pixelRatio":1,"sdf":true},"religious-buddhist-11":{"width":17,"height":17,"x":578,"y":269,"pixelRatio":1,"sdf":true},"religious-christian-11":{"width":17,"height":17,"x":595,"y":269,"pixelRatio":1,"sdf":true},"religious-jewish-11":{"width":17,"height":17,"x":612,"y":269,"pixelRatio":1,"sdf":true},"religious-muslim-11":{"width":17,"height":17,"x":629,"y":269,"pixelRatio":1,"sdf":true},"residential-community-11":{"width":17,"height":17,"x":646,"y":269,"pixelRatio":1,"sdf":true},"restaurant-11":{"width":17,"height":17,"x":323,"y":286,"pixelRatio":1,"sdf":true},"restaurant-noodle-11":{"width":17,"height":17,"x":340,"y":286,"pixelRatio":1,"sdf":true},"restaurant-pizza-11":{"width":17,"height":17,"x":357,"y":286,"pixelRatio":1,"sdf":true},"restaurant-seafood-11":{"width":17,"height":17,"x":374,"y":286,"pixelRatio":1,"sdf":true},"roadblock-11":{"width":17,"height":17,"x":391,"y":286,"pixelRatio":1,"sdf":true},"rocket-11":{"width":17,"height":17,"x":408,"y":286,"pixelRatio":1,"sdf":true},"school-11":{"width":17,"height":17,"x":425,"y":286,"pixelRatio":1,"sdf":true},"scooter-11":{"width":17,"height":17,"x":442,"y":286,"pixelRatio":1,"sdf":true},"shelter-11":{"width":17,"height":17,"x":459,"y":286,"pixelRatio":1,"sdf":true},"shoe-11":{"width":17,"height":17,"x":476,"y":286,"pixelRatio":1,"sdf":true},"shop-11":{"width":17,"height":17,"x":493,"y":286,"pixelRatio":1,"sdf":true},"skateboard-11":{"width":17,"height":17,"x":510,"y":286,"pixelRatio":1,"sdf":true},"skiing-11":{"width":17,"height":17,"x":527,"y":286,"pixelRatio":1,"sdf":true},"slaughterhouse-11":{"width":17,"height":17,"x":544,"y":286,"pixelRatio":1,"sdf":true},"slipway-11":{"width":17,"height":17,"x":561,"y":286,"pixelRatio":1,"sdf":true},"snowmobile-11":{"width":17,"height":17,"x":578,"y":286,"pixelRatio":1,"sdf":true},"soccer-11":{"width":17,"height":17,"x":595,"y":286,"pixelRatio":1,"sdf":true},"square-11":{"width":17,"height":17,"x":612,"y":286,"pixelRatio":1,"sdf":true},"square-stroked-11":{"width":17,"height":17,"x":629,"y":286,"pixelRatio":1,"sdf":true},"stadium-11":{"width":17,"height":17,"x":646,"y":286,"pixelRatio":1,"sdf":true},"star-11":{"width":17,"height":17,"x":323,"y":303,"pixelRatio":1,"sdf":true},"star-stroked-11":{"width":17,"height":17,"x":340,"y":303,"pixelRatio":1,"sdf":true},"suitcase-11":{"width":17,"height":17,"x":357,"y":303,"pixelRatio":1,"sdf":true},"sushi-11":{"width":17,"height":17,"x":374,"y":303,"pixelRatio":1,"sdf":true},"swimming-11":{"width":17,"height":17,"x":391,"y":303,"pixelRatio":1,"sdf":true},"table-tennis-11":{"width":17,"height":17,"x":408,"y":303,"pixelRatio":1,"sdf":true},"teahouse-11":{"width":17,"height":17,"x":425,"y":303,"pixelRatio":1,"sdf":true},"telephone-11":{"width":17,"height":17,"x":442,"y":303,"pixelRatio":1,"sdf":true},"tennis-11":{"width":17,"height":17,"x":459,"y":303,"pixelRatio":1,"sdf":true},"theatre-11":{"width":17,"height":17,"x":476,"y":303,"pixelRatio":1,"sdf":true},"toilet-11":{"width":17,"height":17,"x":493,"y":303,"pixelRatio":1,"sdf":true},"town-11":{"width":17,"height":17,"x":510,"y":303,"pixelRatio":1,"sdf":true},"town-hall-11":{"width":17,"height":17,"x":527,"y":303,"pixelRatio":1,"sdf":true},"triangle-11":{"width":17,"height":17,"x":544,"y":303,"pixelRatio":1,"sdf":true},"triangle-stroked-11":{"width":17,"height":17,"x":561,"y":303,"pixelRatio":1,"sdf":true},"veterinary-11":{"width":17,"height":17,"x":578,"y":303,"pixelRatio":1,"sdf":true},"viewpoint-11":{"width":17,"height":17,"x":595,"y":303,"pixelRatio":1,"sdf":true},"village-11":{"width":17,"height":17,"x":612,"y":303,"pixelRatio":1,"sdf":true},"volcano-11":{"width":17,"height":17,"x":629,"y":303,"pixelRatio":1,"sdf":true},"volleyball-11":{"width":17,"height":17,"x":646,"y":303,"pixelRatio":1,"sdf":true},"warehouse-11":{"width":17,"height":17,"x":336,"y":0,"pixelRatio":1,"sdf":true},"waste-basket-11":{"width":17,"height":17,"x":353,"y":0,"pixelRatio":1,"sdf":true},"watch-11":{"width":17,"height":17,"x":370,"y":0,"pixelRatio":1,"sdf":true},"water-11":{"width":17,"height":17,"x":387,"y":0,"pixelRatio":1,"sdf":true},"waterfall-11":{"width":17,"height":17,"x":404,"y":0,"pixelRatio":1,"sdf":true},"watermill-11":{"width":17,"height":17,"x":421,"y":0,"pixelRatio":1,"sdf":true},"wetland-11":{"width":17,"height":17,"x":438,"y":0,"pixelRatio":1,"sdf":true},"wheelchair-11":{"width":17,"height":17,"x":455,"y":0,"pixelRatio":1,"sdf":true},"windmill-11":{"width":17,"height":17,"x":472,"y":0,"pixelRatio":1,"sdf":true},"zoo-11":{"width":17,"height":17,"x":489,"y":0,"pixelRatio":1,"sdf":true}}')},function(module){module.exports=JSON.parse('{"aerialway-15":{"width":36,"height":36,"x":0,"y":0,"pixelRatio":2,"sdf":true},"airfield-15":{"width":36,"height":36,"x":36,"y":0,"pixelRatio":2,"sdf":true},"airport-15":{"width":36,"height":36,"x":0,"y":36,"pixelRatio":2,"sdf":true},"alcohol-shop-15":{"width":36,"height":36,"x":36,"y":36,"pixelRatio":2,"sdf":true},"american-football-15":{"width":36,"height":36,"x":72,"y":0,"pixelRatio":2,"sdf":true},"amusement-park-15":{"width":36,"height":36,"x":108,"y":0,"pixelRatio":2,"sdf":true},"aquarium-15":{"width":36,"height":36,"x":72,"y":36,"pixelRatio":2,"sdf":true},"arrow-es-15":{"width":36,"height":36,"x":108,"y":36,"pixelRatio":2,"sdf":true},"art-gallery-15":{"width":36,"height":36,"x":0,"y":72,"pixelRatio":2,"sdf":true},"attraction-15":{"width":36,"height":36,"x":36,"y":72,"pixelRatio":2,"sdf":true},"bakery-15":{"width":36,"height":36,"x":72,"y":72,"pixelRatio":2,"sdf":true},"bank-15":{"width":36,"height":36,"x":108,"y":72,"pixelRatio":2,"sdf":true},"bar-15":{"width":36,"height":36,"x":0,"y":108,"pixelRatio":2,"sdf":true},"barrier-15":{"width":36,"height":36,"x":36,"y":108,"pixelRatio":2,"sdf":true},"baseball-15":{"width":36,"height":36,"x":72,"y":108,"pixelRatio":2,"sdf":true},"basketball-15":{"width":36,"height":36,"x":108,"y":108,"pixelRatio":2,"sdf":true},"bbq-15":{"width":36,"height":36,"x":144,"y":0,"pixelRatio":2,"sdf":true},"beach-15":{"width":36,"height":36,"x":180,"y":0,"pixelRatio":2,"sdf":true},"beer-15":{"width":36,"height":36,"x":216,"y":0,"pixelRatio":2,"sdf":true},"bicycle-15":{"width":36,"height":36,"x":252,"y":0,"pixelRatio":2,"sdf":true},"bicycle-share-15":{"width":36,"height":36,"x":144,"y":36,"pixelRatio":2,"sdf":true},"blood-bank-15":{"width":36,"height":36,"x":180,"y":36,"pixelRatio":2,"sdf":true},"boat-es-15":{"width":36,"height":36,"x":216,"y":36,"pixelRatio":2,"sdf":true},"bowling-alley-15":{"width":36,"height":36,"x":252,"y":36,"pixelRatio":2,"sdf":true},"bridge-15":{"width":36,"height":36,"x":144,"y":72,"pixelRatio":2,"sdf":true},"building-15":{"width":36,"height":36,"x":180,"y":72,"pixelRatio":2,"sdf":true},"building-alt1-15":{"width":36,"height":36,"x":216,"y":72,"pixelRatio":2,"sdf":true},"bus-15":{"width":36,"height":36,"x":252,"y":72,"pixelRatio":2,"sdf":true},"cafe-15":{"width":36,"height":36,"x":144,"y":108,"pixelRatio":2,"sdf":true},"campsite-15":{"width":36,"height":36,"x":180,"y":108,"pixelRatio":2,"sdf":true},"car-15":{"width":36,"height":36,"x":216,"y":108,"pixelRatio":2,"sdf":true},"car-rental-15":{"width":36,"height":36,"x":252,"y":108,"pixelRatio":2,"sdf":true},"car-repair-15":{"width":36,"height":36,"x":0,"y":144,"pixelRatio":2,"sdf":true},"car-top-es-15":{"width":36,"height":36,"x":36,"y":144,"pixelRatio":2,"sdf":true},"casino-15":{"width":36,"height":36,"x":72,"y":144,"pixelRatio":2,"sdf":true},"castle-15":{"width":36,"height":36,"x":108,"y":144,"pixelRatio":2,"sdf":true},"cemetery-15":{"width":36,"height":36,"x":144,"y":144,"pixelRatio":2,"sdf":true},"charging-station-15":{"width":36,"height":36,"x":180,"y":144,"pixelRatio":2,"sdf":true},"cinema-15":{"width":36,"height":36,"x":216,"y":144,"pixelRatio":2,"sdf":true},"circle-15":{"width":36,"height":36,"x":252,"y":144,"pixelRatio":2,"sdf":true},"circle-stroked-15":{"width":36,"height":36,"x":0,"y":180,"pixelRatio":2,"sdf":true},"city-15":{"width":36,"height":36,"x":36,"y":180,"pixelRatio":2,"sdf":true},"clothing-store-15":{"width":36,"height":36,"x":72,"y":180,"pixelRatio":2,"sdf":true},"college-15":{"width":36,"height":36,"x":108,"y":180,"pixelRatio":2,"sdf":true},"commercial-15":{"width":36,"height":36,"x":144,"y":180,"pixelRatio":2,"sdf":true},"communications-tower-15":{"width":36,"height":36,"x":180,"y":180,"pixelRatio":2,"sdf":true},"confectionery-15":{"width":36,"height":36,"x":216,"y":180,"pixelRatio":2,"sdf":true},"convenience-15":{"width":36,"height":36,"x":252,"y":180,"pixelRatio":2,"sdf":true},"cricket-15":{"width":36,"height":36,"x":0,"y":216,"pixelRatio":2,"sdf":true},"cross-15":{"width":36,"height":36,"x":36,"y":216,"pixelRatio":2,"sdf":true},"dam-15":{"width":36,"height":36,"x":72,"y":216,"pixelRatio":2,"sdf":true},"danger-15":{"width":36,"height":36,"x":108,"y":216,"pixelRatio":2,"sdf":true},"defibrillator-15":{"width":36,"height":36,"x":144,"y":216,"pixelRatio":2,"sdf":true},"dentist-15":{"width":36,"height":36,"x":180,"y":216,"pixelRatio":2,"sdf":true},"doctor-15":{"width":36,"height":36,"x":216,"y":216,"pixelRatio":2,"sdf":true},"dog-park-15":{"width":36,"height":36,"x":252,"y":216,"pixelRatio":2,"sdf":true},"drinking-water-15":{"width":36,"height":36,"x":0,"y":252,"pixelRatio":2,"sdf":true},"embassy-15":{"width":36,"height":36,"x":36,"y":252,"pixelRatio":2,"sdf":true},"emergency-phone-15":{"width":36,"height":36,"x":72,"y":252,"pixelRatio":2,"sdf":true},"entrance-15":{"width":36,"height":36,"x":108,"y":252,"pixelRatio":2,"sdf":true},"entrance-alt1-15":{"width":36,"height":36,"x":144,"y":252,"pixelRatio":2,"sdf":true},"farm-15":{"width":36,"height":36,"x":180,"y":252,"pixelRatio":2,"sdf":true},"fast-food-15":{"width":36,"height":36,"x":216,"y":252,"pixelRatio":2,"sdf":true},"fence-15":{"width":36,"height":36,"x":252,"y":252,"pixelRatio":2,"sdf":true},"ferry-15":{"width":36,"height":36,"x":288,"y":0,"pixelRatio":2,"sdf":true},"fire-station-15":{"width":36,"height":36,"x":324,"y":0,"pixelRatio":2,"sdf":true},"fitness-centre-15":{"width":36,"height":36,"x":360,"y":0,"pixelRatio":2,"sdf":true},"florist-15":{"width":36,"height":36,"x":396,"y":0,"pixelRatio":2,"sdf":true},"fuel-15":{"width":36,"height":36,"x":432,"y":0,"pixelRatio":2,"sdf":true},"furniture-15":{"width":36,"height":36,"x":468,"y":0,"pixelRatio":2,"sdf":true},"gaming-15":{"width":36,"height":36,"x":504,"y":0,"pixelRatio":2,"sdf":true},"garden-15":{"width":36,"height":36,"x":540,"y":0,"pixelRatio":2,"sdf":true},"garden-centre-15":{"width":36,"height":36,"x":288,"y":36,"pixelRatio":2,"sdf":true},"gift-15":{"width":36,"height":36,"x":324,"y":36,"pixelRatio":2,"sdf":true},"globe-15":{"width":36,"height":36,"x":360,"y":36,"pixelRatio":2,"sdf":true},"golf-15":{"width":36,"height":36,"x":396,"y":36,"pixelRatio":2,"sdf":true},"grocery-15":{"width":36,"height":36,"x":432,"y":36,"pixelRatio":2,"sdf":true},"hairdresser-15":{"width":36,"height":36,"x":468,"y":36,"pixelRatio":2,"sdf":true},"harbor-15":{"width":36,"height":36,"x":504,"y":36,"pixelRatio":2,"sdf":true},"hardware-15":{"width":36,"height":36,"x":540,"y":36,"pixelRatio":2,"sdf":true},"heart-15":{"width":36,"height":36,"x":288,"y":72,"pixelRatio":2,"sdf":true},"heliport-15":{"width":36,"height":36,"x":324,"y":72,"pixelRatio":2,"sdf":true},"home-15":{"width":36,"height":36,"x":360,"y":72,"pixelRatio":2,"sdf":true},"horse-riding-15":{"width":36,"height":36,"x":396,"y":72,"pixelRatio":2,"sdf":true},"hospital-15":{"width":36,"height":36,"x":432,"y":72,"pixelRatio":2,"sdf":true},"ice-cream-15":{"width":36,"height":36,"x":468,"y":72,"pixelRatio":2,"sdf":true},"industry-15":{"width":36,"height":36,"x":504,"y":72,"pixelRatio":2,"sdf":true},"information-15":{"width":36,"height":36,"x":540,"y":72,"pixelRatio":2,"sdf":true},"jewelry-store-15":{"width":36,"height":36,"x":288,"y":108,"pixelRatio":2,"sdf":true},"karaoke-15":{"width":36,"height":36,"x":324,"y":108,"pixelRatio":2,"sdf":true},"landmark-15":{"width":36,"height":36,"x":360,"y":108,"pixelRatio":2,"sdf":true},"landuse-15":{"width":36,"height":36,"x":396,"y":108,"pixelRatio":2,"sdf":true},"laundry-15":{"width":36,"height":36,"x":432,"y":108,"pixelRatio":2,"sdf":true},"library-15":{"width":36,"height":36,"x":468,"y":108,"pixelRatio":2,"sdf":true},"lighthouse-15":{"width":36,"height":36,"x":504,"y":108,"pixelRatio":2,"sdf":true},"lodging-15":{"width":36,"height":36,"x":540,"y":108,"pixelRatio":2,"sdf":true},"logging-15":{"width":36,"height":36,"x":288,"y":144,"pixelRatio":2,"sdf":true},"marker-15":{"width":36,"height":36,"x":324,"y":144,"pixelRatio":2,"sdf":true},"marker-stroked-15":{"width":36,"height":36,"x":360,"y":144,"pixelRatio":2,"sdf":true},"mobile-phone-15":{"width":36,"height":36,"x":396,"y":144,"pixelRatio":2,"sdf":true},"monument-15":{"width":36,"height":36,"x":432,"y":144,"pixelRatio":2,"sdf":true},"mountain-15":{"width":36,"height":36,"x":468,"y":144,"pixelRatio":2,"sdf":true},"museum-15":{"width":36,"height":36,"x":504,"y":144,"pixelRatio":2,"sdf":true},"music-15":{"width":36,"height":36,"x":540,"y":144,"pixelRatio":2,"sdf":true},"natural-15":{"width":36,"height":36,"x":288,"y":180,"pixelRatio":2,"sdf":true},"oil-rig-es-15":{"width":36,"height":36,"x":324,"y":180,"pixelRatio":2,"sdf":true},"optician-15":{"width":36,"height":36,"x":360,"y":180,"pixelRatio":2,"sdf":true},"paint-15":{"width":36,"height":36,"x":396,"y":180,"pixelRatio":2,"sdf":true},"park-15":{"width":36,"height":36,"x":432,"y":180,"pixelRatio":2,"sdf":true},"park-alt1-15":{"width":36,"height":36,"x":468,"y":180,"pixelRatio":2,"sdf":true},"parking-15":{"width":36,"height":36,"x":504,"y":180,"pixelRatio":2,"sdf":true},"parking-garage-15":{"width":36,"height":36,"x":540,"y":180,"pixelRatio":2,"sdf":true},"pharmacy-15":{"width":36,"height":36,"x":288,"y":216,"pixelRatio":2,"sdf":true},"picnic-site-15":{"width":36,"height":36,"x":324,"y":216,"pixelRatio":2,"sdf":true},"pitch-15":{"width":36,"height":36,"x":360,"y":216,"pixelRatio":2,"sdf":true},"place-of-worship-15":{"width":36,"height":36,"x":396,"y":216,"pixelRatio":2,"sdf":true},"playground-15":{"width":36,"height":36,"x":432,"y":216,"pixelRatio":2,"sdf":true},"police-15":{"width":36,"height":36,"x":468,"y":216,"pixelRatio":2,"sdf":true},"post-15":{"width":36,"height":36,"x":504,"y":216,"pixelRatio":2,"sdf":true},"prison-15":{"width":36,"height":36,"x":540,"y":216,"pixelRatio":2,"sdf":true},"rail-15":{"width":36,"height":36,"x":288,"y":252,"pixelRatio":2,"sdf":true},"rail-light-15":{"width":36,"height":36,"x":324,"y":252,"pixelRatio":2,"sdf":true},"rail-metro-15":{"width":36,"height":36,"x":360,"y":252,"pixelRatio":2,"sdf":true},"ranger-station-15":{"width":36,"height":36,"x":396,"y":252,"pixelRatio":2,"sdf":true},"recycling-15":{"width":36,"height":36,"x":432,"y":252,"pixelRatio":2,"sdf":true},"religious-buddhist-15":{"width":36,"height":36,"x":468,"y":252,"pixelRatio":2,"sdf":true},"religious-christian-15":{"width":36,"height":36,"x":504,"y":252,"pixelRatio":2,"sdf":true},"religious-jewish-15":{"width":36,"height":36,"x":540,"y":252,"pixelRatio":2,"sdf":true},"religious-muslim-15":{"width":36,"height":36,"x":0,"y":288,"pixelRatio":2,"sdf":true},"residential-community-15":{"width":36,"height":36,"x":36,"y":288,"pixelRatio":2,"sdf":true},"restaurant-15":{"width":36,"height":36,"x":72,"y":288,"pixelRatio":2,"sdf":true},"restaurant-noodle-15":{"width":36,"height":36,"x":108,"y":288,"pixelRatio":2,"sdf":true},"restaurant-pizza-15":{"width":36,"height":36,"x":144,"y":288,"pixelRatio":2,"sdf":true},"restaurant-seafood-15":{"width":36,"height":36,"x":180,"y":288,"pixelRatio":2,"sdf":true},"roadblock-15":{"width":36,"height":36,"x":216,"y":288,"pixelRatio":2,"sdf":true},"rocket-15":{"width":36,"height":36,"x":252,"y":288,"pixelRatio":2,"sdf":true},"school-15":{"width":36,"height":36,"x":288,"y":288,"pixelRatio":2,"sdf":true},"scooter-15":{"width":36,"height":36,"x":324,"y":288,"pixelRatio":2,"sdf":true},"shelter-15":{"width":36,"height":36,"x":360,"y":288,"pixelRatio":2,"sdf":true},"shoe-15":{"width":36,"height":36,"x":396,"y":288,"pixelRatio":2,"sdf":true},"shop-15":{"width":36,"height":36,"x":432,"y":288,"pixelRatio":2,"sdf":true},"skateboard-15":{"width":36,"height":36,"x":468,"y":288,"pixelRatio":2,"sdf":true},"skiing-15":{"width":36,"height":36,"x":504,"y":288,"pixelRatio":2,"sdf":true},"slaughterhouse-15":{"width":36,"height":36,"x":540,"y":288,"pixelRatio":2,"sdf":true},"slipway-15":{"width":36,"height":36,"x":0,"y":324,"pixelRatio":2,"sdf":true},"snowmobile-15":{"width":36,"height":36,"x":36,"y":324,"pixelRatio":2,"sdf":true},"soccer-15":{"width":36,"height":36,"x":72,"y":324,"pixelRatio":2,"sdf":true},"square-15":{"width":36,"height":36,"x":108,"y":324,"pixelRatio":2,"sdf":true},"square-stroked-15":{"width":36,"height":36,"x":144,"y":324,"pixelRatio":2,"sdf":true},"stadium-15":{"width":36,"height":36,"x":180,"y":324,"pixelRatio":2,"sdf":true},"star-15":{"width":36,"height":36,"x":216,"y":324,"pixelRatio":2,"sdf":true},"star-stroked-15":{"width":36,"height":36,"x":252,"y":324,"pixelRatio":2,"sdf":true},"suitcase-15":{"width":36,"height":36,"x":288,"y":324,"pixelRatio":2,"sdf":true},"sushi-15":{"width":36,"height":36,"x":324,"y":324,"pixelRatio":2,"sdf":true},"swimming-15":{"width":36,"height":36,"x":360,"y":324,"pixelRatio":2,"sdf":true},"table-tennis-15":{"width":36,"height":36,"x":396,"y":324,"pixelRatio":2,"sdf":true},"teahouse-15":{"width":36,"height":36,"x":432,"y":324,"pixelRatio":2,"sdf":true},"telephone-15":{"width":36,"height":36,"x":468,"y":324,"pixelRatio":2,"sdf":true},"tennis-15":{"width":36,"height":36,"x":504,"y":324,"pixelRatio":2,"sdf":true},"theatre-15":{"width":36,"height":36,"x":540,"y":324,"pixelRatio":2,"sdf":true},"toilet-15":{"width":36,"height":36,"x":0,"y":360,"pixelRatio":2,"sdf":true},"town-15":{"width":36,"height":36,"x":36,"y":360,"pixelRatio":2,"sdf":true},"town-hall-15":{"width":36,"height":36,"x":72,"y":360,"pixelRatio":2,"sdf":true},"triangle-15":{"width":36,"height":36,"x":108,"y":360,"pixelRatio":2,"sdf":true},"triangle-stroked-15":{"width":36,"height":36,"x":144,"y":360,"pixelRatio":2,"sdf":true},"veterinary-15":{"width":36,"height":36,"x":180,"y":360,"pixelRatio":2,"sdf":true},"viewpoint-15":{"width":36,"height":36,"x":216,"y":360,"pixelRatio":2,"sdf":true},"village-15":{"width":36,"height":36,"x":252,"y":360,"pixelRatio":2,"sdf":true},"volcano-15":{"width":36,"height":36,"x":288,"y":360,"pixelRatio":2,"sdf":true},"volleyball-15":{"width":36,"height":36,"x":324,"y":360,"pixelRatio":2,"sdf":true},"warehouse-15":{"width":36,"height":36,"x":360,"y":360,"pixelRatio":2,"sdf":true},"waste-basket-15":{"width":36,"height":36,"x":396,"y":360,"pixelRatio":2,"sdf":true},"watch-15":{"width":36,"height":36,"x":432,"y":360,"pixelRatio":2,"sdf":true},"water-15":{"width":36,"height":36,"x":468,"y":360,"pixelRatio":2,"sdf":true},"waterfall-15":{"width":36,"height":36,"x":504,"y":360,"pixelRatio":2,"sdf":true},"watermill-15":{"width":36,"height":36,"x":540,"y":360,"pixelRatio":2,"sdf":true},"wetland-15":{"width":36,"height":36,"x":0,"y":396,"pixelRatio":2,"sdf":true},"wheelchair-15":{"width":36,"height":36,"x":36,"y":396,"pixelRatio":2,"sdf":true},"windmill-15":{"width":36,"height":36,"x":72,"y":396,"pixelRatio":2,"sdf":true},"zoo-15":{"width":36,"height":36,"x":108,"y":396,"pixelRatio":2,"sdf":true},"aerialway-11":{"width":28,"height":28,"x":144,"y":396,"pixelRatio":2,"sdf":true},"airfield-11":{"width":28,"height":28,"x":172,"y":396,"pixelRatio":2,"sdf":true},"airport-11":{"width":28,"height":28,"x":200,"y":396,"pixelRatio":2,"sdf":true},"alcohol-shop-11":{"width":28,"height":28,"x":228,"y":396,"pixelRatio":2,"sdf":true},"american-football-11":{"width":28,"height":28,"x":256,"y":396,"pixelRatio":2,"sdf":true},"amusement-park-11":{"width":28,"height":28,"x":284,"y":396,"pixelRatio":2,"sdf":true},"aquarium-11":{"width":28,"height":28,"x":312,"y":396,"pixelRatio":2,"sdf":true},"arrow-es-11":{"width":28,"height":28,"x":340,"y":396,"pixelRatio":2,"sdf":true},"art-gallery-11":{"width":28,"height":28,"x":368,"y":396,"pixelRatio":2,"sdf":true},"attraction-11":{"width":28,"height":28,"x":396,"y":396,"pixelRatio":2,"sdf":true},"bakery-11":{"width":28,"height":28,"x":424,"y":396,"pixelRatio":2,"sdf":true},"bank-11":{"width":28,"height":28,"x":452,"y":396,"pixelRatio":2,"sdf":true},"bar-11":{"width":28,"height":28,"x":480,"y":396,"pixelRatio":2,"sdf":true},"barrier-11":{"width":28,"height":28,"x":508,"y":396,"pixelRatio":2,"sdf":true},"baseball-11":{"width":28,"height":28,"x":536,"y":396,"pixelRatio":2,"sdf":true},"basketball-11":{"width":28,"height":28,"x":0,"y":432,"pixelRatio":2,"sdf":true},"bbq-11":{"width":28,"height":28,"x":28,"y":432,"pixelRatio":2,"sdf":true},"beach-11":{"width":28,"height":28,"x":56,"y":432,"pixelRatio":2,"sdf":true},"beer-11":{"width":28,"height":28,"x":84,"y":432,"pixelRatio":2,"sdf":true},"bicycle-11":{"width":28,"height":28,"x":112,"y":432,"pixelRatio":2,"sdf":true},"bicycle-share-11":{"width":28,"height":28,"x":140,"y":432,"pixelRatio":2,"sdf":true},"blood-bank-11":{"width":28,"height":28,"x":168,"y":432,"pixelRatio":2,"sdf":true},"boat-es-11":{"width":28,"height":28,"x":196,"y":432,"pixelRatio":2,"sdf":true},"bowling-alley-11":{"width":28,"height":28,"x":224,"y":432,"pixelRatio":2,"sdf":true},"bridge-11":{"width":28,"height":28,"x":252,"y":432,"pixelRatio":2,"sdf":true},"building-11":{"width":28,"height":28,"x":280,"y":432,"pixelRatio":2,"sdf":true},"building-alt1-11":{"width":28,"height":28,"x":308,"y":432,"pixelRatio":2,"sdf":true},"bus-11":{"width":28,"height":28,"x":336,"y":432,"pixelRatio":2,"sdf":true},"cafe-11":{"width":28,"height":28,"x":364,"y":432,"pixelRatio":2,"sdf":true},"campsite-11":{"width":28,"height":28,"x":392,"y":432,"pixelRatio":2,"sdf":true},"car-11":{"width":28,"height":28,"x":420,"y":432,"pixelRatio":2,"sdf":true},"car-rental-11":{"width":28,"height":28,"x":448,"y":432,"pixelRatio":2,"sdf":true},"car-repair-11":{"width":28,"height":28,"x":476,"y":432,"pixelRatio":2,"sdf":true},"car-top-es-11":{"width":28,"height":28,"x":504,"y":432,"pixelRatio":2,"sdf":true},"casino-11":{"width":28,"height":28,"x":532,"y":432,"pixelRatio":2,"sdf":true},"castle-11":{"width":28,"height":28,"x":0,"y":460,"pixelRatio":2,"sdf":true},"cemetery-11":{"width":28,"height":28,"x":28,"y":460,"pixelRatio":2,"sdf":true},"charging-station-11":{"width":28,"height":28,"x":56,"y":460,"pixelRatio":2,"sdf":true},"cinema-11":{"width":28,"height":28,"x":84,"y":460,"pixelRatio":2,"sdf":true},"circle-11":{"width":28,"height":28,"x":112,"y":460,"pixelRatio":2,"sdf":true},"circle-stroked-11":{"width":28,"height":28,"x":140,"y":460,"pixelRatio":2,"sdf":true},"city-11":{"width":28,"height":28,"x":168,"y":460,"pixelRatio":2,"sdf":true},"clothing-store-11":{"width":28,"height":28,"x":196,"y":460,"pixelRatio":2,"sdf":true},"college-11":{"width":28,"height":28,"x":224,"y":460,"pixelRatio":2,"sdf":true},"commercial-11":{"width":28,"height":28,"x":252,"y":460,"pixelRatio":2,"sdf":true},"communications-tower-11":{"width":28,"height":28,"x":280,"y":460,"pixelRatio":2,"sdf":true},"confectionery-11":{"width":28,"height":28,"x":308,"y":460,"pixelRatio":2,"sdf":true},"convenience-11":{"width":28,"height":28,"x":336,"y":460,"pixelRatio":2,"sdf":true},"cricket-11":{"width":28,"height":28,"x":364,"y":460,"pixelRatio":2,"sdf":true},"cross-11":{"width":28,"height":28,"x":392,"y":460,"pixelRatio":2,"sdf":true},"dam-11":{"width":28,"height":28,"x":420,"y":460,"pixelRatio":2,"sdf":true},"danger-11":{"width":28,"height":28,"x":448,"y":460,"pixelRatio":2,"sdf":true},"defibrillator-11":{"width":28,"height":28,"x":476,"y":460,"pixelRatio":2,"sdf":true},"dentist-11":{"width":28,"height":28,"x":504,"y":460,"pixelRatio":2,"sdf":true},"doctor-11":{"width":28,"height":28,"x":532,"y":460,"pixelRatio":2,"sdf":true},"dog-park-11":{"width":28,"height":28,"x":0,"y":488,"pixelRatio":2,"sdf":true},"drinking-water-11":{"width":28,"height":28,"x":28,"y":488,"pixelRatio":2,"sdf":true},"embassy-11":{"width":28,"height":28,"x":56,"y":488,"pixelRatio":2,"sdf":true},"emergency-phone-11":{"width":28,"height":28,"x":84,"y":488,"pixelRatio":2,"sdf":true},"entrance-11":{"width":28,"height":28,"x":112,"y":488,"pixelRatio":2,"sdf":true},"entrance-alt1-11":{"width":28,"height":28,"x":140,"y":488,"pixelRatio":2,"sdf":true},"farm-11":{"width":28,"height":28,"x":168,"y":488,"pixelRatio":2,"sdf":true},"fast-food-11":{"width":28,"height":28,"x":196,"y":488,"pixelRatio":2,"sdf":true},"fence-11":{"width":28,"height":28,"x":224,"y":488,"pixelRatio":2,"sdf":true},"ferry-11":{"width":28,"height":28,"x":252,"y":488,"pixelRatio":2,"sdf":true},"fire-station-11":{"width":28,"height":28,"x":280,"y":488,"pixelRatio":2,"sdf":true},"fitness-centre-11":{"width":28,"height":28,"x":308,"y":488,"pixelRatio":2,"sdf":true},"florist-11":{"width":28,"height":28,"x":336,"y":488,"pixelRatio":2,"sdf":true},"fuel-11":{"width":28,"height":28,"x":364,"y":488,"pixelRatio":2,"sdf":true},"furniture-11":{"width":28,"height":28,"x":392,"y":488,"pixelRatio":2,"sdf":true},"gaming-11":{"width":28,"height":28,"x":420,"y":488,"pixelRatio":2,"sdf":true},"garden-11":{"width":28,"height":28,"x":448,"y":488,"pixelRatio":2,"sdf":true},"garden-centre-11":{"width":28,"height":28,"x":476,"y":488,"pixelRatio":2,"sdf":true},"gift-11":{"width":28,"height":28,"x":504,"y":488,"pixelRatio":2,"sdf":true},"globe-11":{"width":28,"height":28,"x":532,"y":488,"pixelRatio":2,"sdf":true},"golf-11":{"width":28,"height":28,"x":0,"y":516,"pixelRatio":2,"sdf":true},"grocery-11":{"width":28,"height":28,"x":28,"y":516,"pixelRatio":2,"sdf":true},"hairdresser-11":{"width":28,"height":28,"x":56,"y":516,"pixelRatio":2,"sdf":true},"harbor-11":{"width":28,"height":28,"x":84,"y":516,"pixelRatio":2,"sdf":true},"hardware-11":{"width":28,"height":28,"x":112,"y":516,"pixelRatio":2,"sdf":true},"heart-11":{"width":28,"height":28,"x":140,"y":516,"pixelRatio":2,"sdf":true},"heliport-11":{"width":28,"height":28,"x":168,"y":516,"pixelRatio":2,"sdf":true},"home-11":{"width":28,"height":28,"x":196,"y":516,"pixelRatio":2,"sdf":true},"horse-riding-11":{"width":28,"height":28,"x":224,"y":516,"pixelRatio":2,"sdf":true},"hospital-11":{"width":28,"height":28,"x":252,"y":516,"pixelRatio":2,"sdf":true},"ice-cream-11":{"width":28,"height":28,"x":280,"y":516,"pixelRatio":2,"sdf":true},"industry-11":{"width":28,"height":28,"x":308,"y":516,"pixelRatio":2,"sdf":true},"information-11":{"width":28,"height":28,"x":336,"y":516,"pixelRatio":2,"sdf":true},"jewelry-store-11":{"width":28,"height":28,"x":364,"y":516,"pixelRatio":2,"sdf":true},"karaoke-11":{"width":28,"height":28,"x":392,"y":516,"pixelRatio":2,"sdf":true},"landmark-11":{"width":28,"height":28,"x":420,"y":516,"pixelRatio":2,"sdf":true},"landuse-11":{"width":28,"height":28,"x":448,"y":516,"pixelRatio":2,"sdf":true},"laundry-11":{"width":28,"height":28,"x":476,"y":516,"pixelRatio":2,"sdf":true},"library-11":{"width":28,"height":28,"x":504,"y":516,"pixelRatio":2,"sdf":true},"lighthouse-11":{"width":28,"height":28,"x":532,"y":516,"pixelRatio":2,"sdf":true},"lodging-11":{"width":28,"height":28,"x":0,"y":544,"pixelRatio":2,"sdf":true},"logging-11":{"width":28,"height":28,"x":28,"y":544,"pixelRatio":2,"sdf":true},"marker-11":{"width":28,"height":28,"x":56,"y":544,"pixelRatio":2,"sdf":true},"marker-stroked-11":{"width":28,"height":28,"x":84,"y":544,"pixelRatio":2,"sdf":true},"mobile-phone-11":{"width":28,"height":28,"x":112,"y":544,"pixelRatio":2,"sdf":true},"monument-11":{"width":28,"height":28,"x":140,"y":544,"pixelRatio":2,"sdf":true},"mountain-11":{"width":28,"height":28,"x":168,"y":544,"pixelRatio":2,"sdf":true},"museum-11":{"width":28,"height":28,"x":196,"y":544,"pixelRatio":2,"sdf":true},"music-11":{"width":28,"height":28,"x":224,"y":544,"pixelRatio":2,"sdf":true},"natural-11":{"width":28,"height":28,"x":252,"y":544,"pixelRatio":2,"sdf":true},"oil-rig-es-11":{"width":28,"height":28,"x":280,"y":544,"pixelRatio":2,"sdf":true},"optician-11":{"width":28,"height":28,"x":308,"y":544,"pixelRatio":2,"sdf":true},"paint-11":{"width":28,"height":28,"x":336,"y":544,"pixelRatio":2,"sdf":true},"park-11":{"width":28,"height":28,"x":364,"y":544,"pixelRatio":2,"sdf":true},"park-alt1-11":{"width":28,"height":28,"x":392,"y":544,"pixelRatio":2,"sdf":true},"parking-11":{"width":28,"height":28,"x":420,"y":544,"pixelRatio":2,"sdf":true},"parking-garage-11":{"width":28,"height":28,"x":448,"y":544,"pixelRatio":2,"sdf":true},"pharmacy-11":{"width":28,"height":28,"x":476,"y":544,"pixelRatio":2,"sdf":true},"picnic-site-11":{"width":28,"height":28,"x":504,"y":544,"pixelRatio":2,"sdf":true},"pitch-11":{"width":28,"height":28,"x":532,"y":544,"pixelRatio":2,"sdf":true},"place-of-worship-11":{"width":28,"height":28,"x":560,"y":432,"pixelRatio":2,"sdf":true},"playground-11":{"width":28,"height":28,"x":588,"y":432,"pixelRatio":2,"sdf":true},"police-11":{"width":28,"height":28,"x":616,"y":432,"pixelRatio":2,"sdf":true},"post-11":{"width":28,"height":28,"x":644,"y":432,"pixelRatio":2,"sdf":true},"prison-11":{"width":28,"height":28,"x":672,"y":432,"pixelRatio":2,"sdf":true},"rail-11":{"width":28,"height":28,"x":700,"y":432,"pixelRatio":2,"sdf":true},"rail-light-11":{"width":28,"height":28,"x":728,"y":432,"pixelRatio":2,"sdf":true},"rail-metro-11":{"width":28,"height":28,"x":756,"y":432,"pixelRatio":2,"sdf":true},"ranger-station-11":{"width":28,"height":28,"x":784,"y":432,"pixelRatio":2,"sdf":true},"recycling-11":{"width":28,"height":28,"x":812,"y":432,"pixelRatio":2,"sdf":true},"religious-buddhist-11":{"width":28,"height":28,"x":840,"y":432,"pixelRatio":2,"sdf":true},"religious-christian-11":{"width":28,"height":28,"x":868,"y":432,"pixelRatio":2,"sdf":true},"religious-jewish-11":{"width":28,"height":28,"x":896,"y":432,"pixelRatio":2,"sdf":true},"religious-muslim-11":{"width":28,"height":28,"x":924,"y":432,"pixelRatio":2,"sdf":true},"residential-community-11":{"width":28,"height":28,"x":952,"y":432,"pixelRatio":2,"sdf":true},"restaurant-11":{"width":28,"height":28,"x":980,"y":432,"pixelRatio":2,"sdf":true},"restaurant-noodle-11":{"width":28,"height":28,"x":1008,"y":432,"pixelRatio":2,"sdf":true},"restaurant-pizza-11":{"width":28,"height":28,"x":1036,"y":432,"pixelRatio":2,"sdf":true},"restaurant-seafood-11":{"width":28,"height":28,"x":1064,"y":432,"pixelRatio":2,"sdf":true},"roadblock-11":{"width":28,"height":28,"x":1092,"y":432,"pixelRatio":2,"sdf":true},"rocket-11":{"width":28,"height":28,"x":1120,"y":432,"pixelRatio":2,"sdf":true},"school-11":{"width":28,"height":28,"x":560,"y":460,"pixelRatio":2,"sdf":true},"scooter-11":{"width":28,"height":28,"x":588,"y":460,"pixelRatio":2,"sdf":true},"shelter-11":{"width":28,"height":28,"x":616,"y":460,"pixelRatio":2,"sdf":true},"shoe-11":{"width":28,"height":28,"x":644,"y":460,"pixelRatio":2,"sdf":true},"shop-11":{"width":28,"height":28,"x":672,"y":460,"pixelRatio":2,"sdf":true},"skateboard-11":{"width":28,"height":28,"x":700,"y":460,"pixelRatio":2,"sdf":true},"skiing-11":{"width":28,"height":28,"x":728,"y":460,"pixelRatio":2,"sdf":true},"slaughterhouse-11":{"width":28,"height":28,"x":756,"y":460,"pixelRatio":2,"sdf":true},"slipway-11":{"width":28,"height":28,"x":784,"y":460,"pixelRatio":2,"sdf":true},"snowmobile-11":{"width":28,"height":28,"x":812,"y":460,"pixelRatio":2,"sdf":true},"soccer-11":{"width":28,"height":28,"x":840,"y":460,"pixelRatio":2,"sdf":true},"square-11":{"width":28,"height":28,"x":868,"y":460,"pixelRatio":2,"sdf":true},"square-stroked-11":{"width":28,"height":28,"x":896,"y":460,"pixelRatio":2,"sdf":true},"stadium-11":{"width":28,"height":28,"x":924,"y":460,"pixelRatio":2,"sdf":true},"star-11":{"width":28,"height":28,"x":952,"y":460,"pixelRatio":2,"sdf":true},"star-stroked-11":{"width":28,"height":28,"x":980,"y":460,"pixelRatio":2,"sdf":true},"suitcase-11":{"width":28,"height":28,"x":1008,"y":460,"pixelRatio":2,"sdf":true},"sushi-11":{"width":28,"height":28,"x":1036,"y":460,"pixelRatio":2,"sdf":true},"swimming-11":{"width":28,"height":28,"x":1064,"y":460,"pixelRatio":2,"sdf":true},"table-tennis-11":{"width":28,"height":28,"x":1092,"y":460,"pixelRatio":2,"sdf":true},"teahouse-11":{"width":28,"height":28,"x":1120,"y":460,"pixelRatio":2,"sdf":true},"telephone-11":{"width":28,"height":28,"x":560,"y":488,"pixelRatio":2,"sdf":true},"tennis-11":{"width":28,"height":28,"x":588,"y":488,"pixelRatio":2,"sdf":true},"theatre-11":{"width":28,"height":28,"x":616,"y":488,"pixelRatio":2,"sdf":true},"toilet-11":{"width":28,"height":28,"x":644,"y":488,"pixelRatio":2,"sdf":true},"town-11":{"width":28,"height":28,"x":672,"y":488,"pixelRatio":2,"sdf":true},"town-hall-11":{"width":28,"height":28,"x":700,"y":488,"pixelRatio":2,"sdf":true},"triangle-11":{"width":28,"height":28,"x":728,"y":488,"pixelRatio":2,"sdf":true},"triangle-stroked-11":{"width":28,"height":28,"x":756,"y":488,"pixelRatio":2,"sdf":true},"veterinary-11":{"width":28,"height":28,"x":784,"y":488,"pixelRatio":2,"sdf":true},"viewpoint-11":{"width":28,"height":28,"x":812,"y":488,"pixelRatio":2,"sdf":true},"village-11":{"width":28,"height":28,"x":840,"y":488,"pixelRatio":2,"sdf":true},"volcano-11":{"width":28,"height":28,"x":868,"y":488,"pixelRatio":2,"sdf":true},"volleyball-11":{"width":28,"height":28,"x":896,"y":488,"pixelRatio":2,"sdf":true},"warehouse-11":{"width":28,"height":28,"x":924,"y":488,"pixelRatio":2,"sdf":true},"waste-basket-11":{"width":28,"height":28,"x":952,"y":488,"pixelRatio":2,"sdf":true},"watch-11":{"width":28,"height":28,"x":980,"y":488,"pixelRatio":2,"sdf":true},"water-11":{"width":28,"height":28,"x":1008,"y":488,"pixelRatio":2,"sdf":true},"waterfall-11":{"width":28,"height":28,"x":1036,"y":488,"pixelRatio":2,"sdf":true},"watermill-11":{"width":28,"height":28,"x":1064,"y":488,"pixelRatio":2,"sdf":true},"wetland-11":{"width":28,"height":28,"x":1092,"y":488,"pixelRatio":2,"sdf":true},"wheelchair-11":{"width":28,"height":28,"x":1120,"y":488,"pixelRatio":2,"sdf":true},"windmill-11":{"width":28,"height":28,"x":560,"y":516,"pixelRatio":2,"sdf":true},"zoo-11":{"width":28,"height":28,"x":588,"y":516,"pixelRatio":2,"sdf":true}}')},function(module){module.exports=JSON.parse('{"aerialway-15":{"width":66,"height":66,"x":0,"y":0,"pixelRatio":4,"sdf":true},"airfield-15":{"width":66,"height":66,"x":66,"y":0,"pixelRatio":4,"sdf":true},"airport-15":{"width":66,"height":66,"x":0,"y":66,"pixelRatio":4,"sdf":true},"alcohol-shop-15":{"width":66,"height":66,"x":66,"y":66,"pixelRatio":4,"sdf":true},"american-football-15":{"width":66,"height":66,"x":132,"y":0,"pixelRatio":4,"sdf":true},"amusement-park-15":{"width":66,"height":66,"x":198,"y":0,"pixelRatio":4,"sdf":true},"aquarium-15":{"width":66,"height":66,"x":132,"y":66,"pixelRatio":4,"sdf":true},"arrow-es-15":{"width":66,"height":66,"x":198,"y":66,"pixelRatio":4,"sdf":true},"art-gallery-15":{"width":66,"height":66,"x":0,"y":132,"pixelRatio":4,"sdf":true},"attraction-15":{"width":66,"height":66,"x":66,"y":132,"pixelRatio":4,"sdf":true},"bakery-15":{"width":66,"height":66,"x":132,"y":132,"pixelRatio":4,"sdf":true},"bank-15":{"width":66,"height":66,"x":198,"y":132,"pixelRatio":4,"sdf":true},"bar-15":{"width":66,"height":66,"x":0,"y":198,"pixelRatio":4,"sdf":true},"barrier-15":{"width":66,"height":66,"x":66,"y":198,"pixelRatio":4,"sdf":true},"baseball-15":{"width":66,"height":66,"x":132,"y":198,"pixelRatio":4,"sdf":true},"basketball-15":{"width":66,"height":66,"x":198,"y":198,"pixelRatio":4,"sdf":true},"bbq-15":{"width":66,"height":66,"x":264,"y":0,"pixelRatio":4,"sdf":true},"beach-15":{"width":66,"height":66,"x":330,"y":0,"pixelRatio":4,"sdf":true},"beer-15":{"width":66,"height":66,"x":396,"y":0,"pixelRatio":4,"sdf":true},"bicycle-15":{"width":66,"height":66,"x":462,"y":0,"pixelRatio":4,"sdf":true},"bicycle-share-15":{"width":66,"height":66,"x":264,"y":66,"pixelRatio":4,"sdf":true},"blood-bank-15":{"width":66,"height":66,"x":330,"y":66,"pixelRatio":4,"sdf":true},"boat-es-15":{"width":66,"height":66,"x":396,"y":66,"pixelRatio":4,"sdf":true},"bowling-alley-15":{"width":66,"height":66,"x":462,"y":66,"pixelRatio":4,"sdf":true},"bridge-15":{"width":66,"height":66,"x":264,"y":132,"pixelRatio":4,"sdf":true},"building-15":{"width":66,"height":66,"x":330,"y":132,"pixelRatio":4,"sdf":true},"building-alt1-15":{"width":66,"height":66,"x":396,"y":132,"pixelRatio":4,"sdf":true},"bus-15":{"width":66,"height":66,"x":462,"y":132,"pixelRatio":4,"sdf":true},"cafe-15":{"width":66,"height":66,"x":264,"y":198,"pixelRatio":4,"sdf":true},"campsite-15":{"width":66,"height":66,"x":330,"y":198,"pixelRatio":4,"sdf":true},"car-15":{"width":66,"height":66,"x":396,"y":198,"pixelRatio":4,"sdf":true},"car-rental-15":{"width":66,"height":66,"x":462,"y":198,"pixelRatio":4,"sdf":true},"car-repair-15":{"width":66,"height":66,"x":0,"y":264,"pixelRatio":4,"sdf":true},"car-top-es-15":{"width":66,"height":66,"x":66,"y":264,"pixelRatio":4,"sdf":true},"casino-15":{"width":66,"height":66,"x":132,"y":264,"pixelRatio":4,"sdf":true},"castle-15":{"width":66,"height":66,"x":198,"y":264,"pixelRatio":4,"sdf":true},"cemetery-15":{"width":66,"height":66,"x":264,"y":264,"pixelRatio":4,"sdf":true},"charging-station-15":{"width":66,"height":66,"x":330,"y":264,"pixelRatio":4,"sdf":true},"cinema-15":{"width":66,"height":66,"x":396,"y":264,"pixelRatio":4,"sdf":true},"circle-15":{"width":66,"height":66,"x":462,"y":264,"pixelRatio":4,"sdf":true},"circle-stroked-15":{"width":66,"height":66,"x":0,"y":330,"pixelRatio":4,"sdf":true},"city-15":{"width":66,"height":66,"x":66,"y":330,"pixelRatio":4,"sdf":true},"clothing-store-15":{"width":66,"height":66,"x":132,"y":330,"pixelRatio":4,"sdf":true},"college-15":{"width":66,"height":66,"x":198,"y":330,"pixelRatio":4,"sdf":true},"commercial-15":{"width":66,"height":66,"x":264,"y":330,"pixelRatio":4,"sdf":true},"communications-tower-15":{"width":66,"height":66,"x":330,"y":330,"pixelRatio":4,"sdf":true},"confectionery-15":{"width":66,"height":66,"x":396,"y":330,"pixelRatio":4,"sdf":true},"convenience-15":{"width":66,"height":66,"x":462,"y":330,"pixelRatio":4,"sdf":true},"cricket-15":{"width":66,"height":66,"x":0,"y":396,"pixelRatio":4,"sdf":true},"cross-15":{"width":66,"height":66,"x":66,"y":396,"pixelRatio":4,"sdf":true},"dam-15":{"width":66,"height":66,"x":132,"y":396,"pixelRatio":4,"sdf":true},"danger-15":{"width":66,"height":66,"x":198,"y":396,"pixelRatio":4,"sdf":true},"defibrillator-15":{"width":66,"height":66,"x":264,"y":396,"pixelRatio":4,"sdf":true},"dentist-15":{"width":66,"height":66,"x":330,"y":396,"pixelRatio":4,"sdf":true},"doctor-15":{"width":66,"height":66,"x":396,"y":396,"pixelRatio":4,"sdf":true},"dog-park-15":{"width":66,"height":66,"x":462,"y":396,"pixelRatio":4,"sdf":true},"drinking-water-15":{"width":66,"height":66,"x":0,"y":462,"pixelRatio":4,"sdf":true},"embassy-15":{"width":66,"height":66,"x":66,"y":462,"pixelRatio":4,"sdf":true},"emergency-phone-15":{"width":66,"height":66,"x":132,"y":462,"pixelRatio":4,"sdf":true},"entrance-15":{"width":66,"height":66,"x":198,"y":462,"pixelRatio":4,"sdf":true},"entrance-alt1-15":{"width":66,"height":66,"x":264,"y":462,"pixelRatio":4,"sdf":true},"farm-15":{"width":66,"height":66,"x":330,"y":462,"pixelRatio":4,"sdf":true},"fast-food-15":{"width":66,"height":66,"x":396,"y":462,"pixelRatio":4,"sdf":true},"fence-15":{"width":66,"height":66,"x":462,"y":462,"pixelRatio":4,"sdf":true},"ferry-15":{"width":66,"height":66,"x":528,"y":0,"pixelRatio":4,"sdf":true},"fire-station-15":{"width":66,"height":66,"x":594,"y":0,"pixelRatio":4,"sdf":true},"fitness-centre-15":{"width":66,"height":66,"x":660,"y":0,"pixelRatio":4,"sdf":true},"florist-15":{"width":66,"height":66,"x":726,"y":0,"pixelRatio":4,"sdf":true},"fuel-15":{"width":66,"height":66,"x":792,"y":0,"pixelRatio":4,"sdf":true},"furniture-15":{"width":66,"height":66,"x":858,"y":0,"pixelRatio":4,"sdf":true},"gaming-15":{"width":66,"height":66,"x":924,"y":0,"pixelRatio":4,"sdf":true},"garden-15":{"width":66,"height":66,"x":990,"y":0,"pixelRatio":4,"sdf":true},"garden-centre-15":{"width":66,"height":66,"x":528,"y":66,"pixelRatio":4,"sdf":true},"gift-15":{"width":66,"height":66,"x":594,"y":66,"pixelRatio":4,"sdf":true},"globe-15":{"width":66,"height":66,"x":660,"y":66,"pixelRatio":4,"sdf":true},"golf-15":{"width":66,"height":66,"x":726,"y":66,"pixelRatio":4,"sdf":true},"grocery-15":{"width":66,"height":66,"x":792,"y":66,"pixelRatio":4,"sdf":true},"hairdresser-15":{"width":66,"height":66,"x":858,"y":66,"pixelRatio":4,"sdf":true},"harbor-15":{"width":66,"height":66,"x":924,"y":66,"pixelRatio":4,"sdf":true},"hardware-15":{"width":66,"height":66,"x":990,"y":66,"pixelRatio":4,"sdf":true},"heart-15":{"width":66,"height":66,"x":528,"y":132,"pixelRatio":4,"sdf":true},"heliport-15":{"width":66,"height":66,"x":594,"y":132,"pixelRatio":4,"sdf":true},"home-15":{"width":66,"height":66,"x":660,"y":132,"pixelRatio":4,"sdf":true},"horse-riding-15":{"width":66,"height":66,"x":726,"y":132,"pixelRatio":4,"sdf":true},"hospital-15":{"width":66,"height":66,"x":792,"y":132,"pixelRatio":4,"sdf":true},"ice-cream-15":{"width":66,"height":66,"x":858,"y":132,"pixelRatio":4,"sdf":true},"industry-15":{"width":66,"height":66,"x":924,"y":132,"pixelRatio":4,"sdf":true},"information-15":{"width":66,"height":66,"x":990,"y":132,"pixelRatio":4,"sdf":true},"jewelry-store-15":{"width":66,"height":66,"x":528,"y":198,"pixelRatio":4,"sdf":true},"karaoke-15":{"width":66,"height":66,"x":594,"y":198,"pixelRatio":4,"sdf":true},"landmark-15":{"width":66,"height":66,"x":660,"y":198,"pixelRatio":4,"sdf":true},"landuse-15":{"width":66,"height":66,"x":726,"y":198,"pixelRatio":4,"sdf":true},"laundry-15":{"width":66,"height":66,"x":792,"y":198,"pixelRatio":4,"sdf":true},"library-15":{"width":66,"height":66,"x":858,"y":198,"pixelRatio":4,"sdf":true},"lighthouse-15":{"width":66,"height":66,"x":924,"y":198,"pixelRatio":4,"sdf":true},"lodging-15":{"width":66,"height":66,"x":990,"y":198,"pixelRatio":4,"sdf":true},"logging-15":{"width":66,"height":66,"x":528,"y":264,"pixelRatio":4,"sdf":true},"marker-15":{"width":66,"height":66,"x":594,"y":264,"pixelRatio":4,"sdf":true},"marker-stroked-15":{"width":66,"height":66,"x":660,"y":264,"pixelRatio":4,"sdf":true},"mobile-phone-15":{"width":66,"height":66,"x":726,"y":264,"pixelRatio":4,"sdf":true},"monument-15":{"width":66,"height":66,"x":792,"y":264,"pixelRatio":4,"sdf":true},"mountain-15":{"width":66,"height":66,"x":858,"y":264,"pixelRatio":4,"sdf":true},"museum-15":{"width":66,"height":66,"x":924,"y":264,"pixelRatio":4,"sdf":true},"music-15":{"width":66,"height":66,"x":990,"y":264,"pixelRatio":4,"sdf":true},"natural-15":{"width":66,"height":66,"x":528,"y":330,"pixelRatio":4,"sdf":true},"oil-rig-es-15":{"width":66,"height":66,"x":594,"y":330,"pixelRatio":4,"sdf":true},"optician-15":{"width":66,"height":66,"x":660,"y":330,"pixelRatio":4,"sdf":true},"paint-15":{"width":66,"height":66,"x":726,"y":330,"pixelRatio":4,"sdf":true},"park-15":{"width":66,"height":66,"x":792,"y":330,"pixelRatio":4,"sdf":true},"park-alt1-15":{"width":66,"height":66,"x":858,"y":330,"pixelRatio":4,"sdf":true},"parking-15":{"width":66,"height":66,"x":924,"y":330,"pixelRatio":4,"sdf":true},"parking-garage-15":{"width":66,"height":66,"x":990,"y":330,"pixelRatio":4,"sdf":true},"pharmacy-15":{"width":66,"height":66,"x":528,"y":396,"pixelRatio":4,"sdf":true},"picnic-site-15":{"width":66,"height":66,"x":594,"y":396,"pixelRatio":4,"sdf":true},"pitch-15":{"width":66,"height":66,"x":660,"y":396,"pixelRatio":4,"sdf":true},"place-of-worship-15":{"width":66,"height":66,"x":726,"y":396,"pixelRatio":4,"sdf":true},"playground-15":{"width":66,"height":66,"x":792,"y":396,"pixelRatio":4,"sdf":true},"police-15":{"width":66,"height":66,"x":858,"y":396,"pixelRatio":4,"sdf":true},"post-15":{"width":66,"height":66,"x":924,"y":396,"pixelRatio":4,"sdf":true},"prison-15":{"width":66,"height":66,"x":990,"y":396,"pixelRatio":4,"sdf":true},"rail-15":{"width":66,"height":66,"x":528,"y":462,"pixelRatio":4,"sdf":true},"rail-light-15":{"width":66,"height":66,"x":594,"y":462,"pixelRatio":4,"sdf":true},"rail-metro-15":{"width":66,"height":66,"x":660,"y":462,"pixelRatio":4,"sdf":true},"ranger-station-15":{"width":66,"height":66,"x":726,"y":462,"pixelRatio":4,"sdf":true},"recycling-15":{"width":66,"height":66,"x":792,"y":462,"pixelRatio":4,"sdf":true},"religious-buddhist-15":{"width":66,"height":66,"x":858,"y":462,"pixelRatio":4,"sdf":true},"religious-christian-15":{"width":66,"height":66,"x":924,"y":462,"pixelRatio":4,"sdf":true},"religious-jewish-15":{"width":66,"height":66,"x":990,"y":462,"pixelRatio":4,"sdf":true},"religious-muslim-15":{"width":66,"height":66,"x":0,"y":528,"pixelRatio":4,"sdf":true},"residential-community-15":{"width":66,"height":66,"x":66,"y":528,"pixelRatio":4,"sdf":true},"restaurant-15":{"width":66,"height":66,"x":132,"y":528,"pixelRatio":4,"sdf":true},"restaurant-noodle-15":{"width":66,"height":66,"x":198,"y":528,"pixelRatio":4,"sdf":true},"restaurant-pizza-15":{"width":66,"height":66,"x":264,"y":528,"pixelRatio":4,"sdf":true},"restaurant-seafood-15":{"width":66,"height":66,"x":330,"y":528,"pixelRatio":4,"sdf":true},"roadblock-15":{"width":66,"height":66,"x":396,"y":528,"pixelRatio":4,"sdf":true},"rocket-15":{"width":66,"height":66,"x":462,"y":528,"pixelRatio":4,"sdf":true},"school-15":{"width":66,"height":66,"x":528,"y":528,"pixelRatio":4,"sdf":true},"scooter-15":{"width":66,"height":66,"x":594,"y":528,"pixelRatio":4,"sdf":true},"shelter-15":{"width":66,"height":66,"x":660,"y":528,"pixelRatio":4,"sdf":true},"shoe-15":{"width":66,"height":66,"x":726,"y":528,"pixelRatio":4,"sdf":true},"shop-15":{"width":66,"height":66,"x":792,"y":528,"pixelRatio":4,"sdf":true},"skateboard-15":{"width":66,"height":66,"x":858,"y":528,"pixelRatio":4,"sdf":true},"skiing-15":{"width":66,"height":66,"x":924,"y":528,"pixelRatio":4,"sdf":true},"slaughterhouse-15":{"width":66,"height":66,"x":990,"y":528,"pixelRatio":4,"sdf":true},"slipway-15":{"width":66,"height":66,"x":0,"y":594,"pixelRatio":4,"sdf":true},"snowmobile-15":{"width":66,"height":66,"x":66,"y":594,"pixelRatio":4,"sdf":true},"soccer-15":{"width":66,"height":66,"x":132,"y":594,"pixelRatio":4,"sdf":true},"square-15":{"width":66,"height":66,"x":198,"y":594,"pixelRatio":4,"sdf":true},"square-stroked-15":{"width":66,"height":66,"x":264,"y":594,"pixelRatio":4,"sdf":true},"stadium-15":{"width":66,"height":66,"x":330,"y":594,"pixelRatio":4,"sdf":true},"star-15":{"width":66,"height":66,"x":396,"y":594,"pixelRatio":4,"sdf":true},"star-stroked-15":{"width":66,"height":66,"x":462,"y":594,"pixelRatio":4,"sdf":true},"suitcase-15":{"width":66,"height":66,"x":528,"y":594,"pixelRatio":4,"sdf":true},"sushi-15":{"width":66,"height":66,"x":594,"y":594,"pixelRatio":4,"sdf":true},"swimming-15":{"width":66,"height":66,"x":660,"y":594,"pixelRatio":4,"sdf":true},"table-tennis-15":{"width":66,"height":66,"x":726,"y":594,"pixelRatio":4,"sdf":true},"teahouse-15":{"width":66,"height":66,"x":792,"y":594,"pixelRatio":4,"sdf":true},"telephone-15":{"width":66,"height":66,"x":858,"y":594,"pixelRatio":4,"sdf":true},"tennis-15":{"width":66,"height":66,"x":924,"y":594,"pixelRatio":4,"sdf":true},"theatre-15":{"width":66,"height":66,"x":990,"y":594,"pixelRatio":4,"sdf":true},"toilet-15":{"width":66,"height":66,"x":0,"y":660,"pixelRatio":4,"sdf":true},"town-15":{"width":66,"height":66,"x":66,"y":660,"pixelRatio":4,"sdf":true},"town-hall-15":{"width":66,"height":66,"x":132,"y":660,"pixelRatio":4,"sdf":true},"triangle-15":{"width":66,"height":66,"x":198,"y":660,"pixelRatio":4,"sdf":true},"triangle-stroked-15":{"width":66,"height":66,"x":264,"y":660,"pixelRatio":4,"sdf":true},"veterinary-15":{"width":66,"height":66,"x":330,"y":660,"pixelRatio":4,"sdf":true},"viewpoint-15":{"width":66,"height":66,"x":396,"y":660,"pixelRatio":4,"sdf":true},"village-15":{"width":66,"height":66,"x":462,"y":660,"pixelRatio":4,"sdf":true},"volcano-15":{"width":66,"height":66,"x":528,"y":660,"pixelRatio":4,"sdf":true},"volleyball-15":{"width":66,"height":66,"x":594,"y":660,"pixelRatio":4,"sdf":true},"warehouse-15":{"width":66,"height":66,"x":660,"y":660,"pixelRatio":4,"sdf":true},"waste-basket-15":{"width":66,"height":66,"x":726,"y":660,"pixelRatio":4,"sdf":true},"watch-15":{"width":66,"height":66,"x":792,"y":660,"pixelRatio":4,"sdf":true},"water-15":{"width":66,"height":66,"x":858,"y":660,"pixelRatio":4,"sdf":true},"waterfall-15":{"width":66,"height":66,"x":924,"y":660,"pixelRatio":4,"sdf":true},"watermill-15":{"width":66,"height":66,"x":990,"y":660,"pixelRatio":4,"sdf":true},"wetland-15":{"width":66,"height":66,"x":0,"y":726,"pixelRatio":4,"sdf":true},"wheelchair-15":{"width":66,"height":66,"x":66,"y":726,"pixelRatio":4,"sdf":true},"windmill-15":{"width":66,"height":66,"x":132,"y":726,"pixelRatio":4,"sdf":true},"zoo-15":{"width":66,"height":66,"x":198,"y":726,"pixelRatio":4,"sdf":true},"aerialway-11":{"width":50,"height":50,"x":264,"y":726,"pixelRatio":4,"sdf":true},"airfield-11":{"width":50,"height":50,"x":314,"y":726,"pixelRatio":4,"sdf":true},"airport-11":{"width":50,"height":50,"x":364,"y":726,"pixelRatio":4,"sdf":true},"alcohol-shop-11":{"width":50,"height":50,"x":414,"y":726,"pixelRatio":4,"sdf":true},"american-football-11":{"width":50,"height":50,"x":464,"y":726,"pixelRatio":4,"sdf":true},"amusement-park-11":{"width":50,"height":50,"x":514,"y":726,"pixelRatio":4,"sdf":true},"aquarium-11":{"width":50,"height":50,"x":564,"y":726,"pixelRatio":4,"sdf":true},"arrow-es-11":{"width":50,"height":50,"x":614,"y":726,"pixelRatio":4,"sdf":true},"art-gallery-11":{"width":50,"height":50,"x":664,"y":726,"pixelRatio":4,"sdf":true},"attraction-11":{"width":50,"height":50,"x":714,"y":726,"pixelRatio":4,"sdf":true},"bakery-11":{"width":50,"height":50,"x":764,"y":726,"pixelRatio":4,"sdf":true},"bank-11":{"width":50,"height":50,"x":814,"y":726,"pixelRatio":4,"sdf":true},"bar-11":{"width":50,"height":50,"x":864,"y":726,"pixelRatio":4,"sdf":true},"barrier-11":{"width":50,"height":50,"x":914,"y":726,"pixelRatio":4,"sdf":true},"baseball-11":{"width":50,"height":50,"x":964,"y":726,"pixelRatio":4,"sdf":true},"basketball-11":{"width":50,"height":50,"x":0,"y":792,"pixelRatio":4,"sdf":true},"bbq-11":{"width":50,"height":50,"x":50,"y":792,"pixelRatio":4,"sdf":true},"beach-11":{"width":50,"height":50,"x":100,"y":792,"pixelRatio":4,"sdf":true},"beer-11":{"width":50,"height":50,"x":150,"y":792,"pixelRatio":4,"sdf":true},"bicycle-11":{"width":50,"height":50,"x":200,"y":792,"pixelRatio":4,"sdf":true},"bicycle-share-11":{"width":50,"height":50,"x":250,"y":792,"pixelRatio":4,"sdf":true},"blood-bank-11":{"width":50,"height":50,"x":300,"y":792,"pixelRatio":4,"sdf":true},"boat-es-11":{"width":50,"height":50,"x":350,"y":792,"pixelRatio":4,"sdf":true},"bowling-alley-11":{"width":50,"height":50,"x":400,"y":792,"pixelRatio":4,"sdf":true},"bridge-11":{"width":50,"height":50,"x":450,"y":792,"pixelRatio":4,"sdf":true},"building-11":{"width":50,"height":50,"x":500,"y":792,"pixelRatio":4,"sdf":true},"building-alt1-11":{"width":50,"height":50,"x":550,"y":792,"pixelRatio":4,"sdf":true},"bus-11":{"width":50,"height":50,"x":600,"y":792,"pixelRatio":4,"sdf":true},"cafe-11":{"width":50,"height":50,"x":650,"y":792,"pixelRatio":4,"sdf":true},"campsite-11":{"width":50,"height":50,"x":700,"y":792,"pixelRatio":4,"sdf":true},"car-11":{"width":50,"height":50,"x":750,"y":792,"pixelRatio":4,"sdf":true},"car-rental-11":{"width":50,"height":50,"x":800,"y":792,"pixelRatio":4,"sdf":true},"car-repair-11":{"width":50,"height":50,"x":850,"y":792,"pixelRatio":4,"sdf":true},"car-top-es-11":{"width":50,"height":50,"x":900,"y":792,"pixelRatio":4,"sdf":true},"casino-11":{"width":50,"height":50,"x":950,"y":792,"pixelRatio":4,"sdf":true},"castle-11":{"width":50,"height":50,"x":1000,"y":792,"pixelRatio":4,"sdf":true},"cemetery-11":{"width":50,"height":50,"x":0,"y":842,"pixelRatio":4,"sdf":true},"charging-station-11":{"width":50,"height":50,"x":50,"y":842,"pixelRatio":4,"sdf":true},"cinema-11":{"width":50,"height":50,"x":100,"y":842,"pixelRatio":4,"sdf":true},"circle-11":{"width":50,"height":50,"x":150,"y":842,"pixelRatio":4,"sdf":true},"circle-stroked-11":{"width":50,"height":50,"x":200,"y":842,"pixelRatio":4,"sdf":true},"city-11":{"width":50,"height":50,"x":250,"y":842,"pixelRatio":4,"sdf":true},"clothing-store-11":{"width":50,"height":50,"x":300,"y":842,"pixelRatio":4,"sdf":true},"college-11":{"width":50,"height":50,"x":350,"y":842,"pixelRatio":4,"sdf":true},"commercial-11":{"width":50,"height":50,"x":400,"y":842,"pixelRatio":4,"sdf":true},"communications-tower-11":{"width":50,"height":50,"x":450,"y":842,"pixelRatio":4,"sdf":true},"confectionery-11":{"width":50,"height":50,"x":500,"y":842,"pixelRatio":4,"sdf":true},"convenience-11":{"width":50,"height":50,"x":550,"y":842,"pixelRatio":4,"sdf":true},"cricket-11":{"width":50,"height":50,"x":600,"y":842,"pixelRatio":4,"sdf":true},"cross-11":{"width":50,"height":50,"x":650,"y":842,"pixelRatio":4,"sdf":true},"dam-11":{"width":50,"height":50,"x":700,"y":842,"pixelRatio":4,"sdf":true},"danger-11":{"width":50,"height":50,"x":750,"y":842,"pixelRatio":4,"sdf":true},"defibrillator-11":{"width":50,"height":50,"x":800,"y":842,"pixelRatio":4,"sdf":true},"dentist-11":{"width":50,"height":50,"x":850,"y":842,"pixelRatio":4,"sdf":true},"doctor-11":{"width":50,"height":50,"x":900,"y":842,"pixelRatio":4,"sdf":true},"dog-park-11":{"width":50,"height":50,"x":950,"y":842,"pixelRatio":4,"sdf":true},"drinking-water-11":{"width":50,"height":50,"x":1000,"y":842,"pixelRatio":4,"sdf":true},"embassy-11":{"width":50,"height":50,"x":0,"y":892,"pixelRatio":4,"sdf":true},"emergency-phone-11":{"width":50,"height":50,"x":50,"y":892,"pixelRatio":4,"sdf":true},"entrance-11":{"width":50,"height":50,"x":100,"y":892,"pixelRatio":4,"sdf":true},"entrance-alt1-11":{"width":50,"height":50,"x":150,"y":892,"pixelRatio":4,"sdf":true},"farm-11":{"width":50,"height":50,"x":200,"y":892,"pixelRatio":4,"sdf":true},"fast-food-11":{"width":50,"height":50,"x":250,"y":892,"pixelRatio":4,"sdf":true},"fence-11":{"width":50,"height":50,"x":300,"y":892,"pixelRatio":4,"sdf":true},"ferry-11":{"width":50,"height":50,"x":350,"y":892,"pixelRatio":4,"sdf":true},"fire-station-11":{"width":50,"height":50,"x":400,"y":892,"pixelRatio":4,"sdf":true},"fitness-centre-11":{"width":50,"height":50,"x":450,"y":892,"pixelRatio":4,"sdf":true},"florist-11":{"width":50,"height":50,"x":500,"y":892,"pixelRatio":4,"sdf":true},"fuel-11":{"width":50,"height":50,"x":550,"y":892,"pixelRatio":4,"sdf":true},"furniture-11":{"width":50,"height":50,"x":600,"y":892,"pixelRatio":4,"sdf":true},"gaming-11":{"width":50,"height":50,"x":650,"y":892,"pixelRatio":4,"sdf":true},"garden-11":{"width":50,"height":50,"x":700,"y":892,"pixelRatio":4,"sdf":true},"garden-centre-11":{"width":50,"height":50,"x":750,"y":892,"pixelRatio":4,"sdf":true},"gift-11":{"width":50,"height":50,"x":800,"y":892,"pixelRatio":4,"sdf":true},"globe-11":{"width":50,"height":50,"x":850,"y":892,"pixelRatio":4,"sdf":true},"golf-11":{"width":50,"height":50,"x":900,"y":892,"pixelRatio":4,"sdf":true},"grocery-11":{"width":50,"height":50,"x":950,"y":892,"pixelRatio":4,"sdf":true},"hairdresser-11":{"width":50,"height":50,"x":1000,"y":892,"pixelRatio":4,"sdf":true},"harbor-11":{"width":50,"height":50,"x":0,"y":942,"pixelRatio":4,"sdf":true},"hardware-11":{"width":50,"height":50,"x":50,"y":942,"pixelRatio":4,"sdf":true},"heart-11":{"width":50,"height":50,"x":100,"y":942,"pixelRatio":4,"sdf":true},"heliport-11":{"width":50,"height":50,"x":150,"y":942,"pixelRatio":4,"sdf":true},"home-11":{"width":50,"height":50,"x":200,"y":942,"pixelRatio":4,"sdf":true},"horse-riding-11":{"width":50,"height":50,"x":250,"y":942,"pixelRatio":4,"sdf":true},"hospital-11":{"width":50,"height":50,"x":300,"y":942,"pixelRatio":4,"sdf":true},"ice-cream-11":{"width":50,"height":50,"x":350,"y":942,"pixelRatio":4,"sdf":true},"industry-11":{"width":50,"height":50,"x":400,"y":942,"pixelRatio":4,"sdf":true},"information-11":{"width":50,"height":50,"x":450,"y":942,"pixelRatio":4,"sdf":true},"jewelry-store-11":{"width":50,"height":50,"x":500,"y":942,"pixelRatio":4,"sdf":true},"karaoke-11":{"width":50,"height":50,"x":550,"y":942,"pixelRatio":4,"sdf":true},"landmark-11":{"width":50,"height":50,"x":600,"y":942,"pixelRatio":4,"sdf":true},"landuse-11":{"width":50,"height":50,"x":650,"y":942,"pixelRatio":4,"sdf":true},"laundry-11":{"width":50,"height":50,"x":700,"y":942,"pixelRatio":4,"sdf":true},"library-11":{"width":50,"height":50,"x":750,"y":942,"pixelRatio":4,"sdf":true},"lighthouse-11":{"width":50,"height":50,"x":800,"y":942,"pixelRatio":4,"sdf":true},"lodging-11":{"width":50,"height":50,"x":850,"y":942,"pixelRatio":4,"sdf":true},"logging-11":{"width":50,"height":50,"x":900,"y":942,"pixelRatio":4,"sdf":true},"marker-11":{"width":50,"height":50,"x":950,"y":942,"pixelRatio":4,"sdf":true},"marker-stroked-11":{"width":50,"height":50,"x":1000,"y":942,"pixelRatio":4,"sdf":true},"mobile-phone-11":{"width":50,"height":50,"x":0,"y":992,"pixelRatio":4,"sdf":true},"monument-11":{"width":50,"height":50,"x":50,"y":992,"pixelRatio":4,"sdf":true},"mountain-11":{"width":50,"height":50,"x":100,"y":992,"pixelRatio":4,"sdf":true},"museum-11":{"width":50,"height":50,"x":150,"y":992,"pixelRatio":4,"sdf":true},"music-11":{"width":50,"height":50,"x":200,"y":992,"pixelRatio":4,"sdf":true},"natural-11":{"width":50,"height":50,"x":250,"y":992,"pixelRatio":4,"sdf":true},"oil-rig-es-11":{"width":50,"height":50,"x":300,"y":992,"pixelRatio":4,"sdf":true},"optician-11":{"width":50,"height":50,"x":350,"y":992,"pixelRatio":4,"sdf":true},"paint-11":{"width":50,"height":50,"x":400,"y":992,"pixelRatio":4,"sdf":true},"park-11":{"width":50,"height":50,"x":450,"y":992,"pixelRatio":4,"sdf":true},"park-alt1-11":{"width":50,"height":50,"x":500,"y":992,"pixelRatio":4,"sdf":true},"parking-11":{"width":50,"height":50,"x":550,"y":992,"pixelRatio":4,"sdf":true},"parking-garage-11":{"width":50,"height":50,"x":600,"y":992,"pixelRatio":4,"sdf":true},"pharmacy-11":{"width":50,"height":50,"x":650,"y":992,"pixelRatio":4,"sdf":true},"picnic-site-11":{"width":50,"height":50,"x":700,"y":992,"pixelRatio":4,"sdf":true},"pitch-11":{"width":50,"height":50,"x":750,"y":992,"pixelRatio":4,"sdf":true},"place-of-worship-11":{"width":50,"height":50,"x":800,"y":992,"pixelRatio":4,"sdf":true},"playground-11":{"width":50,"height":50,"x":850,"y":992,"pixelRatio":4,"sdf":true},"police-11":{"width":50,"height":50,"x":900,"y":992,"pixelRatio":4,"sdf":true},"post-11":{"width":50,"height":50,"x":950,"y":992,"pixelRatio":4,"sdf":true},"prison-11":{"width":50,"height":50,"x":1000,"y":992,"pixelRatio":4,"sdf":true},"rail-11":{"width":50,"height":50,"x":1050,"y":792,"pixelRatio":4,"sdf":true},"rail-light-11":{"width":50,"height":50,"x":1100,"y":792,"pixelRatio":4,"sdf":true},"rail-metro-11":{"width":50,"height":50,"x":1150,"y":792,"pixelRatio":4,"sdf":true},"ranger-station-11":{"width":50,"height":50,"x":1200,"y":792,"pixelRatio":4,"sdf":true},"recycling-11":{"width":50,"height":50,"x":1250,"y":792,"pixelRatio":4,"sdf":true},"religious-buddhist-11":{"width":50,"height":50,"x":1300,"y":792,"pixelRatio":4,"sdf":true},"religious-christian-11":{"width":50,"height":50,"x":1350,"y":792,"pixelRatio":4,"sdf":true},"religious-jewish-11":{"width":50,"height":50,"x":1400,"y":792,"pixelRatio":4,"sdf":true},"religious-muslim-11":{"width":50,"height":50,"x":1450,"y":792,"pixelRatio":4,"sdf":true},"residential-community-11":{"width":50,"height":50,"x":1500,"y":792,"pixelRatio":4,"sdf":true},"restaurant-11":{"width":50,"height":50,"x":1550,"y":792,"pixelRatio":4,"sdf":true},"restaurant-noodle-11":{"width":50,"height":50,"x":1600,"y":792,"pixelRatio":4,"sdf":true},"restaurant-pizza-11":{"width":50,"height":50,"x":1650,"y":792,"pixelRatio":4,"sdf":true},"restaurant-seafood-11":{"width":50,"height":50,"x":1700,"y":792,"pixelRatio":4,"sdf":true},"roadblock-11":{"width":50,"height":50,"x":1750,"y":792,"pixelRatio":4,"sdf":true},"rocket-11":{"width":50,"height":50,"x":1800,"y":792,"pixelRatio":4,"sdf":true},"school-11":{"width":50,"height":50,"x":1850,"y":792,"pixelRatio":4,"sdf":true},"scooter-11":{"width":50,"height":50,"x":1900,"y":792,"pixelRatio":4,"sdf":true},"shelter-11":{"width":50,"height":50,"x":1950,"y":792,"pixelRatio":4,"sdf":true},"shoe-11":{"width":50,"height":50,"x":2000,"y":792,"pixelRatio":4,"sdf":true},"shop-11":{"width":50,"height":50,"x":2050,"y":792,"pixelRatio":4,"sdf":true},"skateboard-11":{"width":50,"height":50,"x":1050,"y":842,"pixelRatio":4,"sdf":true},"skiing-11":{"width":50,"height":50,"x":1100,"y":842,"pixelRatio":4,"sdf":true},"slaughterhouse-11":{"width":50,"height":50,"x":1150,"y":842,"pixelRatio":4,"sdf":true},"slipway-11":{"width":50,"height":50,"x":1200,"y":842,"pixelRatio":4,"sdf":true},"snowmobile-11":{"width":50,"height":50,"x":1250,"y":842,"pixelRatio":4,"sdf":true},"soccer-11":{"width":50,"height":50,"x":1300,"y":842,"pixelRatio":4,"sdf":true},"square-11":{"width":50,"height":50,"x":1350,"y":842,"pixelRatio":4,"sdf":true},"square-stroked-11":{"width":50,"height":50,"x":1400,"y":842,"pixelRatio":4,"sdf":true},"stadium-11":{"width":50,"height":50,"x":1450,"y":842,"pixelRatio":4,"sdf":true},"star-11":{"width":50,"height":50,"x":1500,"y":842,"pixelRatio":4,"sdf":true},"star-stroked-11":{"width":50,"height":50,"x":1550,"y":842,"pixelRatio":4,"sdf":true},"suitcase-11":{"width":50,"height":50,"x":1600,"y":842,"pixelRatio":4,"sdf":true},"sushi-11":{"width":50,"height":50,"x":1650,"y":842,"pixelRatio":4,"sdf":true},"swimming-11":{"width":50,"height":50,"x":1700,"y":842,"pixelRatio":4,"sdf":true},"table-tennis-11":{"width":50,"height":50,"x":1750,"y":842,"pixelRatio":4,"sdf":true},"teahouse-11":{"width":50,"height":50,"x":1800,"y":842,"pixelRatio":4,"sdf":true},"telephone-11":{"width":50,"height":50,"x":1850,"y":842,"pixelRatio":4,"sdf":true},"tennis-11":{"width":50,"height":50,"x":1900,"y":842,"pixelRatio":4,"sdf":true},"theatre-11":{"width":50,"height":50,"x":1950,"y":842,"pixelRatio":4,"sdf":true},"toilet-11":{"width":50,"height":50,"x":2000,"y":842,"pixelRatio":4,"sdf":true},"town-11":{"width":50,"height":50,"x":2050,"y":842,"pixelRatio":4,"sdf":true},"town-hall-11":{"width":50,"height":50,"x":1050,"y":892,"pixelRatio":4,"sdf":true},"triangle-11":{"width":50,"height":50,"x":1100,"y":892,"pixelRatio":4,"sdf":true},"triangle-stroked-11":{"width":50,"height":50,"x":1150,"y":892,"pixelRatio":4,"sdf":true},"veterinary-11":{"width":50,"height":50,"x":1200,"y":892,"pixelRatio":4,"sdf":true},"viewpoint-11":{"width":50,"height":50,"x":1250,"y":892,"pixelRatio":4,"sdf":true},"village-11":{"width":50,"height":50,"x":1300,"y":892,"pixelRatio":4,"sdf":true},"volcano-11":{"width":50,"height":50,"x":1350,"y":892,"pixelRatio":4,"sdf":true},"volleyball-11":{"width":50,"height":50,"x":1400,"y":892,"pixelRatio":4,"sdf":true},"warehouse-11":{"width":50,"height":50,"x":1450,"y":892,"pixelRatio":4,"sdf":true},"waste-basket-11":{"width":50,"height":50,"x":1500,"y":892,"pixelRatio":4,"sdf":true},"watch-11":{"width":50,"height":50,"x":1550,"y":892,"pixelRatio":4,"sdf":true},"water-11":{"width":50,"height":50,"x":1600,"y":892,"pixelRatio":4,"sdf":true},"waterfall-11":{"width":50,"height":50,"x":1650,"y":892,"pixelRatio":4,"sdf":true},"watermill-11":{"width":50,"height":50,"x":1700,"y":892,"pixelRatio":4,"sdf":true},"wetland-11":{"width":50,"height":50,"x":1750,"y":892,"pixelRatio":4,"sdf":true},"wheelchair-11":{"width":50,"height":50,"x":1800,"y":892,"pixelRatio":4,"sdf":true},"windmill-11":{"width":50,"height":50,"x":1850,"y":892,"pixelRatio":4,"sdf":true},"zoo-11":{"width":50,"height":50,"x":1900,"y":892,"pixelRatio":4,"sdf":true}}')},function(module,exports,__webpack_require__){(function(){"use strict";var builder,defaults,escapeCDATA,requiresCDATA,wrapCDATA,hasProp={}.hasOwnProperty;builder=__webpack_require__(248);defaults=__webpack_require__(96).defaults;requiresCDATA=function(entry){return typeof entry==="string"&&(entry.indexOf("&")>=0||entry.indexOf(">")>=0||entry.indexOf("<")>=0)};wrapCDATA=function(entry){return"<![CDATA["+escapeCDATA(entry)+"]]>"};escapeCDATA=function(entry){return entry.replace("]]>","]]]]><![CDATA[>")};exports.Builder=function(){function Builder(opts){var key,ref,value;this.options={};ref=defaults["0.2"];for(key in ref){if(!hasProp.call(ref,key))continue;value=ref[key];this.options[key]=value}for(key in opts){if(!hasProp.call(opts,key))continue;value=opts[key];this.options[key]=value}}Builder.prototype.buildObject=function(rootObj){var attrkey,charkey,render,rootElement,rootName;attrkey=this.options.attrkey;charkey=this.options.charkey;if(Object.keys(rootObj).length===1&&this.options.rootName===defaults["0.2"].rootName){rootName=Object.keys(rootObj)[0];rootObj=rootObj[rootName]}else{rootName=this.options.rootName}render=function(_this){return function(element,obj){var attr,child,entry,index,key,value;if(typeof obj!=="object"){if(_this.options.cdata&&requiresCDATA(obj)){element.raw(wrapCDATA(obj))}else{element.txt(obj)}}else if(Array.isArray(obj)){for(index in obj){if(!hasProp.call(obj,index))continue;child=obj[index];for(key in child){entry=child[key];element=render(element.ele(key),entry).up()}}}else{for(key in obj){if(!hasProp.call(obj,key))continue;child=obj[key];if(key===attrkey){if(typeof child==="object"){for(attr in child){value=child[attr];element=element.att(attr,value)}}}else if(key===charkey){if(_this.options.cdata&&requiresCDATA(child)){element=element.raw(wrapCDATA(child))}else{element=element.txt(child)}}else if(Array.isArray(child)){for(index in child){if(!hasProp.call(child,index))continue;entry=child[index];if(typeof entry==="string"){if(_this.options.cdata&&requiresCDATA(entry)){element=element.ele(key).raw(wrapCDATA(entry)).up()}else{element=element.ele(key,entry).up()}}else{element=render(element.ele(key),entry).up()}}}else if(typeof child==="object"){element=render(element.ele(key),child).up()}else{if(typeof child==="string"&&_this.options.cdata&&requiresCDATA(child)){element=element.ele(key).raw(wrapCDATA(child)).up()}else{if(child==null){child=""}element=element.ele(key,child.toString()).up()}}}}return element}}(this);rootElement=builder.create(rootName,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars});return render(rootElement,rootObj).end(this.options.renderOpts)};return Builder}()}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,WriterState,XMLDOMImplementation,XMLDocument,XMLDocumentCB,XMLStreamWriter,XMLStringWriter,assign,isFunction,ref;ref=__webpack_require__(58),assign=ref.assign,isFunction=ref.isFunction;XMLDOMImplementation=__webpack_require__(141);XMLDocument=__webpack_require__(142);XMLDocumentCB=__webpack_require__(254);XMLStringWriter=__webpack_require__(110);XMLStreamWriter=__webpack_require__(255);NodeType=__webpack_require__(49);WriterState=__webpack_require__(79);module.exports.create=function(name,xmldec,doctype,options){var doc,root;if(name==null){throw new Error("Root element needs a name.")}options=assign({},xmldec,doctype,options);doc=new XMLDocument(options);root=doc.element(name);if(!options.headless){doc.declaration(options);if(options.pubID!=null||options.sysID!=null){doc.dtd(options)}}return root};module.exports.begin=function(options,onData,onEnd){var ref1;if(isFunction(options)){ref1=[options,onData],onData=ref1[0],onEnd=ref1[1];options={}}if(onData){return new XMLDocumentCB(options,onData,onEnd)}else{return new XMLDocument(options)}};module.exports.stringWriter=function(options){return new XMLStringWriter(options)};module.exports.streamWriter=function(stream,options){return new XMLStreamWriter(stream,options)};module.exports.implementation=new XMLDOMImplementation;module.exports.nodeType=NodeType;module.exports.writerState=WriterState}).call(this)},function(module,exports,__webpack_require__){(function(){var XMLDOMConfiguration,XMLDOMErrorHandler,XMLDOMStringList;XMLDOMErrorHandler=__webpack_require__(250);XMLDOMStringList=__webpack_require__(251);module.exports=XMLDOMConfiguration=function(){function XMLDOMConfiguration(){var clonedSelf;this.defaultParams={"canonical-form":false,"cdata-sections":false,comments:false,"datatype-normalization":false,"element-content-whitespace":true,entities:true,"error-handler":new XMLDOMErrorHandler,infoset:true,"validate-if-schema":false,namespaces:true,"namespace-declarations":true,"normalize-characters":false,"schema-location":"","schema-type":"","split-cdata-sections":true,validate:false,"well-formed":true};this.params=clonedSelf=Object.create(this.defaultParams)}Object.defineProperty(XMLDOMConfiguration.prototype,"parameterNames",{get:function(){return new XMLDOMStringList(Object.keys(this.defaultParams))}});XMLDOMConfiguration.prototype.getParameter=function(name){if(this.params.hasOwnProperty(name)){return this.params[name]}else{return null}};XMLDOMConfiguration.prototype.canSetParameter=function(name,value){return true};XMLDOMConfiguration.prototype.setParameter=function(name,value){if(value!=null){return this.params[name]=value}else{return delete this.params[name]}};return XMLDOMConfiguration}()}).call(this)},function(module,exports){(function(){var XMLDOMErrorHandler;module.exports=XMLDOMErrorHandler=function(){function XMLDOMErrorHandler(){}XMLDOMErrorHandler.prototype.handleError=function(error){throw new Error(error)};return XMLDOMErrorHandler}()}).call(this)},function(module,exports){(function(){var XMLDOMStringList;module.exports=XMLDOMStringList=function(){function XMLDOMStringList(arr){this.arr=arr||[]}Object.defineProperty(XMLDOMStringList.prototype,"length",{get:function(){return this.arr.length}});XMLDOMStringList.prototype.item=function(index){return this.arr[index]||null};XMLDOMStringList.prototype.contains=function(str){return this.arr.indexOf(str)!==-1};return XMLDOMStringList}()}).call(this)},function(module,exports){(function(){var XMLNodeList;module.exports=XMLNodeList=function(){function XMLNodeList(nodes){this.nodes=nodes}Object.defineProperty(XMLNodeList.prototype,"length",{get:function(){return this.nodes.length||0}});XMLNodeList.prototype.clone=function(){return this.nodes=null};XMLNodeList.prototype.item=function(index){return this.nodes[index]||null};return XMLNodeList}()}).call(this)},function(module,exports){(function(){module.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,WriterState,XMLAttribute,XMLCData,XMLComment,XMLDTDAttList,XMLDTDElement,XMLDTDEntity,XMLDTDNotation,XMLDeclaration,XMLDocType,XMLDocument,XMLDocumentCB,XMLElement,XMLProcessingInstruction,XMLRaw,XMLStringWriter,XMLStringifier,XMLText,getValue,isFunction,isObject,isPlainObject,ref,hasProp={}.hasOwnProperty;ref=__webpack_require__(58),isObject=ref.isObject,isFunction=ref.isFunction,isPlainObject=ref.isPlainObject,getValue=ref.getValue;NodeType=__webpack_require__(49);XMLDocument=__webpack_require__(142);XMLElement=__webpack_require__(97);XMLCData=__webpack_require__(99);XMLComment=__webpack_require__(100);XMLRaw=__webpack_require__(107);XMLText=__webpack_require__(108);XMLProcessingInstruction=__webpack_require__(109);XMLDeclaration=__webpack_require__(101);XMLDocType=__webpack_require__(102);XMLDTDAttList=__webpack_require__(103);XMLDTDEntity=__webpack_require__(104);XMLDTDElement=__webpack_require__(105);XMLDTDNotation=__webpack_require__(106);XMLAttribute=__webpack_require__(143);XMLStringifier=__webpack_require__(145);XMLStringWriter=__webpack_require__(110);WriterState=__webpack_require__(79);module.exports=XMLDocumentCB=function(){function XMLDocumentCB(options,onData,onEnd){var writerOptions;this.name="?xml";this.type=NodeType.Document;options||(options={});writerOptions={};if(!options.writer){options.writer=new XMLStringWriter}else if(isPlainObject(options.writer)){writerOptions=options.writer;options.writer=new XMLStringWriter}this.options=options;this.writer=options.writer;this.writerOptions=this.writer.filterOptions(writerOptions);this.stringify=new XMLStringifier(options);this.onDataCallback=onData||function(){};this.onEndCallback=onEnd||function(){};this.currentNode=null;this.currentLevel=-1;this.openTags={};this.documentStarted=false;this.documentCompleted=false;this.root=null}XMLDocumentCB.prototype.createChildNode=function(node){var att,attName,attributes,child,i,len,ref1,ref2;switch(node.type){case NodeType.CData:this.cdata(node.value);break;case NodeType.Comment:this.comment(node.value);break;case NodeType.Element:attributes={};ref1=node.attribs;for(attName in ref1){if(!hasProp.call(ref1,attName))continue;att=ref1[attName];attributes[attName]=att.value}this.node(node.name,attributes);break;case NodeType.Dummy:this.dummy();break;case NodeType.Raw:this.raw(node.value);break;case NodeType.Text:this.text(node.value);break;case NodeType.ProcessingInstruction:this.instruction(node.target,node.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+node.constructor.name)}ref2=node.children;for(i=0,len=ref2.length;i<len;i++){child=ref2[i];this.createChildNode(child);if(child.type===NodeType.Element){this.up()}}return this};XMLDocumentCB.prototype.dummy=function(){return this};XMLDocumentCB.prototype.node=function(name,attributes,text){var ref1;if(name==null){throw new Error("Missing node name.")}if(this.root&&this.currentLevel===-1){throw new Error("Document can only have one root node. "+this.debugInfo(name))}this.openCurrent();name=getValue(name);if(attributes==null){attributes={}}attributes=getValue(attributes);if(!isObject(attributes)){ref1=[attributes,text],text=ref1[0],attributes=ref1[1]}this.currentNode=new XMLElement(this,name,attributes);this.currentNode.children=false;this.currentLevel++;this.openTags[this.currentLevel]=this.currentNode;if(text!=null){this.text(text)}return this};XMLDocumentCB.prototype.element=function(name,attributes,text){var child,i,len,oldValidationFlag,ref1,root;if(this.currentNode&&this.currentNode.type===NodeType.DocType){this.dtdElement.apply(this,arguments)}else{if(Array.isArray(name)||isObject(name)||isFunction(name)){oldValidationFlag=this.options.noValidation;this.options.noValidation=true;root=new XMLDocument(this.options).element("TEMP_ROOT");root.element(name);this.options.noValidation=oldValidationFlag;ref1=root.children;for(i=0,len=ref1.length;i<len;i++){child=ref1[i];this.createChildNode(child);if(child.type===NodeType.Element){this.up()}}}else{this.node(name,attributes,text)}}return this};XMLDocumentCB.prototype.attribute=function(name,value){var attName,attValue;if(!this.currentNode||this.currentNode.children){throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(name))}if(name!=null){name=getValue(name)}if(isObject(name)){for(attName in name){if(!hasProp.call(name,attName))continue;attValue=name[attName];this.attribute(attName,attValue)}}else{if(isFunction(value)){value=value.apply()}if(this.options.keepNullAttributes&&value==null){this.currentNode.attribs[name]=new XMLAttribute(this,name,"")}else if(value!=null){this.currentNode.attribs[name]=new XMLAttribute(this,name,value)}}return this};XMLDocumentCB.prototype.text=function(value){var node;this.openCurrent();node=new XMLText(this,value);this.onData(this.writer.text(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this};XMLDocumentCB.prototype.cdata=function(value){var node;this.openCurrent();node=new XMLCData(this,value);this.onData(this.writer.cdata(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this};XMLDocumentCB.prototype.comment=function(value){var node;this.openCurrent();node=new XMLComment(this,value);this.onData(this.writer.comment(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this};XMLDocumentCB.prototype.raw=function(value){var node;this.openCurrent();node=new XMLRaw(this,value);this.onData(this.writer.raw(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this};XMLDocumentCB.prototype.instruction=function(target,value){var i,insTarget,insValue,len,node;this.openCurrent();if(target!=null){target=getValue(target)}if(value!=null){value=getValue(value)}if(Array.isArray(target)){for(i=0,len=target.length;i<len;i++){insTarget=target[i];this.instruction(insTarget)}}else if(isObject(target)){for(insTarget in target){if(!hasProp.call(target,insTarget))continue;insValue=target[insTarget];this.instruction(insTarget,insValue)}}else{if(isFunction(value)){value=value.apply()}node=new XMLProcessingInstruction(this,target,value);this.onData(this.writer.processingInstruction(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1)}return this};XMLDocumentCB.prototype.declaration=function(version,encoding,standalone){var node;this.openCurrent();if(this.documentStarted){throw new Error("declaration() must be the first node.")}node=new XMLDeclaration(this,version,encoding,standalone);this.onData(this.writer.declaration(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this};XMLDocumentCB.prototype.doctype=function(root,pubID,sysID){this.openCurrent();if(root==null){throw new Error("Missing root node name.")}if(this.root){throw new Error("dtd() must come before the root node.")}this.currentNode=new XMLDocType(this,pubID,sysID);this.currentNode.rootNodeName=root;this.currentNode.children=false;this.currentLevel++;this.openTags[this.currentLevel]=this.currentNode;return this};XMLDocumentCB.prototype.dtdElement=function(name,value){var node;this.openCurrent();node=new XMLDTDElement(this,name,value);this.onData(this.writer.dtdElement(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this};XMLDocumentCB.prototype.attList=function(elementName,attributeName,attributeType,defaultValueType,defaultValue){var node;this.openCurrent();node=new XMLDTDAttList(this,elementName,attributeName,attributeType,defaultValueType,defaultValue);this.onData(this.writer.dtdAttList(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this};XMLDocumentCB.prototype.entity=function(name,value){var node;this.openCurrent();node=new XMLDTDEntity(this,false,name,value);this.onData(this.writer.dtdEntity(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this};XMLDocumentCB.prototype.pEntity=function(name,value){var node;this.openCurrent();node=new XMLDTDEntity(this,true,name,value);this.onData(this.writer.dtdEntity(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this};XMLDocumentCB.prototype.notation=function(name,value){var node;this.openCurrent();node=new XMLDTDNotation(this,name,value);this.onData(this.writer.dtdNotation(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this};XMLDocumentCB.prototype.up=function(){if(this.currentLevel<0){throw new Error("The document node has no parent.")}if(this.currentNode){if(this.currentNode.children){this.closeNode(this.currentNode)}else{this.openNode(this.currentNode)}this.currentNode=null}else{this.closeNode(this.openTags[this.currentLevel])}delete this.openTags[this.currentLevel];this.currentLevel--;return this};XMLDocumentCB.prototype.end=function(){while(this.currentLevel>=0){this.up()}return this.onEnd()};XMLDocumentCB.prototype.openCurrent=function(){if(this.currentNode){this.currentNode.children=true;return this.openNode(this.currentNode)}};XMLDocumentCB.prototype.openNode=function(node){var att,chunk,name,ref1;if(!node.isOpen){if(!this.root&&this.currentLevel===0&&node.type===NodeType.Element){this.root=node}chunk="";if(node.type===NodeType.Element){this.writerOptions.state=WriterState.OpenTag;chunk=this.writer.indent(node,this.writerOptions,this.currentLevel)+"<"+node.name;ref1=node.attribs;for(name in ref1){if(!hasProp.call(ref1,name))continue;att=ref1[name];chunk+=this.writer.attribute(att,this.writerOptions,this.currentLevel)}chunk+=(node.children?">":"/>")+this.writer.endline(node,this.writerOptions,this.currentLevel);this.writerOptions.state=WriterState.InsideTag}else{this.writerOptions.state=WriterState.OpenTag;chunk=this.writer.indent(node,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+node.rootNodeName;if(node.pubID&&node.sysID){chunk+=' PUBLIC "'+node.pubID+'" "'+node.sysID+'"'}else if(node.sysID){chunk+=' SYSTEM "'+node.sysID+'"'}if(node.children){chunk+=" [";this.writerOptions.state=WriterState.InsideTag}else{this.writerOptions.state=WriterState.CloseTag;chunk+=">"}chunk+=this.writer.endline(node,this.writerOptions,this.currentLevel)}this.onData(chunk,this.currentLevel);return node.isOpen=true}};XMLDocumentCB.prototype.closeNode=function(node){var chunk;if(!node.isClosed){chunk="";this.writerOptions.state=WriterState.CloseTag;if(node.type===NodeType.Element){chunk=this.writer.indent(node,this.writerOptions,this.currentLevel)+"</"+node.name+">"+this.writer.endline(node,this.writerOptions,this.currentLevel)}else{chunk=this.writer.indent(node,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(node,this.writerOptions,this.currentLevel)}this.writerOptions.state=WriterState.None;this.onData(chunk,this.currentLevel);return node.isClosed=true}};XMLDocumentCB.prototype.onData=function(chunk,level){this.documentStarted=true;return this.onDataCallback(chunk,level+1)};XMLDocumentCB.prototype.onEnd=function(){this.documentCompleted=true;return this.onEndCallback()};XMLDocumentCB.prototype.debugInfo=function(name){if(name==null){return""}else{return"node: <"+name+">"}};XMLDocumentCB.prototype.ele=function(){return this.element.apply(this,arguments)};XMLDocumentCB.prototype.nod=function(name,attributes,text){return this.node(name,attributes,text)};XMLDocumentCB.prototype.txt=function(value){return this.text(value)};XMLDocumentCB.prototype.dat=function(value){return this.cdata(value)};XMLDocumentCB.prototype.com=function(value){return this.comment(value)};XMLDocumentCB.prototype.ins=function(target,value){return this.instruction(target,value)};XMLDocumentCB.prototype.dec=function(version,encoding,standalone){return this.declaration(version,encoding,standalone)};XMLDocumentCB.prototype.dtd=function(root,pubID,sysID){return this.doctype(root,pubID,sysID)};XMLDocumentCB.prototype.e=function(name,attributes,text){return this.element(name,attributes,text)};XMLDocumentCB.prototype.n=function(name,attributes,text){return this.node(name,attributes,text)};XMLDocumentCB.prototype.t=function(value){return this.text(value)};XMLDocumentCB.prototype.d=function(value){return this.cdata(value)};XMLDocumentCB.prototype.c=function(value){return this.comment(value)};XMLDocumentCB.prototype.r=function(value){return this.raw(value)};XMLDocumentCB.prototype.i=function(target,value){return this.instruction(target,value)};XMLDocumentCB.prototype.att=function(){if(this.currentNode&&this.currentNode.type===NodeType.DocType){return this.attList.apply(this,arguments)}else{return this.attribute.apply(this,arguments)}};XMLDocumentCB.prototype.a=function(){if(this.currentNode&&this.currentNode.type===NodeType.DocType){return this.attList.apply(this,arguments)}else{return this.attribute.apply(this,arguments)}};XMLDocumentCB.prototype.ent=function(name,value){return this.entity(name,value)};XMLDocumentCB.prototype.pent=function(name,value){return this.pEntity(name,value)};XMLDocumentCB.prototype.not=function(name,value){return this.notation(name,value)};return XMLDocumentCB}()}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,WriterState,XMLStreamWriter,XMLWriterBase,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;NodeType=__webpack_require__(49);XMLWriterBase=__webpack_require__(146);WriterState=__webpack_require__(79);module.exports=XMLStreamWriter=function(superClass){extend(XMLStreamWriter,superClass);function XMLStreamWriter(stream,options){this.stream=stream;XMLStreamWriter.__super__.constructor.call(this,options)}XMLStreamWriter.prototype.endline=function(node,options,level){if(node.isLastRootNode&&options.state===WriterState.CloseTag){return""}else{return XMLStreamWriter.__super__.endline.call(this,node,options,level)}};XMLStreamWriter.prototype.document=function(doc,options){var child,i,j,k,len,len1,ref,ref1,results;ref=doc.children;for(i=j=0,len=ref.length;j<len;i=++j){child=ref[i];child.isLastRootNode=i===doc.children.length-1}options=this.filterOptions(options);ref1=doc.children;results=[];for(k=0,len1=ref1.length;k<len1;k++){child=ref1[k];results.push(this.writeChildNode(child,options,0))}return results};XMLStreamWriter.prototype.attribute=function(att,options,level){return this.stream.write(XMLStreamWriter.__super__.attribute.call(this,att,options,level))};XMLStreamWriter.prototype.cdata=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.cdata.call(this,node,options,level))};XMLStreamWriter.prototype.comment=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.comment.call(this,node,options,level))};XMLStreamWriter.prototype.declaration=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.declaration.call(this,node,options,level))};XMLStreamWriter.prototype.docType=function(node,options,level){var child,j,len,ref;level||(level=0);this.openNode(node,options,level);options.state=WriterState.OpenTag;this.stream.write(this.indent(node,options,level));this.stream.write("<!DOCTYPE "+node.root().name);if(node.pubID&&node.sysID){this.stream.write(' PUBLIC "'+node.pubID+'" "'+node.sysID+'"')}else if(node.sysID){this.stream.write(' SYSTEM "'+node.sysID+'"')}if(node.children.length>0){this.stream.write(" [");this.stream.write(this.endline(node,options,level));options.state=WriterState.InsideTag;ref=node.children;for(j=0,len=ref.length;j<len;j++){child=ref[j];this.writeChildNode(child,options,level+1)}options.state=WriterState.CloseTag;this.stream.write("]")}options.state=WriterState.CloseTag;this.stream.write(options.spaceBeforeSlash+">");this.stream.write(this.endline(node,options,level));options.state=WriterState.None;return this.closeNode(node,options,level)};XMLStreamWriter.prototype.element=function(node,options,level){var att,child,childNodeCount,firstChildNode,j,len,name,prettySuppressed,ref,ref1;level||(level=0);this.openNode(node,options,level);options.state=WriterState.OpenTag;this.stream.write(this.indent(node,options,level)+"<"+node.name);ref=node.attribs;for(name in ref){if(!hasProp.call(ref,name))continue;att=ref[name];this.attribute(att,options,level)}childNodeCount=node.children.length;firstChildNode=childNodeCount===0?null:node.children[0];if(childNodeCount===0||node.children.every((function(e){return(e.type===NodeType.Text||e.type===NodeType.Raw)&&e.value===""}))){if(options.allowEmpty){this.stream.write(">");options.state=WriterState.CloseTag;this.stream.write("</"+node.name+">")}else{options.state=WriterState.CloseTag;this.stream.write(options.spaceBeforeSlash+"/>")}}else if(options.pretty&&childNodeCount===1&&(firstChildNode.type===NodeType.Text||firstChildNode.type===NodeType.Raw)&&firstChildNode.value!=null){this.stream.write(">");options.state=WriterState.InsideTag;options.suppressPrettyCount++;prettySuppressed=true;this.writeChildNode(firstChildNode,options,level+1);options.suppressPrettyCount--;prettySuppressed=false;options.state=WriterState.CloseTag;this.stream.write("</"+node.name+">")}else{this.stream.write(">"+this.endline(node,options,level));options.state=WriterState.InsideTag;ref1=node.children;for(j=0,len=ref1.length;j<len;j++){child=ref1[j];this.writeChildNode(child,options,level+1)}options.state=WriterState.CloseTag;this.stream.write(this.indent(node,options,level)+"</"+node.name+">")}this.stream.write(this.endline(node,options,level));options.state=WriterState.None;return this.closeNode(node,options,level)};XMLStreamWriter.prototype.processingInstruction=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.processingInstruction.call(this,node,options,level))};XMLStreamWriter.prototype.raw=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.raw.call(this,node,options,level))};XMLStreamWriter.prototype.text=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.text.call(this,node,options,level))};XMLStreamWriter.prototype.dtdAttList=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.dtdAttList.call(this,node,options,level))};XMLStreamWriter.prototype.dtdElement=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.dtdElement.call(this,node,options,level))};XMLStreamWriter.prototype.dtdEntity=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.dtdEntity.call(this,node,options,level))};XMLStreamWriter.prototype.dtdNotation=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.dtdNotation.call(this,node,options,level))};return XMLStreamWriter}(XMLWriterBase)}).call(this)},function(module,exports,__webpack_require__){(function(){"use strict";var bom,defaults,events,isEmpty,processItem,processors,promisify,sax,setImmediate,bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;sax=__webpack_require__(257);events=__webpack_require__(66);bom=__webpack_require__(272);processors=__webpack_require__(153);setImmediate=__webpack_require__(151).setImmediate;defaults=__webpack_require__(96).defaults;promisify=__webpack_require__(273);isEmpty=function(thing){return typeof thing==="object"&&thing!=null&&Object.keys(thing).length===0};processItem=function(processors,item,key){var i,len,process;for(i=0,len=processors.length;i<len;i++){process=processors[i];item=process(item,key)}return item};exports.Parser=function(superClass){extend(Parser,superClass);function Parser(opts){this.parseStringPromise=bind(this.parseStringPromise,this);this.parseString=bind(this.parseString,this);this.reset=bind(this.reset,this);this.assignOrPush=bind(this.assignOrPush,this);this.processAsync=bind(this.processAsync,this);var key,ref,value;if(!(this instanceof exports.Parser)){return new exports.Parser(opts)}this.options={};ref=defaults["0.2"];for(key in ref){if(!hasProp.call(ref,key))continue;value=ref[key];this.options[key]=value}for(key in opts){if(!hasProp.call(opts,key))continue;value=opts[key];this.options[key]=value}if(this.options.xmlns){this.options.xmlnskey=this.options.attrkey+"ns"}if(this.options.normalizeTags){if(!this.options.tagNameProcessors){this.options.tagNameProcessors=[]}this.options.tagNameProcessors.unshift(processors.normalize)}this.reset()}Parser.prototype.processAsync=function(){var chunk,err;try{if(this.remaining.length<=this.options.chunkSize){chunk=this.remaining;this.remaining="";this.saxParser=this.saxParser.write(chunk);return this.saxParser.close()}else{chunk=this.remaining.substr(0,this.options.chunkSize);this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length);this.saxParser=this.saxParser.write(chunk);return setImmediate(this.processAsync)}}catch(error1){err=error1;if(!this.saxParser.errThrown){this.saxParser.errThrown=true;return this.emit(err)}}};Parser.prototype.assignOrPush=function(obj,key,newValue){if(!(key in obj)){if(!this.options.explicitArray){return obj[key]=newValue}else{return obj[key]=[newValue]}}else{if(!(obj[key]instanceof Array)){obj[key]=[obj[key]]}return obj[key].push(newValue)}};Parser.prototype.reset=function(){var attrkey,charkey,ontext,stack;this.removeAllListeners();this.saxParser=sax.parser(this.options.strict,{trim:false,normalize:false,xmlns:this.options.xmlns});this.saxParser.errThrown=false;this.saxParser.onerror=function(_this){return function(error){_this.saxParser.resume();if(!_this.saxParser.errThrown){_this.saxParser.errThrown=true;return _this.emit("error",error)}}}(this);this.saxParser.onend=function(_this){return function(){if(!_this.saxParser.ended){_this.saxParser.ended=true;return _this.emit("end",_this.resultObject)}}}(this);this.saxParser.ended=false;this.EXPLICIT_CHARKEY=this.options.explicitCharkey;this.resultObject=null;stack=[];attrkey=this.options.attrkey;charkey=this.options.charkey;this.saxParser.onopentag=function(_this){return function(node){var key,newValue,obj,processedKey,ref;obj={};obj[charkey]="";if(!_this.options.ignoreAttrs){ref=node.attributes;for(key in ref){if(!hasProp.call(ref,key))continue;if(!(attrkey in obj)&&!_this.options.mergeAttrs){obj[attrkey]={}}newValue=_this.options.attrValueProcessors?processItem(_this.options.attrValueProcessors,node.attributes[key],key):node.attributes[key];processedKey=_this.options.attrNameProcessors?processItem(_this.options.attrNameProcessors,key):key;if(_this.options.mergeAttrs){_this.assignOrPush(obj,processedKey,newValue)}else{obj[attrkey][processedKey]=newValue}}}obj["#name"]=_this.options.tagNameProcessors?processItem(_this.options.tagNameProcessors,node.name):node.name;if(_this.options.xmlns){obj[_this.options.xmlnskey]={uri:node.uri,local:node.local}}return stack.push(obj)}}(this);this.saxParser.onclosetag=function(_this){return function(){var cdata,emptyStr,key,node,nodeName,obj,objClone,old,s,xpath;obj=stack.pop();nodeName=obj["#name"];if(!_this.options.explicitChildren||!_this.options.preserveChildrenOrder){delete obj["#name"]}if(obj.cdata===true){cdata=obj.cdata;delete obj.cdata}s=stack[stack.length-1];if(obj[charkey].match(/^\s*$/)&&!cdata){emptyStr=obj[charkey];delete obj[charkey]}else{if(_this.options.trim){obj[charkey]=obj[charkey].trim()}if(_this.options.normalize){obj[charkey]=obj[charkey].replace(/\s{2,}/g," ").trim()}obj[charkey]=_this.options.valueProcessors?processItem(_this.options.valueProcessors,obj[charkey],nodeName):obj[charkey];if(Object.keys(obj).length===1&&charkey in obj&&!_this.EXPLICIT_CHARKEY){obj=obj[charkey]}}if(isEmpty(obj)){obj=_this.options.emptyTag!==""?_this.options.emptyTag:emptyStr}if(_this.options.validator!=null){xpath="/"+function(){var i,len,results;results=[];for(i=0,len=stack.length;i<len;i++){node=stack[i];results.push(node["#name"])}return results}().concat(nodeName).join("/");(function(){var err;try{return obj=_this.options.validator(xpath,s&&s[nodeName],obj)}catch(error1){err=error1;return _this.emit("error",err)}})()}if(_this.options.explicitChildren&&!_this.options.mergeAttrs&&typeof obj==="object"){if(!_this.options.preserveChildrenOrder){node={};if(_this.options.attrkey in obj){node[_this.options.attrkey]=obj[_this.options.attrkey];delete obj[_this.options.attrkey]}if(!_this.options.charsAsChildren&&_this.options.charkey in obj){node[_this.options.charkey]=obj[_this.options.charkey];delete obj[_this.options.charkey]}if(Object.getOwnPropertyNames(obj).length>0){node[_this.options.childkey]=obj}obj=node}else if(s){s[_this.options.childkey]=s[_this.options.childkey]||[];objClone={};for(key in obj){if(!hasProp.call(obj,key))continue;objClone[key]=obj[key]}s[_this.options.childkey].push(objClone);delete obj["#name"];if(Object.keys(obj).length===1&&charkey in obj&&!_this.EXPLICIT_CHARKEY){obj=obj[charkey]}}}if(stack.length>0){return _this.assignOrPush(s,nodeName,obj)}else{if(_this.options.explicitRoot){old=obj;obj={};obj[nodeName]=old}_this.resultObject=obj;_this.saxParser.ended=true;return _this.emit("end",_this.resultObject)}}}(this);ontext=function(_this){return function(text){var charChild,s;s=stack[stack.length-1];if(s){s[charkey]+=text;if(_this.options.explicitChildren&&_this.options.preserveChildrenOrder&&_this.options.charsAsChildren&&(_this.options.includeWhiteChars||text.replace(/\\n/g,"").trim()!=="")){s[_this.options.childkey]=s[_this.options.childkey]||[];charChild={"#name":"__text__"};charChild[charkey]=text;if(_this.options.normalize){charChild[charkey]=charChild[charkey].replace(/\s{2,}/g," ").trim()}s[_this.options.childkey].push(charChild)}return s}}}(this);this.saxParser.ontext=ontext;return this.saxParser.oncdata=function(_this){return function(text){var s;s=ontext(text);if(s){return s.cdata=true}}}(this)};Parser.prototype.parseString=function(str,cb){var err;if(cb!=null&&typeof cb==="function"){this.on("end",(function(result){this.reset();return cb(null,result)}));this.on("error",(function(err){this.reset();return cb(err)}))}try{str=str.toString();if(str.trim()===""){this.emit("end",null);return true}str=bom.stripBOM(str);if(this.options.async){this.remaining=str;setImmediate(this.processAsync);return this.saxParser}return this.saxParser.write(str).close()}catch(error1){err=error1;if(!(this.saxParser.errThrown||this.saxParser.ended)){this.emit("error",err);return this.saxParser.errThrown=true}else if(this.saxParser.ended){throw err}}};Parser.prototype.parseStringPromise=function(str){return promisify(this.parseString)(str)};return Parser}(events);exports.parseString=function(str,a,b){var cb,options,parser;if(b!=null){if(typeof b==="function"){cb=b}if(typeof a==="object"){options=a}}else{if(typeof a==="function"){cb=a}options={}}parser=new exports.Parser(options);return parser.parseString(str,cb)};exports.parseStringPromise=function(str,a){var options,parser;if(typeof a==="object"){options=a}parser=new exports.Parser(options);return parser.parseStringPromise(str)}}).call(this)},function(module,exports,__webpack_require__){(function(Buffer){(function(sax){sax.parser=function(strict,opt){return new SAXParser(strict,opt)};sax.SAXParser=SAXParser;sax.SAXStream=SAXStream;sax.createStream=createStream;sax.MAX_BUFFER_LENGTH=64*1024;var buffers=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];sax.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function SAXParser(strict,opt){if(!(this instanceof SAXParser)){return new SAXParser(strict,opt)}var parser=this;clearBuffers(parser);parser.q=parser.c="";parser.bufferCheckPosition=sax.MAX_BUFFER_LENGTH;parser.opt=opt||{};parser.opt.lowercase=parser.opt.lowercase||parser.opt.lowercasetags;parser.looseCase=parser.opt.lowercase?"toLowerCase":"toUpperCase";parser.tags=[];parser.closed=parser.closedRoot=parser.sawRoot=false;parser.tag=parser.error=null;parser.strict=!!strict;parser.noscript=!!(strict||parser.opt.noscript);parser.state=S.BEGIN;parser.strictEntities=parser.opt.strictEntities;parser.ENTITIES=parser.strictEntities?Object.create(sax.XML_ENTITIES):Object.create(sax.ENTITIES);parser.attribList=[];if(parser.opt.xmlns){parser.ns=Object.create(rootNS)}parser.trackPosition=parser.opt.position!==false;if(parser.trackPosition){parser.position=parser.line=parser.column=0}emit(parser,"onready")}if(!Object.create){Object.create=function(o){function F(){}F.prototype=o;var newf=new F;return newf}}if(!Object.keys){Object.keys=function(o){var a=[];for(var i in o)if(o.hasOwnProperty(i))a.push(i);return a}}function checkBufferLength(parser){var maxAllowed=Math.max(sax.MAX_BUFFER_LENGTH,10);var maxActual=0;for(var i=0,l=buffers.length;i<l;i++){var len=parser[buffers[i]].length;if(len>maxAllowed){switch(buffers[i]){case"textNode":closeText(parser);break;case"cdata":emitNode(parser,"oncdata",parser.cdata);parser.cdata="";break;case"script":emitNode(parser,"onscript",parser.script);parser.script="";break;default:error(parser,"Max buffer length exceeded: "+buffers[i])}}maxActual=Math.max(maxActual,len)}var m=sax.MAX_BUFFER_LENGTH-maxActual;parser.bufferCheckPosition=m+parser.position}function clearBuffers(parser){for(var i=0,l=buffers.length;i<l;i++){parser[buffers[i]]=""}}function flushBuffers(parser){closeText(parser);if(parser.cdata!==""){emitNode(parser,"oncdata",parser.cdata);parser.cdata=""}if(parser.script!==""){emitNode(parser,"onscript",parser.script);parser.script=""}}SAXParser.prototype={end:function(){end(this)},write:write,resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){flushBuffers(this)}};var Stream;try{Stream=__webpack_require__(260).Stream}catch(ex){Stream=function(){}}var streamWraps=sax.EVENTS.filter((function(ev){return ev!=="error"&&ev!=="end"}));function createStream(strict,opt){return new SAXStream(strict,opt)}function SAXStream(strict,opt){if(!(this instanceof SAXStream)){return new SAXStream(strict,opt)}Stream.apply(this);this._parser=new SAXParser(strict,opt);this.writable=true;this.readable=true;var me=this;this._parser.onend=function(){me.emit("end")};this._parser.onerror=function(er){me.emit("error",er);me._parser.error=null};this._decoder=null;streamWraps.forEach((function(ev){Object.defineProperty(me,"on"+ev,{get:function(){return me._parser["on"+ev]},set:function(h){if(!h){me.removeAllListeners(ev);me._parser["on"+ev]=h;return h}me.on(ev,h)},enumerable:true,configurable:false})}))}SAXStream.prototype=Object.create(Stream.prototype,{constructor:{value:SAXStream}});SAXStream.prototype.write=function(data){if(typeof Buffer==="function"&&typeof Buffer.isBuffer==="function"&&Buffer.isBuffer(data)){if(!this._decoder){var SD=__webpack_require__(114).StringDecoder;this._decoder=new SD("utf8")}data=this._decoder.write(data)}this._parser.write(data.toString());this.emit("data",data);return true};SAXStream.prototype.end=function(chunk){if(chunk&&chunk.length){this.write(chunk)}this._parser.end();return true};SAXStream.prototype.on=function(ev,handler){var me=this;if(!me._parser["on"+ev]&&streamWraps.indexOf(ev)!==-1){me._parser["on"+ev]=function(){var args=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);args.splice(0,0,ev);me.emit.apply(me,args)}}return Stream.prototype.on.call(me,ev,handler)};var CDATA="[CDATA[";var DOCTYPE="DOCTYPE";var XML_NAMESPACE="http://www.w3.org/XML/1998/namespace";var XMLNS_NAMESPACE="http://www.w3.org/2000/xmlns/";var rootNS={xml:XML_NAMESPACE,xmlns:XMLNS_NAMESPACE};var nameStart=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;var nameBody=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;var entityStart=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;var entityBody=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function isWhitespace(c){return c===" "||c==="\n"||c==="\r"||c==="\t"}function isQuote(c){return c==='"'||c==="'"}function isAttribEnd(c){return c===">"||isWhitespace(c)}function isMatch(regex,c){return regex.test(c)}function notMatch(regex,c){return!isMatch(regex,c)}var S=0;sax.STATE={BEGIN:S++,BEGIN_WHITESPACE:S++,TEXT:S++,TEXT_ENTITY:S++,OPEN_WAKA:S++,SGML_DECL:S++,SGML_DECL_QUOTED:S++,DOCTYPE:S++,DOCTYPE_QUOTED:S++,DOCTYPE_DTD:S++,DOCTYPE_DTD_QUOTED:S++,COMMENT_STARTING:S++,COMMENT:S++,COMMENT_ENDING:S++,COMMENT_ENDED:S++,CDATA:S++,CDATA_ENDING:S++,CDATA_ENDING_2:S++,PROC_INST:S++,PROC_INST_BODY:S++,PROC_INST_ENDING:S++,OPEN_TAG:S++,OPEN_TAG_SLASH:S++,ATTRIB:S++,ATTRIB_NAME:S++,ATTRIB_NAME_SAW_WHITE:S++,ATTRIB_VALUE:S++,ATTRIB_VALUE_QUOTED:S++,ATTRIB_VALUE_CLOSED:S++,ATTRIB_VALUE_UNQUOTED:S++,ATTRIB_VALUE_ENTITY_Q:S++,ATTRIB_VALUE_ENTITY_U:S++,CLOSE_TAG:S++,CLOSE_TAG_SAW_WHITE:S++,SCRIPT:S++,SCRIPT_ENDING:S++};sax.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};sax.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(sax.ENTITIES).forEach((function(key){var e=sax.ENTITIES[key];var s=typeof e==="number"?String.fromCharCode(e):e;sax.ENTITIES[key]=s}));for(var s in sax.STATE){sax.STATE[sax.STATE[s]]=s}S=sax.STATE;function emit(parser,event,data){parser[event]&&parser[event](data)}function emitNode(parser,nodeType,data){if(parser.textNode)closeText(parser);emit(parser,nodeType,data)}function closeText(parser){parser.textNode=textopts(parser.opt,parser.textNode);if(parser.textNode)emit(parser,"ontext",parser.textNode);parser.textNode=""}function textopts(opt,text){if(opt.trim)text=text.trim();if(opt.normalize)text=text.replace(/\s+/g," ");return text}function error(parser,er){closeText(parser);if(parser.trackPosition){er+="\nLine: "+parser.line+"\nColumn: "+parser.column+"\nChar: "+parser.c}er=new Error(er);parser.error=er;emit(parser,"onerror",er);return parser}function end(parser){if(parser.sawRoot&&!parser.closedRoot)strictFail(parser,"Unclosed root tag");if(parser.state!==S.BEGIN&&parser.state!==S.BEGIN_WHITESPACE&&parser.state!==S.TEXT){error(parser,"Unexpected end")}closeText(parser);parser.c="";parser.closed=true;emit(parser,"onend");SAXParser.call(parser,parser.strict,parser.opt);return parser}function strictFail(parser,message){if(typeof parser!=="object"||!(parser instanceof SAXParser)){throw new Error("bad call to strictFail")}if(parser.strict){error(parser,message)}}function newTag(parser){if(!parser.strict)parser.tagName=parser.tagName[parser.looseCase]();var parent=parser.tags[parser.tags.length-1]||parser;var tag=parser.tag={name:parser.tagName,attributes:{}};if(parser.opt.xmlns){tag.ns=parent.ns}parser.attribList.length=0;emitNode(parser,"onopentagstart",tag)}function qname(name,attribute){var i=name.indexOf(":");var qualName=i<0?["",name]:name.split(":");var prefix=qualName[0];var local=qualName[1];if(attribute&&name==="xmlns"){prefix="xmlns";local=""}return{prefix:prefix,local:local}}function attrib(parser){if(!parser.strict){parser.attribName=parser.attribName[parser.looseCase]()}if(parser.attribList.indexOf(parser.attribName)!==-1||parser.tag.attributes.hasOwnProperty(parser.attribName)){parser.attribName=parser.attribValue="";return}if(parser.opt.xmlns){var qn=qname(parser.attribName,true);var prefix=qn.prefix;var local=qn.local;if(prefix==="xmlns"){if(local==="xml"&&parser.attribValue!==XML_NAMESPACE){strictFail(parser,"xml: prefix must be bound to "+XML_NAMESPACE+"\n"+"Actual: "+parser.attribValue)}else if(local==="xmlns"&&parser.attribValue!==XMLNS_NAMESPACE){strictFail(parser,"xmlns: prefix must be bound to "+XMLNS_NAMESPACE+"\n"+"Actual: "+parser.attribValue)}else{var tag=parser.tag;var parent=parser.tags[parser.tags.length-1]||parser;if(tag.ns===parent.ns){tag.ns=Object.create(parent.ns)}tag.ns[local]=parser.attribValue}}parser.attribList.push([parser.attribName,parser.attribValue])}else{parser.tag.attributes[parser.attribName]=parser.attribValue;emitNode(parser,"onattribute",{name:parser.attribName,value:parser.attribValue})}parser.attribName=parser.attribValue=""}function openTag(parser,selfClosing){if(parser.opt.xmlns){var tag=parser.tag;var qn=qname(parser.tagName);tag.prefix=qn.prefix;tag.local=qn.local;tag.uri=tag.ns[qn.prefix]||"";if(tag.prefix&&!tag.uri){strictFail(parser,"Unbound namespace prefix: "+JSON.stringify(parser.tagName));tag.uri=qn.prefix}var parent=parser.tags[parser.tags.length-1]||parser;if(tag.ns&&parent.ns!==tag.ns){Object.keys(tag.ns).forEach((function(p){emitNode(parser,"onopennamespace",{prefix:p,uri:tag.ns[p]})}))}for(var i=0,l=parser.attribList.length;i<l;i++){var nv=parser.attribList[i];var name=nv[0];var value=nv[1];var qualName=qname(name,true);var prefix=qualName.prefix;var local=qualName.local;var uri=prefix===""?"":tag.ns[prefix]||"";var a={name:name,value:value,prefix:prefix,local:local,uri:uri};if(prefix&&prefix!=="xmlns"&&!uri){strictFail(parser,"Unbound namespace prefix: "+JSON.stringify(prefix));a.uri=prefix}parser.tag.attributes[name]=a;emitNode(parser,"onattribute",a)}parser.attribList.length=0}parser.tag.isSelfClosing=!!selfClosing;parser.sawRoot=true;parser.tags.push(parser.tag);emitNode(parser,"onopentag",parser.tag);if(!selfClosing){if(!parser.noscript&&parser.tagName.toLowerCase()==="script"){parser.state=S.SCRIPT}else{parser.state=S.TEXT}parser.tag=null;parser.tagName=""}parser.attribName=parser.attribValue="";parser.attribList.length=0}function closeTag(parser){if(!parser.tagName){strictFail(parser,"Weird empty close tag.");parser.textNode+="</>";parser.state=S.TEXT;return}if(parser.script){if(parser.tagName!=="script"){parser.script+="</"+parser.tagName+">";parser.tagName="";parser.state=S.SCRIPT;return}emitNode(parser,"onscript",parser.script);parser.script=""}var t=parser.tags.length;var tagName=parser.tagName;if(!parser.strict){tagName=tagName[parser.looseCase]()}var closeTo=tagName;while(t--){var close=parser.tags[t];if(close.name!==closeTo){strictFail(parser,"Unexpected close tag")}else{break}}if(t<0){strictFail(parser,"Unmatched closing tag: "+parser.tagName);parser.textNode+="</"+parser.tagName+">";parser.state=S.TEXT;return}parser.tagName=tagName;var s=parser.tags.length;while(s-- >t){var tag=parser.tag=parser.tags.pop();parser.tagName=parser.tag.name;emitNode(parser,"onclosetag",parser.tagName);var x={};for(var i in tag.ns){x[i]=tag.ns[i]}var parent=parser.tags[parser.tags.length-1]||parser;if(parser.opt.xmlns&&tag.ns!==parent.ns){Object.keys(tag.ns).forEach((function(p){var n=tag.ns[p];emitNode(parser,"onclosenamespace",{prefix:p,uri:n})}))}}if(t===0)parser.closedRoot=true;parser.tagName=parser.attribValue=parser.attribName="";parser.attribList.length=0;parser.state=S.TEXT}function parseEntity(parser){var entity=parser.entity;var entityLC=entity.toLowerCase();var num;var numStr="";if(parser.ENTITIES[entity]){return parser.ENTITIES[entity]}if(parser.ENTITIES[entityLC]){return parser.ENTITIES[entityLC]}entity=entityLC;if(entity.charAt(0)==="#"){if(entity.charAt(1)==="x"){entity=entity.slice(2);num=parseInt(entity,16);numStr=num.toString(16)}else{entity=entity.slice(1);num=parseInt(entity,10);numStr=num.toString(10)}}entity=entity.replace(/^0+/,"");if(isNaN(num)||numStr.toLowerCase()!==entity){strictFail(parser,"Invalid character entity");return"&"+parser.entity+";"}return String.fromCodePoint(num)}function beginWhiteSpace(parser,c){if(c==="<"){parser.state=S.OPEN_WAKA;parser.startTagPosition=parser.position}else if(!isWhitespace(c)){strictFail(parser,"Non-whitespace before first tag.");parser.textNode=c;parser.state=S.TEXT}}function charAt(chunk,i){var result="";if(i<chunk.length){result=chunk.charAt(i)}return result}function write(chunk){var parser=this;if(this.error){throw this.error}if(parser.closed){return error(parser,"Cannot write after close. Assign an onready handler.")}if(chunk===null){return end(parser)}if(typeof chunk==="object"){chunk=chunk.toString()}var i=0;var c="";while(true){c=charAt(chunk,i++);parser.c=c;if(!c){break}if(parser.trackPosition){parser.position++;if(c==="\n"){parser.line++;parser.column=0}else{parser.column++}}switch(parser.state){case S.BEGIN:parser.state=S.BEGIN_WHITESPACE;if(c==="\ufeff"){continue}beginWhiteSpace(parser,c);continue;case S.BEGIN_WHITESPACE:beginWhiteSpace(parser,c);continue;case S.TEXT:if(parser.sawRoot&&!parser.closedRoot){var starti=i-1;while(c&&c!=="<"&&c!=="&"){c=charAt(chunk,i++);if(c&&parser.trackPosition){parser.position++;if(c==="\n"){parser.line++;parser.column=0}else{parser.column++}}}parser.textNode+=chunk.substring(starti,i-1)}if(c==="<"&&!(parser.sawRoot&&parser.closedRoot&&!parser.strict)){parser.state=S.OPEN_WAKA;parser.startTagPosition=parser.position}else{if(!isWhitespace(c)&&(!parser.sawRoot||parser.closedRoot)){strictFail(parser,"Text data outside of root node.")}if(c==="&"){parser.state=S.TEXT_ENTITY}else{parser.textNode+=c}}continue;case S.SCRIPT:if(c==="<"){parser.state=S.SCRIPT_ENDING}else{parser.script+=c}continue;case S.SCRIPT_ENDING:if(c==="/"){parser.state=S.CLOSE_TAG}else{parser.script+="<"+c;parser.state=S.SCRIPT}continue;case S.OPEN_WAKA:if(c==="!"){parser.state=S.SGML_DECL;parser.sgmlDecl=""}else if(isWhitespace(c)){}else if(isMatch(nameStart,c)){parser.state=S.OPEN_TAG;parser.tagName=c}else if(c==="/"){parser.state=S.CLOSE_TAG;parser.tagName=""}else if(c==="?"){parser.state=S.PROC_INST;parser.procInstName=parser.procInstBody=""}else{strictFail(parser,"Unencoded <");if(parser.startTagPosition+1<parser.position){var pad=parser.position-parser.startTagPosition;c=new Array(pad).join(" ")+c}parser.textNode+="<"+c;parser.state=S.TEXT}continue;case S.SGML_DECL:if((parser.sgmlDecl+c).toUpperCase()===CDATA){emitNode(parser,"onopencdata");parser.state=S.CDATA;parser.sgmlDecl="";parser.cdata=""}else if(parser.sgmlDecl+c==="--"){parser.state=S.COMMENT;parser.comment="";parser.sgmlDecl=""}else if((parser.sgmlDecl+c).toUpperCase()===DOCTYPE){parser.state=S.DOCTYPE;if(parser.doctype||parser.sawRoot){strictFail(parser,"Inappropriately located doctype declaration")}parser.doctype="";parser.sgmlDecl=""}else if(c===">"){emitNode(parser,"onsgmldeclaration",parser.sgmlDecl);parser.sgmlDecl="";parser.state=S.TEXT}else if(isQuote(c)){parser.state=S.SGML_DECL_QUOTED;parser.sgmlDecl+=c}else{parser.sgmlDecl+=c}continue;case S.SGML_DECL_QUOTED:if(c===parser.q){parser.state=S.SGML_DECL;parser.q=""}parser.sgmlDecl+=c;continue;case S.DOCTYPE:if(c===">"){parser.state=S.TEXT;emitNode(parser,"ondoctype",parser.doctype);parser.doctype=true}else{parser.doctype+=c;if(c==="["){parser.state=S.DOCTYPE_DTD}else if(isQuote(c)){parser.state=S.DOCTYPE_QUOTED;parser.q=c}}continue;case S.DOCTYPE_QUOTED:parser.doctype+=c;if(c===parser.q){parser.q="";parser.state=S.DOCTYPE}continue;case S.DOCTYPE_DTD:parser.doctype+=c;if(c==="]"){parser.state=S.DOCTYPE}else if(isQuote(c)){parser.state=S.DOCTYPE_DTD_QUOTED;parser.q=c}continue;case S.DOCTYPE_DTD_QUOTED:parser.doctype+=c;if(c===parser.q){parser.state=S.DOCTYPE_DTD;parser.q=""}continue;case S.COMMENT:if(c==="-"){parser.state=S.COMMENT_ENDING}else{parser.comment+=c}continue;case S.COMMENT_ENDING:if(c==="-"){parser.state=S.COMMENT_ENDED;parser.comment=textopts(parser.opt,parser.comment);if(parser.comment){emitNode(parser,"oncomment",parser.comment)}parser.comment=""}else{parser.comment+="-"+c;parser.state=S.COMMENT}continue;case S.COMMENT_ENDED:if(c!==">"){strictFail(parser,"Malformed comment");parser.comment+="--"+c;parser.state=S.COMMENT}else{parser.state=S.TEXT}continue;case S.CDATA:if(c==="]"){parser.state=S.CDATA_ENDING}else{parser.cdata+=c}continue;case S.CDATA_ENDING:if(c==="]"){parser.state=S.CDATA_ENDING_2}else{parser.cdata+="]"+c;parser.state=S.CDATA}continue;case S.CDATA_ENDING_2:if(c===">"){if(parser.cdata){emitNode(parser,"oncdata",parser.cdata)}emitNode(parser,"onclosecdata");parser.cdata="";parser.state=S.TEXT}else if(c==="]"){parser.cdata+="]"}else{parser.cdata+="]]"+c;parser.state=S.CDATA}continue;case S.PROC_INST:if(c==="?"){parser.state=S.PROC_INST_ENDING}else if(isWhitespace(c)){parser.state=S.PROC_INST_BODY}else{parser.procInstName+=c}continue;case S.PROC_INST_BODY:if(!parser.procInstBody&&isWhitespace(c)){continue}else if(c==="?"){parser.state=S.PROC_INST_ENDING}else{parser.procInstBody+=c}continue;case S.PROC_INST_ENDING:if(c===">"){emitNode(parser,"onprocessinginstruction",{name:parser.procInstName,body:parser.procInstBody});parser.procInstName=parser.procInstBody="";parser.state=S.TEXT}else{parser.procInstBody+="?"+c;parser.state=S.PROC_INST_BODY}continue;case S.OPEN_TAG:if(isMatch(nameBody,c)){parser.tagName+=c}else{newTag(parser);if(c===">"){openTag(parser)}else if(c==="/"){parser.state=S.OPEN_TAG_SLASH}else{if(!isWhitespace(c)){strictFail(parser,"Invalid character in tag name")}parser.state=S.ATTRIB}}continue;case S.OPEN_TAG_SLASH:if(c===">"){openTag(parser,true);closeTag(parser)}else{strictFail(parser,"Forward-slash in opening tag not followed by >");parser.state=S.ATTRIB}continue;case S.ATTRIB:if(isWhitespace(c)){continue}else if(c===">"){openTag(parser)}else if(c==="/"){parser.state=S.OPEN_TAG_SLASH}else if(isMatch(nameStart,c)){parser.attribName=c;parser.attribValue="";parser.state=S.ATTRIB_NAME}else{strictFail(parser,"Invalid attribute name")}continue;case S.ATTRIB_NAME:if(c==="="){parser.state=S.ATTRIB_VALUE}else if(c===">"){strictFail(parser,"Attribute without value");parser.attribValue=parser.attribName;attrib(parser);openTag(parser)}else if(isWhitespace(c)){parser.state=S.ATTRIB_NAME_SAW_WHITE}else if(isMatch(nameBody,c)){parser.attribName+=c}else{strictFail(parser,"Invalid attribute name")}continue;case S.ATTRIB_NAME_SAW_WHITE:if(c==="="){parser.state=S.ATTRIB_VALUE}else if(isWhitespace(c)){continue}else{strictFail(parser,"Attribute without value");parser.tag.attributes[parser.attribName]="";parser.attribValue="";emitNode(parser,"onattribute",{name:parser.attribName,value:""});parser.attribName="";if(c===">"){openTag(parser)}else if(isMatch(nameStart,c)){parser.attribName=c;parser.state=S.ATTRIB_NAME}else{strictFail(parser,"Invalid attribute name");parser.state=S.ATTRIB}}continue;case S.ATTRIB_VALUE:if(isWhitespace(c)){continue}else if(isQuote(c)){parser.q=c;parser.state=S.ATTRIB_VALUE_QUOTED}else{strictFail(parser,"Unquoted attribute value");parser.state=S.ATTRIB_VALUE_UNQUOTED;parser.attribValue=c}continue;case S.ATTRIB_VALUE_QUOTED:if(c!==parser.q){if(c==="&"){parser.state=S.ATTRIB_VALUE_ENTITY_Q}else{parser.attribValue+=c}continue}attrib(parser);parser.q="";parser.state=S.ATTRIB_VALUE_CLOSED;continue;case S.ATTRIB_VALUE_CLOSED:if(isWhitespace(c)){parser.state=S.ATTRIB}else if(c===">"){openTag(parser)}else if(c==="/"){parser.state=S.OPEN_TAG_SLASH}else if(isMatch(nameStart,c)){strictFail(parser,"No whitespace between attributes");parser.attribName=c;parser.attribValue="";parser.state=S.ATTRIB_NAME}else{strictFail(parser,"Invalid attribute name")}continue;case S.ATTRIB_VALUE_UNQUOTED:if(!isAttribEnd(c)){if(c==="&"){parser.state=S.ATTRIB_VALUE_ENTITY_U}else{parser.attribValue+=c}continue}attrib(parser);if(c===">"){openTag(parser)}else{parser.state=S.ATTRIB}continue;case S.CLOSE_TAG:if(!parser.tagName){if(isWhitespace(c)){continue}else if(notMatch(nameStart,c)){if(parser.script){parser.script+="</"+c;parser.state=S.SCRIPT}else{strictFail(parser,"Invalid tagname in closing tag.")}}else{parser.tagName=c}}else if(c===">"){closeTag(parser)}else if(isMatch(nameBody,c)){parser.tagName+=c}else if(parser.script){parser.script+="</"+parser.tagName;parser.tagName="";parser.state=S.SCRIPT}else{if(!isWhitespace(c)){strictFail(parser,"Invalid tagname in closing tag")}parser.state=S.CLOSE_TAG_SAW_WHITE}continue;case S.CLOSE_TAG_SAW_WHITE:if(isWhitespace(c)){continue}if(c===">"){closeTag(parser)}else{strictFail(parser,"Invalid characters in closing tag")}continue;case S.TEXT_ENTITY:case S.ATTRIB_VALUE_ENTITY_Q:case S.ATTRIB_VALUE_ENTITY_U:var returnState;var buffer;switch(parser.state){case S.TEXT_ENTITY:returnState=S.TEXT;buffer="textNode";break;case S.ATTRIB_VALUE_ENTITY_Q:returnState=S.ATTRIB_VALUE_QUOTED;buffer="attribValue";break;case S.ATTRIB_VALUE_ENTITY_U:returnState=S.ATTRIB_VALUE_UNQUOTED;buffer="attribValue";break}if(c===";"){parser[buffer]+=parseEntity(parser);parser.entity="";parser.state=returnState}else if(isMatch(parser.entity.length?entityBody:entityStart,c)){parser.entity+=c}else{strictFail(parser,"Invalid character in entity name");parser[buffer]+="&"+parser.entity+c;parser.entity="";parser.state=returnState}continue;default:throw new Error(parser,"Unknown state: "+parser.state)}}if(parser.position>=parser.bufferCheckPosition){checkBufferLength(parser)}return parser}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */if(!String.fromCodePoint){(function(){var stringFromCharCode=String.fromCharCode;var floor=Math.floor;var fromCodePoint=function(){var MAX_SIZE=16384;var codeUnits=[];var highSurrogate;var lowSurrogate;var index=-1;var length=arguments.length;if(!length){return""}var result="";while(++index<length){var codePoint=Number(arguments[index]);if(!isFinite(codePoint)||codePoint<0||codePoint>1114111||floor(codePoint)!==codePoint){throw RangeError("Invalid code point: "+codePoint)}if(codePoint<=65535){codeUnits.push(codePoint)}else{codePoint-=65536;highSurrogate=(codePoint>>10)+55296;lowSurrogate=codePoint%1024+56320;codeUnits.push(highSurrogate,lowSurrogate)}if(index+1===length||codeUnits.length>MAX_SIZE){result+=stringFromCharCode.apply(null,codeUnits);codeUnits.length=0}}return result};if(Object.defineProperty){Object.defineProperty(String,"fromCodePoint",{value:fromCodePoint,configurable:true,writable:true})}else{String.fromCodePoint=fromCodePoint}})()}})(false?undefined:exports)}).call(this,__webpack_require__(111).Buffer)},function(module,exports,__webpack_require__){"use strict";exports.byteLength=byteLength;exports.toByteArray=toByteArray;exports.fromByteArray=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(b64){var len=b64.length;if(len%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var validLen=b64.indexOf("=");if(validLen===-1)validLen=len;var placeHoldersLen=validLen===len?0:4-validLen%4;return[validLen,placeHoldersLen]}function byteLength(b64){var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function _byteLength(b64,validLen,placeHoldersLen){return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function toByteArray(b64){var tmp;var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];var arr=new Arr(_byteLength(b64,validLen,placeHoldersLen));var curByte=0;var len=placeHoldersLen>0?validLen-4:validLen;var i;for(i=0;i<len;i+=4){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[curByte++]=tmp>>16&255;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}if(placeHoldersLen===2){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[curByte++]=tmp&255}if(placeHoldersLen===1){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}return arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[num&63]}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3){tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(uint8[i+2]&255);output.push(tripletToBase64(tmp))}return output.join("")}function fromByteArray(uint8){var tmp;var len=uint8.length;var extraBytes=len%3;var parts=[];var maxChunkLength=16383;for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength){parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength))}if(extraBytes===1){tmp=uint8[len-1];parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")}else if(extraBytes===2){tmp=(uint8[len-2]<<8)+uint8[len-1];parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"=")}return parts.join("")}},function(module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128}},function(module,exports,__webpack_require__){module.exports=Stream;var EE=__webpack_require__(66).EventEmitter;var inherits=__webpack_require__(261);inherits(Stream,EE);Stream.Readable=__webpack_require__(112);Stream.Writable=__webpack_require__(268);Stream.Duplex=__webpack_require__(269);Stream.Transform=__webpack_require__(270);Stream.PassThrough=__webpack_require__(271);Stream.Stream=Stream;function Stream(){EE.call(this)}Stream.prototype.pipe=function(dest,options){var source=this;function ondata(chunk){if(dest.writable){if(false===dest.write(chunk)&&source.pause){source.pause()}}}source.on("data",ondata);function ondrain(){if(source.readable&&source.resume){source.resume()}}dest.on("drain",ondrain);if(!dest._isStdio&&(!options||options.end!==false)){source.on("end",onend);source.on("close",onclose)}var didOnEnd=false;function onend(){if(didOnEnd)return;didOnEnd=true;dest.end()}function onclose(){if(didOnEnd)return;didOnEnd=true;if(typeof dest.destroy==="function")dest.destroy()}function onerror(er){cleanup();if(EE.listenerCount(this,"error")===0){throw er}}source.on("error",onerror);dest.on("error",onerror);function cleanup(){source.removeListener("data",ondata);dest.removeListener("drain",ondrain);source.removeListener("end",onend);source.removeListener("close",onclose);source.removeListener("error",onerror);dest.removeListener("error",onerror);source.removeListener("end",cleanup);source.removeListener("close",cleanup);dest.removeListener("close",cleanup)}source.on("end",cleanup);source.on("close",cleanup);dest.on("close",cleanup);dest.emit("pipe",source);return dest}},function(module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}}else{module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}}},function(module,exports){},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Buffer=__webpack_require__(81).Buffer;var util=__webpack_require__(264);function copyBuffer(src,target,offset){src.copy(target,offset)}module.exports=function(){function BufferList(){_classCallCheck(this,BufferList);this.head=null;this.tail=null;this.length=0}BufferList.prototype.push=function push(v){var entry={data:v,next:null};if(this.length>0)this.tail.next=entry;else this.head=entry;this.tail=entry;++this.length};BufferList.prototype.unshift=function unshift(v){var entry={data:v,next:this.head};if(this.length===0)this.tail=entry;this.head=entry;++this.length};BufferList.prototype.shift=function shift(){if(this.length===0)return;var ret=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return ret};BufferList.prototype.clear=function clear(){this.head=this.tail=null;this.length=0};BufferList.prototype.join=function join(s){if(this.length===0)return"";var p=this.head;var ret=""+p.data;while(p=p.next){ret+=s+p.data}return ret};BufferList.prototype.concat=function concat(n){if(this.length===0)return Buffer.alloc(0);if(this.length===1)return this.head.data;var ret=Buffer.allocUnsafe(n>>>0);var p=this.head;var i=0;while(p){copyBuffer(p.data,ret,i);i+=p.data.length;p=p.next}return ret};return BufferList}();if(util&&util.inspect&&util.inspect.custom){module.exports.prototype[util.inspect.custom]=function(){var obj=util.inspect({length:this.length});return this.constructor.name+" "+obj}}},function(module,exports){},function(module,exports,__webpack_require__){(function(global,process){(function(global,undefined){"use strict";if(global.setImmediate){return}var nextHandle=1;var tasksByHandle={};var currentlyRunningATask=false;var doc=global.document;var registerImmediate;function setImmediate(callback){if(typeof callback!=="function"){callback=new Function(""+callback)}var args=new Array(arguments.length-1);for(var i=0;i<args.length;i++){args[i]=arguments[i+1]}var task={callback:callback,args:args};tasksByHandle[nextHandle]=task;registerImmediate(nextHandle);return nextHandle++}function clearImmediate(handle){delete tasksByHandle[handle]}function run(task){var callback=task.callback;var args=task.args;switch(args.length){case 0:callback();break;case 1:callback(args[0]);break;case 2:callback(args[0],args[1]);break;case 3:callback(args[0],args[1],args[2]);break;default:callback.apply(undefined,args);break}}function runIfPresent(handle){if(currentlyRunningATask){setTimeout(runIfPresent,0,handle)}else{var task=tasksByHandle[handle];if(task){currentlyRunningATask=true;try{run(task)}finally{clearImmediate(handle);currentlyRunningATask=false}}}}function installNextTickImplementation(){registerImmediate=function(handle){process.nextTick((function(){runIfPresent(handle)}))}}function canUsePostMessage(){if(global.postMessage&&!global.importScripts){var postMessageIsAsynchronous=true;var oldOnMessage=global.onmessage;global.onmessage=function(){postMessageIsAsynchronous=false};global.postMessage("","*");global.onmessage=oldOnMessage;return postMessageIsAsynchronous}}function installPostMessageImplementation(){var messagePrefix="setImmediate$"+Math.random()+"$";var onGlobalMessage=function(event){if(event.source===global&&typeof event.data==="string"&&event.data.indexOf(messagePrefix)===0){runIfPresent(+event.data.slice(messagePrefix.length))}};if(global.addEventListener){global.addEventListener("message",onGlobalMessage,false)}else{global.attachEvent("onmessage",onGlobalMessage)}registerImmediate=function(handle){global.postMessage(messagePrefix+handle,"*")}}function installMessageChannelImplementation(){var channel=new MessageChannel;channel.port1.onmessage=function(event){var handle=event.data;runIfPresent(handle)};registerImmediate=function(handle){channel.port2.postMessage(handle)}}function installReadyStateChangeImplementation(){var html=doc.documentElement;registerImmediate=function(handle){var script=doc.createElement("script");script.onreadystatechange=function(){runIfPresent(handle);script.onreadystatechange=null;html.removeChild(script);script=null};html.appendChild(script)}}function installSetTimeoutImplementation(){registerImmediate=function(handle){setTimeout(runIfPresent,0,handle)}}var attachTo=Object.getPrototypeOf&&Object.getPrototypeOf(global);attachTo=attachTo&&attachTo.setTimeout?attachTo:global;if({}.toString.call(global.process)==="[object process]"){installNextTickImplementation()}else if(canUsePostMessage()){installPostMessageImplementation()}else if(global.MessageChannel){installMessageChannelImplementation()}else if(doc&&"onreadystatechange"in doc.createElement("script")){installReadyStateChangeImplementation()}else{installSetTimeoutImplementation()}attachTo.setImmediate=setImmediate;attachTo.clearImmediate=clearImmediate})(typeof self==="undefined"?typeof global==="undefined"?this:global:self)}).call(this,__webpack_require__(55),__webpack_require__(60))},function(module,exports,__webpack_require__){(function(global){module.exports=deprecate;function deprecate(fn,msg){if(config("noDeprecation")){return fn}var warned=false;function deprecated(){if(!warned){if(config("throwDeprecation")){throw new Error(msg)}else if(config("traceDeprecation")){console.trace(msg)}else{console.warn(msg)}warned=true}return fn.apply(this,arguments)}return deprecated}function config(name){try{if(!global.localStorage)return false}catch(_){return false}var val=global.localStorage[name];if(null==val)return false;return String(val).toLowerCase()==="true"}}).call(this,__webpack_require__(55))},function(module,exports,__webpack_require__){"use strict";module.exports=PassThrough;var Transform=__webpack_require__(152);var util=Object.create(__webpack_require__(67));util.inherits=__webpack_require__(68);util.inherits(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(113)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(62)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(112).Transform},function(module,exports,__webpack_require__){module.exports=__webpack_require__(112).PassThrough},function(module,exports){(function(){"use strict";exports.stripBOM=function(str){if(str[0]==="\ufeff"){return str.substring(1)}else{return str}}}).call(this)},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(115);var util=__webpack_require__(77);var implementation=__webpack_require__(155);var getPolyfill=__webpack_require__(164);var polyfill=getPolyfill();var shim=__webpack_require__(299);var boundPromisify=function promisify(orig){return polyfill.apply(util,arguments)};define(boundPromisify,{custom:polyfill.custom,customPromisifyArgs:polyfill.customPromisifyArgs,getPolyfill:getPolyfill,implementation:implementation,shim:shim});module.exports=boundPromisify},function(module,exports,__webpack_require__){"use strict";var slice=Array.prototype.slice;var isArgs=__webpack_require__(154);var origKeys=Object.keys;var keysShim=origKeys?function keys(o){return origKeys(o)}:__webpack_require__(275);var originalKeys=Object.keys;keysShim.shim=function shimObjectKeys(){if(Object.keys){var keysWorksWithArguments=function(){var args=Object.keys(arguments);return args&&args.length===arguments.length}(1,2);if(!keysWorksWithArguments){Object.keys=function keys(object){if(isArgs(object)){return originalKeys(slice.call(object))}return originalKeys(object)}}}else{Object.keys=keysShim}return Object.keys||keysShim};module.exports=keysShim},function(module,exports,__webpack_require__){"use strict";var keysShim;if(!Object.keys){var has=Object.prototype.hasOwnProperty;var toStr=Object.prototype.toString;var isArgs=__webpack_require__(154);var isEnumerable=Object.prototype.propertyIsEnumerable;var hasDontEnumBug=!isEnumerable.call({toString:null},"toString");var hasProtoEnumBug=isEnumerable.call((function(){}),"prototype");var dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o};var excludedKeys={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true};var hasAutomationEqualityBug=function(){if(typeof window==="undefined"){return false}for(var k in window){try{if(!excludedKeys["$"+k]&&has.call(window,k)&&window[k]!==null&&typeof window[k]==="object"){try{equalsConstructorPrototype(window[k])}catch(e){return true}}}catch(e){return true}}return false}();var equalsConstructorPrototypeIfNotBuggy=function(o){if(typeof window==="undefined"||!hasAutomationEqualityBug){return equalsConstructorPrototype(o)}try{return equalsConstructorPrototype(o)}catch(e){return false}};keysShim=function keys(object){var isObject=object!==null&&typeof object==="object";var isFunction=toStr.call(object)==="[object Function]";var isArguments=isArgs(object);var isString=isObject&&toStr.call(object)==="[object String]";var theKeys=[];if(!isObject&&!isFunction&&!isArguments){throw new TypeError("Object.keys called on a non-object")}var skipProto=hasProtoEnumBug&&isFunction;if(isString&&object.length>0&&!has.call(object,0)){for(var i=0;i<object.length;++i){theKeys.push(String(i))}}if(isArguments&&object.length>0){for(var j=0;j<object.length;++j){theKeys.push(String(j))}}else{for(var name in object){if(!(skipProto&&name==="prototype")&&has.call(object,name)){theKeys.push(String(name))}}}if(hasDontEnumBug){var skipConstructor=equalsConstructorPrototypeIfNotBuggy(object);for(var k=0;k<dontEnums.length;++k){if(!(skipConstructor&&dontEnums[k]==="constructor")&&has.call(object,dontEnums[k])){theKeys.push(dontEnums[k])}}}return theKeys}}module.exports=keysShim},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(115);var implementation=__webpack_require__(156);var getPolyfill=__webpack_require__(163);var shim=__webpack_require__(298);define(implementation,{getPolyfill:getPolyfill,implementation:implementation,shim:shim});module.exports=implementation},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(52);var $TypeError=GetIntrinsic("%TypeError%");var DefineOwnProperty=__webpack_require__(280);var FromPropertyDescriptor=__webpack_require__(282);var OrdinaryGetOwnProperty=__webpack_require__(284);var IsDataDescriptor=__webpack_require__(291);var IsExtensible=__webpack_require__(292);var IsPropertyKey=__webpack_require__(159);var SameValue=__webpack_require__(294);var Type=__webpack_require__(69);module.exports=function CreateDataProperty(O,P,V){if(Type(O)!=="Object"){throw new $TypeError("Assertion failed: Type(O) is not Object")}if(!IsPropertyKey(P)){throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true")}var oldDesc=OrdinaryGetOwnProperty(O,P);var extensible=!oldDesc||IsExtensible(O);var immutable=oldDesc&&(!oldDesc["[[Writable]]"]||!oldDesc["[[Configurable]]"]);if(immutable||!extensible){return false}return DefineOwnProperty(IsDataDescriptor,SameValue,FromPropertyDescriptor,O,P,{"[[Configurable]]":true,"[[Enumerable]]":true,"[[Value]]":V,"[[Writable]]":true})}},function(module,exports,__webpack_require__){"use strict";module.exports=function hasSymbols(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function"){return false}if(typeof Symbol.iterator==="symbol"){return true}var obj={};var sym=Symbol("test");var symObj=Object(sym);if(typeof sym==="string"){return false}if(Object.prototype.toString.call(sym)!=="[object Symbol]"){return false}if(Object.prototype.toString.call(symObj)!=="[object Symbol]"){return false}var symVal=42;obj[sym]=symVal;for(sym in obj){return false}if(typeof Object.keys==="function"&&Object.keys(obj).length!==0){return false}if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(obj).length!==0){return false}var syms=Object.getOwnPropertySymbols(obj);if(syms.length!==1||syms[0]!==sym){return false}if(!Object.prototype.propertyIsEnumerable.call(obj,sym)){return false}if(typeof Object.getOwnPropertyDescriptor==="function"){var descriptor=Object.getOwnPropertyDescriptor(obj,sym);if(descriptor.value!==symVal||descriptor.enumerable!==true){return false}}return true}},function(module,exports,__webpack_require__){"use strict";var ERROR_MESSAGE="Function.prototype.bind called on incompatible ";var slice=Array.prototype.slice;var toStr=Object.prototype.toString;var funcType="[object Function]";module.exports=function bind(that){var target=this;if(typeof target!=="function"||toStr.call(target)!==funcType){throw new TypeError(ERROR_MESSAGE+target)}var args=slice.call(arguments,1);var bound;var binder=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));if(Object(result)===result){return result}return this}else{return target.apply(that,args.concat(slice.call(arguments)))}};var boundLength=Math.max(0,target.length-args.length);var boundArgs=[];for(var i=0;i<boundLength;i++){boundArgs.push("$"+i)}bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this,arguments); }")(binder);if(target.prototype){var Empty=function Empty(){};Empty.prototype=target.prototype;bound.prototype=new Empty;Empty.prototype=null}return bound}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(52);var $defineProperty=GetIntrinsic("%Object.defineProperty%",true);if($defineProperty){try{$defineProperty({},"a",{value:1})}catch(e){$defineProperty=null}}var callBound=__webpack_require__(82);var $isEnumerable=callBound("Object.prototype.propertyIsEnumerable");module.exports=function DefineOwnProperty(IsDataDescriptor,SameValue,FromPropertyDescriptor,O,P,desc){if(!$defineProperty){if(!IsDataDescriptor(desc)){return false}if(!desc["[[Configurable]]"]||!desc["[[Writable]]"]){return false}if(P in O&&$isEnumerable(O,P)!==!!desc["[[Enumerable]]"]){return false}var V=desc["[[Value]]"];O[P]=V;return SameValue(O[P],V)}$defineProperty(O,P,FromPropertyDescriptor(desc));return true}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(116);var GetIntrinsic=__webpack_require__(52);var $apply=GetIntrinsic("%Function.prototype.apply%");var $call=GetIntrinsic("%Function.prototype.call%");var $reflectApply=GetIntrinsic("%Reflect.apply%",true)||bind.call($call,$apply);module.exports=function callBind(){return $reflectApply(bind,$call,arguments)};module.exports.apply=function applyBind(){return $reflectApply(bind,$apply,arguments)}},function(module,exports,__webpack_require__){"use strict";var assertRecord=__webpack_require__(158);var Type=__webpack_require__(69);module.exports=function FromPropertyDescriptor(Desc){if(typeof Desc==="undefined"){return Desc}assertRecord(Type,"Property Descriptor","Desc",Desc);var obj={};if("[[Value]]"in Desc){obj.value=Desc["[[Value]]"]}if("[[Writable]]"in Desc){obj.writable=Desc["[[Writable]]"]}if("[[Get]]"in Desc){obj.get=Desc["[[Get]]"]}if("[[Set]]"in Desc){obj.set=Desc["[[Set]]"]}if("[[Enumerable]]"in Desc){obj.enumerable=Desc["[[Enumerable]]"]}if("[[Configurable]]"in Desc){obj.configurable=Desc["[[Configurable]]"]}return obj}},function(module,exports,__webpack_require__){"use strict";module.exports=function Type(x){if(x===null){return"Null"}if(typeof x==="undefined"){return"Undefined"}if(typeof x==="function"||typeof x==="object"){return"Object"}if(typeof x==="number"){return"Number"}if(typeof x==="boolean"){return"Boolean"}if(typeof x==="string"){return"String"}}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(52);var $gOPD=__webpack_require__(285);var $TypeError=GetIntrinsic("%TypeError%");var callBound=__webpack_require__(82);var $isEnumerable=callBound("Object.prototype.propertyIsEnumerable");var has=__webpack_require__(83);var IsArray=__webpack_require__(286);var IsPropertyKey=__webpack_require__(159);var IsRegExp=__webpack_require__(287);var ToPropertyDescriptor=__webpack_require__(289);var Type=__webpack_require__(69);module.exports=function OrdinaryGetOwnProperty(O,P){if(Type(O)!=="Object"){throw new $TypeError("Assertion failed: O must be an Object")}if(!IsPropertyKey(P)){throw new $TypeError("Assertion failed: P must be a Property Key")}if(!has(O,P)){return void 0}if(!$gOPD){var arrayLength=IsArray(O)&&P==="length";var regexLastIndex=IsRegExp(O)&&P==="lastIndex";return{"[[Configurable]]":!(arrayLength||regexLastIndex),"[[Enumerable]]":$isEnumerable(O,P),"[[Value]]":O[P],"[[Writable]]":true}}return ToPropertyDescriptor($gOPD(O,P))}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(52);var $gOPD=GetIntrinsic("%Object.getOwnPropertyDescriptor%");if($gOPD){try{$gOPD([],"length")}catch(e){$gOPD=null}}module.exports=$gOPD},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(52);var $Array=GetIntrinsic("%Array%");var toStr=!$Array.isArray&&__webpack_require__(82)("Object.prototype.toString");module.exports=$Array.isArray||function IsArray(argument){return toStr(argument)==="[object Array]"}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(52);var $match=GetIntrinsic("%Symbol.match%",true);var hasRegExpMatcher=__webpack_require__(288);var ToBoolean=__webpack_require__(160);module.exports=function IsRegExp(argument){if(!argument||typeof argument!=="object"){return false}if($match){var isRegExp=argument[$match];if(typeof isRegExp!=="undefined"){return ToBoolean(isRegExp)}}return hasRegExpMatcher(argument)}},function(module,exports,__webpack_require__){"use strict";var hasSymbols=__webpack_require__(157)();var hasToStringTag=hasSymbols&&typeof Symbol.toStringTag==="symbol";var hasOwnProperty;var regexExec;var isRegexMarker;var badStringifier;if(hasToStringTag){hasOwnProperty=Function.call.bind(Object.prototype.hasOwnProperty);regexExec=Function.call.bind(RegExp.prototype.exec);isRegexMarker={};var throwRegexMarker=function(){throw isRegexMarker};badStringifier={toString:throwRegexMarker,valueOf:throwRegexMarker};if(typeof Symbol.toPrimitive==="symbol"){badStringifier[Symbol.toPrimitive]=throwRegexMarker}}var toStr=Object.prototype.toString;var gOPD=Object.getOwnPropertyDescriptor;var regexClass="[object RegExp]";module.exports=hasToStringTag?function isRegex(value){if(!value||typeof value!=="object"){return false}var descriptor=gOPD(value,"lastIndex");var hasLastIndexDataProperty=descriptor&&hasOwnProperty(descriptor,"value");if(!hasLastIndexDataProperty){return false}try{regexExec(value,badStringifier)}catch(e){return e===isRegexMarker}}:function isRegex(value){if(!value||typeof value!=="object"&&typeof value!=="function"){return false}return toStr.call(value)===regexClass}},function(module,exports,__webpack_require__){"use strict";var has=__webpack_require__(83);var GetIntrinsic=__webpack_require__(52);var $TypeError=GetIntrinsic("%TypeError%");var Type=__webpack_require__(69);var ToBoolean=__webpack_require__(160);var IsCallable=__webpack_require__(161);module.exports=function ToPropertyDescriptor(Obj){if(Type(Obj)!=="Object"){throw new $TypeError("ToPropertyDescriptor requires an object")}var desc={};if(has(Obj,"enumerable")){desc["[[Enumerable]]"]=ToBoolean(Obj.enumerable)}if(has(Obj,"configurable")){desc["[[Configurable]]"]=ToBoolean(Obj.configurable)}if(has(Obj,"value")){desc["[[Value]]"]=Obj.value}if(has(Obj,"writable")){desc["[[Writable]]"]=ToBoolean(Obj.writable)}if(has(Obj,"get")){var getter=Obj.get;if(typeof getter!=="undefined"&&!IsCallable(getter)){throw new TypeError("getter must be a function")}desc["[[Get]]"]=getter}if(has(Obj,"set")){var setter=Obj.set;if(typeof setter!=="undefined"&&!IsCallable(setter)){throw new $TypeError("setter must be a function")}desc["[[Set]]"]=setter}if((has(desc,"[[Get]]")||has(desc,"[[Set]]"))&&(has(desc,"[[Value]]")||has(desc,"[[Writable]]"))){throw new $TypeError("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute")}return desc}},function(module,exports,__webpack_require__){"use strict";var fnToStr=Function.prototype.toString;var reflectApply=typeof Reflect==="object"&&Reflect!==null&&Reflect.apply;var badArrayLike;var isCallableMarker;if(typeof reflectApply==="function"&&typeof Object.defineProperty==="function"){try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}});isCallableMarker={}}catch(_){reflectApply=null}}else{reflectApply=null}var constructorRegex=/^\s*class\b/;var isES6ClassFn=function isES6ClassFunction(value){try{var fnStr=fnToStr.call(value);return constructorRegex.test(fnStr)}catch(e){return false}};var tryFunctionObject=function tryFunctionToStr(value){try{if(isES6ClassFn(value)){return false}fnToStr.call(value);return true}catch(e){return false}};var toStr=Object.prototype.toString;var fnClass="[object Function]";var genClass="[object GeneratorFunction]";var hasToStringTag=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";module.exports=reflectApply?function isCallable(value){if(!value){return false}if(typeof value!=="function"&&typeof value!=="object"){return false}if(typeof value==="function"&&!value.prototype){return true}try{reflectApply(value,null,badArrayLike)}catch(e){if(e!==isCallableMarker){return false}}return!isES6ClassFn(value)}:function isCallable(value){if(!value){return false}if(typeof value!=="function"&&typeof value!=="object"){return false}if(typeof value==="function"&&!value.prototype){return true}if(hasToStringTag){return tryFunctionObject(value)}if(isES6ClassFn(value)){return false}var strClass=toStr.call(value);return strClass===fnClass||strClass===genClass}},function(module,exports,__webpack_require__){"use strict";var has=__webpack_require__(83);var assertRecord=__webpack_require__(158);var Type=__webpack_require__(69);module.exports=function IsDataDescriptor(Desc){if(typeof Desc==="undefined"){return false}assertRecord(Type,"Property Descriptor","Desc",Desc);if(!has(Desc,"[[Value]]")&&!has(Desc,"[[Writable]]")){return false}return true}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(52);var $Object=GetIntrinsic("%Object%");var isPrimitive=__webpack_require__(293);var $preventExtensions=$Object.preventExtensions;var $isExtensible=$Object.isExtensible;module.exports=$preventExtensions?function IsExtensible(obj){return!isPrimitive(obj)&&$isExtensible(obj)}:function IsExtensible(obj){return!isPrimitive(obj)}},function(module,exports,__webpack_require__){"use strict";module.exports=function isPrimitive(value){return value===null||typeof value!=="function"&&typeof value!=="object"}},function(module,exports,__webpack_require__){"use strict";var $isNaN=__webpack_require__(295);module.exports=function SameValue(x,y){if(x===y){if(x===0){return 1/x===1/y}return true}return $isNaN(x)&&$isNaN(y)}},function(module,exports,__webpack_require__){"use strict";module.exports=Number.isNaN||function isNaN(a){return a!==a}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(52);var $TypeError=GetIntrinsic("%TypeError%");module.exports=function CheckObjectCoercible(value,optMessage){if(value==null){throw new $TypeError(optMessage||"Cannot call method on "+value)}return value}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(52);var $Object=GetIntrinsic("%Object%");var RequireObjectCoercible=__webpack_require__(162);module.exports=function ToObject(value){RequireObjectCoercible(value);return $Object(value)}},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(163);var define=__webpack_require__(115);module.exports=function shimGetOwnPropertyDescriptors(){var polyfill=getPolyfill();define(Object,{getOwnPropertyDescriptors:polyfill},{getOwnPropertyDescriptors:function(){return Object.getOwnPropertyDescriptors!==polyfill}});return polyfill}},function(module,exports,__webpack_require__){"use strict";var util=__webpack_require__(77);var getPolyfill=__webpack_require__(164);module.exports=function shimUtilPromisify(){var polyfill=getPolyfill();if(polyfill!==util.promisify){util.promisify=polyfill;Object.defineProperty(util,"promisify",{value:polyfill})}return polyfill}},function(module,exports){module.exports=parse;module.exports.parse=parse;module.exports.stringify=stringify;var numberRegexp=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/;var tuples=new RegExp("^"+numberRegexp.source+"(\\s"+numberRegexp.source+"){1,}");function parse(input){var parts=input.split(";");var _=parts.pop();var srid=(parts.shift()||"").split("=").pop();var i=0;function $(re){var match=_.substring(i).match(re);if(!match)return null;else{i+=match[0].length;return match[0]}}function crs(obj){if(obj&&srid.match(/\d+/)){obj.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+srid}}}return obj}function white(){$(/^\s*/)}function multicoords(){white();var depth=0;var rings=[];var stack=[rings];var pointer=rings;var elem;while(elem=$(/^(\()/)||$(/^(\))/)||$(/^(,)/)||$(tuples)){if(elem==="("){stack.push(pointer);pointer=[];stack[stack.length-1].push(pointer);depth++}else if(elem===")"){if(pointer.length===0)return null;pointer=stack.pop();if(!pointer)return null;depth--;if(depth===0)break}else if(elem===","){pointer=[];stack[stack.length-1].push(pointer)}else if(!elem.split(/\s/g).some(isNaN)){Array.prototype.push.apply(pointer,elem.split(/\s/g).map(parseFloat))}else{return null}white()}if(depth!==0)return null;return rings}function coords(){var list=[];var item;var pt;while(pt=$(tuples)||$(/^(,)/)){if(pt===","){list.push(item);item=[]}else if(!pt.split(/\s/g).some(isNaN)){if(!item)item=[];Array.prototype.push.apply(item,pt.split(/\s/g).map(parseFloat))}white()}if(item)list.push(item);else return null;return list.length?list:null}function point(){if(!$(/^(point(\sz)?)/i))return null;white();if(!$(/^(\()/))return null;var c=coords();if(!c)return null;white();if(!$(/^(\))/))return null;return{type:"Point",coordinates:c[0]}}function multipoint(){if(!$(/^(multipoint)/i))return null;white();var newCoordsFormat=_.substring(_.indexOf("(")+1,_.length-1).replace(/\(/g,"").replace(/\)/g,"");_="MULTIPOINT ("+newCoordsFormat+")";var c=multicoords();if(!c)return null;white();return{type:"MultiPoint",coordinates:c}}function multilinestring(){if(!$(/^(multilinestring)/i))return null;white();var c=multicoords();if(!c)return null;white();return{type:"MultiLineString",coordinates:c}}function linestring(){if(!$(/^(linestring(\sz)?)/i))return null;white();if(!$(/^(\()/))return null;var c=coords();if(!c)return null;if(!$(/^(\))/))return null;return{type:"LineString",coordinates:c}}function polygon(){if(!$(/^(polygon(\sz)?)/i))return null;white();var c=multicoords();if(!c)return null;return{type:"Polygon",coordinates:c}}function multipolygon(){if(!$(/^(multipolygon)/i))return null;white();var c=multicoords();if(!c)return null;return{type:"MultiPolygon",coordinates:c}}function geometrycollection(){var geometries=[];var geometry;if(!$(/^(geometrycollection)/i))return null;white();if(!$(/^(\()/))return null;while(geometry=root()){geometries.push(geometry);white();$(/^(,)/);white()}if(!$(/^(\))/))return null;return{type:"GeometryCollection",geometries:geometries}}function root(){return point()||linestring()||polygon()||multipoint()||multilinestring()||multipolygon()||geometrycollection()}return crs(root())}function stringify(gj){if(gj.type==="Feature"){gj=gj.geometry}function pairWKT(c){return c.join(" ")}function ringWKT(r){return r.map(pairWKT).join(", ")}function ringsWKT(r){return r.map(ringWKT).map(wrapParens).join(", ")}function multiRingsWKT(r){return r.map(ringsWKT).map(wrapParens).join(", ")}function wrapParens(s){return"("+s+")"}switch(gj.type){case"Point":return"POINT ("+pairWKT(gj.coordinates)+")";case"LineString":return"LINESTRING ("+ringWKT(gj.coordinates)+")";case"Polygon":return"POLYGON ("+ringsWKT(gj.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+ringWKT(gj.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+multiRingsWKT(gj.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+ringsWKT(gj.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+gj.geometries.map(stringify).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}},function(module,exports,__webpack_require__){(function(global,factory){true?factory(exports):undefined})(this,(function(exports){"use strict";var identity=function(x){return x};var transform=function(transform){if(transform==null)return identity;var x0,y0,kx=transform.scale[0],ky=transform.scale[1],dx=transform.translate[0],dy=transform.translate[1];return function(input,i){if(!i)x0=y0=0;var j=2,n=input.length,output=new Array(n);output[0]=(x0+=input[0])*kx+dx;output[1]=(y0+=input[1])*ky+dy;while(j<n)output[j]=input[j],++j;return output}};var bbox=function(topology){var t=transform(topology.transform),key,x0=Infinity,y0=x0,x1=-x0,y1=-x0;function bboxPoint(p){p=t(p);if(p[0]<x0)x0=p[0];if(p[0]>x1)x1=p[0];if(p[1]<y0)y0=p[1];if(p[1]>y1)y1=p[1]}function bboxGeometry(o){switch(o.type){case"GeometryCollection":o.geometries.forEach(bboxGeometry);break;case"Point":bboxPoint(o.coordinates);break;case"MultiPoint":o.coordinates.forEach(bboxPoint);break}}topology.arcs.forEach((function(arc){var i=-1,n=arc.length,p;while(++i<n){p=t(arc[i],i);if(p[0]<x0)x0=p[0];if(p[0]>x1)x1=p[0];if(p[1]<y0)y0=p[1];if(p[1]>y1)y1=p[1]}}));for(key in topology.objects){bboxGeometry(topology.objects[key])}return[x0,y0,x1,y1]};var reverse=function(array,n){var t,j=array.length,i=j-n;while(i<--j)t=array[i],array[i++]=array[j],array[j]=t};var feature=function(topology,o){return o.type==="GeometryCollection"?{type:"FeatureCollection",features:o.geometries.map((function(o){return feature$1(topology,o)}))}:feature$1(topology,o)};function feature$1(topology,o){var id=o.id,bbox=o.bbox,properties=o.properties==null?{}:o.properties,geometry=object(topology,o);return id==null&&bbox==null?{type:"Feature",properties:properties,geometry:geometry}:bbox==null?{type:"Feature",id:id,properties:properties,geometry:geometry}:{type:"Feature",id:id,bbox:bbox,properties:properties,geometry:geometry}}function object(topology,o){var transformPoint=transform(topology.transform),arcs=topology.arcs;function arc(i,points){if(points.length)points.pop();for(var a=arcs[i<0?~i:i],k=0,n=a.length;k<n;++k){points.push(transformPoint(a[k],k))}if(i<0)reverse(points,n)}function point(p){return transformPoint(p)}function line(arcs){var points=[];for(var i=0,n=arcs.length;i<n;++i)arc(arcs[i],points);if(points.length<2)points.push(points[0]);return points}function ring(arcs){var points=line(arcs);while(points.length<4)points.push(points[0]);return points}function polygon(arcs){return arcs.map(ring)}function geometry(o){var type=o.type,coordinates;switch(type){case"GeometryCollection":return{type:type,geometries:o.geometries.map(geometry)};case"Point":coordinates=point(o.coordinates);break;case"MultiPoint":coordinates=o.coordinates.map(point);break;case"LineString":coordinates=line(o.arcs);break;case"MultiLineString":coordinates=o.arcs.map(line);break;case"Polygon":coordinates=polygon(o.arcs);break;case"MultiPolygon":coordinates=o.arcs.map(polygon);break;default:return null}return{type:type,coordinates:coordinates}}return geometry(o)}var stitch=function(topology,arcs){var stitchedArcs={},fragmentByStart={},fragmentByEnd={},fragments=[],emptyIndex=-1;arcs.forEach((function(i,j){var arc=topology.arcs[i<0?~i:i],t;if(arc.length<3&&!arc[1][0]&&!arc[1][1]){t=arcs[++emptyIndex],arcs[emptyIndex]=i,arcs[j]=t}}));arcs.forEach((function(i){var e=ends(i),start=e[0],end=e[1],f,g;if(f=fragmentByEnd[start]){delete fragmentByEnd[f.end];f.push(i);f.end=end;if(g=fragmentByStart[end]){delete fragmentByStart[g.start];var fg=g===f?f:f.concat(g);fragmentByStart[fg.start=f.start]=fragmentByEnd[fg.end=g.end]=fg}else{fragmentByStart[f.start]=fragmentByEnd[f.end]=f}}else if(f=fragmentByStart[end]){delete fragmentByStart[f.start];f.unshift(i);f.start=start;if(g=fragmentByEnd[start]){delete fragmentByEnd[g.end];var gf=g===f?f:g.concat(f);fragmentByStart[gf.start=g.start]=fragmentByEnd[gf.end=f.end]=gf}else{fragmentByStart[f.start]=fragmentByEnd[f.end]=f}}else{f=[i];fragmentByStart[f.start=start]=fragmentByEnd[f.end=end]=f}}));function ends(i){var arc=topology.arcs[i<0?~i:i],p0=arc[0],p1;if(topology.transform)p1=[0,0],arc.forEach((function(dp){p1[0]+=dp[0],p1[1]+=dp[1]}));else p1=arc[arc.length-1];return i<0?[p1,p0]:[p0,p1]}function flush(fragmentByEnd,fragmentByStart){for(var k in fragmentByEnd){var f=fragmentByEnd[k];delete fragmentByStart[f.start];delete f.start;delete f.end;f.forEach((function(i){stitchedArcs[i<0?~i:i]=1}));fragments.push(f)}}flush(fragmentByEnd,fragmentByStart);flush(fragmentByStart,fragmentByEnd);arcs.forEach((function(i){if(!stitchedArcs[i<0?~i:i])fragments.push([i])}));return fragments};var mesh=function(topology){return object(topology,meshArcs.apply(this,arguments))};function meshArcs(topology,object$$1,filter){var arcs,i,n;if(arguments.length>1)arcs=extractArcs(topology,object$$1,filter);else for(i=0,arcs=new Array(n=topology.arcs.length);i<n;++i)arcs[i]=i;return{type:"MultiLineString",arcs:stitch(topology,arcs)}}function extractArcs(topology,object$$1,filter){var arcs=[],geomsByArc=[],geom;function extract0(i){var j=i<0?~i:i;(geomsByArc[j]||(geomsByArc[j]=[])).push({i:i,g:geom})}function extract1(arcs){arcs.forEach(extract0)}function extract2(arcs){arcs.forEach(extract1)}function extract3(arcs){arcs.forEach(extract2)}function geometry(o){switch(geom=o,o.type){case"GeometryCollection":o.geometries.forEach(geometry);break;case"LineString":extract1(o.arcs);break;case"MultiLineString":case"Polygon":extract2(o.arcs);break;case"MultiPolygon":extract3(o.arcs);break}}geometry(object$$1);geomsByArc.forEach(filter==null?function(geoms){arcs.push(geoms[0].i)}:function(geoms){if(filter(geoms[0].g,geoms[geoms.length-1].g))arcs.push(geoms[0].i)});return arcs}function planarRingArea(ring){var i=-1,n=ring.length,a,b=ring[n-1],area=0;while(++i<n)a=b,b=ring[i],area+=a[0]*b[1]-a[1]*b[0];return Math.abs(area)}var merge=function(topology){return object(topology,mergeArcs.apply(this,arguments))};function mergeArcs(topology,objects){var polygonsByArc={},polygons=[],groups=[];objects.forEach(geometry);function geometry(o){switch(o.type){case"GeometryCollection":o.geometries.forEach(geometry);break;case"Polygon":extract(o.arcs);break;case"MultiPolygon":o.arcs.forEach(extract);break}}function extract(polygon){polygon.forEach((function(ring){ring.forEach((function(arc){(polygonsByArc[arc=arc<0?~arc:arc]||(polygonsByArc[arc]=[])).push(polygon)}))}));polygons.push(polygon)}function area(ring){return planarRingArea(object(topology,{type:"Polygon",arcs:[ring]}).coordinates[0])}polygons.forEach((function(polygon){if(!polygon._){var group=[],neighbors=[polygon];polygon._=1;groups.push(group);while(polygon=neighbors.pop()){group.push(polygon);polygon.forEach((function(ring){ring.forEach((function(arc){polygonsByArc[arc<0?~arc:arc].forEach((function(polygon){if(!polygon._){polygon._=1;neighbors.push(polygon)}}))}))}))}}}));polygons.forEach((function(polygon){delete polygon._}));return{type:"MultiPolygon",arcs:groups.map((function(polygons){var arcs=[],n;polygons.forEach((function(polygon){polygon.forEach((function(ring){ring.forEach((function(arc){if(polygonsByArc[arc<0?~arc:arc].length<2){arcs.push(arc)}}))}))}));arcs=stitch(topology,arcs);if((n=arcs.length)>1){for(var i=1,k=area(arcs[0]),ki,t;i<n;++i){if((ki=area(arcs[i]))>k){t=arcs[0],arcs[0]=arcs[i],arcs[i]=t,k=ki}}}return arcs}))}}var bisect=function(a,x){var lo=0,hi=a.length;while(lo<hi){var mid=lo+hi>>>1;if(a[mid]<x)lo=mid+1;else hi=mid}return lo};var neighbors=function(objects){var indexesByArc={},neighbors=objects.map((function(){return[]}));function line(arcs,i){arcs.forEach((function(a){if(a<0)a=~a;var o=indexesByArc[a];if(o)o.push(i);else indexesByArc[a]=[i]}))}function polygon(arcs,i){arcs.forEach((function(arc){line(arc,i)}))}function geometry(o,i){if(o.type==="GeometryCollection")o.geometries.forEach((function(o){geometry(o,i)}));else if(o.type in geometryType)geometryType[o.type](o.arcs,i)}var geometryType={LineString:line,MultiLineString:polygon,Polygon:polygon,MultiPolygon:function(arcs,i){arcs.forEach((function(arc){polygon(arc,i)}))}};objects.forEach(geometry);for(var i in indexesByArc){for(var indexes=indexesByArc[i],m=indexes.length,j=0;j<m;++j){for(var k=j+1;k<m;++k){var ij=indexes[j],ik=indexes[k],n;if((n=neighbors[ij])[i=bisect(n,ik)]!==ik)n.splice(i,0,ik);if((n=neighbors[ik])[i=bisect(n,ij)]!==ij)n.splice(i,0,ij)}}}return neighbors};var untransform=function(transform){if(transform==null)return identity;var x0,y0,kx=transform.scale[0],ky=transform.scale[1],dx=transform.translate[0],dy=transform.translate[1];return function(input,i){if(!i)x0=y0=0;var j=2,n=input.length,output=new Array(n),x1=Math.round((input[0]-dx)/kx),y1=Math.round((input[1]-dy)/ky);output[0]=x1-x0,x0=x1;output[1]=y1-y0,y0=y1;while(j<n)output[j]=input[j],++j;return output}};var quantize=function(topology,transform){if(topology.transform)throw new Error("already quantized");if(!transform||!transform.scale){if(!((n=Math.floor(transform))>=2))throw new Error("n must be ≥2");box=topology.bbox||bbox(topology);var x0=box[0],y0=box[1],x1=box[2],y1=box[3],n;transform={scale:[x1-x0?(x1-x0)/(n-1):1,y1-y0?(y1-y0)/(n-1):1],translate:[x0,y0]}}else{box=topology.bbox}var t=untransform(transform),box,key,inputs=topology.objects,outputs={};function quantizePoint(point){return t(point)}function quantizeGeometry(input){var output;switch(input.type){case"GeometryCollection":output={type:"GeometryCollection",geometries:input.geometries.map(quantizeGeometry)};break;case"Point":output={type:"Point",coordinates:quantizePoint(input.coordinates)};break;case"MultiPoint":output={type:"MultiPoint",coordinates:input.coordinates.map(quantizePoint)};break;default:return input}if(input.id!=null)output.id=input.id;if(input.bbox!=null)output.bbox=input.bbox;if(input.properties!=null)output.properties=input.properties;return output}function quantizeArc(input){var i=0,j=1,n=input.length,p,output=new Array(n);output[0]=t(input[0],0);while(++i<n)if((p=t(input[i],i))[0]||p[1])output[j++]=p;if(j===1)output[j++]=[0,0];output.length=j;return output}for(key in inputs)outputs[key]=quantizeGeometry(inputs[key]);return{type:"Topology",bbox:box,transform:transform,objects:outputs,arcs:topology.arcs.map(quantizeArc)}};exports.bbox=bbox;exports.feature=feature;exports.mesh=mesh;exports.meshArcs=meshArcs;exports.merge=merge;exports.mergeArcs=mergeArcs;exports.neighbors=neighbors;exports.quantize=quantize;exports.transform=transform;exports.untransform=untransform;Object.defineProperty(exports,"__esModule",{value:true})}))},function(module,exports,__webpack_require__){var v1=__webpack_require__(303);var v4=__webpack_require__(14);var uuid=v4;uuid.v1=v1;uuid.v4=v4;module.exports=uuid},function(module,exports,__webpack_require__){var rng=__webpack_require__(22);var bytesToUuid=__webpack_require__(23);var _nodeId;var _clockseq;var _lastMSecs=0;var _lastNSecs=0;function v1(options,buf,offset){var i=buf&&offset||0;var b=buf||[];options=options||{};var node=options.node||_nodeId;var clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;if(node==null||clockseq==null){var seedBytes=rng();if(node==null){node=_nodeId=[seedBytes[0]|1,seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]}if(clockseq==null){clockseq=_clockseq=(seedBytes[6]<<8|seedBytes[7])&16383}}var msecs=options.msecs!==undefined?options.msecs:(new Date).getTime();var nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1;var dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&options.clockseq===undefined){clockseq=clockseq+1&16383}if((dt<0||msecs>_lastMSecs)&&options.nsecs===undefined){nsecs=0}if(nsecs>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}_lastMSecs=msecs;_lastNSecs=nsecs;_clockseq=clockseq;msecs+=122192928e5;var tl=((msecs&268435455)*1e4+nsecs)%4294967296;b[i++]=tl>>>24&255;b[i++]=tl>>>16&255;b[i++]=tl>>>8&255;b[i++]=tl&255;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255;b[i++]=tmh&255;b[i++]=tmh>>>24&15|16;b[i++]=tmh>>>16&255;b[i++]=clockseq>>>8|128;b[i++]=clockseq&255;for(var n=0;n<6;++n){b[i+n]=node[n]}return buf?buf:bytesToUuid(b)}module.exports=v1},function(module,exports,__webpack_require__){!function(t,e){true?module.exports=e():undefined}(this,(function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}var e=t((function(t){function e(t){return!i(t)}function i(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(i);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var i=e.getImageData(0,0,1,1);return i&&i.width===t.width}()?(void 0===r[i=t&&t.failIfMajorPerformanceCaveat]&&(r[i]=function(t){var i=function(t){var i=document.createElement("canvas"),r=Object.create(e.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,i.probablySupportsContext?i.probablySupportsContext("webgl",r)||i.probablySupportsContext("experimental-webgl",r):i.supportsContext?i.supportsContext("webgl",r)||i.supportsContext("experimental-webgl",r):i.getContext("webgl",r)||i.getContext("experimental-webgl",r)}(t);if(!i)return!1;var r=i.createShader(i.VERTEX_SHADER);return!(!r||i.isContextLost())&&(i.shaderSource(r,"void main() {}"),i.compileShader(r),!0===i.getShaderParameter(r,i.COMPILE_STATUS))}(i)),r[i]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var i}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e,window.mapboxgl.notSupportedReason=i);var r={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),i=r;function r(t,e,i,r){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=i,this.p2y=r}r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){var i,r,n,o,a;for(void 0===e&&(e=1e-6),n=t,a=0;a<8;a++){if(o=this.sampleCurveX(n)-t,Math.abs(o)<e)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n-=o/s}if((n=t)<(i=0))return i;if(n>(r=1))return r;for(;i<r;){if(o=this.sampleCurveX(n),Math.abs(o-t)<e)return n;t>o?i=n:r=n,n=.5*(r-i)+i}return n},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var n=o;function o(t,e){this.x=t,this.y=e}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=r,this},_rotateAround:function(t,e){var i=Math.cos(t),r=Math.sin(t),n=e.y+r*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-r*(this.y-e.y),this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var a="undefined"!=typeof self?self:{};function s(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!s(t[i],e[i]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(!s(t[r],e[r]))return!1;return!0}return t===e}var u=Math.pow(2,53)-1;function l(t,e,r,n){var o=new i(t,e,r,n);return function(t){return o.solve(t)}}var c=l(.25,.1,.25,1);function p(t,e,i){return Math.min(i,Math.max(e,t))}function h(t,e,i){var r=i-e,n=((t-e)%r+r)%r+e;return n===e?i:n}function f(t,e,i){if(!t.length)return i(null,[]);var r=t.length,n=new Array(t.length),o=null;t.forEach((function(t,a){e(t,(function(t,e){t&&(o=t),n[a]=e,0==--r&&i(o,n)}))}))}function d(t){var e=[];for(var i in t)e.push(t[i]);return e}function m(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var r=0,n=e;r<n.length;r+=1){var o=n[r];for(var a in o)t[a]=o[a]}return t}function y(t,e){for(var i={},r=0;r<e.length;r++){var n=e[r];n in t&&(i[n]=t[n])}return i}var _=1;function g(){return _++}function v(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function x(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function b(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function w(t,e){return-1!==t.indexOf(e,t.length-e.length)}function I(t,e,i){var r={};for(var n in t)r[n]=e.call(i||this,t[n],n,t);return r}function S(t,e,i){var r={};for(var n in t)e.call(i||this,t[n],n,t)&&(r[n]=t[n]);return r}function T(t){return Array.isArray(t)?t.map(T):"object"==typeof t&&t?I(t,T):t}var z={};function A(t){z[t]||("undefined"!=typeof console&&console.warn(t),z[t]=!0)}function E(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}function k(t){for(var e=0,i=0,r=t.length,n=r-1,o=void 0,a=void 0;i<r;n=i++)e+=((a=t[n]).x-(o=t[i]).x)*(o.y+a.y);return e}function C(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function P(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,i,r,n){var o=r||n;return e[i]=!o||o.toLowerCase(),""})),e["max-age"]){var i=parseInt(e["max-age"],10);isNaN(i)?delete e["max-age"]:e["max-age"]=i}return e}var D=null;function M(t){if(null==D){var e=t.navigator?t.navigator.userAgent:null;D=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return D}function L(t){try{var e=a[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var B,R,F=a.performance&&a.performance.now?a.performance.now.bind(a.performance):Date.now.bind(Date),O=a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||a.msRequestAnimationFrame,V=a.cancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelAnimationFrame||a.msCancelAnimationFrame,U={now:F,frame:function(t){var e=O(t);return{cancel:function(){return V(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var i=a.document.createElement("canvas"),r=i.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return i.width=t.width,i.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return B||(B=a.document.createElement("a")),B.href=t,B.href},hardwareConcurrency:a.navigator&&a.navigator.hardwareConcurrency||4,get devicePixelRatio(){return a.devicePixelRatio},get prefersReducedMotion(){return!!a.matchMedia&&(null==R&&(R=a.matchMedia("(prefers-reduced-motion: reduce)")),R.matches)}},j={create:function(t,e,i){var r=a.document.createElement(t);return void 0!==e&&(r.className=e),i&&i.appendChild(r),r},createNS:function(t,e){return a.document.createElementNS(t,e)}},N=a.document&&a.document.documentElement.style;function q(t){if(!N)return t[0];for(var e=0;e<t.length;e++)if(t[e]in N)return t[e];return t[0]}var Z,G=q(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);j.disableDrag=function(){N&&G&&(Z=N[G],N[G]="none")},j.enableDrag=function(){N&&G&&(N[G]=Z)};var X=q(["transform","WebkitTransform"]);j.setTransform=function(t,e){t.style[X]=e};var W=!1;try{var H=Object.defineProperty({},"passive",{get:function(){W=!0}});a.addEventListener("test",H,H),a.removeEventListener("test",H,H)}catch(t){W=!1}j.addEventListener=function(t,e,i,r){void 0===r&&(r={}),t.addEventListener(e,i,"passive"in r&&W?r:r.capture)},j.removeEventListener=function(t,e,i,r){void 0===r&&(r={}),t.removeEventListener(e,i,"passive"in r&&W?r:r.capture)};var K=function(t){t.preventDefault(),t.stopPropagation(),a.removeEventListener("click",K,!0)};j.suppressClick=function(){a.addEventListener("click",K,!0),a.setTimeout((function(){a.removeEventListener("click",K,!0)}),0)},j.mousePos=function(t,e){var i=t.getBoundingClientRect();return new n(e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop)},j.touchPos=function(t,e){for(var i=t.getBoundingClientRect(),r=[],o=0;o<e.length;o++)r.push(new n(e[o].clientX-i.left-t.clientLeft,e[o].clientY-i.top-t.clientTop));return r},j.mouseButton=function(t){return void 0!==a.InstallTrigger&&2===t.button&&t.ctrlKey&&a.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button},j.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var Y,J,Q={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},$={supported:!1,testSupport:function(t){!tt&&J&&(et?it(t):Y=t)}},tt=!1,et=!1;function it(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,J),t.isContextLost())return;$.supported=!0}catch(t){}t.deleteTexture(e),tt=!0}a.document&&((J=a.document.createElement("img")).onload=function(){Y&&it(Y),Y=null,et=!0},J.onerror=function(){tt=!0,Y=null},J.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var rt="01",nt=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function ot(t){return 0===t.indexOf("mapbox:")}nt.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",rt,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},nt.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},nt.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},nt.prototype.normalizeStyleURL=function(t,e){if(!ot(t))return t;var i=lt(t);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},nt.prototype.normalizeGlyphsURL=function(t,e){if(!ot(t))return t;var i=lt(t);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},nt.prototype.normalizeSourceURL=function(t,e){if(!ot(t))return t;var i=lt(t);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||e)},nt.prototype.normalizeSpriteURL=function(t,e,i,r){var n=lt(t);return ot(t)?(n.path="/styles/v1"+n.path+"/sprite"+e+i,this._makeAPIURL(n,this._customAccessToken||r)):(n.path+=""+e+i,ct(n))},nt.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!ot(t))return t;var i=lt(t);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(U.devicePixelRatio>=2||512===e?"@2x":"")+($.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var r=this._customAccessToken||function(t){for(var e=0,i=t;e<i.length;e+=1){var r=i[e].match(/^access_token=(.*)$/);if(r)return r[1]}return null}(i.params)||Q.ACCESS_TOKEN;return Q.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,r)},nt.prototype.canonicalizeTileURL=function(t,e){var i=lt(t);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return t;var r="mapbox://tiles/";r+=i.path.replace("/v4/","");var n=i.params;return e&&(n=n.filter((function(t){return!t.match(/^access_token=/)}))),n.length&&(r+="?"+n.join("&")),r},nt.prototype.canonicalizeTileset=function(t,e){for(var i=!!e&&ot(e),r=[],n=0,o=t.tiles||[];n<o.length;n+=1){var a=o[n];st(a)?r.push(this.canonicalizeTileURL(a,i)):r.push(a)}return r},nt.prototype._makeAPIURL=function(t,e){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=lt(Q.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"/"!==r.path&&(t.path=""+r.path+t.path),!Q.REQUIRE_ACCESS_TOKEN)return ct(t);if(!(e=e||Q.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return t.params=t.params.filter((function(t){return-1===t.indexOf("access_token")})),t.params.push("access_token="+e),ct(t)};var at=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function st(t){return at.test(t)}var ut=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function lt(t){var e=t.match(ut);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function ct(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function pt(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(a.atob(e[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return null}}var ht=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ht.prototype.getStorageKey=function(t){var e,i=pt(Q.ACCESS_TOKEN);return e=i&&i.u?a.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))}))):Q.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},ht.prototype.fetchEventData=function(){var t=L("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{var r=a.localStorage.getItem(e);r&&(this.eventData=JSON.parse(r));var n=a.localStorage.getItem(i);n&&(this.anonId=n)}catch(t){A("Unable to read from LocalStorage")}},ht.prototype.saveEventData=function(){var t=L("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{a.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&a.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){A("Unable to write to LocalStorage")}},ht.prototype.processRequests=function(t){},ht.prototype.postEvent=function(t,e,i,r){var n=this;if(Q.EVENTS_URL){var o=lt(Q.EVENTS_URL);o.params.push("access_token="+(r||Q.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.12.0",skuId:rt,userId:this.anonId},s=e?m(a,e):a,u={url:ct(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=Rt(u,(function(t){n.pendingRequest=null,i(t),n.saveEventData(),n.processRequests(r)}))}},ht.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var ft,dt,mt=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e,i,r){this.skuToken=i,(Q.EVENTS_URL&&r||Q.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return ot(t)||st(t)})))&&this.queueRequest({id:e,timestamp:Date.now()},r)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var i=this.queue.shift(),r=i.id,n=i.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),x(this.anonId)||(this.anonId=v()),this.postEvent(n,{skuToken:this.skuToken},(function(t){t||r&&(e.success[r]=!0)}),t))}},e}(ht),yt=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t,e){Q.EVENTS_URL&&Q.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return ot(t)||st(t)}))&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var i=pt(Q.ACCESS_TOKEN),r=i?i.u:Q.ACCESS_TOKEN,n=r!==this.eventData.tokenU;x(this.anonId)||(this.anonId=v(),n=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),u=(o-this.eventData.lastSuccess)/864e5;n=n||u>=1||u<-1||a.getDate()!==s.getDate()}else n=!0;if(!n)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},(function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=r)}),t)}},e}(ht)),_t=yt.postTurnstileEvent.bind(yt),gt=new mt,vt=gt.postMapLoadEvent.bind(gt),xt=500,bt=50;function wt(){a.caches&&!ft&&(ft=a.caches.open("mapbox-tiles"))}function It(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var St,Tt=1/0;function zt(t){++Tt>bt&&(t.getActor().send("enforceCacheSizeLimit",xt),Tt=0)}function At(){return null==St&&(St=a.OffscreenCanvas&&new a.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof a.createImageBitmap),St}var Et={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Et);var kt=function(t){function e(e,i,r){401===i&&st(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=i,this.url=r,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),Ct=C()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===a.location.protocol?a.parent:a).location.href};var Pt,Dt,Mt=function(t,e){if(!(/^file:/.test(i=t.url)||/^file:/.test(Ct())&&!/^\w+:/.test(i))){if(a.fetch&&a.Request&&a.AbortController&&a.Request.prototype.hasOwnProperty("signal"))return function(t,e){var i,r=new a.AbortController,n=new a.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:Ct(),signal:r.signal}),o=!1,s=!1,u=(i=n.url).indexOf("sku=")>0&&st(i);"json"===t.type&&n.headers.set("Accept","application/json");var l=function(i,r,o){if(!s){if(i&&"SecurityError"!==i.message&&A(i),r&&o)return c(r);var l=Date.now();a.fetch(n).then((function(i){if(i.ok){var r=u?i.clone():null;return c(i,r,l)}return e(new kt(i.statusText,i.status,t.url))})).catch((function(t){20!==t.code&&e(new Error(t.message))}))}},c=function(i,r,u){("arrayBuffer"===t.type?i.arrayBuffer():"json"===t.type?i.json():i.text()).then((function(t){s||(r&&u&&function(t,e,i){if(wt(),ft){var r={status:e.status,statusText:e.statusText,headers:new a.Headers};e.headers.forEach((function(t,e){return r.headers.set(e,t)}));var n=P(e.headers.get("Cache-Control")||"");n["no-store"]||(n["max-age"]&&r.headers.set("Expires",new Date(i+1e3*n["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-i<42e4||function(t,e){if(void 0===dt)try{new Response(new ReadableStream),dt=!0}catch(t){dt=!1}dt?e(t.body):t.blob().then(e)}(e,(function(e){var i=new a.Response(e,r);wt(),ft&&ft.then((function(e){return e.put(It(t.url),i)})).catch((function(t){return A(t.message)}))})))}}(n,r,u),o=!0,e(null,t,i.headers.get("Cache-Control"),i.headers.get("Expires")))})).catch((function(t){s||e(new Error(t.message))}))};return u?function(t,e){if(wt(),!ft)return e(null);var i=It(t.url);ft.then((function(t){t.match(i).then((function(r){var n=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),i=P(t.headers.get("Cache-Control")||"");return e>Date.now()&&!i["no-cache"]}(r);t.delete(i),n&&t.put(i,r.clone()),e(null,r,n)})).catch(e)})).catch(e)}(n,l):l(null,null),{cancel:function(){s=!0,o||r.abort()}}}(t,e);if(C()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var i;return function(t,e){var i=new a.XMLHttpRequest;for(var r in i.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(i.responseType="arraybuffer"),t.headers)i.setRequestHeader(r,t.headers[r]);return"json"===t.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===t.credentials,i.onerror=function(){e(new Error(i.statusText))},i.onload=function(){if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){var r=i.response;if("json"===t.type)try{r=JSON.parse(i.response)}catch(t){return e(t)}e(null,r,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else e(new kt(i.statusText,i.status,t.url))},i.send(t.body),{cancel:function(){return i.abort()}}}(t,e)},Lt=function(t,e){return Mt(m(t,{type:"json"}),e)},Bt=function(t,e){return Mt(m(t,{type:"arrayBuffer"}),e)},Rt=function(t,e){return Mt(m(t,{method:"POST"}),e)};Pt=[],Dt=0;var Ft=function(t,e){if($.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Dt>=Q.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return Pt.push(i),i}Dt++;var r=!1,n=function(){if(!r)for(r=!0,Dt--;Pt.length&&Dt<Q.MAX_PARALLEL_IMAGE_REQUESTS;){var t=Pt.shift();t.cancelled||(t.cancel=Ft(t.requestParameters,t.callback).cancel)}},o=Bt(t,(function(t,i,r,o){n(),t?e(t):i&&(At()?function(t,e){var i=new a.Blob([new Uint8Array(t)],{type:"image/png"});a.createImageBitmap(i).then((function(t){e(null,t)})).catch((function(t){e(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(i,e):function(t,e,i,r){var n=new a.Image,o=a.URL;n.onload=function(){e(null,n),o.revokeObjectURL(n.src)},n.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var s=new a.Blob([new Uint8Array(t)],{type:"image/png"});n.cacheControl=i,n.expires=r,n.src=t.byteLength?o.createObjectURL(s):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(i,e,r,o))}));return{cancel:function(){o.cancel(),n()}}};function Ot(t,e,i){i[t]&&-1!==i[t].indexOf(e)||(i[t]=i[t]||[],i[t].push(e))}function Vt(t,e,i){if(i&&i[t]){var r=i[t].indexOf(e);-1!==r&&i[t].splice(r,1)}}var Ut=function(t,e){void 0===e&&(e={}),m(this,e),this.type=t},jt=function(t){function e(e,i){void 0===i&&(i={}),t.call(this,"error",m({error:e},i))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Ut),Nt=function(){};Nt.prototype.on=function(t,e){return this._listeners=this._listeners||{},Ot(t,e,this._listeners),this},Nt.prototype.off=function(t,e){return Vt(t,e,this._listeners),Vt(t,e,this._oneTimeListeners),this},Nt.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},Ot(t,e,this._oneTimeListeners),this},Nt.prototype.fire=function(t,e){"string"==typeof t&&(t=new Ut(t,e||{}));var i=t.type;if(this.listens(i)){t.target=this;for(var r=0,n=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];r<n.length;r+=1)n[r].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];o<a.length;o+=1){var s=a[o];Vt(i,s,this._oneTimeListeners),s.call(this,t)}var u=this._eventedParent;u&&(m(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(t))}else t instanceof jt&&console.error(t.error);return this},Nt.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},Nt.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var qt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Zt=function(t,e,i,r){this.message=(t?t+": ":"")+i,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)};function Gt(t){var e=t.value;return e?[new Zt(t.key,e,"constants have been deprecated as of v8")]:[]}function Xt(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var r=0,n=e;r<n.length;r+=1){var o=n[r];for(var a in o)t[a]=o[a]}return t}function Wt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Ht(t){if(Array.isArray(t))return t.map(Ht);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var i in t)e[i]=Ht(t[i]);return e}return Wt(t)}var Kt=function(t){function e(e,i){t.call(this,i),this.message=i,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Yt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var i=0,r=e;i<r.length;i+=1){var n=r[i];this.bindings[n[0]]=n[1]}};Yt.prototype.concat=function(t){return new Yt(this,t)},Yt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Yt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Jt={kind:"null"},Qt={kind:"number"},$t={kind:"string"},te={kind:"boolean"},ee={kind:"color"},ie={kind:"object"},re={kind:"value"},ne={kind:"collator"},oe={kind:"formatted"},ae={kind:"resolvedImage"};function se(t,e){return{kind:"array",itemType:t,N:e}}function ue(t){if("array"===t.kind){var e=ue(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var le=[Jt,Qt,$t,te,ee,oe,ie,se(re),ae];function ce(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!ce(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var i=0,r=le;i<r.length;i+=1)if(!ce(r[i],e))return null}return"Expected "+ue(t)+" but found "+ue(e)+" instead."}function pe(t,e){return e.some((function(e){return e.kind===t.kind}))}function he(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t}))}var fe=t((function(t,e){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function n(t){return r("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function a(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in i)return i[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=s.indexOf("("),l=s.indexOf(")");if(-1!==u&&l+1===s.length){var c=s.substr(0,u),p=s.substr(u+1,l-(u+1)).split(","),h=1;switch(c){case"rgba":if(4!==p.length)return null;h=o(p.pop());case"rgb":return 3!==p.length?null:[n(p[0]),n(p[1]),n(p[2]),h];case"hsla":if(4!==p.length)return null;h=o(p.pop());case"hsl":if(3!==p.length)return null;var f=(parseFloat(p[0])%360+360)%360/360,d=o(p[1]),m=o(p[2]),y=m<=.5?m*(d+1):m+d-m*d,_=2*m-y;return[r(255*a(_,y,f+1/3)),r(255*a(_,y,f)),r(255*a(_,y,f-1/3)),h];default:return null}}return null}}catch(t){}})).parseCSSColor,de=function(t,e,i,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=i,this.a=r};de.parse=function(t){if(t){if(t instanceof de)return t;if("string"==typeof t){var e=fe(t);if(e)return new de(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},de.prototype.toString=function(){var t=this.toArray(),e=t[1],i=t[2],r=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(i)+","+r+")"},de.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},de.black=new de(0,0,0,1),de.white=new de(1,1,1,1),de.transparent=new de(0,0,0,0),de.red=new de(1,0,0,1);var me=function(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};me.prototype.compare=function(t,e){return this.collator.compare(t,e)},me.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ye=function(t,e,i,r,n){this.text=t,this.image=e,this.scale=i,this.fontStack=r,this.textColor=n},_e=function(t){this.sections=t};_e.fromString=function(t){return new _e([new ye(t,null,null,null,null)])},_e.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},_e.factory=function(t){return t instanceof _e?t:_e.fromString(t)},_e.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},_e.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var r=i[e];if(r.image)t.push(["image",r.image.name]);else{t.push(r.text);var n={};r.fontStack&&(n["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(n["font-scale"]=r.scale),r.textColor&&(n["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(n)}}return t};var ge=function(t){this.name=t.name,this.available=t.available};function ve(t,e,i,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,i,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,i,r]:[t,e,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function xe(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof de)return!0;if(t instanceof me)return!0;if(t instanceof _e)return!0;if(t instanceof ge)return!0;if(Array.isArray(t)){for(var e=0,i=t;e<i.length;e+=1)if(!xe(i[e]))return!1;return!0}if("object"==typeof t){for(var r in t)if(!xe(t[r]))return!1;return!0}return!1}function be(t){if(null===t)return Jt;if("string"==typeof t)return $t;if("boolean"==typeof t)return te;if("number"==typeof t)return Qt;if(t instanceof de)return ee;if(t instanceof me)return ne;if(t instanceof _e)return oe;if(t instanceof ge)return ae;if(Array.isArray(t)){for(var e,i=t.length,r=0,n=t;r<n.length;r+=1){var o=be(n[r]);if(e){if(e===o)continue;e=re;break}e=o}return se(e||re,i)}return ie}function we(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof de||t instanceof _e||t instanceof ge?t.toString():JSON.stringify(t)}ge.prototype.toString=function(){return this.name},ge.fromString=function(t){return t?new ge({name:t,available:!1}):null},ge.prototype.serialize=function(){return["image",this.name]};var Ie=function(t,e){this.type=t,this.value=e};Ie.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!xe(t[1]))return e.error("invalid value");var i=t[1],r=be(i),n=e.expectedType;return"array"!==r.kind||0!==r.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(r=n),new Ie(r,i)},Ie.prototype.evaluate=function(){return this.value},Ie.prototype.eachChild=function(){},Ie.prototype.outputDefined=function(){return!0},Ie.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof de?["rgba"].concat(this.value.toArray()):this.value instanceof _e?this.value.serialize():this.value};var Se=function(t){this.name="ExpressionEvaluationError",this.message=t};Se.prototype.toJSON=function(){return this.message};var Te={string:$t,number:Qt,boolean:te,object:ie},ze=function(t,e){this.type=t,this.args=e};ze.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i,r=1,n=t[0];if("array"===n){var o,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in Te)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=Te[s],r++}else o=re;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],r++}i=se(o,a)}else i=Te[n];for(var u=[];r<t.length;r++){var l=e.parse(t[r],r,re);if(!l)return null;u.push(l)}return new ze(i,u)},ze.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var i=this.args[e].evaluate(t);if(!ce(this.type,be(i)))return i;if(e===this.args.length-1)throw new Se("Expected value to be of type "+ue(this.type)+", but found "+ue(be(i))+" instead.")}return null},ze.prototype.eachChild=function(t){this.args.forEach(t)},ze.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},ze.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){e.push(i.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map((function(t){return t.serialize()})))};var Ae=function(t){this.type=oe,this.sections=t};Ae.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");for(var r=[],n=!1,o=1;o<=t.length-1;++o){var a=t[o];if(n&&"object"==typeof a&&!Array.isArray(a)){n=!1;var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,Qt)))return null;var u=null;if(a["text-font"]&&!(u=e.parse(a["text-font"],1,se($t))))return null;var l=null;if(a["text-color"]&&!(l=e.parse(a["text-color"],1,ee)))return null;var c=r[r.length-1];c.scale=s,c.font=u,c.textColor=l}else{var p=e.parse(t[o],1,re);if(!p)return null;var h=p.type.kind;if("string"!==h&&"value"!==h&&"null"!==h&&"resolvedImage"!==h)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,r.push({content:p,scale:null,font:null,textColor:null})}}return new Ae(r)},Ae.prototype.evaluate=function(t){return new _e(this.sections.map((function(e){var i=e.content.evaluate(t);return be(i)===ae?new ye("",i,null,null,null):new ye(we(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))},Ae.prototype.eachChild=function(t){for(var e=0,i=this.sections;e<i.length;e+=1){var r=i[e];t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}},Ae.prototype.outputDefined=function(){return!1},Ae.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var r=i[e];t.push(r.content.serialize());var n={};r.scale&&(n["font-scale"]=r.scale.serialize()),r.font&&(n["text-font"]=r.font.serialize()),r.textColor&&(n["text-color"]=r.textColor.serialize()),t.push(n)}return t};var Ee=function(t){this.type=ae,this.input=t};Ee.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,$t);return i?new Ee(i):e.error("No image name provided.")},Ee.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=ge.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i},Ee.prototype.eachChild=function(t){t(this.input)},Ee.prototype.outputDefined=function(){return!1},Ee.prototype.serialize=function(){return["image",this.input.serialize()]};var ke={"to-boolean":te,"to-color":ee,"to-number":Qt,"to-string":$t},Ce=function(t,e){this.type=t,this.args=e};Ce.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");for(var r=ke[i],n=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,re);if(!a)return null;n.push(a)}return new Ce(r,n)},Ce.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,i,r=0,n=this.args;r<n.length;r+=1){if(i=null,(e=n[r].evaluate(t))instanceof de)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(i=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":ve(e[0],e[1],e[2],e[3])))return new de(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Se(i||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,u=this.args;s<u.length;s+=1){if(null===(a=u[s].evaluate(t)))return 0;var l=Number(a);if(!isNaN(l))return l}throw new Se("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?_e.fromString(we(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?ge.fromString(we(this.args[0].evaluate(t))):we(this.args[0].evaluate(t))},Ce.prototype.eachChild=function(t){this.args.forEach(t)},Ce.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},Ce.prototype.serialize=function(){if("formatted"===this.type.kind)return new Ae([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ee(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var Pe=["Unknown","Point","LineString","Polygon"],De=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};De.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},De.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Pe[this.feature.type]:this.feature.type:null},De.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},De.prototype.canonicalID=function(){return this.canonical},De.prototype.properties=function(){return this.feature&&this.feature.properties||{}},De.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=de.parse(t)),e};var Me=function(t,e,i,r){this.name=t,this.type=e,this._evaluate=i,this.args=r};Me.prototype.evaluate=function(t){return this._evaluate(t,this.args)},Me.prototype.eachChild=function(t){this.args.forEach(t)},Me.prototype.outputDefined=function(){return!1},Me.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},Me.parse=function(t,e){var i,r=t[0],n=Me.definitions[r];if(!n)return e.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(n)?n[0]:n.type,a=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,s=a.filter((function(e){var i=e[0];return!Array.isArray(i)||i.length===t.length-1})),u=null,l=0,c=s;l<c.length;l+=1){var p=c[l],h=p[0],f=p[1];u=new ei(e.registry,e.path,null,e.scope);for(var d=[],m=!1,y=1;y<t.length;y++){var _=t[y],g=Array.isArray(h)?h[y-1]:h.type,v=u.parse(_,1+d.length,g);if(!v){m=!0;break}d.push(v)}if(!m)if(Array.isArray(h)&&h.length!==d.length)u.error("Expected "+h.length+" arguments, but found "+d.length+" instead.");else{for(var x=0;x<d.length;x++){var b=Array.isArray(h)?h[x]:h.type,w=d[x];u.concat(x+1).checkSubtype(b,w.type)}if(0===u.errors.length)return new Me(r,o,f,d)}}if(1===s.length)(i=e.errors).push.apply(i,u.errors);else{for(var I=(s.length?s:a).map((function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(ue).join(", ")+")":"("+ue(e.type)+"...)"})).join(" | "),S=[],T=1;T<t.length;T++){var z=e.parse(t[T],1+S.length);if(!z)return null;S.push(ue(z.type))}e.error("Expected arguments of type "+I+", but found ("+S.join(", ")+") instead.")}return null},Me.register=function(t,e){for(var i in Me.definitions=e,e)t[i]=Me};var Le=function(t,e,i){this.type=ne,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e};function Be(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Re(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Fe(t,e){var i=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,n=Math.pow(2,e.z);return[Math.round(i*n*8192),Math.round(r*n*8192)]}function Oe(t,e,i){return e[1]>t[1]!=i[1]>t[1]&&t[0]<(i[0]-e[0])*(t[1]-e[1])/(i[1]-e[1])+e[0]}function Ve(t,e){for(var i,r,n,o,a,s,u,l=!1,c=0,p=e.length;c<p;c++)for(var h=e[c],f=0,d=h.length;f<d-1;f++){if((o=(i=t)[0]-(r=h[f])[0])*(u=i[1]-(n=h[f+1])[1])-(s=i[0]-n[0])*(a=i[1]-r[1])==0&&o*s<=0&&a*u<=0)return!1;Oe(t,h[f],h[f+1])&&(l=!l)}return l}function Ue(t,e){for(var i=0;i<e.length;i++)if(Ve(t,e[i]))return!0;return!1}function je(t,e,i,r){var n=r[0]-i[0],o=r[1]-i[1],a=(t[0]-i[0])*o-n*(t[1]-i[1]),s=(e[0]-i[0])*o-n*(e[1]-i[1]);return a>0&&s<0||a<0&&s>0}function Ne(t,e,i){for(var r=0,n=i;r<n.length;r+=1)for(var o=n[r],a=0;a<o.length-1;++a)if(0!=(p=[(c=o[a+1])[0]-(l=o[a])[0],c[1]-l[1]])[0]*(h=[(u=e)[0]-(s=t)[0],u[1]-s[1]])[1]-p[1]*h[0]&&je(s,u,l,c)&&je(l,c,s,u))return!0;var s,u,l,c,p,h;return!1}function qe(t,e){for(var i=0;i<t.length;++i)if(!Ve(t[i],e))return!1;for(var r=0;r<t.length-1;++r)if(Ne(t[r],t[r+1],e))return!1;return!0}function Ze(t,e){for(var i=0;i<e.length;i++)if(qe(t,e[i]))return!0;return!1}function Ge(t,e,i){for(var r=[],n=0;n<t.length;n++){for(var o=[],a=0;a<t[n].length;a++){var s=Fe(t[n][a],i);Be(e,s),o.push(s)}r.push(o)}return r}function Xe(t,e,i){for(var r=[],n=0;n<t.length;n++){var o=Ge(t[n],e,i);r.push(o)}return r}function We(t,e,i,r){if(t[0]<i[0]||t[0]>i[2]){var n=.5*r,o=t[0]-i[0]>n?-r:i[0]-t[0]>n?r:0;0===o&&(o=t[0]-i[2]>n?-r:i[2]-t[0]>n?r:0),t[0]+=o}Be(e,t)}function He(t,e,i,r){for(var n=8192*Math.pow(2,r.z),o=[8192*r.x,8192*r.y],a=[],s=0,u=t;s<u.length;s+=1)for(var l=0,c=u[s];l<c.length;l+=1){var p=c[l],h=[p.x+o[0],p.y+o[1]];We(h,e,i,n),a.push(h)}return a}function Ke(t,e,i,r){for(var n,o=8192*Math.pow(2,r.z),a=[8192*r.x,8192*r.y],s=[],u=0,l=t;u<l.length;u+=1){for(var c=[],p=0,h=l[u];p<h.length;p+=1){var f=h[p],d=[f.x+a[0],f.y+a[1]];Be(e,d),c.push(d)}s.push(c)}if(e[2]-e[0]<=o/2){(n=e)[0]=n[1]=1/0,n[2]=n[3]=-1/0;for(var m=0,y=s;m<y.length;m+=1)for(var _=0,g=y[m];_<g.length;_+=1)We(g[_],e,i,o)}return s}Le.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,te);if(!r)return null;var n=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,te);if(!n)return null;var o=null;return i.locale&&!(o=e.parse(i.locale,1,$t))?null:new Le(r,n,o)},Le.prototype.evaluate=function(t){return new me(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},Le.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},Le.prototype.outputDefined=function(){return!1},Le.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Ye=function(t,e){this.type=te,this.geojson=t,this.geometries=e};function Je(t){if(t instanceof Me){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Ye)return!1;var e=!0;return t.eachChild((function(t){e&&!Je(t)&&(e=!1)})),e}function Qe(t){if(t instanceof Me&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!Qe(t)&&(e=!1)})),e}function $e(t,e){if(t instanceof Me&&e.indexOf(t.name)>=0)return!1;var i=!0;return t.eachChild((function(t){i&&!$e(t,e)&&(i=!1)})),i}Ye.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(xe(t[1])){var i=t[1];if("FeatureCollection"===i.type)for(var r=0;r<i.features.length;++r){var n=i.features[r].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new Ye(i,i.features[r].geometry)}else if("Feature"===i.type){var o=i.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Ye(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new Ye(i,i)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Ye.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){var o=Ge(e.coordinates,r,n),a=He(t.geometry(),i,r,n);if(!Re(i,r))return!1;for(var s=0,u=a;s<u.length;s+=1)if(!Ve(u[s],o))return!1}if("MultiPolygon"===e.type){var l=Xe(e.coordinates,r,n),c=He(t.geometry(),i,r,n);if(!Re(i,r))return!1;for(var p=0,h=c;p<h.length;p+=1)if(!Ue(h[p],l))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){var o=Ge(e.coordinates,r,n),a=Ke(t.geometry(),i,r,n);if(!Re(i,r))return!1;for(var s=0,u=a;s<u.length;s+=1)if(!qe(u[s],o))return!1}if("MultiPolygon"===e.type){var l=Xe(e.coordinates,r,n),c=Ke(t.geometry(),i,r,n);if(!Re(i,r))return!1;for(var p=0,h=c;p<h.length;p+=1)if(!Ze(h[p],l))return!1}return!0}(t,this.geometries)}return!1},Ye.prototype.eachChild=function(){},Ye.prototype.outputDefined=function(){return!0},Ye.prototype.serialize=function(){return["within",this.geojson]};var ti=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};ti.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var i=t[1];return e.scope.has(i)?new ti(i,e.scope.get(i)):e.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},ti.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},ti.prototype.eachChild=function(){},ti.prototype.outputDefined=function(){return!1},ti.prototype.serialize=function(){return["var",this.name]};var ei=function(t,e,i,r,n){void 0===e&&(e=[]),void 0===r&&(r=new Yt),void 0===n&&(n=[]),this.registry=t,this.path=e,this.key=e.map((function(t){return"["+t+"]"})).join(""),this.scope=r,this.errors=n,this.expectedType=i};function ii(t,e){for(var i,r=t.length-1,n=0,o=r,a=0;n<=o;)if((i=t[a=Math.floor((n+o)/2)])<=e){if(a===r||e<t[a+1])return a;n=a+1}else{if(!(i>e))throw new Se("Input is not a number.");o=a-1}return 0}ei.prototype.parse=function(t,e,i,r,n){return void 0===n&&(n={}),e?this.concat(e,i,r)._parse(t,n):this._parse(t,n)},ei.prototype._parse=function(t,e){function i(t,e,i){return"assert"===i?new ze(e,[t]):"coerce"===i?new Ce(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var n=this.registry[r];if(n){var o=n.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=i(o,a,e.typeAnnotation||"coerce");else o=i(o,a,e.typeAnnotation||"assert")}if(!(o instanceof Ie)&&"resolvedImage"!==o.type.kind&&function t(e){if(e instanceof ti)return t(e.boundExpression);if(e instanceof Me&&"error"===e.name)return!1;if(e instanceof Le)return!1;if(e instanceof Ye)return!1;var i=e instanceof Ce||e instanceof ze,r=!0;return e.eachChild((function(e){r=i?r&&t(e):r&&e instanceof Ie})),!!r&&Je(e)&&$e(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var u=new De;try{o=new Ie(o.type,o.evaluate(u))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},ei.prototype.concat=function(t,e,i){var r="number"==typeof t?this.path.concat(t):this.path,n=i?this.scope.concat(i):this.scope;return new ei(this.registry,r,e||null,n,this.errors)},ei.prototype.error=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var r=""+this.key+e.map((function(t){return"["+t+"]"})).join("");this.errors.push(new Kt(r,t))},ei.prototype.checkSubtype=function(t,e){var i=ce(t,e);return i&&this.error(i),i};var ri=function(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,n=i;r<n.length;r+=1){var o=n[r],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};function ni(t,e,i){return t*(1-i)+e*i}ri.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var i=e.parse(t[1],1,Qt);if(!i)return null;var r=[],n=null;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var o=1;o<t.length;o+=2){var a=1===o?-1/0:t[o],s=t[o+1],u=o,l=o+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var c=e.parse(s,l,n);if(!c)return null;n=n||c.type,r.push([a,c])}return new ri(n,i,r)},ri.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);var n=e.length;return r>=e[n-1]?i[n-1].evaluate(t):i[ii(e,r)].evaluate(t)},ri.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},ri.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},ri.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var oi=Object.freeze({__proto__:null,number:ni,color:function(t,e,i){return new de(ni(t.r,e.r,i),ni(t.g,e.g,i),ni(t.b,e.b,i),ni(t.a,e.a,i))},array:function(t,e,i){return t.map((function(t,r){return ni(t,e[r],i)}))}}),ai=6/29*3*(6/29),si=Math.PI/180,ui=180/Math.PI;function li(t){return t>.008856451679035631?Math.pow(t,1/3):t/ai+4/29}function ci(t){return t>6/29?t*t*t:ai*(t-4/29)}function pi(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function hi(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function fi(t){var e=hi(t.r),i=hi(t.g),r=hi(t.b),n=li((.4124564*e+.3575761*i+.1804375*r)/.95047),o=li((.2126729*e+.7151522*i+.072175*r)/1);return{l:116*o-16,a:500*(n-o),b:200*(o-li((.0193339*e+.119192*i+.9503041*r)/1.08883)),alpha:t.a}}function di(t){var e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*ci(e),i=.95047*ci(i),r=1.08883*ci(r),new de(pi(3.2404542*i-1.5371385*e-.4985314*r),pi(-.969266*i+1.8760108*e+.041556*r),pi(.0556434*i-.2040259*e+1.0572252*r),t.alpha)}function mi(t,e,i){var r=e-t;return t+i*(r>180||r<-180?r-360*Math.round(r/360):r)}var yi={forward:fi,reverse:di,interpolate:function(t,e,i){return{l:ni(t.l,e.l,i),a:ni(t.a,e.a,i),b:ni(t.b,e.b,i),alpha:ni(t.alpha,e.alpha,i)}}},_i={forward:function(t){var e=fi(t),i=e.l,r=e.a,n=e.b,o=Math.atan2(n,r)*ui;return{h:o<0?o+360:o,c:Math.sqrt(r*r+n*n),l:i,alpha:t.a}},reverse:function(t){var e=t.h*si,i=t.c;return di({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:mi(t.h,e.h,i),c:ni(t.c,e.c,i),l:ni(t.l,e.l,i),alpha:ni(t.alpha,e.alpha,i)}}},gi=Object.freeze({__proto__:null,lab:yi,hcl:_i}),vi=function(t,e,i,r,n){this.type=t,this.operator=e,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(var o=0,a=n;o<a.length;o+=1){var s=a[o],u=s[1];this.labels.push(s[0]),this.outputs.push(u)}};function xi(t,e,i,r){var n=r-i,o=t-i;return 0===n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}vi.interpolationFactor=function(t,e,r,n){var o=0;if("exponential"===t.name)o=xi(e,t.base,r,n);else if("linear"===t.name)o=xi(e,1,r,n);else if("cubic-bezier"===t.name){var a=t.controlPoints;o=new i(a[0],a[1],a[2],a[3]).solve(xi(e,1,r,n))}return o},vi.parse=function(t,e){var i=t[0],r=t[1],n=t[2],o=t.slice(3);if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,2,Qt)))return null;var u=[],l=null;"interpolate-hcl"===i||"interpolate-lab"===i?l=ee:e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var c=0;c<o.length;c+=2){var p=o[c],h=o[c+1],f=c+3,d=c+4;if("number"!=typeof p)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(u.length&&u[u.length-1][0]>=p)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);var m=e.parse(h,d,l);if(!m)return null;l=l||m.type,u.push([p,m])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new vi(l,i,r,n,u):e.error("Type "+ue(l)+" is not interpolatable.")},vi.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);var n=e.length;if(r>=e[n-1])return i[n-1].evaluate(t);var o=ii(e,r),a=vi.interpolationFactor(this.interpolation,r,e[o],e[o+1]),s=i[o].evaluate(t),u=i[o+1].evaluate(t);return"interpolate"===this.operator?oi[this.type.kind.toLowerCase()](s,u,a):"interpolate-hcl"===this.operator?_i.reverse(_i.interpolate(_i.forward(s),_i.forward(u),a)):yi.reverse(yi.interpolate(yi.forward(s),yi.forward(u),a))},vi.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},vi.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},vi.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],i=0;i<this.labels.length;i++)e.push(this.labels[i],this.outputs[i].serialize());return e};var bi=function(t,e){this.type=t,this.args=e};bi.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var i=null,r=e.expectedType;r&&"value"!==r.kind&&(i=r);for(var n=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=e.parse(a[o],1+n.length,i,void 0,{typeAnnotation:"omit"});if(!s)return null;i=i||s.type,n.push(s)}var u=r&&n.some((function(t){return ce(r,t.type)}));return new bi(u?re:i,n)},bi.prototype.evaluate=function(t){for(var e,i=null,r=0,n=0,o=this.args;n<o.length&&(r++,(i=o[n].evaluate(t))&&i instanceof ge&&!i.available&&(e||(e=i.name),i=null,r===this.args.length&&(i=e)),null===i);n+=1);return i},bi.prototype.eachChild=function(t){this.args.forEach(t)},bi.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},bi.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var wi=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};wi.prototype.evaluate=function(t){return this.result.evaluate(t)},wi.prototype.eachChild=function(t){for(var e=0,i=this.bindings;e<i.length;e+=1)t(i[e][1]);t(this.result)},wi.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var i=[],r=1;r<t.length-1;r+=2){var n=t[r];if("string"!=typeof n)return e.error("Expected string, but found "+typeof n+" instead.",r);if(/[^a-zA-Z0-9_]/.test(n))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;i.push([n,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return a?new wi(i,a):null},wi.prototype.outputDefined=function(){return this.result.outputDefined()},wi.prototype.serialize=function(){for(var t=["let"],e=0,i=this.bindings;e<i.length;e+=1){var r=i[e];t.push(r[0],r[1].serialize())}return t.push(this.result.serialize()),t};var Ii=function(t,e,i){this.type=t,this.index=e,this.input=i};Ii.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Qt),r=e.parse(t[2],2,se(e.expectedType||re));return i&&r?new Ii(r.type.itemType,i,r):null},Ii.prototype.evaluate=function(t){var e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new Se("Array index out of bounds: "+e+" < 0.");if(e>=i.length)throw new Se("Array index out of bounds: "+e+" > "+(i.length-1)+".");if(e!==Math.floor(e))throw new Se("Array index must be an integer, but found "+e+" instead.");return i[e]},Ii.prototype.eachChild=function(t){t(this.index),t(this.input)},Ii.prototype.outputDefined=function(){return!1},Ii.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Si=function(t,e){this.type=te,this.needle=t,this.haystack=e};Si.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,re),r=e.parse(t[2],2,re);return i&&r?pe(i.type,[te,$t,Qt,Jt,re])?new Si(i,r):e.error("Expected first argument to be of type boolean, string, number or null, but found "+ue(i.type)+" instead"):null},Si.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!he(e,["boolean","string","number","null"]))throw new Se("Expected first argument to be of type boolean, string, number or null, but found "+ue(be(e))+" instead.");if(!he(i,["string","array"]))throw new Se("Expected second argument to be of type array or string, but found "+ue(be(i))+" instead.");return i.indexOf(e)>=0},Si.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},Si.prototype.outputDefined=function(){return!0},Si.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ti=function(t,e,i){this.type=Qt,this.needle=t,this.haystack=e,this.fromIndex=i};Ti.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,re),r=e.parse(t[2],2,re);if(!i||!r)return null;if(!pe(i.type,[te,$t,Qt,Jt,re]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+ue(i.type)+" instead");if(4===t.length){var n=e.parse(t[3],3,Qt);return n?new Ti(i,r,n):null}return new Ti(i,r)},Ti.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!he(e,["boolean","string","number","null"]))throw new Se("Expected first argument to be of type boolean, string, number or null, but found "+ue(be(e))+" instead.");if(!he(i,["string","array"]))throw new Se("Expected second argument to be of type array or string, but found "+ue(be(i))+" instead.");if(this.fromIndex){var r=this.fromIndex.evaluate(t);return i.indexOf(e,r)}return i.indexOf(e)},Ti.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},Ti.prototype.outputDefined=function(){return!1},Ti.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var zi=function(t,e,i,r,n,o){this.inputType=t,this.type=e,this.input=i,this.cases=r,this.outputs=n,this.otherwise=o};zi.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var i,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var n={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],u=t[a+1];Array.isArray(s)||(s=[s]);var l=e.concat(a);if(0===s.length)return l.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var h=p[c];if("number"!=typeof h&&"string"!=typeof h)return l.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return l.error("Numeric branch labels must be integer values.");if(i){if(l.checkSubtype(i,be(h)))return null}else i=be(h);if(void 0!==n[String(h)])return l.error("Branch labels must be unique.");n[String(h)]=o.length}var f=e.parse(u,a,r);if(!f)return null;r=r||f.type,o.push(f)}var d=e.parse(t[1],1,re);if(!d)return null;var m=e.parse(t[t.length-1],t.length-1,r);return m?"value"!==d.type.kind&&e.concat(1).checkSubtype(i,d.type)?null:new zi(i,r,d,n,o,m):null},zi.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(be(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},zi.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},zi.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()},zi.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],i=[],r={},n=0,o=Object.keys(this.cases).sort();n<o.length;n+=1){var a=o[n];void 0===(p=r[this.cases[a]])?(r[this.cases[a]]=i.length,i.push([this.cases[a],[a]])):i[p][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,l=i;u<l.length;u+=1){var c=l[u],p=c[0],h=c[1];e.push(1===h.length?s(h[0]):h.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var Ai=function(t,e,i){this.type=t,this.branches=e,this.otherwise=i};Ai.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var r=[],n=1;n<t.length-1;n+=2){var o=e.parse(t[n],n,te);if(!o)return null;var a=e.parse(t[n+1],n+1,i);if(!a)return null;r.push([o,a]),i=i||a.type}var s=e.parse(t[t.length-1],t.length-1,i);return s?new Ai(i,r,s):null},Ai.prototype.evaluate=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var r=i[e],n=r[1];if(r[0].evaluate(t))return n.evaluate(t)}return this.otherwise.evaluate(t)},Ai.prototype.eachChild=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var r=i[e],n=r[1];t(r[0]),t(n)}t(this.otherwise)},Ai.prototype.outputDefined=function(){return this.branches.every((function(t){return t[1].outputDefined()}))&&this.otherwise.outputDefined()},Ai.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var Ei=function(t,e,i,r){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=r};function ki(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Ci(t,e,i,r){return 0===r.compare(e,i)}function Pi(t,e,i){var r="=="!==t&&"!="!==t;return function(){function n(t,e,i){this.type=te,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return n.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var i=t[0],o=e.parse(t[1],1,re);if(!o)return null;if(!ki(i,o.type))return e.concat(1).error('"'+i+"\" comparisons are not supported for type '"+ue(o.type)+"'.");var a=e.parse(t[2],2,re);if(!a)return null;if(!ki(i,a.type))return e.concat(2).error('"'+i+"\" comparisons are not supported for type '"+ue(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+ue(o.type)+"' and '"+ue(a.type)+"'.");r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new ze(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new ze(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,ne)))return null}return new n(o,a,s)},n.prototype.evaluate=function(n){var o=this.lhs.evaluate(n),a=this.rhs.evaluate(n);if(r&&this.hasUntypedArgument){var s=be(o),u=be(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new Se('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var l=be(o),c=be(a);if("string"!==l.kind||"string"!==c.kind)return e(n,o,a)}return this.collator?i(n,o,a,this.collator.evaluate(n)):e(n,o,a)},n.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},n.prototype.outputDefined=function(){return!0},n.prototype.serialize=function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e},n}()}Ei.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,re),r=e.parse(t[2],2,Qt);if(!i||!r)return null;if(!pe(i.type,[se(re),$t,re]))return e.error("Expected first argument to be of type array or string, but found "+ue(i.type)+" instead");if(4===t.length){var n=e.parse(t[3],3,Qt);return n?new Ei(i.type,i,r,n):null}return new Ei(i.type,i,r)},Ei.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!he(e,["string","array"]))throw new Se("Expected first argument to be of type array or string, but found "+ue(be(e))+" instead.");if(this.endIndex){var r=this.endIndex.evaluate(t);return e.slice(i,r)}return e.slice(i)},Ei.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},Ei.prototype.outputDefined=function(){return!1},Ei.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Di=Pi("==",(function(t,e,i){return e===i}),Ci),Mi=Pi("!=",(function(t,e,i){return e!==i}),(function(t,e,i,r){return!Ci(0,e,i,r)})),Li=Pi("<",(function(t,e,i){return e<i}),(function(t,e,i,r){return r.compare(e,i)<0})),Bi=Pi(">",(function(t,e,i){return e>i}),(function(t,e,i,r){return r.compare(e,i)>0})),Ri=Pi("<=",(function(t,e,i){return e<=i}),(function(t,e,i,r){return r.compare(e,i)<=0})),Fi=Pi(">=",(function(t,e,i){return e>=i}),(function(t,e,i,r){return r.compare(e,i)>=0})),Oi=function(t,e,i,r,n){this.type=$t,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=n};Oi.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,Qt);if(!i)return null;var r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");var n=null;if(r.locale&&!(n=e.parse(r.locale,1,$t)))return null;var o=null;if(r.currency&&!(o=e.parse(r.currency,1,$t)))return null;var a=null;if(r["min-fraction-digits"]&&!(a=e.parse(r["min-fraction-digits"],1,Qt)))return null;var s=null;return r["max-fraction-digits"]&&!(s=e.parse(r["max-fraction-digits"],1,Qt))?null:new Oi(i,n,o,a,s)},Oi.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},Oi.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},Oi.prototype.outputDefined=function(){return!1},Oi.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Vi=function(t){this.type=Qt,this.input=t};Vi.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error("Expected argument of type string or array, but found "+ue(i.type)+" instead."):new Vi(i):null},Vi.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Se("Expected value to be of type string or array, but found "+ue(be(e))+" instead.")},Vi.prototype.eachChild=function(t){t(this.input)},Vi.prototype.outputDefined=function(){return!1},Vi.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var Ui={"==":Di,"!=":Mi,">":Bi,"<":Li,">=":Fi,"<=":Ri,array:ze,at:Ii,boolean:ze,case:Ai,coalesce:bi,collator:Le,format:Ae,image:Ee,in:Si,"index-of":Ti,interpolate:vi,"interpolate-hcl":vi,"interpolate-lab":vi,length:Vi,let:wi,literal:Ie,match:zi,number:ze,"number-format":Oi,object:ze,slice:Ei,step:ri,string:ze,"to-boolean":Ce,"to-color":Ce,"to-number":Ce,"to-string":Ce,var:ti,within:Ye};function ji(t,e){var i=e[0],r=e[1],n=e[2],o=e[3];i=i.evaluate(t),r=r.evaluate(t),n=n.evaluate(t);var a=o?o.evaluate(t):1,s=ve(i,r,n,a);if(s)throw new Se(s);return new de(i/255*a,r/255*a,n/255*a,a)}function Ni(t,e){return t in e}function qi(t,e){var i=e[t];return void 0===i?null:i}function Zi(t){return{type:t}}function Gi(t){return{result:"success",value:t}}function Xi(t){return{result:"error",value:t}}function Wi(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Hi(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Ki(t){return!!t.expression&&t.expression.interpolated}function Yi(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Ji(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Qi(t){return t}function $i(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function tr(t,e,i,r,n){return $i(typeof i===n?r[i]:void 0,t.default,e.default)}function er(t,e,i){if("number"!==Yi(i))return $i(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[r-1][0])return t.stops[r-1][1];var n=ii(t.stops.map((function(t){return t[0]})),i);return t.stops[n][1]}function ir(t,e,i){var r=void 0!==t.base?t.base:1;if("number"!==Yi(i))return $i(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[n-1][0])return t.stops[n-1][1];var o=ii(t.stops.map((function(t){return t[0]})),i),a=function(t,e,i,r){var n=r-i,o=t-i;return 0===n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}(i,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],u=t.stops[o+1][1],l=oi[e.type]||Qi;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=gi[t.colorSpace];l=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=s.evaluate.apply(void 0,t),r=u.evaluate.apply(void 0,t);if(void 0!==i&&void 0!==r)return l(i,r,a)}}:l(s,u,a)}function rr(t,e,i){return"color"===e.type?i=de.parse(i):"formatted"===e.type?i=_e.fromString(i.toString()):"resolvedImage"===e.type?i=ge.fromString(i.toString()):Yi(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0),$i(i,t.default,e.default)}Me.register(Ui,{error:[{kind:"error"},[$t],function(t,e){throw new Se(e[0].evaluate(t))}],typeof:[$t,[re],function(t,e){return ue(be(e[0].evaluate(t)))}],"to-rgba":[se(Qt,4),[ee],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[ee,[Qt,Qt,Qt],ji],rgba:[ee,[Qt,Qt,Qt,Qt],ji],has:{type:te,overloads:[[[$t],function(t,e){return Ni(e[0].evaluate(t),t.properties())}],[[$t,ie],function(t,e){var i=e[1];return Ni(e[0].evaluate(t),i.evaluate(t))}]]},get:{type:re,overloads:[[[$t],function(t,e){return qi(e[0].evaluate(t),t.properties())}],[[$t,ie],function(t,e){var i=e[1];return qi(e[0].evaluate(t),i.evaluate(t))}]]},"feature-state":[re,[$t],function(t,e){return qi(e[0].evaluate(t),t.featureState||{})}],properties:[ie,[],function(t){return t.properties()}],"geometry-type":[$t,[],function(t){return t.geometryType()}],id:[re,[],function(t){return t.id()}],zoom:[Qt,[],function(t){return t.globals.zoom}],"heatmap-density":[Qt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Qt,[],function(t){return t.globals.lineProgress||0}],accumulated:[re,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Qt,Zi(Qt),function(t,e){for(var i=0,r=0,n=e;r<n.length;r+=1)i+=n[r].evaluate(t);return i}],"*":[Qt,Zi(Qt),function(t,e){for(var i=1,r=0,n=e;r<n.length;r+=1)i*=n[r].evaluate(t);return i}],"-":{type:Qt,overloads:[[[Qt,Qt],function(t,e){var i=e[1];return e[0].evaluate(t)-i.evaluate(t)}],[[Qt],function(t,e){return-e[0].evaluate(t)}]]},"/":[Qt,[Qt,Qt],function(t,e){var i=e[1];return e[0].evaluate(t)/i.evaluate(t)}],"%":[Qt,[Qt,Qt],function(t,e){var i=e[1];return e[0].evaluate(t)%i.evaluate(t)}],ln2:[Qt,[],function(){return Math.LN2}],pi:[Qt,[],function(){return Math.PI}],e:[Qt,[],function(){return Math.E}],"^":[Qt,[Qt,Qt],function(t,e){var i=e[1];return Math.pow(e[0].evaluate(t),i.evaluate(t))}],sqrt:[Qt,[Qt],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[Qt,[Qt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[Qt,[Qt],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[Qt,[Qt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[Qt,[Qt],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[Qt,[Qt],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[Qt,[Qt],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[Qt,[Qt],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[Qt,[Qt],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[Qt,[Qt],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[Qt,Zi(Qt),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[Qt,Zi(Qt),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[Qt,[Qt],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[Qt,[Qt],function(t,e){var i=e[0].evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[Qt,[Qt],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[Qt,[Qt],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[te,[$t,re],function(t,e){var i=e[0],r=e[1];return t.properties()[i.value]===r.value}],"filter-id-==":[te,[re],function(t,e){var i=e[0];return t.id()===i.value}],"filter-type-==":[te,[$t],function(t,e){var i=e[0];return t.geometryType()===i.value}],"filter-<":[te,[$t,re],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n<o}],"filter-id-<":[te,[re],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r<n}],"filter->":[te,[$t,re],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n>o}],"filter-id->":[te,[re],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r>n}],"filter-<=":[te,[$t,re],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n<=o}],"filter-id-<=":[te,[re],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r<=n}],"filter->=":[te,[$t,re],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n>=o}],"filter-id->=":[te,[re],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r>=n}],"filter-has":[te,[re],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[te,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[te,[se($t)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[te,[se(re)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[te,[$t,se(re)],function(t,e){var i=e[0];return e[1].value.indexOf(t.properties()[i.value])>=0}],"filter-in-large":[te,[$t,se(re)],function(t,e){var i=e[0],r=e[1];return function(t,e,i,r){for(;i<=r;){var n=i+r>>1;if(e[n]===t)return!0;e[n]>t?r=n-1:i=n+1}return!1}(t.properties()[i.value],r.value,0,r.value.length-1)}],all:{type:te,overloads:[[[te,te],function(t,e){var i=e[1];return e[0].evaluate(t)&&i.evaluate(t)}],[Zi(te),function(t,e){for(var i=0,r=e;i<r.length;i+=1)if(!r[i].evaluate(t))return!1;return!0}]]},any:{type:te,overloads:[[[te,te],function(t,e){var i=e[1];return e[0].evaluate(t)||i.evaluate(t)}],[Zi(te),function(t,e){for(var i=0,r=e;i<r.length;i+=1)if(r[i].evaluate(t))return!0;return!1}]]},"!":[te,[te],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[te,[$t],function(t,e){var i=t.globals&&t.globals.isSupportedScript;return!i||i(e[0].evaluate(t))}],upcase:[$t,[$t],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[$t,[$t],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[$t,Zi(re),function(t,e){return e.map((function(e){return we(e.evaluate(t))})).join("")}],"resolved-locale":[$t,[ne],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var nr=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new De,this._defaultValue=e?function(t){return"color"===t.type&&Ji(t.default)?new de(0,0,0,0):"color"===t.type?de.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function or(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Ui}function ar(t,e){var i=new ei(Ui,[],e?function(t){var e={color:ee,string:$t,number:Qt,enum:$t,boolean:te,formatted:oe,resolvedImage:ae};return"array"===t.type?se(e[t.value]||re,t.length):e[t.type]}(e):void 0),r=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?Gi(new nr(r,e)):Xi(i.errors)}nr.prototype.evaluateWithoutErrorHandling=function(t,e,i,r,n,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},nr.prototype.evaluate=function(t,e,i,r,n,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Se("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var sr=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Qe(e.expression)};sr.prototype.evaluateWithoutErrorHandling=function(t,e,i,r,n,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,n,o)},sr.prototype.evaluate=function(t,e,i,r,n,o){return this._styleExpression.evaluate(t,e,i,r,n,o)};var ur=function(t,e,i,r){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Qe(e.expression),this.interpolationType=r};function lr(t,e){if("error"===(t=ar(t,e)).result)return t;var i=t.value.expression,r=Je(i);if(!r&&!Wi(e))return Xi([new Kt("","data expressions not supported")]);var n=$e(i,["zoom"]);if(!n&&!Hi(e))return Xi([new Kt("","zoom expressions not supported")]);var o=function t(e){var i=null;if(e instanceof wi)i=t(e.result);else if(e instanceof bi)for(var r=0,n=e.args;r<n.length&&!(i=t(n[r]));r+=1);else(e instanceof ri||e instanceof vi)&&e.input instanceof Me&&"zoom"===e.input.name&&(i=e);return i instanceof Kt||e.eachChild((function(e){var r=t(e);r instanceof Kt?i=r:!i&&r?i=new Kt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&r&&i!==r&&(i=new Kt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),i}(i);return o||n?o instanceof Kt?Xi([o]):o instanceof vi&&!Ki(e)?Xi([new Kt("",'"interpolate" expressions cannot be used with this property')]):Gi(o?new ur(r?"camera":"composite",t.value,o.labels,o instanceof vi?o.interpolation:void 0):new sr(r?"constant":"source",t.value)):Xi([new Kt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}ur.prototype.evaluateWithoutErrorHandling=function(t,e,i,r,n,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,n,o)},ur.prototype.evaluate=function(t,e,i,r,n,o){return this._styleExpression.evaluate(t,e,i,r,n,o)},ur.prototype.interpolationFactor=function(t,e,i){return this.interpolationType?vi.interpolationFactor(this.interpolationType,t,e,i):0};var cr=function(t,e){this._parameters=t,this._specification=e,Xt(this,function t(e,i){var r,n,o,a="color"===i.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||!(s||void 0!==e.property),l=e.type||(Ki(i)?"exponential":"interval");if(a&&((e=Xt({},e)).stops&&(e.stops=e.stops.map((function(t){return[t[0],de.parse(t[1])]}))),e.default=de.parse(e.default?e.default:i.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!gi[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===l)r=ir;else if("interval"===l)r=er;else if("categorical"===l){r=tr,n=Object.create(null);for(var c=0,p=e.stops;c<p.length;c+=1){var h=p[c];n[h[0]]=h[1]}o=typeof e.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'+l+'"');r=rr}if(s){for(var f={},d=[],m=0;m<e.stops.length;m++){var y=e.stops[m],_=y[0].zoom;void 0===f[_]&&(f[_]={zoom:_,type:e.type,property:e.property,default:e.default,stops:[]},d.push(_)),f[_].stops.push([y[0].value,y[1]])}for(var g=[],v=0,x=d;v<x.length;v+=1){var b=x[v];g.push([f[b].zoom,t(f[b],i)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:vi.interpolationFactor.bind(void 0,w),zoomStops:g.map((function(t){return t[0]})),evaluate:function(t,r){var n=t.zoom;return ir({stops:g,base:e.base},i,n).evaluate(n,r)}}}if(u){var I="exponential"===l?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:I,interpolationFactor:vi.interpolationFactor.bind(void 0,I),zoomStops:e.stops.map((function(t){return t[0]})),evaluate:function(t){return r(e,i,t.zoom,n,o)}}}return{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?$i(e.default,i.default):r(e,i,s,n,o)}}}(this._parameters,this._specification))};function pr(t){var e=t.key,i=t.value,r=t.valueSpec||{},n=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],u=Yi(i);if("object"!==u)return[new Zt(e,i,"object expected, "+u+" found")];for(var l in i){var c=l.split(".")[0],p=r[c]||r["*"],h=void 0;if(n[c])h=n[c];else if(r[c])h=Rr;else if(n["*"])h=n["*"];else{if(!r["*"]){s.push(new Zt(e,i[l],'unknown property "'+l+'"'));continue}h=Rr}s=s.concat(h({key:(e?e+".":e)+l,value:i[l],valueSpec:p,style:o,styleSpec:a,object:i,objectKey:l},i))}for(var f in r)n[f]||r[f].required&&void 0===r[f].default&&void 0===i[f]&&s.push(new Zt(e,i,'missing required property "'+f+'"'));return s}function hr(t){var e=t.value,i=t.valueSpec,r=t.style,n=t.styleSpec,o=t.key,a=t.arrayElementValidator||Rr;if("array"!==Yi(e))return[new Zt(o,e,"array expected, "+Yi(e)+" found")];if(i.length&&e.length!==i.length)return[new Zt(o,e,"array length "+i.length+" expected, length "+e.length+" found")];if(i["min-length"]&&e.length<i["min-length"])return[new Zt(o,e,"array length at least "+i["min-length"]+" expected, length "+e.length+" found")];var s={type:i.value,values:i.values};n.$version<7&&(s.function=i.function),"object"===Yi(i.value)&&(s=i.value);for(var u=[],l=0;l<e.length;l++)u=u.concat(a({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:r,styleSpec:n,key:o+"["+l+"]"}));return u}function fr(t){var e=t.key,i=t.value,r=t.valueSpec,n=Yi(i);return"number"===n&&i!=i&&(n="NaN"),"number"!==n?[new Zt(e,i,"number expected, "+n+" found")]:"minimum"in r&&i<r.minimum?[new Zt(e,i,i+" is less than the minimum value "+r.minimum)]:"maximum"in r&&i>r.maximum?[new Zt(e,i,i+" is greater than the maximum value "+r.maximum)]:[]}function dr(t){var e,i,r,n=t.valueSpec,o=Wt(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,u=!s,l="array"===Yi(t.value.stops)&&"array"===Yi(t.value.stops[0])&&"object"===Yi(t.value.stops[0][0]),c=pr({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new Zt(t.key,t.value,'identity function may not have a "stops" property')];var e=[],i=t.value;return e=e.concat(hr({key:t.key,value:i,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:p})),"array"===Yi(i)&&0===i.length&&e.push(new Zt(t.key,i,"array must have at least one stop")),e},default:function(t){return Rr({key:t.key,value:t.value,valueSpec:n,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&c.push(new Zt(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||c.push(new Zt(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!Ki(t.valueSpec)&&c.push(new Zt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!Wi(t.valueSpec)?c.push(new Zt(t.key,t.value,"property functions not supported")):s&&!Hi(t.valueSpec)&&c.push(new Zt(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!l||void 0!==t.value.property||c.push(new Zt(t.key,t.value,'"property" property is required')),c;function p(t){var e=[],o=t.value,s=t.key;if("array"!==Yi(o))return[new Zt(s,o,"array expected, "+Yi(o)+" found")];if(2!==o.length)return[new Zt(s,o,"array length 2 expected, length "+o.length+" found")];if(l){if("object"!==Yi(o[0]))return[new Zt(s,o,"object expected, "+Yi(o[0])+" found")];if(void 0===o[0].zoom)return[new Zt(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new Zt(s,o,"object stop key must have value")];if(r&&r>Wt(o[0].zoom))return[new Zt(s,o[0].zoom,"stop zoom values must appear in ascending order")];Wt(o[0].zoom)!==r&&(r=Wt(o[0].zoom),i=void 0,a={}),e=e.concat(pr({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:fr,value:h}}))}else e=e.concat(h({key:s+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return or(Ht(o[1]))?e.concat([new Zt(s+"[1]",o[1],"expressions are not allowed in function stops.")]):e.concat(Rr({key:s+"[1]",value:o[1],valueSpec:n,style:t.style,styleSpec:t.styleSpec}))}function h(t,r){var s=Yi(t.value),u=Wt(t.value),l=null!==t.value?t.value:r;if(e){if(s!==e)return[new Zt(t.key,l,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Zt(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, "+s+" found";return Wi(n)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Zt(t.key,l,c)]}return"categorical"!==o||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==o&&"number"===s&&void 0!==i&&u<i?[new Zt(t.key,l,"stop domain values must appear in ascending order")]:(i=u,"categorical"===o&&u in a?[new Zt(t.key,l,"stop domain values must be unique")]:(a[u]=!0,[])):[new Zt(t.key,l,"integer expected, found "+u)]}}function mr(t){var e=("property"===t.expressionContext?lr:ar)(Ht(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new Zt(""+t.key+e.key,t.value,e.message)}));var i=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!i.outputDefined())return[new Zt(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!Qe(i))return[new Zt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!Qe(i))return[new Zt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!$e(i,["zoom","feature-state"]))return[new Zt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Je(i))return[new Zt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function yr(t){var e=t.key,i=t.value,r=t.valueSpec,n=[];return Array.isArray(r.values)?-1===r.values.indexOf(Wt(i))&&n.push(new Zt(e,i,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(i)+" found")):-1===Object.keys(r.values).indexOf(Wt(i))&&n.push(new Zt(e,i,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(i)+" found")),n}function _r(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,i=t.slice(1);e<i.length;e+=1){var r=i[e];if(!_r(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}cr.deserialize=function(t){return new cr(t._parameters,t._specification)},cr.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var gr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function vr(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};_r(t)||(t=br(t));var e=ar(t,gr);if("error"===e.result)throw new Error(e.value.map((function(t){return t.key+": "+t.message})).join(", "));return{filter:function(t,i,r){return e.value.evaluate(t,i,{},r)},needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var i=1;i<e.length;i++)if(t(e[i]))return!0;return!1}(t)}}function xr(t,e){return t<e?-1:t>e?1:0}function br(t){if(!t)return!0;var e,i=t[0];return t.length<=1?"any"!==i:"=="===i?wr(t[1],t[2],"=="):"!="===i?Tr(wr(t[1],t[2],"==")):"<"===i||">"===i||"<="===i||">="===i?wr(t[1],t[2],i):"any"===i?(e=t.slice(1),["any"].concat(e.map(br))):"all"===i?["all"].concat(t.slice(1).map(br)):"none"===i?["all"].concat(t.slice(1).map(br).map(Tr)):"in"===i?Ir(t[1],t.slice(2)):"!in"===i?Tr(Ir(t[1],t.slice(2))):"has"===i?Sr(t[1]):"!has"===i?Tr(Sr(t[1])):"within"!==i||t}function wr(t,e,i){switch(t){case"$type":return["filter-type-"+i,e];case"$id":return["filter-id-"+i,e];default:return["filter-"+i,t,e]}}function Ir(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(xr)]]:["filter-in-small",t,["literal",e]]}}function Sr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Tr(t){return["!",t]}function zr(t){return _r(Ht(t.value))?mr(Xt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var i=e.value,r=e.key;if("array"!==Yi(i))return[new Zt(r,i,"array expected, "+Yi(i)+" found")];var n,o=e.styleSpec,a=[];if(i.length<1)return[new Zt(r,i,"filter array must have at least 1 element")];switch(a=a.concat(yr({key:r+"[0]",value:i[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),Wt(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&"$type"===Wt(i[1])&&a.push(new Zt(r,i,'"$type" cannot be use with operator "'+i[0]+'"'));case"==":case"!=":3!==i.length&&a.push(new Zt(r,i,'filter array for operator "'+i[0]+'" must have 3 elements'));case"in":case"!in":i.length>=2&&"string"!==(n=Yi(i[1]))&&a.push(new Zt(r+"[1]",i[1],"string expected, "+n+" found"));for(var s=2;s<i.length;s++)n=Yi(i[s]),"$type"===Wt(i[1])?a=a.concat(yr({key:r+"["+s+"]",value:i[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&a.push(new Zt(r+"["+s+"]",i[s],"string, number, or boolean expected, "+n+" found"));break;case"any":case"all":case"none":for(var u=1;u<i.length;u++)a=a.concat(t({key:r+"["+u+"]",value:i[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=Yi(i[1]),2!==i.length?a.push(new Zt(r,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"string"!==n&&a.push(new Zt(r+"[1]",i[1],"string expected, "+n+" found"));break;case"within":n=Yi(i[1]),2!==i.length?a.push(new Zt(r,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"object"!==n&&a.push(new Zt(r+"[1]",i[1],"object expected, "+n+" found"))}return a}(t)}function Ar(t,e){var i=t.key,r=t.style,n=t.styleSpec,o=t.value,a=t.objectKey,s=n[e+"_"+t.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return Rr({key:i,value:o,valueSpec:n.transition,style:r,styleSpec:n});var l,c=t.valueSpec||s[a];if(!c)return[new Zt(i,o,'unknown property "'+a+'"')];if("string"===Yi(o)&&Wi(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new Zt(i,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var p=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&p.push(new Zt(i,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Ji(Ht(o))&&"identity"===Wt(o.type)&&p.push(new Zt(i,o,'"text-font" does not support identity functions'))),p.concat(Rr({key:t.key,value:o,valueSpec:c,style:r,styleSpec:n,expressionContext:"property",propertyType:e,propertyKey:a}))}function Er(t){return Ar(t,"paint")}function kr(t){return Ar(t,"layout")}function Cr(t){var e=[],i=t.value,r=t.key,n=t.style,o=t.styleSpec;i.type||i.ref||e.push(new Zt(r,i,'either "type" or "ref" is required'));var a,s=Wt(i.type),u=Wt(i.ref);if(i.id)for(var l=Wt(i.id),c=0;c<t.arrayIndex;c++){var p=n.layers[c];Wt(p.id)===l&&e.push(new Zt(r,i.id,'duplicate layer id "'+i.id+'", previously used at line '+p.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach((function(t){t in i&&e.push(new Zt(r,i[t],'"'+t+'" is prohibited for ref layers'))})),n.layers.forEach((function(t){Wt(t.id)===u&&(a=t)})),a?a.ref?e.push(new Zt(r,i.ref,"ref cannot reference another ref layer")):s=Wt(a.type):e.push(new Zt(r,i.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(i.source){var h=n.sources&&n.sources[i.source],f=h&&Wt(h.type);h?"vector"===f&&"raster"===s?e.push(new Zt(r,i.source,'layer "'+i.id+'" requires a raster source')):"raster"===f&&"raster"!==s?e.push(new Zt(r,i.source,'layer "'+i.id+'" requires a vector source')):"vector"!==f||i["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new Zt(r,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!i.paint||!i.paint["line-gradient"]||"geojson"===f&&h.lineMetrics||e.push(new Zt(r,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new Zt(r,i,'layer "'+i.id+'" must specify a "source-layer"')):e.push(new Zt(r,i.source,'source "'+i.source+'" not found'))}else e.push(new Zt(r,i,'missing required property "source"'));return e=e.concat(pr({key:r,value:i,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Rr({key:r+".type",value:i.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"})},filter:zr,layout:function(t){return pr({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return kr(Xt({layerType:s},t))}}})},paint:function(t){return pr({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Er(Xt({layerType:s},t))}}})}}}))}function Pr(t){var e=t.value,i=t.key,r=Yi(e);return"string"!==r?[new Zt(i,e,"string expected, "+r+" found")]:[]}var Dr={promoteId:function(t){var e=t.key,i=t.value;if("string"===Yi(i))return Pr({key:e,value:i});var r=[];for(var n in i)r.push.apply(r,Pr({key:e+"."+n,value:i[n]}));return r}};function Mr(t){var e=t.value,i=t.key,r=t.styleSpec,n=t.style;if(!e.type)return[new Zt(i,e,'"type" is required')];var o,a=Wt(e.type);switch(a){case"vector":case"raster":case"raster-dem":return pr({key:i,value:e,valueSpec:r["source_"+a.replace("-","_")],style:t.style,styleSpec:r,objectElementValidators:Dr});case"geojson":if(o=pr({key:i,value:e,valueSpec:r.source_geojson,style:n,styleSpec:r,objectElementValidators:Dr}),e.cluster)for(var s in e.clusterProperties){var u=e.clusterProperties[s],l=u[0],c="string"==typeof l?[l,["accumulated"],["get",s]]:l;o.push.apply(o,mr({key:i+"."+s+".map",value:u[1],expressionContext:"cluster-map"})),o.push.apply(o,mr({key:i+"."+s+".reduce",value:c,expressionContext:"cluster-reduce"}))}return o;case"video":return pr({key:i,value:e,valueSpec:r.source_video,style:n,styleSpec:r});case"image":return pr({key:i,value:e,valueSpec:r.source_image,style:n,styleSpec:r});case"canvas":return[new Zt(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return yr({key:i+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:n,styleSpec:r})}}function Lr(t){var e=t.value,i=t.styleSpec,r=i.light,n=t.style,o=[],a=Yi(e);if(void 0===e)return o;if("object"!==a)return o.concat([new Zt("light",e,"object expected, "+a+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);o=o.concat(u&&r[u[1]]&&r[u[1]].transition?Rr({key:s,value:e[s],valueSpec:i.transition,style:n,styleSpec:i}):r[s]?Rr({key:s,value:e[s],valueSpec:r[s],style:n,styleSpec:i}):[new Zt(s,e[s],'unknown property "'+s+'"')])}return o}var Br={"*":function(){return[]},array:hr,boolean:function(t){var e=t.value,i=t.key,r=Yi(e);return"boolean"!==r?[new Zt(i,e,"boolean expected, "+r+" found")]:[]},number:fr,color:function(t){var e=t.key,i=t.value,r=Yi(i);return"string"!==r?[new Zt(e,i,"color expected, "+r+" found")]:null===fe(i)?[new Zt(e,i,'color expected, "'+i+'" found')]:[]},constants:Gt,enum:yr,filter:zr,function:dr,layer:Cr,object:pr,source:Mr,light:Lr,string:Pr,formatted:function(t){return 0===Pr(t).length?[]:mr(t)},resolvedImage:function(t){return 0===Pr(t).length?[]:mr(t)}};function Rr(t){var e=t.value,i=t.valueSpec,r=t.styleSpec;return i.expression&&Ji(Wt(e))?dr(t):i.expression&&or(Ht(e))?mr(t):i.type&&Br[i.type]?Br[i.type](t):pr(Xt({},t,{valueSpec:i.type?r[i.type]:i}))}function Fr(t){var e=t.value,i=t.key,r=Pr(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new Zt(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new Zt(i,e,'"glyphs" url must include a "{range}" token'))),r}function Or(t,e){void 0===e&&(e=qt);var i=[];return i=i.concat(Rr({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Fr,"*":function(){return[]}}})),t.constants&&(i=i.concat(Gt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Vr(i)}function Vr(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function Ur(t){return function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];return Vr(t.apply(this,e))}}Or.source=Ur(Mr),Or.light=Ur(Lr),Or.layer=Ur(Cr),Or.filter=Ur(zr),Or.paintProperty=Ur(Er),Or.layoutProperty=Ur(kr);var jr=Or,Nr=jr.light,qr=jr.paintProperty,Zr=jr.layoutProperty;function Gr(t,e){var i=!1;if(e&&e.length)for(var r=0,n=e;r<n.length;r+=1)t.fire(new jt(new Error(n[r].message))),i=!0;return i}var Xr=Wr;function Wr(t,e,i){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var n=new Int32Array(this.arrayBuffer);t=n[0],this.d=(e=n[1])+2*(i=n[2]);for(var o=0;o<this.d*this.d;o++){var a=n[3+o],s=n[3+o+1];r.push(a===s?null:n.subarray(a,s))}var u=n[3+r.length+1];this.keys=n.subarray(n[3+r.length],u),this.bboxes=n.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*i;for(var l=0;l<this.d*this.d;l++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;var c=i/e*t;this.min=-c,this.max=t+c}Wr.prototype.insert=function(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)},Wr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Wr.prototype._insertCell=function(t,e,i,r,n,o){this.cells[n].push(o)},Wr.prototype.query=function(t,e,i,r,n){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=i&&a<=r&&!n)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,i,r,this._queryCell,s,{},n),s},Wr.prototype._queryCell=function(t,e,i,r,n,o,a,s){var u=this.cells[n];if(null!==u)for(var l=this.keys,c=this.bboxes,p=0;p<u.length;p++){var h=u[p];if(void 0===a[h]){var f=4*h;(s?s(c[f+0],c[f+1],c[f+2],c[f+3]):t<=c[f+2]&&e<=c[f+3]&&i>=c[f+0]&&r>=c[f+1])?(a[h]=!0,o.push(l[h])):a[h]=!1}}},Wr.prototype._forEachCell=function(t,e,i,r,n,o,a,s){for(var u=this._convertToCellCoord(t),l=this._convertToCellCoord(e),c=this._convertToCellCoord(i),p=this._convertToCellCoord(r),h=u;h<=c;h++)for(var f=l;f<=p;f++){var d=this.d*f+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(f),this._convertFromCellCoord(h+1),this._convertFromCellCoord(f+1)))&&n.call(this,t,e,i,r,d,o,a,s))return}},Wr.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Wr.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Wr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,i=0,r=0;r<this.cells.length;r++)i+=this.cells[r].length;var n=new Int32Array(e+i+this.keys.length+this.bboxes.length);n[0]=this.extent,n[1]=this.n,n[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];n[3+a]=o,n.set(s,o),o+=s.length}return n[3+t.length]=o,n.set(this.keys,o),n[3+t.length+1]=o+=this.keys.length,n.set(this.bboxes,o),o+=this.bboxes.length,n.buffer};var Hr=a.ImageData,Kr=a.ImageBitmap,Yr={};function Jr(t,e,i){void 0===i&&(i={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Yr[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}for(var Qr in Jr("Object",Object),Xr.serialize=function(t,e){var i=t.toArrayBuffer();return e&&e.push(i),{buffer:i}},Xr.deserialize=function(t){return new Xr(t.buffer)},Jr("Grid",Xr),Jr("Color",de),Jr("Error",Error),Jr("ResolvedImage",ge),Jr("StylePropertyFunction",cr),Jr("StyleExpression",nr,{omit:["_evaluator"]}),Jr("ZoomDependentExpression",ur),Jr("ZoomConstantExpression",sr),Jr("CompoundExpression",Me,{omit:["_evaluate"]}),Ui)Ui[Qr]._classRegistryKey||Jr("Expression_"+Qr,Ui[Qr]);function $r(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function tn(t){return Kr&&t instanceof Kr}function en(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if($r(t)||tn(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var i=t;return e&&e.push(i.buffer),i}if(t instanceof Hr)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],n=0,o=t;n<o.length;n+=1)r.push(en(o[n],e));return r}if("object"==typeof t){var a=t.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var u=a.serialize?a.serialize(t,e):{};if(!a.serialize){for(var l in t)if(t.hasOwnProperty(l)&&!(Yr[s].omit.indexOf(l)>=0)){var c=t[l];u[l]=Yr[s].shallow.indexOf(l)>=0?c:en(c,e)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}throw new Error("can't serialize object of type "+typeof t)}function rn(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||$r(t)||tn(t)||ArrayBuffer.isView(t)||t instanceof Hr)return t;if(Array.isArray(t))return t.map(rn);if("object"==typeof t){var e=t.$name||"Object",i=Yr[e].klass;if(!i)throw new Error("can't deserialize unregistered class "+e);if(i.deserialize)return i.deserialize(t);for(var r=Object.create(i.prototype),n=0,o=Object.keys(t);n<o.length;n+=1){var a=o[n];if("$name"!==a){var s=t[a];r[a]=Yr[e].shallow.indexOf(a)>=0?s:rn(s)}}return r}throw new Error("can't deserialize object of type "+typeof t)}var nn=function(){this.first=!0};nn.prototype.update=function(t,e){var i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))};var on=function(t){return t>=12288&&t<=12351},an=function(t){return t>=12352&&t<=12447},sn=function(t){return t>=12448&&t<=12543},un=function(t){return t>=19968&&t<=40959},ln=function(t){return t>=44032&&t<=55215},cn=function(t){return t>=65072&&t<=65103},pn=function(t){return t>=65104&&t<=65135},hn=function(t){return t>=65280&&t<=65519};function fn(t){for(var e=0,i=t;e<i.length;e+=1)if(dn(i[e].charCodeAt(0)))return!0;return!1}function dn(t){return!(746!==t&&747!==t&&(t<4352||!(function(t){return t>=12704&&t<=12735}(t)||function(t){return t>=12544&&t<=12591}(t)||cn(t)&&!(t>=65097&&t<=65103)||function(t){return t>=63744&&t<=64255}(t)||function(t){return t>=13056&&t<=13311}(t)||function(t){return t>=11904&&t<=12031}(t)||function(t){return t>=12736&&t<=12783}(t)||!(!on(t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||function(t){return t>=13312&&t<=19903}(t)||un(t)||function(t){return t>=12800&&t<=13055}(t)||function(t){return t>=12592&&t<=12687}(t)||function(t){return t>=43360&&t<=43391}(t)||function(t){return t>=55216&&t<=55295}(t)||function(t){return t>=4352&&t<=4607}(t)||ln(t)||an(t)||function(t){return t>=12272&&t<=12287}(t)||function(t){return t>=12688&&t<=12703}(t)||function(t){return t>=12032&&t<=12255}(t)||function(t){return t>=12784&&t<=12799}(t)||sn(t)&&12540!==t||!(!hn(t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!pn(t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||function(t){return t>=5120&&t<=5759}(t)||function(t){return t>=6320&&t<=6399}(t)||function(t){return t>=65040&&t<=65055}(t)||function(t){return t>=19904&&t<=19967}(t)||function(t){return t>=40960&&t<=42127}(t)||function(t){return t>=42128&&t<=42191}(t))))}function mn(t){return!(dn(t)||function(t){return!!(function(t){return t>=128&&t<=255}(t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||function(t){return t>=8192&&t<=8303}(t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||function(t){return t>=8448&&t<=8527}(t)||function(t){return t>=8528&&t<=8591}(t)||function(t){return t>=8960&&t<=9215}(t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||function(t){return t>=9216&&t<=9279}(t)&&9251!==t||function(t){return t>=9280&&t<=9311}(t)||function(t){return t>=9312&&t<=9471}(t)||function(t){return t>=9632&&t<=9727}(t)||function(t){return t>=9728&&t<=9983}(t)&&!(t>=9754&&t<=9759)||function(t){return t>=11008&&t<=11263}(t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||on(t)||sn(t)||function(t){return t>=57344&&t<=63743}(t)||cn(t)||pn(t)||hn(t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function yn(t){return t>=1424&&t<=2303||function(t){return t>=64336&&t<=65023}(t)||function(t){return t>=65136&&t<=65279}(t)}function _n(t,e){return!(!e&&yn(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||function(t){return t>=6016&&t<=6143}(t))}function gn(t){for(var e=0,i=t;e<i.length;e+=1)if(yn(i[e].charCodeAt(0)))return!0;return!1}var vn=null,xn="unavailable",bn=null,wn=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(xn="error"),vn&&vn(t)};function In(){Sn.fire(new Ut("pluginStateChange",{pluginStatus:xn,pluginURL:bn}))}var Sn=new Nt,Tn=function(){return xn},zn=function(){if("deferred"!==xn||!bn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");xn="loading",In(),bn&&Bt({url:bn},(function(t){t?wn(t):(xn="loaded",In())}))},An={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===xn||null!=An.applyArabicShaping},isLoading:function(){return"loading"===xn},setState:function(t){xn=t.pluginStatus,bn=t.pluginURL},isParsed:function(){return null!=An.applyArabicShaping&&null!=An.processBidirectionalText&&null!=An.processStyledBidirectionalText},getPluginURL:function(){return bn}},En=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new nn,this.transition={})};En.prototype.isSupportedScript=function(t){return function(t,e){for(var i=0,r=t;i<r.length;i+=1)if(!_n(r[i].charCodeAt(0),e))return!1;return!0}(t,An.isLoaded())},En.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},En.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),i=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*e}};var kn=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Ji(t))return new cr(t,e);if(or(t)){var i=lr(t,e);if("error"===i.result)throw new Error(i.value.map((function(t){return t.key+": "+t.message})).join(", "));return i.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=de.parse(t)),{kind:"constant",evaluate:function(){return r}}}(void 0===e?t.specification.default:e,t.specification)};kn.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},kn.prototype.possiblyEvaluate=function(t,e,i){return this.property.possiblyEvaluate(this,t,e,i)};var Cn=function(t){this.property=t,this.value=new kn(t,void 0)};Cn.prototype.transitioned=function(t,e){return new Dn(this.property,this.value,e,m({},t.transition,this.transition),t.now)},Cn.prototype.untransitioned=function(){return new Dn(this.property,this.value,null,{},0)};var Pn=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};Pn.prototype.getValue=function(t){return T(this._values[t].value.value)},Pn.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Cn(this._values[t].property)),this._values[t].value=new kn(this._values[t].property,null===e?void 0:T(e))},Pn.prototype.getTransition=function(t){return T(this._values[t].transition)},Pn.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Cn(this._values[t].property)),this._values[t].transition=T(e)||void 0},Pn.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var r=i[e],n=this.getValue(r);void 0!==n&&(t[r]=n);var o=this.getTransition(r);void 0!==o&&(t[r+"-transition"]=o)}return t},Pn.prototype.transitioned=function(t,e){for(var i=new Mn(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var o=n[r];i._values[o]=this._values[o].transitioned(t,e._values[o])}return i},Pn.prototype.untransitioned=function(){for(var t=new Mn(this._properties),e=0,i=Object.keys(this._values);e<i.length;e+=1){var r=i[e];t._values[r]=this._values[r].untransitioned()}return t};var Dn=function(t,e,i,r,n){this.property=t,this.value=e,this.begin=n+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=i)};Dn.prototype.possiblyEvaluate=function(t,e,i){var r=t.now||0,n=this.value.possiblyEvaluate(t,e,i),o=this.prior;if(o){if(r>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(r<this.begin)return o.possiblyEvaluate(t,e,i);var a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,i),n,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)}(a))}return n};var Mn=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};Mn.prototype.possiblyEvaluate=function(t,e,i){for(var r=new Rn(this._properties),n=0,o=Object.keys(this._values);n<o.length;n+=1){var a=o[n];r._values[a]=this._values[a].possiblyEvaluate(t,e,i)}return r},Mn.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var Ln=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Ln.prototype.getValue=function(t){return T(this._values[t].value)},Ln.prototype.setValue=function(t,e){this._values[t]=new kn(this._values[t].property,null===e?void 0:T(e))},Ln.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var r=i[e],n=this.getValue(r);void 0!==n&&(t[r]=n)}return t},Ln.prototype.possiblyEvaluate=function(t,e,i){for(var r=new Rn(this._properties),n=0,o=Object.keys(this._values);n<o.length;n+=1){var a=o[n];r._values[a]=this._values[a].possiblyEvaluate(t,e,i)}return r};var Bn=function(t,e,i){this.property=t,this.value=e,this.parameters=i};Bn.prototype.isConstant=function(){return"constant"===this.value.kind},Bn.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},Bn.prototype.evaluate=function(t,e,i,r){return this.property.evaluate(this.value,this.parameters,t,e,i,r)};var Rn=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Rn.prototype.get=function(t){return this._values[t]};var Fn=function(t){this.specification=t};Fn.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Fn.prototype.interpolate=function(t,e,i){var r=oi[this.specification.type];return r?r(t,e,i):t};var On=function(t,e){this.specification=t,this.overrides=e};On.prototype.possiblyEvaluate=function(t,e,i,r){return new Bn(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},i,r)}:t.expression,e)},On.prototype.interpolate=function(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Bn(this,{kind:"constant",value:void 0},t.parameters);var r=oi[this.specification.type];return r?new Bn(this,{kind:"constant",value:r(t.value.value,e.value.value,i)},t.parameters):t},On.prototype.evaluate=function(t,e,i,r,n,o){return"constant"===t.kind?t.value:t.evaluate(e,i,r,n,o)};var Vn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e,i,r){if(void 0===t.value)return new Bn(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var n=t.expression.evaluate(e,null,{},i,r),o="resolvedImage"===t.property.specification.type&&"string"!=typeof n?n.name:n,a=this._calculate(o,o,o,e);return new Bn(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Bn(this,{kind:"constant",value:s},e)}return new Bn(this,t.expression,e)},e.prototype.evaluate=function(t,e,i,r,n,o){if("source"===t.kind){var a=t.evaluate(e,i,r,n,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},i,r),t.evaluate({zoom:Math.floor(e.zoom)},i,r),t.evaluate({zoom:Math.floor(e.zoom)+1},i,r),e):t.value},e.prototype._calculate=function(t,e,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}},e.prototype.interpolate=function(t){return t},e}(On),Un=function(t){this.specification=t};Un.prototype.possiblyEvaluate=function(t,e,i,r){if(void 0!==t.value){if("constant"===t.expression.kind){var n=t.expression.evaluate(e,null,{},i,r);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate(new En(Math.floor(e.zoom-1),e)),t.expression.evaluate(new En(Math.floor(e.zoom),e)),t.expression.evaluate(new En(Math.floor(e.zoom+1),e)),e)}},Un.prototype._calculate=function(t,e,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}},Un.prototype.interpolate=function(t){return t};var jn=function(t){this.specification=t};jn.prototype.possiblyEvaluate=function(t,e,i,r){return!!t.expression.evaluate(e,null,{},i,r)},jn.prototype.interpolate=function(){return!1};var Nn=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var i=t[e];i.specification.overridable&&this.overridableProperties.push(e);var r=this.defaultPropertyValues[e]=new kn(i,void 0),n=this.defaultTransitionablePropertyValues[e]=new Cn(i);this.defaultTransitioningPropertyValues[e]=n.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}};Jr("DataDrivenProperty",On),Jr("DataConstantProperty",Fn),Jr("CrossFadedDataDrivenProperty",Vn),Jr("CrossFadedProperty",Un),Jr("ColorRampProperty",jn);var qn=function(t){function e(e,i){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),i.layout&&(this._unevaluatedLayout=new Ln(i.layout)),i.paint)){for(var r in this._transitionablePaint=new Pn(i.paint),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(var n in e.layout)this.setLayoutProperty(n,e.layout[n],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Rn(i.paint)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,i){void 0===i&&(i={}),null!=e&&this._validate(Zr,"layers."+this.id+".layout."+t,t,e,i)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},e.prototype.getPaintProperty=function(t){return w(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,i){if(void 0===i&&(i={}),null!=e&&this._validate(qr,"layers."+this.id+".paint."+t,t,e,i))return!1;if(w(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var r=this._transitionablePaint._values[t],n="cross-faded-data-driven"===r.property.specification["property-type"],o=r.value.isDataDriven(),a=r.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||o||n||this._handleOverridablePaintPropertyUpdate(t,a,s)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,i){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),S(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))},e.prototype._validate=function(t,e,i,r,n){return void 0===n&&(n={}),(!n||!1!==n.validate)&&Gr(this,t.call(jr,{key:e,layerType:this.type,objectKey:i,value:r,styleSpec:qt,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof Bn&&Wi(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(Nt),Zn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Gn=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Xn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Wn(t,e){void 0===e&&(e=1);var i=0,r=0;return{members:t.map((function(t){var n=Zn[t.type].BYTES_PER_ELEMENT,o=i=Hn(i,Math.max(e,n)),a=t.components||1;return r=Math.max(r,n),i+=n*a,{name:t.name,type:t.type,components:a,offset:o}})),size:Hn(i,Math.max(r,e)),alignment:e}}function Hn(t,e){return Math.ceil(t/e)*e}Xn.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Xn.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Xn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Xn.prototype.clear=function(){this.length=0},Xn.prototype.resize=function(t){this.reserve(t),this.length=t},Xn.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Xn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Kn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=i,t},e}(Xn);Kn.prototype.bytesPerElement=4,Jr("StructArrayLayout2i4",Kn);var Yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)},e.prototype.emplace=function(t,e,i,r,n){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=i,this.int16[o+2]=r,this.int16[o+3]=n,t},e}(Xn);Yn.prototype.bytesPerElement=8,Jr("StructArrayLayout4i8",Yn);var Jn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)},e.prototype.emplace=function(t,e,i,r,n,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Xn);Jn.prototype.bytesPerElement=12,Jr("StructArrayLayout2i4i12",Jn);var Qn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)},e.prototype.emplace=function(t,e,i,r,n,o,a){var s=4*t,u=8*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.uint8[u+4]=r,this.uint8[u+5]=n,this.uint8[u+6]=o,this.uint8[u+7]=a,t},e}(Xn);Qn.prototype.bytesPerElement=8,Jr("StructArrayLayout2i4ub8",Qn);var $n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=i,t},e}(Xn);$n.prototype.bytesPerElement=8,Jr("StructArrayLayout2f8",$n);var to=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u,l){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,i,r,n,o,a,s,u,l)},e.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l,c){var p=10*t;return this.uint16[p+0]=e,this.uint16[p+1]=i,this.uint16[p+2]=r,this.uint16[p+3]=n,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=u,this.uint16[p+8]=l,this.uint16[p+9]=c,t},e}(Xn);to.prototype.bytesPerElement=20,Jr("StructArrayLayout10ui20",to);var eo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u,l,c,p){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,i,r,n,o,a,s,u,l,c,p)},e.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l,c,p,h){var f=12*t;return this.int16[f+0]=e,this.int16[f+1]=i,this.int16[f+2]=r,this.int16[f+3]=n,this.uint16[f+4]=o,this.uint16[f+5]=a,this.uint16[f+6]=s,this.uint16[f+7]=u,this.int16[f+8]=l,this.int16[f+9]=c,this.int16[f+10]=p,this.int16[f+11]=h,t},e}(Xn);eo.prototype.bytesPerElement=24,Jr("StructArrayLayout4i4ui4i24",eo);var io=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},e.prototype.emplace=function(t,e,i,r){var n=3*t;return this.float32[n+0]=e,this.float32[n+1]=i,this.float32[n+2]=r,t},e}(Xn);io.prototype.bytesPerElement=12,Jr("StructArrayLayout3f12",io);var ro=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(Xn);ro.prototype.bytesPerElement=4,Jr("StructArrayLayout1ul4",ro);var no=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,i,r,n,o,a,s,u)},e.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l){var c=10*t,p=5*t;return this.int16[c+0]=e,this.int16[c+1]=i,this.int16[c+2]=r,this.int16[c+3]=n,this.int16[c+4]=o,this.int16[c+5]=a,this.uint32[p+3]=s,this.uint16[c+8]=u,this.uint16[c+9]=l,t},e}(Xn);no.prototype.bytesPerElement=20,Jr("StructArrayLayout6i1ul2ui20",no);var oo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)},e.prototype.emplace=function(t,e,i,r,n,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Xn);oo.prototype.bytesPerElement=12,Jr("StructArrayLayout2i2i2i12",oo);var ao=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,i,r,n)},e.prototype.emplace=function(t,e,i,r,n,o){var a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=i,this.float32[a+2]=r,this.int16[s+6]=n,this.int16[s+7]=o,t},e}(Xn);ao.prototype.bytesPerElement=16,Jr("StructArrayLayout2f1f2i16",ao);var so=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)},e.prototype.emplace=function(t,e,i,r,n){var o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=i,this.float32[a+1]=r,this.float32[a+2]=n,t},e}(Xn);so.prototype.bytesPerElement=12,Jr("StructArrayLayout2ub2f12",so);var uo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},e.prototype.emplace=function(t,e,i,r){var n=3*t;return this.uint16[n+0]=e,this.uint16[n+1]=i,this.uint16[n+2]=r,t},e}(Xn);uo.prototype.bytesPerElement=6,Jr("StructArrayLayout3ui6",uo);var lo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u,l,c,p,h,f,d,m,y){var _=this.length;return this.resize(_+1),this.emplace(_,t,e,i,r,n,o,a,s,u,l,c,p,h,f,d,m,y)},e.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l,c,p,h,f,d,m,y,_){var g=24*t,v=12*t,x=48*t;return this.int16[g+0]=e,this.int16[g+1]=i,this.uint16[g+2]=r,this.uint16[g+3]=n,this.uint32[v+2]=o,this.uint32[v+3]=a,this.uint32[v+4]=s,this.uint16[g+10]=u,this.uint16[g+11]=l,this.uint16[g+12]=c,this.float32[v+7]=p,this.float32[v+8]=h,this.uint8[x+36]=f,this.uint8[x+37]=d,this.uint8[x+38]=m,this.uint32[v+10]=y,this.int16[g+22]=_,t},e}(Xn);lo.prototype.bytesPerElement=48,Jr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",lo);var co=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u,l,c,p,h,f,d,m,y,_,g,v,x,b,w,I,S,T,z,A){var E=this.length;return this.resize(E+1),this.emplace(E,t,e,i,r,n,o,a,s,u,l,c,p,h,f,d,m,y,_,g,v,x,b,w,I,S,T,z,A)},e.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l,c,p,h,f,d,m,y,_,g,v,x,b,w,I,S,T,z,A,E){var k=34*t,C=17*t;return this.int16[k+0]=e,this.int16[k+1]=i,this.int16[k+2]=r,this.int16[k+3]=n,this.int16[k+4]=o,this.int16[k+5]=a,this.int16[k+6]=s,this.int16[k+7]=u,this.uint16[k+8]=l,this.uint16[k+9]=c,this.uint16[k+10]=p,this.uint16[k+11]=h,this.uint16[k+12]=f,this.uint16[k+13]=d,this.uint16[k+14]=m,this.uint16[k+15]=y,this.uint16[k+16]=_,this.uint16[k+17]=g,this.uint16[k+18]=v,this.uint16[k+19]=x,this.uint16[k+20]=b,this.uint16[k+21]=w,this.uint16[k+22]=I,this.uint32[C+12]=S,this.float32[C+13]=T,this.float32[C+14]=z,this.float32[C+15]=A,this.float32[C+16]=E,t},e}(Xn);co.prototype.bytesPerElement=68,Jr("StructArrayLayout8i15ui1ul4f68",co);var po=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(Xn);po.prototype.bytesPerElement=4,Jr("StructArrayLayout1f4",po);var ho=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},e.prototype.emplace=function(t,e,i,r){var n=3*t;return this.int16[n+0]=e,this.int16[n+1]=i,this.int16[n+2]=r,t},e}(Xn);ho.prototype.bytesPerElement=6,Jr("StructArrayLayout3i6",ho);var fo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},e.prototype.emplace=function(t,e,i,r){var n=4*t;return this.uint32[2*t+0]=e,this.uint16[n+2]=i,this.uint16[n+3]=r,t},e}(Xn);fo.prototype.bytesPerElement=8,Jr("StructArrayLayout1ul2ui8",fo);var mo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=i,t},e}(Xn);mo.prototype.bytesPerElement=4,Jr("StructArrayLayout2ui4",mo);var yo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(Xn);yo.prototype.bytesPerElement=2,Jr("StructArrayLayout1ui2",yo);var _o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)},e.prototype.emplace=function(t,e,i,r,n){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=i,this.float32[o+2]=r,this.float32[o+3]=n,t},e}(Xn);_o.prototype.bytesPerElement=16,Jr("StructArrayLayout4f16",_o);var go=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new n(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,i),e}(Gn);go.prototype.size=20;var vo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new go(this,t)},e}(no);Jr("CollisionBoxArray",vo);var xo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,i),e}(Gn);xo.prototype.size=48;var bo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new xo(this,t)},e}(lo);Jr("PlacedSymbolArray",bo);var wo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(t){this._structArray.uint32[this._pos4+12]=t},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,i),e}(Gn);wo.prototype.size=68;var Io=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new wo(this,t)},e}(co);Jr("SymbolInstanceArray",Io);var So=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e}(po);Jr("GlyphOffsetArray",So);var To=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(ho);Jr("SymbolLineVertexArray",To);var zo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,i),e}(Gn);zo.prototype.size=8;var Ao=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new zo(this,t)},e}(fo);Jr("FeatureIndexArray",Ao);var Eo=Wn([{name:"a_pos",components:2,type:"Int16"}],4).members,ko=function(t){void 0===t&&(t=[]),this.segments=t};function Co(t,e){return 256*(t=p(Math.floor(t),0,255))+p(Math.floor(e),0,255)}ko.prototype.prepareSegment=function(t,e,i,r){var n=this.segments[this.segments.length-1];return t>ko.MAX_VERTEX_ARRAY_LENGTH&&A("Max vertices per segment is "+ko.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!n||n.vertexLength+t>ko.MAX_VERTEX_ARRAY_LENGTH||n.sortKey!==r)&&(n={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==r&&(n.sortKey=r),this.segments.push(n)),n},ko.prototype.get=function(){return this.segments},ko.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var i=e[t];for(var r in i.vaos)i.vaos[r].destroy()}},ko.simpleSegment=function(t,e,i,r){return new ko([{vertexOffset:t,primitiveOffset:e,vertexLength:i,primitiveLength:r,vaos:{},sortKey:0}])},ko.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Jr("SegmentVector",ko);var Po=Wn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Do=t((function(t){t.exports=function(t,e){var i,r,n,o,a,s,u,l;for(r=t.length-(i=3&t.length),n=e,a=3432918353,s=461845907,l=0;l<r;)u=255&t.charCodeAt(l)|(255&t.charCodeAt(++l))<<8|(255&t.charCodeAt(++l))<<16|(255&t.charCodeAt(++l))<<24,++l,n=27492+(65535&(o=5*(65535&(n=(n^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,i){case 3:u^=(255&t.charCodeAt(l+2))<<16;case 2:u^=(255&t.charCodeAt(l+1))<<8;case 1:n^=u=(65535&(u=(u=(65535&(u^=255&t.charCodeAt(l)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return n^=t.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0}})),Mo=t((function(t){t.exports=function(t,e){for(var i,r=t.length,n=e^r,o=0;r>=4;)i=1540483477*(65535&(i=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(i>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:n^=(255&t.charCodeAt(o+2))<<16;case 2:n^=(255&t.charCodeAt(o+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(o)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0}})),Lo=Do,Bo=Mo;Lo.murmur3=Do,Lo.murmur2=Bo;var Ro=function(){this.ids=[],this.positions=[],this.indexed=!1};Ro.prototype.add=function(t,e,i,r){this.ids.push(Oo(t)),this.positions.push(e,i,r)},Ro.prototype.getPositions=function(t){for(var e=Oo(t),i=0,r=this.ids.length-1;i<r;){var n=i+r>>1;this.ids[n]>=e?r=n:i=n+1}for(var o=[];this.ids[i]===e;)o.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return o},Ro.serialize=function(t,e){var i=new Float64Array(t.ids),r=new Uint32Array(t.positions);return function t(e,i,r,n){for(;r<n;){for(var o=e[r+n>>1],a=r-1,s=n+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;Vo(e,a,s),Vo(i,3*a,3*s),Vo(i,3*a+1,3*s+1),Vo(i,3*a+2,3*s+2)}s-r<n-s?(t(e,i,r,s),r=s+1):(t(e,i,s+1,n),n=s)}}(i,r,0,i.length-1),e&&e.push(i.buffer,r.buffer),{ids:i,positions:r}},Ro.deserialize=function(t){var e=new Ro;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var Fo=Math.pow(2,53)-1;function Oo(t){var e=+t;return!isNaN(e)&&e<=Fo?e:Lo(String(t))}function Vo(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}Jr("FeaturePositionMap",Ro);var Uo=function(t,e){this.gl=t.gl,this.location=e},jo=function(t){function e(e,i){t.call(this,e,i),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(Uo),No=function(t){function e(e,i){t.call(this,e,i),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(Uo),qo=function(t){function e(e,i){t.call(this,e,i),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(Uo),Zo=function(t){function e(e,i){t.call(this,e,i),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(Uo),Go=function(t){function e(e,i){t.call(this,e,i),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(Uo),Xo=function(t){function e(e,i){t.call(this,e,i),this.current=de.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(Uo),Wo=new Float32Array(16),Ho=function(t){function e(e,i){t.call(this,e,i),this.current=Wo}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(Uo);function Ko(t){return[Co(255*t.r,255*t.g),Co(255*t.b,255*t.a)]}var Yo=function(t,e,i){this.value=t,this.uniformNames=e.map((function(t){return"u_"+t})),this.type=i};Yo.prototype.setUniform=function(t,e,i){t.set(i.constantOr(this.value))},Yo.prototype.getBinding=function(t,e,i){return"color"===this.type?new Xo(t,e):new No(t,e)};var Jo=function(t,e){this.uniformNames=e.map((function(t){return"u_"+t})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Jo.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},Jo.prototype.setUniform=function(t,e,i,r){var n="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;n&&t.set(n)},Jo.prototype.getBinding=function(t,e,i){return"u_pattern"===i.substr(0,9)?new Go(t,e):new No(t,e)};var Qo=function(t,e,i,r){this.expression=t,this.type=i,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===i?2:1,offset:0}})),this.paintVertexArray=new r};Qo.prototype.populatePaintArray=function(t,e,i,r,n){var o=this.paintVertexArray.length,a=this.expression.evaluate(new En(0),e,{},r,[],n);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)},Qo.prototype.updatePaintArray=function(t,e,i,r){var n=this.expression.evaluate({zoom:0},i,r);this._setPaintValue(t,e,n)},Qo.prototype._setPaintValue=function(t,e,i){if("color"===this.type)for(var r=Ko(i),n=t;n<e;n++)this.paintVertexArray.emplace(n,r[0],r[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},Qo.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Qo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var $o=function(t,e,i,r,n,o){this.expression=t,this.uniformNames=e.map((function(t){return"u_"+t+"_t"})),this.type=i,this.useIntegerZoom=r,this.zoom=n,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===i?4:2,offset:0}})),this.paintVertexArray=new o};$o.prototype.populatePaintArray=function(t,e,i,r,n){var o=this.expression.evaluate(new En(this.zoom),e,{},r,[],n),a=this.expression.evaluate(new En(this.zoom+1),e,{},r,[],n),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)},$o.prototype.updatePaintArray=function(t,e,i,r){var n=this.expression.evaluate({zoom:this.zoom},i,r),o=this.expression.evaluate({zoom:this.zoom+1},i,r);this._setPaintValue(t,e,n,o)},$o.prototype._setPaintValue=function(t,e,i,r){if("color"===this.type)for(var n=Ko(i),o=Ko(r),a=t;a<e;a++)this.paintVertexArray.emplace(a,n[0],n[1],o[0],o[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,i,r);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(r))}},$o.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},$o.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},$o.prototype.setUniform=function(t,e){var i=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=p(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);t.set(r)},$o.prototype.getBinding=function(t,e,i){return new No(t,e)};var ta=function(t,e,i,r,n,o){this.expression=t,this.type=e,this.useIntegerZoom=i,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new n,this.zoomOutPaintVertexArray=new n};ta.prototype.populatePaintArray=function(t,e,i){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],i)},ta.prototype.updatePaintArray=function(t,e,i,r,n){this._setPaintValues(t,e,i.patterns&&i.patterns[this.layerId],n)},ta.prototype._setPaintValues=function(t,e,i,r){if(r&&i){var n=r[i.min],o=r[i.mid],a=r[i.max];if(n&&o&&a)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],n.tl[0],n.tl[1],n.br[0],n.br[1],o.pixelRatio,n.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],o.pixelRatio,a.pixelRatio)}},ta.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Po.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Po.members,this.expression.isStateDependent))},ta.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ea=function(t,e,i){this.binders={},this._buffers=[];var r=[];for(var n in t.paint._values)if(i(n)){var o=t.paint.get(n);if(o instanceof Bn&&Wi(o.property.specification)){var a=ra(n,t.type),s=o.value,u=o.property.specification.type,l=o.property.useIntegerZoom,c=o.property.specification["property-type"],p="cross-faded"===c||"cross-faded-data-driven"===c;if("constant"===s.kind)this.binders[n]=p?new Jo(s.value,a):new Yo(s.value,a,u),r.push("/u_"+n);else if("source"===s.kind||p){var h=na(n,u,"source");this.binders[n]=p?new ta(s,u,l,e,h,t.id):new Qo(s,a,u,h),r.push("/a_"+n)}else{var f=na(n,u,"composite");this.binders[n]=new $o(s,a,u,l,e,f),r.push("/z_"+n)}}}this.cacheKey=r.sort().join("")};ea.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof Qo||e instanceof $o?e.maxValue:0},ea.prototype.populatePaintArrays=function(t,e,i,r,n){for(var o in this.binders){var a=this.binders[o];(a instanceof Qo||a instanceof $o||a instanceof ta)&&a.populatePaintArray(t,e,i,r,n)}},ea.prototype.setConstantPatternPositions=function(t,e){for(var i in this.binders){var r=this.binders[i];r instanceof Jo&&r.setConstantPatternPositions(t,e)}},ea.prototype.updatePaintArrays=function(t,e,i,r,n){var o=!1;for(var a in t)for(var s=0,u=e.getPositions(a);s<u.length;s+=1){var l=u[s],c=i.feature(l.index);for(var p in this.binders){var h=this.binders[p];if((h instanceof Qo||h instanceof $o||h instanceof ta)&&!0===h.expression.isStateDependent){var f=r.paint.get(p);h.expression=f.value,h.updatePaintArray(l.start,l.end,c,t[a],n),o=!0}}}return o},ea.prototype.defines=function(){var t=[];for(var e in this.binders){var i=this.binders[e];(i instanceof Yo||i instanceof Jo)&&t.push.apply(t,i.uniformNames.map((function(t){return"#define HAS_UNIFORM_"+t})))}return t},ea.prototype.getBinderAttributes=function(){var t=[];for(var e in this.binders){var i=this.binders[e];if(i instanceof Qo||i instanceof $o)for(var r=0;r<i.paintVertexAttributes.length;r++)t.push(i.paintVertexAttributes[r].name);else if(i instanceof ta)for(var n=0;n<Po.members.length;n++)t.push(Po.members[n].name)}return t},ea.prototype.getBinderUniforms=function(){var t=[];for(var e in this.binders){var i=this.binders[e];if(i instanceof Yo||i instanceof Jo||i instanceof $o)for(var r=0,n=i.uniformNames;r<n.length;r+=1)t.push(n[r])}return t},ea.prototype.getPaintVertexBuffers=function(){return this._buffers},ea.prototype.getUniforms=function(t,e){var i=[];for(var r in this.binders){var n=this.binders[r];if(n instanceof Yo||n instanceof Jo||n instanceof $o)for(var o=0,a=n.uniformNames;o<a.length;o+=1){var s=a[o];if(e[s]){var u=n.getBinding(t,e[s],s);i.push({name:s,property:r,binding:u})}}}return i},ea.prototype.setUniforms=function(t,e,i,r){for(var n=0,o=e;n<o.length;n+=1){var a=o[n],s=a.name,u=a.property;this.binders[u].setUniform(a.binding,r,i.get(u),s)}},ea.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var i=this.binders[e];if(t&&i instanceof ta){var r=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;r&&this._buffers.push(r)}else(i instanceof Qo||i instanceof $o)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},ea.prototype.upload=function(t){for(var e in this.binders){var i=this.binders[e];(i instanceof Qo||i instanceof $o||i instanceof ta)&&i.upload(t)}this.updatePaintBuffers()},ea.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof Qo||e instanceof $o||e instanceof ta)&&e.destroy()}};var ia=function(t,e,i){void 0===i&&(i=function(){return!0}),this.programConfigurations={};for(var r=0,n=t;r<n.length;r+=1){var o=n[r];this.programConfigurations[o.id]=new ea(o,e,i)}this.needsUpload=!1,this._featureMap=new Ro,this._bufferOffset=0};function ra(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function na(t,e,i){var r={color:{source:$n,composite:_o},number:{source:po,composite:$n}},n=function(t){return{"line-pattern":{source:to,composite:to},"fill-pattern":{source:to,composite:to},"fill-extrusion-pattern":{source:to,composite:to}}[t]}(t);return n&&n[i]||r[e][i]}ia.prototype.populatePaintArrays=function(t,e,i,r,n,o){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,r,n,o);void 0!==e.id&&this._featureMap.add(e.id,i,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},ia.prototype.updatePaintArrays=function(t,e,i,r){for(var n=0,o=i;n<o.length;n+=1){var a=o[n];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,r)||this.needsUpload}},ia.prototype.get=function(t){return this.programConfigurations[t]},ia.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},ia.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Jr("ConstantBinder",Yo),Jr("CrossFadedConstantBinder",Jo),Jr("SourceExpressionBinder",Qo),Jr("CrossFadedCompositeBinder",ta),Jr("CompositeExpressionBinder",$o),Jr("ProgramConfiguration",ea,{omit:["_buffers"]}),Jr("ProgramConfigurationSet",ia);var oa=Math.pow(2,14)-1,aa=-oa-1;function sa(t){for(var e=8192/t.extent,i=t.loadGeometry(),r=0;r<i.length;r++)for(var n=i[r],o=0;o<n.length;o++){var a=n[o],s=Math.round(a.x*e),u=Math.round(a.y*e);a.x=p(s,aa,oa),a.y=p(u,aa,oa),(s<a.x||s>a.x+1||u<a.y||u>a.y+1)&&A("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function ua(t,e,i,r,n){t.emplaceBack(2*e+(r+1)/2,2*i+(n+1)/2)}var la=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Kn,this.indexArray=new uo,this.segments=new ko,this.programConfigurations=new ia(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function ca(t,e){for(var i=0;i<t.length;i++)if(va(e,t[i]))return!0;for(var r=0;r<e.length;r++)if(va(t,e[r]))return!0;return!!da(t,e)}function pa(t,e,i){return!!va(t,e)||!!ya(e,t,i)}function ha(t,e){if(1===t.length)return ga(e,t[0]);for(var i=0;i<e.length;i++)for(var r=e[i],n=0;n<r.length;n++)if(va(t,r[n]))return!0;for(var o=0;o<t.length;o++)if(ga(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(da(t,e[a]))return!0;return!1}function fa(t,e,i){if(t.length>1){if(da(t,e))return!0;for(var r=0;r<e.length;r++)if(ya(e[r],t,i))return!0}for(var n=0;n<t.length;n++)if(ya(t[n],e,i))return!0;return!1}function da(t,e){if(0===t.length||0===e.length)return!1;for(var i=0;i<t.length-1;i++)for(var r=t[i],n=t[i+1],o=0;o<e.length-1;o++)if(ma(r,n,e[o],e[o+1]))return!0;return!1}function ma(t,e,i,r){return E(t,i,r)!==E(e,i,r)&&E(t,e,i)!==E(t,e,r)}function ya(t,e,i){var r=i*i;if(1===e.length)return t.distSqr(e[0])<r;for(var n=1;n<e.length;n++)if(_a(t,e[n-1],e[n])<r)return!0;return!1}function _a(t,e,i){var r=e.distSqr(i);if(0===r)return t.distSqr(e);var n=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/r;return t.distSqr(n<0?e:n>1?i:i.sub(e)._mult(n)._add(e))}function ga(t,e){for(var i,r,n,o=!1,a=0;a<t.length;a++)for(var s=0,u=(i=t[a]).length-1;s<i.length;u=s++)(r=i[s]).y>e.y!=(n=i[u]).y>e.y&&e.x<(n.x-r.x)*(e.y-r.y)/(n.y-r.y)+r.x&&(o=!o);return o}function va(t,e){for(var i=!1,r=0,n=t.length-1;r<t.length;n=r++){var o=t[r],a=t[n];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(i=!i)}return i}function xa(t,e,i){var r=i[0],n=i[2];if(t.x<r.x&&e.x<r.x||t.x>n.x&&e.x>n.x||t.y<r.y&&e.y<r.y||t.y>n.y&&e.y>n.y)return!1;var o=E(t,e,i[0]);return o!==E(t,e,i[1])||o!==E(t,e,i[2])||o!==E(t,e,i[3])}function ba(t,e,i){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:i.programConfigurations.get(e.id).getMaxValue(t)}function wa(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ia(t,e,i,r,o){if(!e[0]&&!e[1])return t;var a=n.convert(e)._mult(o);"viewport"===i&&a._rotate(-r);for(var s=[],u=0;u<t.length;u++)s.push(t[u].sub(a));return s}la.prototype.populate=function(t,e,i){var r=this.layers[0],n=[],o=null;"circle"===r.type&&(o=r.layout.get("circle-sort-key"));for(var a=0,s=t;a<s.length;a+=1){var u=s[a],l=u.feature,c=u.id,p=u.index,h=u.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,d={type:l.type,id:c,properties:l.properties,geometry:f?sa(l):[]};if(this.layers[0]._featureFilter.filter(new En(this.zoom),d,i)){f||(d.geometry=sa(l));var m=o?o.evaluate(d,{},i):void 0;n.push({id:c,properties:l.properties,type:l.type,sourceLayerIndex:h,index:p,geometry:d.geometry,patterns:{},sortKey:m})}}o&&n.sort((function(t,e){return t.sortKey-e.sortKey}));for(var y=0,_=n;y<_.length;y+=1){var g=_[y],v=g.geometry,x=g.index,b=g.sourceLayerIndex,w=t[x].feature;this.addFeature(g,v,x,i),e.featureIndex.insert(w,v,x,b,this.index)}},la.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},la.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},la.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},la.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Eo),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},la.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},la.prototype.addFeature=function(t,e,i,r){for(var n=0,o=e;n<o.length;n+=1)for(var a=0,s=o[n];a<s.length;a+=1){var u=s[a],l=u.x,c=u.y;if(!(l<0||l>=8192||c<0||c>=8192)){var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),h=p.vertexLength;ua(this.layoutVertexArray,l,c,-1,-1),ua(this.layoutVertexArray,l,c,1,-1),ua(this.layoutVertexArray,l,c,1,1),ua(this.layoutVertexArray,l,c,-1,1),this.indexArray.emplaceBack(h,h+1,h+2),this.indexArray.emplaceBack(h,h+3,h+2),p.vertexLength+=4,p.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,{},r)},Jr("CircleBucket",la,{omit:["layers"]});var Sa=new Nn({"circle-sort-key":new On(qt.layout_circle["circle-sort-key"])}),Ta={paint:new Nn({"circle-radius":new On(qt.paint_circle["circle-radius"]),"circle-color":new On(qt.paint_circle["circle-color"]),"circle-blur":new On(qt.paint_circle["circle-blur"]),"circle-opacity":new On(qt.paint_circle["circle-opacity"]),"circle-translate":new Fn(qt.paint_circle["circle-translate"]),"circle-translate-anchor":new Fn(qt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Fn(qt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Fn(qt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new On(qt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new On(qt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new On(qt.paint_circle["circle-stroke-opacity"])}),layout:Sa},za="undefined"!=typeof Float32Array?Float32Array:Array;function Aa(){var t=new za(16);return za!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Ea(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ka(t,e){var i=e[0],r=e[1],n=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],p=e[9],h=e[10],f=e[11],d=e[12],m=e[13],y=e[14],_=e[15],g=i*s-r*a,v=i*u-n*a,x=i*l-o*a,b=r*u-n*s,w=r*l-o*s,I=n*l-o*u,S=c*m-p*d,T=c*y-h*d,z=c*_-f*d,A=p*y-h*m,E=p*_-f*m,k=h*_-f*y,C=g*k-v*E+x*A+b*z-w*T+I*S;return C?(t[0]=(s*k-u*E+l*A)*(C=1/C),t[1]=(n*E-r*k-o*A)*C,t[2]=(m*I-y*w+_*b)*C,t[3]=(h*w-p*I-f*b)*C,t[4]=(u*z-a*k-l*T)*C,t[5]=(i*k-n*z+o*T)*C,t[6]=(y*x-d*I-_*v)*C,t[7]=(c*I-h*x+f*v)*C,t[8]=(a*E-s*z+l*S)*C,t[9]=(r*z-i*E-o*S)*C,t[10]=(d*w-m*x+_*g)*C,t[11]=(p*x-c*w-f*g)*C,t[12]=(s*T-a*A-u*S)*C,t[13]=(i*A-r*T+n*S)*C,t[14]=(m*v-d*b-y*g)*C,t[15]=(c*b-p*v+h*g)*C,t):null}function Ca(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],m=e[12],y=e[13],_=e[14],g=e[15],v=i[0],x=i[1],b=i[2],w=i[3];return t[0]=v*r+x*s+b*p+w*m,t[1]=v*n+x*u+b*h+w*y,t[2]=v*o+x*l+b*f+w*_,t[3]=v*a+x*c+b*d+w*g,t[4]=(v=i[4])*r+(x=i[5])*s+(b=i[6])*p+(w=i[7])*m,t[5]=v*n+x*u+b*h+w*y,t[6]=v*o+x*l+b*f+w*_,t[7]=v*a+x*c+b*d+w*g,t[8]=(v=i[8])*r+(x=i[9])*s+(b=i[10])*p+(w=i[11])*m,t[9]=v*n+x*u+b*h+w*y,t[10]=v*o+x*l+b*f+w*_,t[11]=v*a+x*c+b*d+w*g,t[12]=(v=i[12])*r+(x=i[13])*s+(b=i[14])*p+(w=i[15])*m,t[13]=v*n+x*u+b*h+w*y,t[14]=v*o+x*l+b*f+w*_,t[15]=v*a+x*c+b*d+w*g,t}function Pa(t,e,i){var r,n,o,a,s,u,l,c,p,h,f,d,m=i[0],y=i[1],_=i[2];return e===t?(t[12]=e[0]*m+e[4]*y+e[8]*_+e[12],t[13]=e[1]*m+e[5]*y+e[9]*_+e[13],t[14]=e[2]*m+e[6]*y+e[10]*_+e[14],t[15]=e[3]*m+e[7]*y+e[11]*_+e[15]):(n=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],t[0]=r=e[0],t[1]=n,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=p,t[9]=h,t[10]=f,t[11]=d,t[12]=r*m+s*y+p*_+e[12],t[13]=n*m+u*y+h*_+e[13],t[14]=o*m+l*y+f*_+e[14],t[15]=a*m+c*y+d*_+e[15]),t}function Da(t,e,i){var r=i[0],n=i[1],o=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ma(t,e,i){var r=Math.sin(i),n=Math.cos(i),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],p=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n+l*r,t[1]=a*n+c*r,t[2]=s*n+p*r,t[3]=u*n+h*r,t[4]=l*n-o*r,t[5]=c*n-a*r,t[6]=p*n-s*r,t[7]=h*n-u*r,t}function La(t,e,i,r,n,o,a){var s=1/(e-i),u=1/(r-n),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+i)*s,t[13]=(n+r)*u,t[14]=(a+o)*l,t[15]=1,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,i=arguments.length;i--;)e+=t[i]*t[i];return Math.sqrt(e)});var Ba=Ca;function Ra(t){var e=new za(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}var Fa,Oa=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t};function Va(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*o+i[12]*a,t[1]=i[1]*r+i[5]*n+i[9]*o+i[13]*a,t[2]=i[2]*r+i[6]*n+i[10]*o+i[14]*a,t[3]=i[3]*r+i[7]*n+i[11]*o+i[15]*a,t}Fa=new za(3),za!=Float32Array&&(Fa[0]=0,Fa[1]=0,Fa[2]=0),function(){var t=new za(4);za!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var Ua=function(t){var e=t[0],i=t[1];return e*e+i*i},ja=(function(){var t=new za(2);za!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function e(e){t.call(this,e,Ta)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new la(t)},e.prototype.queryRadius=function(t){var e=t;return ba("circle-radius",this,e)+ba("circle-stroke-width",this,e)+wa(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,i,r,n,o,a,s){for(var u=Ia(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),l=this.paint.get("circle-radius").evaluate(e,i)+this.paint.get("circle-stroke-width").evaluate(e,i),c="map"===this.paint.get("circle-pitch-alignment"),p=c?u:function(t,e){return t.map((function(t){return Na(t,e)}))}(u,s),h=c?l*a:l,f=0,d=r;f<d.length;f+=1)for(var m=0,y=d[f];m<y.length;m+=1){var _=y[m],g=c?_:Na(_,s),v=h,x=Va([],[_.x,_.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?v*=x[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(v*=o.cameraToCenterDistance/x[3]),pa(p,g,v))return!0}return!1},e}(qn));function Na(t,e){var i=Va([],[t.x,t.y,0,1],e);return new n(i[0]/i[3],i[1]/i[3])}var qa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(la);function Za(t,e,i,r){var n=e.width,o=e.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==n*o*i)throw new RangeError("mismatched image size")}else r=new Uint8Array(n*o*i);return t.width=n,t.height=o,t.data=r,t}function Ga(t,e,i){var r=e.width,n=e.height;if(r!==t.width||n!==t.height){var o=Za({},{width:r,height:n},i);Xa(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,n)},i),t.width=r,t.height=n,t.data=o.data}}function Xa(t,e,i,r,n,o){if(0===n.width||0===n.height)return e;if(n.width>t.width||n.height>t.height||i.x>t.width-n.width||i.y>t.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>e.width||n.height>e.height||r.x>e.width-n.width||r.y>e.height-n.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,u=0;u<n.height;u++)for(var l=((i.y+u)*t.width+i.x)*o,c=((r.y+u)*e.width+r.x)*o,p=0;p<n.width*o;p++)s[c+p]=a[l+p];return e}Jr("HeatmapBucket",qa,{omit:["layers"]});var Wa=function(t,e){Za(this,t,1,e)};Wa.prototype.resize=function(t){Ga(this,t,1)},Wa.prototype.clone=function(){return new Wa({width:this.width,height:this.height},new Uint8Array(this.data))},Wa.copy=function(t,e,i,r,n){Xa(t,e,i,r,n,1)};var Ha=function(t,e){Za(this,t,4,e)};Ha.prototype.resize=function(t){Ga(this,t,4)},Ha.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},Ha.prototype.clone=function(){return new Ha({width:this.width,height:this.height},new Uint8Array(this.data))},Ha.copy=function(t,e,i,r,n){Xa(t,e,i,r,n,4)},Jr("AlphaImage",Wa),Jr("RGBAImage",Ha);var Ka={paint:new Nn({"heatmap-radius":new On(qt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new On(qt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Fn(qt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new jn(qt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Fn(qt.paint_heatmap["heatmap-opacity"])})};function Ya(t){var e={},i=t.resolution||256,r=t.clips?t.clips.length:1,n=t.image||new Ha({width:i,height:r}),o=function(i,r,o){e[t.evaluationKey]=o;var a=t.expression.evaluate(e);n.data[i+r+0]=Math.floor(255*a.r/a.a),n.data[i+r+1]=Math.floor(255*a.g/a.a),n.data[i+r+2]=Math.floor(255*a.b/a.a),n.data[i+r+3]=Math.floor(255*a.a)};if(t.clips)for(var a=0,s=0;a<r;++a,s+=4*i)for(var u=0,l=0;u<i;u++,l+=4){var c=u/(i-1),p=t.clips[a];o(s,l,p.start*(1-c)+p.end*c)}else for(var h=0,f=0;h<i;h++,f+=4)o(0,f,h/(i-1));return n}var Ja=function(t){function e(e){t.call(this,e,Ka),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new qa(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=Ya({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(qn),Qa={paint:new Nn({"hillshade-illumination-direction":new Fn(qt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Fn(qt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Fn(qt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Fn(qt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Fn(qt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Fn(qt.paint_hillshade["hillshade-accent-color"])})},$a=function(t){function e(e){t.call(this,e,Qa)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(qn),ts=Wn([{name:"a_pos",components:2,type:"Int16"}],4).members,es=rs,is=rs;function rs(t,e,i){i=i||2;var r,n,o,a,s,u,l,c=e&&e.length,p=c?e[0]*i:t.length,h=ns(t,0,p,i,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=function(t,e,i,r){var n,o,a,s=[];for(n=0,o=e.length;n<o;n++)(a=ns(t,e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(ms(a));for(s.sort(ps),n=0;n<s.length;n++)hs(s[n],i),i=os(i,i.next);return i}(t,e,h,i)),t.length>80*i){r=o=t[0],n=a=t[1];for(var d=i;d<p;d+=i)(s=t[d])<r&&(r=s),(u=t[d+1])<n&&(n=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-n))?1/l:0}return as(h,f,i,r,n,l),f}function ns(t,e,i,r,n){var o,a;if(n===Es(t,e,i,r)>0)for(o=e;o<i;o+=r)a=Ts(o,t[o],t[o+1],a);else for(o=i-r;o>=e;o-=r)a=Ts(o,t[o],t[o+1],a);return a&&vs(a,a.next)&&(zs(a),a=a.next),a}function os(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!vs(r,r.next)&&0!==gs(r.prev,r,r.next))r=r.next;else{if(zs(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function as(t,e,i,r,n,o,a){if(t){!a&&o&&function(t,e,i,r){var n=t;do{null===n.z&&(n.z=ds(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,o,a,s,u,l=1;do{for(i=t,t=null,o=null,a=0;i;){for(a++,r=i,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||i.z<=r.z)?(n=i,i=i.nextZ,s--):(n=r,r=r.nextZ,u--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=r}o.nextZ=null,l*=2}while(a>1)}(n)}(t,r,n,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?us(t,r,n,o):ss(t))e.push(s.i/i),e.push(t.i/i),e.push(u.i/i),zs(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?as(t=ls(os(t),e,i),e,i,r,n,o,2):2===a&&cs(t,e,i,r,n,o):as(os(t),e,i,r,n,o,1);break}}}function ss(t){var e=t.prev,i=t,r=t.next;if(gs(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(ys(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&gs(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function us(t,e,i,r){var n=t.prev,o=t,a=t.next;if(gs(n,o,a)>=0)return!1;for(var s=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,u=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,l=ds(n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,e,i,r),c=ds(s,u,e,i,r),p=t.prevZ,h=t.nextZ;p&&p.z>=l&&h&&h.z<=c;){if(p!==t.prev&&p!==t.next&&ys(n.x,n.y,o.x,o.y,a.x,a.y,p.x,p.y)&&gs(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,h!==t.prev&&h!==t.next&&ys(n.x,n.y,o.x,o.y,a.x,a.y,h.x,h.y)&&gs(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;p&&p.z>=l;){if(p!==t.prev&&p!==t.next&&ys(n.x,n.y,o.x,o.y,a.x,a.y,p.x,p.y)&&gs(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;h&&h.z<=c;){if(h!==t.prev&&h!==t.next&&ys(n.x,n.y,o.x,o.y,a.x,a.y,h.x,h.y)&&gs(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function ls(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!vs(n,o)&&xs(n,r,r.next,o)&&Is(n,o)&&Is(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),zs(r),zs(r.next),r=t=o),r=r.next}while(r!==t);return os(r)}function cs(t,e,i,r,n,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&_s(a,s)){var u=Ss(a,s);return a=os(a,a.next),u=os(u,u.next),as(a,e,i,r,n,o),void as(u,e,i,r,n,o)}s=s.next}a=a.next}while(a!==t)}function ps(t,e){return t.x-e.x}function hs(t,e){if(e=function(t,e){var i,r=e,n=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>a){if(a=s,s===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===a)return i;var u,l=i,c=i.x,p=i.y,h=1/0;r=i;do{n>=r.x&&r.x>=c&&n!==r.x&&ys(o<p?n:a,o,c,p,o<p?a:n,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(n-r.x),Is(r,t)&&(u<h||u===h&&(r.x>i.x||r.x===i.x&&fs(i,r)))&&(i=r,h=u)),r=r.next}while(r!==l);return i}(t,e)){var i=Ss(e,t);os(e,e.next),os(i,i.next)}}function fs(t,e){return gs(t.prev,t,e.prev)<0&&gs(e.next,t,t.next)<0}function ds(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ms(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function ys(t,e,i,r,n,o,a,s){return(n-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(i-a)*(e-s)>=0&&(i-a)*(o-s)-(n-a)*(r-s)>=0}function _s(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&xs(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(Is(t,e)&&Is(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(gs(t.prev,t,e.prev)||gs(t,e.prev,e))||vs(t,e)&&gs(t.prev,t,t.next)>0&&gs(e.prev,e,e.next)>0)}function gs(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function vs(t,e){return t.x===e.x&&t.y===e.y}function xs(t,e,i,r){var n=ws(gs(t,e,i)),o=ws(gs(t,e,r)),a=ws(gs(i,r,t)),s=ws(gs(i,r,e));return n!==o&&a!==s||!(0!==n||!bs(t,i,e))||!(0!==o||!bs(t,r,e))||!(0!==a||!bs(i,t,r))||!(0!==s||!bs(i,e,r))}function bs(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function ws(t){return t>0?1:t<0?-1:0}function Is(t,e){return gs(t.prev,t,t.next)<0?gs(t,e,t.next)>=0&&gs(t,t.prev,e)>=0:gs(t,e,t.prev)<0||gs(t,t.next,e)<0}function Ss(t,e){var i=new As(t.i,t.x,t.y),r=new As(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function Ts(t,e,i,r){var n=new As(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function zs(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function As(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Es(t,e,i,r){for(var n=0,o=e,a=i-r;o<i;o+=r)n+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return n}function ks(t,e,i,r,n){!function t(e,i,r,n,o){for(;n>r;){if(n-r>600){var a=n-r+1,s=i-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);t(e,i,Math.max(r,Math.floor(i-s*l/a+c)),Math.min(n,Math.floor(i+(a-s)*l/a+c)),o)}var p=e[i],h=r,f=n;for(Cs(e,r,i),o(e[n],p)>0&&Cs(e,r,n);h<f;){for(Cs(e,h,f),h++,f--;o(e[h],p)<0;)h++;for(;o(e[f],p)>0;)f--}0===o(e[r],p)?Cs(e,r,f):Cs(e,++f,n),f<=i&&(r=f+1),i<=f&&(n=f-1)}}(t,e,i||0,r||t.length-1,n||Ps)}function Cs(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function Ps(t,e){return t<e?-1:t>e?1:0}function Ds(t,e){var i=t.length;if(i<=1)return[t];for(var r,n,o=[],a=0;a<i;a++){var s=k(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===n&&(n=s<0),n===s<0?(r&&o.push(r),r=[t[a]]):r.push(t[a]))}if(r&&o.push(r),e>1)for(var u=0;u<o.length;u++)o[u].length<=e||(ks(o[u],e,1,o[u].length-1,Ms),o[u]=o[u].slice(0,e));return o}function Ms(t,e){return e.area-t.area}function Ls(t,e,i){for(var r=i.patternDependencies,n=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(n=!0);var u=s.constantOr(null);u&&(n=!0,r[u.to]=!0,r[u.from]=!0)}return n}function Bs(t,e,i,r,n){for(var o=n.patternDependencies,a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.paint.get(t+"-pattern").value;if("constant"!==l.kind){var c=l.evaluate({zoom:r-1},i,{},n.availableImages),p=l.evaluate({zoom:r},i,{},n.availableImages),h=l.evaluate({zoom:r+1},i,{},n.availableImages);p=p&&p.name?p.name:p,h=h&&h.name?h.name:h,o[c=c&&c.name?c.name:c]=!0,o[p]=!0,o[h]=!0,i.patterns[u.id]={min:c,mid:p,max:h}}}return i}rs.deviation=function(t,e,i,r){var n=e&&e.length,o=Math.abs(Es(t,0,n?e[0]*i:t.length,i));if(n)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(Es(t,e[a]*i,a<s-1?e[a+1]*i:t.length,i));var u=0;for(a=0;a<r.length;a+=3){var l=r[a]*i,c=r[a+1]*i,p=r[a+2]*i;u+=Math.abs((t[l]-t[p])*(t[c+1]-t[l+1])-(t[l]-t[c])*(t[p+1]-t[l+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},rs.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)i.vertices.push(t[n][o][a]);n>0&&i.holes.push(r+=t[n-1].length)}return i},es.default=is;var Rs=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Kn,this.indexArray=new uo,this.indexArray2=new mo,this.programConfigurations=new ia(t.layers,t.zoom),this.segments=new ko,this.segments2=new ko,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};Rs.prototype.populate=function(t,e,i){this.hasPattern=Ls("fill",this.layers,e);for(var r=this.layers[0].layout.get("fill-sort-key"),n=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,l=s.id,c=s.index,p=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,f={type:u.type,id:l,properties:u.properties,geometry:h?sa(u):[]};if(this.layers[0]._featureFilter.filter(new En(this.zoom),f,i)){h||(f.geometry=sa(u));var d=r?r.evaluate(f,{},i,e.availableImages):void 0;n.push({id:l,properties:u.properties,type:u.type,sourceLayerIndex:p,index:c,geometry:f.geometry,patterns:{},sortKey:d})}}r&&n.sort((function(t,e){return t.sortKey-e.sortKey}));for(var m=0,y=n;m<y.length;m+=1){var _=y[m],g=_.geometry,v=_.index,x=_.sourceLayerIndex;if(this.hasPattern){var b=Bs("fill",this.layers,_,this.zoom,e);this.patternFeatures.push(b)}else this.addFeature(_,g,v,i,{});e.featureIndex.insert(t[v].feature,g,v,x,this.index)}},Rs.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},Rs.prototype.addFeatures=function(t,e,i){for(var r=0,n=this.patternFeatures;r<n.length;r+=1){var o=n[r];this.addFeature(o,o.geometry,o.index,e,i)}},Rs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Rs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Rs.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ts),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},Rs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Rs.prototype.addFeature=function(t,e,i,r,n){for(var o=0,a=Ds(e,500);o<a.length;o+=1){for(var s=a[o],u=0,l=0,c=s;l<c.length;l+=1)u+=c[l].length;for(var p=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),h=p.vertexLength,f=[],d=[],m=0,y=s;m<y.length;m+=1){var _=y[m];if(0!==_.length){_!==s[0]&&d.push(f.length/2);var g=this.segments2.prepareSegment(_.length,this.layoutVertexArray,this.indexArray2),v=g.vertexLength;this.layoutVertexArray.emplaceBack(_[0].x,_[0].y),this.indexArray2.emplaceBack(v+_.length-1,v),f.push(_[0].x),f.push(_[0].y);for(var x=1;x<_.length;x++)this.layoutVertexArray.emplaceBack(_[x].x,_[x].y),this.indexArray2.emplaceBack(v+x-1,v+x),f.push(_[x].x),f.push(_[x].y);g.vertexLength+=_.length,g.primitiveLength+=_.length}}for(var b=es(f,d),w=0;w<b.length;w+=3)this.indexArray.emplaceBack(h+b[w],h+b[w+1],h+b[w+2]);p.vertexLength+=u,p.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)},Jr("FillBucket",Rs,{omit:["layers","patternFeatures"]});var Fs=new Nn({"fill-sort-key":new On(qt.layout_fill["fill-sort-key"])}),Os={paint:new Nn({"fill-antialias":new Fn(qt.paint_fill["fill-antialias"]),"fill-opacity":new On(qt.paint_fill["fill-opacity"]),"fill-color":new On(qt.paint_fill["fill-color"]),"fill-outline-color":new On(qt.paint_fill["fill-outline-color"]),"fill-translate":new Fn(qt.paint_fill["fill-translate"]),"fill-translate-anchor":new Fn(qt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Vn(qt.paint_fill["fill-pattern"])}),layout:Fs},Vs=function(t){function e(e){t.call(this,e,Os)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,i){t.prototype.recalculate.call(this,e,i);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new Rs(t)},e.prototype.queryRadius=function(){return wa(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,i,r,n,o,a){return ha(Ia(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},e.prototype.isTileClipped=function(){return!0},e}(qn),Us=Wn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,js=Ns;function Ns(t,e,i,r,n){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=n,t.readFields(qs,this,e)}function qs(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var r=e._keys[t.readVarint()],n=e._values[t.readVarint()];e.properties[r]=n}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function Zs(t){for(var e,i,r=0,n=0,o=t.length,a=o-1;n<o;a=n++)r+=((i=t[a]).x-(e=t[n]).x)*(e.y+i.y);return r}Ns.types=["Unknown","Point","LineString","Polygon"],Ns.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,r=1,o=0,a=0,s=0,u=[];t.pos<i;){if(o<=0){var l=t.readVarint();r=7&l,o=l>>3}if(o--,1===r||2===r)a+=t.readSVarint(),s+=t.readSVarint(),1===r&&(e&&u.push(e),e=[]),e.push(new n(a,s));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&u.push(e),u},Ns.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,r=0,n=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();i=7&c,r=c>>3}if(r--,1===i||2===i)(n+=t.readSVarint())<a&&(a=n),n>s&&(s=n),(o+=t.readSVarint())<u&&(u=o),o>l&&(l=o);else if(7!==i)throw new Error("unknown command "+i)}return[a,u,s,l]},Ns.prototype.toGeoJSON=function(t,e,i){var r,n,o=this.extent*Math.pow(2,i),a=this.extent*t,s=this.extent*e,u=this.loadGeometry(),l=Ns.types[this.type];function c(t){for(var e=0;e<t.length;e++){var i=t[e];t[e]=[360*(i.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(r=0;r<u.length;r++)p[r]=u[r][0];c(u=p);break;case 2:for(r=0;r<u.length;r++)c(u[r]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var i,r,n=[],o=0;o<e;o++){var a=Zs(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(i&&n.push(i),i=[t[o]]):i.push(t[o]))}return i&&n.push(i),n}(u),r=0;r<u.length;r++)for(n=0;n<u[r].length;n++)c(u[r][n])}1===u.length?u=u[0]:l="Multi"+l;var h={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(h.id=this.id),h};var Gs=Xs;function Xs(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Ws,this,e),this.length=this._features.length}function Ws(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(i))}function Hs(t,e,i){if(3===t){var r=new Gs(i,i.readVarint()+i.pos);r.length&&(e[r.name]=r)}}Xs.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new js(this._pbf,e,this.extent,this._keys,this._values)};var Ks={VectorTile:function(t,e){this.layers=t.readFields(Hs,{},e)},VectorTileFeature:js,VectorTileLayer:Gs},Ys=Ks.VectorTileFeature.types,Js=Math.pow(2,13);function Qs(t,e,i,r,n,o,a,s){t.emplaceBack(e,i,2*Math.floor(r*Js)+a,n*Js*2,o*Js*2,Math.round(s))}var $s=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Jn,this.indexArray=new uo,this.programConfigurations=new ia(t.layers,t.zoom),this.segments=new ko,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function tu(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)}$s.prototype.populate=function(t,e,i){this.features=[],this.hasPattern=Ls("fill-extrusion",this.layers,e);for(var r=0,n=t;r<n.length;r+=1){var o=n[r],a=o.feature,s=o.id,u=o.index,l=o.sourceLayerIndex,c=this.layers[0]._featureFilter.needGeometry,p={type:a.type,id:s,properties:a.properties,geometry:c?sa(a):[]};if(this.layers[0]._featureFilter.filter(new En(this.zoom),p,i)){var h={id:s,sourceLayerIndex:l,index:u,geometry:c?p.geometry:sa(a),properties:a.properties,type:a.type,patterns:{}};this.hasPattern?this.features.push(Bs("fill-extrusion",this.layers,h,this.zoom,e)):this.addFeature(h,h.geometry,u,i,{}),e.featureIndex.insert(a,h.geometry,u,l,this.index,!0)}}},$s.prototype.addFeatures=function(t,e,i){for(var r=0,n=this.features;r<n.length;r+=1){var o=n[r];this.addFeature(o,o.geometry,o.index,e,i)}},$s.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},$s.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},$s.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},$s.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Us),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},$s.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},$s.prototype.addFeature=function(t,e,i,r,n){for(var o=0,a=Ds(e,500);o<a.length;o+=1){for(var s=a[o],u=0,l=0,c=s;l<c.length;l+=1)u+=c[l].length;for(var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=0,f=s;h<f.length;h+=1){var d=f[h];if(0!==d.length&&!((D=d).every((function(t){return t.x<0}))||D.every((function(t){return t.x>8192}))||D.every((function(t){return t.y<0}))||D.every((function(t){return t.y>8192}))))for(var m=0,y=0;y<d.length;y++){var _=d[y];if(y>=1){var g=d[y-1];if(!tu(_,g)){p.vertexLength+4>ko.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=_.sub(g)._perp()._unit(),x=g.dist(_);m+x>32768&&(m=0),Qs(this.layoutVertexArray,_.x,_.y,v.x,v.y,0,0,m),Qs(this.layoutVertexArray,_.x,_.y,v.x,v.y,0,1,m),Qs(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,0,m+=x),Qs(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,1,m);var b=p.vertexLength;this.indexArray.emplaceBack(b,b+2,b+1),this.indexArray.emplaceBack(b+1,b+2,b+3),p.vertexLength+=4,p.primitiveLength+=2}}}}if(p.vertexLength+u>ko.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray)),"Polygon"===Ys[t.type]){for(var w=[],I=[],S=p.vertexLength,T=0,z=s;T<z.length;T+=1){var A=z[T];if(0!==A.length){A!==s[0]&&I.push(w.length/2);for(var E=0;E<A.length;E++){var k=A[E];Qs(this.layoutVertexArray,k.x,k.y,0,0,1,1,0),w.push(k.x),w.push(k.y)}}}for(var C=es(w,I),P=0;P<C.length;P+=3)this.indexArray.emplaceBack(S+C[P],S+C[P+2],S+C[P+1]);p.primitiveLength+=C.length/3,p.vertexLength+=u}}var D;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)},Jr("FillExtrusionBucket",$s,{omit:["layers","features"]});var eu={paint:new Nn({"fill-extrusion-opacity":new Fn(qt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new On(qt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Fn(qt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Fn(qt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Vn(qt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new On(qt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new On(qt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Fn(qt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},iu=function(t){function e(e){t.call(this,e,eu)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new $s(t)},e.prototype.queryRadius=function(){return wa(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,i,r,o,a,s,u){var l=Ia(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),c=this.paint.get("fill-extrusion-height").evaluate(e,i),p=this.paint.get("fill-extrusion-base").evaluate(e,i),h=function(t,e,i,r){for(var o=[],a=0,s=t;a<s.length;a+=1){var u=s[a],l=[u.x,u.y,0,1];Va(l,l,e),o.push(new n(l[0]/l[3],l[1]/l[3]))}return o}(l,u),f=function(t,e,i,r){for(var o=[],a=[],s=r[8]*e,u=r[9]*e,l=r[10]*e,c=r[11]*e,p=r[8]*i,h=r[9]*i,f=r[10]*i,d=r[11]*i,m=0,y=t;m<y.length;m+=1){for(var _=[],g=[],v=0,x=y[m];v<x.length;v+=1){var b=x[v],w=b.x,I=b.y,S=r[0]*w+r[4]*I+r[12],T=r[1]*w+r[5]*I+r[13],z=r[2]*w+r[6]*I+r[14],A=r[3]*w+r[7]*I+r[15],E=z+l,k=A+c,C=S+p,P=T+h,D=z+f,M=A+d,L=new n((S+s)/k,(T+u)/k);L.z=E/k,_.push(L);var B=new n(C/M,P/M);B.z=D/M,g.push(B)}o.push(_),a.push(g)}return[o,a]}(r,p,c,u);return function(t,e,i){var r=1/0;ha(i,e)&&(r=nu(i,e[0]));for(var n=0;n<e.length;n++)for(var o=e[n],a=t[n],s=0;s<o.length-1;s++){var u=o[s],l=[u,o[s+1],a[s+1],a[s],u];ca(i,l)&&(r=Math.min(r,nu(i,l)))}return r!==1/0&&r}(f[0],f[1],h)},e}(qn);function ru(t,e){return t.x*e.x+t.y*e.y}function nu(t,e){if(1===t.length){for(var i,r=0,n=e[r++];!i||n.equals(i);)if(!(i=e[r++]))return 1/0;for(;r<e.length;r++){var o=e[r],a=t[0],s=i.sub(n),u=o.sub(n),l=a.sub(n),c=ru(s,s),p=ru(s,u),h=ru(u,u),f=ru(l,s),d=ru(l,u),m=c*h-p*p,y=(h*f-p*d)/m,_=(c*d-p*f)/m,g=n.z*(1-y-_)+i.z*y+o.z*_;if(isFinite(g))return g}return 1/0}for(var v=1/0,x=0,b=e;x<b.length;x+=1)v=Math.min(v,b[x].z);return v}var ou=Wn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,au=Wn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,su=Ks.VectorTileFeature.types,uu=Math.cos(Math.PI/180*37.5),lu=Math.pow(2,14)/.5,cu=function(t){var e=this;this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(t){e.gradients[t.id]={}})),this.layoutVertexArray=new Qn,this.layoutVertexArray2=new $n,this.indexArray=new uo,this.programConfigurations=new ia(t.layers,t.zoom),this.segments=new ko,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};cu.prototype.populate=function(t,e,i){this.hasPattern=Ls("line",this.layers,e);for(var r=this.layers[0].layout.get("line-sort-key"),n=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,l=s.id,c=s.index,p=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,f={type:u.type,id:l,properties:u.properties,geometry:h?sa(u):[]};if(this.layers[0]._featureFilter.filter(new En(this.zoom),f,i)){h||(f.geometry=sa(u));var d=r?r.evaluate(f,{},i):void 0;n.push({id:l,properties:u.properties,type:u.type,sourceLayerIndex:p,index:c,geometry:f.geometry,patterns:{},sortKey:d})}}r&&n.sort((function(t,e){return t.sortKey-e.sortKey}));for(var m=0,y=n;m<y.length;m+=1){var _=y[m],g=_.geometry,v=_.index,x=_.sourceLayerIndex;if(this.hasPattern){var b=Bs("line",this.layers,_,this.zoom,e);this.patternFeatures.push(b)}else this.addFeature(_,g,v,i,{});e.featureIndex.insert(t[v].feature,g,v,x,this.index)}},cu.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},cu.prototype.addFeatures=function(t,e,i){for(var r=0,n=this.patternFeatures;r<n.length;r+=1){var o=n[r];this.addFeature(o,o.geometry,o.index,e,i)}},cu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},cu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},cu.prototype.upload=function(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,au)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ou),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},cu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},cu.prototype.lineFeatureClips=function(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}},cu.prototype.addFeature=function(t,e,i,r,n){var o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),u=o.get("line-miter-limit"),l=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(var c=0,p=e;c<p.length;c+=1)this.addLine(p[c],t,a,s,u,l);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)},cu.prototype.addLine=function(t,e,i,r,n,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var a=0;a<t.length-1;a++)this.totalDistance+=t[a].dist(t[a+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===su[e.type],u=t.length;u>=2&&t[u-1].equals(t[u-2]);)u--;for(var l=0;l<u-1&&t[l].equals(t[l+1]);)l++;if(!(u<(s?3:2))){"bevel"===i&&(n=1.05);var c,p=this.overscaling<=16?122880/(512*this.overscaling):0,h=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray),f=void 0,d=void 0,m=void 0,y=void 0;this.e1=this.e2=-1,s&&(y=t[l].sub(c=t[u-2])._unit()._perp());for(var _=l;_<u;_++)if(!(d=_===u-1?s?t[l+1]:void 0:t[_+1])||!t[_].equals(d)){y&&(m=y),c&&(f=c),c=t[_],y=d?d.sub(c)._unit()._perp():m;var g=(m=m||y).add(y);0===g.x&&0===g.y||g._unit();var v=m.x*y.x+m.y*y.y,x=g.x*y.x+g.y*y.y,b=0!==x?1/x:1/0,w=2*Math.sqrt(2-2*x),I=x<uu&&f&&d,S=m.x*y.y-m.y*y.x>0;if(I&&_>l){var T=c.dist(f);if(T>2*p){var z=c.sub(c.sub(f)._mult(p/T)._round());this.updateDistance(f,z),this.addCurrentVertex(z,m,0,0,h),f=z}}var A=f&&d,E=A?i:s?"butt":r;if(A&&"round"===E&&(b<o?E="miter":b<=2&&(E="fakeround")),"miter"===E&&b>n&&(E="bevel"),"bevel"===E&&(b>2&&(E="flipbevel"),b<n&&(E="miter")),f&&this.updateDistance(f,c),"miter"===E)g._mult(b),this.addCurrentVertex(c,g,0,0,h);else if("flipbevel"===E){if(b>100)g=y.mult(-1);else{var k=b*m.add(y).mag()/m.sub(y).mag();g._perp()._mult(k*(S?-1:1))}this.addCurrentVertex(c,g,0,0,h),this.addCurrentVertex(c,g.mult(-1),0,0,h)}else if("bevel"===E||"fakeround"===E){var C=-Math.sqrt(b*b-1),P=S?C:0,D=S?0:C;if(f&&this.addCurrentVertex(c,m,P,D,h),"fakeround"===E)for(var M=Math.round(180*w/Math.PI/20),L=1;L<M;L++){var B=L/M;if(.5!==B){var R=B-.5;B+=B*R*(B-1)*((1.0904+v*(v*(3.55645-1.43519*v)-3.2452))*R*R+(.848013+v*(.215638*v-1.06021)))}var F=y.sub(m)._mult(B)._add(m)._unit()._mult(S?-1:1);this.addHalfVertex(c,F.x,F.y,!1,S,0,h)}d&&this.addCurrentVertex(c,y,-P,-D,h)}else if("butt"===E)this.addCurrentVertex(c,g,0,0,h);else if("square"===E){var O=f?1:-1;this.addCurrentVertex(c,g,O,O,h)}else"round"===E&&(f&&(this.addCurrentVertex(c,m,0,0,h),this.addCurrentVertex(c,m,1,1,h,!0)),d&&(this.addCurrentVertex(c,y,-1,-1,h,!0),this.addCurrentVertex(c,y,0,0,h)));if(I&&_<u-1){var V=c.dist(d);if(V>2*p){var U=c.add(d.sub(c)._mult(p/V)._round());this.updateDistance(c,U),this.addCurrentVertex(U,y,0,0,h),c=U}}}}},cu.prototype.addCurrentVertex=function(t,e,i,r,n,o){void 0===o&&(o=!1);var a=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*i,e.y-e.x*i,o,!1,i,n),this.addHalfVertex(t,a,s,o,!0,-r,n),this.distance>lu/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,i,r,n,o))},cu.prototype.addHalfVertex=function(t,e,i,r,n,o,a){var s=.5*(this.lineClips?this.scaledDistance*(lu-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t.x<<1)+(r?1:0),(t.y<<1)+(n?1:0),Math.round(63*e)+128,Math.round(63*i)+128,1+(0===o?0:o<0?-1:1)|(63&s)<<2,s>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var u=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),a.primitiveLength++),n?this.e2=u:this.e1=u},cu.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},cu.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},Jr("LineBucket",cu,{omit:["layers","patternFeatures"]});var pu=new Nn({"line-cap":new Fn(qt.layout_line["line-cap"]),"line-join":new On(qt.layout_line["line-join"]),"line-miter-limit":new Fn(qt.layout_line["line-miter-limit"]),"line-round-limit":new Fn(qt.layout_line["line-round-limit"]),"line-sort-key":new On(qt.layout_line["line-sort-key"])}),hu={paint:new Nn({"line-opacity":new On(qt.paint_line["line-opacity"]),"line-color":new On(qt.paint_line["line-color"]),"line-translate":new Fn(qt.paint_line["line-translate"]),"line-translate-anchor":new Fn(qt.paint_line["line-translate-anchor"]),"line-width":new On(qt.paint_line["line-width"]),"line-gap-width":new On(qt.paint_line["line-gap-width"]),"line-offset":new On(qt.paint_line["line-offset"]),"line-blur":new On(qt.paint_line["line-blur"]),"line-dasharray":new Un(qt.paint_line["line-dasharray"]),"line-pattern":new Vn(qt.paint_line["line-pattern"]),"line-gradient":new jn(qt.paint_line["line-gradient"])}),layout:pu},fu=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,i){return i=new En(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),t.prototype.possiblyEvaluate.call(this,e,i)},e.prototype.evaluate=function(e,i,r,n){return i=m({},i,{zoom:Math.floor(i.zoom)}),t.prototype.evaluate.call(this,e,i,r,n)},e}(On))(hu.paint.properties["line-width"].specification);fu.useIntegerZoom=!0;var du=function(t){function e(e){t.call(this,e,hu),this.gradientVersion=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ri,this.gradientVersion=(this.gradientVersion+1)%u)},e.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},e.prototype.recalculate=function(e,i){t.prototype.recalculate.call(this,e,i),this.paint._values["line-floorwidth"]=fu.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new cu(t)},e.prototype.queryRadius=function(t){var e=t,i=mu(ba("line-width",this,e),ba("line-gap-width",this,e)),r=ba("line-offset",this,e);return i/2+Math.abs(r)+wa(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,i,r,o,a,s){var u=Ia(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),l=s/2*mu(this.paint.get("line-width").evaluate(e,i),this.paint.get("line-gap-width").evaluate(e,i)),c=this.paint.get("line-offset").evaluate(e,i);return c&&(r=function(t,e){for(var i=[],r=new n(0,0),o=0;o<t.length;o++){for(var a=t[o],s=[],u=0;u<a.length;u++){var l=a[u],c=a[u+1],p=0===u?r:l.sub(a[u-1])._unit()._perp(),h=u===a.length-1?r:c.sub(l)._unit()._perp(),f=p._add(h)._unit();f._mult(1/(f.x*h.x+f.y*h.y)),s.push(f._mult(e)._add(l))}i.push(s)}return i}(r,c*s)),function(t,e,i){for(var r=0;r<e.length;r++){var n=e[r];if(t.length>=3)for(var o=0;o<n.length;o++)if(va(t,n[o]))return!0;if(fa(t,n,i))return!0}return!1}(u,r,l)},e.prototype.isTileClipped=function(){return!0},e}(qn);function mu(t,e){return e>0?e+2*t:t}var yu=Wn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),_u=Wn([{name:"a_projected_pos",components:3,type:"Float32"}],4),gu=(Wn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Wn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),vu=(Wn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Wn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),xu=Wn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function bu(t,e,i){return t.sections.forEach((function(t){t.text=function(t,e,i){var r=e.layout.get("text-transform").evaluate(i,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),An.applyArabicShaping&&(t=An.applyArabicShaping(t)),t}(t.text,e,i)})),t}Wn([{name:"triangle",components:3,type:"Uint16"}]),Wn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Wn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Wn([{type:"Float32",name:"offsetX"}]),Wn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var wu={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},Iu=function(t,e,i,r,n){var o,a,s=8*n-r-1,u=(1<<s)-1,l=u>>1,c=-7,p=i?n-1:0,h=i?-1:1,f=t[e+p];for(p+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+p],p+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+p],p+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=l}return(f?-1:1)*a*Math.pow(2,o-r)},Su=function(t,e,i,r,n,o){var a,s,u,l=8*o-n-1,c=(1<<l)-1,p=c>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+p>=1?h/u:h*Math.pow(2,1-p))*u>=2&&(a++,u/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(e*u-1)*Math.pow(2,n),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,n),a=0));n>=8;t[i+f]=255&s,f+=d,s/=256,n-=8);for(a=a<<n|s,l+=n;l>0;t[i+f]=255&a,f+=d,a/=256,l-=8);t[i+f-d]|=128*m},Tu=zu;function zu(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}zu.Varint=0,zu.Fixed64=1,zu.Bytes=2,zu.Fixed32=5;var Au="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Eu(t){return t.type===zu.Bytes?t.readVarint()+t.pos:t.pos+1}function ku(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Cu(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=t;n--)i.buf[n+r]=i.buf[n]}function Pu(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function Du(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function Mu(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function Lu(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function Bu(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function Ru(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function Fu(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function Ou(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function Vu(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function Uu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function ju(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function Nu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function qu(t,e,i){1===t&&i.readMessage(Zu,e)}function Zu(t,e,i){if(3===t){var r=i.readMessage(Gu,{}),n=r.width,o=r.height,a=r.left,s=r.top,u=r.advance;e.push({id:r.id,bitmap:new Wa({width:n+6,height:o+6},r.bitmap),metrics:{width:n,height:o,left:a,top:s,advance:u}})}}function Gu(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}function Xu(t){for(var e=0,i=0,r=0,n=t;r<n.length;r+=1){var o=n[r];e+=o.w*o.h,i=Math.max(i,o.w)}t.sort((function(t,e){return e.h-t.h}));for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}],s=0,u=0,l=0,c=t;l<c.length;l+=1)for(var p=c[l],h=a.length-1;h>=0;h--){var f=a[h];if(!(p.w>f.w||p.h>f.h)){if(p.x=f.x,p.y=f.y,u=Math.max(u,p.y+p.h),s=Math.max(s,p.x+p.w),p.w===f.w&&p.h===f.h){var d=a.pop();h<a.length&&(a[h]=d)}else p.h===f.h?(f.x+=p.w,f.w-=p.w):p.w===f.w?(f.y+=p.h,f.h-=p.h):(a.push({x:f.x+p.w,y:f.y,w:f.w-p.w,h:p.h}),f.y+=p.h,f.h-=p.h);break}}return{w:s,h:u,fill:e/(s*u)||0}}zu.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,o=this.pos;this.type=7&r,t(n,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Uu(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Nu(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Uu(this.buf,this.pos)+4294967296*Uu(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=Uu(this.buf,this.pos)+4294967296*Nu(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Iu(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Iu(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return e=127&(i=r[this.pos++]),i<128?e:(e|=(127&(i=r[this.pos++]))<<7,i<128?e:(e|=(127&(i=r[this.pos++]))<<14,i<128?e:(e|=(127&(i=r[this.pos++]))<<21,i<128?e:function(t,e,i){var r,n,o=i.buf;if(r=(112&(n=o[i.pos++]))>>4,n<128)return ku(t,r,e);if(r|=(127&(n=o[i.pos++]))<<3,n<128)return ku(t,r,e);if(r|=(127&(n=o[i.pos++]))<<10,n<128)return ku(t,r,e);if(r|=(127&(n=o[i.pos++]))<<17,n<128)return ku(t,r,e);if(r|=(127&(n=o[i.pos++]))<<24,n<128)return ku(t,r,e);if(r|=(1&(n=o[i.pos++]))<<31,n<128)return ku(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Au?function(t,e,i){return Au.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){for(var r="",n=e;n<i;){var o,a,s,u=t[n],l=null,c=u>239?4:u>223?3:u>191?2:1;if(n+c>i)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[n+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(a=t[n+2],128==(192&(o=t[n+1]))&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(a=t[n+2],s=t[n+3],128==(192&(o=t[n+1]))&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),n+=c}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==zu.Bytes)return t.push(this.readVarint(e));var i=Eu(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==zu.Bytes)return t.push(this.readSVarint());var e=Eu(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==zu.Bytes)return t.push(this.readBoolean());var e=Eu(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==zu.Bytes)return t.push(this.readFloat());var e=Eu(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==zu.Bytes)return t.push(this.readDouble());var e=Eu(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==zu.Bytes)return t.push(this.readFixed32());var e=Eu(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==zu.Bytes)return t.push(this.readSFixed32());var e=Eu(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==zu.Bytes)return t.push(this.readFixed64());var e=Eu(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==zu.Bytes)return t.push(this.readSFixed64());var e=Eu(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===zu.Varint)for(;this.buf[this.pos++]>127;);else if(e===zu.Bytes)this.pos=this.readVarint()+this.pos;else if(e===zu.Fixed32)this.pos+=4;else{if(e!==zu.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),ju(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),ju(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),ju(this.buf,-1&t,this.pos),ju(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),ju(this.buf,-1&t,this.pos),ju(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,r;if(t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,i.buf[i.pos]=127&(t>>>=7)}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,n,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){r>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&Cu(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),Su(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Su(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&Cu(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,zu.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Pu,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Du,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Bu,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Mu,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Lu,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Ru,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Fu,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Ou,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Vu,e)},writeBytesField:function(t,e){this.writeTag(t,zu.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,zu.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,zu.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,zu.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,zu.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,zu.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,zu.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,zu.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,zu.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,zu.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var Wu=function(t,e){var i=e.pixelRatio,r=e.version,n=e.stretchX,o=e.stretchY,a=e.content;this.paddedRect=t,this.pixelRatio=i,this.stretchX=n,this.stretchY=o,this.content=a,this.version=r},Hu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Hu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Hu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Hu.tlbr.get=function(){return this.tl.concat(this.br)},Hu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Wu.prototype,Hu);var Ku=function(t,e){var i={},r={};this.haveRenderCallbacks=[];var n=[];this.addImages(t,i,n),this.addImages(e,r,n);var o=Xu(n),a=new Ha({width:o.w||1,height:o.h||1});for(var s in t){var u=t[s],l=i[s].paddedRect;Ha.copy(u.data,a,{x:0,y:0},{x:l.x+1,y:l.y+1},u.data)}for(var c in e){var p=e[c],h=r[c].paddedRect,f=h.x+1,d=h.y+1,m=p.data.width,y=p.data.height;Ha.copy(p.data,a,{x:0,y:0},{x:f,y:d},p.data),Ha.copy(p.data,a,{x:0,y:y-1},{x:f,y:d-1},{width:m,height:1}),Ha.copy(p.data,a,{x:0,y:0},{x:f,y:d+y},{width:m,height:1}),Ha.copy(p.data,a,{x:m-1,y:0},{x:f-1,y:d},{width:1,height:y}),Ha.copy(p.data,a,{x:0,y:0},{x:f+m,y:d},{width:1,height:y})}this.image=a,this.iconPositions=i,this.patternPositions=r};Ku.prototype.addImages=function(t,e,i){for(var r in t){var n=t[r],o={x:0,y:0,w:n.data.width+2,h:n.data.height+2};i.push(o),e[r]=new Wu(o,n),n.hasRenderCallback&&this.haveRenderCallbacks.push(r)}},Ku.prototype.patchUpdatedImages=function(t,e){for(var i in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[i],t.getImage(i),e),this.patchUpdatedImage(this.patternPositions[i],t.getImage(i),e)},Ku.prototype.patchUpdatedImage=function(t,e,i){if(t&&e&&t.version!==e.version){t.version=e.version;var r=t.tl;i.update(e.data,void 0,{x:r[0],y:r[1]})}},Jr("ImagePosition",Wu),Jr("ImageAtlas",Ku);var Yu={horizontal:1,vertical:2,horizontalOnly:3},Ju=function(){this.scale=1,this.fontStack="",this.imageName=null};Ju.forText=function(t,e){var i=new Ju;return i.scale=t||1,i.fontStack=e,i},Ju.forImage=function(t){var e=new Ju;return e.imageName=t,e};var Qu=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};Qu.fromFeature=function(t,e){for(var i=new Qu,r=0;r<t.sections.length;r++){var n=t.sections[r];n.image?i.addImageSection(n):i.addTextSection(n,e)}return i},Qu.prototype.length=function(){return this.text.length},Qu.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},Qu.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},Qu.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},Qu.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",i=0;i<t.length;i++){var r=t.charCodeAt(i+1)||null,n=t.charCodeAt(i-1)||null;e+=r&&mn(r)&&!wu[t[i+1]]||n&&mn(n)&&!wu[t[i-1]]||!wu[t[i]]?t[i]:wu[t[i]]}return e}(this.text)},Qu.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&$u[this.text.charCodeAt(e)];e++)t++;for(var i=this.text.length,r=this.text.length-1;r>=0&&r>=t&&$u[this.text.charCodeAt(r)];r--)i--;this.text=this.text.substring(t,i),this.sectionIndex=this.sectionIndex.slice(t,i)},Qu.prototype.substring=function(t,e){var i=new Qu;return i.text=this.text.substring(t,e),i.sectionIndex=this.sectionIndex.slice(t,e),i.sections=this.sections,i},Qu.prototype.toString=function(){return this.text},Qu.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce((function(e,i){return Math.max(e,t.sections[i].scale)}),0)},Qu.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(Ju.forText(t.scale,t.fontStack||e));for(var i=this.sections.length-1,r=0;r<t.text.length;++r)this.sectionIndex.push(i)},Qu.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(Ju.forImage(e)),this.sectionIndex.push(this.sections.length-1)):A("Reached maximum number of images 6401")}else A("Can't add FormattedSection with an empty image.")},Qu.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var $u={};function tl(t){var e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function el(t,e){var i=e.expression;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new En(t+1))};if("source"===i.kind)return{kind:"source"};for(var r=i.zoomStops,n=i.interpolationType,o=0;o<r.length&&r[o]<=t;)o++;for(var a=o=Math.max(0,o-1);a<r.length&&r[a]<t+1;)a++;a=Math.min(r.length-1,a);var s=r[o],u=r[a];return"composite"===i.kind?{kind:"composite",minZoom:s,maxZoom:u,interpolationType:n}:{kind:"camera",minZoom:s,maxZoom:u,minSize:i.evaluate(new En(s)),maxSize:i.evaluate(new En(u)),interpolationType:n}}function il(t,e,i){var r=e.uSize,n=i.lowerSize;return"source"===t.kind?n/128:"composite"===t.kind?ni(n/128,i.upperSize/128,e.uSizeT):r}function rl(t,e){var i=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){var n=t.interpolationType,o=n?p(vi.interpolationFactor(n,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?r=ni(t.minSize,t.maxSize,o):i=o}return{uSizeT:i,uSize:r}}$u[9]=!0,$u[10]=!0,$u[11]=!0,$u[12]=!0,$u[13]=!0,$u[32]=!0,Jr("Anchor",function(t){function e(e,i,r,n){t.call(this,e,i),this.angle=r,void 0!==n&&(this.segment=n)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(n));var nl=Object.freeze({__proto__:null,getSizeData:el,evaluateSizeForFeature:il,evaluateSizeForZoom:rl,SIZE_PACK_FACTOR:128}),ol=Number.POSITIVE_INFINITY;function al(t,e){return e[1]!==ol?function(t,e,i){var r=0,n=0;switch(e=Math.abs(e),i=Math.abs(i),t){case"top-right":case"top-left":case"top":n=i-7;break;case"bottom-right":case"bottom-left":case"bottom":n=7-i}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,n]}(t,e[0],e[1]):function(t,e){var i=0,r=0;e<0&&(e=0);var n=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":r=n-7;break;case"bottom-right":case"bottom-left":r=7-n;break;case"bottom":r=7-e;break;case"top":r=e-7}switch(t){case"top-right":case"bottom-right":i=-n;break;case"top-left":case"bottom-left":i=n;break;case"left":i=e;break;case"right":i=-e}return[i,r]}(t,e[0])}var sl=Ks.VectorTileFeature.types,ul=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ll(t,e,i,r,n,o,a,s,u,l,c,p,h){var f=s?Math.min(32640,Math.round(s[0])):0,d=s?Math.min(32640,Math.round(s[1])):0;t.emplaceBack(e,i,Math.round(32*r),Math.round(32*n),o,a,(f<<1)+(u?1:0),d,16*l,16*c,256*p,256*h)}function cl(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}function pl(t){for(var e=0,i=t.sections;e<i.length;e+=1)if(gn(i[e].text))return!0;return!1}var hl=function(t){this.layoutVertexArray=new eo,this.indexArray=new uo,this.programConfigurations=t,this.segments=new ko,this.dynamicLayoutVertexArray=new io,this.opacityVertexArray=new ro,this.placedSymbolArray=new bo};hl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},hl.prototype.upload=function(t,e,i,r){this.isEmpty()||(i&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,yu.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,_u.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,ul,!0),this.opacityVertexBuffer.itemSize=1),(i||r)&&this.programConfigurations.upload(t))},hl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Jr("SymbolBuffers",hl);var fl=function(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new ko,this.collisionVertexArray=new so};fl.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,gu.members,!0)},fl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Jr("CollisionBuffers",fl);var dl=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ea([]),this.placementViewportMatrix=Ea([]);var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=el(this.zoom,e["text-size"]),this.iconSizeData=el(this.zoom,e["icon-size"]);var i=this.layers[0].layout,r=i.get("symbol-sort-key"),n=i.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==n&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===n||"auto"===n&&!this.sortFeaturesByKey)&&(i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement")),"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map((function(t){return Yu[t]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=t.sourceID};dl.prototype.createArrays=function(){this.text=new hl(new ia(this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new hl(new ia(this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.glyphOffsetArray=new So,this.lineVertexArray=new To,this.symbolInstances=new Io},dl.prototype.calculateGlyphDependencies=function(t,e,i,r,n){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(i||r)&&n){var a=wu[t.charAt(o)];a&&(e[a.charCodeAt(0)]=!0)}},dl.prototype.populate=function(t,e,i){var r=this.layers[0],n=r.layout,o=n.get("text-font"),a=n.get("text-field"),s=n.get("icon-image"),u=("constant"!==a.value.kind||a.value.value instanceof _e&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),l="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,c=n.get("symbol-sort-key");if(this.features=[],u||l){for(var p=e.iconDependencies,h=e.glyphDependencies,f=e.availableImages,d=new En(this.zoom),m=0,y=t;m<y.length;m+=1){var _=y[m],g=_.feature,v=_.id,x=_.index,b=_.sourceLayerIndex,w=r._featureFilter.needGeometry,I={type:g.type,id:v,properties:g.properties,geometry:w?sa(g):[]};if(r._featureFilter.filter(d,I,i)){w||(I.geometry=sa(g));var S=void 0;if(u){var T=r.getValueAndResolveTokens("text-field",I,i,f),z=_e.factory(T);pl(z)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Tn()||this.hasRTLText&&An.isParsed())&&(S=bu(z,r,I))}var A=void 0;if(l){var E=r.getValueAndResolveTokens("icon-image",I,i,f);A=E instanceof ge?E:ge.fromString(E)}if(S||A){var k=this.sortFeaturesByKey?c.evaluate(I,{},i):void 0,C={id:v,text:S,icon:A,index:x,sourceLayerIndex:b,geometry:sa(g),properties:g.properties,type:sl[g.type],sortKey:k};if(this.features.push(C),A&&(p[A.name]=!0),S){var P=o.evaluate(I,{},i).join(","),D="map"===n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Yu.vertical)>=0;for(var M=0,L=S.sections;M<L.length;M+=1){var B=L[M];if(B.image)p[B.image.name]=!0;else{var R=fn(S.toString()),F=B.fontStack||P,O=h[F]=h[F]||{};this.calculateGlyphDependencies(B.text,O,D,this.allowVerticalPlacement,R)}}}}}}"line"===n.get("symbol-placement")&&(this.features=function(t){var e={},i={},r=[],n=0;function o(e){r.push(t[e]),n++}function a(t,e,n){var o=i[t];return delete i[t],i[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(n[0]),o}function s(t,i,n){var o=e[i];return delete e[i],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=n[0].concat(r[o].geometry[0]),o}function u(t,e,i){var r=i?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var l=0;l<t.length;l++){var c=t[l],p=c.geometry,h=c.text?c.text.toString():null;if(h){var f=u(h,p),d=u(h,p,!0);if(f in i&&d in e&&i[f]!==e[d]){var m=s(f,d,p),y=a(f,d,r[m].geometry);delete e[f],delete i[d],i[u(h,r[y].geometry,!0)]=y,r[m].geometry=null}else f in i?a(f,d,p):d in e?s(f,d,p):(o(l),e[f]=n-1,i[d]=n-1)}else o(l)}return r.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}},dl.prototype.update=function(t,e,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,i))},dl.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},dl.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},dl.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},dl.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},dl.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},dl.prototype.addToLineVertexArray=function(t,e){var i=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),n=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a<e.length-1&&(r+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:n},s>0&&(n+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=o[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},dl.prototype.addSymbols=function(t,e,i,r,n,o,a,s,u,l,c,p){for(var h=t.indexArray,f=t.layoutVertexArray,d=t.segments.prepareSegment(4*e.length,f,h,o.sortKey),m=this.glyphOffsetArray.length,y=d.vertexLength,_=this.allowVerticalPlacement&&a===Yu.vertical?Math.PI/2:0,g=o.text&&o.text.sections,v=0;v<e.length;v++){var x=e[v],b=x.tl,w=x.tr,I=x.bl,S=x.br,T=x.tex,z=x.pixelOffsetTL,A=x.pixelOffsetBR,E=x.minFontScaleX,k=x.minFontScaleY,C=x.glyphOffset,P=x.isSDF,D=x.sectionIndex,M=d.vertexLength,L=C[1];ll(f,s.x,s.y,b.x,L+b.y,T.x,T.y,i,P,z.x,z.y,E,k),ll(f,s.x,s.y,w.x,L+w.y,T.x+T.w,T.y,i,P,A.x,z.y,E,k),ll(f,s.x,s.y,I.x,L+I.y,T.x,T.y+T.h,i,P,z.x,A.y,E,k),ll(f,s.x,s.y,S.x,L+S.y,T.x+T.w,T.y+T.h,i,P,A.x,A.y,E,k),cl(t.dynamicLayoutVertexArray,s,_),h.emplaceBack(M,M+1,M+2),h.emplaceBack(M+1,M+2,M+3),d.vertexLength+=4,d.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(C[0]),v!==e.length-1&&D===e[v+1].sectionIndex||t.programConfigurations.populatePaintArrays(f.length,o,o.index,{},p,g&&g[D])}t.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,y,u,l,s.segment,i?i[0]:0,i?i[1]:0,r[0],r[1],a,0,!1,0,c)},dl.prototype._addCollisionDebugVertex=function(t,e,i,r,n,o){return e.emplaceBack(0,0),t.emplaceBack(i.x,i.y,r,n,Math.round(o.x),Math.round(o.y))},dl.prototype.addCollisionDebugVertices=function(t,e,i,r,o,a,s){var u=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),l=u.vertexLength,c=o.layoutVertexArray,p=o.collisionVertexArray,h=s.anchorX,f=s.anchorY;this._addCollisionDebugVertex(c,p,a,h,f,new n(t,e)),this._addCollisionDebugVertex(c,p,a,h,f,new n(i,e)),this._addCollisionDebugVertex(c,p,a,h,f,new n(i,r)),this._addCollisionDebugVertex(c,p,a,h,f,new n(t,r)),u.vertexLength+=4;var d=o.indexArray;d.emplaceBack(l,l+1),d.emplaceBack(l+1,l+2),d.emplaceBack(l+2,l+3),d.emplaceBack(l+3,l),u.primitiveLength+=4},dl.prototype.addDebugCollisionBoxes=function(t,e,i,r){for(var n=t;n<e;n++){var o=this.collisionBoxArray.get(n);this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,r?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,i)}},dl.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new fl(oo,vu.members,mo),this.iconCollisionBox=new fl(oo,vu.members,mo);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},dl.prototype._deserializeCollisionBoxesForSymbol=function(t,e,i,r,n,o,a,s,u){for(var l={},c=e;c<i;c++){var p=t.get(c);l.textBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},l.textFeatureIndex=p.featureIndex;break}for(var h=r;h<n;h++){var f=t.get(h);l.verticalTextBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},l.verticalTextFeatureIndex=f.featureIndex;break}for(var d=o;d<a;d++){var m=t.get(d);l.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},l.iconFeatureIndex=m.featureIndex;break}for(var y=s;y<u;y++){var _=t.get(y);l.verticalIconBox={x1:_.x1,y1:_.y1,x2:_.x2,y2:_.y2,anchorPointX:_.anchorPointX,anchorPointY:_.anchorPointY},l.verticalIconFeatureIndex=_.featureIndex;break}return l},dl.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},dl.prototype.hasTextData=function(){return this.text.segments.get().length>0},dl.prototype.hasIconData=function(){return this.icon.segments.get().length>0},dl.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},dl.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},dl.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},dl.prototype.addIndicesForPlacedSymbol=function(t,e){for(var i=t.placedSymbolArray.get(e),r=i.vertexStartIndex+4*i.numGlyphs,n=i.vertexStartIndex;n<r;n+=4)t.indexArray.emplaceBack(n,n+1,n+2),t.indexArray.emplaceBack(n+1,n+2,n+3)},dl.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),i=Math.cos(t),r=[],n=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);r.push(0|Math.round(e*s.anchorX+i*s.anchorY)),n.push(s.featureIndex)}return o.sort((function(t,e){return r[t]-r[e]||n[e]-n[t]})),o},dl.prototype.addToSortKeyRanges=function(t,e){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===e?i.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},dl.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,r=this.symbolInstanceIndexes;i<r.length;i+=1){var n=this.symbolInstances.get(r[i]);this.featureSortOrder.push(n.featureIndex),[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach((function(t,i,r){t>=0&&r.indexOf(t)===i&&e.addIndicesForPlacedSymbol(e.text,t)})),n.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,n.verticalPlacedTextSymbolIndex),n.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,n.placedIconSymbolIndex),n.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,n.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Jr("SymbolBucket",dl,{omit:["layers","collisionBoxArray","features","compareText"]}),dl.MAX_GLYPHS=65535,dl.addDynamicAttributes=cl;var ml=new Nn({"symbol-placement":new Fn(qt.layout_symbol["symbol-placement"]),"symbol-spacing":new Fn(qt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Fn(qt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new On(qt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Fn(qt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Fn(qt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Fn(qt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Fn(qt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Fn(qt.layout_symbol["icon-rotation-alignment"]),"icon-size":new On(qt.layout_symbol["icon-size"]),"icon-text-fit":new Fn(qt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Fn(qt.layout_symbol["icon-text-fit-padding"]),"icon-image":new On(qt.layout_symbol["icon-image"]),"icon-rotate":new On(qt.layout_symbol["icon-rotate"]),"icon-padding":new Fn(qt.layout_symbol["icon-padding"]),"icon-keep-upright":new Fn(qt.layout_symbol["icon-keep-upright"]),"icon-offset":new On(qt.layout_symbol["icon-offset"]),"icon-anchor":new On(qt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Fn(qt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Fn(qt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Fn(qt.layout_symbol["text-rotation-alignment"]),"text-field":new On(qt.layout_symbol["text-field"]),"text-font":new On(qt.layout_symbol["text-font"]),"text-size":new On(qt.layout_symbol["text-size"]),"text-max-width":new On(qt.layout_symbol["text-max-width"]),"text-line-height":new Fn(qt.layout_symbol["text-line-height"]),"text-letter-spacing":new On(qt.layout_symbol["text-letter-spacing"]),"text-justify":new On(qt.layout_symbol["text-justify"]),"text-radial-offset":new On(qt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Fn(qt.layout_symbol["text-variable-anchor"]),"text-anchor":new On(qt.layout_symbol["text-anchor"]),"text-max-angle":new Fn(qt.layout_symbol["text-max-angle"]),"text-writing-mode":new Fn(qt.layout_symbol["text-writing-mode"]),"text-rotate":new On(qt.layout_symbol["text-rotate"]),"text-padding":new Fn(qt.layout_symbol["text-padding"]),"text-keep-upright":new Fn(qt.layout_symbol["text-keep-upright"]),"text-transform":new On(qt.layout_symbol["text-transform"]),"text-offset":new On(qt.layout_symbol["text-offset"]),"text-allow-overlap":new Fn(qt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Fn(qt.layout_symbol["text-ignore-placement"]),"text-optional":new Fn(qt.layout_symbol["text-optional"])}),yl={paint:new Nn({"icon-opacity":new On(qt.paint_symbol["icon-opacity"]),"icon-color":new On(qt.paint_symbol["icon-color"]),"icon-halo-color":new On(qt.paint_symbol["icon-halo-color"]),"icon-halo-width":new On(qt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new On(qt.paint_symbol["icon-halo-blur"]),"icon-translate":new Fn(qt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Fn(qt.paint_symbol["icon-translate-anchor"]),"text-opacity":new On(qt.paint_symbol["text-opacity"]),"text-color":new On(qt.paint_symbol["text-color"],{runtimeType:ee,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new On(qt.paint_symbol["text-halo-color"]),"text-halo-width":new On(qt.paint_symbol["text-halo-width"]),"text-halo-blur":new On(qt.paint_symbol["text-halo-blur"]),"text-translate":new Fn(qt.paint_symbol["text-translate"]),"text-translate-anchor":new Fn(qt.paint_symbol["text-translate-anchor"])}),layout:ml},_l=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Jt,this.defaultValue=t};_l.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},_l.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},_l.prototype.outputDefined=function(){return!1},_l.prototype.serialize=function(){return null},Jr("FormatSectionOverride",_l,{omit:["defaultValue"]});var gl=function(t){function e(e){t.call(this,e,yl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,i){if(t.prototype.recalculate.call(this,e,i),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var r=this.layout.get("text-writing-mode");if(r){for(var n=[],o=0,a=r;o<a.length;o+=1){var s=a[o];n.indexOf(s)<0&&n.push(s)}this.layout._values["text-writing-mode"]=n}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,i,r){var n=this.layout.get(t).evaluate(e,{},i,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||or(o.value)||!n?n:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,i){return i in t?String(t[i]):""}))}(e.properties,n)},e.prototype.createBucket=function(t){return new dl(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,i=yl.paint.overridableProperties;t<i.length;t+=1){var r=i[t];if(e.hasPaintOverride(this.layout,r)){var n,o=this.paint.get(r),a=new _l(o),s=new nr(a,o.property.specification);n="constant"===o.value.kind||"source"===o.value.kind?new sr("source",s):new ur("composite",s,o.value.zoomStops,o.value._interpolationType),this.paint._values[r]=new Bn(o.property,n,o.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,i,r){return!(!this.layout||i.isDataDriven()||r.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var i=t.get("text-field"),r=yl.paint.properties[e],n=!1,o=function(t){for(var e=0,i=t;e<i.length;e+=1)if(r.overrides&&r.overrides.hasOverride(i[e]))return void(n=!0)};if("constant"===i.value.kind&&i.value.value instanceof _e)o(i.value.value.sections);else if("source"===i.value.kind){var a=function(t){n||(t instanceof Ie&&be(t.value)===oe?o(t.value.sections):t instanceof Ae?o(t.sections):t.eachChild(a))},s=i.value;s._styleExpression&&a(s._styleExpression.expression)}return n},e}(qn),vl={paint:new Nn({"background-color":new Fn(qt.paint_background["background-color"]),"background-pattern":new Un(qt.paint_background["background-pattern"]),"background-opacity":new Fn(qt.paint_background["background-opacity"])})},xl=function(t){function e(e){t.call(this,e,vl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(qn),bl={paint:new Nn({"raster-opacity":new Fn(qt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Fn(qt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Fn(qt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Fn(qt.paint_raster["raster-brightness-max"]),"raster-saturation":new Fn(qt.paint_raster["raster-saturation"]),"raster-contrast":new Fn(qt.paint_raster["raster-contrast"]),"raster-resampling":new Fn(qt.paint_raster["raster-resampling"]),"raster-fade-duration":new Fn(qt.paint_raster["raster-fade-duration"])})},wl=function(t){function e(e){t.call(this,e,bl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(qn),Il=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(qn),Sl={circle:ja,heatmap:Ja,hillshade:$a,fill:Vs,"fill-extrusion":iu,line:du,symbol:gl,background:xl,raster:wl};function Tl(t){return"custom"===t.type?new Il(t):new Sl[t.type](t)}var zl=a.HTMLImageElement,Al=a.HTMLCanvasElement,El=a.HTMLVideoElement,kl=a.ImageData,Cl=a.ImageBitmap,Pl=function(t,e,i,r){this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(e,r)};function Dl(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}Pl.prototype.update=function(t,e,i){var r=t.width,n=t.height,o=!(this.size&&this.size[0]===r&&this.size[1]===n||i),a=this.context,s=a.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[r,n],t instanceof zl||t instanceof Al||t instanceof El||t instanceof kl||Cl&&t instanceof Cl?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,r,n,0,this.format,s.UNSIGNED_BYTE,t.data);else{var u=i||{x:0,y:0},l=u.x,c=u.y;t instanceof zl||t instanceof Al||t instanceof El||t instanceof kl||Cl&&t instanceof Cl?s.texSubImage2D(s.TEXTURE_2D,0,l,c,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,l,c,r,n,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Pl.prototype.bind=function(t,e,i){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),i!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},Pl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Pl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Ml=function(t){function e(){t.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new Ha({width:1,height:1}),this.dirty=!0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isLoaded=function(){return this.loaded},e.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,i=this.requestors;e<i.length;e+=1){var r=i[e];this._notify(r.ids,r.callback)}this.requestors=[]}},e.prototype.getImage=function(t){return this.images[t]},e.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},e.prototype._validate=function(t,e){var i=!0;return this._validateStretch(e.stretchX,e.data&&e.data.width)||(this.fire(new jt(new Error('Image "'+t+'" has invalid "stretchX" value'))),i=!1),this._validateStretch(e.stretchY,e.data&&e.data.height)||(this.fire(new jt(new Error('Image "'+t+'" has invalid "stretchY" value'))),i=!1),this._validateContent(e.content,e)||(this.fire(new jt(new Error('Image "'+t+'" has invalid "content" value'))),i=!1),i},e.prototype._validateStretch=function(t,e){if(!t)return!0;for(var i=0,r=0,n=t;r<n.length;r+=1){var o=n[r];if(o[0]<i||o[1]<o[0]||e<o[1])return!1;i=o[1]}return!0},e.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},e.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},e.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},e.prototype.listImages=function(){return Object.keys(this.images)},e.prototype.getImages=function(t,e){var i=!0;if(!this.isLoaded())for(var r=0,n=t;r<n.length;r+=1)this.images[n[r]]||(i=!1);this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})},e.prototype._notify=function(t,e){for(var i={},r=0,n=t;r<n.length;r+=1){var o=n[r];this.images[o]||this.fire(new Ut("styleimagemissing",{id:o}));var a=this.images[o];a?i[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf,version:a.version,stretchX:a.stretchX,stretchY:a.stretchY,content:a.content,hasRenderCallback:Boolean(a.userImage&&a.userImage.render)}:A('Image "'+o+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}e(null,i)},e.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},e.prototype.getPattern=function(t){var e=this.patterns[t],i=this.getImage(t);if(!i)return null;if(e&&e.position.version===i.version)return e.position;if(e)e.position.version=i.version;else{var r={w:i.data.width+2,h:i.data.height+2,x:0,y:0},n=new Wu(r,i);this.patterns[t]={bin:r,position:n}}return this._updatePatternAtlas(),this.patterns[t].position},e.prototype.bind=function(t){var e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Pl(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)},e.prototype._updatePatternAtlas=function(){var t=[];for(var e in this.patterns)t.push(this.patterns[e].bin);var i=Xu(t),r=i.w,n=i.h,o=this.atlasImage;for(var a in o.resize({width:r||1,height:n||1}),this.patterns){var s=this.patterns[a].bin,u=s.x+1,l=s.y+1,c=this.images[a].data,p=c.width,h=c.height;Ha.copy(c,o,{x:0,y:0},{x:u,y:l},{width:p,height:h}),Ha.copy(c,o,{x:0,y:h-1},{x:u,y:l-1},{width:p,height:1}),Ha.copy(c,o,{x:0,y:0},{x:u,y:l+h},{width:p,height:1}),Ha.copy(c,o,{x:p-1,y:0},{x:u-1,y:l},{width:1,height:h}),Ha.copy(c,o,{x:0,y:0},{x:u+p,y:l},{width:1,height:h})}this.dirty=!0},e.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},e.prototype.dispatchRenderCallbacks=function(t){for(var e=0,i=t;e<i.length;e+=1){var r=i[e];if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var n=this.images[r];Dl(n)&&this.updateImage(r,n)}}},e}(Nt),Ll=Fl,Bl=Fl,Rl=1e20;function Fl(t,e,i,r,n,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=n||"sans-serif",this.fontWeight=o||"normal",this.radius=i||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Ol(t,e,i,r,n,o,a){for(var s=0;s<e;s++){for(var u=0;u<i;u++)r[u]=t[u*e+s];for(Vl(r,n,o,a,i),u=0;u<i;u++)t[u*e+s]=n[u]}for(u=0;u<i;u++){for(s=0;s<e;s++)r[s]=t[u*e+s];for(Vl(r,n,o,a,e),s=0;s<e;s++)t[u*e+s]=Math.sqrt(n[s])}}function Vl(t,e,i,r,n){i[0]=0,r[0]=-Rl,r[1]=+Rl;for(var o=1,a=0;o<n;o++){for(var s=(t[o]+o*o-(t[i[a]]+i[a]*i[a]))/(2*o-2*i[a]);s<=r[a];)a--,s=(t[o]+o*o-(t[i[a]]+i[a]*i[a]))/(2*o-2*i[a]);i[++a]=o,r[a]=s,r[a+1]=+Rl}for(o=0,a=0;o<n;o++){for(;r[a+1]<o;)a++;e[o]=(o-i[a])*(o-i[a])+t[i[a]]}}Fl.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var n=e.data[4*r+3]/255;this.gridOuter[r]=1===n?0:0===n?Rl:Math.pow(Math.max(0,.5-n),2),this.gridInner[r]=1===n?Rl:0===n?0:Math.pow(Math.max(0,n-.5),2)}for(Ol(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Ol(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)i[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return i},Ll.default=Bl;var Ul=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};Ul.prototype.setURL=function(t){this.url=t},Ul.prototype.getGlyphs=function(t,e){var i=this,r=[];for(var n in t)for(var o=0,a=t[n];o<a.length;o+=1)r.push({stack:n,id:a[o]});f(r,(function(t,e){var r=t.stack,n=t.id,o=i.entries[r];o||(o=i.entries[r]={glyphs:{},requests:{},ranges:{}});var a=o.glyphs[n];if(void 0===a){if(a=i._tinySDF(o,r,n))return o.glyphs[n]=a,void e(null,{stack:r,id:n,glyph:a});var s=Math.floor(n/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else if(o.ranges[s])e(null,{stack:r,id:n,glyph:a});else{var u=o.requests[s];u||(u=o.requests[s]=[],Ul.loadGlyphRange(r,s,i.url,i.requestManager,(function(t,e){if(e){for(var r in e)i._doesCharSupportLocalGlyph(+r)||(o.glyphs[+r]=e[+r]);o.ranges[s]=!0}for(var n=0,a=u;n<a.length;n+=1)(0,a[n])(t,e);delete o.requests[s]}))),u.push((function(t,i){t?e(t):i&&e(null,{stack:r,id:n,glyph:i[n]||null})}))}}else e(null,{stack:r,id:n,glyph:a})}),(function(t,i){if(t)e(t);else if(i){for(var r={},n=0,o=i;n<o.length;n+=1){var a=o[n],s=a.stack,u=a.id,l=a.glyph;(r[s]||(r[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}e(null,r)}}))},Ul.prototype._doesCharSupportLocalGlyph=function(t){return!!this.localIdeographFontFamily&&(un(t)||ln(t)||an(t)||sn(t))},Ul.prototype._tinySDF=function(t,e,i){var r=this.localIdeographFontFamily;if(r&&this._doesCharSupportLocalGlyph(i)){var n=t.tinySDF;if(!n){var o="400";/bold/i.test(e)?o="900":/medium/i.test(e)?o="500":/light/i.test(e)&&(o="200"),n=t.tinySDF=new Ul.TinySDF(24,3,8,.25,r,o)}return{id:i,bitmap:new Wa({width:30,height:30},n.draw(String.fromCharCode(i))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Ul.loadGlyphRange=function(t,e,i,r,n){var o=256*e,a=o+255,s=r.transformRequest(r.normalizeGlyphsURL(i).replace("{fontstack}",t).replace("{range}",o+"-"+a),Et.Glyphs);Bt(s,(function(t,e){if(t)n(t);else if(e){for(var i={},r=0,o=function(t){return new Tu(t).readFields(qu,[])}(e);r<o.length;r+=1){var a=o[r];i[a.id]=a}n(null,i)}}))},Ul.TinySDF=Ll;var jl=function(){this.specification=qt.light.position};jl.prototype.possiblyEvaluate=function(t,e){return r=(i=t.expression.evaluate(e))[0],n=i[1],o=i[2],n+=90,n*=Math.PI/180,o*=Math.PI/180,{x:r*Math.cos(n)*Math.sin(o),y:r*Math.sin(n)*Math.sin(o),z:r*Math.cos(o)};var i,r,n,o},jl.prototype.interpolate=function(t,e,i){return{x:ni(t.x,e.x,i),y:ni(t.y,e.y,i),z:ni(t.z,e.z,i)}};var Nl=new Nn({anchor:new Fn(qt.light.anchor),position:new jl,color:new Fn(qt.light.color),intensity:new Fn(qt.light.intensity)}),ql=function(t){function e(e){t.call(this),this._transitionable=new Pn(Nl),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getLight=function(){return this._transitionable.serialize()},e.prototype.setLight=function(t,e){if(void 0===e&&(e={}),!this._validate(Nr,t,e))for(var i in t){var r=t[i];w(i,"-transition")?this._transitionable.setTransition(i.slice(0,-"-transition".length),r):this._transitionable.setValue(i,r)}},e.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},e.prototype.hasTransition=function(){return this._transitioning.hasTransition()},e.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},e.prototype._validate=function(t,e,i){return(!i||!1!==i.validate)&&Gr(this,t.call(jr,m({value:e,style:{glyphs:!0,sprite:!0},styleSpec:qt})))},e}(Nt),Zl=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Zl.prototype.getDash=function(t,e){var i=t.join(",")+String(e);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(t,e)),this.dashEntry[i]},Zl.prototype.getDashRanges=function(t,e,i){var r=[],n=t.length%2==1?-t[t.length-1]*i:0,o=t[0]*i,a=!0;r.push({left:n,right:o,isDash:a,zeroLength:0===t[0]});for(var s=t[0],u=1;u<t.length;u++){var l=t[u];r.push({left:n=s*i,right:o=(s+=l)*i,isDash:a=!a,zeroLength:0===l})}return r},Zl.prototype.addRoundDash=function(t,e,i){for(var r=e/2,n=-i;n<=i;n++)for(var o=this.width*(this.nextRow+i+n),a=0,s=t[a],u=0;u<this.width;u++){u/s.right>1&&(s=t[++a]);var l=Math.abs(u-s.left),c=Math.abs(u-s.right),p=Math.min(l,c),h=void 0,f=n/i*(r+1);if(s.isDash){var d=r-Math.abs(f);h=Math.sqrt(p*p+d*d)}else h=r-Math.sqrt(p*p+f*f);this.data[o+u]=Math.max(0,Math.min(255,h+128))}},Zl.prototype.addRegularDash=function(t){for(var e=t.length-1;e>=0;--e){var i=t[e],r=t[e+1];i.zeroLength?t.splice(e,1):r&&r.isDash===i.isDash&&(r.left=i.left,t.splice(e,1))}var n=t[0],o=t[t.length-1];n.isDash===o.isDash&&(n.left=o.left-this.width,o.right=n.right+this.width);for(var a=this.width*this.nextRow,s=0,u=t[s],l=0;l<this.width;l++){l/u.right>1&&(u=t[++s]);var c=Math.abs(l-u.left),p=Math.abs(l-u.right),h=Math.min(c,p);this.data[a+l]=Math.max(0,Math.min(255,(u.isDash?h:-h)+128))}},Zl.prototype.addDash=function(t,e){var i=e?7:0,r=2*i+1;if(this.nextRow+r>this.height)return A("LineAtlas out of space"),null;for(var n=0,o=0;o<t.length;o++)n+=t[o];if(0!==n){var a=this.width/n,s=this.getDashRanges(t,this.width,a);e?this.addRoundDash(s,a,i):this.addRegularDash(s)}var u={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:n};return this.nextRow+=r,this.dirty=!0,u},Zl.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var Gl=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Gl.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))},Gl.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Xl=function(t,e,i){this.target=t,this.parent=e,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},b(["receive","process"],this),this.invoker=new Gl(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=C()?t:a};Xl.prototype.send=function(t,e,i,r,n){var o=this;void 0===n&&(n=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[a]=i);var s=M(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!i,targetMapId:r,mustQueue:n,sourceMapId:this.mapId,data:en(e,s)},s),{cancel:function(){i&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:o.mapId})}}},Xl.prototype.receive=function(t){var e=t.data,i=e.id;if(i&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[i];var r=this.cancelCallbacks[i];delete this.cancelCallbacks[i],r&&r()}else C()||e.mustQueue?(this.tasks[i]=e,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,e)},Xl.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},Xl.prototype.processTask=function(t,e){var i=this;if("<response>"===e.type){var r=this.callbacks[t];delete this.callbacks[t],r&&(e.error?r(rn(e.error)):r(null,rn(e.data)))}else{var n=!1,o=M(this.globalScope)?void 0:[],a=e.hasCallback?function(e,r){n=!0,delete i.cancelCallbacks[t],i.target.postMessage({id:t,type:"<response>",sourceMapId:i.mapId,error:e?en(e):null,data:en(r,o)},o)}:function(t){n=!0},s=null,u=rn(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,u,a);else if(this.parent.getWorkerSource){var l=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,l[0],u.source)[l[1]](u,a)}else a(new Error("Could not find function "+e.type));!n&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},Xl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Wl=function t(e,i){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=g();for(var r=this.workerPool.acquire(this.id),n=0;n<r.length;n++){var o=new t.Actor(r[n],i,this.id);o.name="Worker "+n,this.actors.push(o)}};function Hl(t,e,i){var r=2*Math.PI*6378137/256/Math.pow(2,i);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}Wl.prototype.broadcast=function(t,e,i){f(this.actors,(function(i,r){i.send(t,e,r)}),i=i||function(){})},Wl.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Wl.prototype.remove=function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)},Wl.Actor=Xl;var Kl=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Kl.prototype.setNorthEast=function(t){return this._ne=t instanceof Yl?new Yl(t.lng,t.lat):Yl.convert(t),this},Kl.prototype.setSouthWest=function(t){return this._sw=t instanceof Yl?new Yl(t.lng,t.lat):Yl.convert(t),this},Kl.prototype.extend=function(t){var e,i,r=this._sw,n=this._ne;if(t instanceof Yl)e=t,i=t;else{if(!(t instanceof Kl))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Kl.convert(t)):this.extend(Yl.convert(t)):this;if(i=t._ne,!(e=t._sw)||!i)return this}return r||n?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new Yl(e.lng,e.lat),this._ne=new Yl(i.lng,i.lat)),this},Kl.prototype.getCenter=function(){return new Yl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Kl.prototype.getSouthWest=function(){return this._sw},Kl.prototype.getNorthEast=function(){return this._ne},Kl.prototype.getNorthWest=function(){return new Yl(this.getWest(),this.getNorth())},Kl.prototype.getSouthEast=function(){return new Yl(this.getEast(),this.getSouth())},Kl.prototype.getWest=function(){return this._sw.lng},Kl.prototype.getSouth=function(){return this._sw.lat},Kl.prototype.getEast=function(){return this._ne.lng},Kl.prototype.getNorth=function(){return this._ne.lat},Kl.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Kl.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Kl.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Kl.prototype.contains=function(t){var e=Yl.convert(t),i=e.lng,r=e.lat,n=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&n},Kl.convert=function(t){return!t||t instanceof Kl?t:new Kl(t)};var Yl=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Yl.prototype.wrap=function(){return new Yl(h(this.lng,-180,180),this.lat)},Yl.prototype.toArray=function(){return[this.lng,this.lat]},Yl.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Yl.prototype.distanceTo=function(t){var e=Math.PI/180,i=this.lat*e,r=t.lat*e,n=Math.sin(i)*Math.sin(r)+Math.cos(i)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(n,1))},Yl.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return new Kl(new Yl(this.lng-i,this.lat-e),new Yl(this.lng+i,this.lat+e))},Yl.convert=function(t){if(t instanceof Yl)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Yl(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Yl(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Jl=2*Math.PI*6371008.8;function Ql(t){return Jl*Math.cos(t*Math.PI/180)}function $l(t){return(180+t)/360}function tc(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function ec(t,e){return t/Ql(e)}function ic(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var rc=function(t,e,i){void 0===i&&(i=0),this.x=+t,this.y=+e,this.z=+i};rc.fromLngLat=function(t,e){void 0===e&&(e=0);var i=Yl.convert(t);return new rc($l(i.lng),tc(i.lat),ec(e,i.lat))},rc.prototype.toLngLat=function(){return new Yl(360*this.x-180,ic(this.y))},rc.prototype.toAltitude=function(){return this.z*Ql(ic(this.y))},rc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Jl*(t=ic(this.y),1/Math.cos(t*Math.PI/180));var t};var nc=function(t,e,i){this.z=t,this.x=e,this.y=i,this.key=sc(0,t,t,e,i)};nc.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},nc.prototype.url=function(t,e){var i,r,n,o,a,s=(r=this.y,n=this.z,o=Hl(256*(i=this.x),256*(r=Math.pow(2,n)-r-1),n),a=Hl(256*(i+1),256*(r+1),n),o[0]+","+o[1]+","+a[0]+","+a[1]),u=function(t,e,i){for(var r,n="",o=t;o>0;o--)n+=(e&(r=1<<o-1)?1:0)+(i&r?2:0);return n}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},nc.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new n(8192*(t.x*e-this.x),8192*(t.y*e-this.y))},nc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var oc=function(t,e){this.wrap=t,this.canonical=e,this.key=sc(t,e.z,e.z,e.x,e.y)},ac=function(t,e,i,r,n){this.overscaledZ=t,this.wrap=e,this.canonical=new nc(i,+r,+n),this.key=sc(e,t,i,r,n)};function sc(t,e,i,r,n){(t*=2)<0&&(t=-1*t-1);var o=1<<i;return(o*o*t+o*n+r).toString(36)+i.toString(36)+e.toString(36)}function uc(t,e,i){var r=function(r,n){if(r)return i(r);if(n){var o=y(m(n,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);n.vector_layers&&(o.vectorLayers=n.vector_layers,o.vectorLayerIds=o.vectorLayers.map((function(t){return t.id}))),o.tiles=e.canonicalizeTileset(o,t.url),i(null,o)}};return t.url?Lt(e.transformRequest(e.normalizeSourceURL(t.url),Et.Source),r):U.frame((function(){return r(null,t)}))}ac.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},ac.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new ac(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ac(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},ac.prototype.calculateScaledKey=function(t,e){var i=this.canonical.z-t;return t>this.canonical.z?sc(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):sc(this.wrap*+e,t,t,this.canonical.x>>i,this.canonical.y>>i)},ac.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},ac.prototype.children=function(t){if(this.overscaledZ>=t)return[new ac(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,i=2*this.canonical.x,r=2*this.canonical.y;return[new ac(e,this.wrap,e,i,r),new ac(e,this.wrap,e,i+1,r),new ac(e,this.wrap,e,i,r+1),new ac(e,this.wrap,e,i+1,r+1)]},ac.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},ac.prototype.wrapped=function(){return new ac(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ac.prototype.unwrapTo=function(t){return new ac(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},ac.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ac.prototype.toUnwrapped=function(){return new oc(this.wrap,this.canonical)},ac.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ac.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new rc(t.x-this.wrap,t.y))},Jr("CanonicalTileID",nc),Jr("OverscaledTileID",ac,{omit:["posMatrix"]});var lc=function(t,e,i){this.bounds=Kl.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=i||24};lc.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},lc.prototype.contains=function(t){var e=Math.pow(2,t.z),i=Math.floor($l(this.bounds.getWest())*e),r=Math.floor(tc(this.bounds.getNorth())*e),n=Math.ceil($l(this.bounds.getEast())*e),o=Math.ceil(tc(this.bounds.getSouth())*e);return t.x>=i&&t.x<n&&t.y>=r&&t.y<o};var cc=function(t){function e(e,i,r,n){if(t.call(this),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,m(this,y(i,["url","scheme","tileSize","promoteId"])),this._options=m({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(n)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this._loaded=!1,this.fire(new Ut("dataloading",{dataType:"source"})),this._tileJSONRequest=uc(this._options,this.map._requestManager,(function(e,i){t._tileJSONRequest=null,t._loaded=!0,e?t.fire(new jt(e)):i&&(m(t,i),i.bounds&&(t.tileBounds=new lc(i.bounds,t.minzoom,t.maxzoom)),_t(i.tiles,t.map._requestManager._customAccessToken),vt(i.tiles,t.map._getMapId(),t.map._requestManager._skuToken,t.map._requestManager._customAccessToken),t.fire(new Ut("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new Ut("data",{dataType:"source",sourceDataType:"content"})))}))},e.prototype.loaded=function(){return this._loaded},e.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.setSourceProperty=function(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},e.prototype.setTiles=function(t){var e=this;return this.setSourceProperty((function(){e._options.tiles=t})),this},e.prototype.setUrl=function(t){var e=this;return this.setSourceProperty((function(){e.url=t,e._options.url=t})),this},e.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},e.prototype.serialize=function(){return m({},this._options)},e.prototype.loadTile=function(t,e){var i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),r={request:this.map._requestManager.transformRequest(i,Et.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:U.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function n(i,r){return delete t.request,t.aborted?e(null):i&&404!==i.status?e(i):(r&&r.resourceTiming&&(t.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&t.setExpiryData(r),t.loadVectorData(r,this.map.painter),zt(this.dispatcher),e(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}r.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=e:t.request=t.actor.send("reloadTile",r,n.bind(this)):(t.actor=this.dispatcher.getActor(),t.request=t.actor.send("loadTile",r,n.bind(this)))},e.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},e.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},e.prototype.hasTransition=function(){return!1},e}(Nt),pc=function(t){function e(e,i,r,n){t.call(this),this.id=e,this.dispatcher=r,this.setEventedParent(n),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=m({type:"raster"},i),m(this,y(i,["url","scheme","tileSize"]))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this._loaded=!1,this.fire(new Ut("dataloading",{dataType:"source"})),this._tileJSONRequest=uc(this._options,this.map._requestManager,(function(e,i){t._tileJSONRequest=null,t._loaded=!0,e?t.fire(new jt(e)):i&&(m(t,i),i.bounds&&(t.tileBounds=new lc(i.bounds,t.minzoom,t.maxzoom)),_t(i.tiles),vt(i.tiles,t.map._getMapId(),t.map._requestManager._skuToken),t.fire(new Ut("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new Ut("data",{dataType:"source",sourceDataType:"content"})))}))},e.prototype.loaded=function(){return this._loaded},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},e.prototype.serialize=function(){return m({},this._options)},e.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},e.prototype.loadTile=function(t,e){var i=this,r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);t.request=Ft(this.map._requestManager.transformRequest(r,Et.Tile),(function(r,n){if(delete t.request,t.aborted)t.state="unloaded",e(null);else if(r)t.state="errored",e(r);else if(n){i.map._refreshExpiredTiles&&t.setExpiryData(n),delete n.cacheControl,delete n.expires;var o=i.map.painter.context,a=o.gl;t.texture=i.map.painter.getTileTexture(n.width),t.texture?t.texture.update(n,{useMipmap:!0}):(t.texture=new Pl(o,n,a.RGBA,{useMipmap:!0}),t.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),o.extTextureFilterAnisotropic&&a.texParameterf(a.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax)),t.state="loaded",zt(i.dispatcher),e(null)}}))},e.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},e.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},e.prototype.hasTransition=function(){return!1},e}(Nt),hc=function(t,e,i){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return A('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var r=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=i||"mapbox";for(var n=0;n<r;n++)this.data[this._idx(-1,n)]=this.data[this._idx(0,n)],this.data[this._idx(r,n)]=this.data[this._idx(r-1,n)],this.data[this._idx(n,-1)]=this.data[this._idx(n,0)],this.data[this._idx(n,r)]=this.data[this._idx(n,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)]};hc.prototype.get=function(t,e){var i=new Uint8Array(this.data.buffer),r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[r],i[r+1],i[r+2])},hc.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},hc.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},hc.prototype._unpackMapbox=function(t,e,i){return(256*t*256+256*e+i)/10-1e4},hc.prototype._unpackTerrarium=function(t,e,i){return 256*t+e+i/256-32768},hc.prototype.getPixels=function(){return new Ha({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},hc.prototype.backfillBorder=function(t,e,i){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var r=e*this.dim,n=e*this.dim+this.dim,o=i*this.dim,a=i*this.dim+this.dim;switch(e){case-1:r=n-1;break;case 1:n=r+1}switch(i){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,u=-i*this.dim,l=o;l<a;l++)for(var c=r;c<n;c++)this.data[this._idx(c,l)]=t.data[this._idx(c+s,l+u)]},Jr("DEMData",hc);var fc=function(t){function e(e,i,r,n){t.call(this,e,i,r,n),this.type="raster-dem",this.maxzoom=22,this._options=m({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},e.prototype.loadTile=function(t,e){var i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function r(i,r){i&&(t.state="errored",e(i)),r&&(t.dem=r,t.needsHillshadePrepare=!0,t.state="loaded",e(null))}t.request=Ft(this.map._requestManager.transformRequest(i,Et.Tile),function(i,n){if(delete t.request,t.aborted)t.state="unloaded",e(null);else if(i)t.state="errored",e(i);else if(n){this.map._refreshExpiredTiles&&t.setExpiryData(n),delete n.cacheControl,delete n.expires;var o=a.ImageBitmap&&n instanceof a.ImageBitmap&&At()?n:U.getImageData(n,1),s={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:o,encoding:this.encoding};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",s,r.bind(this)))}}.bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)},e.prototype._getNeighboringTiles=function(t){var e=t.canonical,i=Math.pow(2,e.z),r=(e.x-1+i)%i,n=0===e.x?t.wrap-1:t.wrap,o=(e.x+1+i)%i,a=e.x+1===i?t.wrap+1:t.wrap,s={};return s[new ac(t.overscaledZ,n,e.z,r,e.y).key]={backfilled:!1},s[new ac(t.overscaledZ,a,e.z,o,e.y).key]={backfilled:!1},e.y>0&&(s[new ac(t.overscaledZ,n,e.z,r,e.y-1).key]={backfilled:!1},s[new ac(t.overscaledZ,t.wrap,e.z,e.x,e.y-1).key]={backfilled:!1},s[new ac(t.overscaledZ,a,e.z,o,e.y-1).key]={backfilled:!1}),e.y+1<i&&(s[new ac(t.overscaledZ,n,e.z,r,e.y+1).key]={backfilled:!1},s[new ac(t.overscaledZ,t.wrap,e.z,e.x,e.y+1).key]={backfilled:!1},s[new ac(t.overscaledZ,a,e.z,o,e.y+1).key]={backfilled:!1}),s},e.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},e}(pc),dc=function(t){function e(e,i,r,n){t.call(this),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(n),this._data=i.data,this._options=m({},i),this._collectResourceTiming=i.collectResourceTiming,this._resourceTiming=[],void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;var o=8192/this.tileSize;this.workerOptions=m({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*o,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*o,extent:8192,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?Math.min(i.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:8192,radius:(i.clusterRadius||50)*o,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this.fire(new Ut("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)t.fire(new jt(e));else{var i={dataType:"source",sourceDataType:"metadata"};t._collectResourceTiming&&t._resourceTiming&&t._resourceTiming.length>0&&(i.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire(new Ut("data",i))}}))},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.setData=function(t){var e=this;return this._data=t,this.fire(new Ut("dataloading",{dataType:"source"})),this._updateWorkerData((function(t){if(t)e.fire(new jt(t));else{var i={dataType:"source",sourceDataType:"content"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(i.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new Ut("data",i))}})),this},e.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},e.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},e.prototype.getClusterLeaves=function(t,e,i,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:i},r),this},e.prototype._updateWorkerData=function(t){var e=this;this._loaded=!1;var i=m({},this.workerOptions),r=this._data;"string"==typeof r?(i.request=this.map._requestManager.transformRequest(U.resolveURL(r),Et.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(r),this.actor.send(this.type+".loadData",i,(function(r,n){e._removed||n&&n.abandoned||(e._loaded=!0,n&&n.resourceTiming&&n.resourceTiming[e.id]&&(e._resourceTiming=n.resourceTiming[e.id].slice(0)),e.actor.send(e.type+".coalesce",{source:i.source},null),t(r))}))},e.prototype.loaded=function(){return this._loaded},e.prototype.loadTile=function(t,e){var i=this,r=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(r,{type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:U.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(n,o){return delete t.request,t.unloadVectorData(),t.aborted?e(null):n?e(n):(t.loadVectorData(o,i.map.painter,"reloadTile"===r),e(null))}))},e.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},e.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},e.prototype.serialize=function(){return m({},this._options,{type:this.type,data:this._data})},e.prototype.hasTransition=function(){return!1},e}(Nt),mc=Wn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),yc=function(t){function e(e,i,r,n){t.call(this),this.id=e,this.dispatcher=r,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(t,e){var i=this;this._loaded=!1,this.fire(new Ut("dataloading",{dataType:"source"})),this.url=this.options.url,Ft(this.map._requestManager.transformRequest(this.url,Et.Image),(function(r,n){i._loaded=!0,r?i.fire(new jt(r)):n&&(i.image=n,t&&(i.coordinates=t),e&&e(),i._finishLoading())}))},e.prototype.loaded=function(){return this._loaded},e.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this},e.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new Ut("data",{dataType:"source",sourceDataType:"metadata"})))},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.setCoordinates=function(t){var e=this;this.coordinates=t;var i=t.map(rc.fromLngLat);this.tileID=function(t){for(var e=1/0,i=1/0,r=-1/0,n=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),i=Math.min(i,s.y),r=Math.max(r,s.x),n=Math.max(n,s.y)}var u=Math.max(r-e,n-i),l=Math.max(0,Math.floor(-Math.log(u)/Math.LN2)),c=Math.pow(2,l);return new nc(l,Math.floor((e+r)/2*c),Math.floor((i+n)/2*c))}(i),this.minzoom=this.maxzoom=this.tileID.z;var r=i.map((function(t){return e.tileID.getTilePoint(t)._round()}));return this._boundsArray=new Yn,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,8192,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,8192),this._boundsArray.emplaceBack(r[2].x,r[2].y,8192,8192),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new Ut("data",{dataType:"source",sourceDataType:"content"})),this},e.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,e=t.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,mc.members)),this.boundsSegments||(this.boundsSegments=ko.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Pl(t,this.image,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},e.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},e.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},e.prototype.hasTransition=function(){return!1},e}(Nt),_c=function(t){function e(e,i,r,n){t.call(this,e,i,r,n),this.roundZoom=!0,this.type="video",this.options=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this._loaded=!1;var e=this.options;this.urls=[];for(var i=0,r=e.urls;i<r.length;i+=1)this.urls.push(this.map._requestManager.transformRequest(r[i],Et.Source).url);!function(e,i){var r,n,o=a.document.createElement("video");o.muted=!0,o.onloadstart=function(){!function(e,i){t._loaded=!0,i&&(t.video=i,t.video.loop=!0,t.video.addEventListener("playing",(function(){t.map.triggerRepaint()})),t.map&&t.video.play(),t._finishLoading())}(0,o)};for(var s=0;s<e.length;s++){var u=a.document.createElement("source");r=e[s],n=void 0,(n=a.document.createElement("a")).href=r,(n.protocol!==a.document.location.protocol||n.host!==a.document.location.host)&&(o.crossOrigin="Anonymous"),u.src=e[s],o.appendChild(u)}}(this.urls)},e.prototype.pause=function(){this.video&&this.video.pause()},e.prototype.play=function(){this.video&&this.video.play()},e.prototype.seek=function(t){if(this.video){var e=this.video.seekable;t<e.start(0)||t>e.end(0)?this.fire(new jt(new Zt("sources."+this.id,null,"Playback for this video can be set only between the "+e.start(0)+" and "+e.end(0)+"-second mark."))):this.video.currentTime=t}},e.prototype.getVideo=function(){return this.video},e.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},e.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,e=t.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,mc.members)),this.boundsSegments||(this.boundsSegments=ko.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,this.video)):(this.texture=new Pl(t,this.video,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},e.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},e.prototype.hasTransition=function(){return this.video&&!this.video.paused},e}(yc),gc=function(t){function e(e,i,r,n){t.call(this,e,i,r,n),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||this.fire(new jt(new Zt("sources."+e,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new jt(new Zt("sources."+e,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new jt(new Zt("sources."+e,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof a.HTMLCanvasElement||this.fire(new jt(new Zt("sources."+e,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new jt(new Zt("sources."+e,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.HTMLCanvasElement?this.options.canvas:a.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new jt(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},e.prototype.getCanvas=function(){return this.canvas},e.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},e.prototype.onRemove=function(){this.pause()},e.prototype.prepare=function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var e=this.map.painter.context,i=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,mc.members)),this.boundsSegments||(this.boundsSegments=ko.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Pl(e,this.canvas,i.RGBA,{premultiply:!0}),this.tiles){var n=this.tiles[r];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},e.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},e.prototype.hasTransition=function(){return this._playing},e.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var i=e[t];if(isNaN(i)||i<=0)return!0}return!1},e}(yc),vc={vector:cc,raster:pc,"raster-dem":fc,geojson:dc,video:_c,image:yc,canvas:gc};function xc(t,e){var i=Ea([]);return Pa(i,i,[1,1,0]),Da(i,i,[.5*t.width,.5*t.height,1]),Ca(i,i,t.calculatePosMatrix(e.toUnwrapped()))}function bc(t,e,i,r,n,o){var a=function(t,e,i){if(t)for(var r=0,n=t;r<n.length;r+=1){var o=e[n[r]];if(o&&o.source===i&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===i&&"fill-extrusion"===s.type)return!0}return!1}(n&&n.layers,e,t.id),s=o.maxPitchScaleFactor(),u=t.tilesIn(r,s,a);u.sort(wc);for(var l=[],c=0,p=u;c<p.length;c+=1){var h=p[c];l.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,i,t._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,n,o,s,xc(t.transform,h.tileID))})}var f=function(t){for(var e={},i={},r=0,n=t;r<n.length;r+=1){var o=n[r],a=o.queryResults,s=o.wrappedTileID,u=i[s]=i[s]||{};for(var l in a)for(var c=a[l],p=u[l]=u[l]||{},h=e[l]=e[l]||[],f=0,d=c;f<d.length;f+=1){var m=d[f];p[m.featureIndex]||(p[m.featureIndex]=!0,h.push(m))}}return e}(l);for(var d in f)f[d].forEach((function(e){var i=e.feature,r=t.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=r}));return f}function wc(t,e){var i=t.tileID,r=e.tileID;return i.overscaledZ-r.overscaledZ||i.canonical.y-r.canonical.y||i.wrap-r.wrap||i.canonical.x-r.canonical.x}var Ic=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}};Ic.prototype.encode=function(t){return this._stringToNumber[t]},Ic.prototype.decode=function(t){return this._numberToString[t]};var Sc=function(t,e,i,r,n){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=i,t._y=r,this.properties=t.properties,this.id=n},Tc={geometry:{configurable:!0}};Tc.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Tc.geometry.set=function(t){this._geometry=t},Sc.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Sc.prototype,Tc);var zc=function(){this.state={},this.stateChanges={},this.deletedStates={}};zc.prototype.updateState=function(t,e,i){var r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},m(this.stateChanges[t][r],i),null===this.deletedStates[t])for(var n in this.deletedStates[t]={},this.state[t])n!==r&&(this.deletedStates[t][n]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][r])for(var o in this.deletedStates[t][r]={},this.state[t][r])i[o]||(this.deletedStates[t][r][o]=null);else for(var a in i)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][a]&&delete this.deletedStates[t][r][a]},zc.prototype.removeFeatureState=function(t,e,i){if(null!==this.deletedStates[t]){var r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},i&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][i]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(i in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][i]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}},zc.prototype.getState=function(t,e){var i=String(e),r=m({},(this.state[t]||{})[i],(this.stateChanges[t]||{})[i]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var n=this.deletedStates[t][e];if(null===n)return{};for(var o in n)delete r[o]}return r},zc.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},zc.prototype.coalesceChanges=function(t,e){var i={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var n={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),m(this.state[r][o],this.stateChanges[r][o]),n[o]=this.state[r][o];i[r]=n}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var u in this.state[a])s[u]={},this.state[a][u]={};else for(var l in this.deletedStates[a]){if(null===this.deletedStates[a][l])this.state[a][l]={};else for(var c=0,p=Object.keys(this.deletedStates[a][l]);c<p.length;c+=1)delete this.state[a][l][p[c]];s[l]=this.state[a][l]}i[a]=i[a]||{},m(i[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(var h in t)t[h].setFeatureState(i,e)};var Ac=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Xr(8192,16,0),this.grid3D=new Xr(8192,16,0),this.featureIndexArray=new Ao,this.promoteId=e};function Ec(t,e,i,r,n){return I(t,(function(t,o){var a=e instanceof Rn?e.get(o):null;return a&&a.evaluate?a.evaluate(i,r,n):a}))}function kc(t){for(var e=1/0,i=1/0,r=-1/0,n=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),i=Math.min(i,s.y),r=Math.max(r,s.x),n=Math.max(n,s.y)}return{minX:e,minY:i,maxX:r,maxY:n}}function Cc(t,e){return e-t}Ac.prototype.insert=function(t,e,i,r,n,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,r,n);for(var s=o?this.grid3D:this.grid,u=0;u<e.length;u++){for(var l=e[u],c=[1/0,1/0,-1/0,-1/0],p=0;p<l.length;p++){var h=l[p];c[0]=Math.min(c[0],h.x),c[1]=Math.min(c[1],h.y),c[2]=Math.max(c[2],h.x),c[3]=Math.max(c[3],h.y)}c[0]<8192&&c[1]<8192&&c[2]>=0&&c[3]>=0&&s.insert(a,c[0],c[1],c[2],c[3])}},Ac.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ks.VectorTile(new Tu(this.rawTileData)).layers,this.sourceLayerCoder=new Ic(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ac.prototype.query=function(t,e,i,r){var o=this;this.loadVTLayers();for(var a=t.params||{},s=8192/t.tileSize/t.scale,u=vr(a.filter),l=t.queryGeometry,c=t.queryPadding*s,p=kc(l),h=this.grid.query(p.minX-c,p.minY-c,p.maxX+c,p.maxY+c),f=kc(t.cameraQueryGeometry),d=this.grid3D.query(f.minX-c,f.minY-c,f.maxX+c,f.maxY+c,(function(e,i,r,o){return function(t,e,i,r,o){for(var a=0,s=t;a<s.length;a+=1){var u=s[a];if(e<=u.x&&i<=u.y&&r>=u.x&&o>=u.y)return!0}var l=[new n(e,i),new n(e,o),new n(r,o),new n(r,i)];if(t.length>2)for(var c=0,p=l;c<p.length;c+=1)if(va(t,p[c]))return!0;for(var h=0;h<t.length-1;h++)if(xa(t[h],t[h+1],l))return!0;return!1}(t.cameraQueryGeometry,e-c,i-c,r+c,o+c)})),m=0,y=d;m<y.length;m+=1)h.push(y[m]);h.sort(Cc);for(var _,g={},v=function(n){var c=h[n];if(c!==_){_=c;var p=o.featureIndexArray.get(c),f=null;o.loadMatchingFeature(g,p.bucketIndex,p.sourceLayerIndex,p.featureIndex,u,a.layers,a.availableImages,e,i,r,(function(e,i,r){return f||(f=sa(e)),i.queryIntersectsFeature(l,e,r,f,o.z,t.transform,s,t.pixelPosMatrix)}))}},x=0;x<h.length;x++)v(x);return g},Ac.prototype.loadMatchingFeature=function(t,e,i,r,n,o,a,s,u,l,c){var p=this.bucketLayerIDs[e];if(!o||function(t,e){for(var i=0;i<t.length;i++)if(e.indexOf(t[i])>=0)return!0;return!1}(o,p)){var h=this.sourceLayerCoder.decode(i),f=this.vtLayers[h].feature(r);if(n.filter(new En(this.tileID.overscaledZ),f))for(var d=this.getId(f,h),m=0;m<p.length;m++){var y=p[m];if(!(o&&o.indexOf(y)<0)){var _=s[y];if(_){var g={};void 0!==d&&l&&(g=l.getState(_.sourceLayer||"_geojsonTileLayer",d));var v=u[y];v.paint=Ec(v.paint,_.paint,f,g,a),v.layout=Ec(v.layout,_.layout,f,g,a);var x=!c||c(f,_,g);if(x){var b=new Sc(f,this.z,this.x,this.y,d);b.layer=v;var w=t[y];void 0===w&&(w=t[y]=[]),w.push({featureIndex:r,feature:b,intersectionZ:x})}}}}}},Ac.prototype.lookupSymbolFeatures=function(t,e,i,r,n,o,a,s){var u={};this.loadVTLayers();for(var l=vr(n),c=0,p=t;c<p.length;c+=1)this.loadMatchingFeature(u,i,r,p[c],l,o,a,s,e);return u},Ac.prototype.hasLayer=function(t){for(var e=0,i=this.bucketLayerIDs;e<i.length;e+=1)for(var r=0,n=i[e];r<n.length;r+=1)if(t===n[r])return!0;return!1},Ac.prototype.getId=function(t,e){var i=t.id;return this.promoteId&&"boolean"==typeof(i=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(i=Number(i)),i},Jr("FeatureIndex",Ac,{omit:["rawTileData","sourceLayerCoder"]});var Pc=function(t,e){this.tileID=t,this.uid=g(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Pc.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<U.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Pc.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Pc.prototype.loadVectorData=function(t,e,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var r in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var i={};if(!e)return i;for(var r=function(){var t=o[n],r=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==r.length){t.layers=r,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return r.filter((function(e){return e.id===t}))[0]})));for(var a=0,s=r;a<s.length;a+=1)i[s[a].id]=t}},n=0,o=t;n<o.length;n+=1)r();return i}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var n=this.buckets[r];if(n instanceof dl){if(this.hasSymbolBuckets=!0,!i)break;n.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof dl&&a.hasRTLText){this.hasRTLText=!0,An.isLoading()||An.isLoaded()||"deferred"!==Tn()||zn();break}}for(var s in this.queryPadding=0,this.buckets){var u=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(u))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new vo},Pc.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Pc.prototype.getBucket=function(t){return this.buckets[t.id]},Pc.prototype.upload=function(t){for(var e in this.buckets){var i=this.buckets[e];i.uploadPending()&&i.upload(t)}var r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Pl(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Pl(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},Pc.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},Pc.prototype.queryRenderedFeatures=function(t,e,i,r,n,o,a,s,u,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:n,scale:o,tileSize:this.tileSize,pixelPosMatrix:l,transform:s,params:a,queryPadding:this.queryPadding*u},t,e,i):{}},Pc.prototype.querySourceFeatures=function(t,e){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var r=i.loadVTLayers(),n=e?e.sourceLayer:"",o=r._geojsonTileLayer||r[n];if(o)for(var a=vr(e&&e.filter),s=this.tileID.canonical,u=s.z,l=s.x,c=s.y,p={z:u,x:l,y:c},h=0;h<o.length;h++){var f=o.feature(h);if(a.filter(new En(this.tileID.overscaledZ),f)){var d=i.getId(f,n),m=new Sc(f,u,l,c,d);m.tile=p,t.push(m)}}}},Pc.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Pc.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Pc.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var i=P(t.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),n=!1;if(this.expirationTime>r)n=!1;else if(e)if(this.expirationTime<e)n=!0;else{var o=this.expirationTime-e;o?this.expirationTime=r+Math.max(o,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Pc.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Pc.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var i=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets)if(e.style.hasLayer(r)){var n=this.buckets[r],o=n.layers[0].sourceLayer||"_geojsonTileLayer",a=i[o],s=t[o];if(a&&s&&0!==Object.keys(s).length){n.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});var u=e&&e.style&&e.style.getLayer(r);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(n)))}}}},Pc.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Pc.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<U.now()},Pc.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Pc.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=U.now()+t},Pc.prototype.setDependencies=function(t,e){for(var i={},r=0,n=e;r<n.length;r+=1)i[n[r]]=!0;this.dependencies[t]=i},Pc.prototype.hasDependency=function(t,e){for(var i=0,r=t;i<r.length;i+=1){var n=this.dependencies[r[i]];if(n)for(var o=0,a=e;o<a.length;o+=1)if(n[a[o]])return!0}return!1};var Dc=function(t,e){this.max=t,this.onRemove=e,this.reset()};Dc.prototype.reset=function(){for(var t in this.data)for(var e=0,i=this.data[t];e<i.length;e+=1){var r=i[e];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},Dc.prototype.add=function(t,e,i){var r=this,n=t.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);var o={value:e,timeout:void 0};if(void 0!==i&&(o.timeout=setTimeout((function(){r.remove(t,o)}),i)),this.data[n].push(o),this.order.push(n),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},Dc.prototype.has=function(t){return t.wrapped().key in this.data},Dc.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},Dc.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},Dc.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},Dc.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},Dc.prototype.remove=function(t,e){if(!this.has(t))return this;var i=t.wrapped().key,r=void 0===e?0:this.data[i].indexOf(e),n=this.data[i][r];return this.data[i].splice(r,1),n.timeout&&clearTimeout(n.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(n.value),this.order.splice(this.order.indexOf(i),1),this},Dc.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},Dc.prototype.filter=function(t){var e=[];for(var i in this.data)for(var r=0,n=this.data[i];r<n.length;r+=1){var o=n[r];t(o.value)||e.push(o)}for(var a=0,s=e;a<s.length;a+=1){var u=s[a];this.remove(u.value.tileID,u)}};var Mc=function(t,e,i){this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};Mc.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Mc.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},Mc.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Lc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Bc=function(t,e,i,r){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;var n=t.gl;this.buffer=n.createBuffer(),t.bindVertexBuffer.set(this.buffer),n.bufferData(n.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};Bc.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Bc.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},Bc.prototype.enableAttributes=function(t,e){for(var i=0;i<this.attributes.length;i++){var r=e.attributes[this.attributes[i].name];void 0!==r&&t.enableVertexAttribArray(r)}},Bc.prototype.setVertexAttribPointers=function(t,e,i){for(var r=0;r<this.attributes.length;r++){var n=this.attributes[r],o=e.attributes[n.name];void 0!==o&&t.vertexAttribPointer(o,n.components,t[Lc[n.type]],!1,this.itemSize,n.offset+this.itemSize*(i||0))}},Bc.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Rc=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Rc.prototype.get=function(){return this.current},Rc.prototype.set=function(t){},Rc.prototype.getDefault=function(){return this.default},Rc.prototype.setDefault=function(){this.set(this.default)};var Fc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return de.transparent},e.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},e}(Rc),Oc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(Rc),Vc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(Rc),Uc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(Rc),jc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(Rc),Nc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(Rc),qc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(Rc),Zc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(Rc),Gc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(Rc),Xc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(Rc),Wc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(Rc),Hc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(Rc),Kc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(Rc),Yc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(Rc),Jc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return de.transparent},e.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},e}(Rc),Qc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(Rc),$c=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(Rc),tp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(Rc),ep=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(Rc),ip=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(Rc),rp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(Rc),np=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(Rc),op=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(Rc),ap=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(Rc),sp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(Rc),up=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(Rc),lp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(Rc),cp=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(Rc),pp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(Rc),hp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(Rc),fp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(Rc),dp=function(t){function e(e,i){t.call(this,e),this.context=e,this.parent=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(Rc),mp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(dp),yp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(dp),_p=function(t,e,i,r){this.context=t,this.width=e,this.height=i;var n=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new mp(t,n),r&&(this.depthAttachment=new yp(t,n))};_p.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var i=this.depthAttachment.get();i&&t.deleteRenderbuffer(i)}t.deleteFramebuffer(this.framebuffer)};var gp=function(t,e,i){this.func=t,this.mask=e,this.range=i};gp.ReadOnly=!1,gp.ReadWrite=!0,gp.disabled=new gp(519,gp.ReadOnly,[0,1]);var vp=function(t,e,i,r,n,o){this.test=t,this.ref=e,this.mask=i,this.fail=r,this.depthFail=n,this.pass=o};vp.disabled=new vp({func:519,mask:0},0,0,7680,7680,7680);var xp=function(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i};xp.disabled=new xp(xp.Replace=[1,0],de.transparent,[!1,!1,!1,!1]),xp.unblended=new xp(xp.Replace,de.transparent,[!0,!0,!0,!0]),xp.alphaBlended=new xp([1,771],de.transparent,[!0,!0,!0,!0]);var bp=function(t,e,i){this.enable=t,this.mode=e,this.frontFace=i};bp.disabled=new bp(!1,1029,2305),bp.backCCW=new bp(!0,1029,2305);var wp=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Fc(this),this.clearDepth=new Oc(this),this.clearStencil=new Vc(this),this.colorMask=new Uc(this),this.depthMask=new jc(this),this.stencilMask=new Nc(this),this.stencilFunc=new qc(this),this.stencilOp=new Zc(this),this.stencilTest=new Gc(this),this.depthRange=new Xc(this),this.depthTest=new Wc(this),this.depthFunc=new Hc(this),this.blend=new Kc(this),this.blendFunc=new Yc(this),this.blendColor=new Jc(this),this.blendEquation=new Qc(this),this.cullFace=new $c(this),this.cullFaceSide=new tp(this),this.frontFace=new ep(this),this.program=new ip(this),this.activeTexture=new rp(this),this.viewport=new np(this),this.bindFramebuffer=new op(this),this.bindRenderbuffer=new ap(this),this.bindTexture=new sp(this),this.bindVertexBuffer=new up(this),this.bindElementBuffer=new lp(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new cp(this),this.pixelStoreUnpack=new pp(this),this.pixelStoreUnpackPremultiplyAlpha=new hp(this),this.pixelStoreUnpackFlipY=new fp(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)};wp.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},wp.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},wp.prototype.createIndexBuffer=function(t,e){return new Mc(this,t,e)},wp.prototype.createVertexBuffer=function(t,e,i){return new Bc(this,t,e,i)},wp.prototype.createRenderbuffer=function(t,e,i){var r=this.gl,n=r.createRenderbuffer();return this.bindRenderbuffer.set(n),r.renderbufferStorage(r.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),n},wp.prototype.createFramebuffer=function(t,e,i){return new _p(this,t,e,i)},wp.prototype.clear=function(t){var e=t.color,i=t.depth,r=this.gl,n=0;e&&(n|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(n|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),r.clear(n)},wp.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},wp.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},wp.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},wp.prototype.setColorMode=function(t){s(t.blendFunction,xp.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)},wp.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ip=function(t){function e(e,i,r){var n=this;t.call(this),this.id=e,this.dispatcher=r,this.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(n._sourceLoaded=!0),n._sourceLoaded&&!n._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(n.reload(),n.transform&&n.update(n.transform))})),this.on("error",(function(){n._sourceErrored=!0})),this._source=function(t,e,i,r){var n=new vc[e.type](t,e,i,r);if(n.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+n.id);return b(["load","abort","unload","serialize","prepare"],n),n}(e,i,r,this),this._tiles={},this._cache=new Dc(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new zc}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},e.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},e.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},e.prototype.getSource=function(){return this._source},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},e.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},e.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))},e.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,(function(){}))},e.prototype.serialize=function(){return this._source.serialize()},e.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var i=this._tiles[e];i.upload(t),i.prepare(this.map.style.imageManager)}},e.prototype.getIds=function(){return d(this._tiles).map((function(t){return t.tileID})).sort(Sp).map((function(t){return t.key}))},e.prototype.getRenderableIds=function(t){var e=this,i=[];for(var r in this._tiles)this._isIdRenderable(r,t)&&i.push(this._tiles[r]);return t?i.sort((function(t,i){var r=t.tileID,o=i.tileID,a=new n(r.canonical.x,r.canonical.y)._rotate(e.transform.angle),s=new n(o.canonical.x,o.canonical.y)._rotate(e.transform.angle);return r.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x})).map((function(t){return t.tileID.key})):i.map((function(t){return t.tileID})).sort(Sp).map((function(t){return t.key}))},e.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},e.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},e.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},e.prototype._reloadTile=function(t,e){var i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))},e.prototype._tileLoaded=function(t,e,i,r){if(r)return t.state="errored",void(404!==r.status?this._source.fire(new jt(r,{tile:t})):this.update(this.transform));t.timeAdded=U.now(),"expired"===i&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new Ut("data",{dataType:"source",tile:t,coord:t.tileID}))},e.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),i=0;i<e.length;i++){var r=e[i];if(t.neighboringTiles&&t.neighboringTiles[r]){var n=this.getTileByID(r);o(t,n),o(n,t)}}function o(t,e){t.needsHillshadePrepare=!0;var i=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,n=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===i&&0===r||Math.abs(r)>1||(Math.abs(i)>1&&(1===Math.abs(i+n)?i+=n:1===Math.abs(i-n)&&(i-=n)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},e.prototype.getTile=function(t){return this.getTileByID(t.key)},e.prototype.getTileByID=function(t){return this._tiles[t]},e.prototype._retainLoadedChildren=function(t,e,i,r){for(var n in this._tiles){var o=this._tiles[n];if(!(r[n]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>i)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var u=a;u.overscaledZ>e;)if(t[(u=u.scaledTo(u.overscaledZ-1)).key]){r[a.key]=a;break}}}},e.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var i=this._loadedParentTiles[t.key];return i&&i.tileID.overscaledZ>=e?i:null}for(var r=t.overscaledZ-1;r>=e;r--){var n=t.scaledTo(r),o=this._getLoadedTile(n);if(o)return o}},e.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},e.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,i=Math.ceil(t.height/this._source.tileSize)+1,r=Math.floor(e*i*5),n="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(n)},e.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var i={};for(var r in this._tiles){var n=this._tiles[r];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),i[n.tileID.key]=n}for(var o in this._tiles=i,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},e.prototype.update=function(t){var i=this;if(this.transform=t,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?r=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(t){return new ac(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)})):(r=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter((function(t){return i._source.hasTile(t)})))):r=[];var n=t.coveringZoomLevel(this._source),o=Math.max(n-e.maxOverzooming,this._source.minzoom),a=Math.max(n+e.maxUnderzooming,this._source.minzoom),s=this._updateRetainedTiles(r,n);if(Tp(this._source.type)){for(var u={},l={},c=0,p=Object.keys(s);c<p.length;c+=1){var h=p[c],f=s[h],d=this._tiles[h];if(d&&!(d.fadeEndTime&&d.fadeEndTime<=U.now())){var m=this.findLoadedParent(f,o);m&&(this._addTile(m.tileID),u[m.tileID.key]=m.tileID),l[h]=f}}for(var y in this._retainLoadedChildren(l,n,a,s),u)s[y]||(this._coveredTiles[y]=!0,s[y]=u[y])}for(var _ in s)this._tiles[_].clearFadeHold();for(var g=0,v=function(t,e){var i=[];for(var r in t)r in e||i.push(r);return i}(this._tiles,s);g<v.length;g+=1){var x=v[g],b=this._tiles[x];b.hasSymbolBuckets&&!b.holdingForFade()?b.setHoldDuration(this.map._fadeDuration):b.hasSymbolBuckets&&!b.symbolFadeFinished()||this._removeTile(x)}this._updateLoadedParentTileCache()}},e.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},e.prototype._updateRetainedTiles=function(t,i){for(var r={},n={},o=Math.max(i-e.maxOverzooming,this._source.minzoom),a=Math.max(i+e.maxUnderzooming,this._source.minzoom),s={},u=0,l=t;u<l.length;u+=1){var c=l[u],p=this._addTile(c);r[c.key]=c,p.hasData()||i<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,i,a,r);for(var h=0,f=t;h<f.length;h+=1){var d=f[h],m=this._tiles[d.key];if(!m.hasData()){if(i+1>this._source.maxzoom){var y=d.children(this._source.maxzoom)[0],_=this.getTile(y);if(_&&_.hasData()){r[y.key]=y;continue}}else{var g=d.children(this._source.maxzoom);if(r[g[0].key]&&r[g[1].key]&&r[g[2].key]&&r[g[3].key])continue}for(var v=m.wasRequested(),x=d.overscaledZ-1;x>=o;--x){var b=d.scaledTo(x);if(n[b.key])break;if(n[b.key]=!0,!(m=this.getTile(b))&&v&&(m=this._addTile(b)),m&&(r[b.key]=b,v=m.wasRequested(),m.hasData()))break}}}return r},e.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],i=void 0,r=this._tiles[t].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){i=this._loadedParentTiles[r.key];break}e.push(r.key);var n=r.scaledTo(r.overscaledZ-1);if(i=this._getLoadedTile(n))break;r=n}for(var o=0,a=e;o<a.length;o+=1)this._loadedParentTiles[a[o]]=i}},e.prototype._addTile=function(t){var e=this._tiles[t.key];if(e)return e;(e=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));var i=Boolean(e);return i||(e=new Pc(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))),e?(e.uses++,this._tiles[t.key]=e,i||this._source.fire(new Ut("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null},e.prototype._setTileReloadTimer=function(t,e){var i=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout((function(){i._reloadTile(t,"expired"),delete i._timers[t]}),r))},e.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},e.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},e.prototype.tilesIn=function(t,e,i){var r=this,n=[],o=this.transform;if(!o)return n;for(var a=i?o.getCameraQueryGeometry(t):t,s=t.map((function(t){return o.pointCoordinate(t)})),u=a.map((function(t){return o.pointCoordinate(t)})),l=this.getIds(),c=1/0,p=1/0,h=-1/0,f=-1/0,d=0,m=u;d<m.length;d+=1){var y=m[d];c=Math.min(c,y.x),p=Math.min(p,y.y),h=Math.max(h,y.x),f=Math.max(f,y.y)}for(var _=function(t){var i=r._tiles[l[t]];if(!i.holdingForFade()){var a=i.tileID,d=Math.pow(2,o.zoom-i.tileID.overscaledZ),m=e*i.queryPadding*8192/i.tileSize/d,y=[a.getTilePoint(new rc(c,p)),a.getTilePoint(new rc(h,f))];if(y[0].x-m<8192&&y[0].y-m<8192&&y[1].x+m>=0&&y[1].y+m>=0){var _=s.map((function(t){return a.getTilePoint(t)})),g=u.map((function(t){return a.getTilePoint(t)}));n.push({tile:i,tileID:a,queryGeometry:_,cameraQueryGeometry:g,scale:d})}}},g=0;g<l.length;g++)_(g);return n},e.prototype.getVisibleCoordinates=function(t){for(var e=this,i=this.getRenderableIds(t).map((function(t){return e._tiles[t].tileID})),r=0,n=i;r<n.length;r+=1){var o=n[r];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return i},e.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Tp(this._source.type))for(var t in this._tiles){var e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=U.now())return!0}return!1},e.prototype.setFeatureState=function(t,e,i){this._state.updateState(t=t||"_geojsonTileLayer",e,i)},e.prototype.removeFeatureState=function(t,e,i){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,i)},e.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},e.prototype.setDependencies=function(t,e,i){var r=this._tiles[t];r&&r.setDependencies(e,i)},e.prototype.reloadTilesForDependencies=function(t,e){for(var i in this._tiles)this._tiles[i].hasDependency(t,e)&&this._reloadTile(i,"reloading");this._cache.filter((function(i){return!i.hasDependency(t,e)}))},e}(Nt);function Sp(t,e){var i=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-i||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Tp(t){return"raster"===t||"image"===t||"video"===t}function zp(){return new a.Worker(jm.workerUrl)}Ip.maxOverzooming=10,Ip.maxUnderzooming=3;var Ap="mapboxgl_preloaded_worker_pool",Ep=function(){this.active={}};Ep.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Ep.workerCount;)this.workers.push(new zp);return this.active[t]=!0,this.workers.slice()},Ep.prototype.release=function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)},Ep.prototype.isPreloaded=function(){return!!this.active[Ap]},Ep.prototype.numActive=function(){return Object.keys(this.active).length};var kp,Cp=Math.floor(U.hardwareConcurrency/2);function Pp(){return kp||(kp=new Ep),kp}Ep.workerCount=Math.max(Math.min(Cp,6),1);var Dp=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Mp(t,e){var i={};for(var r in t)"ref"!==r&&(i[r]=t[r]);return Dp.forEach((function(t){t in e&&(i[t]=e[t])})),i}function Lp(t){t=t.slice();for(var e=Object.create(null),i=0;i<t.length;i++)e[t[i].id]=t[i];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=Mp(t[r],e[t[r].ref]));return t}var Bp={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Rp(t,e,i){i.push({command:Bp.addSource,args:[t,e[t]]})}function Fp(t,e,i){e.push({command:Bp.removeSource,args:[t]}),i[t]=!0}function Op(t,e,i,r){Fp(t,i,r),Rp(t,e,i)}function Vp(t,e,i){var r;for(r in t[i])if(t[i].hasOwnProperty(r)&&"data"!==r&&!s(t[i][r],e[i][r]))return!1;for(r in e[i])if(e[i].hasOwnProperty(r)&&"data"!==r&&!s(t[i][r],e[i][r]))return!1;return!0}function Up(t,e,i,r,n,o){var a;for(a in e=e||{},t=t||{})t.hasOwnProperty(a)&&(s(t[a],e[a])||i.push({command:o,args:[r,a,e[a],n]}));for(a in e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(s(t[a],e[a])||i.push({command:o,args:[r,a,e[a],n]}))}function jp(t){return t.id}function Np(t,e){return t[e.id]=e,t}var qp=function(t,e){this.reset(t,e)};qp.prototype.reset=function(t,e){this.points=t||[],this._distances=[0];for(var i=1;i<this.points.length;i++)this._distances[i]=this._distances[i-1]+this.points[i].dist(this.points[i-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding},qp.prototype.lerp=function(t){if(1===this.points.length)return this.points[0];t=p(t,0,1);for(var e=1,i=this._distances[e],r=t*this.paddedLength+this.padding;i<r&&e<this._distances.length;)i=this._distances[++e];var n=e-1,o=this._distances[n],a=i-o,s=a>0?(r-o)/a:0;return this.points[n].mult(1-s).add(this.points[e].mult(s))};var Zp=function(t,e,i){var r=this.boxCells=[],n=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),n.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function Gp(t,e,i,r,n){var o=Aa();return e?(Da(o,o,[1/n,1/n,1]),i||Ma(o,o,r.angle)):Ca(o,r.labelPlaneMatrix,t),o}function Xp(t,e,i,r,n){if(e){var o=function(t){var e=new za(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}(t);return Da(o,o,[n,n,1]),i||Ma(o,o,-r.angle),o}return r.glCoordMatrix}function Wp(t,e){var i=[t.x,t.y,0,1];nh(i,i,e);var r=i[3];return{point:new n(i[0]/r,i[1]/r),signedDistanceFromCamera:r}}function Hp(t,e){return.5+t/e*.5}function Kp(t,e){var i=t[0]/t[3],r=t[1]/t[3];return i>=-e[0]&&i<=e[0]&&r>=-e[1]&&r<=e[1]}function Yp(t,e,i,r,o,a,s,u){var l=r?t.textSizeData:t.iconSizeData,c=rl(l,i.transform.zoom),p=[256/i.width*2+1,256/i.height*2+1],h=r?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;h.clear();for(var f=t.lineVertexArray,d=r?t.text.placedSymbolArray:t.icon.placedSymbolArray,m=i.transform.width/i.transform.height,y=!1,_=0;_<d.length;_++){var g=d.get(_);if(g.hidden||g.writingMode===Yu.vertical&&!y)rh(g.numGlyphs,h);else{y=!1;var v=[g.anchorX,g.anchorY,0,1];if(Va(v,v,e),Kp(v,p)){var x=Hp(i.transform.cameraToCenterDistance,v[3]),b=il(l,c,g),w=s?b/x:b*x,I=new n(g.anchorX,g.anchorY),S=Wp(I,o).point,T={},z=$p(g,w,!1,u,e,o,a,t.glyphOffsetArray,f,h,S,I,T,m);y=z.useVertical,(z.notEnoughRoom||y||z.needsFlipping&&$p(g,w,!0,u,e,o,a,t.glyphOffsetArray,f,h,S,I,T,m).notEnoughRoom)&&rh(g.numGlyphs,h)}else rh(g.numGlyphs,h)}}r?t.text.dynamicLayoutVertexBuffer.updateData(h):t.icon.dynamicLayoutVertexBuffer.updateData(h)}function Jp(t,e,i,r,n,o,a,s,u,l,c){var p=s.glyphStartIndex+s.numGlyphs,h=s.lineStartIndex,f=s.lineStartIndex+s.lineLength,d=e.getoffsetX(s.glyphStartIndex),m=e.getoffsetX(p-1),y=eh(t*d,i,r,n,o,a,s.segment,h,f,u,l,c);if(!y)return null;var _=eh(t*m,i,r,n,o,a,s.segment,h,f,u,l,c);return _?{first:y,last:_}:null}function Qp(t,e,i,r){return t===Yu.horizontal&&Math.abs(i.y-e.y)>Math.abs(i.x-e.x)*r?{useVertical:!0}:(t===Yu.vertical?e.y<i.y:e.x>i.x)?{needsFlipping:!0}:null}function $p(t,e,i,r,o,a,s,u,l,c,p,h,f,d){var m,y=e/24,_=t.lineOffsetX*y,g=t.lineOffsetY*y;if(t.numGlyphs>1){var v=t.glyphStartIndex+t.numGlyphs,x=t.lineStartIndex,b=t.lineStartIndex+t.lineLength,w=Jp(y,u,_,g,i,p,h,t,l,a,f);if(!w)return{notEnoughRoom:!0};var I=Wp(w.first.point,s).point,S=Wp(w.last.point,s).point;if(r&&!i){var T=Qp(t.writingMode,I,S,d);if(T)return T}m=[w.first];for(var z=t.glyphStartIndex+1;z<v-1;z++)m.push(eh(y*u.getoffsetX(z),_,g,i,p,h,t.segment,x,b,l,a,f));m.push(w.last)}else{if(r&&!i){var A=Wp(h,o).point,E=t.lineStartIndex+t.segment+1,k=new n(l.getx(E),l.gety(E)),C=Wp(k,o),P=C.signedDistanceFromCamera>0?C.point:th(h,k,A,1,o),D=Qp(t.writingMode,A,P,d);if(D)return D}var M=eh(y*u.getoffsetX(t.glyphStartIndex),_,g,i,p,h,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,l,a,f);if(!M)return{notEnoughRoom:!0};m=[M]}for(var L=0,B=m;L<B.length;L+=1){var R=B[L];cl(c,R.point,R.angle)}return{}}function th(t,e,i,r,n){var o=Wp(t.add(t.sub(e)._unit()),n).point,a=i.sub(o);return i.add(a._mult(r/a.mag()))}function eh(t,e,i,r,o,a,s,u,l,c,p,h){var f=r?t-e:t+e,d=f>0?1:-1,m=0;r&&(d*=-1,m=Math.PI),d<0&&(m+=Math.PI);for(var y=d>0?u+s:u+s+1,_=o,g=o,v=0,x=0,b=Math.abs(f),w=[];v+x<=b;){if((y+=d)<u||y>=l)return null;if(g=_,w.push(_),void 0===(_=h[y])){var I=new n(c.getx(y),c.gety(y)),S=Wp(I,p);if(S.signedDistanceFromCamera>0)_=h[y]=S.point;else{var T=y-d;_=th(0===v?a:new n(c.getx(T),c.gety(T)),I,g,b-v+1,p)}}v+=x,x=g.dist(_)}var z=(b-v)/x,A=_.sub(g),E=A.mult(z)._add(g);E._add(A._unit()._perp()._mult(i*d));var k=m+Math.atan2(_.y-g.y,_.x-g.x);return w.push(E),{point:E,angle:k,path:w}}Zp.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Zp.prototype.insert=function(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)},Zp.prototype.insertCircle=function(t,e,i,r){this._forEachCell(e-r,i-r,e+r,i+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(r)},Zp.prototype._insertBoxCell=function(t,e,i,r,n,o){this.boxCells[n].push(o)},Zp.prototype._insertCircleCell=function(t,e,i,r,n,o){this.circleCells[n].push(o)},Zp.prototype._query=function(t,e,i,r,n,o){if(i<0||t>this.width||r<0||e>this.height)return!n&&[];var a=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=r){if(n)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],p=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:l-p,y1:c-p,x2:l+p,y2:c+p})}return o?a.filter(o):a}return this._forEachCell(t,e,i,r,this._queryCell,a,{hitTest:n,seenUids:{box:{},circle:{}}},o),n?a.length>0:a},Zp.prototype._queryCircle=function(t,e,i,r,n){var o=t-i,a=t+i,s=e-i,u=e+i;if(a<0||o>this.width||u<0||s>this.height)return!r&&[];var l=[];return this._forEachCell(o,s,a,u,this._queryCellCircle,l,{hitTest:r,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}},n),r?l.length>0:l},Zp.prototype.query=function(t,e,i,r,n){return this._query(t,e,i,r,!1,n)},Zp.prototype.hitTest=function(t,e,i,r,n){return this._query(t,e,i,r,!0,n)},Zp.prototype.hitTestCircle=function(t,e,i,r){return this._queryCircle(t,e,i,!0,r)},Zp.prototype._queryCell=function(t,e,i,r,n,o,a,s){var u=a.seenUids,l=this.boxCells[n];if(null!==l)for(var c=this.bboxes,p=0,h=l;p<h.length;p+=1){var f=h[p];if(!u.box[f]){u.box[f]=!0;var d=4*f;if(t<=c[d+2]&&e<=c[d+3]&&i>=c[d+0]&&r>=c[d+1]&&(!s||s(this.boxKeys[f]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[f],x1:c[d],y1:c[d+1],x2:c[d+2],y2:c[d+3]})}}}var m=this.circleCells[n];if(null!==m)for(var y=this.circles,_=0,g=m;_<g.length;_+=1){var v=g[_];if(!u.circle[v]){u.circle[v]=!0;var x=3*v;if(this._circleAndRectCollide(y[x],y[x+1],y[x+2],t,e,i,r)&&(!s||s(this.circleKeys[v]))){if(a.hitTest)return o.push(!0),!0;var b=y[x],w=y[x+1],I=y[x+2];o.push({key:this.circleKeys[v],x1:b-I,y1:w-I,x2:b+I,y2:w+I})}}}},Zp.prototype._queryCellCircle=function(t,e,i,r,n,o,a,s){var u=a.circle,l=a.seenUids,c=this.boxCells[n];if(null!==c)for(var p=this.bboxes,h=0,f=c;h<f.length;h+=1){var d=f[h];if(!l.box[d]){l.box[d]=!0;var m=4*d;if(this._circleAndRectCollide(u.x,u.y,u.radius,p[m+0],p[m+1],p[m+2],p[m+3])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var y=this.circleCells[n];if(null!==y)for(var _=this.circles,g=0,v=y;g<v.length;g+=1){var x=v[g];if(!l.circle[x]){l.circle[x]=!0;var b=3*x;if(this._circlesCollide(_[b],_[b+1],_[b+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[x])))return o.push(!0),!0}}},Zp.prototype._forEachCell=function(t,e,i,r,n,o,a,s){for(var u=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),c=this._convertToXCellCoord(i),p=this._convertToYCellCoord(r),h=u;h<=c;h++)for(var f=l;f<=p;f++)if(n.call(this,t,e,i,r,this.xCellCount*f+h,o,a,s))return},Zp.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Zp.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Zp.prototype._circlesCollide=function(t,e,i,r,n,o){var a=r-t,s=n-e,u=i+o;return u*u>a*a+s*s},Zp.prototype._circleAndRectCollide=function(t,e,i,r,n,o,a){var s=(o-r)/2,u=Math.abs(t-(r+s));if(u>s+i)return!1;var l=(a-n)/2,c=Math.abs(e-(n+l));if(c>l+i)return!1;if(u<=s||c<=l)return!0;var p=u-s,h=c-l;return p*p+h*h<=i*i};var ih=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function rh(t,e){for(var i=0;i<t;i++){var r=e.length;e.resize(r+4),e.float32.set(ih,3*r)}}function nh(t,e,i){var r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t[3]=i[3]*r+i[7]*n+i[15],t}var oh=function(t,e,i){void 0===e&&(e=new Zp(t.width+200,t.height+200,25)),void 0===i&&(i=new Zp(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function ah(t,e,i){return e*(8192/(t.tileSize*Math.pow(2,i-t.tileID.overscaledZ)))}oh.prototype.placeCollisionBox=function(t,e,i,r,n){var o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),a=i*o.perspectiveRatio,s=t.x1*a+o.point.x,u=t.y1*a+o.point.y,l=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,u,l,c)||!e&&this.grid.hitTest(s,u,l,c,n)?{box:[],offscreen:!1}:{box:[s,u,l,c],offscreen:this.isOffscreen(s,u,l,c)}},oh.prototype.placeCollisionCircles=function(t,e,i,r,o,a,s,u,l,c,p,h,f){var d=[],m=new n(e.anchorX,e.anchorY),y=Wp(m,a),_=Hp(this.transform.cameraToCenterDistance,y.signedDistanceFromCamera),g=(c?o/_:o*_)/24,v=Wp(m,s).point,x=Jp(g,r,e.lineOffsetX*g,e.lineOffsetY*g,!1,v,m,e,i,s,{}),b=!1,w=!1,I=!0;if(x){for(var S=.5*h*_+f,T=new n(-100,-100),z=new n(this.screenRightBoundary,this.screenBottomBoundary),A=new qp,E=x.first,k=x.last,C=[],P=E.path.length-1;P>=1;P--)C.push(E.path[P]);for(var D=1;D<k.path.length;D++)C.push(k.path[D]);var M=2.5*S;if(u){var L=C.map((function(t){return Wp(t,u)}));C=L.some((function(t){return t.signedDistanceFromCamera<=0}))?[]:L.map((function(t){return t.point}))}var B=[];if(C.length>0){for(var R=C[0].clone(),F=C[0].clone(),O=1;O<C.length;O++)R.x=Math.min(R.x,C[O].x),R.y=Math.min(R.y,C[O].y),F.x=Math.max(F.x,C[O].x),F.y=Math.max(F.y,C[O].y);B=R.x>=T.x&&F.x<=z.x&&R.y>=T.y&&F.y<=z.y?[C]:F.x<T.x||R.x>z.x||F.y<T.y||R.y>z.y?[]:function(t,e,i,r,o){for(var a=[],s=0;s<t.length;s++)for(var u=t[s],l=void 0,c=0;c<u.length-1;c++){var p=u[c],h=u[c+1];p.x<e&&h.x<e||(p.x<e?p=new n(e,p.y+(e-p.x)/(h.x-p.x)*(h.y-p.y))._round():h.x<e&&(h=new n(e,p.y+(e-p.x)/(h.x-p.x)*(h.y-p.y))._round()),p.y<i&&h.y<i||(p.y<i?p=new n(p.x+(i-p.y)/(h.y-p.y)*(h.x-p.x),i)._round():h.y<i&&(h=new n(p.x+(i-p.y)/(h.y-p.y)*(h.x-p.x),i)._round()),p.x>=r&&h.x>=r||(p.x>=r?p=new n(r,p.y+(r-p.x)/(h.x-p.x)*(h.y-p.y))._round():h.x>=r&&(h=new n(r,p.y+(r-p.x)/(h.x-p.x)*(h.y-p.y))._round()),p.y>=o&&h.y>=o||(p.y>=o?p=new n(p.x+(o-p.y)/(h.y-p.y)*(h.x-p.x),o)._round():h.y>=o&&(h=new n(p.x+(o-p.y)/(h.y-p.y)*(h.x-p.x),o)._round()),l&&p.equals(l[l.length-1])||a.push(l=[p]),l.push(h)))))}return a}([C],T.x,T.y,z.x,z.y)}for(var V=0,U=B;V<U.length;V+=1){var j;A.reset(U[V],.25*S),j=A.length<=.5*S?1:Math.ceil(A.paddedLength/M)+1;for(var N=0;N<j;N++){var q=N/Math.max(j-1,1),Z=A.lerp(q),G=Z.x+100,X=Z.y+100;d.push(G,X,S,0);var W=G-S,H=X-S,K=G+S,Y=X+S;if(I=I&&this.isOffscreen(W,H,K,Y),w=w||this.isInsideGrid(W,H,K,Y),!t&&this.grid.hitTestCircle(G,X,S,p)&&(b=!0,!l))return{circles:[],offscreen:!1,collisionDetected:b}}}}return{circles:!l&&b||!w?[]:d,offscreen:I,collisionDetected:b}},oh.prototype.queryRenderedSymbols=function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var e=[],i=1/0,r=1/0,o=-1/0,a=-1/0,s=0,u=t;s<u.length;s+=1){var l=u[s],c=new n(l.x+100,l.y+100);i=Math.min(i,c.x),r=Math.min(r,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),e.push(c)}for(var p={},h={},f=0,d=this.grid.query(i,r,o,a).concat(this.ignoredGrid.query(i,r,o,a));f<d.length;f+=1){var m=d[f],y=m.key;void 0===p[y.bucketInstanceId]&&(p[y.bucketInstanceId]={}),p[y.bucketInstanceId][y.featureIndex]||ca(e,[new n(m.x1,m.y1),new n(m.x2,m.y1),new n(m.x2,m.y2),new n(m.x1,m.y2)])&&(p[y.bucketInstanceId][y.featureIndex]=!0,void 0===h[y.bucketInstanceId]&&(h[y.bucketInstanceId]=[]),h[y.bucketInstanceId].push(y.featureIndex))}return h},oh.prototype.insertCollisionBox=function(t,e,i,r,n){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:r,collisionGroupID:n},t[0],t[1],t[2],t[3])},oh.prototype.insertCollisionCircles=function(t,e,i,r,n){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:i,featureIndex:r,collisionGroupID:n},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},oh.prototype.projectAndGetPerspectiveRatio=function(t,e,i){var r=[e,i,0,1];return nh(r,r,t),{point:new n((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},oh.prototype.isOffscreen=function(t,e,i,r){return i<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary},oh.prototype.isInsideGrid=function(t,e,i,r){return i>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary},oh.prototype.getViewportMatrix=function(){var t=Ea([]);return Pa(t,t,[-100,-100,0]),t};var sh=function(t,e,i,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&i?1:0,this.placed=i};sh.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var uh=function(t,e,i,r,n){this.text=new sh(t?t.text:null,e,i,n),this.icon=new sh(t?t.icon:null,e,r,n)};uh.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var lh=function(t,e,i){this.text=t,this.icon=e,this.skipFade=i},ch=function(){this.invProjMatrix=Aa(),this.viewportMatrix=Aa(),this.circles=[]},ph=function(t,e,i,r,n){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=r,this.tileID=n},hh=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function fh(t,e,i,r,o){var a=tl(t),s=-(a.horizontalAlign-.5)*e,u=-(a.verticalAlign-.5)*i,l=al(t,r);return new n(s+l[0]*o,u+l[1]*o)}function dh(t,e,i,r,o,a){var s=t.x1,u=t.x2,l=t.y1,c=t.y2,p=t.anchorPointX,h=t.anchorPointY,f=new n(e,i);return r&&f._rotate(o?a:-a),{x1:s+f.x,y1:l+f.y,x2:u+f.x,y2:c+f.y,anchorPointX:p,anchorPointY:h}}hh.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var mh=function(t,e,i,r){this.transform=t.clone(),this.collisionIndex=new oh(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new hh(i),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}};function yh(t,e,i,r,n){t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0)}mh.prototype.getBucketParts=function(t,e,i,r){var n=i.getBucket(e),o=i.latestFeatureIndex;if(n&&o&&e.id===n.layerIds[0]){var a=i.collisionBoxArray,s=n.layers[0].layout,u=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),l=i.tileSize/8192,c=this.transform.calculatePosMatrix(i.tileID.toUnwrapped()),p="map"===s.get("text-pitch-alignment"),h="map"===s.get("text-rotation-alignment"),f=ah(i,1,this.transform.zoom),d=Gp(c,p,h,this.transform,f),m=null;if(p){var y=Xp(c,p,h,this.transform,f);m=Ca([],this.transform.labelPlaneMatrix,y)}this.retainedQueryData[n.bucketInstanceId]=new ph(n.bucketInstanceId,o,n.sourceLayerIndex,n.index,i.tileID);var _={bucket:n,layout:s,posMatrix:c,textLabelPlaneMatrix:d,labelToScreenMatrix:m,scale:u,textPixelRatio:l,holdingForFade:i.holdingForFade(),collisionBoxArray:a,partiallyEvaluatedTextSize:rl(n.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(n.sourceID)};if(r)for(var g=0,v=n.sortKeyRanges;g<v.length;g+=1){var x=v[g];t.push({sortKey:x.sortKey,symbolInstanceStart:x.symbolInstanceStart,symbolInstanceEnd:x.symbolInstanceEnd,parameters:_})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:n.symbolInstances.length,parameters:_})}},mh.prototype.attemptAnchorPlacement=function(t,e,i,r,n,o,a,s,u,l,c,p,h,f,d){var m,y=[p.textOffset0,p.textOffset1],_=fh(t,i,r,y,n),g=this.collisionIndex.placeCollisionBox(dh(e,_.x,_.y,o,a,this.transform.angle),c,s,u,l.predicate);if(!d||0!==this.collisionIndex.placeCollisionBox(dh(d,_.x,_.y,o,a,this.transform.angle),c,s,u,l.predicate).box.length)return g.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(m=this.prevPlacement.variableOffsets[p.crossTileID].anchor),this.variableOffsets[p.crossTileID]={textOffset:y,width:i,height:r,anchor:t,textBoxScale:n,prevAnchor:m},this.markUsedJustification(h,t,p,f),h.allowVerticalPlacement&&(this.markUsedOrientation(h,f,p),this.placedOrientations[p.crossTileID]=f),{shift:_,placedGlyphBoxes:g}):void 0},mh.prototype.placeLayerBucketPart=function(t,e,i){var r=this,n=t.parameters,o=n.bucket,a=n.layout,s=n.posMatrix,u=n.textLabelPlaneMatrix,l=n.labelToScreenMatrix,c=n.textPixelRatio,p=n.holdingForFade,h=n.collisionBoxArray,f=n.partiallyEvaluatedTextSize,d=n.collisionGroup,m=a.get("text-optional"),y=a.get("icon-optional"),_=a.get("text-allow-overlap"),g=a.get("icon-allow-overlap"),v="map"===a.get("text-rotation-alignment"),x="map"===a.get("text-pitch-alignment"),b="none"!==a.get("icon-text-fit"),w="viewport-y"===a.get("symbol-z-order"),I=_&&(g||!o.hasIconData()||y),S=g&&(_||!o.hasTextData()||m);!o.collisionArrays&&h&&o.deserializeCollisionBoxes(h);var T=function(t,n){if(!e[t.crossTileID])if(p)r.placements[t.crossTileID]=new lh(!1,!1,!1);else{var h,w=!1,T=!1,z=!0,A=null,E={box:null,offscreen:null},k={box:null,offscreen:null},C=null,P=null,D=0,M=0,L=0;n.textFeatureIndex?D=n.textFeatureIndex:t.useRuntimeCollisionCircles&&(D=t.featureIndex),n.verticalTextFeatureIndex&&(M=n.verticalTextFeatureIndex);var B=n.textBox;if(B){var R=function(e){var i=Yu.horizontal;if(o.allowVerticalPlacement&&!e&&r.prevPlacement){var n=r.prevPlacement.placedOrientations[t.crossTileID];n&&(r.placedOrientations[t.crossTileID]=n,r.markUsedOrientation(o,i=n,t))}return i},F=function(e,i){if(o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&n.verticalTextBox)for(var r=0,a=o.writingModes;r<a.length&&(a[r]===Yu.vertical?(E=i(),k=E):E=e(),!(E&&E.box&&E.box.length));r+=1);else E=e()};if(a.get("text-variable-anchor")){var O=a.get("text-variable-anchor");if(r.prevPlacement&&r.prevPlacement.variableOffsets[t.crossTileID]){var V=r.prevPlacement.variableOffsets[t.crossTileID];O.indexOf(V.anchor)>0&&(O=O.filter((function(t){return t!==V.anchor}))).unshift(V.anchor)}var U=function(e,i,n){for(var a=e.x2-e.x1,u=e.y2-e.y1,l=t.textBoxScale,p=b&&!g?i:null,h={box:[],offscreen:!1},f=_?2*O.length:O.length,m=0;m<f;++m){var y=r.attemptAnchorPlacement(O[m%O.length],e,a,u,l,v,x,c,s,d,m>=O.length,t,o,n,p);if(y&&(h=y.placedGlyphBoxes)&&h.box&&h.box.length){w=!0,A=y.shift;break}}return h};F((function(){return U(B,n.iconBox,Yu.horizontal)}),(function(){var e=n.verticalTextBox;return o.allowVerticalPlacement&&!(E&&E.box&&E.box.length)&&t.numVerticalGlyphVertices>0&&e?U(e,n.verticalIconBox,Yu.vertical):{box:null,offscreen:null}})),E&&(w=E.box,z=E.offscreen);var j=R(E&&E.box);if(!w&&r.prevPlacement){var N=r.prevPlacement.variableOffsets[t.crossTileID];N&&(r.variableOffsets[t.crossTileID]=N,r.markUsedJustification(o,N.anchor,t,j))}}else{var q=function(e,i){var n=r.collisionIndex.placeCollisionBox(e,_,c,s,d.predicate);return n&&n.box&&n.box.length&&(r.markUsedOrientation(o,i,t),r.placedOrientations[t.crossTileID]=i),n};F((function(){return q(B,Yu.horizontal)}),(function(){var e=n.verticalTextBox;return o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&e?q(e,Yu.vertical):{box:null,offscreen:null}})),R(E&&E.box&&E.box.length)}}if(w=(h=E)&&h.box&&h.box.length>0,z=h&&h.offscreen,t.useRuntimeCollisionCircles){var Z=o.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),G=il(o.textSizeData,f,Z),X=a.get("text-padding");C=r.collisionIndex.placeCollisionCircles(_,Z,o.lineVertexArray,o.glyphOffsetArray,G,s,u,l,i,x,d.predicate,t.collisionCircleDiameter,X),w=_||C.circles.length>0&&!C.collisionDetected,z=z&&C.offscreen}if(n.iconFeatureIndex&&(L=n.iconFeatureIndex),n.iconBox){var W=function(t){var e=b&&A?dh(t,A.x,A.y,v,x,r.transform.angle):t;return r.collisionIndex.placeCollisionBox(e,g,c,s,d.predicate)};T=k&&k.box&&k.box.length&&n.verticalIconBox?(P=W(n.verticalIconBox)).box.length>0:(P=W(n.iconBox)).box.length>0,z=z&&P.offscreen}var H=m||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,K=y||0===t.numIconVertices;if(H||K?K?H||(T=T&&w):w=T&&w:T=w=T&&w,w&&h&&h.box&&r.collisionIndex.insertCollisionBox(h.box,a.get("text-ignore-placement"),o.bucketInstanceId,k&&k.box&&M?M:D,d.ID),T&&P&&r.collisionIndex.insertCollisionBox(P.box,a.get("icon-ignore-placement"),o.bucketInstanceId,L,d.ID),C&&(w&&r.collisionIndex.insertCollisionCircles(C.circles,a.get("text-ignore-placement"),o.bucketInstanceId,D,d.ID),i)){var Y=o.bucketInstanceId,J=r.collisionCircleArrays[Y];void 0===J&&(J=r.collisionCircleArrays[Y]=new ch);for(var Q=0;Q<C.circles.length;Q+=4)J.circles.push(C.circles[Q+0]),J.circles.push(C.circles[Q+1]),J.circles.push(C.circles[Q+2]),J.circles.push(C.collisionDetected?1:0)}r.placements[t.crossTileID]=new lh(w||I,T||S,z||o.justReloaded),e[t.crossTileID]=!0}};if(w)for(var z=o.getSortedSymbolIndexes(this.transform.angle),A=z.length-1;A>=0;--A){var E=z[A];T(o.symbolInstances.get(E),o.collisionArrays[E])}else for(var k=t.symbolInstanceStart;k<t.symbolInstanceEnd;k++)T(o.symbolInstances.get(k),o.collisionArrays[k]);if(i&&o.bucketInstanceId in this.collisionCircleArrays){var C=this.collisionCircleArrays[o.bucketInstanceId];ka(C.invProjMatrix,s),C.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1},mh.prototype.markUsedJustification=function(t,e,i,r){var n;n=r===Yu.vertical?i.verticalPlacedTextSymbolIndex:{left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex}[function(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}(e)];for(var o=0,a=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];o<a.length;o+=1){var s=a[o];s>=0&&(t.text.placedSymbolArray.get(s).crossTileID=n>=0&&s!==n?0:i.crossTileID)}},mh.prototype.markUsedOrientation=function(t,e,i){for(var r=e===Yu.horizontal||e===Yu.horizontalOnly?e:0,n=e===Yu.vertical?e:0,o=0,a=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];o<a.length;o+=1)t.text.placedSymbolArray.get(a[o]).placedOrientation=r;i.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=n)},mh.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,i=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var r=e?e.symbolFadeChange(t):1,n=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements){var u=this.placements[s],l=n[s];l?(this.opacities[s]=new uh(l,r,u.text,u.icon),i=i||u.text!==l.text.placed||u.icon!==l.icon.placed):(this.opacities[s]=new uh(null,r,u.text,u.icon,u.skipFade),i=i||u.text||u.icon)}for(var c in n){var p=n[c];if(!this.opacities[c]){var h=new uh(p,r,!1,!1);h.isHidden()||(this.opacities[c]=h,i=i||p.text.placed||p.icon.placed)}}for(var f in o)this.variableOffsets[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.variableOffsets[f]=o[f]);for(var d in a)this.placedOrientations[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.placedOrientations[d]=a[d]);i?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},mh.prototype.updateLayerOpacities=function(t,e){for(var i={},r=0,n=e;r<n.length;r+=1){var o=n[r],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,i,o.collisionBoxArray)}},mh.prototype.updateBucketOpacities=function(t,e,i){var r=this;t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();var o=t.layers[0].layout,a=new uh(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),u=o.get("icon-allow-overlap"),l=o.get("text-variable-anchor"),c="map"===o.get("text-rotation-alignment"),p="map"===o.get("text-pitch-alignment"),h="none"!==o.get("icon-text-fit"),f=new uh(null,0,s&&(u||!t.hasIconData()||o.get("icon-optional")),u&&(s||!t.hasTextData()||o.get("text-optional")),!0);!t.collisionArrays&&i&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(i);for(var d=function(t,e,i){for(var r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(i)},m=function(i){var o=t.symbolInstances.get(i),s=o.numHorizontalGlyphVertices,u=o.numVerticalGlyphVertices,m=o.crossTileID,y=r.opacities[m];e[m]?y=a:y||(r.opacities[m]=y=f),e[m]=!0;var _=o.numIconVertices>0,g=r.placedOrientations[o.crossTileID],v=g===Yu.vertical,x=g===Yu.horizontal||g===Yu.horizontalOnly;if(s>0||u>0){var b=Sh(y.text);d(t.text,s,v?Th:b),d(t.text,u,x?Th:b);var w=y.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(e){e>=0&&(t.text.placedSymbolArray.get(e).hidden=w||v?1:0)})),o.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=w||x?1:0);var I=r.variableOffsets[o.crossTileID];I&&r.markUsedJustification(t,I.anchor,o,g);var S=r.placedOrientations[o.crossTileID];S&&(r.markUsedJustification(t,"left",o,S),r.markUsedOrientation(t,S,o))}if(_){var T=Sh(y.icon),z=!(h&&o.verticalPlacedIconSymbolIndex&&v);o.placedIconSymbolIndex>=0&&(d(t.icon,o.numIconVertices,z?T:Th),t.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=y.icon.isHidden()),o.verticalPlacedIconSymbolIndex>=0&&(d(t.icon,o.numVerticalIconVertices,z?Th:T),t.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=y.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){var A=t.collisionArrays[i];if(A){var E=new n(0,0);if(A.textBox||A.verticalTextBox){var k=!0;if(l){var C=r.variableOffsets[m];C?(E=fh(C.anchor,C.width,C.height,C.textOffset,C.textBoxScale),c&&E._rotate(p?r.transform.angle:-r.transform.angle)):k=!1}A.textBox&&yh(t.textCollisionBox.collisionVertexArray,y.text.placed,!k||v,E.x,E.y),A.verticalTextBox&&yh(t.textCollisionBox.collisionVertexArray,y.text.placed,!k||x,E.x,E.y)}var P=Boolean(!x&&A.verticalIconBox);A.iconBox&&yh(t.iconCollisionBox.collisionVertexArray,y.icon.placed,P,h?E.x:0,h?E.y:0),A.verticalIconBox&&yh(t.iconCollisionBox.collisionVertexArray,y.icon.placed,!P,h?E.x:0,h?E.y:0)}}},y=0;y<t.symbolInstances.length;y++)m(y);if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){var _=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=_.invProjMatrix,t.placementViewportMatrix=_.viewportMatrix,t.collisionCircleArray=_.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}},mh.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},mh.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},mh.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},mh.prototype.stillRecent=function(t,e){var i=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*i>t},mh.prototype.setStale=function(){this.stale=!0};var _h=Math.pow(2,25),gh=Math.pow(2,24),vh=Math.pow(2,17),xh=Math.pow(2,16),bh=Math.pow(2,9),wh=Math.pow(2,8),Ih=Math.pow(2,1);function Sh(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*_h+e*gh+i*vh+e*xh+i*bh+e*wh+i*Ih+e}var Th=0,zh=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};zh.prototype.continuePlacement=function(t,e,i,r,n){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,n())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((function(t,e){return t.sortKey-e.sortKey})));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,n())return!0;return!1};var Ah=function(t,e,i,r,n,o,a){this.placement=new mh(t,n,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=r,this._done=!1};Ah.prototype.isDone=function(){return this._done},Ah.prototype.continuePlacement=function(t,e,i){for(var r=this,n=U.now(),o=function(){var t=U.now()-n;return!r._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var a=e[t[this._currentPlacementIndex]],s=this.placement.collisionIndex.transform.zoom;if("symbol"===a.type&&(!a.minzoom||a.minzoom<=s)&&(!a.maxzoom||a.maxzoom>s)){if(this._inProgressLayer||(this._inProgressLayer=new zh(a)),this._inProgressLayer.continuePlacement(i[a.source],this.placement,this._showCollisionBoxes,a,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ah.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Eh=function(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var r=0;r<e.length;r++){var n=e.get(r),o=n.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,t)})}};Eh.prototype.getScaledCoordinates=function(t,e){var i=.03125/Math.pow(2,e.canonical.z-this.tileID.canonical.z);return{x:Math.floor((8192*e.canonical.x+t.anchorX)*i),y:Math.floor((8192*e.canonical.y+t.anchorY)*i)}},Eh.prototype.findMatches=function(t,e,i){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),n=0;n<t.length;n++){var o=t.get(n);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),u=0,l=a;u<l.length;u+=1){var c=l[u];if(Math.abs(c.coord.x-s.x)<=r&&Math.abs(c.coord.y-s.y)<=r&&!i[c.crossTileID]){i[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var kh=function(){this.maxCrossTileID=0};kh.prototype.generate=function(){return++this.maxCrossTileID};var Ch=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ch.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var i in this.indexes){var r=this.indexes[i],n={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),n[a.tileID.key]=a}this.indexes[i]=n}this.lng=t},Ch.prototype.addBucket=function(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var n=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var u=a[s];u.tileID.isChildOf(t)&&u.findMatches(e.symbolInstances,t,n)}else{var l=a[t.scaledTo(Number(o)).key];l&&l.findMatches(e.symbolInstances,t,n)}}for(var c=0;c<e.symbolInstances.length;c++){var p=e.symbolInstances.get(c);p.crossTileID||(p.crossTileID=i.generate(),n[p.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Eh(t,e.symbolInstances,e.bucketInstanceId),!0},Ch.prototype.removeBucketCrossTileIDs=function(t,e){for(var i in e.indexedSymbolInstances)for(var r=0,n=e.indexedSymbolInstances[i];r<n.length;r+=1)delete this.usedCrossTileIDs[t][n[r].crossTileID]},Ch.prototype.removeStaleBuckets=function(t){var e=!1;for(var i in this.indexes){var r=this.indexes[i];for(var n in r)t[r[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,r[n]),delete r[n],e=!0)}return e};var Ph=function(){this.layerIndexes={},this.crossTileIDs=new kh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ph.prototype.addLayer=function(t,e,i){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new Ch);var n=!1,o={};r.handleWrapJump(i);for(var a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.getBucket(t);l&&t.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,l,this.crossTileIDs)&&(n=!0),o[l.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(n=!0),n},Ph.prototype.pruneUnusedLayers=function(t){var e={};for(var i in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[i]||delete this.layerIndexes[i]};var Dh=function(t,e){return Gr(t,e&&e.filter((function(t){return"source.canvas"!==t.identifier})))},Mh=y(Bp,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Lh=y(Bp,["setCenter","setZoom","setBearing","setPitch"]),Bh=function(){var t={},e=qt.$version;for(var i in qt.$root){var r,n=qt.$root[i];if(n.required)null!=(r="version"===i?e:"array"===n.type?[]:{})&&(t[i]=r)}return t}(),Rh=function(t){function e(i,r){var n=this;void 0===r&&(r={}),t.call(this),this.map=i,this.dispatcher=new Wl(Pp(),this),this.imageManager=new Ml,this.imageManager.setEventedParent(this),this.glyphManager=new Ul(i._requestManager,r.localIdeographFontFamily),this.lineAtlas=new Zl(256,512),this.crossTileSymbolIndex=new Ph,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new nn,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",Ct());var o=this;this._rtlTextPluginCallback=e.registerForPluginStateChange((function(t){o.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(function(t,e){if(wn(t),e&&e.every((function(t){return t})))for(var i in o.sourceCaches)o.sourceCaches[i].reload()}))})),this.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=n.sourceCaches[t.sourceId];if(e){var i=e.getSource();if(i&&i.vectorLayerIds)for(var r in n._layers){var o=n._layers[r];o.source===i.id&&n._validateLayer(o)}}}}))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.loadURL=function(t,e){var i=this;void 0===e&&(e={}),this.fire(new Ut("dataloading",{dataType:"style"}));var r="boolean"==typeof e.validate?e.validate:!ot(t);t=this.map._requestManager.normalizeStyleURL(t,e.accessToken);var n=this.map._requestManager.transformRequest(t,Et.Style);this._request=Lt(n,(function(t,e){i._request=null,t?i.fire(new jt(t)):e&&i._load(e,r)}))},e.prototype.loadJSON=function(t,e){var i=this;void 0===e&&(e={}),this.fire(new Ut("dataloading",{dataType:"style"})),this._request=U.frame((function(){i._request=null,i._load(t,!1!==e.validate)}))},e.prototype.loadEmpty=function(){this.fire(new Ut("dataloading",{dataType:"style"})),this._load(Bh,!1)},e.prototype._load=function(t,e){if(!e||!Dh(this,jr(t))){for(var i in this._loaded=!0,this.stylesheet=t,t.sources)this.addSource(i,t.sources[i],{validate:!1});t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var r=Lp(this.stylesheet.layers);this._order=r.map((function(t){return t.id})),this._layers={},this._serializedLayers={};for(var n=0,o=r;n<o.length;n+=1){var a=o[n];(a=Tl(a)).setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=a,this._serializedLayers[a.id]=a.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ql(this.stylesheet.light),this.fire(new Ut("data",{dataType:"style"})),this.fire(new Ut("style.load"))}},e.prototype._loadSprite=function(t){var e=this;this._spriteRequest=function(t,e,i){var r,n,o,a=U.devicePixelRatio>1?"@2x":"",s=Lt(e.transformRequest(e.normalizeSpriteURL(t,a,".json"),Et.SpriteJSON),(function(t,e){s=null,o||(o=t,r=e,l())})),u=Ft(e.transformRequest(e.normalizeSpriteURL(t,a,".png"),Et.SpriteImage),(function(t,e){u=null,o||(o=t,n=e,l())}));function l(){if(o)i(o);else if(r&&n){var t=U.getImageData(n),e={};for(var a in r){var s=r[a],u=s.width,l=s.height,c=s.x,p=s.y,h=s.sdf,f=s.pixelRatio,d=s.stretchX,m=s.stretchY,y=s.content,_=new Ha({width:u,height:l});Ha.copy(t,_,{x:c,y:p},{x:0,y:0},{width:u,height:l}),e[a]={data:_,pixelRatio:f,sdf:h,stretchX:d,stretchY:m,content:y}}i(null,e)}}return{cancel:function(){s&&(s.cancel(),s=null),u&&(u.cancel(),u=null)}}}(t,this.map._requestManager,(function(t,i){if(e._spriteRequest=null,t)e.fire(new jt(t));else if(i)for(var r in i)e.imageManager.addImage(r,i[r]);e.imageManager.setLoaded(!0),e._availableImages=e.imageManager.listImages(),e.dispatcher.broadcast("setImages",e._availableImages),e.fire(new Ut("data",{dataType:"style"}))}))},e.prototype._validateLayer=function(t){var e=this.sourceCaches[t.source];if(e){var i=t.sourceLayer;if(i){var r=e.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(i))&&this.fire(new jt(new Error('Source layer "'+i+'" does not exist on source "'+r.id+'" as specified by style layer "'+t.id+'"')))}}},e.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},e.prototype._serializeLayers=function(t){for(var e=[],i=0,r=t;i<r.length;i+=1){var n=this._layers[r[i]];"custom"!==n.type&&e.push(n.serialize())}return e},e.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},e.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},e.prototype.update=function(t){if(this._loaded){var e=this._changed;if(this._changed){var i=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var n in(i.length||r.length)&&this._updateWorkerLayers(i,r),this._updatedSources){var o=this._updatedSources[n];"reload"===o?this._reloadSource(n):"clear"===o&&this._clearSource(n)}for(var a in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[a].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}for(var s in this.sourceCaches)this.sourceCaches[s].used=!1;for(var u=0,l=this._order;u<l.length;u+=1){var c=this._layers[l[u]];c.recalculate(t,this._availableImages),!c.isHidden(t.zoom)&&c.source&&(this.sourceCaches[c.source].used=!0)}this.light.recalculate(t),this.z=t.zoom,e&&this.fire(new Ut("data",{dataType:"style"}))}},e.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},e.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},e.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},e.prototype.setState=function(t){var e=this;if(this._checkLoaded(),Dh(this,jr(t)))return!1;(t=T(t)).layers=Lp(t.layers);var i=function(t,e){if(!t)return[{command:Bp.setStyle,args:[e]}];var i=[];try{if(!s(t.version,e.version))return[{command:Bp.setStyle,args:[e]}];s(t.center,e.center)||i.push({command:Bp.setCenter,args:[e.center]}),s(t.zoom,e.zoom)||i.push({command:Bp.setZoom,args:[e.zoom]}),s(t.bearing,e.bearing)||i.push({command:Bp.setBearing,args:[e.bearing]}),s(t.pitch,e.pitch)||i.push({command:Bp.setPitch,args:[e.pitch]}),s(t.sprite,e.sprite)||i.push({command:Bp.setSprite,args:[e.sprite]}),s(t.glyphs,e.glyphs)||i.push({command:Bp.setGlyphs,args:[e.glyphs]}),s(t.transition,e.transition)||i.push({command:Bp.setTransition,args:[e.transition]}),s(t.light,e.light)||i.push({command:Bp.setLight,args:[e.light]});var r={},n=[];!function(t,e,i,r){var n;for(n in e=e||{},t=t||{})t.hasOwnProperty(n)&&(e.hasOwnProperty(n)||Fp(n,i,r));for(n in e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)?s(t[n],e[n])||("geojson"===t[n].type&&"geojson"===e[n].type&&Vp(t,e,n)?i.push({command:Bp.setGeoJSONSourceData,args:[n,e[n].data]}):Op(n,e,i,r)):Rp(n,e,i))}(t.sources,e.sources,n,r);var o=[];t.layers&&t.layers.forEach((function(t){r[t.source]?i.push({command:Bp.removeLayer,args:[t.id]}):o.push(t)})),i=i.concat(n),function(t,e,i){e=e||[];var r,n,o,a,u,l,c,p=(t=t||[]).map(jp),h=e.map(jp),f=t.reduce(Np,{}),d=e.reduce(Np,{}),m=p.slice(),y=Object.create(null);for(r=0,n=0;r<p.length;r++)d.hasOwnProperty(o=p[r])?n++:(i.push({command:Bp.removeLayer,args:[o]}),m.splice(m.indexOf(o,n),1));for(r=0,n=0;r<h.length;r++)m[m.length-1-r]!==(o=h[h.length-1-r])&&(f.hasOwnProperty(o)?(i.push({command:Bp.removeLayer,args:[o]}),m.splice(m.lastIndexOf(o,m.length-n),1)):n++,i.push({command:Bp.addLayer,args:[d[o],l=m[m.length-r]]}),m.splice(m.length-r,0,o),y[o]=!0);for(r=0;r<h.length;r++)if(a=f[o=h[r]],u=d[o],!y[o]&&!s(a,u))if(s(a.source,u.source)&&s(a["source-layer"],u["source-layer"])&&s(a.type,u.type)){for(c in Up(a.layout,u.layout,i,o,null,Bp.setLayoutProperty),Up(a.paint,u.paint,i,o,null,Bp.setPaintProperty),s(a.filter,u.filter)||i.push({command:Bp.setFilter,args:[o,u.filter]}),s(a.minzoom,u.minzoom)&&s(a.maxzoom,u.maxzoom)||i.push({command:Bp.setLayerZoomRange,args:[o,u.minzoom,u.maxzoom]}),a)a.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Up(a[c],u[c],i,o,c.slice(6),Bp.setPaintProperty):s(a[c],u[c])||i.push({command:Bp.setLayerProperty,args:[o,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Up(a[c],u[c],i,o,c.slice(6),Bp.setPaintProperty):s(a[c],u[c])||i.push({command:Bp.setLayerProperty,args:[o,c,u[c]]}))}else i.push({command:Bp.removeLayer,args:[o]}),l=m[m.lastIndexOf(o)+1],i.push({command:Bp.addLayer,args:[u,l]})}(o,e.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:Bp.setStyle,args:[e]}]}return i}(this.serialize(),t).filter((function(t){return!(t.command in Lh)}));if(0===i.length)return!1;var r=i.filter((function(t){return!(t.command in Mh)}));if(r.length>0)throw new Error("Unimplemented: "+r.map((function(t){return t.command})).join(", ")+".");return i.forEach((function(t){"setTransition"!==t.command&&e[t.command].apply(e,t.args)})),this.stylesheet=t,!0},e.prototype.addImage=function(t,e){if(this.getImage(t))return this.fire(new jt(new Error("An image with this name already exists.")));this.imageManager.addImage(t,e),this._afterImageUpdated(t)},e.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},e.prototype.getImage=function(t){return this.imageManager.getImage(t)},e.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire(new jt(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this._afterImageUpdated(t)},e.prototype._afterImageUpdated=function(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new Ut("data",{dataType:"style"}))},e.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},e.prototype.addSource=function(t,e,i){var r=this;if(void 0===i&&(i={}),this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!e.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(e).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(e.type)>=0&&this._validate(jr.source,"sources."+t,e,null,i))){this.map&&this.map._collectResourceTiming&&(e.collectResourceTiming=!0);var n=this.sourceCaches[t]=new Ip(t,e,this.dispatcher);n.style=this,n.setEventedParent(this,(function(){return{isSourceLoaded:r.loaded(),source:n.serialize(),sourceId:t}})),n.onAdd(this.map),this._changed=!0}},e.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var e in this._layers)if(this._layers[e].source===t)return this.fire(new jt(new Error('Source "'+t+'" cannot be removed while layer "'+e+'" is using it.')));var i=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],i.fire(new Ut("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),i.setEventedParent(null),i.clearTiles(),i.onRemove&&i.onRemove(this.map),this._changed=!0},e.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},e.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},e.prototype.addLayer=function(t,e,i){void 0===i&&(i={}),this._checkLoaded();var r=t.id;if(this.getLayer(r))this.fire(new jt(new Error('Layer with id "'+r+'" already exists on this map')));else{var n;if("custom"===t.type){if(Dh(this,function(t){var e=[],i=t.id;return void 0===i&&e.push({message:"layers."+i+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+i+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),e}(t)))return;n=Tl(t)}else{if("object"==typeof t.source&&(this.addSource(r,t.source),t=m(t=T(t),{source:r})),this._validate(jr.layer,"layers."+r,t,{arrayIndex:-1},i))return;n=Tl(t),this._validateLayer(n),n.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[n.id]=n.serialize()}var o=e?this._order.indexOf(e):this._order.length;if(e&&-1===o)this.fire(new jt(new Error('Layer with id "'+e+'" does not exist on this map.')));else{if(this._order.splice(o,0,r),this._layerOrderChanged=!0,this._layers[r]=n,this._removedLayers[r]&&n.source&&"custom"!==n.type){var a=this._removedLayers[r];delete this._removedLayers[r],a.type!==n.type?this._updatedSources[n.source]="clear":(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause())}this._updateLayer(n),n.onAdd&&n.onAdd(this.map)}}},e.prototype.moveLayer=function(t,e){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==e){var i=this._order.indexOf(t);this._order.splice(i,1);var r=e?this._order.indexOf(e):this._order.length;e&&-1===r?this.fire(new jt(new Error('Layer with id "'+e+'" does not exist on this map.'))):(this._order.splice(r,0,t),this._layerOrderChanged=!0)}}else this.fire(new jt(new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")))},e.prototype.removeLayer=function(t){this._checkLoaded();var e=this._layers[t];if(e){e.setEventedParent(null);var i=this._order.indexOf(t);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=e,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],e.onRemove&&e.onRemove(this.map)}else this.fire(new jt(new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")))},e.prototype.getLayer=function(t){return this._layers[t]},e.prototype.hasLayer=function(t){return t in this._layers},e.prototype.setLayerZoomRange=function(t,e,i){this._checkLoaded();var r=this.getLayer(t);r?r.minzoom===e&&r.maxzoom===i||(null!=e&&(r.minzoom=e),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire(new jt(new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")))},e.prototype.setFilter=function(t,e,i){void 0===i&&(i={}),this._checkLoaded();var r=this.getLayer(t);if(r){if(!s(r.filter,e))return null==e?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(jr.filter,"layers."+r.id+".filter",e,null,i)||(r.filter=T(e),this._updateLayer(r)))}else this.fire(new jt(new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")))},e.prototype.getFilter=function(t){return T(this.getLayer(t).filter)},e.prototype.setLayoutProperty=function(t,e,i,r){void 0===r&&(r={}),this._checkLoaded();var n=this.getLayer(t);n?s(n.getLayoutProperty(e),i)||(n.setLayoutProperty(e,i,r),this._updateLayer(n)):this.fire(new jt(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},e.prototype.getLayoutProperty=function(t,e){var i=this.getLayer(t);if(i)return i.getLayoutProperty(e);this.fire(new jt(new Error("The layer '"+t+"' does not exist in the map's style.")))},e.prototype.setPaintProperty=function(t,e,i,r){void 0===r&&(r={}),this._checkLoaded();var n=this.getLayer(t);n?s(n.getPaintProperty(e),i)||(n.setPaintProperty(e,i,r)&&this._updateLayer(n),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new jt(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},e.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},e.prototype.setFeatureState=function(t,e){this._checkLoaded();var i=t.source,r=t.sourceLayer,n=this.sourceCaches[i];if(void 0!==n){var o=n.getSource().type;"geojson"===o&&r?this.fire(new jt(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==o||r?(void 0===t.id&&this.fire(new jt(new Error("The feature id parameter must be provided."))),n.setFeatureState(r,t.id,e)):this.fire(new jt(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new jt(new Error("The source '"+i+"' does not exist in the map's style.")))},e.prototype.removeFeatureState=function(t,e){this._checkLoaded();var i=t.source,r=this.sourceCaches[i];if(void 0!==r){var n=r.getSource().type,o="vector"===n?t.sourceLayer:void 0;"vector"!==n||o?e&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new jt(new Error("A feature id is required to remove its specific state property."))):r.removeFeatureState(o,t.id,e):this.fire(new jt(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new jt(new Error("The source '"+i+"' does not exist in the map's style.")))},e.prototype.getFeatureState=function(t){this._checkLoaded();var e=t.source,i=t.sourceLayer,r=this.sourceCaches[e];if(void 0!==r){if("vector"!==r.getSource().type||i)return void 0===t.id&&this.fire(new jt(new Error("The feature id parameter must be provided."))),r.getFeatureState(i,t.id);this.fire(new jt(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new jt(new Error("The source '"+e+"' does not exist in the map's style.")))},e.prototype.getTransition=function(){return m({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},e.prototype.serialize=function(){return S({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:I(this.sourceCaches,(function(t){return t.serialize()})),layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))},e.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},e.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,i=function(t){return"fill-extrusion"===e._layers[t].type},r={},n=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(i(a)){r[a]=o;for(var s=0,u=t;s<u.length;s+=1){var l=u[s][a];if(l)for(var c=0,p=l;c<p.length;c+=1)n.push(p[c])}}}n.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var h=[],f=this._order.length-1;f>=0;f--){var d=this._order[f];if(i(d))for(var m=n.length-1;m>=0;m--){var y=n[m].feature;if(r[y.layer.id]<f)break;h.push(y),n.pop()}else for(var _=0,g=t;_<g.length;_+=1){var v=g[_][d];if(v)for(var x=0,b=v;x<b.length;x+=1)h.push(b[x].feature)}}return h},e.prototype.queryRenderedFeatures=function(t,e,i){e&&e.filter&&this._validate(jr.filter,"queryRenderedFeatures.filter",e.filter,null,e);var r={};if(e&&e.layers){if(!Array.isArray(e.layers))return this.fire(new jt(new Error("parameters.layers must be an Array."))),[];for(var n=0,o=e.layers;n<o.length;n+=1){var a=o[n],s=this._layers[a];if(!s)return this.fire(new jt(new Error("The layer '"+a+"' does not exist in the map's style and cannot be queried for features."))),[];r[s.source]=!0}}var u=[];for(var l in e.availableImages=this._availableImages,this.sourceCaches)e.layers&&!r[l]||u.push(bc(this.sourceCaches[l],this._layers,this._serializedLayers,t,e,i));return this.placement&&u.push(function(t,e,i,r,n,o,a){for(var s={},u=o.queryRenderedSymbols(r),l=[],c=0,p=Object.keys(u).map(Number);c<p.length;c+=1)l.push(a[p[c]]);l.sort(wc);for(var h=function(){var i=d[f],r=i.featureIndex.lookupSymbolFeatures(u[i.bucketInstanceId],e,i.bucketIndex,i.sourceLayerIndex,n.filter,n.layers,n.availableImages,t);for(var o in r){var a=s[o]=s[o]||[],l=r[o];l.sort((function(t,e){var r=i.featureSortOrder;if(r){var n=r.indexOf(t.featureIndex);return r.indexOf(e.featureIndex)-n}return e.featureIndex-t.featureIndex}));for(var c=0,p=l;c<p.length;c+=1)a.push(p[c])}},f=0,d=l;f<d.length;f+=1)h();var m=function(e){s[e].forEach((function(r){var n=r.feature,o=i[t[e].source].getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=o}))};for(var y in s)m(y);return s}(this._layers,this._serializedLayers,this.sourceCaches,t,e,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(u)},e.prototype.querySourceFeatures=function(t,e){e&&e.filter&&this._validate(jr.filter,"querySourceFeatures.filter",e.filter,null,e);var i=this.sourceCaches[t];return i?function(t,e){for(var i=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),r=[],n={},o=0;o<i.length;o++){var a=i[o],s=a.tileID.canonical.key;n[s]||(n[s]=!0,a.querySourceFeatures(r,e))}return r}(i,e):[]},e.prototype.addSourceType=function(t,i,r){return e.getSourceType(t)?r(new Error('A source type called "'+t+'" already exists.')):(e.setSourceType(t,i),i.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:i.workerSourceURL},r):r(null,null))},e.prototype.getLight=function(){return this.light.getLight()},e.prototype.setLight=function(t,e){void 0===e&&(e={}),this._checkLoaded();var i=this.light.getLight(),r=!1;for(var n in t)if(!s(t[n],i[n])){r=!0;break}if(r){var o={now:U.now(),transition:m({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,e),this.light.updateTransitions(o)}},e.prototype._validate=function(t,e,i,r,n){return void 0===n&&(n={}),(!n||!1!==n.validate)&&Dh(this,t.call(jr,m({key:e,style:this.serialize(),value:i,styleSpec:qt},r)))},e.prototype._remove=function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),Sn.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var e in this.sourceCaches)this.sourceCaches[e].clearTiles(),this.sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},e.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},e.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},e.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},e.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},e.prototype._updatePlacement=function(t,e,i,r,n){void 0===n&&(n=!1);for(var o=!1,a=!1,s={},u=0,l=this._order;u<l.length;u+=1){var c=this._layers[l[u]];if("symbol"===c.type){if(!s[c.source]){var p=this.sourceCaches[c.source];s[c.source]=p.getRenderableIds(!0).map((function(t){return p.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var h=this.crossTileSymbolIndex.addLayer(c,s[c.source],t.center.lng);o=o||h}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((n=n||this._layerOrderChanged||0===i)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(U.now(),t.zoom))&&(this.pauseablePlacement=new Ah(t,this._order,n,e,i,r,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(U.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(var f=0,d=this._order;f<d.length;f+=1){var m=this._layers[d[f]];"symbol"===m.type&&this.placement.updateLayerOpacities(m,s[m.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(U.now())},e.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},e.prototype.getImages=function(t,e,i){this.imageManager.getImages(e.icons,i),this._updateTilesForChangedImages();var r=this.sourceCaches[e.source];r&&r.setDependencies(e.tileID.key,e.type,e.icons)},e.prototype.getGlyphs=function(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)},e.prototype.getResource=function(t,e,i){return Mt(e,i)},e}(Nt);Rh.getSourceType=function(t){return vc[t]},Rh.setSourceType=function(t,e){vc[t]=e},Rh.registerForPluginStateChange=function(t){return t({pluginStatus:xn,pluginURL:bn}),Sn.on("pluginStateChange",t),t};var Fh=Wn([{name:"a_pos",type:"Int16",components:2}]),Oh=pf("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Vh=pf("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Uh=pf("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),jh=pf("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Nh=pf("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),qh=pf("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Zh=pf("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Gh=pf("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Xh=pf("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Wh=pf("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Hh=pf("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Kh=pf("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Yh=pf("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Jh=pf("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Qh=pf("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),$h=pf("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),tf=pf("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),ef=pf("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),rf=pf("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),nf=pf("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),of=pf("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),af=pf("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),sf=pf("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),uf=pf("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),lf=pf("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),cf=pf("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function pf(t,e){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute ([\w]+) ([\w]+)/g),n=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(n):n,s={};return{fragmentSource:t=t.replace(i,(function(t,e,i,r,n){return s[n]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+n+"\nvarying "+i+" "+r+" "+n+";\n#else\nuniform "+i+" "+r+" u_"+n+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+n+"\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n"})),vertexSource:e=e.replace(i,(function(t,e,i,r,n){var o="float"===r?"vec2":"vec4",a=n.match(/color/)?"color":o;return s[n]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+n+"\nuniform lowp float u_"+n+"_t;\nattribute "+i+" "+o+" a_"+n+";\nvarying "+i+" "+r+" "+n+";\n#else\nuniform "+i+" "+r+" u_"+n+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+n+" = a_"+n+";\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+n+" = unpack_mix_"+a+"(a_"+n+", u_"+n+"_t);\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+n+"\nuniform lowp float u_"+n+"_t;\nattribute "+i+" "+o+" a_"+n+";\n#else\nuniform "+i+" "+r+" u_"+n+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+i+" "+r+" "+n+" = a_"+n+";\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+i+" "+r+" "+n+" = unpack_mix_"+a+"(a_"+n+", u_"+n+"_t);\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n"})),staticAttributes:r,staticUniforms:a}}var hf=Object.freeze({__proto__:null,prelude:Oh,background:Vh,backgroundPattern:Uh,circle:jh,clippingMask:Nh,heatmap:qh,heatmapTexture:Zh,collisionBox:Gh,collisionCircle:Xh,debug:Wh,fill:Hh,fillOutline:Kh,fillOutlinePattern:Yh,fillPattern:Jh,fillExtrusion:Qh,fillExtrusionPattern:$h,hillshadePrepare:tf,hillshade:ef,line:rf,lineGradient:nf,linePattern:of,lineSDF:af,raster:sf,symbolIcon:uf,symbolSDF:lf,symbolTextAndIcon:cf}),ff=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function df(t){for(var e=[],i=0;i<t.length;i++)if(null!==t[i]){var r=t[i].split(" ");e.push(r.pop())}return e}ff.prototype.bind=function(t,e,i,r,n,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==r.length,l=0;!u&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(u=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===i&&!u&&this.boundIndexBuffer===n&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),n&&n.dynamicDraw&&n.bind(),s&&s.bind()):this.freshBind(e,i,r,n,o,a,s)},ff.prototype.freshBind=function(t,e,i,r,n,o,a){var s,u=t.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=r,this.boundVertexOffset=n,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var p=u;p<s;p++)c.disableVertexAttribArray(p)}e.enableAttributes(c,t);for(var h=0,f=i;h<f.length;h+=1)f[h].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,n);for(var d=0,m=i;d<m.length;d+=1){var y=m[d];y.bind(),y.setVertexAttribPointers(c,t,n)}o&&(o.bind(),o.setVertexAttribPointers(c,t,n)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,n)),l.currentNumAttributes=u},ff.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var mf=function(t,e,i,r,n,o){var a=t.gl;this.program=a.createProgram();for(var s=df(i.staticAttributes),u=r?r.getBinderAttributes():[],l=s.concat(u),c=i.staticUniforms?df(i.staticUniforms):[],p=r?r.getBinderUniforms():[],h=[],f=0,d=c.concat(p);f<d.length;f+=1){var m=d[f];h.indexOf(m)<0&&h.push(m)}var y=r?r.defines():[];o&&y.push("#define OVERDRAW_INSPECTOR;");var _=y.concat(Oh.fragmentSource,i.fragmentSource).join("\n"),g=y.concat(Oh.vertexSource,i.vertexSource).join("\n"),v=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(v,_),a.compileShader(v),a.attachShader(this.program,v);var x=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(x,g),a.compileShader(x),a.attachShader(this.program,x),this.attributes={};var b={};this.numAttributes=l.length;for(var w=0;w<this.numAttributes;w++)l[w]&&(a.bindAttribLocation(this.program,w,l[w]),this.attributes[l[w]]=w);a.linkProgram(this.program),a.deleteShader(x),a.deleteShader(v);for(var I=0;I<h.length;I++){var S=h[I];if(S&&!b[S]){var T=a.getUniformLocation(this.program,S);T&&(b[S]=T)}}this.fixedUniforms=n(t,b),this.binderUniforms=r?r.getUniforms(t,b):[]}}};function yf(t,e,i){var r=1/ah(i,1,e.transform.tileZoom),n=Math.pow(2,i.tileID.overscaledZ),o=i.tileSize*Math.pow(2,e.transform.tileZoom)/n,a=o*(i.tileID.canonical.x+i.tileID.wrap*n),s=o*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}mf.prototype.draw=function(t,e,i,r,n,o,a,s,u,l,c,p,h,f,d,m){var y,_=t.gl;if(!this.failedToCreate){for(var g in t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(r),t.setColorMode(n),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[g].set(a[g]);f&&f.setUniforms(t,this.binderUniforms,p,{zoom:h});for(var v=(y={},y[_.LINES]=2,y[_.TRIANGLES]=3,y[_.LINE_STRIP]=1,y)[e],x=0,b=c.get();x<b.length;x+=1){var w=b[x],I=w.vaos||(w.vaos={});(I[s]||(I[s]=new ff)).bind(t,this,u,f?f.getPaintVertexBuffers():[],l,w.vertexOffset,d,m),_.drawElements(e,w.primitiveLength*v,_.UNSIGNED_SHORT,w.primitiveOffset*v*2)}}};var _f=function(t,e,i,r){var n=e.style.light,o=n.properties.get("position"),a=[o.x,o.y,o.z],s=function(){var t=new za(9);return za!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}();"viewport"===n.properties.get("anchor")&&function(t,e){var i=Math.sin(e),r=Math.cos(e);t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1}(s,-e.transform.angle),function(t,e,i){var r=e[0],n=e[1],o=e[2];t[0]=r*i[0]+n*i[3]+o*i[6],t[1]=r*i[1]+n*i[4]+o*i[7],t[2]=r*i[2]+n*i[5]+o*i[8]}(a,a,s);var u=n.properties.get("color");return{u_matrix:t,u_lightpos:a,u_lightintensity:n.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+i,u_opacity:r}},gf=function(t,e,i,r,n,o,a){return m(_f(t,e,i,r),yf(o,e,a),{u_height_factor:-Math.pow(2,n.overscaledZ)/a.tileSize/8})},vf=function(t){return{u_matrix:t}},xf=function(t,e,i,r){return m(vf(t),yf(i,e,r))},bf=function(t,e){return{u_matrix:t,u_world:e}},wf=function(t,e,i,r,n){return m(xf(t,e,i,r),{u_world:n})},If=function(t,e,i,r){var n,o,a=t.transform;if("map"===r.paint.get("circle-pitch-alignment")){var s=ah(i,1,a.zoom);n=!0,o=[s,s]}else n=!1,o=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,i,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+n,u_device_pixel_ratio:U.devicePixelRatio,u_extrude_scale:o}},Sf=function(t,e,i){var r=ah(i,1,e.zoom),n=Math.pow(2,e.zoom-i.tileID.overscaledZ),o=i.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*n),e.pixelsToGLUnits[1]/(r*n)],u_overscale_factor:o}},Tf=function(t,e,i){return{u_matrix:t,u_inv_matrix:e,u_camera_to_center_distance:i.cameraToCenterDistance,u_viewport_size:[i.width,i.height]}},zf=function(t,e,i){return void 0===i&&(i=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:i}},Af=function(t){return{u_matrix:t}},Ef=function(t,e,i,r){return{u_matrix:t,u_extrude_scale:ah(e,1,i),u_intensity:r}},kf=function(t,e,i){var r=t.transform;return{u_matrix:Lf(t,e,i),u_ratio:1/ah(e,1,r.zoom),u_device_pixel_ratio:U.devicePixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},Cf=function(t,e,i,r){return m(kf(t,e,i),{u_image:0,u_image_height:r})},Pf=function(t,e,i,r){var n=t.transform,o=Mf(e,n);return{u_matrix:Lf(t,e,i),u_texsize:e.imageAtlasTexture.size,u_ratio:1/ah(e,1,n.zoom),u_device_pixel_ratio:U.devicePixelRatio,u_image:0,u_scale:[o,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}},Df=function(t,e,i,r,n){var o=t.lineAtlas,a=Mf(e,t.transform),s="round"===i.layout.get("line-cap"),u=o.getDash(r.from,s),l=o.getDash(r.to,s),c=u.width*n.fromScale,p=l.width*n.toScale;return m(kf(t,e,i),{u_patternscale_a:[a/c,-u.height/2],u_patternscale_b:[a/p,-l.height/2],u_sdfgamma:o.width/(256*Math.min(c,p)*U.devicePixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:l.y,u_mix:n.t})};function Mf(t,e){return 1/ah(t,1,e.tileZoom)}function Lf(t,e,i){return t.translatePosMatrix(e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}var Bf=function(t,e,i,r,n){return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*n.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:n.paint.get("raster-brightness-min"),u_brightness_high:n.paint.get("raster-brightness-max"),u_saturation_factor:(a=n.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=n.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Rf(n.paint.get("raster-hue-rotate"))};var o,a};function Rf(t){t*=Math.PI/180;var e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}var Ff,Of=function(t,e,i,r,n,o,a,s,u,l){var c=n.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:c.width/c.height,u_fade_change:n.options.fadeDuration?n.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+r,u_texsize:l,u_texture:0}},Vf=function(t,e,i,r,n,o,a,s,u,l,c){var p=n.transform;return m(Of(t,e,i,r,n,o,a,s,u,l),{u_gamma_scale:r?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_device_pixel_ratio:U.devicePixelRatio,u_is_halo:+c})},Uf=function(t,e,i,r,n,o,a,s,u,l){return m(Vf(t,e,i,r,n,o,a,s,!0,u,!0),{u_texsize_icon:l,u_texture_icon:1})},jf=function(t,e,i){return{u_matrix:t,u_opacity:e,u_color:i}},Nf=function(t,e,i,r,n,o){return m(function(t,e,i,r){var n=i.imageManager.getPattern(t.from.toString()),o=i.imageManager.getPattern(t.to.toString()),a=i.imageManager.getPixelSize(),s=a.width,u=a.height,l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,i.transform.tileZoom)/l,p=c*(r.tileID.canonical.x+r.tileID.wrap*l),h=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:n.tl,u_pattern_br_a:n.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,u],u_mix:e.t,u_pattern_size_a:n.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/ah(r,1,i.transform.tileZoom),u_pixel_coord_upper:[p>>16,h>>16],u_pixel_coord_lower:[65535&p,65535&h]}}(r,o,i,n),{u_matrix:t,u_opacity:e})},qf={fillExtrusion:function(t,e){return{u_matrix:new Ho(t,e.u_matrix),u_lightpos:new Zo(t,e.u_lightpos),u_lightintensity:new No(t,e.u_lightintensity),u_lightcolor:new Zo(t,e.u_lightcolor),u_vertical_gradient:new No(t,e.u_vertical_gradient),u_opacity:new No(t,e.u_opacity)}},fillExtrusionPattern:function(t,e){return{u_matrix:new Ho(t,e.u_matrix),u_lightpos:new Zo(t,e.u_lightpos),u_lightintensity:new No(t,e.u_lightintensity),u_lightcolor:new Zo(t,e.u_lightcolor),u_vertical_gradient:new No(t,e.u_vertical_gradient),u_height_factor:new No(t,e.u_height_factor),u_image:new jo(t,e.u_image),u_texsize:new qo(t,e.u_texsize),u_pixel_coord_upper:new qo(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new qo(t,e.u_pixel_coord_lower),u_scale:new Zo(t,e.u_scale),u_fade:new No(t,e.u_fade),u_opacity:new No(t,e.u_opacity)}},fill:function(t,e){return{u_matrix:new Ho(t,e.u_matrix)}},fillPattern:function(t,e){return{u_matrix:new Ho(t,e.u_matrix),u_image:new jo(t,e.u_image),u_texsize:new qo(t,e.u_texsize),u_pixel_coord_upper:new qo(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new qo(t,e.u_pixel_coord_lower),u_scale:new Zo(t,e.u_scale),u_fade:new No(t,e.u_fade)}},fillOutline:function(t,e){return{u_matrix:new Ho(t,e.u_matrix),u_world:new qo(t,e.u_world)}},fillOutlinePattern:function(t,e){return{u_matrix:new Ho(t,e.u_matrix),u_world:new qo(t,e.u_world),u_image:new jo(t,e.u_image),u_texsize:new qo(t,e.u_texsize),u_pixel_coord_upper:new qo(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new qo(t,e.u_pixel_coord_lower),u_scale:new Zo(t,e.u_scale),u_fade:new No(t,e.u_fade)}},circle:function(t,e){return{u_camera_to_center_distance:new No(t,e.u_camera_to_center_distance),u_scale_with_map:new jo(t,e.u_scale_with_map),u_pitch_with_map:new jo(t,e.u_pitch_with_map),u_extrude_scale:new qo(t,e.u_extrude_scale),u_device_pixel_ratio:new No(t,e.u_device_pixel_ratio),u_matrix:new Ho(t,e.u_matrix)}},collisionBox:function(t,e){return{u_matrix:new Ho(t,e.u_matrix),u_camera_to_center_distance:new No(t,e.u_camera_to_center_distance),u_pixels_to_tile_units:new No(t,e.u_pixels_to_tile_units),u_extrude_scale:new qo(t,e.u_extrude_scale),u_overscale_factor:new No(t,e.u_overscale_factor)}},collisionCircle:function(t,e){return{u_matrix:new Ho(t,e.u_matrix),u_inv_matrix:new Ho(t,e.u_inv_matrix),u_camera_to_center_distance:new No(t,e.u_camera_to_center_distance),u_viewport_size:new qo(t,e.u_viewport_size)}},debug:function(t,e){return{u_color:new Xo(t,e.u_color),u_matrix:new Ho(t,e.u_matrix),u_overlay:new jo(t,e.u_overlay),u_overlay_scale:new No(t,e.u_overlay_scale)}},clippingMask:function(t,e){return{u_matrix:new Ho(t,e.u_matrix)}},heatmap:function(t,e){return{u_extrude_scale:new No(t,e.u_extrude_scale),u_intensity:new No(t,e.u_intensity),u_matrix:new Ho(t,e.u_matrix)}},heatmapTexture:function(t,e){return{u_matrix:new Ho(t,e.u_matrix),u_world:new qo(t,e.u_world),u_image:new jo(t,e.u_image),u_color_ramp:new jo(t,e.u_color_ramp),u_opacity:new No(t,e.u_opacity)}},hillshade:function(t,e){return{u_matrix:new Ho(t,e.u_matrix),u_image:new jo(t,e.u_image),u_latrange:new qo(t,e.u_latrange),u_light:new qo(t,e.u_light),u_shadow:new Xo(t,e.u_shadow),u_highlight:new Xo(t,e.u_highlight),u_accent:new Xo(t,e.u_accent)}},hillshadePrepare:function(t,e){return{u_matrix:new Ho(t,e.u_matrix),u_image:new jo(t,e.u_image),u_dimension:new qo(t,e.u_dimension),u_zoom:new No(t,e.u_zoom),u_unpack:new Go(t,e.u_unpack)}},line:function(t,e){return{u_matrix:new Ho(t,e.u_matrix),u_ratio:new No(t,e.u_ratio),u_device_pixel_ratio:new No(t,e.u_device_pixel_ratio),u_units_to_pixels:new qo(t,e.u_units_to_pixels)}},lineGradient:function(t,e){return{u_matrix:new Ho(t,e.u_matrix),u_ratio:new No(t,e.u_ratio),u_device_pixel_ratio:new No(t,e.u_device_pixel_ratio),u_units_to_pixels:new qo(t,e.u_units_to_pixels),u_image:new jo(t,e.u_image),u_image_height:new No(t,e.u_image_height)}},linePattern:function(t,e){return{u_matrix:new Ho(t,e.u_matrix),u_texsize:new qo(t,e.u_texsize),u_ratio:new No(t,e.u_ratio),u_device_pixel_ratio:new No(t,e.u_device_pixel_ratio),u_image:new jo(t,e.u_image),u_units_to_pixels:new qo(t,e.u_units_to_pixels),u_scale:new Zo(t,e.u_scale),u_fade:new No(t,e.u_fade)}},lineSDF:function(t,e){return{u_matrix:new Ho(t,e.u_matrix),u_ratio:new No(t,e.u_ratio),u_device_pixel_ratio:new No(t,e.u_device_pixel_ratio),u_units_to_pixels:new qo(t,e.u_units_to_pixels),u_patternscale_a:new qo(t,e.u_patternscale_a),u_patternscale_b:new qo(t,e.u_patternscale_b),u_sdfgamma:new No(t,e.u_sdfgamma),u_image:new jo(t,e.u_image),u_tex_y_a:new No(t,e.u_tex_y_a),u_tex_y_b:new No(t,e.u_tex_y_b),u_mix:new No(t,e.u_mix)}},raster:function(t,e){return{u_matrix:new Ho(t,e.u_matrix),u_tl_parent:new qo(t,e.u_tl_parent),u_scale_parent:new No(t,e.u_scale_parent),u_buffer_scale:new No(t,e.u_buffer_scale),u_fade_t:new No(t,e.u_fade_t),u_opacity:new No(t,e.u_opacity),u_image0:new jo(t,e.u_image0),u_image1:new jo(t,e.u_image1),u_brightness_low:new No(t,e.u_brightness_low),u_brightness_high:new No(t,e.u_brightness_high),u_saturation_factor:new No(t,e.u_saturation_factor),u_contrast_factor:new No(t,e.u_contrast_factor),u_spin_weights:new Zo(t,e.u_spin_weights)}},symbolIcon:function(t,e){return{u_is_size_zoom_constant:new jo(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new jo(t,e.u_is_size_feature_constant),u_size_t:new No(t,e.u_size_t),u_size:new No(t,e.u_size),u_camera_to_center_distance:new No(t,e.u_camera_to_center_distance),u_pitch:new No(t,e.u_pitch),u_rotate_symbol:new jo(t,e.u_rotate_symbol),u_aspect_ratio:new No(t,e.u_aspect_ratio),u_fade_change:new No(t,e.u_fade_change),u_matrix:new Ho(t,e.u_matrix),u_label_plane_matrix:new Ho(t,e.u_label_plane_matrix),u_coord_matrix:new Ho(t,e.u_coord_matrix),u_is_text:new jo(t,e.u_is_text),u_pitch_with_map:new jo(t,e.u_pitch_with_map),u_texsize:new qo(t,e.u_texsize),u_texture:new jo(t,e.u_texture)}},symbolSDF:function(t,e){return{u_is_size_zoom_constant:new jo(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new jo(t,e.u_is_size_feature_constant),u_size_t:new No(t,e.u_size_t),u_size:new No(t,e.u_size),u_camera_to_center_distance:new No(t,e.u_camera_to_center_distance),u_pitch:new No(t,e.u_pitch),u_rotate_symbol:new jo(t,e.u_rotate_symbol),u_aspect_ratio:new No(t,e.u_aspect_ratio),u_fade_change:new No(t,e.u_fade_change),u_matrix:new Ho(t,e.u_matrix),u_label_plane_matrix:new Ho(t,e.u_label_plane_matrix),u_coord_matrix:new Ho(t,e.u_coord_matrix),u_is_text:new jo(t,e.u_is_text),u_pitch_with_map:new jo(t,e.u_pitch_with_map),u_texsize:new qo(t,e.u_texsize),u_texture:new jo(t,e.u_texture),u_gamma_scale:new No(t,e.u_gamma_scale),u_device_pixel_ratio:new No(t,e.u_device_pixel_ratio),u_is_halo:new jo(t,e.u_is_halo)}},symbolTextAndIcon:function(t,e){return{u_is_size_zoom_constant:new jo(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new jo(t,e.u_is_size_feature_constant),u_size_t:new No(t,e.u_size_t),u_size:new No(t,e.u_size),u_camera_to_center_distance:new No(t,e.u_camera_to_center_distance),u_pitch:new No(t,e.u_pitch),u_rotate_symbol:new jo(t,e.u_rotate_symbol),u_aspect_ratio:new No(t,e.u_aspect_ratio),u_fade_change:new No(t,e.u_fade_change),u_matrix:new Ho(t,e.u_matrix),u_label_plane_matrix:new Ho(t,e.u_label_plane_matrix),u_coord_matrix:new Ho(t,e.u_coord_matrix),u_is_text:new jo(t,e.u_is_text),u_pitch_with_map:new jo(t,e.u_pitch_with_map),u_texsize:new qo(t,e.u_texsize),u_texsize_icon:new qo(t,e.u_texsize_icon),u_texture:new jo(t,e.u_texture),u_texture_icon:new jo(t,e.u_texture_icon),u_gamma_scale:new No(t,e.u_gamma_scale),u_device_pixel_ratio:new No(t,e.u_device_pixel_ratio),u_is_halo:new jo(t,e.u_is_halo)}},background:function(t,e){return{u_matrix:new Ho(t,e.u_matrix),u_opacity:new No(t,e.u_opacity),u_color:new Xo(t,e.u_color)}},backgroundPattern:function(t,e){return{u_matrix:new Ho(t,e.u_matrix),u_opacity:new No(t,e.u_opacity),u_image:new jo(t,e.u_image),u_pattern_tl_a:new qo(t,e.u_pattern_tl_a),u_pattern_br_a:new qo(t,e.u_pattern_br_a),u_pattern_tl_b:new qo(t,e.u_pattern_tl_b),u_pattern_br_b:new qo(t,e.u_pattern_br_b),u_texsize:new qo(t,e.u_texsize),u_mix:new No(t,e.u_mix),u_pattern_size_a:new qo(t,e.u_pattern_size_a),u_pattern_size_b:new qo(t,e.u_pattern_size_b),u_scale_a:new No(t,e.u_scale_a),u_scale_b:new No(t,e.u_scale_b),u_pixel_coord_upper:new qo(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new qo(t,e.u_pixel_coord_lower),u_tile_units_to_pixels:new No(t,e.u_tile_units_to_pixels)}}};function Zf(t,e,i,r,n,o,a){for(var s=t.context,u=s.gl,l=t.useProgram("collisionBox"),c=[],p=0,h=0,f=0;f<r.length;f++){var d=r[f],m=e.getTile(d),y=m.getBucket(i);if(y){var _=d.posMatrix;0===n[0]&&0===n[1]||(_=t.translatePosMatrix(d.posMatrix,m,n,o));var g=a?y.textCollisionBox:y.iconCollisionBox,v=y.collisionCircleArray;if(v.length>0){var x=Aa(),b=_;Ba(x,y.placementInvProjMatrix,t.transform.glCoordMatrix),Ba(x,x,y.placementViewportMatrix),c.push({circleArray:v,circleOffset:h,transform:b,invTransform:x}),h=p+=v.length/4}g&&l.draw(s,u.LINES,gp.disabled,vp.disabled,t.colorModeForRenderPass(),bp.disabled,Sf(_,t.transform,m),i.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,null,t.transform.zoom,null,null,g.collisionVertexBuffer)}}if(a&&c.length){var w=t.useProgram("collisionCircle"),I=new ao;I.resize(4*p),I._trim();for(var S=0,T=0,z=c;T<z.length;T+=1)for(var A=z[T],E=0;E<A.circleArray.length/4;E++){var k=4*E,C=A.circleArray[k+0],P=A.circleArray[k+1],D=A.circleArray[k+2],M=A.circleArray[k+3];I.emplace(S++,C,P,D,M,0),I.emplace(S++,C,P,D,M,1),I.emplace(S++,C,P,D,M,2),I.emplace(S++,C,P,D,M,3)}(!Ff||Ff.length<2*p)&&(Ff=function(t){var e=2*t,i=new uo;i.resize(e),i._trim();for(var r=0;r<e;r++){var n=6*r;i.uint16[n+0]=4*r+0,i.uint16[n+1]=4*r+1,i.uint16[n+2]=4*r+2,i.uint16[n+3]=4*r+2,i.uint16[n+4]=4*r+3,i.uint16[n+5]=4*r+0}return i}(p));for(var L=s.createIndexBuffer(Ff,!0),B=s.createVertexBuffer(I,xu.members,!0),R=0,F=c;R<F.length;R+=1){var O=F[R],V=Tf(O.transform,O.invTransform,t.transform);w.draw(s,u.TRIANGLES,gp.disabled,vp.disabled,t.colorModeForRenderPass(),bp.disabled,V,i.id,B,L,ko.simpleSegment(0,2*O.circleOffset,O.circleArray.length,O.circleArray.length/2),null,t.transform.zoom,null,null,null)}B.destroy(),L.destroy()}}var Gf=Ea(new Float32Array(16));function Xf(t,e,i,r,o,a){var s=tl(t),u=-(s.horizontalAlign-.5)*e,l=-(s.verticalAlign-.5)*i,c=al(t,r);return new n((u/o+c[0])*a,(l/o+c[1])*a)}function Wf(t,e,i,r,o,a,s,u,l,c,p){var h=t.text.placedSymbolArray,f=t.text.dynamicLayoutVertexArray,d=t.icon.dynamicLayoutVertexArray,m={};f.clear();for(var y=0;y<h.length;y++){var _=h.get(y),g=_.hidden||!_.crossTileID||t.allowVerticalPlacement&&!_.placedOrientation?null:r[_.crossTileID];if(g){var v=new n(_.anchorX,_.anchorY),x=Wp(v,i?u:s),b=Hp(a.cameraToCenterDistance,x.signedDistanceFromCamera),w=o.evaluateSizeForFeature(t.textSizeData,c,_)*b/24;i&&(w*=t.tilePixelRatio/l);for(var I=Xf(g.anchor,g.width,g.height,g.textOffset,g.textBoxScale,w),S=i?Wp(v.add(I),s).point:x.point.add(e?I.rotate(-a.angle):I),T=t.allowVerticalPlacement&&_.placedOrientation===Yu.vertical?Math.PI/2:0,z=0;z<_.numGlyphs;z++)cl(f,S,T);p&&_.associatedIconIndex>=0&&(m[_.associatedIconIndex]={shiftedAnchor:S,angle:T})}else rh(_.numGlyphs,f)}if(p){d.clear();for(var A=t.icon.placedSymbolArray,E=0;E<A.length;E++){var k=A.get(E);if(k.hidden)rh(k.numGlyphs,d);else{var C=m[E];if(C)for(var P=0;P<k.numGlyphs;P++)cl(d,C.shiftedAnchor,C.angle);else rh(k.numGlyphs,d)}}t.icon.dynamicLayoutVertexBuffer.updateData(d)}t.text.dynamicLayoutVertexBuffer.updateData(f)}function Hf(t,e,i){return i.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function Kf(t,e,i,r,n,o,a,s,u,l,c,p){for(var h=t.context,f=h.gl,d=t.transform,m="map"===s,y="map"===u,_=m&&"point"!==i.layout.get("symbol-placement"),g=m&&!y&&!_,v=void 0!==i.layout.get("symbol-sort-key").constantOr(1),x=t.depthModeForSublayer(0,gp.ReadOnly),b=i.layout.get("text-variable-anchor"),w=[],I=0,S=r;I<S.length;I+=1){var T=S[I],z=e.getTile(T),A=z.getBucket(i);if(A){var E=n?A.text:A.icon;if(E&&E.segments.get().length){var k=E.programConfigurations.get(i.id),C=n||A.sdfIcons,P=n?A.textSizeData:A.iconSizeData,D=y||0!==d.pitch,M=t.useProgram(Hf(C,n,A),k),L=rl(P,d.zoom),B=void 0,R=[0,0],F=void 0,O=void 0,V=null,U=void 0;if(n)F=z.glyphAtlasTexture,O=f.LINEAR,B=z.glyphAtlasTexture.size,A.iconsInText&&(R=z.imageAtlasTexture.size,V=z.imageAtlasTexture,U=D||t.options.rotating||t.options.zooming||"composite"===P.kind||"camera"===P.kind?f.LINEAR:f.NEAREST);else{var j=1!==i.layout.get("icon-size").constantOr(0)||A.iconsNeedLinear;F=z.imageAtlasTexture,O=C||t.options.rotating||t.options.zooming||j||D?f.LINEAR:f.NEAREST,B=z.imageAtlasTexture.size}var N=ah(z,1,t.transform.zoom),q=Gp(T.posMatrix,y,m,t.transform,N),Z=Xp(T.posMatrix,y,m,t.transform,N),G=b&&A.hasTextData(),X="none"!==i.layout.get("icon-text-fit")&&G&&A.hasIconData();_&&Yp(A,T.posMatrix,t,n,q,Z,y,l);var W=t.translatePosMatrix(T.posMatrix,z,o,a),H=_||n&&b||X?Gf:q,K=t.translatePosMatrix(Z,z,o,a,!0),Y=C&&0!==i.paint.get(n?"text-halo-width":"icon-halo-width").constantOr(1),J={program:M,buffers:E,uniformValues:C?A.iconsInText?Uf(P.kind,L,g,y,t,W,H,K,B,R):Vf(P.kind,L,g,y,t,W,H,K,n,B,!0):Of(P.kind,L,g,y,t,W,H,K,n,B),atlasTexture:F,atlasTextureIcon:V,atlasInterpolation:O,atlasInterpolationIcon:U,isSDF:C,hasHalo:Y};if(v)for(var Q=0,$=E.segments.get();Q<$.length;Q+=1){var tt=$[Q];w.push({segments:new ko([tt]),sortKey:tt.sortKey,state:J})}else w.push({segments:E.segments,sortKey:0,state:J})}}}v&&w.sort((function(t,e){return t.sortKey-e.sortKey}));for(var et=0,it=w;et<it.length;et+=1){var rt=it[et],nt=rt.state;if(h.activeTexture.set(f.TEXTURE0),nt.atlasTexture.bind(nt.atlasInterpolation,f.CLAMP_TO_EDGE),nt.atlasTextureIcon&&(h.activeTexture.set(f.TEXTURE1),nt.atlasTextureIcon&&nt.atlasTextureIcon.bind(nt.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),nt.isSDF){var ot=nt.uniformValues;nt.hasHalo&&(ot.u_is_halo=1,Yf(nt.buffers,rt.segments,i,t,nt.program,x,c,p,ot)),ot.u_is_halo=0}Yf(nt.buffers,rt.segments,i,t,nt.program,x,c,p,nt.uniformValues)}}function Yf(t,e,i,r,n,o,a,s,u){var l=r.context;n.draw(l,l.gl.TRIANGLES,o,a,s,bp.disabled,u,i.id,t.layoutVertexBuffer,t.indexBuffer,e,i.paint,r.transform.zoom,t.programConfigurations.get(i.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Jf(t,e,i,r,n,o,a){var s,u,l,c,p,h=t.context.gl,f=i.paint.get("fill-pattern"),d=f&&f.constantOr(1),m=i.getCrossfadeParameters();a?(u=d&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=h.LINES):(u=d?"fillPattern":"fill",s=h.TRIANGLES);for(var y=0,_=r;y<_.length;y+=1){var g=_[y],v=e.getTile(g);if(!d||v.patternsLoaded()){var x=v.getBucket(i);if(x){var b=x.programConfigurations.get(i.id),w=t.useProgram(u,b);d&&(t.context.activeTexture.set(h.TEXTURE0),v.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),b.updatePaintBuffers(m));var I=f.constantOr(null);if(I&&v.imageAtlas){var S=v.imageAtlas,T=S.patternPositions[I.to.toString()],z=S.patternPositions[I.from.toString()];T&&z&&b.setConstantPatternPositions(T,z)}var A=t.translatePosMatrix(g.posMatrix,v,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(a){c=x.indexBuffer2,p=x.segments2;var E=[h.drawingBufferWidth,h.drawingBufferHeight];l="fillOutlinePattern"===u&&d?wf(A,t,m,v,E):bf(A,E)}else c=x.indexBuffer,p=x.segments,l=d?xf(A,t,m,v):vf(A);w.draw(t.context,s,n,t.stencilModeForClipping(g),o,bp.disabled,l,i.id,x.layoutVertexBuffer,c,p,i.paint,t.transform.zoom,b)}}}}function Qf(t,e,i,r,n,o,a){for(var s=t.context,u=s.gl,l=i.paint.get("fill-extrusion-pattern"),c=l.constantOr(1),p=i.getCrossfadeParameters(),h=i.paint.get("fill-extrusion-opacity"),f=0,d=r;f<d.length;f+=1){var m=d[f],y=e.getTile(m),_=y.getBucket(i);if(_){var g=_.programConfigurations.get(i.id),v=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",g);c&&(t.context.activeTexture.set(u.TEXTURE0),y.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),g.updatePaintBuffers(p));var x=l.constantOr(null);if(x&&y.imageAtlas){var b=y.imageAtlas,w=b.patternPositions[x.to.toString()],I=b.patternPositions[x.from.toString()];w&&I&&g.setConstantPatternPositions(w,I)}var S=t.translatePosMatrix(m.posMatrix,y,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),T=i.paint.get("fill-extrusion-vertical-gradient"),z=c?gf(S,t,T,h,m,p,y):_f(S,t,T,h);v.draw(s,s.gl.TRIANGLES,n,o,a,bp.backCCW,z,i.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,i.paint,t.transform.zoom,g)}}}function $f(t,e,i,r,n,o){var a=t.context,s=a.gl,u=e.fbo;if(u){var l=t.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,u.colorAttachment.get());var c=function(t,e,i){var r=i.paint.get("hillshade-shadow-color"),n=i.paint.get("hillshade-highlight-color"),o=i.paint.get("hillshade-accent-color"),a=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);var s,u,l,c=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),c),u_image:0,u_latrange:(s=e.tileID,u=Math.pow(2,s.canonical.z),l=s.canonical.y,[new rc(0,l/u).toLngLat().lat,new rc(0,(l+1)/u).toLngLat().lat]),u_light:[i.paint.get("hillshade-exaggeration"),a],u_shadow:r,u_highlight:n,u_accent:o}}(t,e,i);l.draw(a,s.TRIANGLES,r,n,o,bp.disabled,c,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function td(t,e,i,r,n,o){var a=t.context,s=a.gl,u=e.dem;if(u&&u.data){var l=u.dim,c=u.stride,p=u.getPixels();if(a.activeTexture.set(s.TEXTURE1),a.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||t.getTileTexture(c),e.demTexture){var h=e.demTexture;h.update(p,{premultiply:!1}),h.bind(s.NEAREST,s.CLAMP_TO_EDGE)}else e.demTexture=new Pl(a,p,s.RGBA,{premultiply:!1}),e.demTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE);a.activeTexture.set(s.TEXTURE0);var f=e.fbo;if(!f){var d=new Pl(a,{width:l,height:l,data:null},s.RGBA);d.bind(s.LINEAR,s.CLAMP_TO_EDGE),(f=e.fbo=a.createFramebuffer(l,l,!0)).colorAttachment.set(d.texture)}a.bindFramebuffer.set(f.framebuffer),a.viewport.set([0,0,l,l]),t.useProgram("hillshadePrepare").draw(a,s.TRIANGLES,r,n,o,bp.disabled,function(t,e){var i=e.stride,r=Aa();return La(r,0,8192,-8192,0,0,1),Pa(r,r,[0,-8192,0]),{u_matrix:r,u_image:1,u_dimension:[i,i],u_zoom:t.overscaledZ,u_unpack:e.getUnpackVector()}}(e.tileID,u),i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),e.needsHillshadePrepare=!1}}function ed(t,e,i,r,n){var o=r.paint.get("raster-fade-duration");if(o>0){var a=U.now(),s=(a-t.timeAdded)/o,u=e?(a-e.timeAdded)/o:-1,l=i.getSource(),c=n.coveringZoomLevel({tileSize:l.tileSize,roundZoom:l.roundZoom}),h=!e||Math.abs(e.tileID.overscaledZ-c)>Math.abs(t.tileID.overscaledZ-c),f=h&&t.refreshedUponExpiration?1:p(h?s:1-u,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),e?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}var id=new de(1,0,0,1),rd=new de(0,1,0,1),nd=new de(0,0,1,1),od=new de(1,0,1,1),ad=new de(0,1,1,1);function sd(t,e,i,r){ld(t,0,e+i/2,t.transform.width,i,r)}function ud(t,e,i,r){ld(t,e-i/2,0,i,t.transform.height,r)}function ld(t,e,i,r,n,o){var a=t.context,s=a.gl;s.enable(s.SCISSOR_TEST),s.scissor(e*U.devicePixelRatio,i*U.devicePixelRatio,r*U.devicePixelRatio,n*U.devicePixelRatio),a.clear({color:o}),s.disable(s.SCISSOR_TEST)}function cd(t,e,i){var r=t.context,n=r.gl,o=i.posMatrix,a=t.useProgram("debug"),s=gp.disabled,u=vp.disabled,l=t.colorModeForRenderPass();r.activeTexture.set(n.TEXTURE0),t.emptyTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE),a.draw(r,n.LINE_STRIP,s,u,l,bp.disabled,zf(o,de.red),"$debug",t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);var c=e.getTileByID(i.key).latestRawTileData,p=Math.floor((c&&c.byteLength||0)/1024),h=e.getTile(i).tileSize,f=512/Math.min(h,512)*(i.overscaledZ/t.transform.zoom)*.5,d=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(d+=" => "+i.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var i=t.debugOverlayCanvas,r=t.context.gl,n=t.debugOverlayCanvas.getContext("2d");n.clearRect(0,0,i.width,i.height),n.shadowColor="white",n.shadowBlur=2,n.lineWidth=1.5,n.strokeStyle="white",n.textBaseline="top",n.font="bold 36px Open Sans, sans-serif",n.fillText(e,5,5),n.strokeText(e,5,5),t.debugOverlayTexture.update(i),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,d+" "+p+"kb"),a.draw(r,n.TRIANGLES,s,u,xp.alphaBlended,bp.disabled,zf(o,de.transparent,f),"$debug",t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}var pd={symbol:function(t,e,i,r,n){if("translucent"===t.renderPass){var o=vp.disabled,a=t.colorModeForRenderPass();i.layout.get("text-variable-anchor")&&function(t,e,i,r,n,o,a){for(var s=e.transform,u="map"===n,l="map"===o,c=0,p=t;c<p.length;c+=1){var h=p[c],f=r.getTile(h),d=f.getBucket(i);if(d&&d.text&&d.text.segments.get().length){var m=rl(d.textSizeData,s.zoom),y=ah(f,1,e.transform.zoom),_=Gp(h.posMatrix,l,u,e.transform,y),g="none"!==i.layout.get("icon-text-fit")&&d.hasIconData();if(m){var v=Math.pow(2,s.zoom-f.tileID.overscaledZ);Wf(d,u,l,a,nl,s,_,h.posMatrix,v,m,g)}}}}(r,t,i,e,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),n),0!==i.paint.get("icon-opacity").constantOr(1)&&Kf(t,e,i,r,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),o,a),0!==i.paint.get("text-opacity").constantOr(1)&&Kf(t,e,i,r,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),o,a),e.map.showCollisionBoxes&&(Zf(t,e,i,r,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),Zf(t,e,i,r,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))}},circle:function(t,e,i,r){if("translucent"===t.renderPass){var n=i.paint.get("circle-opacity"),o=i.paint.get("circle-stroke-width"),a=i.paint.get("circle-stroke-opacity"),s=void 0!==i.layout.get("circle-sort-key").constantOr(1);if(0!==n.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1)){for(var u=t.context,l=u.gl,c=t.depthModeForSublayer(0,gp.ReadOnly),p=vp.disabled,h=t.colorModeForRenderPass(),f=[],d=0;d<r.length;d++){var m=r[d],y=e.getTile(m),_=y.getBucket(i);if(_){var g=_.programConfigurations.get(i.id),v={programConfiguration:g,program:t.useProgram("circle",g),layoutVertexBuffer:_.layoutVertexBuffer,indexBuffer:_.indexBuffer,uniformValues:If(t,m,y,i)};if(s)for(var x=0,b=_.segments.get();x<b.length;x+=1){var w=b[x];f.push({segments:new ko([w]),sortKey:w.sortKey,state:v})}else f.push({segments:_.segments,sortKey:0,state:v})}}s&&f.sort((function(t,e){return t.sortKey-e.sortKey}));for(var I=0,S=f;I<S.length;I+=1){var T=S[I],z=T.state;z.program.draw(u,l.TRIANGLES,c,p,h,bp.disabled,z.uniformValues,i.id,z.layoutVertexBuffer,z.indexBuffer,T.segments,i.paint,t.transform.zoom,z.programConfiguration)}}}},heatmap:function(t,e,i,r){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var n=t.context,o=n.gl,a=vp.disabled,s=new xp([o.ONE,o.ONE],de.transparent,[!0,!0,!0,!0]);!function(t,e,i){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var n=i.heatmapFbo;if(n)r.bindTexture(r.TEXTURE_2D,n.colorAttachment.get()),t.bindFramebuffer.set(n.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),n=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,i,r){var n=t.gl;n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e.width/4,e.height/4,0,n.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:n.UNSIGNED_BYTE,null),r.colorAttachment.set(i)}(t,e,o,n)}}(n,t,i),n.clear({color:de.transparent});for(var u=0;u<r.length;u++){var l=r[u];if(!e.hasRenderableParent(l)){var c=e.getTile(l),p=c.getBucket(i);if(p){var h=p.programConfigurations.get(i.id);t.useProgram("heatmap",h).draw(n,o.TRIANGLES,gp.disabled,a,s,bp.disabled,Ef(l.posMatrix,c,t.transform.zoom,i.paint.get("heatmap-intensity")),i.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,i.paint,t.transform.zoom,h)}}}n.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,e){var i=t.context,r=i.gl,n=e.heatmapFbo;if(n){i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,n.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1);var o=e.colorRampTexture;o||(o=e.colorRampTexture=new Pl(i,e.colorRamp,r.RGBA)),o.bind(r.LINEAR,r.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(i,r.TRIANGLES,gp.disabled,vp.disabled,t.colorModeForRenderPass(),bp.disabled,function(t,e,i,r){var n=Aa();La(n,0,t.width,t.height,0,0,1);var o=t.context.gl;return{u_matrix:n,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:e.paint.get("heatmap-opacity")}}(t,e),e.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,e.paint,t.transform.zoom)}}(t,i))},line:function(t,e,i,r){if("translucent"===t.renderPass){var n=i.paint.get("line-opacity"),o=i.paint.get("line-width");if(0!==n.constantOr(1)&&0!==o.constantOr(1))for(var a,s=t.depthModeForSublayer(0,gp.ReadOnly),u=t.colorModeForRenderPass(),l=i.paint.get("line-dasharray"),c=i.paint.get("line-pattern"),h=c.constantOr(1),f=i.paint.get("line-gradient"),d=i.getCrossfadeParameters(),m=h?"linePattern":l?"lineSDF":f?"lineGradient":"line",y=t.context,_=y.gl,g=!0,v=0,x=r;v<x.length;v+=1){var b=x[v],w=e.getTile(b);if(!h||w.patternsLoaded()){var I=w.getBucket(i);if(I){var S=I.programConfigurations.get(i.id),T=t.context.program.get(),z=t.useProgram(m,S),A=g||z.program!==T,E=c.constantOr(null);if(E&&w.imageAtlas){var k=w.imageAtlas,C=k.patternPositions[E.to.toString()],P=k.patternPositions[E.from.toString()];C&&P&&S.setConstantPatternPositions(C,P)}var D=h?Pf(t,w,i,d):l?Df(t,w,i,l,d):f?Cf(t,w,i,I.lineClipsArray.length):kf(t,w,i);if(h)y.activeTexture.set(_.TEXTURE0),w.imageAtlasTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE),S.updatePaintBuffers(d);else if(l&&(A||t.lineAtlas.dirty))y.activeTexture.set(_.TEXTURE0),t.lineAtlas.bind(y);else if(f){var M=I.gradients[i.id],L=M.texture;if(i.gradientVersion!==M.version){var B=256;if(i.stepInterpolant){var R=e.getSource().maxzoom,F=b.canonical.z===R?Math.ceil(1<<t.transform.maxZoom-b.canonical.z):1;B=p((a=I.maxLineLength/8192*1024*F)<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2)),256,y.maxTextureSize)}M.gradient=Ya({expression:i.gradientExpression(),evaluationKey:"lineProgress",resolution:B,image:M.gradient||void 0,clips:I.lineClipsArray}),M.texture?M.texture.update(M.gradient):M.texture=new Pl(y,M.gradient,_.RGBA),M.version=i.gradientVersion,L=M.texture}y.activeTexture.set(_.TEXTURE0),L.bind(i.stepInterpolant?_.NEAREST:_.LINEAR,_.CLAMP_TO_EDGE)}z.draw(y,_.TRIANGLES,s,t.stencilModeForClipping(b),u,bp.disabled,D,i.id,I.layoutVertexBuffer,I.indexBuffer,I.segments,i.paint,t.transform.zoom,S,I.layoutVertexBuffer2),g=!1}}}}},fill:function(t,e,i,r){var n=i.paint.get("fill-color"),o=i.paint.get("fill-opacity");if(0!==o.constantOr(1)){var a=t.colorModeForRenderPass(),s=i.paint.get("fill-pattern"),u=t.opaquePassEnabledForLayer()&&!s.constantOr(1)&&1===n.constantOr(de.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===u){var l=t.depthModeForSublayer(1,"opaque"===t.renderPass?gp.ReadWrite:gp.ReadOnly);Jf(t,e,i,r,l,a,!1)}if("translucent"===t.renderPass&&i.paint.get("fill-antialias")){var c=t.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,gp.ReadOnly);Jf(t,e,i,r,c,a,!0)}}},"fill-extrusion":function(t,e,i,r){var n=i.paint.get("fill-extrusion-opacity");if(0!==n&&"translucent"===t.renderPass){var o=new gp(t.context.gl.LEQUAL,gp.ReadWrite,t.depthRangeFor3D);if(1!==n||i.paint.get("fill-extrusion-pattern").constantOr(1))Qf(t,e,i,r,o,vp.disabled,xp.disabled),Qf(t,e,i,r,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();Qf(t,e,i,r,o,vp.disabled,a)}}},hillshade:function(t,e,i,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var n=t.context,o=t.depthModeForSublayer(0,gp.ReadOnly),a=t.colorModeForRenderPass(),s="translucent"===t.renderPass?t.stencilConfigForOverlap(r):[{},r],u=s[0],l=0,c=s[1];l<c.length;l+=1){var p=c[l],h=e.getTile(p);h.needsHillshadePrepare&&"offscreen"===t.renderPass?td(t,h,i,o,vp.disabled,a):"translucent"===t.renderPass&&$f(t,h,i,o,u[p.overscaledZ],a)}n.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,i,r){if("translucent"===t.renderPass&&0!==i.paint.get("raster-opacity")&&r.length)for(var n=t.context,o=n.gl,a=e.getSource(),s=t.useProgram("raster"),u=t.colorModeForRenderPass(),l=a instanceof yc?[{},r]:t.stencilConfigForOverlap(r),c=l[0],p=l[1],h=p[p.length-1].overscaledZ,f=!t.options.moving,d=0,m=p;d<m.length;d+=1){var y=m[d],_=t.depthModeForSublayer(y.overscaledZ-h,1===i.paint.get("raster-opacity")?gp.ReadWrite:gp.ReadOnly,o.LESS),g=e.getTile(y),v=t.transform.calculatePosMatrix(y.toUnwrapped(),f);g.registerFadeDuration(i.paint.get("raster-fade-duration"));var x=e.findLoadedParent(y,0),b=ed(g,x,e,i,t.transform),w=void 0,I=void 0,S="nearest"===i.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;n.activeTexture.set(o.TEXTURE0),g.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),n.activeTexture.set(o.TEXTURE1),x?(x.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,x.tileID.overscaledZ-g.tileID.overscaledZ),I=[g.tileID.canonical.x*w%1,g.tileID.canonical.y*w%1]):g.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var T=Bf(v,I||[0,0],w||1,b,i);a instanceof yc?s.draw(n,o.TRIANGLES,_,vp.disabled,u,bp.disabled,T,i.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(n,o.TRIANGLES,_,c[y.overscaledZ],u,bp.disabled,T,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,i){var r=i.paint.get("background-color"),n=i.paint.get("background-opacity");if(0!==n){var o=t.context,a=o.gl,s=t.transform,u=s.tileSize,l=i.paint.get("background-pattern");if(!t.isPatternMissing(l)){var c=!l&&1===r.a&&1===n&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===c){var p=vp.disabled,h=t.depthModeForSublayer(0,"opaque"===c?gp.ReadWrite:gp.ReadOnly),f=t.colorModeForRenderPass(),d=t.useProgram(l?"backgroundPattern":"background"),m=s.coveringTiles({tileSize:u});l&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var y=i.getCrossfadeParameters(),_=0,g=m;_<g.length;_+=1){var v=g[_],x=t.transform.calculatePosMatrix(v.toUnwrapped()),b=l?Nf(x,n,t,l,{tileID:v,tileSize:u},y):jf(x,n,r);d.draw(o,a.TRIANGLES,h,p,f,bp.disabled,b,i.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,i){for(var r=0;r<i.length;r++)cd(t,e,i[r])},custom:function(t,e,i){var r=t.context,n=i.implementation;if("offscreen"===t.renderPass){var o=n.prerender;o&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),o.call(n,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(vp.disabled);var a="3d"===n.renderingMode?new gp(t.context.gl.LEQUAL,gp.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,gp.ReadOnly);r.setDepthMode(a),n.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}},hd=function(t,e){this.context=new wp(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=Ip.maxUnderzooming+Ip.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ph,this.gpuTimers={}};hd.prototype.resize=function(t,e){if(this.width=t*U.devicePixelRatio,this.height=e*U.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,r=this.style._order;i<r.length;i+=1)this.style._layers[r[i]].resize()},hd.prototype.setup=function(){var t=this.context,e=new Kn;e.emplaceBack(0,0),e.emplaceBack(8192,0),e.emplaceBack(0,8192),e.emplaceBack(8192,8192),this.tileExtentBuffer=t.createVertexBuffer(e,Fh.members),this.tileExtentSegments=ko.simpleSegment(0,0,4,2);var i=new Kn;i.emplaceBack(0,0),i.emplaceBack(8192,0),i.emplaceBack(0,8192),i.emplaceBack(8192,8192),this.debugBuffer=t.createVertexBuffer(i,Fh.members),this.debugSegments=ko.simpleSegment(0,0,4,5);var r=new Yn;r.emplaceBack(0,0,0,0),r.emplaceBack(8192,0,8192,0),r.emplaceBack(0,8192,0,8192),r.emplaceBack(8192,8192,8192,8192),this.rasterBoundsBuffer=t.createVertexBuffer(r,mc.members),this.rasterBoundsSegments=ko.simpleSegment(0,0,4,2);var n=new Kn;n.emplaceBack(0,0),n.emplaceBack(1,0),n.emplaceBack(0,1),n.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(n,Fh.members),this.viewportSegments=ko.simpleSegment(0,0,4,2);var o=new yo;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(o);var a=new uo;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(a),this.emptyTexture=new Pl(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);var s=this.context.gl;this.stencilClearMode=new vp({func:s.ALWAYS,mask:0},0,255,s.ZERO,s.ZERO,s.ZERO)},hd.prototype.clearStencil=function(){var t=this.context,e=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var i=Aa();La(i,0,this.width,this.height,0,0,1),Da(i,i,[e.drawingBufferWidth,e.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,e.TRIANGLES,gp.disabled,this.stencilClearMode,xp.disabled,bp.disabled,Af(i),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},hd.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var i=this.context,r=i.gl;this.nextStencilID+e.length>256&&this.clearStencil(),i.setColorMode(xp.disabled),i.setDepthMode(gp.disabled);var n=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],u=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;n.draw(i,r.TRIANGLES,gp.disabled,new vp({func:r.ALWAYS,mask:0},u,255,r.KEEP,r.KEEP,r.REPLACE),xp.disabled,bp.disabled,Af(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},hd.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new vp({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},hd.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new vp({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},hd.prototype.stencilConfigForOverlap=function(t){var e,i=this.context.gl,r=t.sort((function(t,e){return e.overscaledZ-t.overscaledZ})),n=r[r.length-1].overscaledZ,o=r[0].overscaledZ-n+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var a={},s=0;s<o;s++)a[s+n]=new vp({func:i.GEQUAL,mask:255},s+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=o,[a,r]}return[(e={},e[n]=vp.disabled,e),r]},hd.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new xp([t.CONSTANT_COLOR,t.ONE],new de(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?xp.unblended:xp.alphaBlended},hd.prototype.depthModeForSublayer=function(t,e,i){if(!this.opaquePassEnabledForLayer())return gp.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new gp(i||this.context.gl.LEQUAL,e,[r,r])},hd.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},hd.prototype.render=function(t,e){var i=this;this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(U.now()),this.imageManager.beginFrame();var r=this.style._order,n=this.style.sourceCaches;for(var o in n){var a=n[o];a.used&&a.prepare(this.context)}var s,u,l={},c={},p={};for(var h in n){var f=n[h];l[h]=f.getVisibleCoordinates(),c[h]=l[h].slice().reverse(),p[h]=f.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var m=0;m<r.length;m++)if(this.style._layers[r[m]].is3D()){this.opaquePassCutoff=m;break}this.renderPass="offscreen";for(var y=0,_=r;y<_.length;y+=1){var g=this.style._layers[_[y]];if(g.hasOffscreenPass()&&!g.isHidden(this.transform.zoom)){var v=c[g.source];("custom"===g.type||v.length)&&this.renderLayer(this,n[g.source],g,v)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:e.showOverdrawInspector?de.black:de.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=e.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){var x=this.style._layers[r[this.currentLayer]],b=n[x.source],w=l[x.source];this._renderTileClippingMasks(x,w),this.renderLayer(this,b,x,w)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){var I=this.style._layers[r[this.currentLayer]],S=n[I.source],T=("symbol"===I.type?p:c)[I.source];this._renderTileClippingMasks(I,l[I.source]),this.renderLayer(this,S,I,T)}this.options.showTileBoundaries&&(d(this.style._layers).forEach((function(t){t.source&&!t.isHidden(i.transform.zoom)&&(t.source!==(u&&u.id)&&(u=i.style.sourceCaches[t.source]),(!s||s.getSource().maxzoom<u.getSource().maxzoom)&&(s=u))})),s&&pd.debug(this,s,s.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;sd(t,t.transform.height-(e.top||0),3,id),sd(t,e.bottom||0,3,rd),ud(t,e.left||0,3,nd),ud(t,t.transform.width-(e.right||0),3,od);var i=t.transform.centerPoint;!function(t,e,i,r){ld(t,e-1,i-10,2,20,r),ld(t,e-10,i-1,20,2,r)}(t,i.x,t.transform.height-i.y,ad)}(this),this.context.setDefault()},hd.prototype.renderLayer=function(t,e,i,r){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||r.length)&&(this.id=i.id,this.gpuTimingStart(i),pd[i.type](t,e,i,r,this.style.placement.variableOffsets),this.gpuTimingEnd())},hd.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,i=this.gpuTimers[t.id];i||(i=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),i.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,i.query)}},hd.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},hd.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},hd.prototype.queryGpuTimers=function(t){var e={};for(var i in t){var r=t[i],n=this.context.extTimerQuery,o=n.getQueryObjectEXT(r.query,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(r.query),e[i]=o}return e},hd.prototype.translatePosMatrix=function(t,e,i,r,n){if(!i[0]&&!i[1])return t;var o=n?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(o){var a=Math.sin(o),s=Math.cos(o);i=[i[0]*s-i[1]*a,i[0]*a+i[1]*s]}var u=[n?i[0]:ah(e,i[0],this.transform.zoom),n?i[1]:ah(e,i[1],this.transform.zoom),0],l=new Float32Array(16);return Pa(l,t,u),l},hd.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},hd.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},hd.prototype.isPatternMissing=function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString()),i=this.imageManager.getPattern(t.to.toString());return!e||!i},hd.prototype.useProgram=function(t,e){this.cache=this.cache||{};var i=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new mf(this.context,t,hf[t],e,qf[t],this._showOverdrawInspector)),this.cache[i]},hd.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},hd.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},hd.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=a.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Pl(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},hd.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var fd=function(t,e){this.points=t,this.planes=e};fd.fromInvProjectionMatrix=function(t,e,i){var r=Math.pow(2,i),n=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(e){return Va([],e,t)})).map((function(t){return function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}([],t,1/t[3]/e*r)})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(t){var e,i,r=function(t,e){var i=e[0],r=e[1],n=e[2],o=i*i+r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}([],function(t,e,i){var r=e[0],n=e[1],o=e[2],a=i[0],s=i[1],u=i[2];return t[0]=n*u-o*s,t[1]=o*a-r*u,t[2]=r*s-n*a,t}([],Oa([],n[t[0]],n[t[1]]),Oa([],n[t[2]],n[t[1]]))),o=-((e=r)[0]*(i=n[t[1]])[0]+e[1]*i[1]+e[2]*i[2]);return r.concat(o)}));return new fd(n,o)};var dd=function(t,e){this.min=t,this.max=e,this.center=function(t,e,i){return t[0]=.5*e[0],t[1]=.5*e[1],t[2]=.5*e[2],t}([],function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}([],this.min,this.max))};dd.prototype.quadrant=function(t){for(var e=[t%2==0,t<2],i=Ra(this.min),r=Ra(this.max),n=0;n<e.length;n++)i[n]=e[n]?this.min[n]:this.center[n],r[n]=e[n]?this.center[n]:this.max[n];return r[2]=this.max[2],new dd(i,r)},dd.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},dd.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},dd.prototype.intersects=function(t){for(var e,i,r=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],n=!0,o=0;o<t.planes.length;o++){for(var a=t.planes[o],s=0,u=0;u<r.length;u++)s+=(e=a)[0]*(i=r[u])[0]+e[1]*i[1]+e[2]*i[2]+e[3]*i[3]>=0;if(0===s)return 0;s!==r.length&&(n=!1)}if(n)return 2;for(var l=0;l<3;l++){for(var c=Number.MAX_VALUE,p=-Number.MAX_VALUE,h=0;h<t.points.length;h++){var f=t.points[h][l]-this.min[l];c=Math.min(c,f),p=Math.max(p,f)}if(p<0||c>this.max[l]-this.min[l])return 0}return 1};var md=function(t,e,i,r){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(i)||i<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=i,this.right=r};md.prototype.interpolate=function(t,e,i){return null!=e.top&&null!=t.top&&(this.top=ni(t.top,e.top,i)),null!=e.bottom&&null!=t.bottom&&(this.bottom=ni(t.bottom,e.bottom,i)),null!=e.left&&null!=t.left&&(this.left=ni(t.left,e.left,i)),null!=e.right&&null!=t.right&&(this.right=ni(t.right,e.right,i)),this},md.prototype.getCenter=function(t,e){var i=p((this.left+t-this.right)/2,0,t),r=p((this.top+e-this.bottom)/2,0,e);return new n(i,r)},md.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},md.prototype.clone=function(){return new md(this.top,this.bottom,this.left,this.right)},md.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var yd=function(t,e,i,r,n){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=e||22,this._minPitch=null==i?0:i,this._maxPitch=null==r?60:r,this.setMaxBounds(),this.width=0,this.height=0,this._center=new Yl(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new md,this._posMatrixCache={},this._alignedPosMatrixCache={}},_d={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};yd.prototype.clone=function(){var t=new yd(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},_d.minZoom.get=function(){return this._minZoom},_d.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},_d.maxZoom.get=function(){return this._maxZoom},_d.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},_d.minPitch.get=function(){return this._minPitch},_d.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},_d.maxPitch.get=function(){return this._maxPitch},_d.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},_d.renderWorldCopies.get=function(){return this._renderWorldCopies},_d.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},_d.worldSize.get=function(){return this.tileSize*this.scale},_d.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},_d.size.get=function(){return new n(this.width,this.height)},_d.bearing.get=function(){return-this.angle/Math.PI*180},_d.bearing.set=function(t){var e=-h(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=function(){var t=new za(4);return za!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}(),function(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=Math.sin(i),u=Math.cos(i);t[0]=r*u+o*s,t[1]=n*u+a*s,t[2]=r*-s+o*u,t[3]=n*-s+a*u}(this.rotationMatrix,this.rotationMatrix,this.angle))},_d.pitch.get=function(){return this._pitch/Math.PI*180},_d.pitch.set=function(t){var e=p(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},_d.fov.get=function(){return this._fov/Math.PI*180},_d.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},_d.zoom.get=function(){return this._zoom},_d.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},_d.center.get=function(){return this._center},_d.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},_d.padding.get=function(){return this._edgeInsets.toJSON()},_d.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},_d.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},yd.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},yd.prototype.interpolatePadding=function(t,e,i){this._unmodified=!1,this._edgeInsets.interpolate(t,e,i),this._constrain(),this._calcMatrices()},yd.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},yd.prototype.getVisibleUnwrappedCoordinates=function(t){var e=[new oc(0,t)];if(this._renderWorldCopies)for(var i=this.pointCoordinate(new n(0,0)),r=this.pointCoordinate(new n(this.width,0)),o=this.pointCoordinate(new n(this.width,this.height)),a=this.pointCoordinate(new n(0,this.height)),s=Math.floor(Math.min(i.x,r.x,o.x,a.x)),u=Math.floor(Math.max(i.x,r.x,o.x,a.x)),l=s-1;l<=u+1;l++)0!==l&&e.push(new oc(l,t));return e},yd.prototype.coveringTiles=function(t){var e=this.coveringZoomLevel(t),i=e;if(void 0!==t.minzoom&&e<t.minzoom)return[];void 0!==t.maxzoom&&e>t.maxzoom&&(e=t.maxzoom);var r=rc.fromLngLat(this.center),n=Math.pow(2,e),o=[n*r.x,n*r.y,0],a=fd.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,e),s=t.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(s=e);var u=function(t){return{aabb:new dd([t*n,0,0],[(t+1)*n,n,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},l=[],c=[],p=e,h=t.reparseOverscaled?i:e;if(this._renderWorldCopies)for(var f=1;f<=3;f++)l.push(u(-f)),l.push(u(f));for(l.push(u(0));l.length>0;){var d=l.pop(),m=d.x,y=d.y,_=d.fullyVisible;if(!_){var g=d.aabb.intersects(a);if(0===g)continue;_=2===g}var v=d.aabb.distanceX(o),x=d.aabb.distanceY(o),b=Math.max(Math.abs(v),Math.abs(x));if(d.zoom===p||b>3+(1<<p-d.zoom)-2&&d.zoom>=s)c.push({tileID:new ac(d.zoom===p?h:d.zoom,d.wrap,d.zoom,m,y),distanceSq:Ua([o[0]-.5-m,o[1]-.5-y])});else for(var w=0;w<4;w++){var I=(m<<1)+w%2,S=(y<<1)+(w>>1);l.push({aabb:d.aabb.quadrant(w),zoom:d.zoom+1,x:I,y:S,wrap:d.wrap,fullyVisible:_})}}return c.sort((function(t,e){return t.distanceSq-e.distanceSq})).map((function(t){return t.tileID}))},yd.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},_d.unmodified.get=function(){return this._unmodified},yd.prototype.zoomScale=function(t){return Math.pow(2,t)},yd.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},yd.prototype.project=function(t){var e=p(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new n($l(t.lng)*this.worldSize,tc(e)*this.worldSize)},yd.prototype.unproject=function(t){return new rc(t.x/this.worldSize,t.y/this.worldSize).toLngLat()},_d.point.get=function(){return this.project(this.center)},yd.prototype.setLocationAtPoint=function(t,e){var i=this.pointCoordinate(e),r=this.pointCoordinate(this.centerPoint),n=this.locationCoordinate(t),o=new rc(n.x-(i.x-r.x),n.y-(i.y-r.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())},yd.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},yd.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},yd.prototype.locationCoordinate=function(t){return rc.fromLngLat(t)},yd.prototype.coordinateLocation=function(t){return t.toLngLat()},yd.prototype.pointCoordinate=function(t){var e=[t.x,t.y,0,1],i=[t.x,t.y,1,1];Va(e,e,this.pixelMatrixInverse),Va(i,i,this.pixelMatrixInverse);var r=e[3],n=i[3],o=e[1]/r,a=i[1]/n,s=e[2]/r,u=i[2]/n,l=s===u?0:(0-s)/(u-s);return new rc(ni(e[0]/r,i[0]/n,l)/this.worldSize,ni(o,a,l)/this.worldSize)},yd.prototype.coordinatePoint=function(t){var e=[t.x*this.worldSize,t.y*this.worldSize,0,1];return Va(e,e,this.pixelMatrix),new n(e[0]/e[3],e[1]/e[3])},yd.prototype.getBounds=function(){return(new Kl).extend(this.pointLocation(new n(0,0))).extend(this.pointLocation(new n(this.width,0))).extend(this.pointLocation(new n(this.width,this.height))).extend(this.pointLocation(new n(0,this.height)))},yd.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new Kl([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},yd.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},yd.prototype.calculatePosMatrix=function(t,e){void 0===e&&(e=!1);var i=t.key,r=e?this._alignedPosMatrixCache:this._posMatrixCache;if(r[i])return r[i];var n=t.canonical,o=this.worldSize/this.zoomScale(n.z),a=n.x+Math.pow(2,n.z)*t.wrap,s=Ea(new Float64Array(16));return Pa(s,s,[a*o,n.y*o,0]),Da(s,s,[o/8192,o/8192,1]),Ca(s,e?this.alignedProjMatrix:this.projMatrix,s),r[i]=new Float32Array(s),r[i]},yd.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},yd.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,i,r,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;o=tc(p[1])*this.worldSize,t=(a=tc(p[0])*this.worldSize)-o<l.y?l.y/(a-o):0}if(this.lngRange){var h=this.lngRange;s=$l(h[0])*this.worldSize,e=(u=$l(h[1])*this.worldSize)-s<l.x?l.x/(u-s):0}var f=this.point,d=Math.max(e||0,t||0);if(d)return this.center=this.unproject(new n(e?(u+s)/2:f.x,t?(a+o)/2:f.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var m=f.y,y=l.y/2;m-y<o&&(r=o+y),m+y>a&&(r=a-y)}if(this.lngRange){var _=f.x,g=l.x/2;_-g<s&&(i=s+g),_+g>u&&(i=u-g)}void 0===i&&void 0===r||(this.center=this.unproject(new n(void 0!==i?i:f.x,void 0!==r?r:f.y))),this._unmodified=c,this._constraining=!1}},yd.prototype._calcMatrices=function(){if(this.height){var t=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=Math.PI/2+this._pitch,i=this._fov*(.5+t.y/this.height),r=Math.sin(i)*this.cameraToCenterDistance/Math.sin(p(Math.PI-e-i,.01,Math.PI-.01)),n=this.point,o=n.x,a=n.y,s=1.01*(Math.cos(Math.PI/2-this._pitch)*r+this.cameraToCenterDistance),u=this.height/50,l=new Float64Array(16);!function(t,e,i,r,n){var o,a=1/Math.tan(e/2);t[0]=a/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=(n+r)*(o=1/(r-n)),t[14]=2*n*r*o):(t[10]=-1,t[14]=-2*r)}(l,this._fov,this.width/this.height,u,s),l[8]=2*-t.x/this.width,l[9]=2*t.y/this.height,Da(l,l,[1,-1,1]),Pa(l,l,[0,0,-this.cameraToCenterDistance]),function(t,e,i){var r=Math.sin(i),n=Math.cos(i),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],p=e[10],h=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*n+l*r,t[5]=a*n+c*r,t[6]=s*n+p*r,t[7]=u*n+h*r,t[8]=l*n-o*r,t[9]=c*n-a*r,t[10]=p*n-s*r,t[11]=h*n-u*r}(l,l,this._pitch),Ma(l,l,this.angle),Pa(l,l,[-o,-a,0]),this.mercatorMatrix=Da([],l,[this.worldSize,this.worldSize,this.worldSize]),Da(l,l,[1,1,ec(1,this.center.lat)*this.worldSize,1]),this.projMatrix=l,this.invProjMatrix=ka([],this.projMatrix);var c=this.width%2/2,h=this.height%2/2,f=Math.cos(this.angle),d=Math.sin(this.angle),m=o-Math.round(o)+f*c+d*h,y=a-Math.round(a)+f*h+d*c,_=new Float64Array(l);if(Pa(_,_,[m>.5?m-1:m,y>.5?y-1:y,0]),this.alignedProjMatrix=_,Da(l=Aa(),l,[this.width/2,-this.height/2,1]),Pa(l,l,[1,-1,0]),this.labelPlaneMatrix=l,Da(l=Aa(),l,[1,-1,1]),Pa(l,l,[-1,-1,0]),Da(l,l,[2/this.width,2/this.height,1]),this.glCoordMatrix=l,this.pixelMatrix=Ca(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(l=ka(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=l,this._posMatrixCache={},this._alignedPosMatrixCache={}}},yd.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new n(0,0)),e=[t.x*this.worldSize,t.y*this.worldSize,0,1];return Va(e,e,this.pixelMatrix)[3]/this.cameraToCenterDistance},yd.prototype.getCameraPoint=function(){var t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n(0,t))},yd.prototype.getCameraQueryGeometry=function(t){var e=this.getCameraPoint();if(1===t.length)return[t[0],e];for(var i=e.x,r=e.y,o=e.x,a=e.y,s=0,u=t;s<u.length;s+=1){var l=u[s];i=Math.min(i,l.x),r=Math.min(r,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y)}return[new n(i,r),new n(o,r),new n(o,a),new n(i,a),new n(i,r)]},Object.defineProperties(yd.prototype,_d);var gd=function(t){var e,i,r,n;this._hashName=t&&encodeURIComponent(t),b(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),i=!1,r=null,n=function(){r=null,i&&(e(),r=setTimeout(n,300),i=!1)},function(){return i=!0,r||n(),r})};gd.prototype.addTo=function(t){return this._map=t,a.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},gd.prototype.remove=function(){return a.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},gd.prototype.getHashString=function(t){var e=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,r=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),n=Math.pow(10,r),o=Math.round(e.lng*n)/n,s=Math.round(e.lat*n)/n,u=this._map.getBearing(),l=this._map.getPitch(),c="";if(c+=t?"/"+o+"/"+s+"/"+i:i+"/"+s+"/"+o,(u||l)&&(c+="/"+Math.round(10*u)/10),l&&(c+="/"+Math.round(l)),this._hashName){var p=this._hashName,h=!1,f=a.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===p?(h=!0,e+"="+c):t})).filter((function(t){return t}));return h||f.push(p+"="+c),"#"+f.join("&")}return"#"+c},gd.prototype._getCurrentHash=function(){var t,e=this,i=a.location.hash.replace("#","");return this._hashName?(i.split("&").map((function(t){return t.split("=")})).forEach((function(i){i[0]===e._hashName&&(t=i)})),(t&&t[1]||"").split("/")):i.split("/")},gd.prototype._onHashChange=function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(t){return isNaN(t)}))){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},gd.prototype._updateHashUnthrottled=function(){var t=this.getHashString();try{a.history.replaceState(a.history.state,"",t)}catch(t){}};var vd={linearity:.3,easing:l(0,0,.3,1)},xd=m({deceleration:2500,maxSpeed:1400},vd),bd=m({deceleration:20,maxSpeed:1400},vd),wd=m({deceleration:1e3,maxSpeed:360},vd),Id=m({deceleration:1e3,maxSpeed:90},vd),Sd=function(t){this._map=t,this.clear()};function Td(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function zd(t,e,i){var r=i.maxSpeed,n=i.linearity,o=i.deceleration,a=p(t*n/(e/1e3),-r,r),s=Math.abs(a)/(o*n);return{easing:i.easing,duration:1e3*s,amount:a*(s/2)}}Sd.prototype.clear=function(){this._inertiaBuffer=[]},Sd.prototype.record=function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:U.now(),settings:t})},Sd.prototype._drainInertiaBuffer=function(){for(var t=this._inertiaBuffer,e=U.now();t.length>0&&e-t[0].time>160;)t.shift()},Sd.prototype._onMoveEnd=function(t){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var e={zoom:0,bearing:0,pitch:0,pan:new n(0,0),pinchAround:void 0,around:void 0},i=0,r=this._inertiaBuffer;i<r.length;i+=1){var o=r[i].settings;e.zoom+=o.zoomDelta||0,e.bearing+=o.bearingDelta||0,e.pitch+=o.pitchDelta||0,o.panDelta&&e.pan._add(o.panDelta),o.around&&(e.around=o.around),o.pinchAround&&(e.pinchAround=o.pinchAround)}var a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(e.pan.mag()){var u=zd(e.pan.mag(),a,m({},xd,t||{}));s.offset=e.pan.mult(u.amount/e.pan.mag()),s.center=this._map.transform.center,Td(s,u)}if(e.zoom){var l=zd(e.zoom,a,bd);s.zoom=this._map.transform.zoom+l.amount,Td(s,l)}if(e.bearing){var c=zd(e.bearing,a,wd);s.bearing=this._map.transform.bearing+p(c.amount,-179,179),Td(s,c)}if(e.pitch){var h=zd(e.pitch,a,Id);s.pitch=this._map.transform.pitch+h.amount,Td(s,h)}if(s.zoom||s.bearing){var f=void 0===e.pinchAround?e.around:e.pinchAround;s.around=f?this._map.unproject(f):this._map.getCenter()}return this.clear(),m(s,{noMoveStart:!0})}};var Ad=function(t){function e(e,i,r,n){void 0===n&&(n={});var o=j.mousePos(i.getCanvasContainer(),r),a=i.unproject(o);t.call(this,e,m({point:o,lngLat:a,originalEvent:r},n)),this._defaultPrevented=!1,this.target=i}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,i),e}(Ut),Ed=function(t){function e(e,i,r){var o="touchend"===e?r.changedTouches:r.touches,a=j.touchPos(i.getCanvasContainer(),o),s=a.map((function(t){return i.unproject(t)})),u=a.reduce((function(t,e,i,r){return t.add(e.div(r.length))}),new n(0,0)),l=i.unproject(u);t.call(this,e,{points:a,point:u,lngLats:s,lngLat:l,originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,i),e}(Ut),kd=function(t){function e(e,i,r){t.call(this,e,{originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,i),e}(Ut),Cd=function(t,e){this._map=t,this._clickTolerance=e.clickTolerance};Cd.prototype.reset=function(){delete this._mousedownPos},Cd.prototype.wheel=function(t){return this._firePreventable(new kd(t.type,this._map,t))},Cd.prototype.mousedown=function(t,e){return this._mousedownPos=e,this._firePreventable(new Ad(t.type,this._map,t))},Cd.prototype.mouseup=function(t){this._map.fire(new Ad(t.type,this._map,t))},Cd.prototype.click=function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new Ad(t.type,this._map,t))},Cd.prototype.dblclick=function(t){return this._firePreventable(new Ad(t.type,this._map,t))},Cd.prototype.mouseover=function(t){this._map.fire(new Ad(t.type,this._map,t))},Cd.prototype.mouseout=function(t){this._map.fire(new Ad(t.type,this._map,t))},Cd.prototype.touchstart=function(t){return this._firePreventable(new Ed(t.type,this._map,t))},Cd.prototype.touchmove=function(t){this._map.fire(new Ed(t.type,this._map,t))},Cd.prototype.touchend=function(t){this._map.fire(new Ed(t.type,this._map,t))},Cd.prototype.touchcancel=function(t){this._map.fire(new Ed(t.type,this._map,t))},Cd.prototype._firePreventable=function(t){if(this._map.fire(t),t.defaultPrevented)return{}},Cd.prototype.isEnabled=function(){return!0},Cd.prototype.isActive=function(){return!1},Cd.prototype.enable=function(){},Cd.prototype.disable=function(){};var Pd=function(t){this._map=t};Pd.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Pd.prototype.mousemove=function(t){this._map.fire(new Ad(t.type,this._map,t))},Pd.prototype.mousedown=function(){this._delayContextMenu=!0},Pd.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ad("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Pd.prototype.contextmenu=function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Ad(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()},Pd.prototype.isEnabled=function(){return!0},Pd.prototype.isActive=function(){return!1},Pd.prototype.enable=function(){},Pd.prototype.disable=function(){};var Dd=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1};function Md(t,e){for(var i={},r=0;r<t.length;r++)i[t[r].identifier]=e[r];return i}Dd.prototype.isEnabled=function(){return!!this._enabled},Dd.prototype.isActive=function(){return!!this._active},Dd.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Dd.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Dd.prototype.mousedown=function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(j.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)},Dd.prototype.mousemoveWindow=function(t,e){if(this._active){var i=e;if(!(this._lastPos.equals(i)||!this._box&&i.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=i,this._box||(this._box=j.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var n=Math.min(r.x,i.x),o=Math.max(r.x,i.x),a=Math.min(r.y,i.y),s=Math.max(r.y,i.y);j.setTransform(this._box,"translate("+n+"px,"+a+"px)"),this._box.style.width=o-n+"px",this._box.style.height=s-a+"px"}}},Dd.prototype.mouseupWindow=function(t,e){var i=this;if(this._active&&0===t.button){var r=this._startPos,n=e;if(this.reset(),j.suppressClick(),r.x!==n.x||r.y!==n.y)return this._map.fire(new Ut("boxzoomend",{originalEvent:t})),{cameraAnimation:function(t){return t.fitScreenCoordinates(r,n,i._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",t)}},Dd.prototype.keydown=function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))},Dd.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(j.remove(this._box),this._box=null),j.enableDrag(),delete this._startPos,delete this._lastPos},Dd.prototype._fireEvent=function(t,e){return this._map.fire(new Ut(t,{originalEvent:e}))};var Ld=function(t){this.reset(),this.numTouches=t.numTouches};Ld.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Ld.prototype.touchstart=function(t,e,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),i.length===this.numTouches&&(this.centroid=function(t){for(var e=new n(0,0),i=0,r=t;i<r.length;i+=1)e._add(r[i]);return e.div(t.length)}(e),this.touches=Md(i,e)))},Ld.prototype.touchmove=function(t,e,i){if(!this.aborted&&this.centroid){var r=Md(i,e);for(var n in this.touches){var o=r[n];(!o||o.dist(this.touches[n])>30)&&(this.aborted=!0)}}},Ld.prototype.touchend=function(t,e,i){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}};var Bd=function(t){this.singleTap=new Ld(t),this.numTaps=t.numTaps,this.reset()};Bd.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Bd.prototype.touchstart=function(t,e,i){this.singleTap.touchstart(t,e,i)},Bd.prototype.touchmove=function(t,e,i){this.singleTap.touchmove(t,e,i)},Bd.prototype.touchend=function(t,e,i){var r=this.singleTap.touchend(t,e,i);if(r){var n=t.timeStamp-this.lastTime<500,o=!this.lastTap||this.lastTap.dist(r)<30;if(n&&o||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}};var Rd=function(){this._zoomIn=new Bd({numTouches:1,numTaps:2}),this._zoomOut=new Bd({numTouches:2,numTaps:1}),this.reset()};Rd.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Rd.prototype.touchstart=function(t,e,i){this._zoomIn.touchstart(t,e,i),this._zoomOut.touchstart(t,e,i)},Rd.prototype.touchmove=function(t,e,i){this._zoomIn.touchmove(t,e,i),this._zoomOut.touchmove(t,e,i)},Rd.prototype.touchend=function(t,e,i){var r=this,n=this._zoomIn.touchend(t,e,i),o=this._zoomOut.touchend(t,e,i);return n?(this._active=!0,t.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(n)},{originalEvent:t})}}):o?(this._active=!0,t.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(o)},{originalEvent:t})}}):void 0},Rd.prototype.touchcancel=function(){this.reset()},Rd.prototype.enable=function(){this._enabled=!0},Rd.prototype.disable=function(){this._enabled=!1,this.reset()},Rd.prototype.isEnabled=function(){return this._enabled},Rd.prototype.isActive=function(){return this._active};var Fd={0:1,2:2},Od=function(t){this.reset(),this._clickTolerance=t.clickTolerance||1};Od.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Od.prototype._correctButton=function(t,e){return!1},Od.prototype._move=function(t,e){return{}},Od.prototype.mousedown=function(t,e){if(!this._lastPoint){var i=j.mouseButton(t);this._correctButton(t,i)&&(this._lastPoint=e,this._eventButton=i)}},Od.prototype.mousemoveWindow=function(t,e){var i=this._lastPoint;if(i)if(t.preventDefault(),function(t,e){var i=Fd[e];return void 0===t.buttons||(t.buttons&i)!==i}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(i,e)},Od.prototype.mouseupWindow=function(t){this._lastPoint&&j.mouseButton(t)===this._eventButton&&(this._moved&&j.suppressClick(),this.reset())},Od.prototype.enable=function(){this._enabled=!0},Od.prototype.disable=function(){this._enabled=!1,this.reset()},Od.prototype.isEnabled=function(){return this._enabled},Od.prototype.isActive=function(){return this._active};var Vd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.mousedown=function(e,i){t.prototype.mousedown.call(this,e,i),this._lastPoint&&(this._active=!0)},e.prototype._correctButton=function(t,e){return 0===e&&!t.ctrlKey},e.prototype._move=function(t,e){return{around:e,panDelta:e.sub(t)}},e}(Od),Ud=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var i=.8*(e.x-t.x);if(i)return this._active=!0,{bearingDelta:i}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Od),jd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var i=-.5*(e.y-t.y);if(i)return this._active=!0,{pitchDelta:i}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Od),Nd=function(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()};Nd.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new n(0,0)},Nd.prototype.touchstart=function(t,e,i){return this._calculateTransform(t,e,i)},Nd.prototype.touchmove=function(t,e,i){if(this._active&&!(i.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,i)},Nd.prototype.touchend=function(t,e,i){this._calculateTransform(t,e,i),this._active&&i.length<this._minTouches&&this.reset()},Nd.prototype.touchcancel=function(){this.reset()},Nd.prototype._calculateTransform=function(t,e,i){i.length>0&&(this._active=!0);var r=Md(i,e),o=new n(0,0),a=new n(0,0),s=0;for(var u in r){var l=r[u],c=this._touches[u];c&&(o._add(l),a._add(l.sub(c)),s++,r[u]=l)}if(this._touches=r,!(s<this._minTouches)&&a.mag()){var p=a.div(s);if(this._sum._add(p),!(this._sum.mag()<this._clickTolerance))return{around:o.div(s),panDelta:p}}},Nd.prototype.enable=function(){this._enabled=!0},Nd.prototype.disable=function(){this._enabled=!1,this.reset()},Nd.prototype.isEnabled=function(){return this._enabled},Nd.prototype.isActive=function(){return this._active};var qd=function(){this.reset()};function Zd(t,e,i){for(var r=0;r<t.length;r++)if(t[r].identifier===i)return e[r]}function Gd(t,e){return Math.log(t/e)/Math.LN2}qd.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},qd.prototype._start=function(t){},qd.prototype._move=function(t,e,i){return{}},qd.prototype.touchstart=function(t,e,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([e[0],e[1]]))},qd.prototype.touchmove=function(t,e,i){if(this._firstTwoTouches){t.preventDefault();var r=this._firstTwoTouches,n=r[1],o=Zd(i,e,r[0]),a=Zd(i,e,n);if(o&&a){var s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}}},qd.prototype.touchend=function(t,e,i){if(this._firstTwoTouches){var r=this._firstTwoTouches,n=r[1],o=Zd(i,e,r[0]),a=Zd(i,e,n);o&&a||(this._active&&j.suppressClick(),this.reset())}},qd.prototype.touchcancel=function(){this.reset()},qd.prototype.enable=function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around},qd.prototype.disable=function(){this._enabled=!1,this.reset()},qd.prototype.isEnabled=function(){return this._enabled},qd.prototype.isActive=function(){return this._active};var Xd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._distance,delete this._startDistance},e.prototype._start=function(t){this._startDistance=this._distance=t[0].dist(t[1])},e.prototype._move=function(t,e){var i=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Gd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Gd(this._distance,i),pinchAround:e}},e}(qd);function Wd(t,e){return 180*t.angleWith(e)/Math.PI}var Hd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},e.prototype._start=function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])},e.prototype._move=function(t,e){var i=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Wd(this._vector,i),pinchAround:e}},e.prototype._isBelowThreshold=function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,i=Wd(t,this._startVector);return Math.abs(i)<e},e}(qd);function Kd(t){return Math.abs(t.y)>Math.abs(t.x)}var Yd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},e.prototype._start=function(t){this._lastPoints=t,Kd(t[0].sub(t[1]))&&(this._valid=!1)},e.prototype._move=function(t,e,i){var r=t[0].sub(this._lastPoints[0]),n=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,n,i.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(r.y+n.y)/2*-.5}},e.prototype.gestureBeginsVertically=function(t,e,i){if(void 0!==this._valid)return this._valid;var r=t.mag()>=2,n=e.mag()>=2;if(r||n){if(!r||!n)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;var o=t.y>0==e.y>0;return Kd(t)&&Kd(e)&&o}},e}(qd),Jd={panStep:100,bearingStep:15,pitchStep:10},Qd=function(){var t=Jd;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep};function $d(t){return t*(2-t)}Qd.prototype.reset=function(){this._active=!1},Qd.prototype.keydown=function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=0,r=0,n=0,o=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:t.shiftKey?r=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?r=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?n=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?n=-1:(t.preventDefault(),a=1);break;default:return}return{cameraAnimation:function(s){var u=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:$d,zoom:i?Math.round(u)+i*(t.shiftKey?2:1):u,bearing:s.getBearing()+r*e._bearingStep,pitch:s.getPitch()+n*e._pitchStep,offset:[-o*e._panStep,-a*e._panStep],center:s.getCenter()},{originalEvent:t})}}}},Qd.prototype.enable=function(){this._enabled=!0},Qd.prototype.disable=function(){this._enabled=!1,this.reset()},Qd.prototype.isEnabled=function(){return this._enabled},Qd.prototype.isActive=function(){return this._active};var tm=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._handler=e,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,b(["_onTimeout"],this)};tm.prototype.setZoomRate=function(t){this._defaultZoomRate=t},tm.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},tm.prototype.isEnabled=function(){return!!this._enabled},tm.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},tm.prototype.isZooming=function(){return!!this._zooming},tm.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},tm.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},tm.prototype.wheel=function(t){if(this.isEnabled()){var e=t.deltaMode===a.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,i=U.now(),r=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==e&&e%4.000244140625==0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(r*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&(this._lastWheelEvent=t,this._delta-=e,this._active||this._start(t)),t.preventDefault()}},tm.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},tm.prototype._start=function(t){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var e=j.mousePos(this._el,t);this._around=Yl.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(e)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},tm.prototype.renderFrame=function(){var t=this;if(this._frameId&&(this._frameId=null,this.isActive())){var e=this._map.transform;if(0!==this._delta){var i="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,r=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==r&&(r=1/r);var n="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(n*r))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var o,a="number"==typeof this._targetZoom?this._targetZoom:e.zoom,s=this._startZoom,u=this._easing,l=!1;if("wheel"===this._type&&s&&u){var c=Math.min((U.now()-this._lastWheelEventTime)/200,1);o=ni(s,a,u(c)),c<1?this._frameId||(this._frameId=!0):l=!0}else o=a,l=!0;return this._active=!0,l&&(this._active=!1,this._finishTimeout=setTimeout((function(){t._zooming=!1,t._handler._triggerRenderFrame(),delete t._targetZoom,delete t._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!l,zoomDelta:o-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},tm.prototype._smoothOutEasing=function(t){var e=c;if(this._prevEase){var i=this._prevEase,r=(U.now()-i.start)/i.duration,n=i.easing(r+.01)-i.easing(r),o=.27/Math.sqrt(n*n+1e-4)*.01;e=l(o,Math.sqrt(.0729-o*o),.25,1)}return this._prevEase={start:U.now(),duration:t,easing:e},e},tm.prototype.reset=function(){this._active=!1};var em=function(t,e){this._clickZoom=t,this._tapZoom=e};em.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},em.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},em.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},em.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var im=function(){this.reset()};im.prototype.reset=function(){this._active=!1},im.prototype.dblclick=function(t,e){return t.preventDefault(),{cameraAnimation:function(i){i.easeTo({duration:300,zoom:i.getZoom()+(t.shiftKey?-1:1),around:i.unproject(e)},{originalEvent:t})}}},im.prototype.enable=function(){this._enabled=!0},im.prototype.disable=function(){this._enabled=!1,this.reset()},im.prototype.isEnabled=function(){return this._enabled},im.prototype.isActive=function(){return this._active};var rm=function(){this._tap=new Bd({numTouches:1,numTaps:1}),this.reset()};rm.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},rm.prototype.touchstart=function(t,e,i){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=e[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(t,e,i))},rm.prototype.touchmove=function(t,e,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;var r=e[0],n=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:n/128}}}else this._tap.touchmove(t,e,i)},rm.prototype.touchend=function(t,e,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(t,e,i)&&(this._tapTime=t.timeStamp)},rm.prototype.touchcancel=function(){this.reset()},rm.prototype.enable=function(){this._enabled=!0},rm.prototype.disable=function(){this._enabled=!1,this.reset()},rm.prototype.isEnabled=function(){return this._enabled},rm.prototype.isActive=function(){return this._active};var nm=function(t,e,i){this._el=t,this._mousePan=e,this._touchPan=i};nm.prototype.enable=function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},nm.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},nm.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},nm.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var om=function(t,e,i){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=i};om.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},om.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},om.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},om.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var am=function(t,e,i,r){this._el=t,this._touchZoom=e,this._touchRotate=i,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0};am.prototype.enable=function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},am.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},am.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},am.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},am.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},am.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var sm=function(t){return t.zoom||t.drag||t.pitch||t.rotate},um=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Ut);function lm(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var cm=function(t,e){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Sd(t),this._bearingSnap=e.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(e),b(["handleEvent","handleWindowEvent"],this);var i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[a.document,"mousemove",{capture:!0}],[a.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[a,"blur",void 0]];for(var r=0,n=this._listeners;r<n.length;r+=1){var o=n[r],s=o[0];j.addEventListener(s,o[1],s===a.document?this.handleWindowEvent:this.handleEvent,o[2])}};cm.prototype.destroy=function(){for(var t=0,e=this._listeners;t<e.length;t+=1){var i=e[t],r=i[0];j.removeEventListener(r,i[1],r===a.document?this.handleWindowEvent:this.handleEvent,i[2])}},cm.prototype._addDefaultHandlers=function(t){var e=this._map,i=e.getCanvasContainer();this._add("mapEvent",new Cd(e,t));var r=e.boxZoom=new Dd(e,t);this._add("boxZoom",r);var n=new Rd,o=new im;e.doubleClickZoom=new em(o,n),this._add("tapZoom",n),this._add("clickZoom",o);var a=new rm;this._add("tapDragZoom",a);var s=e.touchPitch=new Yd;this._add("touchPitch",s);var u=new Ud(t),l=new jd(t);e.dragRotate=new om(t,u,l),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",l,["mouseRotate"]);var c=new Vd(t),p=new Nd(t);e.dragPan=new nm(i,c,p),this._add("mousePan",c),this._add("touchPan",p,["touchZoom","touchRotate"]);var h=new Hd,f=new Xd;e.touchZoomRotate=new am(i,f,h,a),this._add("touchRotate",h,["touchPan","touchZoom"]),this._add("touchZoom",f,["touchPan","touchRotate"]);var d=e.scrollZoom=new tm(e,this);this._add("scrollZoom",d,["mousePan"]);var m=e.keyboard=new Qd;this._add("keyboard",m),this._add("blockableMapEvent",new Pd(e));for(var y=0,_=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];y<_.length;y+=1){var g=_[y];t.interactive&&t[g]&&e[g].enable(t[g])}},cm.prototype._add=function(t,e,i){this._handlers.push({handlerName:t,handler:e,allowed:i}),this._handlersById[t]=e},cm.prototype.stop=function(t){if(!this._updatingCamera){for(var e=0,i=this._handlers;e<i.length;e+=1)i[e].handler.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}},cm.prototype.isActive=function(){for(var t=0,e=this._handlers;t<e.length;t+=1)if(e[t].handler.isActive())return!0;return!1},cm.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},cm.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},cm.prototype.isMoving=function(){return Boolean(sm(this._eventsInProgress))||this.isZooming()},cm.prototype._blockedByActive=function(t,e,i){for(var r in t)if(r!==i&&(!e||e.indexOf(r)<0))return!0;return!1},cm.prototype.handleWindowEvent=function(t){this.handleEvent(t,t.type+"Window")},cm.prototype._getMapTouches=function(t){for(var e=[],i=0,r=t;i<r.length;i+=1){var n=r[i];this._el.contains(n.target)&&e.push(n)}return e},cm.prototype.handleEvent=function(t,e){if("blur"!==t.type){this._updatingCamera=!0;for(var i="renderFrame"===t.type?void 0:t,r={needsRenderFrame:!1},n={},o={},a=t.touches?this._getMapTouches(t.touches):void 0,s=a?j.touchPos(this._el,a):j.mousePos(this._el,t),u=0,l=this._handlers;u<l.length;u+=1){var c=l[u],p=c.handlerName,h=c.handler,f=c.allowed;if(h.isEnabled()){var d=void 0;this._blockedByActive(o,f,p)?h.reset():h[e||t.type]&&(d=h[e||t.type](t,s,a),this.mergeHandlerResult(r,n,d,p,i),d&&d.needsRenderFrame&&this._triggerRenderFrame()),(d||h.isActive())&&(o[p]=h)}}var m={};for(var y in this._previousActiveHandlers)o[y]||(m[y]=i);this._previousActiveHandlers=o,(Object.keys(m).length||lm(r))&&(this._changes.push([r,n,m]),this._triggerRenderFrame()),(Object.keys(o).length||lm(r))&&this._map._stop(!0),this._updatingCamera=!1;var _=r.cameraAnimation;_&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],_(this._map))}else this.stop(!0)},cm.prototype.mergeHandlerResult=function(t,e,i,r,n){if(i){m(t,i);var o={handlerName:r,originalEvent:i.originalEvent||n};void 0!==i.zoomDelta&&(e.zoom=o),void 0!==i.panDelta&&(e.drag=o),void 0!==i.pitchDelta&&(e.pitch=o),void 0!==i.bearingDelta&&(e.rotate=o)}},cm.prototype._applyChanges=function(){for(var t={},e={},i={},r=0,o=this._changes;r<o.length;r+=1){var a=o[r],s=a[0],u=a[1],l=a[2];s.panDelta&&(t.panDelta=(t.panDelta||new n(0,0))._add(s.panDelta)),s.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(t.around=s.around),void 0!==s.pinchAround&&(t.pinchAround=s.pinchAround),s.noInertia&&(t.noInertia=s.noInertia),m(e,u),m(i,l)}this._updateMapTransform(t,e,i),this._changes=[]},cm.prototype._updateMapTransform=function(t,e,i){var r=this._map,n=r.transform;if(!lm(t))return this._fireEvents(e,i,!0);var o=t.panDelta,a=t.zoomDelta,s=t.bearingDelta,u=t.pitchDelta,l=t.around,c=t.pinchAround;void 0!==c&&(l=c),r._stop(!0),l=l||r.transform.centerPoint;var p=n.pointLocation(o?l.sub(o):l);s&&(n.bearing+=s),u&&(n.pitch+=u),a&&(n.zoom+=a),n.setLocationAtPoint(p,l),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,i,!0)},cm.prototype._fireEvents=function(t,e,i){var r=this,n=sm(this._eventsInProgress),o=sm(t),a={};for(var s in t)this._eventsInProgress[s]||(a[s+"start"]=t[s].originalEvent),this._eventsInProgress[s]=t[s];for(var u in!n&&o&&this._fireEvent("movestart",o.originalEvent),a)this._fireEvent(u,a[u]);for(var l in o&&this._fireEvent("move",o.originalEvent),t)this._fireEvent(l,t[l].originalEvent);var c,p={};for(var h in this._eventsInProgress){var f=this._eventsInProgress[h],d=f.handlerName,m=f.originalEvent;this._handlersById[d].isActive()||(delete this._eventsInProgress[h],p[h+"end"]=c=e[d]||m)}for(var y in p)this._fireEvent(y,p[y]);var _=sm(this._eventsInProgress);if(i&&(n||o)&&!_){this._updatingCamera=!0;var g=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),v=function(t){return 0!==t&&-r._bearingSnap<t&&t<r._bearingSnap};g?(v(g.bearing||this._map.getBearing())&&(g.bearing=0),this._map.easeTo(g,{originalEvent:c})):(this._map.fire(new Ut("moveend",{originalEvent:c})),v(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},cm.prototype._fireEvent=function(t,e){this._map.fire(new Ut(t,e?{originalEvent:e}:{}))},cm.prototype._requestFrame=function(){var t=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(e){delete t._frameId,t.handleEvent(new um("renderFrame",{timeStamp:e})),t._applyChanges()}))},cm.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var pm=function(t){function e(e,i){t.call(this),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=i.bearingSnap,b(["_renderFrameCallback"],this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCenter=function(){return new Yl(this.transform.center.lng,this.transform.center.lat)},e.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},e.prototype.panBy=function(t,e,i){return t=n.convert(t).mult(-1),this.panTo(this.transform.center,m({offset:t},e),i)},e.prototype.panTo=function(t,e,i){return this.easeTo(m({center:t},e),i)},e.prototype.getZoom=function(){return this.transform.zoom},e.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},e.prototype.zoomTo=function(t,e,i){return this.easeTo(m({zoom:t},e),i)},e.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},e.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},e.prototype.getBearing=function(){return this.transform.bearing},e.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},e.prototype.getPadding=function(){return this.transform.padding},e.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},e.prototype.rotateTo=function(t,e,i){return this.easeTo(m({bearing:t},e),i)},e.prototype.resetNorth=function(t,e){return this.rotateTo(0,m({duration:1e3},t),e),this},e.prototype.resetNorthPitch=function(t,e){return this.easeTo(m({bearing:0,pitch:0,duration:1e3},t),e),this},e.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},e.prototype.getPitch=function(){return this.transform.pitch},e.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},e.prototype.cameraForBounds=function(t,e){return t=Kl.convert(t),this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),0,e)},e.prototype._cameraForBoxAndBearing=function(t,e,i,r){var o={top:0,bottom:0,right:0,left:0};if("number"==typeof(r=m({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){var a=r.padding;r.padding={top:a,bottom:a,right:a,left:a}}r.padding=m(o,r.padding);var s=this.transform,u=s.padding,l=s.project(Yl.convert(t)),c=s.project(Yl.convert(e)),p=l.rotate(-i*Math.PI/180),h=c.rotate(-i*Math.PI/180),f=new n(Math.max(p.x,h.x),Math.max(p.y,h.y)),d=new n(Math.min(p.x,h.x),Math.min(p.y,h.y)),y=f.sub(d),_=(s.width-(u.left+u.right+r.padding.left+r.padding.right))/y.x,g=(s.height-(u.top+u.bottom+r.padding.top+r.padding.bottom))/y.y;if(!(g<0||_<0)){var v=Math.min(s.scaleZoom(s.scale*Math.min(_,g)),r.maxZoom),x=n.convert(r.offset),b=new n(x.x+(r.padding.left-r.padding.right)/2,x.y+(r.padding.top-r.padding.bottom)/2).mult(s.scale/s.zoomScale(v));return{center:s.unproject(l.add(c).div(2).sub(b)),zoom:v,bearing:i}}A("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},e.prototype.fitBounds=function(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)},e.prototype.fitScreenCoordinates=function(t,e,i,r,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(n.convert(t)),this.transform.pointLocation(n.convert(e)),i,r),r,o)},e.prototype._fitInternal=function(t,e,i){return t?(delete(e=m(t,e)).padding,e.linear?this.easeTo(e,i):this.flyTo(e,i)):this},e.prototype.jumpTo=function(t,e){this.stop();var i=this.transform,r=!1,n=!1,o=!1;return"zoom"in t&&i.zoom!==+t.zoom&&(r=!0,i.zoom=+t.zoom),void 0!==t.center&&(i.center=Yl.convert(t.center)),"bearing"in t&&i.bearing!==+t.bearing&&(n=!0,i.bearing=+t.bearing),"pitch"in t&&i.pitch!==+t.pitch&&(o=!0,i.pitch=+t.pitch),null==t.padding||i.isPaddingEqual(t.padding)||(i.padding=t.padding),this.fire(new Ut("movestart",e)).fire(new Ut("move",e)),r&&this.fire(new Ut("zoomstart",e)).fire(new Ut("zoom",e)).fire(new Ut("zoomend",e)),n&&this.fire(new Ut("rotatestart",e)).fire(new Ut("rotate",e)).fire(new Ut("rotateend",e)),o&&this.fire(new Ut("pitchstart",e)).fire(new Ut("pitch",e)).fire(new Ut("pitchend",e)),this.fire(new Ut("moveend",e))},e.prototype.easeTo=function(t,e){var i=this;this._stop(!1,t.easeId),(!1===(t=m({offset:[0,0],duration:500,easing:c},t)).animate||!t.essential&&U.prefersReducedMotion)&&(t.duration=0);var r=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u=this.getPadding(),l="zoom"in t?+t.zoom:o,p="bearing"in t?this._normalizeBearing(t.bearing,a):a,h="pitch"in t?+t.pitch:s,f="padding"in t?t.padding:r.padding,d=n.convert(t.offset),y=r.centerPoint.add(d),_=r.pointLocation(y),g=Yl.convert(t.center||_);this._normalizeCenter(g);var v,x,b=r.project(_),w=r.project(g).sub(b),I=r.zoomScale(l-o);t.around&&(v=Yl.convert(t.around),x=r.locationPoint(v));var S={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==o,this._rotating=this._rotating||a!==p,this._pitching=this._pitching||h!==s,this._padding=!r.isPaddingEqual(f),this._easeId=t.easeId,this._prepareEase(e,t.noMoveStart,S),this._ease((function(t){if(i._zooming&&(r.zoom=ni(o,l,t)),i._rotating&&(r.bearing=ni(a,p,t)),i._pitching&&(r.pitch=ni(s,h,t)),i._padding&&(r.interpolatePadding(u,f,t),y=r.centerPoint.add(d)),v)r.setLocationAtPoint(v,x);else{var n=r.zoomScale(r.zoom-o),c=l>o?Math.min(2,I):Math.max(.5,I),m=Math.pow(c,1-t),_=r.unproject(b.add(w.mult(t*m)).mult(n));r.setLocationAtPoint(r.renderWorldCopies?_.wrap():_,y)}i._fireMoveEvents(e)}),(function(t){i._afterEase(e,t)}),t),this},e.prototype._prepareEase=function(t,e,i){void 0===i&&(i={}),this._moving=!0,e||i.moving||this.fire(new Ut("movestart",t)),this._zooming&&!i.zooming&&this.fire(new Ut("zoomstart",t)),this._rotating&&!i.rotating&&this.fire(new Ut("rotatestart",t)),this._pitching&&!i.pitching&&this.fire(new Ut("pitchstart",t))},e.prototype._fireMoveEvents=function(t){this.fire(new Ut("move",t)),this._zooming&&this.fire(new Ut("zoom",t)),this._rotating&&this.fire(new Ut("rotate",t)),this._pitching&&this.fire(new Ut("pitch",t))},e.prototype._afterEase=function(t,e){if(!this._easeId||!e||this._easeId!==e){delete this._easeId;var i=this._zooming,r=this._rotating,n=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new Ut("zoomend",t)),r&&this.fire(new Ut("rotateend",t)),n&&this.fire(new Ut("pitchend",t)),this.fire(new Ut("moveend",t))}},e.prototype.flyTo=function(t,e){var i=this;if(!t.essential&&U.prefersReducedMotion){var r=y(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,e)}this.stop(),t=m({offset:[0,0],speed:1.2,curve:1.42,easing:c},t);var o=this.transform,a=this.getZoom(),s=this.getBearing(),u=this.getPitch(),l=this.getPadding(),h="zoom"in t?p(+t.zoom,o.minZoom,o.maxZoom):a,f="bearing"in t?this._normalizeBearing(t.bearing,s):s,d="pitch"in t?+t.pitch:u,_="padding"in t?t.padding:o.padding,g=o.zoomScale(h-a),v=n.convert(t.offset),x=o.centerPoint.add(v),b=o.pointLocation(x),w=Yl.convert(t.center||b);this._normalizeCenter(w);var I=o.project(b),S=o.project(w).sub(I),T=t.curve,z=Math.max(o.width,o.height),A=z/g,E=S.mag();if("minZoom"in t){var k=p(Math.min(t.minZoom,a,h),o.minZoom,o.maxZoom),C=z/o.zoomScale(k-a);T=Math.sqrt(C/E*2)}var P=T*T;function D(t){var e=(A*A-z*z+(t?-1:1)*P*P*E*E)/(2*(t?A:z)*P*E);return Math.log(Math.sqrt(e*e+1)-e)}function M(t){return(Math.exp(t)-Math.exp(-t))/2}function L(t){return(Math.exp(t)+Math.exp(-t))/2}var B=D(0),R=function(t){return L(B)/L(B+T*t)},F=function(t){return z*((L(B)*(M(e=B+T*t)/L(e))-M(B))/P)/E;var e},O=(D(1)-B)/T;if(Math.abs(E)<1e-6||!isFinite(O)){if(Math.abs(z-A)<1e-6)return this.easeTo(t,e);var V=A<z?-1:1;O=Math.abs(Math.log(A/z))/T,F=function(){return 0},R=function(t){return Math.exp(V*T*t)}}return t.duration="duration"in t?+t.duration:1e3*O/("screenSpeed"in t?+t.screenSpeed/T:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=s!==f,this._pitching=d!==u,this._padding=!o.isPaddingEqual(_),this._prepareEase(e,!1),this._ease((function(t){var r=t*O,n=1/R(r);o.zoom=1===t?h:a+o.scaleZoom(n),i._rotating&&(o.bearing=ni(s,f,t)),i._pitching&&(o.pitch=ni(u,d,t)),i._padding&&(o.interpolatePadding(l,_,t),x=o.centerPoint.add(v));var c=1===t?w:o.unproject(I.add(S.mult(F(r))).mult(n));o.setLocationAtPoint(o.renderWorldCopies?c.wrap():c,x),i._fireMoveEvents(e)}),(function(){return i._afterEase(e)}),t),this},e.prototype.isEasing=function(){return!!this._easeFrameId},e.prototype.stop=function(){return this._stop()},e.prototype._stop=function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var i=this._onEaseEnd;delete this._onEaseEnd,i.call(this,e)}if(!t){var r=this.handlers;r&&r.stop(!1)}return this},e.prototype._ease=function(t,e,i){!1===i.animate||0===i.duration?(t(1),e()):(this._easeStart=U.now(),this._easeOptions=i,this._onEaseFrame=t,this._onEaseEnd=e,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},e.prototype._renderFrameCallback=function(){var t=Math.min((U.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},e.prototype._normalizeBearing=function(t,e){t=h(t,-180,180);var i=Math.abs(t-e);return Math.abs(t-360-e)<i&&(t-=360),Math.abs(t+360-e)<i&&(t+=360),t},e.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0}},e}(Nt),hm=function(t){void 0===t&&(t={}),this.options=t,b(["_updateEditLink","_updateData","_updateCompact"],this)};hm.prototype.getDefaultPosition=function(){return"bottom-right"},hm.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=j.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},hm.prototype.onRemove=function(){j.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},hm.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var e=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||Q.ACCESS_TOKEN}];if(t){var i=e.reduce((function(t,i,r){return i.value&&(t+=i.key+"="+i.value+(r<e.length-1?"&":"")),t}),"?");t.href=Q.FEEDBACK_URL+"/"+i+(this._map._hash?this._map._hash.getHashString(!0):""),t.rel="noopener nofollow"}},hm.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},hm.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var i=this._map.style.sourceCaches;for(var r in i){var n=i[r];if(n.used){var o=n.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort((function(t,e){return t.length-e.length}));var a=(t=t.filter((function(e,i){for(var r=i+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0}))).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},hm.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var fm=function(){b(["_updateLogo"],this),b(["_updateCompact"],this)};fm.prototype.onAdd=function(t){this._map=t,this._container=j.create("div","mapboxgl-ctrl");var e=j.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},fm.prototype.onRemove=function(){j.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},fm.prototype.getDefaultPosition=function(){return"bottom-left"},fm.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},fm.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},fm.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var dm=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};dm.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},dm.prototype.remove=function(t){for(var e=this._currentlyRunning,i=0,r=e?this._queue.concat(e):this._queue;i<r.length;i+=1){var n=r[i];if(n.id===t)return void(n.cancelled=!0)}},dm.prototype.run=function(t){void 0===t&&(t=0);var e=this._currentlyRunning=this._queue;this._queue=[];for(var i=0,r=e;i<r.length;i+=1){var n=r[i];if(!n.cancelled&&(n.callback(t),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},dm.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var mm={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ym=a.HTMLImageElement,_m=a.HTMLElement,gm=a.ImageBitmap,vm={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},xm=function(t){function i(e){var i=this;if(null!=(e=m({},vm,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var r=new yd(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies);if(t.call(this,r,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new dm,this._controls=[],this._mapId=g(),this._locale=m({},mm,e.locale),this._requestManager=new nt(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=a.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof _m))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),b(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return i._update(!1)})),this.on("moveend",(function(){return i._update(!1)})),this.on("zoom",(function(){return i._update(!0)})),void 0!==a&&(a.addEventListener("online",this._onWindowOnline,!1),a.addEventListener("resize",this._onWindowResize,!1),a.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new cm(this,e),this._hash=e.hash&&new gd("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,m({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new hm({customAttribution:e.customAttribution})),this.addControl(new fm,e.logoPosition),this.on("style.load",(function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)})),this.on("data",(function(t){i._update("style"===t.dataType),i.fire(new Ut(t.dataType+"data",t))})),this.on("dataloading",(function(t){i.fire(new Ut(t.dataType+"dataloading",t))}))}t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i;var r={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return i.prototype._getMapId=function(){return this._mapId},i.prototype.addControl=function(t,e){if(void 0===e&&t.getDefaultPosition&&(e=t.getDefaultPosition()),void 0===e&&(e="top-right"),!t||!t.onAdd)return this.fire(new jt(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var i=t.onAdd(this);this._controls.push(t);var r=this._controlPositions[e];return-1!==e.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this},i.prototype.removeControl=function(t){if(!t||!t.onRemove)return this.fire(new jt(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var e=this._controls.indexOf(t);return e>-1&&this._controls.splice(e,1),t.onRemove(this),this},i.prototype.resize=function(t){var e=this._containerDimensions(),i=e[0],r=e[1];this._resizeCanvas(i,r),this.transform.resize(i,r),this.painter.resize(i,r);var n=!this._moving;return n&&(this.stop(),this.fire(new Ut("movestart",t)).fire(new Ut("move",t))),this.fire(new Ut("resize",t)),n&&this.fire(new Ut("moveend",t)),this},i.prototype.getBounds=function(){return this.transform.getBounds()},i.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},i.prototype.setMaxBounds=function(t){return this.transform.setMaxBounds(Kl.convert(t)),this._update()},i.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},i.prototype.getMinZoom=function(){return this.transform.minZoom},i.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},i.prototype.getMaxZoom=function(){return this.transform.maxZoom},i.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},i.prototype.getMinPitch=function(){return this.transform.minPitch},i.prototype.setMaxPitch=function(t){if((t=null==t?60:t)>60)throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},i.prototype.getMaxPitch=function(){return this.transform.maxPitch},i.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},i.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},i.prototype.project=function(t){return this.transform.locationPoint(Yl.convert(t))},i.prototype.unproject=function(t){return this.transform.pointLocation(n.convert(t))},i.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},i.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},i.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},i.prototype._createDelegatedListener=function(t,e,i){var r,n=this;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:i,delegates:{mousemove:function(r){var a=n.getLayer(e)?n.queryRenderedFeatures(r.point,{layers:[e]}):[];a.length?o||(o=!0,i.call(n,new Ad(t,n,r.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:i,delegates:{mousemove:function(r){(n.getLayer(e)?n.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,i.call(n,new Ad(t,n,r.originalEvent)))},mouseout:function(e){a&&(a=!1,i.call(n,new Ad(t,n,e.originalEvent)))}}}}return{layer:e,listener:i,delegates:(r={},r[t]=function(t){var r=n.getLayer(e)?n.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,i.call(n,t),delete t.features)},r)}},i.prototype.on=function(e,i,r){if(void 0===r)return t.prototype.on.call(this,e,i);var n=this._createDelegatedListener(e,i,r);for(var o in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(n),n.delegates)this.on(o,n.delegates[o]);return this},i.prototype.once=function(e,i,r){if(void 0===r)return t.prototype.once.call(this,e,i);var n=this._createDelegatedListener(e,i,r);for(var o in n.delegates)this.once(o,n.delegates[o]);return this},i.prototype.off=function(e,i,r){var n=this;return void 0===r?t.prototype.off.call(this,e,i):(this._delegatedListeners&&this._delegatedListeners[e]&&function(t){for(var o=t[e],a=0;a<o.length;a++){var s=o[a];if(s.layer===i&&s.listener===r){for(var u in s.delegates)n.off(u,s.delegates[u]);return o.splice(a,1),n}}}(this._delegatedListeners),this)},i.prototype.queryRenderedFeatures=function(t,e){if(!this.style)return[];var i;if(void 0!==e||void 0===t||t instanceof n||Array.isArray(t)||(e=t,t=void 0),e=e||{},(t=t||[[0,0],[this.transform.width,this.transform.height]])instanceof n||"number"==typeof t[0])i=[n.convert(t)];else{var r=n.convert(t[0]),o=n.convert(t[1]);i=[r,new n(o.x,r.y),o,new n(r.x,o.y),r]}return this.style.queryRenderedFeatures(i,e,this.transform)},i.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},i.prototype.setStyle=function(t,e){return!1!==(e=m({},{localIdeographFontFamily:this._localIdeographFontFamily},e)).diff&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(t,e))},i.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},i.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Rh(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},i.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Rh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},i.prototype._diffStyle=function(t,e){var i=this;if("string"==typeof t){var r=this._requestManager.normalizeStyleURL(t),n=this._requestManager.transformRequest(r,Et.Style);Lt(n,(function(t,r){t?i.fire(new jt(t)):r&&i._updateDiff(r,e)}))}else"object"==typeof t&&this._updateDiff(t,e)},i.prototype._updateDiff=function(t,e){try{this.style.setState(t)&&this._update(!0)}catch(i){A("Unable to perform style diff: "+(i.message||i.error||i)+".  Rebuilding the style from scratch."),this._updateStyle(t,e)}},i.prototype.getStyle=function(){if(this.style)return this.style.serialize()},i.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():A("There is no style added to the map.")},i.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},i.prototype.isSourceLoaded=function(t){var e=this.style&&this.style.sourceCaches[t];if(void 0!==e)return e.loaded();this.fire(new jt(new Error("There is no source with ID '"+t+"'")))},i.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var i=t[e]._tiles;for(var r in i){var n=i[r];if("loaded"!==n.state&&"errored"!==n.state)return!1}}return!0},i.prototype.addSourceType=function(t,e,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,i)},i.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},i.prototype.getSource=function(t){return this.style.getSource(t)},i.prototype.addImage=function(t,e,i){void 0===i&&(i={});var r=i.pixelRatio;void 0===r&&(r=1);var n=i.sdf;void 0===n&&(n=!1);var o=i.stretchX,a=i.stretchY,s=i.content;if(this._lazyInitEmptyStyle(),e instanceof ym||gm&&e instanceof gm){var u=U.getImageData(e);this.style.addImage(t,{data:new Ha({width:u.width,height:u.height},u.data),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:n,version:0})}else{if(void 0===e.width||void 0===e.height)return this.fire(new jt(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var l=e;this.style.addImage(t,{data:new Ha({width:e.width,height:e.height},new Uint8Array(e.data)),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:n,version:0,userImage:l}),l.onAdd&&l.onAdd(this,t)}},i.prototype.updateImage=function(t,e){var i=this.style.getImage(t);if(!i)return this.fire(new jt(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var r=e instanceof ym||gm&&e instanceof gm?U.getImageData(e):e,n=r.width,o=r.height,a=r.data;return void 0===n||void 0===o?this.fire(new jt(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):n!==i.data.width||o!==i.data.height?this.fire(new jt(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(i.data.replace(a,!(e instanceof ym||gm&&e instanceof gm)),void this.style.updateImage(t,i))},i.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire(new jt(new Error("Missing required image id"))),!1)},i.prototype.removeImage=function(t){this.style.removeImage(t)},i.prototype.loadImage=function(t,e){Ft(this._requestManager.transformRequest(t,Et.Image),e)},i.prototype.listImages=function(){return this.style.listImages()},i.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},i.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},i.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},i.prototype.getLayer=function(t){return this.style.getLayer(t)},i.prototype.setLayerZoomRange=function(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)},i.prototype.setFilter=function(t,e,i){return void 0===i&&(i={}),this.style.setFilter(t,e,i),this._update(!0)},i.prototype.getFilter=function(t){return this.style.getFilter(t)},i.prototype.setPaintProperty=function(t,e,i,r){return void 0===r&&(r={}),this.style.setPaintProperty(t,e,i,r),this._update(!0)},i.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},i.prototype.setLayoutProperty=function(t,e,i,r){return void 0===r&&(r={}),this.style.setLayoutProperty(t,e,i,r),this._update(!0)},i.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},i.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},i.prototype.getLight=function(){return this.style.getLight()},i.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},i.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},i.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},i.prototype.getContainer=function(){return this._container},i.prototype.getCanvasContainer=function(){return this._canvasContainer},i.prototype.getCanvas=function(){return this._canvas},i.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},i.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==a.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&A("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},i.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=j.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=j.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=j.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var i=this._containerDimensions();this._resizeCanvas(i[0],i[1]);var r=this._controlContainer=j.create("div","mapboxgl-control-container",t),n=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){n[t]=j.create("div","mapboxgl-ctrl-"+t,r)}))},i.prototype._resizeCanvas=function(t,e){var i=U.devicePixelRatio||1;this._canvas.width=i*t,this._canvas.height=i*e,this._canvas.style.width=t+"px",this._canvas.style.height=e+"px"},i.prototype._setupPainter=function(){var t=m({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);i?(this.painter=new hd(i,this.transform),$.testSupport(i)):this.fire(new jt(new Error("Failed to initialize WebGL")))},i.prototype._contextLost=function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new Ut("webglcontextlost",{originalEvent:t}))},i.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new Ut("webglcontextrestored",{originalEvent:t}))},i.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},i.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},i.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},i.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},i.prototype._render=function(t){var e,i=this,r=0,n=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(e=n.createQueryEXT(),n.beginQueryEXT(n.TIME_ELAPSED_EXT,e),r=U.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),!this._removed){var o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var a=this.transform.zoom,s=U.now();this.style.zoomHistory.update(a,s);var u=new En(a,{now:s,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),l=u.crossFadingFactor();1===l&&l===this._crossFadingFactor||(o=!0,this._crossFadingFactor=l),this.style.update(u)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new Ut("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new Ut("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var c=U.now()-r;n.endQueryEXT(n.TIME_ELAPSED_EXT,e),setTimeout((function(){var t=n.getQueryObjectEXT(e,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(e),i.fire(new Ut("gpu-timing-frame",{cpuTime:c,gpuTime:t}))}),50)}if(this.listens("gpu-timing-layer")){var p=this.painter.collectGpuTimers();setTimeout((function(){var t=i.painter.queryGpuTimers(p);i.fire(new Ut("gpu-timing-layer",{layerTimes:t}))}),50)}var h=this._sourcesDirty||this._styleDirty||this._placementDirty;return h||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new Ut("idle")),!this._loaded||this._fullyLoaded||h||(this._fullyLoaded=!0),this}},i.prototype.remove=function(){this._hash&&this._hash.remove();for(var t=0,e=this._controls;t<e.length;t+=1)e[t].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==a&&(a.removeEventListener("resize",this._onWindowResize,!1),a.removeEventListener("orientationchange",this._onWindowResize,!1),a.removeEventListener("online",this._onWindowOnline,!1));var i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),bm(this._canvasContainer),bm(this._controlContainer),bm(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new Ut("remove"))},i.prototype.triggerRepaint=function(){var t=this;this.style&&!this._frame&&(this._frame=U.frame((function(e){t._frame=null,t._render(e)})))},i.prototype._onWindowOnline=function(){this._update()},i.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},r.showTileBoundaries.get=function(){return!!this._showTileBoundaries},r.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},r.showPadding.get=function(){return!!this._showPadding},r.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},r.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},r.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},r.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},r.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},r.repaint.get=function(){return!!this._repaint},r.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},r.vertices.get=function(){return!!this._vertices},r.vertices.set=function(t){this._vertices=t,this._update()},i.prototype._setCacheLimits=function(t,e){!function(t,e){xt=t,bt=e}(t,e)},r.version.get=function(){return"1.12.0"},Object.defineProperties(i.prototype,r),i}(pm);function bm(t){t.parentNode&&t.parentNode.removeChild(t)}var wm={showCompass:!0,showZoom:!0,visualizePitch:!1},Im=function(t){var e=this;this.options=m({},wm,t),this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(b(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(t){return e._map.zoomIn({},{originalEvent:t})})),j.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(t){return e._map.zoomOut({},{originalEvent:t})})),j.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(b(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(t){e.options.visualizePitch?e._map.resetNorthPitch({},{originalEvent:t}):e._map.resetNorth({},{originalEvent:t})})),this._compassIcon=j.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Im.prototype._updateZoomButtons=function(){var t=this._map.getZoom();this._zoomInButton.disabled=t===this._map.getMaxZoom(),this._zoomOutButton.disabled=t===this._map.getMinZoom()},Im.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},Im.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Sm(this._map,this._compass,this.options.visualizePitch)),this._container},Im.prototype.onRemove=function(){j.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Im.prototype._createButton=function(t,e){var i=j.create("button",t,this._container);return i.type="button",i.addEventListener("click",e),i},Im.prototype._setButtonTitle=function(t,e){var i=this._map._getUIString("NavigationControl."+e);t.title=i,t.setAttribute("aria-label",i)};var Sm=function(t,e,i){void 0===i&&(i=!1),this._clickTolerance=10,this.element=e,this.mouseRotate=new Ud({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,i&&(this.mousePitch=new jd({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),b(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),j.addEventListener(e,"mousedown",this.mousedown),j.addEventListener(e,"touchstart",this.touchstart,{passive:!1}),j.addEventListener(e,"touchmove",this.touchmove),j.addEventListener(e,"touchend",this.touchend),j.addEventListener(e,"touchcancel",this.reset)};function Tm(t,e,i){if(t=new Yl(t.lng,t.lat),e){var r=new Yl(t.lng-360,t.lat),n=new Yl(t.lng+360,t.lat),o=i.locationPoint(t).distSqr(e);i.locationPoint(r).distSqr(e)<o?t=r:i.locationPoint(n).distSqr(e)<o&&(t=n)}for(;Math.abs(t.lng-i.center.lng)>180;){var a=i.locationPoint(t);if(a.x>=0&&a.y>=0&&a.x<=i.width&&a.y<=i.height)break;t.lng>i.center.lng?t.lng-=360:t.lng+=360}return t}Sm.prototype.down=function(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),j.disableDrag()},Sm.prototype.move=function(t,e){var i=this.map,r=this.mouseRotate.mousemoveWindow(t,e);if(r&&r.bearingDelta&&i.setBearing(i.getBearing()+r.bearingDelta),this.mousePitch){var n=this.mousePitch.mousemoveWindow(t,e);n&&n.pitchDelta&&i.setPitch(i.getPitch()+n.pitchDelta)}},Sm.prototype.off=function(){var t=this.element;j.removeEventListener(t,"mousedown",this.mousedown),j.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),j.removeEventListener(t,"touchmove",this.touchmove),j.removeEventListener(t,"touchend",this.touchend),j.removeEventListener(t,"touchcancel",this.reset),this.offTemp()},Sm.prototype.offTemp=function(){j.enableDrag(),j.removeEventListener(a,"mousemove",this.mousemove),j.removeEventListener(a,"mouseup",this.mouseup)},Sm.prototype.mousedown=function(t){this.down(m({},t,{ctrlKey:!0,preventDefault:function(){return t.preventDefault()}}),j.mousePos(this.element,t)),j.addEventListener(a,"mousemove",this.mousemove),j.addEventListener(a,"mouseup",this.mouseup)},Sm.prototype.mousemove=function(t){this.move(t,j.mousePos(this.element,t))},Sm.prototype.mouseup=function(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()},Sm.prototype.touchstart=function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=j.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))},Sm.prototype.touchmove=function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=j.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))},Sm.prototype.touchend=function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Sm.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var zm={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Am(t,e,i){var r=t.classList;for(var n in zm)r.remove("mapboxgl-"+i+"-anchor-"+n);r.add("mapboxgl-"+i+"-anchor-"+e)}var Em,km=function(t){function e(e,i){var r=this;if(t.call(this),(e instanceof a.HTMLElement||i)&&(e=m({element:e},i)),b(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,e&&e.element)this._element=e.element,this._offset=n.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=j.create("div"),this._element.setAttribute("aria-label","Map marker");var o=j.createNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height","41px"),o.setAttributeNS(null,"width","27px"),o.setAttributeNS(null,"viewBox","0 0 27 41");var s=j.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none"),s.setAttributeNS(null,"stroke-width","1"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"fill-rule","evenodd");var u=j.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill-rule","nonzero");var l=j.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");for(var c=0,p=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];c<p.length;c+=1){var h=p[c],f=j.createNS("http://www.w3.org/2000/svg","ellipse");f.setAttributeNS(null,"opacity","0.04"),f.setAttributeNS(null,"cx","10.5"),f.setAttributeNS(null,"cy","5.80029008"),f.setAttributeNS(null,"rx",h.rx),f.setAttributeNS(null,"ry",h.ry),l.appendChild(f)}var d=j.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"fill",this._color);var y=j.createNS("http://www.w3.org/2000/svg","path");y.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),d.appendChild(y);var _=j.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"opacity","0.25"),_.setAttributeNS(null,"fill","#000000");var g=j.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),_.appendChild(g);var v=j.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(6.0, 7.0)"),v.setAttributeNS(null,"fill","#FFFFFF");var x=j.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"transform","translate(8.0, 8.0)");var w=j.createNS("http://www.w3.org/2000/svg","circle");w.setAttributeNS(null,"fill","#000000"),w.setAttributeNS(null,"opacity","0.25"),w.setAttributeNS(null,"cx","5.5"),w.setAttributeNS(null,"cy","5.5"),w.setAttributeNS(null,"r","5.4999962");var I=j.createNS("http://www.w3.org/2000/svg","circle");I.setAttributeNS(null,"fill","#FFFFFF"),I.setAttributeNS(null,"cx","5.5"),I.setAttributeNS(null,"cy","5.5"),I.setAttributeNS(null,"r","5.4999962"),x.appendChild(w),x.appendChild(I),u.appendChild(l),u.appendChild(d),u.appendChild(_),u.appendChild(v),u.appendChild(x),o.appendChild(u),o.setAttributeNS(null,"height",41*this._scale+"px"),o.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(o),this._offset=n.convert(e&&e.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(t){t.preventDefault()})),this._element.addEventListener("mousedown",(function(t){t.preventDefault()})),this._element.addEventListener("focus",(function(){var t=r._map.getContainer();t.scrollTop=0,t.scrollLeft=0})),Am(this._element,this._anchor,"marker"),this._popup=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},e.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),j.remove(this._element),this._popup&&this._popup.remove(),this},e.prototype.getLngLat=function(){return this._lngLat},e.prototype.setLngLat=function(t){return this._lngLat=Yl.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},e.prototype.getElement=function(){return this._element},e.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},e.prototype._onKeyPress=function(t){var e=t.code,i=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==i&&13!==i||this.togglePopup()},e.prototype._onMapClick=function(t){var e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()},e.prototype.getPopup=function(){return this._popup},e.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},e.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Tm(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var i="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?i="rotateX(0deg)":"map"===this._pitchAlignment&&(i="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),j.setTransform(this._element,zm[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+i+" "+e)}},e.prototype.getOffset=function(){return this._offset},e.prototype.setOffset=function(t){return this._offset=n.convert(t),this._update(),this},e.prototype._onMove=function(t){this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new Ut("dragstart"))),this.fire(new Ut("drag"))},e.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new Ut("dragend")),this._state="inactive"},e.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},e.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},e.prototype.isDraggable=function(){return this._draggable},e.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},e.prototype.getRotation=function(){return this._rotation},e.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},e.prototype.getRotationAlignment=function(){return this._rotationAlignment},e.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},e.prototype.getPitchAlignment=function(){return this._pitchAlignment},e}(Nt),Cm={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Pm=0,Dm=!1,Mm=function(t){function e(e){t.call(this),this.options=m({},Cm,e),b(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.onAdd=function(t){var e;return this._map=t,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),e=this._setupUI,void 0!==Em?e(Em):void 0!==a.navigator.permissions?a.navigator.permissions.query({name:"geolocation"}).then((function(t){e(Em="denied"!==t.state)})):e(Em=!!a.navigator.geolocation),this._container},e.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(a.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),j.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Pm=0,Dm=!1},e.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),i=t.coords;return e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())},e.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},e.prototype._onSuccess=function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new Ut("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new Ut("geolocate",t)),this._finish()}},e.prototype._updateCamera=function(t){var e=new Yl(t.coords.longitude,t.coords.latitude),i=t.coords.accuracy,r=m({bearing:this._map.getBearing()},this.options.fitBoundsOptions);this._map.fitBounds(e.toBounds(i),r,{geolocateSource:!0})},e.prototype._updateMarker=function(t){if(t){var e=new Yl(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(e).addTo(this._map),this._userLocationDotMarker.setLngLat(e).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},e.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),i=this._map.unproject([1,t]),r=e.distanceTo(i),n=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=n+"px",this._circleElement.style.height=n+"px"},e.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},e.prototype._onError=function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&Dm)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new Ut("error",t)),this._finish()}},e.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},e.prototype._setupUI=function(t){var e=this;if(this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=j.create("button","mapboxgl-ctrl-geolocate",this._container),j.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===t){A("Geolocation support is not available so the GeolocateControl will be disabled.");var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{var r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=j.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new km(this._dotElement),this._circleElement=j.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new km({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(t){t.geolocateSource||"ACTIVE_LOCK"!==e._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(e._watchState="BACKGROUND",e._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),e._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),e.fire(new Ut("trackuserlocationend")))}))},e.prototype.trigger=function(){if(!this._setup)return A("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new Ut("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Pm--,Dm=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new Ut("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new Ut("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Pm>1?(t={maximumAge:6e5,timeout:0},Dm=!0):(t=this.options.positionOptions,Dm=!1),this._geolocationWatchID=a.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else a.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},e.prototype._clearWatch=function(){a.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},e}(Nt),Lm={maxWidth:100,unit:"metric"},Bm=function(t){this.options=m({},Lm,t),b(["_onMove","setUnit"],this)};function Rm(t,e,i){var r=i&&i.maxWidth||100,n=t._container.clientHeight/2,o=t.unproject([0,n]),a=t.unproject([r,n]),s=o.distanceTo(a);if(i&&"imperial"===i.unit){var u=3.2808*s;u>5280?Fm(e,r,u/5280,t._getUIString("ScaleControl.Miles")):Fm(e,r,u,t._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?Fm(e,r,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Fm(e,r,s/1e3,t._getUIString("ScaleControl.Kilometers")):Fm(e,r,s,t._getUIString("ScaleControl.Meters"))}function Fm(t,e,i,r){var n,o,a,s=(n=i,(o=Math.pow(10,(""+Math.floor(n)).length-1))*(a=(a=n/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(a)));t.style.width=e*(s/i)+"px",t.innerHTML=s+"&nbsp;"+r}Bm.prototype.getDefaultPosition=function(){return"bottom-left"},Bm.prototype._onMove=function(){Rm(this._map,this._container,this.options)},Bm.prototype.onAdd=function(t){return this._map=t,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Bm.prototype.onRemove=function(){j.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Bm.prototype.setUnit=function(t){this.options.unit=t,Rm(this._map,this._container,this.options)};var Om=function(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof a.HTMLElement?this._container=t.container:A("Full screen control 'container' must be a DOM element.")),b(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.document&&(this._fullscreenchange="MSFullscreenChange")};Om.prototype.onAdd=function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",A("This device does not support fullscreen mode.")),this._controlContainer},Om.prototype.onRemove=function(){j.remove(this._controlContainer),this._map=null,a.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Om.prototype._checkFullscreenSupport=function(){return!!(a.document.fullscreenEnabled||a.document.mozFullScreenEnabled||a.document.msFullscreenEnabled||a.document.webkitFullscreenEnabled)},Om.prototype._setupUI=function(){var t=this._fullscreenButton=j.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);j.create("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden",!0),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.document.addEventListener(this._fullscreenchange,this._changeIcon)},Om.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},Om.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Om.prototype._isFullscreen=function(){return this._fullscreen},Om.prototype._changeIcon=function(){(a.document.fullscreenElement||a.document.mozFullScreenElement||a.document.webkitFullscreenElement||a.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Om.prototype._onClickFullscreen=function(){this._isFullscreen()?a.document.exitFullscreen?a.document.exitFullscreen():a.document.mozCancelFullScreen?a.document.mozCancelFullScreen():a.document.msExitFullscreen?a.document.msExitFullscreen():a.document.webkitCancelFullScreen&&a.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Vm={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Um=function(t){function e(e){t.call(this),this.options=m(Object.create(Vm),e),b(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.addTo=function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new Ut("open")),this},e.prototype.isOpen=function(){return!!this._map},e.prototype.remove=function(){return this._content&&j.remove(this._content),this._container&&(j.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new Ut("close")),this},e.prototype.getLngLat=function(){return this._lngLat},e.prototype.setLngLat=function(t){return this._lngLat=Yl.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},e.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},e.prototype.getElement=function(){return this._container},e.prototype.setText=function(t){return this.setDOMContent(a.document.createTextNode(t))},e.prototype.setHTML=function(t){var e,i=a.document.createDocumentFragment(),r=a.document.createElement("body");for(r.innerHTML=t;e=r.firstChild;)i.appendChild(e);return this.setDOMContent(i)},e.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},e.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},e.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},e.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},e.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},e.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},e.prototype._createContent=function(){this._content&&j.remove(this._content),this._content=j.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=j.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},e.prototype._onMouseUp=function(t){this._update(t.point)},e.prototype._onMouseMove=function(t){this._update(t.point)},e.prototype._onDrag=function(t){this._update(t.point)},e.prototype._update=function(t){var e=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=j.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=j.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(t){return e._container.classList.add(t)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Tm(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||t)){var i=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat),r=this.options.anchor,o=function t(e){if(e){if("number"==typeof e){var i=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new n(0,0),top:new n(0,e),"top-left":new n(i,i),"top-right":new n(-i,i),bottom:new n(0,-e),"bottom-left":new n(i,-i),"bottom-right":new n(-i,-i),left:new n(e,0),right:new n(-e,0)}}if(e instanceof n||Array.isArray(e)){var r=n.convert(e);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:n.convert(e.center||[0,0]),top:n.convert(e.top||[0,0]),"top-left":n.convert(e["top-left"]||[0,0]),"top-right":n.convert(e["top-right"]||[0,0]),bottom:n.convert(e.bottom||[0,0]),"bottom-left":n.convert(e["bottom-left"]||[0,0]),"bottom-right":n.convert(e["bottom-right"]||[0,0]),left:n.convert(e.left||[0,0]),right:n.convert(e.right||[0,0])}}return t(new n(0,0))}(this.options.offset);if(!r){var a,s=this._container.offsetWidth,u=this._container.offsetHeight;a=i.y+o.bottom.y<u?["top"]:i.y>this._map.transform.height-u?["bottom"]:[],i.x<s/2?a.push("left"):i.x>this._map.transform.width-s/2&&a.push("right"),r=0===a.length?"bottom":a.join("-")}var l=i.add(o[r]).round();j.setTransform(this._container,zm[r]+" translate("+l.x+"px,"+l.y+"px)"),Am(this._container,r,"popup")}},e.prototype._onClose=function(){this.remove()},e}(Nt),jm={version:"1.12.0",supported:e,setRTLTextPlugin:function(t,e,i){if(void 0===i&&(i=!1),"deferred"===xn||"loading"===xn||"loaded"===xn)throw new Error("setRTLTextPlugin cannot be called multiple times.");bn=U.resolveURL(t),xn="deferred",vn=e,In(),i||zn()},getRTLTextPluginStatus:Tn,Map:xm,NavigationControl:Im,GeolocateControl:Mm,AttributionControl:hm,ScaleControl:Bm,FullscreenControl:Om,Popup:Um,Marker:km,Style:Rh,LngLat:Yl,LngLatBounds:Kl,Point:n,MercatorCoordinate:rc,Evented:Nt,config:Q,prewarm:function(){Pp().acquire(Ap)},clearPrewarmedResources:function(){var t=kp;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Ap),kp=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return Q.ACCESS_TOKEN},set accessToken(t){Q.ACCESS_TOKEN=t},get baseApiUrl(){return Q.API_URL},set baseApiUrl(t){Q.API_URL=t},get workerCount(){return Ep.workerCount},set workerCount(t){Ep.workerCount=t},get maxParallelImageRequests(){return Q.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){Q.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){!function(t){var e=a.caches.delete("mapbox-tiles");t&&e.catch(t).then((function(){return t()}))}(t)},workerUrl:""};return jm}))},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"f01a207f57de9c098b15d34197acd75c.png"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"40cd439cda90e7f7f4135b4037835e37.png"},function(module,exports,__webpack_require__){(function(global,process){(function(global,factory){true?module.exports=factory(__webpack_require__(308),__webpack_require__(167)):undefined})(this,(function(fs,path){"use strict";fs=fs&&fs.hasOwnProperty("default")?fs["default"]:fs;path=path&&path.hasOwnProperty("default")?path["default"]:path;var ModeHandler=function(mode,DrawContext){var handlers={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]};var ctx={on:function on(event,selector,fn){if(handlers[event]===undefined){throw new Error("Invalid event type: "+event)}handlers[event].push({selector:selector,fn:fn})},render:function render(id){DrawContext.store.featureChanged(id)}};var delegate=function(eventName,event){var handles=handlers[eventName];var iHandle=handles.length;while(iHandle--){var handle=handles[iHandle];if(handle.selector(event)){handle.fn.call(ctx,event);DrawContext.store.render();DrawContext.ui.updateMapClasses();break}}};mode.start.call(ctx);return{render:mode.render,stop:function stop(){if(mode.stop){mode.stop()}},trash:function trash(){if(mode.trash){mode.trash();DrawContext.store.render()}},combineFeatures:function combineFeatures(){if(mode.combineFeatures){mode.combineFeatures()}},uncombineFeatures:function uncombineFeatures(){if(mode.uncombineFeatures){mode.uncombineFeatures()}},drag:function drag(event){delegate("drag",event)},click:function click(event){delegate("click",event)},mousemove:function mousemove(event){delegate("mousemove",event)},mousedown:function mousedown(event){delegate("mousedown",event)},mouseup:function mouseup(event){delegate("mouseup",event)},mouseout:function mouseout(event){delegate("mouseout",event)},keydown:function keydown(event){delegate("keydown",event)},keyup:function keyup(event){delegate("keyup",event)},touchstart:function touchstart(event){delegate("touchstart",event)},touchmove:function touchmove(event){delegate("touchmove",event)},touchend:function touchend(event){delegate("touchend",event)},tap:function tap(event){delegate("tap",event)}}};var RADIUS=6378137;var FLATTENING=1/298.257223563;var POLAR_RADIUS=6356752.3142;var wgs84={RADIUS:RADIUS,FLATTENING:FLATTENING,POLAR_RADIUS:POLAR_RADIUS};var geometry_1=geometry;var ring=ringArea;function geometry(_){var area=0,i;switch(_.type){case"Polygon":return polygonArea(_.coordinates);case"MultiPolygon":for(i=0;i<_.coordinates.length;i++){area+=polygonArea(_.coordinates[i])}return area;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(i=0;i<_.geometries.length;i++){area+=geometry(_.geometries[i])}return area}}function polygonArea(coords){var area=0;if(coords&&coords.length>0){area+=Math.abs(ringArea(coords[0]));for(var i=1;i<coords.length;i++){area-=Math.abs(ringArea(coords[i]))}}return area}function ringArea(coords){var p1,p2,p3,lowerIndex,middleIndex,upperIndex,i,area=0,coordsLength=coords.length;if(coordsLength>2){for(i=0;i<coordsLength;i++){if(i===coordsLength-2){lowerIndex=coordsLength-2;middleIndex=coordsLength-1;upperIndex=0}else if(i===coordsLength-1){lowerIndex=coordsLength-1;middleIndex=0;upperIndex=1}else{lowerIndex=i;middleIndex=i+1;upperIndex=i+2}p1=coords[lowerIndex];p2=coords[middleIndex];p3=coords[upperIndex];area+=(rad(p3[0])-rad(p1[0]))*Math.sin(rad(p2[1]))}area=area*wgs84.RADIUS*wgs84.RADIUS/2}return area}function rad(_){return _*Math.PI/180}var geojsonArea={geometry:geometry_1,ring:ring};var classes={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"};var sources={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"};var cursors={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"};var types={POLYGON:"polygon",LINE:"line_string",POINT:"point"};var geojsonTypes={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"};var modes={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"};var events={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"};var updateActions={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"};var meta={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"};var activeStates={ACTIVE:"true",INACTIVE:"false"};var interactions=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"];var LAT_MIN=-90;var LAT_RENDERED_MIN=-85;var LAT_MAX=90;var LAT_RENDERED_MAX=85;var LNG_MIN=-270;var LNG_MAX=270;var FEATURE_SORT_RANKS={Point:0,LineString:1,Polygon:2};function comparator(a,b){var score=FEATURE_SORT_RANKS[a.geometry.type]-FEATURE_SORT_RANKS[b.geometry.type];if(score===0&&a.geometry.type===geojsonTypes.POLYGON){return a.area-b.area}return score}function sortFeatures(features){return features.map((function(feature){if(feature.geometry.type===geojsonTypes.POLYGON){feature.area=geojsonArea.geometry({type:geojsonTypes.FEATURE,property:{},geometry:feature.geometry})}return feature})).sort(comparator).map((function(feature){delete feature.area;return feature}))}function mapEventToBoundingBox(mapEvent,buffer){if(buffer===void 0)buffer=0;return[[mapEvent.point.x-buffer,mapEvent.point.y-buffer],[mapEvent.point.x+buffer,mapEvent.point.y+buffer]]}function StringSet(items){this._items={};this._nums={};this._length=items?items.length:0;if(!items){return}for(var i=0,l=items.length;i<l;i++){this.add(items[i]);if(items[i]===undefined){continue}if(typeof items[i]==="string"){this._items[items[i]]=i}else{this._nums[items[i]]=i}}}StringSet.prototype.add=function(x){if(this.has(x)){return this}this._length++;if(typeof x==="string"){this._items[x]=this._length}else{this._nums[x]=this._length}return this};StringSet.prototype.delete=function(x){if(this.has(x)===false){return this}this._length--;delete this._items[x];delete this._nums[x];return this};StringSet.prototype.has=function(x){if(typeof x!=="string"&&typeof x!=="number"){return false}return this._items[x]!==undefined||this._nums[x]!==undefined};StringSet.prototype.values=function(){var this$1=this;var values=[];Object.keys(this._items).forEach((function(k){values.push({k:k,v:this$1._items[k]})}));Object.keys(this._nums).forEach((function(k){values.push({k:JSON.parse(k),v:this$1._nums[k]})}));return values.sort((function(a,b){return a.v-b.v})).map((function(a){return a.k}))};StringSet.prototype.clear=function(){this._length=0;this._items={};this._nums={};return this};var META_TYPES=[meta.FEATURE,meta.MIDPOINT,meta.VERTEX];var featuresAt={click:featuresAtClick,touch:featuresAtTouch};function featuresAtClick(event,bbox,ctx){return featuresAt$1(event,bbox,ctx,ctx.options.clickBuffer)}function featuresAtTouch(event,bbox,ctx){return featuresAt$1(event,bbox,ctx,ctx.options.touchBuffer)}function featuresAt$1(event,bbox,ctx,buffer){if(ctx.map===null){return[]}var box=event?mapEventToBoundingBox(event,buffer):bbox;var queryParams={};if(ctx.options.styles){queryParams.layers=ctx.options.styles.map((function(s){return s.id}))}var features=ctx.map.queryRenderedFeatures(box,queryParams).filter((function(feature){return META_TYPES.indexOf(feature.properties.meta)!==-1}));var featureIds=new StringSet;var uniqueFeatures=[];features.forEach((function(feature){var featureId=feature.properties.id;if(featureIds.has(featureId)){return}featureIds.add(featureId);uniqueFeatures.push(feature)}));return sortFeatures(uniqueFeatures)}function getFeatureAtAndSetCursors(event,ctx){var features=featuresAt.click(event,null,ctx);var classes={mouse:cursors.NONE};if(features[0]){classes.mouse=features[0].properties.active===activeStates.ACTIVE?cursors.MOVE:cursors.POINTER;classes.feature=features[0].properties.meta}if(ctx.events.currentModeName().indexOf("draw")!==-1){classes.mouse=cursors.ADD}ctx.ui.queueMapClasses(classes);ctx.ui.updateMapClasses();return features[0]}function euclideanDistance(a,b){var x=a.x-b.x;var y=a.y-b.y;return Math.sqrt(x*x+y*y)}var FINE_TOLERANCE=4;var GROSS_TOLERANCE=12;var INTERVAL=500;function isClick(start,end,options){if(options===void 0)options={};var fineTolerance=options.fineTolerance!=null?options.fineTolerance:FINE_TOLERANCE;var grossTolerance=options.grossTolerance!=null?options.grossTolerance:GROSS_TOLERANCE;var interval=options.interval!=null?options.interval:INTERVAL;start.point=start.point||end.point;start.time=start.time||end.time;var moveDistance=euclideanDistance(start.point,end.point);return moveDistance<fineTolerance||moveDistance<grossTolerance&&end.time-start.time<interval}var TOLERANCE=25;var INTERVAL$1=250;function isTap(start,end,options){if(options===void 0)options={};var tolerance=options.tolerance!=null?options.tolerance:TOLERANCE;var interval=options.interval!=null?options.interval:INTERVAL$1;start.point=start.point||end.point;start.time=start.time||end.time;var moveDistance=euclideanDistance(start.point,end.point);return moveDistance<tolerance&&end.time-start.time<interval}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var hat_1=createCommonjsModule((function(module){var hat=module.exports=function(bits,base){if(!base){base=16}if(bits===undefined){bits=128}if(bits<=0){return"0"}var digits=Math.log(Math.pow(2,bits))/Math.log(base);for(var i=2;digits===Infinity;i*=2){digits=Math.log(Math.pow(2,bits/i))/Math.log(base)*i}var rem=digits-Math.floor(digits);var res="";for(var i=0;i<Math.floor(digits);i++){var x=Math.floor(Math.random()*base).toString(base);res=x+res}if(rem){var b=Math.pow(base,rem);var x=Math.floor(Math.random()*b).toString(base);res=x+res}var parsed=parseInt(res,base);if(parsed!==Infinity&&parsed>=Math.pow(2,bits)){return hat(bits,base)}else{return res}};hat.rack=function(bits,base,expandBy){var fn=function(data){var iters=0;do{if(iters++>10){if(expandBy){bits+=expandBy}else{throw new Error("too many ID collisions, use more bits")}}var id=hat(bits,base)}while(Object.hasOwnProperty.call(hats,id));hats[id]=data;return id};var hats=fn.hats={};fn.get=function(id){return fn.hats[id]};fn.set=function(id,value){fn.hats[id]=value;return fn};fn.bits=bits||128;fn.base=base||16;return fn}}));var Feature=function(ctx,geojson){this.ctx=ctx;this.properties=geojson.properties||{};this.coordinates=geojson.geometry.coordinates;this.id=geojson.id||hat_1();this.type=geojson.geometry.type};Feature.prototype.changed=function(){this.ctx.store.featureChanged(this.id)};Feature.prototype.incomingCoords=function(coords){this.setCoordinates(coords)};Feature.prototype.setCoordinates=function(coords){this.coordinates=coords;this.changed()};Feature.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))};Feature.prototype.setProperty=function(property,value){this.properties[property]=value};Feature.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:geojsonTypes.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))};Feature.prototype.internal=function(mode){var properties={id:this.id,meta:meta.FEATURE,"meta:type":this.type,active:activeStates.INACTIVE,mode:mode};if(this.ctx.options.userProperties){for(var name in this.properties){properties["user_"+name]=this.properties[name]}}return{type:geojsonTypes.FEATURE,properties:properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Point=function(ctx,geojson){Feature.call(this,ctx,geojson)};Point.prototype=Object.create(Feature.prototype);Point.prototype.isValid=function(){return typeof this.coordinates[0]==="number"&&typeof this.coordinates[1]==="number"};Point.prototype.updateCoordinate=function(pathOrLng,lngOrLat,lat){if(arguments.length===3){this.coordinates=[lngOrLat,lat]}else{this.coordinates=[pathOrLng,lngOrLat]}this.changed()};Point.prototype.getCoordinate=function(){return this.getCoordinates()};var LineString=function(ctx,geojson){Feature.call(this,ctx,geojson)};LineString.prototype=Object.create(Feature.prototype);LineString.prototype.isValid=function(){return this.coordinates.length>1};LineString.prototype.addCoordinate=function(path,lng,lat){this.changed();var id=parseInt(path,10);this.coordinates.splice(id,0,[lng,lat])};LineString.prototype.getCoordinate=function(path){var id=parseInt(path,10);return JSON.parse(JSON.stringify(this.coordinates[id]))};LineString.prototype.removeCoordinate=function(path){this.changed();this.coordinates.splice(parseInt(path,10),1)};LineString.prototype.updateCoordinate=function(path,lng,lat){var id=parseInt(path,10);this.coordinates[id]=[lng,lat];this.changed()};var Polygon=function(ctx,geojson){Feature.call(this,ctx,geojson);this.coordinates=this.coordinates.map((function(ring){return ring.slice(0,-1)}))};Polygon.prototype=Object.create(Feature.prototype);Polygon.prototype.isValid=function(){if(this.coordinates.length===0){return false}return this.coordinates.every((function(ring){return ring.length>2}))};Polygon.prototype.incomingCoords=function(coords){this.coordinates=coords.map((function(ring){return ring.slice(0,-1)}));this.changed()};Polygon.prototype.setCoordinates=function(coords){this.coordinates=coords;this.changed()};Polygon.prototype.addCoordinate=function(path,lng,lat){this.changed();var ids=path.split(".").map((function(x){return parseInt(x,10)}));var ring=this.coordinates[ids[0]];ring.splice(ids[1],0,[lng,lat])};Polygon.prototype.removeCoordinate=function(path){this.changed();var ids=path.split(".").map((function(x){return parseInt(x,10)}));var ring=this.coordinates[ids[0]];if(ring){ring.splice(ids[1],1);if(ring.length<3){this.coordinates.splice(ids[0],1)}}};Polygon.prototype.getCoordinate=function(path){var ids=path.split(".").map((function(x){return parseInt(x,10)}));var ring=this.coordinates[ids[0]];return JSON.parse(JSON.stringify(ring[ids[1]]))};Polygon.prototype.getCoordinates=function(){return this.coordinates.map((function(coords){return coords.concat([coords[0]])}))};Polygon.prototype.updateCoordinate=function(path,lng,lat){this.changed();var parts=path.split(".");var ringId=parseInt(parts[0],10);var coordId=parseInt(parts[1],10);if(this.coordinates[ringId]===undefined){this.coordinates[ringId]=[]}this.coordinates[ringId][coordId]=[lng,lat]};var models={MultiPoint:Point,MultiLineString:LineString,MultiPolygon:Polygon};var takeAction=function(features,action,path,lng,lat){var parts=path.split(".");var idx=parseInt(parts[0],10);var tail=!parts[1]?null:parts.slice(1).join(".");return features[idx][action](tail,lng,lat)};var MultiFeature=function(ctx,geojson){Feature.call(this,ctx,geojson);delete this.coordinates;this.model=models[geojson.geometry.type];if(this.model===undefined){throw new TypeError(geojson.geometry.type+" is not a valid type")}this.features=this._coordinatesToFeatures(geojson.geometry.coordinates)};MultiFeature.prototype=Object.create(Feature.prototype);MultiFeature.prototype._coordinatesToFeatures=function(coordinates){var this$1=this;var Model=this.model.bind(this);return coordinates.map((function(coords){return new Model(this$1.ctx,{id:hat_1(),type:geojsonTypes.FEATURE,properties:{},geometry:{coordinates:coords,type:this$1.type.replace("Multi","")}})}))};MultiFeature.prototype.isValid=function(){return this.features.every((function(f){return f.isValid()}))};MultiFeature.prototype.setCoordinates=function(coords){this.features=this._coordinatesToFeatures(coords);this.changed()};MultiFeature.prototype.getCoordinate=function(path){return takeAction(this.features,"getCoordinate",path)};MultiFeature.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((function(f){if(f.type===geojsonTypes.POLYGON){return f.getCoordinates()}return f.coordinates}))))};MultiFeature.prototype.updateCoordinate=function(path,lng,lat){takeAction(this.features,"updateCoordinate",path,lng,lat);this.changed()};MultiFeature.prototype.addCoordinate=function(path,lng,lat){takeAction(this.features,"addCoordinate",path,lng,lat);this.changed()};MultiFeature.prototype.removeCoordinate=function(path){takeAction(this.features,"removeCoordinate",path);this.changed()};MultiFeature.prototype.getFeatures=function(){return this.features};function ModeInterface(ctx){this.map=ctx.map;this.drawConfig=JSON.parse(JSON.stringify(ctx.options||{}));this._ctx=ctx}ModeInterface.prototype.setSelected=function(features){return this._ctx.store.setSelected(features)};ModeInterface.prototype.setSelectedCoordinates=function(coords){var this$1=this;this._ctx.store.setSelectedCoordinates(coords);coords.reduce((function(m,c){if(m[c.feature_id]===undefined){m[c.feature_id]=true;this$1._ctx.store.get(c.feature_id).changed()}return m}),{})};ModeInterface.prototype.getSelected=function(){return this._ctx.store.getSelected()};ModeInterface.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()};ModeInterface.prototype.isSelected=function(id){return this._ctx.store.isSelected(id)};ModeInterface.prototype.getFeature=function(id){return this._ctx.store.get(id)};ModeInterface.prototype.select=function(id){return this._ctx.store.select(id)};ModeInterface.prototype.deselect=function(id){return this._ctx.store.deselect(id)};ModeInterface.prototype.deleteFeature=function(id,opts){if(opts===void 0)opts={};return this._ctx.store.delete(id,opts)};ModeInterface.prototype.addFeature=function(feature){return this._ctx.store.add(feature)};ModeInterface.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()};ModeInterface.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()};ModeInterface.prototype.setActionableState=function(actions){if(actions===void 0)actions={};var newSet={trash:actions.trash||false,combineFeatures:actions.combineFeatures||false,uncombineFeatures:actions.uncombineFeatures||false};return this._ctx.events.actionable(newSet)};ModeInterface.prototype.changeMode=function(mode,opts,eventOpts){if(opts===void 0)opts={};if(eventOpts===void 0)eventOpts={};return this._ctx.events.changeMode(mode,opts,eventOpts)};ModeInterface.prototype.updateUIClasses=function(opts){return this._ctx.ui.queueMapClasses(opts)};ModeInterface.prototype.activateUIButton=function(name){return this._ctx.ui.setActiveButton(name)};ModeInterface.prototype.featuresAt=function(event,bbox,bufferType){if(bufferType===void 0)bufferType="click";if(bufferType!=="click"&&bufferType!=="touch"){throw new Error("invalid buffer type")}return featuresAt[bufferType](event,bbox,this._ctx)};ModeInterface.prototype.newFeature=function(geojson){var type=geojson.geometry.type;if(type===geojsonTypes.POINT){return new Point(this._ctx,geojson)}if(type===geojsonTypes.LINE_STRING){return new LineString(this._ctx,geojson)}if(type===geojsonTypes.POLYGON){return new Polygon(this._ctx,geojson)}return new MultiFeature(this._ctx,geojson)};ModeInterface.prototype.isInstanceOf=function(type,feature){if(type===geojsonTypes.POINT){return feature instanceof Point}if(type===geojsonTypes.LINE_STRING){return feature instanceof LineString}if(type===geojsonTypes.POLYGON){return feature instanceof Polygon}if(type==="MultiFeature"){return feature instanceof MultiFeature}throw new Error("Unknown feature class: "+type)};ModeInterface.prototype.doRender=function(id){return this._ctx.store.featureChanged(id)};ModeInterface.prototype.onSetup=function(){};ModeInterface.prototype.onDrag=function(){};ModeInterface.prototype.onClick=function(){};ModeInterface.prototype.onMouseMove=function(){};ModeInterface.prototype.onMouseDown=function(){};ModeInterface.prototype.onMouseUp=function(){};ModeInterface.prototype.onMouseOut=function(){};ModeInterface.prototype.onKeyUp=function(){};ModeInterface.prototype.onKeyDown=function(){};ModeInterface.prototype.onTouchStart=function(){};ModeInterface.prototype.onTouchMove=function(){};ModeInterface.prototype.onTouchEnd=function(){};ModeInterface.prototype.onTap=function(){};ModeInterface.prototype.onStop=function(){};ModeInterface.prototype.onTrash=function(){};ModeInterface.prototype.onCombineFeature=function(){};ModeInterface.prototype.onUncombineFeature=function(){};ModeInterface.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var eventMapper={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"};var eventKeys=Object.keys(eventMapper);function objectToMode(modeObject){var modeObjectKeys=Object.keys(modeObject);return function(ctx,startOpts){if(startOpts===void 0)startOpts={};var state={};var mode=modeObjectKeys.reduce((function(m,k){m[k]=modeObject[k];return m}),new ModeInterface(ctx));function wrapper(eh){return function(e){mode[eh](state,e)}}return{start:function start(){var this$1=this;state=mode.onSetup(startOpts);eventKeys.forEach((function(key){var modeHandler=eventMapper[key];var selector=function(){return false};if(modeObject[modeHandler]){selector=function(){return true}}this$1.on(key,selector,wrapper(modeHandler))}))},stop:function stop(){mode.onStop(state)},trash:function trash(){mode.onTrash(state)},combineFeatures:function combineFeatures(){mode.onCombineFeatures(state)},uncombineFeatures:function uncombineFeatures(){mode.onUncombineFeatures(state)},render:function render(geojson,push){mode.toDisplayFeatures(state,geojson,push)}}}}function events$1(ctx){var modes$1=Object.keys(ctx.options.modes).reduce((function(m,k){m[k]=objectToMode(ctx.options.modes[k]);return m}),{});var mouseDownInfo={};var touchStartInfo={};var events$1={};var currentModeName=null;var currentMode=null;events$1.drag=function(event,isDrag){if(isDrag({point:event.point,time:(new Date).getTime()})){ctx.ui.queueMapClasses({mouse:cursors.DRAG});currentMode.drag(event)}else{event.originalEvent.stopPropagation()}};events$1.mousedrag=function(event){events$1.drag(event,(function(endInfo){return!isClick(mouseDownInfo,endInfo)}))};events$1.touchdrag=function(event){events$1.drag(event,(function(endInfo){return!isTap(touchStartInfo,endInfo)}))};events$1.mousemove=function(event){var button=event.originalEvent.buttons!==undefined?event.originalEvent.buttons:event.originalEvent.which;if(button===1){return events$1.mousedrag(event)}var target=getFeatureAtAndSetCursors(event,ctx);event.featureTarget=target;currentMode.mousemove(event)};events$1.mousedown=function(event){mouseDownInfo={time:(new Date).getTime(),point:event.point};var target=getFeatureAtAndSetCursors(event,ctx);event.featureTarget=target;currentMode.mousedown(event)};events$1.mouseup=function(event){var target=getFeatureAtAndSetCursors(event,ctx);event.featureTarget=target;if(isClick(mouseDownInfo,{point:event.point,time:(new Date).getTime()})){currentMode.click(event)}else{currentMode.mouseup(event)}};events$1.mouseout=function(event){currentMode.mouseout(event)};events$1.touchstart=function(event){event.originalEvent.preventDefault();if(!ctx.options.touchEnabled){return}touchStartInfo={time:(new Date).getTime(),point:event.point};var target=featuresAt.touch(event,null,ctx)[0];event.featureTarget=target;currentMode.touchstart(event)};events$1.touchmove=function(event){event.originalEvent.preventDefault();if(!ctx.options.touchEnabled){return}currentMode.touchmove(event);return events$1.touchdrag(event)};events$1.touchend=function(event){event.originalEvent.preventDefault();if(!ctx.options.touchEnabled){return}var target=featuresAt.touch(event,null,ctx)[0];event.featureTarget=target;if(isTap(touchStartInfo,{time:(new Date).getTime(),point:event.point})){currentMode.tap(event)}else{currentMode.touchend(event)}};var isKeyModeValid=function(code){return!(code===8||code===46||code>=48&&code<=57)};events$1.keydown=function(event){if((event.srcElement||event.target).classList[0]!=="mapboxgl-canvas"){return}if((event.keyCode===8||event.keyCode===46)&&ctx.options.controls.trash){event.preventDefault();currentMode.trash()}else if(isKeyModeValid(event.keyCode)){currentMode.keydown(event)}else if(event.keyCode===49&&ctx.options.controls.point){changeMode(modes.DRAW_POINT)}else if(event.keyCode===50&&ctx.options.controls.line_string){changeMode(modes.DRAW_LINE_STRING)}else if(event.keyCode===51&&ctx.options.controls.polygon){changeMode(modes.DRAW_POLYGON)}};events$1.keyup=function(event){if(isKeyModeValid(event.keyCode)){currentMode.keyup(event)}};events$1.zoomend=function(){ctx.store.changeZoom()};events$1.data=function(event){if(event.dataType==="style"){var setup=ctx.setup;var map=ctx.map;var options=ctx.options;var store=ctx.store;var hasLayers=options.styles.some((function(style){return map.getLayer(style.id)}));if(!hasLayers){setup.addLayers();store.setDirty();store.render()}}};function changeMode(modename,nextModeOptions,eventOptions){if(eventOptions===void 0)eventOptions={};currentMode.stop();var modebuilder=modes$1[modename];if(modebuilder===undefined){throw new Error(modename+" is not valid")}currentModeName=modename;var mode=modebuilder(ctx,nextModeOptions);currentMode=ModeHandler(mode,ctx);if(!eventOptions.silent){ctx.map.fire(events.MODE_CHANGE,{mode:modename})}ctx.store.setDirty();ctx.store.render()}var actionState={trash:false,combineFeatures:false,uncombineFeatures:false};function actionable(actions){var changed=false;Object.keys(actions).forEach((function(action){if(actionState[action]===undefined){throw new Error("Invalid action type")}if(actionState[action]!==actions[action]){changed=true}actionState[action]=actions[action]}));if(changed){ctx.map.fire(events.ACTIONABLE,{actions:actionState})}}var api={start:function start(){currentModeName=ctx.options.defaultMode;currentMode=ModeHandler(modes$1[currentModeName](ctx),ctx)},changeMode:changeMode,actionable:actionable,currentModeName:function currentModeName$1(){return currentModeName},currentModeRender:function currentModeRender(geojson,push){return currentMode.render(geojson,push)},fire:function fire(name,event){if(events$1[name]){events$1[name](event)}},addEventListeners:function addEventListeners(){ctx.map.on("mousemove",events$1.mousemove);ctx.map.on("mousedown",events$1.mousedown);ctx.map.on("mouseup",events$1.mouseup);ctx.map.on("data",events$1.data);ctx.map.on("touchmove",events$1.touchmove);ctx.map.on("touchstart",events$1.touchstart);ctx.map.on("touchend",events$1.touchend);ctx.container.addEventListener("mouseout",events$1.mouseout);if(ctx.options.keybindings){ctx.container.addEventListener("keydown",events$1.keydown);ctx.container.addEventListener("keyup",events$1.keyup)}},removeEventListeners:function removeEventListeners(){ctx.map.off("mousemove",events$1.mousemove);ctx.map.off("mousedown",events$1.mousedown);ctx.map.off("mouseup",events$1.mouseup);ctx.map.off("data",events$1.data);ctx.map.off("touchmove",events$1.touchmove);ctx.map.off("touchstart",events$1.touchstart);ctx.map.off("touchend",events$1.touchend);ctx.container.removeEventListener("mouseout",events$1.mouseout);if(ctx.options.keybindings){ctx.container.removeEventListener("keydown",events$1.keydown);ctx.container.removeEventListener("keyup",events$1.keyup)}},trash:function trash(options){currentMode.trash(options)},combineFeatures:function combineFeatures(){currentMode.combineFeatures()},uncombineFeatures:function uncombineFeatures(){currentMode.uncombineFeatures()},getMode:function getMode(){return currentModeName}};return api}function toDenseArray(x){return[].concat(x).filter((function(y){return y!==undefined}))}function render(){var store=this;var mapExists=store.ctx.map&&store.ctx.map.getSource(sources.HOT)!==undefined;if(!mapExists){return cleanup()}var mode=store.ctx.events.currentModeName();store.ctx.ui.queueMapClasses({mode:mode});var newHotIds=[];var newColdIds=[];if(store.isDirty){newColdIds=store.getAllIds()}else{newHotIds=store.getChangedIds().filter((function(id){return store.get(id)!==undefined}));newColdIds=store.sources.hot.filter((function(geojson){return geojson.properties.id&&newHotIds.indexOf(geojson.properties.id)===-1&&store.get(geojson.properties.id)!==undefined})).map((function(geojson){return geojson.properties.id}))}store.sources.hot=[];var lastColdCount=store.sources.cold.length;store.sources.cold=store.isDirty?[]:store.sources.cold.filter((function(geojson){var id=geojson.properties.id||geojson.properties.parent;return newHotIds.indexOf(id)===-1}));var coldChanged=lastColdCount!==store.sources.cold.length||newColdIds.length>0;newHotIds.forEach((function(id){return renderFeature(id,"hot")}));newColdIds.forEach((function(id){return renderFeature(id,"cold")}));function renderFeature(id,source){var feature=store.get(id);var featureInternal=feature.internal(mode);store.ctx.events.currentModeRender(featureInternal,(function(geojson){store.sources[source].push(geojson)}))}if(coldChanged){store.ctx.map.getSource(sources.COLD).setData({type:geojsonTypes.FEATURE_COLLECTION,features:store.sources.cold})}store.ctx.map.getSource(sources.HOT).setData({type:geojsonTypes.FEATURE_COLLECTION,features:store.sources.hot});if(store._emitSelectionChange){store.ctx.map.fire(events.SELECTION_CHANGE,{features:store.getSelected().map((function(feature){return feature.toGeoJSON()})),points:store.getSelectedCoordinates().map((function(coordinate){return{type:geojsonTypes.FEATURE,properties:{},geometry:{type:geojsonTypes.POINT,coordinates:coordinate.coordinates}}}))});store._emitSelectionChange=false}if(store._deletedFeaturesToEmit.length){var geojsonToEmit=store._deletedFeaturesToEmit.map((function(feature){return feature.toGeoJSON()}));store._deletedFeaturesToEmit=[];store.ctx.map.fire(events.DELETE,{features:geojsonToEmit})}cleanup();store.ctx.map.fire(events.RENDER,{});function cleanup(){store.isDirty=false;store.clearChangedIds()}}function Store(ctx){var this$1=this;this._features={};this._featureIds=new StringSet;this._selectedFeatureIds=new StringSet;this._selectedCoordinates=[];this._changedFeatureIds=new StringSet;this._deletedFeaturesToEmit=[];this._emitSelectionChange=false;this._mapInitialConfig={};this.ctx=ctx;this.sources={hot:[],cold:[]};var renderRequest;this.render=function(){if(!renderRequest){renderRequest=requestAnimationFrame((function(){renderRequest=null;render.call(this$1)}))}};this.isDirty=false}Store.prototype.createRenderBatch=function(){var this$1=this;var holdRender=this.render;var numRenders=0;this.render=function(){numRenders++};return function(){this$1.render=holdRender;if(numRenders>0){this$1.render()}}};Store.prototype.setDirty=function(){this.isDirty=true;return this};Store.prototype.featureChanged=function(featureId){this._changedFeatureIds.add(featureId);return this};Store.prototype.getChangedIds=function(){return this._changedFeatureIds.values()};Store.prototype.clearChangedIds=function(){this._changedFeatureIds.clear();return this};Store.prototype.getAllIds=function(){return this._featureIds.values()};Store.prototype.add=function(feature){this.featureChanged(feature.id);this._features[feature.id]=feature;this._featureIds.add(feature.id);return this};Store.prototype.delete=function(featureIds,options){var this$1=this;if(options===void 0)options={};toDenseArray(featureIds).forEach((function(id){if(!this$1._featureIds.has(id)){return}this$1._featureIds.delete(id);this$1._selectedFeatureIds.delete(id);if(!options.silent){if(this$1._deletedFeaturesToEmit.indexOf(this$1._features[id])===-1){this$1._deletedFeaturesToEmit.push(this$1._features[id])}}delete this$1._features[id];this$1.isDirty=true}));refreshSelectedCoordinates(this,options);return this};Store.prototype.get=function(id){return this._features[id]};Store.prototype.getAll=function(){var this$1=this;return Object.keys(this._features).map((function(id){return this$1._features[id]}))};Store.prototype.select=function(featureIds,options){var this$1=this;if(options===void 0)options={};toDenseArray(featureIds).forEach((function(id){if(this$1._selectedFeatureIds.has(id)){return}this$1._selectedFeatureIds.add(id);this$1._changedFeatureIds.add(id);if(!options.silent){this$1._emitSelectionChange=true}}));return this};Store.prototype.deselect=function(featureIds,options){var this$1=this;if(options===void 0)options={};toDenseArray(featureIds).forEach((function(id){if(!this$1._selectedFeatureIds.has(id)){return}this$1._selectedFeatureIds.delete(id);this$1._changedFeatureIds.add(id);if(!options.silent){this$1._emitSelectionChange=true}}));refreshSelectedCoordinates(this,options);return this};Store.prototype.clearSelected=function(options){if(options===void 0)options={};this.deselect(this._selectedFeatureIds.values(),{silent:options.silent});return this};Store.prototype.setSelected=function(featureIds,options){var this$1=this;if(options===void 0)options={};featureIds=toDenseArray(featureIds);this.deselect(this._selectedFeatureIds.values().filter((function(id){return featureIds.indexOf(id)===-1})),{silent:options.silent});this.select(featureIds.filter((function(id){return!this$1._selectedFeatureIds.has(id)})),{silent:options.silent});return this};Store.prototype.setSelectedCoordinates=function(coordinates){this._selectedCoordinates=coordinates;this._emitSelectionChange=true;return this};Store.prototype.clearSelectedCoordinates=function(){this._selectedCoordinates=[];this._emitSelectionChange=true;return this};Store.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()};Store.prototype.getSelected=function(){var this$1=this;return this._selectedFeatureIds.values().map((function(id){return this$1.get(id)}))};Store.prototype.getSelectedCoordinates=function(){var this$1=this;var selected=this._selectedCoordinates.map((function(coordinate){var feature=this$1.get(coordinate.feature_id);return{coordinates:feature.getCoordinate(coordinate.coord_path)}}));return selected};Store.prototype.isSelected=function(featureId){return this._selectedFeatureIds.has(featureId)};Store.prototype.setFeatureProperty=function(featureId,property,value){this.get(featureId).setProperty(property,value);this.featureChanged(featureId)};function refreshSelectedCoordinates(store,options){var newSelectedCoordinates=store._selectedCoordinates.filter((function(point){return store._selectedFeatureIds.has(point.feature_id)}));if(store._selectedCoordinates.length!==newSelectedCoordinates.length&&!options.silent){store._emitSelectionChange=true}store._selectedCoordinates=newSelectedCoordinates}Store.prototype.storeMapConfig=function(){var this$1=this;interactions.forEach((function(interaction){var interactionSet=this$1.ctx.map[interaction];if(interactionSet){this$1._mapInitialConfig[interaction]=this$1.ctx.map[interaction].isEnabled()}}))};Store.prototype.restoreMapConfig=function(){var this$1=this;Object.keys(this._mapInitialConfig).forEach((function(key){var value=this$1._mapInitialConfig[key];if(value){this$1.ctx.map[key].enable()}else{this$1.ctx.map[key].disable()}}))};Store.prototype.getInitialConfigValue=function(interaction){if(this._mapInitialConfig[interaction]!==undefined){return this._mapInitialConfig[interaction]}else{return true}};var immutable=extend;var hasOwnProperty=Object.prototype.hasOwnProperty;function extend(){var arguments$1=arguments;var target={};for(var i=0;i<arguments.length;i++){var source=arguments$1[i];for(var key in source){if(hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target}var classTypes=["mode","feature","mouse"];function ui(ctx){var buttonElements={};var activeButton=null;var currentMapClasses={mode:null,feature:null,mouse:null};var nextMapClasses={mode:null,feature:null,mouse:null};function clearMapClasses(){queueMapClasses({mode:null,feature:null,mouse:null});updateMapClasses()}function queueMapClasses(options){nextMapClasses=immutable(nextMapClasses,options)}function updateMapClasses(){var ref,ref$1;if(!ctx.container){return}var classesToRemove=[];var classesToAdd=[];classTypes.forEach((function(type){if(nextMapClasses[type]===currentMapClasses[type]){return}classesToRemove.push(type+"-"+currentMapClasses[type]);if(nextMapClasses[type]!==null){classesToAdd.push(type+"-"+nextMapClasses[type])}}));if(classesToRemove.length>0){(ref=ctx.container.classList).remove.apply(ref,classesToRemove)}if(classesToAdd.length>0){(ref$1=ctx.container.classList).add.apply(ref$1,classesToAdd)}currentMapClasses=immutable(currentMapClasses,nextMapClasses)}function createControlButton(id,options){if(options===void 0)options={};var button=document.createElement("button");button.className=classes.CONTROL_BUTTON+" "+options.className;button.setAttribute("title",options.title);options.container.appendChild(button);button.addEventListener("click",(function(e){e.preventDefault();e.stopPropagation();var clickedButton=e.target;if(clickedButton===activeButton){deactivateButtons();options.onDeactivate();return}setActiveButton(id);options.onActivate()}),true);return button}function deactivateButtons(){if(!activeButton){return}activeButton.classList.remove(classes.ACTIVE_BUTTON);activeButton=null}function setActiveButton(id){deactivateButtons();var button=buttonElements[id];if(!button){return}if(button&&id!=="trash"){button.classList.add(classes.ACTIVE_BUTTON);activeButton=button}}function addButtons(){var controls=ctx.options.controls;var controlGroup=document.createElement("div");controlGroup.className=classes.CONTROL_GROUP+" "+classes.CONTROL_BASE;if(!controls){return controlGroup}if(controls[types.LINE]){buttonElements[types.LINE]=createControlButton(types.LINE,{container:controlGroup,className:classes.CONTROL_BUTTON_LINE,title:"LineString tool "+(ctx.options.keybindings?"(l)":""),onActivate:function(){return ctx.events.changeMode(modes.DRAW_LINE_STRING)},onDeactivate:function(){return ctx.events.trash()}})}if(controls[types.POLYGON]){buttonElements[types.POLYGON]=createControlButton(types.POLYGON,{container:controlGroup,className:classes.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(ctx.options.keybindings?"(p)":""),onActivate:function(){return ctx.events.changeMode(modes.DRAW_POLYGON)},onDeactivate:function(){return ctx.events.trash()}})}if(controls[types.POINT]){buttonElements[types.POINT]=createControlButton(types.POINT,{container:controlGroup,className:classes.CONTROL_BUTTON_POINT,title:"Marker tool "+(ctx.options.keybindings?"(m)":""),onActivate:function(){return ctx.events.changeMode(modes.DRAW_POINT)},onDeactivate:function(){return ctx.events.trash()}})}if(controls.trash){buttonElements.trash=createControlButton("trash",{container:controlGroup,className:classes.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){ctx.events.trash()}})}if(controls.combine_features){buttonElements.combine_features=createControlButton("combineFeatures",{container:controlGroup,className:classes.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){ctx.events.combineFeatures()}})}if(controls.uncombine_features){buttonElements.uncombine_features=createControlButton("uncombineFeatures",{container:controlGroup,className:classes.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){ctx.events.uncombineFeatures()}})}return controlGroup}function removeButtons(){Object.keys(buttonElements).forEach((function(buttonId){var button=buttonElements[buttonId];if(button.parentNode){button.parentNode.removeChild(button)}delete buttonElements[buttonId]}))}return{setActiveButton:setActiveButton,queueMapClasses:queueMapClasses,updateMapClasses:updateMapClasses,clearMapClasses:clearMapClasses,addButtons:addButtons,removeButtons:removeButtons}}function runSetup(ctx){var controlContainer=null;var mapLoadedInterval=null;var setup={onRemove:function onRemove(){ctx.map.off("load",setup.connect);clearInterval(mapLoadedInterval);setup.removeLayers();ctx.store.restoreMapConfig();ctx.ui.removeButtons();ctx.events.removeEventListeners();ctx.ui.clearMapClasses();ctx.map=null;ctx.container=null;ctx.store=null;if(controlContainer&&controlContainer.parentNode){controlContainer.parentNode.removeChild(controlContainer)}controlContainer=null;return this},connect:function connect(){ctx.map.off("load",setup.connect);clearInterval(mapLoadedInterval);setup.addLayers();ctx.store.storeMapConfig();ctx.events.addEventListeners()},onAdd:function onAdd(map){{var _fire=map.fire;map.fire=function(type,event){var args=arguments;if(_fire.length===1&&arguments.length!==1){args=[immutable({},{type:type},event)]}return _fire.apply(map,args)}}ctx.map=map;ctx.events=events$1(ctx);ctx.ui=ui(ctx);ctx.container=map.getContainer();ctx.store=new Store(ctx);controlContainer=ctx.ui.addButtons();if(ctx.options.boxSelect){map.boxZoom.disable();map.dragPan.disable();map.dragPan.enable()}if(map.loaded()){setup.connect()}else{map.on("load",setup.connect);mapLoadedInterval=setInterval((function(){if(map.loaded()){setup.connect()}}),16)}ctx.events.start();return controlContainer},addLayers:function addLayers(){ctx.map.addSource(sources.COLD,{data:{type:geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"});ctx.map.addSource(sources.HOT,{data:{type:geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"});ctx.options.styles.forEach((function(style){ctx.map.addLayer(style)}));ctx.store.setDirty(true);ctx.store.render()},removeLayers:function removeLayers(){ctx.options.styles.forEach((function(style){if(ctx.map.getLayer(style.id)){ctx.map.removeLayer(style.id)}}));if(ctx.map.getSource(sources.COLD)){ctx.map.removeSource(sources.COLD)}if(ctx.map.getSource(sources.HOT)){ctx.map.removeSource(sources.HOT)}}};ctx.setup=setup;return setup}var styles=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function isOfMetaType(type){return function(e){var featureTarget=e.featureTarget;if(!featureTarget){return false}if(!featureTarget.properties){return false}return featureTarget.properties.meta===type}}function isShiftMousedown(e){if(!e.originalEvent){return false}if(!e.originalEvent.shiftKey){return false}return e.originalEvent.button===0}function isActiveFeature(e){if(!e.featureTarget){return false}if(!e.featureTarget.properties){return false}return e.featureTarget.properties.active===activeStates.ACTIVE&&e.featureTarget.properties.meta===meta.FEATURE}function isInactiveFeature(e){if(!e.featureTarget){return false}if(!e.featureTarget.properties){return false}return e.featureTarget.properties.active===activeStates.INACTIVE&&e.featureTarget.properties.meta===meta.FEATURE}function noTarget(e){return e.featureTarget===undefined}function isFeature(e){if(!e.featureTarget){return false}if(!e.featureTarget.properties){return false}return e.featureTarget.properties.meta===meta.FEATURE}function isVertex(e){var featureTarget=e.featureTarget;if(!featureTarget){return false}if(!featureTarget.properties){return false}return featureTarget.properties.meta===meta.VERTEX}function isShiftDown(e){if(!e.originalEvent){return false}return e.originalEvent.shiftKey===true}function isEscapeKey(e){return e.keyCode===27}function isEnterKey(e){return e.keyCode===13}var pointGeometry=Point$1;function Point$1(x,y){this.x=x;this.y=y}Point$1.prototype={clone:function(){return new Point$1(this.x,this.y)},add:function(p){return this.clone()._add(p)},sub:function(p){return this.clone()._sub(p)},multByPoint:function(p){return this.clone()._multByPoint(p)},divByPoint:function(p){return this.clone()._divByPoint(p)},mult:function(k){return this.clone()._mult(k)},div:function(k){return this.clone()._div(k)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,p){return this.clone()._rotateAround(a,p)},matMult:function(m){return this.clone()._matMult(m)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(other){return this.x===other.x&&this.y===other.y},dist:function(p){return Math.sqrt(this.distSqr(p))},distSqr:function(p){var dx=p.x-this.x,dy=p.y-this.y;return dx*dx+dy*dy},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(b){return Math.atan2(this.y-b.y,this.x-b.x)},angleWith:function(b){return this.angleWithSep(b.x,b.y)},angleWithSep:function(x,y){return Math.atan2(this.x*y-this.y*x,this.x*x+this.y*y)},_matMult:function(m){var x=m[0]*this.x+m[1]*this.y,y=m[2]*this.x+m[3]*this.y;this.x=x;this.y=y;return this},_add:function(p){this.x+=p.x;this.y+=p.y;return this},_sub:function(p){this.x-=p.x;this.y-=p.y;return this},_mult:function(k){this.x*=k;this.y*=k;return this},_div:function(k){this.x/=k;this.y/=k;return this},_multByPoint:function(p){this.x*=p.x;this.y*=p.y;return this},_divByPoint:function(p){this.x/=p.x;this.y/=p.y;return this},_unit:function(){this._div(this.mag());return this},_perp:function(){var y=this.y;this.y=this.x;this.x=-y;return this},_rotate:function(angle){var cos=Math.cos(angle),sin=Math.sin(angle),x=cos*this.x-sin*this.y,y=sin*this.x+cos*this.y;this.x=x;this.y=y;return this},_rotateAround:function(angle,p){var cos=Math.cos(angle),sin=Math.sin(angle),x=p.x+cos*(this.x-p.x)-sin*(this.y-p.y),y=p.y+sin*(this.x-p.x)+cos*(this.y-p.y);this.x=x;this.y=y;return this},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this}};Point$1.convert=function(a){if(a instanceof Point$1){return a}if(Array.isArray(a)){return new Point$1(a[0],a[1])}return a};function mouseEventPoint(mouseEvent,container){var rect=container.getBoundingClientRect();return new pointGeometry(mouseEvent.clientX-rect.left-(container.clientLeft||0),mouseEvent.clientY-rect.top-(container.clientTop||0))}function createVertex(parentId,coordinates,path,selected){return{type:geojsonTypes.FEATURE,properties:{meta:meta.VERTEX,parent:parentId,coord_path:path,active:selected?activeStates.ACTIVE:activeStates.INACTIVE},geometry:{type:geojsonTypes.POINT,coordinates:coordinates}}}function createMidpoint(parent,startVertex,endVertex,map){var startCoord=startVertex.geometry.coordinates;var endCoord=endVertex.geometry.coordinates;if(startCoord[1]>LAT_RENDERED_MAX||startCoord[1]<LAT_RENDERED_MIN||endCoord[1]>LAT_RENDERED_MAX||endCoord[1]<LAT_RENDERED_MIN){return null}var ptA=map.project([startCoord[0],startCoord[1]]);var ptB=map.project([endCoord[0],endCoord[1]]);var mid=map.unproject([(ptA.x+ptB.x)/2,(ptA.y+ptB.y)/2]);return{type:geojsonTypes.FEATURE,properties:{meta:meta.MIDPOINT,parent:parent,lng:mid.lng,lat:mid.lat,coord_path:endVertex.properties.coord_path},geometry:{type:geojsonTypes.POINT,coordinates:[mid.lng,mid.lat]}}}function createSupplementaryPoints(geojson,options,basePath){if(options===void 0)options={};if(basePath===void 0)basePath=null;var ref=geojson.geometry;var type=ref.type;var coordinates=ref.coordinates;var featureId=geojson.properties&&geojson.properties.id;var supplementaryPoints=[];if(type===geojsonTypes.POINT){supplementaryPoints.push(createVertex(featureId,coordinates,basePath,isSelectedPath(basePath)))}else if(type===geojsonTypes.POLYGON){coordinates.forEach((function(line,lineIndex){processLine(line,basePath!==null?basePath+"."+lineIndex:String(lineIndex))}))}else if(type===geojsonTypes.LINE_STRING){processLine(coordinates,basePath)}else if(type.indexOf(geojsonTypes.MULTI_PREFIX)===0){processMultiGeometry()}function processLine(line,lineBasePath){var firstPointString="";var lastVertex=null;line.forEach((function(point,pointIndex){var pointPath=lineBasePath!==undefined&&lineBasePath!==null?lineBasePath+"."+pointIndex:String(pointIndex);var vertex=createVertex(featureId,point,pointPath,isSelectedPath(pointPath));if(options.midpoints&&lastVertex){var midpoint=createMidpoint(featureId,lastVertex,vertex,options.map);if(midpoint){supplementaryPoints.push(midpoint)}}lastVertex=vertex;var stringifiedPoint=JSON.stringify(point);if(firstPointString!==stringifiedPoint){supplementaryPoints.push(vertex)}if(pointIndex===0){firstPointString=stringifiedPoint}}))}function isSelectedPath(path){if(!options.selectedPaths){return false}return options.selectedPaths.indexOf(path)!==-1}function processMultiGeometry(){var subType=type.replace(geojsonTypes.MULTI_PREFIX,"");coordinates.forEach((function(subCoordinates,index){var subFeature={type:geojsonTypes.FEATURE,properties:geojson.properties,geometry:{type:subType,coordinates:subCoordinates}};supplementaryPoints=supplementaryPoints.concat(createSupplementaryPoints(subFeature,options,index))}))}return supplementaryPoints}var doubleClickZoom={enable:function enable(ctx){setTimeout((function(){if(!ctx.map||!ctx.map.doubleClickZoom||!ctx._ctx||!ctx._ctx.store||!ctx._ctx.store.getInitialConfigValue){return}if(!ctx._ctx.store.getInitialConfigValue("doubleClickZoom")){return}ctx.map.doubleClickZoom.enable()}),0)},disable:function disable(ctx){setTimeout((function(){if(!ctx.map||!ctx.map.doubleClickZoom){return}ctx.map.doubleClickZoom.disable()}),0)}};var geojsonNormalize=normalize;var types$1={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function normalize(gj){if(!gj||!gj.type){return null}var type=types$1[gj.type];if(!type){return null}if(type==="geometry"){return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:gj}]}}else if(type==="feature"){return{type:"FeatureCollection",features:[gj]}}else if(type==="featurecollection"){return gj}}var dist=function e(t){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.reduce((function(t,r){return t.concat(e(r))}),[]),t;case"Feature":return t.geometry?e(t.geometry).map((function(e){var r={type:"Feature",properties:JSON.parse(JSON.stringify(t.properties)),geometry:e};return void 0!==t.id&&(r.id=t.id),r})):t;case"MultiPoint":return t.coordinates.map((function(e){return{type:"Point",coordinates:e}}));case"MultiPolygon":return t.coordinates.map((function(e){return{type:"Polygon",coordinates:e}}));case"MultiLineString":return t.coordinates.map((function(e){return{type:"LineString",coordinates:e}}));case"GeometryCollection":return t.geometries.map(e).reduce((function(e,t){return e.concat(t)}),[]);case"Point":case"Polygon":case"LineString":return[t]}};var flatten=function flatten(list){return _flatten(list);function _flatten(list){if(Array.isArray(list)&&list.length&&typeof list[0]==="number"){return[list]}return list.reduce((function(acc,item){if(Array.isArray(item)&&Array.isArray(item[0])){return acc.concat(_flatten(item))}else{acc.push(item);return acc}}),[])}};var geojsonCoords=function(_){if(!_){return[]}var normalized=dist(geojsonNormalize(_)),coordinates=[];normalized.features.forEach((function(feature){if(!feature.geometry){return}coordinates=coordinates.concat(flatten(feature.geometry.coordinates))}));return coordinates};var traverse_1=createCommonjsModule((function(module){var traverse=module.exports=function(obj){return new Traverse(obj)};function Traverse(obj){this.value=obj}Traverse.prototype.get=function(ps){var node=this.value;for(var i=0;i<ps.length;i++){var key=ps[i];if(!node||!hasOwnProperty.call(node,key)){node=undefined;break}node=node[key]}return node};Traverse.prototype.has=function(ps){var node=this.value;for(var i=0;i<ps.length;i++){var key=ps[i];if(!node||!hasOwnProperty.call(node,key)){return false}node=node[key]}return true};Traverse.prototype.set=function(ps,value){var node=this.value;for(var i=0;i<ps.length-1;i++){var key=ps[i];if(!hasOwnProperty.call(node,key)){node[key]={}}node=node[key]}node[ps[i]]=value;return value};Traverse.prototype.map=function(cb){return walk(this.value,cb,true)};Traverse.prototype.forEach=function(cb){this.value=walk(this.value,cb,false);return this.value};Traverse.prototype.reduce=function(cb,init){var skip=arguments.length===1;var acc=skip?this.value:init;this.forEach((function(x){if(!this.isRoot||!skip){acc=cb.call(this,acc,x)}}));return acc};Traverse.prototype.paths=function(){var acc=[];this.forEach((function(x){acc.push(this.path)}));return acc};Traverse.prototype.nodes=function(){var acc=[];this.forEach((function(x){acc.push(this.node)}));return acc};Traverse.prototype.clone=function(){var parents=[],nodes=[];return function clone(src){for(var i=0;i<parents.length;i++){if(parents[i]===src){return nodes[i]}}if(typeof src==="object"&&src!==null){var dst=copy(src);parents.push(src);nodes.push(dst);forEach(objectKeys(src),(function(key){dst[key]=clone(src[key])}));parents.pop();nodes.pop();return dst}else{return src}}(this.value)};function walk(root,cb,immutable){var path=[];var parents=[];var alive=true;return function walker(node_){var node=immutable?copy(node_):node_;var modifiers={};var keepGoing=true;var state={node:node,node_:node_,path:[].concat(path),parent:parents[parents.length-1],parents:parents,key:path.slice(-1)[0],isRoot:path.length===0,level:path.length,circular:null,update:function(x,stopHere){if(!state.isRoot){state.parent.node[state.key]=x}state.node=x;if(stopHere){keepGoing=false}},delete:function(stopHere){delete state.parent.node[state.key];if(stopHere){keepGoing=false}},remove:function(stopHere){if(isArray(state.parent.node)){state.parent.node.splice(state.key,1)}else{delete state.parent.node[state.key]}if(stopHere){keepGoing=false}},keys:null,before:function(f){modifiers.before=f},after:function(f){modifiers.after=f},pre:function(f){modifiers.pre=f},post:function(f){modifiers.post=f},stop:function(){alive=false},block:function(){keepGoing=false}};if(!alive){return state}function updateState(){if(typeof state.node==="object"&&state.node!==null){if(!state.keys||state.node_!==state.node){state.keys=objectKeys(state.node)}state.isLeaf=state.keys.length==0;for(var i=0;i<parents.length;i++){if(parents[i].node_===node_){state.circular=parents[i];break}}}else{state.isLeaf=true;state.keys=null}state.notLeaf=!state.isLeaf;state.notRoot=!state.isRoot}updateState();var ret=cb.call(state,state.node);if(ret!==undefined&&state.update){state.update(ret)}if(modifiers.before){modifiers.before.call(state,state.node)}if(!keepGoing){return state}if(typeof state.node=="object"&&state.node!==null&&!state.circular){parents.push(state);updateState();forEach(state.keys,(function(key,i){path.push(key);if(modifiers.pre){modifiers.pre.call(state,state.node[key],key)}var child=walker(state.node[key]);if(immutable&&hasOwnProperty.call(state.node,key)){state.node[key]=child.node}child.isLast=i==state.keys.length-1;child.isFirst=i==0;if(modifiers.post){modifiers.post.call(state,child)}path.pop()}));parents.pop()}if(modifiers.after){modifiers.after.call(state,state.node)}return state}(root).node}function copy(src){if(typeof src==="object"&&src!==null){var dst;if(isArray(src)){dst=[]}else if(isDate(src)){dst=new Date(src.getTime?src.getTime():src)}else if(isRegExp(src)){dst=new RegExp(src)}else if(isError(src)){dst={message:src.message}}else if(isBoolean(src)){dst=new Boolean(src)}else if(isNumber(src)){dst=new Number(src)}else if(isString(src)){dst=new String(src)}else if(Object.create&&Object.getPrototypeOf){dst=Object.create(Object.getPrototypeOf(src))}else if(src.constructor===Object){dst={}}else{var proto=src.constructor&&src.constructor.prototype||src.__proto__||{};var T=function(){};T.prototype=proto;dst=new T}forEach(objectKeys(src),(function(key){dst[key]=src[key]}));return dst}else{return src}}var objectKeys=Object.keys||function keys(obj){var res=[];for(var key in obj){res.push(key)}return res};function toS(obj){return Object.prototype.toString.call(obj)}function isDate(obj){return toS(obj)==="[object Date]"}function isRegExp(obj){return toS(obj)==="[object RegExp]"}function isError(obj){return toS(obj)==="[object Error]"}function isBoolean(obj){return toS(obj)==="[object Boolean]"}function isNumber(obj){return toS(obj)==="[object Number]"}function isString(obj){return toS(obj)==="[object String]"}var isArray=Array.isArray||function isArray(xs){return Object.prototype.toString.call(xs)==="[object Array]"};var forEach=function(xs,fn){if(xs.forEach){return xs.forEach(fn)}else{for(var i=0;i<xs.length;i++){fn(xs[i],i,xs)}}};forEach(objectKeys(Traverse.prototype),(function(key){traverse[key]=function(obj){var args=[].slice.call(arguments,1);var t=new Traverse(obj);return t[key].apply(t,args)}}));var hasOwnProperty=Object.hasOwnProperty||function(obj,key){return key in obj}}));var extent=Extent;function Extent(bbox){if(!(this instanceof Extent)){return new Extent(bbox)}this._bbox=bbox||[Infinity,Infinity,-Infinity,-Infinity];this._valid=!!bbox}Extent.prototype.include=function(ll){this._valid=true;this._bbox[0]=Math.min(this._bbox[0],ll[0]);this._bbox[1]=Math.min(this._bbox[1],ll[1]);this._bbox[2]=Math.max(this._bbox[2],ll[0]);this._bbox[3]=Math.max(this._bbox[3],ll[1]);return this};Extent.prototype.equals=function(_){var other;if(_ instanceof Extent){other=_.bbox()}else{other=_}return this._bbox[0]==other[0]&&this._bbox[1]==other[1]&&this._bbox[2]==other[2]&&this._bbox[3]==other[3]};Extent.prototype.center=function(_){if(!this._valid){return null}return[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]};Extent.prototype.union=function(_){this._valid=true;var other;if(_ instanceof Extent){other=_.bbox()}else{other=_}this._bbox[0]=Math.min(this._bbox[0],other[0]);this._bbox[1]=Math.min(this._bbox[1],other[1]);this._bbox[2]=Math.max(this._bbox[2],other[2]);this._bbox[3]=Math.max(this._bbox[3],other[3]);return this};Extent.prototype.bbox=function(){if(!this._valid){return null}return this._bbox};Extent.prototype.contains=function(ll){if(!ll){return this._fastContains()}if(!this._valid){return null}var lon=ll[0],lat=ll[1];return this._bbox[0]<=lon&&this._bbox[1]<=lat&&this._bbox[2]>=lon&&this._bbox[3]>=lat};Extent.prototype.intersect=function(_){if(!this._valid){return null}var other;if(_ instanceof Extent){other=_.bbox()}else{other=_}return!(this._bbox[0]>other[2]||this._bbox[2]<other[0]||this._bbox[3]<other[1]||this._bbox[1]>other[3])};Extent.prototype._fastContains=function(){if(!this._valid){return new Function("return null;")}var body="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",body)};Extent.prototype.polygon=function(){if(!this._valid){return null}return{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}};var geojsonTypesByDataAttributes={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]};var dataAttributes=Object.keys(geojsonTypesByDataAttributes);var geojsonExtent=function(_){return getExtent(_).bbox()};var polygon=function(_){return getExtent(_).polygon()};var bboxify=function(_){return traverse_1(_).map((function(value){if(!value){return}var isValid=dataAttributes.some((function(attribute){if(value[attribute]){return geojsonTypesByDataAttributes[attribute].indexOf(value.type)!==-1}return false}));if(isValid){value.bbox=getExtent(value).bbox();this.update(value)}}))};function getExtent(_){var ext=extent(),coords=geojsonCoords(_);for(var i=0;i<coords.length;i++){ext.include(coords[i])}return ext}geojsonExtent.polygon=polygon;geojsonExtent.bboxify=bboxify;var LAT_MIN$1=LAT_MIN;var LAT_MAX$1=LAT_MAX;var LAT_RENDERED_MIN$1=LAT_RENDERED_MIN;var LAT_RENDERED_MAX$1=LAT_RENDERED_MAX;var LNG_MIN$1=LNG_MIN;var LNG_MAX$1=LNG_MAX;function constrainFeatureMovement(geojsonFeatures,delta){var northInnerEdge=LAT_MIN$1;var southInnerEdge=LAT_MAX$1;var northOuterEdge=LAT_MIN$1;var southOuterEdge=LAT_MAX$1;var westEdge=LNG_MAX$1;var eastEdge=LNG_MIN$1;geojsonFeatures.forEach((function(feature){var bounds=geojsonExtent(feature);var featureSouthEdge=bounds[1];var featureNorthEdge=bounds[3];var featureWestEdge=bounds[0];var featureEastEdge=bounds[2];if(featureSouthEdge>northInnerEdge){northInnerEdge=featureSouthEdge}if(featureNorthEdge<southInnerEdge){southInnerEdge=featureNorthEdge}if(featureNorthEdge>northOuterEdge){northOuterEdge=featureNorthEdge}if(featureSouthEdge<southOuterEdge){southOuterEdge=featureSouthEdge}if(featureWestEdge<westEdge){westEdge=featureWestEdge}if(featureEastEdge>eastEdge){eastEdge=featureEastEdge}}));var constrainedDelta=delta;if(northInnerEdge+constrainedDelta.lat>LAT_RENDERED_MAX$1){constrainedDelta.lat=LAT_RENDERED_MAX$1-northInnerEdge}if(northOuterEdge+constrainedDelta.lat>LAT_MAX$1){constrainedDelta.lat=LAT_MAX$1-northOuterEdge}if(southInnerEdge+constrainedDelta.lat<LAT_RENDERED_MIN$1){constrainedDelta.lat=LAT_RENDERED_MIN$1-southInnerEdge}if(southOuterEdge+constrainedDelta.lat<LAT_MIN$1){constrainedDelta.lat=LAT_MIN$1-southOuterEdge}if(westEdge+constrainedDelta.lng<=LNG_MIN$1){constrainedDelta.lng+=Math.ceil(Math.abs(constrainedDelta.lng)/360)*360}if(eastEdge+constrainedDelta.lng>=LNG_MAX$1){constrainedDelta.lng-=Math.ceil(Math.abs(constrainedDelta.lng)/360)*360}return constrainedDelta}function moveFeatures(features,delta){var constrainedDelta=constrainFeatureMovement(features.map((function(feature){return feature.toGeoJSON()})),delta);features.forEach((function(feature){var currentCoordinates=feature.getCoordinates();var moveCoordinate=function(coord){var point={lng:coord[0]+constrainedDelta.lng,lat:coord[1]+constrainedDelta.lat};return[point.lng,point.lat]};var moveRing=function(ring){return ring.map((function(coord){return moveCoordinate(coord)}))};var moveMultiPolygon=function(multi){return multi.map((function(ring){return moveRing(ring)}))};var nextCoordinates;if(feature.type===geojsonTypes.POINT){nextCoordinates=moveCoordinate(currentCoordinates)}else if(feature.type===geojsonTypes.LINE_STRING||feature.type===geojsonTypes.MULTI_POINT){nextCoordinates=currentCoordinates.map(moveCoordinate)}else if(feature.type===geojsonTypes.POLYGON||feature.type===geojsonTypes.MULTI_LINE_STRING){nextCoordinates=currentCoordinates.map(moveRing)}else if(feature.type===geojsonTypes.MULTI_POLYGON){nextCoordinates=currentCoordinates.map(moveMultiPolygon)}feature.incomingCoords(nextCoordinates)}))}var SimpleSelect={};SimpleSelect.onSetup=function(opts){var this$1=this;var state={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:undefined,boxSelecting:false,canBoxSelect:false,dragMoving:false,canDragMove:false,initiallySelectedFeatureIds:opts.featureIds||[]};this.setSelected(state.initiallySelectedFeatureIds.filter((function(id){return this$1.getFeature(id)!==undefined})));this.fireActionable();this.setActionableState({combineFeatures:true,uncombineFeatures:true,trash:true});return state};SimpleSelect.fireUpdate=function(){this.map.fire(events.UPDATE,{action:updateActions.MOVE,features:this.getSelected().map((function(f){return f.toGeoJSON()}))})};SimpleSelect.fireActionable=function(){var this$1=this;var selectedFeatures=this.getSelected();var multiFeatures=selectedFeatures.filter((function(feature){return this$1.isInstanceOf("MultiFeature",feature)}));var combineFeatures=false;if(selectedFeatures.length>1){combineFeatures=true;var featureType=selectedFeatures[0].type.replace("Multi","");selectedFeatures.forEach((function(feature){if(feature.type.replace("Multi","")!==featureType){combineFeatures=false}}))}var uncombineFeatures=multiFeatures.length>0;var trash=selectedFeatures.length>0;this.setActionableState({combineFeatures:combineFeatures,uncombineFeatures:uncombineFeatures,trash:trash})};SimpleSelect.getUniqueIds=function(allFeatures){if(!allFeatures.length){return[]}var ids=allFeatures.map((function(s){return s.properties.id})).filter((function(id){return id!==undefined})).reduce((function(memo,id){memo.add(id);return memo}),new StringSet);return ids.values()};SimpleSelect.stopExtendedInteractions=function(state){if(state.boxSelectElement){if(state.boxSelectElement.parentNode){state.boxSelectElement.parentNode.removeChild(state.boxSelectElement)}state.boxSelectElement=null}this.map.dragPan.enable();state.boxSelecting=false;state.canBoxSelect=false;state.dragMoving=false;state.canDragMove=false};SimpleSelect.onStop=function(){doubleClickZoom.enable(this)};SimpleSelect.onMouseMove=function(state){return this.stopExtendedInteractions(state)};SimpleSelect.onMouseOut=function(state){if(state.dragMoving){return this.fireUpdate()}};SimpleSelect.onTap=SimpleSelect.onClick=function(state,e){if(noTarget(e)){return this.clickAnywhere(state,e)}if(isOfMetaType(meta.VERTEX)(e)){return this.clickOnVertex(state,e)}if(isFeature(e)){return this.clickOnFeature(state,e)}};SimpleSelect.clickAnywhere=function(state){var this$1=this;var wasSelected=this.getSelectedIds();if(wasSelected.length){this.clearSelectedFeatures();wasSelected.forEach((function(id){return this$1.doRender(id)}))}doubleClickZoom.enable(this);this.stopExtendedInteractions(state)};SimpleSelect.clickOnVertex=function(state,e){this.changeMode(modes.DIRECT_SELECT,{featureId:e.featureTarget.properties.parent,coordPath:e.featureTarget.properties.coord_path,startPos:e.lngLat});this.updateUIClasses({mouse:cursors.MOVE})};SimpleSelect.startOnActiveFeature=function(state,e){this.stopExtendedInteractions(state);this.map.dragPan.disable();this.doRender(e.featureTarget.properties.id);state.canDragMove=true;state.dragMoveLocation=e.lngLat};SimpleSelect.clickOnFeature=function(state,e){var this$1=this;doubleClickZoom.disable(this);this.stopExtendedInteractions(state);var isShiftClick=isShiftDown(e);var selectedFeatureIds=this.getSelectedIds();var featureId=e.featureTarget.properties.id;var isFeatureSelected=this.isSelected(featureId);if(!isShiftClick&&isFeatureSelected&&this.getFeature(featureId).type!==geojsonTypes.POINT){return this.changeMode(modes.DIRECT_SELECT,{featureId:featureId})}if(isFeatureSelected&&isShiftClick){this.deselect(featureId);this.updateUIClasses({mouse:cursors.POINTER});if(selectedFeatureIds.length===1){doubleClickZoom.enable(this)}}else if(!isFeatureSelected&&isShiftClick){this.select(featureId);this.updateUIClasses({mouse:cursors.MOVE})}else if(!isFeatureSelected&&!isShiftClick){selectedFeatureIds.forEach((function(id){return this$1.doRender(id)}));this.setSelected(featureId);this.updateUIClasses({mouse:cursors.MOVE})}this.doRender(featureId)};SimpleSelect.onMouseDown=function(state,e){if(isActiveFeature(e)){return this.startOnActiveFeature(state,e)}if(this.drawConfig.boxSelect&&isShiftMousedown(e)){return this.startBoxSelect(state,e)}};SimpleSelect.startBoxSelect=function(state,e){this.stopExtendedInteractions(state);this.map.dragPan.disable();state.boxSelectStartLocation=mouseEventPoint(e.originalEvent,this.map.getContainer());state.canBoxSelect=true};SimpleSelect.onTouchStart=function(state,e){if(isActiveFeature(e)){return this.startOnActiveFeature(state,e)}};SimpleSelect.onDrag=function(state,e){if(state.canDragMove){return this.dragMove(state,e)}if(this.drawConfig.boxSelect&&state.canBoxSelect){return this.whileBoxSelect(state,e)}};SimpleSelect.whileBoxSelect=function(state,e){state.boxSelecting=true;this.updateUIClasses({mouse:cursors.ADD});if(!state.boxSelectElement){state.boxSelectElement=document.createElement("div");state.boxSelectElement.classList.add(classes.BOX_SELECT);this.map.getContainer().appendChild(state.boxSelectElement)}var current=mouseEventPoint(e.originalEvent,this.map.getContainer());var minX=Math.min(state.boxSelectStartLocation.x,current.x);var maxX=Math.max(state.boxSelectStartLocation.x,current.x);var minY=Math.min(state.boxSelectStartLocation.y,current.y);var maxY=Math.max(state.boxSelectStartLocation.y,current.y);var translateValue="translate("+minX+"px, "+minY+"px)";state.boxSelectElement.style.transform=translateValue;state.boxSelectElement.style.WebkitTransform=translateValue;state.boxSelectElement.style.width=maxX-minX+"px";state.boxSelectElement.style.height=maxY-minY+"px"};SimpleSelect.dragMove=function(state,e){state.dragMoving=true;e.originalEvent.stopPropagation();var delta={lng:e.lngLat.lng-state.dragMoveLocation.lng,lat:e.lngLat.lat-state.dragMoveLocation.lat};moveFeatures(this.getSelected(),delta);state.dragMoveLocation=e.lngLat};SimpleSelect.onMouseUp=function(state,e){var this$1=this;if(state.dragMoving){this.fireUpdate()}else if(state.boxSelecting){var bbox=[state.boxSelectStartLocation,mouseEventPoint(e.originalEvent,this.map.getContainer())];var featuresInBox=this.featuresAt(null,bbox,"click");var idsToSelect=this.getUniqueIds(featuresInBox).filter((function(id){return!this$1.isSelected(id)}));if(idsToSelect.length){this.select(idsToSelect);idsToSelect.forEach((function(id){return this$1.doRender(id)}));this.updateUIClasses({mouse:cursors.MOVE})}}this.stopExtendedInteractions(state)};SimpleSelect.toDisplayFeatures=function(state,geojson,display){geojson.properties.active=this.isSelected(geojson.properties.id)?activeStates.ACTIVE:activeStates.INACTIVE;display(geojson);this.fireActionable();if(geojson.properties.active!==activeStates.ACTIVE||geojson.geometry.type===geojsonTypes.POINT){return}createSupplementaryPoints(geojson).forEach(display)};SimpleSelect.onTrash=function(){this.deleteFeature(this.getSelectedIds());this.fireActionable()};SimpleSelect.onCombineFeatures=function(){var selectedFeatures=this.getSelected();if(selectedFeatures.length===0||selectedFeatures.length<2){return}var coordinates=[],featuresCombined=[];var featureType=selectedFeatures[0].type.replace("Multi","");for(var i=0;i<selectedFeatures.length;i++){var feature=selectedFeatures[i];if(feature.type.replace("Multi","")!==featureType){return}if(feature.type.includes("Multi")){feature.getCoordinates().forEach((function(subcoords){coordinates.push(subcoords)}))}else{coordinates.push(feature.getCoordinates())}featuresCombined.push(feature.toGeoJSON())}if(featuresCombined.length>1){var multiFeature=this.newFeature({type:geojsonTypes.FEATURE,properties:featuresCombined[0].properties,geometry:{type:"Multi"+featureType,coordinates:coordinates}});this.addFeature(multiFeature);this.deleteFeature(this.getSelectedIds(),{silent:true});this.setSelected([multiFeature.id]);this.map.fire(events.COMBINE_FEATURES,{createdFeatures:[multiFeature.toGeoJSON()],deletedFeatures:featuresCombined})}this.fireActionable()};SimpleSelect.onUncombineFeatures=function(){var this$1=this;var selectedFeatures=this.getSelected();if(selectedFeatures.length===0){return}var createdFeatures=[];var featuresUncombined=[];var loop=function(i){var feature=selectedFeatures[i];if(this$1.isInstanceOf("MultiFeature",feature)){feature.getFeatures().forEach((function(subFeature){this$1.addFeature(subFeature);subFeature.properties=feature.properties;createdFeatures.push(subFeature.toGeoJSON());this$1.select([subFeature.id])}));this$1.deleteFeature(feature.id,{silent:true});featuresUncombined.push(feature.toGeoJSON())}};for(var i=0;i<selectedFeatures.length;i++)loop(i);if(createdFeatures.length>1){this.map.fire(events.UNCOMBINE_FEATURES,{createdFeatures:createdFeatures,deletedFeatures:featuresUncombined})}this.fireActionable()};var isVertex$1=isOfMetaType(meta.VERTEX);var isMidpoint=isOfMetaType(meta.MIDPOINT);var DirectSelect={};DirectSelect.fireUpdate=function(){this.map.fire(events.UPDATE,{action:updateActions.CHANGE_COORDINATES,features:this.getSelected().map((function(f){return f.toGeoJSON()}))})};DirectSelect.fireActionable=function(state){this.setActionableState({combineFeatures:false,uncombineFeatures:false,trash:state.selectedCoordPaths.length>0})};DirectSelect.startDragging=function(state,e){this.map.dragPan.disable();state.canDragMove=true;state.dragMoveLocation=e.lngLat};DirectSelect.stopDragging=function(state){this.map.dragPan.enable();state.dragMoving=false;state.canDragMove=false;state.dragMoveLocation=null};DirectSelect.onVertex=function(state,e){this.startDragging(state,e);var about=e.featureTarget.properties;var selectedIndex=state.selectedCoordPaths.indexOf(about.coord_path);if(!isShiftDown(e)&&selectedIndex===-1){state.selectedCoordPaths=[about.coord_path]}else if(isShiftDown(e)&&selectedIndex===-1){state.selectedCoordPaths.push(about.coord_path)}var selectedCoordinates=this.pathsToCoordinates(state.featureId,state.selectedCoordPaths);this.setSelectedCoordinates(selectedCoordinates)};DirectSelect.onMidpoint=function(state,e){this.startDragging(state,e);var about=e.featureTarget.properties;state.feature.addCoordinate(about.coord_path,about.lng,about.lat);this.fireUpdate();state.selectedCoordPaths=[about.coord_path]};DirectSelect.pathsToCoordinates=function(featureId,paths){return paths.map((function(coord_path){return{feature_id:featureId,coord_path:coord_path}}))};DirectSelect.onFeature=function(state,e){if(state.selectedCoordPaths.length===0){this.startDragging(state,e)}else{this.stopDragging(state)}};DirectSelect.dragFeature=function(state,e,delta){moveFeatures(this.getSelected(),delta);state.dragMoveLocation=e.lngLat};DirectSelect.dragVertex=function(state,e,delta){var selectedCoords=state.selectedCoordPaths.map((function(coord_path){return state.feature.getCoordinate(coord_path)}));var selectedCoordPoints=selectedCoords.map((function(coords){return{type:geojsonTypes.FEATURE,properties:{},geometry:{type:geojsonTypes.POINT,coordinates:coords}}}));var constrainedDelta=constrainFeatureMovement(selectedCoordPoints,delta);for(var i=0;i<selectedCoords.length;i++){var coord=selectedCoords[i];state.feature.updateCoordinate(state.selectedCoordPaths[i],coord[0]+constrainedDelta.lng,coord[1]+constrainedDelta.lat)}};DirectSelect.clickNoTarget=function(){this.changeMode(modes.SIMPLE_SELECT)};DirectSelect.clickInactive=function(){this.changeMode(modes.SIMPLE_SELECT)};DirectSelect.clickActiveFeature=function(state){state.selectedCoordPaths=[];this.clearSelectedCoordinates();state.feature.changed()};DirectSelect.onSetup=function(opts){var featureId=opts.featureId;var feature=this.getFeature(featureId);if(!feature){throw new Error("You must provide a featureId to enter direct_select mode")}if(feature.type===geojsonTypes.POINT){throw new TypeError("direct_select mode doesn't handle point features")}var state={featureId:featureId,feature:feature,dragMoveLocation:opts.startPos||null,dragMoving:false,canDragMove:false,selectedCoordPaths:opts.coordPath?[opts.coordPath]:[]};this.setSelectedCoordinates(this.pathsToCoordinates(featureId,state.selectedCoordPaths));this.setSelected(featureId);doubleClickZoom.disable(this);this.setActionableState({trash:true});return state};DirectSelect.onStop=function(){doubleClickZoom.enable(this);this.clearSelectedCoordinates()};DirectSelect.toDisplayFeatures=function(state,geojson,push){if(state.featureId===geojson.properties.id){geojson.properties.active=activeStates.ACTIVE;push(geojson);createSupplementaryPoints(geojson,{map:this.map,midpoints:true,selectedPaths:state.selectedCoordPaths}).forEach(push)}else{geojson.properties.active=activeStates.INACTIVE;push(geojson)}this.fireActionable(state)};DirectSelect.onTrash=function(state){state.selectedCoordPaths.sort((function(a,b){return b.localeCompare(a,"en",{numeric:true})})).forEach((function(id){return state.feature.removeCoordinate(id)}));this.fireUpdate();state.selectedCoordPaths=[];this.clearSelectedCoordinates();this.fireActionable(state);if(state.feature.isValid()===false){this.deleteFeature([state.featureId]);this.changeMode(modes.SIMPLE_SELECT,{})}};DirectSelect.onMouseMove=function(state,e){var isFeature=isActiveFeature(e);var onVertex=isVertex$1(e);var noCoords=state.selectedCoordPaths.length===0;if(isFeature&&noCoords){this.updateUIClasses({mouse:cursors.MOVE})}else if(onVertex&&!noCoords){this.updateUIClasses({mouse:cursors.MOVE})}else{this.updateUIClasses({mouse:cursors.NONE})}this.stopDragging(state)};DirectSelect.onMouseOut=function(state){if(state.dragMoving){this.fireUpdate()}};DirectSelect.onTouchStart=DirectSelect.onMouseDown=function(state,e){if(isVertex$1(e)){return this.onVertex(state,e)}if(isActiveFeature(e)){return this.onFeature(state,e)}if(isMidpoint(e)){return this.onMidpoint(state,e)}};DirectSelect.onDrag=function(state,e){if(state.canDragMove!==true){return}state.dragMoving=true;e.originalEvent.stopPropagation();var delta={lng:e.lngLat.lng-state.dragMoveLocation.lng,lat:e.lngLat.lat-state.dragMoveLocation.lat};if(state.selectedCoordPaths.length>0){this.dragVertex(state,e,delta)}else{this.dragFeature(state,e,delta)}state.dragMoveLocation=e.lngLat};DirectSelect.onClick=function(state,e){if(noTarget(e)){return this.clickNoTarget(state,e)}if(isActiveFeature(e)){return this.clickActiveFeature(state,e)}if(isInactiveFeature(e)){return this.clickInactive(state,e)}this.stopDragging(state)};DirectSelect.onTap=function(state,e){if(noTarget(e)){return this.clickNoTarget(state,e)}if(isActiveFeature(e)){return this.clickActiveFeature(state,e)}if(isInactiveFeature(e)){return this.clickInactive(state,e)}};DirectSelect.onTouchEnd=DirectSelect.onMouseUp=function(state){if(state.dragMoving){this.fireUpdate()}this.stopDragging(state)};var DrawPoint={};DrawPoint.onSetup=function(){var point=this.newFeature({type:geojsonTypes.FEATURE,properties:{},geometry:{type:geojsonTypes.POINT,coordinates:[]}});this.addFeature(point);this.clearSelectedFeatures();this.updateUIClasses({mouse:cursors.ADD});this.activateUIButton(types.POINT);this.setActionableState({trash:true});return{point:point}};DrawPoint.stopDrawingAndRemove=function(state){this.deleteFeature([state.point.id],{silent:true});this.changeMode(modes.SIMPLE_SELECT)};DrawPoint.onTap=DrawPoint.onClick=function(state,e){this.updateUIClasses({mouse:cursors.MOVE});state.point.updateCoordinate("",e.lngLat.lng,e.lngLat.lat);this.map.fire(events.CREATE,{features:[state.point.toGeoJSON()]});this.changeMode(modes.SIMPLE_SELECT,{featureIds:[state.point.id]})};DrawPoint.onStop=function(state){this.activateUIButton();if(!state.point.getCoordinate().length){this.deleteFeature([state.point.id],{silent:true})}};DrawPoint.toDisplayFeatures=function(state,geojson,display){var isActivePoint=geojson.properties.id===state.point.id;geojson.properties.active=isActivePoint?activeStates.ACTIVE:activeStates.INACTIVE;if(!isActivePoint){return display(geojson)}};DrawPoint.onTrash=DrawPoint.stopDrawingAndRemove;DrawPoint.onKeyUp=function(state,e){if(isEscapeKey(e)||isEnterKey(e)){return this.stopDrawingAndRemove(state,e)}};function isEventAtCoordinates(event,coordinates){if(!event.lngLat){return false}return event.lngLat.lng===coordinates[0]&&event.lngLat.lat===coordinates[1]}var DrawPolygon={};DrawPolygon.onSetup=function(){var polygon=this.newFeature({type:geojsonTypes.FEATURE,properties:{},geometry:{type:geojsonTypes.POLYGON,coordinates:[[]]}});this.addFeature(polygon);this.clearSelectedFeatures();doubleClickZoom.disable(this);this.updateUIClasses({mouse:cursors.ADD});this.activateUIButton(types.POLYGON);this.setActionableState({trash:true});return{polygon:polygon,currentVertexPosition:0}};DrawPolygon.clickAnywhere=function(state,e){if(state.currentVertexPosition>0&&isEventAtCoordinates(e,state.polygon.coordinates[0][state.currentVertexPosition-1])){return this.changeMode(modes.SIMPLE_SELECT,{featureIds:[state.polygon.id]})}this.updateUIClasses({mouse:cursors.ADD});state.polygon.updateCoordinate("0."+state.currentVertexPosition,e.lngLat.lng,e.lngLat.lat);state.currentVertexPosition++;state.polygon.updateCoordinate("0."+state.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)};DrawPolygon.clickOnVertex=function(state){return this.changeMode(modes.SIMPLE_SELECT,{featureIds:[state.polygon.id]})};DrawPolygon.onMouseMove=function(state,e){state.polygon.updateCoordinate("0."+state.currentVertexPosition,e.lngLat.lng,e.lngLat.lat);if(isVertex(e)){this.updateUIClasses({mouse:cursors.POINTER})}};DrawPolygon.onTap=DrawPolygon.onClick=function(state,e){if(isVertex(e)){return this.clickOnVertex(state,e)}return this.clickAnywhere(state,e)};DrawPolygon.onKeyUp=function(state,e){if(isEscapeKey(e)){this.deleteFeature([state.polygon.id],{silent:true});this.changeMode(modes.SIMPLE_SELECT)}else if(isEnterKey(e)){this.changeMode(modes.SIMPLE_SELECT,{featureIds:[state.polygon.id]})}};DrawPolygon.onStop=function(state){this.updateUIClasses({mouse:cursors.NONE});doubleClickZoom.enable(this);this.activateUIButton();if(this.getFeature(state.polygon.id)===undefined){return}state.polygon.removeCoordinate("0."+state.currentVertexPosition);if(state.polygon.isValid()){this.map.fire(events.CREATE,{features:[state.polygon.toGeoJSON()]})}else{this.deleteFeature([state.polygon.id],{silent:true});this.changeMode(modes.SIMPLE_SELECT,{},{silent:true})}};DrawPolygon.toDisplayFeatures=function(state,geojson,display){var isActivePolygon=geojson.properties.id===state.polygon.id;geojson.properties.active=isActivePolygon?activeStates.ACTIVE:activeStates.INACTIVE;if(!isActivePolygon){return display(geojson)}if(geojson.geometry.coordinates.length===0){return}var coordinateCount=geojson.geometry.coordinates[0].length;if(coordinateCount<3){return}geojson.properties.meta=meta.FEATURE;display(createVertex(state.polygon.id,geojson.geometry.coordinates[0][0],"0.0",false));if(coordinateCount>3){var endPos=geojson.geometry.coordinates[0].length-3;display(createVertex(state.polygon.id,geojson.geometry.coordinates[0][endPos],"0."+endPos,false))}if(coordinateCount<=4){var lineCoordinates=[[geojson.geometry.coordinates[0][0][0],geojson.geometry.coordinates[0][0][1]],[geojson.geometry.coordinates[0][1][0],geojson.geometry.coordinates[0][1][1]]];display({type:geojsonTypes.FEATURE,properties:geojson.properties,geometry:{coordinates:lineCoordinates,type:geojsonTypes.LINE_STRING}});if(coordinateCount===3){return}}return display(geojson)};DrawPolygon.onTrash=function(state){this.deleteFeature([state.polygon.id],{silent:true});this.changeMode(modes.SIMPLE_SELECT)};var DrawLineString={};DrawLineString.onSetup=function(opts){opts=opts||{};var featureId=opts.featureId;var line,currentVertexPosition;var direction="forward";if(featureId){line=this.getFeature(featureId);if(!line){throw new Error("Could not find a feature with the provided featureId")}var from=opts.from;if(from&&from.type==="Feature"&&from.geometry&&from.geometry.type==="Point"){from=from.geometry}if(from&&from.type==="Point"&&from.coordinates&&from.coordinates.length===2){from=from.coordinates}if(!from||!Array.isArray(from)){throw new Error("Please use the `from` property to indicate which point to continue the line from")}var lastCoord=line.coordinates.length-1;if(line.coordinates[lastCoord][0]===from[0]&&line.coordinates[lastCoord][1]===from[1]){currentVertexPosition=lastCoord+1;line.addCoordinate.apply(line,[currentVertexPosition].concat(line.coordinates[lastCoord]))}else if(line.coordinates[0][0]===from[0]&&line.coordinates[0][1]===from[1]){direction="backwards";currentVertexPosition=0;line.addCoordinate.apply(line,[currentVertexPosition].concat(line.coordinates[0]))}else{throw new Error("`from` should match the point at either the start or the end of the provided LineString")}}else{line=this.newFeature({type:geojsonTypes.FEATURE,properties:{},geometry:{type:geojsonTypes.LINE_STRING,coordinates:[]}});currentVertexPosition=0;this.addFeature(line)}this.clearSelectedFeatures();doubleClickZoom.disable(this);this.updateUIClasses({mouse:cursors.ADD});this.activateUIButton(types.LINE);this.setActionableState({trash:true});return{line:line,currentVertexPosition:currentVertexPosition,direction:direction}};DrawLineString.clickAnywhere=function(state,e){if(state.currentVertexPosition>0&&isEventAtCoordinates(e,state.line.coordinates[state.currentVertexPosition-1])||state.direction==="backwards"&&isEventAtCoordinates(e,state.line.coordinates[state.currentVertexPosition+1])){return this.changeMode(modes.SIMPLE_SELECT,{featureIds:[state.line.id]})}this.updateUIClasses({mouse:cursors.ADD});state.line.updateCoordinate(state.currentVertexPosition,e.lngLat.lng,e.lngLat.lat);if(state.direction==="forward"){state.currentVertexPosition++;state.line.updateCoordinate(state.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)}else{state.line.addCoordinate(0,e.lngLat.lng,e.lngLat.lat)}};DrawLineString.clickOnVertex=function(state){return this.changeMode(modes.SIMPLE_SELECT,{featureIds:[state.line.id]})};DrawLineString.onMouseMove=function(state,e){state.line.updateCoordinate(state.currentVertexPosition,e.lngLat.lng,e.lngLat.lat);if(isVertex(e)){this.updateUIClasses({mouse:cursors.POINTER})}};DrawLineString.onTap=DrawLineString.onClick=function(state,e){if(isVertex(e)){return this.clickOnVertex(state,e)}this.clickAnywhere(state,e)};DrawLineString.onKeyUp=function(state,e){if(isEnterKey(e)){this.changeMode(modes.SIMPLE_SELECT,{featureIds:[state.line.id]})}else if(isEscapeKey(e)){this.deleteFeature([state.line.id],{silent:true});this.changeMode(modes.SIMPLE_SELECT)}};DrawLineString.onStop=function(state){doubleClickZoom.enable(this);this.activateUIButton();if(this.getFeature(state.line.id)===undefined){return}state.line.removeCoordinate(""+state.currentVertexPosition);if(state.line.isValid()){this.map.fire(events.CREATE,{features:[state.line.toGeoJSON()]})}else{this.deleteFeature([state.line.id],{silent:true});this.changeMode(modes.SIMPLE_SELECT,{},{silent:true})}};DrawLineString.onTrash=function(state){this.deleteFeature([state.line.id],{silent:true});this.changeMode(modes.SIMPLE_SELECT)};DrawLineString.toDisplayFeatures=function(state,geojson,display){var isActiveLine=geojson.properties.id===state.line.id;geojson.properties.active=isActiveLine?activeStates.ACTIVE:activeStates.INACTIVE;if(!isActiveLine){return display(geojson)}if(geojson.geometry.coordinates.length<2){return}geojson.properties.meta=meta.FEATURE;display(createVertex(state.line.id,geojson.geometry.coordinates[state.direction==="forward"?geojson.geometry.coordinates.length-2:1],""+(state.direction==="forward"?geojson.geometry.coordinates.length-2:1),false));display(geojson)};var modes$1={simple_select:SimpleSelect,direct_select:DirectSelect,draw_point:DrawPoint,draw_polygon:DrawPolygon,draw_line_string:DrawLineString};var defaultOptions={defaultMode:modes.SIMPLE_SELECT,keybindings:true,touchEnabled:true,clickBuffer:2,touchBuffer:25,boxSelect:true,displayControlsDefault:true,styles:styles,modes:modes$1,controls:{},userProperties:false};var showControls={point:true,line_string:true,polygon:true,trash:true,combine_features:true,uncombine_features:true};var hideControls={point:false,line_string:false,polygon:false,trash:false,combine_features:false,uncombine_features:false};function addSources(styles,sourceBucket){return styles.map((function(style){if(style.source){return style}return immutable(style,{id:style.id+"."+sourceBucket,source:sourceBucket==="hot"?sources.HOT:sources.COLD})}))}function setupOptions(options){if(options===void 0)options={};var withDefaults=immutable(options);if(!options.controls){withDefaults.controls={}}if(options.displayControlsDefault===false){withDefaults.controls=immutable(hideControls,options.controls)}else{withDefaults.controls=immutable(showControls,options.controls)}withDefaults=immutable(defaultOptions,withDefaults);withDefaults.styles=addSources(withDefaults.styles,"cold").concat(addSources(withDefaults.styles,"hot"));return withDefaults}var lodash_isequal=createCommonjsModule((function(module,exports){var LARGE_ARRAY_SIZE=200;var HASH_UNDEFINED="__lodash_hash_undefined__";var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;var MAX_SAFE_INTEGER=9007199254740991;var argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",promiseTag="[object Promise]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^(?:0|[1-9]\d*)$/;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var freeExports=exports&&!exports.nodeType&&exports;var freeModule=freeExports&&"object"=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}function baseUnary(func){return function(value){return func(value)}}function cacheHas(cache,key){return cache.has(key)}function getValue(object,key){return object==null?undefined:object[key]}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach((function(value,key){result[++index]=[key,value]}));return result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function setToArray(set){var index=-1,result=Array(set.size);set.forEach((function(value){result[++index]=value}));return result}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root["__core-js_shared__"];var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();var nativeObjectToString=objectProto.toString;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Buffer=moduleExports?root.Buffer:undefined,Symbol=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,symToStringTag=Symbol?Symbol.toStringTag:undefined;var nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeKeys=overArg(Object.keys,Object);var DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create");var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined;function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[];this.size=0}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache;while(++index<length){this.add(values[index])}}function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this}function setCacheHas(value){return this.__data__.has(value)}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function stackClear(){this.__data__=new ListCache;this.size=0}function stackDelete(key){var data=this.__data__,result=data["delete"](key);this.size=data.size;return result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))){result.push(key)}}return result}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag;othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false}objIsArr=true;objIsObj=false}if(isSameTag&&!objIsObj){stack||(stack=new Stack);return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack)}if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack);return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag){return false}stack||(stack=new Stack);return equalObjects(object,other,bitmask,customizer,equalFunc,stack)}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!="constructor"){result.push(key)}}return result}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)}if(compared!==undefined){if(compared){continue}result=false;break}if(seen){if(!arraySome(other,(function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex)}}))){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break}}stack["delete"](array);stack["delete"](other);return result}function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false}object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false}return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false}var stacked=stack.get(object);if(stacked){return stacked==other}bitmask|=COMPARE_UNORDERED_FLAG;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack["delete"](object);return result;case symbolTag:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other)}}return false}function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key))){return false}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break}skipCtor||(skipCtor=key=="constructor")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){result=false}}stack["delete"](object);stack["delete"](other);return result}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[]}object=Object(object);return arrayFilter(nativeGetSymbols(object),(function(symbol){return propertyIsEnumerable.call(object,symbol)}))};var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag){getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}}return result}}function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=="number"||reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}function objectToString(value){return nativeObjectToString.call(value)}function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!==value&&other!==other}var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};var isArray=Array.isArray;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}var isBuffer=nativeIsBuffer||stubFalse;function isEqual(value,other){return baseIsEqual(value,other)}function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}function isObjectLike(value){return value!=null&&typeof value=="object"}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function stubArray(){return[]}function stubFalse(){return false}module.exports=isEqual}));function stringSetsAreEqual(a,b){if(a.length!==b.length){return false}return JSON.stringify(a.map((function(id){return id})).sort())===JSON.stringify(b.map((function(id){return id})).sort())}var jsonlint_1=createCommonjsModule((function(module,exports){var jsonlint=function(){var o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v){}return o},$V0=[1,12],$V1=[1,13],$V2=[1,9],$V3=[1,10],$V4=[1,11],$V5=[1,14],$V6=[1,15],$V7=[14,18,22,24],$V8=[18,22],$V9=[22,24];var parser={trace:function trace(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:this.$=yytext.replace(/\\(\\|")/g,"$"+"1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(yytext);break;case 3:this.$=null;break;case 4:this.$=true;break;case 5:this.$=false;break;case 6:return this.$=$$[$0-1];case 13:this.$={};Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:false});break;case 14:case 19:this.$=$$[$0-1];Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:false});break;case 15:this.$=[$$[$0-2],$$[$0]];break;case 16:this.$={};this.$[$$[$0][0]]=$$[$0][1];break;case 17:this.$=$$[$0-2];if($$[$0-2][$$[$0][0]]!==undefined){if(!this.$.__duplicateProperties__){Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:false})}this.$.__duplicateProperties__.push($$[$0][0])}$$[$0-2][$$[$0][0]]=$$[$0][1];break;case 18:this.$=[];Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:false});break;case 20:this.$=[$$[$0]];break;case 21:this.$=$$[$0-2];$$[$0-2].push($$[$0]);break}},table:[{3:5,4:$V0,5:6,6:$V1,7:3,8:$V2,9:4,10:$V3,11:$V4,12:1,13:2,15:7,16:8,17:$V5,23:$V6},{1:[3]},{14:[1,16]},o($V7,[2,7]),o($V7,[2,8]),o($V7,[2,9]),o($V7,[2,10]),o($V7,[2,11]),o($V7,[2,12]),o($V7,[2,3]),o($V7,[2,4]),o($V7,[2,5]),o([14,18,21,22,24],[2,1]),o($V7,[2,2]),{3:20,4:$V0,18:[1,17],19:18,20:19},{3:5,4:$V0,5:6,6:$V1,7:3,8:$V2,9:4,10:$V3,11:$V4,13:23,15:7,16:8,17:$V5,23:$V6,24:[1,21],25:22},{1:[2,6]},o($V7,[2,13]),{18:[1,24],22:[1,25]},o($V8,[2,16]),{21:[1,26]},o($V7,[2,18]),{22:[1,28],24:[1,27]},o($V9,[2,20]),o($V7,[2,14]),{3:20,4:$V0,20:29},{3:5,4:$V0,5:6,6:$V1,7:3,8:$V2,9:4,10:$V3,11:$V4,13:30,15:7,16:8,17:$V5,23:$V6},o($V7,[2,19]),{3:5,4:$V0,5:6,6:$V1,7:3,8:$V2,9:4,10:$V3,11:$V4,13:31,15:7,16:8,17:$V5,23:$V6},o($V8,[2,17]),o($V8,[2,15]),o($V9,[2,21])],defaultActions:{16:[2,6]},parseError:function parseError(str,hash){if(hash.recoverable){this.trace(str)}else{function _parseError(msg,hash){this.message=msg;this.hash=hash}_parseError.prototype=Error;throw new _parseError(str,hash)}},parse:function parse(input){var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,TERROR=2,EOF=1;var args=lstack.slice.call(arguments,1);var lexer=Object.create(this.lexer);var sharedState={yy:{}};for(var k in this.yy){if(Object.prototype.hasOwnProperty.call(this.yy,k)){sharedState.yy[k]=this.yy[k]}}lexer.setInput(input,sharedState.yy);sharedState.yy.lexer=lexer;sharedState.yy.parser=this;if(typeof lexer.yylloc=="undefined"){lexer.yylloc={}}var yyloc=lexer.yylloc;lstack.push(yyloc);var ranges=lexer.options&&lexer.options.ranges;if(typeof sharedState.yy.parseError==="function"){this.parseError=sharedState.yy.parseError}else{this.parseError=Object.getPrototypeOf(this).parseError}var lex=function(){var token;token=lexer.lex()||EOF;if(typeof token!=="number"){token=self.symbols_[token]||token}return token};var symbol,preErrorSymbol,state,action,r,yyval={},p,len,newState,expected;while(true){state=stack[stack.length-1];if(this.defaultActions[state]){action=this.defaultActions[state]}else{if(symbol===null||typeof symbol=="undefined"){symbol=lex()}action=table[state]&&table[state][symbol]}if(typeof action==="undefined"||!action.length||!action[0]){var errStr="";expected=[];for(p in table[state]){if(this.terminals_[p]&&p>TERROR){expected.push("'"+this.terminals_[p]+"'")}}if(lexer.showPosition){errStr="Parse error on line "+(yylineno+1)+":\n"+lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'"}else{errStr="Parse error on line "+(yylineno+1)+": Unexpected "+(symbol==EOF?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'")}this.parseError(errStr,{text:lexer.match,token:this.terminals_[symbol]||symbol,line:lexer.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1){throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol)}switch(action[0]){case 1:stack.push(symbol);vstack.push(lexer.yytext);lstack.push(lexer.yylloc);stack.push(action[1]);symbol=null;if(!preErrorSymbol){yyleng=lexer.yyleng;yytext=lexer.yytext;yylineno=lexer.yylineno;yyloc=lexer.yylloc}else{symbol=preErrorSymbol;preErrorSymbol=null}break;case 2:len=this.productions_[action[1]][1];yyval.$=vstack[vstack.length-len];yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column};if(ranges){yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]}r=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args));if(typeof r!=="undefined"){return r}if(len){stack=stack.slice(0,-1*len*2);vstack=vstack.slice(0,-1*len);lstack=lstack.slice(0,-1*len)}stack.push(this.productions_[action[1]][0]);vstack.push(yyval.$);lstack.push(yyval._$);newState=table[stack[stack.length-2]][stack[stack.length-1]];stack.push(newState);break;case 3:return true}}return true}};var lexer=function(){var lexer={EOF:1,parseError:function parseError(str,hash){if(this.yy.parser){this.yy.parser.parseError(str,hash)}else{throw new Error(str)}},setInput:function(input,yy){this.yy=yy||this.yy||{};this._input=input;this._more=this._backtrack=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges){this.yylloc.range=[0,0]}this.offset=0;return this},input:function(){var ch=this._input[0];this.yytext+=ch;this.yyleng++;this.offset++;this.match+=ch;this.matched+=ch;var lines=ch.match(/(?:\r\n?|\n).*/g);if(lines){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges){this.yylloc.range[1]++}this._input=this._input.slice(1);return ch},unput:function(ch){var len=ch.length;var lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-len);this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(lines.length-1){this.yylineno-=lines.length-1}var r=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len};if(this.options.ranges){this.yylloc.range=[r[0],r[0]+this.yyleng-len]}this.yyleng=this.yytext.length;return this},more:function(){this._more=true;return this},reject:function(){if(this.options.backtrack_lexer){this._backtrack=true}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}return this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;if(next.length<20){next+=this._input.substr(0,20-next.length)}return(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput();var c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},test_match:function(match,indexed_rule){var token,lines,backup;if(this.options.backtrack_lexer){backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done};if(this.options.ranges){backup.yylloc.range=this.yylloc.range.slice(0)}}lines=match[0].match(/(?:\r\n?|\n).*/g);if(lines){this.yylineno+=lines.length}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length};this.yytext+=match[0];this.match+=match[0];this.matches=match;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._backtrack=false;this._input=this._input.slice(match[0].length);this.matched+=match[0];token=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input){this.done=false}if(token){return token}else if(this._backtrack){for(var k in backup){this[k]=backup[k]}return false}return false},next:function(){if(this.done){return this.EOF}if(!this._input){this.done=true}var token,match,tempMatch,index;if(!this._more){this.yytext="";this.match=""}var rules=this._currentRules();for(var i=0;i<rules.length;i++){tempMatch=this._input.match(this.rules[rules[i]]);if(tempMatch&&(!match||tempMatch[0].length>match[0].length)){match=tempMatch;index=i;if(this.options.backtrack_lexer){token=this.test_match(tempMatch,rules[i]);if(token!==false){return token}else if(this._backtrack){match=false;continue}else{return false}}else if(!this.options.flex){break}}}if(match){token=this.test_match(match,rules[index]);if(token!==false){return token}return false}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function lex(){var r=this.next();if(r){return r}else{return this.lex()}},begin:function begin(condition){this.conditionStack.push(condition)},popState:function popState(){var n=this.conditionStack.length-1;if(n>0){return this.conditionStack.pop()}else{return this.conditionStack[0]}},_currentRules:function _currentRules(){if(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules}else{return this.conditions["INITIAL"].rules}},topState:function topState(n){n=this.conditionStack.length-1-Math.abs(n||0);if(n>=0){return this.conditionStack[n]}else{return"INITIAL"}},pushState:function pushState(condition){this.begin(condition)},stateStackSize:function stateStackSize(){return this.conditionStack.length},options:{},performAction:function anonymous(yy,yy_,$avoiding_name_collisions,YY_START){switch($avoiding_name_collisions){case 0:break;case 1:return 6;case 2:yy_.yytext=yy_.yytext.substr(1,yy_.yyleng-2);return 4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:true}}};return lexer}();parser.lexer=lexer;function Parser(){this.yy={}}Parser.prototype=parser;parser.Parser=Parser;return new Parser}();if(typeof commonjsRequire!=="undefined"&&"object"!=="undefined"){exports.parser=jsonlint;exports.Parser=jsonlint.Parser;exports.parse=function(){return jsonlint.parse.apply(jsonlint,arguments)};exports.main=function commonjsMain(args){if(!args[1]){console.log("Usage: "+args[0]+" FILE");process.exit(1)}var source=fs.readFileSync(path.normalize(args[1]),"utf8");return exports.parser.parse(source)};if(commonjsRequire.main===module){exports.main(process.argv.slice(1))}}}));var jsonlint_2=jsonlint_1.parser;var jsonlint_3=jsonlint_1.Parser;var jsonlint_4=jsonlint_1.parse;var jsonlint_5=jsonlint_1.main;function rad$1(x){return x*Math.PI/180}function isRingClockwise(coords){var area=0;if(coords.length>2){var p1,p2;for(var i=0;i<coords.length-1;i++){p1=coords[i];p2=coords[i+1];area+=rad$1(p2[0]-p1[0])*(2+Math.sin(rad$1(p1[1]))+Math.sin(rad$1(p2[1])))}}return area>=0}function isPolyRHR(coords){if(coords&&coords.length>0){if(isRingClockwise(coords[0])){return false}var interiorCoords=coords.slice(1,coords.length);if(!interiorCoords.every(isRingClockwise)){return false}}return true}function rightHandRule(geometry){if(geometry.type==="Polygon"){return isPolyRHR(geometry.coordinates)}else if(geometry.type==="MultiPolygon"){return geometry.coordinates.every(isPolyRHR)}}var rhr=function validateRightHandRule(geometry,errors){if(!rightHandRule(geometry)){errors.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:geometry.__line__})}};function hint(gj,options){var errors=[];var precisionWarningCount=0;var maxPrecisionWarnings=10;var maxPrecision=6;function root(_){if((!options||options.noDuplicateMembers!==false)&&_.__duplicateProperties__){errors.push({message:"An object contained duplicate members, making parsing ambigous: "+_.__duplicateProperties__.join(", "),line:_.__line__})}if(requiredProperty(_,"type","string")){return}if(!types[_.type]){var expectedType=typesLower[_.type.toLowerCase()];if(expectedType!==undefined){errors.push({message:"Expected "+expectedType+" but got "+_.type+" (case sensitive)",line:_.__line__})}else{errors.push({message:"The type "+_.type+" is unknown",line:_.__line__})}}else if(_){types[_.type](_)}}function everyIs(_,type){return _.every((function(x){return x!==null&&typeof x===type}))}function requiredProperty(_,name,type){if(typeof _[name]==="undefined"){return errors.push({message:'"'+name+'" member required',line:_.__line__})}else if(type==="array"){if(!Array.isArray(_[name])){return errors.push({message:'"'+name+'" member should be an array, but is an '+typeof _[name]+" instead",line:_.__line__})}}else if(type==="object"&&_[name]&&_[name].constructor!==Object){return errors.push({message:'"'+name+'" member should be '+type+", but is an "+_[name].constructor.name+" instead",line:_.__line__})}else if(type&&typeof _[name]!==type){return errors.push({message:'"'+name+'" member should be '+type+", but is an "+typeof _[name]+" instead",line:_.__line__})}}function FeatureCollection(featureCollection){crs(featureCollection);bbox(featureCollection);if(featureCollection.properties!==undefined){errors.push({message:'FeatureCollection object cannot contain a "properties" member',line:featureCollection.__line__})}if(featureCollection.coordinates!==undefined){errors.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:featureCollection.__line__})}if(!requiredProperty(featureCollection,"features","array")){if(!everyIs(featureCollection.features,"object")){return errors.push({message:"Every feature must be an object",line:featureCollection.__line__})}featureCollection.features.forEach(Feature)}}function position(_,line){if(!Array.isArray(_)){return errors.push({message:"position should be an array, is a "+typeof _+" instead",line:_.__line__||line})}if(_.length<2){return errors.push({message:"position must have 2 or more elements",line:_.__line__||line})}if(_.length>3){return errors.push({message:"position should not have more than 3 elements",level:"message",line:_.__line__||line})}if(!everyIs(_,"number")){return errors.push({message:"each element in a position must be a number",line:_.__line__||line})}if(options&&options.precisionWarning){if(precisionWarningCount===maxPrecisionWarnings){precisionWarningCount+=1;return errors.push({message:"truncated warnings: we've encountered coordinate precision warning "+maxPrecisionWarnings+" times, no more warnings will be reported",level:"message",line:_.__line__||line})}else if(precisionWarningCount<maxPrecisionWarnings){_.forEach((function(num){var precision=0;var decimalStr=String(num).split(".")[1];if(decimalStr!==undefined){precision=decimalStr.length}if(precision>maxPrecision){precisionWarningCount+=1;return errors.push({message:"precision of coordinates should be reduced",level:"message",line:_.__line__||line})}}))}}}function positionArray(coords,type,depth,line){if(line===undefined&&coords.__line__!==undefined){line=coords.__line__}if(depth===0){return position(coords,line)}if(depth===1&&type){if(type==="LinearRing"){if(!Array.isArray(coords[coords.length-1])){errors.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:line});return true}if(coords.length<4){errors.push({message:"a LinearRing of coordinates needs to have four or more positions",line:line})}if(coords.length&&(coords[coords.length-1].length!==coords[0].length||!coords[coords.length-1].every((function(pos,index){return coords[0][index]===pos})))){errors.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:line});return true}}else if(type==="Line"&&coords.length<2){return errors.push({message:"a line needs to have two or more coordinates to be valid",line:line})}}if(!Array.isArray(coords)){errors.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:line})}else{var results=coords.map((function(c){return positionArray(c,type,depth-1,c.__line__||line)}));return results.some((function(r){return r}))}}function crs(_){if(!_.crs){return}var defaultCRSName="urn:ogc:def:crs:OGC:1.3:CRS84";if(typeof _.crs==="object"&&_.crs.properties&&_.crs.properties.name===defaultCRSName){errors.push({message:"old-style crs member is not recommended, this object is equivalent to the default and should be removed",line:_.__line__})}else{errors.push({message:"old-style crs member is not recommended",line:_.__line__})}}function bbox(_){if(!_.bbox){return}if(Array.isArray(_.bbox)){if(!everyIs(_.bbox,"number")){errors.push({message:"each element in a bbox member must be a number",line:_.bbox.__line__})}if(!(_.bbox.length===4||_.bbox.length===6)){errors.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:_.bbox.__line__})}return errors.length}errors.push({message:"bbox member must be an array of numbers, but is a "+typeof _.bbox,line:_.__line__})}function geometrySemantics(geom){if(geom.properties!==undefined){errors.push({message:'geometry object cannot contain a "properties" member',line:geom.__line__})}if(geom.geometry!==undefined){errors.push({message:'geometry object cannot contain a "geometry" member',line:geom.__line__})}if(geom.features!==undefined){errors.push({message:'geometry object cannot contain a "features" member',line:geom.__line__})}}function Point(point){crs(point);bbox(point);geometrySemantics(point);if(!requiredProperty(point,"coordinates","array")){position(point.coordinates)}}function Polygon(polygon){crs(polygon);bbox(polygon);if(!requiredProperty(polygon,"coordinates","array")){if(!positionArray(polygon.coordinates,"LinearRing",2)){rhr(polygon,errors)}}}function MultiPolygon(multiPolygon){crs(multiPolygon);bbox(multiPolygon);if(!requiredProperty(multiPolygon,"coordinates","array")){if(!positionArray(multiPolygon.coordinates,"LinearRing",3)){rhr(multiPolygon,errors)}}}function LineString(lineString){crs(lineString);bbox(lineString);if(!requiredProperty(lineString,"coordinates","array")){positionArray(lineString.coordinates,"Line",1)}}function MultiLineString(multiLineString){crs(multiLineString);bbox(multiLineString);if(!requiredProperty(multiLineString,"coordinates","array")){positionArray(multiLineString.coordinates,"Line",2)}}function MultiPoint(multiPoint){crs(multiPoint);bbox(multiPoint);if(!requiredProperty(multiPoint,"coordinates","array")){positionArray(multiPoint.coordinates,"",1)}}function GeometryCollection(geometryCollection){crs(geometryCollection);bbox(geometryCollection);if(!requiredProperty(geometryCollection,"geometries","array")){if(!everyIs(geometryCollection.geometries,"object")){errors.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:geometryCollection.__line__})}if(geometryCollection.geometries.length===1){errors.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:geometryCollection.geometries.__line__})}geometryCollection.geometries.forEach((function(geometry){if(geometry){if(geometry.type==="GeometryCollection"){errors.push({message:"GeometryCollection should avoid nested geometry collections",line:geometryCollection.geometries.__line__})}root(geometry)}}))}}function Feature(feature){crs(feature);bbox(feature);if(feature.id!==undefined&&typeof feature.id!=="string"&&typeof feature.id!=="number"){errors.push({message:'Feature "id" member must have a string or number value',line:feature.__line__})}if(feature.features!==undefined){errors.push({message:'Feature object cannot contain a "features" member',line:feature.__line__})}if(feature.coordinates!==undefined){errors.push({message:'Feature object cannot contain a "coordinates" member',line:feature.__line__})}if(feature.type!=="Feature"){errors.push({message:"GeoJSON features must have a type=feature member",line:feature.__line__})}requiredProperty(feature,"properties","object");if(!requiredProperty(feature,"geometry","object")){if(feature.geometry){root(feature.geometry)}}}var types={Point:Point,Feature:Feature,MultiPoint:MultiPoint,LineString:LineString,MultiLineString:MultiLineString,FeatureCollection:FeatureCollection,GeometryCollection:GeometryCollection,Polygon:Polygon,MultiPolygon:MultiPolygon};var typesLower=Object.keys(types).reduce((function(prev,curr){prev[curr.toLowerCase()]=curr;return prev}),{});if(typeof gj!=="object"||gj===null||gj===undefined){errors.push({message:"The root of a GeoJSON object must be an object.",line:0});return errors}root(gj);errors.forEach((function(err){if({}.hasOwnProperty.call(err,"line")&&err.line===undefined){delete err.line}}));return errors}var hint_1=hint;var object={hint:hint_1};function hint$1(str,options){var gj,errors=[];if(typeof str==="object"){gj=str}else if(typeof str==="string"){try{gj=jsonlint_1.parse(str)}catch(e){var match=e.message.match(/line (\d+)/);var lineNumber=parseInt(match[1],10);return[{line:lineNumber-1,message:e.message,error:e}]}}else{return[{message:"Expected string or object as input",line:0}]}errors=errors.concat(object.hint(gj,options));return errors}var hint_1$1=hint$1;var lib={hint:hint_1$1};var featureTypes={Polygon:Polygon,LineString:LineString,Point:Point,MultiPolygon:MultiFeature,MultiLineString:MultiFeature,MultiPoint:MultiFeature};function setupAPI(ctx,api){api.modes=modes;api.getFeatureIdsAt=function(point){var features=featuresAt.click({point:point},null,ctx);return features.map((function(feature){return feature.properties.id}))};api.getSelectedIds=function(){return ctx.store.getSelectedIds()};api.getSelected=function(){return{type:geojsonTypes.FEATURE_COLLECTION,features:ctx.store.getSelectedIds().map((function(id){return ctx.store.get(id)})).map((function(feature){return feature.toGeoJSON()}))}};api.getSelectedPoints=function(){return{type:geojsonTypes.FEATURE_COLLECTION,features:ctx.store.getSelectedCoordinates().map((function(coordinate){return{type:geojsonTypes.FEATURE,properties:{},geometry:{type:geojsonTypes.POINT,coordinates:coordinate.coordinates}}}))}};api.set=function(featureCollection){if(featureCollection.type===undefined||featureCollection.type!==geojsonTypes.FEATURE_COLLECTION||!Array.isArray(featureCollection.features)){throw new Error("Invalid FeatureCollection")}var renderBatch=ctx.store.createRenderBatch();var toDelete=ctx.store.getAllIds().slice();var newIds=api.add(featureCollection);var newIdsLookup=new StringSet(newIds);toDelete=toDelete.filter((function(id){return!newIdsLookup.has(id)}));if(toDelete.length){api.delete(toDelete)}renderBatch();return newIds};api.add=function(geojson){var errors=lib.hint(geojson,{precisionWarning:false}).filter((function(e){return e.level!=="message"}));if(errors.length){throw new Error(errors[0].message)}var featureCollection=JSON.parse(JSON.stringify(geojsonNormalize(geojson)));var ids=featureCollection.features.map((function(feature){feature.id=feature.id||hat_1();if(feature.geometry===null){throw new Error("Invalid geometry: null")}if(ctx.store.get(feature.id)===undefined||ctx.store.get(feature.id).type!==feature.geometry.type){var Model=featureTypes[feature.geometry.type];if(Model===undefined){throw new Error("Invalid geometry type: "+feature.geometry.type+".")}var internalFeature=new Model(ctx,feature);ctx.store.add(internalFeature)}else{var internalFeature$1=ctx.store.get(feature.id);internalFeature$1.properties=feature.properties;if(!lodash_isequal(internalFeature$1.getCoordinates(),feature.geometry.coordinates)){internalFeature$1.incomingCoords(feature.geometry.coordinates)}}return feature.id}));ctx.store.render();return ids};api.get=function(id){var feature=ctx.store.get(id);if(feature){return feature.toGeoJSON()}};api.getAll=function(){return{type:geojsonTypes.FEATURE_COLLECTION,features:ctx.store.getAll().map((function(feature){return feature.toGeoJSON()}))}};api.delete=function(featureIds){ctx.store.delete(featureIds,{silent:true});if(api.getMode()===modes.DIRECT_SELECT&&!ctx.store.getSelectedIds().length){ctx.events.changeMode(modes.SIMPLE_SELECT,undefined,{silent:true})}else{ctx.store.render()}return api};api.deleteAll=function(){ctx.store.delete(ctx.store.getAllIds(),{silent:true});if(api.getMode()===modes.DIRECT_SELECT){ctx.events.changeMode(modes.SIMPLE_SELECT,undefined,{silent:true})}else{ctx.store.render()}return api};api.changeMode=function(mode,modeOptions){if(modeOptions===void 0)modeOptions={};if(mode===modes.SIMPLE_SELECT&&api.getMode()===modes.SIMPLE_SELECT){if(stringSetsAreEqual(modeOptions.featureIds||[],ctx.store.getSelectedIds())){return api}ctx.store.setSelected(modeOptions.featureIds,{silent:true});ctx.store.render();return api}if(mode===modes.DIRECT_SELECT&&api.getMode()===modes.DIRECT_SELECT&&modeOptions.featureId===ctx.store.getSelectedIds()[0]){return api}ctx.events.changeMode(mode,modeOptions,{silent:true});return api};api.getMode=function(){return ctx.events.getMode()};api.trash=function(){ctx.events.trash({silent:true});return api};api.combineFeatures=function(){ctx.events.combineFeatures({silent:true});return api};api.uncombineFeatures=function(){ctx.events.uncombineFeatures({silent:true});return api};api.setFeatureProperty=function(featureId,property,value){ctx.store.setFeatureProperty(featureId,property,value);return api};return api}var setupDraw=function(options,api){options=setupOptions(options);var ctx={options:options};api=setupAPI(ctx,api);ctx.api=api;var setup=runSetup(ctx);api.onAdd=setup.onAdd;api.onRemove=setup.onRemove;api.types=types;api.options=options;return api};function MapboxDraw(options){setupDraw(options,this)}MapboxDraw.modes=modes$1;return MapboxDraw}))}).call(this,__webpack_require__(55),__webpack_require__(60))},function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var doubleClickZoom={enable:function enable(ctx){setTimeout((function(){if(!ctx.map||!ctx.map.doubleClickZoom||!ctx._ctx||!ctx._ctx.store||!ctx._ctx.store.getInitialConfigValue)return;if(!ctx._ctx.store.getInitialConfigValue("doubleClickZoom"))return;ctx.map.doubleClickZoom.enable()}),0)},disable:function disable(ctx){setTimeout((function(){if(!ctx.map||!ctx.map.doubleClickZoom)return;ctx.map.doubleClickZoom.disable()}),0)}};var DrawRectangle={onSetup:function onSetup(opts){var rectangle=this.newFeature({type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[]]}});this.addFeature(rectangle);this.clearSelectedFeatures();doubleClickZoom.disable(this);this.updateUIClasses({mouse:"add"});this.setActionableState({trash:true});return{rectangle:rectangle}},onTap:function onTap(state,e){if(state.startPoint)this.onMouseMove(state,e);this.onClick(state,e)},onClick:function onClick(state,e){if(state.startPoint&&state.startPoint[0]!==e.lngLat.lng&&state.startPoint[1]!==e.lngLat.lat){this.updateUIClasses({mouse:"pointer"});state.endPoint=[e.lngLat.lng,e.lngLat.lat];this.changeMode("simple_select",{featuresId:state.rectangle.id})}var startPoint=[e.lngLat.lng,e.lngLat.lat];state.startPoint=startPoint},onMouseMove:function onMouseMove(state,e){if(state.startPoint){state.rectangle.updateCoordinate("0.0",state.startPoint[0],state.startPoint[1]);state.rectangle.updateCoordinate("0.1",e.lngLat.lng,state.startPoint[1]);state.rectangle.updateCoordinate("0.2",e.lngLat.lng,e.lngLat.lat);state.rectangle.updateCoordinate("0.3",state.startPoint[0],e.lngLat.lat);state.rectangle.updateCoordinate("0.4",state.startPoint[0],state.startPoint[1])}},onKeyUp:function onKeyUp(state,e){if(e.keyCode===27)return this.changeMode("simple_select")},onStop:function onStop(state){doubleClickZoom.enable(this);this.updateUIClasses({mouse:"none"});this.activateUIButton();if(this.getFeature(state.rectangle.id)===undefined)return;state.rectangle.removeCoordinate("0.4");if(state.rectangle.isValid()){this.map.fire("draw.create",{features:[state.rectangle.toGeoJSON()]})}else{this.deleteFeature([state.rectangle.id],{silent:true});this.changeMode("simple_select",{},{silent:true})}},toDisplayFeatures:function toDisplayFeatures(state,geojson,display){var isActivePolygon=geojson.properties.id===state.rectangle.id;geojson.properties.active=isActivePolygon?"true":"false";if(!isActivePolygon)return display(geojson);if(!state.startPoint)return;return display(geojson)},onTrash:function onTrash(state){this.deleteFeature([state.rectangle.id],{silent:true});this.changeMode("simple_select")}};exports.default=DrawRectangle},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"e3b1bd3256c6e2785c1c7786bf60a1a7.js"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"c6bd69137c1841bb0151a357d1bbc964.js"},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(313);case"v7light":return __webpack_require__(315);case"v8dark":return __webpack_require__(317);case"v8light":return __webpack_require__(319)}},function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(314);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(12);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".mapMapLayerWizardSelect__tooltip {\n  display: flex;\n  flex: 1; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(316);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(12);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".mapMapLayerWizardSelect__tooltip {\n  display: flex;\n  flex: 1; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(318);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(12);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".mapMapLayerWizardSelect__tooltip {\n  display: flex;\n  flex: 1; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(320);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(12);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".mapMapLayerWizardSelect__tooltip {\n  display: flex;\n  flex: 1; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var concatMap=__webpack_require__(322);var balanced=__webpack_require__(323);module.exports=expandTop;var escSlash="\0SLASH"+Math.random()+"\0";var escOpen="\0OPEN"+Math.random()+"\0";var escClose="\0CLOSE"+Math.random()+"\0";var escComma="\0COMMA"+Math.random()+"\0";var escPeriod="\0PERIOD"+Math.random()+"\0";function numeric(str){return parseInt(str,10)==str?parseInt(str,10):str.charCodeAt(0)}function escapeBraces(str){return str.split("\\\\").join(escSlash).split("\\{").join(escOpen).split("\\}").join(escClose).split("\\,").join(escComma).split("\\.").join(escPeriod)}function unescapeBraces(str){return str.split(escSlash).join("\\").split(escOpen).join("{").split(escClose).join("}").split(escComma).join(",").split(escPeriod).join(".")}function parseCommaParts(str){if(!str)return[""];var parts=[];var m=balanced("{","}",str);if(!m)return str.split(",");var pre=m.pre;var body=m.body;var post=m.post;var p=pre.split(",");p[p.length-1]+="{"+body+"}";var postParts=parseCommaParts(post);if(post.length){p[p.length-1]+=postParts.shift();p.push.apply(p,postParts)}parts.push.apply(parts,p);return parts}function expandTop(str){if(!str)return[];if(str.substr(0,2)==="{}"){str="\\{\\}"+str.substr(2)}return expand(escapeBraces(str),true).map(unescapeBraces)}function identity(e){return e}function embrace(str){return"{"+str+"}"}function isPadded(el){return/^-?0\d/.test(el)}function lte(i,y){return i<=y}function gte(i,y){return i>=y}function expand(str,isTop){var expansions=[];var m=balanced("{","}",str);if(!m||/\$$/.test(m.pre))return[str];var isNumericSequence=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(m.body);var isAlphaSequence=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(m.body);var isSequence=isNumericSequence||isAlphaSequence;var isOptions=m.body.indexOf(",")>=0;if(!isSequence&&!isOptions){if(m.post.match(/,.*\}/)){str=m.pre+"{"+m.body+escClose+m.post;return expand(str)}return[str]}var n;if(isSequence){n=m.body.split(/\.\./)}else{n=parseCommaParts(m.body);if(n.length===1){n=expand(n[0],false).map(embrace);if(n.length===1){var post=m.post.length?expand(m.post,false):[""];return post.map((function(p){return m.pre+n[0]+p}))}}}var pre=m.pre;var post=m.post.length?expand(m.post,false):[""];var N;if(isSequence){var x=numeric(n[0]);var y=numeric(n[1]);var width=Math.max(n[0].length,n[1].length);var incr=n.length==3?Math.abs(numeric(n[2])):1;var test=lte;var reverse=y<x;if(reverse){incr*=-1;test=gte}var pad=n.some(isPadded);N=[];for(var i=x;test(i,y);i+=incr){var c;if(isAlphaSequence){c=String.fromCharCode(i);if(c==="\\")c=""}else{c=String(i);if(pad){var need=width-c.length;if(need>0){var z=new Array(need+1).join("0");if(i<0)c="-"+z+c.slice(1);else c=z+c}}}N.push(c)}}else{N=concatMap(n,(function(el){return expand(el,false)}))}for(var j=0;j<N.length;j++){for(var k=0;k<post.length;k++){var expansion=pre+N[j]+post[k];if(!isTop||isSequence||expansion)expansions.push(expansion)}}return expansions}},function(module,exports){module.exports=function(xs,fn){var res=[];for(var i=0;i<xs.length;i++){var x=fn(xs[i],i);if(isArray(x))res.push.apply(res,x);else res.push(x)}return res};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},function(module,exports,__webpack_require__){"use strict";module.exports=balanced;function balanced(a,b,str){if(a instanceof RegExp)a=maybeMatch(a,str);if(b instanceof RegExp)b=maybeMatch(b,str);var r=range(a,b,str);return r&&{start:r[0],end:r[1],pre:str.slice(0,r[0]),body:str.slice(r[0]+a.length,r[1]),post:str.slice(r[1]+b.length)}}function maybeMatch(reg,str){var m=str.match(reg);return m?m[0]:null}balanced.range=range;function range(a,b,str){var begs,beg,left,right,result;var ai=str.indexOf(a);var bi=str.indexOf(b,ai+1);var i=ai;if(ai>=0&&bi>0){begs=[];left=str.length;while(i>=0&&!result){if(i==ai){begs.push(i);ai=str.indexOf(a,i+1)}else if(begs.length==1){result=[begs.pop(),bi]}else{beg=begs.pop();if(beg<left){left=beg;right=bi}bi=str.indexOf(b,i+1)}i=ai<bi&&ai>=0?ai:bi}if(begs.length){result=[left,right]}}return result}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(12);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-moz-box-shadow:0 0 2px rgba(0,0,0,.1);-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;-moz-animation:mapboxgl-spin 2s infinite linear;-o-animation:mapboxgl-spin 2s infinite linear;-ms-animation:mapboxgl-spin 2s infinite linear;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@-moz-keyframes mapboxgl-spin{0%{-moz-transform:rotate(0deg)}to{-moz-transform:rotate(1turn)}}@-o-keyframes mapboxgl-spin{0%{-o-transform:rotate(0deg)}to{-o-transform:rotate(1turn)}}@-ms-keyframes mapboxgl-spin{0%{-ms-transform:rotate(0deg)}to{-ms-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:0;margin:10px;position:relative;background-color:#fff;border-radius:3px 12px 12px 3px}.mapboxgl-ctrl-attrib.mapboxgl-compact:hover{padding:2px 24px 2px 4px;visibility:visible;margin-top:6px}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:hover,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:hover{padding:2px 4px 2px 24px;border-radius:12px 3px 3px 12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact:after{content:\"\";cursor:pointer;position:absolute;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-flex;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:\"\";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;-moz-animation:mapboxgl-user-location-dot-pulse 2s infinite;-ms-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:\"\";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@-ms-keyframes mapboxgl-user-location-dot-pulse{0%{-ms-transform:scale(1);opacity:1}70%{-ms-transform:scale(3);opacity:0}to{-ms-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{transform:scale(1);opacity:1}70%{transform:scale(3);opacity:0}to{transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}",""]);module.exports=exports},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;function createThunkMiddleware(extraArgument){return function(_ref){var dispatch=_ref.dispatch,getState=_ref.getState;return function(next){return function(action){if(typeof action==="function"){return action(dispatch,getState,extraArgument)}return next(action)}}}}var thunk=createThunkMiddleware();thunk.withExtraArgument=createThunkMiddleware;exports["default"]=thunk},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"MapEmbeddableInput",(function(){return types["MapEmbeddableInput"]}));__webpack_require__.d(__webpack_exports__,"MapEmbeddableOutput",(function(){return types["MapEmbeddableOutput"]}));__webpack_require__.d(__webpack_exports__,"MapEmbeddable",(function(){return map_embeddable_MapEmbeddable}));__webpack_require__.d(__webpack_exports__,"setKibanaVersion",(function(){return kibana_services["Q"]}));__webpack_require__.d(__webpack_exports__,"getKibanaVersion",(function(){return kibana_services["u"]}));__webpack_require__.d(__webpack_exports__,"setStartServices",(function(){return kibana_services["S"]}));__webpack_require__.d(__webpack_exports__,"getIndexPatternService",(function(){return kibana_services["p"]}));__webpack_require__.d(__webpack_exports__,"getAutocompleteService",(function(){return kibana_services["a"]}));__webpack_require__.d(__webpack_exports__,"getInspector",(function(){return kibana_services["q"]}));__webpack_require__.d(__webpack_exports__,"getFileUploadComponent",(function(){return kibana_services["m"]}));__webpack_require__.d(__webpack_exports__,"getUiSettings",(function(){return kibana_services["M"]}));__webpack_require__.d(__webpack_exports__,"getIsDarkMode",(function(){return kibana_services["s"]}));__webpack_require__.d(__webpack_exports__,"getIndexPatternSelectComponent",(function(){return kibana_services["o"]}));__webpack_require__.d(__webpack_exports__,"getHttp",(function(){return kibana_services["n"]}));__webpack_require__.d(__webpack_exports__,"getTimeFilter",(function(){return kibana_services["J"]}));__webpack_require__.d(__webpack_exports__,"getToasts",(function(){return kibana_services["K"]}));__webpack_require__.d(__webpack_exports__,"getSavedObjectsClient",(function(){return kibana_services["D"]}));__webpack_require__.d(__webpack_exports__,"getCoreChrome",(function(){return kibana_services["d"]}));__webpack_require__.d(__webpack_exports__,"getMapsCapabilities",(function(){return kibana_services["w"]}));__webpack_require__.d(__webpack_exports__,"getVisualizeCapabilities",(function(){return kibana_services["N"]}));__webpack_require__.d(__webpack_exports__,"getDocLinks",(function(){return kibana_services["h"]}));__webpack_require__.d(__webpack_exports__,"getCoreOverlays",(function(){return kibana_services["f"]}));__webpack_require__.d(__webpack_exports__,"getData",(function(){return kibana_services["g"]}));__webpack_require__.d(__webpack_exports__,"getSavedObjects",(function(){return kibana_services["C"]}));__webpack_require__.d(__webpack_exports__,"getUiActions",(function(){return kibana_services["L"]}));__webpack_require__.d(__webpack_exports__,"getCore",(function(){return kibana_services["c"]}));__webpack_require__.d(__webpack_exports__,"getNavigation",(function(){return kibana_services["y"]}));__webpack_require__.d(__webpack_exports__,"getCoreI18n",(function(){return kibana_services["e"]}));__webpack_require__.d(__webpack_exports__,"getSearchService",(function(){return kibana_services["F"]}));__webpack_require__.d(__webpack_exports__,"getEmbeddableService",(function(){return kibana_services["j"]}));__webpack_require__.d(__webpack_exports__,"getNavigateToApp",(function(){return kibana_services["x"]}));__webpack_require__.d(__webpack_exports__,"getSavedObjectsTagging",(function(){return kibana_services["E"]}));__webpack_require__.d(__webpack_exports__,"getPresentationUtilContext",(function(){return kibana_services["z"]}));__webpack_require__.d(__webpack_exports__,"setMapAppConfig",(function(){return kibana_services["R"]}));__webpack_require__.d(__webpack_exports__,"getMapAppConfig",(function(){return kibana_services["v"]}));__webpack_require__.d(__webpack_exports__,"getEnabled",(function(){return kibana_services["l"]}));__webpack_require__.d(__webpack_exports__,"getShowMapsInspectorAdapter",(function(){return kibana_services["H"]}));__webpack_require__.d(__webpack_exports__,"getPreserveDrawingBuffer",(function(){return kibana_services["A"]}));__webpack_require__.d(__webpack_exports__,"setKibanaCommonConfig",(function(){return kibana_services["P"]}));__webpack_require__.d(__webpack_exports__,"getKibanaCommonConfig",(function(){return kibana_services["t"]}));__webpack_require__.d(__webpack_exports__,"setEMSSettings",(function(){return kibana_services["O"]}));__webpack_require__.d(__webpack_exports__,"getEMSSettings",(function(){return kibana_services["i"]}));__webpack_require__.d(__webpack_exports__,"getEmsTileLayerId",(function(){return kibana_services["k"]}));__webpack_require__.d(__webpack_exports__,"getRegionmapLayers",(function(){return kibana_services["B"]}));__webpack_require__.d(__webpack_exports__,"getTilemap",(function(){return kibana_services["I"]}));__webpack_require__.d(__webpack_exports__,"getShareService",(function(){return kibana_services["G"]}));__webpack_require__.d(__webpack_exports__,"getIsAllowByValueEmbeddables",(function(){return kibana_services["r"]}));__webpack_require__.d(__webpack_exports__,"getChartsPaletteServiceGetColor",(function(){return kibana_services["b"]}));__webpack_require__.d(__webpack_exports__,"renderApp",(function(){return renderApp}));__webpack_require__.d(__webpack_exports__,"createSecurityLayerDescriptors",(function(){return createSecurityLayerDescriptors}));__webpack_require__.d(__webpack_exports__,"SecurityLayerWizardConfig",(function(){return SecurityLayerWizardConfig}));__webpack_require__.d(__webpack_exports__,"registerLayerWizard",(function(){return registerLayerWizard}));__webpack_require__.d(__webpack_exports__,"registerSource",(function(){return registerSource}));__webpack_require__.d(__webpack_exports__,"createTileMapLayerDescriptor",(function(){return createTileMapLayerDescriptor}));__webpack_require__.d(__webpack_exports__,"createRegionMapLayerDescriptor",(function(){return createRegionMapLayerDescriptor}));__webpack_require__.d(__webpack_exports__,"createBasemapLayerDescriptor",(function(){return createBasemapLayerDescriptor}));__webpack_require__.d(__webpack_exports__,"createESSearchSourceLayerDescriptor",(function(){return createLayerDescriptor}));var external_kbnSharedDeps_Lodash_=__webpack_require__(7);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);var external_kbnSharedDeps_React_=__webpack_require__(2);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var lib=__webpack_require__(48);var external_kbnSharedDeps_ReactDom_=__webpack_require__(37);var public_=__webpack_require__(41);var data_public_=__webpack_require__(13);const getFlyoutDisplay=({ui:ui})=>ui.flyoutDisplay;const getIsSetViewOpen=({ui:ui})=>ui.isSetViewOpen;const getIsLayerTOCOpen=({ui:ui})=>ui.isLayerTOCOpen;const getOpenTOCDetails=({ui:ui})=>ui.openTOCDetails;const getIsFullScreen=({ui:ui})=>ui.isFullScreen;const getIsReadOnly=({ui:ui})=>ui.isReadOnly;var kibana_services=__webpack_require__(4);let FLYOUT_STATE;(function(FLYOUT_STATE){FLYOUT_STATE["NONE"]="NONE";FLYOUT_STATE["LAYER_PANEL"]="LAYER_PANEL";FLYOUT_STATE["ADD_LAYER_WIZARD"]="ADD_LAYER_WIZARD";FLYOUT_STATE["MAP_SETTINGS_PANEL"]="MAP_SETTINGS_PANEL"})(FLYOUT_STATE||(FLYOUT_STATE={}));const DEFAULT_IS_LAYER_TOC_OPEN=true;const DEFAULT_MAP_UI_STATE={flyoutDisplay:FLYOUT_STATE.NONE,isFullScreen:false,isReadOnly:!Object(kibana_services["w"])().save,isLayerTOCOpen:DEFAULT_IS_LAYER_TOC_OPEN,isSetViewOpen:false,openTOCDetails:[]};function ui(state=DEFAULT_MAP_UI_STATE,action){switch(action.type){case UPDATE_FLYOUT:return{...state,flyoutDisplay:action.display};case CLOSE_SET_VIEW:return{...state,isSetViewOpen:false};case OPEN_SET_VIEW:return{...state,isSetViewOpen:true};case SET_IS_LAYER_TOC_OPEN:return{...state,isLayerTOCOpen:action.isLayerTOCOpen};case SET_FULL_SCREEN:return{...state,isFullScreen:action.isFullScreen};case SET_READ_ONLY:return{...state,isReadOnly:action.isReadOnly};case SET_OPEN_TOC_DETAILS:return{...state,openTOCDetails:action.layerIds};case SHOW_TOC_DETAILS:return{...state,openTOCDetails:[...state.openTOCDetails,action.layerId]};case HIDE_TOC_DETAILS:return{...state,openTOCDetails:state.openTOCDetails.filter(layerId=>layerId!==action.layerId)};default:return state}}var bbox_polygon=__webpack_require__(131);var bbox_polygon_default=__webpack_require__.n(bbox_polygon);var boolean_contains=__webpack_require__(132);var boolean_contains_default=__webpack_require__.n(boolean_contains);var reselect_lib=__webpack_require__(191);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(3);var v4=__webpack_require__(14);var v4_default=__webpack_require__.n(v4);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class DataRequest{constructor(descriptor){_defineProperty(this,"_descriptor",void 0);this._descriptor={...descriptor}}getData(){return this._descriptor.data}isLoading(){return!!this._descriptor.dataRequestToken}getMeta(){if(this._descriptor.dataMetaAtStart){return this._descriptor.dataMetaAtStart}else if(this._descriptor.dataMeta){return this._descriptor.dataMeta}else{return{}}}hasData(){return!!this._descriptor.data}hasDataOrRequestInProgress(){return this.hasData()||this.isLoading()}getDataId(){return this._descriptor.dataId}getRequestToken(){return this._descriptor.dataRequestToken}}class DataRequestAbortError extends Error{constructor(){super()}}var constants=__webpack_require__(0);const TRACKED_LAYER_DESCRIPTOR="__trackedLayerDescriptor";function copyPersistentState(input){if(typeof input!=="object"||input===null){return input}const copyInput=Array.isArray(input)?[]:{};for(const key in input){if(!key.startsWith("__")){copyInput[key]=copyPersistentState(input[key])}}return copyInput}function getJoinAggKey({aggType:aggType,aggFieldName:aggFieldName,rightSourceId:rightSourceId}){const metricKey=aggType!==constants["AGG_TYPE"].COUNT?`${aggType}${constants["AGG_DELIMITER"]}${aggFieldName}`:aggType;return`${constants["JOIN_FIELD_NAME_PREFIX"]}${metricKey}__${rightSourceId}`}function getSourceAggKey({aggType:aggType,aggFieldName:aggFieldName}){return aggType!==constants["AGG_TYPE"].COUNT?`${aggType}${constants["AGG_DELIMITER"]}${aggFieldName}`:constants["COUNT_PROP_NAME"]}function layer_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class layer_AbstractLayer{static createDescriptor(options){return{...options,sourceDescriptor:options.sourceDescriptor?options.sourceDescriptor:null,__dataRequests:external_kbnSharedDeps_Lodash_default.a.get(options,"__dataRequests",[]),id:external_kbnSharedDeps_Lodash_default.a.get(options,"id",v4_default()()),label:options.label&&options.label.length>0?options.label:null,minZoom:external_kbnSharedDeps_Lodash_default.a.get(options,"minZoom",constants["MIN_ZOOM"]),maxZoom:external_kbnSharedDeps_Lodash_default.a.get(options,"maxZoom",constants["MAX_ZOOM"]),alpha:external_kbnSharedDeps_Lodash_default.a.get(options,"alpha",.75),visible:external_kbnSharedDeps_Lodash_default.a.get(options,"visible",true),style:external_kbnSharedDeps_Lodash_default.a.get(options,"style",null)}}destroy(){if(this._source){this._source.destroy()}}constructor({layerDescriptor:layerDescriptor,source:source}){layer_defineProperty(this,"_descriptor",void 0);layer_defineProperty(this,"_source",void 0);layer_defineProperty(this,"_dataRequests",void 0);this._descriptor=layer_AbstractLayer.createDescriptor(layerDescriptor);this._source=source;if(this._descriptor.__dataRequests){this._dataRequests=this._descriptor.__dataRequests.map(dataRequest=>new DataRequest(dataRequest))}else{this._dataRequests=[]}}static getBoundDataForSource(mbMap,sourceId){const mbStyle=mbMap.getStyle();return mbStyle.sources[sourceId].data}async cloneDescriptor(){const clonedDescriptor=copyPersistentState(this._descriptor);clonedDescriptor.id=v4_default()();const displayName=await this.getDisplayName();clonedDescriptor.label=`Clone of ${displayName}`;clonedDescriptor.sourceDescriptor=this.getSource().cloneDescriptor();if(clonedDescriptor.joins){clonedDescriptor.joins.forEach(joinDescriptor=>{if(joinDescriptor.right&&joinDescriptor.right.type===constants["SOURCE_TYPES"].TABLE_SOURCE){throw new Error("Cannot clone table-source. Should only be used in MapEmbeddable, not in UX")}const termSourceDescriptor=joinDescriptor.right;const originalJoinId=joinDescriptor.right.id;joinDescriptor.right.id=v4_default()();if(clonedDescriptor.style&&"properties"in clonedDescriptor.style){const metrics=termSourceDescriptor.metrics&&termSourceDescriptor.metrics.length?termSourceDescriptor.metrics:[{type:constants["AGG_TYPE"].COUNT}];metrics.forEach(metricsDescriptor=>{const originalJoinKey=getJoinAggKey({aggType:metricsDescriptor.type,aggFieldName:"field"in metricsDescriptor?metricsDescriptor.field:"",rightSourceId:originalJoinId});const newJoinKey=getJoinAggKey({aggType:metricsDescriptor.type,aggFieldName:"field"in metricsDescriptor?metricsDescriptor.field:"",rightSourceId:joinDescriptor.right.id});Object.keys(clonedDescriptor.style.properties).forEach(key=>{const styleProp=clonedDescriptor.style.properties[key];if(styleProp.type===constants["STYLE_TYPE"].DYNAMIC&&styleProp.options.field&&styleProp.options.field.origin===constants["FIELD_ORIGIN"].JOIN&&styleProp.options.field.name===originalJoinKey){styleProp.options.field.name=newJoinKey}})})}})}return clonedDescriptor}makeMbLayerId(layerNameSuffix){return`${this.getId()}${constants["MB_SOURCE_ID_LAYER_ID_PREFIX_DELIMITER"]}${layerNameSuffix}`}showJoinEditor(){return this.getSource().showJoinEditor()}getJoinsDisabledReason(){return this.getSource().getJoinsDisabledReason()}isPreviewLayer(){return!!this._descriptor.__isPreviewLayer}supportsElasticsearchFilters(){return this.getSource().isESSource()}async supportsFitToBounds(){return await this.getSource().supportsFitToBounds()}async isFittable(){return await this.supportsFitToBounds()&&this.isVisible()}async isFilteredByGlobalTime(){return false}async getDisplayName(source){if(this._descriptor.label){return this._descriptor.label}const sourceDisplayName=source?await source.getDisplayName():await this.getSource().getDisplayName();return sourceDisplayName||`Layer ${this._descriptor.id}`}async getAttributions(){if(!this.hasErrors()){return await this.getSource().getAttributions()}return[]}getStyleForEditing(){throw new Error("Should implement AbstractLayer#getStyleForEditing")}getStyle(){throw new Error("Should implement AbstractLayer#getStyle")}getCurrentStyle(){throw new Error("Should implement AbstractLayer#getCurrentStyle")}getLabel(){return this._descriptor.label?this._descriptor.label:""}getCustomIconAndTooltipContent(){return{icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{size:"m",type:this.getLayerTypeIconName()})}}async hasLegendDetails(){return false}renderLegendDetails(){return null}getId(){return this._descriptor.id}getSource(){return this._source}getSourceForEditing(){return this._source}isVisible(){return!!this._descriptor.visible}showAtZoomLevel(zoom){return zoom>=this.getMinZoom()&&zoom<=this.getMaxZoom()}getMinZoom(){return typeof this._descriptor.minZoom==="number"?this._descriptor.minZoom:constants["MIN_ZOOM"]}getMaxZoom(){return typeof this._descriptor.maxZoom==="number"?this._descriptor.maxZoom:constants["MAX_ZOOM"]}getMinSourceZoom(){return this._source.getMinZoom()}_getMbSourceId(){return this.getId()}_requiresPrevSourceCleanup(mbMap){return false}_removeStaleMbSourcesAndLayers(mbMap){if(this._requiresPrevSourceCleanup(mbMap)){const mbStyle=mbMap.getStyle();mbStyle.layers.forEach(mbLayer=>{if(this.ownsMbLayerId(mbLayer.id)){mbMap.removeLayer(mbLayer.id)}});Object.keys(mbStyle.sources).some(mbSourceId=>{if(this.ownsMbSourceId(mbSourceId)){mbMap.removeSource(mbSourceId)}})}}getAlpha(){return typeof this._descriptor.alpha==="number"?this._descriptor.alpha:1}getQuery(){return this._descriptor.query?this._descriptor.query:null}async getImmutableSourceProperties(){const source=this.getSource();return await source.getImmutableProperties()}renderSourceSettingsEditor({onChange:onChange}){const source=this.getSourceForEditing();return source.renderSourceSettingsEditor({onChange:onChange,currentLayerType:this._descriptor.type})}getPrevRequestToken(dataId){const prevDataRequest=this.getDataRequest(dataId);if(!prevDataRequest){return}return prevDataRequest.getRequestToken()}getInFlightRequestTokens(){if(!this._dataRequests){return[]}const requestTokens=this._dataRequests.map(dataRequest=>dataRequest.getRequestToken());return external_kbnSharedDeps_Lodash_default.a.compact(requestTokens)}getSourceDataRequest(){return this.getDataRequest(constants["SOURCE_DATA_REQUEST_ID"])}getDataRequest(id){return this._dataRequests.find(dataRequest=>dataRequest.getDataId()===id)}isLayerLoading(){return this._dataRequests.some(dataRequest=>dataRequest.isLoading())}isLoadingBounds(){const boundsDataRequest=this.getDataRequest(constants["SOURCE_BOUNDS_DATA_REQUEST_ID"]);return!!boundsDataRequest&&boundsDataRequest.isLoading()}hasErrors(){return external_kbnSharedDeps_Lodash_default.a.get(this._descriptor,"__isInErrorState",false)}getErrors(){return this.hasErrors()&&this._descriptor.__errorMessage?this._descriptor.__errorMessage:""}async syncData(syncContext){}getMbLayerIds(){throw new Error("Should implement AbstractLayer#getMbLayerIds")}ownsMbLayerId(layerId){throw new Error("Should implement AbstractLayer#ownsMbLayerId")}ownsMbSourceId(mbSourceId){throw new Error("Should implement AbstractLayer#ownsMbSourceId")}canShowTooltip(){return false}syncLayerWithMB(mbMap){throw new Error("Should implement AbstractLayer#syncLayerWithMB")}getLayerTypeIconName(){throw new Error("should implement Layer#getLayerTypeIconName")}isInitialDataLoadComplete(){const sourceDataRequest=this.getSourceDataRequest();return sourceDataRequest?sourceDataRequest.hasData():false}async getBounds(dataRequestContext){return null}renderStyleEditor(onStyleDescriptorChange){const style=this.getStyleForEditing();if(!style){return null}return style.renderEditor(onStyleDescriptorChange)}getIndexPatternIds(){return[]}getQueryableIndexPatternIds(){return[]}syncVisibilityWithMb(mbMap,mbLayerId){mbMap.setLayoutProperty(mbLayerId,"visibility",this.isVisible()?"visible":"none")}getType(){return this._descriptor.type}areLabelsOnTop(){return false}supportsLabelsOnTop(){return false}async getLicensedFeatures(){return[]}}function tile_style_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class tile_style_TileStyle{constructor(){tile_style_defineProperty(this,"_descriptor",void 0);this._descriptor={type:constants["LAYER_STYLE_TYPE"].TILE}}getType(){return constants["LAYER_STYLE_TYPE"].TILE}renderEditor(){return null}}function tile_layer_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class tile_layer_TileLayer extends layer_AbstractLayer{static createDescriptor(options,mapColors){const tileLayerDescriptor=super.createDescriptor(options,mapColors);tileLayerDescriptor.type=tile_layer_TileLayer.type;tileLayerDescriptor.alpha=external_kbnSharedDeps_Lodash_default.a.get(options,"alpha",1);tileLayerDescriptor.style={type:constants["LAYER_STYLE_TYPE"].TILE};return tileLayerDescriptor}constructor({source:source,layerDescriptor:layerDescriptor}){super({source:source,layerDescriptor:layerDescriptor});this._style=new tile_style_TileStyle}getStyleForEditing(){return this._style}getStyle(){return this._style}getCurrentStyle(){return this._style}async syncData({startLoading:startLoading,stopLoading:stopLoading,onLoadError:onLoadError,dataFilters:dataFilters}){const sourceDataRequest=this.getSourceDataRequest();if(sourceDataRequest){return}const requestToken=Symbol(`layer-source-refresh:${this.getId()} - source`);startLoading(constants["SOURCE_DATA_REQUEST_ID"],requestToken,dataFilters);try{const url=await this.getSource().getUrlTemplate();stopLoading(constants["SOURCE_DATA_REQUEST_ID"],requestToken,{url:url},{})}catch(error){onLoadError(constants["SOURCE_DATA_REQUEST_ID"],requestToken,error.message)}}_getMbLayerId(){return this.makeMbLayerId("raster")}getMbLayerIds(){return[this._getMbLayerId()]}ownsMbLayerId(mbLayerId){return this._getMbLayerId()===mbLayerId}ownsMbSourceId(mbSourceId){return this.getId()===mbSourceId}syncLayerWithMB(mbMap){const source=mbMap.getSource(this.getId());const mbLayerId=this._getMbLayerId();if(!source){const sourceDataRequest=this.getSourceDataRequest();if(!sourceDataRequest){return}const tmsSourceData=sourceDataRequest.getData();if(!tmsSourceData||!tmsSourceData.url){return}const mbSourceId=this._getMbSourceId();mbMap.addSource(mbSourceId,{type:"raster",tiles:[tmsSourceData.url],tileSize:256,scheme:"xyz"});mbMap.addLayer({id:mbLayerId,type:"raster",source:mbSourceId,minzoom:this._descriptor.minZoom,maxzoom:this._descriptor.maxZoom})}this._setTileLayerProperties(mbMap,mbLayerId)}_setTileLayerProperties(mbMap,mbLayerId){this.syncVisibilityWithMb(mbMap,mbLayerId);mbMap.setLayerZoomRange(mbLayerId,this._descriptor.minZoom,this._descriptor.maxZoom);mbMap.setPaintProperty(mbLayerId,"raster-opacity",this.getAlpha())}getLayerTypeIconName(){return"grid"}isLayerLoading(){return false}}tile_layer_defineProperty(tile_layer_TileLayer,"type",constants["LAYER_TYPE"].TILE);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var ORIGIN={EMS:"elastic_maps_service",KIBANA_YML:"self_hosted"};function toAbsoluteUrl(host,path){if(!host){return path}var hostEndWithSlash=host[host.length-1]==="/";var pathStartsWithSlash=path[0]==="/";if(hostEndWithSlash===true&&pathStartsWithSlash===true){return host+path.slice(1)}else if(hostEndWithSlash!==pathStartsWithSlash){return host+path}else{return host+"/"+path}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function ems_service_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ems_service_AbstractEmsService=function(){function AbstractEmsService(config,emsClient,proxyPath){var _this=this;_classCallCheck(this,AbstractEmsService);ems_service_defineProperty(this,"_emsClient",void 0);ems_service_defineProperty(this,"_config",void 0);ems_service_defineProperty(this,"_proxyPath",void 0);ems_service_defineProperty(this,"_getAbsoluteUrl",(function(url){if(/^https?:\/\//.test(url)){return url}else{return toAbsoluteUrl(_this.getApiUrl(),url)}}));this._config=config;this._emsClient=emsClient;this._proxyPath=proxyPath}_createClass(AbstractEmsService,[{key:"getAttributions",value:function getAttributions(){var _this2=this;return this._config.attribution.map((function(attribution){var url=_this2._emsClient.getValueInLanguage(attribution.url);var label=_this2._emsClient.getValueInLanguage(attribution.label);return{url:url,label:label}}))}},{key:"getMarkdownAttribution",value:function getMarkdownAttribution(){var _this3=this;var attributions=this._config.attribution.map((function(attribution){var url=_this3._emsClient.getValueInLanguage(attribution.url);var label=_this3._emsClient.getValueInLanguage(attribution.label);return"[".concat(label,"](").concat(url,")")}));return attributions.join("|")}},{key:"getOrigin",value:function getOrigin(){return ORIGIN.EMS}}]);return AbstractEmsService}();function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){tms_service_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function tms_service_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function tms_service_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function tms_service_createClass(Constructor,protoProps,staticProps){if(protoProps)tms_service_defineProperties(Constructor.prototype,protoProps);if(staticProps)tms_service_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function tms_service_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var tms_service_TMSService=function(_AbstractEmsService){_inherits(TMSService,_AbstractEmsService);var _super=_createSuper(TMSService);function TMSService(config,emsClient,proxyPath){var _this;tms_service_classCallCheck(this,TMSService);_this=_super.call(this,config,emsClient,proxyPath);tms_service_defineProperty(_assertThisInitialized(_this),"_config",void 0);tms_service_defineProperty(_assertThisInitialized(_this),"_getRasterStyleJson",external_kbnSharedDeps_Lodash_default.a.once(_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var rasterUrl,url;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:rasterUrl=_this._getStyleUrlForLocale("raster");if(!rasterUrl){_context.next=6;break}url=_this._proxyPath+_this._getAbsoluteUrl(rasterUrl);return _context.abrupt("return",_this._emsClient.getManifest(_this._emsClient.extendUrlWithParams(url)));case 6:return _context.abrupt("return");case 7:case"end":return _context.stop()}}}),_callee)})))));tms_service_defineProperty(_assertThisInitialized(_this),"_getVectorStyleJsonRaw",external_kbnSharedDeps_Lodash_default.a.once(_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var vectorUrl,url,vectorJson;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:vectorUrl=_this._getStyleUrlForLocale("vector");if(!vectorUrl){_context2.next=9;break}url=_this._proxyPath+_this._getAbsoluteUrl(vectorUrl);_context2.next=5;return _this._emsClient.getManifest(_this._emsClient.extendUrlWithParams(url));case 5:vectorJson=_context2.sent;return _context2.abrupt("return",_objectSpread({},vectorJson));case 9:return _context2.abrupt("return");case 10:case"end":return _context2.stop()}}}),_callee2)})))));tms_service_defineProperty(_assertThisInitialized(_this),"_getVectorStyleJsonInlined",external_kbnSharedDeps_Lodash_default.a.once(_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var vectorJson,inlinedSources,sources,_iterator,_step,_sourceName,url,sourceUrl,extendedUrl,sourceJson,extendedTileUrls;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this._getVectorStyleJsonRaw();case 2:vectorJson=_context3.sent;if(!vectorJson){_context3.next=43;break}inlinedSources={};sources=vectorJson.sources;_iterator=_createForOfIteratorHelper(Object.getOwnPropertyNames(sources));_context3.prev=7;_iterator.s();case 9:if((_step=_iterator.n()).done){_context3.next=21;break}_sourceName=_step.value;url=sources[_sourceName].url;sourceUrl=_this._proxyPath+_this._getAbsoluteUrl(url);extendedUrl=_this._emsClient.extendUrlWithParams(sourceUrl);_context3.next=16;return _this._emsClient.getManifest(extendedUrl);case 16:sourceJson=_context3.sent;extendedTileUrls=sourceJson.tiles.map((function(tileUrl){var url=_this._proxyPath+_this._getAbsoluteUrl(tileUrl);return _this._emsClient.extendUrlWithParams(url)}));inlinedSources[_sourceName]=_objectSpread(_objectSpread({},sourceJson),{},{type:"vector",tiles:extendedTileUrls});case 19:_context3.next=9;break;case 21:_context3.next=26;break;case 23:_context3.prev=23;_context3.t0=_context3["catch"](7);_iterator.e(_context3.t0);case 26:_context3.prev=26;_iterator.f();return _context3.finish(26);case 29:_context3.t1=_objectSpread;_context3.t2=_objectSpread({},vectorJson);_context3.t3={};_context3.t4=inlinedSources;_context3.next=35;return _this._getSpriteSheetRootPath();case 35:_context3.t5=_context3.sent;_context3.next=38;return _this._getUrlTemplateForGlyphs();case 38:_context3.t6=_context3.sent;_context3.t7={sources:_context3.t4,sprite:_context3.t5,glyphs:_context3.t6};return _context3.abrupt("return",(0,_context3.t1)(_context3.t2,_context3.t3,_context3.t7));case 43:return _context3.abrupt("return");case 44:case"end":return _context3.stop()}}}),_callee3,null,[[7,23,26,29]])})))));_this._config=config;return _this}tms_service_createClass(TMSService,[{key:"getDefaultRasterStyle",value:function(){var _getDefaultRasterStyle=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var _this2=this;var tileJson,tiles;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this._getRasterStyleJson();case 2:tileJson=_context4.sent;if(!tileJson){_context4.next=8;break}tiles=tileJson.tiles.map((function(tile){return _this2._proxyPath+_this2._getAbsoluteUrl(tile)}));return _context4.abrupt("return",_objectSpread(_objectSpread({},tileJson),{tiles:tiles}));case 8:return _context4.abrupt("return");case 9:case"end":return _context4.stop()}}}),_callee4,this)})));function getDefaultRasterStyle(){return _getDefaultRasterStyle.apply(this,arguments)}return getDefaultRasterStyle}()},{key:"getUrlTemplate",value:function(){var _getUrlTemplate=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){var tileJson,directUrl;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this._getRasterStyleJson();case 2:tileJson=_context5.sent;if(!tileJson){_context5.next=8;break}directUrl=this._proxyPath+this._getAbsoluteUrl(tileJson.tiles[0]);return _context5.abrupt("return",this._emsClient.extendUrlWithParams(directUrl));case 8:return _context5.abrupt("return","");case 9:case"end":return _context5.stop()}}}),_callee5,this)})));function getUrlTemplate(){return _getUrlTemplate.apply(this,arguments)}return getUrlTemplate}()},{key:"getUrlTemplateForVector",value:function(){var _getUrlTemplateForVector=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(sourceId){var tileJson,directUrl;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return this._getVectorStyleJsonInlined();case 2:tileJson=_context6.sent;if(tileJson){_context6.next=5;break}return _context6.abrupt("return","");case 5:if(!(tileJson.sources[sourceId]&&tileJson.sources[sourceId].tiles)){_context6.next=10;break}directUrl=this._proxyPath+this._getAbsoluteUrl(tileJson.sources[sourceId].tiles[0]);return _context6.abrupt("return",this._emsClient.extendUrlWithParams(directUrl));case 10:return _context6.abrupt("return","");case 11:case"end":return _context6.stop()}}}),_callee6,this)})));function getUrlTemplateForVector(_x){return _getUrlTemplateForVector.apply(this,arguments)}return getUrlTemplateForVector}()},{key:"getVectorStyleSheet",value:function(){var _getVectorStyleSheet=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(){return regeneratorRuntime.wrap((function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this._getVectorStyleJsonInlined();case 2:return _context7.abrupt("return",_context7.sent);case 3:case"end":return _context7.stop()}}}),_callee7,this)})));function getVectorStyleSheet(){return _getVectorStyleSheet.apply(this,arguments)}return getVectorStyleSheet}()},{key:"getVectorStyleSheetRaw",value:function(){var _getVectorStyleSheetRaw=_asyncToGenerator(regeneratorRuntime.mark((function _callee8(){return regeneratorRuntime.wrap((function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this._getVectorStyleJsonRaw();case 2:return _context8.abrupt("return",_context8.sent);case 3:case"end":return _context8.stop()}}}),_callee8,this)})));function getVectorStyleSheetRaw(){return _getVectorStyleSheetRaw.apply(this,arguments)}return getVectorStyleSheetRaw}()},{key:"getSpriteSheetMeta",value:function(){var _getSpriteSheetMeta=_asyncToGenerator(regeneratorRuntime.mark((function _callee9(){var isRetina,metaUrl,spritePngs,metaUrlExtended,jsonMeta,_args9=arguments;return regeneratorRuntime.wrap((function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:isRetina=_args9.length>0&&_args9[0]!==undefined?_args9[0]:false;_context9.next=3;return this.getSpriteSheetJsonPath(isRetina);case 3:metaUrl=_context9.sent;_context9.next=6;return this.getSpriteSheetPngPath(isRetina);case 6:spritePngs=_context9.sent;if(!(metaUrl&&spritePngs)){_context9.next=15;break}metaUrlExtended=this._emsClient.extendUrlWithParams(metaUrl);_context9.next=11;return this._emsClient.getManifest(metaUrlExtended);case 11:jsonMeta=_context9.sent;return _context9.abrupt("return",{png:spritePngs,json:jsonMeta});case 15:return _context9.abrupt("return");case 16:case"end":return _context9.stop()}}}),_callee9,this)})));function getSpriteSheetMeta(){return _getSpriteSheetMeta.apply(this,arguments)}return getSpriteSheetMeta}()},{key:"getSpriteSheetJsonPath",value:function(){var _getSpriteSheetJsonPath=_asyncToGenerator(regeneratorRuntime.mark((function _callee10(){var isRetina,spriteSheetRootPath,suffix,_args10=arguments;return regeneratorRuntime.wrap((function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:isRetina=_args10.length>0&&_args10[0]!==undefined?_args10[0]:false;_context10.next=3;return this._getSpriteSheetRootPath();case 3:spriteSheetRootPath=_context10.sent;if(!spriteSheetRootPath){_context10.next=9;break}suffix=isRetina?"@2x":"";return _context10.abrupt("return",spriteSheetRootPath+suffix+".json");case 9:return _context10.abrupt("return","");case 10:case"end":return _context10.stop()}}}),_callee10,this)})));function getSpriteSheetJsonPath(){return _getSpriteSheetJsonPath.apply(this,arguments)}return getSpriteSheetJsonPath}()},{key:"getSpriteSheetPngPath",value:function(){var _getSpriteSheetPngPath=_asyncToGenerator(regeneratorRuntime.mark((function _callee11(){var isRetina,spriteSheetRootPath,suffix,_args11=arguments;return regeneratorRuntime.wrap((function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:isRetina=_args11.length>0&&_args11[0]!==undefined?_args11[0]:false;_context11.next=3;return this._getSpriteSheetRootPath();case 3:spriteSheetRootPath=_context11.sent;if(!spriteSheetRootPath){_context11.next=9;break}suffix=isRetina?"@2x":"";return _context11.abrupt("return",spriteSheetRootPath+suffix+".png");case 9:return _context11.abrupt("return","");case 10:case"end":return _context11.stop()}}}),_callee11,this)})));function getSpriteSheetPngPath(){return _getSpriteSheetPngPath.apply(this,arguments)}return getSpriteSheetPngPath}()},{key:"getDisplayName",value:function getDisplayName(){return this._emsClient.getValueInLanguage(this._config.name)}},{key:"getMinZoom",value:function(){var _getMinZoom=_asyncToGenerator(regeneratorRuntime.mark((function _callee12(){var tileJson;return regeneratorRuntime.wrap((function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return this._getRasterStyleJson();case 2:tileJson=_context12.sent;if(!tileJson){_context12.next=7;break}return _context12.abrupt("return",tileJson.minzoom);case 7:return _context12.abrupt("return");case 8:case"end":return _context12.stop()}}}),_callee12,this)})));function getMinZoom(){return _getMinZoom.apply(this,arguments)}return getMinZoom}()},{key:"getMaxZoom",value:function(){var _getMaxZoom=_asyncToGenerator(regeneratorRuntime.mark((function _callee13(){var tileJson;return regeneratorRuntime.wrap((function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return this._getRasterStyleJson();case 2:tileJson=_context13.sent;if(!tileJson){_context13.next=7;break}return _context13.abrupt("return",tileJson.maxzoom);case 7:return _context13.abrupt("return");case 8:case"end":return _context13.stop()}}}),_callee13,this)})));function getMaxZoom(){return _getMaxZoom.apply(this,arguments)}return getMaxZoom}()},{key:"getId",value:function getId(){return this._config.id}},{key:"hasId",value:function hasId(id){return this._config.id===id}},{key:"getApiUrl",value:function getApiUrl(){return this._emsClient.getTileApiUrl()}},{key:"_getStyleUrlForLocale",value:function _getStyleUrlForLocale(formatType){var vectorFormats=this._getFormats(formatType,this._emsClient.getLocale());if(!vectorFormats.length){vectorFormats=this._getFormats(formatType,this._emsClient.getDefaultLocale())}if(!vectorFormats.length){throw new Error("Cannot find ".concat(formatType," tile layer for locale ").concat(this._emsClient.getLocale()," or ").concat(this._emsClient.getDefaultLocale()))}var defaultStyle=vectorFormats[0];if(defaultStyle&&defaultStyle.hasOwnProperty("url")){return defaultStyle.url}}},{key:"_getFormats",value:function _getFormats(formatType,locale){return this._config.formats.filter((function(format){return format.locale===locale&&format.format===formatType}))}},{key:"_getSpriteSheetRootPath",value:function(){var _getSpriteSheetRootPath2=_asyncToGenerator(regeneratorRuntime.mark((function _callee14(){var vectorStyleJson;return regeneratorRuntime.wrap((function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return this._getVectorStyleJsonRaw();case 2:vectorStyleJson=_context14.sent;if(!vectorStyleJson){_context14.next=7;break}return _context14.abrupt("return",this._proxyPath+this._getAbsoluteUrl(vectorStyleJson.sprite));case 7:return _context14.abrupt("return","");case 8:case"end":return _context14.stop()}}}),_callee14,this)})));function _getSpriteSheetRootPath(){return _getSpriteSheetRootPath2.apply(this,arguments)}return _getSpriteSheetRootPath}()},{key:"_getUrlTemplateForGlyphs",value:function(){var _getUrlTemplateForGlyphs2=_asyncToGenerator(regeneratorRuntime.mark((function _callee15(){var vectorStyleJson;return regeneratorRuntime.wrap((function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_context15.next=2;return this._getVectorStyleJsonRaw();case 2:vectorStyleJson=_context15.sent;if(!vectorStyleJson){_context15.next=7;break}return _context15.abrupt("return",this._proxyPath+this._getAbsoluteUrl(vectorStyleJson.glyphs));case 7:return _context15.abrupt("return","");case 8:case"end":return _context15.stop()}}}),_callee15,this)})));function _getUrlTemplateForGlyphs(){return _getUrlTemplateForGlyphs2.apply(this,arguments)}return _getUrlTemplateForGlyphs}()}]);return TMSService}(ems_service_AbstractEmsService);var url_url=__webpack_require__(87);var url_default=__webpack_require__.n(url_url);function file_layer_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){file_layer_typeof=function _typeof(obj){return typeof obj}}else{file_layer_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return file_layer_typeof(obj)}function file_layer_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function file_layer_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){file_layer_ownKeys(Object(source),true).forEach((function(key){file_layer_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{file_layer_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function file_layer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function file_layer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function file_layer_createClass(Constructor,protoProps,staticProps){if(protoProps)file_layer_defineProperties(Constructor.prototype,protoProps);if(staticProps)file_layer_defineProperties(Constructor,staticProps);return Constructor}function file_layer_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)file_layer_setPrototypeOf(subClass,superClass)}function file_layer_setPrototypeOf(o,p){file_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return file_layer_setPrototypeOf(o,p)}function file_layer_createSuper(Derived){var hasNativeReflectConstruct=file_layer_isNativeReflectConstruct();return function _createSuperInternal(){var Super=file_layer_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=file_layer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return file_layer_possibleConstructorReturn(this,result)}}function file_layer_possibleConstructorReturn(self,call){if(call&&(file_layer_typeof(call)==="object"||typeof call==="function")){return call}return file_layer_assertThisInitialized(self)}function file_layer_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function file_layer_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function file_layer_getPrototypeOf(o){file_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return file_layer_getPrototypeOf(o)}function file_layer_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EMSFormatType;(function(EMSFormatType){EMSFormatType["geojson"]="geojson";EMSFormatType["topojson"]="topojson"})(EMSFormatType||(EMSFormatType={}));var file_layer_FileLayer=function(_AbstractEmsService){file_layer_inherits(FileLayer,_AbstractEmsService);var _super=file_layer_createSuper(FileLayer);function FileLayer(config,emsClient,proxyPath){var _this;file_layer_classCallCheck(this,FileLayer);_this=_super.call(this,config,emsClient,proxyPath);file_layer_defineProperty(file_layer_assertThisInitialized(_this),"_config",void 0);_this._config=config;return _this}file_layer_createClass(FileLayer,[{key:"getFields",value:function getFields(){return this._config.fields}},{key:"getFieldsInLanguage",value:function getFieldsInLanguage(){var _this2=this;return this.getFields().map((function(field){return{type:field.type,name:field.id,description:_this2._emsClient.getValueInLanguage(field.label)}}))}},{key:"getDisplayName",value:function getDisplayName(){var layerName=this._emsClient.getValueInLanguage(this._config.layer_name);return layerName?layerName:""}},{key:"getId",value:function getId(){return this._config.layer_id}},{key:"hasId",value:function hasId(id){var matchesLegacyId=this._config.legacy_ids.indexOf(id)>=0;return this._config.layer_id===id||matchesLegacyId}},{key:"getEMSHotLink",value:function getEMSHotLink(){var landingPageString=this._emsClient.getLandingPageUrl();var urlObject=url_default.a.parse(landingPageString,true);urlObject.hash="file/".concat(this.getId());urlObject.query=file_layer_objectSpread(file_layer_objectSpread({},urlObject.query),{},{locale:this._emsClient.getLocale()});return url_default.a.format(urlObject)}},{key:"getDefaultFormatType",value:function getDefaultFormatType(){var format=this._getDefaultFormat();return format.type}},{key:"getFormatOfType",value:function getFormatOfType(type){var format=this._getFormatOfType(type);return format.type}},{key:"getDefaultFormatMeta",value:function getDefaultFormatMeta(){var format=this._getDefaultFormat();return this._getFormatMeta(format)}},{key:"getFormatOfTypeMeta",value:function getFormatOfTypeMeta(type){var format=this._getFormatOfType(type);return this._getFormatMeta(format)}},{key:"getDefaultFormatUrl",value:function getDefaultFormatUrl(){var format=this._getDefaultFormat();return this._getFormatUrl(format)}},{key:"getFormatOfTypeUrl",value:function getFormatOfTypeUrl(type){var format=this._getFormatOfType(type);return this._getFormatUrl(format)}},{key:"getCreatedAt",value:function getCreatedAt(){return this._config.created_at}},{key:"getApiUrl",value:function getApiUrl(){return this._emsClient.getFileApiUrl()}},{key:"_getFormatUrl",value:function _getFormatUrl(format){var url=this._proxyPath+this._getAbsoluteUrl(format.url);return this._emsClient.extendUrlWithParams(url)}},{key:"_getFormatMeta",value:function _getFormatMeta(format){if("meta"in format){return format.meta}else{return}}},{key:"_getDefaultFormat",value:function _getDefaultFormat(){var defaultFormat=this._config.formats.find((function(format){return format.legacy_default}));if(defaultFormat){return defaultFormat}return this._config.formats[0]}},{key:"_getFormatOfType",value:function _getFormatOfType(type){var requestedFormat=this._config.formats.find((function(format){return format.type===type}));return requestedFormat||this._getDefaultFormat()}}]);return FileLayer}(ems_service_AbstractEmsService);var semver=__webpack_require__(197);var semver_default=__webpack_require__.n(semver);function ems_client_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function ems_client_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ems_client_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ems_client_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ems_client_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function ems_client_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function ems_client_createClass(Constructor,protoProps,staticProps){if(protoProps)ems_client_defineProperties(Constructor.prototype,protoProps);if(staticProps)ems_client_defineProperties(Constructor,staticProps);return Constructor}function ems_client_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DEFAULT_EMS_VERSION="7.12";function modifyUrlLocal(url,block){var parsed=Object(url_url["parse"])(url,true);var meaningfulParts={protocol:parsed.protocol,slashes:parsed.slashes,auth:parsed.auth,hostname:parsed.hostname,port:parsed.port,pathname:parsed.pathname,query:parsed.query||{},hash:parsed.hash};var modifiedParts=block(meaningfulParts)||meaningfulParts;return Object(url_url["format"])({protocol:modifiedParts.protocol,slashes:modifiedParts.slashes,auth:modifiedParts.auth,hostname:modifiedParts.hostname,port:modifiedParts.port,pathname:modifiedParts.pathname,query:modifiedParts.query,hash:modifiedParts.hash})}var ems_client_extendUrl=function extendUrl(url,props){return modifyUrlLocal(url,(function(parsed){return external_kbnSharedDeps_Lodash_default.a.merge(parsed,props)}))};var unescapeTemplateVars=function unescapeTemplateVars(url){var ENCODED_TEMPLATE_VARS_RE=/%7B(\w+?)%7D/g;return url.replace(ENCODED_TEMPLATE_VARS_RE,(function(total,varName){return"{".concat(varName,"}")}))};var DEFAULT_LANGUAGE="en";var ems_client_EMSClient=function(){function EMSClient(config){ems_client_classCallCheck(this,EMSClient);ems_client_defineProperty(this,"EMS_LOAD_TIMEOUT",32e3);ems_client_defineProperty(this,"_queryParams",void 0);ems_client_defineProperty(this,"_appVersion",void 0);ems_client_defineProperty(this,"_fetchFunction",void 0);ems_client_defineProperty(this,"_sanitizer",void 0);ems_client_defineProperty(this,"_manifestServiceUrl",void 0);ems_client_defineProperty(this,"_fileApiUrl",void 0);ems_client_defineProperty(this,"_tileApiUrl",void 0);ems_client_defineProperty(this,"_emsVersion",void 0);ems_client_defineProperty(this,"_emsLandingPageUrl",void 0);ems_client_defineProperty(this,"_language",void 0);ems_client_defineProperty(this,"_proxyPath",void 0);ems_client_defineProperty(this,"_getMainCatalog",void 0);ems_client_defineProperty(this,"_getDefaultTMSCatalog",void 0);ems_client_defineProperty(this,"_getDefaultFileCatalog",void 0);ems_client_defineProperty(this,"_loadTMSServices",void 0);ems_client_defineProperty(this,"_loadFileLayers",void 0);if("kbnVersion"in config){console.warn('The "kbnVersion" parameter for ems-client is deprecated. Please use "appVersion" instead.');this._appVersion=config.kbnVersion}else{this._appVersion=config.appVersion}this._queryParams={elastic_tile_service_tos:"agree",my_app_name:config.appName||"kibana",my_app_version:this._appVersion};this._sanitizer=config.htmlSanitizer?config.htmlSanitizer:function(x){return x};this._manifestServiceUrl=config.manifestServiceUrl;this._tileApiUrl=config.tileApiUrl;this._fileApiUrl=config.fileApiUrl;this._emsVersion=this._getEmsVersion(config.emsVersion);this._emsLandingPageUrl=config.landingPageUrl||"";this._language=config.language||DEFAULT_LANGUAGE;this._fetchFunction=config.fetchFunction;this._proxyPath=config.proxyPath||"";this._invalidateSettings()}ems_client_createClass(EMSClient,[{key:"getDefaultLocale",value:function getDefaultLocale(){return DEFAULT_LANGUAGE}},{key:"getLocale",value:function getLocale(){return this._language}},{key:"getValueInLanguage",value:function getValueInLanguage(i18nObject){if(!i18nObject){return""}return i18nObject[this._language]?i18nObject[this._language]:i18nObject[DEFAULT_LANGUAGE]}},{key:"getManifest",value:function(){var _getManifest=ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee(manifestUrl){var url,result;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;url=ems_client_extendUrl(manifestUrl,{query:this._queryParams});_context.next=4;return this._fetchWithTimeout(url);case 4:result=_context.sent;if(!result){_context.next=11;break}_context.next=8;return result.json();case 8:_context.t0=_context.sent;_context.next=12;break;case 11:_context.t0=null;case 12:return _context.abrupt("return",_context.t0);case 15:_context.prev=15;_context.t1=_context["catch"](0);if(!_context.t1){_context.t1=new Error("Unknown error")}if(!(_context.t1 instanceof Error)){_context.t1=new Error(_context.t1.data||"status ".concat(_context.t1.statusText||_context.t1.status))}throw new Error("Unable to retrieve manifest from ".concat(manifestUrl,": ").concat(_context.t1.message));case 20:case"end":return _context.stop()}}}),_callee,this,[[0,15]])})));function getManifest(_x){return _getManifest.apply(this,arguments)}return getManifest}()},{key:"addQueryParams",value:function addQueryParams(additionalQueryParams){for(var _key in additionalQueryParams){if(additionalQueryParams.hasOwnProperty(_key)){if(additionalQueryParams[_key]!==this._queryParams[_key]){this._queryParams=external_kbnSharedDeps_Lodash_default.a.assign({},this._queryParams,additionalQueryParams);this._invalidateSettings();break}}}}},{key:"getMainManifest",value:function(){var _getMainManifest=ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this._getMainCatalog();case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}}),_callee2,this)})));function getMainManifest(){return _getMainManifest.apply(this,arguments)}return getMainManifest}()},{key:"getDefaultFileManifest",value:function(){var _getDefaultFileManifest=ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this._getDefaultFileCatalog();case 2:return _context3.abrupt("return",_context3.sent);case 3:case"end":return _context3.stop()}}}),_callee3,this)})));function getDefaultFileManifest(){return _getDefaultFileManifest.apply(this,arguments)}return getDefaultFileManifest}()},{key:"getDefaultTMSManifest",value:function(){var _getDefaultTMSManifest=ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this._getDefaultTMSCatalog();case 2:return _context4.abrupt("return",_context4.sent);case 3:case"end":return _context4.stop()}}}),_callee4,this)})));function getDefaultTMSManifest(){return _getDefaultTMSManifest.apply(this,arguments)}return getDefaultTMSManifest}()},{key:"getFileLayers",value:function(){var _getFileLayers=ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this._loadFileLayers();case 2:return _context5.abrupt("return",_context5.sent);case 3:case"end":return _context5.stop()}}}),_callee5,this)})));function getFileLayers(){return _getFileLayers.apply(this,arguments)}return getFileLayers}()},{key:"getTMSServices",value:function(){var _getTMSServices=ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee6(){return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return this._loadTMSServices();case 2:return _context6.abrupt("return",_context6.sent);case 3:case"end":return _context6.stop()}}}),_callee6,this)})));function getTMSServices(){return _getTMSServices.apply(this,arguments)}return getTMSServices}()},{key:"getTileApiUrl",value:function getTileApiUrl(){return this._tileApiUrl}},{key:"getFileApiUrl",value:function getFileApiUrl(){return this._fileApiUrl}},{key:"getLandingPageUrl",value:function getLandingPageUrl(){return this._emsLandingPageUrl}},{key:"sanitizeHtml",value:function sanitizeHtml(html){return this._sanitizer(html)}},{key:"extendUrlWithParams",value:function extendUrlWithParams(url){return unescapeTemplateVars(ems_client_extendUrl(url,{query:this._queryParams}))}},{key:"findFileLayerById",value:function(){var _findFileLayerById=ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee7(id){var fileLayers,i;return regeneratorRuntime.wrap((function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.getFileLayers();case 2:fileLayers=_context7.sent;i=0;case 4:if(!(i<fileLayers.length)){_context7.next=10;break}if(!fileLayers[i].hasId(id)){_context7.next=7;break}return _context7.abrupt("return",fileLayers[i]);case 7:i++;_context7.next=4;break;case 10:case"end":return _context7.stop()}}}),_callee7,this)})));function findFileLayerById(_x2){return _findFileLayerById.apply(this,arguments)}return findFileLayerById}()},{key:"findTMSServiceById",value:function(){var _findTMSServiceById=ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee8(id){var tmsServices,i;return regeneratorRuntime.wrap((function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this.getTMSServices();case 2:tmsServices=_context8.sent;i=0;case 4:if(!(i<tmsServices.length)){_context8.next=10;break}if(!tmsServices[i].hasId(id)){_context8.next=7;break}return _context8.abrupt("return",tmsServices[i]);case 7:i++;_context8.next=4;break;case 10:case"end":return _context8.stop()}}}),_callee8,this)})));function findTMSServiceById(_x3){return _findTMSServiceById.apply(this,arguments)}return findTMSServiceById}()},{key:"_getEmsVersion",value:function _getEmsVersion(version){var userVersion=semver_default.a.valid(semver_default.a.coerce(version));var semverVersion=userVersion?userVersion:semver_default.a.coerce(DEFAULT_EMS_VERSION);if(semverVersion){return"v".concat(semver_default.a.major(semverVersion),".").concat(semver_default.a.minor(semverVersion))}else{throw new Error("Invalid version: ".concat(version))}}},{key:"_fetchWithTimeout",value:function _fetchWithTimeout(url){var _this=this;return new Promise((function(resolve,reject){var timer=setTimeout((function(){return reject(new Error("Request to ".concat(url," timed out")))}),_this.EMS_LOAD_TIMEOUT);_this._fetchFunction(url).then((function(response){clearTimeout(timer);resolve(response)}),(function(err){clearTimeout(timer);reject(err)}))}))}},{key:"_getManifestWithParams",value:function(){var _getManifestWithParams2=ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee9(url){var extendedUrl;return regeneratorRuntime.wrap((function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:extendedUrl=this.extendUrlWithParams(url);_context9.next=3;return this.getManifest(extendedUrl);case 3:return _context9.abrupt("return",_context9.sent);case 4:case"end":return _context9.stop()}}}),_callee9,this)})));function _getManifestWithParams(_x4){return _getManifestWithParams2.apply(this,arguments)}return _getManifestWithParams}()},{key:"_invalidateSettings",value:function _invalidateSettings(){var _this2=this;this._getMainCatalog=external_kbnSharedDeps_Lodash_default.a.once(ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee10(){var services;return regeneratorRuntime.wrap((function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(!_this2._manifestServiceUrl){_context10.next=7;break}console.warn('The "manifestServiceUrl" parameter is deprecated in v7.6.0.\n        Consider using "tileApiUrl" and "fileApiUrl" instead.');_context10.next=4;return _this2._getManifestWithParams(_this2._manifestServiceUrl);case 4:return _context10.abrupt("return",_context10.sent);case 7:services=[];if(_this2._tileApiUrl){services.push({type:"tms",manifest:toAbsoluteUrl(_this2._tileApiUrl,"".concat(_this2._emsVersion,"/manifest"))})}if(_this2._fileApiUrl){services.push({type:"file",manifest:toAbsoluteUrl(_this2._fileApiUrl,"".concat(_this2._emsVersion,"/manifest"))})}return _context10.abrupt("return",{services:services});case 11:case"end":return _context10.stop()}}}),_callee10)}))));this._getDefaultTMSCatalog=external_kbnSharedDeps_Lodash_default.a.once(ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee11(){var catalogue,firstService,url;return regeneratorRuntime.wrap((function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return _this2._getMainCatalog();case 2:catalogue=_context11.sent;firstService=catalogue.services.find((function(service){return service.type==="tms"}));if(firstService){_context11.next=6;break}return _context11.abrupt("return",{services:[]});case 6:url=_this2._proxyPath+firstService.manifest;_context11.next=9;return _this2.getManifest(url);case 9:return _context11.abrupt("return",_context11.sent);case 10:case"end":return _context11.stop()}}}),_callee11)}))));this._getDefaultFileCatalog=external_kbnSharedDeps_Lodash_default.a.once(ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee12(){var catalogue,firstService,url;return regeneratorRuntime.wrap((function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return _this2._getMainCatalog();case 2:catalogue=_context12.sent;firstService=catalogue.services.find((function(service){return service.type==="file"}));if(firstService){_context12.next=6;break}return _context12.abrupt("return",{layers:[]});case 6:url=_this2._proxyPath+firstService.manifest;_context12.next=9;return _this2.getManifest(url);case 9:return _context12.abrupt("return",_context12.sent);case 10:case"end":return _context12.stop()}}}),_callee12)}))));this._loadTMSServices=external_kbnSharedDeps_Lodash_default.a.once(ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee13(){var tmsManifest;return regeneratorRuntime.wrap((function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return _this2._getDefaultTMSCatalog();case 2:tmsManifest=_context13.sent;return _context13.abrupt("return",tmsManifest.services.map((function(serviceConfig){return new tms_service_TMSService(serviceConfig,_this2,_this2._proxyPath)})));case 4:case"end":return _context13.stop()}}}),_callee13)}))));this._loadFileLayers=external_kbnSharedDeps_Lodash_default.a.once(ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee14(){var fileManifest;return regeneratorRuntime.wrap((function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return _this2._getDefaultFileCatalog();case 2:fileManifest=_context14.sent;return _context14.abrupt("return",fileManifest.layers.map((function(layerConfig){return new file_layer_FileLayer(layerConfig,_this2,_this2._proxyPath)})));case 4:case"end":return _context14.stop()}}}),_callee14)}))))}}]);return EMSClient}();var browser=__webpack_require__(135);var browser_default=__webpack_require__.n(browser);var licensed_features=__webpack_require__(10);function getKibanaRegionList(){return Object(kibana_services["B"])()}function getKibanaTileMap(){return Object(kibana_services["I"])()}async function getEmsFileLayers(){if(!Object(kibana_services["i"])().isEMSEnabled()){return[]}return getEMSClient().getFileLayers()}async function getEmsTmsServices(){if(!Object(kibana_services["i"])().isEMSEnabled()){return[]}return getEMSClient().getTMSServices()}function relativeToAbsolute(url){const a=document.createElement("a");a.setAttribute("href",url);return a.href}let meta_emsClient=null;let latestLicenseId;function getEMSClient(){if(!meta_emsClient){const emsSettings=Object(kibana_services["i"])();const proxyPath="";const tileApiUrl=emsSettings.isProxyElasticMapsServiceInMaps()?relativeToAbsolute(Object(kibana_services["n"])().basePath.prepend(`/${constants["GIS_API_PATH"]}/${constants["EMS_TILES_CATALOGUE_PATH"]}`)):emsSettings.getEMSTileApiUrl();const fileApiUrl=emsSettings.isProxyElasticMapsServiceInMaps()?relativeToAbsolute(Object(kibana_services["n"])().basePath.prepend(`/${constants["GIS_API_PATH"]}/${constants["EMS_FILES_CATALOGUE_PATH"]}`)):emsSettings.getEMSFileApiUrl();meta_emsClient=new ems_client_EMSClient({language:external_kbnSharedDeps_KbnI18n_["i18n"].getLocale(),appVersion:Object(kibana_services["u"])(),appName:constants["EMS_APP_NAME"],tileApiUrl:tileApiUrl,fileApiUrl:fileApiUrl,landingPageUrl:emsSettings.getEMSLandingPageUrl(),fetchFunction(url){return browser_default()(url)},proxyPath:proxyPath})}const licenseId=Object(licensed_features["d"])();if(latestLicenseId!==licenseId){latestLicenseId=licenseId;meta_emsClient.addQueryParams({license:licenseId?licenseId:""})}return meta_emsClient}function getGlyphUrl(){const emsSettings=Object(kibana_services["i"])();if(!emsSettings.isEMSEnabled()){return Object(kibana_services["n"])().basePath.prepend(`/${constants["FONTS_API_PATH"]}/{fontstack}/{range}`)}return emsSettings.isProxyElasticMapsServiceInMaps()?relativeToAbsolute(Object(kibana_services["n"])().basePath.prepend(`/${constants["GIS_API_PATH"]}/${constants["EMS_TILES_CATALOGUE_PATH"]}/${constants["EMS_GLYPHS_PATH"]}`))+`/{fontstack}/{range}`:emsSettings.getEMSFontLibraryUrl()}function isRetina(){return window.devicePixelRatio===2}var assert=__webpack_require__(221);var assert_default=__webpack_require__.n(assert);function createImage(image,{width:width,height:height},channels,data){if(!data){data=new Uint8Array(width*height*channels)}else if(data instanceof Uint8ClampedArray){data=new Uint8Array(data.buffer)}else if(data.length!==width*height*channels){throw new RangeError("mismatched image size")}image.width=width;image.height=height;image.data=data;return image}function resizeImage(image,{width:width,height:height},channels){if(width===image.width&&height===image.height){return}const newImage=createImage({},{width:width,height:height},channels);copyImage(image,newImage,{x:0,y:0},{x:0,y:0},{width:Math.min(image.width,width),height:Math.min(image.height,height)},channels);image.width=width;image.height=height;image.data=newImage.data}function copyImage(srcImg,dstImg,srcPt,dstPt,size,channels){if(size.width===0||size.height===0){return dstImg}if(size.width>srcImg.width||size.height>srcImg.height||srcPt.x>srcImg.width-size.width||srcPt.y>srcImg.height-size.height){throw new RangeError("out of range source coordinates for image copy")}if(size.width>dstImg.width||size.height>dstImg.height||dstPt.x>dstImg.width-size.width||dstPt.y>dstImg.height-size.height){throw new RangeError("out of range destination coordinates for image copy")}const srcData=srcImg.data;const dstData=dstImg.data;assert_default()(srcData!==dstData);for(let y=0;y<size.height;y++){const srcOffset=((srcPt.y+y)*srcImg.width+srcPt.x)*channels;const dstOffset=((dstPt.y+y)*dstImg.width+dstPt.x)*channels;for(let i=0;i<size.width*channels;i++){dstData[dstOffset+i]=srcData[srcOffset+i]}}return dstImg}class AlphaImage{constructor(size,data){createImage(this,size,1,data)}resize(size){resizeImage(this,size,1)}clone(){return new AlphaImage({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(srcImg,dstImg,srcPt,dstPt,size){copyImage(srcImg,dstImg,srcPt,dstPt,size,1)}}class RGBAImage{constructor(size,data){createImage(this,size,4,data)}resize(size){resizeImage(this,size,4)}replace(data,copy){if(copy){this.data.set(data)}else if(data instanceof Uint8ClampedArray){this.data=new Uint8Array(data.buffer)}else{this.data=data}}clone(){return new RGBAImage({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(srcImg,dstImg,srcPt,dstPt,size){copyImage(srcImg,dstImg,srcPt,dstPt,size,4)}}function getIsTextLayer(mbLayer){if(mbLayer.type!=="symbol"){return false}const styleNames=[];if(mbLayer.paint){styleNames.push(...Object.keys(mbLayer.paint))}if(mbLayer.layout){styleNames.push(...Object.keys(mbLayer.layout))}return styleNames.some(styleName=>styleName.startsWith("text-"))}function isGlDrawLayer(mbLayerId){return mbLayerId.startsWith("gl-draw")}function doesMbLayerBelongToMapLayerAndClass(mapLayer,mbLayer,layerClass){if(!mapLayer.ownsMbLayerId(mbLayer.id)){return false}if(layerClass===LAYER_CLASS.ANY){return true}const isTextLayer=getIsTextLayer(mbLayer);return layerClass===LAYER_CLASS.LABEL?isTextLayer:!isTextLayer}var LAYER_CLASS;(function(LAYER_CLASS){LAYER_CLASS["ANY"]="ANY";LAYER_CLASS["LABEL"]="LABEL";LAYER_CLASS["NON_LABEL"]="NON_LABEL"})(LAYER_CLASS||(LAYER_CLASS={}));function moveMapLayer(mbMap,mbLayers,mapLayer,layerClass,beneathMbLayerId){mbLayers.filter(mbLayer=>doesMbLayerBelongToMapLayerAndClass(mapLayer,mbLayer,layerClass)).forEach(mbLayer=>{mbMap.moveLayer(mbLayer.id,beneathMbLayerId)})}function getBottomMbLayerId(mbLayers,mapLayer,layerClass){const bottomMbLayer=mbLayers.find(mbLayer=>doesMbLayerBelongToMapLayerAndClass(mapLayer,mbLayer,layerClass));return bottomMbLayer?bottomMbLayer.id:undefined}function isLayerInOrder(mbMap,mapLayer,layerClass,beneathMbLayerId){const mbLayers=mbMap.getStyle().layers;if(!beneathMbLayerId){return doesMbLayerBelongToMapLayerAndClass(mapLayer,mbLayers[mbLayers.length-1],layerClass)}let inMapLayerBlock=false;let nextMbLayerId=null;for(let i=0;i<mbLayers.length;i++){if(!inMapLayerBlock){if(doesMbLayerBelongToMapLayerAndClass(mapLayer,mbLayers[i],layerClass)){inMapLayerBlock=true}}else{if(!doesMbLayerBelongToMapLayerAndClass(mapLayer,mbLayers[i],layerClass)){nextMbLayerId=mbLayers[i].id;break}}}return nextMbLayerId===beneathMbLayerId}function syncLayerOrder(mbMap,spatialFiltersLayer,layerList){const mbLayers=mbMap.getStyle().layers;if(!mbLayers||mbLayers.length===0){return}if(!isLayerInOrder(mbMap,spatialFiltersLayer,LAYER_CLASS.ANY)){moveMapLayer(mbMap,mbLayers,spatialFiltersLayer,LAYER_CLASS.ANY)}let beneathMbLayerId=getBottomMbLayerId(mbLayers,spatialFiltersLayer,LAYER_CLASS.ANY);const glDrawLayer={ownsMbLayerId:mbLayerId=>isGlDrawLayer(mbLayerId)};moveMapLayer(mbMap,mbLayers,glDrawLayer,LAYER_CLASS.ANY,beneathMbLayerId);const glDrawBottomMbLayerId=getBottomMbLayerId(mbLayers,glDrawLayer,LAYER_CLASS.ANY);if(glDrawBottomMbLayerId){beneathMbLayerId=glDrawBottomMbLayerId}[...layerList].reverse().filter(mapLayer=>mapLayer.areLabelsOnTop()).forEach(mapLayer=>{if(!isLayerInOrder(mbMap,mapLayer,LAYER_CLASS.LABEL,beneathMbLayerId)){moveMapLayer(mbMap,mbLayers,mapLayer,LAYER_CLASS.LABEL,beneathMbLayerId)}const bottomMbLayerId=getBottomMbLayerId(mbLayers,mapLayer,LAYER_CLASS.LABEL);if(bottomMbLayerId)beneathMbLayerId=bottomMbLayerId});[...layerList].reverse().forEach(mapLayer=>{const layerClass=mapLayer.areLabelsOnTop()?LAYER_CLASS.NON_LABEL:LAYER_CLASS.ANY;if(!isLayerInOrder(mbMap,mapLayer,layerClass,beneathMbLayerId)){moveMapLayer(mbMap,mbLayers,mapLayer,layerClass,beneathMbLayerId)}const bottomMbLayerId=getBottomMbLayerId(mbLayers,mapLayer,layerClass);if(bottomMbLayerId)beneathMbLayerId=bottomMbLayerId})}function removeOrphanedSourcesAndLayers(mbMap,layerList,spatialFilterLayer){const mbStyle=mbMap.getStyle();const mbLayerIdsToRemove=[];mbStyle.layers.forEach(mbLayer=>{if(spatialFilterLayer.ownsMbLayerId(mbLayer.id)){return}if(isGlDrawLayer(mbLayer.id)){return}const layer=layerList.find(layer=>layer.ownsMbLayerId(mbLayer.id));if(!layer){mbLayerIdsToRemove.push(mbLayer.id)}});mbLayerIdsToRemove.forEach(mbLayerId=>mbMap.removeLayer(mbLayerId));const mbSourcesToRemove=[];for(const mbSourceId in mbStyle.sources){if(mbStyle.sources.hasOwnProperty(mbSourceId)){if(spatialFilterLayer.ownsMbSourceId(mbSourceId)){return}const layer=layerList.find(layer=>layer.ownsMbSourceId(mbSourceId));if(!layer){mbSourcesToRemove.push(mbSourceId)}}}mbSourcesToRemove.forEach(mbSourceId=>mbMap.removeSource(mbSourceId))}async function addSpritesheetToMap(json,imgUrl,mbMap){const imgData=await loadSpriteSheetImageData(imgUrl);addSpriteSheetToMapFromImageData(json,imgData,mbMap)}function getImageData(img){const canvas=window.document.createElement("canvas");const context=canvas.getContext("2d");if(!context){throw new Error("failed to create canvas 2d context")}canvas.width=img.width;canvas.height=img.height;context.drawImage(img,0,0,img.width,img.height);return context.getImageData(0,0,img.width,img.height)}function isCrossOriginUrl(url){const a=window.document.createElement("a");a.href=url;return a.protocol!==window.document.location.protocol||a.host!==window.document.location.host||a.port!==window.document.location.port}async function loadSpriteSheetImageData(imgUrl){return new Promise((resolve,reject)=>{const image=new Image;if(isCrossOriginUrl(imgUrl)){image.crossOrigin="Anonymous"}image.onload=el=>{const imgData=getImageData(el.currentTarget);resolve(imgData)};image.onerror=e=>{reject(e)};image.src=imgUrl})}function addSpriteSheetToMapFromImageData(json,imgData,mbMap){for(const imageId in json){if(!(json.hasOwnProperty(imageId)&&!mbMap.hasImage(imageId))){continue}const{width:width,height:height,x:x,y:y,sdf:sdf,pixelRatio:pixelRatio}=json[imageId];if(typeof width!=="number"||typeof height!=="number"){continue}const data=new RGBAImage({width:width,height:height});RGBAImage.copy(imgData,data,{x:x,y:y},{x:0,y:0},{width:width,height:height});mbMap.addImage(imageId,data,{pixelRatio:pixelRatio,sdf:sdf})}}function vector_tile_layer_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const MB_STYLE_TYPE_TO_OPACITY={fill:["fill-opacity"],line:["line-opacity"],circle:["circle-opacity"],background:["background-opacity"],symbol:["icon-opacity","text-opacity"]};class vector_tile_layer_VectorTileLayer extends tile_layer_TileLayer{static createDescriptor(options){const tileLayerDescriptor=super.createDescriptor(options);tileLayerDescriptor.type=vector_tile_layer_VectorTileLayer.type;tileLayerDescriptor.alpha=external_kbnSharedDeps_Lodash_default.a.get(options,"alpha",1);tileLayerDescriptor.style={type:constants["LAYER_STYLE_TYPE"].TILE};return tileLayerDescriptor}_canSkipSync({prevDataRequest:prevDataRequest,nextMeta:nextMeta}){if(!prevDataRequest){return false}const prevMeta=prevDataRequest.getMeta();if(!prevMeta){return false}return prevMeta.tileLayerId===nextMeta.tileLayerId}async syncData({startLoading:startLoading,stopLoading:stopLoading,onLoadError:onLoadError}){const nextMeta={tileLayerId:this.getSource().getTileLayerId()};const canSkipSync=this._canSkipSync({prevDataRequest:this.getSourceDataRequest(),nextMeta:nextMeta});if(canSkipSync){return}const requestToken=Symbol(`layer-source-refresh:${this.getId()} - source`);try{startLoading(constants["SOURCE_DATA_REQUEST_ID"],requestToken,nextMeta);const styleAndSprites=await this.getSource().getVectorStyleSheetAndSpriteMeta(isRetina());const spriteSheetImageData=await loadSpriteSheetImageData(styleAndSprites.spriteMeta.png);const data={...styleAndSprites,spriteSheetImageData:spriteSheetImageData};stopLoading(constants["SOURCE_DATA_REQUEST_ID"],requestToken,data)}catch(error){onLoadError(constants["SOURCE_DATA_REQUEST_ID"],requestToken,error.message)}}_generateMbId(name){return`${this.getId()}_${name}`}_generateMbSourceIdPrefix(){const DELIMITTER="___";return`${this.getId()}${DELIMITTER}${this.getSource().getTileLayerId()}${DELIMITTER}`}_generateMbSourceId(name){return`${this._generateMbSourceIdPrefix()}${name}`}_getVectorStyle(){const sourceDataRequest=this.getSourceDataRequest();if(!sourceDataRequest){return null}const vectorStyleAndSprites=sourceDataRequest.getData();if(!vectorStyleAndSprites){return null}return vectorStyleAndSprites.vectorStyleSheet}_getSpriteMeta(){const sourceDataRequest=this.getSourceDataRequest();if(!sourceDataRequest){return null}const vectorStyleAndSprites=sourceDataRequest.getData();return vectorStyleAndSprites.spriteMeta}_getSpriteImageData(){const sourceDataRequest=this.getSourceDataRequest();if(!sourceDataRequest){return null}const vectorStyleAndSprites=sourceDataRequest.getData();return vectorStyleAndSprites.spriteSheetImageData}getMbLayerIds(){const vectorStyle=this._getVectorStyle();if(!vectorStyle){return[]}return vectorStyle.layers.map(layer=>this._generateMbId(layer.id))}getMbSourceIds(){const vectorStyle=this._getVectorStyle();if(!vectorStyle){return[]}const sourceIds=Object.keys(vectorStyle.sources);return sourceIds.map(sourceId=>this._generateMbSourceId(sourceId))}ownsMbLayerId(mbLayerId){return mbLayerId.startsWith(this.getId())}ownsMbSourceId(mbSourceId){return mbSourceId.startsWith(this.getId())}_makeNamespacedImageId(imageId){const prefix=this.getSource().getSpriteNamespacePrefix()+"/";return prefix+imageId}_requiresPrevSourceCleanup(mbMap){const sourceIdPrefix=this._generateMbSourceIdPrefix();const mbStyle=mbMap.getStyle();return Object.keys(mbStyle.sources).some(mbSourceId=>{const doesMbSourceBelongToLayer=this.ownsMbSourceId(mbSourceId);const doesMbSourceBelongToSource=mbSourceId.startsWith(sourceIdPrefix);return doesMbSourceBelongToLayer&&!doesMbSourceBelongToSource})}syncLayerWithMB(mbMap){const vectorStyle=this._getVectorStyle();if(!vectorStyle){return}this._removeStaleMbSourcesAndLayers(mbMap);let initialBootstrapCompleted=false;const sourceIds=Object.keys(vectorStyle.sources);sourceIds.forEach(sourceId=>{if(initialBootstrapCompleted){return}const mbSourceId=this._generateMbSourceId(sourceId);const mbSource=mbMap.getSource(mbSourceId);if(mbSource){initialBootstrapCompleted=true;return}mbMap.addSource(mbSourceId,vectorStyle.sources[sourceId])});if(!initialBootstrapCompleted){const spriteMeta=this._getSpriteMeta();if(!spriteMeta){return}const newJson={};for(const imageId in spriteMeta.json){if(spriteMeta.json.hasOwnProperty(imageId)){const namespacedImageId=this._makeNamespacedImageId(imageId);newJson[namespacedImageId]=spriteMeta.json[imageId]}}const imageData=this._getSpriteImageData();if(!imageData){return}addSpriteSheetToMapFromImageData(newJson,imageData,mbMap);vectorStyle.layers.forEach(layer=>{const mbLayerId=this._generateMbId(layer.id);const mbLayer=mbMap.getLayer(mbLayerId);if(mbLayer){return}const newLayerObject={...layer,source:this._generateMbSourceId(layer.source),id:mbLayerId};if(newLayerObject.type==="symbol"&&newLayerObject.layout&&typeof newLayerObject.layout["icon-image"]==="string"){newLayerObject.layout["icon-image"]=this._makeNamespacedImageId(newLayerObject.layout["icon-image"])}if(newLayerObject.type==="fill"&&newLayerObject.paint&&typeof newLayerObject.paint["fill-pattern"]==="string"){newLayerObject.paint["fill-pattern"]=this._makeNamespacedImageId(newLayerObject.paint["fill-pattern"])}mbMap.addLayer(newLayerObject)})}this._setTileLayerProperties(mbMap)}_setOpacityForType(mbMap,mbLayer,mbLayerId){const opacityProps=MB_STYLE_TYPE_TO_OPACITY[mbLayer.type];if(!opacityProps){return}opacityProps.forEach(opacityProp=>{if(mbLayer.paint&&typeof mbLayer.paint[opacityProp]==="number"){const newOpacity=mbLayer.paint[opacityProp]*this.getAlpha();mbMap.setPaintProperty(mbLayerId,opacityProp,newOpacity)}else{mbMap.setPaintProperty(mbLayerId,opacityProp,this.getAlpha())}})}_setLayerZoomRange(mbMap,mbLayer,mbLayerId){let minZoom=this._descriptor.minZoom;if(typeof mbLayer.minzoom==="number"){minZoom=Math.max(minZoom,mbLayer.minzoom)}let maxZoom=this._descriptor.maxZoom;if(typeof mbLayer.maxzoom==="number"){maxZoom=Math.min(maxZoom,mbLayer.maxzoom)}mbMap.setLayerZoomRange(mbLayerId,minZoom,maxZoom)}_setTileLayerProperties(mbMap){const vectorStyle=this._getVectorStyle();if(!vectorStyle){return}vectorStyle.layers.forEach(mbLayer=>{const mbLayerId=this._generateMbId(mbLayer.id);this.syncVisibilityWithMb(mbMap,mbLayerId);this._setLayerZoomRange(mbMap,mbLayer,mbLayerId);this._setOpacityForType(mbMap,mbLayer,mbLayerId)})}areLabelsOnTop(){return!!this._descriptor.areLabelsOnTop}supportsLabelsOnTop(){return true}async getLicensedFeatures(){return this._source.getLicensedFeatures()}}vector_tile_layer_defineProperty(vector_tile_layer_VectorTileLayer,"type",constants["LAYER_TYPE"].VECTOR_TILE);var along=__webpack_require__(224);var along_default=__webpack_require__.n(along);var _turf_area=__webpack_require__(226);var area_default=__webpack_require__.n(_turf_area);var center_of_mass=__webpack_require__(227);var center_of_mass_default=__webpack_require__.n(center_of_mass);var _turf_length=__webpack_require__(240);var length_default=__webpack_require__.n(_turf_length);var helpers=__webpack_require__(51);function getCentroidFeatures(featureCollection){const centroidFeatures=[];for(let i=0;i<featureCollection.features.length;i++){var _feature$properties;const feature=featureCollection.features[i];if((_feature$properties=feature.properties)!==null&&_feature$properties!==void 0&&_feature$properties[constants["KBN_TOO_MANY_FEATURES_PROPERTY"]]){continue}let centroidGeometry=null;if(feature.geometry.type===constants["GEO_JSON_TYPE"].LINE_STRING){centroidGeometry=getLineCentroid(feature)}else if(feature.geometry.type===constants["GEO_JSON_TYPE"].MULTI_LINE_STRING){const coordinates=feature.geometry.coordinates;let longestLine=coordinates[0];let longestLength=length_default()(Object(helpers["lineString"])(longestLine));for(let j=1;j<coordinates.length;j++){const nextLine=coordinates[j];const nextLength=length_default()(Object(helpers["lineString"])(nextLine));if(nextLength>longestLength){longestLine=nextLine;longestLength=nextLength}}centroidGeometry=getLineCentroid(Object(helpers["lineString"])(longestLine))}else if(feature.geometry.type===constants["GEO_JSON_TYPE"].POLYGON){centroidGeometry=center_of_mass_default()(feature).geometry}else if(feature.geometry.type===constants["GEO_JSON_TYPE"].MULTI_POLYGON){const coordinates=feature.geometry.coordinates;let largestPolygon=coordinates[0];let largestArea=area_default()(Object(helpers["polygon"])(largestPolygon));for(let j=1;j<coordinates.length;j++){const nextPolygon=coordinates[j];const nextArea=area_default()(Object(helpers["polygon"])(nextPolygon));if(nextArea>largestArea){largestPolygon=nextPolygon;largestArea=nextArea}}centroidGeometry=center_of_mass_default()(Object(helpers["polygon"])(largestPolygon)).geometry}else if(feature.geometry.type===constants["GEO_JSON_TYPE"].GEOMETRY_COLLECTION){throw new Error("Should not have features with geometrycollection")}if(centroidGeometry){centroidFeatures.push({type:"Feature",id:feature.id,properties:{...feature.properties,[constants["KBN_IS_CENTROID_FEATURE"]]:true},geometry:centroidGeometry})}}return centroidFeatures}function getLineCentroid(feature){const length=length_default()(feature);return along_default()(feature,length/2).geometry}function isRefreshOnlyQuery(prevQuery,newQuery){if(!prevQuery||!newQuery){return false}return prevQuery.queryLastTriggeredAt!==newQuery.queryLastTriggeredAt&&prevQuery.language===newQuery.language&&prevQuery.query===newQuery.query}const SOURCE_UPDATE_REQUIRED=true;const NO_SOURCE_UPDATE_REQUIRED=false;function updateDueToExtent(prevMeta={},nextMeta={}){const{buffer:previousBuffer}=prevMeta;const{buffer:newBuffer}=nextMeta;if(!previousBuffer||!previousBuffer||!newBuffer){return SOURCE_UPDATE_REQUIRED}if(external_kbnSharedDeps_Lodash_default.a.isEqual(previousBuffer,newBuffer)){return NO_SOURCE_UPDATE_REQUIRED}const previousBufferGeometry=bbox_polygon_default()([previousBuffer.minLon,previousBuffer.minLat,previousBuffer.maxLon,previousBuffer.maxLat]);const newBufferGeometry=bbox_polygon_default()([newBuffer.minLon,newBuffer.minLat,newBuffer.maxLon,newBuffer.maxLat]);const doesPreviousBufferContainNewBuffer=boolean_contains_default()(previousBufferGeometry,newBufferGeometry);const isTrimmed=external_kbnSharedDeps_Lodash_default.a.get(prevMeta,"areResultsTrimmed",false);return doesPreviousBufferContainNewBuffer&&!isTrimmed?NO_SOURCE_UPDATE_REQUIRED:SOURCE_UPDATE_REQUIRED}async function canSkipSourceUpdate({source:source,prevDataRequest:prevDataRequest,nextMeta:nextMeta}){const timeAware=await source.isTimeAware();const refreshTimerAware=await source.isRefreshTimerAware();const extentAware=source.isFilterByMapBounds();const isFieldAware=source.isFieldAware();const isQueryAware=source.isQueryAware();const isGeoGridPrecisionAware=source.isGeoGridPrecisionAware();if(!timeAware&&!refreshTimerAware&&!extentAware&&!isFieldAware&&!isQueryAware&&!isGeoGridPrecisionAware){return!!prevDataRequest&&prevDataRequest.hasDataOrRequestInProgress()}if(!prevDataRequest){return false}const prevMeta=prevDataRequest.getMeta();if(!prevMeta){return false}let updateDueToApplyGlobalTime=false;let updateDueToTime=false;if(timeAware){updateDueToApplyGlobalTime=prevMeta.applyGlobalTime!==nextMeta.applyGlobalTime;if(nextMeta.applyGlobalTime){updateDueToTime=!external_kbnSharedDeps_Lodash_default.a.isEqual(prevMeta.timeFilters,nextMeta.timeFilters)}}let updateDueToRefreshTimer=false;if(refreshTimerAware&&nextMeta.refreshTimerLastTriggeredAt){updateDueToRefreshTimer=!external_kbnSharedDeps_Lodash_default.a.isEqual(prevMeta.refreshTimerLastTriggeredAt,nextMeta.refreshTimerLastTriggeredAt)}let updateDueToFields=false;if(isFieldAware){updateDueToFields=!external_kbnSharedDeps_Lodash_default.a.isEqual(prevMeta.fieldNames,nextMeta.fieldNames)}let updateDueToQuery=false;let updateDueToFilters=false;let updateDueToSourceQuery=false;let updateDueToApplyGlobalQuery=false;if(isQueryAware){updateDueToApplyGlobalQuery=prevMeta.applyGlobalQuery!==nextMeta.applyGlobalQuery;updateDueToSourceQuery=!external_kbnSharedDeps_Lodash_default.a.isEqual(prevMeta.sourceQuery,nextMeta.sourceQuery);if(nextMeta.applyGlobalQuery){updateDueToQuery=!external_kbnSharedDeps_Lodash_default.a.isEqual(prevMeta.query,nextMeta.query);updateDueToFilters=!external_kbnSharedDeps_Lodash_default.a.isEqual(prevMeta.filters,nextMeta.filters)}else{updateDueToQuery=isRefreshOnlyQuery(prevMeta.query,nextMeta.query)}}let updateDueToSearchSessionId=false;if(timeAware||isQueryAware){updateDueToSearchSessionId=prevMeta.searchSessionId!==nextMeta.searchSessionId}let updateDueToPrecisionChange=false;if(isGeoGridPrecisionAware){updateDueToPrecisionChange=!external_kbnSharedDeps_Lodash_default.a.isEqual(prevMeta.geogridPrecision,nextMeta.geogridPrecision)}let updateDueToExtentChange=false;if(extentAware){updateDueToExtentChange=updateDueToExtent(prevMeta,nextMeta)}const updateDueToSourceMetaChange=!external_kbnSharedDeps_Lodash_default.a.isEqual(prevMeta.sourceMeta,nextMeta.sourceMeta);return!updateDueToApplyGlobalTime&&!updateDueToTime&&!updateDueToRefreshTimer&&!updateDueToExtentChange&&!updateDueToFields&&!updateDueToQuery&&!updateDueToFilters&&!updateDueToSourceQuery&&!updateDueToApplyGlobalQuery&&!updateDueToPrecisionChange&&!updateDueToSourceMetaChange&&!updateDueToSearchSessionId}function canSkipStyleMetaUpdate({prevDataRequest:prevDataRequest,nextMeta:nextMeta}){if(!prevDataRequest){return false}const prevMeta=prevDataRequest.getMeta();if(!prevMeta){return false}const updateDueToFields=!external_kbnSharedDeps_Lodash_default.a.isEqual(prevMeta.dynamicStyleFields,nextMeta.dynamicStyleFields);const updateDueToSourceQuery=!external_kbnSharedDeps_Lodash_default.a.isEqual(prevMeta.sourceQuery,nextMeta.sourceQuery);const updateDueToIsTimeAware=nextMeta.isTimeAware!==prevMeta.isTimeAware;const updateDueToTime=nextMeta.isTimeAware?!external_kbnSharedDeps_Lodash_default.a.isEqual(prevMeta.timeFilters,nextMeta.timeFilters):false;const updateDueToSearchSessionId=prevMeta.searchSessionId!==nextMeta.searchSessionId;return!updateDueToFields&&!updateDueToSourceQuery&&!updateDueToIsTimeAware&&!updateDueToTime&&!updateDueToSearchSessionId}function canSkipFormattersUpdate({prevDataRequest:prevDataRequest,nextMeta:nextMeta}){if(!prevDataRequest){return false}const prevMeta=prevDataRequest.getMeta();if(!prevMeta){return false}return external_kbnSharedDeps_Lodash_default.a.isEqual(prevMeta.fieldNames,nextMeta.fieldNames)}let idCounter=0;function generateNumericalId(){const newId=idCounter<Number.MAX_SAFE_INTEGER?idCounter:0;idCounter=newId+1;return newId}function assignFeatureIds(featureCollection){const ids=[];for(let i=0;i<featureCollection.features.length;i++){const id=generateNumericalId();ids.push(id)}const randomizedIds=external_kbnSharedDeps_Lodash_default.a.shuffle(ids);const features=[];for(let i=0;i<featureCollection.features.length;i++){const numericId=randomizedIds[i];const feature=featureCollection.features[i];features.push({type:"Feature",geometry:feature.geometry,properties:{[constants["FEATURE_ID_PROPERTY_NAME"]]:feature.id==null?numericId:feature.id,...feature.properties},id:numericId})}return{type:"FeatureCollection",features:features}}function addGeoJsonMbSource(mbSourceId,mbLayerIds,mbMap){const mbSource=mbMap.getSource(mbSourceId);if(!mbSource){mbMap.addSource(mbSourceId,{type:"geojson",data:constants["EMPTY_FEATURE_COLLECTION"]})}else if(mbSource.type!=="geojson"){mbLayerIds.forEach(mbLayerId=>{if(mbMap.getLayer(mbLayerId)){mbMap.removeLayer(mbLayerId)}});mbMap.removeSource(mbSourceId);mbMap.addSource(mbSourceId,{type:"geojson",data:constants["EMPTY_FEATURE_COLLECTION"]})}}async function syncVectorSource({layerId:layerId,layerName:layerName,prevDataRequest:prevDataRequest,requestMeta:requestMeta,syncContext:syncContext,source:source}){const{startLoading:startLoading,stopLoading:stopLoading,onLoadError:onLoadError,registerCancelCallback:registerCancelCallback,isRequestStillActive:isRequestStillActive}=syncContext;const dataRequestId=constants["SOURCE_DATA_REQUEST_ID"];const requestToken=Symbol(`${layerId}-${dataRequestId}`);const canSkipFetch=await canSkipSourceUpdate({source:source,prevDataRequest:prevDataRequest,nextMeta:requestMeta});if(canSkipFetch){return{refreshed:false,featureCollection:prevDataRequest?prevDataRequest.getData():constants["EMPTY_FEATURE_COLLECTION"]}}try{startLoading(dataRequestId,requestToken,requestMeta);const{data:sourceFeatureCollection,meta:meta}=await source.getGeoJsonWithMeta(layerName,requestMeta,registerCancelCallback.bind(null,requestToken),()=>isRequestStillActive(dataRequestId,requestToken));const layerFeatureCollection=assignFeatureIds(sourceFeatureCollection);const supportedShapes=await source.getSupportedShapeTypes();if(supportedShapes.includes(constants["VECTOR_SHAPE_TYPE"].LINE)||supportedShapes.includes(constants["VECTOR_SHAPE_TYPE"].POLYGON)){layerFeatureCollection.features.push(...getCentroidFeatures(layerFeatureCollection))}stopLoading(dataRequestId,requestToken,layerFeatureCollection,meta);return{refreshed:true,featureCollection:layerFeatureCollection}}catch(error){if(!(error instanceof DataRequestAbortError)){onLoadError(dataRequestId,requestToken,error.message)}throw error}}async function getVectorSourceBounds({layerId:layerId,syncContext:syncContext,source:source,sourceQuery:sourceQuery}){const{startLoading:startLoading,stopLoading:stopLoading,registerCancelCallback:registerCancelCallback,dataFilters:dataFilters}=syncContext;const requestToken=Symbol(`${constants["SOURCE_BOUNDS_DATA_REQUEST_ID"]}-${layerId}`);const boundsFilters={sourceQuery:sourceQuery?sourceQuery:undefined,query:dataFilters.query,timeFilters:dataFilters.timeFilters,filters:dataFilters.filters,applyGlobalQuery:source.getApplyGlobalQuery(),applyGlobalTime:source.getApplyGlobalTime()};let bounds=null;try{startLoading(constants["SOURCE_BOUNDS_DATA_REQUEST_ID"],requestToken,boundsFilters);bounds=await source.getBoundsForFilters(boundsFilters,registerCancelCallback.bind(null,requestToken))}finally{stopLoading(constants["SOURCE_BOUNDS_DATA_REQUEST_ID"],requestToken,bounds?bounds:{})}return bounds}function getDisabledByMessage(styleName){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.vector.disabledByMessage",{defaultMessage:`Set '{styleLabel}' to enable`,values:{styleLabel:getVectorStyleLabel(styleName)}})}function getVectorStyleLabel(styleName){switch(styleName){case constants["VECTOR_STYLES"].FILL_COLOR:return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.vector.fillColorLabel",{defaultMessage:"Fill color"});case constants["VECTOR_STYLES"].LINE_COLOR:return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.vector.borderColorLabel",{defaultMessage:"Border color"});case constants["VECTOR_STYLES"].LINE_WIDTH:return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.vector.borderWidthLabel",{defaultMessage:"Border width"});case constants["VECTOR_STYLES"].ICON:return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.vector.iconLabel",{defaultMessage:"Icon"});case constants["VECTOR_STYLES"].ICON_SIZE:return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.vector.symbolSizeLabel",{defaultMessage:"Symbol size"});case constants["VECTOR_STYLES"].ICON_ORIENTATION:return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.vector.orientationLabel",{defaultMessage:"Symbol orientation"});case constants["VECTOR_STYLES"].LABEL_TEXT:return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.vector.labelLabel",{defaultMessage:"Label"});case constants["VECTOR_STYLES"].LABEL_COLOR:return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.vector.labelColorLabel",{defaultMessage:"Label color"});case constants["VECTOR_STYLES"].LABEL_SIZE:return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.vector.labelSizeLabel",{defaultMessage:"Label size"});case constants["VECTOR_STYLES"].LABEL_BORDER_COLOR:return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.vector.labelBorderColorLabel",{defaultMessage:"Label border color"});case constants["VECTOR_STYLES"].LABEL_BORDER_SIZE:return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.vector.labelBorderWidthLabel",{defaultMessage:"Label border width"});default:return styleName}}function style_prop_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class style_prop_editor_StylePropEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);style_prop_editor_defineProperty(this,"_prevStaticStyleOptions",this.props.defaultStaticStyleOptions);style_prop_editor_defineProperty(this,"_prevDynamicStyleOptions",this.props.defaultDynamicStyleOptions);style_prop_editor_defineProperty(this,"_onTypeToggle",()=>{if(this.props.styleProperty.isDynamic()){this._prevDynamicStyleOptions=this.props.styleProperty.getOptions();this.props.onStaticStyleChange(this.props.styleProperty.getStyleName(),this._prevStaticStyleOptions)}else{this._prevStaticStyleOptions=this.props.styleProperty.getOptions();this.props.onDynamicStyleChange(this.props.styleProperty.getStyleName(),this._prevDynamicStyleOptions)}});style_prop_editor_defineProperty(this,"_onDataMappingChange",updatedObjects=>{const options={...this.props.styleProperty.getOptions(),...updatedObjects};this.props.onDynamicStyleChange(this.props.styleProperty.getStyleName(),options)})}renderStaticDynamicSelect(){const options=[{value:constants["STYLE_TYPE"].STATIC,text:this.props.customStaticOptionLabel?this.props.customStaticOptionLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.staticDynamicSelect.staticLabel",{defaultMessage:"Fixed"})},{value:constants["STYLE_TYPE"].DYNAMIC,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.staticDynamicSelect.dynamicLabel",{defaultMessage:"By value"})}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{options:options,value:this.props.styleProperty.isDynamic()?constants["STYLE_TYPE"].DYNAMIC:constants["STYLE_TYPE"].STATIC,onChange:this._onTypeToggle,disabled:this.props.disabled||this.props.fields.length===0,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.staticDynamicSelect.ariaLabel",{defaultMessage:"Select to style by fixed value or by data value"}),compressed:true,"data-test-subj":`staticDynamicSelect_${this.props.styleProperty.getStyleName()}`})}render(){const staticDynamicSelect=this.renderStaticDynamicSelect();const stylePropertyForm=this.props.disabled&&this.props.disabledBy?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{anchorClassName:"mapStyleFormDisabledTooltip",content:getDisabledByMessage(this.props.disabledBy)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{compressed:true,disabled:true})))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.cloneElement(this.props.children,{staticDynamicSelect:staticDynamicSelect}),this.props.styleProperty.renderDataMappingPopover(this._onDataMappingChange));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:getVectorStyleLabel(this.props.styleProperty.getStyleName()),display:"rowCompressed"},stylePropertyForm)}}var kibanaReact_public_=__webpack_require__(36);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function field_select_renderOption(option,searchValue,contentClassName){const fieldIcon=option.value?external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_["FieldIcon"],{type:option.value.type,fill:"none"}):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:contentClassName,gutterSize:"s",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:null},fieldIcon),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHighlight"],{search:searchValue},option.label)))}function groupFieldsByOrigin(fields){const fieldsByOriginMap=new Map;fields.forEach(field=>{if(fieldsByOriginMap.has(field.origin)){const fieldsList=fieldsByOriginMap.get(field.origin);fieldsList.push(field);fieldsByOriginMap.set(field.origin,fieldsList)}else{fieldsByOriginMap.set(field.origin,[field])}});function fieldsListToOptions(fieldsList){return fieldsList.map(field=>({value:field,label:field.label})).sort((a,b)=>a.label.toLowerCase().localeCompare(b.label.toLowerCase()))}if(fieldsByOriginMap.size===1){const onlyOriginKey=fieldsByOriginMap.keys().next().value;const fieldsList=fieldsByOriginMap.get(onlyOriginKey);return fieldsListToOptions(fieldsList)}const optionGroups=[];fieldsByOriginMap.forEach((fieldsList,fieldOrigin)=>{optionGroups.push({label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.style.fieldSelect.OriginLabel",{defaultMessage:"Fields from {fieldOrigin}",values:{fieldOrigin:fieldOrigin}}),options:fieldsListToOptions(fieldsList)})});optionGroups.sort((a,b)=>a.label.toLowerCase().localeCompare(b.label.toLowerCase()));return optionGroups}function FieldSelect({fields:fields,selectedFieldName:selectedFieldName,onChange:onChange,styleName:styleName,...rest}){const onFieldChange=selectedFields=>{onChange({field:selectedFields.length>0&&selectedFields[0].value?selectedFields[0].value:null})};let selectedOption;if(selectedFieldName){const field=fields.find(f=>f.name===selectedFieldName);if(field){selectedOption={value:field,label:field.label}}}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],_extends({selectedOptions:selectedOption?[selectedOption]:[],options:groupFieldsByOrigin(fields),onChange:onFieldChange,singleSelection:{asPlainText:true},isClearable:false,fullWidth:true,placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.vector.selectFieldPlaceholder",{defaultMessage:"Select a field"}),renderOption:field_select_renderOption,"data-test-subj":`styleFieldSelect_${styleName}`},rest))}const DEFAULT_CUSTOM_COLOR="#FF0000";const DEFAULT_NEXT_COLOR="#00FF00";function removeRow(colorStops,index){if(colorStops.length===1){return colorStops}return[...colorStops.slice(0,index),...colorStops.slice(index+1)]}function addOrdinalRow(colorStops,index){const currentStop=colorStops[index].stop;let delta=1;if(index===colorStops.length-1){if(index!==0){const prevStop=colorStops[index-1].stop;delta=currentStop-prevStop}}else{const nextStop=colorStops[index+1].stop;delta=(nextStop-currentStop)/2}const nextValue=currentStop+delta;return addRow(colorStops,index,nextValue)}function addCategoricalRow(colorStops,index){const currentStop=colorStops[index].stop;const nextValue=currentStop===""?currentStop+"a":"";return addRow(colorStops,index,nextValue)}function addRow(colorStops,index,nextValue){const newRow={stop:nextValue,color:DEFAULT_CUSTOM_COLOR};return[...colorStops.slice(0,index+1),newRow,...colorStops.slice(index+1)]}function isColorInvalid(color){return!Object(external_kbnSharedDeps_ElasticEui_["isValidHex"])(color)||color===""}function isOrdinalStopInvalid(stop){return stop===""||isNaN(stop)}function isCategoricalStopsInvalid(colorStops){const nonDefaults=colorStops.slice(1);const values=nonDefaults.map(stop=>stop.stop);const uniques=external_kbnSharedDeps_Lodash_default.a.uniq(values);return values.length!==uniques.length}function isOrdinalStopsInvalid(colorStops){return colorStops.some((colorStop,index)=>{let isDescending=false;if(index!==0){const prevStop=colorStops[index-1].stop;isDescending=prevStop>=colorStop.stop}return isColorInvalid(colorStop.color)||isOrdinalStopInvalid(colorStop.stop)||isDescending})}function getOtherCategoryLabel(){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.categorical.otherCategoryLabel",{defaultMessage:"Other"})}function mb_validated_color_picker_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const RGBA_0000="rgba(0,0,0,0)";class mb_validated_color_picker_MbValidatedColorPicker extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);mb_validated_color_picker_defineProperty(this,"state",{colorInputValue:this.props.color===RGBA_0000?"":this.props.color});mb_validated_color_picker_defineProperty(this,"_onColorChange",color=>{this.setState({colorInputValue:color});this.props.onChange(Object(external_kbnSharedDeps_ElasticEui_["isValidHex"])(color)?color:RGBA_0000)})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiColorPicker"],{onChange:this._onColorChange,color:this.state.colorInputValue,swatches:this.props.swatches,append:this.props.append,compressed:true})}}const ColorStops=({onChange:onChange,colorStops:colorStops,isStopsInvalid:isStopsInvalid,getStopError:getStopError,renderStopInput:renderStopInput,addNewRow:addNewRow,canDeleteStop:canDeleteStop,swatches:swatches})=>{function getStopInput(stop,index){const onStopChange=newStopValue=>{const newColorStops=external_kbnSharedDeps_Lodash_default.a.cloneDeep(colorStops);newColorStops[index].stop=newStopValue;onChange({colorStops:newColorStops,isInvalid:isStopsInvalid(newColorStops)})};return{stopError:getStopError(stop,index),stopInput:renderStopInput(stop,onStopChange,index)}}const rows=colorStops.map((colorStop,index)=>{const onColorChange=color=>{const newColorStops=external_kbnSharedDeps_Lodash_default.a.cloneDeep(colorStops);newColorStops[index].color=color;onChange({colorStops:newColorStops,isInvalid:isStopsInvalid(newColorStops)})};const{stopError:stopError,stopInput:stopInput}=getStopInput(colorStop.stop,index);const color=colorStop.color;const colorError=isColorInvalid(color)?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.colorStops.hexWarningLabel",{defaultMessage:"Color must provide a valid hex value"}):undefined;const errors=[];if(stopError){errors.push(stopError)}if(colorError){errors.push(colorError)}const onAdd=()=>{const newColorStops=addNewRow(colorStops,index);onChange({colorStops:newColorStops,isInvalid:isStopsInvalid(newColorStops)})};let deleteButton;if(canDeleteStop(colorStops,index)){const onRemove=()=>{const newColorStops=removeRow(colorStops,index);onChange({colorStops:newColorStops,isInvalid:isStopsInvalid(newColorStops)})};deleteButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"trash",color:"danger","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.colorStops.deleteButtonAriaLabel",{defaultMessage:"Delete"}),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.colorStops.deleteButtonLabel",{defaultMessage:"Delete"}),onClick:onRemove})}const colorPickerButtons=external_kbnSharedDeps_React_default.a.createElement("div",null,deleteButton,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"plusInCircle",color:"primary","aria-label":"Add",title:"Add",onClick:onAdd}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{key:index,className:"mapColorStop",isInvalid:errors.length!==0,error:errors,display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mapStyleSettings__fixedBox"},stopInput),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(mb_validated_color_picker_MbValidatedColorPicker,{onChange:onColorChange,color:color,swatches:swatches,append:colorPickerButtons}))))});return external_kbnSharedDeps_React_default.a.createElement("div",null,rows)};const ColorStopsOrdinal=({colorStops:colorStops=[{stop:0,color:DEFAULT_CUSTOM_COLOR}],onChange:onChange,swatches:swatches})=>{const getStopError=(stop,index)=>{let error;if(isOrdinalStopInvalid(stop)){error=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.colorStops.ordinalStop.numberWarningLabel",{defaultMessage:"Stop must be a number"})}else if(index!==0&&colorStops[index-1].stop>=stop){error=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.colorStops.ordinalStop.numberOrderingWarningLabel",{defaultMessage:"Stop must be greater than previous stop value"})}return error};const renderStopInput=(stop,onStopChange,index)=>{function handleOnChangeEvent(event){const sanitizedValue=parseFloat(event.target.value);const newStopValue=isNaN(sanitizedValue)?"":sanitizedValue;onStopChange(newStopValue)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.colorStops.ordinalStop.stopLabel",{defaultMessage:"Stop"}),value:index===0?"":stop,onChange:handleOnChangeEvent,compressed:true,disabled:index===0})};const canDeleteStop=colorStops=>colorStops.length>1;return external_kbnSharedDeps_React_default.a.createElement(ColorStops,{onChange:onChange,colorStops:colorStops,isStopsInvalid:isOrdinalStopsInvalid,getStopError:getStopError,renderStopInput:renderStopInput,canDeleteStop:canDeleteStop,addNewRow:addOrdinalRow,swatches:swatches})};function style_util_getOtherCategoryLabel(){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.categorical.otherCategoryLabel",{defaultMessage:"Other"})}function getComputedFieldName(styleName,fieldName){return`${getComputedFieldNamePrefix(fieldName)}__${styleName}`}function getComputedFieldNamePrefix(fieldName){return`__kbn__dynamic__${fieldName}`}function isOnlySingleFeatureType(featureType,supportedFeatures,hasFeatureType){if(supportedFeatures.length===1){return supportedFeatures[0]===featureType}const featureTypes=Object.keys(hasFeatureType);return featureTypes.reduce((accumulator,featureTypeKey)=>{const hasFeature=hasFeatureType[featureTypeKey];return featureTypeKey===featureType?accumulator&&hasFeature:accumulator&&!hasFeature},true)}function dynamicRound(value){if(typeof value!=="number"){return value}let precision=0;let threshold=10;while(value<threshold&&precision<8){precision++;threshold=threshold/10}return precision===0?Math.round(value):parseFloat(value.toFixed(precision+1))}function assignCategoriesToPalette({categories:categories,paletteValues:paletteValues}){const stops=[];let fallbackSymbolId=null;if(categories.length&&paletteValues.length){const maxLength=Math.min(paletteValues.length,categories.length+1);fallbackSymbolId=paletteValues[maxLength-1];for(let i=0;i<maxLength-1;i++){stops.push({stop:categories[i].key,style:paletteValues[i]})}}return{stops:stops,fallbackSymbolId:fallbackSymbolId}}function makeMbClampedNumberExpression({lookupFunction:lookupFunction,fieldName:fieldName,minValue:minValue,maxValue:maxValue,fallback:fallback}){const clamp=["max",["min",["to-number",[lookupFunction,fieldName]],maxValue],minValue];return["coalesce",["case",["==",[lookupFunction,fieldName],null],minValue-1,clamp],fallback]}function stop_input_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class stop_input_StopInput extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);stop_input_defineProperty(this,"_isMounted",false);stop_input_defineProperty(this,"_onFocus",()=>{if(!this.state.hasPrevFocus){this.setState({hasPrevFocus:true});this._onSearchChange("")}});stop_input_defineProperty(this,"_onChange",selectedOptions=>{this.props.onChange(external_kbnSharedDeps_Lodash_default.a.get(selectedOptions,"[0].label",""))});stop_input_defineProperty(this,"_onCreateOption",newValue=>{this.props.onChange(newValue)});stop_input_defineProperty(this,"_onSearchChange",async searchValue=>{this.setState({isLoadingSuggestions:true,searchValue:searchValue},()=>{this._loadSuggestions(searchValue)})});stop_input_defineProperty(this,"_loadSuggestions",external_kbnSharedDeps_Lodash_default.a.debounce(async searchValue=>{let suggestions=[];try{suggestions=await this.props.getValueSuggestions(searchValue)}catch(error){}if(this._isMounted&&searchValue===this.state.searchValue){this.setState({isLoadingSuggestions:false,suggestions:suggestions})}},300));stop_input_defineProperty(this,"_onFieldTextChange",event=>{this.setState({localFieldTextValue:event.target.value});this._debouncedOnFieldTextChange()});stop_input_defineProperty(this,"_debouncedOnFieldTextChange",external_kbnSharedDeps_Lodash_default.a.debounce(()=>{this.props.onChange(this.state.localFieldTextValue)},500));this.state={suggestions:[],isLoadingSuggestions:false,hasPrevFocus:false,fieldDataType:null,localFieldTextValue:props.value}}componentDidMount(){this._isMounted=true;this._loadFieldDataType()}componentWillUnmount(){this._isMounted=false;this._loadSuggestions.cancel()}async _loadFieldDataType(){const fieldDataType=await this.props.field.getDataType();if(this._isMounted){this.setState({fieldDataType:fieldDataType})}}_renderSuggestionInput(){const suggestionOptions=this.state.suggestions.map(suggestion=>({label:`${suggestion}`}));const selectedOptions=[];if(this.props.value){let option=suggestionOptions.find(({label:label})=>label===this.props.value);if(!option){option={label:this.props.value};suggestionOptions.unshift(option)}selectedOptions.push(option)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{options:suggestionOptions,selectedOptions:selectedOptions,singleSelection:{asPlainText:true},onChange:this._onChange,onSearchChange:this._onSearchChange,onCreateOption:this._onCreateOption,isClearable:false,isLoading:this.state.isLoadingSuggestions,onFocus:this._onFocus,"data-test-subj":this.props.dataTestSubj,compressed:true})}_renderTextInput(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{value:this.state.localFieldTextValue,onChange:this._onFieldTextChange,compressed:true})}render(){if(!this.state.fieldDataType){return null}return this.state.fieldDataType==="string"||this.state.fieldDataType==="boolean"?this._renderSuggestionInput():this._renderTextInput()}}const ColorStopsCategorical=({colorStops:colorStops=[{stop:null,color:DEFAULT_CUSTOM_COLOR},{stop:"",color:DEFAULT_NEXT_COLOR}],field:field,onChange:onChange,getValueSuggestions:getValueSuggestions,swatches:swatches})=>{const getStopError=(stop,index)=>{let count=0;for(let i=1;i<colorStops.length;i++){if(colorStops[i].stop===stop&&i!==index){count++}}return count?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.colorStops.categoricalStop.noDupesWarningLabel",{defaultMessage:"Stop values must be unique"}):null};const renderStopInput=(stop,onStopChange,index)=>{const stopValue=typeof stop==="string"?stop:"";if(index===0){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{"aria-label":style_util_getOtherCategoryLabel(),placeholder:style_util_getOtherCategoryLabel(),disabled:true,compressed:true})}return external_kbnSharedDeps_React_default.a.createElement(stop_input_StopInput,{key:field.getName(),field:field,getValueSuggestions:getValueSuggestions,value:stopValue,onChange:onStopChange,dataTestSubj:`colorStopInput${index}`})};const canDeleteStop=(colorStops,index)=>colorStops.length>2&&index!==0;return external_kbnSharedDeps_React_default.a.createElement(ColorStops,{onChange:onChange,colorStops:colorStops,isStopsInvalid:isCategoricalStopsInvalid,getStopError:getStopError,renderStopInput:renderStopInput,canDeleteStop:canDeleteStop,addNewRow:addCategoricalRow,swatches:swatches})};var tinycolor=__webpack_require__(241);var tinycolor_default=__webpack_require__.n(tinycolor);var external_kbnSharedDeps_ElasticEuiLibServices_=__webpack_require__(42);const DEFAULT_HEATMAP_COLOR_RAMP_NAME="theclassic";const DEFAULT_FILL_COLORS=Object(external_kbnSharedDeps_ElasticEuiLibServices_["euiPaletteColorBlind"])();const DEFAULT_LINE_COLORS=[...DEFAULT_FILL_COLORS.map(color=>tinycolor_default()(color).darken().toHexString()),"#000","#FFF"];const ROYAL_BLUE="rgb(65, 105, 225)";const CYAN="rgb(0, 256, 256)";const LIME="rgb(0, 256, 0)";const YELLOW="rgb(256, 256, 0)";const RED="rgb(256, 0, 0)";const HEATMAP_PALETTE=[ROYAL_BLUE,CYAN,LIME,YELLOW,RED];function getColorBlindPalette(steps){const rotations=Math.ceil(steps/10);const palette=Object(external_kbnSharedDeps_ElasticEuiLibServices_["euiPaletteColorBlind"])({rotations:rotations});return palette.slice(0,steps-1)}const COLOR_PALETTES=[{value:"Blues",getPalette:steps=>Object(external_kbnSharedDeps_ElasticEuiLibServices_["euiPaletteCool"])(steps),palette:Object(external_kbnSharedDeps_ElasticEuiLibServices_["euiPaletteCool"])(8),type:"gradient"},{value:"Greens",getPalette:steps=>Object(external_kbnSharedDeps_ElasticEuiLibServices_["euiPalettePositive"])(steps),palette:Object(external_kbnSharedDeps_ElasticEuiLibServices_["euiPalettePositive"])(8),type:"gradient"},{value:"Greys",getPalette:steps=>Object(external_kbnSharedDeps_ElasticEuiLibServices_["euiPaletteGray"])(steps),palette:Object(external_kbnSharedDeps_ElasticEuiLibServices_["euiPaletteGray"])(8),type:"gradient"},{value:"Reds",getPalette:steps=>Object(external_kbnSharedDeps_ElasticEuiLibServices_["euiPaletteNegative"])(steps),palette:Object(external_kbnSharedDeps_ElasticEuiLibServices_["euiPaletteNegative"])(8),type:"gradient"},{value:"Yellow to Red",getPalette:steps=>Object(external_kbnSharedDeps_ElasticEuiLibServices_["euiPaletteWarm"])(steps),palette:Object(external_kbnSharedDeps_ElasticEuiLibServices_["euiPaletteWarm"])(8),type:"gradient"},{value:"Green to Red",getPalette:steps=>Object(external_kbnSharedDeps_ElasticEuiLibServices_["euiPaletteForStatus"])(steps),palette:Object(external_kbnSharedDeps_ElasticEuiLibServices_["euiPaletteForStatus"])(8),type:"gradient"},{value:"Blue to Red",getPalette:steps=>Object(external_kbnSharedDeps_ElasticEuiLibServices_["euiPaletteForTemperature"])(steps),palette:Object(external_kbnSharedDeps_ElasticEuiLibServices_["euiPaletteForTemperature"])(8),type:"gradient"},{value:DEFAULT_HEATMAP_COLOR_RAMP_NAME,getPalette:steps=>Object(external_kbnSharedDeps_ElasticEuiLibServices_["colorPalette"])(HEATMAP_PALETTE,steps,true,true),palette:HEATMAP_PALETTE,type:"gradient"},{value:"palette_0",getPalette:getColorBlindPalette,palette:Object(external_kbnSharedDeps_ElasticEuiLibServices_["euiPaletteColorBlind"])(),type:"fixed"},{value:"palette_20",getPalette:getColorBlindPalette,palette:Object(external_kbnSharedDeps_ElasticEuiLibServices_["euiPaletteColorBlind"])({rotations:2}),type:"fixed"},{value:"palette_30",getPalette:getColorBlindPalette,palette:Object(external_kbnSharedDeps_ElasticEuiLibServices_["euiPaletteColorBlind"])({rotations:3}),type:"fixed"}];const NUMERICAL_COLOR_PALETTES=COLOR_PALETTES.filter(palette=>palette.type==="gradient");const CATEGORICAL_COLOR_PALETTES=COLOR_PALETTES.filter(palette=>palette.type==="fixed");function getColorPalette(colorPaletteId){const colorPalette=COLOR_PALETTES.find(({value:value})=>value===colorPaletteId);return colorPalette?colorPalette.palette:[]}function getColorRampCenterColor(colorPaletteId){if(!colorPaletteId){return null}const palette=getColorPalette(colorPaletteId);return palette.length===0?null:palette[Math.floor(palette.length/2)]}function getOrdinalMbColorRampStops(colorPaletteId,min,max){if(!colorPaletteId){return null}if(min>max){return null}const palette=getColorPalette(colorPaletteId);if(palette.length===0){return null}if(max===min){return[max,palette[palette.length-1]]}const delta=max-min;return palette.reduce((accu,stopColor,idx,srcArr)=>{const stopNumber=min+delta*idx/srcArr.length;return[...accu,stopNumber,stopColor]},[])}function getPercentilesMbColorRampStops(colorPaletteId,percentiles){if(!colorPaletteId){return null}const paletteObject=NUMERICAL_COLOR_PALETTES.find(({value:value})=>value===colorPaletteId);return paletteObject?paletteObject.getPalette(percentiles.length).reduce((accu,stopColor,idx)=>[...accu,percentiles[idx].value,stopColor],[]):null}function getLinearGradient(colorStrings){const intervals=colorStrings.length;let linearGradient=`linear-gradient(to right, ${colorStrings[0]} 0%,`;for(let i=1;i<intervals-1;i++){linearGradient=`${linearGradient} ${colorStrings[i]}       ${Math.floor(100*i/(intervals-1))}%,`}return`${linearGradient} ${colorStrings[colorStrings.length-1]} 100%)`}function color_map_select_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const CUSTOM_COLOR_MAP="CUSTOM_COLOR_MAP";class color_map_select_ColorMapSelect extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);color_map_select_defineProperty(this,"state",{});color_map_select_defineProperty(this,"_onColorPaletteSelect",selectedPaletteId=>{const useCustomColorMap=selectedPaletteId===CUSTOM_COLOR_MAP;this.props.onChange({color:useCustomColorMap?null:selectedPaletteId,useCustomColorMap:useCustomColorMap,type:this.props.colorMapType})});color_map_select_defineProperty(this,"_onCustomColorMapChange",({colorStops:colorStops,isInvalid:isInvalid})=>{if(isInvalid){this.setState({customColorMap:colorStops});return}this.props.onChange({useCustomColorMap:true,customColorMap:colorStops,type:this.props.colorMapType})})}static getDerivedStateFromProps(nextProps,prevState){if(nextProps.customColorMap===prevState.prevPropsCustomColorMap){return null}return{prevPropsCustomColorMap:nextProps.customColorMap,customColorMap:nextProps.customColorMap}}_renderColorMapToggle(){const options=[{value:constants["COLOR_MAP_TYPE"].ORDINAL,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.dynamicColorSelect.quantitativeLabel",{defaultMessage:"As number"})},{value:constants["COLOR_MAP_TYPE"].CATEGORICAL,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.dynamicColorSelect.qualitativeLabel",{defaultMessage:"As category"})}];const selectedValue=this.props.styleProperty.isOrdinal()?constants["COLOR_MAP_TYPE"].ORDINAL:constants["COLOR_MAP_TYPE"].CATEGORICAL;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{options:options,value:selectedValue,onChange:this.props.onColorMapTypeChange,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.dynamicColorSelect.qualitativeOrQuantitativeAriaLabel",{defaultMessage:"Choose `As number` to map by number in a color range, or `As category`to categorize by color palette."}),compressed:true})}_renderColorStopsInput(){if(!this.props.isCustomOnly&&!this.props.useCustomColorMap){return null}let colorStopEditor;if(this.props.colorMapType===constants["COLOR_MAP_TYPE"].ORDINAL){colorStopEditor=external_kbnSharedDeps_React_default.a.createElement(ColorStopsOrdinal,{colorStops:this.state.customColorMap,onChange:this._onCustomColorMapChange,swatches:this.props.swatches})}else{colorStopEditor=external_kbnSharedDeps_React_default.a.createElement(ColorStopsCategorical,{colorStops:this.state.customColorMap,field:this.props.styleProperty.getField(),getValueSuggestions:this.props.styleProperty.getValueSuggestions,onChange:this._onCustomColorMapChange,swatches:this.props.swatches})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,colorStopEditor))}_renderColorMapSelections(){if(this.props.isCustomOnly){return null}const palettes=this.props.colorMapType===constants["COLOR_MAP_TYPE"].ORDINAL?NUMERICAL_COLOR_PALETTES:CATEGORICAL_COLOR_PALETTES;const palettesWithCustom=[{value:CUSTOM_COLOR_MAP,title:this.props.colorMapType===constants["COLOR_MAP_TYPE"].ORDINAL?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.style.customColorRampLabel",{defaultMessage:"Custom color ramp"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.style.customColorPaletteLabel",{defaultMessage:"Custom color palette"}),type:"text","data-test-subj":`colorMapSelectOption_${CUSTOM_COLOR_MAP}`},...palettes];const toggle=this.props.showColorMapTypeToggle?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},this._renderColorMapToggle()):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs"},toggle,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiColorPalettePicker"],{palettes:palettesWithCustom,onChange:this._onColorPaletteSelect,valueOfSelected:this.props.useCustomColorMap?CUSTOM_COLOR_MAP:this.props.colorPaletteId,compressed:true,"data-test-subj":`colorMapSelect_${this.props.styleProperty.getStyleName()}`}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,this._renderColorMapSelections(),this._renderColorStopsInput())}}function DynamicColorForm({fields:fields,onDynamicStyleChange:onDynamicStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty,swatches:swatches}){const styleOptions=styleProperty.getOptions();const onColorMapSelect=({color:color,customColorMap:customColorMap,type:type,useCustomColorMap:useCustomColorMap})=>{const newColorOptions={...styleOptions,type:type};if(type===constants["COLOR_MAP_TYPE"].ORDINAL){newColorOptions.useCustomColorRamp=useCustomColorMap;if(customColorMap){newColorOptions.customColorRamp=customColorMap}if(color){newColorOptions.color=color}}else{newColorOptions.useCustomColorPalette=useCustomColorMap;if(customColorMap){newColorOptions.customColorPalette=customColorMap}if(color){newColorOptions.colorCategory=color}}onDynamicStyleChange(styleProperty.getStyleName(),newColorOptions)};const onFieldChange=async({field:field})=>{const{name:name,origin:origin,type:fieldType}=field;const defaultColorMapType=constants["CATEGORICAL_DATA_TYPES"].includes(fieldType)?constants["COLOR_MAP_TYPE"].CATEGORICAL:constants["COLOR_MAP_TYPE"].ORDINAL;onDynamicStyleChange(styleProperty.getStyleName(),{...styleOptions,field:{name:name,origin:origin},type:defaultColorMapType})};const onColorMapTypeChange=async e=>{const colorMapType=e.target.value;onDynamicStyleChange(styleProperty.getStyleName(),{...styleOptions,type:colorMapType})};const getField=()=>{const fieldName=styleProperty.getFieldName();if(!fieldName){return null}return fields.find(field=>field.name===fieldName)};const renderColorMapSelect=()=>{const field=getField();if(!field){return null}const showColorMapTypeToggle=!constants["CATEGORICAL_DATA_TYPES"].includes(field.type);if(styleProperty.isOrdinal()){return external_kbnSharedDeps_React_default.a.createElement(color_map_select_ColorMapSelect,{isCustomOnly:!field.supportsAutoDomain,onChange:onColorMapSelect,onColorMapTypeChange:onColorMapTypeChange,colorMapType:constants["COLOR_MAP_TYPE"].ORDINAL,colorPaletteId:styleOptions.color,customColorMap:styleOptions.customColorRamp,useCustomColorMap:external_kbnSharedDeps_Lodash_default.a.get(styleOptions,"useCustomColorRamp",false),styleProperty:styleProperty,showColorMapTypeToggle:showColorMapTypeToggle,swatches:swatches})}else if(styleProperty.isCategorical()){return external_kbnSharedDeps_React_default.a.createElement(color_map_select_ColorMapSelect,{isCustomOnly:!field.supportsAutoDomain,onColorMapTypeChange:onColorMapTypeChange,onChange:onColorMapSelect,colorMapType:constants["COLOR_MAP_TYPE"].CATEGORICAL,colorPaletteId:styleOptions.colorCategory,customColorMap:styleOptions.customColorPalette,useCustomColorMap:external_kbnSharedDeps_Lodash_default.a.get(styleOptions,"useCustomColorPalette",false),styleProperty:styleProperty,showColorMapTypeToggle:showColorMapTypeToggle,swatches:swatches})}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(FieldSelect,{styleName:styleProperty.getStyleName(),fields:fields,selectedFieldName:styleProperty.getFieldName(),onChange:onFieldChange,compressed:true}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),renderColorMapSelect())}function StaticColorForm({onStaticStyleChange:onStaticStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty,swatches:swatches}){const onColorChange=color=>{onStaticStyleChange(styleProperty.getStyleName(),{color:color})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(mb_validated_color_picker_MbValidatedColorPicker,{onChange:onColorChange,color:styleProperty.getOptions().color,swatches:swatches})))}function vector_style_color_editor_extends(){vector_style_color_editor_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return vector_style_color_editor_extends.apply(this,arguments)}function VectorStyleColorEditor(props){const colorForm=props.styleProperty.isDynamic()?external_kbnSharedDeps_React_default.a.createElement(DynamicColorForm,props):external_kbnSharedDeps_React_default.a.createElement(StaticColorForm,props);return external_kbnSharedDeps_React_default.a.createElement(style_prop_editor_StylePropEditor,vector_style_color_editor_extends({},props,{customStaticOptionLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.color.staticDynamicSelect.staticLabel",{defaultMessage:"Solid"})}),colorForm)}const MIN_SIZE=1;const MAX_SIZE=64;const DEFAULT_MIN_SIZE=7;const DEFAULT_MAX_SIZE=32;const DEFAULT_SIGMA=3;const DEFAULT_LABEL_SIZE=14;const DEFAULT_ICON_SIZE=6;const DEFAULT_COLOR_RAMP=NUMERICAL_COLOR_PALETTES[0].value;const DEFAULT_COLOR_PALETTE=CATEGORICAL_COLOR_PALETTES[0].value;const LINE_STYLES=[constants["VECTOR_STYLES"].LINE_COLOR,constants["VECTOR_STYLES"].LINE_WIDTH];const POLYGON_STYLES=[constants["VECTOR_STYLES"].FILL_COLOR,constants["VECTOR_STYLES"].LINE_COLOR,constants["VECTOR_STYLES"].LINE_WIDTH];function getDefaultStaticProperties(mapColors=[]){let nextColorIndex=0;if(mapColors.length){const lastColor=mapColors[mapColors.length-1];if(DEFAULT_FILL_COLORS.includes(lastColor)){nextColorIndex=(DEFAULT_FILL_COLORS.indexOf(lastColor)+1)%DEFAULT_FILL_COLORS.length}}const nextFillColor=DEFAULT_FILL_COLORS[nextColorIndex];const nextLineColor=DEFAULT_LINE_COLORS[nextColorIndex];const isDarkMode=Object(kibana_services["s"])();return{[constants["VECTOR_STYLES"].ICON]:{type:constants["STYLE_TYPE"].STATIC,options:{value:constants["DEFAULT_ICON"]}},[constants["VECTOR_STYLES"].FILL_COLOR]:{type:constants["STYLE_TYPE"].STATIC,options:{color:nextFillColor}},[constants["VECTOR_STYLES"].LINE_COLOR]:{type:constants["STYLE_TYPE"].STATIC,options:{color:nextLineColor}},[constants["VECTOR_STYLES"].LINE_WIDTH]:{type:constants["STYLE_TYPE"].STATIC,options:{size:1}},[constants["VECTOR_STYLES"].ICON_SIZE]:{type:constants["STYLE_TYPE"].STATIC,options:{size:DEFAULT_ICON_SIZE}},[constants["VECTOR_STYLES"].ICON_ORIENTATION]:{type:constants["STYLE_TYPE"].STATIC,options:{orientation:0}},[constants["VECTOR_STYLES"].LABEL_TEXT]:{type:constants["STYLE_TYPE"].STATIC,options:{value:""}},[constants["VECTOR_STYLES"].LABEL_COLOR]:{type:constants["STYLE_TYPE"].STATIC,options:{color:isDarkMode?"#FFFFFF":"#000000"}},[constants["VECTOR_STYLES"].LABEL_SIZE]:{type:constants["STYLE_TYPE"].STATIC,options:{size:DEFAULT_LABEL_SIZE}},[constants["VECTOR_STYLES"].LABEL_BORDER_COLOR]:{type:constants["STYLE_TYPE"].STATIC,options:{color:isDarkMode?"#000000":"#FFFFFF"}},[constants["VECTOR_STYLES"].SYMBOLIZE_AS]:{options:{value:constants["SYMBOLIZE_AS_TYPES"].CIRCLE}},[constants["VECTOR_STYLES"].LABEL_BORDER_SIZE]:{options:{size:constants["LABEL_BORDER_SIZES"].SMALL}}}}function getDefaultDynamicProperties(){return{[constants["VECTOR_STYLES"].ICON]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{iconPaletteId:"filledShapes",field:undefined,fieldMetaOptions:{isEnabled:true}}},[constants["VECTOR_STYLES"].FILL_COLOR]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{color:DEFAULT_COLOR_RAMP,colorCategory:DEFAULT_COLOR_PALETTE,field:undefined,fieldMetaOptions:{isEnabled:true,sigma:DEFAULT_SIGMA}}},[constants["VECTOR_STYLES"].LINE_COLOR]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{color:DEFAULT_COLOR_RAMP,colorCategory:DEFAULT_COLOR_PALETTE,field:undefined,fieldMetaOptions:{isEnabled:true,sigma:DEFAULT_SIGMA}}},[constants["VECTOR_STYLES"].LINE_WIDTH]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{minSize:1,maxSize:10,field:undefined,fieldMetaOptions:{isEnabled:true,sigma:DEFAULT_SIGMA}}},[constants["VECTOR_STYLES"].ICON_SIZE]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{minSize:DEFAULT_MIN_SIZE,maxSize:DEFAULT_MAX_SIZE,field:undefined,fieldMetaOptions:{isEnabled:true,sigma:DEFAULT_SIGMA}}},[constants["VECTOR_STYLES"].ICON_ORIENTATION]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{field:undefined,fieldMetaOptions:{isEnabled:true,sigma:DEFAULT_SIGMA}}},[constants["VECTOR_STYLES"].LABEL_TEXT]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{field:undefined}},[constants["VECTOR_STYLES"].LABEL_COLOR]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{color:DEFAULT_COLOR_RAMP,colorCategory:DEFAULT_COLOR_PALETTE,field:undefined,fieldMetaOptions:{isEnabled:true,sigma:DEFAULT_SIGMA}}},[constants["VECTOR_STYLES"].LABEL_SIZE]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{minSize:DEFAULT_MIN_SIZE,maxSize:DEFAULT_MAX_SIZE,field:undefined,fieldMetaOptions:{isEnabled:true,sigma:DEFAULT_SIGMA}}},[constants["VECTOR_STYLES"].LABEL_BORDER_COLOR]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{color:DEFAULT_COLOR_RAMP,colorCategory:DEFAULT_COLOR_PALETTE,field:undefined,fieldMetaOptions:{isEnabled:true,sigma:DEFAULT_SIGMA}}},[constants["VECTOR_STYLES"].SYMBOLIZE_AS]:{options:{value:constants["SYMBOLIZE_AS_TYPES"].CIRCLE}},[constants["VECTOR_STYLES"].LABEL_BORDER_SIZE]:{options:{size:constants["LABEL_BORDER_SIZES"].SMALL}}}}function size_range_selector_extends(){size_range_selector_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return size_range_selector_extends.apply(this,arguments)}function SizeRangeSelector({minSize:minSize,maxSize:maxSize,onChange:onChange,...rest}){const onSizeChange=([min,max])=>{onChange({minSize:Math.max(MIN_SIZE,parseInt(min,10)),maxSize:Math.min(MAX_SIZE,parseInt(max,10))})};return external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_["ValidatedDualRange"],size_range_selector_extends({min:MIN_SIZE,max:MAX_SIZE,step:1,value:[minSize,maxSize],showInput:"inputWithPopover",showRange:true,onChange:onSizeChange,allowEmptyRange:false,append:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.vector.dualSize.unitLabel",{defaultMessage:"px",description:"Shorthand for pixel"})},rest))}function DynamicSizeForm({fields:fields,onDynamicStyleChange:onDynamicStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty}){const styleOptions=styleProperty.getOptions();const onFieldChange=({field:field})=>{onDynamicStyleChange(styleProperty.getStyleName(),{...styleOptions,field:field})};const onSizeRangeChange=({minSize:minSize,maxSize:maxSize})=>{onDynamicStyleChange(styleProperty.getStyleName(),{...styleOptions,minSize:minSize,maxSize:maxSize})};let sizeRange;if(styleOptions.field&&styleOptions.field.name){sizeRange=external_kbnSharedDeps_React_default.a.createElement(SizeRangeSelector,{onChange:onSizeRangeChange,minSize:styleOptions.minSize,maxSize:styleOptions.maxSize,showLabels:true,compressed:true})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(FieldSelect,{styleName:styleProperty.getStyleName(),fields:fields,selectedFieldName:styleProperty.getFieldName(),onChange:onFieldChange,compressed:true}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),sizeRange)}var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(9);function validated_range_extends(){validated_range_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return validated_range_extends.apply(this,arguments)}function validated_range_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function isWithinRange(min,max,value){if(value>=min&&value<=max){return true}return false}class validated_range_ValidatedRange extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args);validated_range_defineProperty(this,"state",{});validated_range_defineProperty(this,"_onRangeChange",e=>{const sanitizedValue=parseFloat(e.target.value,10);let newValue=isNaN(sanitizedValue)?"":sanitizedValue;newValue=Number(newValue);const isValid=isWithinRange(this.props.min,this.props.max,newValue)?true:false;this.setState({value:newValue,isValid:isValid});if(isValid){this.props.onChange(newValue)}})}static getDerivedStateFromProps(nextProps,prevState){if(nextProps.value!==prevState.prevValue){return{value:nextProps.value,prevValue:nextProps.value,isValid:isWithinRange(nextProps.min,nextProps.max,nextProps.value)}}return null}render(){const{max:max,min:min,value:value,onChange:onChange,...rest}=this.props;const rangeInput=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiRange"],validated_range_extends({min:min,max:max,value:this.state.value.toString(),onChange:this._onRangeChange},rest));if(!this.state.isValid){return external_kbnSharedDeps_React_default.a.createElement("div",null,rangeInput,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormErrorText"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.validatedRange.rangeErrorMessage",defaultMessage:"Must be between {min} and {max}",values:{min:min,max:max}})))}return rangeInput}}function StaticSizeForm({onStaticStyleChange:onStaticStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty}){const onSizeChange=size=>{onStaticStyleChange(styleProperty.getStyleName(),{size:size})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(validated_range_ValidatedRange,{min:0,max:100,value:styleProperty.getOptions().size,onChange:onSizeChange,showInput:"inputWithPopover",showLabels:true,compressed:true,append:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.vector.size.unitLabel",{defaultMessage:"px",description:"Shorthand for pixel"})})))}function VectorStyleSizeEditor(props){const sizeForm=props.styleProperty.isDynamic()?external_kbnSharedDeps_React_default.a.createElement(DynamicSizeForm,props):external_kbnSharedDeps_React_default.a.createElement(StaticSizeForm,props);return external_kbnSharedDeps_React_default.a.createElement(style_prop_editor_StylePropEditor,props,sizeForm)}const SYMBOLIZE_AS_OPTIONS=[{id:constants["SYMBOLIZE_AS_TYPES"].CIRCLE,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.vector.symbolAs.circleLabel",{defaultMessage:"marker"})},{id:constants["SYMBOLIZE_AS_TYPES"].ICON,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.vector.symbolAs.IconLabel",{defaultMessage:"icon"})}];function VectorStyleSymbolizeAsEditor({disabled:disabled,disabledBy:disabledBy,styleProperty:styleProperty,handlePropertyChange:handlePropertyChange}){const styleOptions=styleProperty.getOptions();const selectedOption=SYMBOLIZE_AS_OPTIONS.find(({id:id})=>id===styleOptions.value);const onSymbolizeAsChange=optionId=>{const styleDescriptor={options:{value:optionId}};handlePropertyChange(constants["VECTOR_STYLES"].SYMBOLIZE_AS,styleDescriptor)};const symbolLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.vector.symbolLabel",{defaultMessage:"Symbol type"});const symbolizeAsForm=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:symbolLabel,display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonGroup"],{isDisabled:disabled,buttonSize:"compressed",options:SYMBOLIZE_AS_OPTIONS,idSelected:selectedOption?selectedOption.id:undefined,onChange:onSymbolizeAsChange,isFullWidth:true,legend:symbolLabel}));if(!disabled){return symbolizeAsForm}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{anchorClassName:"mapStyleFormDisabledTooltip",content:getDisabledByMessage(disabledBy)},symbolizeAsForm)}var maki=__webpack_require__(139);var maki_default=__webpack_require__.n(maki);var xml2js=__webpack_require__(140);var xml2js_default=__webpack_require__.n(xml2js);async function parseXmlString(xmlString){const parsePromise=new Promise((resolve,reject)=>{Object(xml2js["parseString"])(xmlString,(error,result)=>{if(error){reject(error)}else{resolve(result)}})});return await parsePromise}const LARGE_MAKI_ICON_SIZE=15;const LARGE_MAKI_ICON_SIZE_AS_STRING=LARGE_MAKI_ICON_SIZE.toString();const SMALL_MAKI_ICON_SIZE=11;const HALF_LARGE_MAKI_ICON_SIZE=Math.ceil(LARGE_MAKI_ICON_SIZE);const SYMBOLS={};maki_default.a.svgArray.forEach(svgString=>{const ID_FRAG='id="';const index=svgString.indexOf(ID_FRAG);if(index!==-1){const idStartIndex=index+ID_FRAG.length;const idEndIndex=svgString.substring(idStartIndex).indexOf('"')+idStartIndex;const fullSymbolId=svgString.substring(idStartIndex,idEndIndex);const symbolId=fullSymbolId.substring(0,fullSymbolId.length-3);const symbolSize=fullSymbolId.substring(fullSymbolId.length-2);if(symbolSize===LARGE_MAKI_ICON_SIZE_AS_STRING){SYMBOLS[symbolId]=svgString}}});const SYMBOL_OPTIONS=Object.keys(SYMBOLS).map(symbolId=>({value:symbolId,label:symbolId}));function getMakiSymbolSvg(symbolId){if(!SYMBOLS[symbolId]){throw new Error(`Unable to find symbol: ${symbolId}`)}return SYMBOLS[symbolId]}function getMakiSymbolAnchor(symbolId){switch(symbolId){case"embassy":case"marker":case"marker-stroked":return"bottom";default:return"center"}}function getMakiIconId(symbolId,iconPixelSize){return`${symbolId}-${iconPixelSize}`}function buildSrcUrl(svgString){const domUrl=window.URL||window.webkitURL||window;const svg=new Blob([svgString],{type:"image/svg+xml"});return domUrl.createObjectURL(svg)}async function styleSvg(svgString,fill,stroke){const svgXml=await parseXmlString(svgString);let style="";if(fill){style+=`fill:${fill};`}if(stroke){style+=`stroke:${stroke};`;style+=`stroke-width:1;`}if(style)svgXml.svg.$.style=style;const builder=new xml2js_default.a.Builder;return builder.buildObject(svgXml)}const ICON_PALETTES=[{id:"filledShapes",icons:["circle","marker","square","star","triangle","hospital"]},{id:"hollowShapes",icons:["circle-stroked","marker-stroked","square-stroked","star-stroked","triangle-stroked"]}];const PREFERRED_ICONS=[];ICON_PALETTES.forEach(iconPalette=>{iconPalette.icons.forEach(iconId=>{if(!PREFERRED_ICONS.includes(iconId)){PREFERRED_ICONS.push(iconId)}})});function getIconPaletteOptions(){const isDarkMode=Object(kibana_services["s"])();return ICON_PALETTES.map(({id:id,icons:icons})=>{const iconsDisplay=icons.map(iconId=>{const style={width:"10%",position:"relative",height:"100%",display:"inline-block",paddingTop:"4px"};return external_kbnSharedDeps_React_default.a.createElement("div",{style:style,key:iconId},external_kbnSharedDeps_React_default.a.createElement(symbol_icon_SymbolIcon,{className:"mapIcon",symbolId:iconId,fill:isDarkMode?"rgb(223, 229, 239)":"rgb(52, 55, 65)"}))});return{value:id,inputDisplay:external_kbnSharedDeps_React_default.a.createElement("div",null,iconsDisplay)}})}function getIconPalette(paletteId){const palette=ICON_PALETTES.find(({id:id})=>id===paletteId);return palette?[...palette.icons]:[]}function symbol_icon_extends(){symbol_icon_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return symbol_icon_extends.apply(this,arguments)}function symbol_icon_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class symbol_icon_SymbolIcon extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);symbol_icon_defineProperty(this,"_isMounted",false);symbol_icon_defineProperty(this,"state",{imgDataUrl:null})}componentDidMount(){this._isMounted=true;this._loadSymbol()}componentWillUnmount(){this._isMounted=false}async _loadSymbol(){let imgDataUrl;try{const svg=getMakiSymbolSvg(this.props.symbolId);const styledSvg=await styleSvg(svg,this.props.fill,this.props.stroke);imgDataUrl=buildSrcUrl(styledSvg)}catch(error){return}if(this._isMounted){this.setState({imgDataUrl:imgDataUrl})}}render(){if(!this.state.imgDataUrl){return null}const{symbolId:symbolId,fill:fill,stroke:stroke,...rest}=this.props;return external_kbnSharedDeps_React_default.a.createElement("img",symbol_icon_extends({width:"16px",height:"18px",src:this.state.imgDataUrl,alt:this.props.symbolId},rest))}}function icon_select_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function isKeyboardEvent(event){return typeof event==="object"&&"keyCode"in event}class icon_select_IconSelect extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);icon_select_defineProperty(this,"state",{isPopoverOpen:false});icon_select_defineProperty(this,"_closePopover",()=>{this.setState({isPopoverOpen:false})});icon_select_defineProperty(this,"_openPopover",()=>{this.setState({isPopoverOpen:true})});icon_select_defineProperty(this,"_togglePopover",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))});icon_select_defineProperty(this,"_handleKeyboardActivity",e=>{if(isKeyboardEvent(e)){if(e.key===external_kbnSharedDeps_ElasticEui_["keys"].ENTER){e.preventDefault();this._togglePopover()}else if(e.key===external_kbnSharedDeps_ElasticEui_["keys"].ARROW_DOWN){this._openPopover()}}});icon_select_defineProperty(this,"_onIconSelect",options=>{const selectedOption=options.find(option=>option.checked==="on");if(selectedOption){this.props.onChange(selectedOption.value)}this._closePopover()})}_renderPopoverButton(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormControlLayout"],{icon:{type:"arrowDown",side:"right"},readOnly:true,fullWidth:true,compressed:true,onKeyDown:this._handleKeyboardActivity,append:this.props.append},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{onClick:this._togglePopover,onKeyDown:this._handleKeyboardActivity,value:this.props.value,compressed:true,readOnly:true,fullWidth:true,prepend:external_kbnSharedDeps_React_default.a.createElement(symbol_icon_SymbolIcon,{key:this.props.value,className:"mapIconSelectSymbol__inputButton",symbolId:this.props.value,fill:Object(kibana_services["s"])()?"rgb(223, 229, 239)":"rgb(52, 55, 65)"})}))}_renderIconSelectable(){const options=SYMBOL_OPTIONS.map(({value:value,label:label})=>({value:value,label:label,prepend:external_kbnSharedDeps_React_default.a.createElement(symbol_icon_SymbolIcon,{key:value,symbolId:value,fill:Object(kibana_services["s"])()?"rgb(223, 229, 239)":"rgb(52, 55, 65)"})}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelectable"],{searchable:true,options:options,onChange:this._onIconSelect},(list,search)=>external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:"300px"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverTitle"],null,search),list))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{ownFocus:true,button:this._renderPopoverButton(),isOpen:this.state.isPopoverOpen,closePopover:this._closePopover,anchorPosition:"downLeft",panelPaddingSize:"s",display:"block"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFocusTrap"],{clickOutsideDisables:true},this._renderIconSelectable()))}}function isDuplicateStop(targetStop,iconStops){const stops=iconStops.filter(({stop:stop})=>targetStop===stop);return stops.length>1}function getFirstUnusedSymbol(iconStops){const firstUnusedPreferredIconId=PREFERRED_ICONS.find(iconId=>{const isSymbolBeingUsed=iconStops.some(({icon:icon})=>icon===iconId);return!isSymbolBeingUsed});if(firstUnusedPreferredIconId){return firstUnusedPreferredIconId}const firstUnusedSymbol=SYMBOL_OPTIONS.find(({value:value})=>{const isSymbolBeingUsed=iconStops.some(({icon:icon})=>icon===value);return!isSymbolBeingUsed});return firstUnusedSymbol?firstUnusedSymbol.value:constants["DEFAULT_ICON"]}function IconStops({field:field,getValueSuggestions:getValueSuggestions,iconStops:iconStops,onChange:onChange}){return iconStops.map(({stop:stop,icon:icon},index)=>{const onIconSelect=selectedIconId=>{const newIconStops=[...iconStops];newIconStops[index]={...iconStops[index],icon:selectedIconId};onChange({customStops:newIconStops})};const onStopChange=newStopValue=>{const newIconStops=[...iconStops];newIconStops[index]={...iconStops[index],stop:newStopValue};onChange({customStops:newIconStops,isInvalid:isDuplicateStop(newStopValue,iconStops)})};const onAdd=()=>{onChange({customStops:[...iconStops.slice(0,index+1),{stop:"",icon:getFirstUnusedSymbol(iconStops)},...iconStops.slice(index+1)]})};const onRemove=()=>{onChange({customStops:[...iconStops.slice(0,index),...iconStops.slice(index+1)]})};let deleteButton;if(iconStops.length>2&&index!==0){deleteButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"trash",color:"danger","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.iconStops.deleteButtonAriaLabel",{defaultMessage:"Delete"}),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.iconStops.deleteButtonLabel",{defaultMessage:"Delete"}),onClick:onRemove})}const iconStopButtons=external_kbnSharedDeps_React_default.a.createElement("div",null,deleteButton,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"plusInCircle",color:"primary","aria-label":"Add",title:"Add",onClick:onAdd}));const errors=[];const stopInput=index===0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{"aria-label":style_util_getOtherCategoryLabel(),placeholder:style_util_getOtherCategoryLabel(),disabled:true,compressed:true}):external_kbnSharedDeps_React_default.a.createElement(stop_input_StopInput,{key:field.getName(),field:field,getValueSuggestions:getValueSuggestions,value:stop,onChange:onStopChange});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{key:index,className:"mapColorStop",isInvalid:errors.length!==0,error:errors,display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mapStyleSettings__fixedBox"},stopInput),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(icon_select_IconSelect,{onChange:onIconSelect,value:icon,append:iconStopButtons}))))})}function icon_map_select_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const CUSTOM_MAP_ID="CUSTOM_MAP_ID";const DEFAULT_ICON_STOPS=[{stop:null,icon:PREFERRED_ICONS[0]},{stop:"",icon:PREFERRED_ICONS[1]}];class icon_map_select_IconMapSelect extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);icon_map_select_defineProperty(this,"state",{customIconStops:this.props.customIconStops?this.props.customIconStops:DEFAULT_ICON_STOPS});icon_map_select_defineProperty(this,"_onMapSelect",selectedValue=>{const useCustomIconMap=selectedValue===CUSTOM_MAP_ID;const changes={iconPaletteId:useCustomIconMap?null:selectedValue,useCustomIconMap:useCustomIconMap};if(!this.props.customIconStops){changes.customIconStops=DEFAULT_ICON_STOPS}this.props.onChange(changes)});icon_map_select_defineProperty(this,"_onCustomMapChange",({customStops:customStops,isInvalid:isInvalid})=>{this.setState({customIconStops:customStops});if(!isInvalid){this.props.onChange({useCustomIconMap:true,customIconStops:customStops})}})}_renderCustomStopsInput(){return!this.props.isCustomOnly&&!this.props.useCustomIconMap?null:external_kbnSharedDeps_React_default.a.createElement(IconStops,{field:this.props.styleProperty.getField(),getValueSuggestions:this.props.styleProperty.getValueSuggestions,iconStops:this.state.customIconStops,onChange:this._onCustomMapChange})}_renderMapSelect(){if(this.props.isCustomOnly){return null}const mapOptionsWithCustom=[{value:CUSTOM_MAP_ID,inputDisplay:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.icon.customMapLabel",{defaultMessage:"Custom icon palette"})},...getIconPaletteOptions()];let valueOfSelected="";if(this.props.useCustomIconMap){valueOfSelected=CUSTOM_MAP_ID}else if(this.props.iconPaletteId){valueOfSelected=this.props.iconPaletteId}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperSelect"],{options:mapOptionsWithCustom,onChange:this._onMapSelect,valueOfSelected:valueOfSelected,hasDividers:true,compressed:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,this._renderMapSelect(),this._renderCustomStopsInput())}}function dynamic_icon_form_extends(){dynamic_icon_form_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return dynamic_icon_form_extends.apply(this,arguments)}function DynamicIconForm({fields:fields,onDynamicStyleChange:onDynamicStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty}){const styleOptions=styleProperty.getOptions();const onFieldChange=({field:field})=>{const{name:name,origin:origin}=field;onDynamicStyleChange(styleProperty.getStyleName(),{...styleOptions,field:{name:name,origin:origin}})};const onIconMapChange=newOptions=>{onDynamicStyleChange(styleProperty.getStyleName(),{...styleOptions,...newOptions})};function renderIconMapSelect(){const field=styleProperty.getField();if(!field){return null}return external_kbnSharedDeps_React_default.a.createElement(icon_map_select_IconMapSelect,dynamic_icon_form_extends({},styleOptions,{styleProperty:styleProperty,onChange:onIconMapChange,isCustomOnly:!field.supportsAutoDomain()}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(FieldSelect,{styleName:styleProperty.getStyleName(),fields:fields,selectedFieldName:external_kbnSharedDeps_Lodash_default.a.get(styleOptions,"field.name"),onChange:onFieldChange,compressed:true}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),renderIconMapSelect())}function StaticIconForm({onStaticStyleChange:onStaticStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty}){const onChange=selectedIconId=>{onStaticStyleChange(styleProperty.getStyleName(),{value:selectedIconId})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(icon_select_IconSelect,{onChange:onChange,value:styleProperty.getOptions().value})))}function VectorStyleIconEditor(props){const iconForm=props.styleProperty.isDynamic()?external_kbnSharedDeps_React_default.a.createElement(DynamicIconForm,props):external_kbnSharedDeps_React_default.a.createElement(StaticIconForm,props);return external_kbnSharedDeps_React_default.a.createElement(style_prop_editor_StylePropEditor,props,iconForm)}function DynamicLabelForm({fields:fields,onDynamicStyleChange:onDynamicStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty}){const styleOptions=styleProperty.getOptions();const onFieldChange=({field:field})=>{onDynamicStyleChange(styleProperty.getStyleName(),{...styleOptions,field:field})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(FieldSelect,{styleName:styleProperty.getStyleName(),fields:fields,selectedFieldName:styleProperty.getFieldName(),onChange:onFieldChange,compressed:true})))}function StaticLabelForm({onStaticStyleChange:onStaticStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty}){const onValueChange=event=>{onStaticStyleChange(styleProperty.getStyleName(),{value:event.target.value})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.staticLabel.valuePlaceholder",{defaultMessage:"symbol label"}),value:styleProperty.getOptions().value,onChange:onValueChange,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.staticLabel.valueAriaLabel",{defaultMessage:"symbol label"}),compressed:true})))}function VectorStyleLabelEditor(props){const labelForm=props.styleProperty.isDynamic()?external_kbnSharedDeps_React_default.a.createElement(DynamicLabelForm,props):external_kbnSharedDeps_React_default.a.createElement(StaticLabelForm,props);return external_kbnSharedDeps_React_default.a.createElement(style_prop_editor_StylePropEditor,props,labelForm)}const vector_style_label_border_size_editor_options=[{value:constants["LABEL_BORDER_SIZES"].NONE,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.labelBorderSize.noneLabel",{defaultMessage:"None"})},{value:constants["LABEL_BORDER_SIZES"].SMALL,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.labelBorderSize.smallLabel",{defaultMessage:"Small"})},{value:constants["LABEL_BORDER_SIZES"].MEDIUM,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.labelBorderSize.mediumLabel",{defaultMessage:"Medium"})},{value:constants["LABEL_BORDER_SIZES"].LARGE,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.labelBorderSize.largeLabel",{defaultMessage:"Large"})}];function VectorStyleLabelBorderSizeEditor({disabled:disabled,disabledBy:disabledBy,handlePropertyChange:handlePropertyChange,styleProperty:styleProperty}){function onChange(e){const styleDescriptor={options:{size:e.target.value}};handlePropertyChange(styleProperty.getStyleName(),styleDescriptor)}const labelBorderSizeForm=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:getVectorStyleLabel(constants["VECTOR_STYLES"].LABEL_BORDER_SIZE),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{disabled:disabled,options:vector_style_label_border_size_editor_options,value:styleProperty.getOptions().size,onChange:onChange,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.labelBorderSizeSelect.ariaLabel",{defaultMessage:"Select label border size"}),compressed:true}));if(!disabled){return labelBorderSizeForm}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{anchorClassName:"mapStyleFormDisabledTooltip",content:getDisabledByMessage(disabledBy)},labelBorderSizeForm)}function DynamicOrientationForm({fields:fields,onDynamicStyleChange:onDynamicStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty}){const styleOptions=styleProperty.getOptions();const onFieldChange=({field:field})=>{onDynamicStyleChange(styleProperty.getStyleName(),{...styleOptions,field:field})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(FieldSelect,{styleName:styleProperty.getStyleName(),fields:fields,selectedFieldName:styleProperty.getFieldName(),onChange:onFieldChange,compressed:true})))}function StaticOrientationForm({onStaticStyleChange:onStaticStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty}){const onOrientationChange=orientation=>{onStaticStyleChange(styleProperty.getStyleName(),{orientation:orientation})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(validated_range_ValidatedRange,{min:0,max:360,value:styleProperty.getOptions().orientation,onChange:onOrientationChange,showInput:"inputWithPopover",showLabels:true,compressed:true,append:"°"})))}function OrientationEditor(props){const orientationForm=props.styleProperty.isDynamic()?external_kbnSharedDeps_React_default.a.createElement(DynamicOrientationForm,props):external_kbnSharedDeps_React_default.a.createElement(StaticOrientationForm,props);return external_kbnSharedDeps_React_default.a.createElement(style_prop_editor_StylePropEditor,props,orientationForm)}function style_fields_helper_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}async function createStyleFieldsHelper(fields){const promises=fields.map(async field=>({label:await field.getLabel(),name:field.getName(),origin:field.getOrigin(),type:await field.getDataType(),supportsAutoDomain:field.supportsAutoDomain()}));const styleFields=await Promise.all(promises);return new style_fields_helper_StyleFieldsHelper(styleFields)}class style_fields_helper_StyleFieldsHelper{constructor(styleFields){style_fields_helper_defineProperty(this,"_styleFields",void 0);style_fields_helper_defineProperty(this,"_ordinalAndCategoricalFields",void 0);style_fields_helper_defineProperty(this,"_numberFields",void 0);style_fields_helper_defineProperty(this,"_ordinalFields",void 0);const ordinalAndCategoricalFields=[];const numberFields=[];const ordinalFields=[];styleFields.forEach(styleField=>{if(constants["CATEGORICAL_DATA_TYPES"].includes(styleField.type)||constants["ORDINAL_DATA_TYPES"].includes(styleField.type)){ordinalAndCategoricalFields.push(styleField)}if(styleField.type==="date"||styleField.type==="number"){if(styleField.type==="number"){numberFields.push(styleField)}if(styleField.supportsAutoDomain){ordinalFields.push(styleField)}}});this._styleFields=styleFields;this._ordinalAndCategoricalFields=ordinalAndCategoricalFields;this._numberFields=numberFields;this._ordinalFields=ordinalFields}hasFieldForStyle(field,styleName){const fieldList=this.getFieldsForStyle(styleName);return fieldList.some(styleField=>field.getName()===styleField.name)}getFieldsForStyle(styleName){switch(styleName){case constants["VECTOR_STYLES"].ICON_ORIENTATION:return this._numberFields;case constants["VECTOR_STYLES"].FILL_COLOR:case constants["VECTOR_STYLES"].LINE_COLOR:case constants["VECTOR_STYLES"].LABEL_COLOR:case constants["VECTOR_STYLES"].LABEL_BORDER_COLOR:case constants["VECTOR_STYLES"].ICON:return this._ordinalAndCategoricalFields;case constants["VECTOR_STYLES"].LINE_WIDTH:case constants["VECTOR_STYLES"].LABEL_SIZE:case constants["VECTOR_STYLES"].ICON_SIZE:return this._ordinalFields;case constants["VECTOR_STYLES"].LABEL_TEXT:return this._styleFields;default:return[]}}getStyleFields(){return this._styleFields}}function vector_style_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class vector_style_editor_VectorStyleEditor extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);vector_style_editor_defineProperty(this,"_isMounted",false);vector_style_editor_defineProperty(this,"_handleSelectedFeatureChange",selectedFeature=>{this.setState({selectedFeature:selectedFeature})});vector_style_editor_defineProperty(this,"_onIsTimeAwareChange",event=>{this.props.onIsTimeAwareChange(event.target.checked)});vector_style_editor_defineProperty(this,"_onStaticStyleChange",(propertyName,options)=>{const styleDescriptor={type:constants["STYLE_TYPE"].STATIC,options:options};this.props.handlePropertyChange(propertyName,styleDescriptor)});vector_style_editor_defineProperty(this,"_onDynamicStyleChange",(propertyName,options)=>{const styleDescriptor={type:constants["STYLE_TYPE"].DYNAMIC,options:options};this.props.handlePropertyChange(propertyName,styleDescriptor)});let _selectedFeature=constants["VECTOR_SHAPE_TYPE"].POLYGON;if(props.isPointsOnly){_selectedFeature=constants["VECTOR_SHAPE_TYPE"].POINT}else if(props.isLinesOnly){_selectedFeature=constants["VECTOR_SHAPE_TYPE"].LINE}this.state={styleFields:[],defaultDynamicProperties:getDefaultDynamicProperties(),defaultStaticProperties:getDefaultStaticProperties(),supportedFeatures:[],selectedFeature:_selectedFeature}}componentWillUnmount(){this._isMounted=false}componentDidMount(){this._isMounted=true;this._loadFields();this._loadSupportedFeatures()}componentDidUpdate(){this._loadFields();this._loadSupportedFeatures()}async _loadFields(){const styleFieldsHelper=await createStyleFieldsHelper(await this.props.layer.getStyleEditorFields());const styleFields=styleFieldsHelper.getStyleFields();if(!this._isMounted||external_kbnSharedDeps_Lodash_default.a.isEqual(styleFields,this.state.styleFields)&&this.state.styleFieldsHelper!==undefined){return}this.setState({styleFields:styleFields,styleFieldsHelper:styleFieldsHelper})}async _loadSupportedFeatures(){const supportedFeatures=await this.props.layer.getSource().getSupportedShapeTypes();if(this._isMounted&&!external_kbnSharedDeps_Lodash_default.a.isEqual(supportedFeatures,this.state.supportedFeatures)){this.setState({supportedFeatures:supportedFeatures})}}_hasMarkerOrIcon(){const iconSize=this.props.styleProperties[constants["VECTOR_STYLES"].ICON_SIZE];return iconSize.isDynamic()||iconSize.getOptions().size>0}_hasLabel(){const label=this.props.styleProperties[constants["VECTOR_STYLES"].LABEL_TEXT];return label.isDynamic()?label.isComplete():label.getOptions().value!=null&&label.getOptions().value.length}_hasLabelBorder(){const labelBorderSize=this.props.styleProperties[constants["VECTOR_STYLES"].LABEL_BORDER_SIZE];return labelBorderSize.getOptions().size!==constants["LABEL_BORDER_SIZES"].NONE}_renderFillColor(isPointFillColor=false){return external_kbnSharedDeps_React_default.a.createElement(VectorStyleColorEditor,{disabled:isPointFillColor&&!this._hasMarkerOrIcon(),disabledBy:constants["VECTOR_STYLES"].ICON_SIZE,swatches:DEFAULT_FILL_COLORS,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants["VECTOR_STYLES"].FILL_COLOR],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants["VECTOR_STYLES"].FILL_COLOR),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants["VECTOR_STYLES"].FILL_COLOR].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants["VECTOR_STYLES"].FILL_COLOR].options})}_renderLineColor(isPointBorderColor=false){const disabledByIconSize=isPointBorderColor&&!this._hasMarkerOrIcon();return external_kbnSharedDeps_React_default.a.createElement(VectorStyleColorEditor,{disabled:disabledByIconSize||!this.props.hasBorder,disabledBy:disabledByIconSize?constants["VECTOR_STYLES"].ICON_SIZE:constants["VECTOR_STYLES"].LINE_WIDTH,swatches:DEFAULT_LINE_COLORS,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants["VECTOR_STYLES"].LINE_COLOR],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants["VECTOR_STYLES"].LINE_COLOR),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants["VECTOR_STYLES"].LINE_COLOR].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants["VECTOR_STYLES"].LINE_COLOR].options})}_renderLineWidth(isPointBorderWidth=false){return external_kbnSharedDeps_React_default.a.createElement(VectorStyleSizeEditor,{disabled:isPointBorderWidth&&!this._hasMarkerOrIcon(),disabledBy:constants["VECTOR_STYLES"].ICON_SIZE,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants["VECTOR_STYLES"].LINE_WIDTH],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants["VECTOR_STYLES"].LINE_WIDTH),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants["VECTOR_STYLES"].LINE_WIDTH].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants["VECTOR_STYLES"].LINE_WIDTH].options})}_renderLabelProperties(){const hasLabel=this._hasLabel();const hasLabelBorder=this._hasLabelBorder();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(VectorStyleLabelEditor,{onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants["VECTOR_STYLES"].LABEL_TEXT],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants["VECTOR_STYLES"].LABEL_TEXT),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants["VECTOR_STYLES"].LABEL_TEXT].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants["VECTOR_STYLES"].LABEL_TEXT].options}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(VectorStyleColorEditor,{disabled:!hasLabel,disabledBy:constants["VECTOR_STYLES"].LABEL_TEXT,swatches:DEFAULT_LINE_COLORS,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants["VECTOR_STYLES"].LABEL_COLOR],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants["VECTOR_STYLES"].LABEL_COLOR),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants["VECTOR_STYLES"].LABEL_COLOR].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants["VECTOR_STYLES"].LABEL_COLOR].options}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(VectorStyleSizeEditor,{disabled:!hasLabel,disabledBy:constants["VECTOR_STYLES"].LABEL_TEXT,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants["VECTOR_STYLES"].LABEL_SIZE],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants["VECTOR_STYLES"].LABEL_SIZE),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants["VECTOR_STYLES"].LABEL_SIZE].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants["VECTOR_STYLES"].LABEL_SIZE].options}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(VectorStyleColorEditor,{disabled:!hasLabel||!hasLabelBorder,disabledBy:hasLabel?constants["VECTOR_STYLES"].LABEL_BORDER_SIZE:constants["VECTOR_STYLES"].LABEL_TEXT,swatches:DEFAULT_LINE_COLORS,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants["VECTOR_STYLES"].LABEL_BORDER_COLOR],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants["VECTOR_STYLES"].LABEL_BORDER_COLOR),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants["VECTOR_STYLES"].LABEL_BORDER_COLOR].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants["VECTOR_STYLES"].LABEL_BORDER_COLOR].options}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(VectorStyleLabelBorderSizeEditor,{disabled:!hasLabel,disabledBy:constants["VECTOR_STYLES"].LABEL_TEXT,handlePropertyChange:this.props.handlePropertyChange,styleProperty:this.props.styleProperties[constants["VECTOR_STYLES"].LABEL_BORDER_SIZE]}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))}_renderPointProperties(){const hasMarkerOrIcon=this._hasMarkerOrIcon();let iconOrientationEditor;let iconEditor;if(this.props.styleProperties[constants["VECTOR_STYLES"].SYMBOLIZE_AS].isSymbolizedAsIcon()){iconOrientationEditor=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(OrientationEditor,{disabled:!hasMarkerOrIcon,disabledBy:constants["VECTOR_STYLES"].ICON_SIZE,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants["VECTOR_STYLES"].ICON_ORIENTATION],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants["VECTOR_STYLES"].ICON_ORIENTATION),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants["VECTOR_STYLES"].ICON_ORIENTATION].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants["VECTOR_STYLES"].ICON_ORIENTATION].options}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}));iconEditor=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(VectorStyleIconEditor,{disabled:!hasMarkerOrIcon,disabledBy:constants["VECTOR_STYLES"].ICON_SIZE,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants["VECTOR_STYLES"].ICON],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants["VECTOR_STYLES"].ICON),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants["VECTOR_STYLES"].ICON].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants["VECTOR_STYLES"].ICON].options}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(VectorStyleSymbolizeAsEditor,{disabled:!hasMarkerOrIcon,disabledBy:constants["VECTOR_STYLES"].ICON_SIZE,styleProperty:this.props.styleProperties[constants["VECTOR_STYLES"].SYMBOLIZE_AS],handlePropertyChange:this.props.handlePropertyChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),iconEditor,this._renderFillColor(true),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),this._renderLineColor(true),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),this._renderLineWidth(true),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),iconOrientationEditor,external_kbnSharedDeps_React_default.a.createElement(VectorStyleSizeEditor,{onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants["VECTOR_STYLES"].ICON_SIZE],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants["VECTOR_STYLES"].ICON_SIZE),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants["VECTOR_STYLES"].ICON_SIZE].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants["VECTOR_STYLES"].ICON_SIZE].options}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),this._renderLabelProperties())}_renderLineProperties(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,this._renderLineColor(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),this._renderLineWidth(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),this._renderLabelProperties())}_renderPolygonProperties(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,this._renderFillColor(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),this._renderLineColor(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),this._renderLineWidth(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),this._renderLabelProperties())}_renderProperties(){const{supportedFeatures:supportedFeatures,selectedFeature:selectedFeature,styleFieldsHelper:styleFieldsHelper}=this.state;if(supportedFeatures.length===0||!styleFieldsHelper){return null}if(supportedFeatures.length===1){switch(supportedFeatures[0]){case constants["VECTOR_SHAPE_TYPE"].POINT:return this._renderPointProperties();case constants["VECTOR_SHAPE_TYPE"].LINE:return this._renderLineProperties();case constants["VECTOR_SHAPE_TYPE"].POLYGON:return this._renderPolygonProperties()}}const featureButtons=[{id:constants["VECTOR_SHAPE_TYPE"].POINT,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.vectorStyleEditor.pointLabel",{defaultMessage:"Points"})},{id:constants["VECTOR_SHAPE_TYPE"].LINE,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.vectorStyleEditor.lineLabel",{defaultMessage:"Lines"})},{id:constants["VECTOR_SHAPE_TYPE"].POLYGON,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.vectorStyleEditor.polygonLabel",{defaultMessage:"Polygons"})}];let styleProperties=this._renderPolygonProperties();if(selectedFeature===constants["VECTOR_SHAPE_TYPE"].LINE){styleProperties=this._renderLineProperties()}else if(selectedFeature===constants["VECTOR_SHAPE_TYPE"].POINT){styleProperties=this._renderPointProperties()}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonGroup"],{legend:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.vectorStyleEditor.featureTypeButtonGroupLegend",{defaultMessage:"vector feature button group"}),options:featureButtons,idSelected:selectedFeature,onChange:this._handleSelectedFeatureChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),styleProperties)}_renderIsTimeAwareSwitch(){if(!this.props.showIsTimeAware){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{display:"columnCompressedSwitch"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.vectorStyleEditor.isTimeAwareLabel",{defaultMessage:"Apply global time to style metadata requests"}),checked:this.props.isTimeAware,onChange:this._onIsTimeAwareChange,compressed:true}))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,this._renderProperties(),this._renderIsTimeAwareSwitch())}}function style_meta_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class StyleMeta{constructor(styleMetaDescriptor){style_meta_defineProperty(this,"_descriptor",void 0);this._descriptor=styleMetaDescriptor?styleMetaDescriptor:{fieldMeta:{}}}getRangeFieldMetaDescriptor(fieldName){return this._descriptor.fieldMeta[fieldName]&&this._descriptor.fieldMeta[fieldName].range?this._descriptor.fieldMeta[fieldName].range:null}getCategoryFieldMetaDescriptor(fieldName){return this._descriptor.fieldMeta[fieldName]&&this._descriptor.fieldMeta[fieldName].categories?this._descriptor.fieldMeta[fieldName].categories:null}isPointsOnly(){return this._descriptor.geometryTypes?!!this._descriptor.geometryTypes.isPointsOnly:false}isLinesOnly(){return this._descriptor.geometryTypes?!!this._descriptor.geometryTypes.isLinesOnly:false}isPolygonsOnly(){return this._descriptor.geometryTypes?!!this._descriptor.geometryTypes.isPolygonsOnly:false}}const CircleIcon=({style:style})=>external_kbnSharedDeps_React_default.a.createElement("svg",{className:"euiIcon euiIcon--medium mapFillableCircle",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",style:style,viewBox:"0 0 16 16"},external_kbnSharedDeps_React_default.a.createElement("defs",null,external_kbnSharedDeps_React_default.a.createElement("path",{id:"fillableCircle",d:`M8,15 C11.8659932,15 15,11.8659932 15,8 C15,4.13400675 11.8659932,        1 8,1 C4.13400675,1 1,4.13400675 1,8 C1,11.8659932 4.13400675,15 8,        15 Z M8,16 C3.581722,16 0,12.418278 0,8 C0,3.581722 3.581722,0 8,        0 C12.418278,0 16,3.581722 16,8 C16,12.418278 12.418278,16 8,16 Z M8,        12 C10.209139,12 12,10.209139 12,8 C12,5.790861 10.209139,4 8,        4 C5.790861,4 4,5.790861 4,8 C4,10.209139 5.790861,12 8,12 Z M8,        11 C6.34314575,11 5,9.65685425 5,8 C5,6.34314575 6.34314575,5 8,        5 C9.65685425,5 11,6.34314575 11,8 C11,9.65685425 9.65685425,11 8,        11 Z M8,9 C8.55228475,9 9,8.55228475 9,8 C9,7.44771525 8.55228475,7 8,        7 C7.44771525,7 7,7.44771525 7,8 C7,8.55228475 7.44771525,9 8,9 Z`})),external_kbnSharedDeps_React_default.a.createElement("g",null,external_kbnSharedDeps_React_default.a.createElement("ellipse",{id:"path3353",cx:"8.0350437",cy:"7.9660664",rx:"7.3820276",ry:"7.3809776",transform:"matrix(0.99985753,0.01687955,0,1,0,0)"})));const LineIcon=({style:style})=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},external_kbnSharedDeps_React_default.a.createElement("line",{x1:"0",y1:"6",x2:"16",y2:"6",style:style}));const PolygonIcon=({style:style})=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},external_kbnSharedDeps_React_default.a.createElement("rect",{width:"15",height:"15",x:".5",y:".5",style:style,rx:"4"}));function VectorIcon({fillColor:fillColor,isPointsOnly:isPointsOnly,isLinesOnly:isLinesOnly,strokeColor:strokeColor,symbolId:symbolId}){if(isLinesOnly){const style={stroke:strokeColor,strokeWidth:"4px"};return external_kbnSharedDeps_React_default.a.createElement(LineIcon,{style:style})}const style={stroke:strokeColor,strokeWidth:"1px",fill:fillColor};if(!isPointsOnly){return external_kbnSharedDeps_React_default.a.createElement(PolygonIcon,{style:style})}if(!symbolId){return external_kbnSharedDeps_React_default.a.createElement(CircleIcon,{style:style})}return external_kbnSharedDeps_React_default.a.createElement(symbol_icon_SymbolIcon,{key:`${symbolId}${fillColor}${strokeColor}`,symbolId:symbolId,fill:fillColor,stroke:strokeColor})}function VectorStyleLegend({isLinesOnly:isLinesOnly,isPointsOnly:isPointsOnly,styles:styles,symbolId:symbolId}){const legendRows=[];for(let i=0;i<styles.length;i++){const row=styles[i].renderLegendDetailRow({isLinesOnly:isLinesOnly,isPointsOnly:isPointsOnly,symbolId:symbolId});legendRows.push(external_kbnSharedDeps_React_default.a.createElement("div",{key:i,className:"vectorStyleLegendSpacer"},row))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,legendRows)}function style_property_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class style_property_AbstractStyleProperty{constructor(options,styleName){style_property_defineProperty(this,"_options",void 0);style_property_defineProperty(this,"_styleName",void 0);this._options=options;this._styleName=styleName}isDynamic(){return false}isComplete(){return true}formatField(value){if(typeof value==="undefined"||value===null){return""}else if(typeof value==="boolean"){return value.toString()}else{return value}}getStyleName(){return this._styleName}getOptions(){return this._options}renderLegendDetailRow({isPointsOnly:isPointsOnly,isLinesOnly:isLinesOnly}){return null}renderDataMappingPopover(onChange){return null}getDisplayStyleName(){return getVectorStyleLabel(this.getStyleName())}}function static_style_property_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class static_style_property_StaticStyleProperty extends style_property_AbstractStyleProperty{}static_style_property_defineProperty(static_style_property_StaticStyleProperty,"type",constants["STYLE_TYPE"].STATIC);function data_mapping_popover_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class data_mapping_popover_DataMappingPopover extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);data_mapping_popover_defineProperty(this,"state",{isPopoverOpen:false});data_mapping_popover_defineProperty(this,"_togglePopover",()=>{this.setState({isPopoverOpen:!this.state.isPopoverOpen})});data_mapping_popover_defineProperty(this,"_closePopover",()=>{this.setState({isPopoverOpen:false})})}_renderButton(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:this._togglePopover,size:"xs",iconType:"controlsHorizontal",iconSide:"left"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.styles.fieldMetaOptions.popoverToggle",defaultMessage:"Data mapping"}))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"dataMappingPopover",anchorPosition:"leftCenter",button:this._renderButton(),isOpen:this.state.isPopoverOpen,closePopover:this._closePopover,ownFocus:true},this.props.children)}}function CategoricalDataMappingPopover(props){const onIsEnabledChange=event=>{props.onChange({fieldMetaOptions:{...props.fieldMetaOptions,isEnabled:event.target.checked}})};return external_kbnSharedDeps_React_default.a.createElement(data_mapping_popover_DataMappingPopover,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{display:"columnCompressedSwitch"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.fieldMetaOptions.isEnabled.categoricalLabel",{defaultMessage:"Get categories from data set"}),checked:props.fieldMetaOptions.isEnabled,onChange:onIsEnabledChange,compressed:true,disabled:props.switchDisabled})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.styles.categoricalDataMapping.isEnabled.server",defaultMessage:"Calculate categories from the entire data set. Styling is consistent when users pan, zoom, and filter."})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.styles.categoricalDataMapping.isEnabled.local",defaultMessage:"When disabled, calculate categories from local data and recalculate categories when the data changes. Styling may be inconsistent when users pan, zoom, and filter."})))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"questionInCircle",color:"subdued"})))))}const ADD_BUTTON_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.addBtnTitle",{defaultMessage:"Add"});const DELETE_BUTTON_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.deleteBtnTitle",{defaultMessage:"Delete"});const RowActionButtons=({onAdd:onAdd,onRemove:onRemove,showDeleteButton:showDeleteButton})=>external_kbnSharedDeps_React_default.a.createElement("div",null,showDeleteButton?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"trash",color:"danger","aria-label":DELETE_BUTTON_TITLE,title:DELETE_BUTTON_TITLE,onClick:onRemove}):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"plusInCircle",color:"primary","aria-label":ADD_BUTTON_TITLE,title:ADD_BUTTON_TITLE,onClick:onAdd}));function percentiles_form_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function isInvalidPercentile(percentile){if(typeof percentile!=="number"){return true}return percentile<=0||percentile>=100}class percentiles_form_PercentilesForm extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);percentiles_form_defineProperty(this,"_onSubmit",()=>{const hasInvalidPercentile=this.state.percentiles.some(isInvalidPercentile);if(!hasInvalidPercentile){this.props.onChange(this.state.percentiles)}});this.state={percentiles:props.initialPercentiles}}render(){const rows=this.state.percentiles.map((percentile,index)=>{const onAdd=()=>{let newPercentile="";if(typeof percentile==="number"){let delta=1;if(index===this.state.percentiles.length-1){if(index!==0){const prevPercentile=this.state.percentiles[index-1];if(typeof prevPercentile==="number"){delta=percentile-prevPercentile}}}else{const nextPercentile=this.state.percentiles[index+1];if(typeof nextPercentile==="number"){delta=(nextPercentile-percentile)/2}}newPercentile=percentile+delta;if(newPercentile>=100){newPercentile=99}}const percentiles=[...this.state.percentiles.slice(0,index+1),newPercentile,...this.state.percentiles.slice(index+1)];this.setState({percentiles:percentiles},this._onSubmit)};const onRemove=()=>{const percentiles=this.state.percentiles.length===1?this.state.percentiles:[...this.state.percentiles.slice(0,index),...this.state.percentiles.slice(index+1)];this.setState({percentiles:percentiles},this._onSubmit)};const onPercentileChange=event=>{const sanitizedValue=parseFloat(event.target.value);const percentiles=[...this.state.percentiles];percentiles[index]=isNaN(sanitizedValue)?"":sanitizedValue;this.setState({percentiles:percentiles},this._onSubmit)};const isInvalid=isInvalidPercentile(percentile);const error=isInvalid?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.invalidPercentileMsg",{defaultMessage:`Percentile must be a number between 0 and 100, exclusive`}):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{key:index,display:"rowCompressed",isInvalid:isInvalid,error:error},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{isInvalid:isInvalid,value:percentile,onChange:onPercentileChange,append:external_kbnSharedDeps_React_default.a.createElement(RowActionButtons,{onAdd:onAdd,onRemove:onRemove,showDeleteButton:this.state.percentiles.length>1}),compressed:true}))});return external_kbnSharedDeps_React_default.a.createElement("div",null,rows)}}const interpolateTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.ordinalDataMapping.interpolateTitle",{defaultMessage:`Interpolate between min and max`});const percentilesTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.ordinalDataMapping.percentilesTitle",{defaultMessage:`Use percentiles`});const DATA_MAPPING_OPTIONS=[{value:constants["DATA_MAPPING_FUNCTION"].INTERPOLATE,inputDisplay:interpolateTitle,dropdownDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("strong",null,interpolateTitle),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"euiTextColor--subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.styles.ordinalDataMapping.interpolateDescription",defaultMessage:"Interpolate values from the data domain to the style on a linear scale"}))))},{value:constants["DATA_MAPPING_FUNCTION"].PERCENTILES,inputDisplay:percentilesTitle,dropdownDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("strong",null,percentilesTitle),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"euiTextColor--subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.styles.ordinalDataMapping.percentilesDescription",defaultMessage:"Divide style into bands that map to values"}))))}];function OrdinalDataMappingPopover(props){function onIsEnabledChange(event){props.onChange({fieldMetaOptions:{...props.fieldMetaOptions,isEnabled:event.target.checked}})}function onSigmaChange(event){props.onChange({fieldMetaOptions:{...props.fieldMetaOptions,sigma:parseInt(event.currentTarget.value,10)}})}function onDataMappingFunctionChange(value){const updatedOptions=value===constants["DATA_MAPPING_FUNCTION"].PERCENTILES?{dataMappingFunction:value,fieldMetaOptions:{...props.fieldMetaOptions,isEnabled:true,percentiles:props.fieldMetaOptions.percentiles?props.fieldMetaOptions.percentiles:constants["DEFAULT_PERCENTILES"]}}:{dataMappingFunction:value};props.onChange(updatedOptions)}function renderEasingForm(){const sigmaInput=props.fieldMetaOptions.isEnabled?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{anchorClassName:"eui-alignMiddle",content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.ordinalDataMapping.sigmaTooltipContent",{defaultMessage:`To de-emphasize outliers, set sigma to a smaller value. Smaller sigmas move the min and max closer to the median.`})},external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.ordinalDataMapping.sigmaLabel",{defaultMessage:"Sigma"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"questionInCircle",color:"subdued"}))),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiRange"],{min:1,max:5,step:.25,value:external_kbnSharedDeps_Lodash_default.a.get(props.fieldMetaOptions,"sigma",DEFAULT_SIGMA),onChange:onSigmaChange,showTicks:true,tickInterval:1,compressed:true})):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{display:"columnCompressedSwitch"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.ordinalDataMapping.isEnabledSwitchLabel",{defaultMessage:"Get min and max from data set"}),checked:props.fieldMetaOptions.isEnabled,onChange:onIsEnabledChange,compressed:true,disabled:props.switchDisabled})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.styles.ordinalDataMapping.isEnabled.server",defaultMessage:"Calculate min and max from the entire data set. Styling is consistent when users pan, zoom, and filter. To minimize outliers, min and max are clamped to the standard deviation (sigma) from the medium."})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.styles.ordinalDataMapping.isEnabled.local",defaultMessage:"When disabled, calculate min and max from local data and recalculate min and max when the data changes. Styling may be inconsistent when users pan, zoom, and filter."})))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"questionInCircle",color:"subdued"})))),sigmaInput)}function renderPercentilesForm(){function onPercentilesChange(percentiles){props.onChange({fieldMetaOptions:{...props.fieldMetaOptions,percentiles:external_kbnSharedDeps_Lodash_default.a.uniq(percentiles.sort())}})}return external_kbnSharedDeps_React_default.a.createElement(percentiles_form_PercentilesForm,{initialPercentiles:props.fieldMetaOptions.percentiles?props.fieldMetaOptions.percentiles:constants["DEFAULT_PERCENTILES"],onChange:onPercentilesChange})}const dataMappingOptions=DATA_MAPPING_OPTIONS.filter(option=>props.supportedDataMappingFunctions.includes(option.value));return external_kbnSharedDeps_React_default.a.createElement(data_mapping_popover_DataMappingPopover,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.ordinalDataMapping.dataMappingLabel",{defaultMessage:"Fitting"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.ordinalDataMapping.dataMappingTooltipContent",{defaultMessage:`Fit values from the data domain to the style`})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperSelect"],{options:dataMappingOptions,valueOfSelected:props.dataMappingFunction,onChange:onDataMappingFunctionChange,itemLayoutAlign:"top",hasDividers:true})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],null),props.dataMappingFunction===constants["DATA_MAPPING_FUNCTION"].PERCENTILES?renderPercentilesForm():renderEasingForm()))}function dynamic_style_property_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class dynamic_style_property_DynamicStyleProperty extends style_property_AbstractStyleProperty{constructor(options,styleName,field,vectorLayer,getFieldFormatter){super(options,styleName);dynamic_style_property_defineProperty(this,"_field",void 0);dynamic_style_property_defineProperty(this,"_layer",void 0);dynamic_style_property_defineProperty(this,"_getFieldFormatter",void 0);dynamic_style_property_defineProperty(this,"getValueSuggestions",async query=>this._field===null?[]:await this._field.getSource().getValueSuggestions(this._field,query));this._field=field;this._layer=vectorLayer;this._getFieldFormatter=getFieldFormatter}_getStyleMetaDataRequestId(fieldName){if(this.getFieldOrigin()===constants["FIELD_ORIGIN"].SOURCE){return constants["SOURCE_META_DATA_REQUEST_ID"]}const join=this._layer.getValidJoins().find(validJoin=>!!validJoin.getRightJoinSource().getFieldByName(fieldName));return join?join.getSourceMetaDataRequestId():null}getRangeFieldMeta(){const style=this._layer.getStyle();const styleMeta=style.getStyleMeta();const fieldName=this.getFieldName();const rangeFieldMetaFromLocalFeatures=styleMeta.getRangeFieldMetaDescriptor(fieldName);if(!this.isFieldMetaEnabled()){return rangeFieldMetaFromLocalFeatures}const dataRequestId=this._getStyleMetaDataRequestId(fieldName);if(!dataRequestId){return rangeFieldMetaFromLocalFeatures}const styleMetaDataRequest=this._layer.getDataRequest(dataRequestId);if(!styleMetaDataRequest||!styleMetaDataRequest.hasData()){return rangeFieldMetaFromLocalFeatures}const data=styleMetaDataRequest.getData();const rangeFieldMeta=this._pluckOrdinalStyleMetaFromFieldMetaData(data);return rangeFieldMeta?rangeFieldMeta:rangeFieldMetaFromLocalFeatures}getPercentilesFieldMeta(){if(!this._field){return null}const dataRequestId=this._getStyleMetaDataRequestId(this.getFieldName());if(!dataRequestId){return null}const styleMetaDataRequest=this._layer.getDataRequest(dataRequestId);if(!styleMetaDataRequest||!styleMetaDataRequest.hasData()){return null}const styleMetaData=styleMetaDataRequest.getData();const percentiles=styleMetaData[`${this._field.getRootName()}_percentiles`];return percentilesValuesToFieldMeta(percentiles)}getCategoryFieldMeta(){const style=this._layer.getStyle();const styleMeta=style.getStyleMeta();const fieldName=this.getFieldName();const categoryFieldMetaFromLocalFeatures=styleMeta.getCategoryFieldMetaDescriptor(fieldName);if(!this.isFieldMetaEnabled()){return categoryFieldMetaFromLocalFeatures}const dataRequestId=this._getStyleMetaDataRequestId(fieldName);if(!dataRequestId){return categoryFieldMetaFromLocalFeatures}const styleMetaDataRequest=this._layer.getDataRequest(dataRequestId);if(!styleMetaDataRequest||!styleMetaDataRequest.hasData()){return categoryFieldMetaFromLocalFeatures}const data=styleMetaDataRequest.getData();const rangeFieldMeta=this._pluckCategoricalStyleMetaFromFieldMetaData(data);return rangeFieldMeta?rangeFieldMeta:categoryFieldMetaFromLocalFeatures}getField(){return this._field}getFieldName(){return this._field?this._field.getName():""}isDynamic(){return true}isOrdinal(){return true}isCategorical(){return false}getNumberOfCategories(){return 0}getStyleMetaHash(){const fieldMetaOptions=this.getFieldMetaOptions();const parts=[fieldMetaOptions.isEnabled.toString()];if(this.isOrdinal()){const dataMappingFunction=this.getDataMappingFunction();parts.push(dataMappingFunction);if(dataMappingFunction===constants["DATA_MAPPING_FUNCTION"].PERCENTILES&&fieldMetaOptions.percentiles){parts.push(fieldMetaOptions.percentiles.join(""))}}else if(this.isCategorical()){parts.push(this.getNumberOfCategories().toString())}return parts.join("")}isComplete(){return!!this._field}getFieldOrigin(){return this._field?this._field.getOrigin():null}isFieldMetaEnabled(){const fieldMetaOptions=this.getFieldMetaOptions();return this.supportsFieldMeta()&&external_kbnSharedDeps_Lodash_default.a.get(fieldMetaOptions,"isEnabled",true)}supportsFieldMeta(){return this.isComplete()&&!!this._field&&this._field.supportsFieldMeta()}async getFieldMetaRequest(){if(!this._field){return null}if(this.isOrdinal()){return this.getDataMappingFunction()===constants["DATA_MAPPING_FUNCTION"].INTERPOLATE?this._field.getExtendedStatsFieldMetaRequest():this._field.getPercentilesFieldMetaRequest(this.getFieldMetaOptions().percentiles!==undefined?this.getFieldMetaOptions().percentiles:constants["DEFAULT_PERCENTILES"])}if(this.isCategorical()){const numberOfCategories=this.getNumberOfCategories();return this._field.getCategoricalFieldMetaRequest(numberOfCategories)}return null}supportsMbFeatureState(){return!!this._field&&this._field.canReadFromGeoJson()}getMbLookupFunction(){return this.supportsMbFeatureState()?constants["MB_LOOKUP_FUNCTION"].FEATURE_STATE:constants["MB_LOOKUP_FUNCTION"].GET}getFieldMetaOptions(){return external_kbnSharedDeps_Lodash_default.a.get(this.getOptions(),"fieldMetaOptions",{isEnabled:true})}getDataMappingFunction(){return"dataMappingFunction"in this._options?this._options.dataMappingFunction:constants["DATA_MAPPING_FUNCTION"].INTERPOLATE}pluckOrdinalStyleMetaFromFeatures(features){if(!this.isOrdinal()){return null}const name=this.getFieldName();let min=Infinity;let max=-Infinity;for(let i=0;i<features.length;i++){const feature=features[i];const newValue=parseFloat(feature.properties?feature.properties[name]:null);if(!isNaN(newValue)){min=Math.min(min,newValue);max=Math.max(max,newValue)}}return min===Infinity||max===-Infinity?null:{min:min,max:max,delta:max-min}}pluckCategoricalStyleMetaFromFeatures(features){const size=this.getNumberOfCategories();if(!this.isCategorical()||size<=0){return null}const counts=new Map;for(let i=0;i<features.length;i++){const feature=features[i];const term=feature.properties?feature.properties[this.getFieldName()]:undefined;if(typeof term!==undefined){if(counts.has(term)){counts.set(term,counts.get(term)+1)}else{counts.set(term,1)}}}const ordered=[];for(const[key,value]of counts){ordered.push({key:key,count:value})}ordered.sort((a,b)=>b.count-a.count);const truncated=ordered.slice(0,size);return{categories:truncated}}_pluckOrdinalStyleMetaFromFieldMetaData(styleMetaData){if(!this.isOrdinal()||!this._field){return null}const stats=styleMetaData[`${this._field.getRootName()}_range`];if(!stats||!("avg"in stats)){return null}const sigma=external_kbnSharedDeps_Lodash_default.a.get(this.getFieldMetaOptions(),"sigma",DEFAULT_SIGMA);const stdLowerBounds=stats.avg-stats.std_deviation*sigma;const stdUpperBounds=stats.avg+stats.std_deviation*sigma;const min=Math.max(stats.min,stdLowerBounds);const max=Math.min(stats.max,stdUpperBounds);return{min:min,max:max,delta:max-min,isMinOutsideStdRange:stats.min<stdLowerBounds,isMaxOutsideStdRange:stats.max>stdUpperBounds}}_pluckCategoricalStyleMetaFromFieldMetaData(styleMetaData){if(!this.isCategorical()||!this._field){return null}const fieldMeta=styleMetaData[`${this._field.getRootName()}_terms`];if(!fieldMeta||!("buckets"in fieldMeta)){return null}return{categories:fieldMeta.buckets.map(bucket=>({key:bucket.key,count:bucket.doc_count}))}}formatField(value){if(this.getField()){const fieldName=this.getFieldName();const fieldFormatter=this._getFieldFormatter(fieldName);return fieldFormatter?fieldFormatter(value):super.formatField(value)}else{return super.formatField(value)}}_getSupportedDataMappingFunctions(){return[constants["DATA_MAPPING_FUNCTION"].INTERPOLATE]}renderDataMappingPopover(onChange){if(!this.supportsFieldMeta()){return null}const switchDisabled=!!this._field&&!this._field.canReadFromGeoJson();return this.isCategorical()?external_kbnSharedDeps_React_default.a.createElement(CategoricalDataMappingPopover,{fieldMetaOptions:this.getFieldMetaOptions(),onChange:onChange,switchDisabled:switchDisabled}):external_kbnSharedDeps_React_default.a.createElement(OrdinalDataMappingPopover,{fieldMetaOptions:this.getFieldMetaOptions(),styleName:this.getStyleName(),onChange:onChange,switchDisabled:switchDisabled,dataMappingFunction:this.getDataMappingFunction(),supportedDataMappingFunctions:this._getSupportedDataMappingFunctions()})}getMbPropertyName(){if(!this._field){return""}let targetName;if(this.supportsMbFeatureState()){targetName=this._field.getName()}else{if(this._field.canReadFromGeoJson()&&this._field.supportsAutoDomain()){targetName=getComputedFieldName(this.getStyleName(),this._field.getName())}else{targetName=this._field.getName()}}return targetName}getMbPropertyValue(rawValue){return this.supportsMbFeatureState()?getNumericalMbFeatureStateValue(rawValue):rawValue}enrichGeoJsonAndMbFeatureState(featureCollection,mbMap,mbSourceId){const supportsFeatureState=this.supportsMbFeatureState();const featureIdentifier={source:mbSourceId,id:undefined};const featureState={};const targetMbName=this.getMbPropertyName();for(let i=0;i<featureCollection.features.length;i++){const feature=featureCollection.features[i];const rawValue=feature.properties?feature.properties[this.getFieldName()]:undefined;const targetMbValue=this.getMbPropertyValue(rawValue);if(supportsFeatureState){featureState[targetMbName]=targetMbValue;featureIdentifier.id=feature.id;mbMap.setFeatureState(featureIdentifier,featureState)}else{if(feature.properties){feature.properties[targetMbName]=targetMbValue}}}return supportsFeatureState}}dynamic_style_property_defineProperty(dynamic_style_property_DynamicStyleProperty,"type",constants["STYLE_TYPE"].DYNAMIC);function getNumericalMbFeatureStateValue(value){if(typeof value!=="string"){return value}const valueAsFloat=parseFloat(value);return isNaN(valueAsFloat)?null:valueAsFloat}function percentilesValuesToFieldMeta(percentiles){if(percentiles===undefined||percentiles.values===undefined){return null}const percentilesFieldMeta=Object.keys(percentiles.values).map(key=>({percentile:key,value:percentiles.values[key]}));return external_kbnSharedDeps_Lodash_default.a.uniqBy(percentilesFieldMeta,"value")}function RangedStyleLegendRow({header:header,minLabel:minLabel,maxLabel:maxLabel,propertyLabel:propertyLabel,fieldLabel:fieldLabel}){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",title:propertyLabel,content:fieldLabel},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{className:"eui-textTruncate",size:"xs",style:{maxWidth:"180px"}},external_kbnSharedDeps_React_default.a.createElement("small",null,external_kbnSharedDeps_React_default.a.createElement("strong",null,fieldLabel)))))),header,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("small",null,minLabel))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{textAlign:"right",size:"xs"},external_kbnSharedDeps_React_default.a.createElement("small",null,maxLabel)))))}function ordinal_legend_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getLineWidthIcons(){const defaultStyle={stroke:"grey",fill:"none",width:"12px"};return[external_kbnSharedDeps_React_default.a.createElement(CircleIcon,{style:{...defaultStyle,strokeWidth:"1px"}}),external_kbnSharedDeps_React_default.a.createElement(CircleIcon,{style:{...defaultStyle,strokeWidth:"2px"}}),external_kbnSharedDeps_React_default.a.createElement(CircleIcon,{style:{...defaultStyle,strokeWidth:"3px"}})]}function getSymbolSizeIcons(){const defaultStyle={stroke:"grey",fill:"grey"};return[external_kbnSharedDeps_React_default.a.createElement(CircleIcon,{style:{...defaultStyle,width:"4px"}}),external_kbnSharedDeps_React_default.a.createElement(CircleIcon,{style:{...defaultStyle,width:"8px"}}),external_kbnSharedDeps_React_default.a.createElement(CircleIcon,{style:{...defaultStyle,width:"12px"}})]}const EMPTY_VALUE="";class ordinal_legend_OrdinalLegend extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);ordinal_legend_defineProperty(this,"_isMounted",false);ordinal_legend_defineProperty(this,"state",{label:EMPTY_VALUE})}componentDidMount(){this._isMounted=true;this._loadLabel()}componentDidUpdate(){this._loadLabel()}componentWillUnmount(){this._isMounted=false}async _loadLabel(){const field=this.props.style.getField();if(!field){return}const label=await field.getLabel();if(this._isMounted&&!external_kbnSharedDeps_Lodash_default.a.isEqual(this.state.label,label)){this.setState({label:label})}}_formatValue(value){if(value===EMPTY_VALUE){return value}return this.props.style.formatField(value)}_renderRangeLegendHeader(){let icons;if(this.props.style.getStyleName()===constants["VECTOR_STYLES"].LINE_WIDTH){icons=getLineWidthIcons()}else if(this.props.style.getStyleName()===constants["VECTOR_STYLES"].ICON_SIZE){icons=getSymbolSizeIcons()}else{return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs",justifyContent:"spaceBetween",alignItems:"center"},icons.map((icon,index)=>{const isLast=index===icons.length-1;let spacer;if(!isLast){spacer=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"xs"}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:index},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},icon),spacer)}))}render(){const header=this._renderRangeLegendHeader();if(!header){return null}const fieldMeta=this.props.style.getRangeFieldMeta();let minLabel=EMPTY_VALUE;let maxLabel=EMPTY_VALUE;if(fieldMeta){const min=this._formatValue(external_kbnSharedDeps_Lodash_default.a.get(fieldMeta,"min",EMPTY_VALUE));minLabel=this.props.style.isFieldMetaEnabled()&&fieldMeta.isMinOutsideStdRange?`< ${min}`:min;const max=this._formatValue(external_kbnSharedDeps_Lodash_default.a.get(fieldMeta,"max",EMPTY_VALUE));maxLabel=this.props.style.isFieldMetaEnabled()&&fieldMeta.isMaxOutsideStdRange?`> ${max}`:max}return external_kbnSharedDeps_React_default.a.createElement(RangedStyleLegendRow,{header:header,minLabel:minLabel,maxLabel:maxLabel,propertyLabel:this.props.style.getDisplayStyleName(),fieldLabel:this.state.label})}}function dynamic_size_property_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class dynamic_size_property_DynamicSizeProperty extends dynamic_style_property_DynamicStyleProperty{constructor(options,styleName,field,vectorLayer,getFieldFormatter,isSymbolizedAsIcon){super(options,styleName,field,vectorLayer,getFieldFormatter);dynamic_size_property_defineProperty(this,"_isSymbolizedAsIcon",void 0);this._isSymbolizedAsIcon=isSymbolizedAsIcon}supportsMbFeatureState(){if(this.getStyleName()===constants["VECTOR_STYLES"].ICON_SIZE&&this._isSymbolizedAsIcon){return false}if(this.getStyleName()===constants["VECTOR_STYLES"].LABEL_SIZE){return false}return super.supportsMbFeatureState()}syncHaloWidthWithMb(mbLayerId,mbMap){const haloWidth=this.getMbSizeExpression();mbMap.setPaintProperty(mbLayerId,"icon-halo-width",haloWidth)}getIconPixelSize(){return this._options.maxSize>=HALF_LARGE_MAKI_ICON_SIZE?LARGE_MAKI_ICON_SIZE:SMALL_MAKI_ICON_SIZE}syncIconSizeWithMb(symbolLayerId,mbMap){const rangeFieldMeta=this.getRangeFieldMeta();if(this._isSizeDynamicConfigComplete()&&rangeFieldMeta){const halfIconPixels=this.getIconPixelSize()/2;const targetName=this.getFieldName();mbMap.setLayoutProperty(symbolLayerId,"icon-size",["interpolate",["linear"],makeMbClampedNumberExpression({minValue:rangeFieldMeta.min,maxValue:rangeFieldMeta.max,fallback:0,lookupFunction:constants["MB_LOOKUP_FUNCTION"].GET,fieldName:targetName}),rangeFieldMeta.min,this._options.minSize/halfIconPixels,rangeFieldMeta.max,this._options.maxSize/halfIconPixels])}else{mbMap.setLayoutProperty(symbolLayerId,"icon-size",null)}}syncCircleStrokeWidthWithMb(mbLayerId,mbMap){const lineWidth=this.getMbSizeExpression();mbMap.setPaintProperty(mbLayerId,"circle-stroke-width",lineWidth)}syncCircleRadiusWithMb(mbLayerId,mbMap){const circleRadius=this.getMbSizeExpression();mbMap.setPaintProperty(mbLayerId,"circle-radius",circleRadius)}syncLineWidthWithMb(mbLayerId,mbMap){const lineWidth=this.getMbSizeExpression();mbMap.setPaintProperty(mbLayerId,"line-width",lineWidth)}syncLabelSizeWithMb(mbLayerId,mbMap){const lineWidth=this.getMbSizeExpression();mbMap.setLayoutProperty(mbLayerId,"text-size",lineWidth)}getMbSizeExpression(){const rangeFieldMeta=this.getRangeFieldMeta();if(!this._isSizeDynamicConfigComplete()||!rangeFieldMeta){return null}return this._getMbDataDrivenSize({targetName:this.getFieldName(),minSize:this._options.minSize,maxSize:this._options.maxSize,minValue:rangeFieldMeta.min,maxValue:rangeFieldMeta.max})}_getMbDataDrivenSize({targetName:targetName,minSize:minSize,maxSize:maxSize,minValue:minValue,maxValue:maxValue}){const stops=minValue===maxValue?[maxValue,maxSize]:[minValue,minSize,maxValue,maxSize];return["interpolate",["linear"],makeMbClampedNumberExpression({lookupFunction:this.getMbLookupFunction(),maxValue:maxValue,minValue:minValue,fieldName:targetName,fallback:0}),...stops]}_isSizeDynamicConfigComplete(){return this._field&&this._field.isValid()&&external_kbnSharedDeps_Lodash_default.a.has(this._options,"minSize")&&external_kbnSharedDeps_Lodash_default.a.has(this._options,"maxSize")}renderLegendDetailRow(){return external_kbnSharedDeps_React_default.a.createElement(ordinal_legend_OrdinalLegend,{style:this})}}class static_size_property_StaticSizeProperty extends static_style_property_StaticStyleProperty{constructor(options,styleName){if(typeof options.size!=="number"){super({size:1},styleName)}else{super(options,styleName)}}syncHaloWidthWithMb(mbLayerId,mbMap){mbMap.setPaintProperty(mbLayerId,"icon-halo-width",this._options.size)}getIconPixelSize(){return this._options.size>=HALF_LARGE_MAKI_ICON_SIZE?LARGE_MAKI_ICON_SIZE:SMALL_MAKI_ICON_SIZE}syncIconSizeWithMb(symbolLayerId,mbMap){const halfIconPixels=this.getIconPixelSize()/2;mbMap.setLayoutProperty(symbolLayerId,"icon-size",this._options.size/halfIconPixels)}syncCircleStrokeWidthWithMb(mbLayerId,mbMap,hasNoRadius){if(hasNoRadius){mbMap.setPaintProperty(mbLayerId,"circle-stroke-width",0)}else{mbMap.setPaintProperty(mbLayerId,"circle-stroke-width",this._options.size)}}syncCircleRadiusWithMb(mbLayerId,mbMap){mbMap.setPaintProperty(mbLayerId,"circle-radius",this._options.size)}syncLineWidthWithMb(mbLayerId,mbMap){mbMap.setPaintProperty(mbLayerId,"line-width",this._options.size)}syncLabelSizeWithMb(mbLayerId,mbMap){mbMap.setLayoutProperty(mbLayerId,"text-size",this._options.size)}}class static_color_property_StaticColorProperty extends static_style_property_StaticStyleProperty{syncCircleColorWithMb(mbLayerId,mbMap,alpha){mbMap.setPaintProperty(mbLayerId,"circle-color",this._options.color);mbMap.setPaintProperty(mbLayerId,"circle-opacity",alpha)}syncFillColorWithMb(mbLayerId,mbMap,alpha){mbMap.setPaintProperty(mbLayerId,"fill-color",this._options.color);mbMap.setPaintProperty(mbLayerId,"fill-opacity",alpha)}syncIconColorWithMb(mbLayerId,mbMap){mbMap.setPaintProperty(mbLayerId,"icon-color",this._options.color)}syncHaloBorderColorWithMb(mbLayerId,mbMap){mbMap.setPaintProperty(mbLayerId,"icon-halo-color",this._options.color)}syncLineColorWithMb(mbLayerId,mbMap,alpha){mbMap.setPaintProperty(mbLayerId,"line-color",this._options.color);mbMap.setPaintProperty(mbLayerId,"line-opacity",alpha)}syncCircleStrokeWithMb(mbLayerId,mbMap,alpha){mbMap.setPaintProperty(mbLayerId,"circle-stroke-color",this._options.color);mbMap.setPaintProperty(mbLayerId,"circle-stroke-opacity",alpha)}syncLabelColorWithMb(mbLayerId,mbMap,alpha){mbMap.setPaintProperty(mbLayerId,"text-color",this._options.color);mbMap.setPaintProperty(mbLayerId,"text-opacity",alpha)}syncLabelBorderColorWithMb(mbLayerId,mbMap){mbMap.setPaintProperty(mbLayerId,"text-halo-color",this._options.color)}}function Category({styleName:styleName,label:label,color:color,isLinesOnly:isLinesOnly,isPointsOnly:isPointsOnly,symbolId:symbolId}){function renderIcon(){if(styleName===constants["VECTOR_STYLES"].LABEL_COLOR){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs",style:{color:color}},"Tx")}return external_kbnSharedDeps_React_default.a.createElement(VectorIcon,{fillColor:styleName===constants["VECTOR_STYLES"].FILL_COLOR?color:"none",isPointsOnly:isPointsOnly,isLinesOnly:isLinesOnly,strokeColor:color,symbolId:symbolId})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"row",gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"mapLegendIconPreview",grow:false},renderIcon()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},label)))}function breaked_legend_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const breaked_legend_EMPTY_VALUE="";class breaked_legend_BreakedLegend extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);breaked_legend_defineProperty(this,"_isMounted",false);breaked_legend_defineProperty(this,"state",{label:breaked_legend_EMPTY_VALUE})}componentDidMount(){this._isMounted=true;this._loadLabel()}componentDidUpdate(){this._loadLabel()}componentWillUnmount(){this._isMounted=false}async _loadLabel(){const field=this.props.style.getField();if(!field){return}const label=await field.getLabel();if(this._isMounted&&!external_kbnSharedDeps_Lodash_default.a.isEqual(this.state.label,label)){this.setState({label:label})}}render(){if(this.state.label===breaked_legend_EMPTY_VALUE){return null}const categories=this.props.breaks.map((brk,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{key:index},external_kbnSharedDeps_React_default.a.createElement(Category,{styleName:this.props.style.getStyleName(),label:brk.label,color:brk.color,isLinesOnly:this.props.isLinesOnly,isPointsOnly:this.props.isPointsOnly,symbolId:brk.symbolId})));return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",title:this.props.style.getDisplayStyleName(),content:this.state.label},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{className:"eui-textTruncate",size:"xs",style:{maxWidth:"180px"}},external_kbnSharedDeps_React_default.a.createElement("small",null,external_kbnSharedDeps_React_default.a.createElement("strong",null,this.state.label)))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"column",gutterSize:"none"},categories))}}function getOrdinalSuffix(value){const lastDigit=value%10;if(lastDigit===1&&value!==11){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.firstOrdinalSuffix",{defaultMessage:"st"})}if(lastDigit===2&&value!==12){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.secondOrdinalSuffix",{defaultMessage:"nd"})}if(lastDigit===3&&value!==13){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.thirdOrdinalSuffix",{defaultMessage:"rd"})}return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.styles.ordinalSuffix",{defaultMessage:"th"})}function dynamic_color_property_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const UP_TO=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.legend.upto",{defaultMessage:"up to"});const EMPTY_STOPS={stops:[],defaultColor:null};const dynamic_color_property_RGBA_0000="rgba(0,0,0,0)";class dynamic_color_property_DynamicColorProperty extends dynamic_style_property_DynamicStyleProperty{constructor(options,styleName,field,vectorLayer,getFieldFormatter,chartsPaletteServiceGetColor){super(options,styleName,field,vectorLayer,getFieldFormatter);dynamic_color_property_defineProperty(this,"_chartsPaletteServiceGetColor",void 0);this._chartsPaletteServiceGetColor=chartsPaletteServiceGetColor}syncCircleColorWithMb(mbLayerId,mbMap,alpha){const color=this._getMbColor();mbMap.setPaintProperty(mbLayerId,"circle-color",color);mbMap.setPaintProperty(mbLayerId,"circle-opacity",alpha)}syncIconColorWithMb(mbLayerId,mbMap){const color=this._getMbColor();mbMap.setPaintProperty(mbLayerId,"icon-color",color)}syncHaloBorderColorWithMb(mbLayerId,mbMap){const color=this._getMbColor();mbMap.setPaintProperty(mbLayerId,"icon-halo-color",color)}syncCircleStrokeWithMb(pointLayerId,mbMap,alpha){const color=this._getMbColor();mbMap.setPaintProperty(pointLayerId,"circle-stroke-color",color);mbMap.setPaintProperty(pointLayerId,"circle-stroke-opacity",alpha)}syncFillColorWithMb(mbLayerId,mbMap,alpha){const color=this._getMbColor();mbMap.setPaintProperty(mbLayerId,"fill-color",color);mbMap.setPaintProperty(mbLayerId,"fill-opacity",alpha)}syncLineColorWithMb(mbLayerId,mbMap,alpha){const color=this._getMbColor();mbMap.setPaintProperty(mbLayerId,"line-color",color);mbMap.setPaintProperty(mbLayerId,"line-opacity",alpha)}syncLabelColorWithMb(mbLayerId,mbMap,alpha){const color=this._getMbColor();mbMap.setPaintProperty(mbLayerId,"text-color",color);mbMap.setPaintProperty(mbLayerId,"text-opacity",alpha)}syncLabelBorderColorWithMb(mbLayerId,mbMap){const color=this._getMbColor();mbMap.setPaintProperty(mbLayerId,"text-halo-color",color)}supportsFieldMeta(){if(!this.isComplete()||!this._field||!this._field.supportsFieldMeta()){return false}return this.isCategorical()&&!this._options.useCustomColorPalette||this.isOrdinal()&&!this._options.useCustomColorRamp}isOrdinal(){return typeof this._options.type==="undefined"||this._options.type===constants["COLOR_MAP_TYPE"].ORDINAL}isCategorical(){return this._options.type===constants["COLOR_MAP_TYPE"].CATEGORICAL}getNumberOfCategories(){if(!this._options.colorCategory){return 0}const colors=getColorPalette(this._options.colorCategory);return colors?colors.length:0}_getSupportedDataMappingFunctions(){return[constants["DATA_MAPPING_FUNCTION"].INTERPOLATE,constants["DATA_MAPPING_FUNCTION"].PERCENTILES]}_getMbColor(){if(!this.getFieldName()){return null}return this.isCategorical()?this._getCategoricalColorMbExpression():this._getOrdinalColorMbExpression()}_getOrdinalColorMbExpression(){const targetName=this.getFieldName();if(this._options.useCustomColorRamp){if(!this._options.customColorRamp||!this._options.customColorRamp.length){return null}const colorStops=this._options.customColorRamp.reduce((accumulatedStops,nextStop)=>[...accumulatedStops,nextStop.stop,nextStop.color],[]);return["step",makeMbClampedNumberExpression({minValue:colorStops[0],maxValue:colorStops[colorStops.length-2],lookupFunction:this.getMbLookupFunction(),fallback:colorStops[0]-1,fieldName:targetName}),dynamic_color_property_RGBA_0000,...colorStops]}if(this.getDataMappingFunction()===constants["DATA_MAPPING_FUNCTION"].PERCENTILES){const percentilesFieldMeta=this.getPercentilesFieldMeta();if(!percentilesFieldMeta||!percentilesFieldMeta.length){return null}const colorStops=getPercentilesMbColorRampStops(this._options.color?this._options.color:null,percentilesFieldMeta);if(!colorStops){return null}return["step",makeMbClampedNumberExpression({minValue:colorStops[0],maxValue:colorStops[colorStops.length-2],lookupFunction:this.getMbLookupFunction(),fallback:colorStops[0]-1,fieldName:targetName}),dynamic_color_property_RGBA_0000,...colorStops]}const rangeFieldMeta=this.getRangeFieldMeta();if(!rangeFieldMeta){return null}const colorStops=getOrdinalMbColorRampStops(this._options.color?this._options.color:null,rangeFieldMeta.min,rangeFieldMeta.max);if(!colorStops){return null}const lessThanFirstStopValue=rangeFieldMeta.min-1;return["interpolate",["linear"],makeMbClampedNumberExpression({minValue:rangeFieldMeta.min,maxValue:rangeFieldMeta.max,lookupFunction:this.getMbLookupFunction(),fallback:lessThanFirstStopValue,fieldName:targetName}),lessThanFirstStopValue,dynamic_color_property_RGBA_0000,...colorStops]}_getCustomRampColorStops(){return this._options.customColorRamp?this._options.customColorRamp.reduce((accumulatedStops,nextStop)=>[...accumulatedStops,nextStop.stop,nextStop.color],[]):[]}_getColorPaletteStops(){if(this._options.useCustomColorPalette&&this._options.customColorPalette){if(isCategoricalStopsInvalid(this._options.customColorPalette)){return EMPTY_STOPS}const stops=[];for(let i=1;i<this._options.customColorPalette.length;i++){const config=this._options.customColorPalette[i];stops.push({stop:config.stop,color:config.color})}return{defaultColor:this._options.customColorPalette[0].color,stops:stops}}const fieldMeta=this.getCategoryFieldMeta();if(!fieldMeta||!fieldMeta.categories){return EMPTY_STOPS}const colors=this._options.colorCategory?getColorPalette(this._options.colorCategory):null;if(!colors){return EMPTY_STOPS}const maxLength=Math.min(colors.length,fieldMeta.categories.length+1);const stops=[];for(let i=0;i<maxLength-1;i++){stops.push({stop:fieldMeta.categories[i].key,color:this._chartsPaletteServiceGetColor?this._chartsPaletteServiceGetColor(fieldMeta.categories[i].key):colors[i]})}return{stops:stops,defaultColor:this._chartsPaletteServiceGetColor?this._chartsPaletteServiceGetColor("__other__"):colors[maxLength-1]}}_getCategoricalColorMbExpression(){if(this._options.useCustomColorPalette&&(!this._options.customColorPalette||!this._options.customColorPalette.length)){return null}const{stops:stops,defaultColor:defaultColor}=this._getColorPaletteStops();if(stops.length<1){return null}if(!defaultColor){return null}const mbStops=[];for(let i=0;i<stops.length;i++){const stop=stops[i];const branch=`${stop.stop}`;mbStops.push(branch);mbStops.push(stop.color)}mbStops.push(defaultColor);return["match",["to-string",["get",this.getFieldName()]],...mbStops]}_getOrdinalBreaks(symbolId){let colorStops=null;let getValuePrefix=null;if(this._options.useCustomColorRamp){if(!this._options.customColorRamp){return[]}colorStops=this._getCustomRampColorStops()}else if(this.getDataMappingFunction()===constants["DATA_MAPPING_FUNCTION"].PERCENTILES){const percentilesFieldMeta=this.getPercentilesFieldMeta();if(!percentilesFieldMeta){return[]}colorStops=getPercentilesMbColorRampStops(this._options.color?this._options.color:null,percentilesFieldMeta);getValuePrefix=function(i,isNext){const percentile=isNext?parseFloat(percentilesFieldMeta[i/2+1].percentile):parseFloat(percentilesFieldMeta[i/2].percentile);return`${percentile}${getOrdinalSuffix(percentile)}: `}}else{const rangeFieldMeta=this.getRangeFieldMeta();if(!rangeFieldMeta||!this._options.color){return[]}if(rangeFieldMeta.delta===0){const colors=getColorPalette(this._options.color);return[{color:colors[colors.length-1],label:this.formatField(dynamicRound(rangeFieldMeta.max)),symbolId:symbolId}]}colorStops=getOrdinalMbColorRampStops(this._options.color?this._options.color:null,rangeFieldMeta.min,rangeFieldMeta.max)}if(!colorStops||colorStops.length<=2){return[]}const breaks=[];const lastStopIndex=colorStops.length-2;for(let i=0;i<colorStops.length;i+=2){const hasNext=i<lastStopIndex;const stopValue=colorStops[i];const formattedStopValue=this.formatField(dynamicRound(stopValue));const color=colorStops[i+1];const valuePrefix=getValuePrefix?getValuePrefix(i,false):"";let label="";if(!hasNext){label=`>= ${valuePrefix}${formattedStopValue}`}else{const nextStopValue=colorStops[i+2];const formattedNextStopValue=this.formatField(dynamicRound(nextStopValue));const nextValuePrefix=getValuePrefix?getValuePrefix(i,true):"";if(i===0){label=`< ${nextValuePrefix}${formattedNextStopValue}`}else{const begin=`${valuePrefix}${formattedStopValue}`;const end=`${nextValuePrefix}${formattedNextStopValue}`;label=`${begin} ${UP_TO} ${end}`}}breaks.push({color:color,label:label,symbolId:symbolId})}return breaks}_getCategoricalBreaks(symbolId){const breaks=[];const{stops:stops,defaultColor:defaultColor}=this._getColorPaletteStops();stops.forEach(({stop:stop,color:color})=>{if(stop!==null&&color!=null){breaks.push({color:color,symbolId:symbolId,label:this.formatField(stop)})}});if(defaultColor){breaks.push({color:defaultColor,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"secondary"},getOtherCategoryLabel()),symbolId:symbolId})}return breaks}renderLegendDetailRow({isPointsOnly:isPointsOnly,isLinesOnly:isLinesOnly,symbolId:symbolId}){let breaks=[];if(this.isOrdinal()){breaks=this._getOrdinalBreaks(symbolId)}else if(this.isCategorical()){breaks=this._getCategoricalBreaks(symbolId)}return external_kbnSharedDeps_React_default.a.createElement(breaked_legend_BreakedLegend,{style:this,breaks:breaks,isPointsOnly:isPointsOnly,isLinesOnly:isLinesOnly})}}class static_orientation_property_StaticOrientationProperty extends static_style_property_StaticStyleProperty{constructor(options,styleName){if(typeof options.orientation!=="number"){super({orientation:0},styleName)}else{super(options,styleName)}}syncIconRotationWithMb(symbolLayerId,mbMap){mbMap.setLayoutProperty(symbolLayerId,"icon-rotate",this._options.orientation)}}class dynamic_orientation_property_DynamicOrientationProperty extends dynamic_style_property_DynamicStyleProperty{syncIconRotationWithMb(symbolLayerId,mbMap){if(this._field&&this._field.isValid()){const targetName=this.getMbPropertyName();mbMap.setLayoutProperty(symbolLayerId,"icon-rotate",["coalesce",[this.getMbLookupFunction(),targetName],0])}else{mbMap.setLayoutProperty(symbolLayerId,"icon-rotate",0)}}supportsFieldMeta(){return false}supportsMbFeatureState(){return false}getMbPropertyValue(rawValue){return getNumericalMbFeatureStateValue(rawValue)}}class static_text_property_StaticTextProperty extends static_style_property_StaticStyleProperty{isComplete(){return this.getOptions().value.length>0}syncTextFieldWithMb(mbLayerId,mbMap){if(this.getOptions().value.length){mbMap.setLayoutProperty(mbLayerId,"text-field",this.getOptions().value)}else{mbMap.setLayoutProperty(mbLayerId,"text-field",null)}}}class dynamic_text_property_DynamicTextProperty extends dynamic_style_property_DynamicStyleProperty{syncTextFieldWithMb(mbLayerId,mbMap){if(this._field&&this._field.isValid()){const targetName=this.getMbPropertyName();mbMap.setLayoutProperty(mbLayerId,"text-field",["coalesce",[this.getMbLookupFunction(),targetName],""])}else{mbMap.setLayoutProperty(mbLayerId,"text-field",null)}}isOrdinal(){return false}supportsFieldMeta(){return false}supportsMbFeatureState(){return false}getMbPropertyValue(rawValue){return this.formatField(rawValue)}}function label_border_size_property_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const SMALL_SIZE=1/16;const MEDIUM_SIZE=1/8;const LARGE_SIZE=1/5;function getWidthRatio(size){switch(size){case constants["LABEL_BORDER_SIZES"].LARGE:return LARGE_SIZE;case constants["LABEL_BORDER_SIZES"].MEDIUM:return MEDIUM_SIZE;default:return SMALL_SIZE}}class label_border_size_property_LabelBorderSizeProperty extends style_property_AbstractStyleProperty{constructor(options,styleName,labelSizeProperty){super(options,styleName);label_border_size_property_defineProperty(this,"_labelSizeProperty",void 0);this._labelSizeProperty=labelSizeProperty}syncLabelBorderSizeWithMb(mbLayerId,mbMap){if(this.getOptions().size===constants["LABEL_BORDER_SIZES"].NONE){mbMap.setPaintProperty(mbLayerId,"text-halo-width",0);return}const widthRatio=getWidthRatio(this.getOptions().size);if(this._labelSizeProperty.isDynamic()&&this._labelSizeProperty.isComplete()){const labelSizeExpression=this._labelSizeProperty.getMbSizeExpression();if(labelSizeExpression){mbMap.setPaintProperty(mbLayerId,"text-halo-width",["max",["*",labelSizeExpression,widthRatio],1]);return}}const labelSize=external_kbnSharedDeps_Lodash_default.a.get(this._labelSizeProperty.getOptions(),"size",DEFAULT_LABEL_SIZE);const labelBorderSize=Math.max(labelSize*widthRatio,1);mbMap.setPaintProperty(mbLayerId,"text-halo-width",labelBorderSize)}}function extractColorFromStyleProperty(colorStyleProperty,defaultColor){if(!colorStyleProperty){return defaultColor}if(colorStyleProperty.type===constants["STYLE_TYPE"].STATIC){return colorStyleProperty.options.color}const dynamicOptions=colorStyleProperty.options;if(!dynamicOptions.field||!dynamicOptions.field.name){return defaultColor}if(dynamicOptions.type===constants["COLOR_MAP_TYPE"].CATEGORICAL){if(dynamicOptions.useCustomColorPalette){return dynamicOptions.customColorPalette&&dynamicOptions.customColorPalette.length?dynamicOptions.customColorPalette[0].color:defaultColor}if(!dynamicOptions.colorCategory){return defaultColor}const palette=getColorPalette(dynamicOptions.colorCategory);return palette?palette[0]:defaultColor}else{if(dynamicOptions.useCustomColorRamp){if(!dynamicOptions.customColorRamp||!dynamicOptions.customColorRamp.length){return defaultColor}const middleIndex=Math.floor((dynamicOptions.customColorRamp.length-1)/2);return dynamicOptions.customColorRamp[middleIndex].color}if(!dynamicOptions.color){return defaultColor}const centerColor=getColorRampCenterColor(dynamicOptions.color);return centerColor?centerColor:defaultColor}}function symbolize_as_property_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class symbolize_as_property_SymbolizeAsProperty extends style_property_AbstractStyleProperty{constructor(...args){super(...args);symbolize_as_property_defineProperty(this,"isSymbolizedAsIcon",()=>this.getOptions().value===constants["SYMBOLIZE_AS_TYPES"].ICON)}}class static_icon_property_StaticIconProperty extends static_style_property_StaticStyleProperty{syncIconWithMb(symbolLayerId,mbMap,iconPixelSize){const symbolId=this._options.value;mbMap.setLayoutProperty(symbolLayerId,"icon-anchor",getMakiSymbolAnchor(symbolId));mbMap.setLayoutProperty(symbolLayerId,"icon-image",getMakiIconId(symbolId,iconPixelSize))}}class dynamic_icon_property_DynamicIconProperty extends dynamic_style_property_DynamicStyleProperty{isOrdinal(){return false}isCategorical(){return true}getNumberOfCategories(){const palette=getIconPalette(this._options.iconPaletteId);return palette.length}syncIconWithMb(symbolLayerId,mbMap,iconPixelSize){if(this._isIconDynamicConfigComplete()){mbMap.setLayoutProperty(symbolLayerId,"icon-image",this._getMbIconImageExpression(iconPixelSize));mbMap.setLayoutProperty(symbolLayerId,"icon-anchor",this._getMbIconAnchorExpression())}else{mbMap.setLayoutProperty(symbolLayerId,"icon-image",null);mbMap.setLayoutProperty(symbolLayerId,"icon-anchor",null)}}_getPaletteStops(){if(this._options.useCustomIconMap&&this._options.customIconStops){const stops=[];for(let i=1;i<this._options.customIconStops.length;i++){const{stop:stop,icon:icon}=this._options.customIconStops[i];stops.push({stop:stop,style:icon})}return{fallbackSymbolId:this._options.customIconStops.length>0?this._options.customIconStops[0].icon:null,stops:stops}}return assignCategoriesToPalette({categories:external_kbnSharedDeps_Lodash_default.a.get(this.getCategoryFieldMeta(),"categories",[]),paletteValues:getIconPalette(this._options.iconPaletteId)})}_getMbIconImageExpression(iconPixelSize){const{stops:stops,fallbackSymbolId:fallbackSymbolId}=this._getPaletteStops();if(stops.length<1||!fallbackSymbolId){return null}const mbStops=[];stops.forEach(({stop:stop,style:style})=>{mbStops.push(`${stop}`);mbStops.push(getMakiIconId(style,iconPixelSize))});if(fallbackSymbolId){mbStops.push(getMakiIconId(fallbackSymbolId,iconPixelSize))}return["match",["to-string",["get",this.getFieldName()]],...mbStops]}_getMbIconAnchorExpression(){const{stops:stops,fallbackSymbolId:fallbackSymbolId}=this._getPaletteStops();if(stops.length<1||!fallbackSymbolId){return null}const mbStops=[];stops.forEach(({stop:stop,style:style})=>{mbStops.push(`${stop}`);mbStops.push(getMakiSymbolAnchor(style))});if(fallbackSymbolId){mbStops.push(getMakiSymbolAnchor(fallbackSymbolId))}return["match",["to-string",["get",this.getFieldName()]],...mbStops]}_isIconDynamicConfigComplete(){return this._field&&this._field.isValid()}renderLegendDetailRow({isPointsOnly:isPointsOnly,isLinesOnly:isLinesOnly}){const{stops:stops,fallbackSymbolId:fallbackSymbolId}=this._getPaletteStops();const breaks=[];stops.forEach(({stop:stop,style:style})=>{if(stop){breaks.push({color:"grey",label:this.formatField(stop),symbolId:style})}});if(fallbackSymbolId){breaks.push({color:"grey",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"secondary"},style_util_getOtherCategoryLabel()),symbolId:fallbackSymbolId})}return external_kbnSharedDeps_React_default.a.createElement(breaked_legend_BreakedLegend,{style:this,breaks:breaks,isPointsOnly:isPointsOnly,isLinesOnly:isLinesOnly})}}function vector_style_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const POINTS=[constants["GEO_JSON_TYPE"].POINT,constants["GEO_JSON_TYPE"].MULTI_POINT];const LINES=[constants["GEO_JSON_TYPE"].LINE_STRING,constants["GEO_JSON_TYPE"].MULTI_LINE_STRING];const POLYGONS=[constants["GEO_JSON_TYPE"].POLYGON,constants["GEO_JSON_TYPE"].MULTI_POLYGON];class vector_style_VectorStyle{static createDescriptor(properties={},isTimeAware=true){return{type:constants["LAYER_STYLE_TYPE"].VECTOR,properties:{...getDefaultStaticProperties(),...properties},isTimeAware:isTimeAware}}static createDefaultStyleProperties(mapColors){return getDefaultStaticProperties(mapColors)}constructor(descriptor,source,layer,chartsPaletteServiceGetColor){vector_style_defineProperty(this,"_descriptor",void 0);vector_style_defineProperty(this,"_layer",void 0);vector_style_defineProperty(this,"_source",void 0);vector_style_defineProperty(this,"_styleMeta",void 0);vector_style_defineProperty(this,"_symbolizeAsStyleProperty",void 0);vector_style_defineProperty(this,"_lineColorStyleProperty",void 0);vector_style_defineProperty(this,"_fillColorStyleProperty",void 0);vector_style_defineProperty(this,"_lineWidthStyleProperty",void 0);vector_style_defineProperty(this,"_iconStyleProperty",void 0);vector_style_defineProperty(this,"_iconSizeStyleProperty",void 0);vector_style_defineProperty(this,"_iconOrientationProperty",void 0);vector_style_defineProperty(this,"_labelStyleProperty",void 0);vector_style_defineProperty(this,"_labelSizeStyleProperty",void 0);vector_style_defineProperty(this,"_labelColorStyleProperty",void 0);vector_style_defineProperty(this,"_labelBorderColorStyleProperty",void 0);vector_style_defineProperty(this,"_labelBorderSizeStyleProperty",void 0);vector_style_defineProperty(this,"_getIsPointsOnly",()=>this._styleMeta.isPointsOnly());vector_style_defineProperty(this,"_getIsLinesOnly",()=>this._styleMeta.isLinesOnly());vector_style_defineProperty(this,"_getIsPolygonsOnly",()=>this._styleMeta.isPolygonsOnly());vector_style_defineProperty(this,"_getFieldFormatter",fieldName=>{const dynamicProp=this._getDynamicPropertyByFieldName(fieldName);if(!dynamicProp){return null}let dataRequestId;if(dynamicProp.getFieldOrigin()===constants["FIELD_ORIGIN"].SOURCE){dataRequestId=constants["SOURCE_FORMATTERS_DATA_REQUEST_ID"]}else{const targetJoin=this._layer.getValidJoins().find(join=>!!join.getRightJoinSource().getFieldByName(fieldName));if(targetJoin){dataRequestId=targetJoin.getSourceFormattersDataRequestId()}}if(!dataRequestId){return null}const formattersDataRequest=this._layer.getDataRequest(dataRequestId);if(!formattersDataRequest||!formattersDataRequest.hasData()){return null}const formatters=formattersDataRequest.getData();return formatters?formatters[fieldName]:null});vector_style_defineProperty(this,"getIcon",()=>{const isLinesOnly=this._getIsLinesOnly();let strokeColor;if(isLinesOnly){strokeColor=extractColorFromStyleProperty(this._descriptor.properties[constants["VECTOR_STYLES"].LINE_COLOR],"grey")}else if(this._hasBorder()){strokeColor=extractColorFromStyleProperty(this._descriptor.properties[constants["VECTOR_STYLES"].LINE_COLOR],"none")}const fillColor=isLinesOnly?undefined:extractColorFromStyleProperty(this._descriptor.properties[constants["VECTOR_STYLES"].FILL_COLOR],"grey");return external_kbnSharedDeps_React_default.a.createElement(VectorIcon,{isPointsOnly:this._getIsPointsOnly(),isLinesOnly:isLinesOnly,symbolId:this._getSymbolId(),strokeColor:strokeColor,fillColor:fillColor})});vector_style_defineProperty(this,"_getLegendDetailStyleProperties",()=>this.getDynamicPropertiesArray().filter(styleProperty=>{const styleName=styleProperty.getStyleName();if([constants["VECTOR_STYLES"].ICON_ORIENTATION,constants["VECTOR_STYLES"].LABEL_TEXT].includes(styleName)){return false}if(this._getIsLinesOnly()){return LINE_STYLES.includes(styleName)}if(this._getIsPolygonsOnly()){return POLYGON_STYLES.includes(styleName)}return true}));this._source=source;this._layer=layer;this._descriptor=descriptor?{...descriptor,...vector_style_VectorStyle.createDescriptor(descriptor.properties,descriptor.isTimeAware)}:vector_style_VectorStyle.createDescriptor();this._styleMeta=new StyleMeta(this._descriptor.__styleMeta);this._symbolizeAsStyleProperty=new symbolize_as_property_SymbolizeAsProperty(this._descriptor.properties[constants["VECTOR_STYLES"].SYMBOLIZE_AS].options,constants["VECTOR_STYLES"].SYMBOLIZE_AS);this._lineColorStyleProperty=this._makeColorProperty(this._descriptor.properties[constants["VECTOR_STYLES"].LINE_COLOR],constants["VECTOR_STYLES"].LINE_COLOR,chartsPaletteServiceGetColor);this._fillColorStyleProperty=this._makeColorProperty(this._descriptor.properties[constants["VECTOR_STYLES"].FILL_COLOR],constants["VECTOR_STYLES"].FILL_COLOR,chartsPaletteServiceGetColor);this._lineWidthStyleProperty=this._makeSizeProperty(this._descriptor.properties[constants["VECTOR_STYLES"].LINE_WIDTH],constants["VECTOR_STYLES"].LINE_WIDTH,this._symbolizeAsStyleProperty.isSymbolizedAsIcon());this._iconStyleProperty=this._makeIconProperty(this._descriptor.properties[constants["VECTOR_STYLES"].ICON]);this._iconSizeStyleProperty=this._makeSizeProperty(this._descriptor.properties[constants["VECTOR_STYLES"].ICON_SIZE],constants["VECTOR_STYLES"].ICON_SIZE,this._symbolizeAsStyleProperty.isSymbolizedAsIcon());this._iconOrientationProperty=this._makeOrientationProperty(this._descriptor.properties[constants["VECTOR_STYLES"].ICON_ORIENTATION],constants["VECTOR_STYLES"].ICON_ORIENTATION);this._labelStyleProperty=this._makeLabelProperty(this._descriptor.properties[constants["VECTOR_STYLES"].LABEL_TEXT]);this._labelSizeStyleProperty=this._makeSizeProperty(this._descriptor.properties[constants["VECTOR_STYLES"].LABEL_SIZE],constants["VECTOR_STYLES"].LABEL_SIZE,this._symbolizeAsStyleProperty.isSymbolizedAsIcon());this._labelColorStyleProperty=this._makeColorProperty(this._descriptor.properties[constants["VECTOR_STYLES"].LABEL_COLOR],constants["VECTOR_STYLES"].LABEL_COLOR,chartsPaletteServiceGetColor);this._labelBorderColorStyleProperty=this._makeColorProperty(this._descriptor.properties[constants["VECTOR_STYLES"].LABEL_BORDER_COLOR],constants["VECTOR_STYLES"].LABEL_BORDER_COLOR,chartsPaletteServiceGetColor);this._labelBorderSizeStyleProperty=new label_border_size_property_LabelBorderSizeProperty(this._descriptor.properties[constants["VECTOR_STYLES"].LABEL_BORDER_SIZE].options,constants["VECTOR_STYLES"].LABEL_BORDER_SIZE,this._labelSizeStyleProperty)}async _updateFieldsInDescriptor(nextFields,styleFieldsHelper,previousFields,mapColors){const originalProperties=this.getRawProperties();const invalidStyleNames=Object.keys(originalProperties).filter(key=>{const dynamicOptions=getDynamicOptions(originalProperties,key);if(!dynamicOptions||!dynamicOptions.field||!dynamicOptions.field.name){return false}const hasMatchingField=nextFields.some(field=>dynamicOptions&&dynamicOptions.field&&dynamicOptions.field.name===field.getName());return!hasMatchingField});let hasChanges=false;const updatedProperties={...originalProperties};invalidStyleNames.forEach(invalidStyleName=>{for(let i=0;i<previousFields.length;i++){const previousField=previousFields[i];const nextField=nextFields[i];if(previousField.isEqual(nextField)){continue}const isFieldDataTypeCompatible=styleFieldsHelper.hasFieldForStyle(nextField,invalidStyleName);if(!isFieldDataTypeCompatible){return}hasChanges=true;updatedProperties[invalidStyleName]={type:constants["STYLE_TYPE"].DYNAMIC,options:{...originalProperties[invalidStyleName].options,field:rectifyFieldDescriptor(nextField,{origin:previousField.getOrigin(),name:previousField.getName()})}}}});return this._deleteFieldsFromDescriptorAndUpdateStyling(nextFields,updatedProperties,hasChanges,styleFieldsHelper,mapColors)}async _deleteFieldsFromDescriptorAndUpdateStyling(nextFields,originalProperties,hasChanges,styleFieldsHelper,mapColors){const updatedProperties={};const dynamicProperties=Object.keys(originalProperties).filter(key=>{const dynamicOptions=getDynamicOptions(originalProperties,key);return dynamicOptions&&dynamicOptions.field&&dynamicOptions.field.name});dynamicProperties.forEach(key=>{const styleFields=styleFieldsHelper.getFieldsForStyle(key);if(styleFields.length===0){const staticProperties=getDefaultStaticProperties(mapColors);updatedProperties[key]=staticProperties[key];return}const dynamicProperty=originalProperties[key];if(!dynamicProperty||!dynamicProperty.options){return}const fieldName=dynamicProperty.options.field.name;if(!fieldName){return}const matchingOrdinalField=nextFields.find(ordinalField=>fieldName===ordinalField.getName());if(matchingOrdinalField){return}updatedProperties[key]={type:dynamic_style_property_DynamicStyleProperty.type,options:{...originalProperties[key].options}};if("field"in updatedProperties[key].options){delete updatedProperties[key].options.field}});if(Object.keys(updatedProperties).length!==0){return{hasChanges:true,nextStyleDescriptor:vector_style_VectorStyle.createDescriptor({...originalProperties,...updatedProperties},this.isTimeAware())}}else{return{hasChanges:hasChanges,nextStyleDescriptor:vector_style_VectorStyle.createDescriptor({...originalProperties},this.isTimeAware())}}}async getDescriptorWithUpdatedStyleProps(nextFields,previousFields,mapColors){const styleFieldsHelper=await createStyleFieldsHelper(nextFields);return previousFields.length===nextFields.length?await this._updateFieldsInDescriptor(nextFields,styleFieldsHelper,previousFields,mapColors):await this._deleteFieldsFromDescriptorAndUpdateStyling(nextFields,this.getRawProperties(),false,styleFieldsHelper,mapColors)}getType(){return constants["LAYER_STYLE_TYPE"].VECTOR}getAllStyleProperties(){return[this._symbolizeAsStyleProperty,this._iconStyleProperty,this._lineColorStyleProperty,this._fillColorStyleProperty,this._lineWidthStyleProperty,this._iconSizeStyleProperty,this._iconOrientationProperty,this._labelStyleProperty,this._labelSizeStyleProperty,this._labelColorStyleProperty,this._labelBorderColorStyleProperty,this._labelBorderSizeStyleProperty]}_hasBorder(){return this._lineWidthStyleProperty.isDynamic()?this._lineWidthStyleProperty.isComplete():this._lineWidthStyleProperty.getOptions().size!==0}renderEditor(onStyleDescriptorChange){const rawProperties=this.getRawProperties();const handlePropertyChange=(propertyName,stylePropertyDescriptor)=>{rawProperties[propertyName]=stylePropertyDescriptor;const vectorStyleDescriptor=vector_style_VectorStyle.createDescriptor(rawProperties,this.isTimeAware());onStyleDescriptorChange(vectorStyleDescriptor)};const onIsTimeAwareChange=isTimeAware=>{const vectorStyleDescriptor=vector_style_VectorStyle.createDescriptor(rawProperties,isTimeAware);onStyleDescriptorChange(vectorStyleDescriptor)};const propertiesWithFieldMeta=this.getDynamicPropertiesArray().filter(dynamicStyleProp=>dynamicStyleProp.isFieldMetaEnabled());const styleProperties={};this.getAllStyleProperties().forEach(styleProperty=>{styleProperties[styleProperty.getStyleName()]=styleProperty});return external_kbnSharedDeps_React_default.a.createElement(vector_style_editor_VectorStyleEditor,{handlePropertyChange:handlePropertyChange,styleProperties:styleProperties,layer:this._layer,isPointsOnly:this._getIsPointsOnly(),isLinesOnly:this._getIsLinesOnly(),onIsTimeAwareChange:onIsTimeAwareChange,isTimeAware:this.isTimeAware(),showIsTimeAware:propertiesWithFieldMeta.length>0,hasBorder:this._hasBorder()})}async pluckStyleMetaFromSourceDataRequest(sourceDataRequest){const features=external_kbnSharedDeps_Lodash_default.a.get(sourceDataRequest.getData(),"features",[]);const supportedFeatures=await this._source.getSupportedShapeTypes();const hasFeatureType={[constants["VECTOR_SHAPE_TYPE"].POINT]:false,[constants["VECTOR_SHAPE_TYPE"].LINE]:false,[constants["VECTOR_SHAPE_TYPE"].POLYGON]:false};if(supportedFeatures.length>1){for(let i=0;i<features.length;i++){const feature=features[i];if(feature.properties[constants["KBN_IS_CENTROID_FEATURE"]]){continue}if(!hasFeatureType[constants["VECTOR_SHAPE_TYPE"].POINT]&&POINTS.includes(feature.geometry.type)){hasFeatureType[constants["VECTOR_SHAPE_TYPE"].POINT]=true}if(!hasFeatureType[constants["VECTOR_SHAPE_TYPE"].LINE]&&LINES.includes(feature.geometry.type)){hasFeatureType[constants["VECTOR_SHAPE_TYPE"].LINE]=true}if(!hasFeatureType[constants["VECTOR_SHAPE_TYPE"].POLYGON]&&POLYGONS.includes(feature.geometry.type)){hasFeatureType[constants["VECTOR_SHAPE_TYPE"].POLYGON]=true}}}const styleMeta={geometryTypes:{isPointsOnly:isOnlySingleFeatureType(constants["VECTOR_SHAPE_TYPE"].POINT,supportedFeatures,hasFeatureType),isLinesOnly:isOnlySingleFeatureType(constants["VECTOR_SHAPE_TYPE"].LINE,supportedFeatures,hasFeatureType),isPolygonsOnly:isOnlySingleFeatureType(constants["VECTOR_SHAPE_TYPE"].POLYGON,supportedFeatures,hasFeatureType)},fieldMeta:{}};const dynamicProperties=this.getDynamicPropertiesArray();if(dynamicProperties.length===0||features.length===0){return styleMeta}dynamicProperties.forEach(dynamicProperty=>{const categoricalStyleMeta=dynamicProperty.pluckCategoricalStyleMetaFromFeatures(features);const ordinalStyleMeta=dynamicProperty.pluckOrdinalStyleMetaFromFeatures(features);const name=dynamicProperty.getFieldName();if(!styleMeta.fieldMeta[name]){styleMeta.fieldMeta[name]={}}if(categoricalStyleMeta){styleMeta.fieldMeta[name].categories=categoricalStyleMeta}if(ordinalStyleMeta){styleMeta.fieldMeta[name].range=ordinalStyleMeta}});return styleMeta}getSourceFieldNames(){const fieldNames=[];this.getDynamicPropertiesArray().forEach(styleProperty=>{if(styleProperty.getFieldOrigin()===constants["FIELD_ORIGIN"].SOURCE){fieldNames.push(styleProperty.getFieldName())}});return fieldNames}isTimeAware(){return this._descriptor.isTimeAware}getRawProperties(){return this._descriptor.properties||{}}getDynamicPropertiesArray(){const styleProperties=this.getAllStyleProperties();return styleProperties.filter(styleProperty=>styleProperty.isDynamic()&&styleProperty.isComplete())}_getDynamicPropertyByFieldName(fieldName){const dynamicProps=this.getDynamicPropertiesArray();return dynamicProps.find(dynamicProp=>fieldName===dynamicProp.getFieldName())}getStyleMeta(){return this._styleMeta}_getSymbolId(){return this.arePointsSymbolizedAsCircles()||this._iconStyleProperty.isDynamic()?undefined:this._iconStyleProperty.getOptions().value}async hasLegendDetails(){return this._getLegendDetailStyleProperties().length>0}renderLegendDetails(){return external_kbnSharedDeps_React_default.a.createElement(VectorStyleLegend,{styles:this._getLegendDetailStyleProperties(),isPointsOnly:this._getIsPointsOnly(),isLinesOnly:this._getIsLinesOnly(),symbolId:this._getSymbolId()})}clearFeatureState(featureCollection,mbMap,sourceId){const tmpFeatureIdentifier={source:"",id:undefined};for(let i=0;i<featureCollection.features.length;i++){const feature=featureCollection.features[i];tmpFeatureIdentifier.source=sourceId;tmpFeatureIdentifier.id=feature.id;mbMap.removeFeatureState(tmpFeatureIdentifier)}}setFeatureStateAndStyleProps(featureCollection,mbMap,mbSourceId){if(!featureCollection){return false}const dynamicStyleProps=this.getDynamicPropertiesArray();if(dynamicStyleProps.length===0){return false}let shouldResetAllData=false;for(let j=0;j<dynamicStyleProps.length;j++){const dynamicStyleProp=dynamicStyleProps[j];const usedFeatureState=dynamicStyleProp.enrichGeoJsonAndMbFeatureState(featureCollection,mbMap,mbSourceId);if(!usedFeatureState){shouldResetAllData=true}}return shouldResetAllData}arePointsSymbolizedAsCircles(){return!this._symbolizeAsStyleProperty.isSymbolizedAsIcon()}setMBPaintProperties({alpha:alpha,mbMap:mbMap,fillLayerId:fillLayerId,lineLayerId:lineLayerId}){this._fillColorStyleProperty.syncFillColorWithMb(fillLayerId,mbMap,alpha);this._lineColorStyleProperty.syncLineColorWithMb(lineLayerId,mbMap,alpha);this._lineWidthStyleProperty.syncLineWidthWithMb(lineLayerId,mbMap)}setMBPaintPropertiesForPoints({alpha:alpha,mbMap:mbMap,pointLayerId:pointLayerId}){this._fillColorStyleProperty.syncCircleColorWithMb(pointLayerId,mbMap,alpha);this._lineColorStyleProperty.syncCircleStrokeWithMb(pointLayerId,mbMap,alpha);const hasNoRadius=!this._iconSizeStyleProperty.isDynamic()&&this._iconSizeStyleProperty.getOptions().size===0;this._lineWidthStyleProperty.syncCircleStrokeWidthWithMb(pointLayerId,mbMap,hasNoRadius);this._iconSizeStyleProperty.syncCircleRadiusWithMb(pointLayerId,mbMap)}setMBPropertiesForLabelText({alpha:alpha,mbMap:mbMap,textLayerId:textLayerId}){mbMap.setLayoutProperty(textLayerId,"icon-allow-overlap",true);mbMap.setLayoutProperty(textLayerId,"text-allow-overlap",true);this._labelStyleProperty.syncTextFieldWithMb(textLayerId,mbMap);this._labelColorStyleProperty.syncLabelColorWithMb(textLayerId,mbMap,alpha);this._labelSizeStyleProperty.syncLabelSizeWithMb(textLayerId,mbMap);this._labelBorderSizeStyleProperty.syncLabelBorderSizeWithMb(textLayerId,mbMap);this._labelBorderColorStyleProperty.syncLabelBorderColorWithMb(textLayerId,mbMap)}setMBSymbolPropertiesForPoints({mbMap:mbMap,symbolLayerId:symbolLayerId,alpha:alpha}){mbMap.setLayoutProperty(symbolLayerId,"icon-ignore-placement",true);mbMap.setPaintProperty(symbolLayerId,"icon-opacity",alpha);this._iconStyleProperty.syncIconWithMb(symbolLayerId,mbMap,this._iconSizeStyleProperty.getIconPixelSize());this._fillColorStyleProperty.syncIconColorWithMb(symbolLayerId,mbMap);this._lineColorStyleProperty.syncHaloBorderColorWithMb(symbolLayerId,mbMap);this._lineWidthStyleProperty.syncHaloWidthWithMb(symbolLayerId,mbMap);this._iconSizeStyleProperty.syncIconSizeWithMb(symbolLayerId,mbMap);this._iconOrientationProperty.syncIconRotationWithMb(symbolLayerId,mbMap)}_makeField(fieldDescriptor){if(!fieldDescriptor||!fieldDescriptor.name){return null}if(fieldDescriptor.origin===constants["FIELD_ORIGIN"].SOURCE){return this._source.getFieldByName(fieldDescriptor.name)}else if(fieldDescriptor.origin===constants["FIELD_ORIGIN"].JOIN){const targetJoin=this._layer.getValidJoins().find(join=>!!join.getRightJoinSource().getFieldByName(fieldDescriptor.name));return targetJoin?targetJoin.getRightJoinSource().getFieldByName(fieldDescriptor.name):null}else{throw new Error(`Unknown origin-type ${fieldDescriptor.origin}`)}}_makeSizeProperty(descriptor,styleName,isSymbolizedAsIcon){if(!descriptor||!descriptor.options){return new static_size_property_StaticSizeProperty({size:0},styleName)}else if(descriptor.type===static_style_property_StaticStyleProperty.type){return new static_size_property_StaticSizeProperty(descriptor.options,styleName)}else if(descriptor.type===dynamic_style_property_DynamicStyleProperty.type){const options=descriptor.options;const field=this._makeField(options.field);return new dynamic_size_property_DynamicSizeProperty(options,styleName,field,this._layer,this._getFieldFormatter,isSymbolizedAsIcon)}else{throw new Error(`${descriptor} not implemented`)}}_makeColorProperty(descriptor,styleName,chartsPaletteServiceGetColor){if(!descriptor||!descriptor.options){return new static_color_property_StaticColorProperty({color:""},styleName)}else if(descriptor.type===static_style_property_StaticStyleProperty.type){return new static_color_property_StaticColorProperty(descriptor.options,styleName)}else if(descriptor.type===dynamic_style_property_DynamicStyleProperty.type){const options=descriptor.options;const field=this._makeField(options.field);return new dynamic_color_property_DynamicColorProperty(options,styleName,field,this._layer,this._getFieldFormatter,chartsPaletteServiceGetColor)}else{throw new Error(`${descriptor} not implemented`)}}_makeOrientationProperty(descriptor,styleName){if(!descriptor||!descriptor.options){return new static_orientation_property_StaticOrientationProperty({orientation:0},styleName)}else if(descriptor.type===static_style_property_StaticStyleProperty.type){return new static_orientation_property_StaticOrientationProperty(descriptor.options,styleName)}else if(descriptor.type===dynamic_style_property_DynamicStyleProperty.type){const options=descriptor.options;const field=this._makeField(options.field);return new dynamic_orientation_property_DynamicOrientationProperty(options,styleName,field,this._layer,this._getFieldFormatter)}else{throw new Error(`${descriptor} not implemented`)}}_makeLabelProperty(descriptor){if(!descriptor||!descriptor.options){return new static_text_property_StaticTextProperty({value:""},constants["VECTOR_STYLES"].LABEL_TEXT)}else if(descriptor.type===static_style_property_StaticStyleProperty.type){return new static_text_property_StaticTextProperty(descriptor.options,constants["VECTOR_STYLES"].LABEL_TEXT)}else if(descriptor.type===dynamic_style_property_DynamicStyleProperty.type){const options=descriptor.options;const field=this._makeField(options.field);return new dynamic_text_property_DynamicTextProperty(options,constants["VECTOR_STYLES"].LABEL_TEXT,field,this._layer,this._getFieldFormatter)}else{throw new Error(`${descriptor} not implemented`)}}_makeIconProperty(descriptor){if(!descriptor||!descriptor.options){return new static_icon_property_StaticIconProperty({value:constants["DEFAULT_ICON"]},constants["VECTOR_STYLES"].ICON)}else if(descriptor.type===static_style_property_StaticStyleProperty.type){return new static_icon_property_StaticIconProperty(descriptor.options,constants["VECTOR_STYLES"].ICON)}else if(descriptor.type===dynamic_style_property_DynamicStyleProperty.type){const options=descriptor.options;const field=this._makeField(options.field);return new dynamic_icon_property_DynamicIconProperty(options,constants["VECTOR_STYLES"].ICON,field,this._layer,this._getFieldFormatter)}else{throw new Error(`${descriptor} not implemented`)}}}function getDynamicOptions(originalProperties,key){if(!originalProperties[key]){return null}const propertyDescriptor=originalProperties[key];if(!propertyDescriptor||!("type"in propertyDescriptor)||propertyDescriptor.type!==constants["STYLE_TYPE"].DYNAMIC||!propertyDescriptor.options){return null}return propertyDescriptor.options}function rectifyFieldDescriptor(currentField,previousFieldDescriptor){return{origin:previousFieldDescriptor.origin,name:currentField.getName()}}function join_tooltip_property_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class JoinTooltipProperty{constructor(tooltipProperty,leftInnerJoins){join_tooltip_property_defineProperty(this,"_tooltipProperty",void 0);join_tooltip_property_defineProperty(this,"_leftInnerJoins",void 0);this._tooltipProperty=tooltipProperty;this._leftInnerJoins=leftInnerJoins}isFilterable(){return true}getPropertyKey(){return this._tooltipProperty.getPropertyKey()}getPropertyName(){return this._tooltipProperty.getPropertyName()}getRawValue(){return this._tooltipProperty.getRawValue()}getHtmlDisplayValue(){return this._tooltipProperty.getHtmlDisplayValue()}async getESFilters(){const esFilters=[];if(this._tooltipProperty.isFilterable()){const filters=await this._tooltipProperty.getESFilters();esFilters.push(...filters)}for(let i=0;i<this._leftInnerJoins.length;i++){const rightSource=this._leftInnerJoins[i].getRightJoinSource();const termField=rightSource.getTermField();try{const esTooltipProperty=await termField.createTooltipProperty(this._tooltipProperty.getRawValue());if(esTooltipProperty){const filters=await esTooltipProperty.getESFilters();esFilters.push(...filters)}}catch(e){console.error("Cannot create joined filter",e)}}return esFilters}}var _turf_bbox=__webpack_require__(71);var bbox_default=__webpack_require__.n(_turf_bbox);function getFeatureCollectionBounds(featureCollection,hasJoins){if(!featureCollection){return null}const visibleFeatures=hasJoins?featureCollection.features.filter(feature=>feature.properties&&feature.properties[constants["FEATURE_VISIBLE_PROPERTY_NAME"]]):featureCollection.features;if(visibleFeatures.length===0){return null}const bbox=bbox_default()({type:"FeatureCollection",features:visibleFeatures});return{minLon:bbox[0],minLat:bbox[1],maxLon:bbox[2],maxLat:bbox[3]}}const EXCLUDE_TOO_MANY_FEATURES_BOX=["!=",["get",constants["KBN_TOO_MANY_FEATURES_PROPERTY"]],true];const EXCLUDE_CENTROID_FEATURES=["!=",["get",constants["KBN_IS_CENTROID_FEATURE"]],true];const VISIBILITY_FILTER_CLAUSE=["all",["==",["get",constants["FEATURE_VISIBLE_PROPERTY_NAME"]],true]];const EXCLUDE_KBN_FEATURES=["all",EXCLUDE_TOO_MANY_FEATURES_BOX,EXCLUDE_CENTROID_FEATURES];const CLOSED_SHAPE_MB_FILTER=[...EXCLUDE_KBN_FEATURES,["any",["==",["geometry-type"],constants["GEO_JSON_TYPE"].POLYGON],["==",["geometry-type"],constants["GEO_JSON_TYPE"].MULTI_POLYGON]]];const VISIBLE_CLOSED_SHAPE_MB_FILTER=[...VISIBILITY_FILTER_CLAUSE,CLOSED_SHAPE_MB_FILTER];const ALL_SHAPE_MB_FILTER=[...EXCLUDE_KBN_FEATURES,["any",["==",["geometry-type"],constants["GEO_JSON_TYPE"].POLYGON],["==",["geometry-type"],constants["GEO_JSON_TYPE"].MULTI_POLYGON],["==",["geometry-type"],constants["GEO_JSON_TYPE"].LINE_STRING],["==",["geometry-type"],constants["GEO_JSON_TYPE"].MULTI_LINE_STRING]]];const VISIBLE_ALL_SHAPE_MB_FILTER=[...VISIBILITY_FILTER_CLAUSE,ALL_SHAPE_MB_FILTER];const POINT_MB_FILTER=[...EXCLUDE_KBN_FEATURES,["any",["==",["geometry-type"],constants["GEO_JSON_TYPE"].POINT],["==",["geometry-type"],constants["GEO_JSON_TYPE"].MULTI_POINT]]];const VISIBLE_POINT_MB_FILTER=[...VISIBILITY_FILTER_CLAUSE,POINT_MB_FILTER];const CENTROID_MB_FILTER=["all",["==",["get",constants["KBN_IS_CENTROID_FEATURE"]],true]];const VISIBLE_CENTROID_MB_FILTER=[...VISIBILITY_FILTER_CLAUSE,CENTROID_MB_FILTER];function getFillFilterExpression(hasJoins){return hasJoins?VISIBLE_CLOSED_SHAPE_MB_FILTER:CLOSED_SHAPE_MB_FILTER}function getLineFilterExpression(hasJoins){return hasJoins?VISIBLE_ALL_SHAPE_MB_FILTER:ALL_SHAPE_MB_FILTER}function getPointFilterExpression(hasJoins){return hasJoins?VISIBLE_POINT_MB_FILTER:POINT_MB_FILTER}function getCentroidFilterExpression(hasJoins){return hasJoins?VISIBLE_CENTROID_MB_FILTER:CENTROID_MB_FILTER}function vector_layer_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class vector_layer_VectorLayer extends layer_AbstractLayer{static createDescriptor(options,mapColors){const layerDescriptor=super.createDescriptor(options);layerDescriptor.type=vector_layer_VectorLayer.type;if(!options.style){const styleProperties=vector_style_VectorStyle.createDefaultStyleProperties(mapColors?mapColors:[]);layerDescriptor.style=vector_style_VectorStyle.createDescriptor(styleProperties)}if(!options.joins){layerDescriptor.joins=[]}return layerDescriptor}constructor({layerDescriptor:layerDescriptor,source:source,joins:joins=[],chartsPaletteServiceGetColor:chartsPaletteServiceGetColor}){super({layerDescriptor:layerDescriptor,source:source});vector_layer_defineProperty(this,"_style",void 0);vector_layer_defineProperty(this,"_joins",void 0);this._joins=joins;this._style=new vector_style_VectorStyle(layerDescriptor.style,source,this,chartsPaletteServiceGetColor)}getSource(){return super.getSource()}getStyleForEditing(){return this._style}getStyle(){return this._style}getCurrentStyle(){return this._style}destroy(){if(this.getSource()){this.getSource().destroy()}this.getJoins().forEach(joinSource=>{joinSource.destroy()})}getJoins(){return this._joins.slice()}getValidJoins(){return this.getJoins().filter(join=>join.hasCompleteConfig())}hasJoins(){return this.getValidJoins().length>0}isInitialDataLoadComplete(){const sourceDataRequest=this.getSourceDataRequest();if(!sourceDataRequest||!sourceDataRequest.hasData()){return false}const joins=this.getValidJoins();for(let i=0;i<joins.length;i++){const joinDataRequest=this.getDataRequest(joins[i].getSourceDataRequestId());if(!joinDataRequest||!joinDataRequest.hasData()){return false}}return true}getCustomIconAndTooltipContent(){const featureCollection=this._getSourceFeatureCollection();const noResultsIcon=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{size:"m",color:"subdued",type:"minusInCircle"});if(!featureCollection||featureCollection.features.length===0){return{icon:noResultsIcon,tooltipContent:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.vectorLayer.noResultsFoundTooltip",{defaultMessage:`No results found.`})}}if(this.getJoins().length&&!featureCollection.features.some(feature=>{var _feature$properties;return(_feature$properties=feature.properties)===null||_feature$properties===void 0?void 0:_feature$properties[constants["FEATURE_VISIBLE_PROPERTY_NAME"]]})){return{icon:noResultsIcon,tooltipContent:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.vectorLayer.noResultsFoundInJoinTooltip",{defaultMessage:`No matching results found in term joins`})}}const sourceDataRequest=this.getSourceDataRequest();const{tooltipContent:tooltipContent,areResultsTrimmed:areResultsTrimmed}=this.getSource().getSourceTooltipContent(sourceDataRequest);return{icon:this.getCurrentStyle().getIcon(),tooltipContent:tooltipContent,areResultsTrimmed:areResultsTrimmed}}getLayerTypeIconName(){return"vector"}async hasLegendDetails(){return this.getCurrentStyle().hasLegendDetails()}renderLegendDetails(){return this.getCurrentStyle().renderLegendDetails()}async getBounds(syncContext){const isStaticLayer=!this.getSource().isBoundsAware();return isStaticLayer||this.hasJoins()?getFeatureCollectionBounds(this._getSourceFeatureCollection(),this.hasJoins()):getVectorSourceBounds({layerId:this.getId(),syncContext:syncContext,source:this.getSource(),sourceQuery:this.getQuery()})}async getLeftJoinFields(){return await this.getSource().getLeftJoinFields()}_getJoinFields(){const joinFields=[];this.getValidJoins().forEach(join=>{const fields=join.getJoinFields();joinFields.push(...fields)});return joinFields}async getFields(){const sourceFields=await this.getSource().getFields();return[...sourceFields,...this._getJoinFields()]}async getStyleEditorFields(){const sourceFields=await this.getSourceForEditing().getFields();return[...sourceFields,...this._getJoinFields()]}getIndexPatternIds(){const indexPatternIds=this.getSource().getIndexPatternIds();this.getValidJoins().forEach(join=>{indexPatternIds.push(...join.getIndexPatternIds())});return indexPatternIds}getQueryableIndexPatternIds(){const indexPatternIds=this.getSource().getQueryableIndexPatternIds();this.getValidJoins().forEach(join=>{indexPatternIds.push(...join.getQueryableIndexPatternIds())});return indexPatternIds}async isFilteredByGlobalTime(){if(this.getSource().getApplyGlobalTime()&&await this.getSource().isTimeAware()){return true}const joinPromises=this.getValidJoins().map(async join=>join.getRightJoinSource().getApplyGlobalTime()&&await join.getRightJoinSource().isTimeAware());return(await Promise.all(joinPromises)).some(isJoinTimeAware=>isJoinTimeAware)}async _syncJoin({join:join,startLoading:startLoading,stopLoading:stopLoading,onLoadError:onLoadError,registerCancelCallback:registerCancelCallback,dataFilters:dataFilters}){const joinSource=join.getRightJoinSource();const sourceDataId=join.getSourceDataRequestId();const requestToken=Symbol(`layer-join-refresh:${this.getId()} - ${sourceDataId}`);const searchFilters={...dataFilters,fieldNames:joinSource.getFieldNames(),sourceQuery:joinSource.getWhereQuery(),applyGlobalQuery:joinSource.getApplyGlobalQuery(),applyGlobalTime:joinSource.getApplyGlobalTime(),sourceMeta:joinSource.getSyncMeta()};const prevDataRequest=this.getDataRequest(sourceDataId);const canSkipFetch=await canSkipSourceUpdate({source:joinSource,prevDataRequest:prevDataRequest,nextMeta:searchFilters});if(canSkipFetch){return{dataHasChanged:false,join:join,propertiesMap:prevDataRequest===null||prevDataRequest===void 0?void 0:prevDataRequest.getData()}}try{startLoading(sourceDataId,requestToken,searchFilters);const leftSourceName=await this._source.getDisplayName();const propertiesMap=await joinSource.getPropertiesMap(searchFilters,leftSourceName,join.getLeftField().getName(),registerCancelCallback.bind(null,requestToken));stopLoading(sourceDataId,requestToken,propertiesMap);return{dataHasChanged:true,join:join,propertiesMap:propertiesMap}}catch(error){if(!(error instanceof DataRequestAbortError)){onLoadError(sourceDataId,requestToken,`Join error: ${error.message}`)}throw error}}async _syncJoins(syncContext,style){const joinSyncs=this.getValidJoins().map(async join=>{await this._syncJoinStyleMeta(syncContext,join,style);await this._syncJoinFormatters(syncContext,join,style);return this._syncJoin({join:join,...syncContext})});return await Promise.all(joinSyncs)}_getSearchFilters(dataFilters,source,style){const fieldNames=[...source.getFieldNames(),...style.getSourceFieldNames(),...this.getValidJoins().map(join=>join.getLeftField().getName())];const sourceQuery=this.getQuery();return{...dataFilters,fieldNames:external_kbnSharedDeps_Lodash_default.a.uniq(fieldNames).sort(),geogridPrecision:source.getGeoGridPrecision(dataFilters.zoom),sourceQuery:sourceQuery?sourceQuery:undefined,applyGlobalQuery:source.getApplyGlobalQuery(),applyGlobalTime:source.getApplyGlobalTime(),sourceMeta:source.getSyncMeta()}}_performInnerJoins(sourceResult,joinStates,updateSourceData){let shouldUpdateStore=sourceResult.refreshed||joinStates.some(joinState=>joinState.dataHasChanged);if(!shouldUpdateStore){return}for(let i=0;i<sourceResult.featureCollection.features.length;i++){const feature=sourceResult.featureCollection.features[i];if(!feature.properties){feature.properties={}}const oldVisbility=feature.properties[constants["FEATURE_VISIBLE_PROPERTY_NAME"]];let isFeatureVisible=true;for(let j=0;j<joinStates.length;j++){const joinState=joinStates[j];const innerJoin=joinState.join;const canJoinOnCurrent=joinState.propertiesMap?innerJoin.joinPropertiesToFeature(feature,joinState.propertiesMap):false;isFeatureVisible=isFeatureVisible&&canJoinOnCurrent}if(oldVisbility!==isFeatureVisible){shouldUpdateStore=true}feature.properties[constants["FEATURE_VISIBLE_PROPERTY_NAME"]]=isFeatureVisible}if(shouldUpdateStore){updateSourceData({...sourceResult.featureCollection})}}async _syncSourceStyleMeta(syncContext,source,style){const sourceQuery=this.getQuery();return this._syncStyleMeta({source:source,style:style,sourceQuery:sourceQuery?sourceQuery:undefined,dataRequestId:constants["SOURCE_META_DATA_REQUEST_ID"],dynamicStyleProps:style.getDynamicPropertiesArray().filter(dynamicStyleProp=>dynamicStyleProp.getFieldOrigin()===constants["FIELD_ORIGIN"].SOURCE&&dynamicStyleProp.isFieldMetaEnabled()),...syncContext})}async _syncJoinStyleMeta(syncContext,join,style){const joinSource=join.getRightJoinSource();return this._syncStyleMeta({source:joinSource,style:style,sourceQuery:joinSource.getWhereQuery(),dataRequestId:join.getSourceMetaDataRequestId(),dynamicStyleProps:this.getCurrentStyle().getDynamicPropertiesArray().filter(dynamicStyleProp=>{const matchingField=joinSource.getFieldByName(dynamicStyleProp.getFieldName());return dynamicStyleProp.getFieldOrigin()===constants["FIELD_ORIGIN"].JOIN&&!!matchingField&&dynamicStyleProp.isFieldMetaEnabled()}),...syncContext})}async _syncStyleMeta({source:source,style:style,sourceQuery:sourceQuery,dataRequestId:dataRequestId,dynamicStyleProps:dynamicStyleProps,dataFilters:dataFilters,startLoading:startLoading,stopLoading:stopLoading,onLoadError:onLoadError,registerCancelCallback:registerCancelCallback}){if(!source.isESSource()||dynamicStyleProps.length===0){return}const dynamicStyleFields=dynamicStyleProps.map(dynamicStyleProp=>`${dynamicStyleProp.getFieldName()}${dynamicStyleProp.getStyleMetaHash()}`);const nextMeta={dynamicStyleFields:external_kbnSharedDeps_Lodash_default.a.uniq(dynamicStyleFields).sort(),sourceQuery:sourceQuery,isTimeAware:this.getCurrentStyle().isTimeAware()&&await source.isTimeAware(),timeFilters:dataFilters.timeFilters,searchSessionId:dataFilters.searchSessionId};const prevDataRequest=this.getDataRequest(dataRequestId);const canSkipFetch=canSkipStyleMetaUpdate({prevDataRequest:prevDataRequest,nextMeta:nextMeta});if(canSkipFetch){return}const requestToken=Symbol(`layer-${this.getId()}-${dataRequestId}`);try{startLoading(dataRequestId,requestToken,nextMeta);const layerName=await this.getDisplayName(source);const styleMeta=await source.loadStylePropsMeta({layerName:layerName,style:style,dynamicStyleProps:dynamicStyleProps,registerCancelCallback:registerCancelCallback.bind(null,requestToken),sourceQuery:nextMeta.sourceQuery,timeFilters:nextMeta.timeFilters,searchSessionId:dataFilters.searchSessionId});stopLoading(dataRequestId,requestToken,styleMeta,nextMeta)}catch(error){if(!(error instanceof DataRequestAbortError)){onLoadError(dataRequestId,requestToken,error.message)}throw error}}async _syncSourceFormatters(syncContext,source,style){return this._syncFormatters({source:source,dataRequestId:constants["SOURCE_FORMATTERS_DATA_REQUEST_ID"],fields:style.getDynamicPropertiesArray().filter(dynamicStyleProp=>dynamicStyleProp.getFieldOrigin()===constants["FIELD_ORIGIN"].SOURCE).map(dynamicStyleProp=>dynamicStyleProp.getField()),...syncContext})}async _syncJoinFormatters(syncContext,join,style){const joinSource=join.getRightJoinSource();return this._syncFormatters({source:joinSource,dataRequestId:join.getSourceFormattersDataRequestId(),fields:style.getDynamicPropertiesArray().filter(dynamicStyleProp=>{const matchingField=joinSource.getFieldByName(dynamicStyleProp.getFieldName());return dynamicStyleProp.getFieldOrigin()===constants["FIELD_ORIGIN"].JOIN&&!!matchingField}).map(dynamicStyleProp=>dynamicStyleProp.getField()),...syncContext})}async _syncFormatters({source:source,dataRequestId:dataRequestId,fields:fields,startLoading:startLoading,stopLoading:stopLoading,onLoadError:onLoadError}){if(fields.length===0){return}const fieldNames=fields.map(field=>field.getName());const nextMeta={fieldNames:external_kbnSharedDeps_Lodash_default.a.uniq(fieldNames).sort()};const prevDataRequest=this.getDataRequest(dataRequestId);const canSkipUpdate=canSkipFormattersUpdate({prevDataRequest:prevDataRequest,nextMeta:nextMeta});if(canSkipUpdate){return}const requestToken=Symbol(`layer-${this.getId()}-${dataRequestId}`);try{startLoading(dataRequestId,requestToken,nextMeta);const formatters={};const promises=fields.filter(field=>field.canValueBeFormatted()).map(async field=>{formatters[field.getName()]=await source.createFieldFormatter(field)});await Promise.all(promises);stopLoading(dataRequestId,requestToken,formatters,nextMeta)}catch(error){onLoadError(dataRequestId,requestToken,error.message);throw error}}async syncData(syncContext){await this._syncData(syncContext,this.getSource(),this.getCurrentStyle())}async _syncData(syncContext,source,style){if(this.isLoadingBounds()){return}try{await this._syncSourceStyleMeta(syncContext,source,style);await this._syncSourceFormatters(syncContext,source,style);const sourceResult=await syncVectorSource({layerId:this.getId(),layerName:await this.getDisplayName(source),prevDataRequest:this.getSourceDataRequest(),requestMeta:this._getSearchFilters(syncContext.dataFilters,source,style),syncContext:syncContext,source:source});if(!sourceResult.featureCollection||!sourceResult.featureCollection.features.length||!this.hasJoins()){return}const joinStates=await this._syncJoins(syncContext,style);this._performInnerJoins(sourceResult,joinStates,syncContext.updateSourceData)}catch(error){if(!(error instanceof DataRequestAbortError)){throw error}}}_getSourceFeatureCollection(){const sourceDataRequest=this.getSourceDataRequest();return sourceDataRequest?sourceDataRequest.getData():null}_syncFeatureCollectionWithMb(mbMap){const mbGeoJSONSource=mbMap.getSource(this.getId());const featureCollection=this._getSourceFeatureCollection();const featureCollectionOnMap=layer_AbstractLayer.getBoundDataForSource(mbMap,this.getId());if(!featureCollection){if(featureCollectionOnMap){this.getCurrentStyle().clearFeatureState(featureCollectionOnMap,mbMap,this.getId())}mbGeoJSONSource.setData(constants["EMPTY_FEATURE_COLLECTION"]);return}const hasGeoJsonProperties=this.getCurrentStyle().setFeatureStateAndStyleProps(featureCollection,mbMap,this.getId());if(featureCollection!==featureCollectionOnMap||hasGeoJsonProperties){mbGeoJSONSource.setData(featureCollection)}}_setMbPointsProperties(mbMap,mvtSourceLayer){const pointLayerId=this._getMbPointLayerId();const symbolLayerId=this._getMbSymbolLayerId();const pointLayer=mbMap.getLayer(pointLayerId);const symbolLayer=mbMap.getLayer(symbolLayerId);let markerLayerId;let textLayerId;if(this.getCurrentStyle().arePointsSymbolizedAsCircles()){markerLayerId=pointLayerId;textLayerId=this._getMbTextLayerId();if(symbolLayer){mbMap.setLayoutProperty(symbolLayerId,"visibility","none")}this._setMbCircleProperties(mbMap,mvtSourceLayer)}else{markerLayerId=symbolLayerId;textLayerId=symbolLayerId;if(pointLayer){mbMap.setLayoutProperty(pointLayerId,"visibility","none");mbMap.setLayoutProperty(this._getMbTextLayerId(),"visibility","none")}this._setMbSymbolProperties(mbMap,mvtSourceLayer)}this.syncVisibilityWithMb(mbMap,markerLayerId);mbMap.setLayerZoomRange(markerLayerId,this.getMinZoom(),this.getMaxZoom());if(markerLayerId!==textLayerId){this.syncVisibilityWithMb(mbMap,textLayerId);mbMap.setLayerZoomRange(textLayerId,this.getMinZoom(),this.getMaxZoom())}}_setMbCircleProperties(mbMap,mvtSourceLayer){const sourceId=this.getId();const pointLayerId=this._getMbPointLayerId();const pointLayer=mbMap.getLayer(pointLayerId);if(!pointLayer){const mbLayer={id:pointLayerId,type:"circle",source:sourceId,paint:{}};if(mvtSourceLayer){mbLayer["source-layer"]=mvtSourceLayer}mbMap.addLayer(mbLayer)}const textLayerId=this._getMbTextLayerId();const textLayer=mbMap.getLayer(textLayerId);if(!textLayer){const mbLayer={id:textLayerId,type:"symbol",source:sourceId};if(mvtSourceLayer){mbLayer["source-layer"]=mvtSourceLayer}mbMap.addLayer(mbLayer)}const filterExpr=getPointFilterExpression(this.hasJoins());if(filterExpr!==mbMap.getFilter(pointLayerId)){mbMap.setFilter(pointLayerId,filterExpr);mbMap.setFilter(textLayerId,filterExpr)}this.getCurrentStyle().setMBPaintPropertiesForPoints({alpha:this.getAlpha(),mbMap:mbMap,pointLayerId:pointLayerId});this.getCurrentStyle().setMBPropertiesForLabelText({alpha:this.getAlpha(),mbMap:mbMap,textLayerId:textLayerId})}_setMbSymbolProperties(mbMap,mvtSourceLayer){const sourceId=this.getId();const symbolLayerId=this._getMbSymbolLayerId();const symbolLayer=mbMap.getLayer(symbolLayerId);if(!symbolLayer){const mbLayer={id:symbolLayerId,type:"symbol",source:sourceId};if(mvtSourceLayer){mbLayer["source-layer"]=mvtSourceLayer}mbMap.addLayer(mbLayer)}const filterExpr=getPointFilterExpression(this.hasJoins());if(filterExpr!==mbMap.getFilter(symbolLayerId)){mbMap.setFilter(symbolLayerId,filterExpr)}this.getCurrentStyle().setMBSymbolPropertiesForPoints({alpha:this.getAlpha(),mbMap:mbMap,symbolLayerId:symbolLayerId});this.getCurrentStyle().setMBPropertiesForLabelText({alpha:this.getAlpha(),mbMap:mbMap,textLayerId:symbolLayerId})}_setMbLinePolygonProperties(mbMap,mvtSourceLayer){const sourceId=this.getId();const fillLayerId=this._getMbPolygonLayerId();const lineLayerId=this._getMbLineLayerId();const tooManyFeaturesLayerId=this._getMbTooManyFeaturesLayerId();const hasJoins=this.hasJoins();if(!mbMap.getLayer(fillLayerId)){const mbLayer={id:fillLayerId,type:"fill",source:sourceId,paint:{}};if(mvtSourceLayer){mbLayer["source-layer"]=mvtSourceLayer}mbMap.addLayer(mbLayer)}if(!mbMap.getLayer(lineLayerId)){const mbLayer={id:lineLayerId,type:"line",source:sourceId,paint:{}};if(mvtSourceLayer){mbLayer["source-layer"]=mvtSourceLayer}mbMap.addLayer(mbLayer)}if(!mbMap.getLayer(tooManyFeaturesLayerId)){const mbLayer={id:tooManyFeaturesLayerId,type:"fill",source:sourceId,paint:{}};if(mvtSourceLayer){mbLayer["source-layer"]=mvtSourceLayer}mbMap.addLayer(mbLayer);mbMap.setFilter(tooManyFeaturesLayerId,["==",["get",constants["KBN_TOO_MANY_FEATURES_PROPERTY"]],true]);mbMap.setPaintProperty(tooManyFeaturesLayerId,"fill-pattern",constants["KBN_TOO_MANY_FEATURES_IMAGE_ID"]);mbMap.setPaintProperty(tooManyFeaturesLayerId,"fill-opacity",this.getAlpha())}this.getCurrentStyle().setMBPaintProperties({alpha:this.getAlpha(),mbMap:mbMap,fillLayerId:fillLayerId,lineLayerId:lineLayerId});this.syncVisibilityWithMb(mbMap,fillLayerId);mbMap.setLayerZoomRange(fillLayerId,this.getMinZoom(),this.getMaxZoom());const fillFilterExpr=getFillFilterExpression(hasJoins);if(fillFilterExpr!==mbMap.getFilter(fillLayerId)){mbMap.setFilter(fillLayerId,fillFilterExpr)}this.syncVisibilityWithMb(mbMap,lineLayerId);mbMap.setLayerZoomRange(lineLayerId,this.getMinZoom(),this.getMaxZoom());const lineFilterExpr=getLineFilterExpression(hasJoins);if(lineFilterExpr!==mbMap.getFilter(lineLayerId)){mbMap.setFilter(lineLayerId,lineFilterExpr)}this.syncVisibilityWithMb(mbMap,tooManyFeaturesLayerId);mbMap.setLayerZoomRange(tooManyFeaturesLayerId,this.getMinZoom(),this.getMaxZoom())}_setMbCentroidProperties(mbMap,mvtSourceLayer){const centroidLayerId=this._getMbCentroidLayerId();const centroidLayer=mbMap.getLayer(centroidLayerId);if(!centroidLayer){const mbLayer={id:centroidLayerId,type:"symbol",source:this.getId()};if(mvtSourceLayer){mbLayer["source-layer"]=mvtSourceLayer}mbMap.addLayer(mbLayer)}const filterExpr=getCentroidFilterExpression(this.hasJoins());if(filterExpr!==mbMap.getFilter(centroidLayerId)){mbMap.setFilter(centroidLayerId,filterExpr)}this.getCurrentStyle().setMBPropertiesForLabelText({alpha:this.getAlpha(),mbMap:mbMap,textLayerId:centroidLayerId});this.syncVisibilityWithMb(mbMap,centroidLayerId);mbMap.setLayerZoomRange(centroidLayerId,this.getMinZoom(),this.getMaxZoom())}_syncStylePropertiesWithMb(mbMap){this._setMbPointsProperties(mbMap);this._setMbLinePolygonProperties(mbMap);this._setMbCentroidProperties(mbMap)}syncLayerWithMB(mbMap){addGeoJsonMbSource(this._getMbSourceId(),this.getMbLayerIds(),mbMap);this._syncFeatureCollectionWithMb(mbMap);this._syncStylePropertiesWithMb(mbMap)}_getMbPointLayerId(){return this.makeMbLayerId("circle")}_getMbTextLayerId(){return this.makeMbLayerId("text")}_getMbCentroidLayerId(){return this.makeMbLayerId("centroid")}_getMbSymbolLayerId(){return this.makeMbLayerId("symbol")}_getMbLineLayerId(){return this.makeMbLayerId("line")}_getMbPolygonLayerId(){return this.makeMbLayerId("fill")}_getMbTooManyFeaturesLayerId(){return this.makeMbLayerId("toomanyfeatures")}getMbLayerIds(){return[this._getMbPointLayerId(),this._getMbTextLayerId(),this._getMbCentroidLayerId(),this._getMbSymbolLayerId(),this._getMbLineLayerId(),this._getMbPolygonLayerId(),this._getMbTooManyFeaturesLayerId()]}ownsMbLayerId(mbLayerId){return this.getMbLayerIds().includes(mbLayerId)}ownsMbSourceId(mbSourceId){return this.getId()===mbSourceId}_addJoinsToSourceTooltips(tooltipsFromSource){for(let i=0;i<tooltipsFromSource.length;i++){const tooltipProperty=tooltipsFromSource[i];const matchingJoins=[];for(let j=0;j<this.getJoins().length;j++){if(this.getJoins()[j].getLeftField().getName()===tooltipProperty.getPropertyKey()){matchingJoins.push(this.getJoins()[j])}}if(matchingJoins.length){tooltipsFromSource[i]=new JoinTooltipProperty(tooltipProperty,matchingJoins)}}}async getPropertiesForTooltip(properties){const vectorSource=this.getSource();let allProperties=await vectorSource.getTooltipProperties(properties);this._addJoinsToSourceTooltips(allProperties);for(let i=0;i<this.getJoins().length;i++){const propsFromJoin=await this.getJoins()[i].getTooltipProperties(properties);allProperties=[...allProperties,...propsFromJoin]}return allProperties}canShowTooltip(){return this.isVisible()&&(this.getSource().canFormatFeatureProperties()||this.getJoins().length>0)}getFeatureById(id){const featureCollection=this._getSourceFeatureCollection();if(!featureCollection){return null}const targetFeature=featureCollection.features.find(feature=>{var _feature$properties2;return((_feature$properties2=feature.properties)===null||_feature$properties2===void 0?void 0:_feature$properties2[constants["FEATURE_ID_PROPERTY_NAME"]])===id});return targetFeature?targetFeature:null}async getLicensedFeatures(){return await this._source.getLicensedFeatures()}}vector_layer_defineProperty(vector_layer_VectorLayer,"type",constants["LAYER_TYPE"].VECTOR);const HEATMAP_COLOR_RAMP_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.heatmap.colorRampLabel",{defaultMessage:"Color range"});function HeatmapStyleEditor({colorRampName:colorRampName,onHeatmapColorChange:onHeatmapColorChange}){const onColorRampChange=selectedPaletteId=>{onHeatmapColorChange({colorRampName:selectedPaletteId})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:HEATMAP_COLOR_RAMP_LABEL,display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiColorPalettePicker"],{palettes:NUMERICAL_COLOR_PALETTES,onChange:onColorRampChange,valueOfSelected:colorRampName,compressed:true}))}const ColorGradient=({colorPaletteId:colorPaletteId})=>{const palette=getColorPalette(colorPaletteId);return palette.length?external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapColorGradient",style:{background:getLinearGradient(palette)}}):null};function heatmap_legend_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class heatmap_legend_HeatmapLegend extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);heatmap_legend_defineProperty(this,"_isMounted",false);heatmap_legend_defineProperty(this,"state",{label:""})}componentDidUpdate(){this._loadLabel()}componentDidMount(){this._isMounted=true;this._loadLabel()}componentWillUnmount(){this._isMounted=false}async _loadLabel(){const label=await this.props.field.getLabel();if(this._isMounted&&this.state.label!==label){this.setState({label:label})}}render(){return external_kbnSharedDeps_React_default.a.createElement(RangedStyleLegendRow,{header:external_kbnSharedDeps_React_default.a.createElement(ColorGradient,{colorPaletteId:this.props.colorRampName}),minLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.heatmapLegend.coldLabel",{defaultMessage:"cold"}),maxLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.heatmapLegend.hotLabel",{defaultMessage:"hot"}),propertyLabel:HEATMAP_COLOR_RAMP_LABEL,fieldLabel:this.state.label})}}function heatmap_style_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const MIN_RANGE=.1;const MAX_RANGE=1;class heatmap_style_HeatmapStyle{constructor(descriptor={colorRampName:DEFAULT_HEATMAP_COLOR_RAMP_NAME}){heatmap_style_defineProperty(this,"_descriptor",void 0);this._descriptor=heatmap_style_HeatmapStyle.createDescriptor(descriptor.colorRampName)}static createDescriptor(colorRampName){return{type:constants["LAYER_STYLE_TYPE"].HEATMAP,colorRampName:colorRampName?colorRampName:DEFAULT_HEATMAP_COLOR_RAMP_NAME}}getType(){return constants["LAYER_STYLE_TYPE"].HEATMAP}renderEditor(onStyleDescriptorChange){const onHeatmapColorChange=({colorRampName:colorRampName})=>{const styleDescriptor=heatmap_style_HeatmapStyle.createDescriptor(colorRampName);onStyleDescriptorChange(styleDescriptor)};return external_kbnSharedDeps_React_default.a.createElement(HeatmapStyleEditor,{colorRampName:this._descriptor.colorRampName,onHeatmapColorChange:onHeatmapColorChange})}renderLegendDetails(field){return external_kbnSharedDeps_React_default.a.createElement(heatmap_legend_HeatmapLegend,{colorRampName:this._descriptor.colorRampName,field:field})}getIcon(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{size:"m",type:"heatmap"})}setMBPaintProperties({mbMap:mbMap,layerId:layerId,propertyName:propertyName,resolution:resolution}){let radius;if(resolution===constants["GRID_RESOLUTION"].COARSE){radius=128}else if(resolution===constants["GRID_RESOLUTION"].FINE){radius=64}else if(resolution===constants["GRID_RESOLUTION"].MOST_FINE){radius=32}else{const errorMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.style.heatmap.resolutionStyleErrorMessage",{defaultMessage:`Resolution param not recognized: {resolution}`,values:{resolution:resolution}});throw new Error(errorMessage)}mbMap.setPaintProperty(layerId,"heatmap-radius",radius);mbMap.setPaintProperty(layerId,"heatmap-weight",{type:"identity",property:propertyName});const colorStops=getOrdinalMbColorRampStops(this._descriptor.colorRampName,MIN_RANGE,MAX_RANGE);if(colorStops){mbMap.setPaintProperty(layerId,"heatmap-color",["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",...colorStops])}}}function heatmap_layer_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const SCALED_PROPERTY_NAME="__kbn_heatmap_weight__";class heatmap_layer_HeatmapLayer extends layer_AbstractLayer{static createDescriptor(options){const heatmapLayerDescriptor=super.createDescriptor(options);heatmapLayerDescriptor.type=heatmap_layer_HeatmapLayer.type;heatmapLayerDescriptor.style=heatmap_style_HeatmapStyle.createDescriptor();return heatmapLayerDescriptor}constructor({layerDescriptor:layerDescriptor,source:source}){super({layerDescriptor:layerDescriptor,source:source});heatmap_layer_defineProperty(this,"_style",void 0);if(!layerDescriptor.style){const defaultStyle=heatmap_style_HeatmapStyle.createDescriptor();this._style=new heatmap_style_HeatmapStyle(defaultStyle)}else{this._style=new heatmap_style_HeatmapStyle(layerDescriptor.style)}}destroy(){if(this.getSource()){this.getSource().destroy()}}getSource(){return super.getSource()}getStyleForEditing(){return this._style}getStyle(){return this._style}getCurrentStyle(){return this._style}_getPropKeyOfSelectedMetric(){const metricfields=this.getSource().getMetricFields();return metricfields[0].getName()}_getHeatmapLayerId(){return this.makeMbLayerId("heatmap")}getMbLayerIds(){return[this._getHeatmapLayerId()]}ownsMbLayerId(mbLayerId){return this._getHeatmapLayerId()===mbLayerId}ownsMbSourceId(mbSourceId){return this.getId()===mbSourceId}async syncData(syncContext){if(this.isLoadingBounds()){return}const sourceQuery=this.getQuery();try{await syncVectorSource({layerId:this.getId(),layerName:await this.getDisplayName(this.getSource()),prevDataRequest:this.getSourceDataRequest(),requestMeta:{...syncContext.dataFilters,fieldNames:this.getSource().getFieldNames(),geogridPrecision:this.getSource().getGeoGridPrecision(syncContext.dataFilters.zoom),sourceQuery:sourceQuery?sourceQuery:undefined,applyGlobalQuery:this.getSource().getApplyGlobalQuery(),applyGlobalTime:this.getSource().getApplyGlobalTime(),sourceMeta:this.getSource().getSyncMeta()},syncContext:syncContext,source:this.getSource()})}catch(error){if(!(error instanceof DataRequestAbortError)){throw error}}}syncLayerWithMB(mbMap){addGeoJsonMbSource(this._getMbSourceId(),this.getMbLayerIds(),mbMap);const heatmapLayerId=this._getHeatmapLayerId();if(!mbMap.getLayer(heatmapLayerId)){mbMap.addLayer({id:heatmapLayerId,type:"heatmap",source:this.getId(),paint:{}})}const mbGeoJSONSource=mbMap.getSource(this.getId());const sourceDataRequest=this.getSourceDataRequest();const featureCollection=sourceDataRequest?sourceDataRequest.getData():null;if(!featureCollection){mbGeoJSONSource.setData(constants["EMPTY_FEATURE_COLLECTION"]);return}const propertyKey=this._getPropKeyOfSelectedMetric();const dataBoundToMap=layer_AbstractLayer.getBoundDataForSource(mbMap,this.getId());if(featureCollection!==dataBoundToMap){let max=1;for(let i=0;i<featureCollection.features.length;i++){var _featureCollection$fe;max=Math.max((_featureCollection$fe=featureCollection.features[i].properties)===null||_featureCollection$fe===void 0?void 0:_featureCollection$fe[propertyKey],max)}for(let i=0;i<featureCollection.features.length;i++){if(featureCollection.features[i].properties){featureCollection.features[i].properties[SCALED_PROPERTY_NAME]=featureCollection.features[i].properties[propertyKey]/max}}mbGeoJSONSource.setData(featureCollection)}this.syncVisibilityWithMb(mbMap,heatmapLayerId);this.getCurrentStyle().setMBPaintProperties({mbMap:mbMap,layerId:heatmapLayerId,propertyName:SCALED_PROPERTY_NAME,resolution:this.getSource().getGridResolution()});mbMap.setPaintProperty(heatmapLayerId,"heatmap-opacity",this.getAlpha());mbMap.setLayerZoomRange(heatmapLayerId,this.getMinZoom(),this.getMaxZoom())}getLayerTypeIconName(){return"heatmap"}async getFields(){return this.getSource().getFields()}async hasLegendDetails(){return true}renderLegendDetails(){const metricFields=this.getSource().getMetricFields();return this.getCurrentStyle().renderLegendDetails(metricFields[0])}async getBounds(syncContext){return await getVectorSourceBounds({layerId:this.getId(),syncContext:syncContext,source:this.getSource(),sourceQuery:this.getQuery()})}async isFilteredByGlobalTime(){return this.getSource().getApplyGlobalTime()&&await this.getSource().isTimeAware()}getIndexPatternIds(){return this.getSource().getIndexPatternIds()}getQueryableIndexPatternIds(){return this.getSource().getQueryableIndexPatternIds()}async getLicensedFeatures(){return await this.getSource().getLicensedFeatures()}}heatmap_layer_defineProperty(heatmap_layer_HeatmapLayer,"type",constants["LAYER_TYPE"].HEATMAP);var rison=__webpack_require__(17);var rison_default=__webpack_require__.n(rison);function es_agg_utils_getField(indexPattern,fieldName){const field=indexPattern.fields.getByName(fieldName);if(!field){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.fieldNotFoundMsg",{defaultMessage:`Unable to find '{fieldName}' in index-pattern '{indexPatternTitle}'.`,values:{fieldName:fieldName,indexPatternTitle:indexPattern.title}}))}return field}function addFieldToDSL(dsl,field){return!field.scripted?{...dsl,field:field.name}:{...dsl,script:{source:field.script,lang:field.lang}}}function extractPropertiesFromBucket(bucket,ignoreKeys=[]){const properties={};for(const key in bucket){if(ignoreKeys.includes(key)||!bucket.hasOwnProperty(key)){continue}if(external_kbnSharedDeps_Lodash_default.a.has(bucket[key],"value")){properties[key]=bucket[key].value}else if(external_kbnSharedDeps_Lodash_default.a.has(bucket[key],"buckets")){if(bucket[key].buckets.length===0){continue}properties[key]=external_kbnSharedDeps_Lodash_default.a.get(bucket[key],"buckets[0].key");const topBucketCount=bucket[key].buckets[0].doc_count;const totalCount=bucket.doc_count;if(totalCount&&topBucketCount){properties[`${key}${constants["TOP_TERM_PERCENTAGE_SUFFIX"]}`]=Math.round(topBucketCount/totalCount*100)}}else{if(key.startsWith(constants["AGG_TYPE"].PERCENTILE)||key.startsWith(constants["JOIN_FIELD_NAME_PREFIX"]+constants["AGG_TYPE"].PERCENTILE)){const values=bucket[key].values;for(const k in values){if(values.hasOwnProperty(k)){properties[key]=values[k];break}}}else{properties[key]=bucket[key]}}}return properties}const ZOOM_TILE_KEY_INDEX=0;const X_TILE_KEY_INDEX=1;const Y_TILE_KEY_INDEX=2;function getTileCount(zoom){return Math.pow(2,zoom)}function parseTileKey(tileKey){const tileKeyParts=tileKey.split("/");if(tileKeyParts.length!==3){throw new Error(`Invalid tile key, expecting "zoom/x/y" format but got ${tileKey}`)}const zoom=parseInt(tileKeyParts[ZOOM_TILE_KEY_INDEX],10);const x=parseInt(tileKeyParts[X_TILE_KEY_INDEX],10);const y=parseInt(tileKeyParts[Y_TILE_KEY_INDEX],10);const tileCount=getTileCount(zoom);if(x>=tileCount){throw new Error(`Tile key is malformed, expected x to be less than ${tileCount}, you provided ${x}`)}if(y>=tileCount){throw new Error(`Tile key is malformed, expected y to be less than ${tileCount}, you provided ${y}`)}return{x:x,y:y,zoom:zoom,tileCount:tileCount}}function sinh(x){return(Math.exp(x)-Math.exp(-x))/2}function precisionRounding(v,minPrecision,binSize){let precision=Math.ceil(Math.abs(Math.log10(binSize)))+1;precision=Math.max(precision,minPrecision);return external_kbnSharedDeps_Lodash_default.a.round(v,precision)}function tile2long(x,z){const tileCount=getTileCount(z);return tileToLongitude(x,tileCount)}function tile2lat(y,z){const tileCount=getTileCount(z);return tileToLatitude(y,tileCount)}function tileToESBbox(x,y,z){const wLon=tile2long(x,z);const sLat=tile2lat(y+1,z);const eLon=tile2long(x+1,z);const nLat=tile2lat(y,z);return{top_left:{lon:wLon,lat:nLat},bottom_right:{lon:eLon,lat:sLat}}}function tileToLatitude(y,tileCount){const radians=Math.atan(sinh(Math.PI-2*Math.PI*y/tileCount));const lat=180/Math.PI*radians;return precisionRounding(lat,constants["DECIMAL_DEGREES_PRECISION"],180/tileCount)}function tileToLongitude(x,tileCount){const lon=x/tileCount*360-180;return precisionRounding(lon,constants["DECIMAL_DEGREES_PRECISION"],360/tileCount)}function getTileBoundingBox(tileKey){const{x:x,y:y,tileCount:tileCount}=parseTileKey(tileKey);return{top:tileToLatitude(y,tileCount),bottom:tileToLatitude(y+1,tileCount),left:tileToLongitude(x,tileCount),right:tileToLongitude(x+1,tileCount)}}function sec(value){return 1/Math.cos(value)}function latitudeToTile(lat,tileCount){const radians=clampToLatBounds(lat)*Math.PI/180;const y=(1-Math.log(Math.tan(radians)+sec(radians))/Math.PI)/2*tileCount;return Math.floor(y)}function longitudeToTile(lon,tileCount){const x=(lon+180)/360*tileCount;return Math.floor(x)}function expandToTileBoundaries(extent,zoom){const tileCount=getTileCount(zoom);const upperLeftX=longitudeToTile(extent.minLon,tileCount);const upperLeftY=latitudeToTile(Math.min(extent.maxLat,90),tileCount);const lowerRightX=longitudeToTile(extent.maxLon,tileCount);const lowerRightY=latitudeToTile(Math.max(extent.minLat,-90),tileCount);return{minLon:tileToLongitude(upperLeftX,tileCount),minLat:tileToLatitude(lowerRightY+1,tileCount),maxLon:tileToLongitude(lowerRightX+1,tileCount),maxLat:tileToLatitude(upperLeftY,tileCount)}}var wellknown=__webpack_require__(300);var i18n_getters=__webpack_require__(5);var common_=__webpack_require__(38);var _turf_circle=__webpack_require__(165);var circle_default=__webpack_require__.n(_turf_circle);const SPATIAL_FILTER_TYPE=common_["FILTERS"].SPATIAL_FILTER;function ensureGeoField(type){const expectedTypes=[constants["ES_GEO_FIELD_TYPE"].GEO_POINT,constants["ES_GEO_FIELD_TYPE"].GEO_SHAPE];if(!expectedTypes.includes(type)){const errorMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.es_geo_utils.unsupportedFieldTypeErrorMessage",{defaultMessage:"Unsupported field type, expected: {expectedTypes}, you provided: {fieldType}",values:{fieldType:type,expectedTypes:expectedTypes.join(",")}});throw new Error(errorMessage)}}function ensureGeometryType(type,expectedTypes){if(!expectedTypes.includes(type)){const errorMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.es_geo_utils.unsupportedGeometryTypeErrorMessage",{defaultMessage:"Unsupported geometry type, expected: {expectedTypes}, you provided: {geometryType}",values:{geometryType:type,expectedTypes:expectedTypes.join(",")}});throw new Error(errorMessage)}}function hitsToGeoJson(hits,flattenHit,geoFieldName,geoFieldType,epochMillisFields){const features=[];const tmpGeometriesAccumulator=[];for(let i=0;i<hits.length;i++){const properties=flattenHit(hits[i]);tmpGeometriesAccumulator.length=0;ensureGeoField(geoFieldType);if(geoFieldType===constants["ES_GEO_FIELD_TYPE"].GEO_POINT){geoPointToGeometry(properties[geoFieldName],tmpGeometriesAccumulator)}else{geoShapeToGeometry(properties[geoFieldName],tmpGeometriesAccumulator)}for(let i=0;i<epochMillisFields.length;i++){const fieldName=epochMillisFields[i];if(typeof properties[fieldName]==="string"){properties[fieldName]=parseInt(properties[fieldName])}}delete properties[geoFieldName];for(let j=0;j<tmpGeometriesAccumulator.length;j++){features.push({type:"Feature",geometry:tmpGeometriesAccumulator[j],id:`${properties._index}:${properties._id}:${j}`,properties:properties})}}return{type:"FeatureCollection",features:features}}function geoPointToGeometry(value,accumulator){if(!value){return}if(Array.isArray(value)){for(let i=0;i<value.length;i++){geoPointToGeometry(value[i],accumulator)}return}const commaSplit=value.split(",");const lat=parseFloat(commaSplit[0]);const lon=parseFloat(commaSplit[1]);accumulator.push({type:constants["GEO_JSON_TYPE"].POINT,coordinates:[lon,lat]})}function convertESShapeToGeojsonGeometry(value){const geoJson={type:value.type,coordinates:value.coordinates};switch(value.type){case"point":geoJson.type=constants["GEO_JSON_TYPE"].POINT;break;case"linestring":geoJson.type=constants["GEO_JSON_TYPE"].LINE_STRING;break;case"polygon":geoJson.type=constants["GEO_JSON_TYPE"].POLYGON;break;case"multipoint":geoJson.type=constants["GEO_JSON_TYPE"].MULTI_POINT;break;case"multilinestring":geoJson.type=constants["GEO_JSON_TYPE"].MULTI_LINE_STRING;break;case"multipolygon":geoJson.type=constants["GEO_JSON_TYPE"].MULTI_POLYGON;break;case"geometrycollection":case constants["GEO_JSON_TYPE"].GEOMETRY_COLLECTION:const invalidGeometrycollectionError=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.es_geo_utils.convert.invalidGeometryCollectionErrorMessage",{defaultMessage:`Should not pass GeometryCollection to convertESShapeToGeojsonGeometry`});throw new Error(invalidGeometrycollectionError);case"envelope":const polygon=formatEnvelopeAsPolygon({minLon:geoJson.coordinates[0][0],maxLon:geoJson.coordinates[1][0],minLat:geoJson.coordinates[1][1],maxLat:geoJson.coordinates[0][1]});geoJson.type=polygon.type;geoJson.coordinates=polygon.coordinates;break;case"circle":const errorMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.es_geo_utils.convert.unsupportedGeometryTypeErrorMessage",{defaultMessage:`Unable to convert {geometryType} geometry to geojson, not supported`,values:{geometryType:geoJson.type}});throw new Error(errorMessage)}return geoJson}function convertWKTStringToGeojson(value){try{return Object(wellknown["parse"])(value)}catch(e){const errorMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.es_geo_utils.wkt.invalidWKTErrorMessage",{defaultMessage:`Unable to convert {wkt} to geojson. Valid WKT expected.`,values:{wkt:value}});throw new Error(errorMessage)}}function geoShapeToGeometry(value,accumulator){if(!value){return}if(Array.isArray(value)){for(let i=0;i<value.length;i++){geoShapeToGeometry(value[i],accumulator)}return}if(typeof value==="string"){const geoJson=convertWKTStringToGeojson(value);accumulator.push(geoJson)}else if(value.type===constants["GEO_JSON_TYPE"].GEOMETRY_COLLECTION||value.type==="geometrycollection"){for(let i=0;i<value.geometries.length;i++){geoShapeToGeometry(value.geometries[i],accumulator)}}else{const geoJson=convertESShapeToGeojsonGeometry(value);accumulator.push(geoJson)}}function makeESBbox({maxLat:maxLat,maxLon:maxLon,minLat:minLat,minLon:minLon}){const bottom=clampToLatBounds(minLat);const top=clampToLatBounds(maxLat);let esBbox;if(maxLon-minLon>=360){esBbox={top_left:[-180,top],bottom_right:[180,bottom]}}else{const newMinlon=(minLon+180+360)%360-180;const newMaxlon=(maxLon+180+360)%360-180;esBbox={top_left:[newMinlon,top],bottom_right:[newMaxlon,bottom]}}return esBbox}function createGeoBoundBoxFilter({maxLat:maxLat,maxLon:maxLon,minLat:minLat,minLon:minLon},geoFieldName){const boundingBox=makeESBbox({maxLat:maxLat,maxLon:maxLon,minLat:minLat,minLon:minLon});return{geo_bounding_box:{[geoFieldName]:boundingBox}}}function createExtentFilter(mapExtent,geoFieldName,geoFieldType){ensureGeoField(geoFieldType);if(geoFieldType===constants["ES_GEO_FIELD_TYPE"].GEO_POINT){return createGeoBoundBoxFilter(mapExtent,geoFieldName)}return{geo_shape:{[geoFieldName]:{shape:formatEnvelopeAsPolygon(mapExtent),relation:constants["ES_SPATIAL_RELATIONS"].INTERSECTS}}}}function createSpatialFilterWithGeometry({preIndexedShape:preIndexedShape,geometry:geometry,geometryLabel:geometryLabel,indexPatternId:indexPatternId,geoFieldName:geoFieldName,geoFieldType:geoFieldType,relation:relation=constants["ES_SPATIAL_RELATIONS"].INTERSECTS}){ensureGeoField(geoFieldType);const isGeoPoint=geoFieldType===constants["ES_GEO_FIELD_TYPE"].GEO_POINT;const relationLabel=isGeoPoint?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.es_geo_utils.shapeFilter.geoPointRelationLabel",{defaultMessage:"in"}):Object(i18n_getters["c"])(relation);const meta={type:SPATIAL_FILTER_TYPE,negate:false,index:indexPatternId,key:geoFieldName,alias:`${geoFieldName} ${relationLabel} ${geometryLabel}`};const shapeQuery={relation:isGeoPoint?constants["ES_SPATIAL_RELATIONS"].INTERSECTS:relation};if(preIndexedShape){shapeQuery.indexed_shape=preIndexedShape}else{shapeQuery.shape=geometry}return{meta:meta,geo_shape:{ignore_unmapped:true,[geoFieldName]:shapeQuery}}}function createDistanceFilterWithMeta({alias:alias,distanceKm:distanceKm,geoFieldName:geoFieldName,indexPatternId:indexPatternId,point:point}){const meta={type:SPATIAL_FILTER_TYPE,negate:false,index:indexPatternId,key:geoFieldName,alias:alias?alias:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.es_geo_utils.distanceFilterAlias",{defaultMessage:"{geoFieldName} within {distanceKm}km of {pointLabel}",values:{distanceKm:distanceKm,geoFieldName:geoFieldName,pointLabel:point.join(", ")}})};return{geo_distance:{distance:`${distanceKm}km`,[geoFieldName]:point},meta:meta}}function roundCoordinates(coordinates){for(let i=0;i<coordinates.length;i++){const value=coordinates[i];if(Array.isArray(value)){roundCoordinates(value)}else if(!isNaN(value)){coordinates[i]=external_kbnSharedDeps_Lodash_default.a.round(value,constants["DECIMAL_DEGREES_PRECISION"])}}}function getBoundingBoxGeometry(geometry){ensureGeometryType(geometry.type,[constants["GEO_JSON_TYPE"].POLYGON]);const exterior=geometry.coordinates[constants["POLYGON_COORDINATES_EXTERIOR_INDEX"]];const extent={minLon:exterior[0][constants["LON_INDEX"]],minLat:exterior[0][constants["LAT_INDEX"]],maxLon:exterior[0][constants["LON_INDEX"]],maxLat:exterior[0][constants["LAT_INDEX"]]};for(let i=1;i<exterior.length;i++){extent.minLon=Math.min(exterior[i][constants["LON_INDEX"]],extent.minLon);extent.minLat=Math.min(exterior[i][constants["LAT_INDEX"]],extent.minLat);extent.maxLon=Math.max(exterior[i][constants["LON_INDEX"]],extent.maxLon);extent.maxLat=Math.max(exterior[i][constants["LAT_INDEX"]],extent.maxLat)}return formatEnvelopeAsPolygon(extent)}function formatEnvelopeAsPolygon({maxLat:maxLat,maxLon:maxLon,minLat:minLat,minLon:minLon}){const lonDelta=maxLon-minLon;const left=lonDelta>360?-180:minLon;const right=lonDelta>360?180:maxLon;const top=clampToLatBounds(maxLat);const bottom=clampToLatBounds(minLat);const topLeft=[left,top];const bottomLeft=[left,bottom];const bottomRight=[right,bottom];const topRight=[right,top];return{type:constants["GEO_JSON_TYPE"].POLYGON,coordinates:[[topLeft,bottomLeft,bottomRight,topRight,topLeft]]}}function clampToLatBounds(lat){return clamp(lat,-89,89)}function clampToLonBounds(lon){return clamp(lon,-180,180)}function clamp(val,min,max){if(val>max){return max}else if(val<min){return min}else{return val}}function extractFeaturesFromFilters(filters){const features=[];filters.filter(filter=>filter.meta.key&&filter.meta.type===SPATIAL_FILTER_TYPE).forEach(filter=>{let geometry;if(filter.geo_distance&&filter.geo_distance[filter.meta.key]){const distanceSplit=filter.geo_distance.distance.split("km");const distance=parseFloat(distanceSplit[0]);const circleFeature=circle_default()(filter.geo_distance[filter.meta.key],distance);geometry=circleFeature.geometry}else if(filter.geo_shape&&filter.geo_shape[filter.meta.key]&&filter.geo_shape[filter.meta.key].shape){geometry=filter.geo_shape[filter.meta.key].shape}else{return}features.push({type:"Feature",geometry:geometry,properties:{filter:filter.meta.alias}})});return features}function scaleBounds(bounds,scaleFactor){const width=bounds.maxLon-bounds.minLon;const height=bounds.maxLat-bounds.minLat;return{minLon:bounds.minLon-width*scaleFactor,minLat:bounds.minLat-height*scaleFactor,maxLon:bounds.maxLon+width*scaleFactor,maxLat:bounds.maxLat+height*scaleFactor}}function turfBboxToBounds(turfBbox){return{minLon:turfBbox[0],minLat:turfBbox[1],maxLon:turfBbox[2],maxLat:turfBbox[3]}}const GRID_BUCKET_KEYS_TO_IGNORE=["key",constants["GEOCENTROID_AGG_NAME"]];function convertCompositeRespToGeoJson(esResponse,renderAs){return convertToGeoJson(esResponse,renderAs,esResponse=>external_kbnSharedDeps_Lodash_default.a.get(esResponse,"aggregations.compositeSplit.buckets",[]),gridBucket=>gridBucket.key[constants["GEOTILE_GRID_AGG_NAME"]])}function convertRegularRespToGeoJson(esResponse,renderAs){return convertToGeoJson(esResponse,renderAs,esResponse=>external_kbnSharedDeps_Lodash_default.a.get(esResponse,`aggregations.${constants["GEOTILE_GRID_AGG_NAME"]}.buckets`,[]),gridBucket=>gridBucket.key)}function convertToGeoJson(esResponse,renderAs,pluckGridBuckets,pluckGridKey){const features=[];const gridBuckets=pluckGridBuckets(esResponse);for(let i=0;i<gridBuckets.length;i++){const gridBucket=gridBuckets[i];const gridKey=pluckGridKey(gridBucket);features.push({type:"Feature",geometry:rowToGeometry({gridKey:gridKey,[constants["GEOCENTROID_AGG_NAME"]]:gridBucket[constants["GEOCENTROID_AGG_NAME"]],renderAs:renderAs}),id:gridKey,properties:extractPropertiesFromBucket(gridBucket,GRID_BUCKET_KEYS_TO_IGNORE)})}return features}function rowToGeometry({gridKey:gridKey,gridCentroid:gridCentroid,renderAs:renderAs}){const{top:top,bottom:bottom,right:right,left:left}=getTileBoundingBox(gridKey);if(renderAs===constants["RENDER_AS"].GRID){return{type:"Polygon",coordinates:[[[right,top],[left,top],[left,bottom],[right,bottom],[right,top]]]}}const pointCoordinates=[clamp(gridCentroid.location.lon,left,right),clamp(gridCentroid.location.lat,bottom,top)];return{type:"Point",coordinates:pointCoordinates}}function metric_select_extends(){metric_select_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return metric_select_extends.apply(this,arguments)}const AGG_OPTIONS=[{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.metricSelect.averageDropDownOptionLabel",{defaultMessage:"Average"}),value:constants["AGG_TYPE"].AVG},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.metricSelect.countDropDownOptionLabel",{defaultMessage:"Count"}),value:constants["AGG_TYPE"].COUNT},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.metricSelect.maxDropDownOptionLabel",{defaultMessage:"Max"}),value:constants["AGG_TYPE"].MAX},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.metricSelect.minDropDownOptionLabel",{defaultMessage:"Min"}),value:constants["AGG_TYPE"].MIN},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.metricSelect.percentileDropDownOptionLabel",{defaultMessage:"Percentile"}),value:constants["AGG_TYPE"].PERCENTILE},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.metricSelect.sumDropDownOptionLabel",{defaultMessage:"Sum"}),value:constants["AGG_TYPE"].SUM},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.metricSelect.termsDropDownOptionLabel",{defaultMessage:"Top term"}),value:constants["AGG_TYPE"].TERMS},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.metricSelect.cardinalityDropDownOptionLabel",{defaultMessage:"Unique count"}),value:constants["AGG_TYPE"].UNIQUE_COUNT}];function MetricSelect({value:value,onChange:onChange,metricsFilter:metricsFilter,...rest}){function onAggChange(selectedOptions){if(selectedOptions.length===0){return}const aggType=selectedOptions[0].value;onChange(aggType)}const options=metricsFilter?AGG_OPTIONS.filter(metricsFilter):AGG_OPTIONS;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],metric_select_extends({placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.metricSelect.selectAggregationPlaceholder",{defaultMessage:"Select aggregation"}),singleSelection:true,isClearable:false,options:options,selectedOptions:AGG_OPTIONS.filter(option=>value===option.value),onChange:onAggChange},rest))}function single_field_select_extends(){single_field_select_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return single_field_select_extends.apply(this,arguments)}function fieldsToOptions(fields,isFieldDisabled){if(!fields){return[]}return fields.map(field=>{const option={value:field,label:field.displayName?field.displayName:field.name};if(isFieldDisabled&&isFieldDisabled(field)){option.disabled=true}return option}).sort((a,b)=>a.label.toLowerCase().localeCompare(b.label.toLowerCase()))}function SingleFieldSelect({fields:fields,getFieldDisabledReason:getFieldDisabledReason,isFieldDisabled:isFieldDisabled,onChange:onChange,value:value,...rest}){function renderOption(option,searchValue,contentClassName){const content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:contentClassName,gutterSize:"s",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:null},external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_["FieldIcon"],{type:option.value.type,fill:"none"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHighlight"],{search:searchValue},option.label)));const disabledReason=option.disabled&&getFieldDisabledReason?getFieldDisabledReason(option.value):null;return disabledReason?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"left",content:disabledReason},content):content}const onSelection=selectedOptions=>{onChange(external_kbnSharedDeps_Lodash_default.a.get(selectedOptions,"0.value.name"))};const selectedOptions=[];if(value&&fields){const selectedField=fields.find(field=>field.name===value);if(selectedField){selectedOptions.push({value:selectedField,label:selectedField.displayName?selectedField.displayName:selectedField.name})}}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],single_field_select_extends({singleSelection:true,options:fieldsToOptions(fields,isFieldDisabled),selectedOptions:selectedOptions,onChange:onSelection,isDisabled:!fields,renderOption:renderOption},rest))}function getGeoTileAggNotSupportedReason(field){if(!field.aggregatable){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.geoTileAgg.disabled.docValues",{defaultMessage:"Clustering requires aggregations. Enable aggregations by setting doc_values to true."})}if(field.type===constants["ES_GEO_FIELD_TYPE"].GEO_SHAPE&&!Object(licensed_features["c"])()){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.geoTileAgg.disabled.license",{defaultMessage:"Geo_shape clustering requires a Gold license."})}return null}async function getIndexPatternsFromIds(indexPatternIds=[]){const promises=[];indexPatternIds.forEach(async indexPatternId=>{try{promises.push(Object(kibana_services["p"])().get(indexPatternId))}catch(error){return null}});return await Promise.all(promises)}function getTermsFields(fields){return fields.filter(field=>field.aggregatable&&!data_public_["indexPatterns"].isNestedField(field)&&["number","boolean","date","ip","string"].includes(field.type))}function getAggregatableGeoFieldTypes(){const aggregatableFieldTypes=[constants["ES_GEO_FIELD_TYPE"].GEO_POINT];if(Object(licensed_features["c"])()){aggregatableFieldTypes.push(constants["ES_GEO_FIELD_TYPE"].GEO_SHAPE)}return aggregatableFieldTypes}function getGeoFields(fields){return fields.filter(field=>!data_public_["indexPatterns"].isNestedField(field)&&constants["ES_GEO_FIELD_TYPES"].includes(field.type))}function getGeoPointFields(fields){return fields.filter(field=>!data_public_["indexPatterns"].isNestedField(field)&&constants["ES_GEO_FIELD_TYPE"].GEO_POINT===field.type)}function getFieldsWithGeoTileAgg(fields){return fields.filter(supportsGeoTileAgg)}function supportsGeoTileAgg(field){return!!field&&!!field.aggregatable&&!data_public_["indexPatterns"].isNestedField(field)&&getAggregatableGeoFieldTypes().includes(field.type)}function getSourceFields(fields){return fields.filter(field=>{const isMultiField=field.subType&&field.subType.multi;return!isMultiField&&!data_public_["indexPatterns"].isNestedField(field)})}function validated_number_input_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getErrorMessage(min,max){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.validatedNumberInput.invalidClampErrorMessage",{defaultMessage:"Must be between {min} and {max}",values:{min:min,max:max}})}function isNumberValid(value,min,max){const parsedValue=parseFloat(value.toString());if(isNaN(parsedValue)){return{isValid:false,errorMessage:getErrorMessage(min,max)}}const isValid=parsedValue>=min&&parsedValue<=max;return{parsedValue:parsedValue,isValid:isValid,errorMessage:isValid?"":getErrorMessage(min,max)}}class validated_number_input_ValidatedNumberInput extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);validated_number_input_defineProperty(this,"_submit",external_kbnSharedDeps_Lodash_default.a.debounce(value=>{this.props.onChange(value)},250));validated_number_input_defineProperty(this,"_onChange",e=>{const value=e.target.value;const{isValid:isValid,errorMessage:errorMessage,parsedValue:parsedValue}=isNumberValid(value,this.props.min,this.props.max);this.setState({value:value,errorMessage:errorMessage,isValid:isValid});if(isValid){this._submit(parsedValue)}});const{isValid:_isValid,errorMessage:_errorMessage}=isNumberValid(props.initialValue,this.props.min,this.props.max);this.state={value:props.initialValue,errorMessage:_errorMessage,isValid:_isValid}}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:this.props.label,isInvalid:!this.state.isValid,error:this.state.errorMessage?[this.state.errorMessage]:[],display:this.props.display,helpText:this.props.helpText},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{isInvalid:!this.state.isValid,min:this.props.min,max:this.props.max,value:this.state.value,onChange:this._onChange,"aria-label":`${this.props.label} number input`}))}}function filterFieldsForAgg(fields,aggType){if(!fields){return[]}if(aggType===constants["AGG_TYPE"].UNIQUE_COUNT||aggType===constants["AGG_TYPE"].TERMS){return getTermsFields(fields)}const metricAggFieldTypes=["number"];if(aggType!==constants["AGG_TYPE"].SUM){metricAggFieldTypes.push("date")}return fields.filter(field=>field.aggregatable&&metricAggFieldTypes.includes(field.type))}function MetricEditor({fields:fields,metricsFilter:metricsFilter,metric:metric,onChange:onChange,showRemoveButton:showRemoveButton,onRemove:onRemove}){const onAggChange=metricAggregationType=>{if(!metricAggregationType){return}const descriptor={type:metricAggregationType,label:metric.label};if(metricAggregationType===constants["AGG_TYPE"].COUNT||!("field"in metric)||!metric.field){onChange(descriptor);return}const fieldsForNewAggType=filterFieldsForAgg(fields,metricAggregationType);const found=fieldsForNewAggType.find(field=>field.name===metric.field);const newDescriptor={...descriptor,field:found?metric.field:undefined};if(metricAggregationType===constants["AGG_TYPE"].PERCENTILE){onChange({...newDescriptor,percentile:"percentile"in metric?metric.percentile:constants["DEFAULT_PERCENTILE"]})}else{onChange(newDescriptor)}};const onFieldChange=fieldName=>{if(!fieldName||metric.type===constants["AGG_TYPE"].COUNT){return}onChange({label:metric.label,type:metric.type,field:fieldName})};const onPercentileChange=percentile=>{if(metric.type!==constants["AGG_TYPE"].PERCENTILE){return}onChange({...metric,percentile:percentile})};const onLabelChange=e=>{onChange({...metric,label:e.target.value})};let fieldSelect;if(metric.type&&metric.type!==constants["AGG_TYPE"].COUNT){const showErrors=metric.field===undefined;fieldSelect=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.metricsEditor.selectFieldLabel",{defaultMessage:"Field"}),display:"columnCompressed",isInvalid:showErrors,error:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.metricsEditor.selectFieldError",{defaultMessage:"Field required for aggregation"})},external_kbnSharedDeps_React_default.a.createElement(SingleFieldSelect,{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.metricsEditor.selectFieldPlaceholder",{defaultMessage:"Select field"}),value:metric.field?metric.field:null,onChange:onFieldChange,fields:filterFieldsForAgg(fields,metric.type),isClearable:false,isInvalid:showErrors,compressed:true}))}let percentileSelect;if(metric.type===constants["AGG_TYPE"].PERCENTILE){const label=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.metricsEditor.selectPercentileLabel",{defaultMessage:"Percentile"});percentileSelect=external_kbnSharedDeps_React_default.a.createElement(validated_number_input_ValidatedNumberInput,{min:0,max:100,onChange:onPercentileChange,label:label,initialValue:typeof metric.percentile==="number"?metric.percentile:constants["DEFAULT_PERCENTILE"],display:"columnCompressed"})}let labelInput;if(metric.type){labelInput=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.metricsEditor.customLabel",{defaultMessage:"Custom label"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{onChange:onLabelChange,value:metric.label?metric.label:"",compressed:true}))}let removeButton;if(showRemoveButton){removeButton=external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapMetricEditorPanel__metricRemoveButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"trash",size:"xs",color:"danger",onClick:onRemove,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.metricsEditor.deleteMetricAriaLabel",{defaultMessage:"Delete metric"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.metricsEditor.deleteMetricButtonLabel",defaultMessage:"Delete metric"})))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.metricsEditor.aggregationLabel",{defaultMessage:"Aggregation"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(MetricSelect,{onChange:onAggChange,value:metric.type,metricsFilter:metricsFilter,compressed:true})),fieldSelect,percentileSelect,labelInput,removeButton)}var topojson_client=__webpack_require__(301);var tooltip_property=__webpack_require__(16);function source_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class source_AbstractSource{constructor(descriptor,inspectorAdapters){source_defineProperty(this,"_descriptor",void 0);source_defineProperty(this,"_inspectorAdapters",void 0);this._descriptor=descriptor;this._inspectorAdapters=inspectorAdapters}destroy(){}cloneDescriptor(){return copyPersistentState(this._descriptor)}async supportsFitToBounds(){return true}async getImmutableProperties(){return[]}getInspectorAdapters(){return this._inspectorAdapters}async getDisplayName(){return""}async getAttributions(){return[]}isFieldAware(){return false}isRefreshTimerAware(){return false}isGeoGridPrecisionAware(){return false}isQueryAware(){return false}getFieldNames(){return[]}renderSourceSettingsEditor(sourceEditorArgs){return null}getApplyGlobalQuery(){return false}getApplyGlobalTime(){return false}getIndexPatternIds(){return[]}getQueryableIndexPatternIds(){return[]}getGeoGridPrecision(zoom){return 0}showJoinEditor(){return false}getJoinsDisabledReason(){return null}isESSource(){return false}async getPreIndexedShape(properties){return null}async createFieldFormatter(field){return null}async getValueSuggestions(field,query){return[]}async isTimeAware(){return false}isFilterByMapBounds(){return false}getMinZoom(){return constants["MIN_ZOOM"]}getMaxZoom(){return constants["MAX_ZOOM"]}async getLicensedFeatures(){return[]}}class vector_source_AbstractVectorSource extends source_AbstractSource{static async getGeoJson({format:format,featureCollectionPath:featureCollectionPath,fetchUrl:fetchUrl}){let fetchedJson;try{const response=await fetch(fetchUrl);if(!response.ok){throw new Error("Request failed")}fetchedJson=await response.json()}catch(e){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.vetorSource.requestFailedErrorMessage",{defaultMessage:`Unable to fetch vector shapes from url: {fetchUrl}`,values:{fetchUrl:fetchUrl}}))}if(format===constants["FORMAT_TYPE"].GEOJSON){return fetchedJson}if(format===constants["FORMAT_TYPE"].TOPOJSON){const features=external_kbnSharedDeps_Lodash_default.a.get(fetchedJson,`objects.${featureCollectionPath}`);return topojson_client["feature"](fetchedJson,features)}throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.vetorSource.formatErrorMessage",{defaultMessage:`Unable to fetch vector shapes from url: {format}`,values:{format:format}}))}getFieldNames(){return[]}createField({fieldName:fieldName}){throw new Error("Not implemented")}getFieldByName(fieldName){return this.createField({fieldName:fieldName})}isFilterByMapBounds(){return false}isBoundsAware(){return false}async getBoundsForFilters(boundsFilters,registerCancelCallback){return null}async getFields(){return[]}async getLeftJoinFields(){return[]}async getGeoJsonWithMeta(layerName,searchFilters,registerCancelCallback,isRequestStillActive){throw new Error("Should implement VectorSource#getGeoJson")}canFormatFeatureProperties(){return false}async getTooltipProperties(properties){const tooltipProperties=[];for(const key in properties){if(key.startsWith("__kbn")){continue}tooltipProperties.push(new tooltip_property["b"](key,key,properties[key]))}return tooltipProperties}async isTimeAware(){return false}showJoinEditor(){return true}async getSupportedShapeTypes(){return[constants["VECTOR_SHAPE_TYPE"].POINT,constants["VECTOR_SHAPE_TYPE"].LINE,constants["VECTOR_SHAPE_TYPE"].POLYGON]}getSourceTooltipContent(sourceDataRequest){return{tooltipContent:null,areResultsTrimmed:false}}getSyncMeta(){return null}}function isValidStringConfig(value){return typeof value==="string"&&value!==""}function es_source_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function isSearchSourceAbortError(error){return error.name==="AbortError"}class es_source_AbstractESSource extends vector_source_AbstractVectorSource{static createDescriptor(descriptor){if(!isValidStringConfig(descriptor.indexPatternId)){throw new Error("Cannot create AbstractESSourceDescriptor when indexPatternId is not provided")}return{...descriptor,id:isValidStringConfig(descriptor.id)?descriptor.id:v4_default()(),type:isValidStringConfig(descriptor.type)?descriptor.type:"",indexPatternId:descriptor.indexPatternId,applyGlobalQuery:typeof descriptor.applyGlobalQuery!=="undefined"?descriptor.applyGlobalQuery:true,applyGlobalTime:typeof descriptor.applyGlobalTime!=="undefined"?descriptor.applyGlobalTime:true}}constructor(descriptor,inspectorAdapters){super(es_source_AbstractESSource.createDescriptor(descriptor),inspectorAdapters);es_source_defineProperty(this,"indexPattern",void 0);es_source_defineProperty(this,"_descriptor",void 0);es_source_defineProperty(this,"getValueSuggestions",async(field,query)=>{try{const indexPattern=await this.getIndexPattern();const indexPatternField=indexPattern.fields.getByName(field.getRootName());return await Object(kibana_services["a"])().getValueSuggestions({indexPattern:indexPattern,field:indexPatternField,query:query})}catch(error){console.warn(`Unable to fetch suggestions for field: ${field.getRootName()}, query: ${query}, error: ${error.message}`);return[]}});this._descriptor=descriptor}getId(){return this._descriptor.id}getApplyGlobalQuery(){return this._descriptor.applyGlobalQuery}getApplyGlobalTime(){return this._descriptor.applyGlobalTime}isFieldAware(){return true}isRefreshTimerAware(){return true}isQueryAware(){return true}getIndexPatternIds(){return[this.getIndexPatternId()]}getQueryableIndexPatternIds(){if(this.getApplyGlobalQuery()){return[this.getIndexPatternId()]}return[]}isESSource(){return true}destroy(){const inspectorAdapters=this.getInspectorAdapters();if(inspectorAdapters!==null&&inspectorAdapters!==void 0&&inspectorAdapters.requests){inspectorAdapters.requests.resetRequest(this.getId())}}cloneDescriptor(){const clonedDescriptor=copyPersistentState(this._descriptor);clonedDescriptor.id=v4_default()();return clonedDescriptor}async _runEsQuery({registerCancelCallback:registerCancelCallback,requestDescription:requestDescription,requestId:requestId,requestName:requestName,searchSessionId:searchSessionId,searchSource:searchSource}){const abortController=new AbortController;registerCancelCallback(()=>abortController.abort());const inspectorAdapters=this.getInspectorAdapters();let inspectorRequest;if(inspectorAdapters!==null&&inspectorAdapters!==void 0&&inspectorAdapters.requests){inspectorRequest=inspectorAdapters.requests.start(requestName,{id:requestId,description:requestDescription,searchSessionId:searchSessionId})}let resp;try{if(inspectorRequest){const requestStats=data_public_["search"].getRequestInspectorStats(searchSource);inspectorRequest.stats(requestStats);searchSource.getSearchRequestBody().then(body=>{if(inspectorRequest){inspectorRequest.json(body)}})}resp=await searchSource.fetch({abortSignal:abortController.signal,sessionId:searchSessionId});if(inspectorRequest){const responseStats=data_public_["search"].getResponseInspectorStats(resp,searchSource);inspectorRequest.stats(responseStats).ok({json:resp})}}catch(error){if(inspectorRequest){inspectorRequest.error(error)}if(isSearchSourceAbortError(error)){throw new DataRequestAbortError}throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSource.requestFailedErrorMessage",{defaultMessage:`Elasticsearch search request failed, error: {message}`,values:{message:error.message}}))}return resp}async makeSearchSource(searchFilters,limit,initialSearchContext){const indexPattern=await this.getIndexPattern();const globalFilters=searchFilters.applyGlobalQuery?searchFilters.filters:[];const allFilters=[...globalFilters];if(this.isFilterByMapBounds()&&"buffer"in searchFilters&&searchFilters.buffer){const geoField=await this._getGeoField();const buffer=this.isGeoGridPrecisionAware()&&"geogridPrecision"in searchFilters&&typeof searchFilters.geogridPrecision==="number"?expandToTileBoundaries(searchFilters.buffer,searchFilters.geogridPrecision):searchFilters.buffer;const extentFilter=createExtentFilter(buffer,geoField.name,geoField.type);allFilters.push(extentFilter)}if(searchFilters.applyGlobalTime&&await this.isTimeAware()){const filter=Object(kibana_services["J"])().createFilter(indexPattern,searchFilters.timeFilters);if(filter){allFilters.push(filter)}}const searchService=Object(kibana_services["F"])();const searchSource=await searchService.searchSource.create(initialSearchContext);searchSource.setField("index",indexPattern);searchSource.setField("size",limit);searchSource.setField("filter",allFilters);if(searchFilters.applyGlobalQuery){searchSource.setField("query",searchFilters.query)}if(searchFilters.sourceQuery){const layerSearchSource=searchService.searchSource.createEmpty();layerSearchSource.setField("index",indexPattern);layerSearchSource.setField("query",searchFilters.sourceQuery);searchSource.setParent(layerSearchSource)}return searchSource}async getBoundsForFilters(boundsFilters,registerCancelCallback){const searchSource=await this.makeSearchSource(boundsFilters,0);searchSource.setField("aggs",{fitToBounds:{geo_bounds:{field:this.getGeoFieldName()}}});let esBounds;try{const abortController=new AbortController;registerCancelCallback(()=>abortController.abort());const esResp=await searchSource.fetch({abortSignal:abortController.signal});if(!esResp.aggregations.fitToBounds.bounds){return null}esBounds=esResp.aggregations.fitToBounds.bounds}catch(error){if(error.name==="AbortError"){throw new DataRequestAbortError}return null}const minLon=esBounds.top_left.lon;const maxLon=esBounds.bottom_right.lon;return{minLon:minLon>maxLon?minLon-360:minLon,maxLon:maxLon,minLat:esBounds.bottom_right.lat,maxLat:esBounds.top_left.lat}}async isTimeAware(){try{const indexPattern=await this.getIndexPattern();const timeField=indexPattern.timeFieldName;return!!timeField}catch(error){return false}}getIndexPatternId(){return this._descriptor.indexPatternId}getGeoFieldName(){if(!this._descriptor.geoField){throw new Error("Should not call")}return this._descriptor.geoField}async getIndexPattern(){if(this.indexPattern){return this.indexPattern}try{this.indexPattern=await Object(kibana_services["p"])().get(this.getIndexPatternId());return this.indexPattern}catch(error){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSource.noIndexPatternErrorMessage",{defaultMessage:`Unable to find Index pattern for id: {indexPatternId}`,values:{indexPatternId:this.getIndexPatternId()}}))}}async supportsFitToBounds(){try{const geoField=await this._getGeoField();return!!geoField.aggregatable}catch(error){return false}}async _getGeoField(){const indexPattern=await this.getIndexPattern();const geoField=indexPattern.fields.getByName(this.getGeoFieldName());if(!geoField){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSource.noGeoFieldErrorMessage",{defaultMessage:`Index pattern {indexPatternTitle} no longer contains the geo field {geoField}`,values:{indexPatternTitle:indexPattern.title,geoField:this.getGeoFieldName()}}))}return geoField}async getDisplayName(){try{const indexPattern=await this.getIndexPattern();return indexPattern.title}catch(error){return this.getIndexPatternId()}}isBoundsAware(){return true}async createFieldFormatter(field){let indexPattern;try{indexPattern=await this.getIndexPattern()}catch(error){return null}const fieldFromIndexPattern=indexPattern.fields.getByName(field.getRootName());if(!fieldFromIndexPattern){return null}return indexPattern.getFormatterForField(fieldFromIndexPattern).getConverterFor("text")}async loadStylePropsMeta({layerName:layerName,style:style,dynamicStyleProps:dynamicStyleProps,registerCancelCallback:registerCancelCallback,sourceQuery:sourceQuery,timeFilters:timeFilters,searchSessionId:searchSessionId}){const promises=dynamicStyleProps.map(dynamicStyleProp=>dynamicStyleProp.getFieldMetaRequest());const fieldAggRequests=await Promise.all(promises);const allAggs=fieldAggRequests.reduce((aggs,fieldAggRequest)=>fieldAggRequest?{...aggs,...fieldAggRequest}:aggs,{});const indexPattern=await this.getIndexPattern();const searchService=Object(kibana_services["F"])();const searchSource=searchService.searchSource.createEmpty();searchSource.setField("index",indexPattern);searchSource.setField("size",0);searchSource.setField("aggs",allAggs);if(sourceQuery){searchSource.setField("query",sourceQuery)}if(style.isTimeAware()&&await this.isTimeAware()){const timeFilter=Object(kibana_services["J"])().createFilter(indexPattern,timeFilters);if(timeFilter){searchSource.setField("filter",[timeFilter])}}const resp=await this._runEsQuery({requestId:`${this.getId()}_styleMeta`,requestName:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSource.stylePropsMetaRequestName",{defaultMessage:"{layerName} - metadata",values:{layerName:layerName}}),searchSource:searchSource,registerCancelCallback:registerCancelCallback,requestDescription:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSource.stylePropsMetaRequestDescription",{defaultMessage:"Elasticsearch request retrieving field metadata used for calculating symbolization bands."}),searchSessionId:searchSessionId});return resp.aggregations}}function es_tooltip_property_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class es_tooltip_property_ESTooltipProperty{constructor(tooltipProperty,indexPattern,field){es_tooltip_property_defineProperty(this,"_tooltipProperty",void 0);es_tooltip_property_defineProperty(this,"_indexPattern",void 0);es_tooltip_property_defineProperty(this,"_field",void 0);this._tooltipProperty=tooltipProperty;this._indexPattern=indexPattern;this._field=field}getPropertyKey(){return this._tooltipProperty.getPropertyKey()}getPropertyName(){return this._tooltipProperty.getPropertyName()}getRawValue(){return this._tooltipProperty.getRawValue()}_getIndexPatternField(){return this._indexPattern.fields.getByName(this._field.getRootName())}getHtmlDisplayValue(){if(typeof this.getRawValue()==="undefined"){return"-"}const indexPatternField=this._getIndexPatternField();if(!indexPatternField||!this._field.canValueBeFormatted()){const rawValue=this.getRawValue();if(Array.isArray(rawValue)){return external_kbnSharedDeps_Lodash_default.a.escape(rawValue.join())}else{return external_kbnSharedDeps_Lodash_default.a.escape(rawValue)}}const formatter=this._indexPattern.getFormatterForField(indexPatternField);const htmlConverter=formatter.getConverterFor("html");return htmlConverter?htmlConverter(this.getRawValue()):formatter.convert(this.getRawValue())}isFilterable(){const indexPatternField=this._getIndexPatternField();return!!indexPatternField&&(indexPatternField.type==="string"||indexPatternField.type==="date"||indexPatternField.type==="ip"||indexPatternField.type==="number")}async getESFilters(){const indexPatternField=this._getIndexPatternField();if(!indexPatternField){return[]}const value=this.getRawValue();if(value==null){const existsFilter=data_public_["esFilters"].buildExistsFilter(indexPatternField,this._indexPattern);existsFilter.meta.negate=true;return[existsFilter]}else{return[data_public_["esFilters"].buildPhraseFilter(indexPatternField,value,this._indexPattern)]}}}function field_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class field_AbstractField{constructor({fieldName:fieldName,origin:origin}){field_defineProperty(this,"_fieldName",void 0);field_defineProperty(this,"_origin",void 0);this._fieldName=fieldName;this._origin=origin||constants["FIELD_ORIGIN"].SOURCE}getName(){return this._fieldName}getRootName(){return this.getName()}canValueBeFormatted(){return false}getSource(){throw new Error("must implement Field#getSource")}isValid(){return!!this._fieldName}async getDataType(){return"string"}async getLabel(){return this._fieldName}async createTooltipProperty(value){const label=await this.getLabel();return new tooltip_property["b"](this.getName(),label,value)}getOrigin(){return this._origin}supportsFieldMeta(){return false}async getExtendedStatsFieldMetaRequest(){return null}async getPercentilesFieldMetaRequest(percentiles){return null}async getCategoricalFieldMetaRequest(size){return null}supportsAutoDomain(){return true}canReadFromGeoJson(){return true}isEqual(field){return this._origin===field.getOrigin()&&this._fieldName===field.getName()}}function es_doc_field_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class es_doc_field_ESDocField extends field_AbstractField{constructor({fieldName:fieldName,source:source,origin:origin,canReadFromGeoJson:canReadFromGeoJson=true}){super({fieldName:fieldName,origin:origin});es_doc_field_defineProperty(this,"_source",void 0);es_doc_field_defineProperty(this,"_canReadFromGeoJson",void 0);this._source=source;this._canReadFromGeoJson=canReadFromGeoJson}canValueBeFormatted(){return true}getSource(){return this._source}async _getIndexPatternField(){const indexPattern=await this._source.getIndexPattern();const indexPatternField=indexPattern.fields.getByName(this.getName());return indexPatternField&&data_public_["indexPatterns"].isNestedField(indexPatternField)?undefined:indexPatternField}async createTooltipProperty(value){const indexPattern=await this._source.getIndexPattern();const tooltipProperty=new tooltip_property["b"](this.getName(),await this.getLabel(),value);return new es_tooltip_property_ESTooltipProperty(tooltipProperty,indexPattern,this)}async getDataType(){const indexPatternField=await this._getIndexPatternField();return indexPatternField?indexPatternField.type:""}async getLabel(){const indexPatternField=await this._getIndexPatternField();return indexPatternField&&indexPatternField.displayName?indexPatternField.displayName:super.getLabel()}supportsFieldMeta(){return true}canReadFromGeoJson(){return this._canReadFromGeoJson}async getExtendedStatsFieldMetaRequest(){const indexPatternField=await this._getIndexPatternField();if(!indexPatternField||indexPatternField.type!=="number"&&indexPatternField.type!=="date"){return null}const metricAggConfig={};if(indexPatternField.scripted){metricAggConfig.script={source:indexPatternField.script,lang:indexPatternField.lang}}else{metricAggConfig.field=this.getName()}return{[`${this.getName()}_range`]:{extended_stats:metricAggConfig}}}async getPercentilesFieldMetaRequest(percentiles){const indexPatternField=await this._getIndexPatternField();if(!indexPatternField||indexPatternField.type!=="number"){return null}const metricAggConfig={percents:[0,...percentiles]};if(indexPatternField.scripted){metricAggConfig.script={source:indexPatternField.script,lang:indexPatternField.lang}}else{metricAggConfig.field=this.getName()}return{[`${this.getName()}_percentiles`]:{percentiles:metricAggConfig}}}async getCategoricalFieldMetaRequest(size){const indexPatternField=await this._getIndexPatternField();if(!indexPatternField||size<=0){return null}const topTerms={size:size-1};if(indexPatternField.scripted){topTerms.script={source:indexPatternField.script,lang:indexPatternField.lang}}else{topTerms.field=this.getName()}return{[`${this.getName()}_terms`]:{terms:topTerms}}}}function top_term_percentage_field_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class top_term_percentage_field_TopTermPercentageField{constructor(topTermAggField,canReadFromGeoJson=true){top_term_percentage_field_defineProperty(this,"_topTermAggField",void 0);top_term_percentage_field_defineProperty(this,"_canReadFromGeoJson",void 0);this._topTermAggField=topTermAggField;this._canReadFromGeoJson=canReadFromGeoJson}getSource(){return this._topTermAggField.getSource()}getOrigin(){return this._topTermAggField.getOrigin()}getName(){return`${this._topTermAggField.getName()}${constants["TOP_TERM_PERCENTAGE_SUFFIX"]}`}getRootName(){return""}async getLabel(){const baseLabel=await this._topTermAggField.getLabel();return`${baseLabel}%`}isValid(){return this._topTermAggField.isValid()}async getDataType(){return"number"}async createTooltipProperty(value){return new tooltip_property["b"](this.getName(),await this.getLabel(),value)}getValueAggDsl(){return null}getBucketCount(){return 0}supportsAutoDomain(){return this._canReadFromGeoJson}supportsFieldMeta(){return false}async getExtendedStatsFieldMetaRequest(){return null}async getPercentilesFieldMetaRequest(percentiles){return null}async getCategoricalFieldMetaRequest(){return null}canValueBeFormatted(){return false}canReadFromGeoJson(){return this._canReadFromGeoJson}isEqual(field){return field.getName()===this.getName()}}function es_agg_tooltip_property_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class es_agg_tooltip_property_ESAggTooltipProperty extends es_tooltip_property_ESTooltipProperty{constructor(tooltipProperty,indexPattern,field,aggType){super(tooltipProperty,indexPattern,field);es_agg_tooltip_property_defineProperty(this,"_aggType",void 0);this._aggType=aggType}isFilterable(){return this._aggType===constants["AGG_TYPE"].TERMS}}function count_agg_field_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class count_agg_field_CountAggField{constructor({label:label,source:source,origin:origin,canReadFromGeoJson:canReadFromGeoJson=true}){count_agg_field_defineProperty(this,"_source",void 0);count_agg_field_defineProperty(this,"_origin",void 0);count_agg_field_defineProperty(this,"_label",void 0);count_agg_field_defineProperty(this,"_canReadFromGeoJson",void 0);this._source=source;this._origin=origin;this._label=label;this._canReadFromGeoJson=canReadFromGeoJson}_getAggType(){return constants["AGG_TYPE"].COUNT}getSource(){return this._source}getOrigin(){return this._origin}getName(){return this._source.getAggKey(this._getAggType(),this.getRootName())}getRootName(){return""}async getLabel(){return this._label?this._label:this._source.getAggLabel(constants["AGG_TYPE"].COUNT,"")}isValid(){return true}async getDataType(){return"number"}async createTooltipProperty(value){const indexPattern=await this._source.getIndexPattern();const tooltipProperty=new tooltip_property["b"](this.getName(),await this.getLabel(),value);return new es_agg_tooltip_property_ESAggTooltipProperty(tooltipProperty,indexPattern,this,this._getAggType())}getValueAggDsl(indexPattern){return null}supportsFieldMeta(){return false}getBucketCount(){return 0}canValueBeFormatted(){return false}async getExtendedStatsFieldMetaRequest(){return null}async getPercentilesFieldMetaRequest(percentiles){return null}async getCategoricalFieldMetaRequest(size){return null}supportsAutoDomain(){return this._canReadFromGeoJson?true:this.supportsFieldMeta()}canReadFromGeoJson(){return this._canReadFromGeoJson}isEqual(field){return field.getName()===this.getName()}}function isMetricCountable(aggType){return[constants["AGG_TYPE"].COUNT,constants["AGG_TYPE"].SUM,constants["AGG_TYPE"].UNIQUE_COUNT].includes(aggType)}function agg_field_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const TERMS_AGG_SHARD_SIZE=5;class agg_field_AggField extends count_agg_field_CountAggField{constructor(params){super(params);agg_field_defineProperty(this,"_esDocField",void 0);agg_field_defineProperty(this,"_aggType",void 0);this._esDocField=params.esDocField;this._aggType=params.aggType}isValid(){return!!this._esDocField}supportsFieldMeta(){return!isMetricCountable(this._getAggType())}canValueBeFormatted(){return this._getAggType()!==constants["AGG_TYPE"].UNIQUE_COUNT}_getAggType(){return this._aggType}getValueAggDsl(indexPattern){const field=es_agg_utils_getField(indexPattern,this.getRootName());const aggType=this._getAggType();const aggBody=aggType===constants["AGG_TYPE"].TERMS?{size:1,shard_size:TERMS_AGG_SHARD_SIZE}:{};return{[aggType]:addFieldToDSL(aggBody,field)}}getRootName(){return this._esDocField?this._esDocField.getName():""}async getLabel(){return this._label?this._label:this._source.getAggLabel(this._aggType,this._esDocField?await this._esDocField.getLabel():"")}async getDataType(){return this._getAggType()===constants["AGG_TYPE"].TERMS?"string":"number"}getBucketCount(){return this._getAggType()===constants["AGG_TYPE"].TERMS?TERMS_AGG_SHARD_SIZE:0}async getExtendedStatsFieldMetaRequest(){return this._esDocField?await this._esDocField.getExtendedStatsFieldMetaRequest():null}async getPercentilesFieldMetaRequest(percentiles){return this._esDocField?await this._esDocField.getPercentilesFieldMetaRequest(percentiles):null}async getCategoricalFieldMetaRequest(size){return this._esDocField?await this._esDocField.getCategoricalFieldMetaRequest(size):null}}function percentile_agg_field_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class percentile_agg_field_PercentileAggField extends agg_field_AggField{constructor(params){super({...params,...{aggType:constants["AGG_TYPE"].PERCENTILE}});percentile_agg_field_defineProperty(this,"_percentile",void 0);this._percentile=params.percentile}supportsFieldMeta(){return true}canValueBeFormatted(){return true}async getLabel(){if(this._label){return this._label}if(this._percentile===50){const median=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.fields.percentileMedianLabek",{defaultMessage:"median"});return`${median} ${this.getRootName()}`}const suffix=getOrdinalSuffix(this._percentile);return`${this._percentile}${suffix} ${this._source.getAggLabel(this._getAggType(),this.getRootName())}`}getName(){return`${super.getName()}_${this._percentile}`}getValueAggDsl(indexPattern){const field=es_agg_utils_getField(indexPattern,this.getRootName());const dsl=addFieldToDSL({},field);dsl.percents=[this._percentile];return{percentiles:dsl}}}function esAggFieldsFactory(aggDescriptor,source,origin,canReadFromGeoJson=true){let aggField;if(aggDescriptor.type===constants["AGG_TYPE"].COUNT){aggField=new count_agg_field_CountAggField({label:aggDescriptor.label,source:source,origin:origin,canReadFromGeoJson:canReadFromGeoJson})}else if(aggDescriptor.type===constants["AGG_TYPE"].PERCENTILE){aggField=new percentile_agg_field_PercentileAggField({label:aggDescriptor.label,esDocField:"field"in aggDescriptor&&aggDescriptor.field?new es_doc_field_ESDocField({fieldName:aggDescriptor.field,source:source,origin:origin}):undefined,percentile:"percentile"in aggDescriptor&&typeof aggDescriptor.percentile==="number"?aggDescriptor.percentile:constants["DEFAULT_PERCENTILE"],source:source,origin:origin,canReadFromGeoJson:canReadFromGeoJson})}else{aggField=new agg_field_AggField({label:aggDescriptor.label,esDocField:"field"in aggDescriptor&&aggDescriptor.field?new es_doc_field_ESDocField({fieldName:aggDescriptor.field,source:source,origin:origin}):undefined,aggType:aggDescriptor.type,source:source,origin:origin,canReadFromGeoJson:canReadFromGeoJson})}const aggFields=[aggField];if("field"in aggDescriptor&&aggDescriptor.type===constants["AGG_TYPE"].TERMS){aggFields.push(new top_term_percentage_field_TopTermPercentageField(aggField,canReadFromGeoJson))}return aggFields}var agg_field_types=__webpack_require__(166);function es_agg_source_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const DEFAULT_METRIC={type:constants["AGG_TYPE"].COUNT};class es_agg_source_AbstractESAggSource extends es_source_AbstractESSource{static createDescriptor(descriptor){const normalizedDescriptor=es_source_AbstractESSource.createDescriptor(descriptor);return{...normalizedDescriptor,type:descriptor.type?descriptor.type:"",metrics:descriptor.metrics&&descriptor.metrics.length>0?descriptor.metrics:[DEFAULT_METRIC]}}constructor(descriptor,inspectorAdapters,canReadFromGeoJson=true){super(descriptor,inspectorAdapters);es_agg_source_defineProperty(this,"_metricFields",void 0);es_agg_source_defineProperty(this,"_canReadFromGeoJson",void 0);this._metricFields=[];this._canReadFromGeoJson=canReadFromGeoJson;if(descriptor.metrics){descriptor.metrics.forEach(aggDescriptor=>{this._metricFields.push(...esAggFieldsFactory(aggDescriptor,this,this.getOriginForField(),this._canReadFromGeoJson))})}}getFieldByName(fieldName){return this.getMetricFieldForName(fieldName)}createField({fieldName:fieldName}){throw new Error("Cannot create a new field from just a fieldname for an es_agg_source.")}getMetricFieldForName(fieldName){const targetMetricField=this.getMetricFields().find(metricField=>metricField.getName()===fieldName);return targetMetricField?targetMetricField:null}getOriginForField(){return constants["FIELD_ORIGIN"].SOURCE}getMetricFields(){const metrics=this._metricFields.filter(esAggField=>esAggField.isValid());return metrics.length===0?esAggFieldsFactory({type:constants["AGG_TYPE"].COUNT},this,this.getOriginForField(),this._canReadFromGeoJson):metrics}getAggKey(aggType,fieldName){return getSourceAggKey({aggType:aggType,aggFieldName:fieldName})}getAggLabel(aggType,fieldLabel){switch(aggType){case constants["AGG_TYPE"].COUNT:return constants["COUNT_PROP_LABEL"];case constants["AGG_TYPE"].TERMS:return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esAggSource.topTermLabel",{defaultMessage:`Top {fieldLabel}`,values:{fieldLabel:fieldLabel}});default:return`${aggType} ${fieldLabel}`}}async getFields(){return this.getMetricFields()}getValueAggsDsl(indexPattern){const valueAggsDsl={};this.getMetricFields().forEach(esAggMetric=>{const aggDsl=esAggMetric.getValueAggDsl(indexPattern);if(aggDsl){valueAggsDsl[esAggMetric.getName()]=esAggMetric.getValueAggDsl(indexPattern)}});return valueAggsDsl}async getTooltipProperties(properties){const metricFields=await this.getFields();const promises=[];metricFields.forEach(metricField=>{let value;for(const key in properties){if(properties.hasOwnProperty(key)&&metricField.getName()===key){value=properties[key];break}}const tooltipPromise=metricField.createTooltipProperty(value);promises.push(tooltipPromise)});return await Promise.all(promises)}}function metrics_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function isMetricValid(aggDescriptor){return aggDescriptor.type===constants["AGG_TYPE"].COUNT?true:aggDescriptor.field!==undefined}class metrics_editor_MetricsEditor extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);metrics_editor_defineProperty(this,"_addMetric",()=>{this.setState({metrics:[...this.state.metrics,{type:constants["AGG_TYPE"].COUNT}]},this._onSubmit)});this.state={metrics:this.props.metrics.length===0?[DEFAULT_METRIC]:this.props.metrics}}_onSubmit(){const hasInvalidMetric=this.state.metrics.some(metric=>!isMetricValid(metric));if(!hasInvalidMetric){this.props.onChange(this.state.metrics)}}_renderMetrics(){return this.state.metrics.map((metric,index)=>{const onMetricChange=updatedMetric=>{this.setState({metrics:[...this.state.metrics.slice(0,index),updatedMetric,...this.state.metrics.slice(index+1)]},this._onSubmit)};const onRemove=()=>{this.setState({metrics:[...this.state.metrics.slice(0,index),...this.state.metrics.slice(index+1)]},this._onSubmit)};return external_kbnSharedDeps_React_default.a.createElement("div",{key:index,className:"mapMetricEditorPanel__metricEditor"},external_kbnSharedDeps_React_default.a.createElement(MetricEditor,{onChange:onMetricChange,metric:metric,fields:this.props.fields,metricsFilter:this.props.metricsFilter,showRemoveButton:index>0,onRemove:onRemove}))})}_renderAddMetricButton(){if(!this.props.allowMultipleMetrics){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextAlign"],{textAlign:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:this._addMetric,size:"xs",iconType:"plusInCircleFilled"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.metricsEditor.addMetricButtonLabel",defaultMessage:"Add metric"}))))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapMapLayerPanel__metrics"},this._renderMetrics()),this._renderAddMetricButton())}}const BASE_OPTIONS=[{value:constants["GRID_RESOLUTION"].COARSE,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGrid.coarseDropdownOption",{defaultMessage:"coarse"})},{value:constants["GRID_RESOLUTION"].FINE,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGrid.fineDropdownOption",{defaultMessage:"fine"})},{value:constants["GRID_RESOLUTION"].MOST_FINE,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGrid.finestDropdownOption",{defaultMessage:"finest"})}];function ResolutionEditor({resolution:resolution,onChange:onChange,includeSuperFine:includeSuperFine}){const options=[...BASE_OPTIONS];if(includeSuperFine){options.push({value:constants["GRID_RESOLUTION"].SUPER_FINE,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGrid.superFineDropDownOption",{defaultMessage:"super fine (beta)"})})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.geoGrid.resolutionLabel",{defaultMessage:"Grid resolution"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{options:options,value:resolution,onChange:e=>onChange(e.target.value),compressed:true}))}const render_as_select_options=[{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoGrid.pointsDropdownOption",{defaultMessage:"clusters"}),value:constants["RENDER_AS"].POINT},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoGrid.gridRectangleDropdownOption",{defaultMessage:"grids"}),value:constants["RENDER_AS"].GRID}];function RenderAsSelect(props){if(props.renderAs===constants["RENDER_AS"].HEATMAP){return null}function onChange(selectedOptions){if(!selectedOptions||!selectedOptions.length){return}props.onChange(selectedOptions[0].value)}const selectedOptions=[];const selectedOption=render_as_select_options.find(option=>option.value===props.renderAs);if(selectedOption){selectedOptions.push(selectedOption)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoGrid.showAsLabel",{defaultMessage:"Show as"}),display:props.isColumnCompressed?"columnCompressed":"row"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{singleSelection:{asPlainText:true},options:render_as_select_options,selectedOptions:selectedOptions,onChange:onChange,isClearable:false,compressed:true}))}function update_source_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class update_source_editor_UpdateSourceEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);update_source_editor_defineProperty(this,"state",{fields:null});update_source_editor_defineProperty(this,"_onMetricsChange",metrics=>{this.props.onChange({propName:"metrics",value:metrics})});update_source_editor_defineProperty(this,"_onResolutionChange",resolution=>{let newLayerType;if(this.props.currentLayerType===constants["LAYER_TYPE"].VECTOR||this.props.currentLayerType===constants["LAYER_TYPE"].TILED_VECTOR){newLayerType=resolution===constants["GRID_RESOLUTION"].SUPER_FINE?constants["LAYER_TYPE"].TILED_VECTOR:constants["LAYER_TYPE"].VECTOR}else if(this.props.currentLayerType===constants["LAYER_TYPE"].HEATMAP){if(resolution===constants["GRID_RESOLUTION"].SUPER_FINE){throw new Error("Heatmap does not support SUPER_FINE resolution")}else{newLayerType=constants["LAYER_TYPE"].HEATMAP}}else{throw new Error("Unexpected layer-type")}this.props.onChange({propName:"resolution",value:resolution,newLayerType:newLayerType})});update_source_editor_defineProperty(this,"_onRequestTypeSelect",requestType=>{this.props.onChange({propName:"requestType",value:requestType})})}componentDidMount(){this._isMounted=true;this._loadFields()}componentWillUnmount(){this._isMounted=false}async _loadFields(){let indexPattern;try{indexPattern=await Object(kibana_services["p"])().get(this.props.indexPatternId)}catch(err){if(this._isMounted){this.setState({loadError:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGrid.noIndexPatternErrorMessage",{defaultMessage:`Unable to find Index pattern {id}`,values:{id:this.props.indexPatternId}})})}return}if(!this._isMounted){return}this.setState({fields:indexPattern.fields.filter(field=>!data_public_["indexPatterns"].isNestedField(field))})}_renderMetricsPanel(){const metricsFilter=this.props.currentLayerType===constants["LAYER_TYPE"].HEATMAP?metric=>isMetricCountable(metric.value):null;const allowMultipleMetrics=this.props.currentLayerType!==constants["LAYER_TYPE"].HEATMAP;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h6",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.source.esGrid.metricsLabel",defaultMessage:"Metrics"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(metrics_editor_MetricsEditor,{allowMultipleMetrics:allowMultipleMetrics,metricsFilter:metricsFilter,fields:this.state.fields,metrics:this.props.metrics,onChange:this._onMetricsChange}))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,this._renderMetricsPanel(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h6",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.source.esGrid.geoTileGridLabel",defaultMessage:"Grid parameters"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(ResolutionEditor,{includeSuperFine:this.props.currentLayerType!==constants["LAYER_TYPE"].HEATMAP,resolution:this.props.resolution,onChange:this._onResolutionChange}),external_kbnSharedDeps_React_default.a.createElement(RenderAsSelect,{isColumnCompressed:true,renderAs:this.props.renderAs,onChange:this._onRequestTypeSelect})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}}const registry=[];function registerSource(entry){const sourceTypeExists=registry.some(({type:type})=>entry.type===type);if(sourceTypeExists){throw new Error(`Unable to register source type ${entry.type}. ${entry.type} has already been registered`)}registry.push(entry)}function getSourceByType(sourceType){return registry.find(source=>source.type===sourceType)}function es_geo_grid_source_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const MAX_GEOTILE_LEVEL=29;const clustersTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGridClustersTitle",{defaultMessage:"Clusters and grids"});const heatmapTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGridHeatmapTitle",{defaultMessage:"Heat map"});class es_geo_grid_source_ESGeoGridSource extends es_agg_source_AbstractESAggSource{static createDescriptor(descriptor){const normalizedDescriptor=es_agg_source_AbstractESAggSource.createDescriptor(descriptor);if(!isValidStringConfig(normalizedDescriptor.geoField)){throw new Error("Cannot create an ESGeoGridSourceDescriptor without a geoField")}return{...normalizedDescriptor,type:constants["SOURCE_TYPES"].ES_GEO_GRID,geoField:normalizedDescriptor.geoField,requestType:descriptor.requestType||constants["RENDER_AS"].POINT,resolution:descriptor.resolution?descriptor.resolution:constants["GRID_RESOLUTION"].COARSE}}constructor(descriptor,inspectorAdapters){const sourceDescriptor=es_geo_grid_source_ESGeoGridSource.createDescriptor(descriptor);super(sourceDescriptor,inspectorAdapters,descriptor.resolution!==constants["GRID_RESOLUTION"].SUPER_FINE);es_geo_grid_source_defineProperty(this,"_descriptor",void 0);this._descriptor=sourceDescriptor}renderSourceSettingsEditor(sourceEditorArgs){return external_kbnSharedDeps_React_default.a.createElement(update_source_editor_UpdateSourceEditor,{currentLayerType:sourceEditorArgs.currentLayerType,indexPatternId:this.getIndexPatternId(),onChange:sourceEditorArgs.onChange,metrics:this._descriptor.metrics,renderAs:this._descriptor.requestType,resolution:this._descriptor.resolution})}getSyncMeta(){return{requestType:this._descriptor.requestType}}async getImmutableProperties(){let indexPatternName=this.getIndexPatternId();try{const indexPattern=await this.getIndexPattern();indexPatternName=indexPattern.title}catch(error){}return[{label:Object(i18n_getters["b"])(),value:this._descriptor.requestType===constants["RENDER_AS"].HEATMAP?heatmapTitle:clustersTitle},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGrid.indexPatternLabel",{defaultMessage:"Index pattern"}),value:indexPatternName},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGrid.geospatialFieldLabel",{defaultMessage:"Geospatial field"}),value:this._descriptor.geoField}]}getFieldNames(){return this.getMetricFields().map(esAggMetricField=>esAggMetricField.getName())}isGeoGridPrecisionAware(){if(this._descriptor.resolution===constants["GRID_RESOLUTION"].SUPER_FINE){return false}else{return true}}showJoinEditor(){return false}getGridResolution(){return this._descriptor.resolution}getGeoGridPrecision(zoom){if(this._descriptor.resolution===constants["GRID_RESOLUTION"].SUPER_FINE){return NaN}const targetGeotileLevel=Math.ceil(zoom)+this._getGeoGridPrecisionResolutionDelta();return Math.min(targetGeotileLevel,MAX_GEOTILE_LEVEL)}_getGeoGridPrecisionResolutionDelta(){if(this._descriptor.resolution===constants["GRID_RESOLUTION"].COARSE){return 2}if(this._descriptor.resolution===constants["GRID_RESOLUTION"].FINE){return 3}if(this._descriptor.resolution===constants["GRID_RESOLUTION"].MOST_FINE){return 4}throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGrid.resolutionParamErrorMessage",{defaultMessage:`Grid resolution param not recognized: {resolution}`,values:{resolution:this._descriptor.resolution}}))}async _compositeAggRequest({searchSource:searchSource,searchSessionId:searchSessionId,indexPattern:indexPattern,precision:precision,layerName:layerName,registerCancelCallback:registerCancelCallback,bucketsPerGrid:bucketsPerGrid,isRequestStillActive:isRequestStillActive,bufferedExtent:bufferedExtent}){const gridsPerRequest=Math.floor(constants["DEFAULT_MAX_BUCKETS_LIMIT"]/bucketsPerGrid);const aggs={compositeSplit:{composite:{size:gridsPerRequest,sources:[{[constants["GEOTILE_GRID_AGG_NAME"]]:{geotile_grid:{bounds:makeESBbox(bufferedExtent),field:this._descriptor.geoField,precision:precision}}}]},aggs:{[constants["GEOCENTROID_AGG_NAME"]]:{geo_centroid:{field:this._descriptor.geoField}},...this.getValueAggsDsl(indexPattern)}}};const features=[];let requestCount=0;let afterKey=null;while(true){if(!isRequestStillActive()){throw new DataRequestAbortError}requestCount++;if(requestCount>5){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGrid.compositePaginationErrorMessage",{defaultMessage:`{layerName} is causing too many requests. Reduce "Grid resolution" and/or reduce the number of top term "Metrics".`,values:{layerName:layerName}}))}if(afterKey){aggs.compositeSplit.composite.after=afterKey}searchSource.setField("aggs",aggs);const requestId=afterKey?`${this.getId()} afterKey ${afterKey.geoSplit}`:this.getId();const esResponse=await this._runEsQuery({requestId:requestId,requestName:`${layerName} (${requestCount})`,searchSource:searchSource,registerCancelCallback:registerCancelCallback,requestDescription:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGrid.compositeInspectorDescription",{defaultMessage:"Elasticsearch geo grid aggregation request: {requestId}",values:{requestId:requestId}}),searchSessionId:searchSessionId});features.push(...convertCompositeRespToGeoJson(esResponse,this._descriptor.requestType));afterKey=esResponse.aggregations.compositeSplit.after_key;if(esResponse.aggregations.compositeSplit.buckets.length<gridsPerRequest){break}}return features}_addNonCompositeAggsToSearchSource(searchSource,indexPattern,precision,bufferedExtent){searchSource.setField("aggs",{[constants["GEOTILE_GRID_AGG_NAME"]]:{geotile_grid:{bounds:bufferedExtent?makeESBbox(bufferedExtent):null,field:this._descriptor.geoField,precision:precision,size:constants["DEFAULT_MAX_BUCKETS_LIMIT"],shard_size:constants["DEFAULT_MAX_BUCKETS_LIMIT"]},aggs:{[constants["GEOCENTROID_AGG_NAME"]]:{geo_centroid:{field:this._descriptor.geoField}},...this.getValueAggsDsl(indexPattern)}}})}async _nonCompositeAggRequest({searchSource:searchSource,searchSessionId:searchSessionId,indexPattern:indexPattern,precision:precision,layerName:layerName,registerCancelCallback:registerCancelCallback,bufferedExtent:bufferedExtent}){this._addNonCompositeAggsToSearchSource(searchSource,indexPattern,precision,bufferedExtent);const esResponse=await this._runEsQuery({requestId:this.getId(),requestName:layerName,searchSource:searchSource,registerCancelCallback:registerCancelCallback,requestDescription:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGrid.inspectorDescription",{defaultMessage:"Elasticsearch geo grid aggregation request"}),searchSessionId:searchSessionId});return convertRegularRespToGeoJson(esResponse,this._descriptor.requestType)}async getGeoJsonWithMeta(layerName,searchFilters,registerCancelCallback,isRequestStillActive){const indexPattern=await this.getIndexPattern();const searchSource=await this.makeSearchSource(searchFilters,0);let bucketsPerGrid=1;this.getMetricFields().forEach(metricField=>{bucketsPerGrid+=metricField.getBucketCount()});let features;if(searchFilters.buffer){features=bucketsPerGrid===1?await this._nonCompositeAggRequest({searchSource:searchSource,searchSessionId:searchFilters.searchSessionId,indexPattern:indexPattern,precision:searchFilters.geogridPrecision||0,layerName:layerName,registerCancelCallback:registerCancelCallback,bufferedExtent:searchFilters.buffer}):await this._compositeAggRequest({searchSource:searchSource,searchSessionId:searchFilters.searchSessionId,indexPattern:indexPattern,precision:searchFilters.geogridPrecision||0,layerName:layerName,registerCancelCallback:registerCancelCallback,bucketsPerGrid:bucketsPerGrid,isRequestStillActive:isRequestStillActive,bufferedExtent:searchFilters.buffer})}else{throw new Error("Cannot get GeoJson without searchFilter.buffer")}return{data:{type:"FeatureCollection",features:features},meta:{areResultsTrimmed:false}}}getLayerName(){return constants["MVT_SOURCE_LAYER_NAME"]}async getUrlTemplateWithMeta(searchFilters){const indexPattern=await this.getIndexPattern();const searchSource=await this.makeSearchSource(searchFilters,0);this._addNonCompositeAggsToSearchSource(searchSource,indexPattern,null,null);const dsl=await searchSource.getSearchRequestBody();const risonDsl=rison_default.a.encode(dsl);const mvtUrlServicePath=Object(kibana_services["n"])().basePath.prepend(`/${constants["GIS_API_PATH"]}/${constants["MVT_GETGRIDTILE_API_PATH"]}`);const geoField=await this._getGeoField();const urlTemplate=`${mvtUrlServicePath}?x={x}&y={y}&z={z}&geometryFieldName=${this._descriptor.geoField}&index=${indexPattern.title}&requestBody=${risonDsl}&requestType=${this._descriptor.requestType}&geoFieldType=${geoField.type}`;return{layerName:this.getLayerName(),minSourceZoom:this.getMinZoom(),maxSourceZoom:this.getMaxZoom(),urlTemplate:searchFilters.searchSessionId?urlTemplate+`&searchSessionId=${searchFilters.searchSessionId}`:urlTemplate}}isFilterByMapBounds(){if(this._descriptor.resolution===constants["GRID_RESOLUTION"].SUPER_FINE){return false}else{return true}}canFormatFeatureProperties(){return true}async getSupportedShapeTypes(){if(this._descriptor.requestType===constants["RENDER_AS"].GRID){return[constants["VECTOR_SHAPE_TYPE"].POLYGON]}return[constants["VECTOR_SHAPE_TYPE"].POINT]}async getLicensedFeatures(){const geoField=await this._getGeoField();return geoField.type===constants["ES_GEO_FIELD_TYPE"].GEO_SHAPE?[licensed_features["a"].GEO_SHAPE_AGGS_GEO_TILE]:[]}}registerSource({ConstructorFunction:es_geo_grid_source_ESGeoGridSource,type:constants["SOURCE_TYPES"].ES_GEO_GRID});function blended_vector_layer_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const ACTIVE_COUNT_DATA_ID="ACTIVE_COUNT_DATA_ID";function getAggType(dynamicProperty){return dynamicProperty.isOrdinal()?constants["AGG_TYPE"].AVG:constants["AGG_TYPE"].TERMS}function getClusterSource(documentSource,documentStyle){const clusterSourceDescriptor=es_geo_grid_source_ESGeoGridSource.createDescriptor({indexPatternId:documentSource.getIndexPatternId(),geoField:documentSource.getGeoFieldName(),requestType:constants["RENDER_AS"].POINT});clusterSourceDescriptor.applyGlobalQuery=documentSource.getApplyGlobalQuery();clusterSourceDescriptor.applyGlobalTime=documentSource.getApplyGlobalTime();clusterSourceDescriptor.metrics=[{type:constants["AGG_TYPE"].COUNT,label:constants["COUNT_PROP_LABEL"]},...documentStyle.getDynamicPropertiesArray().map(dynamicProperty=>({type:getAggType(dynamicProperty),field:dynamicProperty.getFieldName()}))];clusterSourceDescriptor.id=documentSource.getId();return new es_geo_grid_source_ESGeoGridSource(clusterSourceDescriptor,documentSource.getInspectorAdapters())}function getClusterStyleDescriptor(documentStyle,clusterSource){const defaultDynamicProperties=getDefaultDynamicProperties();const clusterStyleDescriptor={type:constants["LAYER_STYLE_TYPE"].VECTOR,properties:{[constants["VECTOR_STYLES"].LABEL_TEXT]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{...defaultDynamicProperties[constants["VECTOR_STYLES"].LABEL_TEXT].options,field:{name:constants["COUNT_PROP_NAME"],origin:constants["FIELD_ORIGIN"].SOURCE}}},[constants["VECTOR_STYLES"].ICON_SIZE]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{...defaultDynamicProperties[constants["VECTOR_STYLES"].ICON_SIZE].options,field:{name:constants["COUNT_PROP_NAME"],origin:constants["FIELD_ORIGIN"].SOURCE}}}},isTimeAware:true};documentStyle.getAllStyleProperties().forEach(styleProperty=>{const styleName=styleProperty.getStyleName();if([constants["VECTOR_STYLES"].LABEL_TEXT,constants["VECTOR_STYLES"].ICON_SIZE].includes(styleName)&&(!styleProperty.isDynamic()||!styleProperty.isComplete())){return}if(styleName===constants["VECTOR_STYLES"].SYMBOLIZE_AS||styleName===constants["VECTOR_STYLES"].LABEL_BORDER_SIZE){clusterStyleDescriptor.properties[styleName]={options:{...styleProperty.getOptions()}}}else if(styleProperty.isDynamic()){const options=styleProperty.getOptions();const field=options&&options.field&&options.field.name?{...options.field,name:clusterSource.getAggKey(getAggType(styleProperty),options.field.name)}:undefined;clusterStyleDescriptor.properties[styleName]={type:constants["STYLE_TYPE"].DYNAMIC,options:{...options,field:field}}}else{clusterStyleDescriptor.properties[styleName]={type:constants["STYLE_TYPE"].STATIC,options:{...styleProperty.getOptions()}}}});return clusterStyleDescriptor}class blended_vector_layer_BlendedVectorLayer extends vector_layer_VectorLayer{static createDescriptor(options,mapColors){const layerDescriptor=vector_layer_VectorLayer.createDescriptor(options,mapColors);layerDescriptor.type=blended_vector_layer_BlendedVectorLayer.type;return layerDescriptor}constructor(options){super({...options,joins:[]});blended_vector_layer_defineProperty(this,"_isClustered",void 0);blended_vector_layer_defineProperty(this,"_clusterSource",void 0);blended_vector_layer_defineProperty(this,"_clusterStyle",void 0);blended_vector_layer_defineProperty(this,"_documentSource",void 0);blended_vector_layer_defineProperty(this,"_documentStyle",void 0);this._documentSource=this._source;this._documentStyle=this._style;this._clusterSource=getClusterSource(this._documentSource,this._documentStyle);const clusterStyleDescriptor=getClusterStyleDescriptor(this._documentStyle,this._clusterSource);this._clusterStyle=new vector_style_VectorStyle(clusterStyleDescriptor,this._clusterSource,this,options.chartsPaletteServiceGetColor);let isClustered=false;const countDataRequest=this.getDataRequest(ACTIVE_COUNT_DATA_ID);if(countDataRequest){const requestData=countDataRequest.getData();if(requestData&&requestData.isSyncClustered){isClustered=true}}this._isClustered=isClustered}destroy(){if(this._documentSource){this._documentSource.destroy()}if(this._clusterSource){this._clusterSource.destroy()}}async getDisplayName(source){const displayName=await super.getDisplayName(source);return this._isClustered?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.blendedVectorLayer.clusteredLayerName",{defaultMessage:"Clustered {displayName}",values:{displayName:displayName}}):displayName}showJoinEditor(){return true}getJoinsDisabledReason(){return this._documentSource.getJoinsDisabledReason()}getJoins(){return[]}hasJoins(){return false}async cloneDescriptor(){const clonedDescriptor=await super.cloneDescriptor();const displayName=await super.getDisplayName();clonedDescriptor.label=`Clone of ${displayName}`;clonedDescriptor.sourceDescriptor=this._documentSource.cloneDescriptor();return clonedDescriptor}getSource(){return this._isClustered?this._clusterSource:this._documentSource}getSourceForEditing(){return this._documentSource}getCurrentStyle(){return this._isClustered?this._clusterStyle:this._documentStyle}getStyleForEditing(){return this._documentStyle}async syncData(syncContext){const dataRequestId=ACTIVE_COUNT_DATA_ID;const requestToken=Symbol(`layer-active-count:${this.getId()}`);const searchFilters=this._getSearchFilters(syncContext.dataFilters,this.getSource(),this.getCurrentStyle());const canSkipFetch=await canSkipSourceUpdate({source:this.getSource(),prevDataRequest:this.getDataRequest(dataRequestId),nextMeta:searchFilters});let activeSource;let activeStyle;if(canSkipFetch){if(this._isClustered){activeSource=this._clusterSource;activeStyle=this._clusterStyle}else{activeSource=this._documentSource;activeStyle=this._documentStyle}}else{let isSyncClustered;try{syncContext.startLoading(dataRequestId,requestToken,searchFilters);const abortController=new AbortController;syncContext.registerCancelCallback(requestToken,()=>abortController.abort());const searchSource=await this._documentSource.makeSearchSource(searchFilters,0);const resp=await searchSource.fetch({abortSignal:abortController.signal,sessionId:syncContext.dataFilters.searchSessionId});const maxResultWindow=await this._documentSource.getMaxResultWindow();isSyncClustered=resp.hits.total>maxResultWindow;const countData={isSyncClustered:isSyncClustered};syncContext.stopLoading(dataRequestId,requestToken,countData,searchFilters)}catch(error){if(!(error instanceof DataRequestAbortError)||!isSearchSourceAbortError(error)){syncContext.onLoadError(dataRequestId,requestToken,error.message)}return}if(isSyncClustered){activeSource=this._clusterSource;activeStyle=this._clusterStyle}else{activeSource=this._documentSource;activeStyle=this._documentStyle}}super._syncData(syncContext,activeSource,activeStyle)}async getLicensedFeatures(){return[...await this._clusterSource.getLicensedFeatures(),...await this._documentSource.getLicensedFeatures()]}}blended_vector_layer_defineProperty(blended_vector_layer_BlendedVectorLayer,"type",constants["LAYER_TYPE"].BLENDED_VECTOR);var request_=__webpack_require__(43);var events=__webpack_require__(66);class map_adapter_MapAdapter extends events["EventEmitter"]{setMapState({stats:stats,style:style}){this.stats=stats;this.style=style;this._onChange()}getMapState(){return{stats:this.stats,style:this.style}}_onChange(){this.emit("change")}}const REGISTER_CANCEL_CALLBACK="REGISTER_CANCEL_CALLBACK";const UNREGISTER_CANCEL_CALLBACK="UNREGISTER_CANCEL_CALLBACK";const SET_EVENT_HANDLERS="SET_EVENT_HANDLERS";const SET_CHARTS_PALETTE_SERVICE_GET_COLOR="SET_CHARTS_PALETTE_SERVICE_GET_COLOR";function createInspectorAdapters(){const inspectorAdapters={requests:new request_["RequestAdapter"]};if(Object(kibana_services["H"])()){inspectorAdapters.map=new map_adapter_MapAdapter}return inspectorAdapters}function nonSerializableInstances(state,action={}){if(!state){return{inspectorAdapters:createInspectorAdapters(),cancelRequestCallbacks:new Map,eventHandlers:{},chartsPaletteServiceGetColor:null}}switch(action.type){case REGISTER_CANCEL_CALLBACK:state.cancelRequestCallbacks.set(action.requestToken,action.callback);return{...state};case UNREGISTER_CANCEL_CALLBACK:state.cancelRequestCallbacks.delete(action.requestToken);return{...state};case SET_EVENT_HANDLERS:{return{...state,eventHandlers:action.eventHandlers}}case SET_CHARTS_PALETTE_SERVICE_GET_COLOR:{return{...state,chartsPaletteServiceGetColor:action.chartsPaletteServiceGetColor}}default:return state}}const getInspectorAdapters=({nonSerializableInstances:nonSerializableInstances})=>nonSerializableInstances.inspectorAdapters;const getCancelRequestCallbacks=({nonSerializableInstances:nonSerializableInstances})=>nonSerializableInstances.cancelRequestCallbacks;const getEventHandlers=({nonSerializableInstances:nonSerializableInstances})=>nonSerializableInstances.eventHandlers;function getChartsPaletteServiceGetColor({nonSerializableInstances:nonSerializableInstances}){return nonSerializableInstances.chartsPaletteServiceGetColor}const non_serializable_instances_registerCancelCallback=(requestToken,callback)=>({type:REGISTER_CANCEL_CALLBACK,requestToken:requestToken,callback:callback});const unregisterCancelCallback=requestToken=>({type:UNREGISTER_CANCEL_CALLBACK,requestToken:requestToken});const cancelRequest=requestToken=>(dispatch,getState)=>{if(!requestToken){return}const cancelCallback=getCancelRequestCallbacks(getState()).get(requestToken);if(cancelCallback){cancelCallback();dispatch(unregisterCancelCallback(requestToken))}};const setEventHandlers=(eventHandlers={})=>({type:SET_EVENT_HANDLERS,eventHandlers:eventHandlers});function setChartsPaletteServiceGetColor(chartsPaletteServiceGetColor){return{type:SET_CHARTS_PALETTE_SERVICE_GET_COLOR,chartsPaletteServiceGetColor:chartsPaletteServiceGetColor}}function tiled_vector_layer_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class tiled_vector_layer_TiledVectorLayer extends vector_layer_VectorLayer{static createDescriptor(descriptor,mapColors){const layerDescriptor=super.createDescriptor(descriptor,mapColors);layerDescriptor.type=tiled_vector_layer_TiledVectorLayer.type;if(!layerDescriptor.style){const styleProperties=vector_style_VectorStyle.createDefaultStyleProperties(mapColors?mapColors:[]);layerDescriptor.style=vector_style_VectorStyle.createDescriptor(styleProperties)}return layerDescriptor}constructor({layerDescriptor:layerDescriptor,source:source}){super({layerDescriptor:layerDescriptor,source:source});tiled_vector_layer_defineProperty(this,"_source",void 0);this._source=source}getCustomIconAndTooltipContent(){return{icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{size:"m",type:this.getLayerTypeIconName()})}}async _syncMVTUrlTemplate({startLoading:startLoading,stopLoading:stopLoading,onLoadError:onLoadError,dataFilters:dataFilters}){const requestToken=Symbol(`layer-${this.getId()}-${constants["SOURCE_DATA_REQUEST_ID"]}`);const searchFilters=this._getSearchFilters(dataFilters,this.getSource(),this._style);const prevDataRequest=this.getSourceDataRequest();const templateWithMeta=await this._source.getUrlTemplateWithMeta(searchFilters);if(prevDataRequest){const data=prevDataRequest.getData();if(data){const canSkipBecauseNoChanges=data.layerName===this._source.getLayerName()&&data.minSourceZoom===this._source.getMinZoom()&&data.maxSourceZoom===this._source.getMaxZoom()&&data.urlTemplate===templateWithMeta.urlTemplate;if(canSkipBecauseNoChanges){return null}}}startLoading(constants["SOURCE_DATA_REQUEST_ID"],requestToken,searchFilters);try{stopLoading(constants["SOURCE_DATA_REQUEST_ID"],requestToken,templateWithMeta,{})}catch(error){onLoadError(constants["SOURCE_DATA_REQUEST_ID"],requestToken,error.message)}}async syncData(syncContext){await this._syncSourceStyleMeta(syncContext,this._source,this._style);await this._syncSourceFormatters(syncContext,this._source,this._style);await this._syncMVTUrlTemplate(syncContext)}_syncSourceBindingWithMb(mbMap){const mbSource=mbMap.getSource(this._getMbSourceId());if(mbSource){return}const sourceDataRequest=this.getSourceDataRequest();if(!sourceDataRequest){return}const sourceMeta=sourceDataRequest.getData();if(!sourceMeta){return}const mbSourceId=this._getMbSourceId();mbMap.addSource(mbSourceId,{type:"vector",tiles:[sourceMeta.urlTemplate],minzoom:sourceMeta.minSourceZoom,maxzoom:sourceMeta.maxSourceZoom})}ownsMbSourceId(mbSourceId){return this._getMbSourceId()===mbSourceId}_syncStylePropertiesWithMb(mbMap){const mbSource=mbMap.getSource(this._getMbSourceId());if(!mbSource){return}const sourceDataRequest=this.getSourceDataRequest();if(!sourceDataRequest){return}const sourceMeta=sourceDataRequest.getData();if(sourceMeta.layerName===""){return}this._setMbPointsProperties(mbMap,sourceMeta.layerName);this._setMbLinePolygonProperties(mbMap,sourceMeta.layerName);this._setMbCentroidProperties(mbMap,sourceMeta.layerName)}_requiresPrevSourceCleanup(mbMap){var _mbTileSource$tiles;const mbSource=mbMap.getSource(this._getMbSourceId());if(!mbSource){return false}if(!("tiles"in mbSource)){return true}const mbTileSource=mbSource;const dataRequest=this.getSourceDataRequest();if(!dataRequest){return false}const tiledSourceMeta=dataRequest.getData();if(!tiledSourceMeta){return false}const isSourceDifferent=((_mbTileSource$tiles=mbTileSource.tiles)===null||_mbTileSource$tiles===void 0?void 0:_mbTileSource$tiles[0])!==tiledSourceMeta.urlTemplate||mbTileSource.minzoom!==tiledSourceMeta.minSourceZoom||mbTileSource.maxzoom!==tiledSourceMeta.maxSourceZoom;if(isSourceDifferent){return true}const layerIds=this.getMbLayerIds();for(let i=0;i<layerIds.length;i++){const mbLayer=mbMap.getLayer(layerIds[i]);if(mbLayer&&mbLayer.sourceLayer!==tiledSourceMeta.layerName){return true}}return false}syncLayerWithMB(mbMap){this._removeStaleMbSourcesAndLayers(mbMap);this._syncSourceBindingWithMb(mbMap);this._syncStylePropertiesWithMb(mbMap)}getJoins(){return[]}getMinZoom(){return Math.max(this._source.getMinZoom(),super.getMinZoom())}getFeatureById(id){return null}}tiled_vector_layer_defineProperty(tiled_vector_layer_TiledVectorLayer,"type",constants["LAYER_TYPE"].TILED_VECTOR);function es_term_source_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const TERMS_AGG_NAME="join";const TERMS_BUCKET_KEYS_TO_IGNORE=["key","doc_count"];function extractPropertiesMap(rawEsData,countPropertyName){const propertiesMap=new Map;const buckets=external_kbnSharedDeps_Lodash_default.a.get(rawEsData,["aggregations",TERMS_AGG_NAME,"buckets"],[]);buckets.forEach(termBucket=>{const properties=extractPropertiesFromBucket(termBucket,TERMS_BUCKET_KEYS_TO_IGNORE);if(countPropertyName){properties[countPropertyName]=termBucket.doc_count}propertiesMap.set(termBucket.key.toString(),properties)});return propertiesMap}class es_term_source_ESTermSource extends es_agg_source_AbstractESAggSource{static createDescriptor(descriptor){const normalizedDescriptor=es_agg_source_AbstractESAggSource.createDescriptor(descriptor);if(!isValidStringConfig(descriptor.term)){throw new Error("Cannot create an ESTermSource without a term")}return{...normalizedDescriptor,indexPatternTitle:descriptor.indexPatternTitle?descriptor.indexPatternTitle:descriptor.indexPatternId,term:descriptor.term,type:constants["SOURCE_TYPES"].ES_TERM_SOURCE}}constructor(descriptor,inspectorAdapters){const sourceDescriptor=es_term_source_ESTermSource.createDescriptor(descriptor);super(sourceDescriptor,inspectorAdapters);es_term_source_defineProperty(this,"_termField",void 0);es_term_source_defineProperty(this,"_descriptor",void 0);this._descriptor=sourceDescriptor;this._termField=new es_doc_field_ESDocField({fieldName:this._descriptor.term,source:this,origin:this.getOriginForField()})}hasCompleteConfig(){return external_kbnSharedDeps_Lodash_default.a.has(this._descriptor,"indexPatternId")&&external_kbnSharedDeps_Lodash_default.a.has(this._descriptor,"term")}getTermField(){return this._termField}getOriginForField(){return constants["FIELD_ORIGIN"].JOIN}getWhereQuery(){return this._descriptor.whereQuery}getAggKey(aggType,fieldName){return getJoinAggKey({aggType:aggType,aggFieldName:fieldName,rightSourceId:this._descriptor.id})}getAggLabel(aggType,fieldLabel){return aggType===constants["AGG_TYPE"].COUNT?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esJoin.countLabel",{defaultMessage:`Count of {indexPatternTitle}`,values:{indexPatternTitle:this._descriptor.indexPatternTitle}}):super.getAggLabel(aggType,fieldLabel)}async getPropertiesMap(searchFilters,leftSourceName,leftFieldName,registerCancelCallback){if(!this.hasCompleteConfig()){return new Map}const indexPattern=await this.getIndexPattern();const searchSource=await this.makeSearchSource(searchFilters,0);const termsField=es_agg_utils_getField(indexPattern,this._termField.getName());const termsAgg={size:this._descriptor.size!==undefined?this._descriptor.size:constants["DEFAULT_MAX_BUCKETS_LIMIT"]};searchSource.setField("aggs",{[TERMS_AGG_NAME]:{terms:addFieldToDSL(termsAgg,termsField),aggs:{...this.getValueAggsDsl(indexPattern)}}});const rawEsData=await this._runEsQuery({requestId:this.getId(),requestName:`${this._descriptor.indexPatternTitle}.${this._termField.getName()}`,searchSource:searchSource,registerCancelCallback:registerCancelCallback,requestDescription:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esJoin.joinDescription",{defaultMessage:`Elasticsearch terms aggregation request, left source: {leftSource}, right source: {rightSource}`,values:{leftSource:`${leftSourceName}:${leftFieldName}`,rightSource:`${this._descriptor.indexPatternTitle}:${this._termField.getName()}`}}),searchSessionId:searchFilters.searchSessionId});const countPropertyName=this.getAggKey(constants["AGG_TYPE"].COUNT);return extractPropertiesMap(rawEsData,countPropertyName)}isFilterByMapBounds(){return false}async getDisplayName(){return`es_table ${this.getIndexPatternId()}`}getFieldNames(){return this.getMetricFields().map(esAggMetricField=>esAggMetricField.getName())}getSyncMeta(){return this._descriptor.size!==undefined?{size:this._descriptor.size}:null}getRightFields(){return this.getMetricFields()}}es_term_source_defineProperty(es_term_source_ESTermSource,"type",constants["SOURCE_TYPES"].ES_TERM_SOURCE);var uuid=__webpack_require__(302);var uuid_default=__webpack_require__.n(uuid);function inline_field_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class inline_field_InlineField extends field_AbstractField{constructor({fieldName:fieldName,source:source,origin:origin,dataType:dataType}){super({fieldName:fieldName,origin:origin});inline_field_defineProperty(this,"_source",void 0);inline_field_defineProperty(this,"_dataType",void 0);this._source=source;this._dataType=dataType}getSource(){return this._source}async getLabel(){return this.getName()}async getDataType(){return this._dataType}}function table_source_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class table_source_TableSource extends vector_source_AbstractVectorSource{static createDescriptor(descriptor){return{type:constants["SOURCE_TYPES"].TABLE_SOURCE,__rows:descriptor.__rows||[],__columns:descriptor.__columns||[],term:descriptor.term||"",id:descriptor.id||uuid_default()()}}constructor(descriptor,inspectorAdapters){const sourceDescriptor=table_source_TableSource.createDescriptor(descriptor);super(sourceDescriptor,inspectorAdapters);table_source_defineProperty(this,"_descriptor",void 0);this._descriptor=sourceDescriptor}async getDisplayName(){return`table source ${uuid_default()()}`}getSyncMeta(){return null}async getPropertiesMap(searchFilters,leftSourceName,leftFieldName,registerCancelCallback){const propertiesMap=new Map;const fieldNames=await this.getFieldNames();for(let i=0;i<this._descriptor.__rows.length;i++){const row=this._descriptor.__rows[i];let propKey;const props={};for(const key in row){if(row.hasOwnProperty(key)){if(key===this._descriptor.term&&row[key]){propKey=row[key]}if(fieldNames.indexOf(key)>=0&&key!==this._descriptor.term){props[key]=row[key]}}}if(propKey&&!propertiesMap.has(propKey.toString())){propertiesMap.set(propKey.toString(),props)}}return propertiesMap}getTermField(){const column=this._descriptor.__columns.find(c=>c.name===this._descriptor.term);if(!column){throw new Error(`Cannot find column for ${this._descriptor.term} in ${JSON.stringify(this._descriptor.__columns)}`)}return new inline_field_InlineField({fieldName:column.name,source:this,origin:constants["FIELD_ORIGIN"].JOIN,dataType:column.type})}getWhereQuery(){return undefined}hasCompleteConfig(){return true}getId(){return this._descriptor.id}getRightFields(){return this._descriptor.__columns.map(column=>new inline_field_InlineField({fieldName:column.name,source:this,origin:constants["FIELD_ORIGIN"].JOIN,dataType:column.type}))}getFieldNames(){return this._descriptor.__columns.map(column=>column.name)}canFormatFeatureProperties(){return false}createField({fieldName:fieldName}){const field=this.getFieldByName(fieldName);if(!field){throw new Error(`Cannot find field for ${fieldName}`)}return field}async getBoundsForFilters(boundsFilters,registerCancelCallback){return null}getFieldByName(fieldName){const column=this._descriptor.__columns.find(c=>c.name===fieldName);if(!column){return null}return new inline_field_InlineField({fieldName:column.name,source:this,origin:constants["FIELD_ORIGIN"].JOIN,dataType:column.type})}getFields(){throw new Error("must implement")}async getGeoJsonWithMeta(layerName,searchFilters,registerCancelCallback,isRequestStillActive){throw new Error("TableSource cannot return GeoJson")}async getLeftJoinFields(){throw new Error("TableSource cannot be used as a left-layer in a term join")}getSourceTooltipContent(sourceDataRequest){throw new Error("must add tooltip content")}async getSupportedShapeTypes(){return[]}isBoundsAware(){return false}}table_source_defineProperty(table_source_TableSource,"type",constants["SOURCE_TYPES"].TABLE_SOURCE);function inner_join_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createJoinTermSource(descriptor,inspectorAdapters){if(!descriptor){return}if(descriptor.type===constants["SOURCE_TYPES"].ES_TERM_SOURCE&&"indexPatternId"in descriptor&&"term"in descriptor){return new es_term_source_ESTermSource(descriptor,inspectorAdapters)}else if(descriptor.type===constants["SOURCE_TYPES"].TABLE_SOURCE){return new table_source_TableSource(descriptor,inspectorAdapters)}}class inner_join_InnerJoin{constructor(joinDescriptor,leftSource){inner_join_defineProperty(this,"_descriptor",void 0);inner_join_defineProperty(this,"_rightSource",void 0);inner_join_defineProperty(this,"_leftField",void 0);this._descriptor=joinDescriptor;const inspectorAdapters=leftSource.getInspectorAdapters();this._rightSource=createJoinTermSource(this._descriptor.right,inspectorAdapters);this._leftField=joinDescriptor.leftField?leftSource.createField({fieldName:joinDescriptor.leftField}):undefined}destroy(){if(this._rightSource){this._rightSource.destroy()}}hasCompleteConfig(){return this._leftField&&this._rightSource?this._rightSource.hasCompleteConfig():false}getJoinFields(){return this._rightSource?this._rightSource.getRightFields():[]}getSourceDataRequestId(){return`join_source_${this._rightSource.getId()}`}getSourceMetaDataRequestId(){return`${this.getSourceDataRequestId()}_${constants["META_DATA_REQUEST_ID_SUFFIX"]}`}getSourceFormattersDataRequestId(){return`${this.getSourceDataRequestId()}_${constants["FORMATTERS_DATA_REQUEST_ID_SUFFIX"]}`}getLeftField(){if(!this._leftField){throw new Error("Cannot get leftField from InnerJoin with incomplete config")}return this._leftField}joinPropertiesToFeature(feature,propertiesMap){if(!feature.properties||!this._leftField||!this._rightSource){return false}const rightMetricFields=this._rightSource.getRightFields();for(let j=0;j<rightMetricFields.length;j++){const metricPropertyKey=rightMetricFields[j].getName();delete feature.properties[metricPropertyKey];const stylePropertyPrefix=getComputedFieldNamePrefix(metricPropertyKey);Object.keys(feature.properties).forEach(featurePropertyKey=>{if(featurePropertyKey.length>=stylePropertyPrefix.length&&featurePropertyKey.substring(0,stylePropertyPrefix.length)===stylePropertyPrefix){delete feature.properties[featurePropertyKey]}})}const joinKey=feature.properties[this._leftField.getName()];const coercedKey=typeof joinKey==="undefined"||joinKey===null?null:joinKey.toString();if(coercedKey!==null&&propertiesMap.has(coercedKey)){Object.assign(feature.properties,propertiesMap.get(coercedKey));return true}else{return false}}getRightJoinSource(){if(!this._rightSource){throw new Error("Cannot get rightSource from InnerJoin with incomplete config")}return this._rightSource}toDescriptor(){return this._descriptor}async getTooltipProperties(properties){return await this.getRightJoinSource().getTooltipProperties(properties)}getIndexPatternIds(){return this.getRightJoinSource().getIndexPatternIds()}getQueryableIndexPatternIds(){return this.getRightJoinSource().getQueryableIndexPatternIds()}getWhereQuery(){return this.getRightJoinSource().getWhereQuery()}}function getFeatureCollection(geoJson){if(!geoJson){return constants["EMPTY_FEATURE_COLLECTION"]}if(geoJson.type==="FeatureCollection"){return geoJson}if(geoJson.type==="Feature"){return{type:"FeatureCollection",features:[geoJson]}}return constants["EMPTY_FEATURE_COLLECTION"]}class geojson_file_source_GeoJsonFileSource extends vector_source_AbstractVectorSource{static createDescriptor(descriptor){return{type:constants["SOURCE_TYPES"].GEOJSON_FILE,__featureCollection:getFeatureCollection(descriptor.__featureCollection),__fields:descriptor.__fields||[],name:descriptor.name||"Features"}}constructor(descriptor,inspectorAdapters){const normalizedDescriptor=geojson_file_source_GeoJsonFileSource.createDescriptor(descriptor);super(normalizedDescriptor,inspectorAdapters)}_getFields(){const fields=this._descriptor.__fields;return fields?fields:[]}createField({fieldName:fieldName}){const fields=this._getFields();const descriptor=fields.find(field=>field.name===fieldName);if(!descriptor){throw new Error(`Cannot find corresponding field ${fieldName} in __fields array ${JSON.stringify(this._getFields())} `)}return new inline_field_InlineField({fieldName:descriptor.name,source:this,origin:constants["FIELD_ORIGIN"].SOURCE,dataType:descriptor.type})}async getFields(){const fields=this._getFields();return fields.map(field=>new inline_field_InlineField({fieldName:field.name,source:this,origin:constants["FIELD_ORIGIN"].SOURCE,dataType:field.type}))}isBoundsAware(){return true}async getBoundsForFilters(boundsFilters,registerCancelCallback){const featureCollection=this._descriptor.__featureCollection;return getFeatureCollectionBounds(featureCollection,false)}async getGeoJsonWithMeta(){return{data:this._descriptor.__featureCollection,meta:{}}}async getDisplayName(){return this._descriptor.name}canFormatFeatureProperties(){return true}}registerSource({ConstructorFunction:geojson_file_source_GeoJsonFileSource,type:constants["SOURCE_TYPES"].GEOJSON_FILE});function createLayerInstance(layerDescriptor,inspectorAdapters,chartsPaletteServiceGetColor){const source=createSourceInstance(layerDescriptor.sourceDescriptor,inspectorAdapters);switch(layerDescriptor.type){case tile_layer_TileLayer.type:return new tile_layer_TileLayer({layerDescriptor:layerDescriptor,source:source});case vector_layer_VectorLayer.type:const joins=[];const vectorLayerDescriptor=layerDescriptor;if(vectorLayerDescriptor.joins){vectorLayerDescriptor.joins.forEach(joinDescriptor=>{const join=new inner_join_InnerJoin(joinDescriptor,source);joins.push(join)})}return new vector_layer_VectorLayer({layerDescriptor:vectorLayerDescriptor,source:source,joins:joins,chartsPaletteServiceGetColor:chartsPaletteServiceGetColor});case vector_tile_layer_VectorTileLayer.type:return new vector_tile_layer_VectorTileLayer({layerDescriptor:layerDescriptor,source:source});case heatmap_layer_HeatmapLayer.type:return new heatmap_layer_HeatmapLayer({layerDescriptor:layerDescriptor,source:source});case blended_vector_layer_BlendedVectorLayer.type:return new blended_vector_layer_BlendedVectorLayer({layerDescriptor:layerDescriptor,source:source,chartsPaletteServiceGetColor:chartsPaletteServiceGetColor});case tiled_vector_layer_TiledVectorLayer.type:return new tiled_vector_layer_TiledVectorLayer({layerDescriptor:layerDescriptor,source:source});default:throw new Error(`Unrecognized layerType ${layerDescriptor.type}`)}}function createSourceInstance(sourceDescriptor,inspectorAdapters){if(sourceDescriptor===null){throw new Error("Source-descriptor should be initialized")}const source=getSourceByType(sourceDescriptor.type);if(!source){throw new Error(`Unrecognized sourceType ${sourceDescriptor.type}`)}return new source.ConstructorFunction(sourceDescriptor,inspectorAdapters)}const getMapSettings=({map:map})=>map.settings;const getRollbackMapSettings=({map:map})=>map.__rollbackSettings;const map_selectors_hasMapSettingsChanges=Object(reselect_lib["createSelector"])(getMapSettings,getRollbackMapSettings,(settings,rollbackSettings)=>rollbackSettings?!external_kbnSharedDeps_Lodash_default.a.isEqual(settings,rollbackSettings):false);const getOpenTooltips=({map:map})=>map&&map.openTooltips?map.openTooltips:[];const getHasLockedTooltips=state=>getOpenTooltips(state).some(({isLocked:isLocked})=>isLocked);const getMapReady=({map:map})=>map&&map.ready;const getMapInitError=({map:map})=>map.mapInitError;const getGoto=({map:map})=>map&&map.goto;const getSelectedLayerId=({map:map})=>!map.selectedLayerId||!map.layerList?null:map.selectedLayerId;const getLayerListRaw=({map:map})=>map.layerList?map.layerList:[];const getWaitingForMapReadyLayerListRaw=({map:map})=>map.waitingForMapReadyLayerList?map.waitingForMapReadyLayerList:[];const getScrollZoom=({map:map})=>map.mapState.scrollZoom;const getMapExtent=({map:map})=>map.mapState.extent;const getMapBuffer=({map:map})=>map.mapState.buffer;const getMapZoom=({map:map})=>map.mapState.zoom?map.mapState.zoom:0;const getMapCenter=({map:map})=>map.mapState.center?map.mapState.center:{lat:0,lon:0};const getMouseCoordinates=({map:map})=>map.mapState.mouseCoordinates;const getTimeFilters=({map:map})=>map.mapState.timeFilters?map.mapState.timeFilters:Object(kibana_services["J"])().getTime();const getQuery=({map:map})=>map.mapState.query;const getFilters=({map:map})=>map.mapState.filters;const getSearchSessionId=({map:map})=>map.mapState.searchSessionId;const getSearchSessionMapBuffer=({map:map})=>map.mapState.searchSessionMapBuffer;const isUsingSearch=state=>{const filters=getFilters(state).filter(filter=>!filter.meta.disabled);const queryString=external_kbnSharedDeps_Lodash_default.a.get(getQuery(state),"query","");return!!filters.length||!!queryString.length};const getDrawState=({map:map})=>map.mapState.drawState;const isDrawingFilter=({map:map})=>!!map.mapState.drawState;const getRefreshConfig=({map:map})=>{if(map.mapState.refreshConfig){return map.mapState.refreshConfig}const refreshInterval=Object(kibana_services["J"])().getRefreshInterval();return{isPaused:refreshInterval.pause,interval:refreshInterval.value}};const getRefreshTimerLastTriggeredAt=({map:map})=>map.mapState.refreshTimerLastTriggeredAt;function getLayerDescriptor(state,layerId){const layerListRaw=getLayerListRaw(state);return layerListRaw.find(layer=>layer.id===layerId)}function getDataRequestDescriptor(state,layerId,dataId){const layerDescriptor=getLayerDescriptor(state,layerId);if(!layerDescriptor||!layerDescriptor.__dataRequests){return}return layerDescriptor.__dataRequests.find(dataRequest=>dataRequest.dataId===dataId)}const getDataFilters=Object(reselect_lib["createSelector"])(getMapExtent,getMapBuffer,getMapZoom,getTimeFilters,getRefreshTimerLastTriggeredAt,getQuery,getFilters,getSearchSessionId,getSearchSessionMapBuffer,(mapExtent,mapBuffer,mapZoom,timeFilters,refreshTimerLastTriggeredAt,query,filters,searchSessionId,searchSessionMapBuffer)=>({extent:mapExtent,buffer:searchSessionId&&searchSessionMapBuffer?searchSessionMapBuffer:mapBuffer,zoom:mapZoom,timeFilters:timeFilters,refreshTimerLastTriggeredAt:refreshTimerLastTriggeredAt,query:query,filters:filters,searchSessionId:searchSessionId}));const getSpatialFiltersLayer=Object(reselect_lib["createSelector"])(getFilters,getMapSettings,(filters,settings)=>{const featureCollection={type:"FeatureCollection",features:extractFeaturesFromFilters(filters)};const geoJsonSourceDescriptor=geojson_file_source_GeoJsonFileSource.createDescriptor({__featureCollection:featureCollection,name:"spatialFilters"});return new vector_layer_VectorLayer({layerDescriptor:vector_layer_VectorLayer.createDescriptor({id:constants["SPATIAL_FILTERS_LAYER_ID"],visible:settings.showSpatialFilters,alpha:settings.spatialFiltersAlpa,__dataRequests:[{dataId:constants["SOURCE_DATA_REQUEST_ID"],data:featureCollection}],style:vector_style_VectorStyle.createDescriptor({[constants["VECTOR_STYLES"].FILL_COLOR]:{type:constants["STYLE_TYPE"].STATIC,options:{color:settings.spatialFiltersFillColor}},[constants["VECTOR_STYLES"].LINE_COLOR]:{type:constants["STYLE_TYPE"].STATIC,options:{color:settings.spatialFiltersLineColor}}})}),source:new geojson_file_source_GeoJsonFileSource(geoJsonSourceDescriptor)})});const getLayerList=Object(reselect_lib["createSelector"])(getLayerListRaw,getInspectorAdapters,getChartsPaletteServiceGetColor,(layerDescriptorList,inspectorAdapters,chartsPaletteServiceGetColor)=>layerDescriptorList.map(layerDescriptor=>createLayerInstance(layerDescriptor,inspectorAdapters,chartsPaletteServiceGetColor)));const getLayerListConfigOnly=Object(reselect_lib["createSelector"])(getLayerListRaw,layerDescriptorList=>copyPersistentState(layerDescriptorList));function getLayerById(layerId,state){return getLayerList(state).find(layer=>layerId===layer.getId())}const getHiddenLayerIds=Object(reselect_lib["createSelector"])(getLayerListRaw,layers=>layers.filter(layer=>!layer.visible).map(layer=>layer.id));const getSelectedLayer=Object(reselect_lib["createSelector"])(getSelectedLayerId,getLayerList,(selectedLayerId,layerList)=>layerList.find(layer=>layer.getId()===selectedLayerId));const hasPreviewLayers=Object(reselect_lib["createSelector"])(getLayerList,layerList=>layerList.some(layer=>layer.isPreviewLayer()));const isLoadingPreviewLayers=Object(reselect_lib["createSelector"])(getLayerList,layerList=>layerList.some(layer=>layer.isPreviewLayer()&&layer.isLayerLoading()));const getMapColors=Object(reselect_lib["createSelector"])(getLayerListRaw,layerList=>layerList.filter(layerDescriptor=>!layerDescriptor.__isPreviewLayer).reduce((accu,layerDescriptor)=>{const color=external_kbnSharedDeps_Lodash_default.a.get(layerDescriptor,"style.properties.fillColor.options.color");if(color)accu.push(color);return accu},[]));const getSelectedLayerJoinDescriptors=Object(reselect_lib["createSelector"])(getSelectedLayer,selectedLayer=>{if(!selectedLayer||!("getJoins"in selectedLayer)){return[]}return selectedLayer.getJoins().map(join=>join.toDescriptor())});const getUniqueIndexPatternIds=Object(reselect_lib["createSelector"])(getLayerList,layerList=>{const indexPatternIds=[];layerList.forEach(layer=>{indexPatternIds.push(...layer.getIndexPatternIds())});return external_kbnSharedDeps_Lodash_default.a.uniq(indexPatternIds).sort()});const getQueryableUniqueIndexPatternIds=Object(reselect_lib["createSelector"])(getLayerList,getWaitingForMapReadyLayerListRaw,(layerList,waitingForMapReadyLayerList)=>{const indexPatternIds=[];if(waitingForMapReadyLayerList.length){waitingForMapReadyLayerList.forEach(layerDescriptor=>{const layer=createLayerInstance(layerDescriptor);indexPatternIds.push(...layer.getQueryableIndexPatternIds())})}else{layerList.forEach(layer=>{indexPatternIds.push(...layer.getQueryableIndexPatternIds())})}return external_kbnSharedDeps_Lodash_default.a.uniq(indexPatternIds)});const hasDirtyState=Object(reselect_lib["createSelector"])(getLayerListRaw,layerListRaw=>layerListRaw.some(layerDescriptor=>{if(layerDescriptor.__isPreviewLayer){return true}const trackedState=layerDescriptor[TRACKED_LAYER_DESCRIPTOR];if(!trackedState){return false}const currentState=copyPersistentState(layerDescriptor);return!external_kbnSharedDeps_Lodash_default.a.isEqual(currentState,trackedState)}));const areLayersLoaded=Object(reselect_lib["createSelector"])(getLayerList,getWaitingForMapReadyLayerListRaw,getMapZoom,(layerList,waitingForMapReadyLayerList,zoom)=>{if(waitingForMapReadyLayerList.length){return false}for(let i=0;i<layerList.length;i++){const layer=layerList[i];if(layer.isVisible()&&layer.showAtZoomLevel(zoom)&&!layer.hasErrors()&&!layer.isInitialDataLoadComplete()){return false}}return true});const SET_SELECTED_LAYER="SET_SELECTED_LAYER";const UPDATE_LAYER_ORDER="UPDATE_LAYER_ORDER";const ADD_LAYER="ADD_LAYER";const SET_LAYER_ERROR_STATUS="SET_LAYER_ERROR_STATUS";const ADD_WAITING_FOR_MAP_READY_LAYER="ADD_WAITING_FOR_MAP_READY_LAYER";const CLEAR_WAITING_FOR_MAP_READY_LAYER_LIST="CLEAR_WAITING_FOR_MAP_READY_LAYER_LIST";const REMOVE_LAYER="REMOVE_LAYER";const SET_LAYER_VISIBILITY="SET_LAYER_VISIBILITY";const MAP_EXTENT_CHANGED="MAP_EXTENT_CHANGED";const MAP_READY="MAP_READY";const MAP_DESTROYED="MAP_DESTROYED";const LAYER_DATA_LOAD_STARTED="LAYER_DATA_LOAD_STARTED";const LAYER_DATA_LOAD_ENDED="LAYER_DATA_LOAD_ENDED";const LAYER_DATA_LOAD_ERROR="LAYER_DATA_LOAD_ERROR";const UPDATE_SOURCE_DATA_REQUEST="UPDATE_SOURCE_DATA_REQUEST";const SET_JOINS="SET_JOINS";const SET_QUERY="SET_QUERY";const TRIGGER_REFRESH_TIMER="TRIGGER_REFRESH_TIMER";const UPDATE_LAYER_PROP="UPDATE_LAYER_PROP";const UPDATE_LAYER_STYLE="UPDATE_LAYER_STYLE";const SET_LAYER_STYLE_META="SET_LAYER_STYLE_META";const UPDATE_SOURCE_PROP="UPDATE_SOURCE_PROP";const SET_REFRESH_CONFIG="SET_REFRESH_CONFIG";const SET_MOUSE_COORDINATES="SET_MOUSE_COORDINATES";const CLEAR_MOUSE_COORDINATES="CLEAR_MOUSE_COORDINATES";const SET_GOTO="SET_GOTO";const CLEAR_GOTO="CLEAR_GOTO";const TRACK_CURRENT_LAYER_STATE="TRACK_CURRENT_LAYER_STATE";const ROLLBACK_TO_TRACKED_LAYER_STATE="ROLLBACK_TO_TRACKED_LAYER_STATE";const REMOVE_TRACKED_LAYER_STATE="REMOVE_TRACKED_LAYER_STATE";const SET_OPEN_TOOLTIPS="SET_OPEN_TOOLTIPS";const UPDATE_DRAW_STATE="UPDATE_DRAW_STATE";const SET_SCROLL_ZOOM="SET_SCROLL_ZOOM";const SET_MAP_INIT_ERROR="SET_MAP_INIT_ERROR";const SET_WAITING_FOR_READY_HIDDEN_LAYERS="SET_WAITING_FOR_READY_HIDDEN_LAYERS";const SET_MAP_SETTINGS="SET_MAP_SETTINGS";const ROLLBACK_MAP_SETTINGS="ROLLBACK_MAP_SETTINGS";const TRACK_MAP_SETTINGS="TRACK_MAP_SETTINGS";const UPDATE_MAP_SETTING="UPDATE_MAP_SETTING";function closeOnClickTooltip(tooltipId){return(dispatch,getState)=>{dispatch({type:SET_OPEN_TOOLTIPS,openTooltips:getOpenTooltips(getState()).filter(({id:id})=>tooltipId!==id)})}}function openOnClickTooltip(tooltipState){return(dispatch,getState)=>{const openTooltips=getOpenTooltips(getState()).filter(({features:features,location:location,isLocked:isLocked})=>isLocked&&!external_kbnSharedDeps_Lodash_default.a.isEqual(location,tooltipState.location)&&!external_kbnSharedDeps_Lodash_default.a.isEqual(features,tooltipState.features));openTooltips.push({...tooltipState,isLocked:true,id:v4_default()()});dispatch({type:SET_OPEN_TOOLTIPS,openTooltips:openTooltips})}}function closeOnHoverTooltip(){return(dispatch,getState)=>{if(getOpenTooltips(getState()).length){dispatch({type:SET_OPEN_TOOLTIPS,openTooltips:[]})}}}function openOnHoverTooltip(tooltipState){return{type:SET_OPEN_TOOLTIPS,openTooltips:[{...tooltipState,isLocked:false,id:v4_default()()}]}}function cleanTooltipStateForLayer(layerId,layerFeatures=[]){return(dispatch,getState)=>{let featuresRemoved=false;const openTooltips=getOpenTooltips(getState()).map(tooltipState=>{const nextFeatures=tooltipState.features.filter(tooltipFeature=>{if(tooltipFeature.layerId!==layerId){return true}return layerFeatures.some(layerFeature=>layerFeature.properties[constants["FEATURE_ID_PROPERTY_NAME"]]===tooltipFeature.id)});if(tooltipState.features.length!==nextFeatures.length){featuresRemoved=true}return{...tooltipState,features:nextFeatures}}).filter(tooltipState=>tooltipState.features.length>0);if(featuresRemoved){dispatch({type:SET_OPEN_TOOLTIPS,openTooltips:openTooltips})}}}const FIT_TO_BOUNDS_SCALE_FACTOR=.1;function clearDataRequests(layer){return dispatch=>{layer.getInFlightRequestTokens().forEach(requestToken=>{dispatch(cancelRequest(requestToken))});dispatch({type:UPDATE_LAYER_PROP,id:layer.getId(),propName:"__dataRequests",newValue:[]})}}function cancelAllInFlightRequests(){return(dispatch,getState)=>{getLayerList(getState()).forEach(layer=>{dispatch(clearDataRequests(layer))})}}function updateStyleMeta(layerId){return async(dispatch,getState)=>{const layer=getLayerById(layerId,getState());if(!layer){return}const sourceDataRequest=layer.getSourceDataRequest();const style=layer.getCurrentStyle();if(!style||!sourceDataRequest||style.getType()!==constants["LAYER_STYLE_TYPE"].VECTOR){return}const styleMeta=await style.pluckStyleMetaFromSourceDataRequest(sourceDataRequest);dispatch({type:SET_LAYER_STYLE_META,layerId:layerId,styleMeta:styleMeta})}}function getDataRequestContext(dispatch,getState,layerId){return{dataFilters:getDataFilters(getState()),startLoading:(dataId,requestToken,meta)=>dispatch(startDataLoad(layerId,dataId,requestToken,meta)),stopLoading:(dataId,requestToken,data,meta)=>dispatch(endDataLoad(layerId,dataId,requestToken,data,meta)),onLoadError:(dataId,requestToken,errorMessage)=>dispatch(onDataLoadError(layerId,dataId,requestToken,errorMessage)),updateSourceData:newData=>{dispatch(updateSourceDataRequest(layerId,newData))},isRequestStillActive:(dataId,requestToken)=>{const dataRequest=getDataRequestDescriptor(getState(),layerId,dataId);if(!dataRequest){return false}return dataRequest.dataRequestToken===requestToken},registerCancelCallback:(requestToken,callback)=>dispatch(non_serializable_instances_registerCancelCallback(requestToken,callback))}}function syncDataForAllLayers(){return async(dispatch,getState)=>{const syncPromises=getLayerList(getState()).map(layer=>dispatch(syncDataForLayer(layer)));await Promise.all(syncPromises)}}function syncDataForAllJoinLayers(){return async(dispatch,getState)=>{const syncPromises=getLayerList(getState()).filter(layer=>"hasJoins"in layer?layer.hasJoins():false).map(layer=>dispatch(syncDataForLayer(layer)));await Promise.all(syncPromises)}}function syncDataForLayer(layer){return async(dispatch,getState)=>{const dataRequestContext=getDataRequestContext(dispatch,getState,layer.getId());if(!layer.isVisible()||!layer.showAtZoomLevel(dataRequestContext.dataFilters.zoom)){return}await layer.syncData(dataRequestContext)}}function syncDataForLayerId(layerId){return async(dispatch,getState)=>{const layer=getLayerById(layerId,getState());if(layer){dispatch(syncDataForLayer(layer))}}}function setLayerDataLoadErrorStatus(layerId,errorMessage){return dispatch=>{dispatch({type:SET_LAYER_ERROR_STATUS,isInErrorState:errorMessage!==null,layerId:layerId,errorMessage:errorMessage})}}function startDataLoad(layerId,dataId,requestToken,meta){return(dispatch,getState)=>{const layer=getLayerById(layerId,getState());if(layer){dispatch(cancelRequest(layer.getPrevRequestToken(dataId)))}const eventHandlers=getEventHandlers(getState());if(eventHandlers&&eventHandlers.onDataLoad){eventHandlers.onDataLoad({layerId:layerId,dataId:dataId})}dispatch({meta:meta,type:LAYER_DATA_LOAD_STARTED,layerId:layerId,dataId:dataId,requestToken:requestToken})}}function endDataLoad(layerId,dataId,requestToken,data,meta){return(dispatch,getState)=>{dispatch(unregisterCancelCallback(requestToken));const dataRequest=getDataRequestDescriptor(getState(),layerId,dataId);if(dataRequest&&dataRequest.dataRequestToken!==requestToken){throw new DataRequestAbortError}const features=data&&"features"in data?data.features:[];const eventHandlers=getEventHandlers(getState());if(eventHandlers&&eventHandlers.onDataLoadEnd){const layer=getLayerById(layerId,getState());const resultMeta={};if(layer&&layer.getType()===constants["LAYER_TYPE"].VECTOR){const featuresWithoutCentroids=features.filter(feature=>feature.properties?!feature.properties[constants["KBN_IS_CENTROID_FEATURE"]]:true);resultMeta.featuresCount=featuresWithoutCentroids.length}eventHandlers.onDataLoadEnd({layerId:layerId,dataId:dataId,resultMeta:resultMeta})}dispatch(cleanTooltipStateForLayer(layerId,features));dispatch({type:LAYER_DATA_LOAD_ENDED,layerId:layerId,dataId:dataId,data:data,meta:meta,requestToken:requestToken});dispatch(setLayerDataLoadErrorStatus(layerId,null));dispatch(updateStyleMeta(layerId))}}function onDataLoadError(layerId,dataId,requestToken,errorMessage){return async(dispatch,getState)=>{dispatch(unregisterCancelCallback(requestToken));const eventHandlers=getEventHandlers(getState());if(eventHandlers&&eventHandlers.onDataLoadError){eventHandlers.onDataLoadError({layerId:layerId,dataId:dataId,errorMessage:errorMessage})}dispatch(cleanTooltipStateForLayer(layerId));dispatch({type:LAYER_DATA_LOAD_ERROR,data:null,layerId:layerId,dataId:dataId,requestToken:requestToken});dispatch(setLayerDataLoadErrorStatus(layerId,errorMessage))}}function updateSourceDataRequest(layerId,newData){return dispatch=>{dispatch({type:UPDATE_SOURCE_DATA_REQUEST,dataId:constants["SOURCE_DATA_REQUEST_ID"],layerId:layerId,newData:newData});dispatch(updateStyleMeta(layerId))}}function fitToLayerExtent(layerId){return async(dispatch,getState)=>{const targetLayer=getLayerById(layerId,getState());if(targetLayer){try{const bounds=await targetLayer.getBounds(getDataRequestContext(dispatch,getState,layerId));if(bounds){await dispatch(setGotoWithBounds(scaleBounds(bounds,FIT_TO_BOUNDS_SCALE_FACTOR)))}}catch(error){if(!(error instanceof DataRequestAbortError)){console.warn("Unhandled getBounds error for layer. Only DataRequestAbortError should be surfaced",error)}return}}}}function fitToDataBounds(onNoBounds){return async(dispatch,getState)=>{const layerList=getLayerList(getState());if(!layerList.length){return}const boundsPromises=layerList.map(async layer=>{if(!await layer.isFittable()){return null}return layer.getBounds(getDataRequestContext(dispatch,getState,layer.getId()))});let bounds;try{bounds=await Promise.all(boundsPromises)}catch(error){if(!(error instanceof DataRequestAbortError)){console.warn("Unhandled getBounds error for layer. Only DataRequestAbortError should be surfaced",error)}return}const corners=[];for(let i=0;i<bounds.length;i++){const b=bounds[i];if(b===null||b.minLon===Infinity||b.maxLon===Infinity||b.minLat===-Infinity||b.maxLat===-Infinity){continue}corners.push([b.minLon,b.minLat]);corners.push([b.maxLon,b.maxLat])}if(!corners.length){if(onNoBounds){onNoBounds()}return}const dataBounds=turfBboxToBounds(bbox_default()(Object(helpers["multiPoint"])(corners)));dispatch(setGotoWithBounds(scaleBounds(dataBounds,FIT_TO_BOUNDS_SCALE_FACTOR)))}}let lastSetQueryCallId="";function autoFitToBounds(){return async dispatch=>{const localSetQueryCallId=v4_default()();lastSetQueryCallId=localSetQueryCallId;await dispatch(syncDataForAllJoinLayers());if(localSetQueryCallId===lastSetQueryCallId){function onNoBounds(){if(localSetQueryCallId===lastSetQueryCallId){dispatch(syncDataForAllLayers())}}dispatch(fitToDataBounds(onNoBounds))}}}function setGotoWithBounds(bounds){return{type:SET_GOTO,bounds:bounds}}function trackCurrentLayerState(layerId){return{type:TRACK_CURRENT_LAYER_STATE,layerId:layerId}}function rollbackToTrackedLayerStateForSelectedLayer(){return async(dispatch,getState)=>{const layerId=getSelectedLayerId(getState());await dispatch({type:ROLLBACK_TO_TRACKED_LAYER_STATE,layerId:layerId});dispatch(updateStyleMeta(layerId));dispatch(syncDataForLayerId(layerId))}}function removeTrackedLayerStateForSelectedLayer(){return(dispatch,getState)=>{const layerId=getSelectedLayerId(getState());dispatch({type:REMOVE_TRACKED_LAYER_STATE,layerId:layerId})}}function replaceLayerList(newLayerList){return(dispatch,getState)=>{const isMapReady=getMapReady(getState());if(!isMapReady){dispatch({type:CLEAR_WAITING_FOR_MAP_READY_LAYER_LIST})}else{getLayerListRaw(getState()).forEach(({id:id})=>{dispatch(removeLayerFromLayerList(id))})}newLayerList.forEach(layerDescriptor=>{dispatch(layer_actions_addLayer(layerDescriptor))})}}function cloneLayer(layerId){return async(dispatch,getState)=>{const layer=getLayerById(layerId,getState());if(!layer){return}const clonedDescriptor=await layer.cloneDescriptor();dispatch(layer_actions_addLayer(clonedDescriptor))}}function layer_actions_addLayer(layerDescriptor){return async(dispatch,getState)=>{const isMapReady=getMapReady(getState());if(!isMapReady){dispatch({type:ADD_WAITING_FOR_MAP_READY_LAYER,layer:layerDescriptor});return}dispatch({type:ADD_LAYER,layer:layerDescriptor});dispatch(syncDataForLayerId(layerDescriptor.id));const layer=createLayerInstance(layerDescriptor);const features=await layer.getLicensedFeatures();features.forEach(licensed_features["e"])}}function addLayerWithoutDataSync(layerDescriptor){return{type:ADD_LAYER,layer:layerDescriptor}}function addPreviewLayers(layerDescriptors){return dispatch=>{dispatch(removePreviewLayers());layerDescriptors.forEach(layerDescriptor=>{dispatch(layer_actions_addLayer({...layerDescriptor,__isPreviewLayer:true}))})}}function removePreviewLayers(){return(dispatch,getState)=>{getLayerList(getState()).forEach(layer=>{if(layer.isPreviewLayer()){dispatch(layer_actions_removeLayer(layer.getId()))}})}}function promotePreviewLayers(){return(dispatch,getState)=>{getLayerList(getState()).forEach(layer=>{if(layer.isPreviewLayer()){dispatch({type:UPDATE_LAYER_PROP,id:layer.getId(),propName:"__isPreviewLayer",newValue:false})}})}}function setLayerVisibility(layerId,makeVisible){return(dispatch,getState)=>{const layer=getLayerById(layerId,getState());if(!layer||layer.isVisible()===makeVisible){return}if(!makeVisible){dispatch(cleanTooltipStateForLayer(layerId))}dispatch({type:SET_LAYER_VISIBILITY,layerId:layerId,visibility:makeVisible});if(makeVisible){dispatch(syncDataForLayerId(layerId))}}}function toggleLayerVisible(layerId){return(dispatch,getState)=>{const layer=getLayerById(layerId,getState());if(!layer){return}const makeVisible=!layer.isVisible();dispatch(setLayerVisibility(layerId,makeVisible))}}function setSelectedLayer(layerId){return async(dispatch,getState)=>{const oldSelectedLayer=getSelectedLayerId(getState());if(oldSelectedLayer){await dispatch(rollbackToTrackedLayerStateForSelectedLayer())}if(layerId){dispatch(trackCurrentLayerState(layerId))}dispatch({type:SET_SELECTED_LAYER,selectedLayerId:layerId})}}function setFirstPreviewLayerToSelectedLayer(){return async(dispatch,getState)=>{const firstPreviewLayer=getLayerList(getState()).find(layer=>layer.isPreviewLayer());if(firstPreviewLayer){dispatch(setSelectedLayer(firstPreviewLayer.getId()))}}}function updateLayerOrder(newLayerOrder){return{type:UPDATE_LAYER_ORDER,newLayerOrder:newLayerOrder}}function updateMetricsProp(layerId,value){return async(dispatch,getState)=>{const layer=getLayerById(layerId,getState());const previousFields=await layer.getFields();await dispatch({type:UPDATE_SOURCE_PROP,layerId:layerId,propName:"metrics",value:value});await dispatch(updateStyleProperties(layerId,previousFields));dispatch(syncDataForLayerId(layerId))}}function updateSourceProp(layerId,propName,value,newLayerType){return async dispatch=>{if(propName==="metrics"){if(newLayerType){throw new Error("May not change layer-type when modifying metrics source-property")}return await dispatch(updateMetricsProp(layerId,value))}dispatch({type:UPDATE_SOURCE_PROP,layerId:layerId,propName:propName,value:value});if(newLayerType){dispatch(updateLayerType(layerId,newLayerType))}dispatch(syncDataForLayerId(layerId))}}function updateLayerType(layerId,newLayerType){return(dispatch,getState)=>{const layer=getLayerById(layerId,getState());if(!layer||layer.getType()===newLayerType){return}dispatch(clearDataRequests(layer));dispatch({type:UPDATE_LAYER_PROP,id:layerId,propName:"type",newValue:newLayerType})}}function updateLayerLabel(id,newLabel){return{type:UPDATE_LAYER_PROP,id:id,propName:"label",newValue:newLabel}}function updateLayerMinZoom(id,minZoom){return{type:UPDATE_LAYER_PROP,id:id,propName:"minZoom",newValue:minZoom}}function updateLayerMaxZoom(id,maxZoom){return{type:UPDATE_LAYER_PROP,id:id,propName:"maxZoom",newValue:maxZoom}}function updateLayerAlpha(id,alpha){return{type:UPDATE_LAYER_PROP,id:id,propName:"alpha",newValue:alpha}}function updateLabelsOnTop(id,areLabelsOnTop){return{type:UPDATE_LAYER_PROP,id:id,propName:"areLabelsOnTop",newValue:areLabelsOnTop}}function setLayerQuery(id,query){return dispatch=>{dispatch({type:UPDATE_LAYER_PROP,id:id,propName:"query",newValue:query});dispatch(syncDataForLayerId(id))}}function removeSelectedLayer(){return(dispatch,getState)=>{const state=getState();const layerId=getSelectedLayerId(state);if(layerId){dispatch(layer_actions_removeLayer(layerId))}}}function layer_actions_removeLayer(layerId){return async(dispatch,getState)=>{const state=getState();const selectedLayerId=getSelectedLayerId(state);if(layerId===selectedLayerId){dispatch(updateFlyout(FLYOUT_STATE.NONE));await dispatch(setSelectedLayer(null))}dispatch(removeLayerFromLayerList(layerId))}}function removeLayerFromLayerList(layerId){return(dispatch,getState)=>{const layerGettingRemoved=getLayerById(layerId,getState());if(!layerGettingRemoved){return}layerGettingRemoved.getInFlightRequestTokens().forEach(requestToken=>{dispatch(cancelRequest(requestToken))});dispatch(cleanTooltipStateForLayer(layerId));layerGettingRemoved.destroy();dispatch({type:REMOVE_LAYER,id:layerId})}}function updateStyleProperties(layerId,previousFields){return async(dispatch,getState)=>{const targetLayer=getLayerById(layerId,getState());if(!targetLayer||!("getFields"in targetLayer)){return}const style=targetLayer.getCurrentStyle();if(!style||style.getType()!==constants["LAYER_STYLE_TYPE"].VECTOR){return}const nextFields=await targetLayer.getFields();const{hasChanges:hasChanges,nextStyleDescriptor:nextStyleDescriptor}=await style.getDescriptorWithUpdatedStyleProps(nextFields,previousFields,getMapColors(getState()));if(hasChanges&&nextStyleDescriptor){dispatch(updateLayerStyle(layerId,nextStyleDescriptor))}}}function updateLayerStyle(layerId,styleDescriptor){return dispatch=>{dispatch({type:UPDATE_LAYER_STYLE,layerId:layerId,style:{...styleDescriptor}});dispatch(updateStyleMeta(layerId));dispatch(syncDataForLayerId(layerId))}}function updateLayerStyleForSelectedLayer(styleDescriptor){return(dispatch,getState)=>{const selectedLayerId=getSelectedLayerId(getState());if(!selectedLayerId){return}dispatch(updateLayerStyle(selectedLayerId,styleDescriptor))}}function setJoinsForLayer(layer,joins){return async dispatch=>{const previousFields=await layer.getFields();await dispatch({type:SET_JOINS,layer:layer,joins:joins});await dispatch(updateStyleProperties(layer.getId(),previousFields));dispatch(syncDataForLayerId(layer.getId()))}}function setHiddenLayers(hiddenLayerIds){return(dispatch,getState)=>{const isMapReady=getMapReady(getState());if(!isMapReady){dispatch({type:SET_WAITING_FOR_READY_HIDDEN_LAYERS,hiddenLayerIds:hiddenLayerIds})}else{getLayerListRaw(getState()).forEach(layer=>dispatch(setLayerVisibility(layer.id,!hiddenLayerIds.includes(layer.id))))}}}function setMapInitError(errorMessage){return{type:SET_MAP_INIT_ERROR,errorMessage:errorMessage}}function setMapSettings(settings){return{type:SET_MAP_SETTINGS,settings:settings}}function rollbackMapSettings(){return{type:ROLLBACK_MAP_SETTINGS}}function trackMapSettings(){return{type:TRACK_MAP_SETTINGS}}function map_actions_updateMapSetting(settingKey,settingValue){return{type:UPDATE_MAP_SETTING,settingKey:settingKey,settingValue:settingValue}}function mapReady(){return(dispatch,getState)=>{dispatch({type:MAP_READY});const waitingForMapReadyLayerList=getWaitingForMapReadyLayerListRaw(getState());dispatch({type:CLEAR_WAITING_FOR_MAP_READY_LAYER_LIST});if(getMapSettings(getState()).initialLocation===constants["INITIAL_LOCATION"].AUTO_FIT_TO_BOUNDS){waitingForMapReadyLayerList.forEach(layerDescriptor=>{dispatch(addLayerWithoutDataSync(layerDescriptor))});dispatch(autoFitToBounds())}else{waitingForMapReadyLayerList.forEach(layerDescriptor=>{dispatch(layer_actions_addLayer(layerDescriptor))})}}}function mapDestroyed(){return{type:MAP_DESTROYED}}function mapExtentChanged(mapExtentState){return async(dispatch,getState)=>{const dataFilters=getDataFilters(getState());const{extent:extent,zoom:newZoom}=mapExtentState;const{buffer:buffer,zoom:currentZoom}=dataFilters;if(extent){let doesBufferContainExtent=false;if(buffer){const bufferGeometry=bbox_polygon_default()([buffer.minLon,buffer.minLat,buffer.maxLon,buffer.maxLat]);const extentGeometry=bbox_polygon_default()([extent.minLon,extent.minLat,extent.maxLon,extent.maxLat]);doesBufferContainExtent=boolean_contains_default()(bufferGeometry,extentGeometry)}if(!doesBufferContainExtent||currentZoom!==newZoom){dataFilters.buffer=scaleBounds(extent,.5)}}dispatch({type:MAP_EXTENT_CHANGED,mapState:{...dataFilters,...mapExtentState}});if(currentZoom!==newZoom){getLayerList(getState()).map(layer=>{if(!layer.showAtZoomLevel(newZoom)){dispatch(cleanTooltipStateForLayer(layer.getId()))}})}await dispatch(syncDataForAllLayers())}}function setMouseCoordinates({lat:lat,lon:lon}){let safeLon=lon;if(lon>180){const overlapWestOfDateLine=lon-180;safeLon=-180+overlapWestOfDateLine}else if(lon<-180){const overlapEastOfDateLine=Math.abs(lon)-180;safeLon=180-overlapEastOfDateLine}return{type:SET_MOUSE_COORDINATES,lat:lat,lon:safeLon}}function clearMouseCoordinates(){return{type:CLEAR_MOUSE_COORDINATES}}function disableScrollZoom(){return{type:SET_SCROLL_ZOOM,scrollZoom:false}}function setGotoWithCenter({lat:lat,lon:lon,zoom:zoom}){return{type:SET_GOTO,center:{lat:lat,lon:lon,zoom:zoom}}}function map_actions_clearGoto(){return{type:CLEAR_GOTO}}function generateQueryTimestamp(){return(new Date).toISOString()}function setQuery({query:query,timeFilters:timeFilters,filters:filters=[],forceRefresh:forceRefresh=false,searchSessionId:searchSessionId,searchSessionMapBuffer:searchSessionMapBuffer}){return async(dispatch,getState)=>{const prevQuery=getQuery(getState());const prevTriggeredAt=prevQuery&&prevQuery.queryLastTriggeredAt?prevQuery.queryLastTriggeredAt:generateQueryTimestamp();const nextQueryContext={timeFilters:timeFilters?timeFilters:getTimeFilters(getState()),query:{...query?query:getQuery(getState()),queryLastTriggeredAt:forceRefresh?generateQueryTimestamp():prevTriggeredAt},filters:filters?filters:getFilters(getState()),searchSessionId:searchSessionId,searchSessionMapBuffer:searchSessionMapBuffer};const prevQueryContext={timeFilters:getTimeFilters(getState()),query:getQuery(getState()),filters:getFilters(getState()),searchSessionId:getSearchSessionId(getState()),searchSessionMapBuffer:getSearchSessionMapBuffer(getState())};if(external_kbnSharedDeps_Lodash_default.a.isEqual(nextQueryContext,prevQueryContext)){return}dispatch({type:SET_QUERY,...nextQueryContext});if(getMapSettings(getState()).autoFitToDataBounds){dispatch(autoFitToBounds())}else{await dispatch(syncDataForAllLayers())}}}function setRefreshConfig({isPaused:isPaused,interval:interval}){return{type:SET_REFRESH_CONFIG,isPaused:isPaused,interval:interval}}function triggerRefreshTimer(){return async(dispatch,getState)=>{dispatch({type:TRIGGER_REFRESH_TIMER});if(getMapSettings(getState()).autoFitToDataBounds){dispatch(autoFitToBounds())}else{await dispatch(syncDataForAllLayers())}}}function updateDrawState(drawState){return dispatch=>{if(drawState!==null){dispatch({type:SET_OPEN_TOOLTIPS,openTooltips:[]})}dispatch({type:UPDATE_DRAW_STATE,drawState:drawState})}}const UPDATE_FLYOUT="UPDATE_FLYOUT";const CLOSE_SET_VIEW="CLOSE_SET_VIEW";const OPEN_SET_VIEW="OPEN_SET_VIEW";const SET_IS_LAYER_TOC_OPEN="SET_IS_LAYER_TOC_OPEN";const SET_FULL_SCREEN="SET_FULL_SCREEN";const SET_READ_ONLY="SET_READ_ONLY";const SET_OPEN_TOC_DETAILS="SET_OPEN_TOC_DETAILS";const SHOW_TOC_DETAILS="SHOW_TOC_DETAILS";const HIDE_TOC_DETAILS="HIDE_TOC_DETAILS";function ui_actions_exitFullScreen(){return{type:SET_FULL_SCREEN,isFullScreen:false}}function updateFlyout(display){return{type:UPDATE_FLYOUT,display:display}}function ui_actions_openMapSettings(){return(dispatch,getState)=>{const flyoutDisplay=getFlyoutDisplay(getState());if(flyoutDisplay===FLYOUT_STATE.MAP_SETTINGS_PANEL){return}dispatch(setSelectedLayer(null));dispatch(trackMapSettings());dispatch(updateFlyout(FLYOUT_STATE.MAP_SETTINGS_PANEL))}}function closeSetView(){return{type:CLOSE_SET_VIEW}}function openSetView(){return{type:OPEN_SET_VIEW}}function setIsLayerTOCOpen(isLayerTOCOpen){return{type:SET_IS_LAYER_TOC_OPEN,isLayerTOCOpen:isLayerTOCOpen}}function ui_actions_enableFullScreen(){return{type:SET_FULL_SCREEN,isFullScreen:true}}function setReadOnly(isReadOnly){return{type:SET_READ_ONLY,isReadOnly:isReadOnly}}function setOpenTOCDetails(layerIds){return{type:SET_OPEN_TOC_DETAILS,layerIds:layerIds}}function showTOCDetails(layerId){return{type:SHOW_TOC_DETAILS,layerId:layerId}}function hideTOCDetails(layerId){return{type:HIDE_TOC_DETAILS,layerId:layerId}}var classnames=__webpack_require__(70);var classnames_default=__webpack_require__.n(classnames);var mapbox_gl_csp=__webpack_require__(304);var mapbox_gl_csp_default=__webpack_require__.n(mapbox_gl_csp);var sprite_1=__webpack_require__(305);var sprite_1_default=__webpack_require__.n(sprite_1);var sprite_2=__webpack_require__(306);var sprite_2_default=__webpack_require__.n(sprite_2);var mapbox_gl_draw_unminified=__webpack_require__(307);var mapbox_gl_draw_unminified_default=__webpack_require__.n(mapbox_gl_draw_unminified);var dist=__webpack_require__(309);var dist_default=__webpack_require__.n(dist);var _turf_distance=__webpack_require__(95);var distance_default=__webpack_require__.n(_turf_distance);const DrawCircle={onSetup(){const circle=this.newFeature({type:"Feature",properties:{center:null,radiusKm:0},geometry:{type:"Polygon",coordinates:[[]]}});this.addFeature(circle);this.clearSelectedFeatures();this.updateUIClasses({mouse:"add"});this.setActionableState({trash:true});return{circle:circle}},onKeyUp(state,e){if(e.keyCode===27){state.circle.properties.center=null;state.circle.properties.radiusKm=0;state.circle.incomingCoords([[]])}},onClick(state,e){if(!state.circle.properties.center){state.circle.properties.center=[e.lngLat.lng,e.lngLat.lat]}else{this.updateUIClasses({mouse:"pointer"});state.circle.properties.radiusKm=distance_default()(state.circle.properties.center,[e.lngLat.lng,e.lngLat.lat]);this.changeMode("simple_select",{featuresId:state.circle.id})}},onMouseMove(state,e){if(!state.circle.properties.center){return}const mouseLocation=[e.lngLat.lng,e.lngLat.lat];state.circle.properties.radiusKm=distance_default()(state.circle.properties.center,mouseLocation);const newCircleFeature=circle_default()(state.circle.properties.center,state.circle.properties.radiusKm);state.circle.incomingCoords(newCircleFeature.geometry.coordinates)},onStop(state){this.updateUIClasses({mouse:"none"});this.activateUIButton();if(this.getFeature(state.circle.id)===undefined)return;if(state.circle.properties.center&&state.circle.properties.radiusKm>0){this.map.fire("draw.create",{features:[state.circle.toGeoJSON()]})}else{this.deleteFeature([state.circle.id],{silent:true});this.changeMode("simple_select",{},{silent:true})}},toDisplayFeatures(state,geojson,display){if(state.circle.properties.center){geojson.properties.active="true";return display(geojson)}},onTrash(state){this.deleteFeature([state.circle.id],{silent:true});this.changeMode("simple_select")}};function draw_tooltip_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const noop=()=>{};class draw_tooltip_DrawTooltip extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);draw_tooltip_defineProperty(this,"state",{x:undefined,y:undefined,isOpen:false});draw_tooltip_defineProperty(this,"_hideTooltip",()=>{this._updateTooltipLocation.cancel();this.setState({isOpen:false})});draw_tooltip_defineProperty(this,"_updateTooltipLocation",external_kbnSharedDeps_Lodash_default.a.throttle(({lngLat:lngLat})=>{const mouseLocation=this.props.mbMap.project(lngLat);this.setState({isOpen:true,x:mouseLocation.x,y:mouseLocation.y})},100));this._popoverRef=external_kbnSharedDeps_React_default.a.createRef()}componentDidMount(){this.props.mbMap.on("mousemove",this._updateTooltipLocation);this.props.mbMap.on("mouseout",this._hideTooltip)}componentDidUpdate(){if(this._popoverRef.current){this._popoverRef.current.positionPopoverFluid()}}componentWillUnmount(){this.props.mbMap.off("mousemove",this._updateTooltipLocation);this.props.mbMap.off("mouseout",this._hideTooltip);this._updateTooltipLocation.cancel()}render(){let instructions;if(this.props.drawState.drawType===constants["DRAW_TYPE"].BOUNDS){instructions=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.drawTooltip.boundsInstructions",{defaultMessage:"Click to start rectangle. Move mouse to adjust rectangle size. Click again to finish."})}else if(this.props.drawState.drawType===constants["DRAW_TYPE"].DISTANCE){instructions=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.drawTooltip.distanceInstructions",{defaultMessage:"Click to set point. Move mouse to adjust distance. Click to finish."})}else if(this.props.drawState.drawType===constants["DRAW_TYPE"].POLYGON){instructions=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.drawTooltip.polygonInstructions",{defaultMessage:"Click to start shape. Click to add vertex. Double click to finish."})}else{return null}const tooltipAnchor=external_kbnSharedDeps_React_default.a.createElement("div",{style:{height:"26px",width:"26px",background:"transparent"}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"drawInstructionsTooltip",button:tooltipAnchor,anchorPosition:"rightCenter",isOpen:this.state.isOpen,closePopover:noop,ref:this._popoverRef,style:{pointerEvents:"none",transform:`translate(${this.state.x-13}px, ${this.state.y-13}px)`}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued",size:"xs"},instructions))}}function draw_control_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const DRAW_RECTANGLE="draw_rectangle";const DRAW_CIRCLE="draw_circle";const mbDrawModes=mapbox_gl_draw_unminified_default.a.modes;mbDrawModes[DRAW_RECTANGLE]=dist_default.a;mbDrawModes[DRAW_CIRCLE]=DrawCircle;class draw_control_DrawControl extends external_kbnSharedDeps_React_default.a.Component{constructor(){super();draw_control_defineProperty(this,"_syncDrawControl",external_kbnSharedDeps_Lodash_default.a.debounce(()=>{if(!this._isMounted){return}if(this.props.isDrawingFilter){this._updateDrawControl()}else{this._removeDrawControl()}},0));draw_control_defineProperty(this,"_onDraw",async e=>{if(!e.features.length){return}let filter;if(this.props.drawState.drawType===constants["DRAW_TYPE"].DISTANCE){const circle=e.features[0];const distanceKm=external_kbnSharedDeps_Lodash_default.a.round(circle.properties.radiusKm,circle.properties.radiusKm>10?0:2);let precision=2;if(distanceKm<=1){precision=5}else if(distanceKm<=10){precision=4}else if(distanceKm<=100){precision=3}filter=createDistanceFilterWithMeta({alias:this.props.drawState.filterLabel,distanceKm:distanceKm,geoFieldName:this.props.drawState.geoFieldName,indexPatternId:this.props.drawState.indexPatternId,point:[external_kbnSharedDeps_Lodash_default.a.round(circle.properties.center[0],precision),external_kbnSharedDeps_Lodash_default.a.round(circle.properties.center[1],precision)]})}else{const geometry=e.features[0].geometry;roundCoordinates(geometry.coordinates);filter=createSpatialFilterWithGeometry({geometry:this.props.drawState.drawType===constants["DRAW_TYPE"].BOUNDS?getBoundingBoxGeometry(geometry):geometry,indexPatternId:this.props.drawState.indexPatternId,geoFieldName:this.props.drawState.geoFieldName,geoFieldType:this.props.drawState.geoFieldType,geometryLabel:this.props.drawState.geometryLabel,relation:this.props.drawState.relation})}try{await this.props.addFilters([filter],this.props.drawState.actionId)}catch(error){console.error(error)}finally{this.props.disableDrawState()}});this._mbDrawControl=new mapbox_gl_draw_unminified_default.a({displayControlsDefault:false,modes:mbDrawModes});this._mbDrawControlAdded=false}componentDidUpdate(){this._syncDrawControl()}componentDidMount(){this._isMounted=true}componentWillUnmount(){this._isMounted=false;this._removeDrawControl()}_removeDrawControl(){if(!this.props.mbMap||!this._mbDrawControlAdded){return}this.props.mbMap.getCanvas().style.cursor="";this.props.mbMap.off("draw.create",this._onDraw);this.props.mbMap.removeControl(this._mbDrawControl);this._mbDrawControlAdded=false}_updateDrawControl(){if(!this.props.mbMap){return}if(!this._mbDrawControlAdded){this.props.mbMap.addControl(this._mbDrawControl);this._mbDrawControlAdded=true;this.props.mbMap.getCanvas().style.cursor="crosshair";this.props.mbMap.on("draw.create",this._onDraw)}const drawMode=this._mbDrawControl.getMode();if(drawMode!==DRAW_RECTANGLE&&this.props.drawState.drawType===constants["DRAW_TYPE"].BOUNDS){this._mbDrawControl.changeMode(DRAW_RECTANGLE)}else if(drawMode!==DRAW_CIRCLE&&this.props.drawState.drawType===constants["DRAW_TYPE"].DISTANCE){this._mbDrawControl.changeMode(DRAW_CIRCLE)}else if(drawMode!==this._mbDrawControl.modes.DRAW_POLYGON&&this.props.drawState.drawType===constants["DRAW_TYPE"].POLYGON){this._mbDrawControl.changeMode(this._mbDrawControl.modes.DRAW_POLYGON)}}render(){if(!this.props.mbMap||!this.props.isDrawingFilter){return null}return external_kbnSharedDeps_React_default.a.createElement(draw_tooltip_DrawTooltip,{mbMap:this.props.mbMap,drawState:this.props.drawState})}}function mapStateToProps(state={}){return{isDrawingFilter:isDrawingFilter(state),drawState:getDrawState(state)}}function mapDispatchToProps(dispatch){return{disableDrawState(){dispatch(updateDrawState(null))}}}const connectedDrawControl=Object(lib["connect"])(mapStateToProps,mapDispatchToProps)(draw_control_DrawControl);function scale_control_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const MAX_WIDTH=110;function getScaleDistance(value){const orderOfMagnitude=Math.floor(Math.log10(value));const pow10=Math.pow(10,orderOfMagnitude);const distance=value/pow10;if(distance<1){return pow10*(Math.round(distance*10)/10)}if(distance>=10){return 10*pow10}if(distance>=5){return 5*pow10}if(distance>=3){return 3*pow10}return Math.floor(distance)*pow10}class scale_control_ScaleControl extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);scale_control_defineProperty(this,"_isMounted",false);scale_control_defineProperty(this,"state",{label:"",width:0});scale_control_defineProperty(this,"_onUpdate",()=>{if(!this._isMounted){return}const centerHeight=this.props.mbMap.getContainer().clientHeight/2;const leftLatLon=this.props.mbMap.unproject([0,centerHeight]);const rightLatLon=this.props.mbMap.unproject([MAX_WIDTH,centerHeight]);const maxDistanceMeters=leftLatLon.distanceTo(rightLatLon);if(maxDistanceMeters>=1e3){this._setScale(maxDistanceMeters/1e3,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.kilometersAbbr",{defaultMessage:"km"}))}else{this._setScale(maxDistanceMeters,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.metersAbbr",{defaultMessage:"m"}))}})}componentDidMount(){this._isMounted=true;this.props.mbMap.on("move",this._onUpdate);this._onUpdate()}componentWillUnmount(){this._isMounted=false;this.props.mbMap.off("move",this._onUpdate)}_setScale(maxDistance,unit){const scaleDistance=getScaleDistance(maxDistance);const zoom=this.props.mbMap.getZoom();const bounds=this.props.mbMap.getBounds();let label=`${scaleDistance} ${unit}`;if(zoom<=4||zoom<=6&&(bounds.getNorth()>23.5||bounds.getSouth()<-23.5)||zoom<=8&&(bounds.getNorth()>45||bounds.getSouth()<-45)){label="~"+label}this.setState({width:MAX_WIDTH*(scaleDistance/maxDistance),label:label})}render(){return external_kbnSharedDeps_React_default.a.createElement("div",{className:classnames_default()("mapScaleControl",{mapScaleControlFullScreen:this.props.isFullScreen}),style:{width:`${this.state.width}px`}},this.state.label)}}function isUrlDrilldown(action){return action.type==="URL_DRILLDOWN"}function toValueClickDataFormat(key,value){return[{table:{columns:[{id:key,meta:{type:"unknown",field:key},name:key}],rows:[{[key]:value}]},column:0,row:0,value:value}]}function feature_properties_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class feature_properties_FeatureProperties extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args);feature_properties_defineProperty(this,"state",{properties:null,actions:[],loadPropertiesErrorMsg:null,prevWidth:null,prevHeight:null});feature_properties_defineProperty(this,"_loadProperties",async()=>{this._fetchProperties({nextFeatureId:this.props.featureId,nextLayerId:this.props.layerId,mbProperties:this.props.mbProperties})});feature_properties_defineProperty(this,"_showFilterActions",tooltipProperty=>{this.props.showFilterActions(this._renderFilterActions(tooltipProperty))});feature_properties_defineProperty(this,"_fetchProperties",async({nextLayerId:nextLayerId,nextFeatureId:nextFeatureId,mbProperties:mbProperties})=>{if(this.prevLayerId===nextLayerId&&this.prevFeatureId===nextFeatureId){return}this.prevLayerId=nextLayerId;this.prevFeatureId=nextFeatureId;this.setState({properties:undefined,loadPropertiesErrorMsg:undefined});if(this.state.properties&&this._node){this.setState({prevWidth:this._node.clientWidth,prevHeight:this._node.clientHeight})}let properties;try{properties=await this.props.loadFeatureProperties({layerId:nextLayerId,featureId:nextFeatureId,mbProperties:mbProperties})}catch(error){if(this._isMounted){this.setState({properties:[],loadPropertiesErrorMsg:error.message})}return}if(this.prevLayerId!==nextLayerId&&this.prevFeatureId!==nextFeatureId){return}if(this._isMounted){this.setState({properties:properties})}})}componentDidMount(){this._isMounted=true;this.prevLayerId=undefined;this.prevFeatureId=undefined;this._loadProperties();this._loadActions()}componentDidUpdate(){this._loadProperties()}componentWillUnmount(){this._isMounted=false}async _loadActions(){if(!this.props.getFilterActions){return}const actions=await this.props.getFilterActions();if(this._isMounted){this.setState({actions:actions})}}_renderFilterActions(tooltipProperty){const panel={id:0,items:this.state.actions.filter(action=>{if(isUrlDrilldown(action)){return!!this.props.onSingleValueTrigger}return true}).map(action=>{const actionContext=this.props.getActionContext();const iconType=action.getIconType(actionContext);const name=action.getDisplayName(actionContext);return{name:name?name:action.id,icon:iconType?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:iconType}):null,onClick:async()=>{this.props.onCloseTooltip();if(isUrlDrilldown(action)){this.props.onSingleValueTrigger(action.id,tooltipProperty.getPropertyKey(),tooltipProperty.getRawValue())}else{const filters=await tooltipProperty.getESFilters();this.props.addFilters(filters,action.id)}},["data-test-subj"]:`mapFilterActionButton__${name}`}})};return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("table",{className:"eui-yScrollWithShadows mapFeatureTooltip_table",ref:node=>this._node=node},external_kbnSharedDeps_React_default.a.createElement("tbody",null,external_kbnSharedDeps_React_default.a.createElement("tr",null,external_kbnSharedDeps_React_default.a.createElement("td",{className:"eui-textOverflowWrap mapFeatureTooltip__propertyLabel"},tooltipProperty.getPropertyName()),external_kbnSharedDeps_React_default.a.createElement("td",{className:"eui-textOverflowWrap",dangerouslySetInnerHTML:{__html:tooltipProperty.getHtmlDisplayValue()}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:0,panels:[panel]}))}_renderFilterCell(tooltipProperty){if(!this.props.showFilterButtons||!tooltipProperty.isFilterable()){return external_kbnSharedDeps_React_default.a.createElement("td",null)}const applyFilterButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.tooltip.filterOnPropertyTitle",{defaultMessage:"Filter on property"}),onClick:async()=>{this.props.onCloseTooltip();const filters=await tooltipProperty.getESFilters();this.props.addFilters(filters)},"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.tooltip.filterOnPropertyAriaLabel",{defaultMessage:"Filter on property"}),"data-test-subj":"mapTooltipCreateFilterButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"filter"}));return this.state.actions.length===0||this.state.actions.length===1&&this.state.actions[0].id===data_public_["ACTION_GLOBAL_APPLY_FILTER"]?external_kbnSharedDeps_React_default.a.createElement("td",null,applyFilterButton):external_kbnSharedDeps_React_default.a.createElement("td",{className:"mapFeatureTooltip_actionsRow"},external_kbnSharedDeps_React_default.a.createElement("span",null,applyFilterButton,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.tooltip.viewActionsTitle",{defaultMessage:"View filter actions"}),onClick:()=>{this._showFilterActions(tooltipProperty)},"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.tooltip.viewActionsTitle",{defaultMessage:"View filter actions"}),"data-test-subj":"mapTooltipMoreActionsButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"arrowRight"}))))}render(){if(this.state.loadPropertiesErrorMsg){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.tooltip.unableToLoadContentTitle",{defaultMessage:"Unable to load tooltip content"}),color:"danger",iconType:"alert",size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,this.state.loadPropertiesErrorMsg))}if(!this.state.properties){const loadingMsg=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.tooltip.loadingMsg",{defaultMessage:"Loading"});const style={};if(this.state.prevWidth&&this.state.prevHeight){style.width=this.state.prevWidth;style.height=this.state.prevHeight}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextAlign"],{textAlign:"center",style:style},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"m"}),loadingMsg)}const rows=this.state.properties.map(tooltipProperty=>{const label=tooltipProperty.getPropertyName();return external_kbnSharedDeps_React_default.a.createElement("tr",{key:label,className:"mapFeatureTooltip_row"},external_kbnSharedDeps_React_default.a.createElement("td",{className:"eui-textOverflowWrap mapFeatureTooltip__propertyLabel"},label),external_kbnSharedDeps_React_default.a.createElement("td",{className:"eui-textOverflowWrap",dangerouslySetInnerHTML:{__html:tooltipProperty.getHtmlDisplayValue()}}),this._renderFilterCell(tooltipProperty))});return external_kbnSharedDeps_React_default.a.createElement("table",{className:"eui-yScrollWithShadows mapFeatureTooltip_table",ref:node=>this._node=node},external_kbnSharedDeps_React_default.a.createElement("tbody",null,rows))}}var core_public_=__webpack_require__(18);const OPTION_ID_DELIMITER="/";function createOptionId(geoField){return`${geoField.indexPatternId}${OPTION_ID_DELIMITER}${geoField.geoFieldName}`}function splitOptionId(optionId){const split=optionId.split(OPTION_ID_DELIMITER);return{indexPatternId:split[0],geoFieldName:split[1]}}function MultiIndexGeoFieldSelect({fields:fields,onChange:onChange,selectedField:selectedField}){function onFieldSelect(selectedOptionId){const{indexPatternId:indexPatternId,geoFieldName:geoFieldName}=splitOptionId(selectedOptionId);const newSelectedField=fields.find(field=>field.indexPatternId===indexPatternId&&field.geoFieldName===geoFieldName);onChange(newSelectedField)}const options=fields.map(geoField=>({inputDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("small",null,geoField.indexPatternTitle)),external_kbnSharedDeps_React_default.a.createElement("br",null),geoField.geoFieldName),value:createOptionId(geoField)}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{className:"mapGeometryFilter__geoFieldSuperSelectWrapper",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.multiIndexFieldSelect.fieldLabel",{defaultMessage:"Filtering field"}),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperSelect"],{className:"mapGeometryFilter__geoFieldSuperSelect",options:options,valueOfSelected:selectedField?createOptionId(selectedField):"",onChange:onFieldSelect,hasDividers:true,fullWidth:true,compressed:true,itemClassName:"mapGeometryFilter__geoFieldItem"}))}function action_select_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class action_select_ActionSelect extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);action_select_defineProperty(this,"_isMounted",false);action_select_defineProperty(this,"state",{actions:[]})}componentDidMount(){this._isMounted=true;this._loadActions()}componentWillUnmount(){this._isMounted=false}async _loadActions(){if(!this.props.getFilterActions||!this.props.getActionContext){return}const actions=await this.props.getFilterActions();if(this._isMounted){this.setState({actions:actions.filter(action=>!isUrlDrilldown(action))})}}render(){if(this.state.actions.length===0||!this.props.getActionContext){return null}if(this.state.actions.length===1&&this.props.value===this.state.actions[0].id){return null}const actionContext=this.props.getActionContext();const options=this.state.actions.map(action=>{const iconType=action.getIconType(actionContext);return{value:action.id,inputDisplay:external_kbnSharedDeps_React_default.a.createElement("div",null,iconType?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{className:"mapActionSelectIcon",type:iconType}):null,action.getDisplayName(actionContext))}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.actionSelect.label",{defaultMessage:"Action"}),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperSelect"],{compressed:true,options:options,valueOfSelected:this.props.value?this.props.value:"",onChange:this.props.onChange}))}}function geometry_filter_form_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class geometry_filter_form_GeometryFilterForm extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);geometry_filter_form_defineProperty(this,"state",{actionId:data_public_["ACTION_GLOBAL_APPLY_FILTER"],selectedField:this.props.geoFields.length?this.props.geoFields[0]:undefined,geometryLabel:this.props.intitialGeometryLabel,relation:constants["ES_SPATIAL_RELATIONS"].INTERSECTS});geometry_filter_form_defineProperty(this,"_onGeoFieldChange",selectedField=>{this.setState({selectedField:selectedField})});geometry_filter_form_defineProperty(this,"_onGeometryLabelChange",e=>{this.setState({geometryLabel:e.target.value})});geometry_filter_form_defineProperty(this,"_onRelationChange",e=>{this.setState({relation:e.target.value})});geometry_filter_form_defineProperty(this,"_onActionIdChange",value=>{this.setState({actionId:value})});geometry_filter_form_defineProperty(this,"_onSubmit",()=>{this.props.onSubmit({actionId:this.state.actionId,geometryLabel:this.state.geometryLabel,indexPatternId:this.state.selectedField.indexPatternId,geoFieldName:this.state.selectedField.geoFieldName,geoFieldType:this.state.selectedField.geoFieldType,relation:this.state.relation})})}_renderRelationInput(){if(!this.state.selectedField||this.state.selectedField.geoFieldType===constants["ES_GEO_FIELD_TYPE"].GEO_POINT){return null}const spatialRelations=this.props.isFilterGeometryClosed?Object.values(constants["ES_SPATIAL_RELATIONS"]):Object.values(constants["ES_SPATIAL_RELATIONS"]).filter(relation=>relation!==constants["ES_SPATIAL_RELATIONS"].WITHIN);const options=spatialRelations.map(relation=>({value:relation,text:Object(i18n_getters["c"])(relation)}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.geometryFilterForm.relationLabel",{defaultMessage:"Spatial relation"}),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{compressed:true,options:options,value:this.state.relation,onChange:this._onRelationChange}))}render(){let error;if(this.props.errorMsg){error=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormErrorText"],null,this.props.errorMsg)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],{className:this.props.className},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.geometryFilterForm.geometryLabelLabel",{defaultMessage:"Geometry label"}),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{compressed:true,value:this.state.geometryLabel,onChange:this._onGeometryLabelChange})),external_kbnSharedDeps_React_default.a.createElement(MultiIndexGeoFieldSelect,{selectedField:this.state.selectedField,fields:this.props.geoFields,onChange:this._onGeoFieldChange}),this._renderRelationInput(),external_kbnSharedDeps_React_default.a.createElement(action_select_ActionSelect,{getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,value:this.state.actionId,onChange:this._onActionIdChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),error,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextAlign"],{textAlign:"right"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",fill:true,onClick:this._onSubmit,isDisabled:!this.state.geometryLabel||!this.state.selectedField,isLoading:this.props.isLoading},this.props.buttonLabel)))}}geometry_filter_form_defineProperty(geometry_filter_form_GeometryFilterForm,"defaultProps",{isFilterGeometryClosed:true});function feature_geometry_filter_form_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const META_OVERHEAD=100;class feature_geometry_filter_form_FeatureGeometryFilterForm extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);feature_geometry_filter_form_defineProperty(this,"state",{isLoading:false,errorMsg:undefined});feature_geometry_filter_form_defineProperty(this,"_loadPreIndexedShape",async()=>{this.setState({isLoading:true});let preIndexedShape;try{preIndexedShape=await this.props.loadPreIndexedShape()}catch(err){}if(this._isMounted){this.setState({isLoading:false})}return preIndexedShape});feature_geometry_filter_form_defineProperty(this,"_createFilter",async({geometryLabel:geometryLabel,indexPatternId:indexPatternId,geoFieldName:geoFieldName,geoFieldType:geoFieldType,relation:relation})=>{this.setState({errorMsg:undefined});const preIndexedShape=await this._loadPreIndexedShape();if(!this._isMounted){return}const filter=createSpatialFilterWithGeometry({preIndexedShape:preIndexedShape,geometry:this.props.geometry,geometryLabel:geometryLabel,indexPatternId:indexPatternId,geoFieldName:geoFieldName,geoFieldType:geoFieldType,relation:relation});if(window.location.href.length+rison_default.a.encode(filter).length+META_OVERHEAD>core_public_["URL_MAX_LENGTH"]){this.setState({errorMsg:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.tooltip.geometryFilterForm.filterTooLargeMessage",{defaultMessage:"Cannot create filter. Filters are added to the URL, and this shape has too many vertices to fit in the URL."})});return}this.props.addFilters([filter]);this.props.onClose()})}componentDidMount(){this._isMounted=true}componentWillUnmount(){this._isMounted=false}render(){return external_kbnSharedDeps_React_default.a.createElement(geometry_filter_form_GeometryFilterForm,{buttonLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.tooltip.geometryFilterForm.createFilterButtonLabel",{defaultMessage:"Create filter"}),geoFields:this.props.geoFields,getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,intitialGeometryLabel:this.props.geometry.type.toLowerCase(),onSubmit:this._createFilter,isFilterGeometryClosed:this.props.geometry.type!==constants["GEO_JSON_TYPE"].LINE_STRING&&this.props.geometry.type!==constants["GEO_JSON_TYPE"].MULTI_LINE_STRING,isLoading:this.state.isLoading,errorMsg:this.state.errorMsg})}}function tooltip_header_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const ALL_LAYERS="_ALL_LAYERS_";const DEFAULT_PAGE_NUMBER=0;class tooltip_header_TooltipHeader extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);tooltip_header_defineProperty(this,"state",{filteredFeatures:this.props.features,pageNumber:DEFAULT_PAGE_NUMBER,selectedLayerId:ALL_LAYERS,layerOptions:[]});tooltip_header_defineProperty(this,"_loadUniqueLayers",async()=>{if(this._prevFeatures===this.props.features){return}this._prevFeatures=this.props.features;const countByLayerId=new Map;for(let i=0;i<this.props.features.length;i++){let count=countByLayerId.get(this.props.features[i].layerId);if(!count){count=0}count++;countByLayerId.set(this.props.features[i].layerId,count)}const layers=[];countByLayerId.forEach((count,layerId)=>{layers.push(this.props.findLayerById(layerId))});const layerNamePromises=layers.map(layer=>layer.getDisplayName());const layerNames=await Promise.all(layerNamePromises);if(this._isMounted){this.setState({filteredFeatures:this.props.features,selectedLayerId:ALL_LAYERS,layerOptions:layers.map((layer,index)=>{const displayName=layerNames[index];const count=countByLayerId.get(layer.getId());return{value:layer.getId(),text:`(${count}) ${displayName}`}})},()=>this._onPageChange(DEFAULT_PAGE_NUMBER))}});tooltip_header_defineProperty(this,"_onPageChange",pageNumber=>{this.setState({pageNumber:pageNumber});this.props.setCurrentFeature(this.state.filteredFeatures[pageNumber])});tooltip_header_defineProperty(this,"_onLayerChange",e=>{const newLayerId=e.target.value;if(this.state.selectedLayerId===newLayerId){return}const filteredFeatures=newLayerId===ALL_LAYERS?this.props.features:this.props.features.filter(feature=>feature.layerId===newLayerId);this.setState({filteredFeatures:filteredFeatures,selectedLayerId:newLayerId},()=>this._onPageChange(DEFAULT_PAGE_NUMBER))})}componentDidMount(){this._isMounted=true;this._prevFeatures=null;this._loadUniqueLayers()}componentDidUpdate(){this._loadUniqueLayers()}componentWillUnmount(){this._isMounted=false}render(){const{isLocked:isLocked}=this.props;const{filteredFeatures:filteredFeatures,pageNumber:pageNumber,selectedLayerId:selectedLayerId,layerOptions:layerOptions}=this.state;const isLayerSelectVisible=isLocked&&layerOptions.length>1;const headerItems=[];if(isLocked&&filteredFeatures.length>1){headerItems.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,key:"pagination"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPagination"],{pageCount:filteredFeatures.length,activePage:pageNumber,onPageClick:this._onPageChange,compressed:true})))}if(!isLocked&&filteredFeatures.length>1){headerItems.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:!isLayerSelectVisible,key:"pageNumber"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.tooltip.pageNumerText",defaultMessage:"{pageNumber} of {total}",values:{pageNumber:pageNumber+1,total:filteredFeatures.length}}))))}if(isLayerSelectVisible){headerItems.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{key:"layerSelect"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{options:[{value:ALL_LAYERS,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.tooltip.allLayersLabel",{defaultMessage:"All layers"})},...layerOptions],onChange:this._onLayerChange,value:selectedLayerId,compressed:true,fullWidth:true,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.tooltip.layerFilterLabel",{defaultMessage:"Filter results by layer"})}))))}if(isLocked){if(headerItems.length===0){headerItems.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{key:"spacer"}))}headerItems.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,key:"closeButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{onClick:this.props.onClose,iconType:"cross","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.tooltip.closeAriaLabel",{defaultMessage:"Close tooltip"}),"data-test-subj":"mapTooltipCloseButton"})))}if(headerItems.length===0){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s"},headerItems),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"xs"}))}}function features_tooltip_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const VIEWS={PROPERTIES_VIEW:"PROPERTIES_VIEW",GEOMETRY_FILTER_VIEW:"GEOMETRY_FILTER_VIEW",FILTER_ACTIONS_VIEW:"FILTER_ACTIONS_VIEW"};class features_tooltip_FeaturesTooltip extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);features_tooltip_defineProperty(this,"state",{});features_tooltip_defineProperty(this,"_setCurrentFeature",feature=>{this.setState({currentFeature:feature})});features_tooltip_defineProperty(this,"_showGeometryFilterView",()=>{this.setState({view:VIEWS.GEOMETRY_FILTER_VIEW})});features_tooltip_defineProperty(this,"_showPropertiesView",()=>{this.setState({view:VIEWS.PROPERTIES_VIEW,filterView:null})});features_tooltip_defineProperty(this,"_showFilterActionsView",filterView=>{this.setState({view:VIEWS.FILTER_ACTIONS_VIEW,filterView:filterView})});features_tooltip_defineProperty(this,"_loadCurrentFeaturePreIndexedShape",()=>{if(!this.state.currentFeature){return}return this.props.loadPreIndexedShape({layerId:this.state.currentFeature.layerId,featureId:this.state.currentFeature.id})})}static getDerivedStateFromProps(nextProps,prevState){if(nextProps.features!==prevState.prevFeatures){return{currentFeature:nextProps.features?nextProps.features[0]:null,view:VIEWS.PROPERTIES_VIEW,prevFeatures:nextProps.features}}return null}_renderActions(geoFields){if(!this.props.isLocked||geoFields.length===0){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{className:"mapFeatureTooltip_actionLinks",onClick:this._showGeometryFilterView},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.tooltip.showGeometryFilterViewLinkLabel",defaultMessage:"Filter by geometry"}))}_filterGeoFields(featureGeometry){if(!featureGeometry){return[]}if(featureGeometry.type===constants["GEO_JSON_TYPE"].LINE_STRING||featureGeometry.type===constants["GEO_JSON_TYPE"].MULTI_LINE_STRING){return this.props.geoFields.filter(({geoFieldType:geoFieldType})=>geoFieldType===constants["ES_GEO_FIELD_TYPE"].GEO_SHAPE)}if(featureGeometry.type===constants["GEO_JSON_TYPE"].POINT||featureGeometry.type===constants["GEO_JSON_TYPE"].MULTI_POINT){return[]}return this.props.geoFields}_renderBackButton(label){return external_kbnSharedDeps_React_default.a.createElement("button",{className:"euiContextMenuPanelTitle mapFeatureTooltip_backButton",type:"button",onClick:this._showPropertiesView},external_kbnSharedDeps_React_default.a.createElement("span",{className:"euiContextMenu__itemLayout"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"arrowLeft",size:"m",className:"euiContextMenu__icon"}),external_kbnSharedDeps_React_default.a.createElement("span",{className:"euiContextMenu__text"},label)))}render(){if(!this.state.currentFeature){return null}const currentFeatureGeometry=this.props.loadFeatureGeometry({layerId:this.state.currentFeature.layerId,featureId:this.state.currentFeature.id});const geoFields=this._filterGeoFields(currentFeatureGeometry);if(this.state.view===VIEWS.GEOMETRY_FILTER_VIEW&&currentFeatureGeometry){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,this._renderBackButton(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.tooltip.showGeometryFilterViewLinkLabel",{defaultMessage:"Filter by geometry"})),external_kbnSharedDeps_React_default.a.createElement(feature_geometry_filter_form_FeatureGeometryFilterForm,{onClose:this.props.closeTooltip,showPropertiesView:this._showPropertiesView,geometry:currentFeatureGeometry,geoFields:geoFields,addFilters:this.props.addFilters,getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,loadPreIndexedShape:this._loadCurrentFeaturePreIndexedShape}))}if(this.state.view===VIEWS.FILTER_ACTIONS_VIEW){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,this._renderBackButton(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.tooltip.showAddFilterActionsViewLabel",{defaultMessage:"Filter actions"})),this.state.filterView)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(tooltip_header_TooltipHeader,{onClose:this.props.closeTooltip,features:this.props.features,isLocked:this.props.isLocked,findLayerById:this.props.findLayerById,setCurrentFeature:this._setCurrentFeature}),external_kbnSharedDeps_React_default.a.createElement(feature_properties_FeatureProperties,{featureId:this.state.currentFeature.id,layerId:this.state.currentFeature.layerId,mbProperties:this.state.currentFeature.mbProperties,loadFeatureProperties:this.props.loadFeatureProperties,showFilterButtons:!!this.props.addFilters&&this.props.isLocked,onCloseTooltip:this.props.closeTooltip,addFilters:this.props.addFilters,getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,onSingleValueTrigger:this.props.onSingleValueTrigger,showFilterActions:this._showFilterActionsView}),this._renderActions(geoFields))}}function tooltip_popover_extends(){tooltip_popover_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return tooltip_popover_extends.apply(this,arguments)}function tooltip_popover_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const tooltip_popover_noop=()=>{};class tooltip_popover_TooltipPopover extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);tooltip_popover_defineProperty(this,"state",{x:undefined,y:undefined,isVisible:true});tooltip_popover_defineProperty(this,"_updatePopoverPosition",()=>{const nextPoint=this.props.mbMap.project(this.props.location);const lat=this.props.location[constants["LAT_INDEX"]];const lon=this.props.location[constants["LON_INDEX"]];const bounds=this.props.mbMap.getBounds();this.setState({x:nextPoint.x,y:nextPoint.y,isVisible:lat<bounds.getNorth()&&lat>bounds.getSouth()&&lon>bounds.getWest()&&lon<bounds.getEast()})});tooltip_popover_defineProperty(this,"_loadFeatureGeometry",({layerId:layerId,featureId:featureId})=>{const tooltipLayer=this._findLayerById(layerId);if(!tooltipLayer||typeof featureId==="undefined"){return null}const targetFeature=tooltipLayer.getFeatureById(featureId);if(!targetFeature){return null}return targetFeature.geometry});tooltip_popover_defineProperty(this,"_loadFeatureProperties",async({layerId:layerId,featureId:featureId,mbProperties:mbProperties})=>{const tooltipLayer=this._findLayerById(layerId);if(!tooltipLayer){return[]}let targetFeature;if(typeof featureId!=="undefined"){targetFeature=tooltipLayer.getFeatureById(featureId)}const properties=targetFeature?targetFeature.properties:mbProperties;return await tooltipLayer.getPropertiesForTooltip(properties)});tooltip_popover_defineProperty(this,"_loadPreIndexedShape",async({layerId:layerId,featureId:featureId})=>{const tooltipLayer=this._findLayerById(layerId);if(!tooltipLayer||typeof featureId==="undefined"){return null}const targetFeature=tooltipLayer.getFeatureById(featureId);if(!targetFeature){return null}return await tooltipLayer.getSource().getPreIndexedShape(targetFeature.properties)});tooltip_popover_defineProperty(this,"_findLayerById",layerId=>this.props.layerList.find(layer=>layer.getId()===layerId));tooltip_popover_defineProperty(this,"_getLayerName",async layerId=>{const layer=this._findLayerById(layerId);if(!layer){return null}return layer.getDisplayName()});tooltip_popover_defineProperty(this,"_renderTooltipContent",()=>{const publicProps={addFilters:this.props.addFilters,getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,onSingleValueTrigger:this.props.onSingleValueTrigger,closeTooltip:this.props.closeTooltip,features:this.props.features,isLocked:this.props.isLocked,loadFeatureProperties:this._loadFeatureProperties,loadFeatureGeometry:this._loadFeatureGeometry,getLayerName:this._getLayerName};if(this.props.renderTooltipContent){return this.props.renderTooltipContent(publicProps)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs",style:{maxWidth:"425px"}},external_kbnSharedDeps_React_default.a.createElement(features_tooltip_FeaturesTooltip,tooltip_popover_extends({},publicProps,{findLayerById:this._findLayerById,geoFields:this.props.geoFields,loadPreIndexedShape:this._loadPreIndexedShape})))});this._popoverRef=external_kbnSharedDeps_React_default.a.createRef()}componentDidMount(){this._updatePopoverPosition();this.props.mbMap.on("move",this._updatePopoverPosition)}componentDidUpdate(){if(this._popoverRef.current){this._popoverRef.current.positionPopoverFluid()}}componentWillUnmount(){this.props.mbMap.off("move",this._updatePopoverPosition)}render(){if(!this.state.isVisible){return null}const tooltipAnchor=external_kbnSharedDeps_React_default.a.createElement("div",{style:{height:"26px",width:"26px",background:"none"}});const offset=this.props.index*26;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"mapTooltip",button:tooltipAnchor,anchorPosition:"upCenter",isOpen:true,closePopover:tooltip_popover_noop,ref:this._popoverRef,style:{pointerEvents:"none",transform:`translate(${this.state.x-13-offset}px, ${this.state.y-13}px)`}},this._renderTooltipContent())}}function tooltip_control_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function justifyAnchorLocation(mbLngLat,targetFeature){let popupAnchorLocation=[mbLngLat.lng,mbLngLat.lat];if(targetFeature.geometry.type==="Point"){const coordinates=targetFeature.geometry.coordinates.slice();while(Math.abs(mbLngLat.lng-coordinates[constants["LON_INDEX"]])>180){coordinates[0]+=mbLngLat.lng>coordinates[constants["LON_INDEX"]]?360:-360}popupAnchorLocation=coordinates}return popupAnchorLocation}class tooltip_control_TooltipControl extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args);tooltip_control_defineProperty(this,"_onMouseout",()=>{this._updateHoverTooltipState.cancel();if(!this.props.hasLockedTooltips){this.props.closeOnHoverTooltip()}});tooltip_control_defineProperty(this,"_lockTooltip",e=>{if(this.props.isDrawingFilter){return}this._updateHoverTooltipState.cancel();const mbFeatures=this._getMbFeaturesUnderPointer(e.point);if(!mbFeatures.length){return}const targetMbFeataure=mbFeatures[0];const popupAnchorLocation=justifyAnchorLocation(e.lngLat,targetMbFeataure);const features=this._getTooltipFeatures(mbFeatures);this.props.openOnClickTooltip({features:features,location:popupAnchorLocation})});tooltip_control_defineProperty(this,"_updateHoverTooltipState",external_kbnSharedDeps_Lodash_default.a.debounce(e=>{if(this.props.isDrawingFilter||this.props.hasLockedTooltips){return}const mbFeatures=this._getMbFeaturesUnderPointer(e.point);if(!mbFeatures.length){this.props.closeOnHoverTooltip();return}const targetMbFeature=mbFeatures[0];if(this.props.openTooltips[0]){const firstFeature=this.props.openTooltips[0].features[0];if(targetMbFeature.properties[constants["FEATURE_ID_PROPERTY_NAME"]]===firstFeature.id){return}}const popupAnchorLocation=justifyAnchorLocation(e.lngLat,targetMbFeature);const features=this._getTooltipFeatures(mbFeatures);this.props.openOnHoverTooltip({features:features,location:popupAnchorLocation})},100))}componentDidMount(){this.props.mbMap.on("mouseout",this._onMouseout);this.props.mbMap.on("mousemove",this._updateHoverTooltipState);this.props.mbMap.on("click",this._lockTooltip)}componentWillUnmount(){this.props.mbMap.off("mouseout",this._onMouseout);this.props.mbMap.off("mousemove",this._updateHoverTooltipState);this.props.mbMap.off("click",this._lockTooltip)}_getLayerByMbLayerId(mbLayerId){return this.props.layerList.find(layer=>{const mbLayerIds=layer.getMbLayerIds();return mbLayerIds.indexOf(mbLayerId)>-1})}_getTooltipFeatures(mbFeatures){const uniqueFeatures=[];for(let i=0;i<mbFeatures.length;i++){const mbFeature=mbFeatures[i];const layer=this._getLayerByMbLayerId(mbFeature.layer.id);const featureId=mbFeature.properties[constants["FEATURE_ID_PROPERTY_NAME"]];const layerId=layer.getId();let match=false;for(let j=0;j<uniqueFeatures.length;j++){const uniqueFeature=uniqueFeatures[j];if(featureId===uniqueFeature.id&&layerId===uniqueFeature.layerId){match=true;break}}if(!match){const mbProperties=mbFeature.properties?mbFeature.properties:{};uniqueFeatures.push({id:featureId,layerId:layerId,mbProperties:mbProperties})}}return uniqueFeatures}_getMbLayerIdsForTooltips(){const mbLayerIds=this.props.layerList.reduce((mbLayerIds,layer)=>layer.canShowTooltip()?mbLayerIds.concat(layer.getMbLayerIds()):mbLayerIds,[]);return mbLayerIds.filter(mbLayerId=>!!this.props.mbMap.getLayer(mbLayerId))}_getMbFeaturesUnderPointer(mbLngLatPoint){if(!this.props.mbMap){return[]}const mbLayerIds=this._getMbLayerIdsForTooltips();const PADDING=2;const mbBbox=[{x:mbLngLatPoint.x-PADDING,y:mbLngLatPoint.y-PADDING},{x:mbLngLatPoint.x+PADDING,y:mbLngLatPoint.y+PADDING}];return this.props.mbMap.queryRenderedFeatures(mbBbox,{layers:mbLayerIds,filter:EXCLUDE_TOO_MANY_FEATURES_BOX})}render(){if(this.props.openTooltips.length===0){return null}return this.props.openTooltips.map(({features:features,location:location,id:id,isLocked:isLocked},index)=>{const closeTooltip=isLocked?()=>{this.props.closeOnClickTooltip(id)}:this.props.closeOnHoverTooltip;return external_kbnSharedDeps_React_default.a.createElement(tooltip_popover_TooltipPopover,{key:id,mbMap:this.props.mbMap,layerList:this.props.layerList,addFilters:this.props.addFilters,getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,onSingleValueTrigger:this.props.onSingleValueTrigger,renderTooltipContent:this.props.renderTooltipContent,geoFields:this.props.geoFields,features:features,location:location,closeTooltip:closeTooltip,isLocked:isLocked,index:index})})}}function tooltip_control_mapStateToProps(state={}){return{layerList:getLayerList(state),hasLockedTooltips:getHasLockedTooltips(state),isDrawingFilter:isDrawingFilter(state),openTooltips:getOpenTooltips(state)}}function tooltip_control_mapDispatchToProps(dispatch){return{closeOnClickTooltip(tooltipId){dispatch(closeOnClickTooltip(tooltipId))},openOnClickTooltip(tooltipState){dispatch(openOnClickTooltip(tooltipState))},closeOnHoverTooltip(){dispatch(closeOnHoverTooltip())},openOnHoverTooltip(tooltipState){dispatch(openOnHoverTooltip(tooltipState))}}}const connectedTooltipControl=Object(lib["connect"])(tooltip_control_mapStateToProps,tooltip_control_mapDispatchToProps)(tooltip_control_TooltipControl);async function getInitialView(goto,settings){if(settings.initialLocation===constants["INITIAL_LOCATION"].FIXED_LOCATION){return{lat:settings.fixedLocation.lat,lon:settings.fixedLocation.lon,zoom:settings.fixedLocation.zoom}}if(settings.initialLocation===constants["INITIAL_LOCATION"].BROWSER_LOCATION){return await new Promise((resolve,reject)=>{navigator.geolocation.getCurrentPosition(pos=>{resolve({lat:pos.coords.latitude,lon:pos.coords.longitude,zoom:settings.browserLocation.zoom})},()=>{console.warn("Unable to fetch browser location for initial map location");resolve(null)})})}if(settings.initialLocation===constants["INITIAL_LOCATION"].AUTO_FIT_TO_BOUNDS){return null}return goto&&goto.center?goto.center:null}var kibanaUtils_public_=__webpack_require__(15);var mapbox_gl_rtl_text_min=__webpack_require__(310);var mapbox_gl_rtl_text_min_default=__webpack_require__.n(mapbox_gl_rtl_text_min);var mapbox_gl_csp_worker=__webpack_require__(311);var mapbox_gl_csp_worker_default=__webpack_require__.n(mapbox_gl_csp_worker);function mb_map_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}mapbox_gl_csp_default.a.workerUrl=mapbox_gl_csp_worker_default.a;mapbox_gl_csp_default.a.setRTLTextPlugin(mapbox_gl_rtl_text_min_default.a);class mb_map_MBMap extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);mb_map_defineProperty(this,"_checker",void 0);mb_map_defineProperty(this,"_isMounted",false);mb_map_defineProperty(this,"_containerRef",null);mb_map_defineProperty(this,"_prevDisableInteractive",void 0);mb_map_defineProperty(this,"_navigationControl",new mapbox_gl_csp_default.a.NavigationControl({showCompass:false}));mb_map_defineProperty(this,"state",{prevLayerList:undefined,hasSyncedLayerList:false,mbMap:undefined});mb_map_defineProperty(this,"_debouncedSync",external_kbnSharedDeps_Lodash_default.a.debounce(()=>{if(this._isMounted&&this.props.isMapReady&&this.state.mbMap){if(!this.state.hasSyncedLayerList){this.setState({hasSyncedLayerList:true},()=>{this._syncMbMapWithLayerList();this._syncMbMapWithInspector()})}this.props.spatialFiltersLayer.syncLayerWithMB(this.state.mbMap);this._syncSettings()}},256));mb_map_defineProperty(this,"_syncMbMapWithMapState",()=>{const{isMapReady:isMapReady,goto:goto,clearGoto:clearGoto}=this.props;if(!isMapReady||!goto||!this.state.mbMap){return}clearGoto();if(goto.bounds){const lnLatBounds=new mapbox_gl_csp_default.a.LngLatBounds(new mapbox_gl_csp_default.a.LngLat(clampToLonBounds(goto.bounds.minLon),clampToLatBounds(goto.bounds.minLat)),new mapbox_gl_csp_default.a.LngLat(clampToLonBounds(goto.bounds.maxLon),clampToLatBounds(goto.bounds.maxLat)));this.state.mbMap.fitBounds(lnLatBounds,{maxZoom:17,padding:16})}else if(goto.center){this.state.mbMap.setZoom(goto.center.zoom);this.state.mbMap.setCenter({lng:goto.center.lon,lat:goto.center.lat})}});mb_map_defineProperty(this,"_syncMbMapWithLayerList",()=>{if(!this.state.mbMap){return}removeOrphanedSourcesAndLayers(this.state.mbMap,this.props.layerList,this.props.spatialFiltersLayer);this.props.layerList.forEach(layer=>layer.syncLayerWithMB(this.state.mbMap));syncLayerOrder(this.state.mbMap,this.props.spatialFiltersLayer,this.props.layerList)});mb_map_defineProperty(this,"_syncMbMapWithInspector",()=>{if(!this.props.inspectorAdapters.map||!this.state.mbMap){return}const stats={center:this.state.mbMap.getCenter().toArray(),zoom:this.state.mbMap.getZoom()};this.props.inspectorAdapters.map.setMapState({stats:stats,style:this.state.mbMap.getStyle()})});mb_map_defineProperty(this,"_setContainerRef",element=>{this._containerRef=element})}static getDerivedStateFromProps(nextProps,prevState){const nextLayerList=nextProps.layerList;if(nextLayerList!==prevState.prevLayerList){return{prevLayerList:nextLayerList,hasSyncedLayerList:false}}return null}componentDidMount(){this._initializeMap();this._isMounted=true}componentDidUpdate(){if(this.state.mbMap){this._syncMbMapWithMapState();this._debouncedSync()}}componentWillUnmount(){this._isMounted=false;if(this._checker){this._checker.destroy()}if(this.state.mbMap){this.state.mbMap.remove();this.state.mbMap=undefined}this.props.onMapDestroyed()}_getMapState(){const zoom=this.state.mbMap.getZoom();const mbCenter=this.state.mbMap.getCenter();const mbBounds=this.state.mbMap.getBounds();return{zoom:external_kbnSharedDeps_Lodash_default.a.round(zoom,constants["ZOOM_PRECISION"]),center:{lon:external_kbnSharedDeps_Lodash_default.a.round(mbCenter.lng,constants["DECIMAL_DEGREES_PRECISION"]),lat:external_kbnSharedDeps_Lodash_default.a.round(mbCenter.lat,constants["DECIMAL_DEGREES_PRECISION"])},extent:{minLon:external_kbnSharedDeps_Lodash_default.a.round(mbBounds.getWest(),constants["DECIMAL_DEGREES_PRECISION"]),minLat:external_kbnSharedDeps_Lodash_default.a.round(mbBounds.getSouth(),constants["DECIMAL_DEGREES_PRECISION"]),maxLon:external_kbnSharedDeps_Lodash_default.a.round(mbBounds.getEast(),constants["DECIMAL_DEGREES_PRECISION"]),maxLat:external_kbnSharedDeps_Lodash_default.a.round(mbBounds.getNorth(),constants["DECIMAL_DEGREES_PRECISION"])}}}async _createMbMapInstance(){const initialView=await getInitialView(this.props.goto,this.props.settings);return new Promise(resolve=>{const mbStyle={version:8,sources:{},layers:[],glyphs:getGlyphUrl()};const options={attributionControl:false,container:this._containerRef,style:mbStyle,scrollZoom:this.props.scrollZoom,preserveDrawingBuffer:Object(kibana_services["A"])(),maxZoom:this.props.settings.maxZoom,minZoom:this.props.settings.minZoom};if(initialView){options.zoom=initialView.zoom;options.center={lng:initialView.lon,lat:initialView.lat}}else{options.bounds=[-170,-60,170,75]}const mbMap=new mapbox_gl_csp_default.a.Map(options);mbMap.dragRotate.disable();mbMap.touchZoomRotate.disableRotation();const tooManyFeaturesImageSrc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAA7DgAAOw4BzLahgwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARLSURBVHic7ZnPbxRVAMe/7735sWO3293ZlUItJsivCxEE0oTYRgu1FqTQoFSwKTYx8SAH/wHjj4vRozGGi56sMcW2UfqTEuOhppE0KJc2GIuKQFDY7qzdtrudX88D3YTUdFuQN8+k87ltZt7uZz958/bNLAGwBWsYKltANmEA2QKyCQPIFpBNGEC2gGzCALIFZBMGkC0gmzCAbAHZhAFkC8gmDCBbQDZhANkCslnzARQZH6oDpNs0D5UDSUIInePcOpPLfdfnODNBuwQWIAWwNOABwHZN0x8npE6hNLJ4DPWRyFSf40wE5VOEQPBjcR0g3YlE4ybGmtK+/1NzJtOZA/xSYwZMs3nG962T2ez3It2AANaA/kSidYuivOQBs5WM1fUnk6f0u+GXJUqIuUtVXx00zRbRfkIDfBqL7a1WlIYbjvNtTTr99jXXHVpH6dMjK0R4cXq6c9rzxjcx9sKX8XitSEdhAToMI7VP10/97fsTh7PZrgWAN1lW72KE2vOm2b5chDTgtWQyn93x/bEEIetEOQIC14CxVOr1CkKefH929t0v8vn0vcdGEoljGxXl4C3PGz2YyXy+AHARDqtByAxoUdWKBKV70r4/vvTLA0CjZfX+5nkDGxirKzUTgkBIgNaysh3gnF627R+XO+dQJvP1ddcdrmSsbtA020pF+CAW21qrqmUiXIUEqGRsIwD0FQq/lzqv0bJ6rrvucBVjzwyb5ivLRTiiaW+8VV7eIEBVTAANiIIQd9RxZlc6t9Gyem647vn1jD07ZJonl4sQASoevqmgABzwwHnJzc69PGdZ3X+47sgGxuqHTPPE0ggeVtg5/QeEBMhxPg1Aa1DV2GrHPG9ZXy1G2D+wNALn9jyQEeHKAJgP+033Kgrdqij7AFwZtu3bqx3XWShMHtV1o1pRGo4YxiNd+fyEB2DKdX/4aG5u0hbwcylkBryTy/3scT6zW9Nq7ndso2Wdvea6Q1WUHuiPx1/WAXLBcWZXun94UMRcAoD/p+ddTFK6u8MwUvc7vsmyem+67oVqVT0wkEgcF+FYRNhW+L25uX6f84XThtHxIBudE5bVY/t++jFVrU/dvVSFICzAqG3PX/S8rihj2/61qK1AOUB7ksl2jdLUL7Z9rvgcQQRCFsEi5wqFmw26XnhCUQ63GcZmCly95Lrzpca0G0byk3j8tEnpU1c975tmyxoU5QcE8EAEAM5WVOzfoarHAeC2749dcpzxMwsLv07Ztg0AOzVNf03Ttu/S9T2PMlbjc25fdpyutmx2TLRbIAEA4M1otKo1EjmaoHQn4ZwBgA/kAVAK6MXXdzxv/ONcrq/HcbJBeAUWoEizqsaORaPbKglZrxMSZZyrM76f/ovzWx/m85PFWREUgQf4v7Hm/xcIA8gWkE0YQLaAbMIAsgVkEwaQLSCbMIBsAdmEAWQLyCYMIFtANmEA2QKyCQPIFpDNmg/wD3OFdEybUvJjAAAAAElFTkSuQmCC";const tooManyFeaturesImage=new Image;tooManyFeaturesImage.onload=()=>{mbMap.addImage(constants["KBN_TOO_MANY_FEATURES_IMAGE_ID"],tooManyFeaturesImage)};tooManyFeaturesImage.src=tooManyFeaturesImageSrc;let emptyImage;mbMap.on("styleimagemissing",e=>{if(emptyImage){mbMap.addImage(e.id,emptyImage)}});mbMap.on("load",()=>{emptyImage=new Image;emptyImage.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";emptyImage.crossOrigin="anonymous";resolve(mbMap)})})}async _initializeMap(){let mbMap;try{mbMap=await this._createMbMapInstance()}catch(error){this.props.setMapInitError(error.message);return}if(!this._isMounted){return}this.setState({mbMap:mbMap},()=>{this._loadMakiSprites(mbMap);this._initResizerChecker();this._registerMapEventListeners(mbMap);this.props.onMapReady(this._getMapState())})}_registerMapEventListeners(mbMap){mbMap.on("moveend",external_kbnSharedDeps_Lodash_default.a.debounce(()=>{this.props.extentChanged(this._getMapState())},100));if(!this.props.settings.hideViewControl){const throttledSetMouseCoordinates=external_kbnSharedDeps_Lodash_default.a.throttle(e=>{this.props.setMouseCoordinates({lat:e.lngLat.lat,lon:e.lngLat.lng})},100);mbMap.on("mousemove",throttledSetMouseCoordinates);mbMap.on("mouseout",()=>{throttledSetMouseCoordinates.cancel();this.props.clearMouseCoordinates()})}}_initResizerChecker(){this._checker=new kibanaUtils_public_["ResizeChecker"](this._containerRef);this._checker.on("resize",()=>{if(this.state.mbMap){this.state.mbMap.resize()}})}_loadMakiSprites(mbMap){const sprites=isRetina()?sprite_2_default.a:sprite_1_default.a;const json=isRetina()?maki["spritesheet"][2]:maki["spritesheet"][1];addSpritesheetToMap(json,sprites,mbMap)}_syncSettings(){if(!this.state.mbMap){return}if(this._prevDisableInteractive===undefined||this._prevDisableInteractive!==this.props.settings.disableInteractive){this._prevDisableInteractive=this.props.settings.disableInteractive;if(this.props.settings.disableInteractive){this.state.mbMap.boxZoom.disable();this.state.mbMap.doubleClickZoom.disable();this.state.mbMap.dragPan.disable();try{this.state.mbMap.removeControl(this._navigationControl)}catch(error){}}else{this.state.mbMap.boxZoom.enable();this.state.mbMap.doubleClickZoom.enable();this.state.mbMap.dragPan.enable();this.state.mbMap.addControl(this._navigationControl,"top-left")}}let zoomRangeChanged=false;if(this.props.settings.minZoom!==this.state.mbMap.getMinZoom()){this.state.mbMap.setMinZoom(this.props.settings.minZoom);zoomRangeChanged=true}if(this.props.settings.maxZoom!==this.state.mbMap.getMaxZoom()){this.state.mbMap.setMaxZoom(this.props.settings.maxZoom);zoomRangeChanged=true}if(zoomRangeChanged){setTimeout(()=>{this.props.extentChanged(this._getMapState())},300)}}render(){let drawControl;let tooltipControl;let scaleControl;if(this.state.mbMap){drawControl=external_kbnSharedDeps_React_default.a.createElement(connectedDrawControl,{mbMap:this.state.mbMap,addFilters:this.props.addFilters});tooltipControl=!this.props.settings.disableTooltipControl?external_kbnSharedDeps_React_default.a.createElement(connectedTooltipControl,{mbMap:this.state.mbMap,addFilters:this.props.addFilters,getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,onSingleValueTrigger:this.props.onSingleValueTrigger,geoFields:this.props.geoFields,renderTooltipContent:this.props.renderTooltipContent}):null;scaleControl=this.props.settings.showScaleControl?external_kbnSharedDeps_React_default.a.createElement(scale_control_ScaleControl,{mbMap:this.state.mbMap,isFullScreen:this.props.isFullScreen}):null}return external_kbnSharedDeps_React_default.a.createElement("div",{id:"mapContainer",className:"mapContainer",ref:this._setContainerRef,"data-test-subj":"mapContainer"},drawControl,scaleControl,tooltipControl)}}function mb_map_mapStateToProps(state){return{isMapReady:getMapReady(state),settings:getMapSettings(state),layerList:getLayerList(state),spatialFiltersLayer:getSpatialFiltersLayer(state),goto:getGoto(state),inspectorAdapters:getInspectorAdapters(state),scrollZoom:getScrollZoom(state),isFullScreen:getIsFullScreen(state)}}function mb_map_mapDispatchToProps(dispatch){return{extentChanged:mapExtentState=>{dispatch(mapExtentChanged(mapExtentState))},onMapReady:mapExtentState=>{dispatch(map_actions_clearGoto());dispatch(mapExtentChanged(mapExtentState));dispatch(mapReady())},onMapDestroyed:()=>{dispatch(mapDestroyed())},setMouseCoordinates:({lat:lat,lon:lon})=>{dispatch(setMouseCoordinates({lat:lat,lon:lon}))},clearMouseCoordinates:()=>{dispatch(clearMouseCoordinates())},clearGoto:()=>{dispatch(map_actions_clearGoto())},setMapInitError(errorMessage){dispatch(setMapInitError(errorMessage))}}}const connected=Object(lib["connect"])(mb_map_mapStateToProps,mb_map_mapDispatchToProps)(mb_map_MBMap);function toc_entry_button_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class toc_entry_button_TOCEntryButton extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);toc_entry_button_defineProperty(this,"_isMounted",false);toc_entry_button_defineProperty(this,"state",{isFilteredByGlobalTime:false})}componentDidMount(){this._isMounted=true;this._loadIsFilteredByGlobalTime()}componentDidUpdate(){this._loadIsFilteredByGlobalTime()}componentWillUnmount(){this._isMounted=false}async _loadIsFilteredByGlobalTime(){const isFilteredByGlobalTime=await this.props.layer.isFilteredByGlobalTime();if(this._isMounted&&isFilteredByGlobalTime!==this.state.isFilteredByGlobalTime){this.setState({isFilteredByGlobalTime:isFilteredByGlobalTime})}}getIconAndTooltipContent(){let icon;let tooltipContent=null;const footnotes=[];if(this.props.layer.hasErrors()){icon=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layer.loadWarningAriaLabel",{defaultMessage:"Load warning"}),size:"m",type:"alert",color:"warning"});tooltipContent=this.props.layer.getErrors()}else if(this.props.layer.isLayerLoading()){icon=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"m"})}else if(!this.props.layer.isVisible()){icon=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{size:"m",type:"eyeClosed"});tooltipContent=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layer.layerHiddenTooltip",{defaultMessage:`Layer is hidden.`})}else if(!this.props.layer.showAtZoomLevel(this.props.zoom)){const minZoom=this.props.layer.getMinZoom();const maxZoom=this.props.layer.getMaxZoom();icon=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{size:"m",type:"expand"});tooltipContent=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layer.zoomFeedbackTooltip",{defaultMessage:`Layer is visible between zoom levels {minZoom} and {maxZoom}.`,values:{minZoom:minZoom,maxZoom:maxZoom}})}else{const customIconAndTooltipContent=this.props.layer.getCustomIconAndTooltipContent();if(customIconAndTooltipContent){icon=customIconAndTooltipContent.icon;if(!customIconAndTooltipContent.areResultsTrimmed){tooltipContent=customIconAndTooltipContent.tooltipContent}else{footnotes.push({icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{color:"subdued",type:"partial",size:"s"}),message:customIconAndTooltipContent.tooltipContent})}}if(this.props.isUsingSearch&&this.props.layer.getQueryableIndexPatternIds().length){footnotes.push({icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{color:"subdued",type:"filter",size:"s"}),message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layer.isUsingSearchMsg",{defaultMessage:"Results narrowed by search bar"})})}if(this.state.isFilteredByGlobalTime){footnotes.push({icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{color:"subdued",type:"clock",size:"s"}),message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layer.isUsingTimeFilter",{defaultMessage:"Results narrowed by time filter"})})}}return{icon:icon,tooltipContent:tooltipContent,footnotes:footnotes}}render(){const{icon:icon,tooltipContent:tooltipContent,footnotes:footnotes}=this.getIconAndTooltipContent();const footnoteIcons=footnotes.map((footnote,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:index},"",footnote.icon));const footnoteTooltipContent=footnotes.map((footnote,index)=>external_kbnSharedDeps_React_default.a.createElement("div",{key:index},footnote.icon," ",footnote.message));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{anchorClassName:"mapLayTocActions__tooltipAnchor",position:"top",title:this.props.displayName,content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,tooltipContent,footnoteTooltipContent)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{className:"mapTocEntry__layerName eui-textLeft",size:"xs",flush:"left",color:"text",onClick:this.props.onClick,"data-test-subj":`layerTocActionsPanelToggleButton${this.props.escapedDisplayName}`},external_kbnSharedDeps_React_default.a.createElement("span",{className:"mapTocEntry__layerNameIcon"},icon),this.props.displayName," ",footnoteIcons))}}function toc_entry_button_mapStateToProps(state,ownProps){return{isUsingSearch:isUsingSearch(state),zoom:getMapZoom(state)}}const toc_entry_button_connected=Object(lib["connect"])(toc_entry_button_mapStateToProps)(toc_entry_button_TOCEntryButton);function toc_entry_actions_popover_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class toc_entry_actions_popover_TOCEntryActionsPopover extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);toc_entry_actions_popover_defineProperty(this,"_isMounted",false);toc_entry_actions_popover_defineProperty(this,"state",{isPopoverOpen:false,supportsFitToBounds:false});toc_entry_actions_popover_defineProperty(this,"_togglePopover",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))});toc_entry_actions_popover_defineProperty(this,"_closePopover",()=>{this.setState(()=>({isPopoverOpen:false}))})}componentDidMount(){this._isMounted=true;this._loadSupportsFitToBounds()}componentWillUnmount(){this._isMounted=false}async _loadSupportsFitToBounds(){const supportsFitToBounds=await this.props.layer.supportsFitToBounds();if(this._isMounted){this.setState({supportsFitToBounds:supportsFitToBounds})}}_cloneLayer(){this.props.cloneLayer(this.props.layer.getId())}_fitToBounds(){this.props.fitToBounds(this.props.layer.getId())}_removeLayer(){this.props.removeLayer(this.props.layer.getId())}_toggleVisible(){this.props.toggleVisible(this.props.layer.getId())}_getActionsPanel(){const actionItems=[{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerTocActions.fitToDataTitle",{defaultMessage:"Fit to data"}),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"expand",size:"m"}),"data-test-subj":"fitToBoundsButton",toolTipContent:this.state.supportsFitToBounds?null:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerTocActions.noFitSupportTooltip",{defaultMessage:"Layer does not support fit to data"}),disabled:!this.state.supportsFitToBounds,onClick:()=>{this._closePopover();this._fitToBounds()}},{name:this.props.layer.isVisible()?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerTocActions.hideLayerTitle",{defaultMessage:"Hide layer"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerTocActions.showLayerTitle",{defaultMessage:"Show layer"}),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:this.props.layer.isVisible()?"eyeClosed":"eye",size:"m"}),"data-test-subj":"layerVisibilityToggleButton",toolTipContent:null,onClick:()=>{this._closePopover();this._toggleVisible()}}];if(!this.props.isReadOnly){actionItems.push({disabled:this.props.isEditButtonDisabled,name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerTocActions.editLayerTitle",{defaultMessage:"Edit layer"}),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"pencil",size:"m"}),"data-test-subj":"editLayerButton",toolTipContent:null,onClick:()=>{this._closePopover();this.props.editLayer()}});actionItems.push({name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerTocActions.cloneLayerTitle",{defaultMessage:"Clone layer"}),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"copy",size:"m"}),toolTipContent:null,"data-test-subj":"cloneLayerButton",onClick:()=>{this._closePopover();this._cloneLayer()}});actionItems.push({name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerTocActions.removeLayerTitle",{defaultMessage:"Remove layer"}),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"trash",size:"m"}),toolTipContent:null,"data-test-subj":"removeLayerButton",onClick:()=>{this._closePopover();this._removeLayer()}})}return{id:0,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerTocActions.layerActionsTitle",{defaultMessage:"Layer actions"}),items:actionItems}}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:this.props.layer.getId(),className:"mapLayTocActions",button:external_kbnSharedDeps_React_default.a.createElement(toc_entry_button_connected,{layer:this.props.layer,displayName:this.props.displayName,escapedDisplayName:this.props.escapedDisplayName,onClick:this._togglePopover}),isOpen:this.state.isPopoverOpen,closePopover:this._closePopover,panelPaddingSize:"none",anchorPosition:"leftUp",anchorClassName:"mapLayTocActions__popoverAnchor"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:0,panels:[this._getActionsPanel()],"data-test-subj":`layerTocActionsPanel${this.props.escapedDisplayName}`}))}}function toc_entry_actions_popover_mapStateToProps(state){return{isReadOnly:getIsReadOnly(state)}}function toc_entry_actions_popover_mapDispatchToProps(dispatch){return{cloneLayer:layerId=>{dispatch(cloneLayer(layerId))},fitToBounds:layerId=>{dispatch(fitToLayerExtent(layerId))},removeLayer:layerId=>{dispatch(layer_actions_removeLayer(layerId))},toggleVisible:layerId=>{dispatch(toggleLayerVisible(layerId))}}}const toc_entry_actions_popover_connected=Object(lib["connect"])(toc_entry_actions_popover_mapStateToProps,toc_entry_actions_popover_mapDispatchToProps)(toc_entry_actions_popover_TOCEntryActionsPopover);function view_extends(){view_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return view_extends.apply(this,arguments)}function view_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function escapeLayerName(name){return name?name.split(" ").join("_"):""}class view_TOCEntry extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args);view_defineProperty(this,"state",{displayName:null,hasLegendDetails:false,shouldShowModal:false});view_defineProperty(this,"_toggleLayerDetailsVisibility",()=>{if(this.props.isLegendDetailsOpen){this.props.hideTOCDetails(this.props.layer.getId())}else{this.props.showTOCDetails(this.props.layer.getId())}});view_defineProperty(this,"_openLayerPanelWithCheck",()=>{const{selectedLayer:selectedLayer,hasDirtyStateSelector:hasDirtyStateSelector}=this.props;if(selectedLayer&&selectedLayer.getId()===this.props.layer.getId()){return}if(hasDirtyStateSelector){this.setState({shouldShowModal:true});return}this.props.openLayerPanel(this.props.layer.getId())});view_defineProperty(this,"_renderLegendDetails",()=>{if(!this.props.isLegendDetailsOpen||!this.state.hasLegendDetails){return null}const tocDetails=this.props.layer.renderLegendDetails();if(!tocDetails){return null}return external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapTocEntry__layerDetails","data-test-subj":`mapLayerTOCDetails${escapeLayerName(this.state.displayName)}`},tocDetails)})}componentDidMount(){this._isMounted=true;this._updateDisplayName();this._loadHasLegendDetails()}componentWillUnmount(){this._isMounted=false}componentDidUpdate(){this._updateDisplayName();this._loadHasLegendDetails()}async _loadHasLegendDetails(){const hasLegendDetails=await this.props.layer.hasLegendDetails()&&this.props.layer.isVisible()&&this.props.layer.showAtZoomLevel(this.props.zoom);if(this._isMounted&&hasLegendDetails!==this.state.hasLegendDetails){this.setState({hasLegendDetails:hasLegendDetails})}}async _updateDisplayName(){const label=await this.props.layer.getDisplayName();if(this._isMounted){if(label!==this.state.displayName){this.setState({displayName:label})}}}_renderCancelModal(){if(!this.state.shouldShowModal){return null}const closeModal=()=>{this.setState({shouldShowModal:false})};const openPanel=()=>{closeModal();this.props.openLayerPanel(this.props.layer.getId())};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:"Discard changes",onCancel:closeModal,onConfirm:openPanel,cancelButtonText:"Do not proceed",confirmButtonText:"Proceed and discard changes",buttonColor:"danger",defaultFocusedButton:"cancel"},external_kbnSharedDeps_React_default.a.createElement("p",null,"There are unsaved changes to your layer."),external_kbnSharedDeps_React_default.a.createElement("p",null,"Are you sure you want to proceed?"))}_renderLayerIcons(){if(this.props.isReadOnly){return null}return external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapTocEntry__layerIcons"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{isDisabled:this.props.isEditButtonDisabled,iconType:"pencil","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerControl.tocEntry.editButtonAriaLabel",{defaultMessage:"Edit layer"}),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerControl.tocEntry.editButtonTitle",{defaultMessage:"Edit layer"}),onClick:this._openLayerPanelWithCheck}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],view_extends({iconType:"grab",color:"subdued",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerControl.tocEntry.grabButtonTitle",{defaultMessage:"Reorder layer"}),"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerControl.tocEntry.grabButtonAriaLabel",{defaultMessage:"Reorder layer"}),className:"mapTocEntry__grab"},this.props.dragHandleProps)))}_renderDetailsToggle(){if(!this.state.hasLegendDetails){return null}const{isLegendDetailsOpen:isLegendDetailsOpen}=this.props;return external_kbnSharedDeps_React_default.a.createElement("span",{className:"mapTocEntry__detailsToggle"},external_kbnSharedDeps_React_default.a.createElement("button",{className:"mapTocEntry__detailsToggleButton","aria-label":isLegendDetailsOpen?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerControl.tocEntry.hideDetailsButtonAriaLabel",{defaultMessage:"Hide layer details"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerControl.tocEntry.showDetailsButtonAriaLabel",{defaultMessage:"Show layer details"}),title:isLegendDetailsOpen?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerControl.tocEntry.hideDetailsButtonTitle",{defaultMessage:"Hide layer details"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerControl.tocEntry.showDetailsButtonTitle",{defaultMessage:"Show layer details"}),onClick:this._toggleLayerDetailsVisibility},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{className:"eui-alignBaseline",type:isLegendDetailsOpen?"arrowUp":"arrowDown",size:"s"})))}_renderLayerHeader(){const{layer:layer,zoom:zoom}=this.props;return external_kbnSharedDeps_React_default.a.createElement("div",{className:layer.isVisible()&&layer.showAtZoomLevel(zoom)&&!layer.hasErrors()?"mapTocEntry-visible":"mapTocEntry-notVisible"},external_kbnSharedDeps_React_default.a.createElement(toc_entry_actions_popover_connected,{layer:layer,displayName:this.state.displayName,escapedDisplayName:escapeLayerName(this.state.displayName),editLayer:this._openLayerPanelWithCheck,isEditButtonDisabled:this.props.isEditButtonDisabled}),this._renderLayerIcons())}render(){const classes=classnames_default()("mapTocEntry",{"mapTocEntry-isDragging":this.props.isDragging,"mapTocEntry-isDraggingOver":this.props.isDraggingOver,"mapTocEntry-isSelected":this.props.layer.isPreviewLayer()||this.props.selectedLayer&&this.props.selectedLayer.getId()===this.props.layer.getId()});return external_kbnSharedDeps_React_default.a.createElement("div",{className:classes,id:this.props.layer.getId(),"data-layerid":this.props.layer.getId()},this._renderLayerHeader(),this._renderLegendDetails(),this._renderDetailsToggle(),this._renderCancelModal())}}function toc_entry_mapStateToProps(state={},ownProps){const flyoutDisplay=getFlyoutDisplay(state);return{isReadOnly:getIsReadOnly(state),zoom:getMapZoom(state),selectedLayer:getSelectedLayer(state),hasDirtyStateSelector:hasDirtyState(state),isLegendDetailsOpen:getOpenTOCDetails(state).includes(ownProps.layer.getId()),isEditButtonDisabled:flyoutDisplay!==FLYOUT_STATE.NONE&&flyoutDisplay!==FLYOUT_STATE.LAYER_PANEL}}function toc_entry_mapDispatchToProps(dispatch){return{openLayerPanel:async layerId=>{await dispatch(setSelectedLayer(layerId));dispatch(updateFlyout(FLYOUT_STATE.LAYER_PANEL))},hideTOCDetails:layerId=>{dispatch(hideTOCDetails(layerId))},showTOCDetails:layerId=>{dispatch(showTOCDetails(layerId))}}}const connectedTOCEntry=Object(lib["connect"])(toc_entry_mapStateToProps,toc_entry_mapDispatchToProps)(view_TOCEntry);function layer_toc_view_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class view_LayerTOC extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args);layer_toc_view_defineProperty(this,"_updateDebounced",external_kbnSharedDeps_Lodash_default.a.debounce(this.forceUpdate,100));layer_toc_view_defineProperty(this,"_onDragEnd",({source:source,destination:destination})=>{if(!destination){return}const reverseIndex=index=>this.props.layerList.length-index-1;const prevIndex=reverseIndex(source.index);const newIndex=reverseIndex(destination.index);const newOrder=[];for(let i=0;i<this.props.layerList.length;i++){newOrder.push(i)}newOrder.splice(prevIndex,1);newOrder.splice(newIndex,0,prevIndex);this.props.updateLayerOrder(newOrder)})}componentWillUnmount(){this._updateDebounced.cancel()}shouldComponentUpdate(){this._updateDebounced();return false}_renderLayers(){const reverseLayerList=[...this.props.layerList].reverse();if(this.props.isReadOnly){return reverseLayerList.map(layer=>external_kbnSharedDeps_React_default.a.createElement(connectedTOCEntry,{key:layer.getId(),layer:layer}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDragDropContext"],{onDragEnd:this._onDragEnd},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDroppable"],{droppableId:"mapLayerTOC",spacing:"none"},(provided,snapshot)=>reverseLayerList.map((layer,idx)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDraggable"],{spacing:"none",key:layer.getId(),index:idx,draggableId:layer.getId(),customDragHandle:true,disableInteractiveElementBlocking:true},(provided,state)=>external_kbnSharedDeps_React_default.a.createElement(connectedTOCEntry,{layer:layer,dragHandleProps:provided.dragHandleProps,isDragging:state.isDragging,isDraggingOver:snapshot.isDraggingOver})))))}render(){return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"mapLayerTOC"},this._renderLayers())}}const layer_toc_mapDispatchToProps={updateLayerOrder:newOrder=>updateLayerOrder(newOrder)};function layer_toc_mapStateToProps(state={}){return{isReadOnly:getIsReadOnly(state),layerList:getLayerList(state)}}const connectedLayerTOC=Object(lib["connect"])(layer_toc_mapStateToProps,layer_toc_mapDispatchToProps,null,{forwardRef:true})(view_LayerTOC);function renderExpandButton({hasErrors:hasErrors,isLoading:isLoading,onClick:onClick}){const expandLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerControl.openLayerTOCButtonAriaLabel",{defaultMessage:"Expand layers panel"});if(isLoading){return external_kbnSharedDeps_React_default.a.createElement("button",{className:"euiButtonIcon euiButtonIcon--text mapLayerControl__openLayerTOCButton",type:"button",onClick:onClick,"aria-label":expandLabel},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"m"}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{className:"mapLayerControl__openLayerTOCButton",color:"text",onClick:onClick,iconType:hasErrors?"alert":"menuLeft","aria-label":expandLabel})}function LayerControl({isReadOnly:isReadOnly,isLayerTOCOpen:isLayerTOCOpen,showAddLayerWizard:showAddLayerWizard,closeLayerTOC:closeLayerTOC,openLayerTOC:openLayerTOC,layerList:layerList,isFlyoutOpen:isFlyoutOpen}){if(!isLayerTOCOpen){const hasErrors=layerList.some(layer=>layer.hasErrors());const isLoading=layerList.some(layer=>layer.isLayerLoading());return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{delay:"long",content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerControl.openLayerTOCButtonAriaLabel",{defaultMessage:"Expand layers panel"}),position:"left"},renderExpandButton({hasErrors:hasErrors,isLoading:isLoading,onClick:openLayerTOC}))}let addLayer;if(!isReadOnly){addLayer=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{isDisabled:isFlyoutOpen,className:"mapLayerControl__addLayerButton",fill:true,fullWidth:true,onClick:showAddLayerWizard,"data-test-subj":"addLayerButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerControl.addLayerButtonLabel",defaultMessage:"Add layer"})))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{className:"mapWidgetControl mapWidgetControl-hasShadow",paddingSize:"none",grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"mapWidgetControl__headerFlexItem",grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",alignItems:"center",responsive:false,gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xxxs",className:"mapWidgetControl__header"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerControl.layersTitle",defaultMessage:"Layers"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{delay:"long",content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerControl.closeLayerTOCButtonAriaLabel",{defaultMessage:"Collapse layers panel"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{className:"mapLayerControl__closeLayerTOCButton",onClick:closeLayerTOC,iconType:"menuRight",color:"text","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerControl.closeLayerTOCButtonAriaLabel",{defaultMessage:"Collapse layers panel"}),"data-test-subj":"mapToggleLegendButton"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"mapLayerControl"},external_kbnSharedDeps_React_default.a.createElement(connectedLayerTOC,null))),addLayer)}function layer_control_mapStateToProps(state={}){return{isReadOnly:getIsReadOnly(state),isLayerTOCOpen:getIsLayerTOCOpen(state),layerList:getLayerList(state),isFlyoutOpen:getFlyoutDisplay(state)!==FLYOUT_STATE.NONE}}function layer_control_mapDispatchToProps(dispatch){return{showAddLayerWizard:async()=>{await dispatch(setSelectedLayer(null));dispatch(updateFlyout(FLYOUT_STATE.ADD_LAYER_WIZARD))},closeLayerTOC:()=>{dispatch(setIsLayerTOCOpen(false))},openLayerTOC:()=>{dispatch(setIsLayerTOCOpen(true))}}}const connectedLayerControl=Object(lib["connect"])(layer_control_mapStateToProps,layer_control_mapDispatchToProps)(LayerControl);function ViewControl({mouseCoordinates:mouseCoordinates,zoom:zoom}){let latLon;if(mouseCoordinates){latLon=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.viewControl.latLabel",defaultMessage:"lat:"}))," ",external_kbnSharedDeps_Lodash_default.a.round(mouseCoordinates.lat,constants["DECIMAL_DEGREES_PRECISION"]),","," ",external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.viewControl.lonLabel",defaultMessage:"lon:"}))," ",external_kbnSharedDeps_Lodash_default.a.round(mouseCoordinates.lon,constants["DECIMAL_DEGREES_PRECISION"]),","," ")}return external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapViewControl__coordinates"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("small",null,latLon,external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.viewControl.zoomLabel",defaultMessage:"zoom:"}))," ",zoom)))}function view_control_mapStateToProps(state={}){return{mouseCoordinates:getMouseCoordinates(state),zoom:getMapZoom(state)}}const connectedViewControl=Object(lib["connect"])(view_control_mapStateToProps,null)(ViewControl);function attribution_control_view_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class view_AttributionControl extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args);attribution_control_view_defineProperty(this,"state",{uniqueAttributions:[]});attribution_control_view_defineProperty(this,"_loadAttributions",async()=>{const attributionPromises=this.props.layerList.map(async layer=>{try{return await layer.getAttributions()}catch(error){return[]}});const attributions=await Promise.all(attributionPromises);if(!this._isMounted){return}const uniqueAttributions=[];for(let i=0;i<attributions.length;i++){for(let j=0;j<attributions[i].length;j++){const testAttr=attributions[i][j];const attr=uniqueAttributions.find(added=>added.url===testAttr.url&&added.label===testAttr.label);if(!attr){uniqueAttributions.push(testAttr)}}}uniqueAttributions.reverse();if(!external_kbnSharedDeps_Lodash_default.a.isEqual(this.state.uniqueAttributions,uniqueAttributions)){this.setState({uniqueAttributions:uniqueAttributions})}})}componentDidMount(){this._isMounted=true;this._loadAttributions()}componentWillUnmount(){this._isMounted=false}componentDidUpdate(){this._loadAttributions()}_renderAttribution({url:url,label:label}){if(!url){return label}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{color:"text",href:url,target:"_blank"},label)}_renderAttributions(){return this.state.uniqueAttributions.map((attribution,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:index},this._renderAttribution(attribution),index<this.state.uniqueAttributions.length-1&&", "))}render(){if(this.state.uniqueAttributions.length===0){return null}return external_kbnSharedDeps_React_default.a.createElement("div",{className:classnames_default()("mapAttributionControl",{mapAttributionControl__fullScreen:this.props.isFullScreen})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("small",null,external_kbnSharedDeps_React_default.a.createElement("strong",null,this._renderAttributions()))))}}function attribution_control_mapStateToProps(state={}){return{layerList:getLayerList(state),isFullScreen:getIsFullScreen(state)}}function attribution_control_mapDispatchToProps(){return{}}const attribution_control_connectedViewControl=Object(lib["connect"])(attribution_control_mapStateToProps,attribution_control_mapDispatchToProps)(view_AttributionControl);function WidgetOverlay({settings:settings}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:"mapWidgetOverlay",responsive:false,direction:"column",alignItems:"flexEnd",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"mapWidgetOverlay__layerWrapper"},!settings.hideLayerControl&&external_kbnSharedDeps_React_default.a.createElement(connectedLayerControl,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},!settings.hideViewControl&&external_kbnSharedDeps_React_default.a.createElement(connectedViewControl,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(attribution_control_connectedViewControl,null)))}function widget_overlay_mapStateToProps(state={}){return{settings:getMapSettings(state)}}const connectedWidgetOverlay=Object(lib["connect"])(widget_overlay_mapStateToProps,null)(WidgetOverlay);function set_view_control_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getViewString(lat,lon,zoom){return`${lat},${lon},${zoom}`}class set_view_control_SetViewControl extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);set_view_control_defineProperty(this,"state",{});set_view_control_defineProperty(this,"_togglePopover",()=>{if(this.props.isSetViewOpen){this.props.closeSetView();return}this.props.openSetView()});set_view_control_defineProperty(this,"_onLatChange",evt=>{this._onChange("lat",evt)});set_view_control_defineProperty(this,"_onLonChange",evt=>{this._onChange("lon",evt)});set_view_control_defineProperty(this,"_onZoomChange",evt=>{this._onChange("zoom",evt)});set_view_control_defineProperty(this,"_onChange",(name,evt)=>{const sanitizedValue=parseFloat(evt.target.value);this.setState({[name]:isNaN(sanitizedValue)?"":sanitizedValue})});set_view_control_defineProperty(this,"_renderNumberFormRow",({value:value,min:min,max:max,onChange:onChange,label:label,dataTestSubj:dataTestSubj})=>{const isInvalid=value===""||value>max||value<min;const error=isInvalid?`Must be between ${min} and ${max}`:null;return{isInvalid:isInvalid,component:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:label,isInvalid:isInvalid,error:error,display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{compressed:true,value:value,onChange:onChange,isInvalid:isInvalid,"data-test-subj":dataTestSubj}))}});set_view_control_defineProperty(this,"_onSubmit",()=>{const{lat:lat,lon:lon,zoom:zoom}=this.state;this.props.onSubmit({lat:lat,lon:lon,zoom:zoom})})}static getDerivedStateFromProps(nextProps,prevState){const nextView=getViewString(nextProps.center.lat,nextProps.center.lon,nextProps.zoom);if(nextView!==prevState.prevView){return{lat:nextProps.center.lat,lon:nextProps.center.lon,zoom:nextProps.zoom,prevView:nextView}}return null}_renderSetViewForm(){const{isInvalid:isLatInvalid,component:latFormRow}=this._renderNumberFormRow({value:this.state.lat,min:-90,max:90,onChange:this._onLatChange,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.setViewControl.latitudeLabel",{defaultMessage:"Latitude"}),dataTestSubj:"latitudeInput"});const{isInvalid:isLonInvalid,component:lonFormRow}=this._renderNumberFormRow({value:this.state.lon,min:-180,max:180,onChange:this._onLonChange,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.setViewControl.longitudeLabel",{defaultMessage:"Longitude"}),dataTestSubj:"longitudeInput"});const{isInvalid:isZoomInvalid,component:zoomFormRow}=this._renderNumberFormRow({value:this.state.zoom,min:this.props.settings.minZoom,max:this.props.settings.maxZoom,onChange:this._onZoomChange,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.setViewControl.zoomLabel",{defaultMessage:"Zoom"}),dataTestSubj:"zoomInput"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],{"data-test-subj":"mapSetViewForm",style:{width:240}},latFormRow,lonFormRow,zoomFormRow,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextAlign"],{textAlign:"right"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",fill:true,disabled:isLatInvalid||isLonInvalid||isZoomInvalid,onClick:this._onSubmit,"data-test-subj":"submitViewButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.setViewControl.submitButtonLabel",defaultMessage:"Go"}))))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{anchorPosition:"leftUp",panelPaddingSize:"s",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{className:"mapToolbarOverlay__button",onClick:this._togglePopover,"data-test-subj":"toggleSetViewVisibilityButton",iconType:"crosshairs",color:"text","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.setViewControl.goToButtonLabel",{defaultMessage:"Go to"}),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.setViewControl.goToButtonLabel",{defaultMessage:"Go to"})}),isOpen:this.props.isSetViewOpen,closePopover:this.props.closeSetView},this._renderSetViewForm())}}function set_view_control_mapStateToProps(state={}){return{settings:getMapSettings(state),isSetViewOpen:getIsSetViewOpen(state),zoom:getMapZoom(state),center:getMapCenter(state)}}function set_view_control_mapDispatchToProps(dispatch){return{onSubmit:({lat:lat,lon:lon,zoom:zoom})=>{dispatch(closeSetView());dispatch(setGotoWithCenter({lat:lat,lon:lon,zoom:zoom}))},closeSetView:()=>{dispatch(closeSetView())},openSetView:()=>{dispatch(openSetView())}}}const connectedSetViewControl=Object(lib["connect"])(set_view_control_mapStateToProps,set_view_control_mapDispatchToProps)(set_view_control_SetViewControl);function distance_filter_form_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class distance_filter_form_DistanceFilterForm extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);distance_filter_form_defineProperty(this,"state",{actionId:data_public_["ACTION_GLOBAL_APPLY_FILTER"],selectedField:this.props.geoFields.length?this.props.geoFields[0]:undefined,filterLabel:""});distance_filter_form_defineProperty(this,"_onGeoFieldChange",selectedField=>{this.setState({selectedField:selectedField})});distance_filter_form_defineProperty(this,"_onFilterLabelChange",e=>{this.setState({filterLabel:e.target.value})});distance_filter_form_defineProperty(this,"_onActionIdChange",value=>{this.setState({actionId:value})});distance_filter_form_defineProperty(this,"_onSubmit",()=>{if(!this.state.selectedField){return}this.props.onSubmit({actionId:this.state.actionId,filterLabel:this.state.filterLabel,indexPatternId:this.state.selectedField.indexPatternId,geoFieldName:this.state.selectedField.geoFieldName})})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],{className:this.props.className},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.distanceFilterForm.filterLabelLabel",{defaultMessage:"Filter label"}),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{compressed:true,value:this.state.filterLabel,onChange:this._onFilterLabelChange})),external_kbnSharedDeps_React_default.a.createElement(MultiIndexGeoFieldSelect,{selectedField:this.state.selectedField,fields:this.props.geoFields,onChange:this._onGeoFieldChange}),external_kbnSharedDeps_React_default.a.createElement(action_select_ActionSelect,{getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,value:this.state.actionId,onChange:this._onActionIdChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextAlign"],{textAlign:"right"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",fill:true,onClick:this._onSubmit,isDisabled:!this.state.selectedField},this.props.buttonLabel)))}}function tools_control_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const DRAW_SHAPE_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.toolbarOverlay.drawShapeLabel",{defaultMessage:"Draw shape to filter data"});const DRAW_BOUNDS_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.toolbarOverlay.drawBoundsLabel",{defaultMessage:"Draw bounds to filter data"});const DRAW_DISTANCE_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.toolbarOverlay.drawDistanceLabel",{defaultMessage:"Draw distance to filter data"});const DRAW_SHAPE_LABEL_SHORT=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.toolbarOverlay.drawShapeLabelShort",{defaultMessage:"Draw shape"});const DRAW_BOUNDS_LABEL_SHORT=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.toolbarOverlay.drawBoundsLabelShort",{defaultMessage:"Draw bounds"});const DRAW_DISTANCE_LABEL_SHORT=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.toolbarOverlay.drawDistanceLabelShort",{defaultMessage:"Draw distance"});class tools_control_ToolsControl extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);tools_control_defineProperty(this,"state",{isPopoverOpen:false});tools_control_defineProperty(this,"_togglePopover",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))});tools_control_defineProperty(this,"_closePopover",()=>{this.setState({isPopoverOpen:false})});tools_control_defineProperty(this,"_initiateShapeDraw",options=>{this.props.initiateDraw({drawType:constants["DRAW_TYPE"].POLYGON,...options});this._closePopover()});tools_control_defineProperty(this,"_initiateBoundsDraw",options=>{this.props.initiateDraw({drawType:constants["DRAW_TYPE"].BOUNDS,...options});this._closePopover()});tools_control_defineProperty(this,"_initiateDistanceDraw",options=>{this.props.initiateDraw({drawType:constants["DRAW_TYPE"].DISTANCE,...options});this._closePopover()})}_getDrawPanels(){const tools=[{name:DRAW_SHAPE_LABEL,panel:1},{name:DRAW_BOUNDS_LABEL,panel:2}];const hasGeoPoints=this.props.geoFields.some(({geoFieldType:geoFieldType})=>geoFieldType===constants["ES_GEO_FIELD_TYPE"].GEO_POINT);if(hasGeoPoints){tools.push({name:DRAW_DISTANCE_LABEL,panel:3})}return[{id:0,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.toolbarOverlay.tools.toolbarTitle",{defaultMessage:"Tools"}),items:tools},{id:1,title:DRAW_SHAPE_LABEL_SHORT,content:external_kbnSharedDeps_React_default.a.createElement(geometry_filter_form_GeometryFilterForm,{className:"mapDrawControl__geometryFilterForm",buttonLabel:DRAW_SHAPE_LABEL_SHORT,geoFields:this.props.geoFields,getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,intitialGeometryLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.toolbarOverlay.drawShape.initialGeometryLabel",{defaultMessage:"shape"}),onSubmit:this._initiateShapeDraw})},{id:2,title:DRAW_BOUNDS_LABEL_SHORT,content:external_kbnSharedDeps_React_default.a.createElement(geometry_filter_form_GeometryFilterForm,{className:"mapDrawControl__geometryFilterForm",buttonLabel:DRAW_BOUNDS_LABEL_SHORT,geoFields:this.props.geoFields,getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,intitialGeometryLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.toolbarOverlay.drawBounds.initialGeometryLabel",{defaultMessage:"bounds"}),onSubmit:this._initiateBoundsDraw})},{id:3,title:DRAW_DISTANCE_LABEL_SHORT,content:external_kbnSharedDeps_React_default.a.createElement(distance_filter_form_DistanceFilterForm,{className:"mapDrawControl__geometryFilterForm",buttonLabel:DRAW_DISTANCE_LABEL_SHORT,geoFields:this.props.geoFields.filter(({geoFieldType:geoFieldType})=>geoFieldType===constants["ES_GEO_FIELD_TYPE"].GEO_POINT),getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,onSubmit:this._initiateDistanceDraw})}]}_renderToolsButton(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{className:"mapToolbarOverlay__button",color:"text",iconType:"wrench",onClick:this._togglePopover,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.toolbarOverlay.toolsControlTitle",{defaultMessage:"Tools"}),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.toolbarOverlay.toolsControlTitle",{defaultMessage:"Tools"})})}render(){const toolsPopoverButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"toolsControlPopover",button:this._renderToolsButton(),isOpen:this.state.isPopoverOpen,closePopover:this._closePopover,panelPaddingSize:"none",anchorPosition:"leftUp"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:0,panels:this._getDrawPanels()}));if(!this.props.isDrawingFilter){return toolsPopoverButton}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,toolsPopoverButton),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",fill:true,onClick:this.props.cancelDraw},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.tooltip.toolsControl.cancelDrawButtonLabel",defaultMessage:"Cancel"}))))}}function tools_control_mapStateToProps(state){return{isDrawingFilter:isDrawingFilter(state)}}function tools_control_mapDispatchToProps(dispatch){return{initiateDraw:drawState=>{dispatch(updateDrawState(drawState))},cancelDraw:()=>{dispatch(updateDrawState(null))}}}const connectedToolsControl=Object(lib["connect"])(tools_control_mapStateToProps,tools_control_mapDispatchToProps)(tools_control_ToolsControl);function fit_to_data_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class fit_to_data_FitToData extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args);fit_to_data_defineProperty(this,"_isMounted",false);fit_to_data_defineProperty(this,"state",{canFit:false})}componentDidMount(){this._isMounted=true;this._loadCanFit()}componentWillUnmount(){this._isMounted=false}componentDidUpdate(){this._loadCanFit()}async _loadCanFit(){const promises=this.props.layerList.map(async layer=>await layer.isFittable());const canFit=(await Promise.all(promises)).some(isFittable=>isFittable);if(this._isMounted&&this.state.canFit!==canFit){this.setState({canFit:canFit})}}render(){if(!this.state.canFit){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{className:"mapToolbarOverlay__button",onClick:this.props.fitToBounds,"data-test-subj":"fitToData",iconType:"expand",color:"text","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.fitToData.fitButtonLabel",{defaultMessage:"Fit to data bounds"}),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.fitToData.fitAriaLabel",{defaultMessage:"Fit to data bounds"})})}}function fit_to_data_mapStateToProps(state){return{layerList:getLayerList(state)}}function fit_to_data_mapDispatchToProps(dispatch){return{fitToBounds:()=>{dispatch(fitToDataBounds())}}}const connectedFitToData=Object(lib["connect"])(fit_to_data_mapStateToProps,fit_to_data_mapDispatchToProps)(fit_to_data_FitToData);class toolbar_overlay_ToolbarOverlay extends external_kbnSharedDeps_React_default.a.Component{_renderToolsControl(){const{addFilters:addFilters,geoFields:geoFields,getFilterActions:getFilterActions,getActionContext:getActionContext}=this.props;if(!addFilters||!geoFields.length){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(connectedToolsControl,{geoFields:geoFields,getFilterActions:getFilterActions,getActionContext:getActionContext}))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:"mapToolbarOverlay",responsive:false,direction:"column",alignItems:"flexStart",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(connectedSetViewControl,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(connectedFitToData,null)),this._renderToolsControl())}}function toolbar_overlay_mapStateToProps(){return{}}const connectedToolbarOverlay=Object(lib["connect"])(toolbar_overlay_mapStateToProps,null)(toolbar_overlay_ToolbarOverlay);function GlobalFilterCheckbox({applyGlobalQuery:applyGlobalQuery,label:label,setApplyGlobalQuery:setApplyGlobalQuery}){const onApplyGlobalQueryChange=event=>{setApplyGlobalQuery(event.target.checked)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{display:"columnCompressedSwitch"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:label,checked:applyGlobalQuery,onChange:onApplyGlobalQueryChange,"data-test-subj":"mapLayerPanelApplyGlobalQueryCheckbox",compressed:true}))}function GlobalTimeCheckbox({applyGlobalTime:applyGlobalTime,label:label,setApplyGlobalTime:setApplyGlobalTime}){const onApplyGlobalTimeChange=event=>{setApplyGlobalTime(event.target.checked)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{display:"columnCompressedSwitch"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:label,checked:applyGlobalTime,onChange:onApplyGlobalTimeChange,"data-test-subj":"mapLayerPanelApplyGlobalTimeCheckbox",compressed:true}))}function filter_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class filter_editor_FilterEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);filter_editor_defineProperty(this,"state",{isPopoverOpen:false,indexPatterns:[],isSourceTimeAware:false});filter_editor_defineProperty(this,"_toggle",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))});filter_editor_defineProperty(this,"_close",()=>{this.setState({isPopoverOpen:false})});filter_editor_defineProperty(this,"_onQueryChange",({query:query})=>{this.props.setLayerQuery(this.props.layer.getId(),query);this._close()});filter_editor_defineProperty(this,"_onApplyGlobalQueryChange",applyGlobalQuery=>{this.props.updateSourceProp(this.props.layer.getId(),"applyGlobalQuery",applyGlobalQuery)});filter_editor_defineProperty(this,"_onApplyGlobalTimeChange",applyGlobalTime=>{this.props.updateSourceProp(this.props.layer.getId(),"applyGlobalTime",applyGlobalTime)})}componentDidMount(){this._isMounted=true;this._loadIndexPatterns();this._loadSourceTimeAware()}componentWillUnmount(){this._isMounted=false}async _loadIndexPatterns(){const indexPatternIds=this.props.layer.getSource().getIndexPatternIds();const indexPatterns=[];const getIndexPatternPromises=indexPatternIds.map(async indexPatternId=>{try{const indexPattern=await Object(kibana_services["p"])().get(indexPatternId);indexPatterns.push(indexPattern)}catch(err){}});await Promise.all(getIndexPatternPromises);if(!this._isMounted){return}this.setState({indexPatterns:indexPatterns})}async _loadSourceTimeAware(){const isSourceTimeAware=await this.props.layer.getSource().isTimeAware();if(this._isMounted){this.setState({isSourceTimeAware:isSourceTimeAware})}}_renderQueryPopover(){const layerQuery=this.props.layer.getQuery();const{SearchBar:SearchBar}=Object(kibana_services["g"])().ui;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"layerQueryPopover",button:this._renderOpenButton(),isOpen:this.state.isPopoverOpen,closePopover:this._close,anchorPosition:"leftCenter",ownFocus:true},external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapFilterEditor","data-test-subj":"mapFilterEditor"},external_kbnSharedDeps_React_default.a.createElement(SearchBar,{showFilterBar:false,showDatePicker:false,showQueryInput:true,query:layerQuery?layerQuery:Object(kibana_services["g"])().query.queryString.getDefaultQuery(),onQuerySubmit:this._onQueryChange,indexPatterns:this.state.indexPatterns,customSubmitButton:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,"data-test-subj":"mapFilterEditorSubmitButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerPanel.filterEditor.queryBarSubmitButtonLabel",defaultMessage:"Set filter"}))})))}_renderQuery(){const query=this.props.layer.getQuery();if(!query||!query.query){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",textAlign:"center"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerPanel.filterEditor.emptyState.description",defaultMessage:"Add a filter to narrow the layer data."}))))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeBlock"],{paddingSize:"s"},query.query),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))}_renderOpenButton(){const query=this.props.layer.getQuery();const openButtonLabel=query&&query.query?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.filterEditor.editFilterButtonLabel",{defaultMessage:"Edit filter"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.filterEditor.addFilterButtonLabel",{defaultMessage:"Add filter"});const openButtonIcon=query&&query.query?"pencil":"plusInCircleFilled";return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs",onClick:this._toggle,"data-test-subj":"mapLayerPanelOpenFilterEditorButton",iconType:openButtonIcon},openButtonLabel)}render(){const globalTimeCheckbox=this.state.isSourceTimeAware?external_kbnSharedDeps_React_default.a.createElement(GlobalTimeCheckbox,{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.filterEditor.applyGlobalTimeCheckboxLabel",{defaultMessage:`Apply global time to layer data`}),applyGlobalTime:this.props.layer.getSource().getApplyGlobalTime(),setApplyGlobalTime:this._onApplyGlobalTimeChange}):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerPanel.filterEditor.title",defaultMessage:"Filtering"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),this._renderQuery(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextAlign"],{textAlign:"center"},this._renderQueryPopover()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(GlobalFilterCheckbox,{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.filterEditor.applyGlobalQueryCheckboxLabel",{defaultMessage:`Apply global filter to layer data`}),applyGlobalQuery:this.props.layer.getSource().getApplyGlobalQuery(),setApplyGlobalQuery:this._onApplyGlobalQueryChange}),globalTimeCheckbox)}}function filter_editor_mapStateToProps(state={}){return{layer:getSelectedLayer(state)}}function filter_editor_mapDispatchToProps(dispatch){return{setLayerQuery:(layerId,query)=>{dispatch(setLayerQuery(layerId,query))},updateSourceProp:(id,propName,value)=>dispatch(updateSourceProp(id,propName,value))}}const connectedFilterEditor=Object(lib["connect"])(filter_editor_mapStateToProps,filter_editor_mapDispatchToProps)(filter_editor_FilterEditor);function join_expression_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class join_expression_JoinExpression extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);join_expression_defineProperty(this,"state",{isPopoverOpen:false});join_expression_defineProperty(this,"_togglePopover",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))});join_expression_defineProperty(this,"_closePopover",()=>{this.setState({isPopoverOpen:false})});join_expression_defineProperty(this,"_onRightSourceChange",async indexPatternId=>{try{const indexPattern=await Object(kibana_services["p"])().get(indexPatternId);this.props.onRightSourceChange({indexPatternId:indexPatternId,indexPatternTitle:indexPattern.title})}catch(err){}});join_expression_defineProperty(this,"_onLeftFieldChange",selectedFields=>{this.props.onLeftFieldChange(external_kbnSharedDeps_Lodash_default.a.get(selectedFields,"[0].value.name",null))})}_renderLeftFieldSelect(){const{leftValue:leftValue,leftFields:leftFields}=this.props;if(!leftFields){return null}const options=leftFields.map(field=>({value:field,label:field.label}));let leftFieldOption;if(leftValue){leftFieldOption=options.find(option=>{const field=option.value;return field.name===leftValue})}const selectedOptions=leftFieldOption?[leftFieldOption]:[];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.joinExpression.leftFieldLabel",{defaultMessage:"Left field"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.joinExpression.leftSourceLabelHelpText",{defaultMessage:"Left source field that contains the shared key."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:getSelectFieldPlaceholder(),singleSelection:true,isClearable:false,options:options,selectedOptions:selectedOptions,onChange:this._onLeftFieldChange}))}_renderRightSourceSelect(){if(!this.props.leftValue){return null}const IndexPatternSelect=Object(kibana_services["o"])();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.joinExpression.rightSourceLabel",{defaultMessage:"Right source"})},external_kbnSharedDeps_React_default.a.createElement(IndexPatternSelect,{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.joinExpression.selectIndexPatternPlaceholder",{defaultMessage:"Select index pattern"}),indexPatternId:this.props.rightSourceIndexPatternId,onChange:this._onRightSourceChange,isClearable:false}))}_renderRightFieldSelect(){if(!this.props.rightFields||!this.props.leftValue){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.joinExpression.rightFieldLabel",{defaultMessage:"Right field"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.joinExpression.rightSourceLabelHelpText",{defaultMessage:"Right source field that contains the shared key."})},external_kbnSharedDeps_React_default.a.createElement(SingleFieldSelect,{placeholder:getSelectFieldPlaceholder(),value:this.props.rightValue,onChange:this.props.onRightFieldChange,fields:getTermsFields(this.props.rightFields),isClearable:false}))}_renderRightFieldSizeInput(){if(!this.props.rightValue||!this.props.leftValue){return null}return external_kbnSharedDeps_React_default.a.createElement(validated_number_input_ValidatedNumberInput,{initialValue:this.props.rightSize!==undefined?this.props.rightSize:constants["DEFAULT_MAX_BUCKETS_LIMIT"],min:1,max:constants["DEFAULT_MAX_BUCKETS_LIMIT"],onChange:this.props.onRightSizeChange,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.joinExpression.rightSizeLabel",{defaultMessage:"Right size"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.joinExpression.rightSizeHelpText",{defaultMessage:"Right field term limit."})})}_getExpressionValue(){const{leftSourceName:leftSourceName,leftValue:leftValue,rightSourceName:rightSourceName,rightValue:rightValue,rightSize:rightSize}=this.props;if(leftSourceName&&leftValue&&rightSourceName&&rightValue){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.joinExpression.value",{defaultMessage:"{leftSourceName}:{leftValue} with {sizeFragment} {rightSourceName}:{rightValue}",values:{leftSourceName:leftSourceName,leftValue:leftValue,sizeFragment:rightSize!==undefined?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.joinExpression.sizeFragment",{defaultMessage:"top {rightSize} terms from",values:{rightSize:rightSize}}):"",rightSourceName:rightSourceName,rightValue:rightValue}})}return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.joinExpression.selectPlaceholder",{defaultMessage:"-- select --"})}render(){const{leftSourceName:leftSourceName}=this.props;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"joinPopover",isOpen:this.state.isPopoverOpen,closePopover:this._closePopover,ownFocus:true,initialFocus:"body",anchorPosition:"leftCenter",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiExpression"],{onClick:this._togglePopover,description:"Join",uppercase:false,value:this._getExpressionValue()})},external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:300}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerPanel.joinExpression.joinPopoverTitle",defaultMessage:"Join"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormHelpText"],{className:"mapJoinExpressionHelpText"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerPanel.joinExpression.helpText",defaultMessage:"Configure the shared key."})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.joinExpression.leftSourceLabel",{defaultMessage:"Left source"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{selectedOptions:[{value:leftSourceName,label:leftSourceName}],isDisabled:true})),this._renderLeftFieldSelect(),this._renderRightSourceSelect(),this._renderRightFieldSelect(),this._renderRightFieldSizeInput()))}}function getSelectFieldPlaceholder(){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.joinExpression.selectFieldPlaceholder",{defaultMessage:"Select field"})}function metrics_expression_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class metrics_expression_MetricsExpression extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);metrics_expression_defineProperty(this,"state",{isPopoverOpen:false});metrics_expression_defineProperty(this,"_togglePopover",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))});metrics_expression_defineProperty(this,"_closePopover",()=>{this.setState({isPopoverOpen:false})});metrics_expression_defineProperty(this,"_renderMetricsEditor",()=>{if(!this.props.rightFields){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormErrorText"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerPanel.metricsExpression.joinMustBeSetErrorMessage",defaultMessage:"JOIN must be set"}))}return external_kbnSharedDeps_React_default.a.createElement(metrics_editor_MetricsEditor,{fields:this.props.rightFields,metrics:this.props.metrics,onChange:this.props.onChange,allowMultipleMetrics:true})})}render(){const metricExpressions=this.props.metrics.filter(({type:type,field:field})=>{if(type===constants["AGG_TYPE"].COUNT){return true}if(field){return true}return false}).map(({type:type,field:field})=>{if(type===constants["AGG_TYPE"].COUNT){return"count"}return`${type} ${field}`});const useMetricDescription=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.metricsExpression.useMetricsDescription",{defaultMessage:"{metricsLength, plural, one {and use metric} other {and use metrics}}",values:{metricsLength:metricExpressions.length}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"metricsPopover",isOpen:this.state.isPopoverOpen,closePopover:this._closePopover,ownFocus:true,initialFocus:"body",anchorPosition:"leftCenter",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiExpression"],{onClick:this._togglePopover,description:useMetricDescription,uppercase:false,value:metricExpressions.length>0?metricExpressions.join(", "):"count"})},external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:400}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerPanel.metricsExpression.metricsPopoverTitle",defaultMessage:"Metrics"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormHelpText"],{className:"mapJoinExpressionHelpText"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerPanel.metricsExpression.helpText",defaultMessage:"Configure the metrics for the right source. These values are added to the layer features."})),this._renderMetricsEditor()))}}metrics_expression_MetricsExpression.defaultProps={metrics:[{type:constants["AGG_TYPE"].COUNT}]};function where_expression_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class where_expression_WhereExpression extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);where_expression_defineProperty(this,"state",{isPopoverOpen:false});where_expression_defineProperty(this,"_togglePopover",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))});where_expression_defineProperty(this,"_closePopover",()=>{this.setState({isPopoverOpen:false})});where_expression_defineProperty(this,"_onQueryChange",({query:query})=>{this.props.onChange(query);this._closePopover()})}render(){const{SearchBar:SearchBar}=Object(kibana_services["g"])().ui;const{whereQuery:whereQuery,indexPattern:indexPattern}=this.props;const expressionValue=whereQuery&&whereQuery.query?whereQuery.query:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.whereExpression.expressionValuePlaceholder",{defaultMessage:"-- add filter --"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"whereClausePopover",isOpen:this.state.isPopoverOpen,closePopover:this._closePopover,ownFocus:true,anchorPosition:"leftCenter",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiExpression"],{onClick:this._togglePopover,description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.whereExpression.expressionDescription",{defaultMessage:"where"}),uppercase:false,value:expressionValue,"data-test-subj":"mapJoinWhereExpressionButton"})},external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapFilterEditor","data-test-subj":"mapJoinWhereFilterEditor"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormHelpText"],{className:"mapJoinExpressionHelpText"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerPanel.whereExpression.helpText",defaultMessage:"Use a query to narrow right source."})),external_kbnSharedDeps_React_default.a.createElement(SearchBar,{showFilterBar:false,showDatePicker:false,showQueryInput:true,query:whereQuery?whereQuery:Object(kibana_services["g"])().query.queryString.getDefaultQuery(),onQuerySubmit:this._onQueryChange,indexPatterns:[indexPattern],customSubmitButton:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,"data-test-subj":"mapWhereFilterEditorSubmitButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerPanel.whereExpression.queryBarSubmitButtonLabel",defaultMessage:"Set filter"}))})))}}function join_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class join_Join extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);join_defineProperty(this,"state",{rightFields:undefined,indexPattern:undefined,loadError:undefined});join_defineProperty(this,"_onLeftFieldChange",leftField=>{this.props.onChange({leftField:leftField,right:this.props.join.right})});join_defineProperty(this,"_onRightSourceChange",({indexPatternId:indexPatternId,indexPatternTitle:indexPatternTitle})=>{this.setState({rightFields:undefined,loadError:undefined});this._loadRightFields(indexPatternId);const{term:term,...restOfRight}=this.props.join.right;this.props.onChange({leftField:this.props.join.leftField,right:{...restOfRight,indexPatternId:indexPatternId,indexPatternTitle:indexPatternTitle,type:constants["SOURCE_TYPES"].ES_TERM_SOURCE}})});join_defineProperty(this,"_onRightFieldChange",term=>{this.props.onChange({leftField:this.props.join.leftField,right:{...this.props.join.right,term:term}})});join_defineProperty(this,"_onRightSizeChange",size=>{this.props.onChange({leftField:this.props.join.leftField,right:{...this.props.join.right,size:size}})});join_defineProperty(this,"_onMetricsChange",metrics=>{this.props.onChange({leftField:this.props.join.leftField,right:{...this.props.join.right,metrics:metrics}})});join_defineProperty(this,"_onWhereQueryChange",whereQuery=>{this.props.onChange({leftField:this.props.join.leftField,right:{...this.props.join.right,whereQuery:whereQuery}})});join_defineProperty(this,"_onApplyGlobalQueryChange",applyGlobalQuery=>{this.props.onChange({leftField:this.props.join.leftField,right:{...this.props.join.right,applyGlobalQuery:applyGlobalQuery}})});join_defineProperty(this,"_onApplyGlobalTimeChange",applyGlobalTime=>{this.props.onChange({leftField:this.props.join.leftField,right:{...this.props.join.right,applyGlobalTime:applyGlobalTime}})})}componentDidMount(){this._isMounted=true;this._loadRightFields(external_kbnSharedDeps_Lodash_default.a.get(this.props.join,"right.indexPatternId"))}componentWillUnmount(){this._isMounted=false}async _loadRightFields(indexPatternId){if(!indexPatternId){return}let indexPattern;try{indexPattern=await Object(kibana_services["p"])().get(indexPatternId)}catch(err){if(this._isMounted){this.setState({loadError:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.join.noIndexPatternErrorMessage",{defaultMessage:`Unable to find Index pattern {indexPatternId}`,values:{indexPatternId:indexPatternId}})})}return}if(!this._isMounted){return}this.setState({rightFields:indexPattern.fields.filter(field=>!data_public_["indexPatterns"].isNestedField(field)),indexPattern:indexPattern})}render(){const{join:join,onRemove:onRemove,leftFields:leftFields,leftSourceName:leftSourceName}=this.props;const{rightFields:rightFields,indexPattern:indexPattern}=this.state;const right=external_kbnSharedDeps_Lodash_default.a.get(join,"right",{});const rightSourceName=right.indexPatternTitle?right.indexPatternTitle:right.indexPatternId;const isJoinConfigComplete=join.leftField&&right.indexPatternId&&right.term;let metricsExpression;let globalFilterCheckbox;let globalTimeCheckbox;if(isJoinConfigComplete){metricsExpression=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(metrics_expression_MetricsExpression,{metrics:right.metrics,rightFields:rightFields,onChange:this._onMetricsChange}));globalFilterCheckbox=external_kbnSharedDeps_React_default.a.createElement(GlobalFilterCheckbox,{applyGlobalQuery:right.applyGlobalQuery==="undefined"?true:right.applyGlobalQuery,setApplyGlobalQuery:this._onApplyGlobalQueryChange,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.join.applyGlobalQueryCheckboxLabel",{defaultMessage:`Apply global filter to join`})});if(this.state.indexPattern&&this.state.indexPattern.timeFieldName){globalTimeCheckbox=external_kbnSharedDeps_React_default.a.createElement(GlobalTimeCheckbox,{applyGlobalTime:typeof right.applyGlobalTime==="undefined"?true:right.applyGlobalTime,setApplyGlobalTime:this._onApplyGlobalTimeChange,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.join.applyGlobalTimeCheckboxLabel",{defaultMessage:`Apply global time to join`})})}}let whereExpression;if(indexPattern&&isJoinConfigComplete){whereExpression=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(where_expression_WhereExpression,{indexPattern:indexPattern,whereQuery:join.right.whereQuery,onChange:this._onWhereQueryChange}))}return external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapJoinItem"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:"mapJoinItem__inner",responsive:false,wrap:true,gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(join_expression_JoinExpression,{leftSourceName:leftSourceName,leftValue:join.leftField,leftFields:leftFields,onLeftFieldChange:this._onLeftFieldChange,rightSourceIndexPatternId:right.indexPatternId,rightSourceName:rightSourceName,onRightSourceChange:this._onRightSourceChange,rightValue:right.term,rightSize:right.size,rightFields:rightFields,onRightFieldChange:this._onRightFieldChange,onRightSizeChange:this._onRightSizeChange})),metricsExpression,whereExpression),globalFilterCheckbox,globalTimeCheckbox,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{className:"mapJoinItem__delete",iconType:"trash",color:"danger","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.join.deleteJoinAriaLabel",{defaultMessage:"Delete join"}),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.join.deleteJoinTitle",{defaultMessage:"Delete join"}),onClick:onRemove}))}}function JoinEditor({joins:joins,layer:layer,onChange:onChange,leftJoinFields:leftJoinFields,layerDisplayName:layerDisplayName}){const renderJoins=()=>joins.map((joinDescriptor,index)=>{const handleOnChange=updatedDescriptor=>{onChange(layer,[...joins.slice(0,index),updatedDescriptor,...joins.slice(index+1)])};const handleOnRemove=()=>{onChange(layer,[...joins.slice(0,index),...joins.slice(index+1)])};if(joinDescriptor.right.type===constants["SOURCE_TYPES"].TABLE_SOURCE){throw new Error("PEBKAC - Table sources cannot be edited in the UX and should only be used in MapEmbeddable")}else{return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:index},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(join_Join,{join:joinDescriptor,layer:layer,onChange:handleOnChange,onRemove:handleOnRemove,leftFields:leftJoinFields,leftSourceName:layerDisplayName}))}});const addJoin=()=>{onChange(layer,[...joins,{right:{id:v4_default()(),applyGlobalQuery:true,applyGlobalTime:true}}])};const renderContent=()=>{const disabledReason=layer.getJoinsDisabledReason();return disabledReason?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"warning"},disabledReason):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,renderJoins(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextAlign"],{textAlign:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:addJoin,size:"xs",iconType:"plusInCircleFilled","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.joinEditor.addJoinAriaLabel",{defaultMessage:"Add join"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerPanel.joinEditor.addJoinButtonLabel",defaultMessage:"Add join"}))))};return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.joinEditor.termJoinTooltip",{defaultMessage:"Use term joins to augment this layer with properties for data driven styling."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerPanel.joinEditor.termJoinsTitle",defaultMessage:"Term joins"})))),renderContent())}function join_editor_mapStateToProps(state){return{joins:getSelectedLayerJoinDescriptors(state)}}function join_editor_mapDispatchToProps(dispatch){return{onChange:(layer,joins)=>{dispatch(setJoinsForLayer(layer,joins))}}}const connectedJoinEditor=Object(lib["connect"])(join_editor_mapStateToProps,join_editor_mapDispatchToProps)(JoinEditor);const FlyoutFooter=({cancelLayerPanel:cancelLayerPanel,saveLayerEdits:saveLayerEdits,removeLayer:removeLayer,hasStateChanged:hasStateChanged})=>{const removeBtn=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{color:"danger",onClick:removeLayer,flush:"right","data-test-subj":"mapRemoveLayerButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerPanel.footer.removeLayerButtonLabel",defaultMessage:"Remove layer"})));const cancelButtonLabel=hasStateChanged?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerPanel.footer.cancelButtonLabel",defaultMessage:"Cancel"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerPanel.footer.closeButtonLabel",defaultMessage:"Close"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:cancelLayerPanel,flush:"left","data-test-subj":"layerPanelCancelButton"},cancelButtonLabel)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null)),removeBtn,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{disabled:!hasStateChanged,iconType:"check",onClick:saveLayerEdits,fill:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerPanel.footer.saveAndCloseButtonLabel",defaultMessage:"Save & close"}))))};function flyout_footer_mapStateToProps(state={}){return{hasStateChanged:hasDirtyState(state)}}const flyout_footer_mapDispatchToProps=dispatch=>({cancelLayerPanel:()=>{dispatch(updateFlyout(FLYOUT_STATE.NONE));dispatch(setSelectedLayer(null))},saveLayerEdits:()=>{dispatch(updateFlyout(FLYOUT_STATE.NONE));dispatch(removeTrackedLayerStateForSelectedLayer());dispatch(setSelectedLayer(null))},removeLayer:()=>{dispatch(removeSelectedLayer())}});const connectedFlyoutFooter=Object(lib["connect"])(flyout_footer_mapStateToProps,flyout_footer_mapDispatchToProps)(FlyoutFooter);function LayerErrors({layer:layer}){if(!layer.hasErrors()){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"warning",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.settingsPanel.unableToLoadTitle",{defaultMessage:"Unable to load layer"})},external_kbnSharedDeps_React_default.a.createElement("p",{"data-test-subj":"layerErrorMessage"},layer.getErrors())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))}function layer_errors_mapStateToProps(state={}){return{layer:getSelectedLayer(state)}}const connectedLayerErrors=Object(lib["connect"])(layer_errors_mapStateToProps,null)(LayerErrors);function AlphaSlider({alpha:alpha,onChange:onChange}){const onAlphaChange=newAlpha=>{onChange(newAlpha/100)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.settingsPanel.layerTransparencyLabel",{defaultMessage:"Opacity"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(validated_range_ValidatedRange,{min:0,max:100,step:1,value:Math.round(alpha*100),onChange:onAlphaChange,showInput:true,showRange:true,compressed:true,append:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.settingsPanel.percentageLabel",{defaultMessage:"%",description:"Percentage"})}))}function LayerSettings(props){const minVisibilityZoom=props.layer.getMinSourceZoom();const maxVisibilityZoom=constants["MAX_ZOOM"];const layerId=props.layer.getId();const onLabelChange=event=>{const label=event.target.value;props.updateLabel(layerId,label)};const onZoomChange=value=>{props.updateMinZoom(layerId,Math.max(minVisibilityZoom,parseInt(value[0],10)));props.updateMaxZoom(layerId,Math.min(maxVisibilityZoom,parseInt(value[1],10)))};const onAlphaChange=alpha=>{props.updateAlpha(layerId,alpha)};const onLabelsOnTopChange=event=>{props.updateLabelsOnTop(layerId,event.target.checked)};const renderZoomSliders=()=>external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_["ValidatedDualRange"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.settingsPanel.visibleZoomLabel",{defaultMessage:"Visibility"}),formRowDisplay:"columnCompressed",min:minVisibilityZoom,max:maxVisibilityZoom,value:[props.layer.getMinZoom(),props.layer.getMaxZoom()],showInput:"inputWithPopover",showRange:true,showLabels:true,onChange:onZoomChange,allowEmptyRange:false,compressed:true,prepend:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.settingsPanel.visibleZoom",{defaultMessage:"Zoom levels"})});const renderLabel=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.settingsPanel.layerNameLabel",{defaultMessage:"Name"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{value:props.layer.getLabel(),onChange:onLabelChange,compressed:true}));const renderShowLabelsOnTop=()=>{if(!props.layer.supportsLabelsOnTop()){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{display:"columnCompressedSwitch"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.settingsPanel.labelsOnTop",{defaultMessage:`Show labels on top`}),checked:props.layer.areLabelsOnTop(),onChange:onLabelsOnTopChange,"data-test-subj":"mapLayerPanelApplyGlobalQueryCheckbox",compressed:true}))};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerPanel.layerSettingsTitle",defaultMessage:"Layer settings"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),renderLabel(),renderZoomSliders(),external_kbnSharedDeps_React_default.a.createElement(AlphaSlider,{alpha:props.layer.getAlpha(),onChange:onAlphaChange}),renderShowLabelsOnTop()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}function layer_settings_mapDispatchToProps(dispatch){return{updateLabel:(id,label)=>dispatch(updateLayerLabel(id,label)),updateMinZoom:(id,minZoom)=>dispatch(updateLayerMinZoom(id,minZoom)),updateMaxZoom:(id,maxZoom)=>dispatch(updateLayerMaxZoom(id,maxZoom)),updateAlpha:(id,alpha)=>dispatch(updateLayerAlpha(id,alpha)),updateLabelsOnTop:(id,areLabelsOnTop)=>dispatch(updateLabelsOnTop(id,areLabelsOnTop))}}const connectedLayerSettings=Object(lib["connect"])(null,layer_settings_mapDispatchToProps)(LayerSettings);function StyleSettings({layer:layer,updateStyleDescriptor:updateStyleDescriptor}){const settingsEditor=layer.renderStyleEditor(updateStyleDescriptor);if(!settingsEditor){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{className:"mapStyleSettings"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerPanel.styleSettingsTitle",defaultMessage:"Layer Style"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),settingsEditor),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}function style_settings_mapStateToProps(state={}){return{layer:getSelectedLayer(state)}}function style_settings_mapDispatchToProps(dispatch){return{updateStyleDescriptor:styleDescriptor=>{dispatch(updateLayerStyleForSelectedLayer(styleDescriptor))}}}const connectedStyleSettings=Object(lib["connect"])(style_settings_mapStateToProps,style_settings_mapDispatchToProps)(StyleSettings);function layer_panel_view_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const localStorage=new kibanaUtils_public_["Storage"](window.localStorage);class view_LayerPanel extends external_kbnSharedDeps_React_default.a.Component{constructor(..._args){super(..._args);layer_panel_view_defineProperty(this,"state",{displayName:"",immutableSourceProps:[],leftJoinFields:null});layer_panel_view_defineProperty(this,"_loadDisplayName",async()=>{if(!this.props.selectedLayer){return}const displayName=await this.props.selectedLayer.getDisplayName();if(this._isMounted){this.setState({displayName:displayName})}});layer_panel_view_defineProperty(this,"_loadImmutableSourceProperties",async()=>{if(!this.props.selectedLayer){return}const immutableSourceProps=await this.props.selectedLayer.getImmutableSourceProperties();if(this._isMounted){this.setState({immutableSourceProps:immutableSourceProps})}});layer_panel_view_defineProperty(this,"_onSourceChange",(...args)=>{for(let i=0;i<args.length;i++){const{propName:propName,value:value,newLayerType:newLayerType}=args[i];this.props.updateSourceProp(this.props.selectedLayer.getId(),propName,value,newLayerType)}})}componentDidMount(){this._isMounted=true;this._loadDisplayName();this._loadImmutableSourceProperties();this._loadLeftJoinFields()}componentWillUnmount(){this._isMounted=false}async _loadLeftJoinFields(){if(!this.props.selectedLayer||!this.props.selectedLayer.showJoinEditor()){return}let leftJoinFields;try{const leftFieldsInstances=await this.props.selectedLayer.getLeftJoinFields();const leftFieldPromises=leftFieldsInstances.map(async field=>({name:field.getName(),label:await field.getLabel()}));leftJoinFields=await Promise.all(leftFieldPromises)}catch(error){leftJoinFields=[]}if(this._isMounted){this.setState({leftJoinFields:leftJoinFields})}}_renderFilterSection(){if(!this.props.selectedLayer.supportsElasticsearchFilters()){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(connectedFilterEditor,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}_renderJoinSection(){if(!this.props.selectedLayer.showJoinEditor()){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(connectedJoinEditor,{layer:this.props.selectedLayer,leftJoinFields:this.state.leftJoinFields,layerDisplayName:this.state.displayName})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}_renderSourceProperties(){return this.state.immutableSourceProps.map(({label:label,value:value,link:link})=>{function renderValue(){if(link){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:link,target:"_blank"},value)}return external_kbnSharedDeps_React_default.a.createElement("span",null,value)}return external_kbnSharedDeps_React_default.a.createElement("p",{key:label,className:"mapLayerPanel__sourceDetail"},external_kbnSharedDeps_React_default.a.createElement("strong",null,label)," ",renderValue())})}render(){const{selectedLayer:selectedLayer}=this.props;if(!selectedLayer){return null}return external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_["KibanaContextProvider"],{services:{appName:"maps",storage:localStorage,data:Object(kibana_services["g"])(),...Object(kibana_services["c"])()}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"column",gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true,className:"mapLayerPanel__header"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false,alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:selectedLayer.getLayerTypeIconName()})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,this.state.displayName)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapLayerPanel__sourceDetails"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:"accordion1",buttonContent:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerPanel.sourceDetailsLabel",{defaultMessage:"Source details"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued",size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),this._renderSourceProperties())))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapLayerPanel__body"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapLayerPanel__bodyOverflow"},external_kbnSharedDeps_React_default.a.createElement(connectedLayerErrors,null),external_kbnSharedDeps_React_default.a.createElement(connectedLayerSettings,{layer:selectedLayer}),this.props.selectedLayer.renderSourceSettingsEditor({onChange:this._onSourceChange}),this._renderFilterSection(),this._renderJoinSection(),external_kbnSharedDeps_React_default.a.createElement(connectedStyleSettings,null))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],{className:"mapLayerPanel__footer"},external_kbnSharedDeps_React_default.a.createElement(connectedFlyoutFooter,null))))}}function layer_panel_mapStateToProps(state={}){const selectedLayer=getSelectedLayer(state);return{key:selectedLayer?`${selectedLayer.getId()}${selectedLayer.showJoinEditor()}`:"",selectedLayer:selectedLayer}}function layer_panel_mapDispatchToProps(dispatch){return{updateSourceProp:(id,propName,value,newLayerType)=>dispatch(updateSourceProp(id,propName,value,newLayerType))}}const connectedLayerPanel=Object(lib["connect"])(layer_panel_mapStateToProps,layer_panel_mapDispatchToProps)(view_LayerPanel);const layer_wizard_registry_registry=[];function registerLayerWizard(layerWizard){layer_wizard_registry_registry.push({checkVisibility:async()=>true,getIsDisabled:async()=>false,...layerWizard})}async function getLayerWizards(){const promises=layer_wizard_registry_registry.map(async layerWizard=>({...layerWizard,isVisible:await layerWizard.checkVisibility(),isDisabled:await layerWizard.getIsDisabled()}));return(await Promise.all(promises)).filter(({isVisible:isVisible})=>isVisible)}var layer_wizard_select=__webpack_require__(312);function layer_wizard_select_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getCategoryLabel(category){if(category===constants["LAYER_WIZARD_CATEGORY"].ELASTICSEARCH){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerWizardSelect.elasticsearchCategoryLabel",{defaultMessage:"Elasticsearch"})}if(category===constants["LAYER_WIZARD_CATEGORY"].REFERENCE){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerWizardSelect.referenceCategoryLabel",{defaultMessage:"Reference"})}if(category===constants["LAYER_WIZARD_CATEGORY"].SOLUTIONS){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.layerWizardSelect.solutionsCategoryLabel",{defaultMessage:"Solutions"})}throw new Error(`Unexpected category: ${category}`)}class layer_wizard_select_LayerWizardSelect extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);layer_wizard_select_defineProperty(this,"_isMounted",false);layer_wizard_select_defineProperty(this,"state",{activeCategories:[],hasLoadedWizards:false,layerWizards:[],selectedCategory:null})}componentDidMount(){this._isMounted=true;this._loadLayerWizards()}componentWillUnmount(){this._isMounted=false}async _loadLayerWizards(){const layerWizards=await getLayerWizards();const activeCategories=[];layerWizards.forEach(layerWizard=>{layerWizard.categories.forEach(category=>{if(!activeCategories.includes(category)){activeCategories.push(category)}})});if(this._isMounted){this.setState({activeCategories:activeCategories,layerWizards:layerWizards,hasLoadedWizards:true})}}_filterByCategory(category){this.setState({selectedCategory:category})}_renderCategoryFacets(){if(this.state.activeCategories.length===0){return null}const facets=this.state.activeCategories.map(category=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFacetButton"],{key:category,isSelected:category===this.state.selectedCategory,onClick:()=>this._filterByCategory(category)},getCategoryLabel(category)));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFacetGroup"],{layout:"horizontal",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFacetButton"],{key:"all",isSelected:!this.state.selectedCategory,onClick:()=>this._filterByCategory(null)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.layerWizardSelect.allCategories",defaultMessage:"All"})),facets)}render(){if(!this.state.hasLoadedWizards){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCard"],{title:"",description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingContent"],{lines:2}),layout:"horizontal"}))}const wizardCards=this.state.layerWizards.filter(layerWizard=>this.state.selectedCategory?layerWizard.categories.includes(this.state.selectedCategory):true).map(layerWizard=>{const icon=layerWizard.icon?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:layerWizard.icon,size:"l"}):undefined;const onClick=()=>{this.props.onSelect(layerWizard)};const card=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCard"],{title:layerWizard.title,titleSize:"xs",icon:icon,onClick:onClick,description:layerWizard.description,isDisabled:layerWizard.isDisabled,"data-test-subj":external_kbnSharedDeps_Lodash_default.a.camelCase(layerWizard.title)});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{key:layerWizard.title},layerWizard.isDisabled&&layerWizard.disabledReason?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",anchorClassName:"mapMapLayerWizardSelect__tooltip",content:layerWizard.disabledReason},card):card)});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,this._renderCategoryFacets(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGrid"],{columns:2,gutterSize:"m"},wizardCards))}}const FlyoutBody=props=>{function renderContent(){if(!props.layerWizard||!props.currentStepId){return external_kbnSharedDeps_React_default.a.createElement(layer_wizard_select_LayerWizardSelect,{onSelect:props.onWizardSelect})}const renderWizardArgs={previewLayers:props.previewLayers,mapColors:props.mapColors,currentStepId:props.currentStepId,enableNextBtn:props.enableNextBtn,disableNextBtn:props.disableNextBtn,startStepLoading:props.startStepLoading,stopStepLoading:props.stopStepLoading,advanceToNextStep:props.advanceToNextStep};const backButton=props.showBackButton?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs",flush:"left",onClick:props.onClear,iconType:"arrowLeft"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.addLayerPanel.changeDataSourceButtonLabel",defaultMessage:"Change layer"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"})):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,backButton,props.layerWizard.renderWizard(renderWizardArgs))}return external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapLayerPanel__body","data-test-subj":"layerAddForm"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapLayerPanel__bodyOverflow"},renderContent()))};function flyout_body_mapStateToProps(state){return{mapColors:getMapColors(state)}}const flyout_body_connected=Object(lib["connect"])(flyout_body_mapStateToProps,{})(FlyoutBody);function add_layer_panel_view_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const ADD_LAYER_STEP_ID="ADD_LAYER_STEP_ID";const ADD_LAYER_STEP_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.addLayerPanel.addLayer",{defaultMessage:"Add layer"});const SELECT_WIZARD_LABEL=ADD_LAYER_STEP_LABEL;const INITIAL_STATE={currentStepIndex:0,currentStep:null,layerSteps:null,layerWizard:null,isNextStepBtnEnabled:false,isStepLoading:false};class view_AddLayerPanel extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);add_layer_panel_view_defineProperty(this,"state",{...INITIAL_STATE});add_layer_panel_view_defineProperty(this,"_previewLayers",layerDescriptors=>{this.props.addPreviewLayers(layerDescriptors)});add_layer_panel_view_defineProperty(this,"_clearLayerWizard",()=>{this.setState(INITIAL_STATE);this.props.addPreviewLayers([])});add_layer_panel_view_defineProperty(this,"_onWizardSelect",layerWizard=>{const layerSteps=[...layerWizard.prerequisiteSteps?layerWizard.prerequisiteSteps:[],{id:ADD_LAYER_STEP_ID,label:ADD_LAYER_STEP_LABEL}];this.setState({...INITIAL_STATE,layerWizard:layerWizard,layerSteps:layerSteps,currentStep:layerSteps[0]})});add_layer_panel_view_defineProperty(this,"_onNext",()=>{if(!this.state.layerSteps){return}if(this.state.layerSteps.length-1===this.state.currentStepIndex){this.props.promotePreviewLayers()}else{this.setState(prevState=>{const nextIndex=prevState.currentStepIndex+1;return{currentStepIndex:nextIndex,currentStep:prevState.layerSteps[nextIndex],isNextStepBtnEnabled:false,isStepLoading:false}})}});add_layer_panel_view_defineProperty(this,"_enableNextBtn",()=>{this.setState({isNextStepBtnEnabled:true})});add_layer_panel_view_defineProperty(this,"_disableNextBtn",()=>{this.setState({isNextStepBtnEnabled:false})});add_layer_panel_view_defineProperty(this,"_startStepLoading",()=>{this.setState({isStepLoading:true})});add_layer_panel_view_defineProperty(this,"_stopStepLoading",()=>{this.setState({isStepLoading:false})})}_renderNextButton(){if(!this.state.currentStep){return null}let isDisabled=!this.state.isNextStepBtnEnabled;let isLoading=this.state.isStepLoading;if(this.state.currentStep.id===ADD_LAYER_STEP_ID){isDisabled=!this.props.hasPreviewLayers;isLoading=this.props.isLoadingPreviewLayers}else{isDisabled=!this.state.isNextStepBtnEnabled;isLoading=this.state.isStepLoading}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"importFileButton",disabled:isDisabled||isLoading,isLoading:isLoading,iconSide:"right",iconType:"sortRight",onClick:this._onNext,fill:true},this.state.currentStep.label))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true,className:"mapLayerPanel__header"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,this.state.currentStep?this.state.currentStep.label:SELECT_WIZARD_LABEL))),external_kbnSharedDeps_React_default.a.createElement(flyout_body_connected,{layerWizard:this.state.layerWizard,onClear:this._clearLayerWizard,onWizardSelect:this._onWizardSelect,previewLayers:this._previewLayers,showBackButton:!this.state.isStepLoading,currentStepId:this.state.currentStep?this.state.currentStep.id:null,enableNextBtn:this._enableNextBtn,disableNextBtn:this._disableNextBtn,startStepLoading:this._startStepLoading,stopStepLoading:this._stopStepLoading,advanceToNextStep:this._onNext}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],{className:"mapLayerPanel__footer"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:this.props.closeFlyout,flush:"left","data-test-subj":"layerAddCancelButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.addLayerPanel.footer.cancelButtonLabel",defaultMessage:"Cancel"}))),this._renderNextButton())))}}function add_layer_panel_mapStateToProps(state){return{hasPreviewLayers:hasPreviewLayers(state),isLoadingPreviewLayers:isLoadingPreviewLayers(state)}}function add_layer_panel_mapDispatchToProps(dispatch){return{addPreviewLayers:layerDescriptors=>{dispatch(addPreviewLayers(layerDescriptors))},promotePreviewLayers:()=>{dispatch(setFirstPreviewLayerToSelectedLayer());dispatch(updateFlyout(FLYOUT_STATE.LAYER_PANEL));dispatch(promotePreviewLayers())},closeFlyout:()=>{dispatch(updateFlyout(FLYOUT_STATE.NONE));dispatch(removePreviewLayers())}}}const add_layer_panel_connected=Object(lib["connect"])(add_layer_panel_mapStateToProps,add_layer_panel_mapDispatchToProps,null,{forwardRef:true})(view_AddLayerPanel);const initialLocationOptions=[{id:constants["INITIAL_LOCATION"].LAST_SAVED_LOCATION,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapSettingsPanel.lastSavedLocationLabel",{defaultMessage:"Map location at save"})},{id:constants["INITIAL_LOCATION"].AUTO_FIT_TO_BOUNDS,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapSettingsPanel.autoFitToBoundsLocationLabel",{defaultMessage:"Auto fit map to data bounds"})},{id:constants["INITIAL_LOCATION"].FIXED_LOCATION,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapSettingsPanel.fixedLocationLabel",{defaultMessage:"Fixed location"})},{id:constants["INITIAL_LOCATION"].BROWSER_LOCATION,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapSettingsPanel.browserLocationLabel",{defaultMessage:"Browser location"})}];function NavigationPanel({center:center,settings:settings,updateMapSetting:updateMapSetting,zoom:zoom}){const onAutoFitToDataBoundsChange=event=>{updateMapSetting("autoFitToDataBounds",event.target.checked)};const onZoomChange=value=>{const minZoom=Math.max(constants["MIN_ZOOM"],parseInt(value[0],10));const maxZoom=Math.min(constants["MAX_ZOOM"],parseInt(value[1],10));updateMapSetting("minZoom",minZoom);updateMapSetting("maxZoom",maxZoom);if(settings.fixedLocation.zoom<minZoom){onFixedZoomChange(minZoom)}else if(settings.fixedLocation.zoom>maxZoom){onFixedZoomChange(maxZoom)}if(settings.browserLocation.zoom<minZoom){onBrowserZoomChange(minZoom)}else if(settings.browserLocation.zoom>maxZoom){onBrowserZoomChange(maxZoom)}};const onInitialLocationChange=optionId=>{updateMapSetting("initialLocation",optionId)};const onFixedLatChange=event=>{let value=parseFloat(event.target.value);if(isNaN(value)){value=0}else if(value<-90){value=-90}else if(value>90){value=90}updateMapSetting("fixedLocation",{...settings.fixedLocation,lat:value})};const onFixedLonChange=event=>{let value=parseFloat(event.target.value);if(isNaN(value)){value=0}else if(value<-180){value=-180}else if(value>180){value=180}updateMapSetting("fixedLocation",{...settings.fixedLocation,lon:value})};const onFixedZoomChange=value=>{updateMapSetting("fixedLocation",{...settings.fixedLocation,zoom:value})};const onBrowserZoomChange=value=>{updateMapSetting("browserLocation",{zoom:value})};const useCurrentView=()=>{updateMapSetting("fixedLocation",{lat:center.lat,lon:center.lon,zoom:Math.round(zoom)})};function renderInitialLocationInputs(){if(settings.initialLocation===constants["INITIAL_LOCATION"].LAST_SAVED_LOCATION||settings.initialLocation===constants["INITIAL_LOCATION"].AUTO_FIT_TO_BOUNDS){return null}const zoomFormRow=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapSettingsPanel.initialZoomLabel",{defaultMessage:"Initial zoom"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(validated_range_ValidatedRange,{min:settings.minZoom,max:settings.maxZoom,step:1,value:settings.initialLocation===constants["INITIAL_LOCATION"].BROWSER_LOCATION?settings.browserLocation.zoom:settings.fixedLocation.zoom,onChange:settings.initialLocation===constants["INITIAL_LOCATION"].BROWSER_LOCATION?onBrowserZoomChange:onFixedZoomChange,showInput:true,showRange:true,compressed:true}));if(settings.initialLocation===constants["INITIAL_LOCATION"].BROWSER_LOCATION){return zoomFormRow}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapSettingsPanel.initialLatLabel",{defaultMessage:"Initial latitude"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{value:settings.fixedLocation.lat,onChange:onFixedLatChange,compressed:true})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapSettingsPanel.initialLonLabel",{defaultMessage:"Initial longitude"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{value:settings.fixedLocation.lon,onChange:onFixedLonChange,compressed:true})),zoomFormRow,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:useCurrentView},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.mapSettingsPanel.useCurrentViewBtnLabel",defaultMessage:"Set to current view"})))))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.mapSettingsPanel.navigationTitle",defaultMessage:"Navigation"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapSettingsPanel.autoFitToDataBoundsLabel",{defaultMessage:"Auto fit map to data bounds"}),checked:settings.autoFitToDataBounds,onChange:onAutoFitToDataBoundsChange,compressed:true,"data-test-subj":"autoFitToDataBoundsSwitch"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_["ValidatedDualRange"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapSettingsPanel.zoomRangeLabel",{defaultMessage:"Zoom range"}),formRowDisplay:"columnCompressed",min:constants["MIN_ZOOM"],max:constants["MAX_ZOOM"],value:[settings.minZoom,settings.maxZoom],showInput:"inputWithPopover",showRange:true,showLabels:true,onChange:onZoomChange,allowEmptyRange:false,compressed:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.mapSettingsPanel.initialLocationLabel",{defaultMessage:"Initial map location"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiRadioGroup"],{options:initialLocationOptions,idSelected:settings.initialLocation,onChange:onInitialLocationChange})),renderInitialLocationInputs())}function SpatialFiltersPanel({settings:settings,updateMapSetting:updateMapSetting}){const onAlphaChange=alpha=>{updateMapSetting("spatialFiltersAlpa",alpha)};const onFillColorChange=color=>{updateMapSetting("spatialFiltersFillColor",color)};const onLineColorChange=color=>{updateMapSetting("spatialFiltersLineColor",color)};const onShowSpatialFiltersChange=event=>{updateMapSetting("showSpatialFilters",event.target.checked)};const renderStyleInputs=()=>{if(!settings.showSpatialFilters){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(AlphaSlider,{alpha:settings.spatialFiltersAlpa,onChange:onAlphaChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapSettingsPanel.spatialFiltersFillColorLabel",{defaultMessage:"Fill color"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(mb_validated_color_picker_MbValidatedColorPicker,{color:settings.spatialFiltersFillColor,onChange:onFillColorChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapSettingsPanel.spatialFiltersLineColorLabel",{defaultMessage:"Border color"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(mb_validated_color_picker_MbValidatedColorPicker,{color:settings.spatialFiltersLineColor,onChange:onLineColorChange})))};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.mapSettingsPanel.spatialFiltersTitle",defaultMessage:"Spatial filters"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapSettingsPanel.showSpatialFiltersLabel",{defaultMessage:"Show spatial filters on map"}),checked:settings.showSpatialFilters,onChange:onShowSpatialFiltersChange,compressed:true})),renderStyleInputs())}function DisplayPanel({settings:settings,updateMapSetting:updateMapSetting}){const onBackgroundColorChange=color=>{updateMapSetting("backgroundColor",color)};const onShowScale=event=>{updateMapSetting("showScaleControl",event.target.checked)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.mapSettingsPanel.displayTitle",defaultMessage:"Display"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapSettingsPanel.backgroundColorLabel",{defaultMessage:"Background color"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(mb_validated_color_picker_MbValidatedColorPicker,{color:settings.backgroundColor,onChange:onBackgroundColorChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapSettingsPanel.showScaleLabel",{defaultMessage:"Show scale"}),checked:settings.showScaleControl,onChange:onShowScale,compressed:true})))}function MapSettingsPanel({cancelChanges:cancelChanges,center:center,hasMapSettingsChanges:hasMapSettingsChanges,keepChanges:keepChanges,settings:settings,updateMapSetting:updateMapSetting,zoom:zoom}){const closeBtnLabel=hasMapSettingsChanges?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapSettingsPanel.cancelLabel",{defaultMessage:"Cancel"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapSettingsPanel.closeLabel",{defaultMessage:"Close"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"column",gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true,className:"mapLayerPanel__header"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.mapSettingsPanel.title",defaultMessage:"Map settings"})))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapLayerPanel__body"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapLayerPanel__bodyOverflow"},external_kbnSharedDeps_React_default.a.createElement(DisplayPanel,{settings:settings,updateMapSetting:updateMapSetting}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(NavigationPanel,{center:center,settings:settings,updateMapSetting:updateMapSetting,zoom:zoom}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(SpatialFiltersPanel,{settings:settings,updateMapSetting:updateMapSetting}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],{className:"mapLayerPanel__footer"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:cancelChanges,flush:"left","data-test-subj":"layerPanelCancelButton"},closeBtnLabel)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{disabled:!hasMapSettingsChanges,iconType:"check",onClick:keepChanges,fill:true,"data-test-subj":"mapSettingSubmitButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.mapSettingsPanel.keepChangesButtonLabel",defaultMessage:"Keep changes"}))))))}function map_settings_panel_mapStateToProps(state){return{center:getMapCenter(state),hasMapSettingsChanges:map_selectors_hasMapSettingsChanges(state),settings:getMapSettings(state),zoom:getMapZoom(state)}}function map_settings_panel_mapDispatchToProps(dispatch){return{cancelChanges:()=>{dispatch(rollbackMapSettings());dispatch(updateFlyout(FLYOUT_STATE.NONE))},keepChanges:()=>{dispatch(updateFlyout(FLYOUT_STATE.NONE))},updateMapSetting:(settingKey,settingValue)=>{dispatch(map_actions_updateMapSetting(settingKey,settingValue))}}}const connectedMapSettingsPanel=Object(lib["connect"])(map_settings_panel_mapStateToProps,map_settings_panel_mapDispatchToProps)(MapSettingsPanel);function add_tooltip_field_popover_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function sortByLabel(a,b){return a.label.localeCompare(b.label)}function getOptions(fields,selectedFields){if(!fields){return[]}return fields.filter(field=>{const isFieldSelected=!!selectedFields.find(selectedField=>field.name===selectedField.name);return!isFieldSelected}).map(field=>({value:field.name,prepend:"type"in field?external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_["FieldIcon"],{className:"eui-alignMiddle",type:field.type,fill:"none"}):null,label:field.label})).sort(sortByLabel)}class add_tooltip_field_popover_AddTooltipFieldPopover extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);add_tooltip_field_popover_defineProperty(this,"state",{isPopoverOpen:false,checkedFields:[]});add_tooltip_field_popover_defineProperty(this,"_togglePopover",()=>{this.setState({isPopoverOpen:!this.state.isPopoverOpen})});add_tooltip_field_popover_defineProperty(this,"_closePopover",()=>{this.setState({isPopoverOpen:false})});add_tooltip_field_popover_defineProperty(this,"_onSelect",options=>{const checkedFields=options.filter(option=>option.checked==="on").map(option=>option.value);this.setState({checkedFields:checkedFields,options:options})});add_tooltip_field_popover_defineProperty(this,"_onAdd",()=>{this.props.onAdd(this.state.checkedFields);this.setState({checkedFields:[]});this._closePopover()})}static getDerivedStateFromProps(nextProps,prevState){if(nextProps.fields!==prevState.prevFields||nextProps.selectedFields!==prevState.prevSelectedFields){return{options:getOptions(nextProps.fields,nextProps.selectedFields),checkedFields:[],prevFields:nextProps.fields,prevSelectedFields:nextProps.selectedFields}}return null}_renderAddButton(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:this._togglePopover,size:"xs",iconType:"plusInCircleFilled",isDisabled:!this.props.fields},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.tooltipSelector.togglePopoverLabel",defaultMessage:"Add"}))}_renderContent(){const addLabel=this.state.checkedFields.length===0?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.tooltipSelector.addLabelWithoutCount",{defaultMessage:"Add"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.tooltipSelector.addLabelWithCount",{defaultMessage:"Add {count}",values:{count:this.state.checkedFields.length}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelectable"],{searchable:true,searchProps:{compressed:true},options:this.state.options,onChange:this._onSelect},(list,search)=>external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:"300px"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverTitle"],null,search),list)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextAlign"],{textAlign:"right"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,isDisabled:this.state.checkedFields.length===0,onClick:this._onAdd,size:"s"},addLabel))))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"addTooltipFieldPopover",anchorPosition:"leftCenter",button:this._renderAddButton(),isOpen:this.state.isPopoverOpen,closePopover:this._closePopover,panelPaddingSize:"none",ownFocus:true},this._renderContent())}}function tooltip_selector_extends(){tooltip_selector_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return tooltip_selector_extends.apply(this,arguments)}function tooltip_selector_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const reorder=(list,startIndex,endIndex)=>{const result=Array.from(list);const[removed]=result.splice(startIndex,1);result.splice(endIndex,0,removed);return result};async function getFieldProps(field){return{label:await field.getLabel(),type:await field.getDataType(),name:field.getName()}}class tooltip_selector_TooltipSelector extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);tooltip_selector_defineProperty(this,"_isMounted",void 0);tooltip_selector_defineProperty(this,"_previousFields",void 0);tooltip_selector_defineProperty(this,"_previousSelectedTooltips",void 0);tooltip_selector_defineProperty(this,"state",{fieldProps:[],selectedFieldProps:[]});tooltip_selector_defineProperty(this,"_getPropertyLabel",propertyName=>{if(!this.state.fieldProps.length){return propertyName}const prop=this.state.fieldProps.find(field=>field.name===propertyName);return prop?prop.label:propertyName});tooltip_selector_defineProperty(this,"_onAdd",properties=>{if(!this.props.tooltipFields){this.props.onChange([...properties])}else{const existingProperties=this._getTooltipFieldNames();this.props.onChange([...existingProperties,...properties])}});tooltip_selector_defineProperty(this,"_removeProperty",index=>{if(!this.props.tooltipFields){this.props.onChange([])}else{const tooltipProperties=this._getTooltipFieldNames();tooltipProperties.splice(index,1);this.props.onChange(tooltipProperties)}});tooltip_selector_defineProperty(this,"_onDragEnd",({source:source,destination:destination})=>{if(!destination){return}this.props.onChange(reorder(this._getTooltipFieldNames(),source.index,destination.index))});this._isMounted=false;this._previousFields=null;this._previousSelectedTooltips=null}componentDidMount(){this._isMounted=true;this._loadFieldProps();this._loadTooltipFieldProps()}componentWillUnmount(){this._isMounted=false}componentDidUpdate(){this._loadTooltipFieldProps();this._loadFieldProps()}async _loadTooltipFieldProps(){if(!this.props.tooltipFields||this.props.tooltipFields===this._previousSelectedTooltips){return}this._previousSelectedTooltips=this.props.tooltipFields;const promises=this.props.tooltipFields.map(getFieldProps);const selectedFieldProps=await Promise.all(promises);if(this._isMounted){this.setState({selectedFieldProps:selectedFieldProps})}}async _loadFieldProps(){if(!this.props.fields||this.props.fields===this._previousFields){return}this._previousFields=this.props.fields;const promises=this.props.fields.map(getFieldProps);const fieldProps=await Promise.all(promises);if(this._isMounted){this.setState({fieldProps:fieldProps})}}_getTooltipFieldNames(){return this.props.tooltipFields?this.props.tooltipFields.map(field=>field.getName()):[]}_renderProperties(){if(!this.state.selectedFieldProps.length){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",textAlign:"center"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.tooltipSelector.emptyState.description",defaultMessage:"Add a tooltip field to create filters from field values."}))))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDragDropContext"],{onDragEnd:this._onDragEnd},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDroppable"],{droppableId:"mapLayerTOC",spacing:"none"},(droppableProvided,snapshot)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,this.state.selectedFieldProps.map((field,idx)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDraggable"],{spacing:"none",key:field.name,index:idx,draggableId:field.name,customDragHandle:true,disableInteractiveElementBlocking:true},(provided,state)=>external_kbnSharedDeps_React_default.a.createElement("div",{className:classnames_default()("mapTooltipSelector__propertyRow",{"mapTooltipSelector__propertyRow-isDragging":state.isDragging,"mapTooltipSelector__propertyRow-isDraggingOver":snapshot.isDraggingOver})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{className:"mapTooltipSelector__propertyContent",size:"s"},this._getPropertyLabel(field.name)),external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapTooltipSelector__propertyIcons"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"trash",color:"danger",onClick:this._removeProperty.bind(null,idx),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.tooltipSelector.trashButtonTitle",{defaultMessage:"Remove property"}),"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.tooltipSelector.trashButtonAriaLabel",{defaultMessage:"Remove property"})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],tooltip_selector_extends({className:"mapTooltipSelector__grab",iconType:"grab",color:"subdued",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.tooltipSelector.grabButtonTitle",{defaultMessage:"Reorder property"}),"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.tooltipSelector.grabButtonAriaLabel",{defaultMessage:"Reorder property"})},provided.dragHandleProps)))))))))}render(){return external_kbnSharedDeps_React_default.a.createElement("div",null,this._renderProperties(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextAlign"],{textAlign:"center"},external_kbnSharedDeps_React_default.a.createElement(add_tooltip_field_popover_AddTooltipFieldPopover,{onAdd:this._onAdd,fields:this.state.fieldProps,selectedFields:this.state.selectedFieldProps})))}}let toastDisplayed=false;const load_index_settings_indexSettings=new Map;async function loadIndexSettings(indexPatternTitle){if(load_index_settings_indexSettings.has(indexPatternTitle)){return load_index_settings_indexSettings.get(indexPatternTitle)}const fetchPromise=fetchIndexSettings(indexPatternTitle);load_index_settings_indexSettings.set(indexPatternTitle,fetchPromise);return fetchPromise}async function fetchIndexSettings(indexPatternTitle){const http=Object(kibana_services["n"])();const toasts=Object(kibana_services["K"])();try{return await http.fetch(`/${constants["INDEX_SETTINGS_API_PATH"]}`,{method:"GET",credentials:"same-origin",query:{indexPatternTitle:indexPatternTitle}})}catch(err){const warningMsg=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.indexSettings.fetchErrorMsg",{defaultMessage:`Unable to fetch index settings for index pattern '{indexPatternTitle}'.\n      Ensure you have '{viewIndexMetaRole}' role.`,values:{indexPatternTitle:indexPatternTitle,viewIndexMetaRole:"view_index_metadata"}});if(!toastDisplayed){toastDisplayed=true;toasts.addWarning(warningMsg)}console.warn(warningMsg);return{maxResultWindow:constants["DEFAULT_MAX_RESULT_WINDOW"],maxInnerResultWindow:constants["DEFAULT_MAX_INNER_RESULT_WINDOW"]}}}function scaling_form_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class scaling_form_ScalingForm extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);scaling_form_defineProperty(this,"state",{maxInnerResultWindow:constants["DEFAULT_MAX_INNER_RESULT_WINDOW"],maxResultWindow:constants["DEFAULT_MAX_RESULT_WINDOW"]});scaling_form_defineProperty(this,"_isMounted",false);scaling_form_defineProperty(this,"_onScalingTypeChange",optionId=>{let layerType;if(optionId===constants["SCALING_TYPES"].CLUSTERS){layerType=constants["LAYER_TYPE"].BLENDED_VECTOR}else if(optionId===constants["SCALING_TYPES"].MVT){layerType=constants["LAYER_TYPE"].TILED_VECTOR}else{layerType=constants["LAYER_TYPE"].VECTOR}this.props.onChange({propName:"scalingType",value:optionId,newLayerType:layerType})});scaling_form_defineProperty(this,"_onFilterByMapBoundsChange",event=>{this.props.onChange({propName:"filterByMapBounds",value:event.target.checked})});scaling_form_defineProperty(this,"_onTopHitsSplitFieldChange",topHitsSplitField=>{if(!topHitsSplitField){return}this.props.onChange({propName:"topHitsSplitField",value:topHitsSplitField})});scaling_form_defineProperty(this,"_onTopHitsSizeChange",size=>{this.props.onChange({propName:"topHitsSize",value:size})})}componentDidMount(){this._isMounted=true;this.loadIndexSettings()}componentWillUnmount(){this._isMounted=false}async loadIndexSettings(){try{const indexPattern=await Object(kibana_services["p"])().get(this.props.indexPatternId);const{maxInnerResultWindow:maxInnerResultWindow,maxResultWindow:maxResultWindow}=await loadIndexSettings(indexPattern.title);if(this._isMounted){this.setState({maxInnerResultWindow:maxInnerResultWindow,maxResultWindow:maxResultWindow})}}catch(err){return}}_renderTopHitsForm(){let sizeSlider;if(this.props.topHitsSplitField){sizeSlider=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.topHitsSizeLabel",{defaultMessage:"Documents per entity"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(validated_range_ValidatedRange,{min:1,max:this.state.maxInnerResultWindow,step:1,value:this.props.topHitsSize,onChange:this._onTopHitsSizeChange,showLabels:true,showInput:true,showRange:true,"data-test-subj":"layerPanelTopHitsSize",compressed:true}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.topHitsSplitFieldLabel",{defaultMessage:"Entity"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(SingleFieldSelect,{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.topHitsSplitFieldSelectPlaceholder",{defaultMessage:"Select entity field"}),value:this.props.topHitsSplitField,onChange:this._onTopHitsSplitFieldChange,fields:this.props.termFields,isClearable:false,compressed:true})),sizeSlider)}_renderClusteringRadio(){const clusteringRadio=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiRadio"],{id:constants["SCALING_TYPES"].CLUSTERS,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.clusterScalingLabel",{defaultMessage:"Show clusters when results exceed {maxResultWindow}.",values:{maxResultWindow:this.state.maxResultWindow}}),checked:this.props.scalingType===constants["SCALING_TYPES"].CLUSTERS,onChange:()=>this._onScalingTypeChange(constants["SCALING_TYPES"].CLUSTERS),disabled:!this.props.supportsClustering});return this.props.clusteringDisabledReason?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"left",content:this.props.clusteringDisabledReason},clusteringRadio):clusteringRadio}_renderMVTRadio(){const labelText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.useMVTVectorTiles",{defaultMessage:"Use vector tiles"});const mvtRadio=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiRadio"],{id:constants["SCALING_TYPES"].MVT,label:labelText,checked:this.props.scalingType===constants["SCALING_TYPES"].MVT,onChange:()=>this._onScalingTypeChange(constants["SCALING_TYPES"].MVT)});const enabledInfo=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBetaBadge"],{label:"beta"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"xs"}),external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.mvtDescription",{defaultMessage:"Use vector tiles for faster display of large datasets."}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"left",content:enabledInfo},mvtRadio)}render(){let filterByBoundsSwitch;if(this.props.scalingType===constants["SCALING_TYPES"].TOP_HITS||this.props.scalingType===constants["SCALING_TYPES"].LIMIT){filterByBoundsSwitch=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.extentFilterLabel",{defaultMessage:"Dynamically filter for data in the visible map area"}),checked:this.props.filterByMapBounds,onChange:this._onFilterByMapBoundsChange,compressed:true}))}let topHitsOptionsForm=null;if(this.props.scalingType===constants["SCALING_TYPES"].TOP_HITS){topHitsOptionsForm=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"xs"}),this._renderTopHitsForm())}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.esSearch.scaleTitle",defaultMessage:"Scaling"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiRadio"],{id:constants["SCALING_TYPES"].LIMIT,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.limitScalingLabel",{defaultMessage:"Limit results to {maxResultWindow}.",values:{maxResultWindow:this.state.maxResultWindow}}),checked:this.props.scalingType===constants["SCALING_TYPES"].LIMIT,onChange:()=>this._onScalingTypeChange(constants["SCALING_TYPES"].LIMIT)}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiRadio"],{id:constants["SCALING_TYPES"].TOP_HITS,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.useTopHitsLabel",{defaultMessage:"Show top hits per entity."}),checked:this.props.scalingType===constants["SCALING_TYPES"].TOP_HITS,onChange:()=>this._onScalingTypeChange(constants["SCALING_TYPES"].TOP_HITS)}),this._renderClusteringRadio(),this._renderMVTRadio())),filterByBoundsSwitch,topHitsOptionsForm)}}function es_search_source_update_source_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class es_search_source_update_source_editor_UpdateSourceEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);es_search_source_update_source_editor_defineProperty(this,"state",{sourceFields:null,termFields:null,sortFields:null,supportsClustering:false,mvtDisabledReason:null,clusteringDisabledReason:null});es_search_source_update_source_editor_defineProperty(this,"_onTooltipPropertiesChange",propertyNames=>{this.props.onChange({propName:"tooltipProperties",value:propertyNames})});es_search_source_update_source_editor_defineProperty(this,"_onSortFieldChange",sortField=>{this.props.onChange({propName:"sortField",value:sortField})});es_search_source_update_source_editor_defineProperty(this,"_onSortOrderChange",e=>{this.props.onChange({propName:"sortOrder",value:e.target.value})})}componentDidMount(){this._isMounted=true;this.loadFields()}componentWillUnmount(){this._isMounted=false}async loadFields(){let indexPattern;try{indexPattern=await Object(kibana_services["p"])().get(this.props.indexPatternId)}catch(err){if(this._isMounted){this.setState({loadError:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.loadErrorMessage",{defaultMessage:`Unable to find Index pattern {id}`,values:{id:this.props.indexPatternId}})})}return}let geoField;try{geoField=await this.props.getGeoField()}catch(err){if(this._isMounted){this.setState({loadError:err.message})}return}if(!this._isMounted){return}const rawTooltipFields=getSourceFields(indexPattern.fields);const sourceFields=rawTooltipFields.map(field=>new es_doc_field_ESDocField({fieldName:field.name,source:this.props.source}));this.setState({supportsClustering:supportsGeoTileAgg(geoField),clusteringDisabledReason:getGeoTileAggNotSupportedReason(geoField),mvtDisabledReason:null,sourceFields:sourceFields,termFields:getTermsFields(indexPattern.fields),sortFields:indexPattern.fields.filter(field=>field.sortable&&!data_public_["indexPatterns"].isNestedField(field))})}_renderTooltipsPanel(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.esSearch.tooltipsTitle",defaultMessage:"Tooltip fields"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(tooltip_selector_TooltipSelector,{tooltipFields:this.props.tooltipFields,onChange:this._onTooltipPropertiesChange,fields:this.state.sourceFields}))}_renderSortPanel(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.esSearch.sortTitle",defaultMessage:"Sorting"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.sortFieldLabel",{defaultMessage:"Field"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(SingleFieldSelect,{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.sortFieldSelectPlaceholder",{defaultMessage:"Select sort field"}),value:this.props.sortField,onChange:this._onSortFieldChange,fields:this.state.sortFields,compressed:true})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.sortOrderLabel",{defaultMessage:"Order"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{disabled:!this.props.sortField,options:[{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.ascendingLabel",{defaultMessage:"ascending"}),value:data_public_["SortDirection"].asc},{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.descendingLabel",{defaultMessage:"descending"}),value:data_public_["SortDirection"].desc}],value:this.props.sortOrder,onChange:this._onSortOrderChange,compressed:true})))}_renderScalingPanel(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(scaling_form_ScalingForm,{filterByMapBounds:this.props.filterByMapBounds,indexPatternId:this.props.indexPatternId,onChange:this.props.onChange,scalingType:this.props.scalingType,supportsClustering:this.state.supportsClustering,clusteringDisabledReason:this.state.clusteringDisabledReason,termFields:this.state.termFields,topHitsSplitField:this.props.topHitsSplitField,topHitsSize:this.props.topHitsSize}))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,this._renderTooltipsPanel(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),this._renderSortPanel(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),this._renderScalingPanel(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}}const DEFAULT_FILTER_BY_MAP_BOUNDS=true;function es_search_source_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const sourceTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearchTitle",{defaultMessage:"Documents"});function getDocValueAndSourceFields(indexPattern,fieldNames,dateFormat){const docValueFields=[];const sourceOnlyFields=[];const scriptFields={};fieldNames.forEach(fieldName=>{const field=es_agg_utils_getField(indexPattern,fieldName);if(field.scripted){scriptFields[field.name]={script:{source:field.script||"",lang:field.lang||""}}}else if(field.readFromDocValues){const docValueField=field.type==="date"?{field:fieldName,format:dateFormat}:fieldName;docValueFields.push(docValueField)}else{sourceOnlyFields.push(fieldName)}});return{docValueFields:docValueFields,sourceOnlyFields:sourceOnlyFields,scriptFields:scriptFields}}class es_search_source_ESSearchSource extends es_source_AbstractESSource{static createDescriptor(descriptor){const normalizedDescriptor=es_source_AbstractESSource.createDescriptor(descriptor);if(!isValidStringConfig(normalizedDescriptor.geoField)){throw new Error("Cannot create an ESSearchSourceDescriptor without a geoField")}return{...normalizedDescriptor,type:constants["SOURCE_TYPES"].ES_SEARCH,geoField:normalizedDescriptor.geoField,filterByMapBounds:typeof descriptor.filterByMapBounds==="boolean"?descriptor.filterByMapBounds:DEFAULT_FILTER_BY_MAP_BOUNDS,tooltipProperties:Array.isArray(descriptor.tooltipProperties)?descriptor.tooltipProperties:[],sortField:isValidStringConfig(descriptor.sortField)?descriptor.sortField:"",sortOrder:isValidStringConfig(descriptor.sortOrder)?descriptor.sortOrder:common_["SortDirection"].desc,scalingType:isValidStringConfig(descriptor.scalingType)?descriptor.scalingType:constants["SCALING_TYPES"].LIMIT,topHitsSplitField:isValidStringConfig(descriptor.topHitsSplitField)?descriptor.topHitsSplitField:"",topHitsSize:typeof descriptor.topHitsSize==="number"&&descriptor.topHitsSize>0?descriptor.topHitsSize:1}}constructor(descriptor,inspectorAdapters){const sourceDescriptor=es_search_source_ESSearchSource.createDescriptor(descriptor);super(sourceDescriptor,inspectorAdapters);es_search_source_defineProperty(this,"_descriptor",void 0);es_search_source_defineProperty(this,"_tooltipFields",void 0);this._descriptor=sourceDescriptor;this._tooltipFields=this._descriptor.tooltipProperties?this._descriptor.tooltipProperties.map(property=>this.createField({fieldName:property})):[]}createField({fieldName:fieldName}){return new es_doc_field_ESDocField({fieldName:fieldName,source:this,origin:constants["FIELD_ORIGIN"].SOURCE,canReadFromGeoJson:this._descriptor.scalingType!==constants["SCALING_TYPES"].MVT})}renderSourceSettingsEditor(sourceEditorArgs){const getGeoField=()=>this._getGeoField();return external_kbnSharedDeps_React_default.a.createElement(es_search_source_update_source_editor_UpdateSourceEditor,{source:this,indexPatternId:this.getIndexPatternId(),getGeoField:getGeoField,onChange:sourceEditorArgs.onChange,tooltipFields:this._tooltipFields,sortField:this._descriptor.sortField,sortOrder:this._descriptor.sortOrder,scalingType:this._descriptor.scalingType,filterByMapBounds:this.isFilterByMapBounds(),topHitsSplitField:this._descriptor.topHitsSplitField,topHitsSize:this._descriptor.topHitsSize})}async getFields(){try{const indexPattern=await this.getIndexPattern();const fields=indexPattern.fields.filter(field=>field.aggregatable);return fields.map(field=>this.createField({fieldName:field.name}))}catch(error){return[]}}getFieldNames(){return[this._descriptor.geoField]}async getImmutableProperties(){let indexPatternName=this.getIndexPatternId();let geoFieldType="";try{const indexPattern=await this.getIndexPattern();indexPatternName=indexPattern.title;const geoField=await this._getGeoField();geoFieldType=geoField.type}catch(error){}return[{label:Object(i18n_getters["b"])(),value:sourceTitle},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.indexPatternLabel",{defaultMessage:`Index pattern`}),value:indexPatternName},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.geoFieldLabel",{defaultMessage:"Geospatial field"}),value:this._descriptor.geoField},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.geoFieldTypeLabel",{defaultMessage:"Geospatial field type"}),value:geoFieldType}]}_buildEsSort(){const{sortField:sortField,sortOrder:sortOrder}=this._descriptor;if(!sortField){throw new Error("Cannot build sort")}return[{[sortField]:{order:sortOrder}}]}async _getTopHits(layerName,searchFilters,registerCancelCallback){const{topHitsSplitField:topHitsSplitFieldName,topHitsSize:topHitsSize}=this._descriptor;if(!topHitsSplitFieldName){throw new Error("Cannot _getTopHits without topHitsSplitField")}const indexPattern=await this.getIndexPattern();const{docValueFields:docValueFields,sourceOnlyFields:sourceOnlyFields,scriptFields:scriptFields}=getDocValueAndSourceFields(indexPattern,searchFilters.fieldNames,"epoch_millis");const topHits={size:topHitsSize,script_fields:scriptFields,docvalue_fields:docValueFields};if(this._hasSort()){topHits.sort=this._buildEsSort()}if(sourceOnlyFields.length===0){topHits._source=false}else{topHits._source={includes:sourceOnlyFields}}const topHitsSplitField=es_agg_utils_getField(indexPattern,topHitsSplitFieldName);const cardinalityAgg={precision_threshold:1};const termsAgg={size:constants["DEFAULT_MAX_BUCKETS_LIMIT"],shard_size:constants["DEFAULT_MAX_BUCKETS_LIMIT"]};const searchSource=await this.makeSearchSource(searchFilters,0);searchSource.setField("aggs",{totalEntities:{cardinality:addFieldToDSL(cardinalityAgg,topHitsSplitField)},entitySplit:{terms:addFieldToDSL(termsAgg,topHitsSplitField),aggs:{entityHits:{top_hits:topHits}}}});const resp=await this._runEsQuery({requestId:this.getId(),requestName:layerName,searchSource:searchSource,registerCancelCallback:registerCancelCallback,requestDescription:"Elasticsearch document top hits request",searchSessionId:searchFilters.searchSessionId});const allHits=[];const entityBuckets=external_kbnSharedDeps_Lodash_default.a.get(resp,"aggregations.entitySplit.buckets",[]);const totalEntities=external_kbnSharedDeps_Lodash_default.a.get(resp,"aggregations.totalEntities.value",0);const areEntitiesTrimmed=entityBuckets.length>=constants["DEFAULT_MAX_BUCKETS_LIMIT"];let areTopHitsTrimmed=false;entityBuckets.forEach(entityBucket=>{const total=external_kbnSharedDeps_Lodash_default.a.get(entityBucket,"entityHits.hits.total",0);const hits=external_kbnSharedDeps_Lodash_default.a.get(entityBucket,"entityHits.hits.hits",[]);allHits.push(...hits.reverse());if(total>hits.length){areTopHitsTrimmed=true}});return{hits:allHits,meta:{areResultsTrimmed:areEntitiesTrimmed||areTopHitsTrimmed,areEntitiesTrimmed:areEntitiesTrimmed,entityCount:entityBuckets.length,totalEntities:totalEntities}}}async _getSearchHits(layerName,searchFilters,maxResultWindow,registerCancelCallback){const indexPattern=await this.getIndexPattern();const{docValueFields:docValueFields,sourceOnlyFields:sourceOnlyFields}=getDocValueAndSourceFields(indexPattern,searchFilters.fieldNames,"epoch_millis");const initialSearchContext={docvalue_fields:docValueFields};const searchSource=await this.makeSearchSource(searchFilters,maxResultWindow,initialSearchContext);searchSource.setField("fieldsFromSource",searchFilters.fieldNames);if(sourceOnlyFields.length===0){searchSource.setField("source",false)}else{searchSource.setField("source",sourceOnlyFields)}if(this._hasSort()){searchSource.setField("sort",this._buildEsSort())}const resp=await this._runEsQuery({requestId:this.getId(),requestName:layerName,searchSource:searchSource,registerCancelCallback:registerCancelCallback,requestDescription:"Elasticsearch document request",searchSessionId:searchFilters.searchSessionId});return{hits:resp.hits.hits.reverse(),meta:{resultsCount:resp.hits.hits.length,areResultsTrimmed:resp.hits.total>resp.hits.hits.length}}}_isTopHits(){const{scalingType:scalingType,topHitsSplitField:topHitsSplitField}=this._descriptor;return!!(scalingType===constants["SCALING_TYPES"].TOP_HITS&&topHitsSplitField)}_hasSort(){const{sortField:sortField,sortOrder:sortOrder}=this._descriptor;return!!sortField&&!!sortOrder}async getMaxResultWindow(){const indexPattern=await this.getIndexPattern();const indexSettings=await loadIndexSettings(indexPattern.title);return indexSettings.maxResultWindow}async getGeoJsonWithMeta(layerName,searchFilters,registerCancelCallback,isRequestStillActive){const indexPattern=await this.getIndexPattern();const indexSettings=await loadIndexSettings(indexPattern.title);const{hits:hits,meta:meta}=this._isTopHits()?await this._getTopHits(layerName,searchFilters,registerCancelCallback):await this._getSearchHits(layerName,searchFilters,indexSettings.maxResultWindow,registerCancelCallback);const unusedMetaFields=indexPattern.metaFields.filter(metaField=>!["_id","_index"].includes(metaField));const flattenHit=hit=>{const properties=indexPattern.flattenHit(hit);unusedMetaFields.forEach(metaField=>{delete properties[metaField]});return properties};const epochMillisFields=searchFilters.fieldNames.filter(fieldName=>{const field=es_agg_utils_getField(indexPattern,fieldName);return field.readFromDocValues&&field.type==="date"});let featureCollection;try{const geoField=await this._getGeoField();featureCollection=hitsToGeoJson(hits,flattenHit,geoField.name,geoField.type,epochMillisFields)}catch(error){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.convertToGeoJsonErrorMsg",{defaultMessage:"Unable to convert search response to geoJson feature collection, error: {errorMsg}",values:{errorMsg:error.message}}))}return{data:featureCollection,meta:meta}}canFormatFeatureProperties(){return this._tooltipFields.length>0}async _loadTooltipProperties(docId,index,indexPattern){if(this._tooltipFields.length===0){return{}}const{docValueFields:docValueFields}=getDocValueAndSourceFields(indexPattern,this._getTooltipPropertyNames(),"strict_date_optional_time");const initialSearchContext={docvalue_fields:docValueFields};const searchService=Object(kibana_services["F"])();const searchSource=await searchService.searchSource.create(initialSearchContext);searchSource.setField("index",indexPattern);searchSource.setField("size",1);const query={language:"kuery",query:`_id:"${docId}" and _index:"${index}"`};searchSource.setField("query",query);searchSource.setField("fieldsFromSource",this._getTooltipPropertyNames());const resp=await searchSource.fetch();const hit=external_kbnSharedDeps_Lodash_default.a.get(resp,"hits.hits[0]");if(!hit){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.loadTooltipPropertiesErrorMsg",{defaultMessage:"Unable to find document, _id: {docId}",values:{docId:docId}}))}const properties=indexPattern.flattenHit(hit);indexPattern.metaFields.forEach(metaField=>{if(!this._getTooltipPropertyNames().includes(metaField)){delete properties[metaField]}});return properties}_getTooltipPropertyNames(){return this._tooltipFields.map(field=>field.getName())}async getTooltipProperties(properties){if(properties===null){throw new Error("properties cannot be null")}const indexPattern=await this.getIndexPattern();const propertyValues=await this._loadTooltipProperties(properties._id,properties._index,indexPattern);const tooltipProperties=this._tooltipFields.map(field=>{const value=propertyValues[field.getName()];return field.createTooltipProperty(value)});return Promise.all(tooltipProperties)}isFilterByMapBounds(){if(this._descriptor.scalingType===constants["SCALING_TYPES"].CLUSTERS){return true}else if(this._descriptor.scalingType===constants["SCALING_TYPES"].MVT){return false}else{return!!this._descriptor.filterByMapBounds}}async getLeftJoinFields(){const indexPattern=await this.getIndexPattern();return getSourceFields(indexPattern.fields).map(field=>this.createField({fieldName:field.name}))}async getSupportedShapeTypes(){let geoFieldType;try{const geoField=await this._getGeoField();geoFieldType=geoField.type}catch(error){}if(geoFieldType===constants["ES_GEO_FIELD_TYPE"].GEO_POINT){return[constants["VECTOR_SHAPE_TYPE"].POINT]}return[constants["VECTOR_SHAPE_TYPE"].POINT,constants["VECTOR_SHAPE_TYPE"].LINE,constants["VECTOR_SHAPE_TYPE"].POLYGON]}getSourceTooltipContent(sourceDataRequest){const meta=sourceDataRequest?sourceDataRequest.getMeta():null;if(!meta){return{tooltipContent:null,areResultsTrimmed:false}}if(this._isTopHits()){const entitiesFoundMsg=meta.areEntitiesTrimmed?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.esSearch.topHitsResultsTrimmedMsg",{defaultMessage:`Results limited to first {entityCount} entities of ~{totalEntities}.`,values:{entityCount:meta.entityCount,totalEntities:meta.totalEntities}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.esSearch.topHitsEntitiesCountMsg",{defaultMessage:`Found {entityCount} entities.`,values:{entityCount:meta.entityCount}});const docsPerEntityMsg=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.esSearch.topHitsSizeMsg",{defaultMessage:`Showing top {topHitsSize} documents per entity.`,values:{topHitsSize:this._descriptor.topHitsSize}});return{tooltipContent:`${entitiesFoundMsg} ${docsPerEntityMsg}`,areResultsTrimmed:!!meta.areEntitiesTrimmed}}if(meta.areResultsTrimmed){return{tooltipContent:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.esSearch.resultsTrimmedMsg",{defaultMessage:`Results limited to first {count} documents.`,values:{count:meta.resultsCount}}),areResultsTrimmed:true}}return{tooltipContent:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.esSearch.featureCountMsg",{defaultMessage:`Found {count} documents.`,values:{count:meta.resultsCount}}),areResultsTrimmed:false}}getSyncMeta(){return{sortField:this._descriptor.sortField,sortOrder:this._descriptor.sortOrder,scalingType:this._descriptor.scalingType,topHitsSplitField:this._descriptor.topHitsSplitField,topHitsSize:this._descriptor.topHitsSize}}async getPreIndexedShape(properties){if(properties===null){return null}const geoField=await this._getGeoField();return{index:properties._index,id:properties._id,path:geoField.name}}getJoinsDisabledReason(){let reason;if(this._descriptor.scalingType===constants["SCALING_TYPES"].CLUSTERS){reason=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.joinsDisabledReason",{defaultMessage:"Joins are not supported when scaling by clusters"})}else if(this._descriptor.scalingType===constants["SCALING_TYPES"].MVT){reason=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.joinsDisabledReasonMvt",{defaultMessage:"Joins are not supported when scaling by mvt vector tiles"})}else{reason=null}return reason}getLayerName(){return constants["MVT_SOURCE_LAYER_NAME"]}async getUrlTemplateWithMeta(searchFilters){const indexPattern=await this.getIndexPattern();const indexSettings=await loadIndexSettings(indexPattern.title);const{docValueFields:docValueFields,sourceOnlyFields:sourceOnlyFields}=getDocValueAndSourceFields(indexPattern,searchFilters.fieldNames,"epoch_millis");const initialSearchContext={docvalue_fields:docValueFields};const searchSource=await this.makeSearchSource(searchFilters,indexSettings.maxResultWindow,initialSearchContext);searchSource.setField("fieldsFromSource",searchFilters.fieldNames);if(sourceOnlyFields.length===0){searchSource.setField("source",false)}else{searchSource.setField("source",sourceOnlyFields)}if(this._hasSort()){searchSource.setField("sort",this._buildEsSort())}const dsl=await searchSource.getSearchRequestBody();const risonDsl=rison_default.a.encode(dsl);const mvtUrlServicePath=Object(kibana_services["n"])().basePath.prepend(`/${constants["GIS_API_PATH"]}/${constants["MVT_GETTILE_API_PATH"]}`);const geoField=await this._getGeoField();const urlTemplate=`${mvtUrlServicePath}?x={x}&y={y}&z={z}&geometryFieldName=${this._descriptor.geoField}&index=${indexPattern.title}&requestBody=${risonDsl}&geoFieldType=${geoField.type}`;return{layerName:this.getLayerName(),minSourceZoom:this.getMinZoom(),maxSourceZoom:this.getMaxZoom(),urlTemplate:searchFilters.searchSessionId?urlTemplate+`&searchSessionId=${searchFilters.searchSessionId}`:urlTemplate}}}registerSource({ConstructorFunction:es_search_source_ESSearchSource,type:constants["SOURCE_TYPES"].ES_SEARCH});function createLayerDescriptor({indexPatternId:indexPatternId,geoFieldName:geoFieldName,geoFieldType:geoFieldType,query:query}){const scalingType=geoFieldType===constants["ES_GEO_FIELD_TYPE"].GEO_POINT||geoFieldType===constants["ES_GEO_FIELD_TYPE"].GEO_SHAPE&&Object(licensed_features["c"])()?constants["SCALING_TYPES"].CLUSTERS:constants["SCALING_TYPES"].LIMIT;const sourceDescriptor=es_search_source_ESSearchSource.createDescriptor({indexPatternId:indexPatternId,geoField:geoFieldName,scalingType:scalingType});return vector_layer_VectorLayer.createDescriptor({sourceDescriptor:sourceDescriptor,query:query})}function geo_index_pattern_select_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class geo_index_pattern_select_GeoIndexPatternSelect extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);geo_index_pattern_select_defineProperty(this,"_isMounted",false);geo_index_pattern_select_defineProperty(this,"state",{noGeoIndexPatternsExist:false});geo_index_pattern_select_defineProperty(this,"_onIndexPatternSelect",async indexPatternId=>{if(!indexPatternId||indexPatternId.length===0){return}let indexPattern;try{indexPattern=await Object(kibana_services["p"])().get(indexPatternId)}catch(err){return}if(this._isMounted&&indexPattern.id===indexPatternId){this.props.onChange(indexPattern)}});geo_index_pattern_select_defineProperty(this,"_onNoIndexPatterns",()=>{this.setState({noGeoIndexPatternsExist:true})})}componentWillUnmount(){this._isMounted=false}componentDidMount(){this._isMounted=true}_renderNoIndexPatternWarning(){if(!this.state.noGeoIndexPatternsExist){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.noIndexPattern.messageTitle",{defaultMessage:`Couldn't find any index patterns with geospatial fields`}),color:"warning"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.noIndexPattern.doThisPrefixDescription",defaultMessage:"You'll need to "}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:Object(kibana_services["n"])().basePath.prepend(`/app/management/kibana/indexPatterns`)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.noIndexPattern.doThisLinkTextDescription",defaultMessage:"create an index pattern"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.noIndexPattern.doThisSuffixDescription",defaultMessage:" with geospatial fields."})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.noIndexPattern.hintDescription",defaultMessage:"Don't have any geospatial data sets? "}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:Object(kibana_services["n"])().basePath.prepend("/app/home#/tutorial_directory/sampleData")},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.noIndexPattern.getStartedLinkText",defaultMessage:"Get started with some sample data sets."})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}render(){var _this$props;const IndexPatternSelect=Object(kibana_services["o"])();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,this._renderNoIndexPatternWarning(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.indexPatternSelectLabel",{defaultMessage:"Index pattern"})},external_kbnSharedDeps_React_default.a.createElement(IndexPatternSelect,{isDisabled:this.state.noGeoIndexPatternsExist,indexPatternId:this.props.value?this.props.value:"",onChange:this._onIndexPatternSelect,placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.indexPatternSelectPlaceholder",{defaultMessage:"Select index pattern"}),fieldTypes:(_this$props=this.props)!==null&&_this$props!==void 0&&_this$props.isGeoPointsOnly?[constants["ES_GEO_FIELD_TYPE"].GEO_POINT]:constants["ES_GEO_FIELD_TYPES"],onNoIndexPatterns:this._onNoIndexPatterns,isClearable:false})))}}function create_source_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function doesGeoFieldSupportGeoTileAgg(indexPattern,geoFieldName){return indexPattern?supportsGeoTileAgg(indexPattern.fields.getByName(geoFieldName)):false}const RESET_INDEX_PATTERN_STATE={indexPattern:undefined,geoFields:undefined,geoFieldName:undefined,filterByMapBounds:DEFAULT_FILTER_BY_MAP_BOUNDS,scalingType:constants["SCALING_TYPES"].CLUSTERS,topHitsSplitField:undefined,topHitsSize:1};class create_source_editor_CreateSourceEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);create_source_editor_defineProperty(this,"state",{...RESET_INDEX_PATTERN_STATE});create_source_editor_defineProperty(this,"_onIndexPatternSelect",indexPattern=>{const geoFields=getGeoFields(indexPattern.fields);this.setState({...RESET_INDEX_PATTERN_STATE,indexPattern:indexPattern,geoFields:geoFields},()=>{if(geoFields.length){const firstAggregatableGeoField=geoFields.find(geoField=>geoField.aggregatable);const defaultGeoFieldName=firstAggregatableGeoField?firstAggregatableGeoField:geoFields[0];this._onGeoFieldSelect(defaultGeoFieldName.name)}})});create_source_editor_defineProperty(this,"_onGeoFieldSelect",geoFieldName=>{const scalingType=this.state.scalingType===constants["SCALING_TYPES"].CLUSTERS&&!doesGeoFieldSupportGeoTileAgg(this.state.indexPattern,geoFieldName)?constants["SCALING_TYPES"].LIMIT:this.state.scalingType;this.setState({geoFieldName:geoFieldName,scalingType:scalingType},this._previewLayer)});create_source_editor_defineProperty(this,"_onScalingPropChange",({propName:propName,value:value})=>{this.setState({[propName]:value},this._previewLayer)});create_source_editor_defineProperty(this,"_previewLayer",()=>{const{indexPattern:indexPattern,geoFieldName:geoFieldName,filterByMapBounds:filterByMapBounds,scalingType:scalingType,topHitsSplitField:topHitsSplitField,topHitsSize:topHitsSize}=this.state;const sourceConfig=indexPattern&&geoFieldName?{indexPatternId:indexPattern.id,geoField:geoFieldName,filterByMapBounds:filterByMapBounds,scalingType:scalingType,topHitsSplitField:topHitsSplitField,topHitsSize:topHitsSize}:null;this.props.onSourceConfigChange(sourceConfig)})}_renderGeoSelect(){if(!this.state.indexPattern){return}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.geofieldLabel",{defaultMessage:"Geospatial field"})},external_kbnSharedDeps_React_default.a.createElement(SingleFieldSelect,{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearch.selectLabel",{defaultMessage:"Select geo field"}),value:this.state.geoFieldName,onChange:this._onGeoFieldSelect,fields:this.state.geoFields}))}_renderScalingPanel(){if(!this.state.indexPattern||!this.state.geoFieldName){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(scaling_form_ScalingForm,{filterByMapBounds:this.state.filterByMapBounds,indexPatternId:this.state.indexPattern?this.state.indexPattern.id:"",onChange:this._onScalingPropChange,scalingType:this.state.scalingType,supportsClustering:doesGeoFieldSupportGeoTileAgg(this.state.indexPattern,this.state.geoFieldName),clusteringDisabledReason:this.state.indexPattern?getGeoTileAggNotSupportedReason(this.state.indexPattern.fields.getByName(this.state.geoFieldName)):null,termFields:getTermsFields(this.state.indexPattern.fields),topHitsSplitField:this.state.topHitsSplitField,topHitsSize:this.state.topHitsSize}))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(geo_index_pattern_select_GeoIndexPatternSelect,{value:this.state.indexPattern?this.state.indexPattern.id:"",onChange:this._onIndexPatternSelect}),this._renderGeoSelect(),this._renderScalingPanel())}}const DocumentsLayerIcon=()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__background",d:"M30.501 14.511l1.602-12.954-1.388.236c-.744.254-1.768.38-2.703.45-.463.034-.899.055-1.258.07l-.093.005c-.311.014-.57.025-.72.042a1.895 1.895 0 00-.558.167 7.55 7.55 0 00-.47.238l-.057.031c-.356.19-.686.357-1.025.4l-1.307.338v5.864c0 .697.141 2.168 0 3.443l-.205 1.67h8.182zM20.607 3.249c-.657.038-1.248.281-2.06.398l-.703.103c-.583.087-1.16.172-1.692.238-.751.093-1.39.145-1.82.113-.593-.044-1.125.341-1.611.843-.453.467-.925 1.101-1.429 1.777l-.144.193c-1.132 1.517-2.452 3.218-4.22 4.102-.213.107-.346.312-.431.528a3.07 3.07 0 00-.173.78c-.064.586-.046 1.324.007 2.083.072 1.01.211 2.102.32 2.955.055.42.101.784.128 1.05.08.78-.128 1.77-.37 2.653-.088.319-.178.616-.258.882l-.086.285a9.67 9.67 0 00-.12.434 1.518 1.518 0 00-.053.334c0 .28.11.577.283.842a2.3 2.3 0 00.735.708l.067.04h.078c4.133-.069 10.221-.555 10.973-.639a.581.581 0 00.333-.17c.083-.08.158-.181.225-.293.134-.223.263-.524.387-.867.25-.69.495-1.6.721-2.519.161-.654.544-1.41.682-2.011l.784-2.796c.067-.379.199-1.13.272-1.704.147-1.149-.01-2.54.097-4 .107-1.458.172-2.917.147-4.052a10.13 10.13 0 00-.113-1.438 2.469 2.469 0 00-.131-.495c-.052-.128-.276-.357-.276-.357h-.55zM31.538 15.87s-1.17-.652-1.548-.643c-.758.02-1.298-.026-2.353 0H22.15l-2.864 8.915c.2.067 1.938.445 2.242.447.62.005 1.478-.08 2.393-.197.88-.112 1.824-.257 2.679-.389l.112-.017c.888-.136 1.664-.254 2.166-.304.348-.035.996-.025 1.858-.007l.128.002c.827.017 1.818.037 2.868.023 2.199-.028 4.695-.203 6.5-.887 1.42-.538 2.1-.87 2.513-1.339.414-.469.575-1.576.575-1.576s-2.906.867-4.807.784c-.927-.041-1.507.044-2.352-.341-1.428-.652-1.205-2.22-2.429-3.205-.771-.62-2.194-1.267-2.194-1.267z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__background",d:"M33.058 1.625S31.012 14.8 31.455 15.023c.787.393 2.012.664 3.137 1.67 1.23 1.1 1.172 2.5 2.318 3.239.835.538 6.525-.704 6.525-.704l.228-7.956s-.173-4.5-.89-5.215c-.715-.716-2.488-1.125-3-2.08-1.114-2.081-3.068-2.352-3.068-2.352h-3.647z"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"14.761",cy:"9.754",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"36.63",cy:"10.706",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"24.842",cy:"19.181",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"39.024",cy:"15.363",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"27.569",cy:"6.091",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"28.66",cy:"11",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"35.206",cy:"4.454",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"18.842",cy:"6.091",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"10.115",cy:"13.727",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"16.66",cy:"14.818",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"11.206",cy:"20.272",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"17.751",cy:"20.818",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"30.842",cy:"20.818",r:"1.091",className:"mapLayersWizardIcon__highlight"}));function createDefaultLayerDescriptor(sourceConfig,mapColors){const sourceDescriptor=es_search_source_ESSearchSource.createDescriptor(sourceConfig);if(sourceDescriptor.scalingType===constants["SCALING_TYPES"].CLUSTERS){return blended_vector_layer_BlendedVectorLayer.createDescriptor({sourceDescriptor:sourceDescriptor},mapColors)}else if(sourceDescriptor.scalingType===constants["SCALING_TYPES"].MVT){return tiled_vector_layer_TiledVectorLayer.createDescriptor({sourceDescriptor:sourceDescriptor},mapColors)}else{return vector_layer_VectorLayer.createDescriptor({sourceDescriptor:sourceDescriptor},mapColors)}}const esDocumentsLayerWizardConfig={categories:[constants["LAYER_WIZARD_CATEGORY"].ELASTICSEARCH],description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esSearchDescription",{defaultMessage:"Points, lines, and polygons from Elasticsearch"}),icon:DocumentsLayerIcon,renderWizard:({previewLayers:previewLayers,mapColors:mapColors})=>{const onSourceConfigChange=sourceConfig=>{if(!sourceConfig){previewLayers([]);return}previewLayers([createDefaultLayerDescriptor(sourceConfig,mapColors)])};return external_kbnSharedDeps_React_default.a.createElement(create_source_editor_CreateSourceEditor,{onSourceConfigChange:onSourceConfigChange})},title:sourceTitle};function wizard_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const INDEX_SETUP_STEP_ID="INDEX_SETUP_STEP_ID";const INDEXING_STEP_ID="INDEXING_STEP_ID";var INDEXING_STAGE;(function(INDEXING_STAGE){INDEXING_STAGE["READY"]="READY";INDEXING_STAGE["TRIGGERED"]="TRIGGERED";INDEXING_STAGE["SUCCESS"]="SUCCESS";INDEXING_STAGE["ERROR"]="ERROR"})(INDEXING_STAGE||(INDEXING_STAGE={}));class wizard_ClientFileCreateSourceEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);wizard_defineProperty(this,"_isMounted",false);wizard_defineProperty(this,"state",{indexingStage:null,fileUploadComponent:null});wizard_defineProperty(this,"_onFileUpload",(geojsonFile,name)=>{if(!this._isMounted){return}if(!geojsonFile){this.props.previewLayers([]);return}const sourceDescriptor=geojson_file_source_GeoJsonFileSource.createDescriptor({__featureCollection:geojsonFile,name:name});const layerDescriptor=vector_layer_VectorLayer.createDescriptor({sourceDescriptor:sourceDescriptor},this.props.mapColors);this.props.previewLayers([layerDescriptor])});wizard_defineProperty(this,"_onIndexingComplete",indexResponses=>{if(!this._isMounted){return}this.props.advanceToNextStep();const{indexDataResp:indexDataResp,indexPatternResp:indexPatternResp}=indexResponses;const indexCreationFailed=!(indexDataResp&&indexDataResp.success);const allDocsFailed=indexDataResp.failures.length===indexDataResp.docCount;const indexPatternCreationFailed=!(indexPatternResp&&indexPatternResp.success);if(indexCreationFailed||allDocsFailed||indexPatternCreationFailed){this.setState({indexingStage:INDEXING_STAGE.ERROR});return}const{fields:fields,id:indexPatternId}=indexPatternResp;const geoField=fields.find(field=>[constants["ES_GEO_FIELD_TYPE"].GEO_POINT,constants["ES_GEO_FIELD_TYPE"].GEO_SHAPE].includes(field.type));if(!indexPatternId||!geoField){this.setState({indexingStage:INDEXING_STAGE.ERROR});this.props.previewLayers([])}else{const esSearchSourceConfig={indexPatternId:indexPatternId,geoField:geoField.name,filterByMapBounds:indexDataResp.docCount>constants["DEFAULT_MAX_RESULT_WINDOW"],scalingType:geoField.type===constants["ES_GEO_FIELD_TYPE"].GEO_POINT?constants["SCALING_TYPES"].CLUSTERS:constants["SCALING_TYPES"].LIMIT};this.setState({indexingStage:INDEXING_STAGE.SUCCESS});this.props.previewLayers([createDefaultLayerDescriptor(esSearchSourceConfig,this.props.mapColors)])}});wizard_defineProperty(this,"_onIndexReady",indexReady=>{if(!this._isMounted){return}this.setState({indexingStage:indexReady?INDEXING_STAGE.READY:null});if(indexReady){this.props.enableNextBtn()}else{this.props.disableNextBtn()}});wizard_defineProperty(this,"_onFileRemove",()=>{this.props.previewLayers([])})}componentDidMount(){this._isMounted=true;this._loadFileUploadComponent()}componentWillUnmount(){this._isMounted=false}componentDidUpdate(){if(this.props.currentStepId===INDEXING_STEP_ID&&this.state.indexingStage===INDEXING_STAGE.READY){this.setState({indexingStage:INDEXING_STAGE.TRIGGERED});this.props.startStepLoading()}}async _loadFileUploadComponent(){const fileUploadComponent=await Object(kibana_services["m"])();if(this._isMounted){this.setState({fileUploadComponent:fileUploadComponent})}}render(){if(!this.state.fileUploadComponent){return null}const FileUpload=this.state.fileUploadComponent;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(FileUpload,{appName:"Maps",isIndexingTriggered:this.state.indexingStage===INDEXING_STAGE.TRIGGERED,onFileUpload:this._onFileUpload,onFileRemove:this._onFileRemove,onIndexReady:this._onIndexReady,transformDetails:"geo",onIndexingComplete:this._onIndexingComplete}))}}const uploadLayerWizardConfig={categories:[],description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.fileUploadWizard.description",{defaultMessage:"Index GeoJSON data in Elasticsearch"}),icon:"importAction",prerequisiteSteps:[{id:INDEX_SETUP_STEP_ID,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.fileUploadWizard.importFileSetupLabel",{defaultMessage:"Import file"})},{id:INDEXING_STEP_ID,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.fileUploadWizard.indexingLabel",{defaultMessage:"Importing file"})}],renderWizard:renderWizardArguments=>external_kbnSharedDeps_React_default.a.createElement(wizard_ClientFileCreateSourceEditor,renderWizardArguments),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.fileUploadWizard.title",{defaultMessage:"Upload GeoJSON"})};function es_geo_grid_source_create_source_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function doesNotSupportGeoTileAgg(field){return!supportsGeoTileAgg(field)}class es_geo_grid_source_create_source_editor_CreateSourceEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);es_geo_grid_source_create_source_editor_defineProperty(this,"state",{indexPattern:null,geoField:"",requestType:this.props.requestType});es_geo_grid_source_create_source_editor_defineProperty(this,"onIndexPatternSelect",indexPattern=>{this.setState({indexPattern:indexPattern},()=>{const geoFieldsWithGeoTileAgg=getFieldsWithGeoTileAgg(indexPattern.fields);if(geoFieldsWithGeoTileAgg[0]){this._onGeoFieldSelect(geoFieldsWithGeoTileAgg[0].name)}})});es_geo_grid_source_create_source_editor_defineProperty(this,"_onGeoFieldSelect",geoField=>{this.setState({geoField:geoField},this.previewLayer)});es_geo_grid_source_create_source_editor_defineProperty(this,"_onRequestTypeSelect",newValue=>{this.setState({requestType:newValue},this.previewLayer)});es_geo_grid_source_create_source_editor_defineProperty(this,"previewLayer",()=>{const{indexPattern:indexPattern,geoField:geoField,requestType:requestType}=this.state;const sourceConfig=indexPattern&&geoField?{indexPatternId:indexPattern.id,geoField:geoField,requestType:requestType}:null;this.props.onSourceConfigChange(sourceConfig)})}_renderGeoSelect(){if(!this.state.indexPattern){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoGrid.geofieldLabel",{defaultMessage:"Geospatial field"})},external_kbnSharedDeps_React_default.a.createElement(SingleFieldSelect,{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoGrid.geofieldPlaceholder",{defaultMessage:"Select geo field"}),value:this.state.geoField,onChange:this._onGeoFieldSelect,fields:this.state.indexPattern?getGeoFields(this.state.indexPattern.fields):undefined,isFieldDisabled:doesNotSupportGeoTileAgg,getFieldDisabledReason:getGeoTileAggNotSupportedReason}))}_renderRenderAsSelect(){if(!this.state.indexPattern){return null}return external_kbnSharedDeps_React_default.a.createElement(RenderAsSelect,{renderAs:this.state.requestType,onChange:this._onRequestTypeSelect})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(geo_index_pattern_select_GeoIndexPatternSelect,{value:this.state.indexPattern?this.state.indexPattern.id:"",onChange:this.onIndexPatternSelect}),this._renderGeoSelect(),this._renderRenderAsSelect())}}const ClustersLayerIcon=()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"17.867",cy:"5.032",r:"2.045",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"13.367",cy:"11.717",r:"2.045",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"14.594",cy:"19.901",r:"3.273",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"4.776",cy:"18.398",r:"2.662",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"6.619",cy:"5.649",r:"2.662",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M31.114 7.454h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#98A2B3",d:"M31.114 12.909h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#69707D",d:"M42.023 12.909h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#69707D",d:"M42.023 12.909h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#69707D",d:"M42.023 12.909h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#69707D",d:"M42.023 12.909h5.455v5.455h-5.455zm-5.454-5.455h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#69707D",d:"M36.569 7.454h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#69707D",d:"M36.569 7.454h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#69707D",d:"M36.569 7.454h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#98A2B3",d:"M42.023 7.454h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#98A2B3",d:"M36.569 1.999h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M36.569 12.909h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#D3DAE6",d:"M36.569 18.363h5.455v5.455h-5.455z"}));const clustersLayerWizardConfig={categories:[constants["LAYER_WIZARD_CATEGORY"].ELASTICSEARCH],description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGridClustersDescription",{defaultMessage:"Geospatial data grouped in grids with metrics for each gridded cell"}),icon:ClustersLayerIcon,renderWizard:({previewLayers:previewLayers})=>{const onSourceConfigChange=sourceConfig=>{if(!sourceConfig){previewLayers([]);return}const defaultDynamicProperties=getDefaultDynamicProperties();const layerDescriptor=vector_layer_VectorLayer.createDescriptor({sourceDescriptor:es_geo_grid_source_ESGeoGridSource.createDescriptor(sourceConfig),style:vector_style_VectorStyle.createDescriptor({[constants["VECTOR_STYLES"].FILL_COLOR]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{...defaultDynamicProperties[constants["VECTOR_STYLES"].FILL_COLOR].options,field:{name:constants["COUNT_PROP_NAME"],origin:constants["FIELD_ORIGIN"].SOURCE},color:NUMERICAL_COLOR_PALETTES[0].value,type:constants["COLOR_MAP_TYPE"].ORDINAL}},[constants["VECTOR_STYLES"].LINE_COLOR]:{type:constants["STYLE_TYPE"].STATIC,options:{color:"#FFF"}},[constants["VECTOR_STYLES"].LINE_WIDTH]:{type:constants["STYLE_TYPE"].STATIC,options:{size:0}},[constants["VECTOR_STYLES"].ICON_SIZE]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{...defaultDynamicProperties[constants["VECTOR_STYLES"].ICON_SIZE].options,field:{name:constants["COUNT_PROP_NAME"],origin:constants["FIELD_ORIGIN"].SOURCE}}},[constants["VECTOR_STYLES"].LABEL_TEXT]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{...defaultDynamicProperties[constants["VECTOR_STYLES"].LABEL_TEXT].options,field:{name:constants["COUNT_PROP_NAME"],origin:constants["FIELD_ORIGIN"].SOURCE}}}})});previewLayers([layerDescriptor])};return external_kbnSharedDeps_React_default.a.createElement(es_geo_grid_source_create_source_editor_CreateSourceEditor,{requestType:constants["RENDER_AS"].POINT,onSourceConfigChange:onSourceConfigChange})},title:clustersTitle};const HeatmapLayerIcon=()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__background",fillRule:"evenodd",d:"M29.012 20.309a10.393 10.393 0 01-6.608 2.359c-1.134 0-2.225-.181-3.247-.515a8.322 8.322 0 11-6.005-14.747A10.433 10.433 0 0122.404 1.8c3.973 0 7.428 2.222 9.19 5.49a8.322 8.322 0 11-2.582 13.019z",clipRule:"evenodd",opacity:"0.8"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"35.741",cy:"14.778",r:"3.989",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",fillRule:"evenodd",d:"M20.021 16.957c-1.199-.773-2.221-.518-3.224.826-.896 1.2-2.587 1.272-3.963.482-1.332-.764-1.843-2.084-1.403-3.62.447-1.558 1.517-2.379 3.084-2.365 1.676.015 1.886-.16 2.496-1.863.8-2.235 2.274-3.8 4.704-4.07 2.266-.252 4.174.556 5.41 2.574 1.323 2.158 1.17 4.623-.348 6.462-1.65 1.998-3.962 2.574-6.756 1.574z",clipRule:"evenodd"}));const heatmapLayerWizardConfig={categories:[constants["LAYER_WIZARD_CATEGORY"].ELASTICSEARCH],description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGridHeatmapDescription",{defaultMessage:"Geospatial data grouped in grids to show density"}),icon:HeatmapLayerIcon,renderWizard:({previewLayers:previewLayers})=>{const onSourceConfigChange=sourceConfig=>{if(!sourceConfig){previewLayers([]);return}const layerDescriptor=heatmap_layer_HeatmapLayer.createDescriptor({sourceDescriptor:es_geo_grid_source_ESGeoGridSource.createDescriptor(sourceConfig)});previewLayers([layerDescriptor])};return external_kbnSharedDeps_React_default.a.createElement(es_geo_grid_source_create_source_editor_CreateSourceEditor,{requestType:constants["RENDER_AS"].HEATMAP,onSourceConfigChange:onSourceConfigChange})},title:heatmapTitle};function GeoLineForm(props){function onSortFieldChange(fieldName){if(fieldName!==undefined){props.onSortFieldChange(fieldName)}}function onSplitFieldChange(fieldName){if(fieldName!==undefined){props.onSplitFieldChange(fieldName)}}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoLine.splitFieldLabel",{defaultMessage:"Entity"})},external_kbnSharedDeps_React_default.a.createElement(SingleFieldSelect,{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoLine.splitFieldPlaceholder",{defaultMessage:"Select entity field"}),value:props.splitField,onChange:onSplitFieldChange,fields:getTermsFields(props.indexPattern.fields),isClearable:false})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoLine.sortFieldLabel",{defaultMessage:"Sort"})},external_kbnSharedDeps_React_default.a.createElement(SingleFieldSelect,{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoLine.sortFieldPlaceholder",{defaultMessage:"Select sort field"}),value:props.sortField,onChange:onSortFieldChange,fields:props.indexPattern.fields.filter(field=>{const isSplitField=props.splitField?field.name===props.splitField:false;return!isSplitField&&field.sortable&&!data_public_["indexPatterns"].isNestedField(field)}),isClearable:false})))}function es_geo_line_source_create_source_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class es_geo_line_source_create_source_editor_CreateSourceEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);es_geo_line_source_create_source_editor_defineProperty(this,"state",{indexPattern:null,geoField:"",splitField:"",sortField:""});es_geo_line_source_create_source_editor_defineProperty(this,"_onIndexPatternSelect",indexPattern=>{const pointFields=getGeoPointFields(indexPattern.fields);this.setState({indexPattern:indexPattern,geoField:pointFields.length?pointFields[0].name:"",sortField:indexPattern.timeFieldName?indexPattern.timeFieldName:""},this.previewLayer)});es_geo_line_source_create_source_editor_defineProperty(this,"_onGeoFieldSelect",geoField=>{if(geoField===undefined){return}this.setState({geoField:geoField},this.previewLayer)});es_geo_line_source_create_source_editor_defineProperty(this,"_onSplitFieldSelect",newValue=>{this.setState({splitField:newValue},this.previewLayer)});es_geo_line_source_create_source_editor_defineProperty(this,"_onSortFieldSelect",newValue=>{this.setState({sortField:newValue},this.previewLayer)});es_geo_line_source_create_source_editor_defineProperty(this,"previewLayer",()=>{const{indexPattern:indexPattern,geoField:geoField,splitField:splitField,sortField:sortField}=this.state;const sourceConfig=indexPattern&&indexPattern.id&&geoField&&splitField&&sortField?{indexPatternId:indexPattern.id,geoField:geoField,splitField:splitField,sortField:sortField}:null;this.props.onSourceConfigChange(sourceConfig)})}_renderGeoSelect(){if(!this.state.indexPattern){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoLine.geofieldLabel",{defaultMessage:"Geospatial field"})},external_kbnSharedDeps_React_default.a.createElement(SingleFieldSelect,{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoLine.geofieldPlaceholder",{defaultMessage:"Select geo field"}),value:this.state.geoField,onChange:this._onGeoFieldSelect,fields:getGeoPointFields(this.state.indexPattern.fields)}))}_renderGeoLineForm(){if(!this.state.indexPattern||!this.state.geoField){return null}return external_kbnSharedDeps_React_default.a.createElement(GeoLineForm,{indexPattern:this.state.indexPattern,onSortFieldChange:this._onSortFieldSelect,onSplitFieldChange:this._onSplitFieldSelect,sortField:this.state.sortField,splitField:this.state.splitField})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(geo_index_pattern_select_GeoIndexPatternSelect,{value:this.state.indexPattern&&this.state.indexPattern.id?this.state.indexPattern.id:"",onChange:this._onIndexPatternSelect,isGeoPointsOnly:true}),this._renderGeoSelect(),this._renderGeoLineForm())}}const KEYS_TO_IGNORE=["key","path"];function convert_to_geojson_convertToGeoJson(esResponse,entitySplitFieldName){const features=[];let numTrimmedTracks=0;const buckets=external_kbnSharedDeps_Lodash_default.a.get(esResponse,"aggregations.tracks.buckets",{});const entityKeys=Object.keys(buckets);for(let i=0;i<entityKeys.length;i++){const entityKey=entityKeys[i];const bucket=buckets[entityKey];const feature=bucket.path;if(!feature.properties.complete){numTrimmedTracks++}feature.id=entityKey;feature.properties={[entitySplitFieldName]:entityKey,...feature.properties,...extractPropertiesFromBucket(bucket,KEYS_TO_IGNORE)};features.push(feature)}return{featureCollection:{type:"FeatureCollection",features:features},numTrimmedTracks:numTrimmedTracks}}function es_geo_line_source_update_source_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class es_geo_line_source_update_source_editor_UpdateSourceEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);es_geo_line_source_update_source_editor_defineProperty(this,"_isMounted",false);es_geo_line_source_update_source_editor_defineProperty(this,"state",{indexPattern:null,fields:[]});es_geo_line_source_update_source_editor_defineProperty(this,"_onMetricsChange",metrics=>{this.props.onChange({propName:"metrics",value:metrics})});es_geo_line_source_update_source_editor_defineProperty(this,"_onSplitFieldChange",fieldName=>{this.props.onChange({propName:"splitField",value:fieldName})});es_geo_line_source_update_source_editor_defineProperty(this,"_onSortFieldChange",fieldName=>{this.props.onChange({propName:"sortField",value:fieldName})})}componentDidMount(){this._isMounted=true;this._loadFields()}componentWillUnmount(){this._isMounted=false}async _loadFields(){let indexPattern;try{indexPattern=await Object(kibana_services["p"])().get(this.props.indexPatternId)}catch(err){return}if(!this._isMounted){return}this.setState({indexPattern:indexPattern,fields:indexPattern.fields.filter(field=>!data_public_["indexPatterns"].isNestedField(field))})}render(){if(!this.state.indexPattern){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h6",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.source.esGeoLine.metricsLabel",defaultMessage:"Track metrics"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(metrics_editor_MetricsEditor,{allowMultipleMetrics:true,fields:this.state.fields,metrics:this.props.metrics,onChange:this._onMetricsChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h6",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.source.esGeoLine.trackSettingsLabel",defaultMessage:"Tracks"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(GeoLineForm,{indexPattern:this.state.indexPattern,onSortFieldChange:this._onSortFieldChange,onSplitFieldChange:this._onSplitFieldChange,sortField:this.props.sortField,splitField:this.props.splitField})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}}function es_geo_line_source_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const MAX_TRACKS=250;const geoLineTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoLineTitle",{defaultMessage:"Tracks"});const REQUIRES_GOLD_LICENSE_MSG=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoLineDisabledReason",{defaultMessage:"{title} requires a Gold license.",values:{title:geoLineTitle}});class es_geo_line_source_ESGeoLineSource extends es_agg_source_AbstractESAggSource{static createDescriptor(descriptor){const normalizedDescriptor=es_agg_source_AbstractESAggSource.createDescriptor(descriptor);if(!isValidStringConfig(normalizedDescriptor.geoField)){throw new Error("Cannot create an ESGeoLineSource without a geoField")}if(!isValidStringConfig(normalizedDescriptor.splitField)){throw new Error("Cannot create an ESGeoLineSource without a splitField")}if(!isValidStringConfig(normalizedDescriptor.sortField)){throw new Error("Cannot create an ESGeoLineSource without a sortField")}return{...normalizedDescriptor,type:constants["SOURCE_TYPES"].ES_GEO_LINE,geoField:normalizedDescriptor.geoField,splitField:normalizedDescriptor.splitField,sortField:normalizedDescriptor.sortField}}constructor(descriptor,inspectorAdapters){const sourceDescriptor=es_geo_line_source_ESGeoLineSource.createDescriptor(descriptor);super(sourceDescriptor,inspectorAdapters,true);es_geo_line_source_defineProperty(this,"_descriptor",void 0);this._descriptor=sourceDescriptor}renderSourceSettingsEditor({onChange:onChange}){return external_kbnSharedDeps_React_default.a.createElement(es_geo_line_source_update_source_editor_UpdateSourceEditor,{indexPatternId:this.getIndexPatternId(),onChange:onChange,metrics:this._descriptor.metrics,splitField:this._descriptor.splitField,sortField:this._descriptor.sortField})}getSyncMeta(){return{splitField:this._descriptor.splitField,sortField:this._descriptor.sortField}}async getImmutableProperties(){let indexPatternTitle=this.getIndexPatternId();try{const indexPattern=await this.getIndexPattern();indexPatternTitle=indexPattern.title}catch(error){}return[{label:Object(i18n_getters["b"])(),value:geoLineTitle},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoLine.indexPatternLabel",{defaultMessage:"Index pattern"}),value:indexPatternTitle},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoLine.geospatialFieldLabel",{defaultMessage:"Geospatial field"}),value:this._descriptor.geoField}]}_createSplitField(){return new es_doc_field_ESDocField({fieldName:this._descriptor.splitField,source:this,origin:constants["FIELD_ORIGIN"].SOURCE,canReadFromGeoJson:true})}getFieldNames(){return[...this.getMetricFields().map(esAggMetricField=>esAggMetricField.getName()),this._descriptor.splitField,this._descriptor.sortField]}async getFields(){return[...this.getMetricFields(),this._createSplitField()]}getFieldByName(name){return name===this._descriptor.splitField?this._createSplitField():this.getMetricFieldForName(name)}isGeoGridPrecisionAware(){return false}showJoinEditor(){return false}async getGeoJsonWithMeta(layerName,searchFilters,registerCancelCallback,isRequestStillActive){if(!Object(licensed_features["c"])()){throw new Error(REQUIRES_GOLD_LICENSE_MSG)}const indexPattern=await this.getIndexPattern();const entitySearchSource=await this.makeSearchSource(searchFilters,0);const splitField=es_agg_utils_getField(indexPattern,this._descriptor.splitField);const cardinalityAgg={precision_threshold:1};const termsAgg={size:MAX_TRACKS};entitySearchSource.setField("aggs",{totalEntities:{cardinality:addFieldToDSL(cardinalityAgg,splitField)},entitySplit:{terms:addFieldToDSL(termsAgg,splitField)}});const entityResp=await this._runEsQuery({requestId:`${this.getId()}_entities`,requestName:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoLine.entityRequestName",{defaultMessage:"{layerName} entities",values:{layerName:layerName}}),searchSource:entitySearchSource,registerCancelCallback:registerCancelCallback,requestDescription:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoLine.entityRequestDescription",{defaultMessage:"Elasticsearch terms request to fetch entities within map buffer."}),searchSessionId:searchFilters.searchSessionId});const entityBuckets=external_kbnSharedDeps_Lodash_default.a.get(entityResp,"aggregations.entitySplit.buckets",[]);const totalEntities=external_kbnSharedDeps_Lodash_default.a.get(entityResp,"aggregations.totalEntities.value",0);const areEntitiesTrimmed=entityBuckets.length>=MAX_TRACKS;if(totalEntities===0){return{data:constants["EMPTY_FEATURE_COLLECTION"],meta:{areResultsTrimmed:false,areEntitiesTrimmed:false,entityCount:0,numTrimmedTracks:0,totalEntities:0}}}const entityFilters={};for(let i=0;i<entityBuckets.length;i++){entityFilters[entityBuckets[i].key]=data_public_["esFilters"].buildPhraseFilter(splitField,entityBuckets[i].key,indexPattern).query}const tracksSearchFilters={...searchFilters};delete tracksSearchFilters.buffer;const tracksSearchSource=await this.makeSearchSource(tracksSearchFilters,0);tracksSearchSource.setField("aggs",{tracks:{filters:{filters:entityFilters},aggs:{path:{geo_line:{point:{field:this._descriptor.geoField},sort:{field:this._descriptor.sortField}}},...this.getValueAggsDsl(indexPattern)}}});const tracksResp=await this._runEsQuery({requestId:`${this.getId()}_tracks`,requestName:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoLine.trackRequestName",{defaultMessage:"{layerName} tracks",values:{layerName:layerName}}),searchSource:tracksSearchSource,registerCancelCallback:registerCancelCallback,requestDescription:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoLine.trackRequestDescription",{defaultMessage:"Elasticsearch geo_line request to fetch tracks for entities. Tracks are not filtered by map buffer."}),searchSessionId:searchFilters.searchSessionId});const{featureCollection:featureCollection,numTrimmedTracks:numTrimmedTracks}=convert_to_geojson_convertToGeoJson(tracksResp,this._descriptor.splitField);return{data:featureCollection,meta:{areResultsTrimmed:areEntitiesTrimmed,areEntitiesTrimmed:areEntitiesTrimmed,entityCount:entityBuckets.length,numTrimmedTracks:numTrimmedTracks,totalEntities:totalEntities}}}getSourceTooltipContent(sourceDataRequest){const featureCollection=sourceDataRequest?sourceDataRequest.getData():null;const meta=sourceDataRequest?sourceDataRequest.getMeta():null;if(!featureCollection||!meta){return{tooltipContent:null,areResultsTrimmed:false}}const entitiesFoundMsg=meta.areEntitiesTrimmed?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.esGeoLine.areEntitiesTrimmedMsg",{defaultMessage:`Results limited to first {entityCount} tracks of ~{totalEntities}.`,values:{entityCount:meta.entityCount,totalEntities:meta.totalEntities}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.esGeoLine.tracksCountMsg",{defaultMessage:`Found {entityCount} tracks.`,values:{entityCount:meta.entityCount}});const tracksTrimmedMsg=meta.numTrimmedTracks>0?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.esGeoLine.tracksTrimmedMsg",{defaultMessage:`{numTrimmedTracks} of {entityCount} tracks are incomplete.`,values:{entityCount:meta.entityCount,numTrimmedTracks:meta.numTrimmedTracks}}):undefined;return{tooltipContent:tracksTrimmedMsg?`${entitiesFoundMsg} ${tracksTrimmedMsg}`:entitiesFoundMsg,areResultsTrimmed:meta.areEntitiesTrimmed||meta.numTrimmedTracks>0}}isFilterByMapBounds(){return true}canFormatFeatureProperties(){return true}async getSupportedShapeTypes(){return[constants["VECTOR_SHAPE_TYPE"].LINE]}async getTooltipProperties(properties){const tooltipProperties=await super.getTooltipProperties(properties);tooltipProperties.push(new tooltip_property["b"]("isTrackComplete",external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoLine.isTrackCompleteLabel",{defaultMessage:"track is complete"}),properties.complete.toString()));return tooltipProperties}async getLicensedFeatures(){return[licensed_features["a"].GEO_LINE_AGG]}}registerSource({ConstructorFunction:es_geo_line_source_ESGeoLineSource,type:constants["SOURCE_TYPES"].ES_GEO_LINE});const TracksLayerIcon=()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25"},external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M12.733 12.136h32.283v.545H12.935L4.452 19.98l-.356-.413 8.637-7.43z"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"24.939",cy:"12.409",r:"3.273",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"35.849",cy:"12.409",r:"2.182",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"45.561",cy:"12.409",r:"2.182",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"5.197",cy:"18.954",r:"2.182",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"13.485",cy:"12.409",r:"2.182",className:"mapLayersWizardIcon__highlight"}));const geoLineLayerWizardConfig={categories:[constants["LAYER_WIZARD_CATEGORY"].ELASTICSEARCH],description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.esGeoLineDescription",{defaultMessage:"Create lines from points"}),disabledReason:REQUIRES_GOLD_LICENSE_MSG,icon:TracksLayerIcon,getIsDisabled:()=>!Object(licensed_features["c"])(),renderWizard:({previewLayers:previewLayers})=>{const onSourceConfigChange=sourceConfig=>{if(!sourceConfig){previewLayers([]);return}const layerDescriptor=vector_layer_VectorLayer.createDescriptor({sourceDescriptor:es_geo_line_source_ESGeoLineSource.createDescriptor(sourceConfig),style:vector_style_VectorStyle.createDescriptor({[constants["VECTOR_STYLES"].LINE_WIDTH]:{type:constants["STYLE_TYPE"].STATIC,options:{size:2}}})});layerDescriptor.alpha=1;previewLayers([layerDescriptor])};return external_kbnSharedDeps_React_default.a.createElement(es_geo_line_source_create_source_editor_CreateSourceEditor,{onSourceConfigChange:onSourceConfigChange})},title:geoLineTitle};function es_pew_pew_source_update_source_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class es_pew_pew_source_update_source_editor_UpdateSourceEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);es_pew_pew_source_update_source_editor_defineProperty(this,"state",{fields:null});es_pew_pew_source_update_source_editor_defineProperty(this,"_onMetricsChange",metrics=>{this.props.onChange({propName:"metrics",value:metrics})})}componentDidMount(){this._isMounted=true;this._loadFields()}componentWillUnmount(){this._isMounted=false}async _loadFields(){let indexPattern;try{indexPattern=await Object(kibana_services["p"])().get(this.props.indexPatternId)}catch(err){if(this._isMounted){this.setState({loadError:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.pewPew.noIndexPatternErrorMessage",{defaultMessage:`Unable to find Index pattern {id}`,values:{id:this.props.indexPatternId}})})}return}if(!this._isMounted){return}this.setState({fields:indexPattern.fields.filter(field=>!data_public_["indexPatterns"].isNestedField(field))})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h6",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.source.pewPew.metricsLabel",defaultMessage:"Metrics"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(metrics_editor_MetricsEditor,{allowMultipleMetrics:true,fields:this.state.fields,metrics:this.props.metrics,onChange:this._onMetricsChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}}const LAT_INDEX=0;const LON_INDEX=1;const PEW_PEW_BUCKET_KEYS_TO_IGNORE=["key","sourceCentroid"];function parsePointFromKey(key){const split=key.split(",");const lat=parseFloat(split[LAT_INDEX]);const lon=parseFloat(split[LON_INDEX]);return[lon,lat]}function convertToLines(esResponse){const lineFeatures=[];const destBuckets=external_kbnSharedDeps_Lodash_default.a.get(esResponse,"aggregations.destSplit.buckets",[]);for(let i=0;i<destBuckets.length;i++){const destBucket=destBuckets[i];const dest=parsePointFromKey(destBucket.key);const sourceBuckets=external_kbnSharedDeps_Lodash_default.a.get(destBucket,"sourceGrid.buckets",[]);for(let j=0;j<sourceBuckets.length;j++){const sourceBucket=sourceBuckets[j];const sourceCentroid=sourceBucket.sourceCentroid;lineFeatures.push({type:"Feature",geometry:{type:"LineString",coordinates:[[sourceCentroid.location.lon,sourceCentroid.location.lat],dest]},id:`${dest.join()},${sourceBucket.key}`,properties:extractPropertiesFromBucket(sourceBucket,PEW_PEW_BUCKET_KEYS_TO_IGNORE)})}}return{featureCollection:{type:"FeatureCollection",features:lineFeatures}}}function es_pew_pew_source_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const es_pew_pew_source_MAX_GEOTILE_LEVEL=29;const es_pew_pew_source_sourceTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.pewPewTitle",{defaultMessage:"Point to point"});class es_pew_pew_source_ESPewPewSource extends es_agg_source_AbstractESAggSource{static createDescriptor(descriptor){const normalizedDescriptor=es_agg_source_AbstractESAggSource.createDescriptor(descriptor);return{...normalizedDescriptor,type:es_pew_pew_source_ESPewPewSource.type,indexPatternId:descriptor.indexPatternId,sourceGeoField:descriptor.sourceGeoField,destGeoField:descriptor.destGeoField}}renderSourceSettingsEditor({onChange:onChange}){return external_kbnSharedDeps_React_default.a.createElement(es_pew_pew_source_update_source_editor_UpdateSourceEditor,{indexPatternId:this.getIndexPatternId(),onChange:onChange,metrics:this._descriptor.metrics,applyGlobalQuery:this._descriptor.applyGlobalQuery})}isFilterByMapBounds(){return true}showJoinEditor(){return false}isGeoGridPrecisionAware(){return true}async getSupportedShapeTypes(){return[constants["VECTOR_SHAPE_TYPE"].LINE]}async getImmutableProperties(){let indexPatternTitle=this.getIndexPatternId();try{const indexPattern=await this.getIndexPattern();indexPatternTitle=indexPattern.title}catch(error){}return[{label:Object(i18n_getters["b"])(),value:es_pew_pew_source_sourceTitle},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.pewPew.indexPatternLabel",{defaultMessage:"Index pattern"}),value:indexPatternTitle},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.pewPew.sourceGeoFieldLabel",{defaultMessage:"Source"}),value:this._descriptor.sourceGeoField},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.pewPew.destGeoFieldLabel",{defaultMessage:"Destination"}),value:this._descriptor.destGeoField}]}getGeoGridPrecision(zoom){const targetGeotileLevel=Math.ceil(zoom)+2;return Math.min(targetGeotileLevel,es_pew_pew_source_MAX_GEOTILE_LEVEL)}async getGeoJsonWithMeta(layerName,searchFilters,registerCancelCallback){const indexPattern=await this.getIndexPattern();const searchSource=await this.makeSearchSource(searchFilters,0);searchSource.setField("aggs",{destSplit:{terms:{script:{source:`doc['${this._descriptor.destGeoField}'].value.toString()`,lang:"painless"},order:{_count:"desc"},size:100},aggs:{sourceGrid:{geotile_grid:{field:this._descriptor.sourceGeoField,precision:searchFilters.geogridPrecision,size:500},aggs:{sourceCentroid:{geo_centroid:{field:this._descriptor.sourceGeoField}},...this.getValueAggsDsl(indexPattern)}}}}});const esResponse=await this._runEsQuery({requestId:this.getId(),requestName:layerName,searchSource:searchSource,registerCancelCallback:registerCancelCallback,requestDescription:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.pewPew.inspectorDescription",{defaultMessage:"Source-destination connections request"}),searchSessionId:searchFilters.searchSessionId});const{featureCollection:featureCollection}=convertToLines(esResponse);return{data:featureCollection,meta:{areResultsTrimmed:false}}}getGeoFieldName(){return this._descriptor.destGeoField}async getBoundsForFilters(boundsFilters,registerCancelCallback){const searchSource=await this.makeSearchSource(boundsFilters,0);searchSource.setField("aggs",{destFitToBounds:{geo_bounds:{field:this._descriptor.destGeoField}},sourceFitToBounds:{geo_bounds:{field:this._descriptor.sourceGeoField}}});const corners=[];try{const abortController=new AbortController;registerCancelCallback(()=>abortController.abort());const esResp=await searchSource.fetch({abortSignal:abortController.signal});if(esResp.aggregations.destFitToBounds.bounds){corners.push([esResp.aggregations.destFitToBounds.bounds.top_left.lon,esResp.aggregations.destFitToBounds.bounds.top_left.lat]);corners.push([esResp.aggregations.destFitToBounds.bounds.bottom_right.lon,esResp.aggregations.destFitToBounds.bounds.bottom_right.lat])}if(esResp.aggregations.sourceFitToBounds.bounds){corners.push([esResp.aggregations.sourceFitToBounds.bounds.top_left.lon,esResp.aggregations.sourceFitToBounds.bounds.top_left.lat]);corners.push([esResp.aggregations.sourceFitToBounds.bounds.bottom_right.lon,esResp.aggregations.sourceFitToBounds.bounds.bottom_right.lat])}}catch(error){if(error.name==="AbortError"){throw new DataRequestAbortError}return null}if(corners.length===0){return null}return turfBboxToBounds(bbox_default()(Object(helpers["multiPoint"])(corners)))}canFormatFeatureProperties(){return true}}es_pew_pew_source_defineProperty(es_pew_pew_source_ESPewPewSource,"type",constants["SOURCE_TYPES"].ES_PEW_PEW);registerSource({ConstructorFunction:es_pew_pew_source_ESPewPewSource,type:constants["SOURCE_TYPES"].ES_PEW_PEW});function es_pew_pew_source_create_source_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class es_pew_pew_source_create_source_editor_CreateSourceEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);es_pew_pew_source_create_source_editor_defineProperty(this,"state",{isLoadingIndexPattern:false,indexPattern:undefined,indexPatternId:undefined,sourceGeoField:undefined,destGeoField:undefined,indexPatternHasMultipleGeoFields:false});es_pew_pew_source_create_source_editor_defineProperty(this,"onIndexPatternSelect",indexPatternId=>{this.setState({indexPatternId:indexPatternId},this.loadIndexPattern.bind(null,indexPatternId))});es_pew_pew_source_create_source_editor_defineProperty(this,"loadIndexPattern",indexPatternId=>{this.setState({isLoadingIndexPattern:true,indexPattern:undefined,sourceGeoField:undefined,destGeoField:undefined,indexPatternHasMultipleGeoFields:false},this.debouncedLoad.bind(null,indexPatternId))});es_pew_pew_source_create_source_editor_defineProperty(this,"debouncedLoad",external_kbnSharedDeps_Lodash_default.a.debounce(async indexPatternId=>{if(!indexPatternId||indexPatternId.length===0){return}let indexPattern;try{indexPattern=await Object(kibana_services["p"])().get(indexPatternId)}catch(err){return}if(!this._isMounted){return}if(this.state.indexPatternId!==indexPatternId){return}const geoFields=getFieldsWithGeoTileAgg(indexPattern.fields);this.setState({isLoadingIndexPattern:false,indexPattern:indexPattern,indexPatternHasMultipleGeoFields:geoFields.length>=2})},300));es_pew_pew_source_create_source_editor_defineProperty(this,"_onSourceGeoSelect",sourceGeoField=>{this.setState({sourceGeoField:sourceGeoField},this.previewLayer)});es_pew_pew_source_create_source_editor_defineProperty(this,"_onDestGeoSelect",destGeoField=>{this.setState({destGeoField:destGeoField},this.previewLayer)});es_pew_pew_source_create_source_editor_defineProperty(this,"previewLayer",()=>{const{indexPatternId:indexPatternId,sourceGeoField:sourceGeoField,destGeoField:destGeoField}=this.state;const sourceConfig=indexPatternId&&sourceGeoField&&destGeoField?{indexPatternId:indexPatternId,sourceGeoField:sourceGeoField,destGeoField:destGeoField}:null;this.props.onSourceConfigChange(sourceConfig)})}componentWillUnmount(){this._isMounted=false}componentDidMount(){this._isMounted=true}_renderGeoSelects(){if(!this.state.indexPattern||!this.state.indexPatternHasMultipleGeoFields){return null}const fields=this.state.indexPattern?getFieldsWithGeoTileAgg(this.state.indexPattern.fields):undefined;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.pewPew.sourceGeoFieldLabel",{defaultMessage:"Source"})},external_kbnSharedDeps_React_default.a.createElement(SingleFieldSelect,{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.pewPew.sourceGeoFieldPlaceholder",{defaultMessage:"Select source geo field"}),value:this.state.sourceGeoField,onChange:this._onSourceGeoSelect,fields:fields})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.pewPew.destGeoFieldLabel",{defaultMessage:"Destination"})},external_kbnSharedDeps_React_default.a.createElement(SingleFieldSelect,{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.pewPew.destGeoFieldPlaceholder",{defaultMessage:"Select destination geo field"}),value:this.state.destGeoField,onChange:this._onDestGeoSelect,fields:fields})))}_renderIndexPatternSelect(){const IndexPatternSelect=Object(kibana_services["o"])();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.pewPew.indexPatternLabel",{defaultMessage:"Index pattern"})},external_kbnSharedDeps_React_default.a.createElement(IndexPatternSelect,{indexPatternId:this.state.indexPatternId,onChange:this.onIndexPatternSelect,placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.pewPew.indexPatternPlaceholder",{defaultMessage:"Select index pattern"}),fieldTypes:[constants["ES_GEO_FIELD_TYPE"].GEO_POINT]}))}render(){let callout;if(this.state.indexPattern&&!this.state.indexPatternHasMultipleGeoFields){callout=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"warning"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.source.pewPew.noSourceAndDestDetails",defaultMessage:"Selected index pattern does not contain source and destination fields."})))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,callout,this._renderIndexPatternSelect(),this._renderGeoSelects())}}const Point2PointLayerIcon=()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"38.311",cy:"12.889",r:"1.636",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"10.85",cy:"15.12",r:"1.636",className:"mapLayersWizardIcon__highlight",transform:"rotate(-27.34 10.85 15.12)"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M10.746 14.918l12.499-3.892.162.521-12.499 3.892z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M10.746 14.918l12.499-3.892.162.521-12.499 3.892z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M10.746 14.918l12.499-3.892.162.521-12.499 3.892z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M10.746 14.918l12.499-3.892.162.521-12.499 3.892z"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"6.805",cy:"4.603",r:"1.636",className:"mapLayersWizardIcon__highlight",transform:"rotate(-23.178 6.805 4.603)"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M6.27 4.194l17.235 5.888-.176.516L6.094 4.71z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M6.27 4.194l17.235 5.888-.176.516L6.094 4.71z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M6.27 4.194l17.235 5.888-.176.516L6.094 4.71z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M6.27 4.194l17.235 5.888-.176.516L6.094 4.71z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M22.8 9.673l16.113 2.854-.095.538-16.113-2.855z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M22.8 9.673l16.113 2.854-.095.538-16.113-2.855z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M22.8 9.673l16.113 2.854-.095.538-16.113-2.855z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M22.8 9.673l16.113 2.854-.095.538-16.113-2.855z"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"19.542",cy:"22.262",r:"1.636",className:"mapLayersWizardIcon__highlight",transform:"rotate(8.84 19.542 22.262)"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M19.28 22.43l4.937-12.124.505.206-4.937 12.124z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M19.28 22.43l4.937-12.124.505.206-4.937 12.124z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M19.28 22.43l4.937-12.124.505.206-4.937 12.124z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M19.28 22.43l4.937-12.124.505.206-4.937 12.124z"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"42.691",cy:"3.795",r:"1.636",className:"mapLayersWizardIcon__highlight",transform:"rotate(-6.89 42.691 3.795)"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M42.715 3.993l-18.251 7.243-.202-.507 18.252-7.243z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M42.715 3.993l-18.251 7.243-.202-.507 18.252-7.243z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M42.715 3.993l-18.251 7.243-.202-.507 18.252-7.243z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M42.715 3.993l-18.251 7.243-.202-.507 18.252-7.243z"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"24.578",cy:"11.109",r:"2.727",className:"mapLayersWizardIcon__highlight"}));const point2PointLayerWizardConfig={categories:[constants["LAYER_WIZARD_CATEGORY"].ELASTICSEARCH],description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.pewPewDescription",{defaultMessage:"Aggregated data paths between the source and destination"}),icon:Point2PointLayerIcon,renderWizard:({previewLayers:previewLayers})=>{const onSourceConfigChange=sourceConfig=>{if(!sourceConfig){previewLayers([]);return}const defaultDynamicProperties=getDefaultDynamicProperties();const layerDescriptor=vector_layer_VectorLayer.createDescriptor({sourceDescriptor:es_pew_pew_source_ESPewPewSource.createDescriptor(sourceConfig),style:vector_style_VectorStyle.createDescriptor({[constants["VECTOR_STYLES"].LINE_COLOR]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{...defaultDynamicProperties[constants["VECTOR_STYLES"].LINE_COLOR].options,field:{name:constants["COUNT_PROP_NAME"],origin:constants["FIELD_ORIGIN"].SOURCE},color:NUMERICAL_COLOR_PALETTES[0].value}},[constants["VECTOR_STYLES"].LINE_WIDTH]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{...defaultDynamicProperties[constants["VECTOR_STYLES"].LINE_WIDTH].options,field:{name:constants["COUNT_PROP_NAME"],origin:constants["FIELD_ORIGIN"].SOURCE}}}})});previewLayers([layerDescriptor])};return external_kbnSharedDeps_React_default.a.createElement(es_pew_pew_source_create_source_editor_CreateSourceEditor,{onSourceConfigChange:onSourceConfigChange})},title:es_pew_pew_source_sourceTitle};function getEmsUnavailableMessage(){const emsSettings=Object(kibana_services["i"])();if(!emsSettings.isIncludeElasticMapsService()){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.ems.disabledDescription",{defaultMessage:'Access to Elastic Maps Service has been disabled. Ask your system administrator to set "map.includeElasticMapsService" in kibana.yml.'})}if(emsSettings.isEMSUrlSet()){if(!emsSettings.hasOnPremLicense()){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.ems.noOnPremLicenseDescription",{defaultMessage:"An enterprise license is required to connect to local Elastic Maps Server installations."})}else{return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.ems.noOnPremConnectionDescription",{defaultMessage:"Cannot connect to {host}.",values:{host:emsSettings.getEMSRoot()}})}}return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.ems.noAccessDescription",{defaultMessage:"Kibana is unable to access Elastic Maps Service. Contact your system administrator."})}function ems_file_select_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class ems_file_select_EMSFileSelect extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);ems_file_select_defineProperty(this,"_isMounted",false);ems_file_select_defineProperty(this,"state",{hasLoadedOptions:false,emsFileOptions:[]});ems_file_select_defineProperty(this,"_loadFileOptions",async()=>{const fileLayers=await getEmsFileLayers();const options=fileLayers.map(fileLayer=>({value:fileLayer.getId(),label:fileLayer.getDisplayName()}));if(this._isMounted){this.setState({hasLoadedOptions:true,emsFileOptions:options})}});ems_file_select_defineProperty(this,"_onChange",selectedOptions=>{if(selectedOptions.length===0){return}this.props.onChange(selectedOptions[0].value)})}componentWillUnmount(){this._isMounted=false}componentDidMount(){this._isMounted=true;this._loadFileOptions()}_renderSelect(){if(!this.state.hasLoadedOptions){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{isLoading:true})}const selectedOption=this.state.emsFileOptions.find(option=>option.value===this.props.value);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.emsFileSelect.selectPlaceholder",{defaultMessage:"Select EMS layer"}),options:this.state.emsFileOptions,selectedOptions:selectedOption?[selectedOption]:[],onChange:this._onChange,isClearable:false,singleSelection:true,isDisabled:this.state.emsFileOptions.length===0,"data-test-subj":"emsVectorComboBox"})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.emsFileSelect.selectLabel",{defaultMessage:"Layer"}),helpText:this.state.emsFileOptions.length===0?getEmsUnavailableMessage():null},this._renderSelect())}}function ems_file_source_create_source_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class create_source_editor_EMSFileCreateSourceEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);ems_file_source_create_source_editor_defineProperty(this,"state",{emsFileId:null});ems_file_source_create_source_editor_defineProperty(this,"_onChange",emsFileId=>{this.setState({emsFileId:emsFileId});this.props.onSourceConfigChange({id:emsFileId})})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(ems_file_select_EMSFileSelect,{value:this.state.emsFileId,onChange:this._onChange}))}}function ems_file_source_update_source_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class ems_file_source_update_source_editor_UpdateSourceEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);ems_file_source_update_source_editor_defineProperty(this,"_isMounted",false);ems_file_source_update_source_editor_defineProperty(this,"state",{fields:null});ems_file_source_update_source_editor_defineProperty(this,"_onTooltipPropertiesSelect",selectedFieldNames=>{this.props.onChange({propName:"tooltipProperties",value:selectedFieldNames})})}componentDidMount(){this._isMounted=true;this.loadFields()}componentWillUnmount(){this._isMounted=false}async loadFields(){let fields=[];try{const emsFiles=await getEmsFileLayers();const targetEmsFile=emsFiles.find(emsFile=>emsFile.getId()===this.props.layerId);if(targetEmsFile){fields=targetEmsFile.getFieldsInLanguage().map(field=>this.props.source.createField({fieldName:field.name}))}}catch(e){}if(this._isMounted){this.setState({fields:fields})}}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.emsSource.tooltipsTitle",defaultMessage:"Tooltip fields"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(tooltip_selector_TooltipSelector,{tooltipFields:this.props.tooltipFields,onChange:this._onTooltipPropertiesSelect,fields:this.state.fields})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}}function ems_file_field_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class ems_file_field_EMSFileField extends field_AbstractField{constructor({fieldName:fieldName,source:source,origin:origin}){super({fieldName:fieldName,origin:origin});ems_file_field_defineProperty(this,"_source",void 0);this._source=source}getSource(){return this._source}async getLabel(){return this._source.getEmsFieldLabel(this.getName())}}function ems_file_source_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getErrorInfo(fileId){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.emsFile.unableToFindFileIdErrorMessage",{defaultMessage:`Unable to find EMS vector shapes for id: {id}. {info}`,values:{id:fileId,info:getEmsUnavailableMessage()}})}function getSourceTitle(){const emsSettings=Object(kibana_services["i"])();if(emsSettings.isEMSUrlSet()){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.emsOnPremFileTitle",{defaultMessage:"Elastic Maps Server Boundaries"})}else{return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.emsFileTitle",{defaultMessage:"EMS Boundaries"})}}class ems_file_source_EMSFileSource extends vector_source_AbstractVectorSource{static createDescriptor({id:id,tooltipProperties:tooltipProperties=[]}){return{type:constants["SOURCE_TYPES"].EMS_FILE,id:id,tooltipProperties:tooltipProperties}}constructor(descriptor,inspectorAdapters){super(ems_file_source_EMSFileSource.createDescriptor(descriptor),inspectorAdapters);ems_file_source_defineProperty(this,"_tooltipFields",void 0);ems_file_source_defineProperty(this,"_descriptor",void 0);this._descriptor=ems_file_source_EMSFileSource.createDescriptor(descriptor);this._tooltipFields=this._descriptor.tooltipProperties.map(propertyKey=>this.createField({fieldName:propertyKey}))}createField({fieldName:fieldName}){return new ems_file_field_EMSFileField({fieldName:fieldName,source:this,origin:constants["FIELD_ORIGIN"].SOURCE})}renderSourceSettingsEditor({onChange:onChange}){return external_kbnSharedDeps_React_default.a.createElement(ems_file_source_update_source_editor_UpdateSourceEditor,{onChange:onChange,tooltipFields:this._tooltipFields,layerId:this._descriptor.id,source:this})}async getEMSFileLayer(){let emsFileLayers;try{emsFileLayers=await getEmsFileLayers()}catch(e){throw new Error(`${getErrorInfo(this._descriptor.id)} - ${e.message}`)}const emsFileLayer=emsFileLayers.find(fileLayer=>fileLayer.hasId(this._descriptor.id));if(emsFileLayer){return emsFileLayer}throw new Error(getErrorInfo(this._descriptor.id))}async getEmsFieldLabel(emsFieldName){const emsFileLayer=await this.getEMSFileLayer();const emsFields=emsFileLayer.getFieldsInLanguage();const emsField=emsFields.find(field=>field.name===emsFieldName);return emsField?emsField.description:emsFieldName}async getGeoJsonWithMeta(){const emsFileLayer=await this.getEMSFileLayer();const featureCollection=await vector_source_AbstractVectorSource.getGeoJson({format:emsFileLayer.getDefaultFormatType(),featureCollectionPath:"data",fetchUrl:emsFileLayer.getDefaultFormatUrl()});const emsIdField=emsFileLayer.getFields().find(field=>field.type==="id");featureCollection.features.forEach((feature,index)=>{feature.id=emsIdField?feature.properties[emsIdField.id]:index});return{data:featureCollection,meta:{}}}async getImmutableProperties(){let emsLink;try{const emsFileLayer=await this.getEMSFileLayer();emsLink=emsFileLayer.getEMSHotLink()}catch(error){}const props=[{label:Object(i18n_getters["b"])(),value:getSourceTitle()},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.emsFile.layerLabel",{defaultMessage:`Layer`}),value:this._descriptor.id,link:emsLink}];const emsSettings=Object(kibana_services["i"])();if(emsSettings.isEMSUrlSet()){props.push({label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.emsFile.emsOnPremLabel",{defaultMessage:`Elastic Maps Server`}),value:emsSettings.getEMSRoot()})}return props}async getDisplayName(){try{const emsFileLayer=await this.getEMSFileLayer();return emsFileLayer.getDisplayName()}catch(error){return this._descriptor.id}}async getAttributions(){const emsFileLayer=await this.getEMSFileLayer();return emsFileLayer.getAttributions()}async getLeftJoinFields(){const emsFileLayer=await this.getEMSFileLayer();const fields=emsFileLayer.getFieldsInLanguage();return fields.map(f=>this.createField({fieldName:f.name}))}canFormatFeatureProperties(){return this._tooltipFields.length>0}async getTooltipProperties(properties){const promises=this._tooltipFields.map(field=>{const value=properties[field.getName()];return field.createTooltipProperty(value)});return Promise.all(promises)}async getSupportedShapeTypes(){return[constants["VECTOR_SHAPE_TYPE"].POLYGON]}async getLicensedFeatures(){const emsSettings=Object(kibana_services["i"])();return emsSettings.isEMSUrlSet()?[licensed_features["a"].ON_PREM_EMS]:[]}}registerSource({ConstructorFunction:ems_file_source_EMSFileSource,type:constants["SOURCE_TYPES"].EMS_FILE});const EMSBoundariesLayerIcon=()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__backgroundDarker",d:"M30.766 14.01l1.602-12.954-1.389.237c-.744.253-1.768.38-2.702.45a43.28 43.28 0 01-1.259.07l-.092.004c-.312.014-.57.026-.72.042a1.895 1.895 0 00-.558.168c-.156.07-.316.156-.47.238l-.057.03c-.356.191-.687.358-1.025.4l-1.308.339v5.863c0 .698.142 2.17 0 3.443l-.204 1.67h8.182zM20.871 2.748c-.656.039-1.247.282-2.06.4l-.702.102c-.583.086-1.16.172-1.693.238-.75.093-1.389.145-1.82.113-.592-.044-1.124.341-1.61.843-.453.467-.926 1.1-1.429 1.777l-.144.193c-1.132 1.517-2.452 3.218-4.22 4.101-.214.108-.346.313-.432.528-.087.22-.14.489-.172.78-.064.587-.047 1.325.007 2.083.071 1.01.211 2.102.32 2.956.054.42.1.783.128 1.05.08.78-.128 1.769-.37 2.653-.088.319-.178.616-.258.882-.03.1-.06.195-.086.285a9.67 9.67 0 00-.12.434 1.518 1.518 0 00-.054.334c0 .279.11.577.283.842.175.268.426.52.735.708l.067.04.079-.001c4.133-.068 10.22-.554 10.972-.638a.582.582 0 00.334-.17c.083-.08.157-.182.224-.293.134-.223.264-.524.388-.867.249-.69.495-1.6.72-2.52.162-.654.545-1.41.683-2.01l.784-2.796c.066-.379.198-1.13.272-1.705.146-1.148-.01-2.54.097-3.999.107-1.458.171-2.917.146-4.052a10.13 10.13 0 00-.112-1.438 2.469 2.469 0 00-.131-.495c-.053-.128-.276-.358-.276-.358h-.55zm10.931 12.621s-1.169-.652-1.548-.642c-.757.019-1.298-.026-2.352 0h-5.489l-2.863 8.915c.2.066 1.938.444 2.242.447.62.005 1.478-.08 2.393-.197.88-.113 1.824-.258 2.678-.389l.113-.017a49.753 49.753 0 012.166-.305c.347-.034.996-.024 1.858-.007l.127.003c.827.017 1.819.037 2.869.023 2.198-.029 4.694-.204 6.5-.887 1.42-.538 2.099-.87 2.513-1.34.414-.468.575-1.576.575-1.576s-2.907.868-4.807.784c-.927-.04-1.508.045-2.352-.34-1.429-.652-1.206-2.221-2.43-3.205-.77-.62-2.193-1.267-2.193-1.267z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__backgroundDarker",d:"M33.322 1.125S31.277 14.3 31.72 14.522c.786.393 2.012.665 3.137 1.67 1.23 1.1 1.172 2.5 2.318 3.24.835.538 6.525-.704 6.525-.704l.228-7.956s-.174-4.5-.89-5.216c-.715-.716-2.488-1.125-3-2.08-1.115-2.08-3.068-2.351-3.068-2.351h-3.648z"}));function getDescription(){const emsSettings=Object(kibana_services["i"])();return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.emsFileSourceDescription",{defaultMessage:"Administrative boundaries from {host}",values:{host:emsSettings.isEMSUrlSet()?emsSettings.getEMSRoot():"Elastic Maps Service"}})}const emsBoundariesLayerWizardConfig={categories:[constants["LAYER_WIZARD_CATEGORY"].REFERENCE],checkVisibility:async()=>{const emsSettings=Object(kibana_services["i"])();return emsSettings.isIncludeElasticMapsService()},description:getDescription(),disabledReason:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.emsFileDisabledReason",{defaultMessage:"Elastic Maps Server requires an Enterprise license"}),getIsDisabled:()=>{const emsSettings=Object(kibana_services["i"])();return emsSettings.isEMSUrlSet()&&!emsSettings.hasOnPremLicense()},icon:EMSBoundariesLayerIcon,renderWizard:({previewLayers:previewLayers,mapColors:mapColors})=>{const onSourceConfigChange=sourceConfig=>{const sourceDescriptor=ems_file_source_EMSFileSource.createDescriptor(sourceConfig);const layerDescriptor=vector_layer_VectorLayer.createDescriptor({sourceDescriptor:sourceDescriptor},mapColors);previewLayers([layerDescriptor])};return external_kbnSharedDeps_React_default.a.createElement(create_source_editor_EMSFileCreateSourceEditor,{onSourceConfigChange:onSourceConfigChange})},title:getSourceTitle()};class tms_source_AbstractTMSSource extends source_AbstractSource{async getUrlTemplate(){throw new Error("Should implement TMSSource#getUrlTemplate")}convertMarkdownLinkToObjectArr(markdown){return markdown.split("|").map(attribution=>{attribution=attribution.trim();const extractLink=/\[(.*)\]\((.*)\)/;const result=extractLink.exec(attribution);return{label:result?result[1]:null,url:result?result[2]:null}})}}function tile_service_select_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const AUTO_SELECT="auto_select";class tile_service_select_TileServiceSelect extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);tile_service_select_defineProperty(this,"_isMounted",false);tile_service_select_defineProperty(this,"state",{emsTmsOptions:[],hasLoaded:false});tile_service_select_defineProperty(this,"_loadTmsOptions",async()=>{const emsTMSServices=await getEmsTmsServices();if(!this._isMounted){return}const emsTmsOptions=emsTMSServices.map(tmsService=>({value:tmsService.getId(),text:tmsService.getDisplayName()?tmsService.getDisplayName():tmsService.getId()}));emsTmsOptions.unshift({value:AUTO_SELECT,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.emsTile.autoLabel",{defaultMessage:"Autoselect based on Kibana theme"})});this.setState({emsTmsOptions:emsTmsOptions,hasLoaded:true})});tile_service_select_defineProperty(this,"_onChange",e=>{const value=e.target.value;const isAutoSelect=value===AUTO_SELECT;this.props.onTileSelect({id:isAutoSelect?null:value,isAutoSelect:isAutoSelect})})}componentWillUnmount(){this._isMounted=false}componentDidMount(){this._isMounted=true;this._loadTmsOptions()}render(){const helpText=this.state.emsTmsOptions.length===0?getEmsUnavailableMessage():null;let selectedId;if(this.props.config){selectedId=this.props.config.isAutoSelect?AUTO_SELECT:this.props.config.id}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.emsTile.label",{defaultMessage:"Tile service"}),helpText:helpText,display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{hasNoInitialSelection:!selectedId,value:selectedId,options:this.state.emsTmsOptions,onChange:this._onChange,isLoading:!this.state.hasLoaded,disabled:this.state.hasLoaded&&this.state.emsTmsOptions.length===0,compressed:true}))}}function ems_tms_source_update_source_editor_UpdateSourceEditor({onChange:onChange,config:config}){const _onTileSelect=({id:id,isAutoSelect:isAutoSelect})=>{onChange({propName:"id",value:id});onChange({propName:"isAutoSelect",value:isAutoSelect})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.source.emsTile.settingsTitle",defaultMessage:"Basemap"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(tile_service_select_TileServiceSelect,{onTileSelect:_onTileSelect,config:config})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}function ems_tms_source_getErrorInfo(emsTileLayerId){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.emsTile.unableToFindTileIdErrorMessage",{defaultMessage:`Unable to find EMS tile configuration for id: {id}. {info}`,values:{id:emsTileLayerId,info:getEmsUnavailableMessage()}})}function ems_tms_source_getSourceTitle(){const emsSettings=Object(kibana_services["i"])();if(emsSettings.isEMSUrlSet()){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.emsOnPremTileTitle",{defaultMessage:"Elastic Maps Server Basemaps"})}else{return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.emsTileTitle",{defaultMessage:"EMS Basemaps"})}}class ems_tms_source_EMSTMSSource extends tms_source_AbstractTMSSource{static createDescriptor(descriptor){return{type:constants["SOURCE_TYPES"].EMS_TMS,id:descriptor.id,isAutoSelect:typeof descriptor.isAutoSelect!=="undefined"?!!descriptor.isAutoSelect:false}}constructor(descriptor,inspectorAdapters){descriptor=ems_tms_source_EMSTMSSource.createDescriptor(descriptor);super(descriptor,inspectorAdapters)}renderSourceSettingsEditor({onChange:onChange}){return external_kbnSharedDeps_React_default.a.createElement(ems_tms_source_update_source_editor_UpdateSourceEditor,{onChange:onChange,config:this._descriptor})}async getImmutableProperties(){const displayName=await this.getDisplayName();const autoSelectMsg=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.emsTile.isAutoSelectLabel",{defaultMessage:"autoselect based on Kibana theme"});const props=[{label:Object(i18n_getters["b"])(),value:ems_tms_source_getSourceTitle()},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.emsTile.serviceId",{defaultMessage:`Tile service`}),value:this._descriptor.isAutoSelect?`${displayName} - ${autoSelectMsg}`:displayName}];const emsSettings=Object(kibana_services["i"])();if(emsSettings.isEMSUrlSet()){props.push({label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.emsTile.emsOnPremLabel",{defaultMessage:`Elastic Maps Server`}),value:emsSettings.getEMSRoot()})}return props}async _getEMSTMSService(){let emsTMSServices;const emsTileLayerId=this.getTileLayerId();try{emsTMSServices=await getEmsTmsServices()}catch(e){throw new Error(`${ems_tms_source_getErrorInfo(emsTileLayerId)} - ${e.message}`)}const tmsService=emsTMSServices.find(tmsService=>tmsService.getId()===emsTileLayerId);if(tmsService){return tmsService}throw new Error(ems_tms_source_getErrorInfo(emsTileLayerId))}async getDisplayName(){try{const emsTMSService=await this._getEMSTMSService();return emsTMSService.getDisplayName()}catch(error){return this.getTileLayerId()}}async getAttributions(){const emsTMSService=await this._getEMSTMSService();const markdown=emsTMSService.getMarkdownAttribution();if(!markdown){return[]}return this.convertMarkdownLinkToObjectArr(markdown)}async getUrlTemplate(){const emsTMSService=await this._getEMSTMSService();return await emsTMSService.getUrlTemplate()}getSpriteNamespacePrefix(){return"ems/"+this.getTileLayerId()}async getVectorStyleSheetAndSpriteMeta(isRetina){const emsTMSService=await this._getEMSTMSService();const styleSheet=await emsTMSService.getVectorStyleSheet();const spriteMeta=await emsTMSService.getSpriteSheetMeta(isRetina);return{vectorStyleSheet:styleSheet,spriteMeta:spriteMeta}}getTileLayerId(){if(!this._descriptor.isAutoSelect){return this._descriptor.id}const emsTileLayerId=Object(kibana_services["k"])();return Object(kibana_services["s"])()?emsTileLayerId.dark:emsTileLayerId.bright}async getLicensedFeatures(){const emsSettings=Object(kibana_services["i"])();return emsSettings.isEMSUrlSet()?[licensed_features["a"].ON_PREM_EMS]:[]}}registerSource({ConstructorFunction:ems_tms_source_EMSTMSSource,type:constants["SOURCE_TYPES"].EMS_TMS});function ems_tms_source_create_source_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class ems_tms_source_create_source_editor_CreateSourceEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);ems_tms_source_create_source_editor_defineProperty(this,"state",{});ems_tms_source_create_source_editor_defineProperty(this,"_onTileSelect",config=>{this.setState({config:config});this.props.onTileSelect(config)})}componentDidMount(){this._onTileSelect({id:null,isAutoSelect:true})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(tile_service_select_TileServiceSelect,{onTileSelect:this._onTileSelect,config:this.state.config}))}}const WorldMapLayerIcon=()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M13.175 15.71s-1.357 1.258.523 2.987c1.88 1.73-.379 3.912 1.096 5.712.782-.248-.418-.63 2.454-3.616 2.872-2.987 1.045-3.72-.574-4.454-1.619-.733-2.245-2.096-3.499-.629zm-2.506-2.987s.209-.68 1.305-.157c1.097.524 1.306-2.253 3.29-2.986 1.985-.734 2.037-1.625.783-2.306-1.253-.681-.888-1.205-2.088.472-1.202 1.676-2.007-1.516-.157-2.096.835-.262 1.044-1.468 0-1.834-1.045-.367-3.238.104-4.334-1.153C8.37 1.405 6.596.148 5.028 2.82c-1.566 2.672-.626 2.62 0 2.882.628.262 1.358-.42 2.09.943.73 1.363-.21 3.93.73 4.873.94.943-.068 2.841 3.604 3.302.418.052.835.157 1.044.366.21.21.992-.995-.679-1.362-1.67-.367-1.357-.786-1.148-1.1zm5.84-9.941c.495.332 1.462.157.992 1.258-.47 1.1-.627 2.882.313 3.51.94.63.836-1.938 2.559-1.938 1.723 0 2.872-6.13-.784-5.083-3.655 1.048-3.55 1.939-3.08 2.253zM44.716 1.3c.575-1.152-1.514-.89-2.715-.157-1.201.734-2.611.629-3.394.157-.784-.471-.418.734-1.619.891-1.201.157-2.559.262-2.298-.733.261-.996-1.096-.525-1.096-.525-1.15.367-1.985 1.677-1.724 2.83.261 1.153-1.514 1.834-3.133 1.153s-3.551.105-4.125 2.148c-.575 2.044-.992 2.463-1.723 3.197-.732.733.94 1.677 2.036-.053 1.097-1.729 1.828-.366 2.506.367.285.308.68 1.048.68 1.048s.115.258.317.618a2.081 2.081 0 00-.644-.103h-.258a2.028 2.028 0 00-1.518-.681h-2.297a2.04 2.04 0 00-2.037 2.043 2.04 2.04 0 002.037 2.044h1.712l.055.066c-.102.34-.272 1.214.457 1.701.919.615-.51.974.357 2.51.868 1.537 1.736 1.178 2.246.359.51-.82.306-1.025.97-1.537.664-.512.766-1.383.102-2.1-.29-.313-.287-.684-.193-1.003.163-.205.289-.442.366-.7l.031-.039-.02.003a2.106 2.106 0 00.07-.74c.27.209.56.355.857.389 1.32.147.948-1.129 1.836-1.121.51.233.796.626.984 1.435.366 1.572.575.262 1.62-.786 1.044-1.048 1.357-.173 2.819 1.153s.888-.524.731-1.467c-.157-.944 1.88-.01 1.306-2.146-.575-2.135 1.149-.422 1.514-2.098.366-1.677-1.201-1.94-.731-3.25.47-1.31 1.785-2.061 2.037-.209.275 2.031 2.287 1.773 1.817-.218-.47-1.991-.13-1.981.654-2.505.783-.525-1.166-.788-.592-1.94zM39.39 20.007c-1.134.27-.731 2.205.627 2.046 1.357-.16 2.245-.055 2.82 1.203.574 1.258 2.558-1.467 1.514-2.83-1.044-1.362-.835-1.467-1.358-2.358-.522-.89-2.507 1.677-3.603 1.94zm2.432-4.866h-.108a.792.792 0 010-1.583h.108a.792.792 0 110 1.583zm-4.302 3.486a.798.798 0 01-.56-.233.8.8 0 01-.231-.56.8.8 0 01.231-.56.8.8 0 01.56-.23.8.8 0 01.56.23.797.797 0 01.233.56.796.796 0 01-.792.793zm-7.133 3.593a.793.793 0 01-.56-1.35.793.793 0 011.12 0 .795.795 0 01.232.559.797.797 0 01-.792.792zm9.693-4.574a.797.797 0 01-.56-.231.794.794 0 01.56-1.352.793.793 0 010 1.583zm2.288-4.574a.792.792 0 01-.345-1.505c.597-.288.968-.88.968-1.544a.792.792 0 111.584 0 3.316 3.316 0 01-1.863 2.97.79.79 0 01-.344.08z"}));function ems_base_map_layer_wizard_getDescription(){const emsSettings=Object(kibana_services["i"])();return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.emsTileSourceDescription",{defaultMessage:"Basemap service from {host}",values:{host:emsSettings.isEMSUrlSet()?emsSettings.getEMSRoot():"Elastic Maps Service"}})}const emsBaseMapLayerWizardConfig={categories:[constants["LAYER_WIZARD_CATEGORY"].REFERENCE],checkVisibility:async()=>{const emsSettings=Object(kibana_services["i"])();return emsSettings.isIncludeElasticMapsService()},description:ems_base_map_layer_wizard_getDescription(),disabledReason:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.emsTileDisabledReason",{defaultMessage:"Elastic Maps Server requires an Enterprise license"}),getIsDisabled:()=>{const emsSettings=Object(kibana_services["i"])();return emsSettings.isEMSUrlSet()&&!emsSettings.hasOnPremLicense()},icon:WorldMapLayerIcon,renderWizard:({previewLayers:previewLayers})=>{const onSourceConfigChange=sourceConfig=>{const layerDescriptor=vector_tile_layer_VectorTileLayer.createDescriptor({sourceDescriptor:ems_tms_source_EMSTMSSource.createDescriptor(sourceConfig)});previewLayers([layerDescriptor])};return external_kbnSharedDeps_React_default.a.createElement(ems_tms_source_create_source_editor_CreateSourceEditor,{onTileSelect:onSourceConfigChange})},title:ems_tms_source_getSourceTitle()};function kibana_region_field_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class kibana_region_field_KibanaRegionField extends field_AbstractField{constructor({fieldName:fieldName,source:source,origin:origin}){super({fieldName:fieldName,origin:origin});kibana_region_field_defineProperty(this,"_source",void 0);this._source=source}getSource(){return this._source}async getLabel(){const meta=await this._source.getVectorFileMeta();const field=meta.fields.find(f=>f.name===this.getName());return field?field.description:this.getName()}}function kibana_regionmap_source_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const kibana_regionmap_source_sourceTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.kbnRegionMapTitle",{defaultMessage:"Configured GeoJSON"});class kibana_regionmap_source_KibanaRegionmapSource extends vector_source_AbstractVectorSource{static createDescriptor({name:name}){return{type:constants["SOURCE_TYPES"].REGIONMAP_FILE,name:name}}constructor(descriptor,inspectorAdapters){super(descriptor,inspectorAdapters);kibana_regionmap_source_defineProperty(this,"_descriptor",void 0);this._descriptor=descriptor}createField({fieldName:fieldName}){return new kibana_region_field_KibanaRegionField({fieldName:fieldName,source:this,origin:constants["FIELD_ORIGIN"].SOURCE})}async getImmutableProperties(){return[{label:Object(i18n_getters["b"])(),value:kibana_regionmap_source_sourceTitle},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.kbnRegionMap.vectorLayerLabel",{defaultMessage:"Vector layer"}),value:this._descriptor.name}]}async getVectorFileMeta(){const regionList=getKibanaRegionList();const layerConfig=regionList.find(regionConfig=>regionConfig.name===this._descriptor.name);if(!layerConfig){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.kbnRegionMap.noConfigErrorMessage",{defaultMessage:`Unable to find map.regionmap configuration for {name}`,values:{name:this._descriptor.name}}))}return layerConfig}async getGeoJsonWithMeta(){const vectorFileMeta=await this.getVectorFileMeta();const featureCollection=await vector_source_AbstractVectorSource.getGeoJson({format:vectorFileMeta.format.type,featureCollectionPath:vectorFileMeta.meta.feature_collection_path,fetchUrl:vectorFileMeta.url});return{data:featureCollection,meta:{}}}async getLeftJoinFields(){const vectorFileMeta=await this.getVectorFileMeta();return vectorFileMeta.fields.map(field=>this.createField({fieldName:field.name}))}async getDisplayName(){return this._descriptor.name}canFormatFeatureProperties(){return true}}registerSource({ConstructorFunction:kibana_regionmap_source_KibanaRegionmapSource,type:constants["SOURCE_TYPES"].REGIONMAP_FILE});function kibana_regionmap_source_create_source_editor_CreateSourceEditor({onSourceConfigChange:onSourceConfigChange}){const onChange=({target:target})=>{const selectedName=target.options[target.selectedIndex].text;onSourceConfigChange({name:selectedName})};const regionmapOptions=getKibanaRegionList().map(({name:name,url:url})=>({value:url,text:name}));const helpText=regionmapOptions.length===0?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.kbnRegionMap.noLayerAvailableHelptext",{defaultMessage:`No vector layers are available. Ask your system administrator to set "map.regionmap" in kibana.yml.`}):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.kbnRegionMap.vectorLayerLabel",{defaultMessage:"Vector layer"}),helpText:helpText},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{hasNoInitialSelection:true,options:regionmapOptions,onChange:onChange,disabled:regionmapOptions.length===0})))}const kibanaRegionMapLayerWizardConfig={categories:[constants["LAYER_WIZARD_CATEGORY"].REFERENCE],checkVisibility:async()=>{const regions=getKibanaRegionList();return regions.length>0},description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.kbnRegionMapDescription",{defaultMessage:"Vector data from hosted GeoJSON configured in kibana.yml"}),icon:"logoKibana",renderWizard:({previewLayers:previewLayers,mapColors:mapColors})=>{const onSourceConfigChange=sourceConfig=>{const sourceDescriptor=kibana_regionmap_source_KibanaRegionmapSource.createDescriptor(sourceConfig);const layerDescriptor=vector_layer_VectorLayer.createDescriptor({sourceDescriptor:sourceDescriptor},mapColors);previewLayers([layerDescriptor])};return external_kbnSharedDeps_React_default.a.createElement(kibana_regionmap_source_create_source_editor_CreateSourceEditor,{onSourceConfigChange:onSourceConfigChange})},title:kibana_regionmap_source_sourceTitle};function kibana_tilemap_source_create_source_editor_CreateSourceEditor({onSourceConfigChange:onSourceConfigChange}){const tilemap=getKibanaTileMap();Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(tilemap.url){onSourceConfigChange()}},[]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.kbnTMS.kbnTMS.urlLabel",{defaultMessage:"Tilemap url"}),helpText:tilemap.url?null:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.kbnTMS.noLayerAvailableHelptext",{defaultMessage:'No tilemap layer is available. Ask your system administrator to set "map.tilemap.url" in kibana.yml.'})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{readOnly:true,value:tilemap.url?tilemap.url:""})))}function kibana_tilemap_source_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const kibana_tilemap_source_sourceTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.kbnTMSTitle",{defaultMessage:"Configured Tile Map Service"});class kibana_tilemap_source_KibanaTilemapSource extends tms_source_AbstractTMSSource{static createDescriptor(){return{type:kibana_tilemap_source_KibanaTilemapSource.type}}async getImmutableProperties(){return[{label:Object(i18n_getters["b"])(),value:kibana_tilemap_source_sourceTitle},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.kbnTMS.urlLabel",{defaultMessage:"Tilemap url"}),value:await this.getUrlTemplate()}]}async getUrlTemplate(){const tilemap=getKibanaTileMap();if(!tilemap.url){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.kbnTMS.noConfigErrorMessage",{defaultMessage:`Unable to find map.tilemap.url configuration in the kibana.yml`}))}return tilemap.url}async getAttributions(){const tilemap=getKibanaTileMap();const markdown=external_kbnSharedDeps_Lodash_default.a.get(tilemap,"options.attribution","");const objArr=this.convertMarkdownLinkToObjectArr(markdown);return objArr}async getDisplayName(){try{return await this.getUrlTemplate()}catch(e){return""}}}kibana_tilemap_source_defineProperty(kibana_tilemap_source_KibanaTilemapSource,"type",constants["SOURCE_TYPES"].KIBANA_TILEMAP);registerSource({ConstructorFunction:kibana_tilemap_source_KibanaTilemapSource,type:constants["SOURCE_TYPES"].KIBANA_TILEMAP});const kibanaBasemapLayerWizardConfig={categories:[constants["LAYER_WIZARD_CATEGORY"].REFERENCE],checkVisibility:async()=>{const tilemap=getKibanaTileMap();return!!tilemap.url},description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.kbnTMSDescription",{defaultMessage:"Tile map service configured in kibana.yml"}),icon:"logoKibana",renderWizard:({previewLayers:previewLayers})=>{const onSourceConfigChange=()=>{const layerDescriptor=tile_layer_TileLayer.createDescriptor({sourceDescriptor:kibana_tilemap_source_KibanaTilemapSource.createDescriptor()});previewLayers([layerDescriptor])};return external_kbnSharedDeps_React_default.a.createElement(kibana_tilemap_source_create_source_editor_CreateSourceEditor,{onSourceConfigChange:onSourceConfigChange})},title:kibana_tilemap_source_sourceTitle};function xyz_tms_source_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const xyz_tms_source_sourceTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.ems_xyzTitle",{defaultMessage:"Tile Map Service"});class xyz_tms_source_XYZTMSSource extends tms_source_AbstractTMSSource{static createDescriptor({urlTemplate:urlTemplate,attributionText:attributionText,attributionUrl:attributionUrl}){return{type:xyz_tms_source_XYZTMSSource.type,urlTemplate:urlTemplate,attributionText:attributionText,attributionUrl:attributionUrl}}constructor(sourceDescriptor){super(sourceDescriptor);xyz_tms_source_defineProperty(this,"_descriptor",void 0);this._descriptor=sourceDescriptor}async getImmutableProperties(){return[{label:Object(i18n_getters["b"])(),value:xyz_tms_source_sourceTitle},{label:Object(i18n_getters["e"])(),value:this._descriptor.urlTemplate}]}async getDisplayName(){return this._descriptor.urlTemplate}async getAttributions(){const{attributionText:attributionText,attributionUrl:attributionUrl}=this._descriptor;const attributionComplete=!!attributionText&&!!attributionUrl;return attributionComplete?[{url:attributionUrl,label:attributionText}]:[]}async getUrlTemplate(){return this._descriptor.urlTemplate}}xyz_tms_source_defineProperty(xyz_tms_source_XYZTMSSource,"type",constants["SOURCE_TYPES"].EMS_XYZ);registerSource({ConstructorFunction:xyz_tms_source_XYZTMSSource,type:constants["SOURCE_TYPES"].EMS_XYZ});function xyz_tms_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class xyz_tms_editor_XYZTMSEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);xyz_tms_editor_defineProperty(this,"state",{url:"",attributionText:"",attributionUrl:""});xyz_tms_editor_defineProperty(this,"_previewLayer",external_kbnSharedDeps_Lodash_default.a.debounce(()=>{const{url:url,attributionText:attributionText,attributionUrl:attributionUrl}=this.state;const isUrlValid=url.indexOf("{x}")>=0&&url.indexOf("{y}")>=0&&url.indexOf("{z}")>=0;const sourceConfig=isUrlValid?{urlTemplate:url,attributionText:attributionText,attributionUrl:attributionUrl}:null;this.props.onSourceConfigChange(sourceConfig)},500));xyz_tms_editor_defineProperty(this,"_onUrlChange",event=>{this.setState({url:event.target.value},this._previewLayer)});xyz_tms_editor_defineProperty(this,"_onAttributionTextChange",event=>{this.setState({attributionText:event.target.value},this._previewLayer)});xyz_tms_editor_defineProperty(this,"_onAttributionUrlChange",event=>{this.setState({attributionUrl:event.target.value},this._previewLayer)})}render(){const{attributionText:attributionText,attributionUrl:attributionUrl}=this.state;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:"Url"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:"https://a.tile.openstreetmap.org/{z}/{x}/{y}.png",onChange:this._onUrlChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.xyztmssource.attributionTextLabel",{defaultMessage:"Attribution text"}),isInvalid:attributionUrl!==""&&attributionText==="",error:[external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.xyztmssource.attributionText",{defaultMessage:"Attribution url must have accompanying text"})]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{value:attributionText,onChange:this._onAttributionTextChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.xyztmssource.attributionLinkLabel",{defaultMessage:"Attribution link"}),isInvalid:attributionText!==""&&attributionUrl==="",error:[external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.xyztmssource.attributionLink",{defaultMessage:"Attribution text must have an accompanying link"})]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{value:attributionUrl,onChange:this._onAttributionUrlChange})))}}const tmsLayerWizardConfig={categories:[constants["LAYER_WIZARD_CATEGORY"].REFERENCE],description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.ems_xyzDescription",{defaultMessage:"Tile map service configured in interface"}),icon:WorldMapLayerIcon,renderWizard:({previewLayers:previewLayers})=>{const onSourceConfigChange=sourceConfig=>{if(!sourceConfig){previewLayers([]);return}const layerDescriptor=tile_layer_TileLayer.createDescriptor({sourceDescriptor:xyz_tms_source_XYZTMSSource.createDescriptor(sourceConfig)});previewLayers([layerDescriptor])};return external_kbnSharedDeps_React_default.a.createElement(xyz_tms_editor_XYZTMSEditor,{onSourceConfigChange:onSourceConfigChange})},title:xyz_tms_source_sourceTitle};class wms_client_WmsClient{constructor({serviceUrl:serviceUrl}){this._serviceUrl=serviceUrl}async _fetch(url){return browser_default()(url)}_createUrl(defaultQueryParams){const serviceUrl=Object(url_url["parse"])(this._serviceUrl,true);const queryParams={...serviceUrl.query,...defaultQueryParams};return Object(url_url["format"])({protocol:serviceUrl.protocol,hostname:serviceUrl.hostname,port:serviceUrl.port,pathname:serviceUrl.pathname,query:queryParams})}getUrlTemplate(layers,styles){const urlTemplate=this._createUrl({format:"image/png",service:"WMS",version:"1.1.1",request:"GetMap",srs:"EPSG:3857",transparent:"true",width:"256",height:"256",layers:layers,styles:styles});return`${urlTemplate}&bbox={bbox-epsg-3857}`}async _fetchCapabilities(){const getCapabilitiesUrl=Object(url_url["parse"])(this._serviceUrl,true);const queryParams={...getCapabilitiesUrl.query,...{version:"1.1.1",request:"GetCapabilities",service:"WMS"}};const resp=await this._fetch(Object(url_url["format"])({protocol:getCapabilitiesUrl.protocol,hostname:getCapabilitiesUrl.hostname,port:getCapabilitiesUrl.port,pathname:getCapabilitiesUrl.pathname,query:queryParams}));if(resp.status>=400){throw new Error(`Unable to access ${this.state.serviceUrl}`)}const body=await resp.text();return await parseXmlString(body)}async getCapabilities(){const rawCapabilities=await this._fetchCapabilities();const{layers:layers,styles:styles}=reduceLayers([],external_kbnSharedDeps_Lodash_default.a.get(rawCapabilities,"WMT_MS_Capabilities.Capability[0].Layer",[]));return{layers:groupCapabilities(layers),styles:groupCapabilities(styles)}}}function reduceLayers(path,layers){const emptyCapabilities={layers:[],styles:[]};function createOption(optionPath,optionTitle,optionName){return{path:[...optionPath,optionTitle],value:optionName}}return layers.reduce((accumulatedCapabilities,layer)=>{if(layer.Layer){const hierarchicalCapabilities=reduceLayers([...path,layer.Title[0]],layer.Layer);return{layers:[...accumulatedCapabilities.layers,...hierarchicalCapabilities.layers],styles:[...accumulatedCapabilities.styles,...hierarchicalCapabilities.styles]}}const updatedStyles=[...accumulatedCapabilities.styles];if(external_kbnSharedDeps_Lodash_default.a.has(layer,"Style[0]")){updatedStyles.push(createOption(path,external_kbnSharedDeps_Lodash_default.a.get(layer,"Style[0].Title[0]"),external_kbnSharedDeps_Lodash_default.a.get(layer,"Style[0].Name[0]")))}return{layers:[...accumulatedCapabilities.layers,createOption(path,layer.Title[0],layer.Name[0])],styles:updatedStyles}},emptyCapabilities)}function groupCapabilities(list){if(list.length===0){return[]}let maxPathDepth=0;list.forEach(({path:path})=>{if(path.length>maxPathDepth){maxPathDepth=path.length}});let rootCommonPath=list[0].path;for(let listIndex=1;listIndex<list.length;listIndex++){if(rootCommonPath.length===0){break}const path=list[listIndex].path;for(let pathIndex=0;pathIndex<path.length&&pathIndex<rootCommonPath.length;pathIndex++){if(rootCommonPath[pathIndex]!==path[pathIndex]){rootCommonPath=rootCommonPath.slice(0,pathIndex);break}}}const labelMap=new Map;const options=list.map(({path:path,value:value})=>{const title=path[path.length-1];const hierachyWithTitle=rootCommonPath.length===path.length?title:path.splice(rootCommonPath.length).join(" - ");const label=title===value?hierachyWithTitle:`${hierachyWithTitle} (${value})`;let uniqueLabel;if(labelMap.has(label)){const counter=labelMap.get(label);const nextCounter=counter+1;labelMap.set(label,nextCounter);uniqueLabel=`${label}:${nextCounter}`}else{labelMap.set(label,0);uniqueLabel=label}return{label:uniqueLabel,value:value}});if(rootCommonPath.length===0||rootCommonPath.length===maxPathDepth){return options}return[{label:rootCommonPath.join(" - "),options:options}]}function wms_create_source_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const LAYERS_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.wms.layersLabel",{defaultMessage:"Layers"});const STYLES_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.wms.stylesLabel",{defaultMessage:"Styles"});class wms_create_source_editor_WMSCreateSourceEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);wms_create_source_editor_defineProperty(this,"state",{serviceUrl:"",layers:"",styles:"",isLoadingCapabilities:false,getCapabilitiesError:null,hasAttemptedToLoadCapabilities:false,layerOptions:[],styleOptions:[],selectedLayerOptions:[],selectedStyleOptions:[],attributionText:"",attributionUrl:""});wms_create_source_editor_defineProperty(this,"_previewIfPossible",external_kbnSharedDeps_Lodash_default.a.debounce(()=>{const{serviceUrl:serviceUrl,layers:layers,styles:styles,attributionText:attributionText,attributionUrl:attributionUrl}=this.state;const sourceConfig=serviceUrl&&layers?{serviceUrl:serviceUrl,layers:layers,styles:styles,attributionText:attributionText,attributionUrl:attributionUrl}:null;this.props.onSourceConfigChange(sourceConfig)},2e3));wms_create_source_editor_defineProperty(this,"_loadCapabilities",async()=>{if(!this.state.serviceUrl){return}this.setState({hasAttemptedToLoadCapabilities:true,isLoadingCapabilities:true,getCapabilitiesError:null});const wmsClient=new wms_client_WmsClient({serviceUrl:this.state.serviceUrl});let capabilities;try{capabilities=await wmsClient.getCapabilities()}catch(error){if(this._isMounted){this.setState({isLoadingCapabilities:false,getCapabilitiesError:error.message})}return}if(!this._isMounted){return}this.setState({isLoadingCapabilities:false,layerOptions:capabilities.layers,styleOptions:capabilities.styles})});wms_create_source_editor_defineProperty(this,"_handleServiceUrlChange",e=>{this.setState({serviceUrl:e.target.value,hasAttemptedToLoadCapabilities:false,layerOptions:[],styleOptions:[],selectedLayerOptions:[],selectedStyleOptions:[],layers:"",styles:""},this._previewIfPossible)});wms_create_source_editor_defineProperty(this,"_handleLayersChange",e=>{this.setState({layers:e.target.value},this._previewIfPossible)});wms_create_source_editor_defineProperty(this,"_handleLayerOptionsChange",selectedOptions=>{this.setState({selectedLayerOptions:selectedOptions,layers:selectedOptions.map(selectedOption=>selectedOption.value).join(",")},this._previewIfPossible)});wms_create_source_editor_defineProperty(this,"_handleStylesChange",e=>{this.setState({styles:e.target.value},this._previewIfPossible)});wms_create_source_editor_defineProperty(this,"_handleStyleOptionsChange",selectedOptions=>{this.setState({selectedStyleOptions:selectedOptions,styles:selectedOptions.map(selectedOption=>selectedOption.value).join(",")},this._previewIfPossible)})}componentDidMount(){this._isMounted=true}componentWillUnmount(){this._isMounted=false}_handleWMSAttributionChange(attributionUpdate){const{attributionText:attributionText,attributionUrl:attributionUrl}=this.state;this.setState(attributionUpdate,()=>{if(attributionText&&attributionUrl){this._previewIfPossible()}})}_renderLayerAndStyleInputs(){if(!this.state.hasAttemptedToLoadCapabilities||this.state.isLoadingCapabilities){return null}if(this.state.getCapabilitiesError||this.state.layerOptions.length===0){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.wms.getCapabilitiesErrorCalloutTitle",{defaultMessage:"Unable to load service metadata"}),color:"warning"},external_kbnSharedDeps_React_default.a.createElement("p",null,this.state.getCapabilitiesError)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:LAYERS_LABEL,helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.wms.layersHelpText",{defaultMessage:"Use comma separated list of layer names"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{onChange:this._handleLayersChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:STYLES_LABEL,helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.wms.stylesHelpText",{defaultMessage:"Use comma separated list of style names"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{onChange:this._handleStylesChange})))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:LAYERS_LABEL},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{options:this.state.layerOptions,selectedOptions:this.state.selectedLayerOptions,onChange:this._handleLayerOptionsChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:STYLES_LABEL},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{options:this.state.styleOptions,selectedOptions:this.state.selectedStyleOptions,onChange:this._handleStyleOptionsChange})))}_renderGetCapabilitiesButton(){if(!this.state.isLoadingCapabilities&&this.state.hasAttemptedToLoadCapabilities){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:this._loadCapabilities,isDisabled:!this.state.serviceUrl,isLoading:this.state.isLoadingCapabilities},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.source.wms.getCapabilitiesButtonText",defaultMessage:"Load capabilities"})))}_renderAttributionInputs(){if(!this.state.layers){return}const{attributionText:attributionText,attributionUrl:attributionUrl}=this.state;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:"Attribution text",isInvalid:attributionUrl!==""&&attributionText==="",error:[external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.wms.attributionText",{defaultMessage:"Attribution url must have accompanying text"})]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{onChange:({target:target})=>this._handleWMSAttributionChange({attributionText:target.value})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:"Attribution link",isInvalid:attributionText!==""&&attributionUrl==="",error:[external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.wms.attributionLink",{defaultMessage:"Attribution text must have an accompanying link"})]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{onChange:({target:target})=>this._handleWMSAttributionChange({attributionUrl:target.value})})))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.wms.urlLabel",{defaultMessage:"Url"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{value:this.state.serviceUrl,onChange:this._handleServiceUrlChange})),this._renderGetCapabilitiesButton(),this._renderLayerAndStyleInputs(),this._renderAttributionInputs())}}function wms_source_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const wms_source_sourceTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.wmsTitle",{defaultMessage:"Web Map Service"});class wms_source_WMSSource extends tms_source_AbstractTMSSource{static createDescriptor({serviceUrl:serviceUrl,layers:layers,styles:styles,attributionText:attributionText,attributionUrl:attributionUrl}){return{type:wms_source_WMSSource.type,serviceUrl:serviceUrl,layers:layers,styles:styles,attributionText:attributionText,attributionUrl:attributionUrl}}async getImmutableProperties(){return[{label:Object(i18n_getters["b"])(),value:wms_source_sourceTitle},{label:Object(i18n_getters["e"])(),value:this._descriptor.serviceUrl},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.wms.layersLabel",{defaultMessage:"Layers"}),value:this._descriptor.layers},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.wms.stylesLabel",{defaultMessage:"Styles"}),value:this._descriptor.styles}]}async getDisplayName(){return this._descriptor.serviceUrl}getAttributions(){const{attributionText:attributionText,attributionUrl:attributionUrl}=this._descriptor;const attributionComplete=!!attributionText&&!!attributionUrl;return attributionComplete?[{url:attributionUrl,label:attributionText}]:[]}getUrlTemplate(){const client=new wms_client_WmsClient({serviceUrl:this._descriptor.serviceUrl});return client.getUrlTemplate(this._descriptor.layers,this._descriptor.styles||"")}}wms_source_defineProperty(wms_source_WMSSource,"type",constants["SOURCE_TYPES"].WMS);registerSource({ConstructorFunction:wms_source_WMSSource,type:constants["SOURCE_TYPES"].WMS});const WebMapServiceLayerIcon=()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M30.766 14.01l1.602-12.954-1.389.237c-.744.253-1.768.38-2.702.45a43.28 43.28 0 01-1.259.07l-.092.004c-.312.014-.57.026-.72.042a1.895 1.895 0 00-.558.168c-.156.07-.316.156-.47.238l-.057.03c-.356.191-.687.358-1.025.4l-1.308.339v5.863c0 .698.142 2.17 0 3.443l-.204 1.67h8.182zM20.871 2.748c-.656.039-1.247.282-2.06.4l-.702.102c-.583.086-1.16.172-1.693.238-.75.093-1.389.145-1.82.113-.592-.044-1.124.341-1.61.843-.453.467-.926 1.1-1.429 1.777l-.144.193c-1.132 1.517-2.452 3.218-4.22 4.101-.214.108-.346.313-.432.528-.087.22-.14.489-.172.78-.064.587-.047 1.325.007 2.083.071 1.01.211 2.102.32 2.956.054.42.1.783.128 1.05.08.78-.128 1.769-.37 2.653-.088.319-.178.616-.258.882-.03.1-.06.195-.086.285a9.67 9.67 0 00-.12.434 1.518 1.518 0 00-.054.334c0 .279.11.577.283.842.175.268.426.52.735.708l.067.04.079-.001c4.133-.068 10.22-.554 10.972-.638a.582.582 0 00.334-.17c.083-.08.157-.182.224-.293.134-.223.264-.524.388-.867.249-.69.495-1.6.72-2.52.162-.654.545-1.41.683-2.01l.784-2.796c.066-.379.198-1.13.272-1.705.146-1.148-.01-2.54.097-3.999.107-1.458.171-2.917.146-4.052a10.13 10.13 0 00-.112-1.438 2.469 2.469 0 00-.131-.495c-.053-.128-.276-.358-.276-.358h-.55zm10.931 12.621s-1.169-.652-1.548-.642c-.757.019-1.298-.026-2.352 0h-5.489l-2.863 8.915c.2.066 1.938.444 2.242.447.62.005 1.478-.08 2.393-.197.88-.113 1.824-.258 2.678-.389l.113-.017a49.753 49.753 0 012.166-.305c.347-.034.996-.024 1.858-.007l.127.003c.827.017 1.819.037 2.869.023 2.198-.029 4.694-.204 6.5-.887 1.42-.538 2.099-.87 2.513-1.34.414-.468.575-1.576.575-1.576s-2.907.868-4.807.784c-.927-.04-1.508.045-2.352-.34-1.429-.652-1.206-2.221-2.43-3.205-.77-.62-2.193-1.267-2.193-1.267z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M33.322 1.125S31.277 14.3 31.72 14.522c.786.393 2.012.665 3.137 1.67 1.23 1.1 1.172 2.5 2.318 3.24.835.538 6.525-.704 6.525-.704l.228-7.956s-.174-4.5-.89-5.216c-.715-.716-2.488-1.125-3-2.08-1.115-2.08-3.068-2.351-3.068-2.351h-3.648z"}));const wmsLayerWizardConfig={categories:[constants["LAYER_WIZARD_CATEGORY"].REFERENCE],description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.wmsDescription",{defaultMessage:"Maps from OGC Standard WMS"}),icon:WebMapServiceLayerIcon,renderWizard:({previewLayers:previewLayers})=>{const onSourceConfigChange=sourceConfig=>{if(!sourceConfig){previewLayers([]);return}const layerDescriptor=tile_layer_TileLayer.createDescriptor({sourceDescriptor:wms_source_WMSSource.createDescriptor(sourceConfig)});previewLayers([layerDescriptor])};return external_kbnSharedDeps_React_default.a.createElement(wms_create_source_editor_WMSCreateSourceEditor,{onSourceConfigChange:onSourceConfigChange})},title:wms_source_sourceTitle};function mvt_field_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class mvt_field_MVTField extends field_AbstractField{constructor({fieldName:fieldName,type:type,source:source,origin:origin}){super({fieldName:fieldName,origin:origin});mvt_field_defineProperty(this,"_source",void 0);mvt_field_defineProperty(this,"_type",void 0);this._source=source;this._type=type}getMVTFieldDescriptor(){return{type:this._type,name:this.getName()}}getSource(){return this._source}async getDataType(){if(this._type===constants["MVT_FIELD_TYPE"].STRING){return"string"}else if(this._type===constants["MVT_FIELD_TYPE"].NUMBER){return"number"}else{throw new Error(`Unrecognized MVT field-type ${this._type}`)}}async getLabel(){return this.getName()}supportsAutoDomain(){return false}canReadFromGeoJson(){return false}}function mvt_field_config_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function makeOption({value:value,icon:icon,message:message}){return{value:value,inputDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:null},external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_["FieldIcon"],{type:icon,fill:"none"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,message))}}const FIELD_TYPE_OPTIONS=[{value:constants["MVT_FIELD_TYPE"].STRING,icon:"string",message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mvtSource.stringFieldLabel",{defaultMessage:"string"})},{value:constants["MVT_FIELD_TYPE"].NUMBER,icon:"number",message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mvtSource.numberFieldLabel",{defaultMessage:"number"})}].map(makeOption);class mvt_field_config_editor_MVTFieldConfigEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);mvt_field_config_editor_defineProperty(this,"state",{currentFields:external_kbnSharedDeps_Lodash_default.a.cloneDeep(this.props.fields)});mvt_field_config_editor_defineProperty(this,"_notifyChange",external_kbnSharedDeps_Lodash_default.a.debounce(()=>{const invalid=this.state.currentFields.some(field=>field.name==="");if(!invalid){this.props.onChange(this.state.currentFields)}}));mvt_field_config_editor_defineProperty(this,"_addField",()=>{const newFields=this.state.currentFields.slice();newFields.push({type:constants["MVT_FIELD_TYPE"].STRING,name:""});this._fieldChange(newFields)})}_fieldChange(newFields){this.setState({currentFields:newFields},this._notifyChange)}_removeField(index){const newFields=this.state.currentFields.slice();newFields.splice(index,1);this._fieldChange(newFields)}_renderFieldTypeDropDown(mvtFieldConfig,index){const onChange=type=>{const newFields=this.state.currentFields.slice();newFields[index]={type:type,name:newFields[index].name};this._fieldChange(newFields)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperSelect"],{options:FIELD_TYPE_OPTIONS,valueOfSelected:mvtFieldConfig.type,onChange:value=>onChange(value),compressed:true})}_renderFieldButtonDelete(index){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"trash",color:"danger",onClick:()=>{this._removeField(index)},title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mvtSource.trashButtonTitle",{defaultMessage:"Remove field"}),"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mvtSource.trashButtonAriaLabel",{defaultMessage:"Remove field"})})}_renderFieldNameInput(mvtFieldConfig,index){const onChange=e=>{const name=e.target.value;const newFields=this.state.currentFields.slice();newFields[index]={name:name,type:newFields[index].type};this._fieldChange(newFields)};const emptyName=mvtFieldConfig.name==="";const hasDupes=this.state.currentFields.filter(field=>field.name===mvtFieldConfig.name).length>1;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{value:mvtFieldConfig.name,onChange:onChange,"aria-label":"Fieldname",placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mvtSource.fieldPlaceholderText",{defaultMessage:"Field name"}),isInvalid:emptyName||hasDupes,compressed:true})}_renderFieldConfig(){return this.state.currentFields.map((mvtFieldConfig,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{key:index,gutterSize:"xs",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,this._renderFieldNameInput(mvtFieldConfig,index)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,this._renderFieldTypeDropDown(mvtFieldConfig,index)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},this._renderFieldButtonDelete(index))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"})))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,this._renderFieldConfig(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceAround",alignItems:"center",gutterSize:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:this._addField,size:"xs",iconType:"plusInCircleFilled"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mvtSource.addFieldLabel",{defaultMessage:"Add"})))))}}function mvt_single_layer_source_settings_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class mvt_single_layer_source_settings_MVTSingleLayerSourceSettings extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);mvt_single_layer_source_settings_defineProperty(this,"state",{currentLayerName:this.props.layerName,currentMinSourceZoom:this.props.minSourceZoom,currentMaxSourceZoom:this.props.maxSourceZoom,currentFields:external_kbnSharedDeps_Lodash_default.a.cloneDeep(this.props.fields)});mvt_single_layer_source_settings_defineProperty(this,"_handleChange",external_kbnSharedDeps_Lodash_default.a.debounce(()=>{this.props.handleChange({layerName:this.state.currentLayerName,minSourceZoom:this.state.currentMinSourceZoom,maxSourceZoom:this.state.currentMaxSourceZoom,fields:this.state.currentFields})},200));mvt_single_layer_source_settings_defineProperty(this,"_handleLayerNameInputChange",e=>{this.setState({currentLayerName:e.target.value},this._handleChange)});mvt_single_layer_source_settings_defineProperty(this,"_handleFieldChange",fields=>{this.setState({currentFields:fields},this._handleChange)});mvt_single_layer_source_settings_defineProperty(this,"_handleZoomRangeChange",e=>{this.setState({currentMinSourceZoom:parseInt(e[0],10),currentMaxSourceZoom:parseInt(e[1],10)},this._handleChange)})}render(){const preMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.MVTSingleLayerVectorSourceEditor.fieldsPreHelpMessage",{defaultMessage:"Fields which are available in "});const message=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("b",null,this.state.currentLayerName),"."," ");const postMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.MVTSingleLayerVectorSourceEditor.fieldsPostHelpMessage",{defaultMessage:"These can be used for tooltips and dynamic styling."});const fieldEditor=this.props.showFields&&this.state.currentLayerName!==""?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{anchorClassName:"eui-alignMiddle",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,preMessage,message,postMessage)},external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.MVTSingleLayerVectorSourceEditor.fieldsMessage",{defaultMessage:"Fields"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"questionInCircle",color:"subdued"})))},external_kbnSharedDeps_React_default.a.createElement(mvt_field_config_editor_MVTFieldConfigEditor,{fields:this.state.currentFields.slice(),onChange:this._handleFieldChange})):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{display:"columnCompressed",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.MVTSingleLayerVectorSourceEditor.layerNameMessage",{defaultMessage:"Source layer"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{value:this.state.currentLayerName,onChange:this._handleLayerNameInputChange,isInvalid:this.state.currentLayerName==="",compressed:true})),external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_["ValidatedDualRange"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{anchorClassName:"eui-alignMiddle",content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.MVTSingleLayerVectorSourceEditor.zoomRangeHelpMessage",{defaultMessage:"Zoom levels where the layer is present in the tiles. This does not correspond directly to visibility. Layer data from lower levels can always be displayed at higher zoom levels (but not vice versa)."})},external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.MVTSingleLayerVectorSourceEditor.zoomRangeTopMessage",{defaultMessage:"Available levels"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"questionInCircle",color:"subdued"}))),formRowDisplay:"columnCompressed",value:[this.state.currentMinSourceZoom,this.state.currentMaxSourceZoom],min:constants["MIN_ZOOM"],max:constants["MAX_ZOOM"],onChange:this._handleZoomRangeChange,allowEmptyRange:false,showInput:"inputWithPopover",compressed:true,showLabels:true,prepend:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.MVTSingleLayerVectorSourceEditor.dataZoomRangeMessage",{defaultMessage:"Zoom"})}),fieldEditor)}}function mvt_single_layer_vector_source_update_source_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class mvt_single_layer_vector_source_update_source_editor_UpdateSourceEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);mvt_single_layer_vector_source_update_source_editor_defineProperty(this,"_onTooltipPropertiesSelect",propertyNames=>{this.props.onChange({propName:"tooltipProperties",value:propertyNames})});mvt_single_layer_vector_source_update_source_editor_defineProperty(this,"_handleChange",settings=>{const changes=[];if(settings.layerName!==this.props.source.getLayerName()){changes.push({propName:"layerName",value:settings.layerName})}if(settings.minSourceZoom!==this.props.source.getMinZoom()){changes.push({propName:"minSourceZoom",value:settings.minSourceZoom})}if(settings.maxSourceZoom!==this.props.source.getMaxZoom()){changes.push({propName:"maxSourceZoom",value:settings.maxSourceZoom})}if(!external_kbnSharedDeps_Lodash_default.a.isEqual(settings.fields,this._getFieldDescriptors())){changes.push({propName:"fields",value:settings.fields});const sanitizedTooltips=[];for(let i=0;i<this.props.tooltipFields.length;i++){const tooltipName=this.props.tooltipFields[i].getName();for(let j=0;j<settings.fields.length;j++){if(settings.fields[j].name===tooltipName){sanitizedTooltips.push(tooltipName);break}}}if(!external_kbnSharedDeps_Lodash_default.a.isEqual(sanitizedTooltips,this.props.tooltipFields)){changes.push({propName:"tooltipProperties",value:sanitizedTooltips})}}this.props.onChange(...changes)})}_getFieldDescriptors(){return this.props.source.getMVTFields().map(field=>field.getMVTFieldDescriptor())}_renderSourceSettingsCard(){const fieldDescriptors=this._getFieldDescriptors();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.mvtSource.sourceSettings",defaultMessage:"Source settings"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(mvt_single_layer_source_settings_MVTSingleLayerSourceSettings,{handleChange:this._handleChange,layerName:this.props.source.getLayerName()||"",fields:fieldDescriptors,minSourceZoom:this.props.source.getMinZoom(),maxSourceZoom:this.props.source.getMaxZoom(),showFields:true})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}_renderTooltipSelectionCard(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.mvtSource.tooltipsTitle",defaultMessage:"Tooltip fields"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(tooltip_selector_TooltipSelector,{tooltipFields:this.props.tooltipFields,onChange:this._onTooltipPropertiesSelect,fields:this.props.source.getMVTFields()})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,this._renderSourceSettingsCard(),this._renderTooltipSelectionCard())}}function mvt_single_layer_vector_source_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const mvt_single_layer_vector_source_sourceTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.MVTSingleLayerVectorSource.sourceTitle",{defaultMessage:"Vector tiles"});class mvt_single_layer_vector_source_MVTSingleLayerVectorSource extends source_AbstractSource{static createDescriptor({urlTemplate:urlTemplate,layerName:layerName,minSourceZoom:minSourceZoom,maxSourceZoom:maxSourceZoom,fields:fields,tooltipProperties:tooltipProperties}){return{type:constants["SOURCE_TYPES"].MVT_SINGLE_LAYER,id:v4_default()(),urlTemplate:urlTemplate?urlTemplate:"",layerName:layerName?layerName:"",minSourceZoom:typeof minSourceZoom==="number"?Math.max(constants["MIN_ZOOM"],minSourceZoom):constants["MIN_ZOOM"],maxSourceZoom:typeof maxSourceZoom==="number"?Math.min(constants["MAX_ZOOM"],maxSourceZoom):constants["MAX_ZOOM"],fields:fields?fields:[],tooltipProperties:tooltipProperties?tooltipProperties:[]}}constructor(sourceDescriptor,inspectorAdapters){super(sourceDescriptor,inspectorAdapters);mvt_single_layer_vector_source_defineProperty(this,"_descriptor",void 0);mvt_single_layer_vector_source_defineProperty(this,"_tooltipFields",void 0);this._descriptor=mvt_single_layer_vector_source_MVTSingleLayerVectorSource.createDescriptor(sourceDescriptor);this._tooltipFields=this._descriptor.tooltipProperties.map(fieldName=>this.getFieldByName(fieldName)).filter(f=>f!==null)}async supportsFitToBounds(){return false}renderSourceSettingsEditor({onChange:onChange}){return external_kbnSharedDeps_React_default.a.createElement(mvt_single_layer_vector_source_update_source_editor_UpdateSourceEditor,{onChange:onChange,tooltipFields:this._tooltipFields,source:this})}getFieldNames(){return this._descriptor.fields.map(field=>field.name)}getMVTFields(){return this._descriptor.fields.map(field=>new mvt_field_MVTField({fieldName:field.name,type:field.type,source:this,origin:constants["FIELD_ORIGIN"].SOURCE}))}getFieldByName(fieldName){try{return this.createField({fieldName:fieldName})}catch(e){return null}}createField({fieldName:fieldName}){const field=this._descriptor.fields.find(f=>f.name===fieldName);if(!field){throw new Error(`Cannot create field for fieldName ${fieldName}`)}return new mvt_field_MVTField({fieldName:field.name,type:field.type,source:this,origin:constants["FIELD_ORIGIN"].SOURCE})}getGeoJsonWithMeta(){throw new Error("Does not implement getGeoJsonWithMeta")}async getFields(){return this.getMVTFields()}getLayerName(){return this._descriptor.layerName}async getImmutableProperties(){return[{label:Object(i18n_getters["b"])(),value:mvt_single_layer_vector_source_sourceTitle},{label:Object(i18n_getters["e"])(),value:this._descriptor.urlTemplate}]}async getDisplayName(){return this.getLayerName()}async getUrlTemplateWithMeta(){return{urlTemplate:this._descriptor.urlTemplate,layerName:this._descriptor.layerName,minSourceZoom:this._descriptor.minSourceZoom,maxSourceZoom:this._descriptor.maxSourceZoom}}async getSupportedShapeTypes(){return[constants["VECTOR_SHAPE_TYPE"].POINT,constants["VECTOR_SHAPE_TYPE"].LINE,constants["VECTOR_SHAPE_TYPE"].POLYGON]}canFormatFeatureProperties(){return!!this._tooltipFields.length}getMinZoom(){return this._descriptor.minSourceZoom}getMaxZoom(){return this._descriptor.maxSourceZoom}async getBoundsForFilters(boundsFilters,registerCancelCallback){return null}getSyncMeta(){return null}isBoundsAware(){return false}getSourceTooltipContent(){return{tooltipContent:null,areResultsTrimmed:false}}async getLeftJoinFields(){return[]}async getTooltipProperties(properties,featureId){const tooltips=[];for(const key in properties){if(properties.hasOwnProperty(key)){for(let i=0;i<this._tooltipFields.length;i++){const mvtField=this._tooltipFields[i];if(mvtField.getName()===key){const tooltip=new tooltip_property["b"](key,key,properties[key]);tooltips.push(tooltip);break}}}}return tooltips}}registerSource({ConstructorFunction:mvt_single_layer_vector_source_MVTSingleLayerVectorSource,type:constants["SOURCE_TYPES"].MVT_SINGLE_LAYER});function mvt_single_layer_vector_source_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class mvt_single_layer_vector_source_editor_MVTSingleLayerVectorSourceEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);mvt_single_layer_vector_source_editor_defineProperty(this,"state",{urlTemplate:"",layerName:"",minSourceZoom:constants["MIN_ZOOM"],maxSourceZoom:constants["MAX_ZOOM"],fields:[]});mvt_single_layer_vector_source_editor_defineProperty(this,"_sourceConfigChange",external_kbnSharedDeps_Lodash_default.a.debounce(()=>{const canPreview=this.state.urlTemplate.indexOf("{x}")>=0&&this.state.urlTemplate.indexOf("{y}")>=0&&this.state.urlTemplate.indexOf("{z}")>=0;if(canPreview&&this.state.layerName){this.props.onSourceConfigChange({urlTemplate:this.state.urlTemplate,layerName:this.state.layerName,minSourceZoom:this.state.minSourceZoom,maxSourceZoom:this.state.maxSourceZoom,fields:this.state.fields})}},200));mvt_single_layer_vector_source_editor_defineProperty(this,"_handleUrlTemplateChange",e=>{const url=e.target.value;this.setState({urlTemplate:url},()=>this._sourceConfigChange())});mvt_single_layer_vector_source_editor_defineProperty(this,"_handleChange",state=>{this.setState(state,()=>this._sourceConfigChange())})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.MVTSingleLayerVectorSourceEditor.urlMessage",{defaultMessage:"Url"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.MVTSingleLayerVectorSourceEditor.urlHelpMessage",{defaultMessage:"URL of the .mvt vector tile service. e.g. {url}",values:{url:"http://company.com/{z}/{x}/{y}.pbf"}})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{value:this.state.urlTemplate,onChange:this._handleUrlTemplateChange,compressed:true})),external_kbnSharedDeps_React_default.a.createElement(mvt_single_layer_source_settings_MVTSingleLayerSourceSettings,{handleChange:this._handleChange,layerName:this.state.layerName,fields:this.state.fields,minSourceZoom:this.state.minSourceZoom,maxSourceZoom:this.state.maxSourceZoom,showFields:false}))}}const VectorTileLayerIcon=()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25"},external_kbnSharedDeps_React_default.a.createElement("g",{clipPath:"url(#clip0)"},external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__background",d:"M33.547 14.847l2.439-19.72-2.114.36c-1.133.385-2.692.577-4.114.684-.706.052-1.368.083-1.916.108l-.14.006c-.475.02-.868.038-1.097.064a2.885 2.885 0 00-.85.255c-.237.106-.48.237-.714.362l-.088.047c-.541.29-1.045.543-1.56.608l-1.99.515v8.926c0 1.062.215 3.302 0 5.242l-.311 2.543h12.455zM18.485-2.298c-1 .058-1.9.429-3.135.607-.356.051-.714.104-1.07.157-.888.131-1.765.26-2.577.362-1.143.142-2.115.22-2.77.172C8.031-1.067 7.22-.48 6.48.283c-.69.711-1.408 1.676-2.174 2.704l-.22.295C2.363 5.591.354 8.18-2.337 9.526c-.326.163-.528.475-.658.803-.132.334-.214.743-.263 1.188-.097.893-.07 2.016.011 3.17.109 1.539.322 3.2.488 4.5.082.64.153 1.192.194 1.598.122 1.188-.195 2.693-.564 4.038-.134.486-.27.939-.392 1.343l-.13.434a14.78 14.78 0 00-.184.661c-.044.178-.081.36-.081.508 0 .425.168.879.43 1.282.267.408.65.793 1.12 1.078l.102.061.12-.002c6.291-.103 15.558-.843 16.703-.97a.886.886 0 00.507-.259 2.15 2.15 0 00.342-.447c.204-.34.401-.797.59-1.32.38-1.05.753-2.434 1.098-3.834.244-.997.828-2.148 1.037-3.062l1.194-4.256c.101-.576.302-1.721.414-2.595.223-1.748-.015-3.866.148-6.088.162-2.22.26-4.44.223-6.168-.019-.862-.072-1.615-.172-2.19a3.756 3.756 0 00-.199-.752c-.08-.196-.42-.545-.42-.545h-.837zm16.639 19.212s-1.78-.992-2.356-.978c-1.153.03-1.976-.038-3.58 0h-8.356l-4.36 13.571c.305.102 2.95.677 3.414.681.943.008 2.25-.12 3.643-.3 1.338-.17 2.776-.392 4.077-.591l.171-.027c1.352-.207 2.532-.387 3.297-.463.53-.053 1.517-.037 2.829-.011l.194.004c1.259.025 2.768.056 4.367.035 3.347-.043 7.146-.31 9.894-1.35 2.162-.82 3.196-1.325 3.826-2.039.63-.714.876-2.4.876-2.4s-4.425 1.321-7.318 1.194c-1.411-.062-2.295.067-3.58-.52-2.175-.991-1.835-3.38-3.698-4.877-1.174-.944-3.34-1.929-3.34-1.929z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__background",d:"M37.439-4.77s-3.114 20.058-2.44 20.395c1.197.598 3.063 1.012 4.775 2.543 1.872 1.673 1.784 3.805 3.53 4.93 1.27.82 9.932-1.07 9.932-1.07l.348-12.112s-.265-6.85-1.355-7.94C51.14.886 48.441.264 47.662-1.189c-1.697-3.169-4.67-3.581-4.67-3.581h-5.553z"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"9.487",cy:"7.606",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"42.779",cy:"9.055",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"24.834",cy:"21.957",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"46.423",cy:"16.145",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"28.986",cy:"2.029",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"30.646",cy:"9.502",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"40.61",cy:"-0.462",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"15.7",cy:"2.029",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"2.415",cy:"13.654",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"12.379",cy:"15.315",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"4.075",cy:"23.618",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"14.039",cy:"24.448",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"33.968",cy:"24.448",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M.834 23.863h48v.545h-48zm0-11.727h48v.545h-48zm0-11.727h48v.545h-48z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M.834.409h.545v24H.834zm15.818 0h.545v24h-.545zm16.091 0h.545v24h-.545zm15.545 0h.545v24h-.545z"})),external_kbnSharedDeps_React_default.a.createElement("defs",null,external_kbnSharedDeps_React_default.a.createElement("clipPath",{id:"clip0"},external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#fff",d:"M0 0h48v24H0z",transform:"translate(.834 .409)"}))));const mvtVectorSourceWizardConfig={categories:[constants["LAYER_WIZARD_CATEGORY"].REFERENCE],description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.source.mvtVectorSourceWizard",{defaultMessage:"Data service implementing the Mapbox vector tile specification"}),icon:VectorTileLayerIcon,renderWizard:({previewLayers:previewLayers,mapColors:mapColors})=>{const onSourceConfigChange=sourceConfig=>{const sourceDescriptor=mvt_single_layer_vector_source_MVTSingleLayerVectorSource.createDescriptor(sourceConfig);const layerDescriptor=tiled_vector_layer_TiledVectorLayer.createDescriptor({sourceDescriptor:sourceDescriptor},mapColors);previewLayers([layerDescriptor])};return external_kbnSharedDeps_React_default.a.createElement(mvt_single_layer_vector_source_editor_MVTSingleLayerVectorSourceEditor,{onSourceConfigChange:onSourceConfigChange})},title:mvt_single_layer_vector_source_sourceTitle};let OBSERVABILITY_LAYER_TYPE;(function(OBSERVABILITY_LAYER_TYPE){OBSERVABILITY_LAYER_TYPE["APM_RUM_PERFORMANCE"]="APM_RUM_PERFORMANCE";OBSERVABILITY_LAYER_TYPE["APM_RUM_TRAFFIC"]="APM_RUM_TRAFFIC"})(OBSERVABILITY_LAYER_TYPE||(OBSERVABILITY_LAYER_TYPE={}));const OBSERVABILITY_LAYER_OPTIONS=[{value:OBSERVABILITY_LAYER_TYPE.APM_RUM_PERFORMANCE,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.apmRumPerformanceLabel",{defaultMessage:"APM RUM Performance"})},{value:OBSERVABILITY_LAYER_TYPE.APM_RUM_TRAFFIC,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.apmRumTrafficLabel",{defaultMessage:"APM RUM Traffic"})}];function LayerSelect(props){function onChange(event){props.onChange(event.target.value)}const options=props.value?OBSERVABILITY_LAYER_OPTIONS:[{value:"",text:""},...OBSERVABILITY_LAYER_OPTIONS];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.layerLabel",{defaultMessage:"Layer"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{options:options,value:props.value?props.value:"",onChange:onChange}))}let OBSERVABILITY_METRIC_TYPE;(function(OBSERVABILITY_METRIC_TYPE){OBSERVABILITY_METRIC_TYPE["TRANSACTION_DURATION"]="TRANSACTION_DURATION";OBSERVABILITY_METRIC_TYPE["COUNT"]="COUNT";OBSERVABILITY_METRIC_TYPE["UNIQUE_COUNT"]="UNIQUE_COUNT"})(OBSERVABILITY_METRIC_TYPE||(OBSERVABILITY_METRIC_TYPE={}));const APM_RUM_PERFORMANCE_METRIC_OPTIONS=[{value:OBSERVABILITY_METRIC_TYPE.TRANSACTION_DURATION,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.transactionDurationLabel",{defaultMessage:"Transaction duraction"})}];const APM_RUM_TRAFFIC_METRIC_OPTIONS=[{value:OBSERVABILITY_METRIC_TYPE.COUNT,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.countLabel",{defaultMessage:"Count"})},{value:OBSERVABILITY_METRIC_TYPE.UNIQUE_COUNT,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.uniqueCountLabel",{defaultMessage:"Unique count"})}];function getMetricOptionsForLayer(layer){if(layer===OBSERVABILITY_LAYER_TYPE.APM_RUM_PERFORMANCE){return APM_RUM_PERFORMANCE_METRIC_OPTIONS}if(layer===OBSERVABILITY_LAYER_TYPE.APM_RUM_TRAFFIC){return APM_RUM_TRAFFIC_METRIC_OPTIONS}return[]}function metric_select_MetricSelect(props){function onChange(event){props.onChange(event.target.value)}if(!props.layer||!props.value){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.metricLabel",{defaultMessage:"Metric"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{options:getMetricOptionsForLayer(props.layer),value:props.value,onChange:onChange}))}let DISPLAY;(function(DISPLAY){DISPLAY["CHOROPLETH"]="CHOROPLETH";DISPLAY["CLUSTERS"]="CLUSTERS";DISPLAY["GRIDS"]="GRIDS";DISPLAY["HEATMAP"]="HEATMAP"})(DISPLAY||(DISPLAY={}));const DISPLAY_OPTIONS=[{value:DISPLAY.CHOROPLETH,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.choroplethLabel",{defaultMessage:"World boundaries"})},{value:DISPLAY.CLUSTERS,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.clustersLabel",{defaultMessage:"Clusters"})},{value:DISPLAY.GRIDS,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.gridsLabel",{defaultMessage:"Grids"})},{value:DISPLAY.HEATMAP,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.heatMapLabel",{defaultMessage:"Heat map"})}];function DisplaySelect(props){function onChange(event){props.onChange(event.target.value)}if(!props.layer){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.displayLabel",{defaultMessage:"Display"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{options:DISPLAY_OPTIONS,value:props.value,onChange:onChange}))}const APM_INDEX_PATTERN_ID="apm_static_index_pattern_id";const APM_INDEX_PATTERN_TITLE="apm-*";const create_layer_descriptor_defaultDynamicProperties=getDefaultDynamicProperties();function createDynamicFillColorDescriptor(layer,field){return{type:constants["STYLE_TYPE"].DYNAMIC,options:{...create_layer_descriptor_defaultDynamicProperties[constants["VECTOR_STYLES"].FILL_COLOR].options,field:field,color:layer===OBSERVABILITY_LAYER_TYPE.APM_RUM_PERFORMANCE?"Green to Red":"Yellow to Red",type:constants["COLOR_MAP_TYPE"].ORDINAL}}}function createLayerLabel(layer,metric){let layerName;if(layer===OBSERVABILITY_LAYER_TYPE.APM_RUM_PERFORMANCE){layerName=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.apmRumPerformanceLayerName",{defaultMessage:"Performance"})}else if(layer===OBSERVABILITY_LAYER_TYPE.APM_RUM_TRAFFIC){layerName=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.apmRumTrafficLayerName",{defaultMessage:"Traffic"})}let metricName;if(metric===OBSERVABILITY_METRIC_TYPE.TRANSACTION_DURATION){metricName=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.durationMetricName",{defaultMessage:"Duration"})}else if(metric===OBSERVABILITY_METRIC_TYPE.COUNT){metricName=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.countMetricName",{defaultMessage:"Total"})}else if(metric===OBSERVABILITY_METRIC_TYPE.UNIQUE_COUNT){metricName=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.uniqueCountMetricName",{defaultMessage:"Unique count"})}return`[${layerName}] ${metricName}`}function createAggDescriptor(metric){if(metric===OBSERVABILITY_METRIC_TYPE.TRANSACTION_DURATION){return{type:constants["AGG_TYPE"].AVG,field:"transaction.duration.us"}}else if(metric===OBSERVABILITY_METRIC_TYPE.UNIQUE_COUNT){return{type:constants["AGG_TYPE"].UNIQUE_COUNT,field:"transaction.id"}}else{return{type:constants["AGG_TYPE"].COUNT}}}function createAmpSourceQuery(layer){let query;if(layer===OBSERVABILITY_LAYER_TYPE.APM_RUM_PERFORMANCE||layer===OBSERVABILITY_LAYER_TYPE.APM_RUM_TRAFFIC){query='processor.event:"transaction"'}return query?{language:"kuery",query:query}:undefined}function getGeoGridRequestType(display){if(display===DISPLAY.HEATMAP){return constants["RENDER_AS"].HEATMAP}if(display===DISPLAY.GRIDS){return constants["RENDER_AS"].GRID}return constants["RENDER_AS"].POINT}function create_layer_descriptor_createLayerDescriptor({layer:layer,metric:metric,display:display}){if(!layer||!metric||!display){return null}const apmSourceQuery=createAmpSourceQuery(layer);const label=createLayerLabel(layer,metric);const metricsDescriptor=createAggDescriptor(metric);if(display===DISPLAY.CHOROPLETH){const joinId=v4_default()();const joinKey=getJoinAggKey({aggType:metricsDescriptor.type,aggFieldName:"field"in metricsDescriptor?metricsDescriptor.field:"",rightSourceId:joinId});return vector_layer_VectorLayer.createDescriptor({label:label,joins:[{leftField:"iso2",right:{type:constants["SOURCE_TYPES"].ES_TERM_SOURCE,id:joinId,indexPatternId:APM_INDEX_PATTERN_ID,indexPatternTitle:APM_INDEX_PATTERN_TITLE,term:"client.geo.country_iso_code",metrics:[metricsDescriptor],whereQuery:apmSourceQuery,applyGlobalQuery:true,applyGlobalTime:true}}],sourceDescriptor:ems_file_source_EMSFileSource.createDescriptor({id:"world_countries",tooltipProperties:["name","iso2"]}),style:vector_style_VectorStyle.createDescriptor({[constants["VECTOR_STYLES"].FILL_COLOR]:createDynamicFillColorDescriptor(layer,{name:joinKey,origin:constants["FIELD_ORIGIN"].JOIN}),[constants["VECTOR_STYLES"].LINE_COLOR]:{type:constants["STYLE_TYPE"].STATIC,options:{color:"#3d3d3d"}}})})}const geoGridSourceDescriptor=es_geo_grid_source_ESGeoGridSource.createDescriptor({indexPatternId:APM_INDEX_PATTERN_ID,geoField:"client.geo.location",metrics:[metricsDescriptor],requestType:getGeoGridRequestType(display),resolution:constants["GRID_RESOLUTION"].MOST_FINE});if(display===DISPLAY.HEATMAP){return heatmap_layer_HeatmapLayer.createDescriptor({label:label,query:apmSourceQuery,sourceDescriptor:geoGridSourceDescriptor})}const metricSourceKey=getSourceAggKey({aggType:metricsDescriptor.type,aggFieldName:"field"in metricsDescriptor?metricsDescriptor.field:undefined});const metricStyleField={name:metricSourceKey,origin:constants["FIELD_ORIGIN"].SOURCE};const styleProperties={[constants["VECTOR_STYLES"].FILL_COLOR]:createDynamicFillColorDescriptor(layer,metricStyleField),[constants["VECTOR_STYLES"].ICON_SIZE]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{...create_layer_descriptor_defaultDynamicProperties[constants["VECTOR_STYLES"].ICON_SIZE].options,field:metricStyleField}},[constants["VECTOR_STYLES"].LINE_COLOR]:{type:constants["STYLE_TYPE"].STATIC,options:{color:"#3d3d3d"}}};return vector_layer_VectorLayer.createDescriptor({label:label,query:apmSourceQuery,sourceDescriptor:geoGridSourceDescriptor,style:vector_style_VectorStyle.createDescriptor(styleProperties)})}function observability_layer_template_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class observability_layer_template_ObservabilityLayerTemplate extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);observability_layer_template_defineProperty(this,"state",{layer:null,metric:null,display:DISPLAY.CHOROPLETH});observability_layer_template_defineProperty(this,"_onLayerChange",layer=>{const newState={layer:layer,metric:this.state.metric};const metricOptions=getMetricOptionsForLayer(layer);const selectedMetricOption=metricOptions.find(option=>option.value===this.state.metric);if(!selectedMetricOption){if(metricOptions.length){newState.metric=metricOptions[0].value}else{newState.metric=null}}this.setState(newState,this._previewLayer)});observability_layer_template_defineProperty(this,"_onMetricChange",metric=>{this.setState({metric:metric},this._previewLayer)});observability_layer_template_defineProperty(this,"_onDisplayChange",display=>{this.setState({display:display},this._previewLayer)})}_previewLayer(){const layerDescriptor=create_layer_descriptor_createLayerDescriptor({layer:this.state.layer,metric:this.state.metric,display:this.state.display});this.props.previewLayers(layerDescriptor?[layerDescriptor]:[])}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(LayerSelect,{value:this.state.layer,onChange:this._onLayerChange}),external_kbnSharedDeps_React_default.a.createElement(metric_select_MetricSelect,{layer:this.state.layer,value:this.state.metric,onChange:this._onMetricChange}),external_kbnSharedDeps_React_default.a.createElement(DisplaySelect,{layer:this.state.layer,value:this.state.display,onChange:this._onDisplayChange}))}}const ObservabilityLayerWizardConfig={categories:[constants["LAYER_WIZARD_CATEGORY"].ELASTICSEARCH,constants["LAYER_WIZARD_CATEGORY"].SOLUTIONS],getIsDisabled:async()=>{try{await Object(kibana_services["p"])().get(APM_INDEX_PATTERN_ID);return false}catch(e){return true}},disabledReason:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.disabledDesc",{defaultMessage:"Cannot find APM index pattern. To get started with Observably, go to Observability > Overview."}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.desc",{defaultMessage:"APM layers"}),icon:"logoObservability",renderWizard:renderWizardArguments=>external_kbnSharedDeps_React_default.a.createElement(observability_layer_template_ObservabilityLayerTemplate,renderWizardArguments),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.observability.title",{defaultMessage:"Observability"})};var minimatch=__webpack_require__(168);var minimatch_default=__webpack_require__.n(minimatch);const create_layer_descriptors_defaultDynamicProperties=getDefaultDynamicProperties();const euiVisColorPalette=Object(external_kbnSharedDeps_ElasticEui_["euiPaletteColorBlind"])();function isApmIndex(indexPatternTitle){return minimatch_default()(indexPatternTitle,APM_INDEX_PATTERN_TITLE)}function getSourceField(indexPatternTitle){return isApmIndex(indexPatternTitle)?"client.geo.location":"source.geo.location"}function getDestinationField(indexPatternTitle){return isApmIndex(indexPatternTitle)?"server.geo.location":"destination.geo.location"}function createSourceLayerDescriptor(indexPatternId,indexPatternTitle){const sourceDescriptor=es_search_source_ESSearchSource.createDescriptor({indexPatternId:indexPatternId,geoField:getSourceField(indexPatternTitle),scalingType:constants["SCALING_TYPES"].TOP_HITS,topHitsSplitField:isApmIndex(indexPatternTitle)?"client.ip":"source.ip",tooltipProperties:isApmIndex(indexPatternTitle)?["host.name","client.ip","client.domain","client.geo.country_iso_code","client.as.organization.name"]:["host.name","source.ip","source.domain","source.geo.country_iso_code","source.as.organization.name"]});const styleProperties={[constants["VECTOR_STYLES"].FILL_COLOR]:{type:constants["STYLE_TYPE"].STATIC,options:{color:euiVisColorPalette[1]}},[constants["VECTOR_STYLES"].LINE_COLOR]:{type:constants["STYLE_TYPE"].STATIC,options:{color:"#FFFFFF"}},[constants["VECTOR_STYLES"].LINE_WIDTH]:{type:constants["STYLE_TYPE"].STATIC,options:{size:2}},[constants["VECTOR_STYLES"].SYMBOLIZE_AS]:{options:{value:constants["SYMBOLIZE_AS_TYPES"].ICON}},[constants["VECTOR_STYLES"].ICON]:{type:constants["STYLE_TYPE"].STATIC,options:{value:"home"}},[constants["VECTOR_STYLES"].ICON_SIZE]:{type:constants["STYLE_TYPE"].STATIC,options:{size:8}}};return vector_layer_VectorLayer.createDescriptor({label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.sescurity.sourceLayerLabel",{defaultMessage:"{indexPatternTitle} | Source Point",values:{indexPatternTitle:indexPatternTitle}}),sourceDescriptor:sourceDescriptor,style:vector_style_VectorStyle.createDescriptor(styleProperties)})}function createDestinationLayerDescriptor(indexPatternId,indexPatternTitle){const sourceDescriptor=es_search_source_ESSearchSource.createDescriptor({indexPatternId:indexPatternId,geoField:getDestinationField(indexPatternTitle),scalingType:constants["SCALING_TYPES"].TOP_HITS,topHitsSplitField:isApmIndex(indexPatternTitle)?"server.ip":"destination.ip",tooltipProperties:isApmIndex(indexPatternTitle)?["host.name","server.ip","server.domain","server.geo.country_iso_code","server.as.organization.name"]:["host.name","destination.ip","destination.domain","destination.geo.country_iso_code","destination.as.organization.name"]});const styleProperties={[constants["VECTOR_STYLES"].FILL_COLOR]:{type:constants["STYLE_TYPE"].STATIC,options:{color:euiVisColorPalette[2]}},[constants["VECTOR_STYLES"].LINE_COLOR]:{type:constants["STYLE_TYPE"].STATIC,options:{color:"#FFFFFF"}},[constants["VECTOR_STYLES"].LINE_WIDTH]:{type:constants["STYLE_TYPE"].STATIC,options:{size:2}},[constants["VECTOR_STYLES"].SYMBOLIZE_AS]:{options:{value:constants["SYMBOLIZE_AS_TYPES"].ICON}},[constants["VECTOR_STYLES"].ICON]:{type:constants["STYLE_TYPE"].STATIC,options:{value:"marker"}},[constants["VECTOR_STYLES"].ICON_SIZE]:{type:constants["STYLE_TYPE"].STATIC,options:{size:8}}};return vector_layer_VectorLayer.createDescriptor({label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.sescurity.destinationLayerLabel",{defaultMessage:"{indexPatternTitle} | Destination point",values:{indexPatternTitle:indexPatternTitle}}),sourceDescriptor:sourceDescriptor,style:vector_style_VectorStyle.createDescriptor(styleProperties)})}function createLineLayerDescriptor(indexPatternId,indexPatternTitle){const sourceDescriptor=es_pew_pew_source_ESPewPewSource.createDescriptor({indexPatternId:indexPatternId,sourceGeoField:getSourceField(indexPatternTitle),destGeoField:getDestinationField(indexPatternTitle),metrics:[{type:constants["AGG_TYPE"].SUM,field:isApmIndex(indexPatternTitle)?"client.bytes":"source.bytes"},{type:constants["AGG_TYPE"].SUM,field:isApmIndex(indexPatternTitle)?"server.bytes":"destination.bytes"}]});const styleProperties={[constants["VECTOR_STYLES"].LINE_COLOR]:{type:constants["STYLE_TYPE"].STATIC,options:{color:euiVisColorPalette[1]}},[constants["VECTOR_STYLES"].LINE_WIDTH]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{...create_layer_descriptors_defaultDynamicProperties[constants["VECTOR_STYLES"].LINE_WIDTH].options,field:{name:constants["COUNT_PROP_NAME"],origin:constants["FIELD_ORIGIN"].SOURCE},minSize:1,maxSize:8}}};return vector_layer_VectorLayer.createDescriptor({label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.sescurity.lineLayerLabel",{defaultMessage:"{indexPatternTitle} | Line",values:{indexPatternTitle:indexPatternTitle}}),sourceDescriptor:sourceDescriptor,style:vector_style_VectorStyle.createDescriptor(styleProperties)})}function createSecurityLayerDescriptors(indexPatternId,indexPatternTitle){return[createSourceLayerDescriptor(indexPatternId,indexPatternTitle),createDestinationLayerDescriptor(indexPatternId,indexPatternTitle),createLineLayerDescriptor(indexPatternId,indexPatternTitle)]}async function getSecurityIndexPatterns(){const uiSettings=Object(kibana_services["M"])();let securityIndexPatternTitles;try{securityIndexPatternTitles=uiSettings.get("securitySolution:defaultIndex")}catch(error){return[]}const indexPatternCache=await Object(kibana_services["p"])().getCache();return indexPatternCache.filter(savedObject=>securityIndexPatternTitles.some(indexPatternTitle=>{var _savedObject$attribut;return minimatch_default()(indexPatternTitle,savedObject===null||savedObject===void 0?void 0:(_savedObject$attribut=savedObject.attributes)===null||_savedObject$attribut===void 0?void 0:_savedObject$attribut.title)})).map(savedObject=>({id:savedObject.id,title:savedObject.attributes.title}))}function index_pattern_select_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class index_pattern_select_IndexPatternSelect extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);index_pattern_select_defineProperty(this,"_isMounted",false);index_pattern_select_defineProperty(this,"state",{hasLoaded:false,options:[]});index_pattern_select_defineProperty(this,"_onChange",event=>{const targetOption=this.state.options.find(({value:value,text:text})=>event.target.value===value);if(event.target.value===""||!targetOption){this.props.onChange(null);return}this.props.onChange({id:targetOption.value,title:targetOption.text})})}componentWillUnmount(){this._isMounted=false}componentDidMount(){this._isMounted=true;this._loadOptions()}async _loadOptions(){const indexPatterns=await getSecurityIndexPatterns();if(!this._isMounted){return}this.setState({hasLoaded:true,options:[{value:"",text:""},...indexPatterns.map(({id:id,title:title})=>({value:id,text:title}))]})}render(){if(!this.state.hasLoaded){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.security.indexPatternLabel",{defaultMessage:"Index pattern"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{options:this.state.options,value:this.props.value?this.props.value:"",onChange:this._onChange}))}}function security_layer_template_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class security_layer_template_SecurityLayerTemplate extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);security_layer_template_defineProperty(this,"state",{indexPatternId:null,indexPatternTitle:null});security_layer_template_defineProperty(this,"_onIndexPatternChange",indexPatternMeta=>{this.setState({indexPatternId:indexPatternMeta?indexPatternMeta.id:null,indexPatternTitle:indexPatternMeta?indexPatternMeta.title:null},this._previewLayer)})}_previewLayer(){if(!this.state.indexPatternId||!this.state.indexPatternTitle){this.props.previewLayers([]);return}this.props.previewLayers(createSecurityLayerDescriptors(this.state.indexPatternId,this.state.indexPatternTitle))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(index_pattern_select_IndexPatternSelect,{value:this.state.indexPatternId?this.state.indexPatternId:"",onChange:this._onIndexPatternChange}))}}const SecurityLayerWizardConfig={categories:[constants["LAYER_WIZARD_CATEGORY"].ELASTICSEARCH,constants["LAYER_WIZARD_CATEGORY"].SOLUTIONS],getIsDisabled:async()=>{const indexPatterns=await getSecurityIndexPatterns();return indexPatterns.length===0},disabledReason:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.security.disabledDesc",{defaultMessage:"Cannot find security index pattern. To get started with Security, go to Security > Overview."}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.security.desc",{defaultMessage:"Security layers"}),icon:"logoSecurity",renderWizard:renderWizardArguments=>external_kbnSharedDeps_React_default.a.createElement(security_layer_template_SecurityLayerTemplate,renderWizardArguments),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.security.title",{defaultMessage:"Security"})};const create_choropleth_layer_descriptor_defaultDynamicProperties=getDefaultDynamicProperties();function createChoroplethLayerDescriptor({sourceDescriptor:sourceDescriptor,leftField:leftField,rightIndexPatternId:rightIndexPatternId,rightIndexPatternTitle:rightIndexPatternTitle,rightTermField:rightTermField}){const metricsDescriptor={type:constants["AGG_TYPE"].COUNT};const joinId=v4_default()();const joinKey=getJoinAggKey({aggType:metricsDescriptor.type,aggFieldName:"",rightSourceId:joinId});return vector_layer_VectorLayer.createDescriptor({joins:[{leftField:leftField,right:{type:constants["SOURCE_TYPES"].ES_TERM_SOURCE,id:joinId,indexPatternId:rightIndexPatternId,indexPatternTitle:rightIndexPatternTitle,term:rightTermField,metrics:[metricsDescriptor],applyGlobalQuery:true,applyGlobalTime:true}}],sourceDescriptor:sourceDescriptor,style:vector_style_VectorStyle.createDescriptor({[constants["VECTOR_STYLES"].FILL_COLOR]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{...create_choropleth_layer_descriptor_defaultDynamicProperties[constants["VECTOR_STYLES"].FILL_COLOR].options,field:{name:joinKey,origin:constants["FIELD_ORIGIN"].JOIN},color:"Yellow to Red",type:constants["COLOR_MAP_TYPE"].ORDINAL}},[constants["VECTOR_STYLES"].LINE_COLOR]:{type:constants["STYLE_TYPE"].STATIC,options:{color:"#3d3d3d"}},[constants["VECTOR_STYLES"].LABEL_TEXT]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{...create_choropleth_layer_descriptor_defaultDynamicProperties[constants["VECTOR_STYLES"].LABEL_TEXT].options,field:{name:joinKey,origin:constants["FIELD_ORIGIN"].JOIN}}}})})}function createEmsChoroplethLayerDescriptor({leftEmsFileId:leftEmsFileId,leftEmsField:leftEmsField,rightIndexPatternId:rightIndexPatternId,rightIndexPatternTitle:rightIndexPatternTitle,rightTermField:rightTermField}){return createChoroplethLayerDescriptor({sourceDescriptor:ems_file_source_EMSFileSource.createDescriptor({id:leftEmsFileId,tooltipProperties:[leftEmsField]}),leftField:leftEmsField,rightIndexPatternId:rightIndexPatternId,rightIndexPatternTitle:rightIndexPatternTitle,rightTermField:rightTermField})}function createEsChoroplethLayerDescriptor({leftIndexPatternId:leftIndexPatternId,leftGeoField:leftGeoField,leftJoinField:leftJoinField,rightIndexPatternId:rightIndexPatternId,rightIndexPatternTitle:rightIndexPatternTitle,rightTermField:rightTermField}){return createChoroplethLayerDescriptor({sourceDescriptor:es_search_source_ESSearchSource.createDescriptor({indexPatternId:leftIndexPatternId,geoField:leftGeoField,scalingType:constants["SCALING_TYPES"].LIMIT,tooltipProperties:[leftJoinField],applyGlobalQuery:false}),leftField:leftJoinField,rightIndexPatternId:rightIndexPatternId,rightIndexPatternTitle:rightIndexPatternTitle,rightTermField:rightTermField})}function layer_template_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}let BOUNDARIES_SOURCE;(function(BOUNDARIES_SOURCE){BOUNDARIES_SOURCE["ELASTICSEARCH"]="ELASTICSEARCH";BOUNDARIES_SOURCE["EMS"]="EMS"})(BOUNDARIES_SOURCE||(BOUNDARIES_SOURCE={}));const BOUNDARIES_OPTIONS=[{id:BOUNDARIES_SOURCE.EMS,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.choropleth.boundaries.ems",{defaultMessage:"Administrative boundaries from Elastic Maps Service"})},{id:BOUNDARIES_SOURCE.ELASTICSEARCH,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.choropleth.boundaries.elasticsearch",{defaultMessage:"Points, lines, and polygons from Elasticsearch"})}];class layer_template_LayerTemplate extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);layer_template_defineProperty(this,"_isMounted",false);layer_template_defineProperty(this,"state",{leftSource:BOUNDARIES_SOURCE.EMS,leftEmsFileId:null,leftEmsFields:[],leftIndexPattern:null,leftGeoFields:[],leftJoinFields:[],leftGeoField:null,leftEmsJoinField:null,leftElasticsearchJoinField:null,rightIndexPatternId:"",rightIndexPatternTitle:null,rightTermsFields:[],rightJoinField:null});layer_template_defineProperty(this,"_loadRightFields",async indexPatternId=>{this.setState({rightTermsFields:[],rightIndexPatternTitle:null});let indexPattern;try{indexPattern=await Object(kibana_services["p"])().get(indexPatternId)}catch(err){return}if(!this._isMounted||indexPatternId!==this.state.rightIndexPatternId){return}this.setState({rightTermsFields:getTermsFields(indexPattern.fields),rightIndexPatternTitle:indexPattern.title})});layer_template_defineProperty(this,"_loadEmsFileFields",async()=>{const emsFileLayers=await getEmsFileLayers();const emsFileLayer=emsFileLayers.find(fileLayer=>fileLayer.getId()===this.state.leftEmsFileId);if(!this._isMounted||!emsFileLayer){return}const leftEmsFields=emsFileLayer.getFieldsInLanguage().filter(field=>field.type==="id").map(field=>({value:field.name,label:field.description}));this.setState({leftEmsFields:leftEmsFields,leftEmsJoinField:leftEmsFields.length?leftEmsFields[0].value:null},this._previewLayer)});layer_template_defineProperty(this,"_onLeftSourceChange",optionId=>{this.setState({leftSource:optionId,rightJoinField:null},this._previewLayer)});layer_template_defineProperty(this,"_onLeftIndexPatternChange",indexPattern=>{this.setState({leftIndexPattern:indexPattern,leftGeoFields:getGeoFields(indexPattern.fields),leftJoinFields:getSourceFields(indexPattern.fields),leftGeoField:null,leftElasticsearchJoinField:null,rightJoinField:null},()=>{if(this.state.leftGeoFields.length){this._onLeftGeoFieldSelect(this.state.leftGeoFields[0].name)}})});layer_template_defineProperty(this,"_onLeftGeoFieldSelect",geoField=>{if(!geoField){return}this.setState({leftGeoField:geoField},this._previewLayer)});layer_template_defineProperty(this,"_onLeftJoinFieldSelect",joinField=>{if(!joinField){return}this.setState({leftElasticsearchJoinField:joinField},this._previewLayer)});layer_template_defineProperty(this,"_onLeftEmsFileChange",emFileId=>{this.setState({leftEmsFileId:emFileId,leftEmsJoinField:null,rightJoinField:null},()=>{this._previewLayer();this._loadEmsFileFields()})});layer_template_defineProperty(this,"_onLeftEmsFieldChange",selectedOptions=>{if(selectedOptions.length===0){return}this.setState({leftEmsJoinField:selectedOptions[0].value},this._previewLayer)});layer_template_defineProperty(this,"_onRightIndexPatternChange",indexPatternId=>{if(!indexPatternId){return}this.setState({rightIndexPatternId:indexPatternId,rightJoinField:null},()=>{this._previewLayer();this._loadRightFields(indexPatternId)})});layer_template_defineProperty(this,"_onRightJoinFieldSelect",joinField=>{if(!joinField){return}this.setState({rightJoinField:joinField},this._previewLayer)})}componentWillUnmount(){this._isMounted=false}componentDidMount(){this._isMounted=true}_isLeftConfigComplete(){if(this.state.leftSource===BOUNDARIES_SOURCE.ELASTICSEARCH){return!!this.state.leftIndexPattern&&!!this.state.leftGeoField&&!!this.state.leftElasticsearchJoinField}else{return!!this.state.leftEmsFileId&&!!this.state.leftEmsJoinField}}_isRightConfigComplete(){return!!this.state.rightIndexPatternId&&!!this.state.rightJoinField}_previewLayer(){if(!this._isLeftConfigComplete()||!this._isRightConfigComplete()){this.props.previewLayers([]);return}const layerDescriptor=this.state.leftSource===BOUNDARIES_SOURCE.ELASTICSEARCH?createEsChoroplethLayerDescriptor({leftIndexPatternId:this.state.leftIndexPattern.id,leftGeoField:this.state.leftGeoField,leftJoinField:this.state.leftElasticsearchJoinField,rightIndexPatternId:this.state.rightIndexPatternId,rightIndexPatternTitle:this.state.rightIndexPatternTitle,rightTermField:this.state.rightJoinField}):createEmsChoroplethLayerDescriptor({leftEmsFileId:this.state.leftEmsFileId,leftEmsField:this.state.leftEmsJoinField,rightIndexPatternId:this.state.rightIndexPatternId,rightIndexPatternTitle:this.state.rightIndexPatternTitle,rightTermField:this.state.rightJoinField});this.props.previewLayers([layerDescriptor])}_renderLeftSourceForm(){if(this.state.leftSource===BOUNDARIES_SOURCE.ELASTICSEARCH){let geoFieldSelect;if(this.state.leftGeoFields.length){geoFieldSelect=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.choropleth.geofieldLabel",{defaultMessage:"Geospatial field"})},external_kbnSharedDeps_React_default.a.createElement(SingleFieldSelect,{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.choropleth.geofieldPlaceholder",{defaultMessage:"Select geo field"}),value:this.state.leftGeoField,onChange:this._onLeftGeoFieldSelect,fields:this.state.leftGeoFields,isClearable:false}))}let joinFieldSelect;if(this.state.leftJoinFields.length){joinFieldSelect=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.choropleth.joinFieldLabel",{defaultMessage:"Join field"})},external_kbnSharedDeps_React_default.a.createElement(SingleFieldSelect,{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.choropleth.joinFieldPlaceholder",{defaultMessage:"Select field"}),value:this.state.leftElasticsearchJoinField,onChange:this._onLeftJoinFieldSelect,fields:this.state.leftJoinFields,isClearable:false}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(geo_index_pattern_select_GeoIndexPatternSelect,{value:this.state.leftIndexPattern?this.state.leftIndexPattern.id:"",onChange:this._onLeftIndexPatternChange}),geoFieldSelect,joinFieldSelect)}else{let emsFieldSelect;if(this.state.leftEmsFields.length){let selectedOption;if(this.state.leftEmsJoinField){selectedOption=this.state.leftEmsFields.find(option=>this.state.leftEmsJoinField===option.value)}emsFieldSelect=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.choropleth.joinFieldLabel",{defaultMessage:"Join field"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{singleSelection:true,isClearable:false,options:this.state.leftEmsFields,selectedOptions:selectedOption?[selectedOption]:[],onChange:this._onLeftEmsFieldChange}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(ems_file_select_EMSFileSelect,{value:this.state.leftEmsFileId,onChange:this._onLeftEmsFileChange}),emsFieldSelect)}}_renderLeftPanel(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.choropleth.boundariesLabel",defaultMessage:"Boundaries source"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiRadioGroup"],{options:BOUNDARIES_OPTIONS,idSelected:this.state.leftSource,onChange:this._onLeftSourceChange})),this._renderLeftSourceForm())}_renderRightPanel(){if(!this._isLeftConfigComplete()){return null}const IndexPatternSelect=Object(kibana_services["o"])();let joinFieldSelect;if(this.state.rightTermsFields.length){joinFieldSelect=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.choropleth.joinFieldLabel",{defaultMessage:"Join field"})},external_kbnSharedDeps_React_default.a.createElement(SingleFieldSelect,{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.choropleth.joinFieldPlaceholder",{defaultMessage:"Select field"}),value:this.state.rightJoinField,onChange:this._onRightJoinFieldSelect,fields:this.state.rightTermsFields,isClearable:false}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.maps.choropleth.statisticsLabel",defaultMessage:"Statistics source"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.choropleth.rightSourceLabel",{defaultMessage:"Index pattern"})},external_kbnSharedDeps_React_default.a.createElement(IndexPatternSelect,{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.maps.choropleth.rightSourcePlaceholder",{defaultMessage:"Select index pattern"}),indexPatternId:this.state.rightIndexPatternId,onChange:this._onRightIndexPatternChange,isClearable:false})),joinFieldSelect)}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,this._renderLeftPanel(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),this._renderRightPanel())}}const ChoroplethLayerIcon=()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#98A2B3",d:"M32.206 15.364V1.588l-1.492.204c-.743.254-1.768.38-2.702.45a41.39 41.39 0 01-1.258.07l-.093.005c-.312.014-.57.025-.72.042a1.895 1.895 0 00-.558.167c-.156.07-.316.156-.47.238l-.057.031c-.356.19-.687.357-1.025.4l-2.262.474v5.864c0 .698-.677 2.578-.818 3.852l.34 1.807 11.114.17z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#69707D",d:"M22.36 3.558c-.178-.104-.416-.15-.664-.172a6.333 6.333 0 00-.885 0c-.657.04-1.452.144-2.264.261l-.703.103c-.583.087-1.16.172-1.692.238-.751.093-1.39.145-1.82.113-.593-.044-1.125.341-1.611.843-.453.467-.925 1.101-1.429 1.777l-.144.193c-1.132 1.517-2.452 3.218-4.22 4.102-.213.107-.346.312-.431.528a3.065 3.065 0 00-.173.78c-.064.586-.046 1.324.007 2.083.072 1.01.211 2.102.32 2.955.055.42.101.784.128 1.05.08.78-.128 1.77-.37 2.653-.088.319-.178.616-.258.882l-.086.285a9.67 9.67 0 00-.12.434 1.518 1.518 0 00-.053.334c0 .28.11.577.283.842a2.3 2.3 0 00.735.708l.067.04h.078c4.133-.069 11.445-.366 12.196-.45a.58.58 0 00.334-.17 1.41 1.41 0 00.224-.293c.134-.223.264-.524.388-.867.249-.69.495-1.6.72-2.52.162-.654.314-1.32.452-1.92l.16-.695c.088-.378.167-.707.235-.963.07-.267.123-.43.156-.494a1.57 1.57 0 00.1-.314c.03-.129.063-.291.096-.48.067-.38.14-.876.213-1.45.146-1.149.296-2.614.403-4.073.107-1.458.171-2.917.146-4.052a10.13 10.13 0 00-.112-1.438 2.469 2.469 0 00-.131-.495c-.053-.128-.135-.275-.276-.358z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#D3DAE6",d:"M31.435 15.227c-.218.006-1.066-.01-1.445 0-.758.02-1.298-.026-2.353 0H22.15l-2.864 8.915c.2.067 1.938.445 2.242.447.62.005 1.478-.08 2.393-.197.88-.112 1.824-.257 2.679-.389l.112-.017c.888-.136 1.664-.254 2.166-.304.348-.035.996-.025 1.858-.007l.128.002c.827.017 1.818.037 2.868.023 2.199-.028 4.695-.203 6.5-.887 1.42-.538 2.1-.87 2.513-1.339.414-.469.558-.468.643-1.44.086-.972.086-2.063.086-2.063l-8.131-2.744h-3.907z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M32.206 1.588s-2.046 13.417-1.603 13.639c.787.393 2.66.63 3.785 1.636 1.23 1.1 1.171 2.5 2.318 3.239.834.538 6.73-.874 6.73-.874l.228-7.956s-.174-4.5-.89-5.216c-.716-.715-2.489-1.125-3-2.08-1.115-2.08-3.068-2.351-3.068-2.351l-4.5-.037z"}));const choroplethLayerWizardConfig={categories:[constants["LAYER_WIZARD_CATEGORY"].ELASTICSEARCH],description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.choropleth.desc",{defaultMessage:"Shaded areas to compare statistics across boundaries"}),icon:ChoroplethLayerIcon,renderWizard:renderWizardArguments=>external_kbnSharedDeps_React_default.a.createElement(layer_template_LayerTemplate,renderWizardArguments),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.choropleth.title",{defaultMessage:"Choropleth"})};let registered=false;function registerLayerWizards(){if(registered){return}registerLayerWizard(uploadLayerWizardConfig);registerLayerWizard(esDocumentsLayerWizardConfig);registerLayerWizard(choroplethLayerWizardConfig);registerLayerWizard(clustersLayerWizardConfig);registerLayerWizard(heatmapLayerWizardConfig);registerLayerWizard(geoLineLayerWizardConfig);registerLayerWizard(point2PointLayerWizardConfig);registerLayerWizard(emsBoundariesLayerWizardConfig);registerLayerWizard(emsBaseMapLayerWizardConfig);registerLayerWizard(kibanaRegionMapLayerWizardConfig);registerLayerWizard(kibanaBasemapLayerWizardConfig);registerLayerWizard(tmsLayerWizardConfig);registerLayerWizard(wmsLayerWizardConfig);registerLayerWizard(mvtVectorSourceWizardConfig);registerLayerWizard(ObservabilityLayerWizardConfig);registerLayerWizard(SecurityLayerWizardConfig);registered=true}var mapbox_gl=__webpack_require__(169);function map_container_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const RENDER_COMPLETE_EVENT="renderComplete";class map_container_MapContainer extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);map_container_defineProperty(this,"_isMounted",false);map_container_defineProperty(this,"_isInitalLoadRenderTimerStarted",false);map_container_defineProperty(this,"_prevIndexPatternIds",[]);map_container_defineProperty(this,"_refreshTimerId",null);map_container_defineProperty(this,"_prevIsPaused",null);map_container_defineProperty(this,"_prevInterval",null);map_container_defineProperty(this,"state",{isInitialLoadRenderTimeoutComplete:false,domId:v4_default()(),geoFields:[]});map_container_defineProperty(this,"_onInitialLoadRenderComplete",()=>{const el=document.querySelector(`[data-dom-id="${this.state.domId}"]`);if(el){el.dispatchEvent(new CustomEvent(RENDER_COMPLETE_EVENT,{bubbles:true}))}});map_container_defineProperty(this,"_loadGeoFields",async nextIndexPatternIds=>{if(external_kbnSharedDeps_Lodash_default.a.isEqual(nextIndexPatternIds,this._prevIndexPatternIds)){return}this._prevIndexPatternIds=nextIndexPatternIds;const geoFields=[];const indexPatterns=await getIndexPatternsFromIds(nextIndexPatternIds);indexPatterns.forEach(indexPattern=>{indexPattern.fields.forEach(field=>{if(indexPattern.id&&!data_public_["indexPatterns"].isNestedField(field)&&(field.type===constants["ES_GEO_FIELD_TYPE"].GEO_POINT||field.type===constants["ES_GEO_FIELD_TYPE"].GEO_SHAPE)){geoFields.push({geoFieldName:field.name,geoFieldType:field.type,indexPatternTitle:indexPattern.title,indexPatternId:indexPattern.id})}})});if(!this._isMounted){return}this.setState({geoFields:geoFields})});map_container_defineProperty(this,"_setRefreshTimer",()=>{const{isPaused:isPaused,interval:interval}=this.props.refreshConfig;if(this._prevIsPaused===isPaused&&this._prevInterval===interval){return}this._prevIsPaused=isPaused;this._prevInterval=interval;this._clearRefreshTimer();if(!isPaused&&interval>0){this._refreshTimerId=window.setInterval(()=>{this.props.triggerRefreshTimer()},interval)}});map_container_defineProperty(this,"_clearRefreshTimer",()=>{if(this._refreshTimerId){window.clearInterval(this._refreshTimerId);this._refreshTimerId=null}});map_container_defineProperty(this,"_startInitialLoadRenderTimer",()=>{window.setTimeout(()=>{if(this._isMounted){this.setState({isInitialLoadRenderTimeoutComplete:true});this._onInitialLoadRenderComplete()}},5e3)})}componentDidMount(){this._isMounted=true;this._setRefreshTimer();registerLayerWizards()}componentDidUpdate(){this._setRefreshTimer();if(this.props.areLayersLoaded&&!this._isInitalLoadRenderTimerStarted){this._isInitalLoadRenderTimerStarted=true;this._startInitialLoadRenderTimer()}if(!!this.props.addFilters){this._loadGeoFields(this.props.indexPatternIds)}}componentWillUnmount(){this._isMounted=false;this._clearRefreshTimer();this.props.cancelAllInFlightRequests()}render(){const{addFilters:addFilters,getFilterActions:getFilterActions,getActionContext:getActionContext,onSingleValueTrigger:onSingleValueTrigger,flyoutDisplay:flyoutDisplay,isFullScreen:isFullScreen,exitFullScreen:exitFullScreen,mapInitError:mapInitError,renderTooltipContent:renderTooltipContent}=this.props;if(mapInitError){return external_kbnSharedDeps_React_default.a.createElement("div",{"data-render-complete":true,"data-shared-item":true,"data-title":this.props.title,"data-description":this.props.description},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.map.initializeErrorTitle",{defaultMessage:"Unable to initialize map"}),color:"danger",iconType:"cross"},external_kbnSharedDeps_React_default.a.createElement("p",null,mapInitError)))}let flyoutPanel=null;if(flyoutDisplay===FLYOUT_STATE.ADD_LAYER_WIZARD){flyoutPanel=external_kbnSharedDeps_React_default.a.createElement(add_layer_panel_connected,null)}else if(flyoutDisplay===FLYOUT_STATE.LAYER_PANEL){flyoutPanel=external_kbnSharedDeps_React_default.a.createElement(connectedLayerPanel,null)}else if(flyoutDisplay===FLYOUT_STATE.MAP_SETTINGS_PANEL){flyoutPanel=external_kbnSharedDeps_React_default.a.createElement(connectedMapSettingsPanel,null)}let exitFullScreenButton;if(isFullScreen){exitFullScreenButton=external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_["ExitFullScreenButton"],{onExitFullScreenMode:exitFullScreen})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"none",responsive:false,"data-dom-id":this.state.domId,"data-render-complete":this.state.isInitialLoadRenderTimeoutComplete,"data-shared-item":true,"data-title":this.props.title,"data-description":this.props.description},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"mapMapWrapper",style:{backgroundColor:this.props.settings.backgroundColor}},external_kbnSharedDeps_React_default.a.createElement(connected,{addFilters:addFilters,getFilterActions:getFilterActions,getActionContext:getActionContext,onSingleValueTrigger:onSingleValueTrigger,geoFields:this.state.geoFields,renderTooltipContent:renderTooltipContent}),!this.props.settings.hideToolbarOverlay&&external_kbnSharedDeps_React_default.a.createElement(connectedToolbarOverlay,{addFilters:addFilters,geoFields:this.state.geoFields,getFilterActions:getFilterActions,getActionContext:getActionContext}),external_kbnSharedDeps_React_default.a.createElement(connectedWidgetOverlay,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:classnames_default()("mapMapLayerPanel",{"mapMapLayerPanel-isVisible":!!flyoutPanel}),grow:false},flyoutPanel),exitFullScreenButton)}}function map_container_mapStateToProps(state){return{areLayersLoaded:areLayersLoaded(state),flyoutDisplay:getFlyoutDisplay(state),isFullScreen:getIsFullScreen(state),refreshConfig:getRefreshConfig(state),mapInitError:getMapInitError(state),indexPatternIds:getQueryableUniqueIndexPatternIds(state),settings:getMapSettings(state)}}function map_container_mapDispatchToProps(dispatch){return{triggerRefreshTimer:()=>dispatch(triggerRefreshTimer()),exitFullScreen:()=>{dispatch(ui_actions_exitFullScreen());Object(kibana_services["d"])().setIsVisible(true)},cancelAllInFlightRequests:()=>dispatch(cancelAllInFlightRequests())}}const map_container_connected=Object(lib["connect"])(map_container_mapStateToProps,map_container_mapDispatchToProps)(map_container_MapContainer);var redux=__webpack_require__(124);var redux_thunk_lib=__webpack_require__(325);var redux_thunk_lib_default=__webpack_require__.n(redux_thunk_lib);var external_kbnSharedDeps_Theme_=__webpack_require__(44);function getDefaultMapSettings(){return{autoFitToDataBounds:false,backgroundColor:external_kbnSharedDeps_Theme_["euiThemeVars"].euiColorEmptyShade,disableInteractive:false,disableTooltipControl:false,hideToolbarOverlay:false,hideLayerControl:false,hideViewControl:false,initialLocation:constants["INITIAL_LOCATION"].LAST_SAVED_LOCATION,fixedLocation:{lat:0,lon:0,zoom:2},browserLocation:{zoom:2},maxZoom:constants["MAX_ZOOM"],minZoom:constants["MIN_ZOOM"],showScaleControl:false,showSpatialFilters:true,spatialFiltersAlpa:.3,spatialFiltersFillColor:"#DA8B45",spatialFiltersLineColor:"#DA8B45"}}const getLayerIndex=(list,layerId)=>list.findIndex(({id:id})=>layerId===id);const updateLayerInList=(state,layerId,attribute,newValue)=>{if(!layerId){return state}const{layerList:layerList}=state;const layerIdx=getLayerIndex(layerList,layerId);if(layerIdx===-1){return state}const updatedLayer={...layerList[layerIdx],[attribute]:newValue||newValue===""||newValue===0?newValue:!layerList[layerIdx][attribute]};const updatedList=[...layerList.slice(0,layerIdx),updatedLayer,...layerList.slice(layerIdx+1)];return{...state,layerList:updatedList}};const updateLayerSourceDescriptorProp=(state,layerId,propName,value)=>{const{layerList:layerList}=state;const layerIdx=getLayerIndex(layerList,layerId);const updatedLayer={...layerList[layerIdx],sourceDescriptor:{...layerList[layerIdx].sourceDescriptor,[propName]:value}};const updatedList=[...layerList.slice(0,layerIdx),updatedLayer,...layerList.slice(layerIdx+1)];return{...state,layerList:updatedList}};const DEFAULT_MAP_STATE={ready:false,mapInitError:null,goto:null,openTooltips:[],mapState:{zoom:null,center:null,scrollZoom:true,extent:null,mouseCoordinates:null,timeFilters:null,query:null,filters:[],refreshConfig:null,refreshTimerLastTriggeredAt:null,drawState:null},selectedLayerId:null,layerList:[],waitingForMapReadyLayerList:[],settings:getDefaultMapSettings(),__rollbackSettings:null};function map_map(state=DEFAULT_MAP_STATE,action){switch(action.type){case UPDATE_DRAW_STATE:return{...state,mapState:{...state.mapState,drawState:action.drawState}};case REMOVE_TRACKED_LAYER_STATE:return removeTrackedLayerState(state,action.layerId);case TRACK_CURRENT_LAYER_STATE:return map_trackCurrentLayerState(state,action.layerId);case ROLLBACK_TO_TRACKED_LAYER_STATE:return rollbackTrackedLayerState(state,action.layerId);case SET_OPEN_TOOLTIPS:return{...state,openTooltips:action.openTooltips};case SET_MOUSE_COORDINATES:return{...state,mapState:{...state.mapState,mouseCoordinates:{lat:action.lat,lon:action.lon}}};case CLEAR_MOUSE_COORDINATES:return{...state,mapState:{...state.mapState,mouseCoordinates:null}};case SET_GOTO:return{...state,goto:{center:action.center,bounds:action.bounds}};case CLEAR_GOTO:return{...state,goto:null};case SET_MAP_SETTINGS:return{...state,settings:{...getDefaultMapSettings(),...action.settings}};case ROLLBACK_MAP_SETTINGS:return state.__rollbackSettings?{...state,settings:{...state.__rollbackSettings},__rollbackSettings:null}:state;case TRACK_MAP_SETTINGS:return{...state,__rollbackSettings:state.settings};case UPDATE_MAP_SETTING:return{...state,settings:{...state.settings?state.settings:{},[action.settingKey]:action.settingValue}};case SET_LAYER_ERROR_STATUS:const{layerList:layerList}=state;const layerIdx=getLayerIndex(layerList,action.layerId);if(layerIdx===-1){return state}return{...state,layerList:[...layerList.slice(0,layerIdx),{...layerList[layerIdx],__isInErrorState:action.isInErrorState,__errorMessage:action.errorMessage},...layerList.slice(layerIdx+1)]};case UPDATE_SOURCE_DATA_REQUEST:return map_updateSourceDataRequest(state,action);case LAYER_DATA_LOAD_STARTED:return updateWithDataRequest(state,action);case LAYER_DATA_LOAD_ERROR:return updateWithDataResponse(state,action);case LAYER_DATA_LOAD_ENDED:return updateWithDataResponse(state,action);case MAP_READY:return{...state,ready:true};case MAP_DESTROYED:return{...state,ready:false};case MAP_EXTENT_CHANGED:const newMapState={center:action.mapState.center,zoom:action.mapState.zoom,extent:action.mapState.extent,buffer:action.mapState.buffer};return{...state,mapState:{...state.mapState,...newMapState}};case SET_QUERY:const{query:query,timeFilters:timeFilters,filters:filters,searchSessionId:searchSessionId,searchSessionMapBuffer:searchSessionMapBuffer}=action;return{...state,mapState:{...state.mapState,query:query,timeFilters:timeFilters,filters:filters,searchSessionId:searchSessionId,searchSessionMapBuffer:searchSessionMapBuffer}};case SET_REFRESH_CONFIG:const{isPaused:isPaused,interval:interval}=action;return{...state,mapState:{...state.mapState,refreshConfig:{isPaused:isPaused,interval:interval}}};case TRIGGER_REFRESH_TIMER:return{...state,mapState:{...state.mapState,refreshTimerLastTriggeredAt:(new Date).toISOString()}};case SET_SELECTED_LAYER:const selectedMatch=state.layerList.find(layer=>layer.id===action.selectedLayerId);return{...state,selectedLayerId:selectedMatch?action.selectedLayerId:null};case UPDATE_LAYER_ORDER:return{...state,layerList:action.newLayerOrder.map(layerNumber=>state.layerList[layerNumber])};case UPDATE_LAYER_PROP:return updateLayerInList(state,action.id,action.propName,action.newValue);case UPDATE_SOURCE_PROP:return updateLayerSourceDescriptorProp(state,action.layerId,action.propName,action.value);case SET_JOINS:const layerDescriptor=state.layerList.find(descriptor=>descriptor.id===action.layer.getId());if(layerDescriptor){const newLayerDescriptor={...layerDescriptor,joins:action.joins.slice()};const index=state.layerList.findIndex(descriptor=>descriptor.id===action.layer.getId());const newLayerList=state.layerList.slice();newLayerList[index]=newLayerDescriptor;return{...state,layerList:newLayerList}}return state;case ADD_LAYER:return{...state,layerList:[...state.layerList,action.layer]};case REMOVE_LAYER:return{...state,layerList:[...state.layerList.filter(({id:id})=>id!==action.id)]};case ADD_WAITING_FOR_MAP_READY_LAYER:return{...state,waitingForMapReadyLayerList:[...state.waitingForMapReadyLayerList,action.layer]};case CLEAR_WAITING_FOR_MAP_READY_LAYER_LIST:return{...state,waitingForMapReadyLayerList:[]};case SET_LAYER_VISIBILITY:return updateLayerInList(state,action.layerId,"visible",action.visibility);case UPDATE_LAYER_STYLE:const styleLayerId=action.layerId;return updateLayerInList(state,styleLayerId,"style",{...action.style});case SET_LAYER_STYLE_META:const{layerId:layerId,styleMeta:styleMeta}=action;const index=getLayerIndex(state.layerList,layerId);if(index===-1){return state}return updateLayerInList(state,layerId,"style",{...state.layerList[index].style,__styleMeta:styleMeta});case SET_SCROLL_ZOOM:return{...state,mapState:{...state.mapState,scrollZoom:action.scrollZoom}};case SET_MAP_INIT_ERROR:return{...state,mapInitError:action.errorMessage};case SET_WAITING_FOR_READY_HIDDEN_LAYERS:return{...state,waitingForMapReadyLayerList:state.waitingForMapReadyLayerList.map(layer=>({...layer,visible:!action.hiddenLayerIds.includes(layer.id)}))};default:return state}}function findDataRequest(layerDescriptor,dataRequestAction){if(!layerDescriptor.__dataRequests){return}return layerDescriptor.__dataRequests.find(dataRequest=>dataRequest.dataId===dataRequestAction.dataId)}function updateWithDataRequest(state,action){let dataRequest=getValidDataRequest(state,action,false);const layerRequestingData=findLayerById(state,action.layerId);if(!dataRequest){dataRequest={dataId:action.dataId};layerRequestingData.__dataRequests=[...layerRequestingData.__dataRequests?layerRequestingData.__dataRequests:[],dataRequest]}dataRequest.dataMetaAtStart=action.meta;dataRequest.dataRequestToken=action.requestToken;const layerList=[...state.layerList];return{...state,layerList:layerList}}function map_updateSourceDataRequest(state,action){const layerDescriptor=findLayerById(state,action.layerId);if(!layerDescriptor){return state}const dataRequest=layerDescriptor.__dataRequests.find(dataRequest=>dataRequest.dataId===constants["SOURCE_DATA_REQUEST_ID"]);if(!dataRequest){return state}dataRequest.data=action.newData;return resetDataRequest(state,action,dataRequest)}function updateWithDataResponse(state,action){const dataRequest=getValidDataRequest(state,action);if(!dataRequest){return state}dataRequest.data=action.data;dataRequest.dataMeta={...dataRequest.dataMetaAtStart,...action.meta};dataRequest.dataMetaAtStart=null;return resetDataRequest(state,action,dataRequest)}function resetDataRequest(state,action,request){const dataRequest=request||getValidDataRequest(state,action);if(!dataRequest){return state}const layer=findLayerById(state,action.layerId);const dataRequestIndex=layer.__dataRequests.indexOf(dataRequest);const newDataRequests=[...layer.__dataRequests];newDataRequests[dataRequestIndex]={...dataRequest,dataRequestToken:null};const layerIndex=state.layerList.indexOf(layer);const newLayerList=[...state.layerList];newLayerList[layerIndex]={...layer,__dataRequests:newDataRequests};return{...state,layerList:newLayerList}}function getValidDataRequest(state,action,checkRequestToken=true){const layer=findLayerById(state,action.layerId);if(!layer){return}const dataRequest=findDataRequest(layer,action);if(!dataRequest){return}if(checkRequestToken&&dataRequest.dataRequestToken&&dataRequest.dataRequestToken!==action.requestToken){return}return dataRequest}function findLayerById(state,id){return state.layerList.find(layer=>layer.id===id)}function map_trackCurrentLayerState(state,layerId){const layer=findLayerById(state,layerId);const layerCopy=copyPersistentState(layer);return updateLayerInList(state,layerId,TRACKED_LAYER_DESCRIPTOR,layerCopy)}function removeTrackedLayerState(state,layerId){const layer=findLayerById(state,layerId);if(!layer){return state}const copyLayer={...layer};delete copyLayer[TRACKED_LAYER_DESCRIPTOR];return{...state,layerList:replaceInLayerList(state.layerList,layerId,copyLayer)}}function rollbackTrackedLayerState(state,layerId){const layer=findLayerById(state,layerId);if(!layer){return state}const trackedLayerDescriptor=layer[TRACKED_LAYER_DESCRIPTOR];const rolledbackLayer={...layer,...trackedLayerDescriptor};delete rolledbackLayer[TRACKED_LAYER_DESCRIPTOR];return{...state,layerList:replaceInLayerList(state.layerList,layerId,rolledbackLayer)}}function replaceInLayerList(layerList,layerId,newLayerDescriptor){const layerIndex=getLayerIndex(layerList,layerId);const newLayerList=[...layerList];newLayerList[layerIndex]=newLayerDescriptor;return newLayerList}const DEFAULT_MAP_STORE_STATE={ui:{...DEFAULT_MAP_UI_STATE},map:{...DEFAULT_MAP_STATE},nonSerializableInstances:{}};function createMapStore(){const enhancers=[Object(redux["applyMiddleware"])(redux_thunk_lib_default.a)];const combinedReducers=Object(redux["combineReducers"])({map:map_map,ui:ui,nonSerializableInstances:nonSerializableInstances});const storeConfig={};const composeEnhancers=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||redux["compose"];return Object(redux["createStore"])(combinedReducers,storeConfig,composeEnhancers(...enhancers))}var savedObjects_public_=__webpack_require__(39);var migrations_references=__webpack_require__(19);let mapAttributeService=null;function getMapAttributeService(){if(mapAttributeService){return mapAttributeService}mapAttributeService=Object(kibana_services["j"])().getAttributeService(constants["MAP_SAVED_OBJECT_TYPE"],{saveMethod:async(attributes,savedObjectId)=>{const savedObjectClientReferences=attributes.references;const savedObjectClientAttributes={...attributes};delete savedObjectClientAttributes.references;const{attributes:updatedAttributes,references:references}=Object(migrations_references["a"])({attributes:savedObjectClientAttributes,references:savedObjectClientReferences});const savedObject=await(savedObjectId?Object(kibana_services["D"])().update(constants["MAP_SAVED_OBJECT_TYPE"],savedObjectId,updatedAttributes,{references:references}):Object(kibana_services["D"])().create(constants["MAP_SAVED_OBJECT_TYPE"],updatedAttributes,{references:references}));return{id:savedObject.id}},unwrapMethod:async savedObjectId=>{const savedObject=await Object(kibana_services["D"])().get(constants["MAP_SAVED_OBJECT_TYPE"],savedObjectId);if(savedObject.error){throw savedObject.error}const{attributes:attributes}=Object(migrations_references["b"])(savedObject);return{...attributes,references:savedObject.references}},checkForDuplicateTitle:props=>Object(savedObjects_public_["checkForDuplicateTitle"])({title:props.newTitle,copyOnSave:false,lastSavedTitle:"",getEsType:()=>constants["MAP_SAVED_OBJECT_TYPE"],getDisplayName:i18n_getters["d"]},props.isTitleDuplicateConfirmed,props.onTitleDuplicate,{savedObjectsClient:Object(kibana_services["D"])(),overlays:Object(kibana_services["f"])()})});return mapAttributeService}var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(40);const maps_list_view_savedObjectsTagging=Object(kibana_services["E"])();const maps_list_view_searchFilters=maps_list_view_savedObjectsTagging?[maps_list_view_savedObjectsTagging.ui.getSearchBarFilter({useName:true})]:[];const tableColumns=[{field:"title",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapListing.titleFieldTitle",{defaultMessage:"Title"}),sortable:true,render:(field,record)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:e=>{e.preventDefault();goToSpecifiedPath(Object(constants["getEditPath"])(record.id))},"data-test-subj":`mapListingTitleLink-${record.title.split(" ").join("-")}`},field)},{field:"description",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapListing.descriptionFieldTitle",{defaultMessage:"Description"}),dataType:"string",sortable:true}];if(maps_list_view_savedObjectsTagging){tableColumns.push(maps_list_view_savedObjectsTagging.ui.getTableColumnDefinition())}function navigateToNewMap(){const navigateToApp=Object(kibana_services["x"])();navigateToApp(constants["APP_ID"],{path:constants["MAP_PATH"]})}async function findMaps(searchQuery){let searchTerm=searchQuery;let tagReferences;if(maps_list_view_savedObjectsTagging){const parsed=maps_list_view_savedObjectsTagging.ui.parseSearchQuery(searchQuery,{useName:true});searchTerm=parsed.searchTerm;tagReferences=parsed.tagReferences}const resp=await Object(kibana_services["D"])().find({type:constants["MAP_SAVED_OBJECT_TYPE"],search:searchTerm?`${searchTerm}*`:undefined,perPage:Object(kibana_services["C"])().settings.getListingLimit(),page:1,searchFields:["title^3","description"],defaultSearchOperator:"AND",fields:["description","title"],hasReference:tagReferences});return{total:resp.total,hits:resp.savedObjects.map(savedObject=>({id:savedObject.id,title:savedObject.attributes.title,description:savedObject.attributes.description,references:savedObject.references}))}}async function deleteMaps(items){const deletions=items.map(item=>Object(kibana_services["D"])().delete(constants["MAP_SAVED_OBJECT_TYPE"],item.id));await Promise.all(deletions)}function MapsListView(){const isReadOnly=!Object(kibana_services["w"])().save;Object(kibana_services["d"])().docTitle.change(Object(i18n_getters["a"])());Object(kibana_services["d"])().setBreadcrumbs([{text:Object(i18n_getters["a"])()}]);return external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_["TableListView"],{headingId:"mapsListingPage",rowHeader:"title",createItem:isReadOnly?undefined:navigateToNewMap,findItems:findMaps,deleteItems:isReadOnly?undefined:deleteMaps,tableColumns:tableColumns,listingLimit:Object(kibana_services["C"])().settings.getListingLimit(),initialFilter:"",initialPageSize:Object(kibana_services["C"])().settings.getPerPage(),entityName:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapListing.entityName",{defaultMessage:"map"}),entityNamePlural:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapListing.entityNamePlural",{defaultMessage:"maps"}),tableListTitle:Object(i18n_getters["a"])(),toastNotifications:Object(kibana_services["K"])(),searchFilters:maps_list_view_searchFilters})}function load_list_and_render_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class load_list_and_render_LoadListAndRender extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args);load_list_and_render_defineProperty(this,"_isMounted",false);load_list_and_render_defineProperty(this,"state",{mapsLoaded:false,hasSavedMaps:null})}componentDidMount(){this._isMounted=true;this.props.stateTransfer.clearEditorState(constants["APP_ID"]);this._loadMapsList()}componentWillUnmount(){this._isMounted=false}async _loadMapsList(){try{const results=await Object(kibana_services["D"])().find({type:constants["MAP_SAVED_OBJECT_TYPE"],perPage:1,fields:["title"]});if(this._isMounted){this.setState({mapsLoaded:true,hasSavedMaps:!!results.savedObjects.length})}}catch(err){if(this._isMounted){this.setState({mapsLoaded:true,hasSavedMaps:false});Object(kibana_services["K"])().addDanger({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.mapListing.errorAttemptingToLoadSavedMaps",{defaultMessage:`Unable to load maps`}),text:`${err}`})}}}render(){const{mapsLoaded:mapsLoaded,hasSavedMaps:hasSavedMaps}=this.state;if(mapsLoaded){return hasSavedMaps?external_kbnSharedDeps_React_default.a.createElement(MapsListView,null):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Redirect"],{to:"/map"})}else{return null}}}let goToSpecifiedPath;let kbnUrlStateStorage;function setAppChrome(){if(!Object(kibana_services["w"])().save){Object(kibana_services["d"])().setBadge({text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.badge.readOnly.tooltip",{defaultMessage:"Unable to save maps"}),iconType:"glasses"})}const mapUrl=Object(kibana_services["h"])().links.maps.guide;Object(kibana_services["d"])().setHelpExtension({appName:"Maps",links:[{linkType:"documentation",href:`${mapUrl}`},{linkType:"github",title:"[Maps]",labels:["Team:Geo"]}]})}async function renderApp({element:element,history:history,onAppLeave:onAppLeave,setHeaderActionMenu:setHeaderActionMenu}){goToSpecifiedPath=path=>history.push(path);kbnUrlStateStorage=Object(kibanaUtils_public_["createKbnUrlStateStorage"])({useHash:false,history:history,...Object(kibanaUtils_public_["withNotifyOnErrors"])(Object(kibana_services["K"])())});const stateTransfer=Object(kibana_services["j"])().getStateTransfer();setAppChrome();function renderMapApp(routeProps){const{embeddableId:embeddableId,originatingApp:originatingApp,valueInput:valueInput}=stateTransfer.getIncomingEditorState(constants["APP_ID"])||{};let mapEmbeddableInput;if(routeProps.match.params.savedMapId){mapEmbeddableInput={savedObjectId:routeProps.match.params.savedMapId}}if(valueInput){mapEmbeddableInput=valueInput}return external_kbnSharedDeps_React_default.a.createElement(map_page_MapPage,{mapEmbeddableInput:mapEmbeddableInput,embeddableId:embeddableId,onAppLeave:onAppLeave,setHeaderActionMenu:setHeaderActionMenu,stateTransfer:stateTransfer,originatingApp:originatingApp})}const I18nContext=Object(kibana_services["e"])().Context;Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Router"],{history:history},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Switch"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:`/map/:savedMapId`,render:renderMapApp}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:`/map`,render:renderMapApp}),"// Redirect other routes to list, or if hash-containing, their non-hash equivalents",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:``,render:({location:{pathname:pathname,hash:hash}})=>{if(hash){const newPath=hash.substr(1);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Redirect"],{to:newPath})}else if(pathname==="/"||pathname===""){return external_kbnSharedDeps_React_default.a.createElement(load_list_and_render_LoadListAndRender,{stateTransfer:stateTransfer})}else{return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Redirect"],{to:"/"})}}})))),element);return()=>{Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(element)}}const unsavedChangesWarning=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.breadCrumbs.unsavedChangesWarning",{defaultMessage:"Leave Maps with unsaved work?"});const unsavedChangesTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.breadCrumbs.unsavedChangesTitle",{defaultMessage:"Unsaved changes"});function getBreadcrumbs({pageTitle:pageTitle,isByValue:isByValue,getHasUnsavedChanges:getHasUnsavedChanges,originatingApp:originatingApp,getAppNameFromId:getAppNameFromId}){const breadcrumbs=[];if(originatingApp&&getAppNameFromId){breadcrumbs.push({onClick:()=>{Object(kibana_services["x"])()(originatingApp)},text:getAppNameFromId(originatingApp)})}if(!isByValue){breadcrumbs.push({text:Object(i18n_getters["a"])(),onClick:async()=>{if(getHasUnsavedChanges()){const confirmed=await Object(kibana_services["f"])().openConfirm(unsavedChangesWarning,{title:unsavedChangesTitle,"data-test-subj":"appLeaveConfirmModal"});if(confirmed){goToSpecifiedPath("/")}}else{goToSpecifiedPath("/")}}})}breadcrumbs.push({text:pageTitle});return breadcrumbs}function createBasemapLayerDescriptor(){const tilemapSourceFromKibana=getKibanaTileMap();if(external_kbnSharedDeps_Lodash_default.a.get(tilemapSourceFromKibana,"url")){const layerDescriptor=tile_layer_TileLayer.createDescriptor({sourceDescriptor:kibana_tilemap_source_KibanaTilemapSource.createDescriptor()});return layerDescriptor}const isEmsEnabled=Object(kibana_services["i"])().isEMSEnabled();if(isEmsEnabled){const layerDescriptor=vector_tile_layer_VectorTileLayer.createDescriptor({sourceDescriptor:ems_tms_source_EMSTMSSource.createDescriptor({isAutoSelect:true})});return layerDescriptor}return null}function saved_map_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class saved_map_SavedMap{constructor({defaultLayers:defaultLayers=[],mapEmbeddableInput:mapEmbeddableInput,embeddableId:embeddableId,onSaveCallback:onSaveCallback,originatingApp:originatingApp,stateTransfer:stateTransfer}){saved_map_defineProperty(this,"_attributes",null);saved_map_defineProperty(this,"_defaultLayers",void 0);saved_map_defineProperty(this,"_embeddableId",void 0);saved_map_defineProperty(this,"_initialLayerListConfig",[]);saved_map_defineProperty(this,"_mapEmbeddableInput",void 0);saved_map_defineProperty(this,"_onSaveCallback",void 0);saved_map_defineProperty(this,"_originatingApp",void 0);saved_map_defineProperty(this,"_stateTransfer",void 0);saved_map_defineProperty(this,"_store",void 0);saved_map_defineProperty(this,"_tags",[]);saved_map_defineProperty(this,"hasUnsavedChanges",()=>{if(!this._attributes){throw new Error("Invalid usage, must await whenReady before calling hasUnsavedChanges")}const savedLayerList=this._attributes.layerListJSON?JSON.parse(this._attributes.layerListJSON):null;const layerListConfigOnly=getLayerListConfigOnly(this._store.getState());return!savedLayerList?!external_kbnSharedDeps_Lodash_default.a.isEqual(layerListConfigOnly,this._initialLayerListConfig):!external_kbnSharedDeps_Lodash_default.a.isEqual(JSON.parse(JSON.stringify(layerListConfigOnly)),savedLayerList)});saved_map_defineProperty(this,"getAppNameFromId",appId=>this._getStateTransfer().getAppNameFromId(appId));this._defaultLayers=defaultLayers;this._mapEmbeddableInput=mapEmbeddableInput;this._embeddableId=embeddableId;this._onSaveCallback=onSaveCallback;this._originatingApp=originatingApp;this._stateTransfer=stateTransfer;this._store=createMapStore()}getStore(){return this._store}async whenReady(){var _this$_attributes,_this$_attributes2,_this$_attributes3,_this$_attributes4;await Object(licensed_features["h"])();if(!this._mapEmbeddableInput){this._attributes={title:"",description:""}}else{const doc=await getMapAttributeService().unwrapAttributes(this._mapEmbeddableInput);const{references:references,...savedObjectAttributes}=doc;this._attributes=savedObjectAttributes;const savedObjectsTagging=Object(kibana_services["E"])();if(savedObjectsTagging&&references&&references.length){this._tags=savedObjectsTagging.ui.getTagIdsFromReferences(references)}}if(this._mapEmbeddableInput&&this._mapEmbeddableInput.mapSettings!==undefined){this._store.dispatch(setMapSettings(this._mapEmbeddableInput.mapSettings))}else if((_this$_attributes=this._attributes)!==null&&_this$_attributes!==void 0&&_this$_attributes.mapStateJSON){const mapState=JSON.parse(this._attributes.mapStateJSON);if(mapState.settings){this._store.dispatch(setMapSettings(mapState.settings))}}let isLayerTOCOpen=DEFAULT_IS_LAYER_TOC_OPEN;if(this._mapEmbeddableInput&&this._mapEmbeddableInput.isLayerTOCOpen!==undefined){isLayerTOCOpen=this._mapEmbeddableInput.isLayerTOCOpen}else if((_this$_attributes2=this._attributes)!==null&&_this$_attributes2!==void 0&&_this$_attributes2.uiStateJSON){const uiState=JSON.parse(this._attributes.uiStateJSON);if("isLayerTOCOpen"in uiState){isLayerTOCOpen=uiState.isLayerTOCOpen}}this._store.dispatch(setIsLayerTOCOpen(isLayerTOCOpen));let openTOCDetails=[];if(this._mapEmbeddableInput&&this._mapEmbeddableInput.openTOCDetails!==undefined){openTOCDetails=this._mapEmbeddableInput.openTOCDetails}else if((_this$_attributes3=this._attributes)!==null&&_this$_attributes3!==void 0&&_this$_attributes3.uiStateJSON){const uiState=JSON.parse(this._attributes.uiStateJSON);if("openTOCDetails"in uiState){openTOCDetails=uiState.openTOCDetails}}this._store.dispatch(setOpenTOCDetails(openTOCDetails));if(this._mapEmbeddableInput&&this._mapEmbeddableInput.mapCenter!==undefined){this._store.dispatch(setGotoWithCenter({lat:this._mapEmbeddableInput.mapCenter.lat,lon:this._mapEmbeddableInput.mapCenter.lon,zoom:this._mapEmbeddableInput.mapCenter.zoom}))}else if((_this$_attributes4=this._attributes)!==null&&_this$_attributes4!==void 0&&_this$_attributes4.mapStateJSON){const mapState=JSON.parse(this._attributes.mapStateJSON);this._store.dispatch(setGotoWithCenter({lat:mapState.center.lat,lon:mapState.center.lon,zoom:mapState.zoom}))}let layerList=[];if(this._attributes.layerListJSON){layerList=JSON.parse(this._attributes.layerListJSON)}else{const basemapLayerDescriptor=createBasemapLayerDescriptor();if(basemapLayerDescriptor){layerList.push(basemapLayerDescriptor)}if(this._defaultLayers.length){layerList.push(...this._defaultLayers)}}this._store.dispatch(replaceLayerList(layerList));if(this._mapEmbeddableInput&&this._mapEmbeddableInput.hiddenLayers!==undefined){this._store.dispatch(setHiddenLayers(this._mapEmbeddableInput.hiddenLayers))}this._initialLayerListConfig=copyPersistentState(layerList)}_getStateTransfer(){if(!this._stateTransfer){throw new Error("stateTransfer not provided in constructor")}return this._stateTransfer}_getPageTitle(){if(!this._mapEmbeddableInput){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.breadcrumbsCreate",{defaultMessage:"Create"})}return this.isByValue()?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.breadcrumbsEditByValue",{defaultMessage:"Edit map"}):this._attributes.title}setBreadcrumbs(){if(!this._attributes){throw new Error("Invalid usage, must await whenReady before calling hasUnsavedChanges")}const breadcrumbs=getBreadcrumbs({pageTitle:this._getPageTitle(),isByValue:this.isByValue(),getHasUnsavedChanges:this.hasUnsavedChanges,originatingApp:this._originatingApp,getAppNameFromId:this._getStateTransfer().getAppNameFromId});Object(kibana_services["d"])().setBreadcrumbs(breadcrumbs)}getSavedObjectId(){return this._mapEmbeddableInput&&"savedObjectId"in this._mapEmbeddableInput?this._mapEmbeddableInput.savedObjectId:undefined}getOriginatingApp(){return this._originatingApp}getTags(){return this._tags}hasSaveAndReturnConfig(){const hasOriginatingApp=!!this._originatingApp;const isNewMap=!this.getSavedObjectId();return Object(kibana_services["r"])()?hasOriginatingApp:!isNewMap&&hasOriginatingApp}getTitle(){if(!this._attributes){throw new Error("Invalid usage, must await getTitle before calling getAttributes")}return this._attributes.title!==undefined?this._attributes.title:""}getAttributes(){if(!this._attributes){throw new Error("Invalid usage, must await whenReady before calling getAttributes")}return this._attributes}isByValue(){const hasSavedObjectId=!!this.getSavedObjectId();return Object(kibana_services["r"])()&&!!this._originatingApp&&!hasSavedObjectId}async save({newDescription:newDescription,newTitle:newTitle,newCopyOnSave:newCopyOnSave,returnToOrigin:returnToOrigin,newTags:newTags,saveByReference:saveByReference,dashboardId:dashboardId}){if(!this._attributes){throw new Error("Invalid usage, must await whenReady before calling save")}const prevTitle=this._attributes.title;const prevDescription=this._attributes.description;const prevTags=this._tags;this._attributes.title=newTitle;this._attributes.description=newDescription;if(newTags){this._tags=newTags}this._syncAttributesWithStore();let updatedMapEmbeddableInput;try{const savedObjectsTagging=Object(kibana_services["E"])();const attributes=savedObjectsTagging&&newTags?{...this._attributes,references:savedObjectsTagging.ui.updateTagsReferences([],newTags)}:this._attributes;updatedMapEmbeddableInput=await getMapAttributeService().wrapAttributes(attributes,saveByReference,newCopyOnSave?undefined:this._mapEmbeddableInput)}catch(e){this._attributes.title=prevTitle;this._attributes.description=prevDescription;this._tags=prevTags;return}if(returnToOrigin){if(!this._originatingApp){Object(kibana_services["K"])().addDanger({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.topNav.saveErrorTitle",{defaultMessage:`Error saving '{title}'`,values:{title:newTitle}}),text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.topNav.saveErrorText",{defaultMessage:"Unable to return to app without an originating app"})});return}await this._getStateTransfer().navigateToWithEmbeddablePackage(this._originatingApp,{state:{embeddableId:newCopyOnSave?undefined:this._embeddableId,type:constants["MAP_SAVED_OBJECT_TYPE"],input:updatedMapEmbeddableInput}});return}else if(dashboardId){await this._getStateTransfer().navigateToWithEmbeddablePackage("dashboards",{state:{type:constants["MAP_SAVED_OBJECT_TYPE"],input:updatedMapEmbeddableInput},path:dashboardId==="new"?"#/create":`#/view/${dashboardId}`});return}this._mapEmbeddableInput=updatedMapEmbeddableInput;this._originatingApp=undefined;this._getStateTransfer().clearEditorState(constants["APP_ID"]);Object(kibana_services["K"])().addSuccess({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.topNav.saveSuccessMessage",{defaultMessage:`Saved '{title}'`,values:{title:newTitle}})});Object(kibana_services["d"])().docTitle.change(newTitle);this.setBreadcrumbs();goToSpecifiedPath(`/${constants["MAP_PATH"]}/${this.getSavedObjectId()}${window.location.hash}`);if(this._onSaveCallback){this._onSaveCallback()}return}_syncAttributesWithStore(){const state=this._store.getState();const layerList=getLayerListRaw(state);const layerListConfigOnly=copyPersistentState(layerList);this._attributes.layerListJSON=JSON.stringify(layerListConfigOnly);this._attributes.mapStateJSON=JSON.stringify({zoom:getMapZoom(state),center:getMapCenter(state),timeFilters:getTimeFilters(state),refreshConfig:getRefreshConfig(state),query:external_kbnSharedDeps_Lodash_default.a.omit(getQuery(state),"queryLastTriggeredAt"),filters:getFilters(state),settings:getMapSettings(state)});this._attributes.uiStateJSON=JSON.stringify({isLayerTOCOpen:getIsLayerTOCOpen(state),openTOCDetails:getOpenTOCDetails(state)})}}function getInitialLayersFromUrlParam(){const locationSplit=window.location.href.split("?");if(locationSplit.length<=1){return[]}const mapAppParams=new URLSearchParams(locationSplit[1]);if(!mapAppParams.has(constants["INITIAL_LAYERS_KEY"])){return[]}try{let mapInitLayers=mapAppParams.get(constants["INITIAL_LAYERS_KEY"]);if(mapInitLayers[mapInitLayers.length-1]==="#"){mapInitLayers=mapInitLayers.substr(0,mapInitLayers.length-1)}return rison_default.a.decode_array(mapInitLayers)}catch(e){Object(kibana_services["K"])().addWarning({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.initialLayers.unableToParseTitle",{defaultMessage:`Initial layers not added to map`}),text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.initialLayers.unableToParseMessage",{defaultMessage:`Unable to parse contents of 'initialLayers' parameter. Error: {errorMsg}`,values:{errorMsg:e.message}})});return[]}}function getInitialQuery({mapStateJSON:mapStateJSON,appState:appState={}}){if(appState.query){return appState.query}if(mapStateJSON){const mapState=JSON.parse(mapStateJSON);if(mapState.query){return mapState.query}}return Object(kibana_services["g"])().query.queryString.getDefaultQuery()}function getInitialRefreshConfig({mapStateJSON:mapStateJSON,globalState:globalState={}}){const uiSettings=Object(kibana_services["M"])();if(mapStateJSON){const mapState=JSON.parse(mapStateJSON);if(mapState.refreshConfig){return mapState.refreshConfig}}const defaultRefreshConfig=uiSettings.get(data_public_["UI_SETTINGS"].TIMEPICKER_REFRESH_INTERVAL_DEFAULTS);const refreshInterval={...defaultRefreshConfig,...globalState.refreshInterval};return{isPaused:refreshInterval.pause,interval:refreshInterval.value}}function getInitialTimeFilters({mapStateJSON:mapStateJSON,globalState:globalState}){if(mapStateJSON){const mapState=JSON.parse(mapStateJSON);if(mapState.timeFilters){return mapState.timeFilters}}const defaultTime=Object(kibana_services["M"])().get("timepicker:timeDefaults");return{...defaultTime,...globalState.time}}function startGlobalStateSyncing(){const{stop:stop}=Object(data_public_["syncQueryStateWithUrl"])(Object(kibana_services["g"])().query,kbnUrlStateStorage);return stop}function getGlobalState(){return kbnUrlStateStorage.get("_g")}function updateGlobalState(newState,flushUrlState=false){const globalState=getGlobalState();kbnUrlStateStorage.set("_g",{...globalState,...newState});if(flushUrlState){kbnUrlStateStorage.kbnUrlControls.flush(true)}}var external_kbnSharedDeps_Rxjs_=__webpack_require__(45);function app_state_manager_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class app_state_manager_AppStateManager{constructor(){app_state_manager_defineProperty(this,"_query",null);app_state_manager_defineProperty(this,"_savedQueryId","");app_state_manager_defineProperty(this,"_filters",[]);app_state_manager_defineProperty(this,"_updated$",new external_kbnSharedDeps_Rxjs_["Subject"])}setQueryAndFilters({query:query,savedQueryId:savedQueryId,filters:filters}){if(query&&this._query!==query){this._query=query}if(savedQueryId&&this._savedQueryId!==savedQueryId){this._savedQueryId=savedQueryId}if(filters&&this._filters!==filters){this._filters=filters}this._updated$.next()}getQuery(){return this._query}getFilters(){return this._filters}getAppState(){return{query:this._query,savedQueryId:this._savedQueryId,filters:this._filters}}}var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(46);function startAppStateSyncing(appStateManager){const{query:query}=Object(kibana_services["g"])();query.filterManager.setAppFilters([]);const stateContainer={get:()=>({query:appStateManager.getQuery(),filters:appStateManager.getFilters()}),set:state=>state&&appStateManager.setQueryAndFilters({query:state.query,filters:state.filters}),state$:appStateManager._updated$.pipe(Object(external_kbnSharedDeps_RxjsOperators_["map"])(()=>({query:appStateManager.getQuery(),filters:appStateManager.getFilters()})))};const stopSyncingQueryAppStateWithStateContainer=Object(data_public_["connectToQueryState"])(query,stateContainer,{filters:data_public_["esFilters"].FilterStateStore.APP_STATE,query:true});const{start:startSyncingAppStateWithUrl,stop:stopSyncingAppStateWithUrl}=Object(kibanaUtils_public_["syncState"])({storageKey:"_a",stateStorage:kbnUrlStateStorage,stateContainer:stateContainer});const initialAppState={...stateContainer.get(),...kbnUrlStateStorage.get("_a")};stateContainer.set(initialAppState);kbnUrlStateStorage.set("_a",initialAppState);startSyncingAppStateWithUrl();return()=>{stopSyncingQueryAppStateWithStateContainer();stopSyncingAppStateWithUrl()}}var presentationUtil_public_=__webpack_require__(47);function top_nav_config_extends(){top_nav_config_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return top_nav_config_extends.apply(this,arguments)}function getTopNavConfig({savedMap:savedMap,isOpenSettingsDisabled:isOpenSettingsDisabled,isSaveDisabled:isSaveDisabled,enableFullScreen:enableFullScreen,openMapSettings:openMapSettings,inspectorAdapters:inspectorAdapters}){const topNavConfigs=[];topNavConfigs.push({id:"mapSettings",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.topNav.openSettingsButtonLabel",{defaultMessage:`Map settings`}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.topNav.openSettingsDescription",{defaultMessage:`Open map settings`}),testId:"openSettingsButton",disableButton(){return isOpenSettingsDisabled},run(){openMapSettings()}},{id:"inspect",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.topNav.openInspectorButtonLabel",{defaultMessage:`inspect`}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.topNav.openInspectorDescription",{defaultMessage:`Open Inspector`}),testId:"openInspectorButton",run(){Object(kibana_services["q"])().open(inspectorAdapters,{})}},{id:"full-screen",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.topNav.fullScreenButtonLabel",{defaultMessage:`full screen`}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.topNav.fullScreenDescription",{defaultMessage:`full screen`}),testId:"mapsFullScreenMode",run(){Object(kibana_services["d"])().setIsVisible(false);enableFullScreen()}});if(Object(kibana_services["w"])().save){const hasSaveAndReturnConfig=savedMap.hasSaveAndReturnConfig();const mapDescription=savedMap.getAttributes().description?savedMap.getAttributes().description:"";const saveAndReturnButtonLabel=savedMap.isByValue()?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.topNav.saveToMapsButtonLabel",{defaultMessage:"Save to maps"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.topNav.saveAsButtonLabel",{defaultMessage:"Save as"});topNavConfigs.push({id:"save",iconType:hasSaveAndReturnConfig?undefined:"save",label:hasSaveAndReturnConfig?saveAndReturnButtonLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.topNav.saveMapButtonLabel",{defaultMessage:`save`}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.topNav.saveMapDescription",{defaultMessage:`Save map`}),emphasize:!hasSaveAndReturnConfig,testId:"mapSaveButton",disableButton(){return isSaveDisabled},tooltip(){if(isSaveDisabled){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.topNav.saveMapDisabledButtonTooltip",{defaultMessage:"Confirm or Cancel your layer changes before saving"})}},run:()=>{let selectedTags=savedMap.getTags();function onTagsSelected(newTags){selectedTags=newTags}const savedObjectsTagging=Object(kibana_services["E"])();const tagSelector=savedObjectsTagging?external_kbnSharedDeps_React_default.a.createElement(savedObjectsTagging.ui.components.SavedObjectSaveModalTagSelector,{initialSelection:selectedTags,onTagsSelected:onTagsSelected}):undefined;const saveModalProps={onSave:async props=>{try{await Object(savedObjects_public_["checkForDuplicateTitle"])({id:props.newCopyOnSave?undefined:savedMap.getSavedObjectId(),title:props.newTitle,copyOnSave:props.newCopyOnSave,lastSavedTitle:savedMap.getSavedObjectId()?savedMap.getTitle():"",getEsType:()=>constants["MAP_SAVED_OBJECT_TYPE"],getDisplayName:i18n_getters["d"]},props.isTitleDuplicateConfirmed,props.onTitleDuplicate,{savedObjectsClient:Object(kibana_services["D"])(),overlays:Object(kibana_services["f"])()})}catch(e){return{}}await savedMap.save({...props,newTags:selectedTags,saveByReference:Boolean(props.addToLibrary)});return{id:"id"}},onClose:()=>{},documentInfo:{description:mapDescription,id:savedMap.getSavedObjectId(),title:savedMap.getTitle()},objectType:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.topNav.saveModalType",{defaultMessage:"map"})};const PresentationUtilContext=Object(kibana_services["z"])();const saveModal=savedMap.getOriginatingApp()||!Object(kibana_services["r"])()?external_kbnSharedDeps_React_default.a.createElement(savedObjects_public_["SavedObjectSaveModalOrigin"],top_nav_config_extends({},saveModalProps,{originatingApp:savedMap.getOriginatingApp(),getAppNameFromId:savedMap.getAppNameFromId,options:tagSelector})):external_kbnSharedDeps_React_default.a.createElement(presentationUtil_public_["SavedObjectSaveModalDashboard"],top_nav_config_extends({},saveModalProps,{canSaveByReference:true,tagOptions:tagSelector}));Object(savedObjects_public_["showSaveModal"])(saveModal,Object(kibana_services["e"])().Context,PresentationUtilContext)}});if(hasSaveAndReturnConfig){topNavConfigs.push({id:"saveAndReturn",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.topNav.saveAndReturnButtonLabel",{defaultMessage:"Save and return"}),emphasize:true,iconType:"checkInCircleFilled",run:()=>{savedMap.save({newTitle:savedMap.getTitle(),newDescription:mapDescription,newCopyOnSave:false,isTitleDuplicateConfirmed:false,returnToOrigin:true,onTitleDuplicate:()=>{},saveByReference:!savedMap.isByValue()})},testId:"mapSaveAndReturnButton"})}}return topNavConfigs}function map_app_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class map_app_MapApp extends external_kbnSharedDeps_React_default.a.Component{constructor(props){super(props);map_app_defineProperty(this,"_globalSyncUnsubscribe",null);map_app_defineProperty(this,"_globalSyncChangeMonitorSubscription",null);map_app_defineProperty(this,"_appSyncUnsubscribe",null);map_app_defineProperty(this,"_appStateManager",new app_state_manager_AppStateManager);map_app_defineProperty(this,"_prevIndexPatternIds",null);map_app_defineProperty(this,"_isMounted",false);map_app_defineProperty(this,"_updateFromGlobalState",({changes:changes,state:globalState})=>{if(!this.state.initialized||!changes||!globalState){return}this._onQueryChange({time:globalState.time})});map_app_defineProperty(this,"_onQueryChange",({filters:filters,query:query,time:time,forceRefresh:forceRefresh=false})=>{const{filterManager:filterManager}=Object(kibana_services["g"])().query;if(filters){filterManager.setFilters(filters)}this.props.dispatchSetQuery({forceRefresh:forceRefresh,filters:filterManager.getFilters(),query:query,timeFilters:time});this._appStateManager.setQueryAndFilters({filters:filterManager.getAppFilters(),query:query});const updatedGlobalState={filters:filterManager.getGlobalFilters()};if(time){updatedGlobalState.time=time}updateGlobalState(updatedGlobalState,!this.state.initialized)});map_app_defineProperty(this,"_onFiltersChange",filters=>{this._onQueryChange({filters:filters})});map_app_defineProperty(this,"_updateStateFromSavedQuery",savedQuery=>{this.setState({savedQuery:{...savedQuery}});this._appStateManager.setQueryAndFilters({savedQueryId:savedQuery.id});const{filterManager:filterManager}=Object(kibana_services["g"])().query;const savedQueryFilters=savedQuery.attributes.filters||[];const globalFilters=filterManager.getGlobalFilters();const allFilters=[...savedQueryFilters,...globalFilters];const refreshInterval=external_kbnSharedDeps_Lodash_default.a.get(savedQuery,"attributes.timefilter.refreshInterval");if(refreshInterval){this._onRefreshConfigChange({isPaused:refreshInterval.pause,interval:refreshInterval.value})}this._onQueryChange({filters:allFilters,query:savedQuery.attributes.query,time:savedQuery.attributes.timefilter})});map_app_defineProperty(this,"_addFilter",async newFilters=>{newFilters.forEach(filter=>{filter.$state={store:data_public_["esFilters"].FilterStateStore.APP_STATE}});this._onFiltersChange([...this.props.filters,...newFilters])});this.state={indexPatterns:[],initialized:false}}componentDidMount(){this._isMounted=true;this._globalSyncUnsubscribe=startGlobalStateSyncing();this._appSyncUnsubscribe=startAppStateSyncing(this._appStateManager);this._globalSyncChangeMonitorSubscription=Object(kibana_services["g"])().query.state$.subscribe(this._updateFromGlobalState);this._initMap();this.props.onAppLeave(actions=>{if(this.props.savedMap.hasUnsavedChanges()){return actions.confirm(unsavedChangesWarning,unsavedChangesTitle)}return actions.default()})}componentDidUpdate(){this._updateIndexPatterns()}componentWillUnmount(){this._isMounted=false;if(this._globalSyncUnsubscribe){this._globalSyncUnsubscribe()}if(this._appSyncUnsubscribe){this._appSyncUnsubscribe()}if(this._globalSyncChangeMonitorSubscription){this._globalSyncChangeMonitorSubscription.unsubscribe()}this.props.onAppLeave(actions=>actions.default())}async _updateIndexPatterns(){const{nextIndexPatternIds:nextIndexPatternIds}=this.props;if(external_kbnSharedDeps_Lodash_default.a.isEqual(nextIndexPatternIds,this._prevIndexPatternIds)){return}this._prevIndexPatternIds=nextIndexPatternIds;const indexPatterns=await getIndexPatternsFromIds(nextIndexPatternIds);if(this._isMounted){this.setState({indexPatterns:indexPatterns})}}_initMapAndLayerSettings(mapSavedObjectAttributes){const globalState=getGlobalState();let savedObjectFilters=[];if(mapSavedObjectAttributes.mapStateJSON){const mapState=JSON.parse(mapSavedObjectAttributes.mapStateJSON);if(mapState.filters){savedObjectFilters=mapState.filters}}const appFilters=this._appStateManager.getFilters()||[];const query=getInitialQuery({mapStateJSON:mapSavedObjectAttributes.mapStateJSON,appState:this._appStateManager.getAppState()});if(query){Object(kibana_services["g"])().query.queryString.setQuery(query)}this._onQueryChange({filters:[...external_kbnSharedDeps_Lodash_default.a.get(globalState,"filters",[]),...appFilters,...savedObjectFilters],query:query,time:getInitialTimeFilters({mapStateJSON:mapSavedObjectAttributes.mapStateJSON,globalState:globalState})});this._onRefreshConfigChange(getInitialRefreshConfig({mapStateJSON:mapSavedObjectAttributes.mapStateJSON,globalState:globalState}))}_onRefreshConfigChange(mapRefreshConfig){this.props.setRefreshConfig(mapRefreshConfig);updateGlobalState({refreshInterval:{pause:mapRefreshConfig.isPaused,value:mapRefreshConfig.interval}},!this.state.initialized)}async _initMap(){try{await this.props.savedMap.whenReady()}catch(err){if(this._isMounted){Object(kibana_services["K"])().addWarning({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.maps.loadMap.errorAttemptingToLoadSavedMap",{defaultMessage:`Unable to load map`}),text:`${err.message}`});goToSpecifiedPath("/")}return}if(!this._isMounted){return}this.props.savedMap.setBreadcrumbs();Object(kibana_services["d"])().docTitle.change(this.props.savedMap.getTitle());const savedObjectId=this.props.savedMap.getSavedObjectId();if(savedObjectId){Object(kibana_services["d"])().recentlyAccessed.add(Object(constants["getExistingMapPath"])(savedObjectId),this.props.savedMap.getTitle(),savedObjectId)}this._initMapAndLayerSettings(this.props.savedMap.getAttributes());this.setState({initialized:true})}_renderTopNav(){if(this.props.isFullScreen){return null}const topNavConfig=getTopNavConfig({savedMap:this.props.savedMap,isOpenSettingsDisabled:this.props.isOpenSettingsDisabled,isSaveDisabled:this.props.isSaveDisabled,enableFullScreen:this.props.enableFullScreen,openMapSettings:this.props.openMapSettings,inspectorAdapters:this.props.inspectorAdapters});const{TopNavMenu:TopNavMenu}=Object(kibana_services["y"])().ui;return external_kbnSharedDeps_React_default.a.createElement(TopNavMenu,{setMenuMountPoint:this.props.setHeaderActionMenu,appName:"maps",config:topNavConfig,indexPatterns:this.state.indexPatterns,filters:this.props.filters,query:this.props.query,onQuerySubmit:({dateRange:dateRange,query:query})=>{this._onQueryChange({query:query,time:dateRange,forceRefresh:true})},onFiltersUpdated:this._onFiltersChange,dateRangeFrom:this.props.timeFilters.from,dateRangeTo:this.props.timeFilters.to,isRefreshPaused:this.props.refreshConfig.isPaused,refreshInterval:this.props.refreshConfig.interval,onRefreshChange:({isPaused:isPaused,refreshInterval:refreshInterval})=>{this._onRefreshConfigChange({isPaused:isPaused,interval:refreshInterval})},showSearchBar:true,showFilterBar:true,showDatePicker:true,showSaveQuery:!!Object(kibana_services["w"])().saveQuery,savedQuery:this.state.savedQuery,onSaved:this._updateStateFromSavedQuery,onSavedQueryUpdated:this._updateStateFromSavedQuery,onClearSavedQuery:()=>{const{filterManager:filterManager,queryString:queryString}=Object(kibana_services["g"])().query;this.setState({savedQuery:undefined});this._appStateManager.setQueryAndFilters({savedQueryId:""});this._onQueryChange({filters:filterManager.getGlobalFilters(),query:queryString.getDefaultQuery()})}})}render(){if(!this.state.initialized){return null}return external_kbnSharedDeps_React_default.a.createElement("div",{id:"maps-plugin",className:this.props.isFullScreen?"mapFullScreen":""},this._renderTopNav(),external_kbnSharedDeps_React_default.a.createElement("h1",{className:"euiScreenReaderOnly"},`screenTitle placeholder`),external_kbnSharedDeps_React_default.a.createElement("div",{id:"react-maps-root"},external_kbnSharedDeps_React_default.a.createElement(map_container_connected,{addFilters:this._addFilter,title:this.props.savedMap.getAttributes().title,description:this.props.savedMap.getAttributes().description})))}}function map_app_mapStateToProps(state){return{isFullScreen:getIsFullScreen(state),isOpenSettingsDisabled:getFlyoutDisplay(state)!==FLYOUT_STATE.NONE,isSaveDisabled:hasDirtyState(state),inspectorAdapters:getInspectorAdapters(state),nextIndexPatternIds:getQueryableUniqueIndexPatternIds(state),flyoutDisplay:getFlyoutDisplay(state),refreshConfig:getRefreshConfig(state),filters:getFilters(state),query:getQuery(state),timeFilters:getTimeFilters(state)}}function map_app_mapDispatchToProps(dispatch){return{dispatchSetQuery:({forceRefresh:forceRefresh,filters:filters,query:query,timeFilters:timeFilters})=>{dispatch(setQuery({filters:filters,query:query,timeFilters:timeFilters,forceRefresh:forceRefresh}))},setRefreshConfig:refreshConfig=>dispatch(setRefreshConfig(refreshConfig)),enableFullScreen:()=>dispatch(ui_actions_enableFullScreen()),openMapSettings:()=>dispatch(ui_actions_openMapSettings())}}const connectedComponent=Object(lib["connect"])(map_app_mapStateToProps,map_app_mapDispatchToProps)(map_app_MapApp);function map_page_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class map_page_MapPage extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);map_page_defineProperty(this,"_isMounted",false);map_page_defineProperty(this,"updateSaveCounter",()=>{if(this._isMounted){this.setState(prevState=>({saveCounter:prevState.saveCounter+1}))}});this.state={savedMap:new saved_map_SavedMap({defaultLayers:getInitialLayersFromUrlParam(),mapEmbeddableInput:props.mapEmbeddableInput,embeddableId:props.embeddableId,originatingApp:props.originatingApp,stateTransfer:props.stateTransfer,onSaveCallback:this.updateSaveCounter}),saveCounter:0}}componentDidMount(){this._isMounted=true}componentWillUnmount(){this._isMounted=false}render(){return external_kbnSharedDeps_React_default.a.createElement(lib["Provider"],{store:this.state.savedMap.getStore()},external_kbnSharedDeps_React_default.a.createElement(connectedComponent,{savedMap:this.state.savedMap,onAppLeave:this.props.onAppLeave,setHeaderActionMenu:this.props.setHeaderActionMenu,saveCounter:this.state.saveCounter}))}}var types=__webpack_require__(117);function map_embeddable_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getIsRestore(searchSessionId){if(!searchSessionId){return false}const searchSessionOptions=Object(kibana_services["F"])().session.getSearchOptions(searchSessionId);return searchSessionOptions?searchSessionOptions.isRestore:false}class map_embeddable_MapEmbeddable extends public_["Embeddable"]{constructor(config,initialInput,parent){super(initialInput,{editApp:constants["APP_ID"],editable:config.editable,indexPatterns:[]},parent);map_embeddable_defineProperty(this,"type",constants["MAP_SAVED_OBJECT_TYPE"]);map_embeddable_defineProperty(this,"_savedMap",void 0);map_embeddable_defineProperty(this,"_renderTooltipContent",void 0);map_embeddable_defineProperty(this,"_subscription",void 0);map_embeddable_defineProperty(this,"_prevIsRestore",false);map_embeddable_defineProperty(this,"_prevTimeRange",void 0);map_embeddable_defineProperty(this,"_prevQuery",void 0);map_embeddable_defineProperty(this,"_prevRefreshConfig",void 0);map_embeddable_defineProperty(this,"_prevFilters",void 0);map_embeddable_defineProperty(this,"_prevSyncColors",void 0);map_embeddable_defineProperty(this,"_prevSearchSessionId",void 0);map_embeddable_defineProperty(this,"_domNode",void 0);map_embeddable_defineProperty(this,"_unsubscribeFromStore",void 0);map_embeddable_defineProperty(this,"_isInitialized",false);map_embeddable_defineProperty(this,"setRenderTooltipContent",renderTooltipContent=>{this._renderTooltipContent=renderTooltipContent});map_embeddable_defineProperty(this,"setEventHandlers",eventHandlers=>{this._savedMap.getStore().dispatch(setEventHandlers(eventHandlers))});map_embeddable_defineProperty(this,"onSingleValueTrigger",(actionId,key,value)=>{const action=Object(kibana_services["L"])().getAction(actionId);if(!action){throw new Error("Unable to apply action, could not locate action")}const executeContext={...this.getActionContext(),data:{data:toValueClickDataFormat(key,value)}};action.execute(executeContext)});map_embeddable_defineProperty(this,"addFilters",async(filters,actionId=data_public_["ACTION_GLOBAL_APPLY_FILTER"])=>{const executeContext={...this.getActionContext(),filters:filters};const action=Object(kibana_services["L"])().getAction(actionId);if(!action){throw new Error("Unable to apply filter, could not locate action")}action.execute(executeContext)});map_embeddable_defineProperty(this,"getFilterActions",async()=>{const filterActions=await Object(kibana_services["L"])().getTriggerCompatibleActions(data_public_["APPLY_FILTER_TRIGGER"],{embeddable:this,filters:[]});const valueClickActions=await Object(kibana_services["L"])().getTriggerCompatibleActions(public_["VALUE_CLICK_TRIGGER"],{embeddable:this,data:{data:toValueClickDataFormat("anyfield","anyvalue")}});return[...filterActions,...valueClickActions.filter(isUrlDrilldown)]});map_embeddable_defineProperty(this,"getActionContext",()=>{const trigger=Object(kibana_services["L"])().getTrigger(data_public_["APPLY_FILTER_TRIGGER"]);if(!trigger){throw new Error("Unable to get context, could not locate trigger")}return{embeddable:this,trigger:trigger}});this._savedMap=new saved_map_SavedMap({mapEmbeddableInput:initialInput});this._initializeSaveMap();this._subscription=this.getUpdated$().subscribe(()=>this.onUpdate())}async _initializeSaveMap(){try{await this._savedMap.whenReady()}catch(e){this.onFatalError(e);return}this._initializeStore();try{await this._initializeOutput()}catch(e){this.onFatalError(e);return}this._isInitialized=true;if(this._domNode){this.render(this._domNode)}}_initializeStore(){this._dispatchSetChartsPaletteServiceGetColor(this.input.syncColors);const store=this._savedMap.getStore();store.dispatch(setReadOnly(true));store.dispatch(disableScrollZoom());this._dispatchSetQuery({forceRefresh:false});if(this.input.refreshConfig){this._dispatchSetRefreshConfig(this.input.refreshConfig)}this._unsubscribeFromStore=this._savedMap.getStore().subscribe(()=>{this._handleStoreChanges()})}async _initializeOutput(){var _this$_savedMap$getAt;const savedMapTitle=(_this$_savedMap$getAt=this._savedMap.getAttributes())!==null&&_this$_savedMap$getAt!==void 0&&_this$_savedMap$getAt.title?this._savedMap.getAttributes().title:"";const input=this.getInput();const title=input.hidePanelTitles?"":input.title||savedMapTitle;const savedObjectId=input.savedObjectId;this.updateOutput({...this.getOutput(),defaultTitle:savedMapTitle,title:title,editPath:`/${constants["MAP_PATH"]}/${savedObjectId}`,editUrl:Object(kibana_services["n"])().basePath.prepend(Object(constants["getExistingMapPath"])(savedObjectId)),indexPatterns:await this._getIndexPatterns()})}inputIsRefType(input){return getMapAttributeService().inputIsRefType(input)}async getInputAsRefType(){const input=getMapAttributeService().getExplicitInputFromEmbeddable(this);return getMapAttributeService().getInputAsRefType(input,{showSaveModal:true,saveModalTitle:this.getTitle()})}async getInputAsValueType(){const input=getMapAttributeService().getExplicitInputFromEmbeddable(this);return getMapAttributeService().getInputAsValueType(input)}getDescription(){return this._isInitialized?this._savedMap.getAttributes().description:""}supportedTriggers(){return[data_public_["APPLY_FILTER_TRIGGER"],public_["VALUE_CLICK_TRIGGER"]]}getInspectorAdapters(){return getInspectorAdapters(this._savedMap.getStore().getState())}onUpdate(){if(!external_kbnSharedDeps_Lodash_default.a.isEqual(this.input.timeRange,this._prevTimeRange)||!external_kbnSharedDeps_Lodash_default.a.isEqual(this.input.query,this._prevQuery)||!data_public_["esFilters"].onlyDisabledFiltersChanged(this.input.filters,this._prevFilters)||this.input.searchSessionId!==this._prevSearchSessionId){this._dispatchSetQuery({forceRefresh:false})}if(this.input.refreshConfig&&!external_kbnSharedDeps_Lodash_default.a.isEqual(this.input.refreshConfig,this._prevRefreshConfig)){this._dispatchSetRefreshConfig(this.input.refreshConfig)}if(this.input.syncColors!==this._prevSyncColors){this._dispatchSetChartsPaletteServiceGetColor(this.input.syncColors)}const isRestore=getIsRestore(this.input.searchSessionId);if(isRestore!==this._prevIsRestore){this._prevIsRestore=isRestore;this._savedMap.getStore().dispatch(setMapSettings({disableInteractive:isRestore,hideToolbarOverlay:isRestore}))}}_dispatchSetQuery({forceRefresh:forceRefresh}){this._prevTimeRange=this.input.timeRange;this._prevQuery=this.input.query;this._prevFilters=this.input.filters;this._prevSearchSessionId=this.input.searchSessionId;const enabledFilters=this.input.filters?this.input.filters.filter(filter=>!filter.meta.disabled):[];this._savedMap.getStore().dispatch(setQuery({filters:enabledFilters,query:this.input.query,timeFilters:this.input.timeRange,forceRefresh:forceRefresh,searchSessionId:this.input.searchSessionId,searchSessionMapBuffer:getIsRestore(this.input.searchSessionId)?this.input.mapBuffer:undefined}))}_dispatchSetRefreshConfig(refreshConfig){this._prevRefreshConfig=refreshConfig;this._savedMap.getStore().dispatch(setRefreshConfig({isPaused:refreshConfig.pause,interval:refreshConfig.value}))}async _dispatchSetChartsPaletteServiceGetColor(syncColors){this._prevSyncColors=syncColors;const chartsPaletteServiceGetColor=syncColors?await Object(kibana_services["b"])():null;if(syncColors!==this._prevSyncColors){return}this._savedMap.getStore().dispatch(setChartsPaletteServiceGetColor(chartsPaletteServiceGetColor))}render(domNode){this._domNode=domNode;if(!this._isInitialized){return}const I18nContext=Object(kibana_services["e"])().Context;Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(lib["Provider"],{store:this._savedMap.getStore()},external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(map_container_connected,{onSingleValueTrigger:this.onSingleValueTrigger,addFilters:this.input.hideFilterActions?null:this.addFilters,getFilterActions:this.getFilterActions,getActionContext:this.getActionContext,renderTooltipContent:this._renderTooltipContent,title:this.getTitle(),description:this.getDescription()}))),this._domNode)}setLayerList(layerList){this._savedMap.getStore().dispatch(replaceLayerList(layerList));this._getIndexPatterns().then(indexPatterns=>{this.updateOutput({...this.getOutput(),indexPatterns:indexPatterns})})}async _getIndexPatterns(){const queryableIndexPatternIds=getQueryableUniqueIndexPatternIds(this._savedMap.getStore().getState());return await getIndexPatternsFromIds(queryableIndexPatternIds)}destroy(){super.destroy();if(this._unsubscribeFromStore){this._unsubscribeFromStore()}if(this._domNode){Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(this._domNode)}if(this._subscription){this._subscription.unsubscribe()}}reload(){this._dispatchSetQuery({forceRefresh:true})}_handleStoreChanges(){const center=getMapCenter(this._savedMap.getStore().getState());const zoom=getMapZoom(this._savedMap.getStore().getState());const mapCenter=this.input.mapCenter||undefined;if(!mapCenter||mapCenter.lat!==center.lat||mapCenter.lon!==center.lon||mapCenter.zoom!==zoom){this.updateInput({mapCenter:{lat:center.lat,lon:center.lon,zoom:zoom},mapBuffer:getMapBuffer(this._savedMap.getStore().getState())})}const isLayerTOCOpen=getIsLayerTOCOpen(this._savedMap.getStore().getState());if(this.input.isLayerTOCOpen!==isLayerTOCOpen){this.updateInput({isLayerTOCOpen:isLayerTOCOpen})}const openTOCDetails=getOpenTOCDetails(this._savedMap.getStore().getState());if(!external_kbnSharedDeps_Lodash_default.a.isEqual(this.input.openTOCDetails,openTOCDetails)){this.updateInput({openTOCDetails:openTOCDetails})}const hiddenLayerIds=getHiddenLayerIds(this._savedMap.getStore().getState());if(!external_kbnSharedDeps_Lodash_default.a.isEqual(this.input.hiddenLayers,hiddenLayerIds)){this.updateInput({hiddenLayers:hiddenLayerIds})}}}const create_tile_map_layer_descriptor_defaultDynamicProperties=getDefaultDynamicProperties();function isHeatmap(mapType){return mapType.toLowerCase()==="heatmap"}function create_tile_map_layer_descriptor_getGeoGridRequestType(mapType){if(isHeatmap(mapType)){return constants["RENDER_AS"].HEATMAP}if(mapType.toLowerCase()==="shaded geohash grid"){return constants["RENDER_AS"].GRID}return constants["RENDER_AS"].POINT}function create_tile_map_layer_descriptor_createAggDescriptor(mapType,metricAgg,metricFieldName){const aggTypeKey=Object.keys(constants["AGG_TYPE"]).find(key=>constants["AGG_TYPE"][key]===metricAgg);const aggType=aggTypeKey?constants["AGG_TYPE"][aggTypeKey]:undefined;if(!aggType||aggType===constants["AGG_TYPE"].COUNT||!metricFieldName||isHeatmap(mapType)&&!isMetricCountable(aggType)){return{type:constants["AGG_TYPE"].COUNT}}return aggType===constants["AGG_TYPE"].PERCENTILE?{type:aggType,field:metricFieldName,percentile:constants["DEFAULT_PERCENTILE"]}:{type:aggType,field:metricFieldName}}function createTileMapLayerDescriptor({label:label,mapType:mapType,colorSchema:colorSchema,indexPatternId:indexPatternId,geoFieldName:geoFieldName,metricAgg:metricAgg,metricFieldName:metricFieldName}){if(!indexPatternId||!geoFieldName){return null}const metricsDescriptor=create_tile_map_layer_descriptor_createAggDescriptor(mapType,metricAgg,metricFieldName);const geoGridSourceDescriptor=es_geo_grid_source_ESGeoGridSource.createDescriptor({indexPatternId:indexPatternId,geoField:geoFieldName,metrics:[metricsDescriptor],requestType:create_tile_map_layer_descriptor_getGeoGridRequestType(mapType),resolution:constants["GRID_RESOLUTION"].MOST_FINE});if(isHeatmap(mapType)){return heatmap_layer_HeatmapLayer.createDescriptor({label:label,sourceDescriptor:geoGridSourceDescriptor})}const metricSourceKey=getSourceAggKey({aggType:metricsDescriptor.type,aggFieldName:"field"in metricsDescriptor?metricsDescriptor.field:""});const metricStyleField={name:metricSourceKey,origin:constants["FIELD_ORIGIN"].SOURCE};const colorPallette=NUMERICAL_COLOR_PALETTES.find(pallette=>pallette.value.toLowerCase()===colorSchema.toLowerCase());const styleProperties={[constants["VECTOR_STYLES"].FILL_COLOR]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{...create_tile_map_layer_descriptor_defaultDynamicProperties[constants["VECTOR_STYLES"].FILL_COLOR].options,field:metricStyleField,color:colorPallette?colorPallette.value:"Yellow to Red",type:constants["COLOR_MAP_TYPE"].ORDINAL,fieldMetaOptions:{...create_tile_map_layer_descriptor_defaultDynamicProperties[constants["VECTOR_STYLES"].FILL_COLOR].options.fieldMetaOptions,isEnabled:false}}},[constants["VECTOR_STYLES"].LINE_COLOR]:{type:constants["STYLE_TYPE"].STATIC,options:{color:"#3d3d3d"}}};if(mapType.toLowerCase()==="scaled circle markers"){styleProperties[constants["VECTOR_STYLES"].ICON_SIZE]={type:constants["STYLE_TYPE"].DYNAMIC,options:{...create_tile_map_layer_descriptor_defaultDynamicProperties[constants["VECTOR_STYLES"].ICON_SIZE].options,maxSize:18,field:metricStyleField,fieldMetaOptions:{...create_tile_map_layer_descriptor_defaultDynamicProperties[constants["VECTOR_STYLES"].ICON_SIZE].options.fieldMetaOptions,isEnabled:false}}}}return vector_layer_VectorLayer.createDescriptor({label:label,sourceDescriptor:geoGridSourceDescriptor,style:vector_style_VectorStyle.createDescriptor(styleProperties)})}const create_region_map_layer_descriptor_defaultDynamicProperties=getDefaultDynamicProperties();function create_region_map_layer_descriptor_createAggDescriptor(metricAgg,metricFieldName){const aggTypeKey=Object.keys(constants["AGG_TYPE"]).find(key=>constants["AGG_TYPE"][key]===metricAgg);const aggType=aggTypeKey?constants["AGG_TYPE"][aggTypeKey]:undefined;if(!aggType||aggType===constants["AGG_TYPE"].COUNT||!metricFieldName){return{type:constants["AGG_TYPE"].COUNT}}else if(aggType===constants["AGG_TYPE"].PERCENTILE){return{type:aggType,field:metricFieldName,percentile:50}}else{return{type:aggType,field:metricFieldName}}}function createRegionMapLayerDescriptor({label:label,emsLayerId:emsLayerId,leftFieldName:leftFieldName,termsFieldName:termsFieldName,termsSize:termsSize,colorSchema:colorSchema,indexPatternId:indexPatternId,indexPatternTitle:indexPatternTitle,metricAgg:metricAgg,metricFieldName:metricFieldName}){if(!indexPatternId||!emsLayerId||!leftFieldName||!termsFieldName){return null}const metricsDescriptor=create_region_map_layer_descriptor_createAggDescriptor(metricAgg,metricFieldName);const joinId=v4_default()();const joinKey=getJoinAggKey({aggType:metricsDescriptor.type,aggFieldName:"field"in metricsDescriptor?metricsDescriptor.field:"",rightSourceId:joinId});const colorPallette=NUMERICAL_COLOR_PALETTES.find(pallette=>pallette.value.toLowerCase()===colorSchema.toLowerCase());const termSourceDescriptor={type:constants["SOURCE_TYPES"].ES_TERM_SOURCE,id:joinId,indexPatternId:indexPatternId,indexPatternTitle:indexPatternTitle?indexPatternTitle:indexPatternId,term:termsFieldName,metrics:[metricsDescriptor],applyGlobalQuery:true,applyGlobalTime:true};if(termsSize!==undefined){termSourceDescriptor.size=termsSize}return vector_layer_VectorLayer.createDescriptor({label:label,joins:[{leftField:leftFieldName,right:termSourceDescriptor}],sourceDescriptor:ems_file_source_EMSFileSource.createDescriptor({id:emsLayerId,tooltipProperties:["name",leftFieldName]}),style:vector_style_VectorStyle.createDescriptor({[constants["VECTOR_STYLES"].FILL_COLOR]:{type:constants["STYLE_TYPE"].DYNAMIC,options:{...create_region_map_layer_descriptor_defaultDynamicProperties[constants["VECTOR_STYLES"].FILL_COLOR].options,field:{name:joinKey,origin:constants["FIELD_ORIGIN"].JOIN},color:colorPallette?colorPallette.value:"Yellow to Red",type:constants["COLOR_MAP_TYPE"].ORDINAL,fieldMetaOptions:{...create_region_map_layer_descriptor_defaultDynamicProperties[constants["VECTOR_STYLES"].FILL_COLOR].options.fieldMetaOptions,isEnabled:false}}}})})}}])]);