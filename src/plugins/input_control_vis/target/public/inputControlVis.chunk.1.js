(window["inputControlVis_bundle_jsonpfunction"]=window["inputControlVis_bundle_jsonpfunction"]||[]).push([[1],[,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&btoa){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item,useSourceMap);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list};function cssWithMappingToString(item,useSourceMap){var content=item[1]||"";var cssMapping=item[3];if(!cssMapping){return content}if(useSourceMap&&typeof btoa==="function"){var sourceMapping=toComment(cssMapping);var sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));var data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CONTROL_TYPES}));__webpack_require__.d(__webpack_exports__,"g",(function(){return setControl}));__webpack_require__.d(__webpack_exports__,"b",(function(){return addControl}));__webpack_require__.d(__webpack_exports__,"d",(function(){return moveControl}));__webpack_require__.d(__webpack_exports__,"f",(function(){return removeControl}));__webpack_require__.d(__webpack_exports__,"e",(function(){return newControl}));__webpack_require__.d(__webpack_exports__,"c",(function(){return getTitle}));const CONTROL_TYPES={LIST:"list",RANGE:"range"};const setControl=(controls,controlIndex,control)=>[...controls.slice(0,controlIndex),control,...controls.slice(controlIndex+1)];const addControl=(controls,control)=>[...controls,control];const moveControl=(controls,controlIndex,direction)=>{let newIndex;if(direction>=0){newIndex=controlIndex+1}else{newIndex=controlIndex-1}if(newIndex<0){return[...controls.slice(1),controls[0]]}else if(newIndex>=controls.length){const lastItemIndex=controls.length-1;return[controls[lastItemIndex],...controls.slice(0,lastItemIndex)]}else{const swapped=controls.slice();const temp=swapped[newIndex];swapped[newIndex]=swapped[controlIndex];swapped[controlIndex]=temp;return swapped}};const removeControl=(controls,controlIndex)=>[...controls.slice(0,controlIndex),...controls.slice(controlIndex+1)];const getDefaultOptions=type=>{const defaultOptions={};switch(type){case CONTROL_TYPES.RANGE:defaultOptions.decimalPlaces=0;defaultOptions.step=1;break;case CONTROL_TYPES.LIST:defaultOptions.type="terms";defaultOptions.multiselect=true;defaultOptions.dynamicOptions=true;defaultOptions.size=5;defaultOptions.order="desc";break}return defaultOptions};const newControl=type=>({id:(new Date).getTime().toString(),indexPattern:"",fieldName:"",parent:"",label:"",type:type,options:getDefaultOptions(type)});const getTitle=(controlParams,controlIndex)=>{let title=`${controlParams.type}: ${controlIndex}`;if(controlParams.label){title=`${controlParams.label}`}else if(controlParams.fieldName){title=`${controlParams.fieldName}`}return title}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getLineageMap}));__webpack_require__.d(__webpack_exports__,"b",(function(){return getParentCandidates}));var external_kbnSharedDeps_Lodash_=__webpack_require__(7);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);function getLineageMap(controlParamsList){function getControlParamsById(controlId){return controlParamsList.find(controlParams=>controlParams.id===controlId)}const lineageMap=new Map;controlParamsList.forEach(rootControlParams=>{const lineage=[rootControlParams.id];const getLineage=controlParams=>{if(external_kbnSharedDeps_Lodash_default.a.has(controlParams,"parent")&&controlParams.parent!==""&&!lineage.includes(controlParams.parent)){lineage.push(controlParams.parent);const parent=getControlParamsById(controlParams.parent);if(parent){getLineage(parent)}}};getLineage(rootControlParams);lineageMap.set(rootControlParams.id,lineage)});return lineageMap}var editor_utils=__webpack_require__(15);function getParentCandidates(controlParamsList,controlId,lineageMap){return controlParamsList.filter(controlParams=>{if(!controlParams.indexPattern||!controlParams.fieldName){return false}const lineage=lineageMap.get(controlParams.id);if(lineage!==null&&lineage!==void 0&&lineage.includes(controlId)){return false}return true}).map((controlParams,controlIndex)=>({value:controlParams.id,text:Object(editor_utils["c"])(controlParams,controlIndex)}))}},,,,,,,,,,function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(27);case"v7light":return __webpack_require__(29);case"v8dark":return __webpack_require__(31);case"v8light":return __webpack_require__(33)}},function(module,exports,__webpack_require__){var api=__webpack_require__(13);var content=__webpack_require__(28);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(14);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".icvControlEditor__panel {\n  z-index: 1;\n  margin-bottom: 16px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(13);var content=__webpack_require__(30);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(14);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".icvControlEditor__panel {\n  z-index: 1;\n  margin-bottom: 16px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(13);var content=__webpack_require__(32);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(14);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".icvControlEditor__panel {\n  z-index: 1;\n  margin-bottom: 16px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(13);var content=__webpack_require__(34);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(14);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".icvControlEditor__panel {\n  z-index: 1;\n  margin-bottom: 16px; }\n",""]);module.exports=exports},,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",(function(){return controls_tab_ControlsTab}));var external_kbnSharedDeps_React_=__webpack_require__(1);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(9);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(8);function IndexPatternSelectFormRowUi(props){const{controlIndex:controlIndex,indexPatternId:indexPatternId,intl:intl,onChange:onChange}=props;const selectId=`indexPatternSelect-${controlIndex}`;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:selectId,label:intl.formatMessage({id:"inputControl.editor.indexPatternSelect.patternLabel",defaultMessage:"Index Pattern"})},external_kbnSharedDeps_React_default.a.createElement(props.IndexPatternSelect,{placeholder:intl.formatMessage({id:"inputControl.editor.indexPatternSelect.patternPlaceholder",defaultMessage:"Select index pattern..."}),indexPatternId:indexPatternId,onChange:onChange,"data-test-subj":selectId}))}const IndexPatternSelectFormRow=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(IndexPatternSelectFormRowUi);var external_kbnSharedDeps_Lodash_=__webpack_require__(7);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class field_select_FieldSelectUi extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);_defineProperty(this,"hasUnmounted",void 0);_defineProperty(this,"loadFields",indexPatternId=>{this.setState({isLoading:true,fields:[],indexPatternId:indexPatternId},this.debouncedLoad.bind(null,indexPatternId))});_defineProperty(this,"debouncedLoad",external_kbnSharedDeps_Lodash_default.a.debounce(async indexPatternId=>{var _this$props$filterFie;if(!indexPatternId||indexPatternId.length===0){return}let indexPattern;try{indexPattern=await this.props.getIndexPattern(indexPatternId)}catch(err){return}if(this.hasUnmounted){return}if(indexPattern.id!==this.state.indexPatternId){return}const fieldsByTypeMap=new Map;const fields=[];indexPattern.fields.filter((_this$props$filterFie=this.props.filterField)!==null&&_this$props$filterFie!==void 0?_this$props$filterFie:()=>true).forEach(field=>{var _fieldsByTypeMap$get;const fieldsList=(_fieldsByTypeMap$get=fieldsByTypeMap.get(field.type))!==null&&_fieldsByTypeMap$get!==void 0?_fieldsByTypeMap$get:[];fieldsList.push(field.name);fieldsByTypeMap.set(field.type,fieldsList)});fieldsByTypeMap.forEach((fieldsList,fieldType)=>{fields.push({label:fieldType,options:fieldsList.sort().map(fieldName=>({value:fieldName,label:fieldName}))})});fields.sort((a,b)=>{if(a.label<b.label)return-1;if(a.label>b.label)return 1;return 0});this.setState({isLoading:false,fields:fields})},300));_defineProperty(this,"onChange",selectedOptions=>{this.props.onChange(external_kbnSharedDeps_Lodash_default.a.get(selectedOptions,"0.value"))});this.hasUnmounted=false;this.state={isLoading:false,fields:[],indexPatternId:props.indexPatternId}}componentWillUnmount(){this.hasUnmounted=true}componentDidMount(){this.loadFields(this.state.indexPatternId)}UNSAFE_componentWillReceiveProps(nextProps){if(this.props.indexPatternId!==nextProps.indexPatternId){var _nextProps$indexPatte;this.loadFields((_nextProps$indexPatte=nextProps.indexPatternId)!==null&&_nextProps$indexPatte!==void 0?_nextProps$indexPatte:"")}}render(){if(!this.props.indexPatternId||this.props.indexPatternId.trim().length===0){return null}const selectId=`fieldSelect-${this.props.controlIndex}`;const selectedOptions=[];const{intl:intl}=this.props;if(this.props.fieldName){selectedOptions.push({value:this.props.fieldName,label:this.props.fieldName})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:selectId,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.fieldSelect.fieldLabel",defaultMessage:"Field"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:intl.formatMessage({id:"inputControl.editor.fieldSelect.selectFieldPlaceholder",defaultMessage:"Select field..."}),singleSelection:true,isLoading:this.state.isLoading,options:this.state.fields,selectedOptions:selectedOptions,onChange:this.onChange,"data-test-subj":selectId}))}}const FieldSelect=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(field_select_FieldSelectUi);function range_control_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function filterField(field){return field.type==="number"}class range_control_editor_RangeControlEditor extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);range_control_editor_defineProperty(this,"state",{IndexPatternSelect:null})}componentDidMount(){this.getIndexPatternSelect()}async getIndexPatternSelect(){const[,{data:data}]=await this.props.deps.core.getStartServices();this.setState({IndexPatternSelect:data.ui.IndexPatternSelect})}render(){const stepSizeId=`stepSize-${this.props.controlIndex}`;const decimalPlacesId=`decimalPlaces-${this.props.controlIndex}`;if(this.state.IndexPatternSelect===null){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(IndexPatternSelectFormRow,{indexPatternId:this.props.controlParams.indexPattern,onChange:this.props.handleIndexPatternChange,controlIndex:this.props.controlIndex,IndexPatternSelect:this.state.IndexPatternSelect}),external_kbnSharedDeps_React_default.a.createElement(FieldSelect,{fieldName:this.props.controlParams.fieldName,indexPatternId:this.props.controlParams.indexPattern,filterField:filterField,onChange:this.props.handleFieldNameChange,getIndexPattern:this.props.getIndexPattern,controlIndex:this.props.controlIndex}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:stepSizeId,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.rangeControl.stepSizeLabel",defaultMessage:"Step Size"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{value:this.props.controlParams.options.step,onChange:event=>{this.props.handleOptionsChange(this.props.controlIndex,"step",event.target.valueAsNumber)},"data-test-subj":`rangeControlSizeInput${this.props.controlIndex}`})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:decimalPlacesId,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.rangeControl.decimalPlacesLabel",defaultMessage:"Decimal Places"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{min:0,value:this.props.controlParams.options.decimalPlaces,onChange:event=>{this.props.handleOptionsChange(this.props.controlIndex,"decimalPlaces",event.target.valueAsNumber)},"data-test-subj":`rangeControlDecimalPlacesInput${this.props.controlIndex}`})))}}function list_control_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function list_control_editor_filterField(field){return Boolean(field.aggregatable)&&["number","boolean","date","ip","string"].includes(field.type)}class list_control_editor_ListControlEditor extends external_kbnSharedDeps_React_["PureComponent"]{constructor(...args){super(...args);list_control_editor_defineProperty(this,"isMounted",false);list_control_editor_defineProperty(this,"state",{isLoadingFieldType:true,isStringField:false,prevFieldName:this.props.controlParams.fieldName,IndexPatternSelect:null});list_control_editor_defineProperty(this,"componentDidUpdate",()=>{if(this.state.isLoadingFieldType){this.loadIsStringField()}});list_control_editor_defineProperty(this,"loadIsStringField",async()=>{if(!this.props.controlParams.indexPattern||!this.props.controlParams.fieldName){this.setState({isLoadingFieldType:false});return}let indexPattern;try{indexPattern=await this.props.getIndexPattern(this.props.controlParams.indexPattern)}catch(err){return}if(!this.isMounted){return}const field=indexPattern.fields.find(({name:name})=>name===this.props.controlParams.fieldName);if(!field){return}this.setState({isLoadingFieldType:false,isStringField:field.type==="string"})});list_control_editor_defineProperty(this,"renderOptions",()=>{var _this$props$controlPa,_this$props$controlPa2;if(this.state.isLoadingFieldType||!this.props.controlParams.fieldName){return}const options=[];if(this.props.parentCandidates&&this.props.parentCandidates.length>0){const parentCandidatesOptions=[{value:"",text:""},...this.props.parentCandidates];options.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:`parentSelect-${this.props.controlIndex}`,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.listControl.parentLabel",defaultMessage:"Parent control"}),helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.listControl.parentDescription",defaultMessage:"Options are based on the value of parent control. Disabled if parent is not set."}),key:"parentSelect"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{options:parentCandidatesOptions,value:this.props.controlParams.parent,onChange:event=>{this.props.handleParentChange(this.props.controlIndex,event.target.value)}})))}options.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:`multiselect-${this.props.controlIndex}`,key:"multiselect",helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.listControl.multiselectDescription",defaultMessage:"Allow multiple selection"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.listControl.multiselectLabel",defaultMessage:"Multiselect"}),checked:(_this$props$controlPa=this.props.controlParams.options.multiselect)!==null&&_this$props$controlPa!==void 0?_this$props$controlPa:true,onChange:event=>{this.props.handleOptionsChange(this.props.controlIndex,"multiselect",event.target.checked)},"data-test-subj":"listControlMultiselectInput"})));const dynamicOptionsHelpText=this.state.isStringField?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.listControl.dynamicOptions.updateDescription",defaultMessage:"Update options in response to user input"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.listControl.dynamicOptions.stringFieldDescription",defaultMessage:'Only available for "string" fields'});options.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:`dynamicOptions-${this.props.controlIndex}`,key:"dynamicOptions",helpText:dynamicOptionsHelpText},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.listControl.dynamicOptionsLabel",defaultMessage:"Dynamic Options"}),checked:(_this$props$controlPa2=this.props.controlParams.options.dynamicOptions)!==null&&_this$props$controlPa2!==void 0?_this$props$controlPa2:false,onChange:event=>{this.props.handleOptionsChange(this.props.controlIndex,"dynamicOptions",event.target.checked)},disabled:this.state.isStringField?false:true,"data-test-subj":"listControlDynamicOptionsSwitch"})));if(!this.props.controlParams.options.dynamicOptions||!this.state.isStringField){options.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:`size-${this.props.controlIndex}`,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.listControl.sizeLabel",defaultMessage:"Size"}),key:"size",helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.listControl.sizeDescription",defaultMessage:"Number of options"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{min:1,value:this.props.controlParams.options.size,onChange:event=>{this.props.handleOptionsChange(this.props.controlIndex,"size",event.target.valueAsNumber)},"data-test-subj":"listControlSizeInput"})))}return options})}componentDidMount(){this.isMounted=true;this.loadIsStringField();this.getIndexPatternSelect()}componentWillUnmount(){this.isMounted=false}async getIndexPatternSelect(){const[,{data:data}]=await this.props.deps.core.getStartServices();this.setState({IndexPatternSelect:data.ui.IndexPatternSelect})}render(){if(this.state.IndexPatternSelect===null){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(IndexPatternSelectFormRow,{indexPatternId:this.props.controlParams.indexPattern,onChange:this.props.handleIndexPatternChange,controlIndex:this.props.controlIndex,IndexPatternSelect:this.state.IndexPatternSelect}),external_kbnSharedDeps_React_default.a.createElement(FieldSelect,{fieldName:this.props.controlParams.fieldName,indexPatternId:this.props.controlParams.indexPattern,filterField:list_control_editor_filterField,onChange:this.props.handleFieldNameChange,getIndexPattern:this.props.getIndexPattern,controlIndex:this.props.controlIndex}),this.renderOptions())}}list_control_editor_defineProperty(list_control_editor_ListControlEditor,"getDerivedStateFromProps",(nextProps,prevState)=>{const isNewFieldName=prevState.prevFieldName!==nextProps.controlParams.fieldName;if(!prevState.isLoadingFieldType&&isNewFieldName){return{prevFieldName:nextProps.controlParams.fieldName,isLoadingFieldType:true}}return null});var editor_utils=__webpack_require__(15);var control_editor=__webpack_require__(26);function control_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class control_editor_ControlEditorUi extends external_kbnSharedDeps_React_["PureComponent"]{constructor(...args){super(...args);control_editor_defineProperty(this,"changeLabel",event=>{this.props.handleLabelChange(this.props.controlIndex,event.target.value)});control_editor_defineProperty(this,"removeControl",()=>{this.props.handleRemoveControl(this.props.controlIndex)});control_editor_defineProperty(this,"moveUpControl",()=>{this.props.moveControl(this.props.controlIndex,-1)});control_editor_defineProperty(this,"moveDownControl",()=>{this.props.moveControl(this.props.controlIndex,1)});control_editor_defineProperty(this,"changeIndexPattern",indexPatternId=>{this.props.handleIndexPatternChange(this.props.controlIndex,indexPatternId)});control_editor_defineProperty(this,"changeFieldName",fieldName=>{this.props.handleFieldNameChange(this.props.controlIndex,fieldName)})}renderEditor(){let controlEditor=null;switch(this.props.controlParams.type){case editor_utils["a"].LIST:controlEditor=external_kbnSharedDeps_React_default.a.createElement(list_control_editor_ListControlEditor,{controlIndex:this.props.controlIndex,controlParams:this.props.controlParams,handleIndexPatternChange:this.changeIndexPattern,handleFieldNameChange:this.changeFieldName,getIndexPattern:this.props.getIndexPattern,handleOptionsChange:this.props.handleOptionsChange,parentCandidates:this.props.parentCandidates,handleParentChange:this.props.handleParentChange,deps:this.props.deps});break;case editor_utils["a"].RANGE:controlEditor=external_kbnSharedDeps_React_default.a.createElement(range_control_editor_RangeControlEditor,{controlIndex:this.props.controlIndex,controlParams:this.props.controlParams,handleIndexPatternChange:this.changeIndexPattern,handleFieldNameChange:this.changeFieldName,getIndexPattern:this.props.getIndexPattern,handleOptionsChange:this.props.handleOptionsChange,deps:this.props.deps});break;default:throw new Error(`Unhandled control editor type ${this.props.controlParams.type}`)}const labelId=`controlLabel${this.props.controlIndex}`;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:labelId,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.controlEditor.controlLabel",defaultMessage:"Control Label"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{value:this.props.controlParams.label,onChange:this.changeLabel})),controlEditor)}renderEditorButtons(){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"aria-label":this.props.intl.formatMessage({id:"inputControl.editor.controlEditor.moveControlUpAriaLabel",defaultMessage:"Move control up"}),color:"primary",onClick:this.moveUpControl,iconType:"sortUp","data-test-subj":`inputControlEditorMoveUpControl${this.props.controlIndex}`}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"aria-label":this.props.intl.formatMessage({id:"inputControl.editor.controlEditor.moveControlDownAriaLabel",defaultMessage:"Move control down"}),color:"primary",onClick:this.moveDownControl,iconType:"sortDown","data-test-subj":`inputControlEditorMoveDownControl${this.props.controlIndex}`}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"aria-label":this.props.intl.formatMessage({id:"inputControl.editor.controlEditor.removeControlAriaLabel",defaultMessage:"Remove control"}),color:"danger",onClick:this.removeControl,iconType:"cross","data-test-subj":`inputControlEditorRemoveControl${this.props.controlIndex}`}))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{grow:false,className:"icvControlEditor__panel"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:"controlEditorAccordion",buttonContent:Object(editor_utils["c"])(this.props.controlParams,this.props.controlIndex),extraAction:this.renderEditorButtons(),initialIsOpen:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),this.renderEditor()))}}const ControlEditor=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(control_editor_ControlEditorUi);var lineage=__webpack_require__(16);function controls_tab_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class controls_tab_ControlsTab extends external_kbnSharedDeps_React_["PureComponent"]{constructor(...args){super(...args);controls_tab_defineProperty(this,"state",{type:editor_utils["a"].LIST});controls_tab_defineProperty(this,"getIndexPattern",async indexPatternId=>{const[,startDeps]=await this.props.deps.core.getStartServices();return await startDeps.data.indexPatterns.get(indexPatternId)});controls_tab_defineProperty(this,"onChange",value=>this.props.setValue("controls",value));controls_tab_defineProperty(this,"handleLabelChange",(controlIndex,label)=>{const updatedControl={...this.props.stateParams.controls[controlIndex],label:label};this.onChange(Object(editor_utils["g"])(this.props.stateParams.controls,controlIndex,updatedControl))});controls_tab_defineProperty(this,"handleIndexPatternChange",(controlIndex,indexPattern)=>{const updatedControl={...this.props.stateParams.controls[controlIndex],indexPattern:indexPattern,fieldName:""};this.onChange(Object(editor_utils["g"])(this.props.stateParams.controls,controlIndex,updatedControl))});controls_tab_defineProperty(this,"handleFieldNameChange",(controlIndex,fieldName)=>{const updatedControl={...this.props.stateParams.controls[controlIndex],fieldName:fieldName};this.onChange(Object(editor_utils["g"])(this.props.stateParams.controls,controlIndex,updatedControl))});controls_tab_defineProperty(this,"handleOptionsChange",(controlIndex,optionName,value)=>{const control=this.props.stateParams.controls[controlIndex];const updatedControl={...control,options:{...control.options,[optionName]:value}};this.onChange(Object(editor_utils["g"])(this.props.stateParams.controls,controlIndex,updatedControl))});controls_tab_defineProperty(this,"handleRemoveControl",controlIndex=>{this.onChange(Object(editor_utils["f"])(this.props.stateParams.controls,controlIndex))});controls_tab_defineProperty(this,"moveControl",(controlIndex,direction)=>{this.onChange(Object(editor_utils["d"])(this.props.stateParams.controls,controlIndex,direction))});controls_tab_defineProperty(this,"handleAddControl",()=>{this.onChange(Object(editor_utils["b"])(this.props.stateParams.controls,Object(editor_utils["e"])(this.state.type)))});controls_tab_defineProperty(this,"handleParentChange",(controlIndex,parent)=>{const updatedControl={...this.props.stateParams.controls[controlIndex],parent:parent};this.onChange(Object(editor_utils["g"])(this.props.stateParams.controls,controlIndex,updatedControl))})}renderControls(){const lineageMap=Object(lineage["a"])(this.props.stateParams.controls);return this.props.stateParams.controls.map((controlParams,controlIndex)=>{const parentCandidates=Object(lineage["b"])(this.props.stateParams.controls,controlParams.id,lineageMap);return external_kbnSharedDeps_React_default.a.createElement(ControlEditor,{key:controlParams.id,controlIndex:controlIndex,controlParams:controlParams,handleLabelChange:this.handleLabelChange,moveControl:this.moveControl,handleRemoveControl:this.handleRemoveControl,handleIndexPatternChange:this.handleIndexPatternChange,handleFieldNameChange:this.handleFieldNameChange,getIndexPattern:this.getIndexPattern,handleOptionsChange:this.handleOptionsChange,parentCandidates:parentCandidates,handleParentChange:this.handleParentChange,deps:this.props.deps})})}render(){return external_kbnSharedDeps_React_default.a.createElement("div",null,this.renderControls(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:"selectControlType"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{"data-test-subj":"selectControlType",options:[{value:editor_utils["a"].RANGE,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("inputControl.editor.controlsTab.select.rangeDropDownOptionLabel",{defaultMessage:"Range slider"})},{value:editor_utils["a"].LIST,text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("inputControl.editor.controlsTab.select.listDropDownOptionLabel",{defaultMessage:"Options list"})}],value:this.state.type,onChange:event=>this.setState({type:event.target.value}),"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("inputControl.editor.controlsTab.select.controlTypeAriaLabel",{defaultMessage:"Select control type"})}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:"addControl"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:this.handleAddControl,iconType:"plusInCircle","data-test-subj":"inputControlEditorAddBtn","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("inputControl.editor.controlsTab.select.addControlAriaLabel",{defaultMessage:"Add control"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"inputControl.editor.controlsTab.addButtonLabel",defaultMessage:"Add"})))))))}}}]]);