(function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}}var installedModules={};var installedChunks={0:0};function jsonpScriptSrc(chunkId){return __webpack_require__.p+"visualizations.chunk."+chunkId+".js"}function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(chunkId){var promises=[];var installedChunkData=installedChunks[chunkId];if(installedChunkData!==0){if(installedChunkData){promises.push(installedChunkData[2])}else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var script=document.createElement("script");var onScriptComplete;script.charset="utf-8";script.timeout=120;if(__webpack_require__.nc){script.setAttribute("nonce",__webpack_require__.nc)}script.src=jsonpScriptSrc(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null;clearTimeout(timeout);var chunk=installedChunks[chunkId];if(chunk!==0){if(chunk){var errorType=event&&(event.type==="load"?"missing":event.type);var realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")";error.name="ChunkLoadError";error.type=errorType;error.request=realSrc;chunk[1](error)}installedChunks[chunkId]=undefined}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete;document.head.appendChild(script)}}return Promise.all(promises)};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";__webpack_require__.oe=function(err){console.error(err);throw err};var jsonpArray=window["visualizations_bundle_jsonpfunction"]=window["visualizations_bundle_jsonpfunction"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;return __webpack_require__(__webpack_require__.s=41)})([function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/data/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return visTypeAliasRegistry}));let registry=[];const discardOnRegister=[];const visTypeAliasRegistry={get:()=>[...registry],add:newVisTypeAlias=>{if(registry.find(visTypeAlias=>visTypeAlias.name===newVisTypeAlias.name)){throw new Error(`${newVisTypeAlias.name} already registered`)}const isToBeDiscarded=discardOnRegister.some(aliasName=>aliasName===newVisTypeAlias.name);if(!isToBeDiscarded){registry.push(newVisTypeAlias)}},remove:visTypeAliasName=>{const isAliasPresent=registry.find(visTypeAlias=>visTypeAlias.name===visTypeAliasName);if(!isAliasPresent){discardOnRegister.push(visTypeAliasName)}else{registry=registry.filter(visTypeAlias=>visTypeAlias.name!==visTypeAliasName)}}}},function(module,exports,__webpack_require__){exports.set=__webpack_require__(52);exports.setWith=__webpack_require__(96)},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return VISUALIZE_ENABLE_LABS_SETTING}));const VISUALIZE_ENABLE_LABS_SETTING="visualize:enableLabs"},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,__webpack_exports__,__webpack_require__){"use strict";var _types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(36);var _types__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_types__WEBPACK_IMPORTED_MODULE_0__);if(__webpack_require__.o(_types__WEBPACK_IMPORTED_MODULE_0__,"SavedVisState"))__webpack_require__.d(__webpack_exports__,"SavedVisState",(function(){return _types__WEBPACK_IMPORTED_MODULE_0__["SavedVisState"]}));if(__webpack_require__.o(_types__WEBPACK_IMPORTED_MODULE_0__,"VisParams"))__webpack_require__.d(__webpack_exports__,"VisParams",(function(){return _types__WEBPACK_IMPORTED_MODULE_0__["VisParams"]}))},function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&btoa){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item,useSourceMap);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list};function cssWithMappingToString(item,useSourceMap){var content=item[1]||"";var cssMapping=item[3];if(!cssMapping){return content}if(useSourceMap&&typeof btoa==="function"){var sourceMapping=toComment(cssMapping);var sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));var data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _types_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(16);__webpack_require__.d(__webpack_exports__,"a",(function(){return _types_service__WEBPACK_IMPORTED_MODULE_0__["a"]}));var _schemas__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(22);var _types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(21);__webpack_require__.d(__webpack_exports__,"b",(function(){return _types__WEBPACK_IMPORTED_MODULE_2__["a"]}));var _base_vis_type__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(20)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TypesService}));var _vis_type_alias_registry__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);var _base_vis_type__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(20);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class TypesService{constructor(){_defineProperty(this,"types",{});_defineProperty(this,"unregisteredHiddenTypes",[])}registerVisualization(visDefinition){if(this.unregisteredHiddenTypes.includes(visDefinition.name)){visDefinition.hidden=true}if(this.types[visDefinition.name]){throw new Error("type already exists!")}this.types[visDefinition.name]=visDefinition}setup(){return{createBaseVisualization:config=>{const vis=new _base_vis_type__WEBPACK_IMPORTED_MODULE_1__["a"](config);this.registerVisualization(vis)},registerAlias:_vis_type_alias_registry__WEBPACK_IMPORTED_MODULE_0__["c"].add,hideTypes:typeNames=>{typeNames.forEach(name=>{if(this.types[name]){this.types[name].hidden=true}else{this.unregisteredHiddenTypes.push(name)}})}}}start(){return{get:visualization=>this.types[visualization],all:()=>[...Object.values(this.types)],getAliases:_vis_type_alias_registry__WEBPACK_IMPORTED_MODULE_0__["c"].get,unRegisterAlias:_vis_type_alias_registry__WEBPACK_IMPORTED_MODULE_0__["c"].remove,getByGroup:group=>Object.values(this.types).filter(type=>type.group===group)}}stop(){}}},function(module,exports,__webpack_require__){var getNative=__webpack_require__(26);var nativeCreate=getNative(Object,"create");module.exports=nativeCreate},function(module,exports,__webpack_require__){var eq=__webpack_require__(35);function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}module.exports=assocIndexOf},function(module,exports,__webpack_require__){var isKeyable=__webpack_require__(87);function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}module.exports=getMapData},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return BaseVisType}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);var _types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(21);var _schemas__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(22);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const defaultOptions={showTimePicker:true,showQueryBar:true,showFilterBar:true,showIndexSelection:true,hierarchicalData:false};class BaseVisType{constructor(opts){var _opts$description,_opts$note,_opts$stage,_opts$group,_opts$titleInWizard,_opts$hidden,_opts$requiresSearch,_opts$hierarchicalDat,_this$editorConfig$sc,_this$editorConfig;_defineProperty(this,"name",void 0);_defineProperty(this,"title",void 0);_defineProperty(this,"description",void 0);_defineProperty(this,"note",void 0);_defineProperty(this,"getSupportedTriggers",void 0);_defineProperty(this,"icon",void 0);_defineProperty(this,"image",void 0);_defineProperty(this,"stage",void 0);_defineProperty(this,"group",void 0);_defineProperty(this,"titleInWizard",void 0);_defineProperty(this,"options",void 0);_defineProperty(this,"visConfig",void 0);_defineProperty(this,"editorConfig",void 0);_defineProperty(this,"hidden",void 0);_defineProperty(this,"requiresSearch",void 0);_defineProperty(this,"hierarchicalData",void 0);_defineProperty(this,"setup",void 0);_defineProperty(this,"getUsedIndexPattern",void 0);_defineProperty(this,"inspectorAdapters",void 0);_defineProperty(this,"toExpressionAst",void 0);_defineProperty(this,"getInfoMessage",void 0);_defineProperty(this,"schemas",void 0);if(!opts.icon&&!opts.image){throw new Error("vis_type must define its icon or image")}this.name=opts.name;this.description=(_opts$description=opts.description)!==null&&_opts$description!==void 0?_opts$description:"";this.note=(_opts$note=opts.note)!==null&&_opts$note!==void 0?_opts$note:"";this.getSupportedTriggers=opts.getSupportedTriggers;this.title=opts.title;this.icon=opts.icon;this.image=opts.image;this.visConfig=Object(lodash__WEBPACK_IMPORTED_MODULE_0__["defaultsDeep"])({},opts.visConfig,{defaults:{}});this.editorConfig=Object(lodash__WEBPACK_IMPORTED_MODULE_0__["defaultsDeep"])({},opts.editorConfig,{collections:{}});this.options=Object(lodash__WEBPACK_IMPORTED_MODULE_0__["defaultsDeep"])({},opts.options,defaultOptions);this.stage=(_opts$stage=opts.stage)!==null&&_opts$stage!==void 0?_opts$stage:"production";this.group=(_opts$group=opts.group)!==null&&_opts$group!==void 0?_opts$group:_types__WEBPACK_IMPORTED_MODULE_1__["a"].AGGBASED;this.titleInWizard=(_opts$titleInWizard=opts.titleInWizard)!==null&&_opts$titleInWizard!==void 0?_opts$titleInWizard:"";this.hidden=(_opts$hidden=opts.hidden)!==null&&_opts$hidden!==void 0?_opts$hidden:false;this.requiresSearch=(_opts$requiresSearch=opts.requiresSearch)!==null&&_opts$requiresSearch!==void 0?_opts$requiresSearch:false;this.setup=opts.setup;this.hierarchicalData=(_opts$hierarchicalDat=opts.hierarchicalData)!==null&&_opts$hierarchicalDat!==void 0?_opts$hierarchicalDat:false;this.getUsedIndexPattern=opts.getUsedIndexPattern;this.inspectorAdapters=opts.inspectorAdapters;this.toExpressionAst=opts.toExpressionAst;this.getInfoMessage=opts.getInfoMessage;this.schemas=new _schemas__WEBPACK_IMPORTED_MODULE_2__["a"]((_this$editorConfig$sc=(_this$editorConfig=this.editorConfig)===null||_this$editorConfig===void 0?void 0:_this$editorConfig.schemas)!==null&&_this$editorConfig$sc!==void 0?_this$editorConfig$sc:[])}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return VisGroups}));var _data_public__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);var _data_public__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_data_public__WEBPACK_IMPORTED_MODULE_0__);let VisGroups;(function(VisGroups){VisGroups["PROMOTED"]="promoted";VisGroups["TOOLS"]="tools";VisGroups["AGGBASED"]="aggbased"})(VisGroups||(VisGroups={}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Schemas}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);var _data_public__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4);var _data_public__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_data_public__WEBPACK_IMPORTED_MODULE_1__);let _AggGroupNames$Bucket,_AggGroupNames$Metric;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}_AggGroupNames$Bucket=_data_public__WEBPACK_IMPORTED_MODULE_1__["AggGroupNames"].Buckets;_AggGroupNames$Metric=_data_public__WEBPACK_IMPORTED_MODULE_1__["AggGroupNames"].Metrics;class Schemas{constructor(schemas){_defineProperty(this,"all",[]);_defineProperty(this,_AggGroupNames$Bucket,[]);_defineProperty(this,_AggGroupNames$Metric,[]);lodash__WEBPACK_IMPORTED_MODULE_0___default()(schemas||[]).chain().map(schema=>{if(!schema.name)throw new Error("all schema must have a unique name");if(schema.name==="split"){schema.params=[{name:"row",default:true}]}Object(lodash__WEBPACK_IMPORTED_MODULE_0__["defaults"])(schema,{min:0,max:Infinity,group:_data_public__WEBPACK_IMPORTED_MODULE_1__["AggGroupNames"].Buckets,title:schema.name,aggFilter:"*",params:[]});return schema}).tap(fullSchemas=>{this.all=fullSchemas}).groupBy("group").forOwn((group,groupName)=>{this[groupName]=group}).commit()}}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/savedObjects/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/discover/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){var baseIsNative=__webpack_require__(56),getValue=__webpack_require__(64);function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}module.exports=getNative},function(module,exports,__webpack_require__){var root=__webpack_require__(28);var Symbol=root.Symbol;module.exports=Symbol},function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(57);var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,exports){function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}module.exports=isObject},function(module,exports){var isArray=Array.isArray;module.exports=isArray},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(34),isObjectLike=__webpack_require__(67);var symbolTag="[object Symbol]";function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}module.exports=isSymbol},function(module,exports,__webpack_require__){var assignValue=__webpack_require__(53),castPath=__webpack_require__(65),isFunction=__webpack_require__(33),isIndex=__webpack_require__(94),isObject=__webpack_require__(29),toKey=__webpack_require__(95);function baseSet(object,path,value,customizer){if(!isObject(object)){return object}path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(key=="prototype"&&isFunction(nested)){throw new Error("Illegal access of function prototype")}if(index!=lastIndex){var objValue=hasOwnProperty.call(nested,key)?nested[key]:undefined;newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{}}}assignValue(nested,key,newValue);nested=nested[key]}return object}module.exports=baseSet},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(34),isObject=__webpack_require__(29);var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}module.exports=isFunction},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(27),getRawTag=__webpack_require__(59),objectToString=__webpack_require__(60);var nullTag="[object Null]",undefinedTag="[object Undefined]";var symToStringTag=Symbol?Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}module.exports=baseGetTag},function(module,exports){function eq(value,other){return value===other||value!==value&&other!==other}module.exports=eq},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.RxjsOperators},function(module,exports,__webpack_require__){"use strict";var R=typeof Reflect==="object"?Reflect:null;var ReflectApply=R&&typeof R.apply==="function"?R.apply:function ReflectApply(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};var ReflectOwnKeys;if(R&&typeof R.ownKeys==="function"){ReflectOwnKeys=R.ownKeys}else if(Object.getOwnPropertySymbols){ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}}else{ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target)}}function ProcessEmitWarning(warning){if(console&&console.warn)console.warn(warning)}var NumberIsNaN=Number.isNaN||function NumberIsNaN(value){return value!==value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=undefined;var defaultMaxListeners=10;Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:true,get:function(){return defaultMaxListeners},set:function(arg){if(typeof arg!=="number"||arg<0||NumberIsNaN(arg)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".")}defaultMaxListeners=arg}});EventEmitter.init=function(){if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){if(typeof n!=="number"||n<0||NumberIsNaN(n)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".")}this._maxListeners=n;return this};function $getMaxListeners(that){if(that._maxListeners===undefined)return EventEmitter.defaultMaxListeners;return that._maxListeners}EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return $getMaxListeners(this)};EventEmitter.prototype.emit=function emit(type){var args=[];for(var i=1;i<arguments.length;i++)args.push(arguments[i]);var doError=type==="error";var events=this._events;if(events!==undefined)doError=doError&&events.error===undefined;else if(!doError)return false;if(doError){var er;if(args.length>0)er=args[0];if(er instanceof Error){throw er}var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));err.context=er;throw err}var handler=events[type];if(handler===undefined)return false;if(typeof handler==="function"){ReflectApply(handler,this,args)}else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)ReflectApply(listeners[i],this,args)}return true};function _addListener(target,type,listener,prepend){var m;var events;var existing;if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}events=target._events;if(events===undefined){events=target._events=Object.create(null);target._eventsCount=0}else{if(events.newListener!==undefined){target.emit("newListener",type,listener.listener?listener.listener:listener);events=target._events}existing=events[type]}if(existing===undefined){existing=events[type]=listener;++target._eventsCount}else{if(typeof existing==="function"){existing=events[type]=prepend?[listener,existing]:[existing,listener]}else if(prepend){existing.unshift(listener)}else{existing.push(listener)}m=$getMaxListeners(target);if(m>0&&existing.length>m&&!existing.warned){existing.warned=true;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners "+"added. Use emitter.setMaxListeners() to "+"increase limit");w.name="MaxListenersExceededWarning";w.emitter=target;w.type=type;w.count=existing.length;ProcessEmitWarning(w)}}return target}EventEmitter.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,false)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,true)};function onceWrapper(){var args=[];for(var i=0;i<arguments.length;i++)args.push(arguments[i]);if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;ReflectApply(this.listener,this.target,args)}}function _onceWrap(target,type,listener){var state={fired:false,wrapFn:undefined,target:target,type:type,listener:listener};var wrapped=onceWrapper.bind(state);wrapped.listener=listener;state.wrapFn=wrapped;return wrapped}EventEmitter.prototype.once=function once(type,listener){if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}this.on(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.prependOnceListener=function prependOnceListener(type,listener){if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}this.prependListener(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}events=this._events;if(events===undefined)return this;list=events[type];if(list===undefined)return this;if(list===listener||list.listener===listener){if(--this._eventsCount===0)this._events=Object.create(null);else{delete events[type];if(events.removeListener)this.emit("removeListener",type,list.listener||listener)}}else if(typeof list!=="function"){position=-1;for(i=list.length-1;i>=0;i--){if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener;position=i;break}}if(position<0)return this;if(position===0)list.shift();else{spliceOne(list,position)}if(list.length===1)events[type]=list[0];if(events.removeListener!==undefined)this.emit("removeListener",type,originalListener||listener)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events,i;events=this._events;if(events===undefined)return this;if(events.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(events[type]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete events[type]}return this}if(arguments.length===0){var keys=Object.keys(events);var key;for(i=0;i<keys.length;++i){key=keys[i];if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}listeners=events[type];if(typeof listeners==="function"){this.removeListener(type,listeners)}else if(listeners!==undefined){for(i=listeners.length-1;i>=0;i--){this.removeListener(type,listeners[i])}}return this};function _listeners(target,type,unwrap){var events=target._events;if(events===undefined)return[];var evlistener=events[type];if(evlistener===undefined)return[];if(typeof evlistener==="function")return unwrap?[evlistener.listener||evlistener]:[evlistener];return unwrap?unwrapListeners(evlistener):arrayClone(evlistener,evlistener.length)}EventEmitter.prototype.listeners=function listeners(type){return _listeners(this,type,true)};EventEmitter.prototype.rawListeners=function rawListeners(type){return _listeners(this,type,false)};EventEmitter.listenerCount=function(emitter,type){if(typeof emitter.listenerCount==="function"){return emitter.listenerCount(type)}else{return listenerCount.call(emitter,type)}};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(type){var events=this._events;if(events!==undefined){var evlistener=events[type];if(typeof evlistener==="function"){return 1}else if(evlistener!==undefined){return evlistener.length}}return 0}EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(arr,n){var copy=new Array(n);for(var i=0;i<n;++i)copy[i]=arr[i];return copy}function spliceOne(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}function unwrapListeners(arr){var ret=new Array(arr.length);for(var i=0;i<ret.length;++i){ret[i]=arr[i].listener||arr[i]}return ret}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){var classes=[];for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(!arg)continue;var argType=typeof arg;if(argType==="string"||argType==="number"){classes.push(arg)}else if(Array.isArray(arg)&&arg.length){var inner=classNames.apply(null,arg);if(inner){classes.push(inner)}}else if(argType==="object"){for(var key in arg){if(hasOwn.call(arg,key)&&arg[key]){classes.push(key)}}}}return classes.join(" ")}if(true&&module.exports){classNames.default=classNames;module.exports=classNames}else if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_visualizations_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(42);var _node_modules_val_loader_dist_cjs_js_key_visualizations_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_visualizations_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/visualizations/public",__webpack_require__,97)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["visualizations"]},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(44);case"v7light":return __webpack_require__(46);case"v8dark":return __webpack_require__(48);case"v8light":return __webpack_require__(50)}},function(module,exports,__webpack_require__){var api=__webpack_require__(13);var content=__webpack_require__(45);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(14);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n* 1. Fix overflow of vis's specifically for inside embeddable panels, lets the panel decide the overflow\n* 2. Force a better looking scrollbar\n*/\n.embPanel .visualization {\n  scrollbar-width: thin;\n  /* 2 */ }\n  .embPanel .visualization::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .embPanel .visualization::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .embPanel .visualization::-webkit-scrollbar-corner, .embPanel .visualization::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.embPanel .visLegend__toggle {\n  border-bottom-right-radius: 0;\n  border-top-left-radius: 0;\n  opacity: 0;\n  /* 1 */ }\n  .embPanel .visLegend__toggle:focus {\n    opacity: 1;\n    /* 2 */ }\n\n/**\n  * 1. Use opacity to make this element accessible to screen readers and keyboard.\n  * 2. Show on focus to enable keyboard accessibility.\n  * 3. Always show in editing mode\n  */\n.embPanel_optionsMenuPopover[class*='-isOpen'] .visLegend__toggle,\n.embPanel:hover .visLegend__toggle {\n  opacity: 1; }\n\n.embPanel--editing .visLegend__toggle {\n  opacity: 1;\n  /* 3 */ }\n\n.visualize {\n  display: flex;\n  flex: 1 1 100%;\n  overflow: hidden; }\n\n.visualization {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  padding: 8px;\n  flex: 1 1 100%; }\n\n.visChart {\n  display: flex;\n  flex: 1 1 auto;\n  min-height: 0;\n  min-width: 0; }\n\n.visChart--vertical {\n  flex-direction: column; }\n\n.visChart__spinner, .visError {\n  display: flex;\n  flex: 1 1 auto;\n  justify-content: center;\n  align-items: center;\n  text-align: center; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(13);var content=__webpack_require__(47);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(14);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n* 1. Fix overflow of vis's specifically for inside embeddable panels, lets the panel decide the overflow\n* 2. Force a better looking scrollbar\n*/\n.embPanel .visualization {\n  scrollbar-width: thin;\n  /* 2 */ }\n  .embPanel .visualization::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .embPanel .visualization::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .embPanel .visualization::-webkit-scrollbar-corner, .embPanel .visualization::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.embPanel .visLegend__toggle {\n  border-bottom-right-radius: 0;\n  border-top-left-radius: 0;\n  opacity: 0;\n  /* 1 */ }\n  .embPanel .visLegend__toggle:focus {\n    opacity: 1;\n    /* 2 */ }\n\n/**\n  * 1. Use opacity to make this element accessible to screen readers and keyboard.\n  * 2. Show on focus to enable keyboard accessibility.\n  * 3. Always show in editing mode\n  */\n.embPanel_optionsMenuPopover[class*='-isOpen'] .visLegend__toggle,\n.embPanel:hover .visLegend__toggle {\n  opacity: 1; }\n\n.embPanel--editing .visLegend__toggle {\n  opacity: 1;\n  /* 3 */ }\n\n.visualize {\n  display: flex;\n  flex: 1 1 100%;\n  overflow: hidden; }\n\n.visualization {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  padding: 8px;\n  flex: 1 1 100%; }\n\n.visChart {\n  display: flex;\n  flex: 1 1 auto;\n  min-height: 0;\n  min-width: 0; }\n\n.visChart--vertical {\n  flex-direction: column; }\n\n.visChart__spinner, .visError {\n  display: flex;\n  flex: 1 1 auto;\n  justify-content: center;\n  align-items: center;\n  text-align: center; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(13);var content=__webpack_require__(49);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(14);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n* 1. Fix overflow of vis's specifically for inside embeddable panels, lets the panel decide the overflow\n* 2. Force a better looking scrollbar\n*/\n.embPanel .visualization {\n  scrollbar-width: thin;\n  /* 2 */ }\n  .embPanel .visualization::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .embPanel .visualization::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .embPanel .visualization::-webkit-scrollbar-corner, .embPanel .visualization::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.embPanel .visLegend__toggle {\n  border-bottom-right-radius: 0;\n  border-top-left-radius: 0;\n  opacity: 0;\n  /* 1 */ }\n  .embPanel .visLegend__toggle:focus {\n    opacity: 1;\n    /* 2 */ }\n\n/**\n  * 1. Use opacity to make this element accessible to screen readers and keyboard.\n  * 2. Show on focus to enable keyboard accessibility.\n  * 3. Always show in editing mode\n  */\n.embPanel_optionsMenuPopover[class*='-isOpen'] .visLegend__toggle,\n.embPanel:hover .visLegend__toggle {\n  opacity: 1; }\n\n.embPanel--editing .visLegend__toggle {\n  opacity: 1;\n  /* 3 */ }\n\n.visualize {\n  display: flex;\n  flex: 1 1 100%;\n  overflow: hidden; }\n\n.visualization {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  padding: 8px;\n  flex: 1 1 100%; }\n\n.visChart {\n  display: flex;\n  flex: 1 1 auto;\n  min-height: 0;\n  min-width: 0; }\n\n.visChart--vertical {\n  flex-direction: column; }\n\n.visChart__spinner, .visError {\n  display: flex;\n  flex: 1 1 auto;\n  justify-content: center;\n  align-items: center;\n  text-align: center; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(13);var content=__webpack_require__(51);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(14);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n* 1. Fix overflow of vis's specifically for inside embeddable panels, lets the panel decide the overflow\n* 2. Force a better looking scrollbar\n*/\n.embPanel .visualization {\n  scrollbar-width: thin;\n  /* 2 */ }\n  .embPanel .visualization::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .embPanel .visualization::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .embPanel .visualization::-webkit-scrollbar-corner, .embPanel .visualization::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.embPanel .visLegend__toggle {\n  border-bottom-right-radius: 0;\n  border-top-left-radius: 0;\n  opacity: 0;\n  /* 1 */ }\n  .embPanel .visLegend__toggle:focus {\n    opacity: 1;\n    /* 2 */ }\n\n/**\n  * 1. Use opacity to make this element accessible to screen readers and keyboard.\n  * 2. Show on focus to enable keyboard accessibility.\n  * 3. Always show in editing mode\n  */\n.embPanel_optionsMenuPopover[class*='-isOpen'] .visLegend__toggle,\n.embPanel:hover .visLegend__toggle {\n  opacity: 1; }\n\n.embPanel--editing .visLegend__toggle {\n  opacity: 1;\n  /* 3 */ }\n\n.visualize {\n  display: flex;\n  flex: 1 1 100%;\n  overflow: hidden; }\n\n.visualization {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  padding: 8px;\n  flex: 1 1 100%; }\n\n.visChart {\n  display: flex;\n  flex: 1 1 auto;\n  min-height: 0;\n  min-width: 0; }\n\n.visChart--vertical {\n  flex-direction: column; }\n\n.visChart__spinner, .visError {\n  display: flex;\n  flex: 1 1 auto;\n  justify-content: center;\n  align-items: center;\n  text-align: center; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var baseSet=__webpack_require__(32);function set(object,path,value){return object==null?object:baseSet(object,path,value)}module.exports=set},function(module,exports,__webpack_require__){var baseAssignValue=__webpack_require__(54),eq=__webpack_require__(35);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}module.exports=assignValue},function(module,exports,__webpack_require__){var defineProperty=__webpack_require__(55);function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty){defineProperty(object,key,{configurable:true,enumerable:true,value:value,writable:true})}else{object[key]=value}}module.exports=baseAssignValue},function(module,exports,__webpack_require__){var getNative=__webpack_require__(26);var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();module.exports=defineProperty},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(33),isMasked=__webpack_require__(61),isObject=__webpack_require__(29),toSource=__webpack_require__(63);var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var funcProto=Function.prototype,objectProto=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}module.exports=baseIsNative},function(module,exports,__webpack_require__){(function(global){var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(this,__webpack_require__(58))},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){if(typeof window==="object")g=window}module.exports=g},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(27);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=Symbol?Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}module.exports=getRawTag},function(module,exports){var objectProto=Object.prototype;var nativeObjectToString=objectProto.toString;function objectToString(value){return nativeObjectToString.call(value)}module.exports=objectToString},function(module,exports,__webpack_require__){var coreJsData=__webpack_require__(62);var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}module.exports=isMasked},function(module,exports,__webpack_require__){var root=__webpack_require__(28);var coreJsData=root["__core-js_shared__"];module.exports=coreJsData},function(module,exports){var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}module.exports=toSource},function(module,exports){function getValue(object,key){return object==null?undefined:object[key]}module.exports=getValue},function(module,exports,__webpack_require__){var isArray=__webpack_require__(30),isKey=__webpack_require__(66),stringToPath=__webpack_require__(68),toString=__webpack_require__(91);function castPath(value,object){if(isArray(value)){return value}return isKey(value,object)?[value]:stringToPath(toString(value))}module.exports=castPath},function(module,exports,__webpack_require__){var isArray=__webpack_require__(30),isSymbol=__webpack_require__(31);var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(value,object){if(isArray(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}module.exports=isKey},function(module,exports){function isObjectLike(value){return value!=null&&typeof value=="object"}module.exports=isObjectLike},function(module,exports,__webpack_require__){var memoizeCapped=__webpack_require__(69);var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=memoizeCapped((function(string){var result=[];if(string.charCodeAt(0)===46){result.push("")}string.replace(rePropName,(function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)}));return result}));module.exports=stringToPath},function(module,exports,__webpack_require__){var memoize=__webpack_require__(70);var MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,(function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key}));var cache=result.cache;return result}module.exports=memoizeCapped},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(71);var FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;module.exports=memoize},function(module,exports,__webpack_require__){var mapCacheClear=__webpack_require__(72),mapCacheDelete=__webpack_require__(86),mapCacheGet=__webpack_require__(88),mapCacheHas=__webpack_require__(89),mapCacheSet=__webpack_require__(90);function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;module.exports=MapCache},function(module,exports,__webpack_require__){var Hash=__webpack_require__(73),ListCache=__webpack_require__(79),Map=__webpack_require__(85);function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}module.exports=mapCacheClear},function(module,exports,__webpack_require__){var hashClear=__webpack_require__(74),hashDelete=__webpack_require__(75),hashGet=__webpack_require__(76),hashHas=__webpack_require__(77),hashSet=__webpack_require__(78);function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;module.exports=Hash},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(17);function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}module.exports=hashClear},function(module,exports){function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}module.exports=hashDelete},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(17);var HASH_UNDEFINED="__lodash_hash_undefined__";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}module.exports=hashGet},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(17);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}module.exports=hashHas},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(17);var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}module.exports=hashSet},function(module,exports,__webpack_require__){var listCacheClear=__webpack_require__(80),listCacheDelete=__webpack_require__(81),listCacheGet=__webpack_require__(82),listCacheHas=__webpack_require__(83),listCacheSet=__webpack_require__(84);function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;module.exports=ListCache},function(module,exports){function listCacheClear(){this.__data__=[];this.size=0}module.exports=listCacheClear},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(18);var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}module.exports=listCacheDelete},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(18);function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}module.exports=listCacheGet},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(18);function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}module.exports=listCacheHas},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(18);function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}module.exports=listCacheSet},function(module,exports,__webpack_require__){var getNative=__webpack_require__(26),root=__webpack_require__(28);var Map=getNative(root,"Map");module.exports=Map},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(19);function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}module.exports=mapCacheDelete},function(module,exports){function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}module.exports=isKeyable},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(19);function mapCacheGet(key){return getMapData(this,key).get(key)}module.exports=mapCacheGet},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(19);function mapCacheHas(key){return getMapData(this,key).has(key)}module.exports=mapCacheHas},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(19);function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}module.exports=mapCacheSet},function(module,exports,__webpack_require__){var baseToString=__webpack_require__(92);function toString(value){return value==null?"":baseToString(value)}module.exports=toString},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(27),arrayMap=__webpack_require__(93),isArray=__webpack_require__(30),isSymbol=__webpack_require__(31);var INFINITY=1/0;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(value){if(typeof value=="string"){return value}if(isArray(value)){return arrayMap(value,baseToString)+""}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=baseToString},function(module,exports){function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}module.exports=arrayMap},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type=="number"||type!="symbol"&&reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}module.exports=isIndex},function(module,exports,__webpack_require__){var isSymbol=__webpack_require__(31);var INFINITY=1/0;function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=toKey},function(module,exports,__webpack_require__){var baseSet=__webpack_require__(32);function setWith(object,path,value,customizer){customizer=typeof customizer=="function"?customizer:undefined;return object==null?object:baseSet(object,path,value,customizer)}module.exports=setWith},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));__webpack_require__.d(__webpack_exports__,"Vis",(function(){return vis_Vis}));__webpack_require__.d(__webpack_exports__,"TypesService",(function(){return types_service["a"]}));__webpack_require__.d(__webpack_exports__,"VISUALIZE_EMBEDDABLE_TYPE",(function(){return VISUALIZE_EMBEDDABLE_TYPE}));__webpack_require__.d(__webpack_exports__,"VIS_EVENT_TO_TRIGGER",(function(){return VIS_EVENT_TO_TRIGGER}));__webpack_require__.d(__webpack_exports__,"VisualizationContainer",(function(){return VisualizationContainer}));__webpack_require__.d(__webpack_exports__,"getVisSchemas",(function(){return getVisSchemas}));__webpack_require__.d(__webpack_exports__,"VisualizationsSetup",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisualizationsStart",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisGroups",(function(){return vis_types["b"]}));__webpack_require__.d(__webpack_exports__,"SerializedVis",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SerializedVisData",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisData",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisualizeInput",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SchemaConfig",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"updateOldState",(function(){return updateOldState}));__webpack_require__.d(__webpack_exports__,"PersistedState",(function(){return persisted_state_PersistedState}));__webpack_require__.d(__webpack_exports__,"ISavedVis",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisSavedObject",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisToExpressionAst",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisToExpressionAstParams",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisEditorOptionsProps",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisualizationListItem",(function(){return vis_type_alias_registry["VisualizationListItem"]}));__webpack_require__.d(__webpack_exports__,"VisualizationStage",(function(){return vis_type_alias_registry["VisualizationStage"]}));__webpack_require__.d(__webpack_exports__,"VISUALIZE_ENABLE_LABS_SETTING",(function(){return constants["a"]}));__webpack_require__.d(__webpack_exports__,"SavedVisState",(function(){return common["SavedVisState"]}));__webpack_require__.d(__webpack_exports__,"VisParams",(function(){return common["VisParams"]}));var public_0=__webpack_require__(43);var vis_types=__webpack_require__(15);var public_=__webpack_require__(3);const[getUISettings,setUISettings]=Object(public_["createGetterSetter"])("UISettings");const[getCapabilities,setCapabilities]=Object(public_["createGetterSetter"])("Capabilities");const[getHttp,setHttp]=Object(public_["createGetterSetter"])("Http");const[getApplication,setApplication]=Object(public_["createGetterSetter"])("Application");const[getEmbeddable,setEmbeddable]=Object(public_["createGetterSetter"])("Embeddable");const[getSavedObjects,setSavedObjects]=Object(public_["createGetterSetter"])("SavedObjects");const[getTypes,setTypes]=Object(public_["createGetterSetter"])("Types");const[getDocLinks,setDocLinks]=Object(public_["createGetterSetter"])("DocLinks");const[getTimeFilter,setTimeFilter]=Object(public_["createGetterSetter"])("TimeFilter");const[getSearch,setSearch]=Object(public_["createGetterSetter"])("Search");const[getUsageCollector,setUsageCollector]=Object(public_["createGetterSetter"])("UsageCollection");const[getExpressions,setExpressions]=Object(public_["createGetterSetter"])("Expressions");const[getUiActions,setUiActions]=Object(public_["createGetterSetter"])("UiActions");const[getSavedVisualizationsLoader,setSavedVisualizationsLoader]=Object(public_["createGetterSetter"])("SavedVisualisationsLoader");const[getAggs,setAggs]=Object(public_["createGetterSetter"])("AggConfigs");const[getOverlays,setOverlays]=Object(public_["createGetterSetter"])("Overlays");const[getChrome,setChrome]=Object(public_["createGetterSetter"])("Chrome");const[getSavedSearchLoader,setSavedSearchLoader]=Object(public_["createGetterSetter"])("savedSearchLoader");var external_kbnSharedDeps_React_=__webpack_require__(1);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(11);var external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_);var embeddable_public_=__webpack_require__(6);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(9);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(5);function DisabledLabVisualization({title:title}){const advancedSettingsLink=getDocLinks().links.management.visualizationSettings;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{titleSize:"xs",title:external_kbnSharedDeps_React_default.a.createElement("h6",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visualizations.disabledLabVisualizationTitle",defaultMessage:"{title} is a lab visualization.",values:{title:title}})),iconType:"beaker",body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visualizations.disabledLabVisualizationMessage",defaultMessage:"Please turn on lab-mode in the advanced settings to see lab visualizations."}),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{target:"_blank",external:true,href:advancedSettingsLink},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visualizations.disabledLabVisualizationLink",defaultMessage:"Read documentation"}))}))}const VISUALIZE_EMBEDDABLE_TYPE="visualization";function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class disabled_lab_embeddable_DisabledLabEmbeddable extends embeddable_public_["Embeddable"]{constructor(title,initialInput){super(initialInput,{title:title});this.title=title;_defineProperty(this,"domNode",void 0);_defineProperty(this,"type",VISUALIZE_EMBEDDABLE_TYPE)}reload(){}render(domNode){if(this.title){this.domNode=domNode;external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(DisabledLabVisualization,{title:this.title}),domNode)}}destroy(){if(this.domNode){external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(this.domNode)}}}var external_kbnSharedDeps_Lodash_=__webpack_require__(0);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);var data_public_=__webpack_require__(4);var uiActions_public_=__webpack_require__(37);const VIS_EVENT_TO_TRIGGER={applyFilter:data_public_["APPLY_FILTER_TRIGGER"],brush:embeddable_public_["SELECT_RANGE_TRIGGER"],filter:embeddable_public_["VALUE_CLICK_TRIGGER"],tableRowContextMenuClick:uiActions_public_["ROW_CLICK_TRIGGER"]};var expressions_public_=__webpack_require__(25);const toExpressionAst=async(vis,params)=>{const{savedSearchId:savedSearchId,searchSource:searchSource}=vis.data;const query=searchSource===null||searchSource===void 0?void 0:searchSource.getField("query");const filters=searchSource===null||searchSource===void 0?void 0:searchSource.getField("filter");const kibana=Object(expressions_public_["buildExpressionFunction"])("kibana",{});const kibanaContext=Object(expressions_public_["buildExpressionFunction"])("kibana_context",{q:query&&JSON.stringify(query),filters:filters&&JSON.stringify(filters),savedSearchId:savedSearchId});const ast=Object(expressions_public_["buildExpression"])([kibana,kibanaContext]);const expression=ast.toAst();if(!vis.type.toExpressionAst){throw new Error("Visualization type definition should have toExpressionAst function defined")}const visExpressionAst=await vis.type.toExpressionAst(vis,params);expression.chain.push(...visExpressionAst.chain);return expression};function visualize_embeddable_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const getKeys=o=>Object.keys(o);class visualize_embeddable_VisualizeEmbeddable extends embeddable_public_["Embeddable"]{constructor(timefilter,{vis:vis,editPath:editPath,editUrl:editUrl,indexPatterns:indexPatterns,deps:deps,capabilities:capabilities},initialInput,attributeService,savedVisualizationsLoader,parent){super(initialInput,{defaultTitle:vis.title,editPath:editPath,editApp:"visualize",editUrl:editUrl,indexPatterns:indexPatterns,visTypeName:vis.type.name},parent);visualize_embeddable_defineProperty(this,"handler",void 0);visualize_embeddable_defineProperty(this,"timefilter",void 0);visualize_embeddable_defineProperty(this,"timeRange",void 0);visualize_embeddable_defineProperty(this,"query",void 0);visualize_embeddable_defineProperty(this,"filters",void 0);visualize_embeddable_defineProperty(this,"searchSessionId",void 0);visualize_embeddable_defineProperty(this,"syncColors",void 0);visualize_embeddable_defineProperty(this,"visCustomizations",void 0);visualize_embeddable_defineProperty(this,"subscriptions",[]);visualize_embeddable_defineProperty(this,"expression",void 0);visualize_embeddable_defineProperty(this,"vis",void 0);visualize_embeddable_defineProperty(this,"domNode",void 0);visualize_embeddable_defineProperty(this,"type",VISUALIZE_EMBEDDABLE_TYPE);visualize_embeddable_defineProperty(this,"abortController",void 0);visualize_embeddable_defineProperty(this,"deps",void 0);visualize_embeddable_defineProperty(this,"inspectorAdapters",void 0);visualize_embeddable_defineProperty(this,"attributeService",void 0);visualize_embeddable_defineProperty(this,"savedVisualizationsLoader",void 0);visualize_embeddable_defineProperty(this,"getInspectorAdapters",()=>{if(!this.handler||this.inspectorAdapters&&!Object.keys(this.inspectorAdapters).length){return undefined}return this.handler.inspect()});visualize_embeddable_defineProperty(this,"openInspector",()=>{if(!this.handler)return;const adapters=this.handler.inspect();if(!adapters)return;return this.deps.start().plugins.inspector.open(adapters,{title:this.getTitle()})});visualize_embeddable_defineProperty(this,"hasInspector",()=>Boolean(this.getInspectorAdapters()));visualize_embeddable_defineProperty(this,"onContainerLoading",()=>{this.renderComplete.dispatchInProgress();this.updateOutput({loading:true,error:undefined})});visualize_embeddable_defineProperty(this,"onContainerRender",()=>{this.renderComplete.dispatchComplete();this.updateOutput({loading:false,error:undefined})});visualize_embeddable_defineProperty(this,"onContainerError",error=>{if(this.abortController){this.abortController.abort()}this.renderComplete.dispatchError();this.updateOutput({loading:false,error:error})});visualize_embeddable_defineProperty(this,"reload",()=>{this.handleVisUpdate()});visualize_embeddable_defineProperty(this,"handleVisUpdate",async()=>{this.handleChanges();this.updateHandler()});visualize_embeddable_defineProperty(this,"uiStateChangeHandler",()=>{this.updateInput({...this.vis.uiState.toJSON()})});visualize_embeddable_defineProperty(this,"inputIsRefType",input=>{if(!this.attributeService){throw new Error("AttributeService must be defined for getInputAsRefType")}return this.attributeService.inputIsRefType(input)});visualize_embeddable_defineProperty(this,"getInputAsValueType",async()=>{const input={savedVis:this.vis.serialize()};if(this.getTitle()){input.savedVis.title=this.getTitle()}delete input.savedVis.id;return new Promise(resolve=>{resolve({...input})})});visualize_embeddable_defineProperty(this,"getInputAsRefType",async()=>{var _this$savedVisualizat;const savedVis=await((_this$savedVisualizat=this.savedVisualizationsLoader)===null||_this$savedVisualizat===void 0?void 0:_this$savedVisualizat.get({}));if(!savedVis){throw new Error("Error creating a saved vis object")}if(!this.attributeService){throw new Error("AttributeService must be defined for getInputAsRefType")}const saveModalTitle=this.getTitle()?this.getTitle():external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.embeddable.placeholderTitle",{defaultMessage:"Placeholder Title"});const attributes={savedVis:savedVis,vis:this.vis,title:this.vis.title};return this.attributeService.getInputAsRefType({id:this.id,attributes:attributes},{showSaveModal:true,saveModalTitle:saveModalTitle})});this.deps=deps;this.timefilter=timefilter;this.syncColors=this.input.syncColors;this.vis=vis;this.vis.uiState.on("change",this.uiStateChangeHandler);this.vis.uiState.on("reload",this.reload);this.attributeService=attributeService;this.savedVisualizationsLoader=savedVisualizationsLoader;if(this.attributeService){const isByValue=!this.inputIsRefType(initialInput);const editable=capabilities.visualizeSave||isByValue&&capabilities.dashboardSave;this.updateOutput({...this.getOutput(),editable:editable})}this.subscriptions.push(this.getUpdated$().subscribe(()=>{const isDirty=this.handleChanges();if(isDirty&&this.handler){this.updateHandler()}}));const inspectorAdapters=this.vis.type.inspectorAdapters;if(inspectorAdapters){this.inspectorAdapters=typeof inspectorAdapters==="function"?inspectorAdapters():inspectorAdapters}}getDescription(){return this.vis.description}transferCustomizationsToUiState(){const visCustomizations={vis:this.input.vis,table:this.input.table};if(visCustomizations.vis||visCustomizations.table){if(!external_kbnSharedDeps_Lodash_default.a.isEqual(visCustomizations,this.visCustomizations)){this.visCustomizations=visCustomizations;this.vis.uiState.off("change",this.uiStateChangeHandler);this.vis.uiState.clearAllKeys();if(visCustomizations.vis){this.vis.uiState.set("vis",visCustomizations.vis);getKeys(visCustomizations).forEach(key=>{this.vis.uiState.set(key,visCustomizations[key])})}if(visCustomizations.table){this.vis.uiState.set("table",visCustomizations.table)}this.vis.uiState.on("change",this.uiStateChangeHandler)}}else if(this.parent){this.vis.uiState.clearAllKeys()}}handleChanges(){this.transferCustomizationsToUiState();let dirty=false;if(!external_kbnSharedDeps_Lodash_default.a.isEqual(this.input.timeRange,this.timeRange)){this.timeRange=external_kbnSharedDeps_Lodash_default.a.cloneDeep(this.input.timeRange);dirty=true}if(!data_public_["esFilters"].onlyDisabledFiltersChanged(this.input.filters,this.filters)){this.filters=this.input.filters;dirty=true}if(!external_kbnSharedDeps_Lodash_default.a.isEqual(this.input.query,this.query)){this.query=this.input.query;dirty=true}if(this.searchSessionId!==this.input.searchSessionId){this.searchSessionId=this.input.searchSessionId;dirty=true}if(this.syncColors!==this.input.syncColors){this.syncColors=this.input.syncColors;dirty=true}if(this.vis.description&&this.domNode){this.domNode.setAttribute("data-description",this.vis.description)}return dirty}async render(domNode){this.timeRange=external_kbnSharedDeps_Lodash_default.a.cloneDeep(this.input.timeRange);this.transferCustomizationsToUiState();const div=document.createElement("div");div.className=`visualize panel-content panel-content--fullWidth`;domNode.appendChild(div);this.domNode=div;super.render(this.domNode);const expressions=getExpressions();this.handler=new expressions.ExpressionLoader(this.domNode,undefined,{onRenderError:(element,error)=>{this.onContainerError(error)}});this.subscriptions.push(this.handler.events$.subscribe(async event=>{if(event.name==="bounds"){const agg=this.vis.data.aggs.aggs.find(a=>Object(external_kbnSharedDeps_Lodash_["get"])(a,"type.dslName")==="geohash_grid");if(agg&&agg.params.precision!==event.data.precision||agg&&!external_kbnSharedDeps_Lodash_default.a.isEqual(agg.params.boundingBox,event.data.boundingBox)){agg.params.boundingBox=event.data.boundingBox;agg.params.precision=event.data.precision;this.reload()}return}if(!this.input.disableTriggers){const triggerId=Object(external_kbnSharedDeps_Lodash_["get"])(VIS_EVENT_TO_TRIGGER,event.name,VIS_EVENT_TO_TRIGGER.filter);let context;if(triggerId===VIS_EVENT_TO_TRIGGER.applyFilter){var _this$vis$data$indexP;context={embeddable:this,timeFieldName:(_this$vis$data$indexP=this.vis.data.indexPattern)===null||_this$vis$data$indexP===void 0?void 0:_this$vis$data$indexP.timeFieldName,...event.data}}else{var _this$vis$data$indexP2;context={embeddable:this,data:{timeFieldName:(_this$vis$data$indexP2=this.vis.data.indexPattern)===null||_this$vis$data$indexP2===void 0?void 0:_this$vis$data$indexP2.timeFieldName,...event.data}}}getUiActions().getTrigger(triggerId).exec(context)}}));if(this.vis.description){div.setAttribute("data-description",this.vis.description)}div.setAttribute("data-test-subj","visualizationLoader");div.setAttribute("data-shared-item","");this.subscriptions.push(this.handler.loading$.subscribe(this.onContainerLoading));this.subscriptions.push(this.handler.render$.subscribe(this.onContainerRender));this.updateHandler()}destroy(){super.destroy();this.subscriptions.forEach(s=>s.unsubscribe());this.vis.uiState.off("change",this.uiStateChangeHandler);this.vis.uiState.off("reload",this.reload);if(this.handler){this.handler.destroy();this.handler.getElement().remove()}}async updateHandler(){const expressionParams={searchContext:{timeRange:this.timeRange,query:this.input.query,filters:this.input.filters},searchSessionId:this.input.searchSessionId,syncColors:this.input.syncColors,uiState:this.vis.uiState,inspectorAdapters:this.inspectorAdapters};if(this.abortController){this.abortController.abort()}this.abortController=new AbortController;const abortController=this.abortController;this.expression=await toExpressionAst(this.vis,{timefilter:this.timefilter,timeRange:this.timeRange,abortSignal:this.abortController.signal});if(this.handler&&!abortController.signal.aborted){this.handler.update(this.expression,expressionParams)}}supportedTriggers(){var _this$vis$type$getSup,_this$vis$type$getSup2,_this$vis$type;return(_this$vis$type$getSup=(_this$vis$type$getSup2=(_this$vis$type=this.vis.type).getSupportedTriggers)===null||_this$vis$type$getSup2===void 0?void 0:_this$vis$type$getSup2.call(_this$vis$type))!==null&&_this$vis$type$getSup!==void 0?_this$vis$type$getSup:[]}}var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(38);var events=__webpack_require__(39);var elastic_safer_lodash_set=__webpack_require__(8);function persisted_state_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function prepSetParams(key,value,path){if(value===undefined&&(Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(key)||path.length>0)){value=key;key=undefined}return{value:Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(value),key:key}}class persisted_state_PersistedState extends events["EventEmitter"]{constructor(value,path){super();persisted_state_defineProperty(this,"_path",void 0);persisted_state_defineProperty(this,"_initialized",void 0);persisted_state_defineProperty(this,"_changedState",void 0);persisted_state_defineProperty(this,"_defaultState",void 0);persisted_state_defineProperty(this,"_mergedState",void 0);this._path=this.setPath(path);if(!this._path.length&&value&&!Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(value)){throw new Error("State value must be a plain object")}value=value||this.getDefault();this.set(value);this._initialized=true}get(key,defaultValue){if(!this.hasPath()&&key===undefined){return this._mergedState}return Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(Object(external_kbnSharedDeps_Lodash_["get"])(this._mergedState,this.getIndex(key||""),defaultValue))}set(key,value){const params=prepSetParams(key,value,this._path);const val=this.setValue(params.key,params.value);this.emit("set");return val}setSilent(key,value){const params=prepSetParams(key,value,this._path);if(params.key||params.value){return this.setValue(params.key,params.value,true)}}clearAllKeys(){Object.getOwnPropertyNames(this._changedState).forEach(key=>{this.set(key,null)})}reset(path){const keyPath=this.getIndex(path);const origValue=Object(external_kbnSharedDeps_Lodash_["get"])(this._defaultState,keyPath);const currentValue=Object(external_kbnSharedDeps_Lodash_["get"])(this._mergedState,keyPath);if(origValue===undefined){this.cleanPath(path,this._mergedState)}else{Object(elastic_safer_lodash_set["set"])(this._mergedState,keyPath,origValue)}this.cleanPath(path,this._changedState);if(!Object(external_kbnSharedDeps_Lodash_["isEqual"])(currentValue,origValue))this.emit("change")}getChanges(){return Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(this._changedState)}toJSON(){return this.get()}toString(){return JSON.stringify(this.toJSON())}fromString(input){return this.set(JSON.parse(input))}getIndex(key){if(key===undefined)return this._path;return[...this._path||[],...Object(external_kbnSharedDeps_Lodash_["toPath"])(key)]}getPartialIndex(key){const keyPath=this.getIndex(key);return keyPath.slice(this._path.length)}cleanPath(path,stateTree){const partialPath=this.getPartialIndex(path);let remove=true;if(Array.isArray(partialPath)){while(partialPath.length>0){const lastKey=partialPath.splice(partialPath.length-1,1)[0];const statePath=[...this._path,partialPath];const stateVal=statePath.length>0?Object(external_kbnSharedDeps_Lodash_["get"])(stateTree,statePath):stateTree;if(!Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(stateVal))return;if(remove)delete stateVal[lastKey];if(Object.keys(stateVal).length>0)remove=false}}}getDefault(){return this.hasPath()?undefined:{}}setPath(path){if(Array.isArray(path)){return path}if(Object(external_kbnSharedDeps_Lodash_["isString"])(path)){return[...this.getIndex(path)]}return[]}hasPath(){return this._path.length>0}setValue(key,value,silent=false){const self=this;let stateChanged=false;const initialState=!this._initialized;const keyPath=this.getIndex(key);const hasKeyPath=keyPath.length>0;if(initialState){this._changedState={};if(!this.hasPath()&&key===undefined)this._defaultState=value;else this._defaultState=Object(elastic_safer_lodash_set["set"])({},keyPath,value)}if(!initialState){if(!this.hasPath()&&key===undefined){stateChanged=!Object(external_kbnSharedDeps_Lodash_["isEqual"])(this._changedState,value);this._changedState=value;this._mergedState=Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(value)}else{const curVal=hasKeyPath?this.get(keyPath):this._mergedState;stateChanged=!Object(external_kbnSharedDeps_Lodash_["isEqual"])(curVal,value);if(Array.isArray(Object(external_kbnSharedDeps_Lodash_["get"])(this._mergedState,keyPath))){if(hasKeyPath){Object(elastic_safer_lodash_set["set"])(this._mergedState,keyPath,undefined)}else{this._mergedState=undefined}}if(hasKeyPath){Object(elastic_safer_lodash_set["set"])(this._changedState,keyPath,value)}else{this._changedState=Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(value)?value:{}}}}const targetObj=this._mergedState||Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(this._defaultState);const sourceObj=Object(external_kbnSharedDeps_Lodash_["merge"])({},this._changedState);const mergeMethod=function(targetValue,sourceValue,mergeKey){if(!initialState&&Object(external_kbnSharedDeps_Lodash_["isEqual"])(keyPath,self.getIndex(mergeKey))){return sourceValue===undefined?targetValue:sourceValue}};this._mergedState=Object(external_kbnSharedDeps_Lodash_["mergeWith"])(targetObj,sourceObj,mergeMethod);if(Object(external_kbnSharedDeps_Lodash_["isEqual"])(this._mergedState,this._defaultState))this._changedState={};if(!silent&&stateChanged)this.emit("change",key);return this}}function vis_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const getSearchSource=async(inputSearchSource,savedSearchId)=>{const searchSource=inputSearchSource.createCopy();if(savedSearchId){const savedSearch=await getSavedSearchLoader().get(savedSearchId);searchSource.setParent(savedSearch.searchSource)}searchSource.setField("size",0);return searchSource};class vis_Vis{constructor(visType,visState={}){vis_defineProperty(this,"type",void 0);vis_defineProperty(this,"id",void 0);vis_defineProperty(this,"title","");vis_defineProperty(this,"description","");vis_defineProperty(this,"params",void 0);vis_defineProperty(this,"data",{});vis_defineProperty(this,"uiState",void 0);this.type=this.getType(visType);this.params=this.getParams(visState.params);this.uiState=new persisted_state_PersistedState(visState.uiState);this.id=visState.id}getType(visType){const type=getTypes().get(visType);if(!type){const errorMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.visualizationTypeInvalidMessage",{defaultMessage:'Invalid visualization type "{visType}"',values:{visType:visType}});throw new Error(errorMessage)}return type}getParams(params){var _this$type$visConfig$,_this$type$visConfig;return Object(external_kbnSharedDeps_Lodash_["defaults"])({},Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(params!==null&&params!==void 0?params:{}),Object(external_kbnSharedDeps_Lodash_["cloneDeep"])((_this$type$visConfig$=(_this$type$visConfig=this.type.visConfig)===null||_this$type$visConfig===void 0?void 0:_this$type$visConfig.defaults)!==null&&_this$type$visConfig$!==void 0?_this$type$visConfig$:{}))}async setState(state){let typeChanged=false;if(state.type&&this.type.name!==state.type){this.type=this.getType(state.type);typeChanged=true}if(state.title!==undefined){this.title=state.title}if(state.description!==undefined){this.description=state.description}if(state.params||typeChanged){this.params=this.getParams(state.params)}if(state.data&&state.data.searchSource){this.data.searchSource=await getSearch().searchSource.create(state.data.searchSource);this.data.indexPattern=this.data.searchSource.getField("index")}if(state.data&&state.data.savedSearchId){this.data.savedSearchId=state.data.savedSearchId;if(this.data.searchSource){this.data.searchSource=await getSearchSource(this.data.searchSource,this.data.savedSearchId);this.data.indexPattern=this.data.searchSource.getField("index")}}if(state.data&&(state.data.aggs||!this.data.aggs)){const aggs=state.data.aggs?Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(state.data.aggs):[];const configStates=this.initializeDefaultsFromSchemas(aggs,this.type.schemas.all||[]);if(!this.data.indexPattern){if(aggs.length){const errorMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.initializeWithoutIndexPatternErrorMessage",{defaultMessage:"Trying to initialize aggs without index pattern"});throw new Error(errorMessage)}return}this.data.aggs=getAggs().createAggConfigs(this.data.indexPattern,configStates)}}clone(){const{data:data,...restOfSerialized}=this.serialize();const vis=new vis_Vis(this.type.name,restOfSerialized);vis.setState({...restOfSerialized,data:{}});const aggs=this.data.indexPattern?getAggs().createAggConfigs(this.data.indexPattern,data.aggs):undefined;vis.data={...this.data,aggs:aggs};return vis}serialize(){const aggs=this.data.aggs?this.data.aggs.aggs.map(agg=>agg.toJSON()):[];return{id:this.id,title:this.title,description:this.description,type:this.type.name,params:Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(this.params),uiState:this.uiState.toJSON(),data:{aggs:aggs,searchSource:this.data.searchSource?this.data.searchSource.getSerializedFields():{},savedSearchId:this.data.savedSearchId}}}isHierarchical(){if(Object(external_kbnSharedDeps_Lodash_["isFunction"])(this.type.hierarchicalData)){return!!this.type.hierarchicalData(this)}else{return!!this.type.hierarchicalData}}initializeDefaultsFromSchemas(configStates,schemas){const newConfigs=[...configStates];schemas.filter(schema=>Array.isArray(schema.defaults)&&schema.defaults.length>0).filter(schema=>!configStates.find(agg=>agg.schema&&agg.schema===schema.name)).forEach(schema=>{const defaultSchemaConfig=schema.defaults.slice(0,schema.max);defaultSchemaConfig.forEach(d=>newConfigs.push(d))});return newConfigs}}const NewVisModal=Object(external_kbnSharedDeps_React_["lazy"])(()=>__webpack_require__.e(1).then(__webpack_require__.bind(null,117)));function showNewVisModal({editorParams:editorParams=[],onClose:onClose,originatingApp:originatingApp,outsideVisualizeApp:outsideVisualizeApp}={}){const container=document.createElement("div");let isClosed=false;const handleClose=()=>{if(isClosed)return;external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(container);document.body.removeChild(container);if(onClose){onClose()}isClosed=true};document.body.appendChild(container);const element=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Suspense"],{fallback:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPortal"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiProgress"],{size:"xs",position:"fixed"}))},external_kbnSharedDeps_React_default.a.createElement(NewVisModal,{isOpen:true,onClose:handleClose,originatingApp:originatingApp,stateTransfer:getEmbeddable().getStateTransfer(),outsideVisualizeApp:outsideVisualizeApp,editorParams:editorParams,visTypesRegistry:getTypes(),addBasePath:getHttp().basePath.prepend,uiSettings:getUISettings(),savedObjects:getSavedObjects(),usageCollection:getUsageCollector(),application:getApplication(),docLinks:getDocLinks()})));external_kbnSharedDeps_ReactDom_default.a.render(element,container);return()=>handleClose()}function convertHeatmapLabelColor(visState){const hasOverwriteColorParam=external_kbnSharedDeps_Lodash_default.a.get(visState,"params.valueAxes[0].labels.overwriteColor")!==undefined;if(visState.type==="heatmap"&&visState.params&&!hasOverwriteColorParam){const showLabels=external_kbnSharedDeps_Lodash_default.a.get(visState,"params.valueAxes[0].labels.show",false);const color=external_kbnSharedDeps_Lodash_default.a.get(visState,"params.valueAxes[0].labels.color","#555");Object(elastic_safer_lodash_set["set"])(visState,"params.valueAxes[0].labels.overwriteColor",showLabels&&color!=="#555")}}function convertTermAggregation(visState){if(visState.aggs){visState.aggs.forEach(agg=>{if(agg.type==="terms"&&agg.params&&agg.params.orderBy==="_term"){agg.params.orderBy="_key"}})}}function convertPropertyNames(visState){if(typeof external_kbnSharedDeps_Lodash_default.a.get(visState,"params.showMeticsAtAllLevels")==="boolean"){visState.params.showMetricsAtAllLevels=visState.params.showMeticsAtAllLevels;delete visState.params.showMeticsAtAllLevels}}function convertDateHistogramScaleMetrics(visState){if(visState.aggs){visState.aggs.forEach(agg=>{if(agg.type==="date_histogram"&&agg.params&&agg.params.interval!=="auto"&&agg.params.scaleMetricValues===undefined){agg.params.scaleMetricValues=true}})}}function convertSeriesParams(visState){if(visState.params.seriesParams){return}const isUserDefinedYAxis=visState.params.setYExtents;const defaultYExtents=visState.params.defaultYExtents;const mode=["stacked","overlap"].includes(visState.params.mode)?"normal":visState.params.mode||"normal";if(!visState.params.valueAxes||!visState.params.valueAxes.length){visState.params.valueAxes=[{id:"ValueAxis-1",name:"LeftAxis-1",type:"value",position:"left",show:true,style:{},scale:{type:"linear",mode:"normal"},labels:{show:true,rotate:0,filter:false,truncate:100},title:{text:"Count"}}]}visState.params.valueAxes[0].scale={...visState.params.valueAxes[0].scale,type:visState.params.scale||"linear",setYExtents:visState.params.setYExtents||false,defaultYExtents:visState.params.defaultYExtents||false,boundsMargin:defaultYExtents?visState.params.boundsMargin:0,min:isUserDefinedYAxis?visState.params.yAxis.min:undefined,max:isUserDefinedYAxis?visState.params.yAxis.max:undefined,mode:mode};const interpolate=visState.params.smoothLines?"cardinal":visState.params.interpolate;const stacked=["stacked","percentage","wiggle","silhouette"].includes(visState.params.mode);visState.params.seriesParams=[{show:true,type:visState.params.type||"line",mode:stacked?"stacked":"normal",interpolate:interpolate,drawLinesBetweenPoints:visState.params.drawLinesBetweenPoints,showCircles:visState.params.showCircles,radiusRatio:visState.params.radiusRatio,data:{label:"Count",id:"1"},lineWidth:2,valueAxis:"ValueAxis-1"}]}const updateOldState=visState=>{if(!visState)return visState;const newState=external_kbnSharedDeps_Lodash_default.a.cloneDeep(visState);convertTermAggregation(newState);convertPropertyNames(newState);convertDateHistogramScaleMetrics(newState);if(visState.params&&["line","area","histogram"].includes(visState.params.type)){convertSeriesParams(newState)}if(visState.type==="gauge"&&visState.fontSize){delete newState.fontSize;Object(elastic_safer_lodash_set["set"])(newState,"gauge.style.fontSize",visState.fontSize)}if(["gauge","metric"].includes(visState.type)&&external_kbnSharedDeps_Lodash_default.a.get(visState.params,"gauge.gaugeType",null)==="Metric"){newState.type="metric";newState.params.addLegend=false;newState.params.type="metric";newState.params.metric=newState.params.gauge;delete newState.params.gauge;delete newState.params.metric.gaugeType;delete newState.params.metric.gaugeStyle;delete newState.params.metric.backStyle;delete newState.params.metric.scale;delete newState.params.metric.type;delete newState.params.metric.orientation;delete newState.params.metric.verticalSplit;delete newState.params.metric.autoExtend;newState.params.metric.metricColorMode=newState.params.metric.gaugeColorMode;delete newState.params.metric.gaugeColorMode}else if(visState.type==="metric"&&external_kbnSharedDeps_Lodash_default.a.get(visState.params,"gauge.gaugeType","Metric")!=="Metric"){newState.type="gauge";newState.params.type="gauge"}convertHeatmapLabelColor(newState);return newState};function extractReferences({attributes:attributes,references:references=[]}){const updatedAttributes={...attributes};const updatedReferences=[...references];if(updatedAttributes.searchSourceFields){const[searchSource,searchSourceReferences]=Object(data_public_["extractSearchSourceReferences"])(updatedAttributes.searchSourceFields);updatedAttributes.searchSourceFields=searchSource;searchSourceReferences.forEach(r=>updatedReferences.push(r))}if(updatedAttributes.savedSearchId){updatedReferences.push({name:"search_0",type:"search",id:String(updatedAttributes.savedSearchId)});delete updatedAttributes.savedSearchId;updatedAttributes.savedSearchRefName="search_0"}if(updatedAttributes.visState){const visState=JSON.parse(String(updatedAttributes.visState));const controls=visState.params&&visState.params.controls||[];controls.forEach((control,i)=>{if(!control.indexPattern){return}control.indexPatternRefName=`control_${i}_index_pattern`;updatedReferences.push({name:control.indexPatternRefName,type:"index-pattern",id:control.indexPattern});delete control.indexPattern});updatedAttributes.visState=JSON.stringify(visState)}return{references:updatedReferences,attributes:updatedAttributes}}function injectReferences(savedObject,references){if(savedObject.searchSourceFields){savedObject.searchSourceFields=Object(data_public_["injectSearchSourceReferences"])(savedObject.searchSourceFields,references)}if(savedObject.savedSearchRefName){const savedSearchReference=references.find(reference=>reference.name===savedObject.savedSearchRefName);if(!savedSearchReference){throw new Error(`Could not find saved search reference "${savedObject.savedSearchRefName}"`)}savedObject.savedSearchId=savedSearchReference.id;delete savedObject.savedSearchRefName}if(savedObject.visState){const controls=savedObject.visState.params&&savedObject.visState.params.controls||[];controls.forEach(control=>{if(!control.indexPatternRefName){return}const reference=references.find(ref=>ref.name===control.indexPatternRefName);if(!reference){throw new Error(`Could not find index pattern reference "${control.indexPatternRefName}"`)}control.indexPattern=reference.id;delete control.indexPatternRefName})}}var discover_public_=__webpack_require__(24);function _saved_vis_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const convertToSerializedVis=savedVis=>{const{id:id,title:title,description:description,visState:visState,uiStateJSON:uiStateJSON,searchSourceFields:searchSourceFields}=savedVis;const aggs=searchSourceFields&&searchSourceFields.index?visState.aggs||[]:visState.aggs;return{id:id,title:title,type:visState.type,description:description,params:visState.params,uiState:JSON.parse(uiStateJSON||"{}"),data:{aggs:aggs,searchSource:searchSourceFields,savedSearchId:savedVis.savedSearchId}}};const convertFromSerializedVis=vis=>({id:vis.id,title:vis.title,description:vis.description,visState:{title:vis.title,type:vis.type,aggs:vis.data.aggs,params:vis.params},uiStateJSON:JSON.stringify(vis.uiState),searchSourceFields:vis.data.searchSource,savedSearchId:vis.data.savedSearchId});function createSavedVisClass(services){const savedSearch=Object(discover_public_["createSavedSearchesLoader"])(services);class SavedVis extends services.savedObjects.SavedObjectClass{constructor(opts={}){if(typeof opts!=="object"){opts={id:opts}}const visState=!opts.type?null:{type:opts.type};super({type:SavedVis.type,mapping:SavedVis.mapping,extractReferences:extractReferences,injectReferences:injectReferences,id:opts.id||"",indexPattern:opts.indexPattern,defaults:{title:"",visState:visState,uiStateJSON:"{}",description:"",savedSearchId:opts.savedSearchId,version:1},afterESResp:async savedObject=>{var _savedVis$searchSourc;const savedVis=savedObject;savedVis.visState=await updateOldState(savedVis.visState);if((_savedVis$searchSourc=savedVis.searchSourceFields)!==null&&_savedVis$searchSourc!==void 0&&_savedVis$searchSourc.index){await services.indexPatterns.get(savedVis.searchSourceFields.index)}if(savedVis.savedSearchId){await savedSearch.get(savedVis.savedSearchId)}return savedVis}});this.showInRecentlyAccessed=true;this.getFullPath=()=>`/app/visualize#/edit/${this.id}`}}_saved_vis_defineProperty(SavedVis,"type","visualization");_saved_vis_defineProperty(SavedVis,"mapping",{title:"text",visState:"json",uiStateJSON:"text",description:"text",savedSearchId:"keyword",version:"integer"});_saved_vis_defineProperty(SavedVis,"fieldOrder",["title","description"]);return SavedVis}var constants=__webpack_require__(10);const createVisEmbeddableFromObject=deps=>async(vis,input,savedVisualizationsLoader,attributeService,parent)=>{const savedVisualizations=getSavedVisualizationsLoader();try{var _getCapabilities$dash;const visId=vis.id;const editPath=visId?savedVisualizations.urlFor(visId):"#/edit_by_value";const editUrl=visId?getHttp().basePath.prepend(`/app/visualize${savedVisualizations.urlFor(visId)}`):"";const isLabsEnabled=getUISettings().get(constants["a"]);if(!isLabsEnabled&&vis.type.stage==="experimental"){return new disabled_lab_embeddable_DisabledLabEmbeddable(vis.title,input)}let indexPatterns=[];if(vis.type.getUsedIndexPattern){indexPatterns=await vis.type.getUsedIndexPattern(vis.params)}else if(vis.data.indexPattern){indexPatterns=[vis.data.indexPattern]}const capabilities={visualizeSave:Boolean(getCapabilities().visualize.save),dashboardSave:Boolean((_getCapabilities$dash=getCapabilities().dashboard)===null||_getCapabilities$dash===void 0?void 0:_getCapabilities$dash.showWriteControls)};return new visualize_embeddable_VisualizeEmbeddable(getTimeFilter(),{vis:vis,indexPatterns:indexPatterns,editPath:editPath,editUrl:editUrl,deps:deps,capabilities:capabilities},input,attributeService,savedVisualizationsLoader,parent)}catch(e){console.error(e);return new embeddable_public_["ErrorEmbeddable"](e,input,parent)}};var savedObjects_public_=__webpack_require__(23);function visualize_embeddable_factory_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class visualize_embeddable_factory_VisualizeEmbeddableFactory{constructor(deps){this.deps=deps;visualize_embeddable_factory_defineProperty(this,"type",VISUALIZE_EMBEDDABLE_TYPE);visualize_embeddable_factory_defineProperty(this,"attributeService",void 0);visualize_embeddable_factory_defineProperty(this,"savedObjectMetaData",{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.savedObjectName",{defaultMessage:"Visualization"}),includeFields:["visState"],type:"visualization",getIconForSavedObject:savedObject=>{var _getTypes$get;return((_getTypes$get=getTypes().get(JSON.parse(savedObject.attributes.visState).type))===null||_getTypes$get===void 0?void 0:_getTypes$get.icon)||"visualizeApp"},getTooltipForSavedObject:savedObject=>{var _getTypes$get2;return`${savedObject.attributes.title} (${(_getTypes$get2=getTypes().get(JSON.parse(savedObject.attributes.visState).type))===null||_getTypes$get2===void 0?void 0:_getTypes$get2.title})`},showSavedObject:savedObject=>{const typeName=JSON.parse(savedObject.attributes.visState).type;const visType=getTypes().get(typeName);if(!visType){return false}if(getUISettings().get(constants["a"])){return true}return visType.stage!=="experimental"}})}async isEditable(){return getCapabilities().visualize.save}getDisplayName(){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.displayName",{defaultMessage:"visualization"})}async getCurrentAppId(){return await this.deps.start().core.application.currentAppId$.pipe(Object(external_kbnSharedDeps_RxjsOperators_["first"])()).toPromise()}async getAttributeService(){if(!this.attributeService){this.attributeService=await this.deps.start().plugins.embeddable.getAttributeService(this.type,{saveMethod:this.saveMethod.bind(this),checkForDuplicateTitle:this.checkTitle.bind(this)})}return this.attributeService}async createFromSavedObject(savedObjectId,input,parent){const savedVisualizations=getSavedVisualizationsLoader();try{const savedObject=await savedVisualizations.get(savedObjectId);const visState=convertToSerializedVis(savedObject);const vis=new vis_Vis(savedObject.visState.type,visState);await vis.setState(visState);return createVisEmbeddableFromObject(this.deps)(vis,input,savedVisualizations,await this.getAttributeService(),parent)}catch(e){console.error(e);return new embeddable_public_["ErrorEmbeddable"](e,input,parent)}}async create(input,parent){if(input.savedVis){const visState=input.savedVis;const vis=new vis_Vis(visState.type,visState);await vis.setState(visState);const savedVisualizations=getSavedVisualizationsLoader();return createVisEmbeddableFromObject(this.deps)(vis,input,savedVisualizations,await this.getAttributeService(),parent)}else{showNewVisModal({originatingApp:await this.getCurrentAppId(),outsideVisualizeApp:true});return undefined}}async saveMethod(attributes){try{var _visObj$data$searchSo;const{title:title,savedVis:savedVis}=attributes;const visObj=attributes.vis;if(!savedVis){throw new Error("No Saved Vis")}const saveOptions={confirmOverwrite:false,returnToOrigin:true,isTitleDuplicateConfirmed:true};savedVis.title=title;savedVis.copyOnSave=false;savedVis.description="";savedVis.searchSourceFields=visObj===null||visObj===void 0?void 0:(_visObj$data$searchSo=visObj.data.searchSource)===null||_visObj$data$searchSo===void 0?void 0:_visObj$data$searchSo.getSerializedFields();const serializedVis=visObj.serialize();const{params:params,data:data}=serializedVis;savedVis.visState={title:title,type:serializedVis.type,params:params,aggs:data.aggs};if(visObj){savedVis.uiStateJSON=visObj===null||visObj===void 0?void 0:visObj.uiState.toString()}const id=await savedVis.save(saveOptions);if(!id||id===""){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.savingVisualizationFailed.errorMsg",{defaultMessage:"Saving a visualization failed"}))}return{id:id}}catch(error){throw error}}async checkTitle(props){const savedObjectsClient=await this.deps.start().core.savedObjects.client;const overlays=await this.deps.start().core.overlays;return Object(savedObjects_public_["checkForDuplicateTitle"])({title:props.newTitle,copyOnSave:false,lastSavedTitle:"",getEsType:()=>this.type,getDisplayName:this.getDisplayName||(()=>this.type)},props.isTitleDuplicateConfirmed,props.onTitleDuplicate,{savedObjectsClient:savedObjectsClient,overlays:overlays})}extract(_state){var _state$savedVis,_state$savedVis2,_state$savedVis3;const state=_state;const references=[];if((_state$savedVis=state.savedVis)!==null&&_state$savedVis!==void 0&&_state$savedVis.data.searchSource){const[,searchSourceReferences]=Object(data_public_["extractSearchSourceReferences"])(state.savedVis.data.searchSource);references.push(...searchSourceReferences)}if((_state$savedVis2=state.savedVis)!==null&&_state$savedVis2!==void 0&&_state$savedVis2.data.savedSearchId){references.push({name:"search_0",type:"search",id:String(state.savedVis.data.savedSearchId)})}if((_state$savedVis3=state.savedVis)!==null&&_state$savedVis3!==void 0&&_state$savedVis3.params.controls){const controls=state.savedVis.params.controls;controls.forEach((control,i)=>{if(!control.indexPattern){return}control.indexPatternRefName=`control_${i}_index_pattern`;references.push({name:control.indexPatternRefName,type:"index-pattern",id:control.indexPattern})})}return{state:_state,references:references}}}const range=()=>({name:"range",help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.range.help",{defaultMessage:"Generates range object"}),type:"range",args:{from:{types:["number"],help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.range.from.help",{defaultMessage:"Start of range"}),required:true},to:{types:["number"],help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.range.to.help",{defaultMessage:"End of range"}),required:true}},fn:(context,args)=>({type:"range",from:args.from,to:args.to})});const visDimension=()=>({name:"visdimension",help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.visDimension.help",{defaultMessage:"Generates visConfig dimension object"}),type:"vis_dimension",inputTypes:["datatable"],args:{accessor:{types:["string","number"],aliases:["_"],help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.visDimension.accessor.help",{defaultMessage:"Column in your dataset to use (either column index or column name)"})},format:{types:["string"],default:"string",help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.visDimension.format.help",{defaultMessage:"Format"})},formatParams:{types:["string"],default:'"{}"',help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.visDimension.formatParams.help",{defaultMessage:"Format params"})}},fn:(input,args)=>{const accessor=typeof args.accessor==="number"?args.accessor:input.columns.find(c=>c.id===args.accessor);if(accessor===undefined){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.visDimension.error.accessor",{defaultMessage:"Column name provided is invalid"}))}return{type:"vis_dimension",accessor:accessor,format:{id:args.format,params:JSON.parse(args.formatParams)}}}});async function findListItems({visTypes:visTypes,search:search,size:size,savedObjectsClient:savedObjectsClient,mapSavedObjectApiHits:mapSavedObjectApiHits,references:references}){const extensions=visTypes.map(v=>{var _v$appExtensions;return(_v$appExtensions=v.appExtensions)===null||_v$appExtensions===void 0?void 0:_v$appExtensions.visualizations}).filter(Boolean);const extensionByType=extensions.reduce((acc,m)=>m.docTypes.reduce((_acc,type)=>{acc[type]=m;return acc},acc),{});const searchOption=(field,...defaults)=>external_kbnSharedDeps_Lodash_default()(extensions).map(field).concat(defaults).compact().flatten().uniq().value();const searchOptions={type:searchOption("docTypes","visualization"),searchFields:searchOption("searchFields","title^3","description"),search:search?`${search}*`:undefined,perPage:size,page:1,defaultSearchOperator:"AND",hasReference:references};const{total:total,savedObjects:savedObjects}=await savedObjectsClient.find(searchOptions);return{total:total,hits:savedObjects.map(savedObject=>{const config=extensionByType[savedObject.type];if(config){return{...config.toListItem(savedObject),references:savedObject.references}}else{return mapSavedObjectApiHits(savedObject)}})}}function saved_visualizations_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createSavedVisLoader(services){const{savedObjectsClient:savedObjectsClient,visualizationTypes:visualizationTypes}=services;class SavedObjectLoaderVisualize extends savedObjects_public_["SavedObjectLoader"]{constructor(...args){super(...args);saved_visualizations_defineProperty(this,"mapHitSource",(source,id,references=[])=>{const visTypes=visualizationTypes;source.id=id;source.references=references;source.url=this.urlFor(id);let typeName=source.typeName;if(source.visState){try{typeName=JSON.parse(String(source.visState)).type}catch(e){}}if(!typeName||!visTypes.get(typeName)){source.error="Unknown visualization type";return source}source.type=visTypes.get(typeName);source.savedObjectType="visualization";source.icon=source.type.icon;source.image=source.type.image;source.typeTitle=source.type.title;source.editUrl=`/edit/${id}`;return source})}urlFor(id){return`#/edit/${encodeURIComponent(id)}`}findListItems(search="",sizeOrOptions=100){const{size:size=100,references:references=undefined}=typeof sizeOrOptions==="number"?{size:sizeOrOptions}:sizeOrOptions;return findListItems({search:search,size:size,references:references,mapSavedObjectApiHits:this.mapSavedObjectApiHits.bind(this),savedObjectsClient:savedObjectsClient,visTypes:visualizationTypes.getAliases()})}}const SavedVis=createSavedVisClass(services);return new SavedObjectLoaderVisualize(SavedVis,savedObjectsClient)}function plugin_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class plugin_VisualizationsPlugin{constructor(initializerContext){plugin_defineProperty(this,"types",new vis_types["a"]);plugin_defineProperty(this,"getStartServicesOrDie",void 0)}setup(core,{expressions:expressions,embeddable:embeddable,usageCollection:usageCollection,data:data}){const start=this.getStartServicesOrDie=Object(public_["createStartServicesGetter"])(core.getStartServices);setUISettings(core.uiSettings);setUsageCollector(usageCollection);expressions.registerFunction(range);expressions.registerFunction(visDimension);const embeddableFactory=new visualize_embeddable_factory_VisualizeEmbeddableFactory({start:start});embeddable.registerEmbeddableFactory(VISUALIZE_EMBEDDABLE_TYPE,embeddableFactory);return{...this.types.setup()}}start(core,{data:data,expressions:expressions,uiActions:uiActions,embeddable:embeddable,dashboard:dashboard,savedObjects:savedObjects}){const types=this.types.start();setTypes(types);setEmbeddable(embeddable);setApplication(core.application);setCapabilities(core.application.capabilities);setHttp(core.http);setSavedObjects(core.savedObjects);setDocLinks(core.docLinks);setSearch(data.search);setExpressions(expressions);setUiActions(uiActions);setTimeFilter(data.query.timefilter.timefilter);setAggs(data.search.aggs);setOverlays(core.overlays);setChrome(core.chrome);const savedVisualizationsLoader=createSavedVisLoader({savedObjectsClient:core.savedObjects.client,indexPatterns:data.indexPatterns,savedObjects:savedObjects,visualizationTypes:types});setSavedVisualizationsLoader(savedVisualizationsLoader);const savedSearchLoader=Object(discover_public_["createSavedSearchesLoader"])({savedObjectsClient:core.savedObjects.client,savedObjects:savedObjects});setSavedSearchLoader(savedSearchLoader);return{...types,showNewVisModal:showNewVisModal,createVis:async(visType,visState)=>{const vis=new vis_Vis(visType);await vis.setState(visState);return vis},convertToSerializedVis:convertToSerializedVis,convertFromSerializedVis:convertFromSerializedVis,savedVisualizationsLoader:savedVisualizationsLoader,__LEGACY:{createVisEmbeddableFromObject:createVisEmbeddableFromObject({start:this.getStartServicesOrDie})}}}stop(){this.types.stop()}}var types_service=__webpack_require__(16);var classnames=__webpack_require__(40);var classnames_default=__webpack_require__.n(classnames);function visualization_noresults_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class visualization_noresults_VisualizationNoResults extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args);visualization_noresults_defineProperty(this,"containerDiv",external_kbnSharedDeps_React_default.a.createRef())}render(){return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"visNoResult",className:"visError",ref:this.containerDiv},external_kbnSharedDeps_React_default.a.createElement("div",{className:"item top"}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"item"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"visualizeApp",size:"m",color:"subdued"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.noResultsFoundTitle",{defaultMessage:"No results found"})))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"item bottom"}))}componentDidMount(){this.afterRender()}componentDidUpdate(){this.afterRender()}afterRender(){if(this.props.onInit){this.props.onInit()}}}const VisualizationContainer=({"data-test-subj":dataTestSubj="",className:className,children:children,handlers:handlers,showNoResult:showNoResult=false})=>{const classes=classnames_default()("visualization",className);const fallBack=external_kbnSharedDeps_React_default.a.createElement("div",{className:"visChart__spinner"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingChart"],{mono:true,size:"l"}));return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":dataTestSubj,className:classes},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Suspense"],{fallback:fallBack},showNoResult?external_kbnSharedDeps_React_default.a.createElement(visualization_noresults_VisualizationNoResults,{onInit:()=>handlers.done()}):children))};const{isDateHistogramBucketAggConfig:isDateHistogramBucketAggConfig}=data_public_["search"].aggs;const getVisSchemas=(vis,{timeRange:timeRange,timefilter:timefilter})=>{const createSchemaConfig=(accessor,agg)=>{if(isDateHistogramBucketAggConfig(agg)){agg.params.timeRange=timeRange;const bounds=agg.params.timeRange&&agg.fieldIsTimeField()?timefilter.calculateBounds(agg.params.timeRange):undefined;agg.buckets.setBounds(bounds);agg.buckets.setInterval(agg.params.interval)}const hasSubAgg=["derivative","moving_avg","serial_diff","cumulative_sum","sum_bucket","avg_bucket","min_bucket","max_bucket"].includes(agg.type.name);const formatAgg=hasSubAgg?agg.params.customMetric||agg.aggConfigs.getRequestAggById(agg.params.metricAgg):agg;const params={};if(agg.type.name==="geohash_grid"){params.precision=agg.params.precision;params.useGeocentroid=agg.params.useGeocentroid}const label=agg.makeLabel&&agg.makeLabel();return{accessor:accessor,format:formatAgg.toSerializedFieldFormat(),params:params,label:label,aggType:agg.type.name}};let cnt=0;const schemas={metric:[]};if(!vis.data.aggs){return schemas}const responseAggs=vis.data.aggs.getResponseAggs().filter(agg=>agg.enabled);const isHierarchical=vis.isHierarchical();const metrics=responseAggs.filter(agg=>agg.type.type==="metrics");responseAggs.forEach(agg=>{let skipMetrics=false;let schemaName=agg.schema;if(!schemaName){if(agg.type.name==="geo_centroid"){schemaName="geo_centroid"}else{cnt++;return}}if(schemaName==="split"){schemaName=`split_${vis.params.row?"row":"column"}`;skipMetrics=responseAggs.length-metrics.length>1}if(!schemas[schemaName]){schemas[schemaName]=[]}if(!isHierarchical||agg.type.type!=="metrics"){schemas[schemaName].push(createSchemaConfig(cnt++,agg))}if(isHierarchical&&(agg.type.type!=="metrics"||metrics.length===responseAggs.length)){metrics.forEach(metric=>{const schemaConfig=createSchemaConfig(cnt++,metric);if(!skipMetrics){schemas.metric.push(schemaConfig)}})}});return schemas};var common=__webpack_require__(12);var vis_type_alias_registry=__webpack_require__(7);function public_plugin(initializerContext){return new plugin_VisualizationsPlugin(initializerContext)}},function(module,exports){module.exports=__kbnSharedDeps__.MomentTimezone}]);