/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window["indexManagement_bundle_jsonpfunction"]=window["indexManagement_bundle_jsonpfunction"]||[]).push([[1],Array(35).concat([function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var _combineActions=_interopRequireDefault(__webpack_require__(152));exports.combineActions=_combineActions.default;var _createAction=_interopRequireDefault(__webpack_require__(58));exports.createAction=_createAction.default;var _createActions=_interopRequireDefault(__webpack_require__(155));exports.createActions=_createActions.default;var _createCurriedAction=_interopRequireDefault(__webpack_require__(164));exports.createCurriedAction=_createCurriedAction.default;var _handleAction=_interopRequireDefault(__webpack_require__(94));exports.handleAction=_handleAction.default;var _handleActions=_interopRequireDefault(__webpack_require__(167));exports.handleActions=_handleActions.default;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return API_BASE_PATH}));__webpack_require__.d(__webpack_exports__,"k",(function(){return INVALID_INDEX_PATTERN_CHARS}));__webpack_require__.d(__webpack_exports__,"l",(function(){return INVALID_TEMPLATE_NAME_CHARS}));__webpack_require__.d(__webpack_exports__,"c",(function(){return INDEX_CLOSED}));__webpack_require__.d(__webpack_exports__,"h",(function(){return INDEX_OPEN}));__webpack_require__.d(__webpack_exports__,"d",(function(){return INDEX_CLOSING}));__webpack_require__.d(__webpack_exports__,"i",(function(){return INDEX_OPENING}));__webpack_require__.d(__webpack_exports__,"j",(function(){return INDEX_REFRESHING}));__webpack_require__.d(__webpack_exports__,"e",(function(){return INDEX_FLUSHING}));__webpack_require__.d(__webpack_exports__,"f",(function(){return INDEX_FORCEMERGING}));__webpack_require__.d(__webpack_exports__,"g",(function(){return INDEX_MERGING}));__webpack_require__.d(__webpack_exports__,"b",(function(){return INDEX_CLEARING_CACHE}));__webpack_require__.d(__webpack_exports__,"n",(function(){return UIM_APP_NAME}));__webpack_require__.d(__webpack_exports__,"m",(function(){return UIM_APP_LOAD}));__webpack_require__.d(__webpack_exports__,"Z",(function(){return UIM_UPDATE_SETTINGS}));__webpack_require__.d(__webpack_exports__,"t",(function(){return UIM_INDEX_CLEAR_CACHE}));__webpack_require__.d(__webpack_exports__,"u",(function(){return UIM_INDEX_CLEAR_CACHE_MANY}));__webpack_require__.d(__webpack_exports__,"v",(function(){return UIM_INDEX_CLOSE}));__webpack_require__.d(__webpack_exports__,"w",(function(){return UIM_INDEX_CLOSE_MANY}));__webpack_require__.d(__webpack_exports__,"x",(function(){return UIM_INDEX_DELETE}));__webpack_require__.d(__webpack_exports__,"y",(function(){return UIM_INDEX_DELETE_MANY}));__webpack_require__.d(__webpack_exports__,"z",(function(){return UIM_INDEX_FLUSH}));__webpack_require__.d(__webpack_exports__,"A",(function(){return UIM_INDEX_FLUSH_MANY}));__webpack_require__.d(__webpack_exports__,"B",(function(){return UIM_INDEX_FORCE_MERGE}));__webpack_require__.d(__webpack_exports__,"C",(function(){return UIM_INDEX_FORCE_MERGE_MANY}));__webpack_require__.d(__webpack_exports__,"D",(function(){return UIM_INDEX_FREEZE}));__webpack_require__.d(__webpack_exports__,"E",(function(){return UIM_INDEX_FREEZE_MANY}));__webpack_require__.d(__webpack_exports__,"F",(function(){return UIM_INDEX_OPEN}));__webpack_require__.d(__webpack_exports__,"G",(function(){return UIM_INDEX_OPEN_MANY}));__webpack_require__.d(__webpack_exports__,"H",(function(){return UIM_INDEX_REFRESH}));__webpack_require__.d(__webpack_exports__,"I",(function(){return UIM_INDEX_REFRESH_MANY}));__webpack_require__.d(__webpack_exports__,"J",(function(){return UIM_INDEX_UNFREEZE}));__webpack_require__.d(__webpack_exports__,"K",(function(){return UIM_INDEX_UNFREEZE_MANY}));__webpack_require__.d(__webpack_exports__,"L",(function(){return UIM_SHOW_DETAILS_CLICK}));__webpack_require__.d(__webpack_exports__,"s",(function(){return UIM_DETAIL_PANEL_SUMMARY_TAB}));__webpack_require__.d(__webpack_exports__,"q",(function(){return UIM_DETAIL_PANEL_SETTINGS_TAB}));__webpack_require__.d(__webpack_exports__,"p",(function(){return UIM_DETAIL_PANEL_MAPPING_TAB}));__webpack_require__.d(__webpack_exports__,"r",(function(){return UIM_DETAIL_PANEL_STATS_TAB}));__webpack_require__.d(__webpack_exports__,"o",(function(){return UIM_DETAIL_PANEL_EDIT_SETTINGS_TAB}));__webpack_require__.d(__webpack_exports__,"V",(function(){return UIM_TEMPLATE_LIST_LOAD}));__webpack_require__.d(__webpack_exports__,"O",(function(){return UIM_TEMPLATE_DELETE}));__webpack_require__.d(__webpack_exports__,"P",(function(){return UIM_TEMPLATE_DELETE_MANY}));__webpack_require__.d(__webpack_exports__,"W",(function(){return UIM_TEMPLATE_SHOW_DETAILS_CLICK}));__webpack_require__.d(__webpack_exports__,"U",(function(){return UIM_TEMPLATE_DETAIL_PANEL_SUMMARY_TAB}));__webpack_require__.d(__webpack_exports__,"T",(function(){return UIM_TEMPLATE_DETAIL_PANEL_SETTINGS_TAB}));__webpack_require__.d(__webpack_exports__,"R",(function(){return UIM_TEMPLATE_DETAIL_PANEL_MAPPINGS_TAB}));__webpack_require__.d(__webpack_exports__,"Q",(function(){return UIM_TEMPLATE_DETAIL_PANEL_ALIASES_TAB}));__webpack_require__.d(__webpack_exports__,"S",(function(){return UIM_TEMPLATE_DETAIL_PANEL_PREVIEW_TAB}));__webpack_require__.d(__webpack_exports__,"N",(function(){return UIM_TEMPLATE_CREATE}));__webpack_require__.d(__webpack_exports__,"Y",(function(){return UIM_TEMPLATE_UPDATE}));__webpack_require__.d(__webpack_exports__,"M",(function(){return UIM_TEMPLATE_CLONE}));__webpack_require__.d(__webpack_exports__,"X",(function(){return UIM_TEMPLATE_SIMULATE}));const BASE_PATH="/management/data/index_management/";const API_BASE_PATH="/api/index_management";const INVALID_INDEX_PATTERN_CHARS=["\\","/","?",'"',"<",">","|"];const INVALID_TEMPLATE_NAME_CHARS=['"',"*","\\",",","?"];const INDEX_CLOSED="close";const INDEX_OPEN="open";const INDEX_CLOSING="closing";const INDEX_OPENING="opening";const INDEX_REFRESHING="refreshing";const INDEX_FLUSHING="flushing";const INDEX_FORCEMERGING="forcemerging";const INDEX_MERGING="merging";const INDEX_CLEARING_CACHE="clearing cache";const UIM_APP_NAME="index_management";const UIM_APP_LOAD="app_load";const UIM_UPDATE_SETTINGS="update_settings";const UIM_INDEX_CLEAR_CACHE="index_clear_cache";const UIM_INDEX_CLEAR_CACHE_MANY="index_clear_cache_many";const UIM_INDEX_CLOSE="index_close";const UIM_INDEX_CLOSE_MANY="index_close_many";const UIM_INDEX_DELETE="index_delete";const UIM_INDEX_DELETE_MANY="index_delete_many";const UIM_INDEX_FLUSH="index_flush";const UIM_INDEX_FLUSH_MANY="index_flush_many";const UIM_INDEX_FORCE_MERGE="index_force_merge";const UIM_INDEX_FORCE_MERGE_MANY="index_force_merge_many";const UIM_INDEX_FREEZE="index_freeze";const UIM_INDEX_FREEZE_MANY="index_freeze_many";const UIM_INDEX_OPEN="index_open";const UIM_INDEX_OPEN_MANY="index_open_many";const UIM_INDEX_REFRESH="index_refresh";const UIM_INDEX_REFRESH_MANY="index_refresh_many";const UIM_INDEX_SETTINGS_EDIT="index_settings_edit";const UIM_INDEX_UNFREEZE="index_unfreeze";const UIM_INDEX_UNFREEZE_MANY="index_unfreeze_many";const UIM_SHOW_DETAILS_CLICK="show_details_click";const UIM_DETAIL_PANEL_EDIT_SETTINGS_TAB="detail_panel_edit_settings_tab";const UIM_DETAIL_PANEL_MAPPING_TAB="detail_panel_mapping_tab";const UIM_DETAIL_PANEL_SETTINGS_TAB="detail_panel_settings_tab";const UIM_DETAIL_PANEL_STATS_TAB="detail_panel_stats_tab";const UIM_DETAIL_PANEL_SUMMARY_TAB="detail_panel_summary_tab";const UIM_TEMPLATE_LIST_LOAD="template_list_load";const UIM_TEMPLATE_DELETE="template_delete";const UIM_TEMPLATE_DELETE_MANY="template_delete_many";const UIM_TEMPLATE_SHOW_DETAILS_CLICK="template_show_details_click";const UIM_TEMPLATE_DETAIL_PANEL_SUMMARY_TAB="template_details_summary_tab";const UIM_TEMPLATE_DETAIL_PANEL_SETTINGS_TAB="template_details_settings_tab";const UIM_TEMPLATE_DETAIL_PANEL_MAPPINGS_TAB="template_details_mappings_tab";const UIM_TEMPLATE_DETAIL_PANEL_ALIASES_TAB="template_details_aliases_tab";const UIM_TEMPLATE_DETAIL_PANEL_PREVIEW_TAB="template_details_preview_tab";const UIM_TEMPLATE_CREATE="template_create";const UIM_TEMPLATE_UPDATE="template_update";const UIM_TEMPLATE_CLONE="template_clone";const UIM_TEMPLATE_SIMULATE="template_simulate"},function(module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=_interopRequireDefault},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return serializeTemplate}));__webpack_require__.d(__webpack_exports__,"a",(function(){return serializeLegacyTemplate}));const hasEntries=(data={})=>Object.entries(data).length>0;function serializeTemplate(templateDeserialized){const{version:version,priority:priority,indexPatterns:indexPatterns,template:template,composedOf:composedOf,dataStream:dataStream,_meta:_meta}=templateDeserialized;return{version:version,priority:priority,template:template,index_patterns:indexPatterns,data_stream:dataStream,composed_of:composedOf,_meta:_meta}}function deserializeTemplate(templateEs,cloudManagedTemplatePrefix){var _settings$index;const{name:name,version:version,index_patterns:indexPatterns,template:template={},priority:priority,_meta:_meta,composed_of:composedOf,data_stream:dataStream}=templateEs;const{settings:settings}=template;let type="default";if(Boolean(cloudManagedTemplatePrefix&&name.startsWith(cloudManagedTemplatePrefix))){type="cloudManaged"}else if(name.startsWith(".")){type="system"}else if(Boolean((_meta===null||_meta===void 0?void 0:_meta.managed)===true)){type="managed"}const deserializedTemplate={name:name,version:version,priority:priority,indexPatterns:indexPatterns.sort(),template:template,ilmPolicy:settings===null||settings===void 0?void 0:(_settings$index=settings.index)===null||_settings$index===void 0?void 0:_settings$index.lifecycle,composedOf:composedOf,dataStream:dataStream,_meta:_meta,_kbnMeta:{type:type,hasDatastream:Boolean(dataStream)}};return deserializedTemplate}function deserializeTemplateList(indexTemplates,cloudManagedTemplatePrefix){return indexTemplates.map(({name:name,index_template:templateSerialized})=>{const{template:{mappings:mappings,settings:settings,aliases:aliases}={},...deserializedTemplate}=deserializeTemplate({name:name,...templateSerialized},cloudManagedTemplatePrefix);return{...deserializedTemplate,hasSettings:hasEntries(settings),hasAliases:hasEntries(aliases),hasMappings:hasEntries(mappings)}})}function serializeLegacyTemplate(template){const{version:version,order:order,indexPatterns:indexPatterns,template:{settings:settings,aliases:aliases,mappings:mappings}={}}=template;return{version:version,order:order,index_patterns:indexPatterns,settings:settings,aliases:aliases,mappings:mappings}}function deserializeLegacyTemplate(templateEs,cloudManagedTemplatePrefix){const{settings:settings,aliases:aliases,mappings:mappings,...rest}=templateEs;const deserializedTemplate=deserializeTemplate({...rest,template:{aliases:aliases,settings:settings,mappings:mappings}},cloudManagedTemplatePrefix);return{...deserializedTemplate,order:templateEs.order,_kbnMeta:{...deserializedTemplate._kbnMeta,isLegacy:true}}}function deserializeLegacyTemplateList(indexTemplatesByName,cloudManagedTemplatePrefix){return Object.entries(indexTemplatesByName).map(([name,templateSerialized])=>{const{template:{mappings:mappings,settings:settings,aliases:aliases}={},...deserializedTemplate}=deserializeLegacyTemplate({name:name,...templateSerialized},cloudManagedTemplatePrefix);return{...deserializedTemplate,hasSettings:hasEntries(settings),hasAliases:hasEntries(aliases),hasMappings:hasEntries(mappings)}})}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){var classes=[];for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(!arg)continue;var argType=typeof arg;if(argType==="string"||argType==="number"){classes.push(arg)}else if(Array.isArray(arg)&&arg.length){var inner=classNames.apply(null,arg);if(inner){classes.push(inner)}}else if(argType==="object"){for(var key in arg){if(hasOwn.call(arg,key)&&arg[key]){classes.push(key)}}}}return classes.join(" ")}if(true&&module.exports){classNames.default=classNames;module.exports=classNames}else if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})()},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(37);exports.__esModule=true;var _Provider=_interopRequireDefault(__webpack_require__(107));exports.Provider=_Provider["default"];var _connectAdvanced=_interopRequireDefault(__webpack_require__(71));exports.connectAdvanced=_connectAdvanced["default"];var _Context=__webpack_require__(41);exports.ReactReduxContext=_Context.ReactReduxContext;var _connect=_interopRequireDefault(__webpack_require__(111));exports.connect=_connect["default"];var _useDispatch=__webpack_require__(122);exports.useDispatch=_useDispatch.useDispatch;exports.createDispatchHook=_useDispatch.createDispatchHook;var _useSelector=__webpack_require__(123);exports.useSelector=_useSelector.useSelector;exports.createSelectorHook=_useSelector.createSelectorHook;var _useStore=__webpack_require__(78);exports.useStore=_useStore.useStore;exports.createStoreHook=_useStore.createStoreHook;var _batch=__webpack_require__(70);var _reactBatchedUpdates=__webpack_require__(124);exports.batch=_reactBatchedUpdates.unstable_batchedUpdates;var _shallowEqual=_interopRequireDefault(__webpack_require__(74));exports.shallowEqual=_shallowEqual["default"];(0,_batch.setBatch)(_reactBatchedUpdates.unstable_batchedUpdates)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(37);exports.__esModule=true;exports["default"]=exports.ReactReduxContext=void 0;var _react=_interopRequireDefault(__webpack_require__(19));var ReactReduxContext=_react["default"].createContext(null);exports.ReactReduxContext=ReactReduxContext;if(false){}var _default=ReactReduxContext;exports["default"]=_default},function(module,__webpack_exports__,__webpack_require__){"use strict";var _constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(36);__webpack_require__.d(__webpack_exports__,"API_BASE_PATH",(function(){return _constants__WEBPACK_IMPORTED_MODULE_0__["a"]}));var _lib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(47);__webpack_require__.d(__webpack_exports__,"getTemplateParameter",(function(){return _lib__WEBPACK_IMPORTED_MODULE_1__["a"]}));var _types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(80)},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var invariant=function(condition,format,a,b,c,d,e,f){if(false){}if(!condition){var error;if(format===undefined){error=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var args=[a,b,c,d,e,f];var argIndex=0;error=new Error(format.replace(/%s/g,(function(){return args[argIndex++]})));error.name="Invariant Violation"}error.framesToPop=1;throw error}};module.exports=invariant},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.ACTION_TYPE_DELIMITER=exports.DEFAULT_NAMESPACE=void 0;var DEFAULT_NAMESPACE="/";exports.DEFAULT_NAMESPACE=DEFAULT_NAMESPACE;var ACTION_TYPE_DELIMITER="||";exports.ACTION_TYPE_DELIMITER=ACTION_TYPE_DELIMITER},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){if(typeof value!=="object"||value===null)return false;var proto=value;while(Object.getPrototypeOf(proto)!==null){proto=Object.getPrototypeOf(proto)}return Object.getPrototypeOf(value)===proto};exports.default=_default},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return template_serialization["b"]}));__webpack_require__.d(__webpack_exports__,"c",(function(){return template_serialization["a"]}));__webpack_require__.d(__webpack_exports__,"a",(function(){return getTemplateParameter}));__webpack_require__.d(__webpack_exports__,"b",(function(){return serializeComponentTemplate}));function deserializeDataStream(dataStreamFromEs){const{name:name,timestamp_field:timeStampField,indices:indices,generation:generation,status:status,template:template,ilm_policy:ilmPolicyName,store_size:storageSize,store_size_bytes:storageSizeBytes,maximum_timestamp:maxTimeStamp,_meta:_meta,privileges:privileges,hidden:hidden}=dataStreamFromEs;return{name:name,timeStampField:timeStampField,indices:indices.map(({index_name:index_name,index_uuid:index_uuid})=>({name:index_name,uuid:index_uuid})),generation:generation,health:status.toLowerCase(),indexTemplateName:template,ilmPolicyName:ilmPolicyName,storageSize:storageSize,storageSizeBytes:storageSizeBytes,maxTimeStamp:maxTimeStamp,_meta:_meta,privileges:privileges,hidden:hidden}}function deserializeDataStreamList(dataStreamsFromEs){return dataStreamsFromEs.map(dataStream=>deserializeDataStream(dataStream))}var template_serialization=__webpack_require__(38);const isLegacyTemplate=template=>({}.hasOwnProperty.call(template,"template")?false:true);const getTemplateParameter=(template,setting)=>{var _template;return isLegacyTemplate(template)?template[setting]:(_template=template.template)===null||_template===void 0?void 0:_template[setting]};const hasEntries=(data={})=>Object.entries(data).length>0;const getIndexTemplatesToUsedBy=indexTemplatesEs=>indexTemplatesEs.reduce((acc,item)=>{if(item.index_template.composed_of){item.index_template.composed_of.forEach(component=>{acc[component]=acc[component]?[...acc[component],item.name]:[item.name]})}return acc},{});function deserializeComponentTemplate(componentTemplateEs,indexTemplatesEs){const{name:name,component_template:componentTemplate}=componentTemplateEs;const{template:template,_meta:_meta,version:version}=componentTemplate;const indexTemplatesToUsedBy=getIndexTemplatesToUsedBy(indexTemplatesEs);const deserializedComponentTemplate={name:name,template:template,version:version,_meta:_meta,_kbnMeta:{usedBy:indexTemplatesToUsedBy[name]||[],isManaged:Boolean((_meta===null||_meta===void 0?void 0:_meta.managed)===true)}};return deserializedComponentTemplate}function deserializeComponentTemplateList(componentTemplateEs,indexTemplatesEs){const{name:name,component_template:componentTemplate}=componentTemplateEs;const{template:template,_meta:_meta}=componentTemplate;const indexTemplatesToUsedBy=getIndexTemplatesToUsedBy(indexTemplatesEs);const componentTemplateListItem={name:name,usedBy:indexTemplatesToUsedBy[name]||[],isManaged:Boolean((_meta===null||_meta===void 0?void 0:_meta.managed)===true),hasSettings:hasEntries(template.settings),hasMappings:hasEntries(template.mappings),hasAliases:hasEntries(template.aliases)};return componentTemplateListItem}function serializeComponentTemplate(componentTemplateDeserialized){const{version:version,template:template,_meta:_meta}=componentTemplateDeserialized;return{version:version,template:template,_meta:_meta}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bindTo_=exports.bind_=exports.hole=exports.pipe=exports.untupled=exports.tupled=exports.absurd=exports.decrement=exports.increment=exports.tuple=exports.flow=exports.flip=exports.constVoid=exports.constUndefined=exports.constNull=exports.constFalse=exports.constTrue=exports.constant=exports.not=exports.unsafeCoerce=exports.identity=void 0;function identity(a){return a}exports.identity=identity;exports.unsafeCoerce=identity;function not(predicate){return function(a){return!predicate(a)}}exports.not=not;function constant(a){return function(){return a}}exports.constant=constant;exports.constTrue=function(){return true};exports.constFalse=function(){return false};exports.constNull=function(){return null};exports.constUndefined=function(){return};exports.constVoid=function(){return};function flip(f){return function(b,a){return f(a,b)}}exports.flip=flip;function flow(ab,bc,cd,de,ef,fg,gh,hi,ij){switch(arguments.length){case 1:return ab;case 2:return function(){return bc(ab.apply(this,arguments))};case 3:return function(){return cd(bc(ab.apply(this,arguments)))};case 4:return function(){return de(cd(bc(ab.apply(this,arguments))))};case 5:return function(){return ef(de(cd(bc(ab.apply(this,arguments)))))};case 6:return function(){return fg(ef(de(cd(bc(ab.apply(this,arguments))))))};case 7:return function(){return gh(fg(ef(de(cd(bc(ab.apply(this,arguments)))))))};case 8:return function(){return hi(gh(fg(ef(de(cd(bc(ab.apply(this,arguments))))))))};case 9:return function(){return ij(hi(gh(fg(ef(de(cd(bc(ab.apply(this,arguments)))))))))}}return}exports.flow=flow;function tuple(){var t=[];for(var _i=0;_i<arguments.length;_i++){t[_i]=arguments[_i]}return t}exports.tuple=tuple;function increment(n){return n+1}exports.increment=increment;function decrement(n){return n-1}exports.decrement=decrement;function absurd(_){throw new Error("Called `absurd` function which should be uncallable")}exports.absurd=absurd;function tupled(f){return function(a){return f.apply(void 0,a)}}exports.tupled=tupled;function untupled(f){return function(){var a=[];for(var _i=0;_i<arguments.length;_i++){a[_i]=arguments[_i]}return f(a)}}exports.untupled=untupled;function pipe(a,ab,bc,cd,de,ef,fg,gh,hi,ij,jk,kl,lm,mn,no,op,pq,qr,rs,st){switch(arguments.length){case 1:return a;case 2:return ab(a);case 3:return bc(ab(a));case 4:return cd(bc(ab(a)));case 5:return de(cd(bc(ab(a))));case 6:return ef(de(cd(bc(ab(a)))));case 7:return fg(ef(de(cd(bc(ab(a))))));case 8:return gh(fg(ef(de(cd(bc(ab(a)))))));case 9:return hi(gh(fg(ef(de(cd(bc(ab(a))))))));case 10:return ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))));case 11:return jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))));case 12:return kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))));case 13:return lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))));case 14:return mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))));case 15:return no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))));case 16:return op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))));case 17:return pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))))));case 18:return qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))))));case 19:return rs(qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))))))));case 20:return st(rs(qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))))))))}return}exports.pipe=pipe;exports.hole=absurd;exports.bind_=function(a,name,b){var _a;return Object.assign({},a,(_a={},_a[name]=b,_a))};exports.bindTo_=function(name){return function(b){var _a;return _a={},_a[name]=b,_a}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopDefault(ex){return ex&&typeof ex==="object"&&"default"in ex?ex["default"]:ex}var $$observable=_interopDefault(__webpack_require__(113));var randomString=function randomString(){return Math.random().toString(36).substring(7).split("").join(".")};var ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function PROBE_UNKNOWN_ACTION(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject(obj){if(typeof obj!=="object"||obj===null)return false;var proto=obj;while(Object.getPrototypeOf(proto)!==null){proto=Object.getPrototypeOf(proto)}return Object.getPrototypeOf(obj)===proto}function createStore(reducer,preloadedState,enhancer){var _ref2;if(typeof preloadedState==="function"&&typeof enhancer==="function"||typeof enhancer==="function"&&typeof arguments[3]==="function"){throw new Error("It looks like you are passing several store enhancers to "+"createStore(). This is not supported. Instead, compose them "+"together to a single function.")}if(typeof preloadedState==="function"&&typeof enhancer==="undefined"){enhancer=preloadedState;preloadedState=undefined}if(typeof enhancer!=="undefined"){if(typeof enhancer!=="function"){throw new Error("Expected the enhancer to be a function.")}return enhancer(createStore)(reducer,preloadedState)}if(typeof reducer!=="function"){throw new Error("Expected the reducer to be a function.")}var currentReducer=reducer;var currentState=preloadedState;var currentListeners=[];var nextListeners=currentListeners;var isDispatching=false;function ensureCanMutateNextListeners(){if(nextListeners===currentListeners){nextListeners=currentListeners.slice()}}function getState(){if(isDispatching){throw new Error("You may not call store.getState() while the reducer is executing. "+"The reducer has already received the state as an argument. "+"Pass it down from the top reducer instead of reading it from the store.")}return currentState}function subscribe(listener){if(typeof listener!=="function"){throw new Error("Expected the listener to be a function.")}if(isDispatching){throw new Error("You may not call store.subscribe() while the reducer is executing. "+"If you would like to be notified after the store has been updated, subscribe from a "+"component and invoke store.getState() in the callback to access the latest state. "+"See https://redux.js.org/api-reference/store#subscribelistener for more details.")}var isSubscribed=true;ensureCanMutateNextListeners();nextListeners.push(listener);return function unsubscribe(){if(!isSubscribed){return}if(isDispatching){throw new Error("You may not unsubscribe from a store listener while the reducer is executing. "+"See https://redux.js.org/api-reference/store#subscribelistener for more details.")}isSubscribed=false;ensureCanMutateNextListeners();var index=nextListeners.indexOf(listener);nextListeners.splice(index,1);currentListeners=null}}function dispatch(action){if(!isPlainObject(action)){throw new Error("Actions must be plain objects. "+"Use custom middleware for async actions.")}if(typeof action.type==="undefined"){throw new Error('Actions may not have an undefined "type" property. '+"Have you misspelled a constant?")}if(isDispatching){throw new Error("Reducers may not dispatch actions.")}try{isDispatching=true;currentState=currentReducer(currentState,action)}finally{isDispatching=false}var listeners=currentListeners=nextListeners;for(var i=0;i<listeners.length;i++){var listener=listeners[i];listener()}return action}function replaceReducer(nextReducer){if(typeof nextReducer!=="function"){throw new Error("Expected the nextReducer to be a function.")}currentReducer=nextReducer;dispatch({type:ActionTypes.REPLACE})}function observable(){var _ref;var outerSubscribe=subscribe;return _ref={subscribe:function subscribe(observer){if(typeof observer!=="object"||observer===null){throw new TypeError("Expected the observer to be an object.")}function observeState(){if(observer.next){observer.next(getState())}}observeState();var unsubscribe=outerSubscribe(observeState);return{unsubscribe:unsubscribe}}},_ref[$$observable]=function(){return this},_ref}dispatch({type:ActionTypes.INIT});return _ref2={dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:replaceReducer},_ref2[$$observable]=observable,_ref2}function warning(message){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(message)}try{throw new Error(message)}catch(e){}}function getUndefinedStateErrorMessage(key,action){var actionType=action&&action.type;var actionDescription=actionType&&'action "'+String(actionType)+'"'||"an action";return"Given "+actionDescription+', reducer "'+key+'" returned undefined. '+"To ignore an action, you must explicitly return the previous state. "+"If you want this reducer to hold no value, you can return null instead of undefined."}function getUnexpectedStateShapeWarningMessage(inputState,reducers,action,unexpectedKeyCache){var reducerKeys=Object.keys(reducers);var argumentName=action&&action.type===ActionTypes.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(reducerKeys.length===0){return"Store does not have a valid reducer. Make sure the argument passed "+"to combineReducers is an object whose values are reducers."}if(!isPlainObject(inputState)){return"The "+argumentName+' has unexpected type of "'+{}.toString.call(inputState).match(/\s([a-z|A-Z]+)/)[1]+'". Expected argument to be an object with the following '+('keys: "'+reducerKeys.join('", "')+'"')}var unexpectedKeys=Object.keys(inputState).filter((function(key){return!reducers.hasOwnProperty(key)&&!unexpectedKeyCache[key]}));unexpectedKeys.forEach((function(key){unexpectedKeyCache[key]=true}));if(action&&action.type===ActionTypes.REPLACE)return;if(unexpectedKeys.length>0){return"Unexpected "+(unexpectedKeys.length>1?"keys":"key")+" "+('"'+unexpectedKeys.join('", "')+'" found in '+argumentName+". ")+"Expected to find one of the known reducer keys instead: "+('"'+reducerKeys.join('", "')+'". Unexpected keys will be ignored.')}}function assertReducerShape(reducers){Object.keys(reducers).forEach((function(key){var reducer=reducers[key];var initialState=reducer(undefined,{type:ActionTypes.INIT});if(typeof initialState==="undefined"){throw new Error('Reducer "'+key+'" returned undefined during initialization. '+"If the state passed to the reducer is undefined, you must "+"explicitly return the initial state. The initial state may "+"not be undefined. If you don't want to set a value for this reducer, "+"you can use null instead of undefined.")}if(typeof reducer(undefined,{type:ActionTypes.PROBE_UNKNOWN_ACTION()})==="undefined"){throw new Error('Reducer "'+key+'" returned undefined when probed with a random type. '+("Don't try to handle "+ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the "+"current state for any unknown actions, unless it is undefined, "+"in which case you must return the initial state, regardless of the "+"action type. The initial state may not be undefined, but can be null.")}}))}function combineReducers(reducers){var reducerKeys=Object.keys(reducers);var finalReducers={};for(var i=0;i<reducerKeys.length;i++){var key=reducerKeys[i];if(false){}if(typeof reducers[key]==="function"){finalReducers[key]=reducers[key]}}var finalReducerKeys=Object.keys(finalReducers);var unexpectedKeyCache;if(false){}var shapeAssertionError;try{assertReducerShape(finalReducers)}catch(e){shapeAssertionError=e}return function combination(state,action){if(state===void 0){state={}}if(shapeAssertionError){throw shapeAssertionError}if(false){var warningMessage}var hasChanged=false;var nextState={};for(var _i=0;_i<finalReducerKeys.length;_i++){var _key=finalReducerKeys[_i];var reducer=finalReducers[_key];var previousStateForKey=state[_key];var nextStateForKey=reducer(previousStateForKey,action);if(typeof nextStateForKey==="undefined"){var errorMessage=getUndefinedStateErrorMessage(_key,action);throw new Error(errorMessage)}nextState[_key]=nextStateForKey;hasChanged=hasChanged||nextStateForKey!==previousStateForKey}hasChanged=hasChanged||finalReducerKeys.length!==Object.keys(state).length;return hasChanged?nextState:state}}function bindActionCreator(actionCreator,dispatch){return function(){return dispatch(actionCreator.apply(this,arguments))}}function bindActionCreators(actionCreators,dispatch){if(typeof actionCreators==="function"){return bindActionCreator(actionCreators,dispatch)}if(typeof actionCreators!=="object"||actionCreators===null){throw new Error("bindActionCreators expected an object or a function, instead received "+(actionCreators===null?"null":typeof actionCreators)+". "+'Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?')}var boundActionCreators={};for(var key in actionCreators){var actionCreator=actionCreators[key];if(typeof actionCreator==="function"){boundActionCreators[key]=bindActionCreator(actionCreator,dispatch)}}return boundActionCreators}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){keys.push.apply(keys,Object.getOwnPropertySymbols(object))}if(enumerableOnly)keys=keys.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function compose(){for(var _len=arguments.length,funcs=new Array(_len),_key=0;_key<_len;_key++){funcs[_key]=arguments[_key]}if(funcs.length===0){return function(arg){return arg}}if(funcs.length===1){return funcs[0]}return funcs.reduce((function(a,b){return function(){return a(b.apply(void 0,arguments))}}))}function applyMiddleware(){for(var _len=arguments.length,middlewares=new Array(_len),_key=0;_key<_len;_key++){middlewares[_key]=arguments[_key]}return function(createStore){return function(){var store=createStore.apply(void 0,arguments);var _dispatch=function dispatch(){throw new Error("Dispatching while constructing your middleware is not allowed. "+"Other middleware would not be applied to this dispatch.")};var middlewareAPI={getState:store.getState,dispatch:function dispatch(){return _dispatch.apply(void 0,arguments)}};var chain=middlewares.map((function(middleware){return middleware(middlewareAPI)}));_dispatch=compose.apply(void 0,chain)(store.dispatch);return _objectSpread2({},store,{dispatch:_dispatch})}}}function isCrushed(){}if(false){}exports.__DO_NOT_USE__ActionTypes=ActionTypes;exports.applyMiddleware=applyMiddleware;exports.bindActionCreators=bindActionCreators;exports.combineReducers=combineReducers;exports.compose=compose;exports.createStore=createStore},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return typeof value==="function"};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return typeof Map!=="undefined"&&value instanceof Map};exports.default=_default},function(module,exports,__webpack_require__){"use strict";const strictUriEncode=__webpack_require__(172);const decodeComponent=__webpack_require__(173);const splitOnFirst=__webpack_require__(174);const isNullOrUndefined=value=>value===null||value===undefined;function encoderForArrayFormat(options){switch(options.arrayFormat){case"index":return key=>(result,value)=>{const index=result.length;if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}if(value===null){return[...result,[encode(key,options),"[",index,"]"].join("")]}return[...result,[encode(key,options),"[",encode(index,options),"]=",encode(value,options)].join("")]};case"bracket":return key=>(result,value)=>{if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}if(value===null){return[...result,[encode(key,options),"[]"].join("")]}return[...result,[encode(key,options),"[]=",encode(value,options)].join("")]};case"comma":case"separator":return key=>(result,value)=>{if(value===null||value===undefined||value.length===0){return result}if(result.length===0){return[[encode(key,options),"=",encode(value,options)].join("")]}return[[result,encode(value,options)].join(options.arrayFormatSeparator)]};default:return key=>(result,value)=>{if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}if(value===null){return[...result,encode(key,options)]}return[...result,[encode(key,options),"=",encode(value,options)].join("")]}}}function parserForArrayFormat(options){let result;switch(options.arrayFormat){case"index":return(key,value,accumulator)=>{result=/\[(\d*)\]$/.exec(key);key=key.replace(/\[\d*\]$/,"");if(!result){accumulator[key]=value;return}if(accumulator[key]===undefined){accumulator[key]={}}accumulator[key][result[1]]=value};case"bracket":return(key,value,accumulator)=>{result=/(\[\])$/.exec(key);key=key.replace(/\[\]$/,"");if(!result){accumulator[key]=value;return}if(accumulator[key]===undefined){accumulator[key]=[value];return}accumulator[key]=[].concat(accumulator[key],value)};case"comma":case"separator":return(key,value,accumulator)=>{const isArray=typeof value==="string"&&value.split("").indexOf(options.arrayFormatSeparator)>-1;const newValue=isArray?value.split(options.arrayFormatSeparator).map(item=>decode(item,options)):value===null?value:decode(value,options);accumulator[key]=newValue};default:return(key,value,accumulator)=>{if(accumulator[key]===undefined){accumulator[key]=value;return}accumulator[key]=[].concat(accumulator[key],value)}}}function validateArrayFormatSeparator(value){if(typeof value!=="string"||value.length!==1){throw new TypeError("arrayFormatSeparator must be single character string")}}function encode(value,options){if(options.encode){return options.strict?strictUriEncode(value):encodeURIComponent(value)}return value}function decode(value,options){if(options.decode){return decodeComponent(value)}return value}function keysSorter(input){if(Array.isArray(input)){return input.sort()}if(typeof input==="object"){return keysSorter(Object.keys(input)).sort((a,b)=>Number(a)-Number(b)).map(key=>input[key])}return input}function removeHash(input){const hashStart=input.indexOf("#");if(hashStart!==-1){input=input.slice(0,hashStart)}return input}function getHash(url){let hash="";const hashStart=url.indexOf("#");if(hashStart!==-1){hash=url.slice(hashStart)}return hash}function extract(input){input=removeHash(input);const queryStart=input.indexOf("?");if(queryStart===-1){return""}return input.slice(queryStart+1)}function parseValue(value,options){if(options.parseNumbers&&!Number.isNaN(Number(value))&&(typeof value==="string"&&value.trim()!=="")){value=Number(value)}else if(options.parseBooleans&&value!==null&&(value.toLowerCase()==="true"||value.toLowerCase()==="false")){value=value.toLowerCase()==="true"}return value}function parse(input,options){options=Object.assign({decode:true,sort:true,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:false,parseBooleans:false},options);validateArrayFormatSeparator(options.arrayFormatSeparator);const formatter=parserForArrayFormat(options);const ret=Object.create(null);if(typeof input!=="string"){return ret}input=input.trim().replace(/^[?#&]/,"");if(!input){return ret}for(const param of input.split("&")){let[key,value]=splitOnFirst(options.decode?param.replace(/\+/g," "):param,"=");value=value===undefined?null:["comma","separator"].includes(options.arrayFormat)?value:decode(value,options);formatter(decode(key,options),value,ret)}for(const key of Object.keys(ret)){const value=ret[key];if(typeof value==="object"&&value!==null){for(const k of Object.keys(value)){value[k]=parseValue(value[k],options)}}else{ret[key]=parseValue(value,options)}}if(options.sort===false){return ret}return(options.sort===true?Object.keys(ret).sort():Object.keys(ret).sort(options.sort)).reduce((result,key)=>{const value=ret[key];if(Boolean(value)&&typeof value==="object"&&!Array.isArray(value)){result[key]=keysSorter(value)}else{result[key]=value}return result},Object.create(null))}exports.extract=extract;exports.parse=parse;exports.stringify=(object,options)=>{if(!object){return""}options=Object.assign({encode:true,strict:true,arrayFormat:"none",arrayFormatSeparator:","},options);validateArrayFormatSeparator(options.arrayFormatSeparator);const shouldFilter=key=>options.skipNull&&isNullOrUndefined(object[key])||options.skipEmptyString&&object[key]==="";const formatter=encoderForArrayFormat(options);const objectCopy={};for(const key of Object.keys(object)){if(!shouldFilter(key)){objectCopy[key]=object[key]}}const keys=Object.keys(objectCopy);if(options.sort!==false){keys.sort(options.sort)}return keys.map(key=>{const value=object[key];if(value===undefined){return""}if(value===null){return encode(key,options)}if(Array.isArray(value)){return value.reduce(formatter(key),[]).join("&")}return encode(key,options)+"="+encode(value,options)}).filter(x=>x.length>0).join("&")};exports.parseUrl=(input,options)=>{options=Object.assign({decode:true},options);const[url,hash]=splitOnFirst(input,"#");return Object.assign({url:url.split("?")[0]||"",query:parse(extract(input),options)},options&&options.parseFragmentIdentifier&&hash?{fragmentIdentifier:decode(hash,options)}:{})};exports.stringifyUrl=(input,options)=>{options=Object.assign({encode:true,strict:true},options);const url=removeHash(input.url).split("?")[0]||"";const queryFromUrl=exports.extract(input.url);const parsedQueryFromUrl=exports.parse(queryFromUrl,{sort:false});const query=Object.assign(parsedQueryFromUrl,input.query);let queryString=exports.stringify(query,options);if(queryString){queryString=`?${queryString}`}let hash=getHash(input.url);if(input.fragmentIdentifier){hash=`#${encode(input.fragmentIdentifier,options)}`}return`${url}${queryString}${hash}`}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.apS=exports.apSW=exports.bind=exports.bindW=exports.bindTo=exports.exists=exports.elem=exports.toError=exports.either=exports.getValidationMonoid=exports.MonadThrow=exports.ChainRec=exports.Extend=exports.Alt=exports.Bifunctor=exports.Traversable=exports.Foldable=exports.Monad=exports.Applicative=exports.Functor=exports.getValidationSemigroup=exports.getValidation=exports.getAltValidation=exports.getApplicativeValidation=exports.getWitherable=exports.getFilterable=exports.getApplyMonoid=exports.getApplySemigroup=exports.getSemigroup=exports.getEq=exports.getShow=exports.URI=exports.throwError=exports.sequence=exports.traverse=exports.reduceRight=exports.foldMap=exports.reduce=exports.duplicate=exports.extend=exports.alt=exports.flatten=exports.chainFirst=exports.chainFirstW=exports.chain=exports.chainW=exports.of=exports.apSecond=exports.apFirst=exports.ap=exports.apW=exports.mapLeft=exports.bimap=exports.map=exports.filterOrElse=exports.orElse=exports.swap=exports.getOrElse=exports.getOrElseW=exports.fold=exports.fromPredicate=exports.fromOption=exports.stringifyJSON=exports.parseJSON=exports.tryCatch=exports.fromNullable=exports.right=exports.left=exports.isRight=exports.isLeft=void 0;var ChainRec_1=__webpack_require__(96);var function_1=__webpack_require__(48);exports.isLeft=function(ma){return ma._tag==="Left"};exports.isRight=function(ma){return ma._tag==="Right"};exports.left=function(e){return{_tag:"Left",left:e}};exports.right=function(a){return{_tag:"Right",right:a}};function fromNullable(e){return function(a){return a==null?exports.left(e):exports.right(a)}}exports.fromNullable=fromNullable;function tryCatch(f,onError){try{return exports.right(f())}catch(e){return exports.left(onError(e))}}exports.tryCatch=tryCatch;function parseJSON(s,onError){return tryCatch((function(){return JSON.parse(s)}),onError)}exports.parseJSON=parseJSON;function stringifyJSON(u,onError){return tryCatch((function(){return JSON.stringify(u)}),onError)}exports.stringifyJSON=stringifyJSON;exports.fromOption=function(onNone){return function(ma){return ma._tag==="None"?exports.left(onNone()):exports.right(ma.value)}};exports.fromPredicate=function(predicate,onFalse){return function(a){return predicate(a)?exports.right(a):exports.left(onFalse(a))}};function fold(onLeft,onRight){return function(ma){return exports.isLeft(ma)?onLeft(ma.left):onRight(ma.right)}}exports.fold=fold;exports.getOrElseW=function(onLeft){return function(ma){return exports.isLeft(ma)?onLeft(ma.left):ma.right}};exports.getOrElse=exports.getOrElseW;function swap(ma){return exports.isLeft(ma)?exports.right(ma.left):exports.left(ma.right)}exports.swap=swap;function orElse(onLeft){return function(ma){return exports.isLeft(ma)?onLeft(ma.left):ma}}exports.orElse=orElse;exports.filterOrElse=function(predicate,onFalse){return exports.chain((function(a){return predicate(a)?exports.right(a):exports.left(onFalse(a))}))};var map_=function(fa,f){return function_1.pipe(fa,exports.map(f))};var ap_=function(fab,fa){return function_1.pipe(fab,exports.ap(fa))};var chain_=function(ma,f){return function_1.pipe(ma,exports.chain(f))};var reduce_=function(fa,b,f){return function_1.pipe(fa,exports.reduce(b,f))};var foldMap_=function(M){return function(fa,f){var foldMapM=exports.foldMap(M);return function_1.pipe(fa,foldMapM(f))}};var reduceRight_=function(fa,b,f){return function_1.pipe(fa,exports.reduceRight(b,f))};var traverse_=function(F){var traverseF=exports.traverse(F);return function(ta,f){return function_1.pipe(ta,traverseF(f))}};var bimap_=function(fa,f,g){return function_1.pipe(fa,exports.bimap(f,g))};var mapLeft_=function(fa,f){return function_1.pipe(fa,exports.mapLeft(f))};var alt_=function(fa,that){return function_1.pipe(fa,exports.alt(that))};var extend_=function(wa,f){return function_1.pipe(wa,exports.extend(f))};var chainRec_=function(a,f){return ChainRec_1.tailRec(f(a),(function(e){return exports.isLeft(e)?exports.right(exports.left(e.left)):exports.isLeft(e.right)?exports.left(f(e.right.left)):exports.right(exports.right(e.right.right))}))};exports.map=function(f){return function(fa){return exports.isLeft(fa)?fa:exports.right(f(fa.right))}};exports.bimap=function(f,g){return function(fa){return exports.isLeft(fa)?exports.left(f(fa.left)):exports.right(g(fa.right))}};exports.mapLeft=function(f){return function(fa){return exports.isLeft(fa)?exports.left(f(fa.left)):fa}};exports.apW=function(fa){return function(fab){return exports.isLeft(fab)?fab:exports.isLeft(fa)?fa:exports.right(fab.right(fa.right))}};exports.ap=exports.apW;exports.apFirst=function(fb){return function_1.flow(exports.map((function(a){return function(){return a}})),exports.ap(fb))};exports.apSecond=function(fb){return function_1.flow(exports.map((function(){return function(b){return b}})),exports.ap(fb))};exports.of=exports.right;exports.chainW=function(f){return function(ma){return exports.isLeft(ma)?ma:f(ma.right)}};exports.chain=exports.chainW;exports.chainFirstW=function(f){return function(ma){return function_1.pipe(ma,exports.chainW((function(a){return function_1.pipe(f(a),exports.map((function(){return a})))})))}};exports.chainFirst=exports.chainFirstW;exports.flatten=exports.chain(function_1.identity);exports.alt=function(that){return function(fa){return exports.isLeft(fa)?that():fa}};exports.extend=function(f){return function(wa){return exports.isLeft(wa)?wa:exports.right(f(wa))}};exports.duplicate=exports.extend(function_1.identity);exports.reduce=function(b,f){return function(fa){return exports.isLeft(fa)?b:f(b,fa.right)}};exports.foldMap=function(M){return function(f){return function(fa){return exports.isLeft(fa)?M.empty:f(fa.right)}}};exports.reduceRight=function(b,f){return function(fa){return exports.isLeft(fa)?b:f(fa.right,b)}};exports.traverse=function(F){return function(f){return function(ta){return exports.isLeft(ta)?F.of(exports.left(ta.left)):F.map(f(ta.right),exports.right)}}};exports.sequence=function(F){return function(ma){return exports.isLeft(ma)?F.of(exports.left(ma.left)):F.map(ma.right,exports.right)}};exports.throwError=exports.left;exports.URI="Either";function getShow(SE,SA){return{show:function(ma){return exports.isLeft(ma)?"left("+SE.show(ma.left)+")":"right("+SA.show(ma.right)+")"}}}exports.getShow=getShow;function getEq(EL,EA){return{equals:function(x,y){return x===y||(exports.isLeft(x)?exports.isLeft(y)&&EL.equals(x.left,y.left):exports.isRight(y)&&EA.equals(x.right,y.right))}}}exports.getEq=getEq;function getSemigroup(S){return{concat:function(x,y){return exports.isLeft(y)?x:exports.isLeft(x)?y:exports.right(S.concat(x.right,y.right))}}}exports.getSemigroup=getSemigroup;function getApplySemigroup(S){return{concat:function(x,y){return exports.isLeft(x)?x:exports.isLeft(y)?y:exports.right(S.concat(x.right,y.right))}}}exports.getApplySemigroup=getApplySemigroup;function getApplyMonoid(M){return{concat:getApplySemigroup(M).concat,empty:exports.right(M.empty)}}exports.getApplyMonoid=getApplyMonoid;function getFilterable(M){var empty=exports.left(M.empty);var compact=function(ma){return exports.isLeft(ma)?ma:ma.right._tag==="None"?empty:exports.right(ma.right.value)};var separate=function(ma){return exports.isLeft(ma)?{left:ma,right:ma}:exports.isLeft(ma.right)?{left:exports.right(ma.right.left),right:empty}:{left:empty,right:exports.right(ma.right.right)}};var partitionMap=function(ma,f){if(exports.isLeft(ma)){return{left:ma,right:ma}}var e=f(ma.right);return exports.isLeft(e)?{left:exports.right(e.left),right:empty}:{left:empty,right:exports.right(e.right)}};var partition=function(ma,p){return exports.isLeft(ma)?{left:ma,right:ma}:p(ma.right)?{left:empty,right:exports.right(ma.right)}:{left:exports.right(ma.right),right:empty}};var filterMap=function(ma,f){if(exports.isLeft(ma)){return ma}var ob=f(ma.right);return ob._tag==="None"?empty:exports.right(ob.value)};var filter=function(ma,predicate){return exports.isLeft(ma)?ma:predicate(ma.right)?ma:empty};return{URI:exports.URI,_E:undefined,map:map_,compact:compact,separate:separate,filter:filter,filterMap:filterMap,partition:partition,partitionMap:partitionMap}}exports.getFilterable=getFilterable;function getWitherable(M){var F_=getFilterable(M);var wither=function(F){var traverseF=traverse_(F);return function(ma,f){return F.map(traverseF(ma,f),F_.compact)}};var wilt=function(F){var traverseF=traverse_(F);return function(ma,f){return F.map(traverseF(ma,f),F_.separate)}};return{URI:exports.URI,_E:undefined,map:map_,compact:F_.compact,separate:F_.separate,filter:F_.filter,filterMap:F_.filterMap,partition:F_.partition,partitionMap:F_.partitionMap,traverse:traverse_,sequence:exports.sequence,reduce:reduce_,foldMap:foldMap_,reduceRight:reduceRight_,wither:wither,wilt:wilt}}exports.getWitherable=getWitherable;function getApplicativeValidation(SE){return{URI:exports.URI,_E:undefined,map:map_,ap:function(fab,fa){return exports.isLeft(fab)?exports.isLeft(fa)?exports.left(SE.concat(fab.left,fa.left)):fab:exports.isLeft(fa)?fa:exports.right(fab.right(fa.right))},of:exports.of}}exports.getApplicativeValidation=getApplicativeValidation;function getAltValidation(SE){return{URI:exports.URI,_E:undefined,map:map_,alt:function(me,that){if(exports.isRight(me)){return me}var ea=that();return exports.isLeft(ea)?exports.left(SE.concat(me.left,ea.left)):ea}}}exports.getAltValidation=getAltValidation;function getValidation(SE){var applicativeValidation=getApplicativeValidation(SE);var altValidation=getAltValidation(SE);return{URI:exports.URI,_E:undefined,map:map_,of:exports.of,chain:chain_,bimap:bimap_,mapLeft:mapLeft_,reduce:reduce_,foldMap:foldMap_,reduceRight:reduceRight_,extend:extend_,traverse:traverse_,sequence:exports.sequence,chainRec:chainRec_,throwError:exports.throwError,ap:applicativeValidation.ap,alt:altValidation.alt}}exports.getValidation=getValidation;function getValidationSemigroup(SE,SA){return{concat:function(x,y){return exports.isLeft(x)?exports.isLeft(y)?exports.left(SE.concat(x.left,y.left)):x:exports.isLeft(y)?y:exports.right(SA.concat(x.right,y.right))}}}exports.getValidationSemigroup=getValidationSemigroup;exports.Functor={URI:exports.URI,map:map_};exports.Applicative={URI:exports.URI,map:map_,ap:ap_,of:exports.of};exports.Monad={URI:exports.URI,map:map_,ap:ap_,of:exports.of,chain:chain_};exports.Foldable={URI:exports.URI,reduce:reduce_,foldMap:foldMap_,reduceRight:reduceRight_};exports.Traversable={URI:exports.URI,map:map_,reduce:reduce_,foldMap:foldMap_,reduceRight:reduceRight_,traverse:traverse_,sequence:exports.sequence};exports.Bifunctor={URI:exports.URI,bimap:bimap_,mapLeft:mapLeft_};exports.Alt={URI:exports.URI,map:map_,alt:alt_};exports.Extend={URI:exports.URI,map:map_,extend:extend_};exports.ChainRec={URI:exports.URI,map:map_,ap:ap_,chain:chain_,chainRec:chainRec_};exports.MonadThrow={URI:exports.URI,map:map_,ap:ap_,of:exports.of,chain:chain_,throwError:exports.throwError};function getValidationMonoid(SE,SA){return{concat:getValidationSemigroup(SE,SA).concat,empty:exports.right(SA.empty)}}exports.getValidationMonoid=getValidationMonoid;exports.either={URI:exports.URI,map:map_,of:exports.of,ap:ap_,chain:chain_,reduce:reduce_,foldMap:foldMap_,reduceRight:reduceRight_,traverse:traverse_,sequence:exports.sequence,bimap:bimap_,mapLeft:mapLeft_,alt:alt_,extend:extend_,chainRec:chainRec_,throwError:exports.throwError};function toError(e){return e instanceof Error?e:new Error(String(e))}exports.toError=toError;function elem(E){return function(a,ma){return exports.isLeft(ma)?false:E.equals(a,ma.right)}}exports.elem=elem;function exists(predicate){return function(ma){return exports.isLeft(ma)?false:predicate(ma.right)}}exports.exists=exists;exports.bindTo=function(name){return exports.map(function_1.bindTo_(name))};exports.bindW=function(name,f){return exports.chainW((function(a){return function_1.pipe(f(a),exports.map((function(b){return function_1.bind_(a,name,b)})))}))};exports.bind=exports.bindW;exports.apSW=function(name,fb){return function_1.flow(exports.map((function(a){return function(b){return function_1.bind_(a,name,b)}})),exports.apW(fb))};exports.apS=exports.apSW},function(module,__webpack_exports__,__webpack_require__){"use strict";var _mappings_editor__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(66);var _mappings_editor__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_mappings_editor__WEBPACK_IMPORTED_MODULE_0__);var _document_fields__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(67);var _document_fields__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_document_fields__WEBPACK_IMPORTED_MODULE_1__);var _state__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(68);var _state__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_state__WEBPACK_IMPORTED_MODULE_2__)},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports["default"]=void 0;var _batch=__webpack_require__(70);var nullListeners={notify:function notify(){}};function createListenerCollection(){var batch=(0,_batch.getBatch)();var first=null;var last=null;return{clear:function clear(){first=null;last=null},notify:function notify(){batch((function(){var listener=first;while(listener){listener.callback();listener=listener.next}}))},get:function get(){var listeners=[];var listener=first;while(listener){listeners.push(listener);listener=listener.next}return listeners},subscribe:function subscribe(callback){var isSubscribed=true;var listener=last={callback:callback,next:null,prev:last};if(listener.prev){listener.prev.next=listener}else{first=listener}return function unsubscribe(){if(!isSubscribed||first===null)return;isSubscribed=false;if(listener.next){listener.next.prev=listener.prev}else{last=listener.prev}if(listener.prev){listener.prev.next=listener.next}else{first=listener.next}}}}}var Subscription=function(){function Subscription(store,parentSub){this.store=store;this.parentSub=parentSub;this.unsubscribe=null;this.listeners=nullListeners;this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var _proto=Subscription.prototype;_proto.addNestedSub=function addNestedSub(listener){this.trySubscribe();return this.listeners.subscribe(listener)};_proto.notifyNestedSubs=function notifyNestedSubs(){this.listeners.notify()};_proto.handleChangeWrapper=function handleChangeWrapper(){if(this.onStateChange){this.onStateChange()}};_proto.isSubscribed=function isSubscribed(){return Boolean(this.unsubscribe)};_proto.trySubscribe=function trySubscribe(){if(!this.unsubscribe){this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper);this.listeners=createListenerCollection()}};_proto.tryUnsubscribe=function tryUnsubscribe(){if(this.unsubscribe){this.unsubscribe();this.unsubscribe=null;this.listeners.clear();this.listeners=nullListeners}};return Subscription}();exports["default"]=Subscription},function(module,exports){function _extends(){module.exports=_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}module.exports=_extends},function(module,exports){function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}module.exports=_objectWithoutPropertiesLoose},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=createAction;var _invariant=_interopRequireDefault(__webpack_require__(44));var _isFunction=_interopRequireDefault(__webpack_require__(50));var _identity=_interopRequireDefault(__webpack_require__(59));var _isNull=_interopRequireDefault(__webpack_require__(154));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createAction(type,payloadCreator,metaCreator){if(payloadCreator===void 0){payloadCreator=_identity.default}(0,_invariant.default)((0,_isFunction.default)(payloadCreator)||(0,_isNull.default)(payloadCreator),"Expected payloadCreator to be a function, undefined or null");var finalPayloadCreator=(0,_isNull.default)(payloadCreator)||payloadCreator===_identity.default?_identity.default:function(head){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}return head instanceof Error?head:payloadCreator.apply(void 0,[head].concat(args))};var hasMeta=(0,_isFunction.default)(metaCreator);var typeString=type.toString();var actionCreator=function actionCreator(){var payload=finalPayloadCreator.apply(void 0,arguments);var action={type:type};if(payload instanceof Error){action.error=true}if(payload!==undefined){action.payload=payload}if(hasMeta){action.meta=metaCreator.apply(void 0,arguments)}return action};actionCreator.toString=function(){return typeString};return actionCreator}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return value};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=ownKeys;var _isMap=_interopRequireDefault(__webpack_require__(51));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object){if((0,_isMap.default)(object)){return Array.from(object.keys())}if(typeof Reflect!=="undefined"&&typeof Reflect.ownKeys==="function"){return Reflect.ownKeys(object)}var keys=Object.getOwnPropertyNames(object);if(typeof Object.getOwnPropertySymbols==="function"){keys=keys.concat(Object.getOwnPropertySymbols(object))}return keys}},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __assign=this&&this.__assign||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:true});var Either_1=__webpack_require__(53);var map=Either_1.either.map;var chain=Either_1.either.chain;var Type=function(){function Type(name,is,validate,encode){this.name=name;this.is=is;this.validate=validate;this.encode=encode;this.decode=this.decode.bind(this)}Type.prototype.pipe=function(ab,name){var _this=this;if(name===void 0){name="pipe("+this.name+", "+ab.name+")"}return new Type(name,ab.is,(function(i,c){return chain(_this.validate(i,c),(function(a){return ab.validate(a,c)}))}),this.encode===exports.identity&&ab.encode===exports.identity?exports.identity:function(b){return _this.encode(ab.encode(b))})};Type.prototype.asDecoder=function(){return this};Type.prototype.asEncoder=function(){return this};Type.prototype.decode=function(i){return this.validate(i,[{key:"",type:this,actual:i}])};return Type}();exports.Type=Type;exports.identity=function(a){return a};exports.getFunctionName=function(f){return f.displayName||f.name||"<function"+f.length+">"};exports.getContextEntry=function(key,decoder){return{key:key,type:decoder}};exports.appendContext=function(c,key,decoder,actual){var len=c.length;var r=Array(len+1);for(var i=0;i<len;i++){r[i]=c[i]}r[len]={key:key,type:decoder,actual:actual};return r};exports.failures=Either_1.left;exports.failure=function(value,context,message){return exports.failures([{value:value,context:context,message:message}])};exports.success=Either_1.right;var pushAll=function(xs,ys){var l=ys.length;for(var i=0;i<l;i++){xs.push(ys[i])}};var getIsCodec=function(tag){return function(codec){return codec._tag===tag}};var isAnyCodec=getIsCodec("AnyType");var isInterfaceCodec=getIsCodec("InterfaceType");var isPartialCodec=getIsCodec("PartialType");var NullType=function(_super){__extends(NullType,_super);function NullType(){var _this=_super.call(this,"null",(function(u){return u===null}),(function(u,c){return _this.is(u)?exports.success(u):exports.failure(u,c)}),exports.identity)||this;_this._tag="NullType";return _this}return NullType}(Type);exports.NullType=NullType;exports.nullType=new NullType;exports.null=exports.nullType;var UndefinedType=function(_super){__extends(UndefinedType,_super);function UndefinedType(){var _this=_super.call(this,"undefined",(function(u){return u===void 0}),(function(u,c){return _this.is(u)?exports.success(u):exports.failure(u,c)}),exports.identity)||this;_this._tag="UndefinedType";return _this}return UndefinedType}(Type);exports.UndefinedType=UndefinedType;var undefinedType=new UndefinedType;exports.undefined=undefinedType;var VoidType=function(_super){__extends(VoidType,_super);function VoidType(){var _this=_super.call(this,"void",undefinedType.is,undefinedType.validate,exports.identity)||this;_this._tag="VoidType";return _this}return VoidType}(Type);exports.VoidType=VoidType;exports.voidType=new VoidType;exports.void=exports.voidType;var UnknownType=function(_super){__extends(UnknownType,_super);function UnknownType(){var _this=_super.call(this,"unknown",(function(_){return true}),exports.success,exports.identity)||this;_this._tag="UnknownType";return _this}return UnknownType}(Type);exports.UnknownType=UnknownType;exports.unknown=new UnknownType;var StringType=function(_super){__extends(StringType,_super);function StringType(){var _this=_super.call(this,"string",(function(u){return typeof u==="string"}),(function(u,c){return _this.is(u)?exports.success(u):exports.failure(u,c)}),exports.identity)||this;_this._tag="StringType";return _this}return StringType}(Type);exports.StringType=StringType;exports.string=new StringType;var NumberType=function(_super){__extends(NumberType,_super);function NumberType(){var _this=_super.call(this,"number",(function(u){return typeof u==="number"}),(function(u,c){return _this.is(u)?exports.success(u):exports.failure(u,c)}),exports.identity)||this;_this._tag="NumberType";return _this}return NumberType}(Type);exports.NumberType=NumberType;exports.number=new NumberType;var BooleanType=function(_super){__extends(BooleanType,_super);function BooleanType(){var _this=_super.call(this,"boolean",(function(u){return typeof u==="boolean"}),(function(u,c){return _this.is(u)?exports.success(u):exports.failure(u,c)}),exports.identity)||this;_this._tag="BooleanType";return _this}return BooleanType}(Type);exports.BooleanType=BooleanType;exports.boolean=new BooleanType;var AnyArrayType=function(_super){__extends(AnyArrayType,_super);function AnyArrayType(){var _this=_super.call(this,"UnknownArray",Array.isArray,(function(u,c){return _this.is(u)?exports.success(u):exports.failure(u,c)}),exports.identity)||this;_this._tag="AnyArrayType";return _this}return AnyArrayType}(Type);exports.AnyArrayType=AnyArrayType;exports.UnknownArray=new AnyArrayType;exports.Array=exports.UnknownArray;var AnyDictionaryType=function(_super){__extends(AnyDictionaryType,_super);function AnyDictionaryType(){var _this=_super.call(this,"UnknownRecord",(function(u){return Object.prototype.toString.call(u)==="[object Object]"}),(function(u,c){return _this.is(u)?exports.success(u):exports.failure(u,c)}),exports.identity)||this;_this._tag="AnyDictionaryType";return _this}return AnyDictionaryType}(Type);exports.AnyDictionaryType=AnyDictionaryType;exports.UnknownRecord=new AnyDictionaryType;var FunctionType=function(_super){__extends(FunctionType,_super);function FunctionType(){var _this=_super.call(this,"Function",(function(u){return typeof u==="function"}),(function(u,c){return _this.is(u)?exports.success(u):exports.failure(u,c)}),exports.identity)||this;_this._tag="FunctionType";return _this}return FunctionType}(Type);exports.FunctionType=FunctionType;exports.Function=new FunctionType;var RefinementType=function(_super){__extends(RefinementType,_super);function RefinementType(name,is,validate,encode,type,predicate){var _this=_super.call(this,name,is,validate,encode)||this;_this.type=type;_this.predicate=predicate;_this._tag="RefinementType";return _this}return RefinementType}(Type);exports.RefinementType=RefinementType;exports.brand=function(codec,predicate,name){return refinement(codec,predicate,name)};exports.Int=exports.brand(exports.number,(function(n){return Number.isInteger(n)}),"Int");var LiteralType=function(_super){__extends(LiteralType,_super);function LiteralType(name,is,validate,encode,value){var _this=_super.call(this,name,is,validate,encode)||this;_this.value=value;_this._tag="LiteralType";return _this}return LiteralType}(Type);exports.LiteralType=LiteralType;exports.literal=function(value,name){if(name===void 0){name=JSON.stringify(value)}var is=function(u){return u===value};return new LiteralType(name,is,(function(u,c){return is(u)?exports.success(value):exports.failure(u,c)}),exports.identity,value)};var KeyofType=function(_super){__extends(KeyofType,_super);function KeyofType(name,is,validate,encode,keys){var _this=_super.call(this,name,is,validate,encode)||this;_this.keys=keys;_this._tag="KeyofType";return _this}return KeyofType}(Type);exports.KeyofType=KeyofType;var hasOwnProperty=Object.prototype.hasOwnProperty;exports.keyof=function(keys,name){if(name===void 0){name=Object.keys(keys).map((function(k){return JSON.stringify(k)})).join(" | ")}var is=function(u){return exports.string.is(u)&&hasOwnProperty.call(keys,u)};return new KeyofType(name,is,(function(u,c){return is(u)?exports.success(u):exports.failure(u,c)}),exports.identity,keys)};var RecursiveType=function(_super){__extends(RecursiveType,_super);function RecursiveType(name,is,validate,encode,runDefinition){var _this=_super.call(this,name,is,validate,encode)||this;_this.runDefinition=runDefinition;_this._tag="RecursiveType";return _this}return RecursiveType}(Type);exports.RecursiveType=RecursiveType;Object.defineProperty(RecursiveType.prototype,"type",{get:function(){return this.runDefinition()},enumerable:true,configurable:true});exports.recursion=function(name,definition){var cache;var runDefinition=function(){if(!cache){cache=definition(Self);cache.name=name}return cache};var Self=new RecursiveType(name,(function(u){return runDefinition().is(u)}),(function(u,c){return runDefinition().validate(u,c)}),(function(a){return runDefinition().encode(a)}),runDefinition);return Self};var ArrayType=function(_super){__extends(ArrayType,_super);function ArrayType(name,is,validate,encode,type){var _this=_super.call(this,name,is,validate,encode)||this;_this.type=type;_this._tag="ArrayType";return _this}return ArrayType}(Type);exports.ArrayType=ArrayType;exports.array=function(codec,name){if(name===void 0){name="Array<"+codec.name+">"}return new ArrayType(name,(function(u){return exports.UnknownArray.is(u)&&u.every(codec.is)}),(function(u,c){return chain(exports.UnknownArray.validate(u,c),(function(us){var len=us.length;var as=us;var errors=[];for(var i=0;i<len;i++){var ui=us[i];var result=codec.validate(ui,exports.appendContext(c,String(i),codec,ui));if(Either_1.isLeft(result)){pushAll(errors,result.left)}else{var ai=result.right;if(ai!==ui){if(as===us){as=us.slice()}as[i]=ai}}}return errors.length>0?exports.failures(errors):exports.success(as)}))}),codec.encode===exports.identity?exports.identity:function(a){return a.map(codec.encode)},codec)};var InterfaceType=function(_super){__extends(InterfaceType,_super);function InterfaceType(name,is,validate,encode,props){var _this=_super.call(this,name,is,validate,encode)||this;_this.props=props;_this._tag="InterfaceType";return _this}return InterfaceType}(Type);exports.InterfaceType=InterfaceType;var getNameFromProps=function(props){return Object.keys(props).map((function(k){return k+": "+props[k].name})).join(", ")};var useIdentity=function(codecs){for(var i=0;i<codecs.length;i++){if(codecs[i].encode!==exports.identity){return false}}return true};var getInterfaceTypeName=function(props){return"{ "+getNameFromProps(props)+" }"};exports.type=function(props,name){if(name===void 0){name=getInterfaceTypeName(props)}var keys=Object.keys(props);var types=keys.map((function(key){return props[key]}));var len=keys.length;return new InterfaceType(name,(function(u){if(exports.UnknownRecord.is(u)){for(var i=0;i<len;i++){var k=keys[i];if(!hasOwnProperty.call(u,k)||!types[i].is(u[k])){return false}}return true}return false}),(function(u,c){return chain(exports.UnknownRecord.validate(u,c),(function(o){var a=o;var errors=[];for(var i=0;i<len;i++){var k=keys[i];if(!hasOwnProperty.call(a,k)){if(a===o){a=__assign({},o)}a[k]=a[k]}var ak=a[k];var type_1=types[i];var result=type_1.validate(ak,exports.appendContext(c,k,type_1,ak));if(Either_1.isLeft(result)){pushAll(errors,result.left)}else{var vak=result.right;if(vak!==ak){if(a===o){a=__assign({},o)}a[k]=vak}}}return errors.length>0?exports.failures(errors):exports.success(a)}))}),useIdentity(types)?exports.identity:function(a){var s=__assign({},a);for(var i=0;i<len;i++){var k=keys[i];var encode=types[i].encode;if(encode!==exports.identity){s[k]=encode(a[k])}}return s},props)};exports.interface=exports.type;var PartialType=function(_super){__extends(PartialType,_super);function PartialType(name,is,validate,encode,props){var _this=_super.call(this,name,is,validate,encode)||this;_this.props=props;_this._tag="PartialType";return _this}return PartialType}(Type);exports.PartialType=PartialType;var getPartialTypeName=function(inner){return"Partial<"+inner+">"};exports.partial=function(props,name){if(name===void 0){name=getPartialTypeName(getInterfaceTypeName(props))}var keys=Object.keys(props);var types=keys.map((function(key){return props[key]}));var len=keys.length;return new PartialType(name,(function(u){if(exports.UnknownRecord.is(u)){for(var i=0;i<len;i++){var k=keys[i];var uk=u[k];if(uk!==undefined&&!props[k].is(uk)){return false}}return true}return false}),(function(u,c){return chain(exports.UnknownRecord.validate(u,c),(function(o){var a=o;var errors=[];for(var i=0;i<len;i++){var k=keys[i];var ak=a[k];var type_2=props[k];var result=type_2.validate(ak,exports.appendContext(c,k,type_2,ak));if(Either_1.isLeft(result)){if(ak!==undefined){pushAll(errors,result.left)}}else{var vak=result.right;if(vak!==ak){if(a===o){a=__assign({},o)}a[k]=vak}}}return errors.length>0?exports.failures(errors):exports.success(a)}))}),useIdentity(types)?exports.identity:function(a){var s=__assign({},a);for(var i=0;i<len;i++){var k=keys[i];var ak=a[k];if(ak!==undefined){s[k]=types[i].encode(ak)}}return s},props)};var DictionaryType=function(_super){__extends(DictionaryType,_super);function DictionaryType(name,is,validate,encode,domain,codomain){var _this=_super.call(this,name,is,validate,encode)||this;_this.domain=domain;_this.codomain=codomain;_this._tag="DictionaryType";return _this}return DictionaryType}(Type);exports.DictionaryType=DictionaryType;exports.record=function(domain,codomain,name){if(name===void 0){name="{ [K in "+domain.name+"]: "+codomain.name+" }"}return new DictionaryType(name,(function(u){if(exports.UnknownRecord.is(u)){return Object.keys(u).every((function(k){return domain.is(k)&&codomain.is(u[k])}))}return isAnyCodec(codomain)&&Array.isArray(u)}),(function(u,c){if(exports.UnknownRecord.is(u)){var a={};var errors=[];var keys=Object.keys(u);var len=keys.length;var changed=false;for(var i=0;i<len;i++){var k=keys[i];var ok=u[k];var domainResult=domain.validate(k,exports.appendContext(c,k,domain,k));if(Either_1.isLeft(domainResult)){pushAll(errors,domainResult.left)}else{var vk=domainResult.right;changed=changed||vk!==k;k=vk;var codomainResult=codomain.validate(ok,exports.appendContext(c,k,codomain,ok));if(Either_1.isLeft(codomainResult)){pushAll(errors,codomainResult.left)}else{var vok=codomainResult.right;changed=changed||vok!==ok;a[k]=vok}}}return errors.length>0?exports.failures(errors):exports.success(changed?a:u)}if(isAnyCodec(codomain)&&Array.isArray(u)){return exports.success(u)}return exports.failure(u,c)}),domain.encode===exports.identity&&codomain.encode===exports.identity?exports.identity:function(a){var s={};var keys=Object.keys(a);var len=keys.length;for(var i=0;i<len;i++){var k=keys[i];s[String(domain.encode(k))]=codomain.encode(a[k])}return s},domain,codomain)};var UnionType=function(_super){__extends(UnionType,_super);function UnionType(name,is,validate,encode,types){var _this=_super.call(this,name,is,validate,encode)||this;_this.types=types;_this._tag="UnionType";return _this}return UnionType}(Type);exports.UnionType=UnionType;var getUnionName=function(codecs){return"("+codecs.map((function(type){return type.name})).join(" | ")+")"};exports.union=function(codecs,name){if(name===void 0){name=getUnionName(codecs)}var index=getIndex(codecs);if(index!==undefined&&codecs.length>0){var tag_1=index[0],groups_1=index[1];var len_1=groups_1.length;var find_1=function(value){for(var i=0;i<len_1;i++){if(groups_1[i].indexOf(value)!==-1){return i}}return undefined};return new TaggedUnionType(name,(function(u){if(exports.UnknownRecord.is(u)){var i=find_1(u[tag_1]);return i!==undefined?codecs[i].is(u):false}return false}),(function(u,c){return chain(exports.UnknownRecord.validate(u,c),(function(r){var i=find_1(r[tag_1]);if(i===undefined){return exports.failure(u,c)}var codec=codecs[i];return codec.validate(r,exports.appendContext(c,String(i),codec,r))}))}),useIdentity(codecs)?exports.identity:function(a){var i=find_1(a[tag_1]);if(i===undefined){throw new Error("no codec found to encode value in union codec "+name)}else{return codecs[i].encode(a)}},codecs,tag_1)}else{return new UnionType(name,(function(u){return codecs.some((function(type){return type.is(u)}))}),(function(u,c){var errors=[];for(var i=0;i<codecs.length;i++){var codec=codecs[i];var result=codec.validate(u,exports.appendContext(c,String(i),codec,u));if(Either_1.isLeft(result)){pushAll(errors,result.left)}else{return exports.success(result.right)}}return exports.failures(errors)}),useIdentity(codecs)?exports.identity:function(a){for(var _i=0,codecs_1=codecs;_i<codecs_1.length;_i++){var codec=codecs_1[_i];if(codec.is(a)){return codec.encode(a)}}throw new Error("no codec found to encode value in union type "+name)},codecs)}};var IntersectionType=function(_super){__extends(IntersectionType,_super);function IntersectionType(name,is,validate,encode,types){var _this=_super.call(this,name,is,validate,encode)||this;_this.types=types;_this._tag="IntersectionType";return _this}return IntersectionType}(Type);exports.IntersectionType=IntersectionType;var mergeAll=function(base,us){var equal=true;var primitive=true;for(var _i=0,us_1=us;_i<us_1.length;_i++){var u=us_1[_i];if(u!==base){equal=false}if(exports.UnknownRecord.is(u)){primitive=false}}if(equal){return base}else if(primitive){return us[us.length-1]}var r={};for(var _a=0,us_2=us;_a<us_2.length;_a++){var u=us_2[_a];for(var k in u){if(u[k]!==base[k]||!r.hasOwnProperty(k)){r[k]=u[k]}}}return r};function intersection(codecs,name){if(name===void 0){name="("+codecs.map((function(type){return type.name})).join(" & ")+")"}var len=codecs.length;return new IntersectionType(name,(function(u){return codecs.every((function(type){return type.is(u)}))}),codecs.length===0?exports.success:function(u,c){var us=[];var errors=[];for(var i=0;i<len;i++){var codec=codecs[i];var result=codec.validate(u,exports.appendContext(c,String(i),codec,u));if(Either_1.isLeft(result)){pushAll(errors,result.left)}else{us.push(result.right)}}return errors.length>0?exports.failures(errors):exports.success(mergeAll(u,us))},codecs.length===0?exports.identity:function(a){return mergeAll(a,codecs.map((function(codec){return codec.encode(a)})))},codecs)}exports.intersection=intersection;var TupleType=function(_super){__extends(TupleType,_super);function TupleType(name,is,validate,encode,types){var _this=_super.call(this,name,is,validate,encode)||this;_this.types=types;_this._tag="TupleType";return _this}return TupleType}(Type);exports.TupleType=TupleType;function tuple(codecs,name){if(name===void 0){name="["+codecs.map((function(type){return type.name})).join(", ")+"]"}var len=codecs.length;return new TupleType(name,(function(u){return exports.UnknownArray.is(u)&&u.length===len&&codecs.every((function(type,i){return type.is(u[i])}))}),(function(u,c){return chain(exports.UnknownArray.validate(u,c),(function(us){var as=us.length>len?us.slice(0,len):us;var errors=[];for(var i=0;i<len;i++){var a=us[i];var type_3=codecs[i];var result=type_3.validate(a,exports.appendContext(c,String(i),type_3,a));if(Either_1.isLeft(result)){pushAll(errors,result.left)}else{var va=result.right;if(va!==a){if(as===us){as=us.slice()}as[i]=va}}}return errors.length>0?exports.failures(errors):exports.success(as)}))}),useIdentity(codecs)?exports.identity:function(a){return codecs.map((function(type,i){return type.encode(a[i])}))},codecs)}exports.tuple=tuple;var ReadonlyType=function(_super){__extends(ReadonlyType,_super);function ReadonlyType(name,is,validate,encode,type){var _this=_super.call(this,name,is,validate,encode)||this;_this.type=type;_this._tag="ReadonlyType";return _this}return ReadonlyType}(Type);exports.ReadonlyType=ReadonlyType;exports.readonly=function(codec,name){if(name===void 0){name="Readonly<"+codec.name+">"}return new ReadonlyType(name,codec.is,(function(u,c){return map(codec.validate(u,c),(function(x){if(false){}return x}))}),codec.encode===exports.identity?exports.identity:codec.encode,codec)};var ReadonlyArrayType=function(_super){__extends(ReadonlyArrayType,_super);function ReadonlyArrayType(name,is,validate,encode,type){var _this=_super.call(this,name,is,validate,encode)||this;_this.type=type;_this._tag="ReadonlyArrayType";return _this}return ReadonlyArrayType}(Type);exports.ReadonlyArrayType=ReadonlyArrayType;exports.readonlyArray=function(codec,name){if(name===void 0){name="ReadonlyArray<"+codec.name+">"}var arrayType=exports.array(codec);return new ReadonlyArrayType(name,arrayType.is,(function(u,c){return map(arrayType.validate(u,c),(function(x){if(false){}return x}))}),arrayType.encode,codec)};exports.strict=function(props,name){return exports.exact(exports.type(props),name)};var TaggedUnionType=function(_super){__extends(TaggedUnionType,_super);function TaggedUnionType(name,is,validate,encode,codecs,tag){var _this=_super.call(this,name,is,validate,encode,codecs)||this;_this.tag=tag;return _this}return TaggedUnionType}(UnionType);exports.TaggedUnionType=TaggedUnionType;exports.taggedUnion=function(tag,codecs,name){if(name===void 0){name=getUnionName(codecs)}var U=exports.union(codecs,name);if(U instanceof TaggedUnionType){return U}else{console.warn("[io-ts] Cannot build a tagged union for "+name+", returning a de-optimized union");return new TaggedUnionType(name,U.is,U.validate,U.encode,codecs,tag)}};var ExactType=function(_super){__extends(ExactType,_super);function ExactType(name,is,validate,encode,type){var _this=_super.call(this,name,is,validate,encode)||this;_this.type=type;_this._tag="ExactType";return _this}return ExactType}(Type);exports.ExactType=ExactType;var getProps=function(codec){switch(codec._tag){case"RefinementType":case"ReadonlyType":return getProps(codec.type);case"InterfaceType":case"StrictType":case"PartialType":return codec.props;case"IntersectionType":return codec.types.reduce((function(props,type){return Object.assign(props,getProps(type))}),{})}};var stripKeys=function(o,props){var keys=Object.getOwnPropertyNames(o);var shouldStrip=false;var r={};for(var i=0;i<keys.length;i++){var key=keys[i];if(!hasOwnProperty.call(props,key)){shouldStrip=true}else{r[key]=o[key]}}return shouldStrip?r:o};var getExactTypeName=function(codec){if(isInterfaceCodec(codec)){return"{| "+getNameFromProps(codec.props)+" |}"}else if(isPartialCodec(codec)){return getPartialTypeName("{| "+getNameFromProps(codec.props)+" |}")}return"Exact<"+codec.name+">"};exports.exact=function(codec,name){if(name===void 0){name=getExactTypeName(codec)}var props=getProps(codec);return new ExactType(name,codec.is,(function(u,c){return chain(exports.UnknownRecord.validate(u,c),(function(){return map(codec.validate(u,c),(function(a){return stripKeys(a,props)}))}))}),(function(a){return codec.encode(stripKeys(a,props))}),codec)};exports.getValidationError=function(value,context){return{value:value,context:context}};exports.getDefaultContext=function(decoder){return[{key:"",type:decoder}]};var NeverType=function(_super){__extends(NeverType,_super);function NeverType(){var _this=_super.call(this,"never",(function(_){return false}),(function(u,c){return exports.failure(u,c)}),(function(){throw new Error("cannot encode never")}))||this;_this._tag="NeverType";return _this}return NeverType}(Type);exports.NeverType=NeverType;exports.never=new NeverType;var AnyType=function(_super){__extends(AnyType,_super);function AnyType(){var _this=_super.call(this,"any",(function(_){return true}),exports.success,exports.identity)||this;_this._tag="AnyType";return _this}return AnyType}(Type);exports.AnyType=AnyType;exports.any=new AnyType;exports.Dictionary=exports.UnknownRecord;var ObjectType=function(_super){__extends(ObjectType,_super);function ObjectType(){var _this=_super.call(this,"object",(function(u){return u!==null&&typeof u==="object"}),(function(u,c){return _this.is(u)?exports.success(u):exports.failure(u,c)}),exports.identity)||this;_this._tag="ObjectType";return _this}return ObjectType}(Type);exports.ObjectType=ObjectType;exports.object=new ObjectType;function refinement(codec,predicate,name){if(name===void 0){name="("+codec.name+" | "+exports.getFunctionName(predicate)+")"}return new RefinementType(name,(function(u){return codec.is(u)&&predicate(u)}),(function(i,c){return chain(codec.validate(i,c),(function(a){return predicate(a)?exports.success(a):exports.failure(a,c)}))}),codec.encode,codec,predicate)}exports.refinement=refinement;exports.Integer=refinement(exports.number,Number.isInteger,"Integer");exports.dictionary=exports.record;var StrictType=function(_super){__extends(StrictType,_super);function StrictType(name,is,validate,encode,props){var _this=_super.call(this,name,is,validate,encode)||this;_this.props=props;_this._tag="StrictType";return _this}return StrictType}(Type);exports.StrictType=StrictType;function clean(codec){return codec}exports.clean=clean;function alias(codec){return function(){return codec}}exports.alias=alias;var isNonEmpty=function(as){return as.length>0};exports.emptyTags={};function intersect(a,b){var r=[];for(var _i=0,a_1=a;_i<a_1.length;_i++){var v=a_1[_i];if(b.indexOf(v)!==-1){r.push(v)}}return r}function mergeTags(a,b){if(a===exports.emptyTags){return b}if(b===exports.emptyTags){return a}var r=Object.assign({},a);for(var k in b){if(a.hasOwnProperty(k)){var intersection_1=intersect(a[k],b[k]);if(isNonEmpty(intersection_1)){r[k]=intersection_1}else{r=exports.emptyTags;break}}else{r[k]=b[k]}}return r}function intersectTags(a,b){if(a===exports.emptyTags||b===exports.emptyTags){return exports.emptyTags}var r=exports.emptyTags;for(var k in a){if(b.hasOwnProperty(k)){var intersection_2=intersect(a[k],b[k]);if(intersection_2.length===0){if(r===exports.emptyTags){r={}}r[k]=a[k].concat(b[k])}}}return r}function isLiteralC(codec){return codec._tag==="LiteralType"}function isTypeC(codec){return codec._tag==="InterfaceType"}function isStrictC(codec){return codec._tag==="StrictType"}function isExactC(codec){return codec._tag==="ExactType"}function isRefinementC(codec){return codec._tag==="RefinementType"}function isIntersectionC(codec){return codec._tag==="IntersectionType"}function isUnionC(codec){return codec._tag==="UnionType"}function isRecursiveC(codec){return codec._tag==="RecursiveType"}var lazyCodecs=[];function getTags(codec){if(lazyCodecs.indexOf(codec)!==-1){return exports.emptyTags}if(isTypeC(codec)||isStrictC(codec)){var index=exports.emptyTags;for(var k in codec.props){var prop=codec.props[k];if(isLiteralC(prop)){if(index===exports.emptyTags){index={}}index[k]=[prop.value]}}return index}else if(isExactC(codec)||isRefinementC(codec)){return getTags(codec.type)}else if(isIntersectionC(codec)){return codec.types.reduce((function(tags,codec){return mergeTags(tags,getTags(codec))}),exports.emptyTags)}else if(isUnionC(codec)){return codec.types.slice(1).reduce((function(tags,codec){return intersectTags(tags,getTags(codec))}),getTags(codec.types[0]))}else if(isRecursiveC(codec)){lazyCodecs.push(codec);var tags=getTags(codec.type);lazyCodecs.pop();return tags}return exports.emptyTags}exports.getTags=getTags;function getIndex(codecs){var tags=getTags(codecs[0]);var keys=Object.keys(tags);var len=codecs.length;var _loop_1=function(k){var all=tags[k].slice();var index=[tags[k]];for(var i=1;i<len;i++){var codec=codecs[i];var ctags=getTags(codec);var values=ctags[k];if(values===undefined){return"continue-keys"}else{if(values.some((function(v){return all.indexOf(v)!==-1}))){return"continue-keys"}else{all.push.apply(all,values);index.push(values)}}}return{value:[k,index]}};keys:for(var _i=0,keys_1=keys;_i<keys_1.length;_i++){var k=keys_1[_i];var state_1=_loop_1(k);if(typeof state_1==="object")return state_1.value;switch(state_1){case"continue-keys":continue keys}}return undefined}exports.getIndex=getIndex},function(module,exports,__webpack_require__){var v1=__webpack_require__(97);var v4=__webpack_require__(98);var uuid=v4;uuid.v1=v1;uuid.v4=v4;module.exports=uuid},function(module,exports){var getRandomValues=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function whatwgRNG(){getRandomValues(rnds8);return rnds8}}else{var rnds=new Array(16);module.exports=function mathRNG(){for(var i=0,r;i<16;i++){if((i&3)===0)r=Math.random()*4294967296;rnds[i]=r>>>((i&3)<<3)&255}return rnds}}},function(module,exports){var byteToHex=[];for(var i=0;i<256;++i){byteToHex[i]=(i+256).toString(16).substr(1)}function bytesToUuid(buf,offset){var i=offset||0;var bth=byteToHex;return[bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]].join("")}module.exports=bytesToUuid},function(module,exports,__webpack_require__){if(false){var throwOnDirectAccess,ReactIs}else{module.exports=__webpack_require__(105)()}},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports,__webpack_require__){var _typeof=__webpack_require__(108);function _getRequireWildcardCache(){if(typeof WeakMap!=="function")return null;var cache=new WeakMap;_getRequireWildcardCache=function _getRequireWildcardCache(){return cache};return cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache();if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj)}return newObj}module.exports=_interopRequireWildcard},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.getBatch=exports.setBatch=void 0;function defaultNoopBatch(callback){callback()}var batch=defaultNoopBatch;var setBatch=function setBatch(newBatch){return batch=newBatch};exports.setBatch=setBatch;var getBatch=function getBatch(){return batch};exports.getBatch=getBatch},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(69);var _interopRequireDefault=__webpack_require__(37);exports.__esModule=true;exports["default"]=connectAdvanced;var _extends2=_interopRequireDefault(__webpack_require__(56));var _objectWithoutPropertiesLoose2=_interopRequireDefault(__webpack_require__(57));var _hoistNonReactStatics=_interopRequireDefault(__webpack_require__(109));var _react=_interopRequireWildcard(__webpack_require__(19));var _reactIs=__webpack_require__(72);var _Subscription=_interopRequireDefault(__webpack_require__(55));var _useIsomorphicLayoutEffect=__webpack_require__(73);var _Context=__webpack_require__(41);var EMPTY_ARRAY=[];var NO_SUBSCRIPTION_ARRAY=[null,null];var stringifyComponent=function stringifyComponent(Comp){try{return JSON.stringify(Comp)}catch(err){return String(Comp)}};function storeStateUpdatesReducer(state,action){var updateCount=state[1];return[action.payload,updateCount+1]}function useIsomorphicLayoutEffectWithArgs(effectFunc,effectArgs,dependencies){(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)((function(){return effectFunc.apply(void 0,effectArgs)}),dependencies)}function captureWrapperProps(lastWrapperProps,lastChildProps,renderIsScheduled,wrapperProps,actualChildProps,childPropsFromStoreUpdate,notifyNestedSubs){lastWrapperProps.current=wrapperProps;lastChildProps.current=actualChildProps;renderIsScheduled.current=false;if(childPropsFromStoreUpdate.current){childPropsFromStoreUpdate.current=null;notifyNestedSubs()}}function subscribeUpdates(shouldHandleStateChanges,store,subscription,childPropsSelector,lastWrapperProps,lastChildProps,renderIsScheduled,childPropsFromStoreUpdate,notifyNestedSubs,forceComponentUpdateDispatch){if(!shouldHandleStateChanges)return;var didUnsubscribe=false;var lastThrownError=null;var checkForUpdates=function checkForUpdates(){if(didUnsubscribe){return}var latestStoreState=store.getState();var newChildProps,error;try{newChildProps=childPropsSelector(latestStoreState,lastWrapperProps.current)}catch(e){error=e;lastThrownError=e}if(!error){lastThrownError=null}if(newChildProps===lastChildProps.current){if(!renderIsScheduled.current){notifyNestedSubs()}}else{lastChildProps.current=newChildProps;childPropsFromStoreUpdate.current=newChildProps;renderIsScheduled.current=true;forceComponentUpdateDispatch({type:"STORE_UPDATED",payload:{error:error}})}};subscription.onStateChange=checkForUpdates;subscription.trySubscribe();checkForUpdates();var unsubscribeWrapper=function unsubscribeWrapper(){didUnsubscribe=true;subscription.tryUnsubscribe();subscription.onStateChange=null;if(lastThrownError){throw lastThrownError}};return unsubscribeWrapper}var initStateUpdates=function initStateUpdates(){return[null,0]};function connectAdvanced(selectorFactory,_ref){if(_ref===void 0){_ref={}}var _ref2=_ref,_ref2$getDisplayName=_ref2.getDisplayName,getDisplayName=_ref2$getDisplayName===void 0?function(name){return"ConnectAdvanced("+name+")"}:_ref2$getDisplayName,_ref2$methodName=_ref2.methodName,methodName=_ref2$methodName===void 0?"connectAdvanced":_ref2$methodName,_ref2$renderCountProp=_ref2.renderCountProp,renderCountProp=_ref2$renderCountProp===void 0?undefined:_ref2$renderCountProp,_ref2$shouldHandleSta=_ref2.shouldHandleStateChanges,shouldHandleStateChanges=_ref2$shouldHandleSta===void 0?true:_ref2$shouldHandleSta,_ref2$storeKey=_ref2.storeKey,storeKey=_ref2$storeKey===void 0?"store":_ref2$storeKey,_ref2$withRef=_ref2.withRef,withRef=_ref2$withRef===void 0?false:_ref2$withRef,_ref2$forwardRef=_ref2.forwardRef,forwardRef=_ref2$forwardRef===void 0?false:_ref2$forwardRef,_ref2$context=_ref2.context,context=_ref2$context===void 0?_Context.ReactReduxContext:_ref2$context,connectOptions=(0,_objectWithoutPropertiesLoose2["default"])(_ref2,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);if(false){var customStoreWarningMessage}var Context=context;return function wrapWithConnect(WrappedComponent){if(false){}var wrappedComponentName=WrappedComponent.displayName||WrappedComponent.name||"Component";var displayName=getDisplayName(wrappedComponentName);var selectorFactoryOptions=(0,_extends2["default"])({},connectOptions,{getDisplayName:getDisplayName,methodName:methodName,renderCountProp:renderCountProp,shouldHandleStateChanges:shouldHandleStateChanges,storeKey:storeKey,displayName:displayName,wrappedComponentName:wrappedComponentName,WrappedComponent:WrappedComponent});var pure=connectOptions.pure;function createChildSelector(store){return selectorFactory(store.dispatch,selectorFactoryOptions)}var usePureOnlyMemo=pure?_react.useMemo:function(callback){return callback()};function ConnectFunction(props){var _useMemo=(0,_react.useMemo)((function(){var forwardedRef=props.forwardedRef,wrapperProps=(0,_objectWithoutPropertiesLoose2["default"])(props,["forwardedRef"]);return[props.context,forwardedRef,wrapperProps]}),[props]),propsContext=_useMemo[0],forwardedRef=_useMemo[1],wrapperProps=_useMemo[2];var ContextToUse=(0,_react.useMemo)((function(){return propsContext&&propsContext.Consumer&&(0,_reactIs.isContextConsumer)(_react["default"].createElement(propsContext.Consumer,null))?propsContext:Context}),[propsContext,Context]);var contextValue=(0,_react.useContext)(ContextToUse);var didStoreComeFromProps=Boolean(props.store)&&Boolean(props.store.getState)&&Boolean(props.store.dispatch);var didStoreComeFromContext=Boolean(contextValue)&&Boolean(contextValue.store);if(false){}var store=didStoreComeFromProps?props.store:contextValue.store;var childPropsSelector=(0,_react.useMemo)((function(){return createChildSelector(store)}),[store]);var _useMemo2=(0,_react.useMemo)((function(){if(!shouldHandleStateChanges)return NO_SUBSCRIPTION_ARRAY;var subscription=new _Subscription["default"](store,didStoreComeFromProps?null:contextValue.subscription);var notifyNestedSubs=subscription.notifyNestedSubs.bind(subscription);return[subscription,notifyNestedSubs]}),[store,didStoreComeFromProps,contextValue]),subscription=_useMemo2[0],notifyNestedSubs=_useMemo2[1];var overriddenContextValue=(0,_react.useMemo)((function(){if(didStoreComeFromProps){return contextValue}return(0,_extends2["default"])({},contextValue,{subscription:subscription})}),[didStoreComeFromProps,contextValue,subscription]);var _useReducer=(0,_react.useReducer)(storeStateUpdatesReducer,EMPTY_ARRAY,initStateUpdates),_useReducer$=_useReducer[0],previousStateUpdateResult=_useReducer$[0],forceComponentUpdateDispatch=_useReducer[1];if(previousStateUpdateResult&&previousStateUpdateResult.error){throw previousStateUpdateResult.error}var lastChildProps=(0,_react.useRef)();var lastWrapperProps=(0,_react.useRef)(wrapperProps);var childPropsFromStoreUpdate=(0,_react.useRef)();var renderIsScheduled=(0,_react.useRef)(false);var actualChildProps=usePureOnlyMemo((function(){if(childPropsFromStoreUpdate.current&&wrapperProps===lastWrapperProps.current){return childPropsFromStoreUpdate.current}return childPropsSelector(store.getState(),wrapperProps)}),[store,previousStateUpdateResult,wrapperProps]);useIsomorphicLayoutEffectWithArgs(captureWrapperProps,[lastWrapperProps,lastChildProps,renderIsScheduled,wrapperProps,actualChildProps,childPropsFromStoreUpdate,notifyNestedSubs]);useIsomorphicLayoutEffectWithArgs(subscribeUpdates,[shouldHandleStateChanges,store,subscription,childPropsSelector,lastWrapperProps,lastChildProps,renderIsScheduled,childPropsFromStoreUpdate,notifyNestedSubs,forceComponentUpdateDispatch],[store,subscription,childPropsSelector]);var renderedWrappedComponent=(0,_react.useMemo)((function(){return _react["default"].createElement(WrappedComponent,(0,_extends2["default"])({},actualChildProps,{ref:forwardedRef}))}),[forwardedRef,WrappedComponent,actualChildProps]);var renderedChild=(0,_react.useMemo)((function(){if(shouldHandleStateChanges){return _react["default"].createElement(ContextToUse.Provider,{value:overriddenContextValue},renderedWrappedComponent)}return renderedWrappedComponent}),[ContextToUse,renderedWrappedComponent,overriddenContextValue]);return renderedChild}var Connect=pure?_react["default"].memo(ConnectFunction):ConnectFunction;Connect.WrappedComponent=WrappedComponent;Connect.displayName=displayName;if(forwardRef){var forwarded=_react["default"].forwardRef((function forwardConnectRef(props,ref){return _react["default"].createElement(Connect,(0,_extends2["default"])({},props,{forwardedRef:ref}))}));forwarded.displayName=displayName;forwarded.WrappedComponent=WrappedComponent;return(0,_hoistNonReactStatics["default"])(forwarded,WrappedComponent)}return(0,_hoistNonReactStatics["default"])(Connect,WrappedComponent)}}},function(module,exports,__webpack_require__){"use strict";if(true){module.exports=__webpack_require__(110)}else{}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.useIsomorphicLayoutEffect=void 0;var _react=__webpack_require__(19);var useIsomorphicLayoutEffect=typeof window!=="undefined"&&typeof window.document!=="undefined"&&typeof window.document.createElement!=="undefined"?_react.useLayoutEffect:_react.useEffect;exports.useIsomorphicLayoutEffect=useIsomorphicLayoutEffect},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports["default"]=shallowEqual;function is(x,y){if(x===y){return x!==0||y!==0||1/x===1/y}else{return x!==x&&y!==y}}function shallowEqual(objA,objB){if(is(objA,objB))return true;if(typeof objA!=="object"||objA===null||typeof objB!=="object"||objB===null){return false}var keysA=Object.keys(objA);var keysB=Object.keys(objB);if(keysA.length!==keysB.length)return false;for(var i=0;i<keysA.length;i++){if(!Object.prototype.hasOwnProperty.call(objB,keysA[i])||!is(objA[keysA[i]],objB[keysA[i]])){return false}}return true}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(37);exports.__esModule=true;exports.wrapMapToPropsConstant=wrapMapToPropsConstant;exports.getDependsOnOwnProps=getDependsOnOwnProps;exports.wrapMapToPropsFunc=wrapMapToPropsFunc;var _verifyPlainObject=_interopRequireDefault(__webpack_require__(76));function wrapMapToPropsConstant(getConstant){return function initConstantSelector(dispatch,options){var constant=getConstant(dispatch,options);function constantSelector(){return constant}constantSelector.dependsOnOwnProps=false;return constantSelector}}function getDependsOnOwnProps(mapToProps){return mapToProps.dependsOnOwnProps!==null&&mapToProps.dependsOnOwnProps!==undefined?Boolean(mapToProps.dependsOnOwnProps):mapToProps.length!==1}function wrapMapToPropsFunc(mapToProps,methodName){return function initProxySelector(dispatch,_ref){var displayName=_ref.displayName;var proxy=function mapToPropsProxy(stateOrDispatch,ownProps){return proxy.dependsOnOwnProps?proxy.mapToProps(stateOrDispatch,ownProps):proxy.mapToProps(stateOrDispatch)};proxy.dependsOnOwnProps=true;proxy.mapToProps=function detectFactoryAndVerify(stateOrDispatch,ownProps){proxy.mapToProps=mapToProps;proxy.dependsOnOwnProps=getDependsOnOwnProps(mapToProps);var props=proxy(stateOrDispatch,ownProps);if(typeof props==="function"){proxy.mapToProps=props;proxy.dependsOnOwnProps=getDependsOnOwnProps(props);props=proxy(stateOrDispatch,ownProps)}if(false){}return props};return proxy}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(37);exports.__esModule=true;exports["default"]=verifyPlainObject;var _isPlainObject=_interopRequireDefault(__webpack_require__(117));var _warning=_interopRequireDefault(__webpack_require__(77));function verifyPlainObject(value,displayName,methodName){if(!(0,_isPlainObject["default"])(value)){(0,_warning["default"])(methodName+"() in "+displayName+" must return a plain object. Instead received "+value+".")}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports["default"]=warning;function warning(message){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(message)}try{throw new Error(message)}catch(e){}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.createStoreHook=createStoreHook;exports.useStore=void 0;var _react=__webpack_require__(19);var _Context=__webpack_require__(41);var _useReduxContext2=__webpack_require__(79);function createStoreHook(context){if(context===void 0){context=_Context.ReactReduxContext}var useReduxContext=context===_Context.ReactReduxContext?_useReduxContext2.useReduxContext:function(){return(0,_react.useContext)(context)};return function useStore(){var _useReduxContext=useReduxContext(),store=_useReduxContext.store;return store}}var useStore=createStoreHook();exports.useStore=useStore},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.useReduxContext=useReduxContext;var _react=__webpack_require__(19);var _Context=__webpack_require__(41);function useReduxContext(){var contextValue=(0,_react.useContext)(_Context.ReactReduxContext);if(false){}return contextValue}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _aliases__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(81);var _aliases__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_aliases__WEBPACK_IMPORTED_MODULE_0__);var _indices__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(82);var _indices__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_indices__WEBPACK_IMPORTED_MODULE_1__);var _mappings__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(83);var _mappings__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_mappings__WEBPACK_IMPORTED_MODULE_2__);var _templates__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(84);var _templates__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_templates__WEBPACK_IMPORTED_MODULE_3__);var _data_streams__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(43);var _data_streams__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_data_streams__WEBPACK_IMPORTED_MODULE_4__);var _component_templates__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(85);var _component_templates__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_component_templates__WEBPACK_IMPORTED_MODULE_5__)},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return value.length===0};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return value.toString()};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return typeof value==="string"};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return value===null||value===undefined};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _toCamelCase=_interopRequireDefault(__webpack_require__(158));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var namespacer="/";var _default=function _default(type){return type.indexOf(namespacer)===-1?(0,_toCamelCase.default)(type):type.split(namespacer).map(_toCamelCase.default).join(namespacer)};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _constants=__webpack_require__(45);var _ownKeys=_interopRequireDefault(__webpack_require__(60));var _get=_interopRequireDefault(__webpack_require__(93));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=function _default(predicate){return function flatten(map,_temp,partialFlatMap,partialFlatActionType){var _ref=_temp===void 0?{}:_temp,_ref$namespace=_ref.namespace,namespace=_ref$namespace===void 0?_constants.DEFAULT_NAMESPACE:_ref$namespace,prefix=_ref.prefix;if(partialFlatMap===void 0){partialFlatMap={}}if(partialFlatActionType===void 0){partialFlatActionType=""}function connectNamespace(type){var _ref2;if(!partialFlatActionType)return type;var types=type.toString().split(_constants.ACTION_TYPE_DELIMITER);var partials=partialFlatActionType.split(_constants.ACTION_TYPE_DELIMITER);return(_ref2=[]).concat.apply(_ref2,partials.map((function(p){return types.map((function(t){return""+p+namespace+t}))}))).join(_constants.ACTION_TYPE_DELIMITER)}function connectPrefix(type){if(partialFlatActionType||!prefix||prefix&&new RegExp("^"+prefix+namespace).test(type)){return type}return""+prefix+namespace+type}(0,_ownKeys.default)(map).forEach((function(type){var nextNamespace=connectPrefix(connectNamespace(type));var mapValue=(0,_get.default)(type,map);if(predicate(mapValue)){flatten(mapValue,{namespace:namespace,prefix:prefix},partialFlatMap,nextNamespace)}else{partialFlatMap[nextNamespace]=mapValue}}));return partialFlatMap}};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=get;var _isMap=_interopRequireDefault(__webpack_require__(51));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function get(key,x){return(0,_isMap.default)(x)?x.get(key):x[key]}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=handleAction;var _invariant=_interopRequireDefault(__webpack_require__(44));var _isFunction=_interopRequireDefault(__webpack_require__(50));var _isPlainObject=_interopRequireDefault(__webpack_require__(46));var _identity=_interopRequireDefault(__webpack_require__(59));var _isNil=_interopRequireDefault(__webpack_require__(90));var _isUndefined=_interopRequireDefault(__webpack_require__(166));var _toString=_interopRequireDefault(__webpack_require__(88));var _constants=__webpack_require__(45);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function handleAction(type,reducer,defaultState){if(reducer===void 0){reducer=_identity.default}var types=(0,_toString.default)(type).split(_constants.ACTION_TYPE_DELIMITER);(0,_invariant.default)(!(0,_isUndefined.default)(defaultState),"defaultState for reducer handling "+types.join(", ")+" should be defined");(0,_invariant.default)((0,_isFunction.default)(reducer)||(0,_isPlainObject.default)(reducer),"Expected reducer to be a function or object with next and throw reducers");var _ref=(0,_isFunction.default)(reducer)?[reducer,reducer]:[reducer.next,reducer.throw].map((function(aReducer){return(0,_isNil.default)(aReducer)?_identity.default:aReducer})),nextReducer=_ref[0],throwReducer=_ref[1];return function(state,action){if(state===void 0){state=defaultState}var actionType=action.type;if(!actionType||types.indexOf((0,_toString.default)(actionType))===-1){return state}return(action.error===true?throwReducer:nextReducer)(state,action)}}},function(module,exports){module.exports=function(){throw new Error("define cannot be used indirect")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tailRec=void 0;function tailRec(a,f){var v=f(a);while(v._tag==="Left"){v=f(v.left)}return v.right}exports.tailRec=tailRec},function(module,exports,__webpack_require__){var rng=__webpack_require__(63);var bytesToUuid=__webpack_require__(64);var _nodeId;var _clockseq;var _lastMSecs=0;var _lastNSecs=0;function v1(options,buf,offset){var i=buf&&offset||0;var b=buf||[];options=options||{};var node=options.node||_nodeId;var clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;if(node==null||clockseq==null){var seedBytes=rng();if(node==null){node=_nodeId=[seedBytes[0]|1,seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]}if(clockseq==null){clockseq=_clockseq=(seedBytes[6]<<8|seedBytes[7])&16383}}var msecs=options.msecs!==undefined?options.msecs:(new Date).getTime();var nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1;var dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&options.clockseq===undefined){clockseq=clockseq+1&16383}if((dt<0||msecs>_lastMSecs)&&options.nsecs===undefined){nsecs=0}if(nsecs>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}_lastMSecs=msecs;_lastNSecs=nsecs;_clockseq=clockseq;msecs+=122192928e5;var tl=((msecs&268435455)*1e4+nsecs)%4294967296;b[i++]=tl>>>24&255;b[i++]=tl>>>16&255;b[i++]=tl>>>8&255;b[i++]=tl&255;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255;b[i++]=tmh&255;b[i++]=tmh>>>24&15|16;b[i++]=tmh>>>16&255;b[i++]=clockseq>>>8|128;b[i++]=clockseq&255;for(var n=0;n<6;++n){b[i+n]=node[n]}return buf?buf:bytesToUuid(b)}module.exports=v1},function(module,exports,__webpack_require__){var rng=__webpack_require__(63);var bytesToUuid=__webpack_require__(64);function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=="string"){buf=options==="binary"?new Array(16):null;options=null}options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){for(var ii=0;ii<16;++ii){buf[i+ii]=rnds[ii]}}return buf||bytesToUuid(rnds)}module.exports=v4},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});exports.filterMap=exports.separate=exports.compact=exports.fromArray=exports.toggle=exports.remove=exports.insert=exports.singleton=exports.foldMap=exports.reduce=exports.getIntersectionSemigroup=exports.getUnionMonoid=exports.difference=exports.partitionMap=exports.intersection=exports.union=exports.elem=exports.partition=exports.filter=exports.subset=exports.chain=exports.every=exports.map=exports.some=exports.getEq=exports.toArray=exports.empty=exports.getShow=void 0;var RS=__importStar(__webpack_require__(100));exports.getShow=RS.getShow;exports.empty=new Set;exports.toArray=RS.toReadonlyArray;exports.getEq=RS.getEq;exports.some=RS.some;exports.map=RS.map;exports.every=RS.every;exports.chain=RS.chain;exports.subset=RS.isSubset;function filter(predicate){return RS.filter(predicate)}exports.filter=filter;function partition(predicate){return RS.partition(predicate)}exports.partition=partition;exports.elem=RS.elem;exports.union=RS.union;exports.intersection=RS.intersection;exports.partitionMap=RS.partitionMap;exports.difference=RS.difference;exports.getUnionMonoid=RS.getUnionMonoid;exports.getIntersectionSemigroup=RS.getIntersectionSemigroup;exports.reduce=RS.reduce;exports.foldMap=RS.foldMap;exports.singleton=RS.singleton;exports.insert=RS.insert;exports.remove=RS.remove;function toggle(E){var elemE=exports.elem(E);var removeE=exports.remove(E);var insertE=exports.insert(E);return function(a){return function(set){return(elemE(a,set)?removeE:insertE)(a)(set)}}}exports.toggle=toggle;exports.fromArray=RS.fromArray;exports.compact=RS.compact;exports.separate=RS.separate;exports.filterMap=RS.filterMap},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterMap=exports.separate=exports.compact=exports.fromArray=exports.remove=exports.insert=exports.singleton=exports.foldMap=exports.reduce=exports.getIntersectionSemigroup=exports.getUnionMonoid=exports.difference=exports.partitionMap=exports.intersection=exports.union=exports.elem=exports.partition=exports.filter=exports.isSubset=exports.chain=exports.every=exports.map=exports.some=exports.getEq=exports.toReadonlyArray=exports.empty=exports.getShow=exports.toSet=exports.fromSet=void 0;var Eq_1=__webpack_require__(101);var function_1=__webpack_require__(48);function fromSet(s){return new Set(s)}exports.fromSet=fromSet;function toSet(s){return new Set(s)}exports.toSet=toSet;function getShow(S){return{show:function(s){var elements="";s.forEach((function(a){elements+=S.show(a)+", "}));if(elements!==""){elements=elements.substring(0,elements.length-2)}return"new Set(["+elements+"])"}}}exports.getShow=getShow;exports.empty=new Set;function toReadonlyArray(O){return function(x){var r=[];x.forEach((function(e){return r.push(e)}));return r.sort(O.compare)}}exports.toReadonlyArray=toReadonlyArray;function getEq(E){var subsetE=isSubset(E);return Eq_1.fromEquals((function(x,y){return subsetE(x,y)&&subsetE(y,x)}))}exports.getEq=getEq;function some(predicate){return function(set){var values=set.values();var e;var found=false;while(!found&&!(e=values.next()).done){found=predicate(e.value)}return found}}exports.some=some;function map(E){var elemE=elem(E);return function(f){return function(set){var r=new Set;set.forEach((function(e){var v=f(e);if(!elemE(v,r)){r.add(v)}}));return r}}}exports.map=map;function every(predicate){return function_1.not(some(function_1.not(predicate)))}exports.every=every;function chain(E){var elemE=elem(E);return function(f){return function(set){var r=new Set;set.forEach((function(e){f(e).forEach((function(e){if(!elemE(e,r)){r.add(e)}}))}));return r}}}exports.chain=chain;function isSubset(E){var elemE=elem(E);return function(me,that){if(that===undefined){var isSubsetE_1=isSubset(E);return function(that){return isSubsetE_1(that,me)}}return every((function(a){return elemE(a,that)}))(me)}}exports.isSubset=isSubset;function filter(predicate){return function(set){var values=set.values();var e;var r=new Set;while(!(e=values.next()).done){var value=e.value;if(predicate(value)){r.add(value)}}return r}}exports.filter=filter;function partition(predicate){return function(set){var values=set.values();var e;var right=new Set;var left=new Set;while(!(e=values.next()).done){var value=e.value;if(predicate(value)){right.add(value)}else{left.add(value)}}return{left:left,right:right}}}exports.partition=partition;function elem(E){return function(a,set){if(set===undefined){var elemE_1=elem(E);return function(set){return elemE_1(a,set)}}var values=set.values();var e;var found=false;while(!found&&!(e=values.next()).done){found=E.equals(a,e.value)}return found}}exports.elem=elem;function union(E){var elemE=elem(E);return function(me,that){if(that===undefined){var unionE_1=union(E);return function(that){return unionE_1(me,that)}}if(me===exports.empty){return that}if(that===exports.empty){return me}var r=new Set(me);that.forEach((function(e){if(!elemE(e,r)){r.add(e)}}));return r}}exports.union=union;function intersection(E){var elemE=elem(E);return function(me,that){if(that===undefined){var intersectionE_1=intersection(E);return function(that){return intersectionE_1(that,me)}}if(me===exports.empty||that===exports.empty){return exports.empty}var r=new Set;me.forEach((function(e){if(elemE(e,that)){r.add(e)}}));return r}}exports.intersection=intersection;function partitionMap(EB,EC){return function(f){return function(set){var values=set.values();var e;var left=new Set;var right=new Set;var hasB=elem(EB);var hasC=elem(EC);while(!(e=values.next()).done){var v=f(e.value);switch(v._tag){case"Left":if(!hasB(v.left,left)){left.add(v.left)}break;case"Right":if(!hasC(v.right,right)){right.add(v.right)}break}}return{left:left,right:right}}}}exports.partitionMap=partitionMap;function difference(E){var elemE=elem(E);return function(me,that){if(that===undefined){var differenceE_1=difference(E);return function(that){return differenceE_1(that,me)}}return filter((function(a){return!elemE(a,that)}))(me)}}exports.difference=difference;function getUnionMonoid(E){return{concat:union(E),empty:exports.empty}}exports.getUnionMonoid=getUnionMonoid;function getIntersectionSemigroup(E){return{concat:intersection(E)}}exports.getIntersectionSemigroup=getIntersectionSemigroup;function reduce(O){var toArrayO=toReadonlyArray(O);return function(b,f){return function(fa){return toArrayO(fa).reduce(f,b)}}}exports.reduce=reduce;function foldMap(O,M){var toArrayO=toReadonlyArray(O);return function(f){return function(fa){return toArrayO(fa).reduce((function(b,a){return M.concat(b,f(a))}),M.empty)}}}exports.foldMap=foldMap;function singleton(a){return new Set([a])}exports.singleton=singleton;function insert(E){var elemE=elem(E);return function(a){return function(set){if(!elemE(a)(set)){var r=new Set(set);r.add(a);return r}else{return set}}}}exports.insert=insert;function remove(E){return function(a){return function(set){return filter((function(ax){return!E.equals(a,ax)}))(set)}}}exports.remove=remove;function fromArray(E){return function(as){var len=as.length;var r=new Set;var has=elem(E);for(var i=0;i<len;i++){var a=as[i];if(!has(a,r)){r.add(a)}}return r}}exports.fromArray=fromArray;function compact(E){return filterMap(E)(function_1.identity)}exports.compact=compact;function separate(EE,EA){return function(fa){var elemEE=elem(EE);var elemEA=elem(EA);var left=new Set;var right=new Set;fa.forEach((function(e){switch(e._tag){case"Left":if(!elemEE(e.left,left)){left.add(e.left)}break;case"Right":if(!elemEA(e.right,right)){right.add(e.right)}break}}));return{left:left,right:right}}}exports.separate=separate;function filterMap(E){var elemE=elem(E);return function(f){return function(fa){var r=new Set;fa.forEach((function(a){var ob=f(a);if(ob._tag==="Some"&&!elemE(ob.value,r)){r.add(ob.value)}}));return r}}}exports.filterMap=filterMap},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.eq=exports.Contravariant=exports.getMonoid=exports.eqDate=exports.getTupleEq=exports.getStructEq=exports.eqBoolean=exports.eqNumber=exports.eqString=exports.strictEqual=exports.eqStrict=exports.URI=exports.contramap=exports.fromEquals=void 0;var function_1=__webpack_require__(48);function fromEquals(equals){return{equals:function(x,y){return x===y||equals(x,y)}}}exports.fromEquals=fromEquals;var contramap_=function(fa,f){return function_1.pipe(fa,exports.contramap(f))};exports.contramap=function(f){return function(fa){return fromEquals((function(x,y){return fa.equals(f(x),f(y))}))}};exports.URI="Eq";exports.eqStrict={equals:strictEqual};function strictEqual(a,b){return a===b}exports.strictEqual=strictEqual;exports.eqString=exports.eqStrict;exports.eqNumber=exports.eqStrict;exports.eqBoolean=exports.eqStrict;function getStructEq(eqs){return fromEquals((function(x,y){for(var k in eqs){if(!eqs[k].equals(x[k],y[k])){return false}}return true}))}exports.getStructEq=getStructEq;function getTupleEq(){var eqs=[];for(var _i=0;_i<arguments.length;_i++){eqs[_i]=arguments[_i]}return fromEquals((function(x,y){return eqs.every((function(E,i){return E.equals(x[i],y[i])}))}))}exports.getTupleEq=getTupleEq;exports.eqDate={equals:function(x,y){return x.valueOf()===y.valueOf()}};var empty={equals:function(){return true}};function getMonoid(){return{concat:function(x,y){return fromEquals((function(a,b){return x.equals(a,b)&&y.equals(a,b)}))},empty:empty}}exports.getMonoid=getMonoid;exports.Contravariant={URI:exports.URI,contramap:contramap_};exports.eq=exports.Contravariant},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ord=exports.Contravariant=exports.ordDate=exports.URI=exports.contramap=exports.getDualOrd=exports.getTupleOrd=exports.getMonoid=exports.getSemigroup=exports.fromCompare=exports.between=exports.clamp=exports.max=exports.min=exports.geq=exports.leq=exports.gt=exports.lt=exports.ordBoolean=exports.ordNumber=exports.ordString=void 0;var Ordering_1=__webpack_require__(103);var function_1=__webpack_require__(48);function compare(x,y){return x<y?-1:x>y?1:0}function strictEqual(a,b){return a===b}exports.ordString={equals:strictEqual,compare:compare};exports.ordNumber={equals:strictEqual,compare:compare};exports.ordBoolean={equals:strictEqual,compare:compare};function lt(O){return function(x,y){return O.compare(x,y)===-1}}exports.lt=lt;function gt(O){return function(x,y){return O.compare(x,y)===1}}exports.gt=gt;function leq(O){return function(x,y){return O.compare(x,y)!==1}}exports.leq=leq;function geq(O){return function(x,y){return O.compare(x,y)!==-1}}exports.geq=geq;function min(O){return function(x,y){return O.compare(x,y)===1?y:x}}exports.min=min;function max(O){return function(x,y){return O.compare(x,y)===-1?y:x}}exports.max=max;function clamp(O){var minO=min(O);var maxO=max(O);return function(low,hi){return function(x){return maxO(minO(x,hi),low)}}}exports.clamp=clamp;function between(O){var lessThanO=lt(O);var greaterThanO=gt(O);return function(low,hi){return function(x){return lessThanO(x,low)||greaterThanO(x,hi)?false:true}}}exports.between=between;function fromCompare(compare){var optimizedCompare=function(x,y){return x===y?0:compare(x,y)};return{equals:function(x,y){return optimizedCompare(x,y)===0},compare:optimizedCompare}}exports.fromCompare=fromCompare;function getSemigroup(){return{concat:function(x,y){return fromCompare((function(a,b){return Ordering_1.monoidOrdering.concat(x.compare(a,b),y.compare(a,b))}))}}}exports.getSemigroup=getSemigroup;function getMonoid(){return{concat:getSemigroup().concat,empty:fromCompare((function(){return 0}))}}exports.getMonoid=getMonoid;function getTupleOrd(){var ords=[];for(var _i=0;_i<arguments.length;_i++){ords[_i]=arguments[_i]}var len=ords.length;return fromCompare((function(x,y){var i=0;for(;i<len-1;i++){var r=ords[i].compare(x[i],y[i]);if(r!==0){return r}}return ords[i].compare(x[i],y[i])}))}exports.getTupleOrd=getTupleOrd;function getDualOrd(O){return fromCompare((function(x,y){return O.compare(y,x)}))}exports.getDualOrd=getDualOrd;var contramap_=function(fa,f){return function_1.pipe(fa,exports.contramap(f))};exports.contramap=function(f){return function(fa){return fromCompare((function(x,y){return fa.compare(f(x),f(y))}))}};exports.URI="Ord";exports.ordDate=function_1.pipe(exports.ordNumber,exports.contramap((function(date){return date.valueOf()})));exports.Contravariant={URI:exports.URI,contramap:contramap_};exports.ord=exports.Contravariant},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.invert=exports.monoidOrdering=exports.semigroupOrdering=exports.eqOrdering=exports.sign=void 0;function sign(n){return n<=-1?-1:n>=1?1:0}exports.sign=sign;exports.eqOrdering={equals:function(x,y){return x===y}};exports.semigroupOrdering={concat:function(x,y){return x!==0?x:y}};exports.monoidOrdering={concat:exports.semigroupOrdering.concat,empty:0};function invert(O){switch(O){case-1:return 1;case 1:return-1;default:return 0}}exports.invert=invert},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var React=__webpack_require__(19);var PropTypes=__webpack_require__(65);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};function __extends(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)if(e.indexOf(p[i])<0)t[p[i]]=s[p[i]];return t}var ALIGNMENT;(function(ALIGNMENT){ALIGNMENT["AUTO"]="auto";ALIGNMENT["START"]="start";ALIGNMENT["CENTER"]="center";ALIGNMENT["END"]="end"})(ALIGNMENT||(ALIGNMENT={}));(function(DIRECTION){DIRECTION["HORIZONTAL"]="horizontal";DIRECTION["VERTICAL"]="vertical"})(exports.ScrollDirection||(exports.ScrollDirection={}));var SCROLL_CHANGE_REASON;(function(SCROLL_CHANGE_REASON){SCROLL_CHANGE_REASON["OBSERVED"]="observed";SCROLL_CHANGE_REASON["REQUESTED"]="requested"})(SCROLL_CHANGE_REASON||(SCROLL_CHANGE_REASON={}));var scrollProp=(_a={},_a[exports.ScrollDirection.VERTICAL]="scrollTop",_a[exports.ScrollDirection.HORIZONTAL]="scrollLeft",_a);var sizeProp=(_b={},_b[exports.ScrollDirection.VERTICAL]="height",_b[exports.ScrollDirection.HORIZONTAL]="width",_b);var positionProp=(_c={},_c[exports.ScrollDirection.VERTICAL]="top",_c[exports.ScrollDirection.HORIZONTAL]="left",_c);var marginProp=(_d={},_d[exports.ScrollDirection.VERTICAL]="marginTop",_d[exports.ScrollDirection.HORIZONTAL]="marginLeft",_d);var oppositeMarginProp=(_e={},_e[exports.ScrollDirection.VERTICAL]="marginBottom",_e[exports.ScrollDirection.HORIZONTAL]="marginRight",_e);var _a;var _b;var _c;var _d;var _e;var SizeAndPositionManager=function(){function SizeAndPositionManager(_a){var itemCount=_a.itemCount,itemSizeGetter=_a.itemSizeGetter,estimatedItemSize=_a.estimatedItemSize;this.itemSizeGetter=itemSizeGetter;this.itemCount=itemCount;this.estimatedItemSize=estimatedItemSize;this.itemSizeAndPositionData={};this.lastMeasuredIndex=-1}SizeAndPositionManager.prototype.updateConfig=function(_a){var itemCount=_a.itemCount,itemSizeGetter=_a.itemSizeGetter,estimatedItemSize=_a.estimatedItemSize;if(itemCount!=null){this.itemCount=itemCount}if(estimatedItemSize!=null){this.estimatedItemSize=estimatedItemSize}if(itemSizeGetter!=null){this.itemSizeGetter=itemSizeGetter}};SizeAndPositionManager.prototype.getLastMeasuredIndex=function(){return this.lastMeasuredIndex};SizeAndPositionManager.prototype.getSizeAndPositionForIndex=function(index){if(index<0||index>=this.itemCount){throw Error("Requested index "+index+" is outside of range 0.."+this.itemCount)}if(index>this.lastMeasuredIndex){var lastMeasuredSizeAndPosition=this.getSizeAndPositionOfLastMeasuredItem();var offset=lastMeasuredSizeAndPosition.offset+lastMeasuredSizeAndPosition.size;for(var i=this.lastMeasuredIndex+1;i<=index;i++){var size=this.itemSizeGetter(i);if(size==null||isNaN(size)){throw Error("Invalid size returned for index "+i+" of value "+size)}this.itemSizeAndPositionData[i]={offset:offset,size:size};offset+=size}this.lastMeasuredIndex=index}return this.itemSizeAndPositionData[index]};SizeAndPositionManager.prototype.getSizeAndPositionOfLastMeasuredItem=function(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}};SizeAndPositionManager.prototype.getTotalSize=function(){var lastMeasuredSizeAndPosition=this.getSizeAndPositionOfLastMeasuredItem();return lastMeasuredSizeAndPosition.offset+lastMeasuredSizeAndPosition.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize};SizeAndPositionManager.prototype.getUpdatedOffsetForIndex=function(_a){var _b=_a.align,align=_b===void 0?ALIGNMENT.START:_b,containerSize=_a.containerSize,currentOffset=_a.currentOffset,targetIndex=_a.targetIndex;if(containerSize<=0){return 0}var datum=this.getSizeAndPositionForIndex(targetIndex);var maxOffset=datum.offset;var minOffset=maxOffset-containerSize+datum.size;var idealOffset;switch(align){case ALIGNMENT.END:idealOffset=minOffset;break;case ALIGNMENT.CENTER:idealOffset=maxOffset-(containerSize-datum.size)/2;break;case ALIGNMENT.START:idealOffset=maxOffset;break;default:idealOffset=Math.max(minOffset,Math.min(maxOffset,currentOffset))}var totalSize=this.getTotalSize();return Math.max(0,Math.min(totalSize-containerSize,idealOffset))};SizeAndPositionManager.prototype.getVisibleRange=function(_a){var containerSize=_a.containerSize,offset=_a.offset,overscanCount=_a.overscanCount;var totalSize=this.getTotalSize();if(totalSize===0){return{}}var maxOffset=offset+containerSize;var start=this.findNearestItem(offset);if(typeof start==="undefined"){throw Error("Invalid offset "+offset+" specified")}var datum=this.getSizeAndPositionForIndex(start);offset=datum.offset+datum.size;var stop=start;while(offset<maxOffset&&stop<this.itemCount-1){stop++;offset+=this.getSizeAndPositionForIndex(stop).size}if(overscanCount){start=Math.max(0,start-overscanCount);stop=Math.min(stop+overscanCount,this.itemCount-1)}return{start:start,stop:stop}};SizeAndPositionManager.prototype.resetItem=function(index){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,index-1)};SizeAndPositionManager.prototype.findNearestItem=function(offset){if(isNaN(offset)){throw Error("Invalid offset "+offset+" specified")}offset=Math.max(0,offset);var lastMeasuredSizeAndPosition=this.getSizeAndPositionOfLastMeasuredItem();var lastMeasuredIndex=Math.max(0,this.lastMeasuredIndex);if(lastMeasuredSizeAndPosition.offset>=offset){return this.binarySearch({high:lastMeasuredIndex,low:0,offset:offset})}else{return this.exponentialSearch({index:lastMeasuredIndex,offset:offset})}};SizeAndPositionManager.prototype.binarySearch=function(_a){var low=_a.low,high=_a.high,offset=_a.offset;var middle=0;var currentOffset=0;while(low<=high){middle=low+Math.floor((high-low)/2);currentOffset=this.getSizeAndPositionForIndex(middle).offset;if(currentOffset===offset){return middle}else if(currentOffset<offset){low=middle+1}else if(currentOffset>offset){high=middle-1}}if(low>0){return low-1}return 0};SizeAndPositionManager.prototype.exponentialSearch=function(_a){var index=_a.index,offset=_a.offset;var interval=1;while(index<this.itemCount&&this.getSizeAndPositionForIndex(index).offset<offset){index+=interval;interval*=2}return this.binarySearch({high:Math.min(index,this.itemCount-1),low:Math.floor(index/2),offset:offset})};return SizeAndPositionManager}();var STYLE_WRAPPER={overflow:"auto",willChange:"transform",WebkitOverflowScrolling:"touch"};var STYLE_INNER={position:"relative",width:"100%",minHeight:"100%"};var STYLE_ITEM={position:"absolute",top:0,left:0,width:"100%"};var STYLE_STICKY_ITEM=__assign({},STYLE_ITEM,{position:"sticky"});var VirtualList=function(_super){__extends(VirtualList,_super);function VirtualList(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.itemSizeGetter=function(itemSize){return function(index){return _this.getSize(index,itemSize)}};_this.sizeAndPositionManager=new SizeAndPositionManager({itemCount:_this.props.itemCount,itemSizeGetter:_this.itemSizeGetter(_this.props.itemSize),estimatedItemSize:_this.getEstimatedItemSize()});_this.state={offset:_this.props.scrollOffset||_this.props.scrollToIndex!=null&&_this.getOffsetForIndex(_this.props.scrollToIndex)||0,scrollChangeReason:SCROLL_CHANGE_REASON.REQUESTED};_this.styleCache={};_this.getRef=function(node){_this.rootNode=node};_this.handleScroll=function(event){var onScroll=_this.props.onScroll;var offset=_this.getNodeOffset();if(offset<0||_this.state.offset===offset||event.target!==_this.rootNode){return}_this.setState({offset:offset,scrollChangeReason:SCROLL_CHANGE_REASON.OBSERVED});if(typeof onScroll==="function"){onScroll(offset,event)}};return _this}VirtualList.prototype.componentDidMount=function(){var _a=this.props,scrollOffset=_a.scrollOffset,scrollToIndex=_a.scrollToIndex;this.rootNode.addEventListener("scroll",this.handleScroll,{passive:true});if(scrollOffset!=null){this.scrollTo(scrollOffset)}else if(scrollToIndex!=null){this.scrollTo(this.getOffsetForIndex(scrollToIndex))}};VirtualList.prototype.componentWillReceiveProps=function(nextProps){var _a=this.props,estimatedItemSize=_a.estimatedItemSize,itemCount=_a.itemCount,itemSize=_a.itemSize,scrollOffset=_a.scrollOffset,scrollToAlignment=_a.scrollToAlignment,scrollToIndex=_a.scrollToIndex;var scrollPropsHaveChanged=nextProps.scrollToIndex!==scrollToIndex||nextProps.scrollToAlignment!==scrollToAlignment;var itemPropsHaveChanged=nextProps.itemCount!==itemCount||nextProps.itemSize!==itemSize||nextProps.estimatedItemSize!==estimatedItemSize;if(nextProps.itemSize!==itemSize){this.sizeAndPositionManager.updateConfig({itemSizeGetter:this.itemSizeGetter(nextProps.itemSize)})}if(nextProps.itemCount!==itemCount||nextProps.estimatedItemSize!==estimatedItemSize){this.sizeAndPositionManager.updateConfig({itemCount:nextProps.itemCount,estimatedItemSize:this.getEstimatedItemSize(nextProps)})}if(itemPropsHaveChanged){this.recomputeSizes()}if(nextProps.scrollOffset!==scrollOffset){this.setState({offset:nextProps.scrollOffset||0,scrollChangeReason:SCROLL_CHANGE_REASON.REQUESTED})}else if(typeof nextProps.scrollToIndex==="number"&&(scrollPropsHaveChanged||itemPropsHaveChanged)){this.setState({offset:this.getOffsetForIndex(nextProps.scrollToIndex,nextProps.scrollToAlignment,nextProps.itemCount),scrollChangeReason:SCROLL_CHANGE_REASON.REQUESTED})}};VirtualList.prototype.componentDidUpdate=function(_,prevState){var _a=this.state,offset=_a.offset,scrollChangeReason=_a.scrollChangeReason;if(prevState.offset!==offset&&scrollChangeReason===SCROLL_CHANGE_REASON.REQUESTED){this.scrollTo(offset)}};VirtualList.prototype.componentWillUnmount=function(){this.rootNode.removeEventListener("scroll",this.handleScroll)};VirtualList.prototype.scrollTo=function(value){var _a=this.props.scrollDirection,scrollDirection=_a===void 0?exports.ScrollDirection.VERTICAL:_a;this.rootNode[scrollProp[scrollDirection]]=value};VirtualList.prototype.getOffsetForIndex=function(index,scrollToAlignment,itemCount){if(scrollToAlignment===void 0){scrollToAlignment=this.props.scrollToAlignment}if(itemCount===void 0){itemCount=this.props.itemCount}var _a=this.props.scrollDirection,scrollDirection=_a===void 0?exports.ScrollDirection.VERTICAL:_a;if(index<0||index>=itemCount){index=0}return this.sizeAndPositionManager.getUpdatedOffsetForIndex({align:scrollToAlignment,containerSize:this.props[sizeProp[scrollDirection]],currentOffset:this.state&&this.state.offset||0,targetIndex:index})};VirtualList.prototype.recomputeSizes=function(startIndex){if(startIndex===void 0){startIndex=0}this.styleCache={};this.sizeAndPositionManager.resetItem(startIndex)};VirtualList.prototype.render=function(){var _this=this;var _a=this.props,estimatedItemSize=_a.estimatedItemSize,height=_a.height,_b=_a.overscanCount,overscanCount=_b===void 0?3:_b,renderItem=_a.renderItem,itemCount=_a.itemCount,itemSize=_a.itemSize,onItemsRendered=_a.onItemsRendered,onScroll=_a.onScroll,_c=_a.scrollDirection,scrollDirection=_c===void 0?exports.ScrollDirection.VERTICAL:_c,scrollOffset=_a.scrollOffset,scrollToIndex=_a.scrollToIndex,scrollToAlignment=_a.scrollToAlignment,stickyIndices=_a.stickyIndices,style=_a.style,width=_a.width,props=__rest(_a,["estimatedItemSize","height","overscanCount","renderItem","itemCount","itemSize","onItemsRendered","onScroll","scrollDirection","scrollOffset","scrollToIndex","scrollToAlignment","stickyIndices","style","width"]);var offset=this.state.offset;var _d=this.sizeAndPositionManager.getVisibleRange({containerSize:this.props[sizeProp[scrollDirection]]||0,offset:offset,overscanCount:overscanCount}),start=_d.start,stop=_d.stop;var items=[];var wrapperStyle=__assign({},STYLE_WRAPPER,style,{height:height,width:width});var innerStyle=__assign({},STYLE_INNER,(_e={},_e[sizeProp[scrollDirection]]=this.sizeAndPositionManager.getTotalSize(),_e));if(stickyIndices!=null&&stickyIndices.length!==0){stickyIndices.forEach((function(index){return items.push(renderItem({index:index,style:_this.getStyle(index,true)}))}));if(scrollDirection===exports.ScrollDirection.HORIZONTAL){innerStyle.display="flex"}}if(typeof start!=="undefined"&&typeof stop!=="undefined"){for(var index=start;index<=stop;index++){if(stickyIndices!=null&&stickyIndices.includes(index)){continue}items.push(renderItem({index:index,style:this.getStyle(index,false)}))}if(typeof onItemsRendered==="function"){onItemsRendered({startIndex:start,stopIndex:stop})}}return React.createElement("div",__assign({ref:this.getRef},props,{style:wrapperStyle}),React.createElement("div",{style:innerStyle},items));var _e};VirtualList.prototype.getNodeOffset=function(){var _a=this.props.scrollDirection,scrollDirection=_a===void 0?exports.ScrollDirection.VERTICAL:_a;return this.rootNode[scrollProp[scrollDirection]]};VirtualList.prototype.getEstimatedItemSize=function(props){if(props===void 0){props=this.props}return props.estimatedItemSize||typeof props.itemSize==="number"&&props.itemSize||50};VirtualList.prototype.getSize=function(index,itemSize){if(typeof itemSize==="function"){return itemSize(index)}return Array.isArray(itemSize)?itemSize[index]:itemSize};VirtualList.prototype.getStyle=function(index,sticky){var style=this.styleCache[index];if(style){return style}var _a=this.props.scrollDirection,scrollDirection=_a===void 0?exports.ScrollDirection.VERTICAL:_a;var _b=this.sizeAndPositionManager.getSizeAndPositionForIndex(index),size=_b.size,offset=_b.offset;return this.styleCache[index]=sticky?__assign({},STYLE_STICKY_ITEM,(_c={},_c[sizeProp[scrollDirection]]=size,_c[marginProp[scrollDirection]]=offset,_c[oppositeMarginProp[scrollDirection]]=-(offset+size),_c.zIndex=1,_c)):__assign({},STYLE_ITEM,(_d={},_d[sizeProp[scrollDirection]]=size,_d[positionProp[scrollDirection]]=offset,_d));var _c,_d};VirtualList.defaultProps={overscanCount:3,scrollDirection:exports.ScrollDirection.VERTICAL,width:"100%"};VirtualList.propTypes={estimatedItemSize:PropTypes.number,height:PropTypes.oneOfType([PropTypes.number,PropTypes.string]).isRequired,itemCount:PropTypes.number.isRequired,itemSize:PropTypes.oneOfType([PropTypes.number,PropTypes.array,PropTypes.func]).isRequired,onScroll:PropTypes.func,onItemsRendered:PropTypes.func,overscanCount:PropTypes.number,renderItem:PropTypes.func.isRequired,scrollOffset:PropTypes.number,scrollToIndex:PropTypes.number,scrollToAlignment:PropTypes.oneOf([ALIGNMENT.AUTO,ALIGNMENT.START,ALIGNMENT.CENTER,ALIGNMENT.END]),scrollDirection:PropTypes.oneOf([exports.ScrollDirection.HORIZONTAL,exports.ScrollDirection.VERTICAL]),stickyIndices:PropTypes.arrayOf(PropTypes.number),style:PropTypes.object,width:PropTypes.oneOfType([PropTypes.number,PropTypes.string])};return VirtualList}(React.PureComponent);exports["default"]=VirtualList},function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret=__webpack_require__(106);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret===ReactPropTypesSecret){return}var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. "+"Use PropTypes.checkPropTypes() to call them. "+"Read more at http://fb.me/use-check-prop-types");err.name="Invariant Violation";throw err}shim.isRequired=shim;function getShim(){return shim}var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes}},function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(37);var _interopRequireWildcard=__webpack_require__(69);exports.__esModule=true;exports["default"]=void 0;var _react=_interopRequireWildcard(__webpack_require__(19));var _propTypes=_interopRequireDefault(__webpack_require__(65));var _Context=__webpack_require__(41);var _Subscription=_interopRequireDefault(__webpack_require__(55));function Provider(_ref){var store=_ref.store,context=_ref.context,children=_ref.children;var contextValue=(0,_react.useMemo)((function(){var subscription=new _Subscription["default"](store);subscription.onStateChange=subscription.notifyNestedSubs;return{store:store,subscription:subscription}}),[store]);var previousState=(0,_react.useMemo)((function(){return store.getState()}),[store]);(0,_react.useEffect)((function(){var subscription=contextValue.subscription;subscription.trySubscribe();if(previousState!==store.getState()){subscription.notifyNestedSubs()}return function(){subscription.tryUnsubscribe();subscription.onStateChange=null}}),[contextValue,previousState]);var Context=context||_Context.ReactReduxContext;return _react["default"].createElement(Context.Provider,{value:contextValue},children)}if(false){}var _default=Provider;exports["default"]=_default},function(module,exports){function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){module.exports=_typeof=function _typeof(obj){return typeof obj}}else{module.exports=_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}module.exports=_typeof},function(module,exports,__webpack_require__){"use strict";var reactIs=__webpack_require__(72);var REACT_STATICS={childContextTypes:true,contextType:true,contextTypes:true,defaultProps:true,displayName:true,getDefaultProps:true,getDerivedStateFromError:true,getDerivedStateFromProps:true,mixins:true,propTypes:true,type:true};var KNOWN_STATICS={name:true,length:true,prototype:true,caller:true,callee:true,arguments:true,arity:true};var FORWARD_REF_STATICS={$$typeof:true,render:true,defaultProps:true,displayName:true,propTypes:true};var MEMO_STATICS={$$typeof:true,compare:true,defaultProps:true,displayName:true,propTypes:true,type:true};var TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;function getStatics(component){if(reactIs.isMemo(component)){return MEMO_STATICS}return TYPE_STATICS[component["$$typeof"]]||REACT_STATICS}var defineProperty=Object.defineProperty;var getOwnPropertyNames=Object.getOwnPropertyNames;var getOwnPropertySymbols=Object.getOwnPropertySymbols;var getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;var getPrototypeOf=Object.getPrototypeOf;var objectPrototype=Object.prototype;function hoistNonReactStatics(targetComponent,sourceComponent,blacklist){if(typeof sourceComponent!=="string"){if(objectPrototype){var inheritedComponent=getPrototypeOf(sourceComponent);if(inheritedComponent&&inheritedComponent!==objectPrototype){hoistNonReactStatics(targetComponent,inheritedComponent,blacklist)}}var keys=getOwnPropertyNames(sourceComponent);if(getOwnPropertySymbols){keys=keys.concat(getOwnPropertySymbols(sourceComponent))}var targetStatics=getStatics(targetComponent);var sourceStatics=getStatics(sourceComponent);for(var i=0;i<keys.length;++i){var key=keys[i];if(!KNOWN_STATICS[key]&&!(blacklist&&blacklist[key])&&!(sourceStatics&&sourceStatics[key])&&!(targetStatics&&targetStatics[key])){var descriptor=getOwnPropertyDescriptor(sourceComponent,key);try{defineProperty(targetComponent,key,descriptor)}catch(e){}}}}return targetComponent}module.exports=hoistNonReactStatics},function(module,exports,__webpack_require__){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b="function"===typeof Symbol&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m=b?Symbol.for("react.concurrent_mode"):60111,n=b?Symbol.for("react.forward_ref"):60112,p=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.suspense_list"):60120,r=b?Symbol.for("react.memo"):60115,t=b?Symbol.for("react.lazy"):60116,v=b?Symbol.for("react.block"):60121,w=b?Symbol.for("react.fundamental"):60117,x=b?Symbol.for("react.responder"):60118,y=b?Symbol.for("react.scope"):60119;function z(a){if("object"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;exports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return"object"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};exports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};exports.isValidElementType=function(a){return"string"===typeof a||"function"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||"object"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(37);exports.__esModule=true;exports.createConnect=createConnect;exports["default"]=void 0;var _extends2=_interopRequireDefault(__webpack_require__(56));var _objectWithoutPropertiesLoose2=_interopRequireDefault(__webpack_require__(57));var _connectAdvanced=_interopRequireDefault(__webpack_require__(71));var _shallowEqual=_interopRequireDefault(__webpack_require__(74));var _mapDispatchToProps=_interopRequireDefault(__webpack_require__(112));var _mapStateToProps=_interopRequireDefault(__webpack_require__(118));var _mergeProps=_interopRequireDefault(__webpack_require__(119));var _selectorFactory=_interopRequireDefault(__webpack_require__(120));function match(arg,factories,name){for(var i=factories.length-1;i>=0;i--){var result=factories[i](arg);if(result)return result}return function(dispatch,options){throw new Error("Invalid value of type "+typeof arg+" for "+name+" argument when connecting component "+options.wrappedComponentName+".")}}function strictEqual(a,b){return a===b}function createConnect(_temp){var _ref=_temp===void 0?{}:_temp,_ref$connectHOC=_ref.connectHOC,connectHOC=_ref$connectHOC===void 0?_connectAdvanced["default"]:_ref$connectHOC,_ref$mapStateToPropsF=_ref.mapStateToPropsFactories,mapStateToPropsFactories=_ref$mapStateToPropsF===void 0?_mapStateToProps["default"]:_ref$mapStateToPropsF,_ref$mapDispatchToPro=_ref.mapDispatchToPropsFactories,mapDispatchToPropsFactories=_ref$mapDispatchToPro===void 0?_mapDispatchToProps["default"]:_ref$mapDispatchToPro,_ref$mergePropsFactor=_ref.mergePropsFactories,mergePropsFactories=_ref$mergePropsFactor===void 0?_mergeProps["default"]:_ref$mergePropsFactor,_ref$selectorFactory=_ref.selectorFactory,selectorFactory=_ref$selectorFactory===void 0?_selectorFactory["default"]:_ref$selectorFactory;return function connect(mapStateToProps,mapDispatchToProps,mergeProps,_ref2){if(_ref2===void 0){_ref2={}}var _ref3=_ref2,_ref3$pure=_ref3.pure,pure=_ref3$pure===void 0?true:_ref3$pure,_ref3$areStatesEqual=_ref3.areStatesEqual,areStatesEqual=_ref3$areStatesEqual===void 0?strictEqual:_ref3$areStatesEqual,_ref3$areOwnPropsEqua=_ref3.areOwnPropsEqual,areOwnPropsEqual=_ref3$areOwnPropsEqua===void 0?_shallowEqual["default"]:_ref3$areOwnPropsEqua,_ref3$areStatePropsEq=_ref3.areStatePropsEqual,areStatePropsEqual=_ref3$areStatePropsEq===void 0?_shallowEqual["default"]:_ref3$areStatePropsEq,_ref3$areMergedPropsE=_ref3.areMergedPropsEqual,areMergedPropsEqual=_ref3$areMergedPropsE===void 0?_shallowEqual["default"]:_ref3$areMergedPropsE,extraOptions=(0,_objectWithoutPropertiesLoose2["default"])(_ref3,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]);var initMapStateToProps=match(mapStateToProps,mapStateToPropsFactories,"mapStateToProps");var initMapDispatchToProps=match(mapDispatchToProps,mapDispatchToPropsFactories,"mapDispatchToProps");var initMergeProps=match(mergeProps,mergePropsFactories,"mergeProps");return connectHOC(selectorFactory,(0,_extends2["default"])({methodName:"connect",getDisplayName:function getDisplayName(name){return"Connect("+name+")"},shouldHandleStateChanges:Boolean(mapStateToProps),initMapStateToProps:initMapStateToProps,initMapDispatchToProps:initMapDispatchToProps,initMergeProps:initMergeProps,pure:pure,areStatesEqual:areStatesEqual,areOwnPropsEqual:areOwnPropsEqual,areStatePropsEqual:areStatePropsEqual,areMergedPropsEqual:areMergedPropsEqual},extraOptions))}}var _default=createConnect();exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.whenMapDispatchToPropsIsFunction=whenMapDispatchToPropsIsFunction;exports.whenMapDispatchToPropsIsMissing=whenMapDispatchToPropsIsMissing;exports.whenMapDispatchToPropsIsObject=whenMapDispatchToPropsIsObject;exports["default"]=void 0;var _redux=__webpack_require__(49);var _wrapMapToProps=__webpack_require__(75);function whenMapDispatchToPropsIsFunction(mapDispatchToProps){return typeof mapDispatchToProps==="function"?(0,_wrapMapToProps.wrapMapToPropsFunc)(mapDispatchToProps,"mapDispatchToProps"):undefined}function whenMapDispatchToPropsIsMissing(mapDispatchToProps){return!mapDispatchToProps?(0,_wrapMapToProps.wrapMapToPropsConstant)((function(dispatch){return{dispatch:dispatch}})):undefined}function whenMapDispatchToPropsIsObject(mapDispatchToProps){return mapDispatchToProps&&typeof mapDispatchToProps==="object"?(0,_wrapMapToProps.wrapMapToPropsConstant)((function(dispatch){return(0,_redux.bindActionCreators)(mapDispatchToProps,dispatch)})):undefined}var _default=[whenMapDispatchToPropsIsFunction,whenMapDispatchToPropsIsMissing,whenMapDispatchToPropsIsObject];exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";(function(global,module){Object.defineProperty(exports,"__esModule",{value:true});var _ponyfill=__webpack_require__(116);var _ponyfill2=_interopRequireDefault(_ponyfill);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var root;if(typeof self!=="undefined"){root=self}else if(typeof window!=="undefined"){root=window}else if(typeof global!=="undefined"){root=global}else if(true){root=module}else{}var result=(0,_ponyfill2["default"])(root);exports["default"]=result}).call(this,__webpack_require__(114),__webpack_require__(115)(module))},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){if(typeof window==="object")g=window}module.exports=g},function(module,exports){module.exports=function(module){if(!module.webpackPolyfill){module.deprecate=function(){};module.paths=[];if(!module.children)module.children=[];Object.defineProperty(module,"loaded",{enumerable:true,get:function(){return module.l}});Object.defineProperty(module,"id",{enumerable:true,get:function(){return module.i}});module.webpackPolyfill=1}return module}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=symbolObservablePonyfill;function symbolObservablePonyfill(root){var result;var _Symbol=root.Symbol;if(typeof _Symbol==="function"){if(_Symbol.observable){result=_Symbol.observable}else{result=_Symbol("observable");_Symbol.observable=result}}else{result="@@observable"}return result}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports["default"]=isPlainObject;function isPlainObject(obj){if(typeof obj!=="object"||obj===null)return false;var proto=Object.getPrototypeOf(obj);if(proto===null)return true;var baseProto=proto;while(Object.getPrototypeOf(baseProto)!==null){baseProto=Object.getPrototypeOf(baseProto)}return proto===baseProto}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.whenMapStateToPropsIsFunction=whenMapStateToPropsIsFunction;exports.whenMapStateToPropsIsMissing=whenMapStateToPropsIsMissing;exports["default"]=void 0;var _wrapMapToProps=__webpack_require__(75);function whenMapStateToPropsIsFunction(mapStateToProps){return typeof mapStateToProps==="function"?(0,_wrapMapToProps.wrapMapToPropsFunc)(mapStateToProps,"mapStateToProps"):undefined}function whenMapStateToPropsIsMissing(mapStateToProps){return!mapStateToProps?(0,_wrapMapToProps.wrapMapToPropsConstant)((function(){return{}})):undefined}var _default=[whenMapStateToPropsIsFunction,whenMapStateToPropsIsMissing];exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(37);exports.__esModule=true;exports.defaultMergeProps=defaultMergeProps;exports.wrapMergePropsFunc=wrapMergePropsFunc;exports.whenMergePropsIsFunction=whenMergePropsIsFunction;exports.whenMergePropsIsOmitted=whenMergePropsIsOmitted;exports["default"]=void 0;var _extends2=_interopRequireDefault(__webpack_require__(56));var _verifyPlainObject=_interopRequireDefault(__webpack_require__(76));function defaultMergeProps(stateProps,dispatchProps,ownProps){return(0,_extends2["default"])({},ownProps,{},stateProps,{},dispatchProps)}function wrapMergePropsFunc(mergeProps){return function initMergePropsProxy(dispatch,_ref){var displayName=_ref.displayName,pure=_ref.pure,areMergedPropsEqual=_ref.areMergedPropsEqual;var hasRunOnce=false;var mergedProps;return function mergePropsProxy(stateProps,dispatchProps,ownProps){var nextMergedProps=mergeProps(stateProps,dispatchProps,ownProps);if(hasRunOnce){if(!pure||!areMergedPropsEqual(nextMergedProps,mergedProps))mergedProps=nextMergedProps}else{hasRunOnce=true;mergedProps=nextMergedProps;if(false){}}return mergedProps}}}function whenMergePropsIsFunction(mergeProps){return typeof mergeProps==="function"?wrapMergePropsFunc(mergeProps):undefined}function whenMergePropsIsOmitted(mergeProps){return!mergeProps?function(){return defaultMergeProps}:undefined}var _default=[whenMergePropsIsFunction,whenMergePropsIsOmitted];exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(37);exports.__esModule=true;exports.impureFinalPropsSelectorFactory=impureFinalPropsSelectorFactory;exports.pureFinalPropsSelectorFactory=pureFinalPropsSelectorFactory;exports["default"]=finalPropsSelectorFactory;var _objectWithoutPropertiesLoose2=_interopRequireDefault(__webpack_require__(57));var _verifySubselectors=_interopRequireDefault(__webpack_require__(121));function impureFinalPropsSelectorFactory(mapStateToProps,mapDispatchToProps,mergeProps,dispatch){return function impureFinalPropsSelector(state,ownProps){return mergeProps(mapStateToProps(state,ownProps),mapDispatchToProps(dispatch,ownProps),ownProps)}}function pureFinalPropsSelectorFactory(mapStateToProps,mapDispatchToProps,mergeProps,dispatch,_ref){var areStatesEqual=_ref.areStatesEqual,areOwnPropsEqual=_ref.areOwnPropsEqual,areStatePropsEqual=_ref.areStatePropsEqual;var hasRunAtLeastOnce=false;var state;var ownProps;var stateProps;var dispatchProps;var mergedProps;function handleFirstCall(firstState,firstOwnProps){state=firstState;ownProps=firstOwnProps;stateProps=mapStateToProps(state,ownProps);dispatchProps=mapDispatchToProps(dispatch,ownProps);mergedProps=mergeProps(stateProps,dispatchProps,ownProps);hasRunAtLeastOnce=true;return mergedProps}function handleNewPropsAndNewState(){stateProps=mapStateToProps(state,ownProps);if(mapDispatchToProps.dependsOnOwnProps)dispatchProps=mapDispatchToProps(dispatch,ownProps);mergedProps=mergeProps(stateProps,dispatchProps,ownProps);return mergedProps}function handleNewProps(){if(mapStateToProps.dependsOnOwnProps)stateProps=mapStateToProps(state,ownProps);if(mapDispatchToProps.dependsOnOwnProps)dispatchProps=mapDispatchToProps(dispatch,ownProps);mergedProps=mergeProps(stateProps,dispatchProps,ownProps);return mergedProps}function handleNewState(){var nextStateProps=mapStateToProps(state,ownProps);var statePropsChanged=!areStatePropsEqual(nextStateProps,stateProps);stateProps=nextStateProps;if(statePropsChanged)mergedProps=mergeProps(stateProps,dispatchProps,ownProps);return mergedProps}function handleSubsequentCalls(nextState,nextOwnProps){var propsChanged=!areOwnPropsEqual(nextOwnProps,ownProps);var stateChanged=!areStatesEqual(nextState,state);state=nextState;ownProps=nextOwnProps;if(propsChanged&&stateChanged)return handleNewPropsAndNewState();if(propsChanged)return handleNewProps();if(stateChanged)return handleNewState();return mergedProps}return function pureFinalPropsSelector(nextState,nextOwnProps){return hasRunAtLeastOnce?handleSubsequentCalls(nextState,nextOwnProps):handleFirstCall(nextState,nextOwnProps)}}function finalPropsSelectorFactory(dispatch,_ref2){var initMapStateToProps=_ref2.initMapStateToProps,initMapDispatchToProps=_ref2.initMapDispatchToProps,initMergeProps=_ref2.initMergeProps,options=(0,_objectWithoutPropertiesLoose2["default"])(_ref2,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]);var mapStateToProps=initMapStateToProps(dispatch,options);var mapDispatchToProps=initMapDispatchToProps(dispatch,options);var mergeProps=initMergeProps(dispatch,options);if(false){}var selectorFactory=options.pure?pureFinalPropsSelectorFactory:impureFinalPropsSelectorFactory;return selectorFactory(mapStateToProps,mapDispatchToProps,mergeProps,dispatch,options)}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(37);exports.__esModule=true;exports["default"]=verifySubselectors;var _warning=_interopRequireDefault(__webpack_require__(77));function verify(selector,methodName,displayName){if(!selector){throw new Error("Unexpected value for "+methodName+" in "+displayName+".")}else if(methodName==="mapStateToProps"||methodName==="mapDispatchToProps"){if(!Object.prototype.hasOwnProperty.call(selector,"dependsOnOwnProps")){(0,_warning["default"])("The selector for "+methodName+" of "+displayName+" did not specify a value for dependsOnOwnProps.")}}}function verifySubselectors(mapStateToProps,mapDispatchToProps,mergeProps,displayName){verify(mapStateToProps,"mapStateToProps",displayName);verify(mapDispatchToProps,"mapDispatchToProps",displayName);verify(mergeProps,"mergeProps",displayName)}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.createDispatchHook=createDispatchHook;exports.useDispatch=void 0;var _Context=__webpack_require__(41);var _useStore=__webpack_require__(78);function createDispatchHook(context){if(context===void 0){context=_Context.ReactReduxContext}var useStore=context===_Context.ReactReduxContext?_useStore.useStore:(0,_useStore.createStoreHook)(context);return function useDispatch(){var store=useStore();return store.dispatch}}var useDispatch=createDispatchHook();exports.useDispatch=useDispatch},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(37);exports.__esModule=true;exports.createSelectorHook=createSelectorHook;exports.useSelector=void 0;var _react=__webpack_require__(19);var _useReduxContext2=__webpack_require__(79);var _Subscription=_interopRequireDefault(__webpack_require__(55));var _useIsomorphicLayoutEffect=__webpack_require__(73);var _Context=__webpack_require__(41);var refEquality=function refEquality(a,b){return a===b};function useSelectorWithStoreAndSubscription(selector,equalityFn,store,contextSub){var _useReducer=(0,_react.useReducer)((function(s){return s+1}),0),forceRender=_useReducer[1];var subscription=(0,_react.useMemo)((function(){return new _Subscription["default"](store,contextSub)}),[store,contextSub]);var latestSubscriptionCallbackError=(0,_react.useRef)();var latestSelector=(0,_react.useRef)();var latestSelectedState=(0,_react.useRef)();var selectedState;try{if(selector!==latestSelector.current||latestSubscriptionCallbackError.current){selectedState=selector(store.getState())}else{selectedState=latestSelectedState.current}}catch(err){if(latestSubscriptionCallbackError.current){err.message+="\nThe error may be correlated with this previous error:\n"+latestSubscriptionCallbackError.current.stack+"\n\n"}throw err}(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)((function(){latestSelector.current=selector;latestSelectedState.current=selectedState;latestSubscriptionCallbackError.current=undefined}));(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)((function(){function checkForUpdates(){try{var newSelectedState=latestSelector.current(store.getState());if(equalityFn(newSelectedState,latestSelectedState.current)){return}latestSelectedState.current=newSelectedState}catch(err){latestSubscriptionCallbackError.current=err}forceRender({})}subscription.onStateChange=checkForUpdates;subscription.trySubscribe();checkForUpdates();return function(){return subscription.tryUnsubscribe()}}),[store,subscription]);return selectedState}function createSelectorHook(context){if(context===void 0){context=_Context.ReactReduxContext}var useReduxContext=context===_Context.ReactReduxContext?_useReduxContext2.useReduxContext:function(){return(0,_react.useContext)(context)};return function useSelector(selector,equalityFn){if(equalityFn===void 0){equalityFn=refEquality}if(false){}var _useReduxContext=useReduxContext(),store=_useReduxContext.store,contextSub=_useReduxContext.subscription;return useSelectorWithStoreAndSubscription(selector,equalityFn,store,contextSub)}}var useSelector=createSelectorHook();exports.useSelector=useSelector},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.unstable_batchedUpdates=void 0;var _reactDom=__webpack_require__(33);exports.unstable_batchedUpdates=_reactDom.unstable_batchedUpdates},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(126);case"v7light":return __webpack_require__(128);case"v8dark":return __webpack_require__(130);case"v8light":return __webpack_require__(132)}},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(127);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".componentTemplatesListItem {\n  background-color: #FFF;\n  padding: 12px;\n  border-bottom: 1px solid #343741;\n  position: relative;\n  height: 48px; }\n  .componentTemplatesListItem--selected::before {\n    content: '';\n    background-color: rgba(255, 255, 255, 0.7);\n    height: 100%;\n    left: 0;\n    position: absolute;\n    top: 0;\n    width: 100%;\n    z-index: 1; }\n  .componentTemplatesListItem__contentIndicator {\n    flex-direction: row; }\n  .componentTemplatesListItem__checkIcon {\n    position: absolute;\n    right: 16px;\n    top: 16px;\n    z-index: 2; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(129);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".componentTemplatesListItem {\n  background-color: #FFF;\n  padding: 12px;\n  border-bottom: 1px solid #D3DAE6;\n  position: relative;\n  height: 48px; }\n  .componentTemplatesListItem--selected::before {\n    content: '';\n    background-color: rgba(255, 255, 255, 0.7);\n    height: 100%;\n    left: 0;\n    position: absolute;\n    top: 0;\n    width: 100%;\n    z-index: 1; }\n  .componentTemplatesListItem__contentIndicator {\n    flex-direction: row; }\n  .componentTemplatesListItem__checkIcon {\n    position: absolute;\n    right: 16px;\n    top: 16px;\n    z-index: 2; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(131);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".componentTemplatesListItem {\n  background-color: #FFF;\n  padding: 12px;\n  border-bottom: 1px solid #343741;\n  position: relative;\n  height: 48px; }\n  .componentTemplatesListItem--selected::before {\n    content: '';\n    background-color: rgba(255, 255, 255, 0.7);\n    height: 100%;\n    left: 0;\n    position: absolute;\n    top: 0;\n    width: 100%;\n    z-index: 1; }\n  .componentTemplatesListItem__contentIndicator {\n    flex-direction: row; }\n  .componentTemplatesListItem__checkIcon {\n    position: absolute;\n    right: 16px;\n    top: 16px;\n    z-index: 2; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(133);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".componentTemplatesListItem {\n  background-color: #FFF;\n  padding: 12px;\n  border-bottom: 1px solid #D3DAE6;\n  position: relative;\n  height: 48px; }\n  .componentTemplatesListItem--selected::before {\n    content: '';\n    background-color: rgba(255, 255, 255, 0.7);\n    height: 100%;\n    left: 0;\n    position: absolute;\n    top: 0;\n    width: 100%;\n    z-index: 1; }\n  .componentTemplatesListItem__contentIndicator {\n    flex-direction: row; }\n  .componentTemplatesListItem__checkIcon {\n    position: absolute;\n    right: 16px;\n    top: 16px;\n    z-index: 2; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(135);case"v7light":return __webpack_require__(137);case"v8dark":return __webpack_require__(139);case"v8light":return __webpack_require__(141)}},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(136);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/**\n * [1] Will center vertically the empty search result\n */\n.componentTemplates {\n  border: 1px solid #343741;\n  border-radius: 4px;\n  border-top: none;\n  height: 100%; }\n  .componentTemplates__header {\n    height: 48px; }\n    .componentTemplates__header .euiFormControlLayout {\n      max-width: initial; }\n  .componentTemplates__searchBox {\n    border-bottom: 1px solid #343741;\n    border-top: 1px solid #343741;\n    box-shadow: none;\n    max-width: initial; }\n  .componentTemplates__listWrapper {\n    height: calc(100% - 48px); }\n    .componentTemplates__listWrapper--is-empty {\n      display: flex; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(138);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/**\n * [1] Will center vertically the empty search result\n */\n.componentTemplates {\n  border: 1px solid #D3DAE6;\n  border-radius: 4px;\n  border-top: none;\n  height: 100%; }\n  .componentTemplates__header {\n    height: 48px; }\n    .componentTemplates__header .euiFormControlLayout {\n      max-width: initial; }\n  .componentTemplates__searchBox {\n    border-bottom: 1px solid #D3DAE6;\n    border-top: 1px solid #D3DAE6;\n    box-shadow: none;\n    max-width: initial; }\n  .componentTemplates__listWrapper {\n    height: calc(100% - 48px); }\n    .componentTemplates__listWrapper--is-empty {\n      display: flex; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(140);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/**\n * [1] Will center vertically the empty search result\n */\n.componentTemplates {\n  border: 1px solid #343741;\n  border-radius: 6px;\n  border-top: none;\n  height: 100%; }\n  .componentTemplates__header {\n    height: 48px; }\n    .componentTemplates__header .euiFormControlLayout {\n      max-width: initial; }\n  .componentTemplates__searchBox {\n    border-bottom: 1px solid #343741;\n    border-top: 1px solid #343741;\n    box-shadow: none;\n    max-width: initial; }\n  .componentTemplates__listWrapper {\n    height: calc(100% - 48px); }\n    .componentTemplates__listWrapper--is-empty {\n      display: flex; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(142);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/**\n * [1] Will center vertically the empty search result\n */\n.componentTemplates {\n  border: 1px solid #D3DAE6;\n  border-radius: 6px;\n  border-top: none;\n  height: 100%; }\n  .componentTemplates__header {\n    height: 48px; }\n    .componentTemplates__header .euiFormControlLayout {\n      max-width: initial; }\n  .componentTemplates__searchBox {\n    border-bottom: 1px solid #D3DAE6;\n    border-top: 1px solid #D3DAE6;\n    box-shadow: none;\n    max-width: initial; }\n  .componentTemplates__listWrapper {\n    height: calc(100% - 48px); }\n    .componentTemplates__listWrapper--is-empty {\n      display: flex; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(144);case"v7light":return __webpack_require__(146);case"v8dark":return __webpack_require__(148);case"v8light":return __webpack_require__(150)}},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(145);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n[1] Height to align left and right column headers\n*/\n.componentTemplatesSelector {\n  height: 480px; }\n  .componentTemplatesSelector__selection {\n    border: 1px solid #343741;\n    border-radius: 4px;\n    padding: 0 16px 16px;\n    color: #98A2B3; }\n    .componentTemplatesSelector__selection--is-empty {\n      align-items: center;\n      justify-content: center; }\n    .componentTemplatesSelector__selection__header {\n      background-color: #25262E;\n      border-bottom: 1px solid #343741;\n      color: #000;\n      height: 40px;\n      line-height: 40px;\n      font-size: 12px;\n      margin-bottom: 8px;\n      margin-left: -16px;\n      margin-right: -16px;\n      padding-left: 16px; }\n      .componentTemplatesSelector__selection__header__count {\n        font-weight: 600; }\n    .componentTemplatesSelector__selection__content {\n      -webkit-mask-image: none;\n              mask-image: none; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(147);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n[1] Height to align left and right column headers\n*/\n.componentTemplatesSelector {\n  height: 480px; }\n  .componentTemplatesSelector__selection {\n    border: 1px solid #D3DAE6;\n    border-radius: 4px;\n    padding: 0 16px 16px;\n    color: #69707D; }\n    .componentTemplatesSelector__selection--is-empty {\n      align-items: center;\n      justify-content: center; }\n    .componentTemplatesSelector__selection__header {\n      background-color: #F5F7FA;\n      border-bottom: 1px solid #D3DAE6;\n      color: #000;\n      height: 40px;\n      line-height: 40px;\n      font-size: 12px;\n      margin-bottom: 8px;\n      margin-left: -16px;\n      margin-right: -16px;\n      padding-left: 16px; }\n      .componentTemplatesSelector__selection__header__count {\n        font-weight: 600; }\n    .componentTemplatesSelector__selection__content {\n      -webkit-mask-image: none;\n              mask-image: none; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(149);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n[1] Height to align left and right column headers\n*/\n.componentTemplatesSelector {\n  height: 480px; }\n  .componentTemplatesSelector__selection {\n    border: 1px solid #343741;\n    border-radius: 6px;\n    padding: 0 16px 16px;\n    color: #98A2B3; }\n    .componentTemplatesSelector__selection--is-empty {\n      align-items: center;\n      justify-content: center; }\n    .componentTemplatesSelector__selection__header {\n      background-color: #25262E;\n      border-bottom: 1px solid #343741;\n      color: #000;\n      height: 40px;\n      line-height: 40px;\n      font-size: 12px;\n      margin-bottom: 8px;\n      margin-left: -16px;\n      margin-right: -16px;\n      padding-left: 16px; }\n      .componentTemplatesSelector__selection__header__count {\n        font-weight: 600; }\n    .componentTemplatesSelector__selection__content {\n      -webkit-mask-image: none;\n              mask-image: none; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(151);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n[1] Height to align left and right column headers\n*/\n.componentTemplatesSelector {\n  height: 480px; }\n  .componentTemplatesSelector__selection {\n    border: 1px solid #D3DAE6;\n    border-radius: 6px;\n    padding: 0 16px 16px;\n    color: #69707D; }\n    .componentTemplatesSelector__selection--is-empty {\n      align-items: center;\n      justify-content: center; }\n    .componentTemplatesSelector__selection__header {\n      background-color: #F5F7FA;\n      border-bottom: 1px solid #D3DAE6;\n      color: #000;\n      height: 40px;\n      line-height: 40px;\n      font-size: 12px;\n      margin-bottom: 8px;\n      margin-left: -16px;\n      margin-right: -16px;\n      padding-left: 16px; }\n      .componentTemplatesSelector__selection__header__count {\n        font-weight: 600; }\n    .componentTemplatesSelector__selection__content {\n      -webkit-mask-image: none;\n              mask-image: none; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=combineActions;var _invariant=_interopRequireDefault(__webpack_require__(44));var _isFunction=_interopRequireDefault(__webpack_require__(50));var _isSymbol=_interopRequireDefault(__webpack_require__(153));var _isEmpty=_interopRequireDefault(__webpack_require__(87));var _toString=_interopRequireDefault(__webpack_require__(88));var _isString=_interopRequireDefault(__webpack_require__(89));var _constants=__webpack_require__(45);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function isValidActionType(type){return(0,_isString.default)(type)||(0,_isFunction.default)(type)||(0,_isSymbol.default)(type)}function isValidActionTypes(types){if((0,_isEmpty.default)(types)){return false}return types.every(isValidActionType)}function combineActions(){for(var _len=arguments.length,actionsTypes=new Array(_len),_key=0;_key<_len;_key++){actionsTypes[_key]=arguments[_key]}(0,_invariant.default)(isValidActionTypes(actionsTypes),"Expected action types to be strings, symbols, or action creators");var combinedActionType=actionsTypes.map(_toString.default).join(_constants.ACTION_TYPE_DELIMITER);return{toString:function toString(){return combinedActionType}}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return typeof value==="symbol"||typeof value==="object"&&Object.prototype.toString.call(value)==="[object Symbol]"};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return value===null};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=createActions;var _invariant=_interopRequireDefault(__webpack_require__(44));var _isPlainObject=_interopRequireDefault(__webpack_require__(46));var _isFunction=_interopRequireDefault(__webpack_require__(50));var _identity=_interopRequireDefault(__webpack_require__(59));var _isArray=_interopRequireDefault(__webpack_require__(156));var _isString=_interopRequireDefault(__webpack_require__(89));var _isNil=_interopRequireDefault(__webpack_require__(90));var _getLastElement=_interopRequireDefault(__webpack_require__(157));var _camelCase=_interopRequireDefault(__webpack_require__(91));var _arrayToObject=_interopRequireDefault(__webpack_require__(161));var _flattenActionMap=_interopRequireDefault(__webpack_require__(162));var _unflattenActionCreators=_interopRequireDefault(__webpack_require__(163));var _createAction=_interopRequireDefault(__webpack_require__(58));var _constants=__webpack_require__(45);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter((function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable})))}ownKeys.forEach((function(key){_defineProperty(target,key,source[key])}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createActions(actionMap){for(var _len=arguments.length,identityActions=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){identityActions[_key-1]=arguments[_key]}var options=(0,_isPlainObject.default)((0,_getLastElement.default)(identityActions))?identityActions.pop():{};(0,_invariant.default)(identityActions.every(_isString.default)&&((0,_isString.default)(actionMap)||(0,_isPlainObject.default)(actionMap)),"Expected optional object followed by string action types");if((0,_isString.default)(actionMap)){return actionCreatorsFromIdentityActions([actionMap].concat(identityActions),options)}return _objectSpread({},actionCreatorsFromActionMap(actionMap,options),actionCreatorsFromIdentityActions(identityActions,options))}function actionCreatorsFromActionMap(actionMap,options){var flatActionMap=(0,_flattenActionMap.default)(actionMap,options);var flatActionCreators=actionMapToActionCreators(flatActionMap);return(0,_unflattenActionCreators.default)(flatActionCreators,options)}function actionMapToActionCreators(actionMap,_temp){var _ref=_temp===void 0?{}:_temp,prefix=_ref.prefix,_ref$namespace=_ref.namespace,namespace=_ref$namespace===void 0?_constants.DEFAULT_NAMESPACE:_ref$namespace;function isValidActionMapValue(actionMapValue){if((0,_isFunction.default)(actionMapValue)||(0,_isNil.default)(actionMapValue)){return true}if((0,_isArray.default)(actionMapValue)){var _actionMapValue$=actionMapValue[0],payload=_actionMapValue$===void 0?_identity.default:_actionMapValue$,meta=actionMapValue[1];return(0,_isFunction.default)(payload)&&(0,_isFunction.default)(meta)}return false}return(0,_arrayToObject.default)(Object.keys(actionMap),(function(partialActionCreators,type){var _objectSpread2;var actionMapValue=actionMap[type];(0,_invariant.default)(isValidActionMapValue(actionMapValue),"Expected function, undefined, null, or array with payload and meta "+("functions for "+type));var prefixedType=prefix?""+prefix+namespace+type:type;var actionCreator=(0,_isArray.default)(actionMapValue)?_createAction.default.apply(void 0,[prefixedType].concat(actionMapValue)):(0,_createAction.default)(prefixedType,actionMapValue);return _objectSpread({},partialActionCreators,(_objectSpread2={},_objectSpread2[type]=actionCreator,_objectSpread2))}))}function actionCreatorsFromIdentityActions(identityActions,options){var actionMap=(0,_arrayToObject.default)(identityActions,(function(partialActionMap,type){var _objectSpread3;return _objectSpread({},partialActionMap,(_objectSpread3={},_objectSpread3[type]=_identity.default,_objectSpread3))}));var actionCreators=actionMapToActionCreators(actionMap,options);return(0,_arrayToObject.default)(Object.keys(actionCreators),(function(partialActionCreators,type){var _objectSpread4;return _objectSpread({},partialActionCreators,(_objectSpread4={},_objectSpread4[(0,_camelCase.default)(type)]=actionCreators[type],_objectSpread4))}))}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return Array.isArray(value)};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(array){return array[array.length-1]};exports.default=_default},function(module,exports,__webpack_require__){var space=__webpack_require__(159);module.exports=toCamelCase;function toCamelCase(string){return space(string).replace(/\s(\w)/g,(function(matches,letter){return letter.toUpperCase()}))}},function(module,exports,__webpack_require__){var clean=__webpack_require__(160);module.exports=toSpaceCase;function toSpaceCase(string){return clean(string).replace(/[\W_]+(.|$)/g,(function(matches,match){return match?" "+match:""})).trim()}},function(module,exports){module.exports=toNoCase;var hasSpace=/\s/;var hasSeparator=/(_|-|\.|:)/;var hasCamel=/([a-z][A-Z]|[A-Z][a-z])/;function toNoCase(string){if(hasSpace.test(string))return string.toLowerCase();if(hasSeparator.test(string))return(unseparate(string)||string).toLowerCase();if(hasCamel.test(string))return uncamelize(string).toLowerCase();return string.toLowerCase()}var separatorSplitter=/[\W_]+(.|$)/g;function unseparate(string){return string.replace(separatorSplitter,(function(m,next){return next?" "+next:""}))}var camelSplitter=/(.)([A-Z]+)/g;function uncamelize(string){return string.replace(camelSplitter,(function(m,previous,uppers){return previous+" "+uppers.toLowerCase().split("").join(" ")}))}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(array,callback){return array.reduce((function(partialObject,element){return callback(partialObject,element)}),{})};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _isPlainObject=_interopRequireDefault(__webpack_require__(46));var _flattenWhenNode=_interopRequireDefault(__webpack_require__(92));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=(0,_flattenWhenNode.default)(_isPlainObject.default);exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=unflattenActionCreators;var _constants=__webpack_require__(45);var _isEmpty=_interopRequireDefault(__webpack_require__(87));var _camelCase=_interopRequireDefault(__webpack_require__(91));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function unflattenActionCreators(flatActionCreators,_temp){var _ref=_temp===void 0?{}:_temp,_ref$namespace=_ref.namespace,namespace=_ref$namespace===void 0?_constants.DEFAULT_NAMESPACE:_ref$namespace,prefix=_ref.prefix;function unflatten(flatActionType,partialNestedActionCreators,partialFlatActionTypePath){var nextNamespace=(0,_camelCase.default)(partialFlatActionTypePath.shift());if((0,_isEmpty.default)(partialFlatActionTypePath)){partialNestedActionCreators[nextNamespace]=flatActionCreators[flatActionType]}else{if(!partialNestedActionCreators[nextNamespace]){partialNestedActionCreators[nextNamespace]={}}unflatten(flatActionType,partialNestedActionCreators[nextNamespace],partialFlatActionTypePath)}}var nestedActionCreators={};Object.getOwnPropertyNames(flatActionCreators).forEach((function(type){var unprefixedType=prefix?type.replace(""+prefix+namespace,""):type;return unflatten(type,nestedActionCreators,unprefixedType.split(namespace))}));return nestedActionCreators}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _justCurryIt=_interopRequireDefault(__webpack_require__(165));var _createAction=_interopRequireDefault(__webpack_require__(58));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=function _default(type,payloadCreator){return(0,_justCurryIt.default)((0,_createAction.default)(type,payloadCreator),payloadCreator.length)};exports.default=_default},function(module,exports){module.exports=curry;function curry(fn,arity){return function curried(){if(arity==null){arity=fn.length}var args=[].slice.call(arguments);if(args.length>=arity){return fn.apply(this,args)}else{return function(){return curried.apply(this,args.concat([].slice.call(arguments)))}}}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return value===undefined};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=handleActions;var _reduceReducers=_interopRequireDefault(__webpack_require__(168));var _invariant=_interopRequireDefault(__webpack_require__(44));var _isPlainObject=_interopRequireDefault(__webpack_require__(46));var _isMap=_interopRequireDefault(__webpack_require__(51));var _ownKeys=_interopRequireDefault(__webpack_require__(60));var _flattenReducerMap=_interopRequireDefault(__webpack_require__(169));var _handleAction=_interopRequireDefault(__webpack_require__(94));var _get=_interopRequireDefault(__webpack_require__(93));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function handleActions(handlers,defaultState,options){if(options===void 0){options={}}(0,_invariant.default)((0,_isPlainObject.default)(handlers)||(0,_isMap.default)(handlers),"Expected handlers to be a plain object.");var flattenedReducerMap=(0,_flattenReducerMap.default)(handlers,options);var reducers=(0,_ownKeys.default)(flattenedReducerMap).map((function(type){return(0,_handleAction.default)(type,(0,_get.default)(type,flattenedReducerMap),defaultState)}));var reducer=_reduceReducers.default.apply(void 0,reducers.concat([defaultState]));return function(state,action){if(state===void 0){state=defaultState}return reducer(state,action)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var initialState=typeof args[args.length-1]!=="function"&&args.pop();var reducers=args;if(typeof initialState==="undefined"){throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.")}return function(prevState,value){for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2]}var prevStateIsUndefined=typeof prevState==="undefined";var valueIsUndefined=typeof value==="undefined";if(prevStateIsUndefined&&valueIsUndefined&&initialState){return initialState}return reducers.reduce((function(newState,reducer){return reducer.apply(undefined,[newState,value].concat(args))}),prevStateIsUndefined&&!valueIsUndefined&&initialState?initialState:prevState)}};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _isPlainObject=_interopRequireDefault(__webpack_require__(46));var _isMap=_interopRequireDefault(__webpack_require__(51));var _hasGeneratorInterface=_interopRequireDefault(__webpack_require__(170));var _flattenWhenNode=_interopRequireDefault(__webpack_require__(92));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=(0,_flattenWhenNode.default)((function(node){return((0,_isPlainObject.default)(node)||(0,_isMap.default)(node))&&!(0,_hasGeneratorInterface.default)(node)}));exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=hasGeneratorInterface;var _ownKeys=_interopRequireDefault(__webpack_require__(60));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function hasGeneratorInterface(handler){var keys=(0,_ownKeys.default)(handler);var hasOnlyInterfaceNames=keys.every((function(ownKey){return ownKey==="next"||ownKey==="throw"}));return keys.length&&keys.length<=2&&hasOnlyInterfaceNames}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.defaultMemoize=defaultMemoize;exports.createSelectorCreator=createSelectorCreator;exports.createStructuredSelector=createStructuredSelector;function defaultEqualityCheck(a,b){return a===b}function areArgumentsShallowlyEqual(equalityCheck,prev,next){if(prev===null||next===null||prev.length!==next.length){return false}var length=prev.length;for(var i=0;i<length;i++){if(!equalityCheck(prev[i],next[i])){return false}}return true}function defaultMemoize(func){var equalityCheck=arguments.length>1&&arguments[1]!==undefined?arguments[1]:defaultEqualityCheck;var lastArgs=null;var lastResult=null;return function(){if(!areArgumentsShallowlyEqual(equalityCheck,lastArgs,arguments)){lastResult=func.apply(null,arguments)}lastArgs=arguments;return lastResult}}function getDependencies(funcs){var dependencies=Array.isArray(funcs[0])?funcs[0]:funcs;if(!dependencies.every((function(dep){return typeof dep==="function"}))){var dependencyTypes=dependencies.map((function(dep){return typeof dep})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+dependencyTypes+"]"))}return dependencies}function createSelectorCreator(memoize){for(var _len=arguments.length,memoizeOptions=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){memoizeOptions[_key-1]=arguments[_key]}return function(){for(var _len2=arguments.length,funcs=Array(_len2),_key2=0;_key2<_len2;_key2++){funcs[_key2]=arguments[_key2]}var recomputations=0;var resultFunc=funcs.pop();var dependencies=getDependencies(funcs);var memoizedResultFunc=memoize.apply(undefined,[function(){recomputations++;return resultFunc.apply(null,arguments)}].concat(memoizeOptions));var selector=memoize((function(){var params=[];var length=dependencies.length;for(var i=0;i<length;i++){params.push(dependencies[i].apply(null,arguments))}return memoizedResultFunc.apply(null,params)}));selector.resultFunc=resultFunc;selector.dependencies=dependencies;selector.recomputations=function(){return recomputations};selector.resetRecomputations=function(){return recomputations=0};return selector}}var createSelector=exports.createSelector=createSelectorCreator(defaultMemoize);function createStructuredSelector(selectors){var selectorCreator=arguments.length>1&&arguments[1]!==undefined?arguments[1]:createSelector;if(typeof selectors!=="object"){throw new Error("createStructuredSelector expects first argument to be an object "+("where each property is a selector, instead received a "+typeof selectors))}var objectKeys=Object.keys(selectors);return selectorCreator(objectKeys.map((function(key){return selectors[key]})),(function(){for(var _len3=arguments.length,values=Array(_len3),_key3=0;_key3<_len3;_key3++){values[_key3]=arguments[_key3]}return values.reduce((function(composition,value,index){composition[objectKeys[index]]=value;return composition}),{})}))}},function(module,exports,__webpack_require__){"use strict";module.exports=str=>encodeURIComponent(str).replace(/[!'()*]/g,x=>`%${x.charCodeAt(0).toString(16).toUpperCase()}`)},function(module,exports,__webpack_require__){"use strict";var token="%[a-f0-9]{2}";var singleMatcher=new RegExp(token,"gi");var multiMatcher=new RegExp("("+token+")+","gi");function decodeComponents(components,split){try{return decodeURIComponent(components.join(""))}catch(err){}if(components.length===1){return components}split=split||1;var left=components.slice(0,split);var right=components.slice(split);return Array.prototype.concat.call([],decodeComponents(left),decodeComponents(right))}function decode(input){try{return decodeURIComponent(input)}catch(err){var tokens=input.match(singleMatcher);for(var i=1;i<tokens.length;i++){input=decodeComponents(tokens,i).join("");tokens=input.match(singleMatcher)}return input}}function customDecodeURIComponent(input){var replaceMap={"%FE%FF":"","%FF%FE":""};var match=multiMatcher.exec(input);while(match){try{replaceMap[match[0]]=decodeURIComponent(match[0])}catch(err){var result=decode(match[0]);if(result!==match[0]){replaceMap[match[0]]=result}}match=multiMatcher.exec(input)}replaceMap["%C2"]="";var entries=Object.keys(replaceMap);for(var i=0;i<entries.length;i++){var key=entries[i];input=input.replace(new RegExp(key,"g"),replaceMap[key])}return input}module.exports=function(encodedURI){if(typeof encodedURI!=="string"){throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof encodedURI+"`")}try{encodedURI=encodedURI.replace(/\+/g," ");return decodeURIComponent(encodedURI)}catch(err){return customDecodeURIComponent(encodedURI)}}},function(module,exports,__webpack_require__){"use strict";module.exports=(string,separator)=>{if(!(typeof string==="string"&&typeof separator==="string")){throw new TypeError("Expected the arguments to be of type `string`")}if(separator===""){return[string]}const separatorIndex=string.indexOf(separator);if(separatorIndex===-1){return[string]}return[string.slice(0,separatorIndex),string.slice(separatorIndex+separator.length)]}},function(module,exports){ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],(function(acequire,exports,module){"use strict";exports.isDark=false;exports.cssClass="ace-tm";exports.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';var dom=acequire("../lib/dom");dom.importCssString(exports.cssText,exports.cssClass)}))},function(module,exports,__webpack_require__){(function(){var ACE_NAMESPACE="ace";var global=function(){return this}();if(!global&&typeof window!="undefined")global=window;if(!ACE_NAMESPACE&&typeof acequirejs!=="undefined")return;var define=function(module,deps,payload){if(typeof module!=="string"){if(define.original)define.original.apply(this,arguments);else{console.error("dropping module because define wasn't a string.");console.trace()}return}if(arguments.length==2)payload=deps;if(!define.modules[module]){define.payloads[module]=payload;define.modules[module]=null}};define.modules={};define.payloads={};var _acequire=function(parentId,module,callback){if(typeof module==="string"){var payload=lookup(parentId,module);if(payload!=undefined){callback&&callback();return payload}}else if(Object.prototype.toString.call(module)==="[object Array]"){var params=[];for(var i=0,l=module.length;i<l;++i){var dep=lookup(parentId,module[i]);if(dep==undefined&&acequire.original)return;params.push(dep)}return callback&&callback.apply(null,params)||true}};var acequire=function(module,callback){var packagedModule=_acequire("",module,callback);if(packagedModule==undefined&&acequire.original)return acequire.original.apply(this,arguments);return packagedModule};var normalizeModule=function(parentId,moduleName){if(moduleName.indexOf("!")!==-1){var chunks=moduleName.split("!");return normalizeModule(parentId,chunks[0])+"!"+normalizeModule(parentId,chunks[1])}if(moduleName.charAt(0)=="."){var base=parentId.split("/").slice(0,-1).join("/");moduleName=base+"/"+moduleName;while(moduleName.indexOf(".")!==-1&&previous!=moduleName){var previous=moduleName;moduleName=moduleName.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return moduleName};var lookup=function(parentId,moduleName){moduleName=normalizeModule(parentId,moduleName);var module=define.modules[moduleName];if(!module){module=define.payloads[moduleName];if(typeof module==="function"){var exports={};var mod={id:moduleName,uri:"",exports:exports,packaged:true};var req=function(module,callback){return _acequire(moduleName,module,callback)};var returnValue=module(req,exports,mod);exports=returnValue||mod.exports;define.modules[moduleName]=exports;delete define.payloads[moduleName]}module=define.modules[moduleName]=exports||module}return module};function exportAce(ns){var root=global;if(ns){if(!global[ns])global[ns]={};root=global[ns]}if(!root.define||!root.define.packaged){define.original=root.define;root.define=define;root.define.packaged=true}if(!root.acequire||!root.acequire.packaged){acequire.original=root.acequire;root.acequire=acequire;root.acequire.packaged=true}}exportAce(ACE_NAMESPACE)})();ace.define("ace/lib/regexp",["require","exports","module"],(function(acequire,exports,module){"use strict";var real={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},compliantExecNpcg=real.exec.call(/()??/,"")[1]===undefined,compliantLastIndexIncrement=function(){var x=/^/g;real.test.call(x,"");return!x.lastIndex}();if(compliantLastIndexIncrement&&compliantExecNpcg)return;RegExp.prototype.exec=function(str){var match=real.exec.apply(this,arguments),name,r2;if(typeof str=="string"&&match){if(!compliantExecNpcg&&match.length>1&&indexOf(match,"")>-1){r2=RegExp(this.source,real.replace.call(getNativeFlags(this),"g",""));real.replace.call(str.slice(match.index),r2,(function(){for(var i=1;i<arguments.length-2;i++){if(arguments[i]===undefined)match[i]=undefined}}))}if(this._xregexp&&this._xregexp.captureNames){for(var i=1;i<match.length;i++){name=this._xregexp.captureNames[i-1];if(name)match[name]=match[i]}}if(!compliantLastIndexIncrement&&this.global&&!match[0].length&&this.lastIndex>match.index)this.lastIndex--}return match};if(!compliantLastIndexIncrement){RegExp.prototype.test=function(str){var match=real.exec.call(this,str);if(match&&this.global&&!match[0].length&&this.lastIndex>match.index)this.lastIndex--;return!!match}}function getNativeFlags(regex){return(regex.global?"g":"")+(regex.ignoreCase?"i":"")+(regex.multiline?"m":"")+(regex.extended?"x":"")+(regex.sticky?"y":"")}function indexOf(array,item,from){if(Array.prototype.indexOf)return array.indexOf(item,from);for(var i=from||0;i<array.length;i++){if(array[i]===item)return i}return-1}}));ace.define("ace/lib/es5-shim",["require","exports","module"],(function(acequire,exports,module){function Empty(){}if(!Function.prototype.bind){Function.prototype.bind=function bind(that){var target=this;if(typeof target!="function"){throw new TypeError("Function.prototype.bind called on incompatible "+target)}var args=slice.call(arguments,1);var bound=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));if(Object(result)===result){return result}return this}else{return target.apply(that,args.concat(slice.call(arguments)))}};if(target.prototype){Empty.prototype=target.prototype;bound.prototype=new Empty;Empty.prototype=null}return bound}}var call=Function.prototype.call;var prototypeOfArray=Array.prototype;var prototypeOfObject=Object.prototype;var slice=prototypeOfArray.slice;var _toString=call.bind(prototypeOfObject.toString);var owns=call.bind(prototypeOfObject.hasOwnProperty);var defineGetter;var defineSetter;var lookupGetter;var lookupSetter;var supportsAccessors;if(supportsAccessors=owns(prototypeOfObject,"__defineGetter__")){defineGetter=call.bind(prototypeOfObject.__defineGetter__);defineSetter=call.bind(prototypeOfObject.__defineSetter__);lookupGetter=call.bind(prototypeOfObject.__lookupGetter__);lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)}if([1,2].splice(0).length!=2){if(function(){function makeArray(l){var a=new Array(l+2);a[0]=a[1]=0;return a}var array=[],lengthBefore;array.splice.apply(array,makeArray(20));array.splice.apply(array,makeArray(26));lengthBefore=array.length;array.splice(5,0,"XXX");lengthBefore+1==array.length;if(lengthBefore+1==array.length){return true}}()){var array_splice=Array.prototype.splice;Array.prototype.splice=function(start,deleteCount){if(!arguments.length){return[]}else{return array_splice.apply(this,[start===void 0?0:start,deleteCount===void 0?this.length-start:deleteCount].concat(slice.call(arguments,2)))}}}else{Array.prototype.splice=function(pos,removeCount){var length=this.length;if(pos>0){if(pos>length)pos=length}else if(pos==void 0){pos=0}else if(pos<0){pos=Math.max(length+pos,0)}if(!(pos+removeCount<length))removeCount=length-pos;var removed=this.slice(pos,pos+removeCount);var insert=slice.call(arguments,2);var add=insert.length;if(pos===length){if(add){this.push.apply(this,insert)}}else{var remove=Math.min(removeCount,length-pos);var tailOldPos=pos+remove;var tailNewPos=tailOldPos+add-remove;var tailCount=length-tailOldPos;var lengthAfterRemove=length-remove;if(tailNewPos<tailOldPos){for(var i=0;i<tailCount;++i){this[tailNewPos+i]=this[tailOldPos+i]}}else if(tailNewPos>tailOldPos){for(i=tailCount;i--;){this[tailNewPos+i]=this[tailOldPos+i]}}if(add&&pos===lengthAfterRemove){this.length=lengthAfterRemove;this.push.apply(this,insert)}else{this.length=lengthAfterRemove+add;for(i=0;i<add;++i){this[pos+i]=insert[i]}}}return removed}}}if(!Array.isArray){Array.isArray=function isArray(obj){return _toString(obj)=="[object Array]"}}var boxedString=Object("a"),splitString=boxedString[0]!="a"||!(0 in boxedString);if(!Array.prototype.forEach){Array.prototype.forEach=function forEach(fun){var object=toObject(this),self=splitString&&_toString(this)=="[object String]"?this.split(""):object,thisp=arguments[1],i=-1,length=self.length>>>0;if(_toString(fun)!="[object Function]"){throw new TypeError}while(++i<length){if(i in self){fun.call(thisp,self[i],i,object)}}}}if(!Array.prototype.map){Array.prototype.map=function map(fun){var object=toObject(this),self=splitString&&_toString(this)=="[object String]"?this.split(""):object,length=self.length>>>0,result=Array(length),thisp=arguments[1];if(_toString(fun)!="[object Function]"){throw new TypeError(fun+" is not a function")}for(var i=0;i<length;i++){if(i in self)result[i]=fun.call(thisp,self[i],i,object)}return result}}if(!Array.prototype.filter){Array.prototype.filter=function filter(fun){var object=toObject(this),self=splitString&&_toString(this)=="[object String]"?this.split(""):object,length=self.length>>>0,result=[],value,thisp=arguments[1];if(_toString(fun)!="[object Function]"){throw new TypeError(fun+" is not a function")}for(var i=0;i<length;i++){if(i in self){value=self[i];if(fun.call(thisp,value,i,object)){result.push(value)}}}return result}}if(!Array.prototype.every){Array.prototype.every=function every(fun){var object=toObject(this),self=splitString&&_toString(this)=="[object String]"?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if(_toString(fun)!="[object Function]"){throw new TypeError(fun+" is not a function")}for(var i=0;i<length;i++){if(i in self&&!fun.call(thisp,self[i],i,object)){return false}}return true}}if(!Array.prototype.some){Array.prototype.some=function some(fun){var object=toObject(this),self=splitString&&_toString(this)=="[object String]"?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if(_toString(fun)!="[object Function]"){throw new TypeError(fun+" is not a function")}for(var i=0;i<length;i++){if(i in self&&fun.call(thisp,self[i],i,object)){return true}}return false}}if(!Array.prototype.reduce){Array.prototype.reduce=function reduce(fun){var object=toObject(this),self=splitString&&_toString(this)=="[object String]"?this.split(""):object,length=self.length>>>0;if(_toString(fun)!="[object Function]"){throw new TypeError(fun+" is not a function")}if(!length&&arguments.length==1){throw new TypeError("reduce of empty array with no initial value")}var i=0;var result;if(arguments.length>=2){result=arguments[1]}else{do{if(i in self){result=self[i++];break}if(++i>=length){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;i<length;i++){if(i in self){result=fun.call(void 0,result,self[i],i,object)}}return result}}if(!Array.prototype.reduceRight){Array.prototype.reduceRight=function reduceRight(fun){var object=toObject(this),self=splitString&&_toString(this)=="[object String]"?this.split(""):object,length=self.length>>>0;if(_toString(fun)!="[object Function]"){throw new TypeError(fun+" is not a function")}if(!length&&arguments.length==1){throw new TypeError("reduceRight of empty array with no initial value")}var result,i=length-1;if(arguments.length>=2){result=arguments[1]}else{do{if(i in self){result=self[i--];break}if(--i<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}do{if(i in this){result=fun.call(void 0,result,self[i],i,object)}}while(i--);return result}}if(!Array.prototype.indexOf||[0,1].indexOf(1,2)!=-1){Array.prototype.indexOf=function indexOf(sought){var self=splitString&&_toString(this)=="[object String]"?this.split(""):toObject(this),length=self.length>>>0;if(!length){return-1}var i=0;if(arguments.length>1){i=toInteger(arguments[1])}i=i>=0?i:Math.max(0,length+i);for(;i<length;i++){if(i in self&&self[i]===sought){return i}}return-1}}if(!Array.prototype.lastIndexOf||[0,1].lastIndexOf(0,-3)!=-1){Array.prototype.lastIndexOf=function lastIndexOf(sought){var self=splitString&&_toString(this)=="[object String]"?this.split(""):toObject(this),length=self.length>>>0;if(!length){return-1}var i=length-1;if(arguments.length>1){i=Math.min(i,toInteger(arguments[1]))}i=i>=0?i:length-Math.abs(i);for(;i>=0;i--){if(i in self&&sought===self[i]){return i}}return-1}}if(!Object.getPrototypeOf){Object.getPrototypeOf=function getPrototypeOf(object){return object.__proto__||(object.constructor?object.constructor.prototype:prototypeOfObject)}}if(!Object.getOwnPropertyDescriptor){var ERR_NON_OBJECT="Object.getOwnPropertyDescriptor called on a "+"non-object: ";Object.getOwnPropertyDescriptor=function getOwnPropertyDescriptor(object,property){if(typeof object!="object"&&typeof object!="function"||object===null)throw new TypeError(ERR_NON_OBJECT+object);if(!owns(object,property))return;var descriptor,getter,setter;descriptor={enumerable:true,configurable:true};if(supportsAccessors){var prototype=object.__proto__;object.__proto__=prototypeOfObject;var getter=lookupGetter(object,property);var setter=lookupSetter(object,property);object.__proto__=prototype;if(getter||setter){if(getter)descriptor.get=getter;if(setter)descriptor.set=setter;return descriptor}}descriptor.value=object[property];return descriptor}}if(!Object.getOwnPropertyNames){Object.getOwnPropertyNames=function getOwnPropertyNames(object){return Object.keys(object)}}if(!Object.create){var createEmpty;if(Object.prototype.__proto__===null){createEmpty=function(){return{__proto__:null}}}else{createEmpty=function(){var empty={};for(var i in empty)empty[i]=null;empty.constructor=empty.hasOwnProperty=empty.propertyIsEnumerable=empty.isPrototypeOf=empty.toLocaleString=empty.toString=empty.valueOf=empty.__proto__=null;return empty}}Object.create=function create(prototype,properties){var object;if(prototype===null){object=createEmpty()}else{if(typeof prototype!="object")throw new TypeError("typeof prototype["+typeof prototype+"] != 'object'");var Type=function(){};Type.prototype=prototype;object=new Type;object.__proto__=prototype}if(properties!==void 0)Object.defineProperties(object,properties);return object}}function doesDefinePropertyWork(object){try{Object.defineProperty(object,"sentinel",{});return"sentinel"in object}catch(exception){}}if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({});var definePropertyWorksOnDom=typeof document=="undefined"||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom){var definePropertyFallback=Object.defineProperty}}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR="Property description must be an object: ";var ERR_NON_OBJECT_TARGET="Object.defineProperty called on non-object: ";var ERR_ACCESSORS_NOT_SUPPORTED="getters & setters can not be defined "+"on this javascript engine";Object.defineProperty=function defineProperty(object,property,descriptor){if(typeof object!="object"&&typeof object!="function"||object===null)throw new TypeError(ERR_NON_OBJECT_TARGET+object);if(typeof descriptor!="object"&&typeof descriptor!="function"||descriptor===null)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback){try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}}if(owns(descriptor,"value")){if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject;delete object[property];object[property]=descriptor.value;object.__proto__=prototype}else{object[property]=descriptor.value}}else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);if(owns(descriptor,"get"))defineGetter(object,property,descriptor.get);if(owns(descriptor,"set"))defineSetter(object,property,descriptor.set)}return object}}if(!Object.defineProperties){Object.defineProperties=function defineProperties(object,properties){for(var property in properties){if(owns(properties,property))Object.defineProperty(object,property,properties[property])}return object}}if(!Object.seal){Object.seal=function seal(object){return object}}if(!Object.freeze){Object.freeze=function freeze(object){return object}}try{Object.freeze((function(){}))}catch(exception){Object.freeze=function freeze(freezeObject){return function freeze(object){if(typeof object=="function"){return object}else{return freezeObject(object)}}}(Object.freeze)}if(!Object.preventExtensions){Object.preventExtensions=function preventExtensions(object){return object}}if(!Object.isSealed){Object.isSealed=function isSealed(object){return false}}if(!Object.isFrozen){Object.isFrozen=function isFrozen(object){return false}}if(!Object.isExtensible){Object.isExtensible=function isExtensible(object){if(Object(object)===object){throw new TypeError}var name="";while(owns(object,name)){name+="?"}object[name]=true;var returnValue=owns(object,name);delete object[name];return returnValue}}if(!Object.keys){var hasDontEnumBug=true,dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;for(var key in{toString:null}){hasDontEnumBug=false}Object.keys=function keys(object){if(typeof object!="object"&&typeof object!="function"||object===null){throw new TypeError("Object.keys called on a non-object")}var keys=[];for(var name in object){if(owns(object,name)){keys.push(name)}}if(hasDontEnumBug){for(var i=0,ii=dontEnumsLength;i<ii;i++){var dontEnum=dontEnums[i];if(owns(object,dontEnum)){keys.push(dontEnum)}}}return keys}}if(!Date.now){Date.now=function now(){return(new Date).getTime()}}var ws="\t\n\v\f\r "+"\u2028"+"\u2029\ufeff";if(!String.prototype.trim||ws.trim()){ws="["+ws+"]";var trimBeginRegexp=new RegExp("^"+ws+ws+"*"),trimEndRegexp=new RegExp(ws+ws+"*$");String.prototype.trim=function trim(){return String(this).replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}}function toInteger(n){n=+n;if(n!==n){n=0}else if(n!==0&&n!==1/0&&n!==-(1/0)){n=(n>0||-1)*Math.floor(Math.abs(n))}return n}function isPrimitive(input){var type=typeof input;return input===null||type==="undefined"||type==="boolean"||type==="number"||type==="string"}function toPrimitive(input){var val,valueOf,toString;if(isPrimitive(input)){return input}valueOf=input.valueOf;if(typeof valueOf==="function"){val=valueOf.call(input);if(isPrimitive(val)){return val}}toString=input.toString;if(typeof toString==="function"){val=toString.call(input);if(isPrimitive(val)){return val}}throw new TypeError}var toObject=function(o){if(o==null){throw new TypeError("can't convert "+o+" to object")}return Object(o)}}));ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],(function(acequire,exports,module){"use strict";acequire("./regexp");acequire("./es5-shim")}));ace.define("ace/lib/dom",["require","exports","module"],(function(acequire,exports,module){"use strict";var XHTML_NS="http://www.w3.org/1999/xhtml";exports.getDocumentHead=function(doc){if(!doc)doc=document;return doc.head||doc.getElementsByTagName("head")[0]||doc.documentElement};exports.createElement=function(tag,ns){return document.createElementNS?document.createElementNS(ns||XHTML_NS,tag):document.createElement(tag)};exports.hasCssClass=function(el,name){var classes=(el.className+"").split(/\s+/g);return classes.indexOf(name)!==-1};exports.addCssClass=function(el,name){if(!exports.hasCssClass(el,name)){el.className+=" "+name}};exports.removeCssClass=function(el,name){var classes=el.className.split(/\s+/g);while(true){var index=classes.indexOf(name);if(index==-1){break}classes.splice(index,1)}el.className=classes.join(" ")};exports.toggleCssClass=function(el,name){var classes=el.className.split(/\s+/g),add=true;while(true){var index=classes.indexOf(name);if(index==-1){break}add=false;classes.splice(index,1)}if(add)classes.push(name);el.className=classes.join(" ");return add};exports.setCssClass=function(node,className,include){if(include){exports.addCssClass(node,className)}else{exports.removeCssClass(node,className)}};exports.hasCssString=function(id,doc){var index=0,sheets;doc=doc||document;if(doc.createStyleSheet&&(sheets=doc.styleSheets)){while(index<sheets.length)if(sheets[index++].owningElement.id===id)return true}else if(sheets=doc.getElementsByTagName("style")){while(index<sheets.length)if(sheets[index++].id===id)return true}return false};exports.importCssString=function importCssString(cssText,id,doc){doc=doc||document;if(id&&exports.hasCssString(id,doc))return null;var style;if(id)cssText+="\n/*# sourceURL=ace/css/"+id+" */";if(doc.createStyleSheet){style=doc.createStyleSheet();style.cssText=cssText;if(id)style.owningElement.id=id}else{style=exports.createElement("style");style.appendChild(doc.createTextNode(cssText));if(id)style.id=id;exports.getDocumentHead(doc).appendChild(style)}};exports.importCssStylsheet=function(uri,doc){if(doc.createStyleSheet){doc.createStyleSheet(uri)}else{var link=exports.createElement("link");link.rel="stylesheet";link.href=uri;exports.getDocumentHead(doc).appendChild(link)}};exports.getInnerWidth=function(element){return parseInt(exports.computedStyle(element,"paddingLeft"),10)+parseInt(exports.computedStyle(element,"paddingRight"),10)+element.clientWidth};exports.getInnerHeight=function(element){return parseInt(exports.computedStyle(element,"paddingTop"),10)+parseInt(exports.computedStyle(element,"paddingBottom"),10)+element.clientHeight};exports.scrollbarWidth=function(document){var inner=exports.createElement("ace_inner");inner.style.width="100%";inner.style.minWidth="0px";inner.style.height="200px";inner.style.display="block";var outer=exports.createElement("ace_outer");var style=outer.style;style.position="absolute";style.left="-10000px";style.overflow="hidden";style.width="200px";style.minWidth="0px";style.height="150px";style.display="block";outer.appendChild(inner);var body=document.documentElement;body.appendChild(outer);var noScrollbar=inner.offsetWidth;style.overflow="scroll";var withScrollbar=inner.offsetWidth;if(noScrollbar==withScrollbar){withScrollbar=outer.clientWidth}body.removeChild(outer);return noScrollbar-withScrollbar};if(typeof document=="undefined"){exports.importCssString=function(){};return}if(window.pageYOffset!==undefined){exports.getPageScrollTop=function(){return window.pageYOffset};exports.getPageScrollLeft=function(){return window.pageXOffset}}else{exports.getPageScrollTop=function(){return document.body.scrollTop};exports.getPageScrollLeft=function(){return document.body.scrollLeft}}if(window.getComputedStyle)exports.computedStyle=function(element,style){if(style)return(window.getComputedStyle(element,"")||{})[style]||"";return window.getComputedStyle(element,"")||{}};else exports.computedStyle=function(element,style){if(style)return element.currentStyle[style];return element.currentStyle};exports.setInnerHtml=function(el,innerHtml){var element=el.cloneNode(false);element.innerHTML=innerHtml;el.parentNode.replaceChild(element,el);return element};if("textContent"in document.documentElement){exports.setInnerText=function(el,innerText){el.textContent=innerText};exports.getInnerText=function(el){return el.textContent}}else{exports.setInnerText=function(el,innerText){el.innerText=innerText};exports.getInnerText=function(el){return el.innerText}}exports.getParentWindow=function(document){return document.defaultView||document.parentWindow}}));ace.define("ace/lib/oop",["require","exports","module"],(function(acequire,exports,module){"use strict";exports.inherits=function(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})};exports.mixin=function(obj,mixin){for(var key in mixin){obj[key]=mixin[key]}return obj};exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}}));ace.define("ace/lib/keys",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop"],(function(acequire,exports,module){"use strict";acequire("./fixoldbrowsers");var oop=acequire("./oop");var Keys=function(){var ret={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};var name,i;for(i in ret.FUNCTION_KEYS){name=ret.FUNCTION_KEYS[i].toLowerCase();ret[name]=parseInt(i,10)}for(i in ret.PRINTABLE_KEYS){name=ret.PRINTABLE_KEYS[i].toLowerCase();ret[name]=parseInt(i,10)}oop.mixin(ret,ret.MODIFIER_KEYS);oop.mixin(ret,ret.PRINTABLE_KEYS);oop.mixin(ret,ret.FUNCTION_KEYS);ret.enter=ret["return"];ret.escape=ret.esc;ret.del=ret["delete"];ret[173]="-";(function(){var mods=["cmd","ctrl","alt","shift"];for(var i=Math.pow(2,mods.length);i--;){ret.KEY_MODS[i]=mods.filter((function(x){return i&ret.KEY_MODS[x]})).join("-")+"-"}})();ret.KEY_MODS[0]="";ret.KEY_MODS[-1]="input-";return ret}();oop.mixin(exports,Keys);exports.keyCodeToString=function(keyCode){var keyString=Keys[keyCode];if(typeof keyString!="string")keyString=String.fromCharCode(keyCode);return keyString.toLowerCase()}}));ace.define("ace/lib/useragent",["require","exports","module"],(function(acequire,exports,module){"use strict";exports.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"};exports.getOS=function(){if(exports.isMac){return exports.OS.MAC}else if(exports.isLinux){return exports.OS.LINUX}else{return exports.OS.WINDOWS}};if(typeof navigator!="object")return;var os=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase();var ua=navigator.userAgent;exports.isWin=os=="win";exports.isMac=os=="mac";exports.isLinux=os=="linux";exports.isIE=navigator.appName=="Microsoft Internet Explorer"||navigator.appName.indexOf("MSAppHost")>=0?parseFloat((ua.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((ua.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]);exports.isOldIE=exports.isIE&&exports.isIE<9;exports.isGecko=exports.isMozilla=(window.Controllers||window.controllers)&&window.navigator.product==="Gecko";exports.isOldGecko=exports.isGecko&&parseInt((ua.match(/rv:(\d+)/)||[])[1],10)<4;exports.isOpera=window.opera&&Object.prototype.toString.call(window.opera)=="[object Opera]";exports.isWebKit=parseFloat(ua.split("WebKit/")[1])||undefined;exports.isChrome=parseFloat(ua.split(" Chrome/")[1])||undefined;exports.isAIR=ua.indexOf("AdobeAIR")>=0;exports.isIPad=ua.indexOf("iPad")>=0;exports.isChromeOS=ua.indexOf(" CrOS ")>=0;exports.isIOS=/iPad|iPhone|iPod/.test(ua)&&!window.MSStream;if(exports.isIOS)exports.isMac=true}));ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(acequire,exports,module){"use strict";var keys=acequire("./keys");var useragent=acequire("./useragent");var pressedKeys=null;var ts=0;exports.addListener=function(elem,type,callback){if(elem.addEventListener){return elem.addEventListener(type,callback,false)}if(elem.attachEvent){var wrapper=function(){callback.call(elem,window.event)};callback._wrapper=wrapper;elem.attachEvent("on"+type,wrapper)}};exports.removeListener=function(elem,type,callback){if(elem.removeEventListener){return elem.removeEventListener(type,callback,false)}if(elem.detachEvent){elem.detachEvent("on"+type,callback._wrapper||callback)}};exports.stopEvent=function(e){exports.stopPropagation(e);exports.preventDefault(e);return false};exports.stopPropagation=function(e){if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true};exports.preventDefault=function(e){if(e.preventDefault)e.preventDefault();else e.returnValue=false};exports.getButton=function(e){if(e.type=="dblclick")return 0;if(e.type=="contextmenu"||useragent.isMac&&(e.ctrlKey&&!e.altKey&&!e.shiftKey))return 2;if(e.preventDefault){return e.button}else{return{1:0,2:2,4:1}[e.button]}};exports.capture=function(el,eventHandler,releaseCaptureHandler){function onMouseUp(e){eventHandler&&eventHandler(e);releaseCaptureHandler&&releaseCaptureHandler(e);exports.removeListener(document,"mousemove",eventHandler,true);exports.removeListener(document,"mouseup",onMouseUp,true);exports.removeListener(document,"dragstart",onMouseUp,true)}exports.addListener(document,"mousemove",eventHandler,true);exports.addListener(document,"mouseup",onMouseUp,true);exports.addListener(document,"dragstart",onMouseUp,true);return onMouseUp};exports.addTouchMoveListener=function(el,callback){var startx,starty;exports.addListener(el,"touchstart",(function(e){var touches=e.touches;var touchObj=touches[0];startx=touchObj.clientX;starty=touchObj.clientY}));exports.addListener(el,"touchmove",(function(e){var touches=e.touches;if(touches.length>1)return;var touchObj=touches[0];e.wheelX=startx-touchObj.clientX;e.wheelY=starty-touchObj.clientY;startx=touchObj.clientX;starty=touchObj.clientY;callback(e)}))};exports.addMouseWheelListener=function(el,callback){if("onmousewheel"in el){exports.addListener(el,"mousewheel",(function(e){var factor=8;if(e.wheelDeltaX!==undefined){e.wheelX=-e.wheelDeltaX/factor;e.wheelY=-e.wheelDeltaY/factor}else{e.wheelX=0;e.wheelY=-e.wheelDelta/factor}callback(e)}))}else if("onwheel"in el){exports.addListener(el,"wheel",(function(e){var factor=.35;switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=e.deltaX*factor||0;e.wheelY=e.deltaY*factor||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=(e.deltaX||0)*5;e.wheelY=(e.deltaY||0)*5;break}callback(e)}))}else{exports.addListener(el,"DOMMouseScroll",(function(e){if(e.axis&&e.axis==e.HORIZONTAL_AXIS){e.wheelX=(e.detail||0)*5;e.wheelY=0}else{e.wheelX=0;e.wheelY=(e.detail||0)*5}callback(e)}))}};exports.addMultiMouseDownListener=function(elements,timeouts,eventHandler,callbackName){var clicks=0;var startX,startY,timer;var eventNames={2:"dblclick",3:"tripleclick",4:"quadclick"};function onMousedown(e){if(exports.getButton(e)!==0){clicks=0}else if(e.detail>1){clicks++;if(clicks>4)clicks=1}else{clicks=1}if(useragent.isIE){var isNewClick=Math.abs(e.clientX-startX)>5||Math.abs(e.clientY-startY)>5;if(!timer||isNewClick)clicks=1;if(timer)clearTimeout(timer);timer=setTimeout((function(){timer=null}),timeouts[clicks-1]||600);if(clicks==1){startX=e.clientX;startY=e.clientY}}e._clicks=clicks;eventHandler[callbackName]("mousedown",e);if(clicks>4)clicks=0;else if(clicks>1)return eventHandler[callbackName](eventNames[clicks],e)}function onDblclick(e){clicks=2;if(timer)clearTimeout(timer);timer=setTimeout((function(){timer=null}),timeouts[clicks-1]||600);eventHandler[callbackName]("mousedown",e);eventHandler[callbackName](eventNames[clicks],e)}if(!Array.isArray(elements))elements=[elements];elements.forEach((function(el){exports.addListener(el,"mousedown",onMousedown);if(useragent.isOldIE)exports.addListener(el,"dblclick",onDblclick)}))};var getModifierHash=useragent.isMac&&useragent.isOpera&&!("KeyboardEvent"in window)?function(e){return 0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)}:function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)};exports.getModifierString=function(e){return keys.KEY_MODS[getModifierHash(e)]};function normalizeCommandKeys(callback,e,keyCode){var hashId=getModifierHash(e);if(!useragent.isMac&&pressedKeys){if(e.getModifierState&&(e.getModifierState("OS")||e.getModifierState("Win")))hashId|=8;if(pressedKeys.altGr){if((3&hashId)!=3)pressedKeys.altGr=0;else return}if(keyCode===18||keyCode===17){var location="location"in e?e.location:e.keyLocation;if(keyCode===17&&location===1){if(pressedKeys[keyCode]==1)ts=e.timeStamp}else if(keyCode===18&&hashId===3&&location===2){var dt=e.timeStamp-ts;if(dt<50)pressedKeys.altGr=true}}}if(keyCode in keys.MODIFIER_KEYS){keyCode=-1}if(hashId&8&&(keyCode>=91&&keyCode<=93)){keyCode=-1}if(!hashId&&keyCode===13){var location="location"in e?e.location:e.keyLocation;if(location===3){callback(e,hashId,-keyCode);if(e.defaultPrevented)return}}if(useragent.isChromeOS&&hashId&8){callback(e,hashId,keyCode);if(e.defaultPrevented)return;else hashId&=~8}if(!hashId&&!(keyCode in keys.FUNCTION_KEYS)&&!(keyCode in keys.PRINTABLE_KEYS)){return false}return callback(e,hashId,keyCode)}exports.addCommandKeyListener=function(el,callback){var addListener=exports.addListener;if(useragent.isOldGecko||useragent.isOpera&&!("KeyboardEvent"in window)){var lastKeyDownKeyCode=null;addListener(el,"keydown",(function(e){lastKeyDownKeyCode=e.keyCode}));addListener(el,"keypress",(function(e){return normalizeCommandKeys(callback,e,lastKeyDownKeyCode)}))}else{var lastDefaultPrevented=null;addListener(el,"keydown",(function(e){pressedKeys[e.keyCode]=(pressedKeys[e.keyCode]||0)+1;var result=normalizeCommandKeys(callback,e,e.keyCode);lastDefaultPrevented=e.defaultPrevented;return result}));addListener(el,"keypress",(function(e){if(lastDefaultPrevented&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)){exports.stopEvent(e);lastDefaultPrevented=null}}));addListener(el,"keyup",(function(e){pressedKeys[e.keyCode]=null}));if(!pressedKeys){resetPressedKeys();addListener(window,"focus",resetPressedKeys)}}};function resetPressedKeys(){pressedKeys=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!useragent.isOldIE){var postMessageId=1;exports.nextTick=function(callback,win){win=win||window;var messageName="zero-timeout-message-"+postMessageId;exports.addListener(win,"message",(function listener(e){if(e.data==messageName){exports.stopPropagation(e);exports.removeListener(win,"message",listener);callback()}}));win.postMessage(messageName,"*")}}exports.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame);if(exports.nextFrame)exports.nextFrame=exports.nextFrame.bind(window);else exports.nextFrame=function(callback){setTimeout(callback,17)}}));ace.define("ace/lib/lang",["require","exports","module"],(function(acequire,exports,module){"use strict";exports.last=function(a){return a[a.length-1]};exports.stringReverse=function(string){return string.split("").reverse().join("")};exports.stringRepeat=function(string,count){var result="";while(count>0){if(count&1)result+=string;if(count>>=1)string+=string}return result};var trimBeginRegexp=/^\s\s*/;var trimEndRegexp=/\s\s*$/;exports.stringTrimLeft=function(string){return string.replace(trimBeginRegexp,"")};exports.stringTrimRight=function(string){return string.replace(trimEndRegexp,"")};exports.copyObject=function(obj){var copy={};for(var key in obj){copy[key]=obj[key]}return copy};exports.copyArray=function(array){var copy=[];for(var i=0,l=array.length;i<l;i++){if(array[i]&&typeof array[i]=="object")copy[i]=this.copyObject(array[i]);else copy[i]=array[i]}return copy};exports.deepCopy=function deepCopy(obj){if(typeof obj!=="object"||!obj)return obj;var copy;if(Array.isArray(obj)){copy=[];for(var key=0;key<obj.length;key++){copy[key]=deepCopy(obj[key])}return copy}if(Object.prototype.toString.call(obj)!=="[object Object]")return obj;copy={};for(var key in obj)copy[key]=deepCopy(obj[key]);return copy};exports.arrayToMap=function(arr){var map={};for(var i=0;i<arr.length;i++){map[arr[i]]=1}return map};exports.createMap=function(props){var map=Object.create(null);for(var i in props){map[i]=props[i]}return map};exports.arrayRemove=function(array,value){for(var i=0;i<=array.length;i++){if(value===array[i]){array.splice(i,1)}}};exports.escapeRegExp=function(str){return str.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")};exports.escapeHTML=function(str){return str.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")};exports.getMatchOffsets=function(string,regExp){var matches=[];string.replace(regExp,(function(str){matches.push({offset:arguments[arguments.length-2],length:str.length})}));return matches};exports.deferredCall=function(fcn){var timer=null;var callback=function(){timer=null;fcn()};var deferred=function(timeout){deferred.cancel();timer=setTimeout(callback,timeout||0);return deferred};deferred.schedule=deferred;deferred.call=function(){this.cancel();fcn();return deferred};deferred.cancel=function(){clearTimeout(timer);timer=null;return deferred};deferred.isPending=function(){return timer};return deferred};exports.delayedCall=function(fcn,defaultTimeout){var timer=null;var callback=function(){timer=null;fcn()};var _self=function(timeout){if(timer==null)timer=setTimeout(callback,timeout||defaultTimeout)};_self.delay=function(timeout){timer&&clearTimeout(timer);timer=setTimeout(callback,timeout||defaultTimeout)};_self.schedule=_self;_self.call=function(){this.cancel();fcn()};_self.cancel=function(){timer&&clearTimeout(timer);timer=null};_self.isPending=function(){return timer};return _self}}));ace.define("ace/keyboard/textinput_ios",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/lib/keys"],(function(acequire,exports,module){"use strict";var event=acequire("../lib/event");var useragent=acequire("../lib/useragent");var dom=acequire("../lib/dom");var lang=acequire("../lib/lang");var KEYS=acequire("../lib/keys");var MODS=KEYS.KEY_MODS;var BROKEN_SETDATA=useragent.isChrome<18;var USE_IE_MIME_TYPE=useragent.isIE;var TextInput=function(parentNode,host){var self=this;var text=dom.createElement("textarea");text.className=useragent.isIOS?"ace_text-input ace_text-input-ios":"ace_text-input";if(useragent.isTouchPad)text.setAttribute("x-palm-disable-auto-cap",true);text.setAttribute("wrap","off");text.setAttribute("autocorrect","off");text.setAttribute("autocapitalize","off");text.setAttribute("spellcheck",false);text.style.opacity="0";parentNode.insertBefore(text,parentNode.firstChild);var PLACEHOLDER="\n aaaa a\n";var copied=false;var cut=false;var pasted=false;var inComposition=false;var tempStyle="";var isSelectionEmpty=true;try{var isFocused=document.activeElement===text}catch(e){}event.addListener(text,"blur",(function(e){host.onBlur(e);isFocused=false}));event.addListener(text,"focus",(function(e){isFocused=true;host.onFocus(e);resetSelection()}));this.focus=function(){if(tempStyle)return text.focus();text.style.position="fixed";text.focus()};this.blur=function(){text.blur()};this.isFocused=function(){return isFocused};var syncSelection=lang.delayedCall((function(){isFocused&&resetSelection(isSelectionEmpty)}));var syncValue=lang.delayedCall((function(){if(!inComposition){text.value=PLACEHOLDER;isFocused&&resetSelection()}}));function resetSelection(isEmpty){if(inComposition)return;inComposition=true;if(inputHandler){selectionStart=0;selectionEnd=isEmpty?0:text.value.length-1}else{var selectionStart=4;var selectionEnd=5}try{text.setSelectionRange(selectionStart,selectionEnd)}catch(e){}inComposition=false}function resetValue(){if(inComposition)return;text.value=PLACEHOLDER;if(useragent.isWebKit)syncValue.schedule()}useragent.isWebKit||host.addEventListener("changeSelection",(function(){if(host.selection.isEmpty()!=isSelectionEmpty){isSelectionEmpty=!isSelectionEmpty;syncSelection.schedule()}}));resetValue();if(isFocused)host.onFocus();var isAllSelected=function(text){return text.selectionStart===0&&text.selectionEnd===text.value.length};var onSelect=function(e){if(isAllSelected(text)){host.selectAll();resetSelection()}else if(inputHandler){resetSelection(host.selection.isEmpty())}};var inputHandler=null;this.setInputHandler=function(cb){inputHandler=cb};this.getInputHandler=function(){return inputHandler};var afterContextMenu=false;var sendText=function(data){if(text.selectionStart===4&&text.selectionEnd===5){return}if(inputHandler){data=inputHandler(data);inputHandler=null}if(pasted){resetSelection();if(data)host.onPaste(data);pasted=false}else if(data==PLACEHOLDER.substr(0)&&text.selectionStart===4){if(afterContextMenu)host.execCommand("del",{source:"ace"});else host.execCommand("backspace",{source:"ace"})}else if(!copied){if(data.substring(0,9)==PLACEHOLDER&&data.length>PLACEHOLDER.length)data=data.substr(9);else if(data.substr(0,4)==PLACEHOLDER.substr(0,4))data=data.substr(4,data.length-PLACEHOLDER.length+1);else if(data.charAt(data.length-1)==PLACEHOLDER.charAt(0))data=data.slice(0,-1);if(data==PLACEHOLDER.charAt(0)){}else if(data.charAt(data.length-1)==PLACEHOLDER.charAt(0))data=data.slice(0,-1);if(data)host.onTextInput(data)}if(copied){copied=false}if(afterContextMenu)afterContextMenu=false};var onInput=function(e){if(inComposition)return;var data=text.value;sendText(data);resetValue()};var handleClipboardData=function(e,data,forceIEMime){var clipboardData=e.clipboardData||window.clipboardData;if(!clipboardData||BROKEN_SETDATA)return;var mime=USE_IE_MIME_TYPE||forceIEMime?"Text":"text/plain";try{if(data){return clipboardData.setData(mime,data)!==false}else{return clipboardData.getData(mime)}}catch(e){if(!forceIEMime)return handleClipboardData(e,data,true)}};var doCopy=function(e,isCut){var data=host.getCopyText();if(!data)return event.preventDefault(e);if(handleClipboardData(e,data)){if(useragent.isIOS){cut=isCut;text.value="\n aa"+data+"a a\n";text.setSelectionRange(4,4+data.length);copied={value:data}}isCut?host.onCut():host.onCopy();if(!useragent.isIOS)event.preventDefault(e)}else{copied=true;text.value=data;text.select();setTimeout((function(){copied=false;resetValue();resetSelection();isCut?host.onCut():host.onCopy()}))}};var onCut=function(e){doCopy(e,true)};var onCopy=function(e){doCopy(e,false)};var onPaste=function(e){var data=handleClipboardData(e);if(typeof data=="string"){if(data)host.onPaste(data,e);if(useragent.isIE)setTimeout(resetSelection);event.preventDefault(e)}else{text.value="";pasted=true}};event.addCommandKeyListener(text,host.onCommandKey.bind(host));event.addListener(text,"select",onSelect);event.addListener(text,"input",onInput);event.addListener(text,"cut",onCut);event.addListener(text,"copy",onCopy);event.addListener(text,"paste",onPaste);var onCompositionStart=function(e){if(inComposition||!host.onCompositionStart||host.$readOnly)return;inComposition={};inComposition.canUndo=host.session.$undoManager;host.onCompositionStart();setTimeout(onCompositionUpdate,0);host.on("mousedown",onCompositionEnd);if(inComposition.canUndo&&!host.selection.isEmpty()){host.insert("");host.session.markUndoGroup();host.selection.clearSelection()}host.session.markUndoGroup()};var onCompositionUpdate=function(){if(!inComposition||!host.onCompositionUpdate||host.$readOnly)return;var val=text.value.replace(/\x01/g,"");if(inComposition.lastValue===val)return;host.onCompositionUpdate(val);if(inComposition.lastValue)host.undo();if(inComposition.canUndo)inComposition.lastValue=val;if(inComposition.lastValue){var r=host.selection.getRange();host.insert(inComposition.lastValue);host.session.markUndoGroup();inComposition.range=host.selection.getRange();host.selection.setRange(r);host.selection.clearSelection()}};var onCompositionEnd=function(e){if(!host.onCompositionEnd||host.$readOnly)return;var c=inComposition;inComposition=false;var timer=setTimeout((function(){timer=null;var str=text.value.replace(/\x01/g,"");if(inComposition)return;else if(str==c.lastValue)resetValue();else if(!c.lastValue&&str){resetValue();sendText(str)}}));inputHandler=function compositionInputHandler(str){if(timer)clearTimeout(timer);str=str.replace(/\x01/g,"");if(str==c.lastValue)return"";if(c.lastValue&&timer)host.undo();return str};host.onCompositionEnd();host.removeListener("mousedown",onCompositionEnd);if(e.type=="compositionend"&&c.range){host.selection.setRange(c.range)}var needsOnInput=!!useragent.isChrome&&useragent.isChrome>=53||!!useragent.isWebKit&&useragent.isWebKit>=603;if(needsOnInput){onInput()}};var syncComposition=lang.delayedCall(onCompositionUpdate,50);event.addListener(text,"compositionstart",onCompositionStart);if(useragent.isGecko){event.addListener(text,"text",(function(){syncComposition.schedule()}))}else{event.addListener(text,"keyup",(function(){syncComposition.schedule()}));event.addListener(text,"keydown",(function(){syncComposition.schedule()}))}event.addListener(text,"compositionend",onCompositionEnd);this.getElement=function(){return text};this.setReadOnly=function(readOnly){text.readOnly=readOnly};this.onContextMenu=function(e){afterContextMenu=true;resetSelection(host.selection.isEmpty());host._emit("nativecontextmenu",{target:host,domEvent:e});this.moveToMouse(e,true)};this.moveToMouse=function(e,bringToFront){if(!tempStyle)tempStyle=text.style.cssText;text.style.cssText=(bringToFront?"z-index:100000;":"")+"height:"+text.style.height+";"+(useragent.isIE?"opacity:0.1;":"");var rect=host.container.getBoundingClientRect();var style=dom.computedStyle(host.container);var top=rect.top+(parseInt(style.borderTopWidth)||0);var left=rect.left+(parseInt(rect.borderLeftWidth)||0);var maxTop=rect.bottom-top-text.clientHeight-2;var move=function(e){text.style.left=e.clientX-left-2+"px";text.style.top=Math.min(e.clientY-top-2,maxTop)+"px"};move(e);if(e.type!="mousedown")return;if(host.renderer.$keepTextAreaAtCursor)host.renderer.$keepTextAreaAtCursor=null;clearTimeout(closeTimeout);if(useragent.isWin)event.capture(host.container,move,onContextMenuClose)};this.onContextMenuClose=onContextMenuClose;var closeTimeout;function onContextMenuClose(){clearTimeout(closeTimeout);closeTimeout=setTimeout((function(){if(tempStyle){text.style.cssText=tempStyle;tempStyle=""}if(host.renderer.$keepTextAreaAtCursor==null){host.renderer.$keepTextAreaAtCursor=true;host.renderer.$moveTextAreaToCursor()}}),0)}var onContextMenu=function(e){host.textInput.onContextMenu(e);onContextMenuClose()};event.addListener(text,"mouseup",onContextMenu);event.addListener(text,"mousedown",(function(e){e.preventDefault();onContextMenuClose()}));event.addListener(host.renderer.scroller,"contextmenu",onContextMenu);event.addListener(text,"contextmenu",onContextMenu);if(useragent.isIOS){var typingResetTimeout=null;var typing=false;parentNode.addEventListener("keydown",(function(e){if(typingResetTimeout)clearTimeout(typingResetTimeout);typing=true}));parentNode.addEventListener("keyup",(function(e){typingResetTimeout=setTimeout((function(){typing=false}),100)}));var detectArrowKeys=function(e){if(document.activeElement!==text)return;if(typing)return;if(cut){return setTimeout((function(){cut=false}),100)}var selectionStart=text.selectionStart;var selectionEnd=text.selectionEnd;text.setSelectionRange(4,5);if(selectionStart==selectionEnd){switch(selectionStart){case 0:host.onCommandKey(null,0,KEYS.up);break;case 1:host.onCommandKey(null,0,KEYS.home);break;case 2:host.onCommandKey(null,MODS.option,KEYS.left);break;case 4:host.onCommandKey(null,0,KEYS.left);break;case 5:host.onCommandKey(null,0,KEYS.right);break;case 7:host.onCommandKey(null,MODS.option,KEYS.right);break;case 8:host.onCommandKey(null,0,KEYS.end);break;case 9:host.onCommandKey(null,0,KEYS.down);break}}else{switch(selectionEnd){case 6:host.onCommandKey(null,MODS.shift,KEYS.right);break;case 7:host.onCommandKey(null,MODS.shift|MODS.option,KEYS.right);break;case 8:host.onCommandKey(null,MODS.shift,KEYS.end);break;case 9:host.onCommandKey(null,MODS.shift,KEYS.down);break}switch(selectionStart){case 0:host.onCommandKey(null,MODS.shift,KEYS.up);break;case 1:host.onCommandKey(null,MODS.shift,KEYS.home);break;case 2:host.onCommandKey(null,MODS.shift|MODS.option,KEYS.left);break;case 3:host.onCommandKey(null,MODS.shift,KEYS.left);break}}};document.addEventListener("selectionchange",detectArrowKeys);host.on("destroy",(function(){document.removeEventListener("selectionchange",detectArrowKeys)}))}};exports.TextInput=TextInput}));ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/keyboard/textinput_ios"],(function(acequire,exports,module){"use strict";var event=acequire("../lib/event");var useragent=acequire("../lib/useragent");var dom=acequire("../lib/dom");var lang=acequire("../lib/lang");var BROKEN_SETDATA=useragent.isChrome<18;var USE_IE_MIME_TYPE=useragent.isIE;var TextInputIOS=acequire("./textinput_ios").TextInput;var TextInput=function(parentNode,host){if(useragent.isIOS)return TextInputIOS.call(this,parentNode,host);var text=dom.createElement("textarea");text.className="ace_text-input";text.setAttribute("wrap","off");text.setAttribute("autocorrect","off");text.setAttribute("autocapitalize","off");text.setAttribute("spellcheck",false);text.style.opacity="0";parentNode.insertBefore(text,parentNode.firstChild);var PLACEHOLDER="\u2028\u2028";var copied=false;var pasted=false;var inComposition=false;var tempStyle="";var isSelectionEmpty=true;try{var isFocused=document.activeElement===text}catch(e){}event.addListener(text,"blur",(function(e){host.onBlur(e);isFocused=false}));event.addListener(text,"focus",(function(e){isFocused=true;host.onFocus(e);resetSelection()}));this.focus=function(){if(tempStyle)return text.focus();var top=text.style.top;text.style.position="fixed";text.style.top="0px";text.focus();setTimeout((function(){text.style.position="";if(text.style.top=="0px")text.style.top=top}),0)};this.blur=function(){text.blur()};this.isFocused=function(){return isFocused};var syncSelection=lang.delayedCall((function(){isFocused&&resetSelection(isSelectionEmpty)}));var syncValue=lang.delayedCall((function(){if(!inComposition){text.value=PLACEHOLDER;isFocused&&resetSelection()}}));function resetSelection(isEmpty){if(inComposition)return;inComposition=true;if(inputHandler){var selectionStart=0;var selectionEnd=isEmpty?0:text.value.length-1}else{var selectionStart=isEmpty?2:1;var selectionEnd=2}try{text.setSelectionRange(selectionStart,selectionEnd)}catch(e){}inComposition=false}function resetValue(){if(inComposition)return;text.value=PLACEHOLDER;if(useragent.isWebKit)syncValue.schedule()}useragent.isWebKit||host.addEventListener("changeSelection",(function(){if(host.selection.isEmpty()!=isSelectionEmpty){isSelectionEmpty=!isSelectionEmpty;syncSelection.schedule()}}));resetValue();if(isFocused)host.onFocus();var isAllSelected=function(text){return text.selectionStart===0&&text.selectionEnd===text.value.length};var onSelect=function(e){if(copied){copied=false}else if(isAllSelected(text)){host.selectAll();resetSelection()}else if(inputHandler){resetSelection(host.selection.isEmpty())}};var inputHandler=null;this.setInputHandler=function(cb){inputHandler=cb};this.getInputHandler=function(){return inputHandler};var afterContextMenu=false;var sendText=function(data){if(inputHandler){data=inputHandler(data);inputHandler=null}if(pasted){resetSelection();if(data)host.onPaste(data);pasted=false}else if(data==PLACEHOLDER.charAt(0)){if(afterContextMenu)host.execCommand("del",{source:"ace"});else host.execCommand("backspace",{source:"ace"})}else{if(data.substring(0,2)==PLACEHOLDER)data=data.substr(2);else if(data.charAt(0)==PLACEHOLDER.charAt(0))data=data.substr(1);else if(data.charAt(data.length-1)==PLACEHOLDER.charAt(0))data=data.slice(0,-1);if(data.charAt(data.length-1)==PLACEHOLDER.charAt(0))data=data.slice(0,-1);if(data)host.onTextInput(data)}if(afterContextMenu)afterContextMenu=false};var onInput=function(e){if(inComposition)return;var data=text.value;sendText(data);resetValue()};var handleClipboardData=function(e,data,forceIEMime){var clipboardData=e.clipboardData||window.clipboardData;if(!clipboardData||BROKEN_SETDATA)return;var mime=USE_IE_MIME_TYPE||forceIEMime?"Text":"text/plain";try{if(data){return clipboardData.setData(mime,data)!==false}else{return clipboardData.getData(mime)}}catch(e){if(!forceIEMime)return handleClipboardData(e,data,true)}};var doCopy=function(e,isCut){var data=host.getCopyText();if(!data)return event.preventDefault(e);if(handleClipboardData(e,data)){isCut?host.onCut():host.onCopy();event.preventDefault(e)}else{copied=true;text.value=data;text.select();setTimeout((function(){copied=false;resetValue();resetSelection();isCut?host.onCut():host.onCopy()}))}};var onCut=function(e){doCopy(e,true)};var onCopy=function(e){doCopy(e,false)};var onPaste=function(e){var data=handleClipboardData(e);if(typeof data=="string"){if(data)host.onPaste(data,e);if(useragent.isIE)setTimeout(resetSelection);event.preventDefault(e)}else{text.value="";pasted=true}};event.addCommandKeyListener(text,host.onCommandKey.bind(host));event.addListener(text,"select",onSelect);event.addListener(text,"input",onInput);event.addListener(text,"cut",onCut);event.addListener(text,"copy",onCopy);event.addListener(text,"paste",onPaste);if(!("oncut"in text)||!("oncopy"in text)||!("onpaste"in text)){event.addListener(parentNode,"keydown",(function(e){if(useragent.isMac&&!e.metaKey||!e.ctrlKey)return;switch(e.keyCode){case 67:onCopy(e);break;case 86:onPaste(e);break;case 88:onCut(e);break}}))}var onCompositionStart=function(e){if(inComposition||!host.onCompositionStart||host.$readOnly)return;inComposition={};inComposition.canUndo=host.session.$undoManager;host.onCompositionStart();setTimeout(onCompositionUpdate,0);host.on("mousedown",onCompositionEnd);if(inComposition.canUndo&&!host.selection.isEmpty()){host.insert("");host.session.markUndoGroup();host.selection.clearSelection()}host.session.markUndoGroup()};var onCompositionUpdate=function(){if(!inComposition||!host.onCompositionUpdate||host.$readOnly)return;var val=text.value.replace(/\u2028/g,"");if(inComposition.lastValue===val)return;host.onCompositionUpdate(val);if(inComposition.lastValue)host.undo();if(inComposition.canUndo)inComposition.lastValue=val;if(inComposition.lastValue){var r=host.selection.getRange();host.insert(inComposition.lastValue);host.session.markUndoGroup();inComposition.range=host.selection.getRange();host.selection.setRange(r);host.selection.clearSelection()}};var onCompositionEnd=function(e){if(!host.onCompositionEnd||host.$readOnly)return;var c=inComposition;inComposition=false;var timer=setTimeout((function(){timer=null;var str=text.value.replace(/\u2028/g,"");if(inComposition)return;else if(str==c.lastValue)resetValue();else if(!c.lastValue&&str){resetValue();sendText(str)}}));inputHandler=function compositionInputHandler(str){if(timer)clearTimeout(timer);str=str.replace(/\u2028/g,"");if(str==c.lastValue)return"";if(c.lastValue&&timer)host.undo();return str};host.onCompositionEnd();host.removeListener("mousedown",onCompositionEnd);if(e.type=="compositionend"&&c.range){host.selection.setRange(c.range)}var needsOnInput=!!useragent.isChrome&&useragent.isChrome>=53||!!useragent.isWebKit&&useragent.isWebKit>=603;if(needsOnInput){onInput()}};var syncComposition=lang.delayedCall(onCompositionUpdate,50);event.addListener(text,"compositionstart",onCompositionStart);if(useragent.isGecko){event.addListener(text,"text",(function(){syncComposition.schedule()}))}else{event.addListener(text,"keyup",(function(){syncComposition.schedule()}));event.addListener(text,"keydown",(function(){syncComposition.schedule()}))}event.addListener(text,"compositionend",onCompositionEnd);this.getElement=function(){return text};this.setReadOnly=function(readOnly){text.readOnly=readOnly};this.onContextMenu=function(e){afterContextMenu=true;resetSelection(host.selection.isEmpty());host._emit("nativecontextmenu",{target:host,domEvent:e});this.moveToMouse(e,true)};this.moveToMouse=function(e,bringToFront){if(!tempStyle)tempStyle=text.style.cssText;text.style.cssText=(bringToFront?"z-index:100000;":"")+"height:"+text.style.height+";"+(useragent.isIE?"opacity:0.1;":"");var rect=host.container.getBoundingClientRect();var style=dom.computedStyle(host.container);var top=rect.top+(parseInt(style.borderTopWidth)||0);var left=rect.left+(parseInt(rect.borderLeftWidth)||0);var maxTop=rect.bottom-top-text.clientHeight-2;var move=function(e){text.style.left=e.clientX-left-2+"px";text.style.top=Math.min(e.clientY-top-2,maxTop)+"px"};move(e);if(e.type!="mousedown")return;if(host.renderer.$keepTextAreaAtCursor)host.renderer.$keepTextAreaAtCursor=null;clearTimeout(closeTimeout);if(useragent.isWin)event.capture(host.container,move,onContextMenuClose)};this.onContextMenuClose=onContextMenuClose;var closeTimeout;function onContextMenuClose(){clearTimeout(closeTimeout);closeTimeout=setTimeout((function(){if(tempStyle){text.style.cssText=tempStyle;tempStyle=""}if(host.renderer.$keepTextAreaAtCursor==null){host.renderer.$keepTextAreaAtCursor=true;host.renderer.$moveTextAreaToCursor()}}),0)}var onContextMenu=function(e){host.textInput.onContextMenu(e);onContextMenuClose()};event.addListener(text,"mouseup",onContextMenu);event.addListener(text,"mousedown",(function(e){e.preventDefault();onContextMenuClose()}));event.addListener(host.renderer.scroller,"contextmenu",onContextMenu);event.addListener(text,"contextmenu",onContextMenu)};exports.TextInput=TextInput}));ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],(function(acequire,exports,module){"use strict";var dom=acequire("../lib/dom");var event=acequire("../lib/event");var useragent=acequire("../lib/useragent");var DRAG_OFFSET=0;var SCROLL_COOLDOWN_T=250;function DefaultHandlers(mouseHandler){mouseHandler.$clickSelection=null;var editor=mouseHandler.editor;editor.setDefaultHandler("mousedown",this.onMouseDown.bind(mouseHandler));editor.setDefaultHandler("dblclick",this.onDoubleClick.bind(mouseHandler));editor.setDefaultHandler("tripleclick",this.onTripleClick.bind(mouseHandler));editor.setDefaultHandler("quadclick",this.onQuadClick.bind(mouseHandler));editor.setDefaultHandler("mousewheel",this.onMouseWheel.bind(mouseHandler));editor.setDefaultHandler("touchmove",this.onTouchMove.bind(mouseHandler));var exports=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];exports.forEach((function(x){mouseHandler[x]=this[x]}),this);mouseHandler.selectByLines=this.extendSelectionBy.bind(mouseHandler,"getLineRange");mouseHandler.selectByWords=this.extendSelectionBy.bind(mouseHandler,"getWordRange")}(function(){this.onMouseDown=function(ev){var inSelection=ev.inSelection();var pos=ev.getDocumentPosition();this.mousedownEvent=ev;var editor=this.editor;var button=ev.getButton();if(button!==0){var selectionRange=editor.getSelectionRange();var selectionEmpty=selectionRange.isEmpty();editor.$blockScrolling++;if(selectionEmpty||button==1)editor.selection.moveToPosition(pos);editor.$blockScrolling--;if(button==2){editor.textInput.onContextMenu(ev.domEvent);if(!useragent.isMozilla)ev.preventDefault()}return}this.mousedownEvent.time=Date.now();if(inSelection&&!editor.isFocused()){editor.focus();if(this.$focusTimout&&!this.$clickSelection&&!editor.inMultiSelectMode){this.setState("focusWait");this.captureMouse(ev);return}}this.captureMouse(ev);this.startSelect(pos,ev.domEvent._clicks>1);return ev.preventDefault()};this.startSelect=function(pos,waitForClickSelection){pos=pos||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var editor=this.editor;editor.$blockScrolling++;if(this.mousedownEvent.getShiftKey())editor.selection.selectToPosition(pos);else if(!waitForClickSelection)editor.selection.moveToPosition(pos);if(!waitForClickSelection)this.select();if(editor.renderer.scroller.setCapture){editor.renderer.scroller.setCapture()}editor.setStyle("ace_selecting");this.setState("select");editor.$blockScrolling--};this.select=function(){var anchor,editor=this.editor;var cursor=editor.renderer.screenToTextCoordinates(this.x,this.y);editor.$blockScrolling++;if(this.$clickSelection){var cmp=this.$clickSelection.comparePoint(cursor);if(cmp==-1){anchor=this.$clickSelection.end}else if(cmp==1){anchor=this.$clickSelection.start}else{var orientedRange=calcRangeOrientation(this.$clickSelection,cursor);cursor=orientedRange.cursor;anchor=orientedRange.anchor}editor.selection.setSelectionAnchor(anchor.row,anchor.column)}editor.selection.selectToPosition(cursor);editor.$blockScrolling--;editor.renderer.scrollCursorIntoView()};this.extendSelectionBy=function(unitName){var anchor,editor=this.editor;var cursor=editor.renderer.screenToTextCoordinates(this.x,this.y);var range=editor.selection[unitName](cursor.row,cursor.column);editor.$blockScrolling++;if(this.$clickSelection){var cmpStart=this.$clickSelection.comparePoint(range.start);var cmpEnd=this.$clickSelection.comparePoint(range.end);if(cmpStart==-1&&cmpEnd<=0){anchor=this.$clickSelection.end;if(range.end.row!=cursor.row||range.end.column!=cursor.column)cursor=range.start}else if(cmpEnd==1&&cmpStart>=0){anchor=this.$clickSelection.start;if(range.start.row!=cursor.row||range.start.column!=cursor.column)cursor=range.end}else if(cmpStart==-1&&cmpEnd==1){cursor=range.end;anchor=range.start}else{var orientedRange=calcRangeOrientation(this.$clickSelection,cursor);cursor=orientedRange.cursor;anchor=orientedRange.anchor}editor.selection.setSelectionAnchor(anchor.row,anchor.column)}editor.selection.selectToPosition(cursor);editor.$blockScrolling--;editor.renderer.scrollCursorIntoView()};this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null;this.editor.unsetStyle("ace_selecting");if(this.editor.renderer.scroller.releaseCapture){this.editor.renderer.scroller.releaseCapture()}};this.focusWait=function(){var distance=calcDistance(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);var time=Date.now();if(distance>DRAG_OFFSET||time-this.mousedownEvent.time>this.$focusTimout)this.startSelect(this.mousedownEvent.getDocumentPosition())};this.onDoubleClick=function(ev){var pos=ev.getDocumentPosition();var editor=this.editor;var session=editor.session;var range=session.getBracketRange(pos);if(range){if(range.isEmpty()){range.start.column--;range.end.column++}this.setState("select")}else{range=editor.selection.getWordRange(pos.row,pos.column);this.setState("selectByWords")}this.$clickSelection=range;this.select()};this.onTripleClick=function(ev){var pos=ev.getDocumentPosition();var editor=this.editor;this.setState("selectByLines");var range=editor.getSelectionRange();if(range.isMultiLine()&&range.contains(pos.row,pos.column)){this.$clickSelection=editor.selection.getLineRange(range.start.row);this.$clickSelection.end=editor.selection.getLineRange(range.end.row).end}else{this.$clickSelection=editor.selection.getLineRange(pos.row)}this.select()};this.onQuadClick=function(ev){var editor=this.editor;editor.selectAll();this.$clickSelection=editor.getSelectionRange();this.setState("selectAll")};this.onMouseWheel=function(ev){if(ev.getAccelKey())return;if(ev.getShiftKey()&&ev.wheelY&&!ev.wheelX){ev.wheelX=ev.wheelY;ev.wheelY=0}var editor=this.editor;if(!this.$lastScroll)this.$lastScroll={t:0,vx:0,vy:0,allowed:0};var prevScroll=this.$lastScroll;var t=ev.domEvent.timeStamp;var dt=t-prevScroll.t;var vx=ev.wheelX/dt;var vy=ev.wheelY/dt;if(dt<SCROLL_COOLDOWN_T){vx=(vx+prevScroll.vx)/2;vy=(vy+prevScroll.vy)/2}var direction=Math.abs(vx/vy);var canScroll=false;if(direction>=1&&editor.renderer.isScrollableBy(ev.wheelX*ev.speed,0))canScroll=true;if(direction<=1&&editor.renderer.isScrollableBy(0,ev.wheelY*ev.speed))canScroll=true;if(canScroll){prevScroll.allowed=t}else if(t-prevScroll.allowed<SCROLL_COOLDOWN_T){var isSlower=Math.abs(vx)<=1.1*Math.abs(prevScroll.vx)&&Math.abs(vy)<=1.1*Math.abs(prevScroll.vy);if(isSlower){canScroll=true;prevScroll.allowed=t}else{prevScroll.allowed=0}}prevScroll.t=t;prevScroll.vx=vx;prevScroll.vy=vy;if(canScroll){editor.renderer.scrollBy(ev.wheelX*ev.speed,ev.wheelY*ev.speed);return ev.stop()}};this.onTouchMove=function(ev){this.editor._emit("mousewheel",ev)}}).call(DefaultHandlers.prototype);exports.DefaultHandlers=DefaultHandlers;function calcDistance(ax,ay,bx,by){return Math.sqrt(Math.pow(bx-ax,2)+Math.pow(by-ay,2))}function calcRangeOrientation(range,cursor){if(range.start.row==range.end.row)var cmp=2*cursor.column-range.start.column-range.end.column;else if(range.start.row==range.end.row-1&&!range.start.column&&!range.end.column)var cmp=cursor.column-4;else var cmp=2*cursor.row-range.start.row-range.end.row;if(cmp<0)return{cursor:range.start,anchor:range.end};else return{cursor:range.end,anchor:range.start}}}));ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],(function(acequire,exports,module){"use strict";var oop=acequire("./lib/oop");var dom=acequire("./lib/dom");function Tooltip(parentNode){this.isOpen=false;this.$element=null;this.$parentNode=parentNode}(function(){this.$init=function(){this.$element=dom.createElement("div");this.$element.className="ace_tooltip";this.$element.style.display="none";this.$parentNode.appendChild(this.$element);return this.$element};this.getElement=function(){return this.$element||this.$init()};this.setText=function(text){dom.setInnerText(this.getElement(),text)};this.setHtml=function(html){this.getElement().innerHTML=html};this.setPosition=function(x,y){this.getElement().style.left=x+"px";this.getElement().style.top=y+"px"};this.setClassName=function(className){dom.addCssClass(this.getElement(),className)};this.show=function(text,x,y){if(text!=null)this.setText(text);if(x!=null&&y!=null)this.setPosition(x,y);if(!this.isOpen){this.getElement().style.display="block";this.isOpen=true}};this.hide=function(){if(this.isOpen){this.getElement().style.display="none";this.isOpen=false}};this.getHeight=function(){return this.getElement().offsetHeight};this.getWidth=function(){return this.getElement().offsetWidth};this.destroy=function(){this.isOpen=false;if(this.$element&&this.$element.parentNode){this.$element.parentNode.removeChild(this.$element)}}}).call(Tooltip.prototype);exports.Tooltip=Tooltip}));ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],(function(acequire,exports,module){"use strict";var dom=acequire("../lib/dom");var oop=acequire("../lib/oop");var event=acequire("../lib/event");var Tooltip=acequire("../tooltip").Tooltip;function GutterHandler(mouseHandler){var editor=mouseHandler.editor;var gutter=editor.renderer.$gutterLayer;var tooltip=new GutterTooltip(editor.container);mouseHandler.editor.setDefaultHandler("guttermousedown",(function(e){if(!editor.isFocused()||e.getButton()!=0)return;var gutterRegion=gutter.getRegion(e);if(gutterRegion=="foldWidgets")return;var row=e.getDocumentPosition().row;var selection=editor.session.selection;if(e.getShiftKey())selection.selectTo(row,0);else{if(e.domEvent.detail==2){editor.selectAll();return e.preventDefault()}mouseHandler.$clickSelection=editor.selection.getLineRange(row)}mouseHandler.setState("selectByLines");mouseHandler.captureMouse(e);return e.preventDefault()}));var tooltipTimeout,mouseEvent,tooltipAnnotation;function showTooltip(){var row=mouseEvent.getDocumentPosition().row;var annotation=gutter.$annotations[row];if(!annotation)return hideTooltip();var maxRow=editor.session.getLength();if(row==maxRow){var screenRow=editor.renderer.pixelToScreenCoordinates(0,mouseEvent.y).row;var pos=mouseEvent.$pos;if(screenRow>editor.session.documentToScreenRow(pos.row,pos.column))return hideTooltip()}if(tooltipAnnotation==annotation)return;tooltipAnnotation=annotation.text.join("<br/>");tooltip.setHtml(tooltipAnnotation);tooltip.show();editor._signal("showGutterTooltip",tooltip);editor.on("mousewheel",hideTooltip);if(mouseHandler.$tooltipFollowsMouse){moveTooltip(mouseEvent)}else{var gutterElement=mouseEvent.domEvent.target;var rect=gutterElement.getBoundingClientRect();var style=tooltip.getElement().style;style.left=rect.right+"px";style.top=rect.bottom+"px"}}function hideTooltip(){if(tooltipTimeout)tooltipTimeout=clearTimeout(tooltipTimeout);if(tooltipAnnotation){tooltip.hide();tooltipAnnotation=null;editor._signal("hideGutterTooltip",tooltip);editor.removeEventListener("mousewheel",hideTooltip)}}function moveTooltip(e){tooltip.setPosition(e.x,e.y)}mouseHandler.editor.setDefaultHandler("guttermousemove",(function(e){var target=e.domEvent.target||e.domEvent.srcElement;if(dom.hasCssClass(target,"ace_fold-widget"))return hideTooltip();if(tooltipAnnotation&&mouseHandler.$tooltipFollowsMouse)moveTooltip(e);mouseEvent=e;if(tooltipTimeout)return;tooltipTimeout=setTimeout((function(){tooltipTimeout=null;if(mouseEvent&&!mouseHandler.isMousePressed)showTooltip();else hideTooltip()}),50)}));event.addListener(editor.renderer.$gutter,"mouseout",(function(e){mouseEvent=null;if(!tooltipAnnotation||tooltipTimeout)return;tooltipTimeout=setTimeout((function(){tooltipTimeout=null;hideTooltip()}),50)}));editor.on("changeSession",hideTooltip)}function GutterTooltip(parentNode){Tooltip.call(this,parentNode)}oop.inherits(GutterTooltip,Tooltip);(function(){this.setPosition=function(x,y){var windowWidth=window.innerWidth||document.documentElement.clientWidth;var windowHeight=window.innerHeight||document.documentElement.clientHeight;var width=this.getWidth();var height=this.getHeight();x+=15;y+=15;if(x+width>windowWidth){x-=x+width-windowWidth}if(y+height>windowHeight){y-=20+height}Tooltip.prototype.setPosition.call(this,x,y)}}).call(GutterTooltip.prototype);exports.GutterHandler=GutterHandler}));ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(acequire,exports,module){"use strict";var event=acequire("../lib/event");var useragent=acequire("../lib/useragent");var MouseEvent=exports.MouseEvent=function(domEvent,editor){this.domEvent=domEvent;this.editor=editor;this.x=this.clientX=domEvent.clientX;this.y=this.clientY=domEvent.clientY;this.$pos=null;this.$inSelection=null;this.propagationStopped=false;this.defaultPrevented=false};(function(){this.stopPropagation=function(){event.stopPropagation(this.domEvent);this.propagationStopped=true};this.preventDefault=function(){event.preventDefault(this.domEvent);this.defaultPrevented=true};this.stop=function(){this.stopPropagation();this.preventDefault()};this.getDocumentPosition=function(){if(this.$pos)return this.$pos;this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY);return this.$pos};this.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var editor=this.editor;var selectionRange=editor.getSelectionRange();if(selectionRange.isEmpty())this.$inSelection=false;else{var pos=this.getDocumentPosition();this.$inSelection=selectionRange.contains(pos.row,pos.column)}return this.$inSelection};this.getButton=function(){return event.getButton(this.domEvent)};this.getShiftKey=function(){return this.domEvent.shiftKey};this.getAccelKey=useragent.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(MouseEvent.prototype)}));ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],(function(acequire,exports,module){"use strict";var dom=acequire("../lib/dom");var event=acequire("../lib/event");var useragent=acequire("../lib/useragent");var AUTOSCROLL_DELAY=200;var SCROLL_CURSOR_DELAY=200;var SCROLL_CURSOR_HYSTERESIS=5;function DragdropHandler(mouseHandler){var editor=mouseHandler.editor;var blankImage=dom.createElement("img");blankImage.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(useragent.isOpera)blankImage.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;";var exports=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];exports.forEach((function(x){mouseHandler[x]=this[x]}),this);editor.addEventListener("mousedown",this.onMouseDown.bind(mouseHandler));var mouseTarget=editor.container;var dragSelectionMarker,x,y;var timerId,range;var dragCursor,counter=0;var dragOperation;var isInternal;var autoScrollStartTime;var cursorMovedTime;var cursorPointOnCaretMoved;this.onDragStart=function(e){if(this.cancelDrag||!mouseTarget.draggable){var self=this;setTimeout((function(){self.startSelect();self.captureMouse(e)}),0);return e.preventDefault()}range=editor.getSelectionRange();var dataTransfer=e.dataTransfer;dataTransfer.effectAllowed=editor.getReadOnly()?"copy":"copyMove";if(useragent.isOpera){editor.container.appendChild(blankImage);blankImage.scrollTop=0}dataTransfer.setDragImage&&dataTransfer.setDragImage(blankImage,0,0);if(useragent.isOpera){editor.container.removeChild(blankImage)}dataTransfer.clearData();dataTransfer.setData("Text",editor.session.getTextRange());isInternal=true;this.setState("drag")};this.onDragEnd=function(e){mouseTarget.draggable=false;isInternal=false;this.setState(null);if(!editor.getReadOnly()){var dropEffect=e.dataTransfer.dropEffect;if(!dragOperation&&dropEffect=="move")editor.session.remove(editor.getSelectionRange());editor.renderer.$cursorLayer.setBlinking(true)}this.editor.unsetStyle("ace_dragging");this.editor.renderer.setCursorStyle("")};this.onDragEnter=function(e){if(editor.getReadOnly()||!canAccept(e.dataTransfer))return;x=e.clientX;y=e.clientY;if(!dragSelectionMarker)addDragMarker();counter++;e.dataTransfer.dropEffect=dragOperation=getDropEffect(e);return event.preventDefault(e)};this.onDragOver=function(e){if(editor.getReadOnly()||!canAccept(e.dataTransfer))return;x=e.clientX;y=e.clientY;if(!dragSelectionMarker){addDragMarker();counter++}if(onMouseMoveTimer!==null)onMouseMoveTimer=null;e.dataTransfer.dropEffect=dragOperation=getDropEffect(e);return event.preventDefault(e)};this.onDragLeave=function(e){counter--;if(counter<=0&&dragSelectionMarker){clearDragMarker();dragOperation=null;return event.preventDefault(e)}};this.onDrop=function(e){if(!dragCursor)return;var dataTransfer=e.dataTransfer;if(isInternal){switch(dragOperation){case"move":if(range.contains(dragCursor.row,dragCursor.column)){range={start:dragCursor,end:dragCursor}}else{range=editor.moveText(range,dragCursor)}break;case"copy":range=editor.moveText(range,dragCursor,true);break}}else{var dropData=dataTransfer.getData("Text");range={start:dragCursor,end:editor.session.insert(dragCursor,dropData)};editor.focus();dragOperation=null}clearDragMarker();return event.preventDefault(e)};event.addListener(mouseTarget,"dragstart",this.onDragStart.bind(mouseHandler));event.addListener(mouseTarget,"dragend",this.onDragEnd.bind(mouseHandler));event.addListener(mouseTarget,"dragenter",this.onDragEnter.bind(mouseHandler));event.addListener(mouseTarget,"dragover",this.onDragOver.bind(mouseHandler));event.addListener(mouseTarget,"dragleave",this.onDragLeave.bind(mouseHandler));event.addListener(mouseTarget,"drop",this.onDrop.bind(mouseHandler));function scrollCursorIntoView(cursor,prevCursor){var now=Date.now();var vMovement=!prevCursor||cursor.row!=prevCursor.row;var hMovement=!prevCursor||cursor.column!=prevCursor.column;if(!cursorMovedTime||vMovement||hMovement){editor.$blockScrolling+=1;editor.moveCursorToPosition(cursor);editor.$blockScrolling-=1;cursorMovedTime=now;cursorPointOnCaretMoved={x:x,y:y}}else{var distance=calcDistance(cursorPointOnCaretMoved.x,cursorPointOnCaretMoved.y,x,y);if(distance>SCROLL_CURSOR_HYSTERESIS){cursorMovedTime=null}else if(now-cursorMovedTime>=SCROLL_CURSOR_DELAY){editor.renderer.scrollCursorIntoView();cursorMovedTime=null}}}function autoScroll(cursor,prevCursor){var now=Date.now();var lineHeight=editor.renderer.layerConfig.lineHeight;var characterWidth=editor.renderer.layerConfig.characterWidth;var editorRect=editor.renderer.scroller.getBoundingClientRect();var offsets={x:{left:x-editorRect.left,right:editorRect.right-x},y:{top:y-editorRect.top,bottom:editorRect.bottom-y}};var nearestXOffset=Math.min(offsets.x.left,offsets.x.right);var nearestYOffset=Math.min(offsets.y.top,offsets.y.bottom);var scrollCursor={row:cursor.row,column:cursor.column};if(nearestXOffset/characterWidth<=2){scrollCursor.column+=offsets.x.left<offsets.x.right?-3:+2}if(nearestYOffset/lineHeight<=1){scrollCursor.row+=offsets.y.top<offsets.y.bottom?-1:+1}var vScroll=cursor.row!=scrollCursor.row;var hScroll=cursor.column!=scrollCursor.column;var vMovement=!prevCursor||cursor.row!=prevCursor.row;if(vScroll||hScroll&&!vMovement){if(!autoScrollStartTime)autoScrollStartTime=now;else if(now-autoScrollStartTime>=AUTOSCROLL_DELAY)editor.renderer.scrollCursorIntoView(scrollCursor)}else{autoScrollStartTime=null}}function onDragInterval(){var prevCursor=dragCursor;dragCursor=editor.renderer.screenToTextCoordinates(x,y);scrollCursorIntoView(dragCursor,prevCursor);autoScroll(dragCursor,prevCursor)}function addDragMarker(){range=editor.selection.toOrientedRange();dragSelectionMarker=editor.session.addMarker(range,"ace_selection",editor.getSelectionStyle());editor.clearSelection();if(editor.isFocused())editor.renderer.$cursorLayer.setBlinking(false);clearInterval(timerId);onDragInterval();timerId=setInterval(onDragInterval,20);counter=0;event.addListener(document,"mousemove",onMouseMove)}function clearDragMarker(){clearInterval(timerId);editor.session.removeMarker(dragSelectionMarker);dragSelectionMarker=null;editor.$blockScrolling+=1;editor.selection.fromOrientedRange(range);editor.$blockScrolling-=1;if(editor.isFocused()&&!isInternal)editor.renderer.$cursorLayer.setBlinking(!editor.getReadOnly());range=null;dragCursor=null;counter=0;autoScrollStartTime=null;cursorMovedTime=null;event.removeListener(document,"mousemove",onMouseMove)}var onMouseMoveTimer=null;function onMouseMove(){if(onMouseMoveTimer==null){onMouseMoveTimer=setTimeout((function(){if(onMouseMoveTimer!=null&&dragSelectionMarker)clearDragMarker()}),20)}}function canAccept(dataTransfer){var types=dataTransfer.types;return!types||Array.prototype.some.call(types,(function(type){return type=="text/plain"||type=="Text"}))}function getDropEffect(e){var copyAllowed=["copy","copymove","all","uninitialized"];var moveAllowed=["move","copymove","linkmove","all","uninitialized"];var copyModifierState=useragent.isMac?e.altKey:e.ctrlKey;var effectAllowed="uninitialized";try{effectAllowed=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var dropEffect="none";if(copyModifierState&&copyAllowed.indexOf(effectAllowed)>=0)dropEffect="copy";else if(moveAllowed.indexOf(effectAllowed)>=0)dropEffect="move";else if(copyAllowed.indexOf(effectAllowed)>=0)dropEffect="copy";return dropEffect}}(function(){this.dragWait=function(){var interval=Date.now()-this.mousedownEvent.time;if(interval>this.editor.getDragDelay())this.startDrag()};this.dragWaitEnd=function(){var target=this.editor.container;target.draggable=false;this.startSelect(this.mousedownEvent.getDocumentPosition());this.selectEnd()};this.dragReadyEnd=function(e){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly());this.editor.unsetStyle("ace_dragging");this.editor.renderer.setCursorStyle("");this.dragWaitEnd()};this.startDrag=function(){this.cancelDrag=false;var editor=this.editor;var target=editor.container;target.draggable=true;editor.renderer.$cursorLayer.setBlinking(false);editor.setStyle("ace_dragging");var cursorStyle=useragent.isWin?"default":"move";editor.renderer.setCursorStyle(cursorStyle);this.setState("dragReady")};this.onMouseDrag=function(e){var target=this.editor.container;if(useragent.isIE&&this.state=="dragReady"){var distance=calcDistance(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);if(distance>3)target.dragDrop()}if(this.state==="dragWait"){var distance=calcDistance(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);if(distance>0){target.draggable=false;this.startSelect(this.mousedownEvent.getDocumentPosition())}}};this.onMouseDown=function(e){if(!this.$dragEnabled)return;this.mousedownEvent=e;var editor=this.editor;var inSelection=e.inSelection();var button=e.getButton();var clickCount=e.domEvent.detail||1;if(clickCount===1&&button===0&&inSelection){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var eventTarget=e.domEvent.target||e.domEvent.srcElement;if("unselectable"in eventTarget)eventTarget.unselectable="on";if(editor.getDragDelay()){if(useragent.isWebKit){this.cancelDrag=true;var mouseTarget=editor.container;mouseTarget.draggable=true}this.setState("dragWait")}else{this.startDrag()}this.captureMouse(e,this.onMouseDrag.bind(this));e.defaultPrevented=true}}}).call(DragdropHandler.prototype);function calcDistance(ax,ay,bx,by){return Math.sqrt(Math.pow(bx-ax,2)+Math.pow(by-ay,2))}exports.DragdropHandler=DragdropHandler}));ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],(function(acequire,exports,module){"use strict";var dom=acequire("./dom");exports.get=function(url,callback){var xhr=new XMLHttpRequest;xhr.open("GET",url,true);xhr.onreadystatechange=function(){if(xhr.readyState===4){callback(xhr.responseText)}};xhr.send(null)};exports.loadScript=function(path,callback){var head=dom.getDocumentHead();var s=document.createElement("script");s.src=path;head.appendChild(s);s.onload=s.onreadystatechange=function(_,isAbort){if(isAbort||!s.readyState||s.readyState=="loaded"||s.readyState=="complete"){s=s.onload=s.onreadystatechange=null;if(!isAbort)callback()}}};exports.qualifyURL=function(url){var a=document.createElement("a");a.href=url;return a.href}}));ace.define("ace/lib/event_emitter",["require","exports","module"],(function(acequire,exports,module){"use strict";var EventEmitter={};var stopPropagation=function(){this.propagationStopped=true};var preventDefault=function(){this.defaultPrevented=true};EventEmitter._emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry||(this._eventRegistry={});this._defaultHandlers||(this._defaultHandlers={});var listeners=this._eventRegistry[eventName]||[];var defaultHandler=this._defaultHandlers[eventName];if(!listeners.length&&!defaultHandler)return;if(typeof e!="object"||!e)e={};if(!e.type)e.type=eventName;if(!e.stopPropagation)e.stopPropagation=stopPropagation;if(!e.preventDefault)e.preventDefault=preventDefault;listeners=listeners.slice();for(var i=0;i<listeners.length;i++){listeners[i](e,this);if(e.propagationStopped)break}if(defaultHandler&&!e.defaultPrevented)return defaultHandler(e,this)};EventEmitter._signal=function(eventName,e){var listeners=(this._eventRegistry||{})[eventName];if(!listeners)return;listeners=listeners.slice();for(var i=0;i<listeners.length;i++)listeners[i](e,this)};EventEmitter.once=function(eventName,callback){var _self=this;callback&&this.addEventListener(eventName,(function newCallback(){_self.removeEventListener(eventName,newCallback);callback.apply(null,arguments)}))};EventEmitter.setDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(!handlers)handlers=this._defaultHandlers={_disabled_:{}};if(handlers[eventName]){var old=handlers[eventName];var disabled=handlers._disabled_[eventName];if(!disabled)handlers._disabled_[eventName]=disabled=[];disabled.push(old);var i=disabled.indexOf(callback);if(i!=-1)disabled.splice(i,1)}handlers[eventName]=callback};EventEmitter.removeDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(!handlers)return;var disabled=handlers._disabled_[eventName];if(handlers[eventName]==callback){var old=handlers[eventName];if(disabled)this.setDefaultHandler(eventName,disabled.pop())}else if(disabled){var i=disabled.indexOf(callback);if(i!=-1)disabled.splice(i,1)}};EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback,capturing){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(!listeners)listeners=this._eventRegistry[eventName]=[];if(listeners.indexOf(callback)==-1)listeners[capturing?"unshift":"push"](callback);return callback};EventEmitter.off=EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(!listeners)return;var index=listeners.indexOf(callback);if(index!==-1)listeners.splice(index,1)};EventEmitter.removeAllListeners=function(eventName){if(this._eventRegistry)this._eventRegistry[eventName]=[]};exports.EventEmitter=EventEmitter}));ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(acequire,exports,module){"no use strict";var oop=acequire("./oop");var EventEmitter=acequire("./event_emitter").EventEmitter;var optionsProvider={setOptions:function(optList){Object.keys(optList).forEach((function(key){this.setOption(key,optList[key])}),this)},getOptions:function(optionNames){var result={};if(!optionNames){optionNames=Object.keys(this.$options)}else if(!Array.isArray(optionNames)){result=optionNames;optionNames=Object.keys(result)}optionNames.forEach((function(key){result[key]=this.getOption(key)}),this);return result},setOption:function(name,value){if(this["$"+name]===value)return;var opt=this.$options[name];if(!opt){return warn('misspelled option "'+name+'"')}if(opt.forwardTo)return this[opt.forwardTo]&&this[opt.forwardTo].setOption(name,value);if(!opt.handlesSet)this["$"+name]=value;if(opt&&opt.set)opt.set.call(this,value)},getOption:function(name){var opt=this.$options[name];if(!opt){return warn('misspelled option "'+name+'"')}if(opt.forwardTo)return this[opt.forwardTo]&&this[opt.forwardTo].getOption(name);return opt&&opt.get?opt.get.call(this):this["$"+name]}};function warn(message){if(typeof console!="undefined"&&console.warn)console.warn.apply(console,arguments)}function reportError(msg,data){var e=new Error(msg);e.data=data;if(typeof console=="object"&&console.error)console.error(e);setTimeout((function(){throw e}))}var AppConfig=function(){this.$defaultOptions={}};(function(){oop.implement(this,EventEmitter);this.defineOptions=function(obj,path,options){if(!obj.$options)this.$defaultOptions[path]=obj.$options={};Object.keys(options).forEach((function(key){var opt=options[key];if(typeof opt=="string")opt={forwardTo:opt};opt.name||(opt.name=key);obj.$options[opt.name]=opt;if("initialValue"in opt)obj["$"+opt.name]=opt.initialValue}));oop.implement(obj,optionsProvider);return this};this.resetOptions=function(obj){Object.keys(obj.$options).forEach((function(key){var opt=obj.$options[key];if("value"in opt)obj.setOption(key,opt.value)}))};this.setDefaultValue=function(path,name,value){var opts=this.$defaultOptions[path]||(this.$defaultOptions[path]={});if(opts[name]){if(opts.forwardTo)this.setDefaultValue(opts.forwardTo,name,value);else opts[name].value=value}};this.setDefaultValues=function(path,optionHash){Object.keys(optionHash).forEach((function(key){this.setDefaultValue(path,key,optionHash[key])}),this)};this.warn=warn;this.reportError=reportError}).call(AppConfig.prototype);exports.AppConfig=AppConfig}));ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],(function(acequire,exports,module){"no use strict";var lang=acequire("./lib/lang");var oop=acequire("./lib/oop");var net=acequire("./lib/net");var AppConfig=acequire("./lib/app_config").AppConfig;module.exports=exports=new AppConfig;var global=function(){return this||typeof window!="undefined"&&window}();var options={packaged:false,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};exports.get=function(key){if(!options.hasOwnProperty(key))throw new Error("Unknown config key: "+key);return options[key]};exports.set=function(key,value){if(!options.hasOwnProperty(key))throw new Error("Unknown config key: "+key);options[key]=value};exports.all=function(){return lang.copyObject(options)};exports.moduleUrl=function(name,component){if(options.$moduleUrls[name])return options.$moduleUrls[name];var parts=name.split("/");component=component||parts[parts.length-2]||"";var sep=component=="snippets"?"/":"-";var base=parts[parts.length-1];if(component=="worker"&&sep=="-"){var re=new RegExp("^"+component+"[\\-_]|[\\-_]"+component+"$","g");base=base.replace(re,"")}if((!base||base==component)&&parts.length>1)base=parts[parts.length-2];var path=options[component+"Path"];if(path==null){path=options.basePath}else if(sep=="/"){component=sep=""}if(path&&path.slice(-1)!="/")path+="/";return path+component+sep+base+this.get("suffix")};exports.setModuleUrl=function(name,subst){return options.$moduleUrls[name]=subst};exports.$loading={};exports.loadModule=function(moduleName,onLoad){var module,moduleType;if(Array.isArray(moduleName)){moduleType=moduleName[0];moduleName=moduleName[1]}try{module=acequire(moduleName)}catch(e){}if(module&&!exports.$loading[moduleName])return onLoad&&onLoad(module);if(!exports.$loading[moduleName])exports.$loading[moduleName]=[];exports.$loading[moduleName].push(onLoad);if(exports.$loading[moduleName].length>1)return;var afterLoad=function(){acequire([moduleName],(function(module){exports._emit("load.module",{name:moduleName,module:module});var listeners=exports.$loading[moduleName];exports.$loading[moduleName]=null;listeners.forEach((function(onLoad){onLoad&&onLoad(module)}))}))};if(!exports.get("packaged"))return afterLoad();net.loadScript(exports.moduleUrl(moduleName,moduleType),afterLoad)};init(true);function init(packaged){if(!global||!global.document)return;options.packaged=packaged||acequire.packaged||module.packaged||global.define&&__webpack_require__(95).packaged;var scriptOptions={};var scriptUrl="";var currentScript=document.currentScript||document._currentScript;var currentDocument=currentScript&&currentScript.ownerDocument||document;var scripts=currentDocument.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){var script=scripts[i];var src=script.src||script.getAttribute("src");if(!src)continue;var attributes=script.attributes;for(var j=0,l=attributes.length;j<l;j++){var attr=attributes[j];if(attr.name.indexOf("data-ace-")===0){scriptOptions[deHyphenate(attr.name.replace(/^data-ace-/,""))]=attr.value}}var m=src.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);if(m)scriptUrl=m[1]}if(scriptUrl){scriptOptions.base=scriptOptions.base||scriptUrl;scriptOptions.packaged=true}scriptOptions.basePath=scriptOptions.base;scriptOptions.workerPath=scriptOptions.workerPath||scriptOptions.base;scriptOptions.modePath=scriptOptions.modePath||scriptOptions.base;scriptOptions.themePath=scriptOptions.themePath||scriptOptions.base;delete scriptOptions.base;for(var key in scriptOptions)if(typeof scriptOptions[key]!=="undefined")exports.set(key,scriptOptions[key])}exports.init=init;function deHyphenate(str){return str.replace(/-(.)/g,(function(m,m1){return m1.toUpperCase()}))}}));ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],(function(acequire,exports,module){"use strict";var event=acequire("../lib/event");var useragent=acequire("../lib/useragent");var DefaultHandlers=acequire("./default_handlers").DefaultHandlers;var DefaultGutterHandler=acequire("./default_gutter_handler").GutterHandler;var MouseEvent=acequire("./mouse_event").MouseEvent;var DragdropHandler=acequire("./dragdrop_handler").DragdropHandler;var config=acequire("../config");var MouseHandler=function(editor){var _self=this;this.editor=editor;new DefaultHandlers(this);new DefaultGutterHandler(this);new DragdropHandler(this);var focusEditor=function(e){var windowBlurred=!document.hasFocus||!document.hasFocus()||!editor.isFocused()&&document.activeElement==(editor.textInput&&editor.textInput.getElement());if(windowBlurred)window.focus();editor.focus()};var mouseTarget=editor.renderer.getMouseEventTarget();event.addListener(mouseTarget,"click",this.onMouseEvent.bind(this,"click"));event.addListener(mouseTarget,"mousemove",this.onMouseMove.bind(this,"mousemove"));event.addMultiMouseDownListener([mouseTarget,editor.renderer.scrollBarV&&editor.renderer.scrollBarV.inner,editor.renderer.scrollBarH&&editor.renderer.scrollBarH.inner,editor.textInput&&editor.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent");event.addMouseWheelListener(editor.container,this.onMouseWheel.bind(this,"mousewheel"));event.addTouchMoveListener(editor.container,this.onTouchMove.bind(this,"touchmove"));var gutterEl=editor.renderer.$gutter;event.addListener(gutterEl,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"));event.addListener(gutterEl,"click",this.onMouseEvent.bind(this,"gutterclick"));event.addListener(gutterEl,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"));event.addListener(gutterEl,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"));event.addListener(mouseTarget,"mousedown",focusEditor);event.addListener(gutterEl,"mousedown",focusEditor);if(useragent.isIE&&editor.renderer.scrollBarV){event.addListener(editor.renderer.scrollBarV.element,"mousedown",focusEditor);event.addListener(editor.renderer.scrollBarH.element,"mousedown",focusEditor)}editor.on("mousemove",(function(e){if(_self.state||_self.$dragDelay||!_self.$dragEnabled)return;var character=editor.renderer.screenToTextCoordinates(e.x,e.y);var range=editor.session.selection.getRange();var renderer=editor.renderer;if(!range.isEmpty()&&range.insideStart(character.row,character.column)){renderer.setCursorStyle("default")}else{renderer.setCursorStyle("")}}))};(function(){this.onMouseEvent=function(name,e){this.editor._emit(name,new MouseEvent(e,this.editor))};this.onMouseMove=function(name,e){var listeners=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;if(!listeners||!listeners.length)return;this.editor._emit(name,new MouseEvent(e,this.editor))};this.onMouseWheel=function(name,e){var mouseEvent=new MouseEvent(e,this.editor);mouseEvent.speed=this.$scrollSpeed*2;mouseEvent.wheelX=e.wheelX;mouseEvent.wheelY=e.wheelY;this.editor._emit(name,mouseEvent)};this.onTouchMove=function(name,e){var mouseEvent=new MouseEvent(e,this.editor);mouseEvent.speed=1;mouseEvent.wheelX=e.wheelX;mouseEvent.wheelY=e.wheelY;this.editor._emit(name,mouseEvent)};this.setState=function(state){this.state=state};this.captureMouse=function(ev,mouseMoveHandler){this.x=ev.x;this.y=ev.y;this.isMousePressed=true;var renderer=this.editor.renderer;if(renderer.$keepTextAreaAtCursor)renderer.$keepTextAreaAtCursor=null;var self=this;var onMouseMove=function(e){if(!e)return;if(useragent.isWebKit&&!e.which&&self.releaseMouse)return self.releaseMouse();self.x=e.clientX;self.y=e.clientY;mouseMoveHandler&&mouseMoveHandler(e);self.mouseEvent=new MouseEvent(e,self.editor);self.$mouseMoved=true};var onCaptureEnd=function(e){clearInterval(timerId);onCaptureInterval();self[self.state+"End"]&&self[self.state+"End"](e);self.state="";if(renderer.$keepTextAreaAtCursor==null){renderer.$keepTextAreaAtCursor=true;renderer.$moveTextAreaToCursor()}self.isMousePressed=false;self.$onCaptureMouseMove=self.releaseMouse=null;e&&self.onMouseEvent("mouseup",e)};var onCaptureInterval=function(){self[self.state]&&self[self.state]();self.$mouseMoved=false};if(useragent.isOldIE&&ev.domEvent.type=="dblclick"){return setTimeout((function(){onCaptureEnd(ev)}))}self.$onCaptureMouseMove=onMouseMove;self.releaseMouse=event.capture(this.editor.container,onMouseMove,onCaptureEnd);var timerId=setInterval(onCaptureInterval,20)};this.releaseMouse=null;this.cancelContextMenu=function(){var stop=function(e){if(e&&e.domEvent&&e.domEvent.type!="contextmenu")return;this.editor.off("nativecontextmenu",stop);if(e&&e.domEvent)event.stopEvent(e.domEvent)}.bind(this);setTimeout(stop,10);this.editor.on("nativecontextmenu",stop)}}).call(MouseHandler.prototype);config.defineOptions(MouseHandler.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:useragent.isMac?150:0},dragEnabled:{initialValue:true},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:true}});exports.MouseHandler=MouseHandler}));ace.define("ace/mouse/fold_handler",["require","exports","module"],(function(acequire,exports,module){"use strict";function FoldHandler(editor){editor.on("click",(function(e){var position=e.getDocumentPosition();var session=editor.session;var fold=session.getFoldAt(position.row,position.column,1);if(fold){if(e.getAccelKey())session.removeFold(fold);else session.expandFold(fold);e.stop()}}));editor.on("gutterclick",(function(e){var gutterRegion=editor.renderer.$gutterLayer.getRegion(e);if(gutterRegion=="foldWidgets"){var row=e.getDocumentPosition().row;var session=editor.session;if(session.foldWidgets&&session.foldWidgets[row])editor.session.onFoldWidgetClick(row,e);if(!editor.isFocused())editor.focus();e.stop()}}));editor.on("gutterdblclick",(function(e){var gutterRegion=editor.renderer.$gutterLayer.getRegion(e);if(gutterRegion=="foldWidgets"){var row=e.getDocumentPosition().row;var session=editor.session;var data=session.getParentFoldRangeData(row,true);var range=data.range||data.firstRange;if(range){row=range.start.row;var fold=session.getFoldAt(row,session.getLine(row).length,1);if(fold){session.removeFold(fold)}else{session.addFold("...",range);editor.renderer.scrollCursorIntoView({row:range.start.row,column:0})}}e.stop()}}))}exports.FoldHandler=FoldHandler}));ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],(function(acequire,exports,module){"use strict";var keyUtil=acequire("../lib/keys");var event=acequire("../lib/event");var KeyBinding=function(editor){this.$editor=editor;this.$data={editor:editor};this.$handlers=[];this.setDefaultHandler(editor.commands)};(function(){this.setDefaultHandler=function(kb){this.removeKeyboardHandler(this.$defaultHandler);this.$defaultHandler=kb;this.addKeyboardHandler(kb,0)};this.setKeyboardHandler=function(kb){var h=this.$handlers;if(h[h.length-1]==kb)return;while(h[h.length-1]&&h[h.length-1]!=this.$defaultHandler)this.removeKeyboardHandler(h[h.length-1]);this.addKeyboardHandler(kb,1)};this.addKeyboardHandler=function(kb,pos){if(!kb)return;if(typeof kb=="function"&&!kb.handleKeyboard)kb.handleKeyboard=kb;var i=this.$handlers.indexOf(kb);if(i!=-1)this.$handlers.splice(i,1);if(pos==undefined)this.$handlers.push(kb);else this.$handlers.splice(pos,0,kb);if(i==-1&&kb.attach)kb.attach(this.$editor)};this.removeKeyboardHandler=function(kb){var i=this.$handlers.indexOf(kb);if(i==-1)return false;this.$handlers.splice(i,1);kb.detach&&kb.detach(this.$editor);return true};this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]};this.getStatusText=function(){var data=this.$data;var editor=data.editor;return this.$handlers.map((function(h){return h.getStatusText&&h.getStatusText(editor,data)||""})).filter(Boolean).join(" ")};this.$callKeyboardHandlers=function(hashId,keyString,keyCode,e){var toExecute;var success=false;var commands=this.$editor.commands;for(var i=this.$handlers.length;i--;){toExecute=this.$handlers[i].handleKeyboard(this.$data,hashId,keyString,keyCode,e);if(!toExecute||!toExecute.command)continue;if(toExecute.command=="null"){success=true}else{success=commands.exec(toExecute.command,this.$editor,toExecute.args,e)}if(success&&e&&hashId!=-1&&toExecute.passEvent!=true&&toExecute.command.passEvent!=true){event.stopEvent(e)}if(success)break}if(!success&&hashId==-1){toExecute={command:"insertstring"};success=commands.exec("insertstring",this.$editor,keyString)}if(success&&this.$editor._signal)this.$editor._signal("keyboardActivity",toExecute);return success};this.onCommandKey=function(e,hashId,keyCode){var keyString=keyUtil.keyCodeToString(keyCode);this.$callKeyboardHandlers(hashId,keyString,keyCode,e)};this.onTextInput=function(text){this.$callKeyboardHandlers(-1,text)}}).call(KeyBinding.prototype);exports.KeyBinding=KeyBinding}));ace.define("ace/lib/bidiutil",["require","exports","module"],(function(acequire,exports,module){"use strict";var ArabicAlefBetIntervalsBegine=["",""];var ArabicAlefBetIntervalsEnd=["",""];var dir=0,hiLevel=0;var lastArabic=false,hasUBAT_AL=false,hasUBAT_B=false,hasUBAT_S=false,hasBlockSep=false,hasSegSep=false;var impTab_LTR=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]];var impTab_RTL=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]];var LTR=0,RTL=1;var L=0;var R=1;var EN=2;var AN=3;var ON=4;var B=5;var S=6;var AL=7;var WS=8;var CS=9;var ES=10;var ET=11;var NSM=12;var LRE=13;var RLE=14;var PDF=15;var LRO=16;var RLO=17;var BN=18;var UnicodeTBL00=[BN,BN,BN,BN,BN,BN,BN,BN,BN,S,B,S,WS,B,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,B,B,B,S,WS,ON,ON,ET,ET,ET,ON,ON,ON,ON,ON,ES,CS,ES,CS,CS,EN,EN,EN,EN,EN,EN,EN,EN,EN,EN,CS,ON,ON,ON,ON,ON,ON,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,ON,ON,ON,ON,ON,ON,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,ON,ON,ON,ON,BN,BN,BN,BN,BN,BN,B,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,CS,ON,ET,ET,ET,ET,ON,ON,ON,ON,L,ON,ON,BN,ON,ON,ET,ET,EN,EN,ON,L,ON,ON,ON,EN,L,ON,ON,ON,ON,ON];var UnicodeTBL20=[WS,WS,WS,WS,WS,WS,WS,WS,WS,WS,WS,BN,BN,BN,L,R,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,WS,B,LRE,RLE,PDF,LRO,RLO,CS,ET,ET,ET,ET,ET,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,CS,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,WS];function _computeLevels(chars,levels,len,charTypes){var impTab=dir?impTab_RTL:impTab_LTR,prevState=null,newClass=null,newLevel=null,newState=0,action=null,cond=null,condPos=-1,i=null,ix=null,classes=[];if(!charTypes){for(i=0,charTypes=[];i<len;i++){charTypes[i]=_getCharacterType(chars[i])}}hiLevel=dir;lastArabic=false;hasUBAT_AL=false;hasUBAT_B=false;hasUBAT_S=false;for(ix=0;ix<len;ix++){prevState=newState;classes[ix]=newClass=_getCharClass(chars,charTypes,classes,ix);newState=impTab[prevState][newClass];action=newState&240;newState&=15;levels[ix]=newLevel=impTab[newState][5];if(action>0){if(action==16){for(i=condPos;i<ix;i++){levels[i]=1}condPos=-1}else{condPos=-1}}cond=impTab[newState][6];if(cond){if(condPos==-1){condPos=ix}}else{if(condPos>-1){for(i=condPos;i<ix;i++){levels[i]=newLevel}condPos=-1}}if(charTypes[ix]==B){levels[ix]=0}hiLevel|=newLevel}if(hasUBAT_S){for(i=0;i<len;i++){if(charTypes[i]==S){levels[i]=dir;for(var j=i-1;j>=0;j--){if(charTypes[j]==WS){levels[j]=dir}else{break}}}}}}function _invertLevel(lev,levels,_array){if(hiLevel<lev){return}if(lev==1&&dir==RTL&&!hasUBAT_B){_array.reverse();return}var len=_array.length,start=0,end,lo,hi,tmp;while(start<len){if(levels[start]>=lev){end=start+1;while(end<len&&levels[end]>=lev){end++}for(lo=start,hi=end-1;lo<hi;lo++,hi--){tmp=_array[lo];_array[lo]=_array[hi];_array[hi]=tmp}start=end}start++}}function _getCharClass(chars,types,classes,ix){var cType=types[ix],wType,nType,len,i;switch(cType){case L:case R:lastArabic=false;case ON:case AN:return cType;case EN:return lastArabic?AN:EN;case AL:lastArabic=true;hasUBAT_AL=true;return R;case WS:return ON;case CS:if(ix<1||ix+1>=types.length||(wType=classes[ix-1])!=EN&&wType!=AN||(nType=types[ix+1])!=EN&&nType!=AN){return ON}if(lastArabic){nType=AN}return nType==wType?nType:ON;case ES:wType=ix>0?classes[ix-1]:B;if(wType==EN&&ix+1<types.length&&types[ix+1]==EN){return EN}return ON;case ET:if(ix>0&&classes[ix-1]==EN){return EN}if(lastArabic){return ON}i=ix+1;len=types.length;while(i<len&&types[i]==ET){i++}if(i<len&&types[i]==EN){return EN}return ON;case NSM:len=types.length;i=ix+1;while(i<len&&types[i]==NSM){i++}if(i<len){var c=chars[ix],rtlCandidate=c>=1425&&c<=2303||c==64286;wType=types[i];if(rtlCandidate&&(wType==R||wType==AL)){return R}}if(ix<1||(wType=types[ix-1])==B){return ON}return classes[ix-1];case B:lastArabic=false;hasUBAT_B=true;return dir;case S:hasUBAT_S=true;return ON;case LRE:case RLE:case LRO:case RLO:case PDF:lastArabic=false;case BN:return ON}}function _getCharacterType(ch){var uc=ch.charCodeAt(0),hi=uc>>8;if(hi==0){return uc>191?L:UnicodeTBL00[uc]}else if(hi==5){return/[\u0591-\u05f4]/.test(ch)?R:L}else if(hi==6){if(/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(ch))return NSM;else if(/[\u0660-\u0669\u066b-\u066c]/.test(ch))return AN;else if(uc==1642)return ET;else if(/[\u06f0-\u06f9]/.test(ch))return EN;else return AL}else if(hi==32&&uc<=8287){return UnicodeTBL20[uc&255]}else if(hi==254){return uc>=65136?AL:ON}return ON}function _isArabicDiacritics(ch){return ch>=""&&ch<=""}exports.L=L;exports.R=R;exports.EN=EN;exports.ON_R=3;exports.AN=4;exports.R_H=5;exports.B=6;exports.DOT="";exports.doBidiReorder=function(text,textCharTypes,isRtl){if(text.length<2)return{};var chars=text.split(""),logicalFromVisual=new Array(chars.length),bidiLevels=new Array(chars.length),levels=[];dir=isRtl?RTL:LTR;_computeLevels(chars,levels,chars.length,textCharTypes);for(var i=0;i<logicalFromVisual.length;logicalFromVisual[i]=i,i++);_invertLevel(2,levels,logicalFromVisual);_invertLevel(1,levels,logicalFromVisual);for(var i=0;i<logicalFromVisual.length-1;i++){if(textCharTypes[i]===AN){levels[i]=exports.AN}else if(levels[i]===R&&(textCharTypes[i]>AL&&textCharTypes[i]<LRE||textCharTypes[i]===ON||textCharTypes[i]===BN)){levels[i]=exports.ON_R}else if(i>0&&chars[i-1]===""&&/\u0622|\u0623|\u0625|\u0627/.test(chars[i])){levels[i-1]=levels[i]=exports.R_H;i++}}if(chars[chars.length-1]===exports.DOT)levels[chars.length-1]=exports.B;for(var i=0;i<logicalFromVisual.length;i++){bidiLevels[i]=levels[logicalFromVisual[i]]}return{logicalFromVisual:logicalFromVisual,bidiLevels:bidiLevels}};exports.hasBidiCharacters=function(text,textCharTypes){var ret=false;for(var i=0;i<text.length;i++){textCharTypes[i]=_getCharacterType(text.charAt(i));if(!ret&&(textCharTypes[i]==R||textCharTypes[i]==AL))ret=true}return ret};exports.getVisualFromLogicalIdx=function(logIdx,rowMap){for(var i=0;i<rowMap.logicalFromVisual.length;i++){if(rowMap.logicalFromVisual[i]==logIdx)return i}return 0}}));ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang","ace/lib/useragent"],(function(acequire,exports,module){"use strict";var bidiUtil=acequire("./lib/bidiutil");var lang=acequire("./lib/lang");var useragent=acequire("./lib/useragent");var bidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var BidiHandler=function(session){this.session=session;this.bidiMap={};this.currentRow=null;this.bidiUtil=bidiUtil;this.charWidths=[];this.EOL="";this.showInvisibles=true;this.isRtlDir=false;this.line="";this.wrapIndent=0;this.isLastRow=false;this.EOF="";this.seenBidi=false};(function(){this.isBidiRow=function(screenRow,docRow,splitIndex){if(!this.seenBidi)return false;if(screenRow!==this.currentRow){this.currentRow=screenRow;this.updateRowLine(docRow,splitIndex);this.updateBidiMap()}return this.bidiMap.bidiLevels};this.onChange=function(delta){if(!this.seenBidi){if(delta.action=="insert"&&bidiRE.test(delta.lines.join("\n"))){this.seenBidi=true;this.currentRow=null}}else{this.currentRow=null}};this.getDocumentRow=function(){var docRow=0;var rowCache=this.session.$screenRowCache;if(rowCache.length){var index=this.session.$getRowCacheIndex(rowCache,this.currentRow);if(index>=0)docRow=this.session.$docRowCache[index]}return docRow};this.getSplitIndex=function(){var splitIndex=0;var rowCache=this.session.$screenRowCache;if(rowCache.length){var currentIndex,prevIndex=this.session.$getRowCacheIndex(rowCache,this.currentRow);while(this.currentRow-splitIndex>0){currentIndex=this.session.$getRowCacheIndex(rowCache,this.currentRow-splitIndex-1);if(currentIndex!==prevIndex)break;prevIndex=currentIndex;splitIndex++}}return splitIndex};this.updateRowLine=function(docRow,splitIndex){if(docRow===undefined)docRow=this.getDocumentRow();this.wrapIndent=0;this.isLastRow=docRow===this.session.getLength()-1;this.line=this.session.getLine(docRow);if(this.session.$useWrapMode){var splits=this.session.$wrapData[docRow];if(splits){if(splitIndex===undefined)splitIndex=this.getSplitIndex();if(splitIndex>0&&splits.length){this.wrapIndent=splits.indent;this.line=splitIndex<splits.length?this.line.substring(splits[splitIndex-1],splits[splits.length-1]):this.line.substring(splits[splits.length-1])}else{this.line=this.line.substring(0,splits[splitIndex])}}}var session=this.session,shift=0,size;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,(function(ch,i){if(ch==="\t"||session.isFullWidth(ch.charCodeAt(0))){size=ch==="\t"?session.getScreenTabSize(i+shift):2;shift+=size-1;return lang.stringRepeat(bidiUtil.DOT,size)}return ch}))};this.updateBidiMap=function(){var textCharTypes=[],endOfLine=this.isLastRow?this.EOF:this.EOL;var line=this.line+(this.showInvisibles?endOfLine:bidiUtil.DOT);if(bidiUtil.hasBidiCharacters(line,textCharTypes)){this.bidiMap=bidiUtil.doBidiReorder(line,textCharTypes,this.isRtlDir)}else{this.bidiMap={}}};this.markAsDirty=function(){this.currentRow=null};this.updateCharacterWidths=function(fontMetrics){if(!this.seenBidi)return;if(this.characterWidth===fontMetrics.$characterSize.width)return;var characterWidth=this.characterWidth=fontMetrics.$characterSize.width;var bidiCharWidth=fontMetrics.$measureCharWidth("");this.charWidths[bidiUtil.L]=this.charWidths[bidiUtil.EN]=this.charWidths[bidiUtil.ON_R]=characterWidth;this.charWidths[bidiUtil.R]=this.charWidths[bidiUtil.AN]=bidiCharWidth;this.charWidths[bidiUtil.R_H]=useragent.isChrome?bidiCharWidth:bidiCharWidth*.45;this.charWidths[bidiUtil.B]=0;this.currentRow=null};this.getShowInvisibles=function(){return this.showInvisibles};this.setShowInvisibles=function(showInvisibles){this.showInvisibles=showInvisibles;this.currentRow=null};this.setEolChar=function(eolChar){this.EOL=eolChar};this.setTextDir=function(isRtlDir){this.isRtlDir=isRtlDir};this.getPosLeft=function(col){col-=this.wrapIndent;var visualIdx=bidiUtil.getVisualFromLogicalIdx(col>0?col-1:0,this.bidiMap),levels=this.bidiMap.bidiLevels,left=0;if(col===0&&levels[visualIdx]%2!==0)visualIdx++;for(var i=0;i<visualIdx;i++){left+=this.charWidths[levels[i]]}if(col!==0&&levels[visualIdx]%2===0)left+=this.charWidths[levels[visualIdx]];if(this.wrapIndent)left+=this.wrapIndent*this.charWidths[bidiUtil.L];return left};this.getSelections=function(startCol,endCol){var map=this.bidiMap,levels=map.bidiLevels,level,offset=this.wrapIndent*this.charWidths[bidiUtil.L],selections=[],selColMin=Math.min(startCol,endCol)-this.wrapIndent,selColMax=Math.max(startCol,endCol)-this.wrapIndent,isSelected=false,isSelectedPrev=false,selectionStart=0;for(var logIdx,visIdx=0;visIdx<levels.length;visIdx++){logIdx=map.logicalFromVisual[visIdx];level=levels[visIdx];isSelected=logIdx>=selColMin&&logIdx<selColMax;if(isSelected&&!isSelectedPrev){selectionStart=offset}else if(!isSelected&&isSelectedPrev){selections.push({left:selectionStart,width:offset-selectionStart})}offset+=this.charWidths[level];isSelectedPrev=isSelected}if(isSelected&&visIdx===levels.length){selections.push({left:selectionStart,width:offset-selectionStart})}return selections};this.offsetToCol=function(posX){var logicalIdx=0,posX=Math.max(posX,0),offset=0,visualIdx=0,levels=this.bidiMap.bidiLevels,charWidth=this.charWidths[levels[visualIdx]];if(this.wrapIndent){posX-=this.wrapIndent*this.charWidths[bidiUtil.L]}while(posX>offset+charWidth/2){offset+=charWidth;if(visualIdx===levels.length-1){charWidth=0;break}charWidth=this.charWidths[levels[++visualIdx]]}if(visualIdx>0&&levels[visualIdx-1]%2!==0&&levels[visualIdx]%2===0){if(posX<offset)visualIdx--;logicalIdx=this.bidiMap.logicalFromVisual[visualIdx]}else if(visualIdx>0&&levels[visualIdx-1]%2===0&&levels[visualIdx]%2!==0){logicalIdx=1+(posX>offset?this.bidiMap.logicalFromVisual[visualIdx]:this.bidiMap.logicalFromVisual[visualIdx-1])}else if(this.isRtlDir&&visualIdx===levels.length-1&&charWidth===0&&levels[visualIdx-1]%2===0||!this.isRtlDir&&visualIdx===0&&levels[visualIdx]%2!==0){logicalIdx=1+this.bidiMap.logicalFromVisual[visualIdx]}else{if(visualIdx>0&&levels[visualIdx-1]%2!==0&&charWidth!==0)visualIdx--;logicalIdx=this.bidiMap.logicalFromVisual[visualIdx]}return logicalIdx+this.wrapIndent}}).call(BidiHandler.prototype);exports.BidiHandler=BidiHandler}));ace.define("ace/range",["require","exports","module"],(function(acequire,exports,module){"use strict";var comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column};var Range=function(startRow,startColumn,endRow,endColumn){this.start={row:startRow,column:startColumn};this.end={row:endRow,column:endColumn}};(function(){this.isEqual=function(range){return this.start.row===range.start.row&&this.end.row===range.end.row&&this.start.column===range.start.column&&this.end.column===range.end.column};this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"};this.contains=function(row,column){return this.compare(row,column)==0};this.compareRange=function(range){var cmp,end=range.end,start=range.start;cmp=this.compare(end.row,end.column);if(cmp==1){cmp=this.compare(start.row,start.column);if(cmp==1){return 2}else if(cmp==0){return 1}else{return 0}}else if(cmp==-1){return-2}else{cmp=this.compare(start.row,start.column);if(cmp==-1){return-1}else if(cmp==1){return 42}else{return 0}}};this.comparePoint=function(p){return this.compare(p.row,p.column)};this.containsRange=function(range){return this.comparePoint(range.start)==0&&this.comparePoint(range.end)==0};this.intersects=function(range){var cmp=this.compareRange(range);return cmp==-1||cmp==0||cmp==1};this.isEnd=function(row,column){return this.end.row==row&&this.end.column==column};this.isStart=function(row,column){return this.start.row==row&&this.start.column==column};this.setStart=function(row,column){if(typeof row=="object"){this.start.column=row.column;this.start.row=row.row}else{this.start.row=row;this.start.column=column}};this.setEnd=function(row,column){if(typeof row=="object"){this.end.column=row.column;this.end.row=row.row}else{this.end.row=row;this.end.column=column}};this.inside=function(row,column){if(this.compare(row,column)==0){if(this.isEnd(row,column)||this.isStart(row,column)){return false}else{return true}}return false};this.insideStart=function(row,column){if(this.compare(row,column)==0){if(this.isEnd(row,column)){return false}else{return true}}return false};this.insideEnd=function(row,column){if(this.compare(row,column)==0){if(this.isStart(row,column)){return false}else{return true}}return false};this.compare=function(row,column){if(!this.isMultiLine()){if(row===this.start.row){return column<this.start.column?-1:column>this.end.column?1:0}}if(row<this.start.row)return-1;if(row>this.end.row)return 1;if(this.start.row===row)return column>=this.start.column?0:-1;if(this.end.row===row)return column<=this.end.column?0:1;return 0};this.compareStart=function(row,column){if(this.start.row==row&&this.start.column==column){return-1}else{return this.compare(row,column)}};this.compareEnd=function(row,column){if(this.end.row==row&&this.end.column==column){return 1}else{return this.compare(row,column)}};this.compareInside=function(row,column){if(this.end.row==row&&this.end.column==column){return 1}else if(this.start.row==row&&this.start.column==column){return-1}else{return this.compare(row,column)}};this.clipRows=function(firstRow,lastRow){if(this.end.row>lastRow)var end={row:lastRow+1,column:0};else if(this.end.row<firstRow)var end={row:firstRow,column:0};if(this.start.row>lastRow)var start={row:lastRow+1,column:0};else if(this.start.row<firstRow)var start={row:firstRow,column:0};return Range.fromPoints(start||this.start,end||this.end)};this.extend=function(row,column){var cmp=this.compare(row,column);if(cmp==0)return this;else if(cmp==-1)var start={row:row,column:column};else var end={row:row,column:column};return Range.fromPoints(start||this.start,end||this.end)};this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column};this.isMultiLine=function(){return this.start.row!==this.end.row};this.clone=function(){return Range.fromPoints(this.start,this.end)};this.collapseRows=function(){if(this.end.column==0)return new Range(this.start.row,0,Math.max(this.start.row,this.end.row-1),0);else return new Range(this.start.row,0,this.end.row,0)};this.toScreenRange=function(session){var screenPosStart=session.documentToScreenPosition(this.start);var screenPosEnd=session.documentToScreenPosition(this.end);return new Range(screenPosStart.row,screenPosStart.column,screenPosEnd.row,screenPosEnd.column)};this.moveBy=function(row,column){this.start.row+=row;this.start.column+=column;this.end.row+=row;this.end.column+=column}}).call(Range.prototype);Range.fromPoints=function(start,end){return new Range(start.row,start.column,end.row,end.column)};Range.comparePoints=comparePoints;Range.comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column};exports.Range=Range}));ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],(function(acequire,exports,module){"use strict";var oop=acequire("./lib/oop");var lang=acequire("./lib/lang");var EventEmitter=acequire("./lib/event_emitter").EventEmitter;var Range=acequire("./range").Range;var Selection=function(session){this.session=session;this.doc=session.getDocument();this.clearSelection();this.lead=this.selectionLead=this.doc.createAnchor(0,0);this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var self=this;this.lead.on("change",(function(e){self._emit("changeCursor");if(!self.$isEmpty)self._emit("changeSelection");if(!self.$keepDesiredColumnOnChange&&e.old.column!=e.value.column)self.$desiredColumn=null}));this.selectionAnchor.on("change",(function(){if(!self.$isEmpty)self._emit("changeSelection")}))};(function(){oop.implement(this,EventEmitter);this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column};this.isMultiLine=function(){if(this.isEmpty()){return false}return this.getRange().isMultiLine()};this.getCursor=function(){return this.lead.getPosition()};this.setSelectionAnchor=function(row,column){this.anchor.setPosition(row,column);if(this.$isEmpty){this.$isEmpty=false;this._emit("changeSelection")}};this.getSelectionAnchor=function(){if(this.$isEmpty)return this.getSelectionLead();else return this.anchor.getPosition()};this.getSelectionLead=function(){return this.lead.getPosition()};this.shiftSelection=function(columns){if(this.$isEmpty){this.moveCursorTo(this.lead.row,this.lead.column+columns);return}var anchor=this.getSelectionAnchor();var lead=this.getSelectionLead();var isBackwards=this.isBackwards();if(!isBackwards||anchor.column!==0)this.setSelectionAnchor(anchor.row,anchor.column+columns);if(isBackwards||lead.column!==0){this.$moveSelection((function(){this.moveCursorTo(lead.row,lead.column+columns)}))}};this.isBackwards=function(){var anchor=this.anchor;var lead=this.lead;return anchor.row>lead.row||anchor.row==lead.row&&anchor.column>lead.column};this.getRange=function(){var anchor=this.anchor;var lead=this.lead;if(this.isEmpty())return Range.fromPoints(lead,lead);if(this.isBackwards()){return Range.fromPoints(lead,anchor)}else{return Range.fromPoints(anchor,lead)}};this.clearSelection=function(){if(!this.$isEmpty){this.$isEmpty=true;this._emit("changeSelection")}};this.selectAll=function(){var lastRow=this.doc.getLength()-1;this.setSelectionAnchor(0,0);this.moveCursorTo(lastRow,this.doc.getLine(lastRow).length)};this.setRange=this.setSelectionRange=function(range,reverse){if(reverse){this.setSelectionAnchor(range.end.row,range.end.column);this.selectTo(range.start.row,range.start.column)}else{this.setSelectionAnchor(range.start.row,range.start.column);this.selectTo(range.end.row,range.end.column)}if(this.getRange().isEmpty())this.$isEmpty=true;this.$desiredColumn=null};this.$moveSelection=function(mover){var lead=this.lead;if(this.$isEmpty)this.setSelectionAnchor(lead.row,lead.column);mover.call(this)};this.selectTo=function(row,column){this.$moveSelection((function(){this.moveCursorTo(row,column)}))};this.selectToPosition=function(pos){this.$moveSelection((function(){this.moveCursorToPosition(pos)}))};this.moveTo=function(row,column){this.clearSelection();this.moveCursorTo(row,column)};this.moveToPosition=function(pos){this.clearSelection();this.moveCursorToPosition(pos)};this.selectUp=function(){this.$moveSelection(this.moveCursorUp)};this.selectDown=function(){this.$moveSelection(this.moveCursorDown)};this.selectRight=function(){this.$moveSelection(this.moveCursorRight)};this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)};this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)};this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)};this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)};this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)};this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)};this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)};this.getWordRange=function(row,column){if(typeof column=="undefined"){var cursor=row||this.lead;row=cursor.row;column=cursor.column}return this.session.getWordRange(row,column)};this.selectWord=function(){this.setSelectionRange(this.getWordRange())};this.selectAWord=function(){var cursor=this.getCursor();var range=this.session.getAWordRange(cursor.row,cursor.column);this.setSelectionRange(range)};this.getLineRange=function(row,excludeLastChar){var rowStart=typeof row=="number"?row:this.lead.row;var rowEnd;var foldLine=this.session.getFoldLine(rowStart);if(foldLine){rowStart=foldLine.start.row;rowEnd=foldLine.end.row}else{rowEnd=rowStart}if(excludeLastChar===true)return new Range(rowStart,0,rowEnd,this.session.getLine(rowEnd).length);else return new Range(rowStart,0,rowEnd+1,0)};this.selectLine=function(){this.setSelectionRange(this.getLineRange())};this.moveCursorUp=function(){this.moveCursorBy(-1,0)};this.moveCursorDown=function(){this.moveCursorBy(1,0)};this.wouldMoveIntoSoftTab=function(cursor,tabSize,direction){var start=cursor.column;var end=cursor.column+tabSize;if(direction<0){start=cursor.column-tabSize;end=cursor.column}return this.session.isTabStop(cursor)&&this.doc.getLine(cursor.row).slice(start,end).split(" ").length-1==tabSize};this.moveCursorLeft=function(){var cursor=this.lead.getPosition(),fold;if(fold=this.session.getFoldAt(cursor.row,cursor.column,-1)){this.moveCursorTo(fold.start.row,fold.start.column)}else if(cursor.column===0){if(cursor.row>0){this.moveCursorTo(cursor.row-1,this.doc.getLine(cursor.row-1).length)}}else{var tabSize=this.session.getTabSize();if(this.wouldMoveIntoSoftTab(cursor,tabSize,-1)&&!this.session.getNavigateWithinSoftTabs()){this.moveCursorBy(0,-tabSize)}else{this.moveCursorBy(0,-1)}}};this.moveCursorRight=function(){var cursor=this.lead.getPosition(),fold;if(fold=this.session.getFoldAt(cursor.row,cursor.column,1)){this.moveCursorTo(fold.end.row,fold.end.column)}else if(this.lead.column==this.doc.getLine(this.lead.row).length){if(this.lead.row<this.doc.getLength()-1){this.moveCursorTo(this.lead.row+1,0)}}else{var tabSize=this.session.getTabSize();var cursor=this.lead;if(this.wouldMoveIntoSoftTab(cursor,tabSize,1)&&!this.session.getNavigateWithinSoftTabs()){this.moveCursorBy(0,tabSize)}else{this.moveCursorBy(0,1)}}};this.moveCursorLineStart=function(){var row=this.lead.row;var column=this.lead.column;var screenRow=this.session.documentToScreenRow(row,column);var firstColumnPosition=this.session.screenToDocumentPosition(screenRow,0);var beforeCursor=this.session.getDisplayLine(row,null,firstColumnPosition.row,firstColumnPosition.column);var leadingSpace=beforeCursor.match(/^\s*/);if(leadingSpace[0].length!=column&&!this.session.$useEmacsStyleLineStart)firstColumnPosition.column+=leadingSpace[0].length;this.moveCursorToPosition(firstColumnPosition)};this.moveCursorLineEnd=function(){var lead=this.lead;var lineEnd=this.session.getDocumentLastRowColumnPosition(lead.row,lead.column);if(this.lead.column==lineEnd.column){var line=this.session.getLine(lineEnd.row);if(lineEnd.column==line.length){var textEnd=line.search(/\s+$/);if(textEnd>0)lineEnd.column=textEnd}}this.moveCursorTo(lineEnd.row,lineEnd.column)};this.moveCursorFileEnd=function(){var row=this.doc.getLength()-1;var column=this.doc.getLine(row).length;this.moveCursorTo(row,column)};this.moveCursorFileStart=function(){this.moveCursorTo(0,0)};this.moveCursorLongWordRight=function(){var row=this.lead.row;var column=this.lead.column;var line=this.doc.getLine(row);var rightOfCursor=line.substring(column);var match;this.session.nonTokenRe.lastIndex=0;this.session.tokenRe.lastIndex=0;var fold=this.session.getFoldAt(row,column,1);if(fold){this.moveCursorTo(fold.end.row,fold.end.column);return}if(match=this.session.nonTokenRe.exec(rightOfCursor)){column+=this.session.nonTokenRe.lastIndex;this.session.nonTokenRe.lastIndex=0;rightOfCursor=line.substring(column)}if(column>=line.length){this.moveCursorTo(row,line.length);this.moveCursorRight();if(row<this.doc.getLength()-1)this.moveCursorWordRight();return}if(match=this.session.tokenRe.exec(rightOfCursor)){column+=this.session.tokenRe.lastIndex;this.session.tokenRe.lastIndex=0}this.moveCursorTo(row,column)};this.moveCursorLongWordLeft=function(){var row=this.lead.row;var column=this.lead.column;var fold;if(fold=this.session.getFoldAt(row,column,-1)){this.moveCursorTo(fold.start.row,fold.start.column);return}var str=this.session.getFoldStringAt(row,column,-1);if(str==null){str=this.doc.getLine(row).substring(0,column)}var leftOfCursor=lang.stringReverse(str);var match;this.session.nonTokenRe.lastIndex=0;this.session.tokenRe.lastIndex=0;if(match=this.session.nonTokenRe.exec(leftOfCursor)){column-=this.session.nonTokenRe.lastIndex;leftOfCursor=leftOfCursor.slice(this.session.nonTokenRe.lastIndex);this.session.nonTokenRe.lastIndex=0}if(column<=0){this.moveCursorTo(row,0);this.moveCursorLeft();if(row>0)this.moveCursorWordLeft();return}if(match=this.session.tokenRe.exec(leftOfCursor)){column-=this.session.tokenRe.lastIndex;this.session.tokenRe.lastIndex=0}this.moveCursorTo(row,column)};this.$shortWordEndIndex=function(rightOfCursor){var match,index=0,ch;var whitespaceRe=/\s/;var tokenRe=this.session.tokenRe;tokenRe.lastIndex=0;if(match=this.session.tokenRe.exec(rightOfCursor)){index=this.session.tokenRe.lastIndex}else{while((ch=rightOfCursor[index])&&whitespaceRe.test(ch))index++;if(index<1){tokenRe.lastIndex=0;while((ch=rightOfCursor[index])&&!tokenRe.test(ch)){tokenRe.lastIndex=0;index++;if(whitespaceRe.test(ch)){if(index>2){index--;break}else{while((ch=rightOfCursor[index])&&whitespaceRe.test(ch))index++;if(index>2)break}}}}}tokenRe.lastIndex=0;return index};this.moveCursorShortWordRight=function(){var row=this.lead.row;var column=this.lead.column;var line=this.doc.getLine(row);var rightOfCursor=line.substring(column);var fold=this.session.getFoldAt(row,column,1);if(fold)return this.moveCursorTo(fold.end.row,fold.end.column);if(column==line.length){var l=this.doc.getLength();do{row++;rightOfCursor=this.doc.getLine(row)}while(row<l&&/^\s*$/.test(rightOfCursor));if(!/^\s+/.test(rightOfCursor))rightOfCursor="";column=0}var index=this.$shortWordEndIndex(rightOfCursor);this.moveCursorTo(row,column+index)};this.moveCursorShortWordLeft=function(){var row=this.lead.row;var column=this.lead.column;var fold;if(fold=this.session.getFoldAt(row,column,-1))return this.moveCursorTo(fold.start.row,fold.start.column);var line=this.session.getLine(row).substring(0,column);if(column===0){do{row--;line=this.doc.getLine(row)}while(row>0&&/^\s*$/.test(line));column=line.length;if(!/\s+$/.test(line))line=""}var leftOfCursor=lang.stringReverse(line);var index=this.$shortWordEndIndex(leftOfCursor);return this.moveCursorTo(row,column-index)};this.moveCursorWordRight=function(){if(this.session.$selectLongWords)this.moveCursorLongWordRight();else this.moveCursorShortWordRight()};this.moveCursorWordLeft=function(){if(this.session.$selectLongWords)this.moveCursorLongWordLeft();else this.moveCursorShortWordLeft()};this.moveCursorBy=function(rows,chars){var screenPos=this.session.documentToScreenPosition(this.lead.row,this.lead.column);var offsetX;if(chars===0){if(rows!==0){if(this.session.$bidiHandler.isBidiRow(screenPos.row,this.lead.row)){offsetX=this.session.$bidiHandler.getPosLeft(screenPos.column);screenPos.column=Math.round(offsetX/this.session.$bidiHandler.charWidths[0])}else{offsetX=screenPos.column*this.session.$bidiHandler.charWidths[0]}}if(this.$desiredColumn)screenPos.column=this.$desiredColumn;else this.$desiredColumn=screenPos.column}var docPos=this.session.screenToDocumentPosition(screenPos.row+rows,screenPos.column,offsetX);if(rows!==0&&chars===0&&docPos.row===this.lead.row&&docPos.column===this.lead.column){if(this.session.lineWidgets&&this.session.lineWidgets[docPos.row]){if(docPos.row>0||rows>0)docPos.row++}}this.moveCursorTo(docPos.row,docPos.column+chars,chars===0)};this.moveCursorToPosition=function(position){this.moveCursorTo(position.row,position.column)};this.moveCursorTo=function(row,column,keepDesiredColumn){var fold=this.session.getFoldAt(row,column,1);if(fold){row=fold.start.row;column=fold.start.column}this.$keepDesiredColumnOnChange=true;var line=this.session.getLine(row);if(/[\uDC00-\uDFFF]/.test(line.charAt(column))&&line.charAt(column-1)){if(this.lead.row==row&&this.lead.column==column+1)column=column-1;else column=column+1}this.lead.setPosition(row,column);this.$keepDesiredColumnOnChange=false;if(!keepDesiredColumn)this.$desiredColumn=null};this.moveCursorToScreen=function(row,column,keepDesiredColumn){var pos=this.session.screenToDocumentPosition(row,column);this.moveCursorTo(pos.row,pos.column,keepDesiredColumn)};this.detach=function(){this.lead.detach();this.anchor.detach();this.session=this.doc=null};this.fromOrientedRange=function(range){this.setSelectionRange(range,range.cursor==range.start);this.$desiredColumn=range.desiredColumn||this.$desiredColumn};this.toOrientedRange=function(range){var r=this.getRange();if(range){range.start.column=r.start.column;range.start.row=r.start.row;range.end.column=r.end.column;range.end.row=r.end.row}else{range=r}range.cursor=this.isBackwards()?range.start:range.end;range.desiredColumn=this.$desiredColumn;return range};this.getRangeOfMovements=function(func){var start=this.getCursor();try{func(this);var end=this.getCursor();return Range.fromPoints(start,end)}catch(e){return Range.fromPoints(start,start)}finally{this.moveCursorToPosition(start)}};this.toJSON=function(){if(this.rangeCount){var data=this.ranges.map((function(r){var r1=r.clone();r1.isBackwards=r.cursor==r.start;return r1}))}else{var data=this.getRange();data.isBackwards=this.isBackwards()}return data};this.fromJSON=function(data){if(data.start==undefined){if(this.rangeList){this.toSingleRange(data[0]);for(var i=data.length;i--;){var r=Range.fromPoints(data[i].start,data[i].end);if(data[i].isBackwards)r.cursor=r.start;this.addRange(r,true)}return}else data=data[0]}if(this.rangeList)this.toSingleRange(data);this.setSelectionRange(data,data.isBackwards)};this.isEqual=function(data){if((data.length||this.rangeCount)&&data.length!=this.rangeCount)return false;if(!data.length||!this.ranges)return this.getRange().isEqual(data);for(var i=this.ranges.length;i--;){if(!this.ranges[i].isEqual(data[i]))return false}return true}}).call(Selection.prototype);exports.Selection=Selection}));ace.define("ace/tokenizer",["require","exports","module","ace/config"],(function(acequire,exports,module){"use strict";var config=acequire("./config");var MAX_TOKEN_COUNT=2e3;var Tokenizer=function(rules){this.states=rules;this.regExps={};this.matchMappings={};for(var key in this.states){var state=this.states[key];var ruleRegExps=[];var matchTotal=0;var mapping=this.matchMappings[key]={defaultToken:"text"};var flag="g";var splitterRurles=[];for(var i=0;i<state.length;i++){var rule=state[i];if(rule.defaultToken)mapping.defaultToken=rule.defaultToken;if(rule.caseInsensitive)flag="gi";if(rule.regex==null)continue;if(rule.regex instanceof RegExp)rule.regex=rule.regex.toString().slice(1,-1);var adjustedregex=rule.regex;var matchcount=new RegExp("(?:("+adjustedregex+")|(.))").exec("a").length-2;if(Array.isArray(rule.token)){if(rule.token.length==1||matchcount==1){rule.token=rule.token[0]}else if(matchcount-1!=rule.token.length){this.reportError("number of classes and regexp groups doesn't match",{rule:rule,groupCount:matchcount-1});rule.token=rule.token[0]}else{rule.tokenArray=rule.token;rule.token=null;rule.onMatch=this.$arrayTokens}}else if(typeof rule.token=="function"&&!rule.onMatch){if(matchcount>1)rule.onMatch=this.$applyToken;else rule.onMatch=rule.token}if(matchcount>1){if(/\\\d/.test(rule.regex)){adjustedregex=rule.regex.replace(/\\([0-9]+)/g,(function(match,digit){return"\\"+(parseInt(digit,10)+matchTotal+1)}))}else{matchcount=1;adjustedregex=this.removeCapturingGroups(rule.regex)}if(!rule.splitRegex&&typeof rule.token!="string")splitterRurles.push(rule)}mapping[matchTotal]=i;matchTotal+=matchcount;ruleRegExps.push(adjustedregex);if(!rule.onMatch)rule.onMatch=null}if(!ruleRegExps.length){mapping[0]=0;ruleRegExps.push("$")}splitterRurles.forEach((function(rule){rule.splitRegex=this.createSplitterRegexp(rule.regex,flag)}),this);this.regExps[key]=new RegExp("("+ruleRegExps.join(")|(")+")|($)",flag)}};(function(){this.$setMaxTokenCount=function(m){MAX_TOKEN_COUNT=m|0};this.$applyToken=function(str){var values=this.splitRegex.exec(str).slice(1);var types=this.token.apply(this,values);if(typeof types==="string")return[{type:types,value:str}];var tokens=[];for(var i=0,l=types.length;i<l;i++){if(values[i])tokens[tokens.length]={type:types[i],value:values[i]}}return tokens};this.$arrayTokens=function(str){if(!str)return[];var values=this.splitRegex.exec(str);if(!values)return"text";var tokens=[];var types=this.tokenArray;for(var i=0,l=types.length;i<l;i++){if(values[i+1])tokens[tokens.length]={type:types[i],value:values[i+1]}}return tokens};this.removeCapturingGroups=function(src){var r=src.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,(function(x,y){return y?"(?:":x}));return r};this.createSplitterRegexp=function(src,flag){if(src.indexOf("(?=")!=-1){var stack=0;var inChClass=false;var lastCapture={};src.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,(function(m,esc,parenOpen,parenClose,square,index){if(inChClass){inChClass=square!="]"}else if(square){inChClass=true}else if(parenClose){if(stack==lastCapture.stack){lastCapture.end=index+1;lastCapture.stack=-1}stack--}else if(parenOpen){stack++;if(parenOpen.length!=1){lastCapture.stack=stack;lastCapture.start=index}}return m}));if(lastCapture.end!=null&&/^\)*$/.test(src.substr(lastCapture.end)))src=src.substring(0,lastCapture.start)+src.substr(lastCapture.end)}if(src.charAt(0)!="^")src="^"+src;if(src.charAt(src.length-1)!="$")src+="$";return new RegExp(src,(flag||"").replace("g",""))};this.getLineTokens=function(line,startState){if(startState&&typeof startState!="string"){var stack=startState.slice(0);startState=stack[0];if(startState==="#tmp"){stack.shift();startState=stack.shift()}}else var stack=[];var currentState=startState||"start";var state=this.states[currentState];if(!state){currentState="start";state=this.states[currentState]}var mapping=this.matchMappings[currentState];var re=this.regExps[currentState];re.lastIndex=0;var match,tokens=[];var lastIndex=0;var matchAttempts=0;var token={type:null,value:""};while(match=re.exec(line)){var type=mapping.defaultToken;var rule=null;var value=match[0];var index=re.lastIndex;if(index-value.length>lastIndex){var skipped=line.substring(lastIndex,index-value.length);if(token.type==type){token.value+=skipped}else{if(token.type)tokens.push(token);token={type:type,value:skipped}}}for(var i=0;i<match.length-2;i++){if(match[i+1]===undefined)continue;rule=state[mapping[i]];if(rule.onMatch)type=rule.onMatch(value,currentState,stack,line);else type=rule.token;if(rule.next){if(typeof rule.next=="string"){currentState=rule.next}else{currentState=rule.next(currentState,stack)}state=this.states[currentState];if(!state){this.reportError("state doesn't exist",currentState);currentState="start";state=this.states[currentState]}mapping=this.matchMappings[currentState];lastIndex=index;re=this.regExps[currentState];re.lastIndex=index}if(rule.consumeLineEnd)lastIndex=index;break}if(value){if(typeof type==="string"){if((!rule||rule.merge!==false)&&token.type===type){token.value+=value}else{if(token.type)tokens.push(token);token={type:type,value:value}}}else if(type){if(token.type)tokens.push(token);token={type:null,value:""};for(var i=0;i<type.length;i++)tokens.push(type[i])}}if(lastIndex==line.length)break;lastIndex=index;if(matchAttempts++>MAX_TOKEN_COUNT){if(matchAttempts>2*line.length){this.reportError("infinite loop with in ace tokenizer",{startState:startState,line:line})}while(lastIndex<line.length){if(token.type)tokens.push(token);token={value:line.substring(lastIndex,lastIndex+=2e3),type:"overflow"}}currentState="start";stack=[];break}}if(token.type)tokens.push(token);if(stack.length>1){if(stack[0]!==currentState)stack.unshift("#tmp",currentState)}return{tokens:tokens,state:stack.length?stack:currentState}};this.reportError=config.reportError}).call(Tokenizer.prototype);exports.Tokenizer=Tokenizer}));ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],(function(acequire,exports,module){"use strict";var lang=acequire("../lib/lang");var TextHighlightRules=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(rules,prefix){if(!prefix){for(var key in rules)this.$rules[key]=rules[key];return}for(var key in rules){var state=rules[key];for(var i=0;i<state.length;i++){var rule=state[i];if(rule.next||rule.onMatch){if(typeof rule.next=="string"){if(rule.next.indexOf(prefix)!==0)rule.next=prefix+rule.next}if(rule.nextState&&rule.nextState.indexOf(prefix)!==0)rule.nextState=prefix+rule.nextState}}this.$rules[prefix+key]=state}};this.getRules=function(){return this.$rules};this.embedRules=function(HighlightRules,prefix,escapeRules,states,append){var embedRules=typeof HighlightRules=="function"?(new HighlightRules).getRules():HighlightRules;if(states){for(var i=0;i<states.length;i++)states[i]=prefix+states[i]}else{states=[];for(var key in embedRules)states.push(prefix+key)}this.addRules(embedRules,prefix);if(escapeRules){var addRules=Array.prototype[append?"push":"unshift"];for(var i=0;i<states.length;i++)addRules.apply(this.$rules[states[i]],lang.deepCopy(escapeRules))}if(!this.$embeds)this.$embeds=[];this.$embeds.push(prefix)};this.getEmbeds=function(){return this.$embeds};var pushState=function(currentState,stack){if(currentState!="start"||stack.length)stack.unshift(this.nextState,currentState);return this.nextState};var popState=function(currentState,stack){stack.shift();return stack.shift()||"start"};this.normalizeRules=function(){var id=0;var rules=this.$rules;function processState(key){var state=rules[key];state.processed=true;for(var i=0;i<state.length;i++){var rule=state[i];var toInsert=null;if(Array.isArray(rule)){toInsert=rule;rule={}}if(!rule.regex&&rule.start){rule.regex=rule.start;if(!rule.next)rule.next=[];rule.next.push({defaultToken:rule.token},{token:rule.token+".end",regex:rule.end||rule.start,next:"pop"});rule.token=rule.token+".start";rule.push=true}var next=rule.next||rule.push;if(next&&Array.isArray(next)){var stateName=rule.stateName;if(!stateName){stateName=rule.token;if(typeof stateName!="string")stateName=stateName[0]||"";if(rules[stateName])stateName+=id++}rules[stateName]=next;rule.next=stateName;processState(stateName)}else if(next=="pop"){rule.next=popState}if(rule.push){rule.nextState=rule.next||rule.push;rule.next=pushState;delete rule.push}if(rule.rules){for(var r in rule.rules){if(rules[r]){if(rules[r].push)rules[r].push.apply(rules[r],rule.rules[r])}else{rules[r]=rule.rules[r]}}}var includeName=typeof rule=="string"?rule:rule.include;if(includeName){if(Array.isArray(includeName))toInsert=includeName.map((function(x){return rules[x]}));else toInsert=rules[includeName]}if(toInsert){var args=[i,1].concat(toInsert);if(rule.noEscape)args=args.filter((function(x){return!x.next}));state.splice.apply(state,args);i--}if(rule.keywordMap){rule.token=this.createKeywordMapper(rule.keywordMap,rule.defaultToken||"text",rule.caseInsensitive);delete rule.defaultToken}}}Object.keys(rules).forEach(processState,this)};this.createKeywordMapper=function(map,defaultToken,ignoreCase,splitChar){var keywords=Object.create(null);Object.keys(map).forEach((function(className){var a=map[className];if(ignoreCase)a=a.toLowerCase();var list=a.split(splitChar||"|");for(var i=list.length;i--;)keywords[list[i]]=className}));if(Object.getPrototypeOf(keywords)){keywords.__proto__=null}this.$keywordList=Object.keys(keywords);map=null;return ignoreCase?function(value){return keywords[value.toLowerCase()]||defaultToken}:function(value){return keywords[value]||defaultToken}};this.getKeywords=function(){return this.$keywords}}).call(TextHighlightRules.prototype);exports.TextHighlightRules=TextHighlightRules}));ace.define("ace/mode/behaviour",["require","exports","module"],(function(acequire,exports,module){"use strict";var Behaviour=function(){this.$behaviours={}};(function(){this.add=function(name,action,callback){switch(undefined){case this.$behaviours:this.$behaviours={};case this.$behaviours[name]:this.$behaviours[name]={}}this.$behaviours[name][action]=callback};this.addBehaviours=function(behaviours){for(var key in behaviours){for(var action in behaviours[key]){this.add(key,action,behaviours[key][action])}}};this.remove=function(name){if(this.$behaviours&&this.$behaviours[name]){delete this.$behaviours[name]}};this.inherit=function(mode,filter){if(typeof mode==="function"){var behaviours=(new mode).getBehaviours(filter)}else{var behaviours=mode.getBehaviours(filter)}this.addBehaviours(behaviours)};this.getBehaviours=function(filter){if(!filter){return this.$behaviours}else{var ret={};for(var i=0;i<filter.length;i++){if(this.$behaviours[filter[i]]){ret[filter[i]]=this.$behaviours[filter[i]]}}return ret}}}).call(Behaviour.prototype);exports.Behaviour=Behaviour}));ace.define("ace/token_iterator",["require","exports","module","ace/range"],(function(acequire,exports,module){"use strict";var Range=acequire("./range").Range;var TokenIterator=function(session,initialRow,initialColumn){this.$session=session;this.$row=initialRow;this.$rowTokens=session.getTokens(initialRow);var token=session.getTokenAt(initialRow,initialColumn);this.$tokenIndex=token?token.index:-1};(function(){this.stepBackward=function(){this.$tokenIndex-=1;while(this.$tokenIndex<0){this.$row-=1;if(this.$row<0){this.$row=0;return null}this.$rowTokens=this.$session.getTokens(this.$row);this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]};this.stepForward=function(){this.$tokenIndex+=1;var rowCount;while(this.$tokenIndex>=this.$rowTokens.length){this.$row+=1;if(!rowCount)rowCount=this.$session.getLength();if(this.$row>=rowCount){this.$row=rowCount-1;return null}this.$rowTokens=this.$session.getTokens(this.$row);this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]};this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]};this.getCurrentTokenRow=function(){return this.$row};this.getCurrentTokenColumn=function(){var rowTokens=this.$rowTokens;var tokenIndex=this.$tokenIndex;var column=rowTokens[tokenIndex].start;if(column!==undefined)return column;column=0;while(tokenIndex>0){tokenIndex-=1;column+=rowTokens[tokenIndex].value.length}return column};this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}};this.getCurrentTokenRange=function(){var token=this.$rowTokens[this.$tokenIndex];var column=this.getCurrentTokenColumn();return new Range(this.$row,column,this.$row,column+token.value.length)}}).call(TokenIterator.prototype);exports.TokenIterator=TokenIterator}));ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],(function(acequire,exports,module){"use strict";var oop=acequire("../../lib/oop");var Behaviour=acequire("../behaviour").Behaviour;var TokenIterator=acequire("../../token_iterator").TokenIterator;var lang=acequire("../../lib/lang");var SAFE_INSERT_IN_TOKENS=["text","paren.rparen","punctuation.operator"];var SAFE_INSERT_BEFORE_TOKENS=["text","paren.rparen","punctuation.operator","comment"];var context;var contextCache={};var defaultQuotes={'"':'"',"'":"'"};var initContext=function(editor){var id=-1;if(editor.multiSelect){id=editor.selection.index;if(contextCache.rangeCount!=editor.multiSelect.rangeCount)contextCache={rangeCount:editor.multiSelect.rangeCount}}if(contextCache[id])return context=contextCache[id];context=contextCache[id]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}};var getWrapped=function(selection,selected,opening,closing){var rowDiff=selection.end.row-selection.start.row;return{text:opening+selected+closing,selection:[0,selection.start.column+1,rowDiff,selection.end.column+(rowDiff?0:1)]}};var CstyleBehaviour=function(options){this.add("braces","insertion",(function(state,action,editor,session,text){var cursor=editor.getCursorPosition();var line=session.doc.getLine(cursor.row);if(text=="{"){initContext(editor);var selection=editor.getSelectionRange();var selected=session.doc.getTextRange(selection);if(selected!==""&&selected!=="{"&&editor.getWrapBehavioursEnabled()){return getWrapped(selection,selected,"{","}")}else if(CstyleBehaviour.isSaneInsertion(editor,session)){if(/[\]\}\)]/.test(line[cursor.column])||editor.inMultiSelectMode||options&&options.braces){CstyleBehaviour.recordAutoInsert(editor,session,"}");return{text:"{}",selection:[1,1]}}else{CstyleBehaviour.recordMaybeInsert(editor,session,"{");return{text:"{",selection:[1,1]}}}}else if(text=="}"){initContext(editor);var rightChar=line.substring(cursor.column,cursor.column+1);if(rightChar=="}"){var matching=session.$findOpeningBracket("}",{column:cursor.column+1,row:cursor.row});if(matching!==null&&CstyleBehaviour.isAutoInsertedClosing(cursor,line,text)){CstyleBehaviour.popAutoInsertedClosing();return{text:"",selection:[1,1]}}}}else if(text=="\n"||text=="\r\n"){initContext(editor);var closing="";if(CstyleBehaviour.isMaybeInsertedClosing(cursor,line)){closing=lang.stringRepeat("}",context.maybeInsertedBrackets);CstyleBehaviour.clearMaybeInsertedClosing()}var rightChar=line.substring(cursor.column,cursor.column+1);if(rightChar==="}"){var openBracePos=session.findMatchingBracket({row:cursor.row,column:cursor.column+1},"}");if(!openBracePos)return null;var next_indent=this.$getIndent(session.getLine(openBracePos.row))}else if(closing){var next_indent=this.$getIndent(line)}else{CstyleBehaviour.clearMaybeInsertedClosing();return}var indent=next_indent+session.getTabString();return{text:"\n"+indent+"\n"+next_indent+closing,selection:[1,indent.length,1,indent.length]}}else{CstyleBehaviour.clearMaybeInsertedClosing()}}));this.add("braces","deletion",(function(state,action,editor,session,range){var selected=session.doc.getTextRange(range);if(!range.isMultiLine()&&selected=="{"){initContext(editor);var line=session.doc.getLine(range.start.row);var rightChar=line.substring(range.end.column,range.end.column+1);if(rightChar=="}"){range.end.column++;return range}else{context.maybeInsertedBrackets--}}}));this.add("parens","insertion",(function(state,action,editor,session,text){if(text=="("){initContext(editor);var selection=editor.getSelectionRange();var selected=session.doc.getTextRange(selection);if(selected!==""&&editor.getWrapBehavioursEnabled()){return getWrapped(selection,selected,"(",")")}else if(CstyleBehaviour.isSaneInsertion(editor,session)){CstyleBehaviour.recordAutoInsert(editor,session,")");return{text:"()",selection:[1,1]}}}else if(text==")"){initContext(editor);var cursor=editor.getCursorPosition();var line=session.doc.getLine(cursor.row);var rightChar=line.substring(cursor.column,cursor.column+1);if(rightChar==")"){var matching=session.$findOpeningBracket(")",{column:cursor.column+1,row:cursor.row});if(matching!==null&&CstyleBehaviour.isAutoInsertedClosing(cursor,line,text)){CstyleBehaviour.popAutoInsertedClosing();return{text:"",selection:[1,1]}}}}}));this.add("parens","deletion",(function(state,action,editor,session,range){var selected=session.doc.getTextRange(range);if(!range.isMultiLine()&&selected=="("){initContext(editor);var line=session.doc.getLine(range.start.row);var rightChar=line.substring(range.start.column+1,range.start.column+2);if(rightChar==")"){range.end.column++;return range}}}));this.add("brackets","insertion",(function(state,action,editor,session,text){if(text=="["){initContext(editor);var selection=editor.getSelectionRange();var selected=session.doc.getTextRange(selection);if(selected!==""&&editor.getWrapBehavioursEnabled()){return getWrapped(selection,selected,"[","]")}else if(CstyleBehaviour.isSaneInsertion(editor,session)){CstyleBehaviour.recordAutoInsert(editor,session,"]");return{text:"[]",selection:[1,1]}}}else if(text=="]"){initContext(editor);var cursor=editor.getCursorPosition();var line=session.doc.getLine(cursor.row);var rightChar=line.substring(cursor.column,cursor.column+1);if(rightChar=="]"){var matching=session.$findOpeningBracket("]",{column:cursor.column+1,row:cursor.row});if(matching!==null&&CstyleBehaviour.isAutoInsertedClosing(cursor,line,text)){CstyleBehaviour.popAutoInsertedClosing();return{text:"",selection:[1,1]}}}}}));this.add("brackets","deletion",(function(state,action,editor,session,range){var selected=session.doc.getTextRange(range);if(!range.isMultiLine()&&selected=="["){initContext(editor);var line=session.doc.getLine(range.start.row);var rightChar=line.substring(range.start.column+1,range.start.column+2);if(rightChar=="]"){range.end.column++;return range}}}));this.add("string_dquotes","insertion",(function(state,action,editor,session,text){var quotes=session.$mode.$quotes||defaultQuotes;if(text.length==1&&quotes[text]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(text)!=-1)return;initContext(editor);var quote=text;var selection=editor.getSelectionRange();var selected=session.doc.getTextRange(selection);if(selected!==""&&(selected.length!=1||!quotes[selected])&&editor.getWrapBehavioursEnabled()){return getWrapped(selection,selected,quote,quote)}else if(!selected){var cursor=editor.getCursorPosition();var line=session.doc.getLine(cursor.row);var leftChar=line.substring(cursor.column-1,cursor.column);var rightChar=line.substring(cursor.column,cursor.column+1);var token=session.getTokenAt(cursor.row,cursor.column);var rightToken=session.getTokenAt(cursor.row,cursor.column+1);if(leftChar=="\\"&&token&&/escape/.test(token.type))return null;var stringBefore=token&&/string|escape/.test(token.type);var stringAfter=!rightToken||/string|escape/.test(rightToken.type);var pair;if(rightChar==quote){pair=stringBefore!==stringAfter;if(pair&&/string\.end/.test(rightToken.type))pair=false}else{if(stringBefore&&!stringAfter)return null;if(stringBefore&&stringAfter)return null;var wordRe=session.$mode.tokenRe;wordRe.lastIndex=0;var isWordBefore=wordRe.test(leftChar);wordRe.lastIndex=0;var isWordAfter=wordRe.test(leftChar);if(isWordBefore||isWordAfter)return null;if(rightChar&&!/[\s;,.})\]\\]/.test(rightChar))return null;pair=true}return{text:pair?quote+quote:"",selection:[1,1]}}}}));this.add("string_dquotes","deletion",(function(state,action,editor,session,range){var selected=session.doc.getTextRange(range);if(!range.isMultiLine()&&(selected=='"'||selected=="'")){initContext(editor);var line=session.doc.getLine(range.start.row);var rightChar=line.substring(range.start.column+1,range.start.column+2);if(rightChar==selected){range.end.column++;return range}}}))};CstyleBehaviour.isSaneInsertion=function(editor,session){var cursor=editor.getCursorPosition();var iterator=new TokenIterator(session,cursor.row,cursor.column);if(!this.$matchTokenType(iterator.getCurrentToken()||"text",SAFE_INSERT_IN_TOKENS)){var iterator2=new TokenIterator(session,cursor.row,cursor.column+1);if(!this.$matchTokenType(iterator2.getCurrentToken()||"text",SAFE_INSERT_IN_TOKENS))return false}iterator.stepForward();return iterator.getCurrentTokenRow()!==cursor.row||this.$matchTokenType(iterator.getCurrentToken()||"text",SAFE_INSERT_BEFORE_TOKENS)};CstyleBehaviour.$matchTokenType=function(token,types){return types.indexOf(token.type||token)>-1};CstyleBehaviour.recordAutoInsert=function(editor,session,bracket){var cursor=editor.getCursorPosition();var line=session.doc.getLine(cursor.row);if(!this.isAutoInsertedClosing(cursor,line,context.autoInsertedLineEnd[0]))context.autoInsertedBrackets=0;context.autoInsertedRow=cursor.row;context.autoInsertedLineEnd=bracket+line.substr(cursor.column);context.autoInsertedBrackets++};CstyleBehaviour.recordMaybeInsert=function(editor,session,bracket){var cursor=editor.getCursorPosition();var line=session.doc.getLine(cursor.row);if(!this.isMaybeInsertedClosing(cursor,line))context.maybeInsertedBrackets=0;context.maybeInsertedRow=cursor.row;context.maybeInsertedLineStart=line.substr(0,cursor.column)+bracket;context.maybeInsertedLineEnd=line.substr(cursor.column);context.maybeInsertedBrackets++};CstyleBehaviour.isAutoInsertedClosing=function(cursor,line,bracket){return context.autoInsertedBrackets>0&&cursor.row===context.autoInsertedRow&&bracket===context.autoInsertedLineEnd[0]&&line.substr(cursor.column)===context.autoInsertedLineEnd};CstyleBehaviour.isMaybeInsertedClosing=function(cursor,line){return context.maybeInsertedBrackets>0&&cursor.row===context.maybeInsertedRow&&line.substr(cursor.column)===context.maybeInsertedLineEnd&&line.substr(0,cursor.column)==context.maybeInsertedLineStart};CstyleBehaviour.popAutoInsertedClosing=function(){context.autoInsertedLineEnd=context.autoInsertedLineEnd.substr(1);context.autoInsertedBrackets--};CstyleBehaviour.clearMaybeInsertedClosing=function(){if(context){context.maybeInsertedBrackets=0;context.maybeInsertedRow=-1}};oop.inherits(CstyleBehaviour,Behaviour);exports.CstyleBehaviour=CstyleBehaviour}));ace.define("ace/unicode",["require","exports","module"],(function(acequire,exports,module){"use strict";exports.packages={};addUnicodePackage({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"});function addUnicodePackage(pack){var codePoint=/\w{4}/g;for(var name in pack)exports.packages[name]=pack[name].replace(codePoint,"\\u$&")}}));ace.define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],(function(acequire,exports,module){"use strict";var Tokenizer=acequire("../tokenizer").Tokenizer;var TextHighlightRules=acequire("./text_highlight_rules").TextHighlightRules;var CstyleBehaviour=acequire("./behaviour/cstyle").CstyleBehaviour;var unicode=acequire("../unicode");var lang=acequire("../lib/lang");var TokenIterator=acequire("../token_iterator").TokenIterator;var Range=acequire("../range").Range;var Mode=function(){this.HighlightRules=TextHighlightRules};(function(){this.$defaultBehaviour=new CstyleBehaviour;this.tokenRe=new RegExp("^["+unicode.packages.L+unicode.packages.Mn+unicode.packages.Mc+unicode.packages.Nd+unicode.packages.Pc+"\\$_]+","g");this.nonTokenRe=new RegExp("^(?:[^"+unicode.packages.L+unicode.packages.Mn+unicode.packages.Mc+unicode.packages.Nd+unicode.packages.Pc+"\\$_]|\\s])+","g");this.getTokenizer=function(){if(!this.$tokenizer){this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig);this.$tokenizer=new Tokenizer(this.$highlightRules.getRules())}return this.$tokenizer};this.lineCommentStart="";this.blockComment="";this.toggleCommentLines=function(state,session,startRow,endRow){var doc=session.doc;var ignoreBlankLines=true;var shouldRemove=true;var minIndent=Infinity;var tabSize=session.getTabSize();var insertAtTabStop=false;if(!this.lineCommentStart){if(!this.blockComment)return false;var lineCommentStart=this.blockComment.start;var lineCommentEnd=this.blockComment.end;var regexpStart=new RegExp("^(\\s*)(?:"+lang.escapeRegExp(lineCommentStart)+")");var regexpEnd=new RegExp("(?:"+lang.escapeRegExp(lineCommentEnd)+")\\s*$");var comment=function(line,i){if(testRemove(line,i))return;if(!ignoreBlankLines||/\S/.test(line)){doc.insertInLine({row:i,column:line.length},lineCommentEnd);doc.insertInLine({row:i,column:minIndent},lineCommentStart)}};var uncomment=function(line,i){var m;if(m=line.match(regexpEnd))doc.removeInLine(i,line.length-m[0].length,line.length);if(m=line.match(regexpStart))doc.removeInLine(i,m[1].length,m[0].length)};var testRemove=function(line,row){if(regexpStart.test(line))return true;var tokens=session.getTokens(row);for(var i=0;i<tokens.length;i++){if(tokens[i].type==="comment")return true}}}else{if(Array.isArray(this.lineCommentStart)){var regexpStart=this.lineCommentStart.map(lang.escapeRegExp).join("|");var lineCommentStart=this.lineCommentStart[0]}else{var regexpStart=lang.escapeRegExp(this.lineCommentStart);var lineCommentStart=this.lineCommentStart}regexpStart=new RegExp("^(\\s*)(?:"+regexpStart+") ?");insertAtTabStop=session.getUseSoftTabs();var uncomment=function(line,i){var m=line.match(regexpStart);if(!m)return;var start=m[1].length,end=m[0].length;if(!shouldInsertSpace(line,start,end)&&m[0][end-1]==" ")end--;doc.removeInLine(i,start,end)};var commentWithSpace=lineCommentStart+" ";var comment=function(line,i){if(!ignoreBlankLines||/\S/.test(line)){if(shouldInsertSpace(line,minIndent,minIndent))doc.insertInLine({row:i,column:minIndent},commentWithSpace);else doc.insertInLine({row:i,column:minIndent},lineCommentStart)}};var testRemove=function(line,i){return regexpStart.test(line)};var shouldInsertSpace=function(line,before,after){var spaces=0;while(before--&&line.charAt(before)==" ")spaces++;if(spaces%tabSize!=0)return false;var spaces=0;while(line.charAt(after++)==" ")spaces++;if(tabSize>2)return spaces%tabSize!=tabSize-1;else return spaces%tabSize==0;return true}}function iter(fun){for(var i=startRow;i<=endRow;i++)fun(doc.getLine(i),i)}var minEmptyLength=Infinity;iter((function(line,i){var indent=line.search(/\S/);if(indent!==-1){if(indent<minIndent)minIndent=indent;if(shouldRemove&&!testRemove(line,i))shouldRemove=false}else if(minEmptyLength>line.length){minEmptyLength=line.length}}));if(minIndent==Infinity){minIndent=minEmptyLength;ignoreBlankLines=false;shouldRemove=false}if(insertAtTabStop&&minIndent%tabSize!=0)minIndent=Math.floor(minIndent/tabSize)*tabSize;iter(shouldRemove?uncomment:comment)};this.toggleBlockComment=function(state,session,range,cursor){var comment=this.blockComment;if(!comment)return;if(!comment.start&&comment[0])comment=comment[0];var iterator=new TokenIterator(session,cursor.row,cursor.column);var token=iterator.getCurrentToken();var sel=session.selection;var initialRange=session.selection.toOrientedRange();var startRow,colDiff;if(token&&/comment/.test(token.type)){var startRange,endRange;while(token&&/comment/.test(token.type)){var i=token.value.indexOf(comment.start);if(i!=-1){var row=iterator.getCurrentTokenRow();var column=iterator.getCurrentTokenColumn()+i;startRange=new Range(row,column,row,column+comment.start.length);break}token=iterator.stepBackward()}var iterator=new TokenIterator(session,cursor.row,cursor.column);var token=iterator.getCurrentToken();while(token&&/comment/.test(token.type)){var i=token.value.indexOf(comment.end);if(i!=-1){var row=iterator.getCurrentTokenRow();var column=iterator.getCurrentTokenColumn()+i;endRange=new Range(row,column,row,column+comment.end.length);break}token=iterator.stepForward()}if(endRange)session.remove(endRange);if(startRange){session.remove(startRange);startRow=startRange.start.row;colDiff=-comment.start.length}}else{colDiff=comment.start.length;startRow=range.start.row;session.insert(range.end,comment.end);session.insert(range.start,comment.start)}if(initialRange.start.row==startRow)initialRange.start.column+=colDiff;if(initialRange.end.row==startRow)initialRange.end.column+=colDiff;session.selection.fromOrientedRange(initialRange)};this.getNextLineIndent=function(state,line,tab){return this.$getIndent(line)};this.checkOutdent=function(state,line,input){return false};this.autoOutdent=function(state,doc,row){};this.$getIndent=function(line){return line.match(/^\s*/)[0]};this.createWorker=function(session){return null};this.createModeDelegates=function(mapping){this.$embeds=[];this.$modes={};for(var i in mapping){if(mapping[i]){this.$embeds.push(i);this.$modes[i]=new mapping[i]}}var delegations=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(var i=0;i<delegations.length;i++){(function(scope){var functionName=delegations[i];var defaultHandler=scope[functionName];scope[delegations[i]]=function(){return this.$delegator(functionName,arguments,defaultHandler)}})(this)}};this.$delegator=function(method,args,defaultHandler){var state=args[0];if(typeof state!="string")state=state[0];for(var i=0;i<this.$embeds.length;i++){if(!this.$modes[this.$embeds[i]])continue;var split=state.split(this.$embeds[i]);if(!split[0]&&split[1]){args[0]=split[1];var mode=this.$modes[this.$embeds[i]];return mode[method].apply(mode,args)}}var ret=defaultHandler.apply(this,args);return defaultHandler?ret:undefined};this.transformAction=function(state,action,editor,session,param){if(this.$behaviour){var behaviours=this.$behaviour.getBehaviours();for(var key in behaviours){if(behaviours[key][action]){var ret=behaviours[key][action].apply(this,arguments);if(ret){return ret}}}}};this.getKeywords=function(append){if(!this.completionKeywords){var rules=this.$tokenizer.rules;var completionKeywords=[];for(var rule in rules){var ruleItr=rules[rule];for(var r=0,l=ruleItr.length;r<l;r++){if(typeof ruleItr[r].token==="string"){if(/keyword|support|storage/.test(ruleItr[r].token))completionKeywords.push(ruleItr[r].regex)}else if(typeof ruleItr[r].token==="object"){for(var a=0,aLength=ruleItr[r].token.length;a<aLength;a++){if(/keyword|support|storage/.test(ruleItr[r].token[a])){var rule=ruleItr[r].regex.match(/\(.+?\)/g)[a];completionKeywords.push(rule.substr(1,rule.length-2))}}}}}this.completionKeywords=completionKeywords}if(!append)return this.$keywordList;return completionKeywords.concat(this.$keywordList||[])};this.$createKeywordList=function(){if(!this.$highlightRules)this.getTokenizer();return this.$keywordList=this.$highlightRules.$keywordList||[]};this.getCompletions=function(state,session,pos,prefix){var keywords=this.$keywordList||this.$createKeywordList();return keywords.map((function(word){return{name:word,value:word,score:0,meta:"keyword"}}))};this.$id="ace/mode/text"}).call(Mode.prototype);exports.Mode=Mode}));ace.define("ace/apply_delta",["require","exports","module"],(function(acequire,exports,module){"use strict";function throwDeltaError(delta,errorText){console.log("Invalid Delta:",delta);throw"Invalid Delta: "+errorText}function positionInDocument(docLines,position){return position.row>=0&&position.row<docLines.length&&position.column>=0&&position.column<=docLines[position.row].length}function validateDelta(docLines,delta){if(delta.action!="insert"&&delta.action!="remove")throwDeltaError(delta,"delta.action must be 'insert' or 'remove'");if(!(delta.lines instanceof Array))throwDeltaError(delta,"delta.lines must be an Array");if(!delta.start||!delta.end)throwDeltaError(delta,"delta.start/end must be an present");var start=delta.start;if(!positionInDocument(docLines,delta.start))throwDeltaError(delta,"delta.start must be contained in document");var end=delta.end;if(delta.action=="remove"&&!positionInDocument(docLines,end))throwDeltaError(delta,"delta.end must contained in document for 'remove' actions");var numRangeRows=end.row-start.row;var numRangeLastLineChars=end.column-(numRangeRows==0?start.column:0);if(numRangeRows!=delta.lines.length-1||delta.lines[numRangeRows].length!=numRangeLastLineChars)throwDeltaError(delta,"delta.range must match delta lines")}exports.applyDelta=function(docLines,delta,doNotValidate){var row=delta.start.row;var startColumn=delta.start.column;var line=docLines[row]||"";switch(delta.action){case"insert":var lines=delta.lines;if(lines.length===1){docLines[row]=line.substring(0,startColumn)+delta.lines[0]+line.substring(startColumn)}else{var args=[row,1].concat(delta.lines);docLines.splice.apply(docLines,args);docLines[row]=line.substring(0,startColumn)+docLines[row];docLines[row+delta.lines.length-1]+=line.substring(startColumn)}break;case"remove":var endColumn=delta.end.column;var endRow=delta.end.row;if(row===endRow){docLines[row]=line.substring(0,startColumn)+line.substring(endColumn)}else{docLines.splice(row,endRow-row+1,line.substring(0,startColumn)+docLines[endRow].substring(endColumn))}break}}}));ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(acequire,exports,module){"use strict";var oop=acequire("./lib/oop");var EventEmitter=acequire("./lib/event_emitter").EventEmitter;var Anchor=exports.Anchor=function(doc,row,column){this.$onChange=this.onChange.bind(this);this.attach(doc);if(typeof column=="undefined")this.setPosition(row.row,row.column);else this.setPosition(row,column)};(function(){oop.implement(this,EventEmitter);this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)};this.getDocument=function(){return this.document};this.$insertRight=false;this.onChange=function(delta){if(delta.start.row==delta.end.row&&delta.start.row!=this.row)return;if(delta.start.row>this.row)return;var point=$getTransformedPoint(delta,{row:this.row,column:this.column},this.$insertRight);this.setPosition(point.row,point.column,true)};function $pointsInOrder(point1,point2,equalPointsInOrder){var bColIsAfter=equalPointsInOrder?point1.column<=point2.column:point1.column<point2.column;return point1.row<point2.row||point1.row==point2.row&&bColIsAfter}function $getTransformedPoint(delta,point,moveIfEqual){var deltaIsInsert=delta.action=="insert";var deltaRowShift=(deltaIsInsert?1:-1)*(delta.end.row-delta.start.row);var deltaColShift=(deltaIsInsert?1:-1)*(delta.end.column-delta.start.column);var deltaStart=delta.start;var deltaEnd=deltaIsInsert?deltaStart:delta.end;if($pointsInOrder(point,deltaStart,moveIfEqual)){return{row:point.row,column:point.column}}if($pointsInOrder(deltaEnd,point,!moveIfEqual)){return{row:point.row+deltaRowShift,column:point.column+(point.row==deltaEnd.row?deltaColShift:0)}}return{row:deltaStart.row,column:deltaStart.column}}this.setPosition=function(row,column,noClip){var pos;if(noClip){pos={row:row,column:column}}else{pos=this.$clipPositionToDocument(row,column)}if(this.row==pos.row&&this.column==pos.column)return;var old={row:this.row,column:this.column};this.row=pos.row;this.column=pos.column;this._signal("change",{old:old,value:pos})};this.detach=function(){this.document.removeEventListener("change",this.$onChange)};this.attach=function(doc){this.document=doc||this.document;this.document.on("change",this.$onChange)};this.$clipPositionToDocument=function(row,column){var pos={};if(row>=this.document.getLength()){pos.row=Math.max(0,this.document.getLength()-1);pos.column=this.document.getLine(pos.row).length}else if(row<0){pos.row=0;pos.column=0}else{pos.row=row;pos.column=Math.min(this.document.getLine(pos.row).length,Math.max(0,column))}if(column<0)pos.column=0;return pos}}).call(Anchor.prototype)}));ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],(function(acequire,exports,module){"use strict";var oop=acequire("./lib/oop");var applyDelta=acequire("./apply_delta").applyDelta;var EventEmitter=acequire("./lib/event_emitter").EventEmitter;var Range=acequire("./range").Range;var Anchor=acequire("./anchor").Anchor;var Document=function(textOrLines){this.$lines=[""];if(textOrLines.length===0){this.$lines=[""]}else if(Array.isArray(textOrLines)){this.insertMergedLines({row:0,column:0},textOrLines)}else{this.insert({row:0,column:0},textOrLines)}};(function(){oop.implement(this,EventEmitter);this.setValue=function(text){var len=this.getLength()-1;this.remove(new Range(0,0,len,this.getLine(len).length));this.insert({row:0,column:0},text)};this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())};this.createAnchor=function(row,column){return new Anchor(this,row,column)};if("aaa".split(/a/).length===0){this.$split=function(text){return text.replace(/\r\n|\r/g,"\n").split("\n")}}else{this.$split=function(text){return text.split(/\r\n|\r|\n/)}}this.$detectNewLine=function(text){var match=text.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=match?match[1]:"\n";this._signal("changeNewLineMode")};this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}};this.$autoNewLine="";this.$newLineMode="auto";this.setNewLineMode=function(newLineMode){if(this.$newLineMode===newLineMode)return;this.$newLineMode=newLineMode;this._signal("changeNewLineMode")};this.getNewLineMode=function(){return this.$newLineMode};this.isNewLine=function(text){return text=="\r\n"||text=="\r"||text=="\n"};this.getLine=function(row){return this.$lines[row]||""};this.getLines=function(firstRow,lastRow){return this.$lines.slice(firstRow,lastRow+1)};this.getAllLines=function(){return this.getLines(0,this.getLength())};this.getLength=function(){return this.$lines.length};this.getTextRange=function(range){return this.getLinesForRange(range).join(this.getNewLineCharacter())};this.getLinesForRange=function(range){var lines;if(range.start.row===range.end.row){lines=[this.getLine(range.start.row).substring(range.start.column,range.end.column)]}else{lines=this.getLines(range.start.row,range.end.row);lines[0]=(lines[0]||"").substring(range.start.column);var l=lines.length-1;if(range.end.row-range.start.row==l)lines[l]=lines[l].substring(0,range.end.column)}return lines};this.insertLines=function(row,lines){console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead.");return this.insertFullLines(row,lines)};this.removeLines=function(firstRow,lastRow){console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead.");return this.removeFullLines(firstRow,lastRow)};this.insertNewLine=function(position){console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead.");return this.insertMergedLines(position,["",""])};this.insert=function(position,text){if(this.getLength()<=1)this.$detectNewLine(text);return this.insertMergedLines(position,this.$split(text))};this.insertInLine=function(position,text){var start=this.clippedPos(position.row,position.column);var end=this.pos(position.row,position.column+text.length);this.applyDelta({start:start,end:end,action:"insert",lines:[text]},true);return this.clonePos(end)};this.clippedPos=function(row,column){var length=this.getLength();if(row===undefined){row=length}else if(row<0){row=0}else if(row>=length){row=length-1;column=undefined}var line=this.getLine(row);if(column==undefined)column=line.length;column=Math.min(Math.max(column,0),line.length);return{row:row,column:column}};this.clonePos=function(pos){return{row:pos.row,column:pos.column}};this.pos=function(row,column){return{row:row,column:column}};this.$clipPosition=function(position){var length=this.getLength();if(position.row>=length){position.row=Math.max(0,length-1);position.column=this.getLine(length-1).length}else{position.row=Math.max(0,position.row);position.column=Math.min(Math.max(position.column,0),this.getLine(position.row).length)}return position};this.insertFullLines=function(row,lines){row=Math.min(Math.max(row,0),this.getLength());var column=0;if(row<this.getLength()){lines=lines.concat([""]);column=0}else{lines=[""].concat(lines);row--;column=this.$lines[row].length}this.insertMergedLines({row:row,column:column},lines)};this.insertMergedLines=function(position,lines){var start=this.clippedPos(position.row,position.column);var end={row:start.row+lines.length-1,column:(lines.length==1?start.column:0)+lines[lines.length-1].length};this.applyDelta({start:start,end:end,action:"insert",lines:lines});return this.clonePos(end)};this.remove=function(range){var start=this.clippedPos(range.start.row,range.start.column);var end=this.clippedPos(range.end.row,range.end.column);this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})});return this.clonePos(start)};this.removeInLine=function(row,startColumn,endColumn){var start=this.clippedPos(row,startColumn);var end=this.clippedPos(row,endColumn);this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})},true);return this.clonePos(start)};this.removeFullLines=function(firstRow,lastRow){firstRow=Math.min(Math.max(0,firstRow),this.getLength()-1);lastRow=Math.min(Math.max(0,lastRow),this.getLength()-1);var deleteFirstNewLine=lastRow==this.getLength()-1&&firstRow>0;var deleteLastNewLine=lastRow<this.getLength()-1;var startRow=deleteFirstNewLine?firstRow-1:firstRow;var startCol=deleteFirstNewLine?this.getLine(startRow).length:0;var endRow=deleteLastNewLine?lastRow+1:lastRow;var endCol=deleteLastNewLine?0:this.getLine(endRow).length;var range=new Range(startRow,startCol,endRow,endCol);var deletedLines=this.$lines.slice(firstRow,lastRow+1);this.applyDelta({start:range.start,end:range.end,action:"remove",lines:this.getLinesForRange(range)});return deletedLines};this.removeNewLine=function(row){if(row<this.getLength()-1&&row>=0){this.applyDelta({start:this.pos(row,this.getLine(row).length),end:this.pos(row+1,0),action:"remove",lines:["",""]})}};this.replace=function(range,text){if(!(range instanceof Range))range=Range.fromPoints(range.start,range.end);if(text.length===0&&range.isEmpty())return range.start;if(text==this.getTextRange(range))return range.end;this.remove(range);var end;if(text){end=this.insert(range.start,text)}else{end=range.start}return end};this.applyDeltas=function(deltas){for(var i=0;i<deltas.length;i++){this.applyDelta(deltas[i])}};this.revertDeltas=function(deltas){for(var i=deltas.length-1;i>=0;i--){this.revertDelta(deltas[i])}};this.applyDelta=function(delta,doNotValidate){var isInsert=delta.action=="insert";if(isInsert?delta.lines.length<=1&&!delta.lines[0]:!Range.comparePoints(delta.start,delta.end)){return}if(isInsert&&delta.lines.length>2e4)this.$splitAndapplyLargeDelta(delta,2e4);applyDelta(this.$lines,delta,doNotValidate);this._signal("change",delta)};this.$splitAndapplyLargeDelta=function(delta,MAX){var lines=delta.lines;var l=lines.length;var row=delta.start.row;var column=delta.start.column;var from=0,to=0;do{from=to;to+=MAX-1;var chunk=lines.slice(from,to);if(to>l){delta.lines=chunk;delta.start.row=row+from;delta.start.column=column;break}chunk.push("");this.applyDelta({start:this.pos(row+from,column),end:this.pos(row+to,column=0),action:delta.action,lines:chunk},true)}while(true)};this.revertDelta=function(delta){this.applyDelta({start:this.clonePos(delta.start),end:this.clonePos(delta.end),action:delta.action=="insert"?"remove":"insert",lines:delta.lines.slice()})};this.indexToPosition=function(index,startRow){var lines=this.$lines||this.getAllLines();var newlineLength=this.getNewLineCharacter().length;for(var i=startRow||0,l=lines.length;i<l;i++){index-=lines[i].length+newlineLength;if(index<0)return{row:i,column:index+lines[i].length+newlineLength}}return{row:l-1,column:lines[l-1].length}};this.positionToIndex=function(pos,startRow){var lines=this.$lines||this.getAllLines();var newlineLength=this.getNewLineCharacter().length;var index=0;var row=Math.min(pos.row,lines.length);for(var i=startRow||0;i<row;++i)index+=lines[i].length+newlineLength;return index+pos.column}}).call(Document.prototype);exports.Document=Document}));ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(acequire,exports,module){"use strict";var oop=acequire("./lib/oop");var EventEmitter=acequire("./lib/event_emitter").EventEmitter;var BackgroundTokenizer=function(tokenizer,editor){this.running=false;this.lines=[];this.states=[];this.currentLine=0;this.tokenizer=tokenizer;var self=this;this.$worker=function(){if(!self.running){return}var workerStart=new Date;var currentLine=self.currentLine;var endLine=-1;var doc=self.doc;var startLine=currentLine;while(self.lines[currentLine])currentLine++;var len=doc.getLength();var processedLines=0;self.running=false;while(currentLine<len){self.$tokenizeRow(currentLine);endLine=currentLine;do{currentLine++}while(self.lines[currentLine]);processedLines++;if(processedLines%5===0&&new Date-workerStart>20){self.running=setTimeout(self.$worker,20);break}}self.currentLine=currentLine;if(endLine==-1)endLine=currentLine;if(startLine<=endLine)self.fireUpdateEvent(startLine,endLine)}};(function(){oop.implement(this,EventEmitter);this.setTokenizer=function(tokenizer){this.tokenizer=tokenizer;this.lines=[];this.states=[];this.start(0)};this.setDocument=function(doc){this.doc=doc;this.lines=[];this.states=[];this.stop()};this.fireUpdateEvent=function(firstRow,lastRow){var data={first:firstRow,last:lastRow};this._signal("update",{data:data})};this.start=function(startRow){this.currentLine=Math.min(startRow||0,this.currentLine,this.doc.getLength());this.lines.splice(this.currentLine,this.lines.length);this.states.splice(this.currentLine,this.states.length);this.stop();this.running=setTimeout(this.$worker,700)};this.scheduleStart=function(){if(!this.running)this.running=setTimeout(this.$worker,700)};this.$updateOnChange=function(delta){var startRow=delta.start.row;var len=delta.end.row-startRow;if(len===0){this.lines[startRow]=null}else if(delta.action=="remove"){this.lines.splice(startRow,len+1,null);this.states.splice(startRow,len+1,null)}else{var args=Array(len+1);args.unshift(startRow,1);this.lines.splice.apply(this.lines,args);this.states.splice.apply(this.states,args)}this.currentLine=Math.min(startRow,this.currentLine,this.doc.getLength());this.stop()};this.stop=function(){if(this.running)clearTimeout(this.running);this.running=false};this.getTokens=function(row){return this.lines[row]||this.$tokenizeRow(row)};this.getState=function(row){if(this.currentLine==row)this.$tokenizeRow(row);return this.states[row]||"start"};this.$tokenizeRow=function(row){var line=this.doc.getLine(row);var state=this.states[row-1];var data=this.tokenizer.getLineTokens(line,state,row);if(this.states[row]+""!==data.state+""){this.states[row]=data.state;this.lines[row+1]=null;if(this.currentLine>row+1)this.currentLine=row+1}else if(this.currentLine==row){this.currentLine=row+1}return this.lines[row]=data.tokens}}).call(BackgroundTokenizer.prototype);exports.BackgroundTokenizer=BackgroundTokenizer}));ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(acequire,exports,module){"use strict";var lang=acequire("./lib/lang");var oop=acequire("./lib/oop");var Range=acequire("./range").Range;var SearchHighlight=function(regExp,clazz,type){this.setRegexp(regExp);this.clazz=clazz;this.type=type||"text"};(function(){this.MAX_RANGES=500;this.setRegexp=function(regExp){if(this.regExp+""==regExp+"")return;this.regExp=regExp;this.cache=[]};this.update=function(html,markerLayer,session,config){if(!this.regExp)return;var start=config.firstRow,end=config.lastRow;for(var i=start;i<=end;i++){var ranges=this.cache[i];if(ranges==null){ranges=lang.getMatchOffsets(session.getLine(i),this.regExp);if(ranges.length>this.MAX_RANGES)ranges=ranges.slice(0,this.MAX_RANGES);ranges=ranges.map((function(match){return new Range(i,match.offset,i,match.offset+match.length)}));this.cache[i]=ranges.length?ranges:""}for(var j=ranges.length;j--;){markerLayer.drawSingleLineMarker(html,ranges[j].toScreenRange(session),this.clazz,config)}}}}).call(SearchHighlight.prototype);exports.SearchHighlight=SearchHighlight}));ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],(function(acequire,exports,module){"use strict";var Range=acequire("../range").Range;function FoldLine(foldData,folds){this.foldData=foldData;if(Array.isArray(folds)){this.folds=folds}else{folds=this.folds=[folds]}var last=folds[folds.length-1];this.range=new Range(folds[0].start.row,folds[0].start.column,last.end.row,last.end.column);this.start=this.range.start;this.end=this.range.end;this.folds.forEach((function(fold){fold.setFoldLine(this)}),this)}(function(){this.shiftRow=function(shift){this.start.row+=shift;this.end.row+=shift;this.folds.forEach((function(fold){fold.start.row+=shift;fold.end.row+=shift}))};this.addFold=function(fold){if(fold.sameRow){if(fold.start.row<this.startRow||fold.endRow>this.endRow){throw new Error("Can't add a fold to this FoldLine as it has no connection")}this.folds.push(fold);this.folds.sort((function(a,b){return-a.range.compareEnd(b.start.row,b.start.column)}));if(this.range.compareEnd(fold.start.row,fold.start.column)>0){this.end.row=fold.end.row;this.end.column=fold.end.column}else if(this.range.compareStart(fold.end.row,fold.end.column)<0){this.start.row=fold.start.row;this.start.column=fold.start.column}}else if(fold.start.row==this.end.row){this.folds.push(fold);this.end.row=fold.end.row;this.end.column=fold.end.column}else if(fold.end.row==this.start.row){this.folds.unshift(fold);this.start.row=fold.start.row;this.start.column=fold.start.column}else{throw new Error("Trying to add fold to FoldRow that doesn't have a matching row")}fold.foldLine=this};this.containsRow=function(row){return row>=this.start.row&&row<=this.end.row};this.walk=function(callback,endRow,endColumn){var lastEnd=0,folds=this.folds,fold,cmp,stop,isNewRow=true;if(endRow==null){endRow=this.end.row;endColumn=this.end.column}for(var i=0;i<folds.length;i++){fold=folds[i];cmp=fold.range.compareStart(endRow,endColumn);if(cmp==-1){callback(null,endRow,endColumn,lastEnd,isNewRow);return}stop=callback(null,fold.start.row,fold.start.column,lastEnd,isNewRow);stop=!stop&&callback(fold.placeholder,fold.start.row,fold.start.column,lastEnd);if(stop||cmp===0){return}isNewRow=!fold.sameRow;lastEnd=fold.end.column}callback(null,endRow,endColumn,lastEnd,isNewRow)};this.getNextFoldTo=function(row,column){var fold,cmp;for(var i=0;i<this.folds.length;i++){fold=this.folds[i];cmp=fold.range.compareEnd(row,column);if(cmp==-1){return{fold:fold,kind:"after"}}else if(cmp===0){return{fold:fold,kind:"inside"}}}return null};this.addRemoveChars=function(row,column,len){var ret=this.getNextFoldTo(row,column),fold,folds;if(ret){fold=ret.fold;if(ret.kind=="inside"&&fold.start.column!=column&&fold.start.row!=row){window.console&&window.console.log(row,column,fold)}else if(fold.start.row==row){folds=this.folds;var i=folds.indexOf(fold);if(i===0){this.start.column+=len}for(i;i<folds.length;i++){fold=folds[i];fold.start.column+=len;if(!fold.sameRow){return}fold.end.column+=len}this.end.column+=len}}};this.split=function(row,column){var pos=this.getNextFoldTo(row,column);if(!pos||pos.kind=="inside")return null;var fold=pos.fold;var folds=this.folds;var foldData=this.foldData;var i=folds.indexOf(fold);var foldBefore=folds[i-1];this.end.row=foldBefore.end.row;this.end.column=foldBefore.end.column;folds=folds.splice(i,folds.length-i);var newFoldLine=new FoldLine(foldData,folds);foldData.splice(foldData.indexOf(this)+1,0,newFoldLine);return newFoldLine};this.merge=function(foldLineNext){var folds=foldLineNext.folds;for(var i=0;i<folds.length;i++){this.addFold(folds[i])}var foldData=this.foldData;foldData.splice(foldData.indexOf(foldLineNext),1)};this.toString=function(){var ret=[this.range.toString()+": ["];this.folds.forEach((function(fold){ret.push("  "+fold.toString())}));ret.push("]");return ret.join("\n")};this.idxToPosition=function(idx){var lastFoldEndColumn=0;for(var i=0;i<this.folds.length;i++){var fold=this.folds[i];idx-=fold.start.column-lastFoldEndColumn;if(idx<0){return{row:fold.start.row,column:fold.start.column+idx}}idx-=fold.placeholder.length;if(idx<0){return fold.start}lastFoldEndColumn=fold.end.column}return{row:this.end.row,column:this.end.column+idx}}}).call(FoldLine.prototype);exports.FoldLine=FoldLine}));ace.define("ace/range_list",["require","exports","module","ace/range"],(function(acequire,exports,module){"use strict";var Range=acequire("./range").Range;var comparePoints=Range.comparePoints;var RangeList=function(){this.ranges=[]};(function(){this.comparePoints=comparePoints;this.pointIndex=function(pos,excludeEdges,startIndex){var list=this.ranges;for(var i=startIndex||0;i<list.length;i++){var range=list[i];var cmpEnd=comparePoints(pos,range.end);if(cmpEnd>0)continue;var cmpStart=comparePoints(pos,range.start);if(cmpEnd===0)return excludeEdges&&cmpStart!==0?-i-2:i;if(cmpStart>0||cmpStart===0&&!excludeEdges)return i;return-i-1}return-i-1};this.add=function(range){var excludeEdges=!range.isEmpty();var startIndex=this.pointIndex(range.start,excludeEdges);if(startIndex<0)startIndex=-startIndex-1;var endIndex=this.pointIndex(range.end,excludeEdges,startIndex);if(endIndex<0)endIndex=-endIndex-1;else endIndex++;return this.ranges.splice(startIndex,endIndex-startIndex,range)};this.addList=function(list){var removed=[];for(var i=list.length;i--;){removed.push.apply(removed,this.add(list[i]))}return removed};this.substractPoint=function(pos){var i=this.pointIndex(pos);if(i>=0)return this.ranges.splice(i,1)};this.merge=function(){var removed=[];var list=this.ranges;list=list.sort((function(a,b){return comparePoints(a.start,b.start)}));var next=list[0],range;for(var i=1;i<list.length;i++){range=next;next=list[i];var cmp=comparePoints(range.end,next.start);if(cmp<0)continue;if(cmp==0&&!range.isEmpty()&&!next.isEmpty())continue;if(comparePoints(range.end,next.end)<0){range.end.row=next.end.row;range.end.column=next.end.column}list.splice(i,1);removed.push(next);next=range;i--}this.ranges=list;return removed};this.contains=function(row,column){return this.pointIndex({row:row,column:column})>=0};this.containsPoint=function(pos){return this.pointIndex(pos)>=0};this.rangeAtPoint=function(pos){var i=this.pointIndex(pos);if(i>=0)return this.ranges[i]};this.clipRows=function(startRow,endRow){var list=this.ranges;if(list[0].start.row>endRow||list[list.length-1].start.row<startRow)return[];var startIndex=this.pointIndex({row:startRow,column:0});if(startIndex<0)startIndex=-startIndex-1;var endIndex=this.pointIndex({row:endRow,column:0},startIndex);if(endIndex<0)endIndex=-endIndex-1;var clipped=[];for(var i=startIndex;i<endIndex;i++){clipped.push(list[i])}return clipped};this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)};this.attach=function(session){if(this.session)this.detach();this.session=session;this.onChange=this.$onChange.bind(this);this.session.on("change",this.onChange)};this.detach=function(){if(!this.session)return;this.session.removeListener("change",this.onChange);this.session=null};this.$onChange=function(delta){if(delta.action=="insert"){var start=delta.start;var end=delta.end}else{var end=delta.start;var start=delta.end}var startRow=start.row;var endRow=end.row;var lineDif=endRow-startRow;var colDiff=-start.column+end.column;var ranges=this.ranges;for(var i=0,n=ranges.length;i<n;i++){var r=ranges[i];if(r.end.row<startRow)continue;if(r.start.row>startRow)break;if(r.start.row==startRow&&r.start.column>=start.column){if(r.start.column==start.column&&this.$insertRight){}else{r.start.column+=colDiff;r.start.row+=lineDif}}if(r.end.row==startRow&&r.end.column>=start.column){if(r.end.column==start.column&&this.$insertRight){continue}if(r.end.column==start.column&&colDiff>0&&i<n-1){if(r.end.column>r.start.column&&r.end.column==ranges[i+1].start.column)r.end.column-=colDiff}r.end.column+=colDiff;r.end.row+=lineDif}}if(lineDif!=0&&i<n){for(;i<n;i++){var r=ranges[i];r.start.row+=lineDif;r.end.row+=lineDif}}}}).call(RangeList.prototype);exports.RangeList=RangeList}));ace.define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],(function(acequire,exports,module){"use strict";var Range=acequire("../range").Range;var RangeList=acequire("../range_list").RangeList;var oop=acequire("../lib/oop");var Fold=exports.Fold=function(range,placeholder){this.foldLine=null;this.placeholder=placeholder;this.range=range;this.start=range.start;this.end=range.end;this.sameRow=range.start.row==range.end.row;this.subFolds=this.ranges=[]};oop.inherits(Fold,RangeList);(function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()};this.setFoldLine=function(foldLine){this.foldLine=foldLine;this.subFolds.forEach((function(fold){fold.setFoldLine(foldLine)}))};this.clone=function(){var range=this.range.clone();var fold=new Fold(range,this.placeholder);this.subFolds.forEach((function(subFold){fold.subFolds.push(subFold.clone())}));fold.collapseChildren=this.collapseChildren;return fold};this.addSubFold=function(fold){if(this.range.isEqual(fold))return;if(!this.range.containsRange(fold))throw new Error("A fold can't intersect already existing fold"+fold.range+this.range);consumeRange(fold,this.start);var row=fold.start.row,column=fold.start.column;for(var i=0,cmp=-1;i<this.subFolds.length;i++){cmp=this.subFolds[i].range.compare(row,column);if(cmp!=1)break}var afterStart=this.subFolds[i];if(cmp==0)return afterStart.addSubFold(fold);var row=fold.range.end.row,column=fold.range.end.column;for(var j=i,cmp=-1;j<this.subFolds.length;j++){cmp=this.subFolds[j].range.compare(row,column);if(cmp!=1)break}var afterEnd=this.subFolds[j];if(cmp==0)throw new Error("A fold can't intersect already existing fold"+fold.range+this.range);var consumedFolds=this.subFolds.splice(i,j-i,fold);fold.setFoldLine(this.foldLine);return fold};this.restoreRange=function(range){return restoreRange(range,this.start)}}).call(Fold.prototype);function consumePoint(point,anchor){point.row-=anchor.row;if(point.row==0)point.column-=anchor.column}function consumeRange(range,anchor){consumePoint(range.start,anchor);consumePoint(range.end,anchor)}function restorePoint(point,anchor){if(point.row==0)point.column+=anchor.column;point.row+=anchor.row}function restoreRange(range,anchor){restorePoint(range.start,anchor);restorePoint(range.end,anchor)}}));ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],(function(acequire,exports,module){"use strict";var Range=acequire("../range").Range;var FoldLine=acequire("./fold_line").FoldLine;var Fold=acequire("./fold").Fold;var TokenIterator=acequire("../token_iterator").TokenIterator;function Folding(){this.getFoldAt=function(row,column,side){var foldLine=this.getFoldLine(row);if(!foldLine)return null;var folds=foldLine.folds;for(var i=0;i<folds.length;i++){var fold=folds[i];if(fold.range.contains(row,column)){if(side==1&&fold.range.isEnd(row,column)){continue}else if(side==-1&&fold.range.isStart(row,column)){continue}return fold}}};this.getFoldsInRange=function(range){var start=range.start;var end=range.end;var foldLines=this.$foldData;var foundFolds=[];start.column+=1;end.column-=1;for(var i=0;i<foldLines.length;i++){var cmp=foldLines[i].range.compareRange(range);if(cmp==2){continue}else if(cmp==-2){break}var folds=foldLines[i].folds;for(var j=0;j<folds.length;j++){var fold=folds[j];cmp=fold.range.compareRange(range);if(cmp==-2){break}else if(cmp==2){continue}else if(cmp==42){break}foundFolds.push(fold)}}start.column-=1;end.column+=1;return foundFolds};this.getFoldsInRangeList=function(ranges){if(Array.isArray(ranges)){var folds=[];ranges.forEach((function(range){folds=folds.concat(this.getFoldsInRange(range))}),this)}else{var folds=this.getFoldsInRange(ranges)}return folds};this.getAllFolds=function(){var folds=[];var foldLines=this.$foldData;for(var i=0;i<foldLines.length;i++)for(var j=0;j<foldLines[i].folds.length;j++)folds.push(foldLines[i].folds[j]);return folds};this.getFoldStringAt=function(row,column,trim,foldLine){foldLine=foldLine||this.getFoldLine(row);if(!foldLine)return null;var lastFold={end:{column:0}};var str,fold;for(var i=0;i<foldLine.folds.length;i++){fold=foldLine.folds[i];var cmp=fold.range.compareEnd(row,column);if(cmp==-1){str=this.getLine(fold.start.row).substring(lastFold.end.column,fold.start.column);break}else if(cmp===0){return null}lastFold=fold}if(!str)str=this.getLine(fold.start.row).substring(lastFold.end.column);if(trim==-1)return str.substring(0,column-lastFold.end.column);else if(trim==1)return str.substring(column-lastFold.end.column);else return str};this.getFoldLine=function(docRow,startFoldLine){var foldData=this.$foldData;var i=0;if(startFoldLine)i=foldData.indexOf(startFoldLine);if(i==-1)i=0;for(i;i<foldData.length;i++){var foldLine=foldData[i];if(foldLine.start.row<=docRow&&foldLine.end.row>=docRow){return foldLine}else if(foldLine.end.row>docRow){return null}}return null};this.getNextFoldLine=function(docRow,startFoldLine){var foldData=this.$foldData;var i=0;if(startFoldLine)i=foldData.indexOf(startFoldLine);if(i==-1)i=0;for(i;i<foldData.length;i++){var foldLine=foldData[i];if(foldLine.end.row>=docRow){return foldLine}}return null};this.getFoldedRowCount=function(first,last){var foldData=this.$foldData,rowCount=last-first+1;for(var i=0;i<foldData.length;i++){var foldLine=foldData[i],end=foldLine.end.row,start=foldLine.start.row;if(end>=last){if(start<last){if(start>=first)rowCount-=last-start;else rowCount=0}break}else if(end>=first){if(start>=first)rowCount-=end-start;else rowCount-=end-first+1}}return rowCount};this.$addFoldLine=function(foldLine){this.$foldData.push(foldLine);this.$foldData.sort((function(a,b){return a.start.row-b.start.row}));return foldLine};this.addFold=function(placeholder,range){var foldData=this.$foldData;var added=false;var fold;if(placeholder instanceof Fold)fold=placeholder;else{fold=new Fold(range,placeholder);fold.collapseChildren=range.collapseChildren}this.$clipRangeToDocument(fold.range);var startRow=fold.start.row;var startColumn=fold.start.column;var endRow=fold.end.row;var endColumn=fold.end.column;if(!(startRow<endRow||startRow==endRow&&startColumn<=endColumn-2))throw new Error("The range has to be at least 2 characters width");var startFold=this.getFoldAt(startRow,startColumn,1);var endFold=this.getFoldAt(endRow,endColumn,-1);if(startFold&&endFold==startFold)return startFold.addSubFold(fold);if(startFold&&!startFold.range.isStart(startRow,startColumn))this.removeFold(startFold);if(endFold&&!endFold.range.isEnd(endRow,endColumn))this.removeFold(endFold);var folds=this.getFoldsInRange(fold.range);if(folds.length>0){this.removeFolds(folds);folds.forEach((function(subFold){fold.addSubFold(subFold)}))}for(var i=0;i<foldData.length;i++){var foldLine=foldData[i];if(endRow==foldLine.start.row){foldLine.addFold(fold);added=true;break}else if(startRow==foldLine.end.row){foldLine.addFold(fold);added=true;if(!fold.sameRow){var foldLineNext=foldData[i+1];if(foldLineNext&&foldLineNext.start.row==endRow){foldLine.merge(foldLineNext);break}}break}else if(endRow<=foldLine.start.row){break}}if(!added)foldLine=this.$addFoldLine(new FoldLine(this.$foldData,fold));if(this.$useWrapMode)this.$updateWrapData(foldLine.start.row,foldLine.start.row);else this.$updateRowLengthCache(foldLine.start.row,foldLine.start.row);this.$modified=true;this._signal("changeFold",{data:fold,action:"add"});return fold};this.addFolds=function(folds){folds.forEach((function(fold){this.addFold(fold)}),this)};this.removeFold=function(fold){var foldLine=fold.foldLine;var startRow=foldLine.start.row;var endRow=foldLine.end.row;var foldLines=this.$foldData;var folds=foldLine.folds;if(folds.length==1){foldLines.splice(foldLines.indexOf(foldLine),1)}else if(foldLine.range.isEnd(fold.end.row,fold.end.column)){folds.pop();foldLine.end.row=folds[folds.length-1].end.row;foldLine.end.column=folds[folds.length-1].end.column}else if(foldLine.range.isStart(fold.start.row,fold.start.column)){folds.shift();foldLine.start.row=folds[0].start.row;foldLine.start.column=folds[0].start.column}else if(fold.sameRow){folds.splice(folds.indexOf(fold),1)}else{var newFoldLine=foldLine.split(fold.start.row,fold.start.column);folds=newFoldLine.folds;folds.shift();newFoldLine.start.row=folds[0].start.row;newFoldLine.start.column=folds[0].start.column}if(!this.$updating){if(this.$useWrapMode)this.$updateWrapData(startRow,endRow);else this.$updateRowLengthCache(startRow,endRow)}this.$modified=true;this._signal("changeFold",{data:fold,action:"remove"})};this.removeFolds=function(folds){var cloneFolds=[];for(var i=0;i<folds.length;i++){cloneFolds.push(folds[i])}cloneFolds.forEach((function(fold){this.removeFold(fold)}),this);this.$modified=true};this.expandFold=function(fold){this.removeFold(fold);fold.subFolds.forEach((function(subFold){fold.restoreRange(subFold);this.addFold(subFold)}),this);if(fold.collapseChildren>0){this.foldAll(fold.start.row+1,fold.end.row,fold.collapseChildren-1)}fold.subFolds=[]};this.expandFolds=function(folds){folds.forEach((function(fold){this.expandFold(fold)}),this)};this.unfold=function(location,expandInner){var range,folds;if(location==null){range=new Range(0,0,this.getLength(),0);expandInner=true}else if(typeof location=="number")range=new Range(location,0,location,this.getLine(location).length);else if("row"in location)range=Range.fromPoints(location,location);else range=location;folds=this.getFoldsInRangeList(range);if(expandInner){this.removeFolds(folds)}else{var subFolds=folds;while(subFolds.length){this.expandFolds(subFolds);subFolds=this.getFoldsInRangeList(range)}}if(folds.length)return folds};this.isRowFolded=function(docRow,startFoldRow){return!!this.getFoldLine(docRow,startFoldRow)};this.getRowFoldEnd=function(docRow,startFoldRow){var foldLine=this.getFoldLine(docRow,startFoldRow);return foldLine?foldLine.end.row:docRow};this.getRowFoldStart=function(docRow,startFoldRow){var foldLine=this.getFoldLine(docRow,startFoldRow);return foldLine?foldLine.start.row:docRow};this.getFoldDisplayLine=function(foldLine,endRow,endColumn,startRow,startColumn){if(startRow==null)startRow=foldLine.start.row;if(startColumn==null)startColumn=0;if(endRow==null)endRow=foldLine.end.row;if(endColumn==null)endColumn=this.getLine(endRow).length;var doc=this.doc;var textLine="";foldLine.walk((function(placeholder,row,column,lastColumn){if(row<startRow)return;if(row==startRow){if(column<startColumn)return;lastColumn=Math.max(startColumn,lastColumn)}if(placeholder!=null){textLine+=placeholder}else{textLine+=doc.getLine(row).substring(lastColumn,column)}}),endRow,endColumn);return textLine};this.getDisplayLine=function(row,endColumn,startRow,startColumn){var foldLine=this.getFoldLine(row);if(!foldLine){var line;line=this.doc.getLine(row);return line.substring(startColumn||0,endColumn||line.length)}else{return this.getFoldDisplayLine(foldLine,row,endColumn,startRow,startColumn)}};this.$cloneFoldData=function(){var fd=[];fd=this.$foldData.map((function(foldLine){var folds=foldLine.folds.map((function(fold){return fold.clone()}));return new FoldLine(fd,folds)}));return fd};this.toggleFold=function(tryToUnfold){var selection=this.selection;var range=selection.getRange();var fold;var bracketPos;if(range.isEmpty()){var cursor=range.start;fold=this.getFoldAt(cursor.row,cursor.column);if(fold){this.expandFold(fold);return}else if(bracketPos=this.findMatchingBracket(cursor)){if(range.comparePoint(bracketPos)==1){range.end=bracketPos}else{range.start=bracketPos;range.start.column++;range.end.column--}}else if(bracketPos=this.findMatchingBracket({row:cursor.row,column:cursor.column+1})){if(range.comparePoint(bracketPos)==1)range.end=bracketPos;else range.start=bracketPos;range.start.column++}else{range=this.getCommentFoldRange(cursor.row,cursor.column)||range}}else{var folds=this.getFoldsInRange(range);if(tryToUnfold&&folds.length){this.expandFolds(folds);return}else if(folds.length==1){fold=folds[0]}}if(!fold)fold=this.getFoldAt(range.start.row,range.start.column);if(fold&&fold.range.toString()==range.toString()){this.expandFold(fold);return}var placeholder="...";if(!range.isMultiLine()){placeholder=this.getTextRange(range);if(placeholder.length<4)return;placeholder=placeholder.trim().substring(0,2)+".."}this.addFold(placeholder,range)};this.getCommentFoldRange=function(row,column,dir){var iterator=new TokenIterator(this,row,column);var token=iterator.getCurrentToken();var type=token.type;if(token&&/^comment|string/.test(type)){type=type.match(/comment|string/)[0];if(type=="comment")type+="|doc-start";var re=new RegExp(type);var range=new Range;if(dir!=1){do{token=iterator.stepBackward()}while(token&&re.test(token.type));iterator.stepForward()}range.start.row=iterator.getCurrentTokenRow();range.start.column=iterator.getCurrentTokenColumn()+2;iterator=new TokenIterator(this,row,column);if(dir!=-1){var lastRow=-1;do{token=iterator.stepForward();if(lastRow==-1){var state=this.getState(iterator.$row);if(!re.test(state))lastRow=iterator.$row}else if(iterator.$row>lastRow){break}}while(token&&re.test(token.type));token=iterator.stepBackward()}else token=iterator.getCurrentToken();range.end.row=iterator.getCurrentTokenRow();range.end.column=iterator.getCurrentTokenColumn()+token.value.length-2;return range}};this.foldAll=function(startRow,endRow,depth){if(depth==undefined)depth=1e5;var foldWidgets=this.foldWidgets;if(!foldWidgets)return;endRow=endRow||this.getLength();startRow=startRow||0;for(var row=startRow;row<endRow;row++){if(foldWidgets[row]==null)foldWidgets[row]=this.getFoldWidget(row);if(foldWidgets[row]!="start")continue;var range=this.getFoldWidgetRange(row);if(range&&range.isMultiLine()&&range.end.row<=endRow&&range.start.row>=startRow){row=range.end.row;try{var fold=this.addFold("...",range);if(fold)fold.collapseChildren=depth}catch(e){}}}};this.$foldStyles={manual:1,markbegin:1,markbeginend:1};this.$foldStyle="markbegin";this.setFoldStyle=function(style){if(!this.$foldStyles[style])throw new Error("invalid fold style: "+style+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle==style)return;this.$foldStyle=style;if(style=="manual")this.unfold();var mode=this.$foldMode;this.$setFolding(null);this.$setFolding(mode)};this.$setFolding=function(foldMode){if(this.$foldMode==foldMode)return;this.$foldMode=foldMode;this.off("change",this.$updateFoldWidgets);this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets);this._signal("changeAnnotation");if(!foldMode||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[];this.getFoldWidget=foldMode.getFoldWidget.bind(foldMode,this,this.$foldStyle);this.getFoldWidgetRange=foldMode.getFoldWidgetRange.bind(foldMode,this,this.$foldStyle);this.$updateFoldWidgets=this.updateFoldWidgets.bind(this);this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this);this.on("change",this.$updateFoldWidgets);this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)};this.getParentFoldRangeData=function(row,ignoreCurrent){var fw=this.foldWidgets;if(!fw||ignoreCurrent&&fw[row])return{};var i=row-1,firstRange;while(i>=0){var c=fw[i];if(c==null)c=fw[i]=this.getFoldWidget(i);if(c=="start"){var range=this.getFoldWidgetRange(i);if(!firstRange)firstRange=range;if(range&&range.end.row>=row)break}i--}return{range:i!==-1&&range,firstRange:firstRange}};this.onFoldWidgetClick=function(row,e){e=e.domEvent;var options={children:e.shiftKey,all:e.ctrlKey||e.metaKey,siblings:e.altKey};var range=this.$toggleFoldWidget(row,options);if(!range){var el=e.target||e.srcElement;if(el&&/ace_fold-widget/.test(el.className))el.className+=" ace_invalid"}};this.$toggleFoldWidget=function(row,options){if(!this.getFoldWidget)return;var type=this.getFoldWidget(row);var line=this.getLine(row);var dir=type==="end"?-1:1;var fold=this.getFoldAt(row,dir===-1?0:line.length,dir);if(fold){if(options.children||options.all)this.removeFold(fold);else this.expandFold(fold);return fold}var range=this.getFoldWidgetRange(row,true);if(range&&!range.isMultiLine()){fold=this.getFoldAt(range.start.row,range.start.column,1);if(fold&&range.isEqual(fold.range)){this.removeFold(fold);return fold}}if(options.siblings){var data=this.getParentFoldRangeData(row);if(data.range){var startRow=data.range.start.row+1;var endRow=data.range.end.row}this.foldAll(startRow,endRow,options.all?1e4:0)}else if(options.children){endRow=range?range.end.row:this.getLength();this.foldAll(row+1,endRow,options.all?1e4:0)}else if(range){if(options.all)range.collapseChildren=1e4;this.addFold("...",range)}return range};this.toggleFoldWidget=function(toggleParent){var row=this.selection.getCursor().row;row=this.getRowFoldStart(row);var range=this.$toggleFoldWidget(row,{});if(range)return;var data=this.getParentFoldRangeData(row,true);range=data.range||data.firstRange;if(range){row=range.start.row;var fold=this.getFoldAt(row,this.getLine(row).length,1);if(fold){this.removeFold(fold)}else{this.addFold("...",range)}}};this.updateFoldWidgets=function(delta){var firstRow=delta.start.row;var len=delta.end.row-firstRow;if(len===0){this.foldWidgets[firstRow]=null}else if(delta.action=="remove"){this.foldWidgets.splice(firstRow,len+1,null)}else{var args=Array(len+1);args.unshift(firstRow,1);this.foldWidgets.splice.apply(this.foldWidgets,args)}};this.tokenizerUpdateFoldWidgets=function(e){var rows=e.data;if(rows.first!=rows.last){if(this.foldWidgets.length>rows.first)this.foldWidgets.splice(rows.first,this.foldWidgets.length)}}}exports.Folding=Folding}));ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],(function(acequire,exports,module){"use strict";var TokenIterator=acequire("../token_iterator").TokenIterator;var Range=acequire("../range").Range;function BracketMatch(){this.findMatchingBracket=function(position,chr){if(position.column==0)return null;var charBeforeCursor=chr||this.getLine(position.row).charAt(position.column-1);if(charBeforeCursor=="")return null;var match=charBeforeCursor.match(/([\(\[\{])|([\)\]\}])/);if(!match)return null;if(match[1])return this.$findClosingBracket(match[1],position);else return this.$findOpeningBracket(match[2],position)};this.getBracketRange=function(pos){var line=this.getLine(pos.row);var before=true,range;var chr=line.charAt(pos.column-1);var match=chr&&chr.match(/([\(\[\{])|([\)\]\}])/);if(!match){chr=line.charAt(pos.column);pos={row:pos.row,column:pos.column+1};match=chr&&chr.match(/([\(\[\{])|([\)\]\}])/);before=false}if(!match)return null;if(match[1]){var bracketPos=this.$findClosingBracket(match[1],pos);if(!bracketPos)return null;range=Range.fromPoints(pos,bracketPos);if(!before){range.end.column++;range.start.column--}range.cursor=range.end}else{var bracketPos=this.$findOpeningBracket(match[2],pos);if(!bracketPos)return null;range=Range.fromPoints(bracketPos,pos);if(!before){range.start.column++;range.end.column--}range.cursor=range.start}return range};this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"};this.$findOpeningBracket=function(bracket,position,typeRe){var openBracket=this.$brackets[bracket];var depth=1;var iterator=new TokenIterator(this,position.row,position.column);var token=iterator.getCurrentToken();if(!token)token=iterator.stepForward();if(!token)return;if(!typeRe){typeRe=new RegExp("(\\.?"+token.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+")}var valueIndex=position.column-iterator.getCurrentTokenColumn()-2;var value=token.value;while(true){while(valueIndex>=0){var chr=value.charAt(valueIndex);if(chr==openBracket){depth-=1;if(depth==0){return{row:iterator.getCurrentTokenRow(),column:valueIndex+iterator.getCurrentTokenColumn()}}}else if(chr==bracket){depth+=1}valueIndex-=1}do{token=iterator.stepBackward()}while(token&&!typeRe.test(token.type));if(token==null)break;value=token.value;valueIndex=value.length-1}return null};this.$findClosingBracket=function(bracket,position,typeRe){var closingBracket=this.$brackets[bracket];var depth=1;var iterator=new TokenIterator(this,position.row,position.column);var token=iterator.getCurrentToken();if(!token)token=iterator.stepForward();if(!token)return;if(!typeRe){typeRe=new RegExp("(\\.?"+token.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+")}var valueIndex=position.column-iterator.getCurrentTokenColumn();while(true){var value=token.value;var valueLength=value.length;while(valueIndex<valueLength){var chr=value.charAt(valueIndex);if(chr==closingBracket){depth-=1;if(depth==0){return{row:iterator.getCurrentTokenRow(),column:valueIndex+iterator.getCurrentTokenColumn()}}}else if(chr==bracket){depth+=1}valueIndex+=1}do{token=iterator.stepForward()}while(token&&!typeRe.test(token.type));if(token==null)break;valueIndex=0}return null}}exports.BracketMatch=BracketMatch}));ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],(function(acequire,exports,module){"use strict";var oop=acequire("./lib/oop");var lang=acequire("./lib/lang");var BidiHandler=acequire("./bidihandler").BidiHandler;var config=acequire("./config");var EventEmitter=acequire("./lib/event_emitter").EventEmitter;var Selection=acequire("./selection").Selection;var TextMode=acequire("./mode/text").Mode;var Range=acequire("./range").Range;var Document=acequire("./document").Document;var BackgroundTokenizer=acequire("./background_tokenizer").BackgroundTokenizer;var SearchHighlight=acequire("./search_highlight").SearchHighlight;var EditSession=function(text,mode){this.$breakpoints=[];this.$decorations=[];this.$frontMarkers={};this.$backMarkers={};this.$markerId=1;this.$undoSelect=true;this.$foldData=[];this.id="session"+ ++EditSession.$uid;this.$foldData.toString=function(){return this.join("\n")};this.on("changeFold",this.onChangeFold.bind(this));this.$onChange=this.onChange.bind(this);if(typeof text!="object"||!text.getLine)text=new Document(text);this.$bidiHandler=new BidiHandler(this);this.setDocument(text);this.selection=new Selection(this);config.resetOptions(this);this.setMode(mode);config._signal("session",this)};EditSession.$uid=0;(function(){oop.implement(this,EventEmitter);this.setDocument=function(doc){if(this.doc)this.doc.removeListener("change",this.$onChange);this.doc=doc;doc.on("change",this.$onChange);if(this.bgTokenizer)this.bgTokenizer.setDocument(this.getDocument());this.resetCaches()};this.getDocument=function(){return this.doc};this.$resetRowCache=function(docRow){if(!docRow){this.$docRowCache=[];this.$screenRowCache=[];return}var l=this.$docRowCache.length;var i=this.$getRowCacheIndex(this.$docRowCache,docRow)+1;if(l>i){this.$docRowCache.splice(i,l);this.$screenRowCache.splice(i,l)}};this.$getRowCacheIndex=function(cacheArray,val){var low=0;var hi=cacheArray.length-1;while(low<=hi){var mid=low+hi>>1;var c=cacheArray[mid];if(val>c)low=mid+1;else if(val<c)hi=mid-1;else return mid}return low-1};this.resetCaches=function(){this.$modified=true;this.$wrapData=[];this.$rowLengthCache=[];this.$resetRowCache(0);if(this.bgTokenizer)this.bgTokenizer.start(0)};this.onChangeFold=function(e){var fold=e.data;this.$resetRowCache(fold.start.row)};this.onChange=function(delta){this.$modified=true;this.$bidiHandler.onChange(delta);this.$resetRowCache(delta.start.row);var removedFolds=this.$updateInternalDataOnChange(delta);if(!this.$fromUndo&&this.$undoManager&&!delta.ignore){this.$deltasDoc.push(delta);if(removedFolds&&removedFolds.length!=0){this.$deltasFold.push({action:"removeFolds",folds:removedFolds})}this.$informUndoManager.schedule()}this.bgTokenizer&&this.bgTokenizer.$updateOnChange(delta);this._signal("change",delta)};this.setValue=function(text){this.doc.setValue(text);this.selection.moveTo(0,0);this.$resetRowCache(0);this.$deltas=[];this.$deltasDoc=[];this.$deltasFold=[];this.setUndoManager(this.$undoManager);this.getUndoManager().reset()};this.getValue=this.toString=function(){return this.doc.getValue()};this.getSelection=function(){return this.selection};this.getState=function(row){return this.bgTokenizer.getState(row)};this.getTokens=function(row){return this.bgTokenizer.getTokens(row)};this.getTokenAt=function(row,column){var tokens=this.bgTokenizer.getTokens(row);var token,c=0;if(column==null){var i=tokens.length-1;c=this.getLine(row).length}else{for(var i=0;i<tokens.length;i++){c+=tokens[i].value.length;if(c>=column)break}}token=tokens[i];if(!token)return null;token.index=i;token.start=c-token.value.length;return token};this.setUndoManager=function(undoManager){this.$undoManager=undoManager;this.$deltas=[];this.$deltasDoc=[];this.$deltasFold=[];if(this.$informUndoManager)this.$informUndoManager.cancel();if(undoManager){var self=this;this.$syncInformUndoManager=function(){self.$informUndoManager.cancel();if(self.$deltasFold.length){self.$deltas.push({group:"fold",deltas:self.$deltasFold});self.$deltasFold=[]}if(self.$deltasDoc.length){self.$deltas.push({group:"doc",deltas:self.$deltasDoc});self.$deltasDoc=[]}if(self.$deltas.length>0){undoManager.execute({action:"aceupdate",args:[self.$deltas,self],merge:self.mergeUndoDeltas})}self.mergeUndoDeltas=false;self.$deltas=[]};this.$informUndoManager=lang.delayedCall(this.$syncInformUndoManager)}};this.markUndoGroup=function(){if(this.$syncInformUndoManager)this.$syncInformUndoManager()};this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}};this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager};this.getTabString=function(){if(this.getUseSoftTabs()){return lang.stringRepeat(" ",this.getTabSize())}else{return"\t"}};this.setUseSoftTabs=function(val){this.setOption("useSoftTabs",val)};this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs};this.setTabSize=function(tabSize){this.setOption("tabSize",tabSize)};this.getTabSize=function(){return this.$tabSize};this.isTabStop=function(position){return this.$useSoftTabs&&position.column%this.$tabSize===0};this.setNavigateWithinSoftTabs=function(navigateWithinSoftTabs){this.setOption("navigateWithinSoftTabs",navigateWithinSoftTabs)};this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs};this.$overwrite=false;this.setOverwrite=function(overwrite){this.setOption("overwrite",overwrite)};this.getOverwrite=function(){return this.$overwrite};this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)};this.addGutterDecoration=function(row,className){if(!this.$decorations[row])this.$decorations[row]="";this.$decorations[row]+=" "+className;this._signal("changeBreakpoint",{})};this.removeGutterDecoration=function(row,className){this.$decorations[row]=(this.$decorations[row]||"").replace(" "+className,"");this._signal("changeBreakpoint",{})};this.getBreakpoints=function(){return this.$breakpoints};this.setBreakpoints=function(rows){this.$breakpoints=[];for(var i=0;i<rows.length;i++){this.$breakpoints[rows[i]]="ace_breakpoint"}this._signal("changeBreakpoint",{})};this.clearBreakpoints=function(){this.$breakpoints=[];this._signal("changeBreakpoint",{})};this.setBreakpoint=function(row,className){if(className===undefined)className="ace_breakpoint";if(className)this.$breakpoints[row]=className;else delete this.$breakpoints[row];this._signal("changeBreakpoint",{})};this.clearBreakpoint=function(row){delete this.$breakpoints[row];this._signal("changeBreakpoint",{})};this.addMarker=function(range,clazz,type,inFront){var id=this.$markerId++;var marker={range:range,type:type||"line",renderer:typeof type=="function"?type:null,clazz:clazz,inFront:!!inFront,id:id};if(inFront){this.$frontMarkers[id]=marker;this._signal("changeFrontMarker")}else{this.$backMarkers[id]=marker;this._signal("changeBackMarker")}return id};this.addDynamicMarker=function(marker,inFront){if(!marker.update)return;var id=this.$markerId++;marker.id=id;marker.inFront=!!inFront;if(inFront){this.$frontMarkers[id]=marker;this._signal("changeFrontMarker")}else{this.$backMarkers[id]=marker;this._signal("changeBackMarker")}return marker};this.removeMarker=function(markerId){var marker=this.$frontMarkers[markerId]||this.$backMarkers[markerId];if(!marker)return;var markers=marker.inFront?this.$frontMarkers:this.$backMarkers;if(marker){delete markers[markerId];this._signal(marker.inFront?"changeFrontMarker":"changeBackMarker")}};this.getMarkers=function(inFront){return inFront?this.$frontMarkers:this.$backMarkers};this.highlight=function(re){if(!this.$searchHighlight){var highlight=new SearchHighlight(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(highlight)}this.$searchHighlight.setRegexp(re)};this.highlightLines=function(startRow,endRow,clazz,inFront){if(typeof endRow!="number"){clazz=endRow;endRow=startRow}if(!clazz)clazz="ace_step";var range=new Range(startRow,0,endRow,Infinity);range.id=this.addMarker(range,clazz,"fullLine",inFront);return range};this.setAnnotations=function(annotations){this.$annotations=annotations;this._signal("changeAnnotation",{})};this.getAnnotations=function(){return this.$annotations||[]};this.clearAnnotations=function(){this.setAnnotations([])};this.$detectNewLine=function(text){var match=text.match(/^.*?(\r?\n)/m);if(match){this.$autoNewLine=match[1]}else{this.$autoNewLine="\n"}};this.getWordRange=function(row,column){var line=this.getLine(row);var inToken=false;if(column>0)inToken=!!line.charAt(column-1).match(this.tokenRe);if(!inToken)inToken=!!line.charAt(column).match(this.tokenRe);if(inToken)var re=this.tokenRe;else if(/^\s+$/.test(line.slice(column-1,column+1)))var re=/\s/;else var re=this.nonTokenRe;var start=column;if(start>0){do{start--}while(start>=0&&line.charAt(start).match(re));start++}var end=column;while(end<line.length&&line.charAt(end).match(re)){end++}return new Range(row,start,row,end)};this.getAWordRange=function(row,column){var wordRange=this.getWordRange(row,column);var line=this.getLine(wordRange.end.row);while(line.charAt(wordRange.end.column).match(/[ \t]/)){wordRange.end.column+=1}return wordRange};this.setNewLineMode=function(newLineMode){this.doc.setNewLineMode(newLineMode)};this.getNewLineMode=function(){return this.doc.getNewLineMode()};this.setUseWorker=function(useWorker){this.setOption("useWorker",useWorker)};this.getUseWorker=function(){return this.$useWorker};this.onReloadTokenizer=function(e){var rows=e.data;this.bgTokenizer.start(rows.first);this._signal("tokenizerUpdate",e)};this.$modes={};this.$mode=null;this.$modeId=null;this.setMode=function(mode,cb){if(mode&&typeof mode==="object"){if(mode.getTokenizer)return this.$onChangeMode(mode);var options=mode;var path=options.path}else{path=mode||"ace/mode/text"}if(!this.$modes["ace/mode/text"])this.$modes["ace/mode/text"]=new TextMode;if(this.$modes[path]&&!options){this.$onChangeMode(this.$modes[path]);cb&&cb();return}this.$modeId=path;config.loadModule(["mode",path],function(m){if(this.$modeId!==path)return cb&&cb();if(this.$modes[path]&&!options){this.$onChangeMode(this.$modes[path])}else if(m&&m.Mode){m=new m.Mode(options);if(!options){this.$modes[path]=m;m.$id=path}this.$onChangeMode(m)}cb&&cb()}.bind(this));if(!this.$mode)this.$onChangeMode(this.$modes["ace/mode/text"],true)};this.$onChangeMode=function(mode,$isPlaceholder){if(!$isPlaceholder)this.$modeId=mode.$id;if(this.$mode===mode)return;this.$mode=mode;this.$stopWorker();if(this.$useWorker)this.$startWorker();var tokenizer=mode.getTokenizer();if(tokenizer.addEventListener!==undefined){var onReloadTokenizer=this.onReloadTokenizer.bind(this);tokenizer.addEventListener("update",onReloadTokenizer)}if(!this.bgTokenizer){this.bgTokenizer=new BackgroundTokenizer(tokenizer);var _self=this;this.bgTokenizer.addEventListener("update",(function(e){_self._signal("tokenizerUpdate",e)}))}else{this.bgTokenizer.setTokenizer(tokenizer)}this.bgTokenizer.setDocument(this.getDocument());this.tokenRe=mode.tokenRe;this.nonTokenRe=mode.nonTokenRe;if(!$isPlaceholder){if(mode.attachToSession)mode.attachToSession(this);this.$options.wrapMethod.set.call(this,this.$wrapMethod);this.$setFolding(mode.foldingRules);this.bgTokenizer.start(0);this._emit("changeMode")}};this.$stopWorker=function(){if(this.$worker){this.$worker.terminate();this.$worker=null}};this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){config.warn("Could not load worker",e);this.$worker=null}};this.getMode=function(){return this.$mode};this.$scrollTop=0;this.setScrollTop=function(scrollTop){if(this.$scrollTop===scrollTop||isNaN(scrollTop))return;this.$scrollTop=scrollTop;this._signal("changeScrollTop",scrollTop)};this.getScrollTop=function(){return this.$scrollTop};this.$scrollLeft=0;this.setScrollLeft=function(scrollLeft){if(this.$scrollLeft===scrollLeft||isNaN(scrollLeft))return;this.$scrollLeft=scrollLeft;this._signal("changeScrollLeft",scrollLeft)};this.getScrollLeft=function(){return this.$scrollLeft};this.getScreenWidth=function(){this.$computeWidth();if(this.lineWidgets)return Math.max(this.getLineWidgetMaxWidth(),this.screenWidth);return this.screenWidth};this.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var width=0;this.lineWidgets.forEach((function(w){if(w&&w.screenWidth>width)width=w.screenWidth}));return this.lineWidgetWidth=width};this.$computeWidth=function(force){if(this.$modified||force){this.$modified=false;if(this.$useWrapMode)return this.screenWidth=this.$wrapLimit;var lines=this.doc.getAllLines();var cache=this.$rowLengthCache;var longestScreenLine=0;var foldIndex=0;var foldLine=this.$foldData[foldIndex];var foldStart=foldLine?foldLine.start.row:Infinity;var len=lines.length;for(var i=0;i<len;i++){if(i>foldStart){i=foldLine.end.row+1;if(i>=len)break;foldLine=this.$foldData[foldIndex++];foldStart=foldLine?foldLine.start.row:Infinity}if(cache[i]==null)cache[i]=this.$getStringScreenWidth(lines[i])[0];if(cache[i]>longestScreenLine)longestScreenLine=cache[i]}this.screenWidth=longestScreenLine}};this.getLine=function(row){return this.doc.getLine(row)};this.getLines=function(firstRow,lastRow){return this.doc.getLines(firstRow,lastRow)};this.getLength=function(){return this.doc.getLength()};this.getTextRange=function(range){return this.doc.getTextRange(range||this.selection.getRange())};this.insert=function(position,text){return this.doc.insert(position,text)};this.remove=function(range){return this.doc.remove(range)};this.removeFullLines=function(firstRow,lastRow){return this.doc.removeFullLines(firstRow,lastRow)};this.undoChanges=function(deltas,dontSelect){if(!deltas.length)return;this.$fromUndo=true;var lastUndoRange=null;for(var i=deltas.length-1;i!=-1;i--){var delta=deltas[i];if(delta.group=="doc"){this.doc.revertDeltas(delta.deltas);lastUndoRange=this.$getUndoSelection(delta.deltas,true,lastUndoRange)}else{delta.deltas.forEach((function(foldDelta){this.addFolds(foldDelta.folds)}),this)}}this.$fromUndo=false;lastUndoRange&&this.$undoSelect&&!dontSelect&&this.selection.setSelectionRange(lastUndoRange);return lastUndoRange};this.redoChanges=function(deltas,dontSelect){if(!deltas.length)return;this.$fromUndo=true;var lastUndoRange=null;for(var i=0;i<deltas.length;i++){var delta=deltas[i];if(delta.group=="doc"){this.doc.applyDeltas(delta.deltas);lastUndoRange=this.$getUndoSelection(delta.deltas,false,lastUndoRange)}}this.$fromUndo=false;lastUndoRange&&this.$undoSelect&&!dontSelect&&this.selection.setSelectionRange(lastUndoRange);return lastUndoRange};this.setUndoSelect=function(enable){this.$undoSelect=enable};this.$getUndoSelection=function(deltas,isUndo,lastUndoRange){function isInsert(delta){return isUndo?delta.action!=="insert":delta.action==="insert"}var delta=deltas[0];var range,point;var lastDeltaIsInsert=false;if(isInsert(delta)){range=Range.fromPoints(delta.start,delta.end);lastDeltaIsInsert=true}else{range=Range.fromPoints(delta.start,delta.start);lastDeltaIsInsert=false}for(var i=1;i<deltas.length;i++){delta=deltas[i];if(isInsert(delta)){point=delta.start;if(range.compare(point.row,point.column)==-1){range.setStart(point)}point=delta.end;if(range.compare(point.row,point.column)==1){range.setEnd(point)}lastDeltaIsInsert=true}else{point=delta.start;if(range.compare(point.row,point.column)==-1){range=Range.fromPoints(delta.start,delta.start)}lastDeltaIsInsert=false}}if(lastUndoRange!=null){if(Range.comparePoints(lastUndoRange.start,range.start)===0){lastUndoRange.start.column+=range.end.column-range.start.column;lastUndoRange.end.column+=range.end.column-range.start.column}var cmp=lastUndoRange.compareRange(range);if(cmp==1){range.setStart(lastUndoRange.start)}else if(cmp==-1){range.setEnd(lastUndoRange.end)}}return range};this.replace=function(range,text){return this.doc.replace(range,text)};this.moveText=function(fromRange,toPosition,copy){var text=this.getTextRange(fromRange);var folds=this.getFoldsInRange(fromRange);var toRange=Range.fromPoints(toPosition,toPosition);if(!copy){this.remove(fromRange);var rowDiff=fromRange.start.row-fromRange.end.row;var collDiff=rowDiff?-fromRange.end.column:fromRange.start.column-fromRange.end.column;if(collDiff){if(toRange.start.row==fromRange.end.row&&toRange.start.column>fromRange.end.column)toRange.start.column+=collDiff;if(toRange.end.row==fromRange.end.row&&toRange.end.column>fromRange.end.column)toRange.end.column+=collDiff}if(rowDiff&&toRange.start.row>=fromRange.end.row){toRange.start.row+=rowDiff;toRange.end.row+=rowDiff}}toRange.end=this.insert(toRange.start,text);if(folds.length){var oldStart=fromRange.start;var newStart=toRange.start;var rowDiff=newStart.row-oldStart.row;var collDiff=newStart.column-oldStart.column;this.addFolds(folds.map((function(x){x=x.clone();if(x.start.row==oldStart.row)x.start.column+=collDiff;if(x.end.row==oldStart.row)x.end.column+=collDiff;x.start.row+=rowDiff;x.end.row+=rowDiff;return x})))}return toRange};this.indentRows=function(startRow,endRow,indentString){indentString=indentString.replace(/\t/g,this.getTabString());for(var row=startRow;row<=endRow;row++)this.doc.insertInLine({row:row,column:0},indentString)};this.outdentRows=function(range){var rowRange=range.collapseRows();var deleteRange=new Range(0,0,0,0);var size=this.getTabSize();for(var i=rowRange.start.row;i<=rowRange.end.row;++i){var line=this.getLine(i);deleteRange.start.row=i;deleteRange.end.row=i;for(var j=0;j<size;++j)if(line.charAt(j)!=" ")break;if(j<size&&line.charAt(j)=="\t"){deleteRange.start.column=j;deleteRange.end.column=j+1}else{deleteRange.start.column=0;deleteRange.end.column=j}this.remove(deleteRange)}};this.$moveLines=function(firstRow,lastRow,dir){firstRow=this.getRowFoldStart(firstRow);lastRow=this.getRowFoldEnd(lastRow);if(dir<0){var row=this.getRowFoldStart(firstRow+dir);if(row<0)return 0;var diff=row-firstRow}else if(dir>0){var row=this.getRowFoldEnd(lastRow+dir);if(row>this.doc.getLength()-1)return 0;var diff=row-lastRow}else{firstRow=this.$clipRowToDocument(firstRow);lastRow=this.$clipRowToDocument(lastRow);var diff=lastRow-firstRow+1}var range=new Range(firstRow,0,lastRow,Number.MAX_VALUE);var folds=this.getFoldsInRange(range).map((function(x){x=x.clone();x.start.row+=diff;x.end.row+=diff;return x}));var lines=dir==0?this.doc.getLines(firstRow,lastRow):this.doc.removeFullLines(firstRow,lastRow);this.doc.insertFullLines(firstRow+diff,lines);folds.length&&this.addFolds(folds);return diff};this.moveLinesUp=function(firstRow,lastRow){return this.$moveLines(firstRow,lastRow,-1)};this.moveLinesDown=function(firstRow,lastRow){return this.$moveLines(firstRow,lastRow,1)};this.duplicateLines=function(firstRow,lastRow){return this.$moveLines(firstRow,lastRow,0)};this.$clipRowToDocument=function(row){return Math.max(0,Math.min(row,this.doc.getLength()-1))};this.$clipColumnToRow=function(row,column){if(column<0)return 0;return Math.min(this.doc.getLine(row).length,column)};this.$clipPositionToDocument=function(row,column){column=Math.max(0,column);if(row<0){row=0;column=0}else{var len=this.doc.getLength();if(row>=len){row=len-1;column=this.doc.getLine(len-1).length}else{column=Math.min(this.doc.getLine(row).length,column)}}return{row:row,column:column}};this.$clipRangeToDocument=function(range){if(range.start.row<0){range.start.row=0;range.start.column=0}else{range.start.column=this.$clipColumnToRow(range.start.row,range.start.column)}var len=this.doc.getLength()-1;if(range.end.row>len){range.end.row=len;range.end.column=this.doc.getLine(len).length}else{range.end.column=this.$clipColumnToRow(range.end.row,range.end.column)}return range};this.$wrapLimit=80;this.$useWrapMode=false;this.$wrapLimitRange={min:null,max:null};this.setUseWrapMode=function(useWrapMode){if(useWrapMode!=this.$useWrapMode){this.$useWrapMode=useWrapMode;this.$modified=true;this.$resetRowCache(0);if(useWrapMode){var len=this.getLength();this.$wrapData=Array(len);this.$updateWrapData(0,len-1)}this._signal("changeWrapMode")}};this.getUseWrapMode=function(){return this.$useWrapMode};this.setWrapLimitRange=function(min,max){if(this.$wrapLimitRange.min!==min||this.$wrapLimitRange.max!==max){this.$wrapLimitRange={min:min,max:max};this.$modified=true;this.$bidiHandler.markAsDirty();if(this.$useWrapMode)this._signal("changeWrapMode")}};this.adjustWrapLimit=function(desiredLimit,$printMargin){var limits=this.$wrapLimitRange;if(limits.max<0)limits={min:$printMargin,max:$printMargin};var wrapLimit=this.$constrainWrapLimit(desiredLimit,limits.min,limits.max);if(wrapLimit!=this.$wrapLimit&&wrapLimit>1){this.$wrapLimit=wrapLimit;this.$modified=true;if(this.$useWrapMode){this.$updateWrapData(0,this.getLength()-1);this.$resetRowCache(0);this._signal("changeWrapLimit")}return true}return false};this.$constrainWrapLimit=function(wrapLimit,min,max){if(min)wrapLimit=Math.max(min,wrapLimit);if(max)wrapLimit=Math.min(max,wrapLimit);return wrapLimit};this.getWrapLimit=function(){return this.$wrapLimit};this.setWrapLimit=function(limit){this.setWrapLimitRange(limit,limit)};this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}};this.$updateInternalDataOnChange=function(delta){var useWrapMode=this.$useWrapMode;var action=delta.action;var start=delta.start;var end=delta.end;var firstRow=start.row;var lastRow=end.row;var len=lastRow-firstRow;var removedFolds=null;this.$updating=true;if(len!=0){if(action==="remove"){this[useWrapMode?"$wrapData":"$rowLengthCache"].splice(firstRow,len);var foldLines=this.$foldData;removedFolds=this.getFoldsInRange(delta);this.removeFolds(removedFolds);var foldLine=this.getFoldLine(end.row);var idx=0;if(foldLine){foldLine.addRemoveChars(end.row,end.column,start.column-end.column);foldLine.shiftRow(-len);var foldLineBefore=this.getFoldLine(firstRow);if(foldLineBefore&&foldLineBefore!==foldLine){foldLineBefore.merge(foldLine);foldLine=foldLineBefore}idx=foldLines.indexOf(foldLine)+1}for(idx;idx<foldLines.length;idx++){var foldLine=foldLines[idx];if(foldLine.start.row>=end.row){foldLine.shiftRow(-len)}}lastRow=firstRow}else{var args=Array(len);args.unshift(firstRow,0);var arr=useWrapMode?this.$wrapData:this.$rowLengthCache;arr.splice.apply(arr,args);var foldLines=this.$foldData;var foldLine=this.getFoldLine(firstRow);var idx=0;if(foldLine){var cmp=foldLine.range.compareInside(start.row,start.column);if(cmp==0){foldLine=foldLine.split(start.row,start.column);if(foldLine){foldLine.shiftRow(len);foldLine.addRemoveChars(lastRow,0,end.column-start.column)}}else if(cmp==-1){foldLine.addRemoveChars(firstRow,0,end.column-start.column);foldLine.shiftRow(len)}idx=foldLines.indexOf(foldLine)+1}for(idx;idx<foldLines.length;idx++){var foldLine=foldLines[idx];if(foldLine.start.row>=firstRow){foldLine.shiftRow(len)}}}}else{len=Math.abs(delta.start.column-delta.end.column);if(action==="remove"){removedFolds=this.getFoldsInRange(delta);this.removeFolds(removedFolds);len=-len}var foldLine=this.getFoldLine(firstRow);if(foldLine){foldLine.addRemoveChars(firstRow,start.column,len)}}if(useWrapMode&&this.$wrapData.length!=this.doc.getLength()){console.error("doc.getLength() and $wrapData.length have to be the same!")}this.$updating=false;if(useWrapMode)this.$updateWrapData(firstRow,lastRow);else this.$updateRowLengthCache(firstRow,lastRow);return removedFolds};this.$updateRowLengthCache=function(firstRow,lastRow,b){this.$rowLengthCache[firstRow]=null;this.$rowLengthCache[lastRow]=null};this.$updateWrapData=function(firstRow,lastRow){var lines=this.doc.getAllLines();var tabSize=this.getTabSize();var wrapData=this.$wrapData;var wrapLimit=this.$wrapLimit;var tokens;var foldLine;var row=firstRow;lastRow=Math.min(lastRow,lines.length-1);while(row<=lastRow){foldLine=this.getFoldLine(row,foldLine);if(!foldLine){tokens=this.$getDisplayTokens(lines[row]);wrapData[row]=this.$computeWrapSplits(tokens,wrapLimit,tabSize);row++}else{tokens=[];foldLine.walk(function(placeholder,row,column,lastColumn){var walkTokens;if(placeholder!=null){walkTokens=this.$getDisplayTokens(placeholder,tokens.length);walkTokens[0]=PLACEHOLDER_START;for(var i=1;i<walkTokens.length;i++){walkTokens[i]=PLACEHOLDER_BODY}}else{walkTokens=this.$getDisplayTokens(lines[row].substring(lastColumn,column),tokens.length)}tokens=tokens.concat(walkTokens)}.bind(this),foldLine.end.row,lines[foldLine.end.row].length+1);wrapData[foldLine.start.row]=this.$computeWrapSplits(tokens,wrapLimit,tabSize);row=foldLine.end.row+1}}};var CHAR=1,CHAR_EXT=2,PLACEHOLDER_START=3,PLACEHOLDER_BODY=4,PUNCTUATION=9,SPACE=10,TAB=11,TAB_SPACE=12;this.$computeWrapSplits=function(tokens,wrapLimit,tabSize){if(tokens.length==0){return[]}var splits=[];var displayLength=tokens.length;var lastSplit=0,lastDocSplit=0;var isCode=this.$wrapAsCode;var indentedSoftWrap=this.$indentedSoftWrap;var maxIndent=wrapLimit<=Math.max(2*tabSize,8)||indentedSoftWrap===false?0:Math.floor(wrapLimit/2);function getWrapIndent(){var indentation=0;if(maxIndent===0)return indentation;if(indentedSoftWrap){for(var i=0;i<tokens.length;i++){var token=tokens[i];if(token==SPACE)indentation+=1;else if(token==TAB)indentation+=tabSize;else if(token==TAB_SPACE)continue;else break}}if(isCode&&indentedSoftWrap!==false)indentation+=tabSize;return Math.min(indentation,maxIndent)}function addSplit(screenPos){var displayed=tokens.slice(lastSplit,screenPos);var len=displayed.length;displayed.join("").replace(/12/g,(function(){len-=1})).replace(/2/g,(function(){len-=1}));if(!splits.length){indent=getWrapIndent();splits.indent=indent}lastDocSplit+=len;splits.push(lastDocSplit);lastSplit=screenPos}var indent=0;while(displayLength-lastSplit>wrapLimit-indent){var split=lastSplit+wrapLimit-indent;if(tokens[split-1]>=SPACE&&tokens[split]>=SPACE){addSplit(split);continue}if(tokens[split]==PLACEHOLDER_START||tokens[split]==PLACEHOLDER_BODY){for(split;split!=lastSplit-1;split--){if(tokens[split]==PLACEHOLDER_START){break}}if(split>lastSplit){addSplit(split);continue}split=lastSplit+wrapLimit;for(split;split<tokens.length;split++){if(tokens[split]!=PLACEHOLDER_BODY){break}}if(split==tokens.length){break}addSplit(split);continue}var minSplit=Math.max(split-(wrapLimit-(wrapLimit>>2)),lastSplit-1);while(split>minSplit&&tokens[split]<PLACEHOLDER_START){split--}if(isCode){while(split>minSplit&&tokens[split]<PLACEHOLDER_START){split--}while(split>minSplit&&tokens[split]==PUNCTUATION){split--}}else{while(split>minSplit&&tokens[split]<SPACE){split--}}if(split>minSplit){addSplit(++split);continue}split=lastSplit+wrapLimit;if(tokens[split]==CHAR_EXT)split--;addSplit(split-indent)}return splits};this.$getDisplayTokens=function(str,offset){var arr=[];var tabSize;offset=offset||0;for(var i=0;i<str.length;i++){var c=str.charCodeAt(i);if(c==9){tabSize=this.getScreenTabSize(arr.length+offset);arr.push(TAB);for(var n=1;n<tabSize;n++){arr.push(TAB_SPACE)}}else if(c==32){arr.push(SPACE)}else if(c>39&&c<48||c>57&&c<64){arr.push(PUNCTUATION)}else if(c>=4352&&isFullWidth(c)){arr.push(CHAR,CHAR_EXT)}else{arr.push(CHAR)}}return arr};this.$getStringScreenWidth=function(str,maxScreenColumn,screenColumn){if(maxScreenColumn==0)return[0,0];if(maxScreenColumn==null)maxScreenColumn=Infinity;screenColumn=screenColumn||0;var c,column;for(column=0;column<str.length;column++){c=str.charCodeAt(column);if(c==9){screenColumn+=this.getScreenTabSize(screenColumn)}else if(c>=4352&&isFullWidth(c)){screenColumn+=2}else{screenColumn+=1}if(screenColumn>maxScreenColumn){break}}return[screenColumn,column]};this.lineWidgets=null;this.getRowLength=function(row){if(this.lineWidgets)var h=this.lineWidgets[row]&&this.lineWidgets[row].rowCount||0;else h=0;if(!this.$useWrapMode||!this.$wrapData[row]){return 1+h}else{return this.$wrapData[row].length+1+h}};this.getRowLineCount=function(row){if(!this.$useWrapMode||!this.$wrapData[row]){return 1}else{return this.$wrapData[row].length+1}};this.getRowWrapIndent=function(screenRow){if(this.$useWrapMode){var pos=this.screenToDocumentPosition(screenRow,Number.MAX_VALUE);var splits=this.$wrapData[pos.row];return splits.length&&splits[0]<pos.column?splits.indent:0}else{return 0}};this.getScreenLastRowColumn=function(screenRow){var pos=this.screenToDocumentPosition(screenRow,Number.MAX_VALUE);return this.documentToScreenColumn(pos.row,pos.column)};this.getDocumentLastRowColumn=function(docRow,docColumn){var screenRow=this.documentToScreenRow(docRow,docColumn);return this.getScreenLastRowColumn(screenRow)};this.getDocumentLastRowColumnPosition=function(docRow,docColumn){var screenRow=this.documentToScreenRow(docRow,docColumn);return this.screenToDocumentPosition(screenRow,Number.MAX_VALUE/10)};this.getRowSplitData=function(row){if(!this.$useWrapMode){return undefined}else{return this.$wrapData[row]}};this.getScreenTabSize=function(screenColumn){return this.$tabSize-screenColumn%this.$tabSize};this.screenToDocumentRow=function(screenRow,screenColumn){return this.screenToDocumentPosition(screenRow,screenColumn).row};this.screenToDocumentColumn=function(screenRow,screenColumn){return this.screenToDocumentPosition(screenRow,screenColumn).column};this.screenToDocumentPosition=function(screenRow,screenColumn,offsetX){if(screenRow<0)return{row:0,column:0};var line;var docRow=0;var docColumn=0;var column;var row=0;var rowLength=0;var rowCache=this.$screenRowCache;var i=this.$getRowCacheIndex(rowCache,screenRow);var l=rowCache.length;if(l&&i>=0){var row=rowCache[i];var docRow=this.$docRowCache[i];var doCache=screenRow>rowCache[l-1]}else{var doCache=!l}var maxRow=this.getLength()-1;var foldLine=this.getNextFoldLine(docRow);var foldStart=foldLine?foldLine.start.row:Infinity;while(row<=screenRow){rowLength=this.getRowLength(docRow);if(row+rowLength>screenRow||docRow>=maxRow){break}else{row+=rowLength;docRow++;if(docRow>foldStart){docRow=foldLine.end.row+1;foldLine=this.getNextFoldLine(docRow,foldLine);foldStart=foldLine?foldLine.start.row:Infinity}}if(doCache){this.$docRowCache.push(docRow);this.$screenRowCache.push(row)}}if(foldLine&&foldLine.start.row<=docRow){line=this.getFoldDisplayLine(foldLine);docRow=foldLine.start.row}else if(row+rowLength<=screenRow||docRow>maxRow){return{row:maxRow,column:this.getLine(maxRow).length}}else{line=this.getLine(docRow);foldLine=null}var wrapIndent=0,splitIndex=Math.floor(screenRow-row);if(this.$useWrapMode){var splits=this.$wrapData[docRow];if(splits){column=splits[splitIndex];if(splitIndex>0&&splits.length){wrapIndent=splits.indent;docColumn=splits[splitIndex-1]||splits[splits.length-1];line=line.substring(docColumn)}}}if(offsetX!==undefined&&this.$bidiHandler.isBidiRow(row+splitIndex,docRow,splitIndex))screenColumn=this.$bidiHandler.offsetToCol(offsetX);docColumn+=this.$getStringScreenWidth(line,screenColumn-wrapIndent)[1];if(this.$useWrapMode&&docColumn>=column)docColumn=column-1;if(foldLine)return foldLine.idxToPosition(docColumn);return{row:docRow,column:docColumn}};this.documentToScreenPosition=function(docRow,docColumn){if(typeof docColumn==="undefined")var pos=this.$clipPositionToDocument(docRow.row,docRow.column);else pos=this.$clipPositionToDocument(docRow,docColumn);docRow=pos.row;docColumn=pos.column;var screenRow=0;var foldStartRow=null;var fold=null;fold=this.getFoldAt(docRow,docColumn,1);if(fold){docRow=fold.start.row;docColumn=fold.start.column}var rowEnd,row=0;var rowCache=this.$docRowCache;var i=this.$getRowCacheIndex(rowCache,docRow);var l=rowCache.length;if(l&&i>=0){var row=rowCache[i];var screenRow=this.$screenRowCache[i];var doCache=docRow>rowCache[l-1]}else{var doCache=!l}var foldLine=this.getNextFoldLine(row);var foldStart=foldLine?foldLine.start.row:Infinity;while(row<docRow){if(row>=foldStart){rowEnd=foldLine.end.row+1;if(rowEnd>docRow)break;foldLine=this.getNextFoldLine(rowEnd,foldLine);foldStart=foldLine?foldLine.start.row:Infinity}else{rowEnd=row+1}screenRow+=this.getRowLength(row);row=rowEnd;if(doCache){this.$docRowCache.push(row);this.$screenRowCache.push(screenRow)}}var textLine="";if(foldLine&&row>=foldStart){textLine=this.getFoldDisplayLine(foldLine,docRow,docColumn);foldStartRow=foldLine.start.row}else{textLine=this.getLine(docRow).substring(0,docColumn);foldStartRow=docRow}var wrapIndent=0;if(this.$useWrapMode){var wrapRow=this.$wrapData[foldStartRow];if(wrapRow){var screenRowOffset=0;while(textLine.length>=wrapRow[screenRowOffset]){screenRow++;screenRowOffset++}textLine=textLine.substring(wrapRow[screenRowOffset-1]||0,textLine.length);wrapIndent=screenRowOffset>0?wrapRow.indent:0}}return{row:screenRow,column:wrapIndent+this.$getStringScreenWidth(textLine)[0]}};this.documentToScreenColumn=function(row,docColumn){return this.documentToScreenPosition(row,docColumn).column};this.documentToScreenRow=function(docRow,docColumn){return this.documentToScreenPosition(docRow,docColumn).row};this.getScreenLength=function(){var screenRows=0;var fold=null;if(!this.$useWrapMode){screenRows=this.getLength();var foldData=this.$foldData;for(var i=0;i<foldData.length;i++){fold=foldData[i];screenRows-=fold.end.row-fold.start.row}}else{var lastRow=this.$wrapData.length;var row=0,i=0;var fold=this.$foldData[i++];var foldStart=fold?fold.start.row:Infinity;while(row<lastRow){var splits=this.$wrapData[row];screenRows+=splits?splits.length+1:1;row++;if(row>foldStart){row=fold.end.row+1;fold=this.$foldData[i++];foldStart=fold?fold.start.row:Infinity}}}if(this.lineWidgets)screenRows+=this.$getWidgetScreenLength();return screenRows};this.$setFontMetrics=function(fm){if(!this.$enableVarChar)return;this.$getStringScreenWidth=function(str,maxScreenColumn,screenColumn){if(maxScreenColumn===0)return[0,0];if(!maxScreenColumn)maxScreenColumn=Infinity;screenColumn=screenColumn||0;var c,column;for(column=0;column<str.length;column++){c=str.charAt(column);if(c==="\t"){screenColumn+=this.getScreenTabSize(screenColumn)}else{screenColumn+=fm.getCharacterWidth(c)}if(screenColumn>maxScreenColumn){break}}return[screenColumn,column]}};this.destroy=function(){if(this.bgTokenizer){this.bgTokenizer.setDocument(null);this.bgTokenizer=null}this.$stopWorker()};this.isFullWidth=isFullWidth;function isFullWidth(c){if(c<4352)return false;return c>=4352&&c<=4447||c>=4515&&c<=4519||c>=4602&&c<=4607||c>=9001&&c<=9002||c>=11904&&c<=11929||c>=11931&&c<=12019||c>=12032&&c<=12245||c>=12272&&c<=12283||c>=12288&&c<=12350||c>=12353&&c<=12438||c>=12441&&c<=12543||c>=12549&&c<=12589||c>=12593&&c<=12686||c>=12688&&c<=12730||c>=12736&&c<=12771||c>=12784&&c<=12830||c>=12832&&c<=12871||c>=12880&&c<=13054||c>=13056&&c<=19903||c>=19968&&c<=42124||c>=42128&&c<=42182||c>=43360&&c<=43388||c>=44032&&c<=55203||c>=55216&&c<=55238||c>=55243&&c<=55291||c>=63744&&c<=64255||c>=65040&&c<=65049||c>=65072&&c<=65106||c>=65108&&c<=65126||c>=65128&&c<=65131||c>=65281&&c<=65376||c>=65504&&c<=65510}}).call(EditSession.prototype);acequire("./edit_session/folding").Folding.call(EditSession.prototype);acequire("./edit_session/bracket_match").BracketMatch.call(EditSession.prototype);config.defineOptions(EditSession.prototype,"session",{wrap:{set:function(value){if(!value||value=="off")value=false;else if(value=="free")value=true;else if(value=="printMargin")value=-1;else if(typeof value=="string")value=parseInt(value,10)||false;if(this.$wrap==value)return;this.$wrap=value;if(!value){this.setUseWrapMode(false)}else{var col=typeof value=="number"?value:null;this.setWrapLimitRange(col,col);this.setUseWrapMode(true)}},get:function(){if(this.getUseWrapMode()){if(this.$wrap==-1)return"printMargin";if(!this.getWrapLimitRange().min)return"free";return this.$wrap}return"off"},handlesSet:true},wrapMethod:{set:function(val){val=val=="auto"?this.$mode.type!="text":val!="text";if(val!=this.$wrapAsCode){this.$wrapAsCode=val;if(this.$useWrapMode){this.$modified=true;this.$resetRowCache(0);this.$updateWrapData(0,this.getLength()-1)}}},initialValue:"auto"},indentedSoftWrap:{initialValue:true},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(useWorker){this.$useWorker=useWorker;this.$stopWorker();if(useWorker)this.$startWorker()},initialValue:true},useSoftTabs:{initialValue:true},tabSize:{set:function(tabSize){if(isNaN(tabSize)||this.$tabSize===tabSize)return;this.$modified=true;this.$rowLengthCache=[];this.$tabSize=tabSize;this._signal("changeTabSize")},initialValue:4,handlesSet:true},navigateWithinSoftTabs:{initialValue:false},overwrite:{set:function(val){this._signal("changeOverwrite")},initialValue:false},newLineMode:{set:function(val){this.doc.setNewLineMode(val)},get:function(){return this.doc.getNewLineMode()},handlesSet:true},mode:{set:function(val){this.setMode(val)},get:function(){return this.$modeId}}});exports.EditSession=EditSession}));ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(acequire,exports,module){"use strict";var lang=acequire("./lib/lang");var oop=acequire("./lib/oop");var Range=acequire("./range").Range;var Search=function(){this.$options={}};(function(){this.set=function(options){oop.mixin(this.$options,options);return this};this.getOptions=function(){return lang.copyObject(this.$options)};this.setOptions=function(options){this.$options=options};this.find=function(session){var options=this.$options;var iterator=this.$matchIterator(session,options);if(!iterator)return false;var firstRange=null;iterator.forEach((function(sr,sc,er,ec){firstRange=new Range(sr,sc,er,ec);if(sc==ec&&options.start&&options.start.start&&options.skipCurrent!=false&&firstRange.isEqual(options.start)){firstRange=null;return false}return true}));return firstRange};this.findAll=function(session){var options=this.$options;if(!options.needle)return[];this.$assembleRegExp(options);var range=options.range;var lines=range?session.getLines(range.start.row,range.end.row):session.doc.getAllLines();var ranges=[];var re=options.re;if(options.$isMultiLine){var len=re.length;var maxRow=lines.length-len;var prevRange;outer:for(var row=re.offset||0;row<=maxRow;row++){for(var j=0;j<len;j++)if(lines[row+j].search(re[j])==-1)continue outer;var startLine=lines[row];var line=lines[row+len-1];var startIndex=startLine.length-startLine.match(re[0])[0].length;var endIndex=line.match(re[len-1])[0].length;if(prevRange&&prevRange.end.row===row&&prevRange.end.column>startIndex){continue}ranges.push(prevRange=new Range(row,startIndex,row+len-1,endIndex));if(len>2)row=row+len-2}}else{for(var i=0;i<lines.length;i++){var matches=lang.getMatchOffsets(lines[i],re);for(var j=0;j<matches.length;j++){var match=matches[j];ranges.push(new Range(i,match.offset,i,match.offset+match.length))}}}if(range){var startColumn=range.start.column;var endColumn=range.start.column;var i=0,j=ranges.length-1;while(i<j&&ranges[i].start.column<startColumn&&ranges[i].start.row==range.start.row)i++;while(i<j&&ranges[j].end.column>endColumn&&ranges[j].end.row==range.end.row)j--;ranges=ranges.slice(i,j+1);for(i=0,j=ranges.length;i<j;i++){ranges[i].start.row+=range.start.row;ranges[i].end.row+=range.start.row}}return ranges};this.replace=function(input,replacement){var options=this.$options;var re=this.$assembleRegExp(options);if(options.$isMultiLine)return replacement;if(!re)return;var match=re.exec(input);if(!match||match[0].length!=input.length)return null;replacement=input.replace(re,replacement);if(options.preserveCase){replacement=replacement.split("");for(var i=Math.min(input.length,input.length);i--;){var ch=input[i];if(ch&&ch.toLowerCase()!=ch)replacement[i]=replacement[i].toUpperCase();else replacement[i]=replacement[i].toLowerCase()}replacement=replacement.join("")}return replacement};this.$assembleRegExp=function(options,$disableFakeMultiline){if(options.needle instanceof RegExp)return options.re=options.needle;var needle=options.needle;if(!options.needle)return options.re=false;if(!options.regExp)needle=lang.escapeRegExp(needle);if(options.wholeWord)needle=addWordBoundary(needle,options);var modifier=options.caseSensitive?"gm":"gmi";options.$isMultiLine=!$disableFakeMultiline&&/[\n\r]/.test(needle);if(options.$isMultiLine)return options.re=this.$assembleMultilineRegExp(needle,modifier);try{var re=new RegExp(needle,modifier)}catch(e){re=false}return options.re=re};this.$assembleMultilineRegExp=function(needle,modifier){var parts=needle.replace(/\r\n|\r|\n/g,"$\n^").split("\n");var re=[];for(var i=0;i<parts.length;i++)try{re.push(new RegExp(parts[i],modifier))}catch(e){return false}return re};this.$matchIterator=function(session,options){var re=this.$assembleRegExp(options);if(!re)return false;var backwards=options.backwards==true;var skipCurrent=options.skipCurrent!=false;var range=options.range;var start=options.start;if(!start)start=range?range[backwards?"end":"start"]:session.selection.getRange();if(start.start)start=start[skipCurrent!=backwards?"end":"start"];var firstRow=range?range.start.row:0;var lastRow=range?range.end.row:session.getLength()-1;if(backwards){var forEach=function(callback){var row=start.row;if(forEachInLine(row,start.column,callback))return;for(row--;row>=firstRow;row--)if(forEachInLine(row,Number.MAX_VALUE,callback))return;if(options.wrap==false)return;for(row=lastRow,firstRow=start.row;row>=firstRow;row--)if(forEachInLine(row,Number.MAX_VALUE,callback))return}}else{var forEach=function(callback){var row=start.row;if(forEachInLine(row,start.column,callback))return;for(row=row+1;row<=lastRow;row++)if(forEachInLine(row,0,callback))return;if(options.wrap==false)return;for(row=firstRow,lastRow=start.row;row<=lastRow;row++)if(forEachInLine(row,0,callback))return}}if(options.$isMultiLine){var len=re.length;var forEachInLine=function(row,offset,callback){var startRow=backwards?row-len+1:row;if(startRow<0)return;var line=session.getLine(startRow);var startIndex=line.search(re[0]);if(!backwards&&startIndex<offset||startIndex===-1)return;for(var i=1;i<len;i++){line=session.getLine(startRow+i);if(line.search(re[i])==-1)return}var endIndex=line.match(re[len-1])[0].length;if(backwards&&endIndex>offset)return;if(callback(startRow,startIndex,startRow+len-1,endIndex))return true}}else if(backwards){var forEachInLine=function(row,endIndex,callback){var line=session.getLine(row);var matches=[];var m,last=0;re.lastIndex=0;while(m=re.exec(line)){var length=m[0].length;last=m.index;if(!length){if(last>=line.length)break;re.lastIndex=last+=1}if(m.index+length>endIndex)break;matches.push(m.index,length)}for(var i=matches.length-1;i>=0;i-=2){var column=matches[i-1];var length=matches[i];if(callback(row,column,row,column+length))return true}}}else{var forEachInLine=function(row,startIndex,callback){var line=session.getLine(row);var m;var last=startIndex;re.lastIndex=startIndex;while(m=re.exec(line)){var length=m[0].length;last=m.index;if(callback(row,last,row,last+length))return true;if(!length){re.lastIndex=last+=1;if(last>=line.length)return false}}}}return{forEach:forEach}}}).call(Search.prototype);function addWordBoundary(needle,options){function wordBoundary(c){if(/\w/.test(c)||options.regExp)return"\\b";return""}return wordBoundary(needle[0])+needle+wordBoundary(needle[needle.length-1])}exports.Search=Search}));ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(acequire,exports,module){"use strict";var keyUtil=acequire("../lib/keys");var useragent=acequire("../lib/useragent");var KEY_MODS=keyUtil.KEY_MODS;function HashHandler(config,platform){this.platform=platform||(useragent.isMac?"mac":"win");this.commands={};this.commandKeyBinding={};this.addCommands(config);this.$singleCommand=true}function MultiHashHandler(config,platform){HashHandler.call(this,config,platform);this.$singleCommand=false}MultiHashHandler.prototype=HashHandler.prototype;(function(){this.addCommand=function(command){if(this.commands[command.name])this.removeCommand(command);this.commands[command.name]=command;if(command.bindKey)this._buildKeyHash(command)};this.removeCommand=function(command,keepCommand){var name=command&&(typeof command==="string"?command:command.name);command=this.commands[name];if(!keepCommand)delete this.commands[name];var ckb=this.commandKeyBinding;for(var keyId in ckb){var cmdGroup=ckb[keyId];if(cmdGroup==command){delete ckb[keyId]}else if(Array.isArray(cmdGroup)){var i=cmdGroup.indexOf(command);if(i!=-1){cmdGroup.splice(i,1);if(cmdGroup.length==1)ckb[keyId]=cmdGroup[0]}}}};this.bindKey=function(key,command,position){if(typeof key=="object"&&key){if(position==undefined)position=key.position;key=key[this.platform]}if(!key)return;if(typeof command=="function")return this.addCommand({exec:command,bindKey:key,name:command.name||key});key.split("|").forEach((function(keyPart){var chain="";if(keyPart.indexOf(" ")!=-1){var parts=keyPart.split(/\s+/);keyPart=parts.pop();parts.forEach((function(keyPart){var binding=this.parseKeys(keyPart);var id=KEY_MODS[binding.hashId]+binding.key;chain+=(chain?" ":"")+id;this._addCommandToBinding(chain,"chainKeys")}),this);chain+=" "}var binding=this.parseKeys(keyPart);var id=KEY_MODS[binding.hashId]+binding.key;this._addCommandToBinding(chain+id,command,position)}),this)};function getPosition(command){return typeof command=="object"&&command.bindKey&&command.bindKey.position||(command.isDefault?-100:0)}this._addCommandToBinding=function(keyId,command,position){var ckb=this.commandKeyBinding,i;if(!command){delete ckb[keyId]}else if(!ckb[keyId]||this.$singleCommand){ckb[keyId]=command}else{if(!Array.isArray(ckb[keyId])){ckb[keyId]=[ckb[keyId]]}else if((i=ckb[keyId].indexOf(command))!=-1){ckb[keyId].splice(i,1)}if(typeof position!="number"){position=getPosition(command)}var commands=ckb[keyId];for(i=0;i<commands.length;i++){var other=commands[i];var otherPos=getPosition(other);if(otherPos>position)break}commands.splice(i,0,command)}};this.addCommands=function(commands){commands&&Object.keys(commands).forEach((function(name){var command=commands[name];if(!command)return;if(typeof command==="string")return this.bindKey(command,name);if(typeof command==="function")command={exec:command};if(typeof command!=="object")return;if(!command.name)command.name=name;this.addCommand(command)}),this)};this.removeCommands=function(commands){Object.keys(commands).forEach((function(name){this.removeCommand(commands[name])}),this)};this.bindKeys=function(keyList){Object.keys(keyList).forEach((function(key){this.bindKey(key,keyList[key])}),this)};this._buildKeyHash=function(command){this.bindKey(command.bindKey,command)};this.parseKeys=function(keys){var parts=keys.toLowerCase().split(/[\-\+]([\-\+])?/).filter((function(x){return x}));var key=parts.pop();var keyCode=keyUtil[key];if(keyUtil.FUNCTION_KEYS[keyCode])key=keyUtil.FUNCTION_KEYS[keyCode].toLowerCase();else if(!parts.length)return{key:key,hashId:-1};else if(parts.length==1&&parts[0]=="shift")return{key:key.toUpperCase(),hashId:-1};var hashId=0;for(var i=parts.length;i--;){var modifier=keyUtil.KEY_MODS[parts[i]];if(modifier==null){if(typeof console!="undefined")console.error("invalid modifier "+parts[i]+" in "+keys);return false}hashId|=modifier}return{key:key,hashId:hashId}};this.findKeyCommand=function findKeyCommand(hashId,keyString){var key=KEY_MODS[hashId]+keyString;return this.commandKeyBinding[key]};this.handleKeyboard=function(data,hashId,keyString,keyCode){if(keyCode<0)return;var key=KEY_MODS[hashId]+keyString;var command=this.commandKeyBinding[key];if(data.$keyChain){data.$keyChain+=" "+key;command=this.commandKeyBinding[data.$keyChain]||command}if(command){if(command=="chainKeys"||command[command.length-1]=="chainKeys"){data.$keyChain=data.$keyChain||key;return{command:"null"}}}if(data.$keyChain){if((!hashId||hashId==4)&&keyString.length==1)data.$keyChain=data.$keyChain.slice(0,-key.length-1);else if(hashId==-1||keyCode>0)data.$keyChain=""}return{command:command}};this.getStatusText=function(editor,data){return data.$keyChain||""}}).call(HashHandler.prototype);exports.HashHandler=HashHandler;exports.MultiHashHandler=MultiHashHandler}));ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],(function(acequire,exports,module){"use strict";var oop=acequire("../lib/oop");var MultiHashHandler=acequire("../keyboard/hash_handler").MultiHashHandler;var EventEmitter=acequire("../lib/event_emitter").EventEmitter;var CommandManager=function(platform,commands){MultiHashHandler.call(this,commands,platform);this.byName=this.commands;this.setDefaultHandler("exec",(function(e){return e.command.exec(e.editor,e.args||{})}))};oop.inherits(CommandManager,MultiHashHandler);(function(){oop.implement(this,EventEmitter);this.exec=function(command,editor,args){if(Array.isArray(command)){for(var i=command.length;i--;){if(this.exec(command[i],editor,args))return true}return false}if(typeof command==="string")command=this.commands[command];if(!command)return false;if(editor&&editor.$readOnly&&!command.readOnly)return false;if(command.isAvailable&&!command.isAvailable(editor))return false;var e={editor:editor,command:command,args:args};e.returnValue=this._emit("exec",e);this._signal("afterExec",e);return e.returnValue===false?false:true};this.toggleRecording=function(editor){if(this.$inReplay)return;editor&&editor._emit("changeStatus");if(this.recording){this.macro.pop();this.removeEventListener("exec",this.$addCommandToMacro);if(!this.macro.length)this.macro=this.oldMacro;return this.recording=false}if(!this.$addCommandToMacro){this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)}this.oldMacro=this.macro;this.macro=[];this.on("exec",this.$addCommandToMacro);return this.recording=true};this.replay=function(editor){if(this.$inReplay||!this.macro)return;if(this.recording)return this.toggleRecording(editor);try{this.$inReplay=true;this.macro.forEach((function(x){if(typeof x=="string")this.exec(x,editor);else this.exec(x[0],editor,x[1])}),this)}finally{this.$inReplay=false}};this.trimMacro=function(m){return m.map((function(x){if(typeof x[0]!="string")x[0]=x[0].name;if(!x[1])x=x[0];return x}))}}).call(CommandManager.prototype);exports.CommandManager=CommandManager}));ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],(function(acequire,exports,module){"use strict";var lang=acequire("../lib/lang");var config=acequire("../config");var Range=acequire("../range").Range;function bindKey(win,mac){return{win:win,mac:mac}}exports.commands=[{name:"showSettingsMenu",bindKey:bindKey("Ctrl-,","Command-,"),exec:function(editor){config.loadModule("ace/ext/settings_menu",(function(module){module.init(editor);editor.showSettingsMenu()}))},readOnly:true},{name:"goToNextError",bindKey:bindKey("Alt-E","F4"),exec:function(editor){config.loadModule("ace/ext/error_marker",(function(module){module.showErrorMarker(editor,1)}))},scrollIntoView:"animate",readOnly:true},{name:"goToPreviousError",bindKey:bindKey("Alt-Shift-E","Shift-F4"),exec:function(editor){config.loadModule("ace/ext/error_marker",(function(module){module.showErrorMarker(editor,-1)}))},scrollIntoView:"animate",readOnly:true},{name:"selectall",bindKey:bindKey("Ctrl-A","Command-A"),exec:function(editor){editor.selectAll()},readOnly:true},{name:"centerselection",bindKey:bindKey(null,"Ctrl-L"),exec:function(editor){editor.centerSelection()},readOnly:true},{name:"gotoline",bindKey:bindKey("Ctrl-L","Command-L"),exec:function(editor){var line=parseInt(prompt("Enter line number:"),10);if(!isNaN(line)){editor.gotoLine(line)}},readOnly:true},{name:"fold",bindKey:bindKey("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(editor){editor.session.toggleFold(false)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:true},{name:"unfold",bindKey:bindKey("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(editor){editor.session.toggleFold(true)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:true},{name:"toggleFoldWidget",bindKey:bindKey("F2","F2"),exec:function(editor){editor.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:true},{name:"toggleParentFoldWidget",bindKey:bindKey("Alt-F2","Alt-F2"),exec:function(editor){editor.session.toggleFoldWidget(true)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:true},{name:"foldall",bindKey:bindKey(null,"Ctrl-Command-Option-0"),exec:function(editor){editor.session.foldAll()},scrollIntoView:"center",readOnly:true},{name:"foldOther",bindKey:bindKey("Alt-0","Command-Option-0"),exec:function(editor){editor.session.foldAll();editor.session.unfold(editor.selection.getAllRanges())},scrollIntoView:"center",readOnly:true},{name:"unfoldall",bindKey:bindKey("Alt-Shift-0","Command-Option-Shift-0"),exec:function(editor){editor.session.unfold()},scrollIntoView:"center",readOnly:true},{name:"findnext",bindKey:bindKey("Ctrl-K","Command-G"),exec:function(editor){editor.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:true},{name:"findprevious",bindKey:bindKey("Ctrl-Shift-K","Command-Shift-G"),exec:function(editor){editor.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:true},{name:"selectOrFindNext",bindKey:bindKey("Alt-K","Ctrl-G"),exec:function(editor){if(editor.selection.isEmpty())editor.selection.selectWord();else editor.findNext()},readOnly:true},{name:"selectOrFindPrevious",bindKey:bindKey("Alt-Shift-K","Ctrl-Shift-G"),exec:function(editor){if(editor.selection.isEmpty())editor.selection.selectWord();else editor.findPrevious()},readOnly:true},{name:"find",bindKey:bindKey("Ctrl-F","Command-F"),exec:function(editor){config.loadModule("ace/ext/searchbox",(function(e){e.Search(editor)}))},readOnly:true},{name:"overwrite",bindKey:"Insert",exec:function(editor){editor.toggleOverwrite()},readOnly:true},{name:"selecttostart",bindKey:bindKey("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(editor){editor.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:true,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:bindKey("Ctrl-Home","Command-Home|Command-Up"),exec:function(editor){editor.navigateFileStart()},multiSelectAction:"forEach",readOnly:true,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:bindKey("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(editor){editor.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"golineup",bindKey:bindKey("Up","Up|Ctrl-P"),exec:function(editor,args){editor.navigateUp(args.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selecttoend",bindKey:bindKey("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(editor){editor.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:true,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:bindKey("Ctrl-End","Command-End|Command-Down"),exec:function(editor){editor.navigateFileEnd()},multiSelectAction:"forEach",readOnly:true,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:bindKey("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(editor){editor.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"golinedown",bindKey:bindKey("Down","Down|Ctrl-N"),exec:function(editor,args){editor.navigateDown(args.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectwordleft",bindKey:bindKey("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(editor){editor.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotowordleft",bindKey:bindKey("Ctrl-Left","Option-Left"),exec:function(editor){editor.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selecttolinestart",bindKey:bindKey("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(editor){editor.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotolinestart",bindKey:bindKey("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(editor){editor.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectleft",bindKey:bindKey("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(editor){editor.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotoleft",bindKey:bindKey("Left","Left|Ctrl-B"),exec:function(editor,args){editor.navigateLeft(args.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectwordright",bindKey:bindKey("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(editor){editor.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotowordright",bindKey:bindKey("Ctrl-Right","Option-Right"),exec:function(editor){editor.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selecttolineend",bindKey:bindKey("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(editor){editor.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotolineend",bindKey:bindKey("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(editor){editor.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectright",bindKey:bindKey("Shift-Right","Shift-Right"),exec:function(editor){editor.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotoright",bindKey:bindKey("Right","Right|Ctrl-F"),exec:function(editor,args){editor.navigateRight(args.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(editor){editor.selectPageDown()},readOnly:true},{name:"pagedown",bindKey:bindKey(null,"Option-PageDown"),exec:function(editor){editor.scrollPageDown()},readOnly:true},{name:"gotopagedown",bindKey:bindKey("PageDown","PageDown|Ctrl-V"),exec:function(editor){editor.gotoPageDown()},readOnly:true},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(editor){editor.selectPageUp()},readOnly:true},{name:"pageup",bindKey:bindKey(null,"Option-PageUp"),exec:function(editor){editor.scrollPageUp()},readOnly:true},{name:"gotopageup",bindKey:"PageUp",exec:function(editor){editor.gotoPageUp()},readOnly:true},{name:"scrollup",bindKey:bindKey("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:true},{name:"scrolldown",bindKey:bindKey("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:true},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(editor){editor.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectlineend",bindKey:"Shift-End",exec:function(editor){editor.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"togglerecording",bindKey:bindKey("Ctrl-Alt-E","Command-Option-E"),exec:function(editor){editor.commands.toggleRecording(editor)},readOnly:true},{name:"replaymacro",bindKey:bindKey("Ctrl-Shift-E","Command-Shift-E"),exec:function(editor){editor.commands.replay(editor)},readOnly:true},{name:"jumptomatching",bindKey:bindKey("Ctrl-P","Ctrl-P"),exec:function(editor){editor.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:true},{name:"selecttomatching",bindKey:bindKey("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(editor){editor.jumpToMatching(true)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:true},{name:"expandToMatching",bindKey:bindKey("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(editor){editor.jumpToMatching(true,true)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:true},{name:"passKeysToBrowser",bindKey:bindKey(null,null),exec:function(){},passEvent:true,readOnly:true},{name:"copy",exec:function(editor){},readOnly:true},{name:"cut",exec:function(editor){var range=editor.getSelectionRange();editor._emit("cut",range);if(!editor.selection.isEmpty()){editor.session.remove(range);editor.clearSelection()}},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",exec:function(editor,args){editor.$handlePaste(args)},scrollIntoView:"cursor"},{name:"removeline",bindKey:bindKey("Ctrl-D","Command-D"),exec:function(editor){editor.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:bindKey("Ctrl-Shift-D","Command-Shift-D"),exec:function(editor){editor.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:bindKey("Ctrl-Alt-S","Command-Alt-S"),exec:function(editor){editor.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:bindKey("Ctrl-/","Command-/"),exec:function(editor){editor.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:bindKey("Ctrl-Shift-/","Command-Shift-/"),exec:function(editor){editor.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:bindKey("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(editor){editor.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:bindKey("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(editor){editor.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",bindKey:bindKey("Ctrl-H","Command-Option-F"),exec:function(editor){config.loadModule("ace/ext/searchbox",(function(e){e.Search(editor,true)}))}},{name:"undo",bindKey:bindKey("Ctrl-Z","Command-Z"),exec:function(editor){editor.undo()}},{name:"redo",bindKey:bindKey("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(editor){editor.redo()}},{name:"copylinesup",bindKey:bindKey("Alt-Shift-Up","Command-Option-Up"),exec:function(editor){editor.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:bindKey("Alt-Up","Option-Up"),exec:function(editor){editor.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:bindKey("Alt-Shift-Down","Command-Option-Down"),exec:function(editor){editor.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:bindKey("Alt-Down","Option-Down"),exec:function(editor){editor.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:bindKey("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(editor){editor.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:bindKey("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(editor){editor.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:bindKey("Shift-Delete",null),exec:function(editor){if(editor.selection.isEmpty()){editor.remove("left")}else{return false}},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:bindKey("Alt-Backspace","Command-Backspace"),exec:function(editor){editor.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:bindKey("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(editor){editor.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",bindKey:bindKey("Ctrl-Shift-Backspace",null),exec:function(editor){var range=editor.selection.getRange();range.start.column=0;editor.session.remove(range)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",bindKey:bindKey("Ctrl-Shift-Delete",null),exec:function(editor){var range=editor.selection.getRange();range.end.column=Number.MAX_VALUE;editor.session.remove(range)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:bindKey("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(editor){editor.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:bindKey("Ctrl-Delete","Alt-Delete"),exec:function(editor){editor.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:bindKey("Shift-Tab","Shift-Tab"),exec:function(editor){editor.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:bindKey("Tab","Tab"),exec:function(editor){editor.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:bindKey("Ctrl-[","Ctrl-["),exec:function(editor){editor.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:bindKey("Ctrl-]","Ctrl-]"),exec:function(editor){editor.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(editor,str){editor.insert(str)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(editor,args){editor.insert(lang.stringRepeat(args.text||"",args.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:bindKey(null,"Ctrl-O"),exec:function(editor){editor.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:bindKey("Alt-Shift-X","Ctrl-T"),exec:function(editor){editor.transposeLetters()},multiSelectAction:function(editor){editor.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:bindKey("Ctrl-U","Ctrl-U"),exec:function(editor){editor.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:bindKey("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(editor){editor.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",bindKey:bindKey("Ctrl-Shift-L","Command-Shift-L"),exec:function(editor){var range=editor.selection.getRange();range.start.column=range.end.column=0;range.end.row++;editor.selection.setRange(range,false)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"joinlines",bindKey:bindKey(null,null),exec:function(editor){var isBackwards=editor.selection.isBackwards();var selectionStart=isBackwards?editor.selection.getSelectionLead():editor.selection.getSelectionAnchor();var selectionEnd=isBackwards?editor.selection.getSelectionAnchor():editor.selection.getSelectionLead();var firstLineEndCol=editor.session.doc.getLine(selectionStart.row).length;var selectedText=editor.session.doc.getTextRange(editor.selection.getRange());var selectedCount=selectedText.replace(/\n\s*/," ").length;var insertLine=editor.session.doc.getLine(selectionStart.row);for(var i=selectionStart.row+1;i<=selectionEnd.row+1;i++){var curLine=lang.stringTrimLeft(lang.stringTrimRight(editor.session.doc.getLine(i)));if(curLine.length!==0){curLine=" "+curLine}insertLine+=curLine}if(selectionEnd.row+1<editor.session.doc.getLength()-1){insertLine+=editor.session.doc.getNewLineCharacter()}editor.clearSelection();editor.session.doc.replace(new Range(selectionStart.row,0,selectionEnd.row+2,0),insertLine);if(selectedCount>0){editor.selection.moveCursorTo(selectionStart.row,selectionStart.column);editor.selection.selectTo(selectionStart.row,selectionStart.column+selectedCount)}else{firstLineEndCol=editor.session.doc.getLine(selectionStart.row).length>firstLineEndCol?firstLineEndCol+1:firstLineEndCol;editor.selection.moveCursorTo(selectionStart.row,firstLineEndCol)}},multiSelectAction:"forEach",readOnly:true},{name:"invertSelection",bindKey:bindKey(null,null),exec:function(editor){var endRow=editor.session.doc.getLength()-1;var endCol=editor.session.doc.getLine(endRow).length;var ranges=editor.selection.rangeList.ranges;var newRanges=[];if(ranges.length<1){ranges=[editor.selection.getRange()]}for(var i=0;i<ranges.length;i++){if(i==ranges.length-1){if(!(ranges[i].end.row===endRow&&ranges[i].end.column===endCol)){newRanges.push(new Range(ranges[i].end.row,ranges[i].end.column,endRow,endCol))}}if(i===0){if(!(ranges[i].start.row===0&&ranges[i].start.column===0)){newRanges.push(new Range(0,0,ranges[i].start.row,ranges[i].start.column))}}else{newRanges.push(new Range(ranges[i-1].end.row,ranges[i-1].end.column,ranges[i].start.row,ranges[i].start.column))}}editor.exitMultiSelectMode();editor.clearSelection();for(var i=0;i<newRanges.length;i++){editor.selection.addRange(newRanges[i],false)}},readOnly:true,scrollIntoView:"none"}]}));ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator"],(function(acequire,exports,module){"use strict";acequire("./lib/fixoldbrowsers");var oop=acequire("./lib/oop");var dom=acequire("./lib/dom");var lang=acequire("./lib/lang");var useragent=acequire("./lib/useragent");var TextInput=acequire("./keyboard/textinput").TextInput;var MouseHandler=acequire("./mouse/mouse_handler").MouseHandler;var FoldHandler=acequire("./mouse/fold_handler").FoldHandler;var KeyBinding=acequire("./keyboard/keybinding").KeyBinding;var EditSession=acequire("./edit_session").EditSession;var Search=acequire("./search").Search;var Range=acequire("./range").Range;var EventEmitter=acequire("./lib/event_emitter").EventEmitter;var CommandManager=acequire("./commands/command_manager").CommandManager;var defaultCommands=acequire("./commands/default_commands").commands;var config=acequire("./config");var TokenIterator=acequire("./token_iterator").TokenIterator;var Editor=function(renderer,session){var container=renderer.getContainerElement();this.container=container;this.renderer=renderer;this.id="editor"+ ++Editor.$uid;this.commands=new CommandManager(useragent.isMac?"mac":"win",defaultCommands);if(typeof document=="object"){this.textInput=new TextInput(renderer.getTextAreaContainer(),this);this.renderer.textarea=this.textInput.getElement();this.$mouseHandler=new MouseHandler(this);new FoldHandler(this)}this.keyBinding=new KeyBinding(this);this.$blockScrolling=0;this.$search=(new Search).set({wrap:true});this.$historyTracker=this.$historyTracker.bind(this);this.commands.on("exec",this.$historyTracker);this.$initOperationListeners();this._$emitInputEvent=lang.delayedCall(function(){this._signal("input",{});if(this.session&&this.session.bgTokenizer)this.session.bgTokenizer.scheduleStart()}.bind(this));this.on("change",(function(_,_self){_self._$emitInputEvent.schedule(31)}));this.setSession(session||new EditSession(""));config.resetOptions(this);config._signal("editor",this)};Editor.$uid=0;(function(){oop.implement(this,EventEmitter);this.$initOperationListeners=function(){function last(a){return a[a.length-1]}this.selections=[];this.commands.on("exec",this.startOperation.bind(this),true);this.commands.on("afterExec",this.endOperation.bind(this),true);this.$opResetTimer=lang.delayedCall(this.endOperation.bind(this));this.on("change",function(){this.curOp||this.startOperation();this.curOp.docChanged=true}.bind(this),true);this.on("changeSelection",function(){this.curOp||this.startOperation();this.curOp.selectionChanged=true}.bind(this),true)};this.curOp=null;this.prevOp={};this.startOperation=function(commadEvent){if(this.curOp){if(!commadEvent||this.curOp.command)return;this.prevOp=this.curOp}if(!commadEvent){this.previousCommand=null;commadEvent={}}this.$opResetTimer.schedule();this.curOp={command:commadEvent.command||{},args:commadEvent.args,scrollTop:this.renderer.scrollTop};if(this.curOp.command.name&&this.curOp.command.scrollIntoView!==undefined)this.$blockScrolling++};this.endOperation=function(e){if(this.curOp){if(e&&e.returnValue===false)return this.curOp=null;this._signal("beforeEndOperation");var command=this.curOp.command;if(command.name&&this.$blockScrolling>0)this.$blockScrolling--;var scrollIntoView=command&&command.scrollIntoView;if(scrollIntoView){switch(scrollIntoView){case"center-animate":scrollIntoView="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var range=this.selection.getRange();var config=this.renderer.layerConfig;if(range.start.row>=config.lastRow||range.end.row<=config.firstRow){this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}break;default:break}if(scrollIntoView=="animate")this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp;this.curOp=null}};this.$mergeableCommands=["backspace","del","insertstring"];this.$historyTracker=function(e){if(!this.$mergeUndoDeltas)return;var prev=this.prevOp;var mergeableCommands=this.$mergeableCommands;var shouldMerge=prev.command&&e.command.name==prev.command.name;if(e.command.name=="insertstring"){var text=e.args;if(this.mergeNextCommand===undefined)this.mergeNextCommand=true;shouldMerge=shouldMerge&&this.mergeNextCommand&&(!/\s/.test(text)||/\s/.test(prev.args));this.mergeNextCommand=true}else{shouldMerge=shouldMerge&&mergeableCommands.indexOf(e.command.name)!==-1}if(this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3){shouldMerge=false}if(shouldMerge)this.session.mergeUndoDeltas=true;else if(mergeableCommands.indexOf(e.command.name)!==-1)this.sequenceStartTime=Date.now()};this.setKeyboardHandler=function(keyboardHandler,cb){if(keyboardHandler&&typeof keyboardHandler==="string"){this.$keybindingId=keyboardHandler;var _self=this;config.loadModule(["keybinding",keyboardHandler],(function(module){if(_self.$keybindingId==keyboardHandler)_self.keyBinding.setKeyboardHandler(module&&module.handler);cb&&cb()}))}else{this.$keybindingId=null;this.keyBinding.setKeyboardHandler(keyboardHandler);cb&&cb()}};this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()};this.setSession=function(session){if(this.session==session)return;if(this.curOp)this.endOperation();this.curOp={};var oldSession=this.session;if(oldSession){this.session.off("change",this.$onDocumentChange);this.session.off("changeMode",this.$onChangeMode);this.session.off("tokenizerUpdate",this.$onTokenizerUpdate);this.session.off("changeTabSize",this.$onChangeTabSize);this.session.off("changeWrapLimit",this.$onChangeWrapLimit);this.session.off("changeWrapMode",this.$onChangeWrapMode);this.session.off("changeFold",this.$onChangeFold);this.session.off("changeFrontMarker",this.$onChangeFrontMarker);this.session.off("changeBackMarker",this.$onChangeBackMarker);this.session.off("changeBreakpoint",this.$onChangeBreakpoint);this.session.off("changeAnnotation",this.$onChangeAnnotation);this.session.off("changeOverwrite",this.$onCursorChange);this.session.off("changeScrollTop",this.$onScrollTopChange);this.session.off("changeScrollLeft",this.$onScrollLeftChange);var selection=this.session.getSelection();selection.off("changeCursor",this.$onCursorChange);selection.off("changeSelection",this.$onSelectionChange)}this.session=session;if(session){this.$onDocumentChange=this.onDocumentChange.bind(this);session.on("change",this.$onDocumentChange);this.renderer.setSession(session);this.$onChangeMode=this.onChangeMode.bind(this);session.on("changeMode",this.$onChangeMode);this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this);session.on("tokenizerUpdate",this.$onTokenizerUpdate);this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer);session.on("changeTabSize",this.$onChangeTabSize);this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this);session.on("changeWrapLimit",this.$onChangeWrapLimit);this.$onChangeWrapMode=this.onChangeWrapMode.bind(this);session.on("changeWrapMode",this.$onChangeWrapMode);this.$onChangeFold=this.onChangeFold.bind(this);session.on("changeFold",this.$onChangeFold);this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this);this.session.on("changeFrontMarker",this.$onChangeFrontMarker);this.$onChangeBackMarker=this.onChangeBackMarker.bind(this);this.session.on("changeBackMarker",this.$onChangeBackMarker);this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this);this.session.on("changeBreakpoint",this.$onChangeBreakpoint);this.$onChangeAnnotation=this.onChangeAnnotation.bind(this);this.session.on("changeAnnotation",this.$onChangeAnnotation);this.$onCursorChange=this.onCursorChange.bind(this);this.session.on("changeOverwrite",this.$onCursorChange);this.$onScrollTopChange=this.onScrollTopChange.bind(this);this.session.on("changeScrollTop",this.$onScrollTopChange);this.$onScrollLeftChange=this.onScrollLeftChange.bind(this);this.session.on("changeScrollLeft",this.$onScrollLeftChange);this.selection=session.getSelection();this.selection.on("changeCursor",this.$onCursorChange);this.$onSelectionChange=this.onSelectionChange.bind(this);this.selection.on("changeSelection",this.$onSelectionChange);this.onChangeMode();this.$blockScrolling+=1;this.onCursorChange();this.$blockScrolling-=1;this.onScrollTopChange();this.onScrollLeftChange();this.onSelectionChange();this.onChangeFrontMarker();this.onChangeBackMarker();this.onChangeBreakpoint();this.onChangeAnnotation();this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit();this.renderer.updateFull()}else{this.selection=null;this.renderer.setSession(session)}this._signal("changeSession",{session:session,oldSession:oldSession});this.curOp=null;oldSession&&oldSession._signal("changeEditor",{oldEditor:this});session&&session._signal("changeEditor",{editor:this});if(session&&session.bgTokenizer)session.bgTokenizer.scheduleStart()};this.getSession=function(){return this.session};this.setValue=function(val,cursorPos){this.session.doc.setValue(val);if(!cursorPos)this.selectAll();else if(cursorPos==1)this.navigateFileEnd();else if(cursorPos==-1)this.navigateFileStart();return val};this.getValue=function(){return this.session.getValue()};this.getSelection=function(){return this.selection};this.resize=function(force){this.renderer.onResize(force)};this.setTheme=function(theme,cb){this.renderer.setTheme(theme,cb)};this.getTheme=function(){return this.renderer.getTheme()};this.setStyle=function(style){this.renderer.setStyle(style)};this.unsetStyle=function(style){this.renderer.unsetStyle(style)};this.getFontSize=function(){return this.getOption("fontSize")||dom.computedStyle(this.container,"fontSize")};this.setFontSize=function(size){this.setOption("fontSize",size)};this.$highlightBrackets=function(){if(this.session.$bracketHighlight){this.session.removeMarker(this.session.$bracketHighlight);this.session.$bracketHighlight=null}if(this.$highlightPending){return}var self=this;this.$highlightPending=true;setTimeout((function(){self.$highlightPending=false;var session=self.session;if(!session||!session.bgTokenizer)return;var pos=session.findMatchingBracket(self.getCursorPosition());if(pos){var range=new Range(pos.row,pos.column,pos.row,pos.column+1)}else if(session.$mode.getMatching){var range=session.$mode.getMatching(self.session)}if(range)session.$bracketHighlight=session.addMarker(range,"ace_bracket","text")}),50)};this.$highlightTags=function(){if(this.$highlightTagPending)return;var self=this;this.$highlightTagPending=true;setTimeout((function(){self.$highlightTagPending=false;var session=self.session;if(!session||!session.bgTokenizer)return;var pos=self.getCursorPosition();var iterator=new TokenIterator(self.session,pos.row,pos.column);var token=iterator.getCurrentToken();if(!token||!/\b(?:tag-open|tag-name)/.test(token.type)){session.removeMarker(session.$tagHighlight);session.$tagHighlight=null;return}if(token.type.indexOf("tag-open")!=-1){token=iterator.stepForward();if(!token)return}var tag=token.value;var depth=0;var prevToken=iterator.stepBackward();if(prevToken.value=="<"){do{prevToken=token;token=iterator.stepForward();if(token&&token.value===tag&&token.type.indexOf("tag-name")!==-1){if(prevToken.value==="<"){depth++}else if(prevToken.value==="</"){depth--}}}while(token&&depth>=0)}else{do{token=prevToken;prevToken=iterator.stepBackward();if(token&&token.value===tag&&token.type.indexOf("tag-name")!==-1){if(prevToken.value==="<"){depth++}else if(prevToken.value==="</"){depth--}}}while(prevToken&&depth<=0);iterator.stepForward()}if(!token){session.removeMarker(session.$tagHighlight);session.$tagHighlight=null;return}var row=iterator.getCurrentTokenRow();var column=iterator.getCurrentTokenColumn();var range=new Range(row,column,row,column+token.value.length);var sbm=session.$backMarkers[session.$tagHighlight];if(session.$tagHighlight&&sbm!=undefined&&range.compareRange(sbm.range)!==0){session.removeMarker(session.$tagHighlight);session.$tagHighlight=null}if(range&&!session.$tagHighlight)session.$tagHighlight=session.addMarker(range,"ace_bracket","text")}),50)};this.focus=function(){var _self=this;setTimeout((function(){_self.textInput.focus()}));this.textInput.focus()};this.isFocused=function(){return this.textInput.isFocused()};this.blur=function(){this.textInput.blur()};this.onFocus=function(e){if(this.$isFocused)return;this.$isFocused=true;this.renderer.showCursor();this.renderer.visualizeFocus();this._emit("focus",e)};this.onBlur=function(e){if(!this.$isFocused)return;this.$isFocused=false;this.renderer.hideCursor();this.renderer.visualizeBlur();this._emit("blur",e)};this.$cursorChange=function(){this.renderer.updateCursor()};this.onDocumentChange=function(delta){var wrap=this.session.$useWrapMode;var lastRow=delta.start.row==delta.end.row?delta.end.row:Infinity;this.renderer.updateLines(delta.start.row,lastRow,wrap);this._signal("change",delta);this.$cursorChange();this.$updateHighlightActiveLine()};this.onTokenizerUpdate=function(e){var rows=e.data;this.renderer.updateLines(rows.first,rows.last)};this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())};this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())};this.onCursorChange=function(){this.$cursorChange();if(!this.$blockScrolling){config.warn("Automatically scrolling cursor into view after selection change","this will be disabled in the next version","set editor.$blockScrolling = Infinity to disable this message");this.renderer.scrollCursorIntoView()}this.$highlightBrackets();this.$highlightTags();this.$updateHighlightActiveLine();this._signal("changeSelection")};this.$updateHighlightActiveLine=function(){var session=this.getSession();var highlight;if(this.$highlightActiveLine){if(this.$selectionStyle!="line"||!this.selection.isMultiLine())highlight=this.getCursorPosition();if(this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1))highlight=false}if(session.$highlightLineMarker&&!highlight){session.removeMarker(session.$highlightLineMarker.id);session.$highlightLineMarker=null}else if(!session.$highlightLineMarker&&highlight){var range=new Range(highlight.row,highlight.column,highlight.row,Infinity);range.id=session.addMarker(range,"ace_active-line","screenLine");session.$highlightLineMarker=range}else if(highlight){session.$highlightLineMarker.start.row=highlight.row;session.$highlightLineMarker.end.row=highlight.row;session.$highlightLineMarker.start.column=highlight.column;session._signal("changeBackMarker")}};this.onSelectionChange=function(e){var session=this.session;if(session.$selectionMarker){session.removeMarker(session.$selectionMarker)}session.$selectionMarker=null;if(!this.selection.isEmpty()){var range=this.selection.getRange();var style=this.getSelectionStyle();session.$selectionMarker=session.addMarker(range,"ace_selection",style)}else{this.$updateHighlightActiveLine()}var re=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(re);this._signal("changeSelection")};this.$getSelectionHighLightRegexp=function(){var session=this.session;var selection=this.getSelectionRange();if(selection.isEmpty()||selection.isMultiLine())return;var startOuter=selection.start.column-1;var endOuter=selection.end.column+1;var line=session.getLine(selection.start.row);var lineCols=line.length;var needle=line.substring(Math.max(startOuter,0),Math.min(endOuter,lineCols));if(startOuter>=0&&/^[\w\d]/.test(needle)||endOuter<=lineCols&&/[\w\d]$/.test(needle))return;needle=line.substring(selection.start.column,selection.end.column);if(!/^[\w\d]+$/.test(needle))return;var re=this.$search.$assembleRegExp({wholeWord:true,caseSensitive:true,needle:needle});return re};this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()};this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()};this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()};this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())};this.onChangeMode=function(e){this.renderer.updateText();this._emit("changeMode",e)};this.onChangeWrapLimit=function(){this.renderer.updateFull()};this.onChangeWrapMode=function(){this.renderer.onResize(true)};this.onChangeFold=function(){this.$updateHighlightActiveLine();this.renderer.updateFull()};this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())};this.getCopyText=function(){var text=this.getSelectedText();this._signal("copy",text);return text};this.onCopy=function(){this.commands.exec("copy",this)};this.onCut=function(){this.commands.exec("cut",this)};this.onPaste=function(text,event){var e={text:text,event:event};this.commands.exec("paste",this,e)};this.$handlePaste=function(e){if(typeof e=="string")e={text:e};this._signal("paste",e);var text=e.text;if(!this.inMultiSelectMode||this.inVirtualSelectionMode){this.insert(text)}else{var lines=text.split(/\r\n|\r|\n/);var ranges=this.selection.rangeList.ranges;if(lines.length>ranges.length||lines.length<2||!lines[1])return this.commands.exec("insertstring",this,text);for(var i=ranges.length;i--;){var range=ranges[i];if(!range.isEmpty())this.session.remove(range);this.session.insert(range.start,lines[i])}}};this.execCommand=function(command,args){return this.commands.exec(command,this,args)};this.insert=function(text,pasted){var session=this.session;var mode=session.getMode();var cursor=this.getCursorPosition();if(this.getBehavioursEnabled()&&!pasted){var transform=mode.transformAction(session.getState(cursor.row),"insertion",this,session,text);if(transform){if(text!==transform.text){this.session.mergeUndoDeltas=false;this.$mergeNextCommand=false}text=transform.text}}if(text=="\t")text=this.session.getTabString();if(!this.selection.isEmpty()){var range=this.getSelectionRange();cursor=this.session.remove(range);this.clearSelection()}else if(this.session.getOverwrite()&&text.indexOf("\n")==-1){var range=new Range.fromPoints(cursor,cursor);range.end.column+=text.length;this.session.remove(range)}if(text=="\n"||text=="\r\n"){var line=session.getLine(cursor.row);if(cursor.column>line.search(/\S|$/)){var d=line.substr(cursor.column).search(/\S|$/);session.doc.removeInLine(cursor.row,cursor.column,cursor.column+d)}}this.clearSelection();var start=cursor.column;var lineState=session.getState(cursor.row);var line=session.getLine(cursor.row);var shouldOutdent=mode.checkOutdent(lineState,line,text);var end=session.insert(cursor,text);if(transform&&transform.selection){if(transform.selection.length==2){this.selection.setSelectionRange(new Range(cursor.row,start+transform.selection[0],cursor.row,start+transform.selection[1]))}else{this.selection.setSelectionRange(new Range(cursor.row+transform.selection[0],transform.selection[1],cursor.row+transform.selection[2],transform.selection[3]))}}if(session.getDocument().isNewLine(text)){var lineIndent=mode.getNextLineIndent(lineState,line.slice(0,cursor.column),session.getTabString());session.insert({row:cursor.row+1,column:0},lineIndent)}if(shouldOutdent)mode.autoOutdent(lineState,session,cursor.row)};this.onTextInput=function(text){this.keyBinding.onTextInput(text)};this.onCommandKey=function(e,hashId,keyCode){this.keyBinding.onCommandKey(e,hashId,keyCode)};this.setOverwrite=function(overwrite){this.session.setOverwrite(overwrite)};this.getOverwrite=function(){return this.session.getOverwrite()};this.toggleOverwrite=function(){this.session.toggleOverwrite()};this.setScrollSpeed=function(speed){this.setOption("scrollSpeed",speed)};this.getScrollSpeed=function(){return this.getOption("scrollSpeed")};this.setDragDelay=function(dragDelay){this.setOption("dragDelay",dragDelay)};this.getDragDelay=function(){return this.getOption("dragDelay")};this.setSelectionStyle=function(val){this.setOption("selectionStyle",val)};this.getSelectionStyle=function(){return this.getOption("selectionStyle")};this.setHighlightActiveLine=function(shouldHighlight){this.setOption("highlightActiveLine",shouldHighlight)};this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")};this.setHighlightGutterLine=function(shouldHighlight){this.setOption("highlightGutterLine",shouldHighlight)};this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")};this.setHighlightSelectedWord=function(shouldHighlight){this.setOption("highlightSelectedWord",shouldHighlight)};this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord};this.setAnimatedScroll=function(shouldAnimate){this.renderer.setAnimatedScroll(shouldAnimate)};this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()};this.setShowInvisibles=function(showInvisibles){this.renderer.setShowInvisibles(showInvisibles)};this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()};this.setDisplayIndentGuides=function(display){this.renderer.setDisplayIndentGuides(display)};this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()};this.setShowPrintMargin=function(showPrintMargin){this.renderer.setShowPrintMargin(showPrintMargin)};this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()};this.setPrintMarginColumn=function(showPrintMargin){this.renderer.setPrintMarginColumn(showPrintMargin)};this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()};this.setReadOnly=function(readOnly){this.setOption("readOnly",readOnly)};this.getReadOnly=function(){return this.getOption("readOnly")};this.setBehavioursEnabled=function(enabled){this.setOption("behavioursEnabled",enabled)};this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")};this.setWrapBehavioursEnabled=function(enabled){this.setOption("wrapBehavioursEnabled",enabled)};this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")};this.setShowFoldWidgets=function(show){this.setOption("showFoldWidgets",show)};this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")};this.setFadeFoldWidgets=function(fade){this.setOption("fadeFoldWidgets",fade)};this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")};this.remove=function(dir){if(this.selection.isEmpty()){if(dir=="left")this.selection.selectLeft();else this.selection.selectRight()}var range=this.getSelectionRange();if(this.getBehavioursEnabled()){var session=this.session;var state=session.getState(range.start.row);var new_range=session.getMode().transformAction(state,"deletion",this,session,range);if(range.end.column===0){var text=session.getTextRange(range);if(text[text.length-1]=="\n"){var line=session.getLine(range.end.row);if(/^\s+$/.test(line)){range.end.column=line.length}}}if(new_range)range=new_range}this.session.remove(range);this.clearSelection()};this.removeWordRight=function(){if(this.selection.isEmpty())this.selection.selectWordRight();this.session.remove(this.getSelectionRange());this.clearSelection()};this.removeWordLeft=function(){if(this.selection.isEmpty())this.selection.selectWordLeft();this.session.remove(this.getSelectionRange());this.clearSelection()};this.removeToLineStart=function(){if(this.selection.isEmpty())this.selection.selectLineStart();this.session.remove(this.getSelectionRange());this.clearSelection()};this.removeToLineEnd=function(){if(this.selection.isEmpty())this.selection.selectLineEnd();var range=this.getSelectionRange();if(range.start.column==range.end.column&&range.start.row==range.end.row){range.end.column=0;range.end.row++}this.session.remove(range);this.clearSelection()};this.splitLine=function(){if(!this.selection.isEmpty()){this.session.remove(this.getSelectionRange());this.clearSelection()}var cursor=this.getCursorPosition();this.insert("\n");this.moveCursorToPosition(cursor)};this.transposeLetters=function(){if(!this.selection.isEmpty()){return}var cursor=this.getCursorPosition();var column=cursor.column;if(column===0)return;var line=this.session.getLine(cursor.row);var swap,range;if(column<line.length){swap=line.charAt(column)+line.charAt(column-1);range=new Range(cursor.row,column-1,cursor.row,column+1)}else{swap=line.charAt(column-1)+line.charAt(column-2);range=new Range(cursor.row,column-2,cursor.row,column)}this.session.replace(range,swap);this.session.selection.moveToPosition(range.end)};this.toLowerCase=function(){var originalRange=this.getSelectionRange();if(this.selection.isEmpty()){this.selection.selectWord()}var range=this.getSelectionRange();var text=this.session.getTextRange(range);this.session.replace(range,text.toLowerCase());this.selection.setSelectionRange(originalRange)};this.toUpperCase=function(){var originalRange=this.getSelectionRange();if(this.selection.isEmpty()){this.selection.selectWord()}var range=this.getSelectionRange();var text=this.session.getTextRange(range);this.session.replace(range,text.toUpperCase());this.selection.setSelectionRange(originalRange)};this.indent=function(){var session=this.session;var range=this.getSelectionRange();if(range.start.row<range.end.row){var rows=this.$getSelectedRows();session.indentRows(rows.first,rows.last,"\t");return}else if(range.start.column<range.end.column){var text=session.getTextRange(range);if(!/^\s+$/.test(text)){var rows=this.$getSelectedRows();session.indentRows(rows.first,rows.last,"\t");return}}var line=session.getLine(range.start.row);var position=range.start;var size=session.getTabSize();var column=session.documentToScreenColumn(position.row,position.column);if(this.session.getUseSoftTabs()){var count=size-column%size;var indentString=lang.stringRepeat(" ",count)}else{var count=column%size;while(line[range.start.column-1]==" "&&count){range.start.column--;count--}this.selection.setSelectionRange(range);indentString="\t"}return this.insert(indentString)};this.blockIndent=function(){var rows=this.$getSelectedRows();this.session.indentRows(rows.first,rows.last,"\t")};this.blockOutdent=function(){var selection=this.session.getSelection();this.session.outdentRows(selection.getRange())};this.sortLines=function(){var rows=this.$getSelectedRows();var session=this.session;var lines=[];for(var i=rows.first;i<=rows.last;i++)lines.push(session.getLine(i));lines.sort((function(a,b){if(a.toLowerCase()<b.toLowerCase())return-1;if(a.toLowerCase()>b.toLowerCase())return 1;return 0}));var deleteRange=new Range(0,0,0,0);for(var i=rows.first;i<=rows.last;i++){var line=session.getLine(i);deleteRange.start.row=i;deleteRange.end.row=i;deleteRange.end.column=line.length;session.replace(deleteRange,lines[i-rows.first])}};this.toggleCommentLines=function(){var state=this.session.getState(this.getCursorPosition().row);var rows=this.$getSelectedRows();this.session.getMode().toggleCommentLines(state,this.session,rows.first,rows.last)};this.toggleBlockComment=function(){var cursor=this.getCursorPosition();var state=this.session.getState(cursor.row);var range=this.getSelectionRange();this.session.getMode().toggleBlockComment(state,this.session,range,cursor)};this.getNumberAt=function(row,column){var _numberRx=/[\-]?[0-9]+(?:\.[0-9]+)?/g;_numberRx.lastIndex=0;var s=this.session.getLine(row);while(_numberRx.lastIndex<column){var m=_numberRx.exec(s);if(m.index<=column&&m.index+m[0].length>=column){var number={value:m[0],start:m.index,end:m.index+m[0].length};return number}}return null};this.modifyNumber=function(amount){var row=this.selection.getCursor().row;var column=this.selection.getCursor().column;var charRange=new Range(row,column-1,row,column);var c=this.session.getTextRange(charRange);if(!isNaN(parseFloat(c))&&isFinite(c)){var nr=this.getNumberAt(row,column);if(nr){var fp=nr.value.indexOf(".")>=0?nr.start+nr.value.indexOf(".")+1:nr.end;var decimals=nr.start+nr.value.length-fp;var t=parseFloat(nr.value);t*=Math.pow(10,decimals);if(fp!==nr.end&&column<fp){amount*=Math.pow(10,nr.end-column-1)}else{amount*=Math.pow(10,nr.end-column)}t+=amount;t/=Math.pow(10,decimals);var nnr=t.toFixed(decimals);var replaceRange=new Range(row,nr.start,row,nr.end);this.session.replace(replaceRange,nnr);this.moveCursorTo(row,Math.max(nr.start+1,column+nnr.length-nr.value.length))}}};this.removeLines=function(){var rows=this.$getSelectedRows();this.session.removeFullLines(rows.first,rows.last);this.clearSelection()};this.duplicateSelection=function(){var sel=this.selection;var doc=this.session;var range=sel.getRange();var reverse=sel.isBackwards();if(range.isEmpty()){var row=range.start.row;doc.duplicateLines(row,row)}else{var point=reverse?range.start:range.end;var endPoint=doc.insert(point,doc.getTextRange(range),false);range.start=point;range.end=endPoint;sel.setSelectionRange(range,reverse)}};this.moveLinesDown=function(){this.$moveLines(1,false)};this.moveLinesUp=function(){this.$moveLines(-1,false)};this.moveText=function(range,toPosition,copy){return this.session.moveText(range,toPosition,copy)};this.copyLinesUp=function(){this.$moveLines(-1,true)};this.copyLinesDown=function(){this.$moveLines(1,true)};this.$moveLines=function(dir,copy){var rows,moved;var selection=this.selection;if(!selection.inMultiSelectMode||this.inVirtualSelectionMode){var range=selection.toOrientedRange();rows=this.$getSelectedRows(range);moved=this.session.$moveLines(rows.first,rows.last,copy?0:dir);if(copy&&dir==-1)moved=0;range.moveBy(moved,0);selection.fromOrientedRange(range)}else{var ranges=selection.rangeList.ranges;selection.rangeList.detach(this.session);this.inVirtualSelectionMode=true;var diff=0;var totalDiff=0;var l=ranges.length;for(var i=0;i<l;i++){var rangeIndex=i;ranges[i].moveBy(diff,0);rows=this.$getSelectedRows(ranges[i]);var first=rows.first;var last=rows.last;while(++i<l){if(totalDiff)ranges[i].moveBy(totalDiff,0);var subRows=this.$getSelectedRows(ranges[i]);if(copy&&subRows.first!=last)break;else if(!copy&&subRows.first>last+1)break;last=subRows.last}i--;diff=this.session.$moveLines(first,last,copy?0:dir);if(copy&&dir==-1)rangeIndex=i+1;while(rangeIndex<=i){ranges[rangeIndex].moveBy(diff,0);rangeIndex++}if(!copy)diff=0;totalDiff+=diff}selection.fromOrientedRange(selection.ranges[0]);selection.rangeList.attach(this.session);this.inVirtualSelectionMode=false}};this.$getSelectedRows=function(range){range=(range||this.getSelectionRange()).collapseRows();return{first:this.session.getRowFoldStart(range.start.row),last:this.session.getRowFoldEnd(range.end.row)}};this.onCompositionStart=function(text){this.renderer.showComposition(this.getCursorPosition())};this.onCompositionUpdate=function(text){this.renderer.setCompositionText(text)};this.onCompositionEnd=function(){this.renderer.hideComposition()};this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()};this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()};this.isRowVisible=function(row){return row>=this.getFirstVisibleRow()&&row<=this.getLastVisibleRow()};this.isRowFullyVisible=function(row){return row>=this.renderer.getFirstFullyVisibleRow()&&row<=this.renderer.getLastFullyVisibleRow()};this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1};this.$moveByPage=function(dir,select){var renderer=this.renderer;var config=this.renderer.layerConfig;var rows=dir*Math.floor(config.height/config.lineHeight);this.$blockScrolling++;if(select===true){this.selection.$moveSelection((function(){this.moveCursorBy(rows,0)}))}else if(select===false){this.selection.moveCursorBy(rows,0);this.selection.clearSelection()}this.$blockScrolling--;var scrollTop=renderer.scrollTop;renderer.scrollBy(0,rows*config.lineHeight);if(select!=null)renderer.scrollCursorIntoView(null,.5);renderer.animateScrolling(scrollTop)};this.selectPageDown=function(){this.$moveByPage(1,true)};this.selectPageUp=function(){this.$moveByPage(-1,true)};this.gotoPageDown=function(){this.$moveByPage(1,false)};this.gotoPageUp=function(){this.$moveByPage(-1,false)};this.scrollPageDown=function(){this.$moveByPage(1)};this.scrollPageUp=function(){this.$moveByPage(-1)};this.scrollToRow=function(row){this.renderer.scrollToRow(row)};this.scrollToLine=function(line,center,animate,callback){this.renderer.scrollToLine(line,center,animate,callback)};this.centerSelection=function(){var range=this.getSelectionRange();var pos={row:Math.floor(range.start.row+(range.end.row-range.start.row)/2),column:Math.floor(range.start.column+(range.end.column-range.start.column)/2)};this.renderer.alignCursor(pos,.5)};this.getCursorPosition=function(){return this.selection.getCursor()};this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())};this.getSelectionRange=function(){return this.selection.getRange()};this.selectAll=function(){this.$blockScrolling+=1;this.selection.selectAll();this.$blockScrolling-=1};this.clearSelection=function(){this.selection.clearSelection()};this.moveCursorTo=function(row,column){this.selection.moveCursorTo(row,column)};this.moveCursorToPosition=function(pos){this.selection.moveCursorToPosition(pos)};this.jumpToMatching=function(select,expand){var cursor=this.getCursorPosition();var iterator=new TokenIterator(this.session,cursor.row,cursor.column);var prevToken=iterator.getCurrentToken();var token=prevToken||iterator.stepForward();if(!token)return;var matchType;var found=false;var depth={};var i=cursor.column-token.start;var bracketType;var brackets={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(token.value.match(/[{}()\[\]]/g)){for(;i<token.value.length&&!found;i++){if(!brackets[token.value[i]]){continue}bracketType=brackets[token.value[i]]+"."+token.type.replace("rparen","lparen");if(isNaN(depth[bracketType])){depth[bracketType]=0}switch(token.value[i]){case"(":case"[":case"{":depth[bracketType]++;break;case")":case"]":case"}":depth[bracketType]--;if(depth[bracketType]===-1){matchType="bracket";found=true}break}}}else if(token&&token.type.indexOf("tag-name")!==-1){if(isNaN(depth[token.value])){depth[token.value]=0}if(prevToken.value==="<"){depth[token.value]++}else if(prevToken.value==="</"){depth[token.value]--}if(depth[token.value]===-1){matchType="tag";found=true}}if(!found){prevToken=token;token=iterator.stepForward();i=0}}while(token&&!found);if(!matchType)return;var range,pos;if(matchType==="bracket"){range=this.session.getBracketRange(cursor);if(!range){range=new Range(iterator.getCurrentTokenRow(),iterator.getCurrentTokenColumn()+i-1,iterator.getCurrentTokenRow(),iterator.getCurrentTokenColumn()+i-1);pos=range.start;if(expand||pos.row===cursor.row&&Math.abs(pos.column-cursor.column)<2)range=this.session.getBracketRange(pos)}}else if(matchType==="tag"){if(token&&token.type.indexOf("tag-name")!==-1)var tag=token.value;else return;range=new Range(iterator.getCurrentTokenRow(),iterator.getCurrentTokenColumn()-2,iterator.getCurrentTokenRow(),iterator.getCurrentTokenColumn()-2);if(range.compare(cursor.row,cursor.column)===0){found=false;do{token=prevToken;prevToken=iterator.stepBackward();if(prevToken){if(prevToken.type.indexOf("tag-close")!==-1){range.setEnd(iterator.getCurrentTokenRow(),iterator.getCurrentTokenColumn()+1)}if(token.value===tag&&token.type.indexOf("tag-name")!==-1){if(prevToken.value==="<"){depth[tag]++}else if(prevToken.value==="</"){depth[tag]--}if(depth[tag]===0)found=true}}}while(prevToken&&!found)}if(token&&token.type.indexOf("tag-name")){pos=range.start;if(pos.row==cursor.row&&Math.abs(pos.column-cursor.column)<2)pos=range.end}}pos=range&&range.cursor||pos;if(pos){if(select){if(range&&expand){this.selection.setRange(range)}else if(range&&range.isEqual(this.getSelectionRange())){this.clearSelection()}else{this.selection.selectTo(pos.row,pos.column)}}else{this.selection.moveTo(pos.row,pos.column)}}};this.gotoLine=function(lineNumber,column,animate){this.selection.clearSelection();this.session.unfold({row:lineNumber-1,column:column||0});this.$blockScrolling+=1;this.exitMultiSelectMode&&this.exitMultiSelectMode();this.moveCursorTo(lineNumber-1,column||0);this.$blockScrolling-=1;if(!this.isRowFullyVisible(lineNumber-1))this.scrollToLine(lineNumber-1,true,animate)};this.navigateTo=function(row,column){this.selection.moveTo(row,column)};this.navigateUp=function(times){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var selectionStart=this.selection.anchor.getPosition();return this.moveCursorToPosition(selectionStart)}this.selection.clearSelection();this.selection.moveCursorBy(-times||-1,0)};this.navigateDown=function(times){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var selectionEnd=this.selection.anchor.getPosition();return this.moveCursorToPosition(selectionEnd)}this.selection.clearSelection();this.selection.moveCursorBy(times||1,0)};this.navigateLeft=function(times){if(!this.selection.isEmpty()){var selectionStart=this.getSelectionRange().start;this.moveCursorToPosition(selectionStart)}else{times=times||1;while(times--){this.selection.moveCursorLeft()}}this.clearSelection()};this.navigateRight=function(times){if(!this.selection.isEmpty()){var selectionEnd=this.getSelectionRange().end;this.moveCursorToPosition(selectionEnd)}else{times=times||1;while(times--){this.selection.moveCursorRight()}}this.clearSelection()};this.navigateLineStart=function(){this.selection.moveCursorLineStart();this.clearSelection()};this.navigateLineEnd=function(){this.selection.moveCursorLineEnd();this.clearSelection()};this.navigateFileEnd=function(){this.selection.moveCursorFileEnd();this.clearSelection()};this.navigateFileStart=function(){this.selection.moveCursorFileStart();this.clearSelection()};this.navigateWordRight=function(){this.selection.moveCursorWordRight();this.clearSelection()};this.navigateWordLeft=function(){this.selection.moveCursorWordLeft();this.clearSelection()};this.replace=function(replacement,options){if(options)this.$search.set(options);var range=this.$search.find(this.session);var replaced=0;if(!range)return replaced;if(this.$tryReplace(range,replacement)){replaced=1}if(range!==null){this.selection.setSelectionRange(range);this.renderer.scrollSelectionIntoView(range.start,range.end)}return replaced};this.replaceAll=function(replacement,options){if(options){this.$search.set(options)}var ranges=this.$search.findAll(this.session);var replaced=0;if(!ranges.length)return replaced;this.$blockScrolling+=1;var selection=this.getSelectionRange();this.selection.moveTo(0,0);for(var i=ranges.length-1;i>=0;--i){if(this.$tryReplace(ranges[i],replacement)){replaced++}}this.selection.setSelectionRange(selection);this.$blockScrolling-=1;return replaced};this.$tryReplace=function(range,replacement){var input=this.session.getTextRange(range);replacement=this.$search.replace(input,replacement);if(replacement!==null){range.end=this.session.replace(range,replacement);return range}else{return null}};this.getLastSearchOptions=function(){return this.$search.getOptions()};this.find=function(needle,options,animate){if(!options)options={};if(typeof needle=="string"||needle instanceof RegExp)options.needle=needle;else if(typeof needle=="object")oop.mixin(options,needle);var range=this.selection.getRange();if(options.needle==null){needle=this.session.getTextRange(range)||this.$search.$options.needle;if(!needle){range=this.session.getWordRange(range.start.row,range.start.column);needle=this.session.getTextRange(range)}this.$search.set({needle:needle})}this.$search.set(options);if(!options.start)this.$search.set({start:range});var newRange=this.$search.find(this.session);if(options.preventScroll)return newRange;if(newRange){this.revealRange(newRange,animate);return newRange}if(options.backwards)range.start=range.end;else range.end=range.start;this.selection.setRange(range)};this.findNext=function(options,animate){this.find({skipCurrent:true,backwards:false},options,animate)};this.findPrevious=function(options,animate){this.find(options,{skipCurrent:true,backwards:true},animate)};this.revealRange=function(range,animate){this.$blockScrolling+=1;this.session.unfold(range);this.selection.setSelectionRange(range);this.$blockScrolling-=1;var scrollTop=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(range.start,range.end,.5);if(animate!==false)this.renderer.animateScrolling(scrollTop)};this.undo=function(){this.$blockScrolling++;this.session.getUndoManager().undo();this.$blockScrolling--;this.renderer.scrollCursorIntoView(null,.5)};this.redo=function(){this.$blockScrolling++;this.session.getUndoManager().redo();this.$blockScrolling--;this.renderer.scrollCursorIntoView(null,.5)};this.destroy=function(){this.renderer.destroy();this._signal("destroy",this);if(this.session){this.session.destroy()}};this.setAutoScrollEditorIntoView=function(enable){if(!enable)return;var rect;var self=this;var shouldScroll=false;if(!this.$scrollAnchor)this.$scrollAnchor=document.createElement("div");var scrollAnchor=this.$scrollAnchor;scrollAnchor.style.cssText="position:absolute";this.container.insertBefore(scrollAnchor,this.container.firstChild);var onChangeSelection=this.on("changeSelection",(function(){shouldScroll=true}));var onBeforeRender=this.renderer.on("beforeRender",(function(){if(shouldScroll)rect=self.renderer.container.getBoundingClientRect()}));var onAfterRender=this.renderer.on("afterRender",(function(){if(shouldScroll&&rect&&(self.isFocused()||self.searchBox&&self.searchBox.isFocused())){var renderer=self.renderer;var pos=renderer.$cursorLayer.$pixelPos;var config=renderer.layerConfig;var top=pos.top-config.offset;if(pos.top>=0&&top+rect.top<0){shouldScroll=true}else if(pos.top<config.height&&pos.top+rect.top+config.lineHeight>window.innerHeight){shouldScroll=false}else{shouldScroll=null}if(shouldScroll!=null){scrollAnchor.style.top=top+"px";scrollAnchor.style.left=pos.left+"px";scrollAnchor.style.height=config.lineHeight+"px";scrollAnchor.scrollIntoView(shouldScroll)}shouldScroll=rect=null}}));this.setAutoScrollEditorIntoView=function(enable){if(enable)return;delete this.setAutoScrollEditorIntoView;this.off("changeSelection",onChangeSelection);this.renderer.off("afterRender",onAfterRender);this.renderer.off("beforeRender",onBeforeRender)}};this.$resetCursorStyle=function(){var style=this.$cursorStyle||"ace";var cursorLayer=this.renderer.$cursorLayer;if(!cursorLayer)return;cursorLayer.setSmoothBlinking(/smooth/.test(style));cursorLayer.isBlinking=!this.$readOnly&&style!="wide";dom.setCssClass(cursorLayer.element,"ace_slim-cursors",/slim/.test(style))}}).call(Editor.prototype);config.defineOptions(Editor.prototype,"editor",{selectionStyle:{set:function(style){this.onSelectionChange();this._signal("changeSelectionStyle",{data:style})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:true},highlightSelectedWord:{set:function(shouldHighlight){this.$onSelectionChange()},initialValue:true},readOnly:{set:function(readOnly){this.$resetCursorStyle()},initialValue:false},cursorStyle:{set:function(val){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[false,true,"always"],initialValue:true},behavioursEnabled:{initialValue:true},wrapBehavioursEnabled:{initialValue:true},autoScrollEditorIntoView:{set:function(val){this.setAutoScrollEditorIntoView(val)}},keyboardHandler:{set:function(val){this.setKeyboardHandler(val)},get:function(){return this.keybindingId},handlesSet:true},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});exports.Editor=Editor}));ace.define("ace/undomanager",["require","exports","module"],(function(acequire,exports,module){"use strict";var UndoManager=function(){this.reset()};(function(){this.execute=function(options){var deltaSets=options.args[0];this.$doc=options.args[1];if(options.merge&&this.hasUndo()){this.dirtyCounter--;deltaSets=this.$undoStack.pop().concat(deltaSets)}this.$undoStack.push(deltaSets);this.$redoStack=[];if(this.dirtyCounter<0){this.dirtyCounter=NaN}this.dirtyCounter++};this.undo=function(dontSelect){var deltaSets=this.$undoStack.pop();var undoSelectionRange=null;if(deltaSets){undoSelectionRange=this.$doc.undoChanges(deltaSets,dontSelect);this.$redoStack.push(deltaSets);this.dirtyCounter--}return undoSelectionRange};this.redo=function(dontSelect){var deltaSets=this.$redoStack.pop();var redoSelectionRange=null;if(deltaSets){redoSelectionRange=this.$doc.redoChanges(this.$deserializeDeltas(deltaSets),dontSelect);this.$undoStack.push(deltaSets);this.dirtyCounter++}return redoSelectionRange};this.reset=function(){this.$undoStack=[];this.$redoStack=[];this.dirtyCounter=0};this.hasUndo=function(){return this.$undoStack.length>0};this.hasRedo=function(){return this.$redoStack.length>0};this.markClean=function(){this.dirtyCounter=0};this.isClean=function(){return this.dirtyCounter===0};this.$serializeDeltas=function(deltaSets){return cloneDeltaSetsObj(deltaSets,$serializeDelta)};this.$deserializeDeltas=function(deltaSets){return cloneDeltaSetsObj(deltaSets,$deserializeDelta)};function $serializeDelta(delta){return{action:delta.action,start:delta.start,end:delta.end,lines:delta.lines.length==1?null:delta.lines,text:delta.lines.length==1?delta.lines[0]:null}}function $deserializeDelta(delta){return{action:delta.action,start:delta.start,end:delta.end,lines:delta.lines||[delta.text]}}function cloneDeltaSetsObj(deltaSets_old,fnGetModifiedDelta){var deltaSets_new=new Array(deltaSets_old.length);for(var i=0;i<deltaSets_old.length;i++){var deltaSet_old=deltaSets_old[i];var deltaSet_new={group:deltaSet_old.group,deltas:new Array(deltaSet_old.length)};for(var j=0;j<deltaSet_old.deltas.length;j++){var delta_old=deltaSet_old.deltas[j];deltaSet_new.deltas[j]=fnGetModifiedDelta(delta_old)}deltaSets_new[i]=deltaSet_new}return deltaSets_new}}).call(UndoManager.prototype);exports.UndoManager=UndoManager}));ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],(function(acequire,exports,module){"use strict";var dom=acequire("../lib/dom");var oop=acequire("../lib/oop");var lang=acequire("../lib/lang");var EventEmitter=acequire("../lib/event_emitter").EventEmitter;var Gutter=function(parentEl){this.element=dom.createElement("div");this.element.className="ace_layer ace_gutter-layer";parentEl.appendChild(this.element);this.setShowFoldWidgets(this.$showFoldWidgets);this.gutterWidth=0;this.$annotations=[];this.$updateAnnotations=this.$updateAnnotations.bind(this);this.$cells=[]};(function(){oop.implement(this,EventEmitter);this.setSession=function(session){if(this.session)this.session.removeEventListener("change",this.$updateAnnotations);this.session=session;if(session)session.on("change",this.$updateAnnotations)};this.addGutterDecoration=function(row,className){if(window.console)console.warn&&console.warn("deprecated use session.addGutterDecoration");this.session.addGutterDecoration(row,className)};this.removeGutterDecoration=function(row,className){if(window.console)console.warn&&console.warn("deprecated use session.removeGutterDecoration");this.session.removeGutterDecoration(row,className)};this.setAnnotations=function(annotations){this.$annotations=[];for(var i=0;i<annotations.length;i++){var annotation=annotations[i];var row=annotation.row;var rowInfo=this.$annotations[row];if(!rowInfo)rowInfo=this.$annotations[row]={text:[]};var annoText=annotation.text;annoText=annoText?lang.escapeHTML(annoText):annotation.html||"";if(rowInfo.text.indexOf(annoText)===-1)rowInfo.text.push(annoText);var type=annotation.type;if(type=="error")rowInfo.className=" ace_error";else if(type=="warning"&&rowInfo.className!=" ace_error")rowInfo.className=" ace_warning";else if(type=="info"&&!rowInfo.className)rowInfo.className=" ace_info"}};this.$updateAnnotations=function(delta){if(!this.$annotations.length)return;var firstRow=delta.start.row;var len=delta.end.row-firstRow;if(len===0){}else if(delta.action=="remove"){this.$annotations.splice(firstRow,len+1,null)}else{var args=new Array(len+1);args.unshift(firstRow,1);this.$annotations.splice.apply(this.$annotations,args)}};this.update=function(config){var session=this.session;var firstRow=config.firstRow;var lastRow=Math.min(config.lastRow+config.gutterOffset,session.getLength()-1);var fold=session.getNextFoldLine(firstRow);var foldStart=fold?fold.start.row:Infinity;var foldWidgets=this.$showFoldWidgets&&session.foldWidgets;var breakpoints=session.$breakpoints;var decorations=session.$decorations;var firstLineNumber=session.$firstLineNumber;var lastLineNumber=0;var gutterRenderer=session.gutterRenderer||this.$renderer;var cell=null;var index=-1;var row=firstRow;while(true){if(row>foldStart){row=fold.end.row+1;fold=session.getNextFoldLine(row,fold);foldStart=fold?fold.start.row:Infinity}if(row>lastRow){while(this.$cells.length>index+1){cell=this.$cells.pop();this.element.removeChild(cell.element)}break}cell=this.$cells[++index];if(!cell){cell={element:null,textNode:null,foldWidget:null};cell.element=dom.createElement("div");cell.textNode=document.createTextNode("");cell.element.appendChild(cell.textNode);this.element.appendChild(cell.element);this.$cells[index]=cell}var className="ace_gutter-cell ";if(breakpoints[row])className+=breakpoints[row];if(decorations[row])className+=decorations[row];if(this.$annotations[row])className+=this.$annotations[row].className;if(cell.element.className!=className)cell.element.className=className;var height=session.getRowLength(row)*config.lineHeight+"px";if(height!=cell.element.style.height)cell.element.style.height=height;if(foldWidgets){var c=foldWidgets[row];if(c==null)c=foldWidgets[row]=session.getFoldWidget(row)}if(c){if(!cell.foldWidget){cell.foldWidget=dom.createElement("span");cell.element.appendChild(cell.foldWidget)}var className="ace_fold-widget ace_"+c;if(c=="start"&&row==foldStart&&row<fold.end.row)className+=" ace_closed";else className+=" ace_open";if(cell.foldWidget.className!=className)cell.foldWidget.className=className;var height=config.lineHeight+"px";if(cell.foldWidget.style.height!=height)cell.foldWidget.style.height=height}else{if(cell.foldWidget){cell.element.removeChild(cell.foldWidget);cell.foldWidget=null}}var text=lastLineNumber=gutterRenderer?gutterRenderer.getText(session,row):row+firstLineNumber;if(text!==cell.textNode.data)cell.textNode.data=text;row++}this.element.style.height=config.minHeight+"px";if(this.$fixedWidth||session.$useWrapMode)lastLineNumber=session.getLength()+firstLineNumber;var gutterWidth=gutterRenderer?gutterRenderer.getWidth(session,lastLineNumber,config):lastLineNumber.toString().length*config.characterWidth;var padding=this.$padding||this.$computePadding();gutterWidth+=padding.left+padding.right;if(gutterWidth!==this.gutterWidth&&!isNaN(gutterWidth)){this.gutterWidth=gutterWidth;this.element.style.width=Math.ceil(this.gutterWidth)+"px";this._emit("changeGutterWidth",gutterWidth)}};this.$fixedWidth=false;this.$showLineNumbers=true;this.$renderer="";this.setShowLineNumbers=function(show){this.$renderer=!show&&{getWidth:function(){return""},getText:function(){return""}}};this.getShowLineNumbers=function(){return this.$showLineNumbers};this.$showFoldWidgets=true;this.setShowFoldWidgets=function(show){if(show)dom.addCssClass(this.element,"ace_folding-enabled");else dom.removeCssClass(this.element,"ace_folding-enabled");this.$showFoldWidgets=show;this.$padding=null};this.getShowFoldWidgets=function(){return this.$showFoldWidgets};this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var style=dom.computedStyle(this.element.firstChild);this.$padding={};this.$padding.left=parseInt(style.paddingLeft)+1||0;this.$padding.right=parseInt(style.paddingRight)||0;return this.$padding};this.getRegion=function(point){var padding=this.$padding||this.$computePadding();var rect=this.element.getBoundingClientRect();if(point.x<padding.left+rect.left)return"markers";if(this.$showFoldWidgets&&point.x>rect.right-padding.right)return"foldWidgets"}}).call(Gutter.prototype);exports.Gutter=Gutter}));ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],(function(acequire,exports,module){"use strict";var Range=acequire("../range").Range;var dom=acequire("../lib/dom");var Marker=function(parentEl){this.element=dom.createElement("div");this.element.className="ace_layer ace_marker-layer";parentEl.appendChild(this.element)};(function(){this.$padding=0;this.setPadding=function(padding){this.$padding=padding};this.setSession=function(session){this.session=session};this.setMarkers=function(markers){this.markers=markers};this.update=function(config){if(!config)return;this.config=config;var html=[];for(var key in this.markers){var marker=this.markers[key];if(!marker.range){marker.update(html,this,this.session,config);continue}var range=marker.range.clipRows(config.firstRow,config.lastRow);if(range.isEmpty())continue;range=range.toScreenRange(this.session);if(marker.renderer){var top=this.$getTop(range.start.row,config);var left=this.$padding+(this.session.$bidiHandler.isBidiRow(range.start.row)?this.session.$bidiHandler.getPosLeft(range.start.column):range.start.column*config.characterWidth);marker.renderer(html,range,left,top,config)}else if(marker.type=="fullLine"){this.drawFullLineMarker(html,range,marker.clazz,config)}else if(marker.type=="screenLine"){this.drawScreenLineMarker(html,range,marker.clazz,config)}else if(range.isMultiLine()){if(marker.type=="text")this.drawTextMarker(html,range,marker.clazz,config);else this.drawMultiLineMarker(html,range,marker.clazz,config)}else{if(this.session.$bidiHandler.isBidiRow(range.start.row)){this.drawBidiSingleLineMarker(html,range,marker.clazz+" ace_start"+" ace_br15",config)}else{this.drawSingleLineMarker(html,range,marker.clazz+" ace_start"+" ace_br15",config)}}}this.element.innerHTML=html.join("")};this.$getTop=function(row,layerConfig){return(row-layerConfig.firstRowScreen)*layerConfig.lineHeight};function getBorderClass(tl,tr,br,bl){return(tl?1:0)|(tr?2:0)|(br?4:0)|(bl?8:0)}this.drawTextMarker=function(stringBuilder,range,clazz,layerConfig,extraStyle){var session=this.session;var start=range.start.row;var end=range.end.row;var row=start;var prev=0;var curr=0;var next=session.getScreenLastRowColumn(row);var clazzModified=null;var lineRange=new Range(row,range.start.column,row,curr);for(;row<=end;row++){lineRange.start.row=lineRange.end.row=row;lineRange.start.column=row==start?range.start.column:session.getRowWrapIndent(row);lineRange.end.column=next;prev=curr;curr=next;next=row+1<end?session.getScreenLastRowColumn(row+1):row==end?0:range.end.column;clazzModified=clazz+(row==start?" ace_start":"")+" ace_br"+getBorderClass(row==start||row==start+1&&range.start.column,prev<curr,curr>next,row==end);if(this.session.$bidiHandler.isBidiRow(row)){this.drawBidiSingleLineMarker(stringBuilder,lineRange,clazzModified,layerConfig,row==end?0:1,extraStyle)}else{this.drawSingleLineMarker(stringBuilder,lineRange,clazzModified,layerConfig,row==end?0:1,extraStyle)}}};this.drawMultiLineMarker=function(stringBuilder,range,clazz,config,extraStyle){var padding=this.$padding;var height,top,left;extraStyle=extraStyle||"";if(this.session.$bidiHandler.isBidiRow(range.start.row)){var range1=range.clone();range1.end.row=range1.start.row;range1.end.column=this.session.getLine(range1.start.row).length;this.drawBidiSingleLineMarker(stringBuilder,range1,clazz+" ace_br1 ace_start",config,null,extraStyle)}else{height=config.lineHeight;top=this.$getTop(range.start.row,config);left=padding+range.start.column*config.characterWidth;stringBuilder.push("<div class='",clazz," ace_br1 ace_start' style='","height:",height,"px;","right:0;","top:",top,"px;","left:",left,"px;",extraStyle,"'></div>")}if(this.session.$bidiHandler.isBidiRow(range.end.row)){var range1=range.clone();range1.start.row=range1.end.row;range1.start.column=0;this.drawBidiSingleLineMarker(stringBuilder,range1,clazz+" ace_br12",config,null,extraStyle)}else{var width=range.end.column*config.characterWidth;height=config.lineHeight;top=this.$getTop(range.end.row,config);stringBuilder.push("<div class='",clazz," ace_br12' style='","height:",height,"px;","width:",width,"px;","top:",top,"px;","left:",padding,"px;",extraStyle,"'></div>")}height=(range.end.row-range.start.row-1)*config.lineHeight;if(height<=0)return;top=this.$getTop(range.start.row+1,config);var radiusClass=(range.start.column?1:0)|(range.end.column?0:8);stringBuilder.push("<div class='",clazz,radiusClass?" ace_br"+radiusClass:"","' style='","height:",height,"px;","right:0;","top:",top,"px;","left:",padding,"px;",extraStyle,"'></div>")};this.drawSingleLineMarker=function(stringBuilder,range,clazz,config,extraLength,extraStyle){var height=config.lineHeight;var width=(range.end.column+(extraLength||0)-range.start.column)*config.characterWidth;var top=this.$getTop(range.start.row,config);var left=this.$padding+range.start.column*config.characterWidth;stringBuilder.push("<div class='",clazz,"' style='","height:",height,"px;","width:",width,"px;","top:",top,"px;","left:",left,"px;",extraStyle||"","'></div>")};this.drawBidiSingleLineMarker=function(stringBuilder,range,clazz,config,extraLength,extraStyle){var height=config.lineHeight,top=this.$getTop(range.start.row,config),padding=this.$padding;var selections=this.session.$bidiHandler.getSelections(range.start.column,range.end.column);selections.forEach((function(selection){stringBuilder.push("<div class='",clazz,"' style='","height:",height,"px;","width:",selection.width+(extraLength||0),"px;","top:",top,"px;","left:",padding+selection.left,"px;",extraStyle||"","'></div>")}))};this.drawFullLineMarker=function(stringBuilder,range,clazz,config,extraStyle){var top=this.$getTop(range.start.row,config);var height=config.lineHeight;if(range.start.row!=range.end.row)height+=this.$getTop(range.end.row,config)-top;stringBuilder.push("<div class='",clazz,"' style='","height:",height,"px;","top:",top,"px;","left:0;right:0;",extraStyle||"","'></div>")};this.drawScreenLineMarker=function(stringBuilder,range,clazz,config,extraStyle){var top=this.$getTop(range.start.row,config);var height=config.lineHeight;stringBuilder.push("<div class='",clazz,"' style='","height:",height,"px;","top:",top,"px;","left:0;right:0;",extraStyle||"","'></div>")}}).call(Marker.prototype);exports.Marker=Marker}));ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],(function(acequire,exports,module){"use strict";var oop=acequire("../lib/oop");var dom=acequire("../lib/dom");var lang=acequire("../lib/lang");var useragent=acequire("../lib/useragent");var EventEmitter=acequire("../lib/event_emitter").EventEmitter;var Text=function(parentEl){this.element=dom.createElement("div");this.element.className="ace_layer ace_text-layer";parentEl.appendChild(this.element);this.$updateEolChar=this.$updateEolChar.bind(this)};(function(){oop.implement(this,EventEmitter);this.EOF_CHAR="";this.EOL_CHAR_LF="";this.EOL_CHAR_CRLF="";this.EOL_CHAR=this.EOL_CHAR_LF;this.TAB_CHAR="";this.SPACE_CHAR="";this.$padding=0;this.$updateEolChar=function(){var EOL_CHAR=this.session.doc.getNewLineCharacter()=="\n"?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=EOL_CHAR){this.EOL_CHAR=EOL_CHAR;return true}};this.setPadding=function(padding){this.$padding=padding;this.element.style.padding="0 "+padding+"px"};this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0};this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0};this.$setFontMetrics=function(measure){this.$fontMetrics=measure;this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this));this.$pollSizeChanges()};this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()};this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()};this.setSession=function(session){this.session=session;if(session)this.$computeTabString()};this.showInvisibles=false;this.setShowInvisibles=function(showInvisibles){if(this.showInvisibles==showInvisibles)return false;this.showInvisibles=showInvisibles;this.$computeTabString();return true};this.displayIndentGuides=true;this.setDisplayIndentGuides=function(display){if(this.displayIndentGuides==display)return false;this.displayIndentGuides=display;this.$computeTabString();return true};this.$tabStrings=[];this.onChangeTabSize=this.$computeTabString=function(){var tabSize=this.session.getTabSize();this.tabSize=tabSize;var tabStr=this.$tabStrings=[0];for(var i=1;i<tabSize+1;i++){if(this.showInvisibles){tabStr.push("<span class='ace_invisible ace_invisible_tab'>"+lang.stringRepeat(this.TAB_CHAR,i)+"</span>")}else{tabStr.push(lang.stringRepeat(" ",i))}}if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var className="ace_indent-guide";var spaceClass="";var tabClass="";if(this.showInvisibles){className+=" ace_invisible";spaceClass=" ace_invisible_space";tabClass=" ace_invisible_tab";var spaceContent=lang.stringRepeat(this.SPACE_CHAR,this.tabSize);var tabContent=lang.stringRepeat(this.TAB_CHAR,this.tabSize)}else{var spaceContent=lang.stringRepeat(" ",this.tabSize);var tabContent=spaceContent}this.$tabStrings[" "]="<span class='"+className+spaceClass+"'>"+spaceContent+"</span>";this.$tabStrings["\t"]="<span class='"+className+tabClass+"'>"+tabContent+"</span>"}};this.updateLines=function(config,firstRow,lastRow){if(this.config.lastRow!=config.lastRow||this.config.firstRow!=config.firstRow){this.scrollLines(config)}this.config=config;var first=Math.max(firstRow,config.firstRow);var last=Math.min(lastRow,config.lastRow);var lineElements=this.element.childNodes;var lineElementsIdx=0;for(var row=config.firstRow;row<first;row++){var foldLine=this.session.getFoldLine(row);if(foldLine){if(foldLine.containsRow(first)){first=foldLine.start.row;break}else{row=foldLine.end.row}}lineElementsIdx++}var row=first;var foldLine=this.session.getNextFoldLine(row);var foldStart=foldLine?foldLine.start.row:Infinity;while(true){if(row>foldStart){row=foldLine.end.row+1;foldLine=this.session.getNextFoldLine(row,foldLine);foldStart=foldLine?foldLine.start.row:Infinity}if(row>last)break;var lineElement=lineElements[lineElementsIdx++];if(lineElement){var html=[];this.$renderLine(html,row,!this.$useLineGroups(),row==foldStart?foldLine:false);lineElement.style.height=config.lineHeight*this.session.getRowLength(row)+"px";lineElement.innerHTML=html.join("")}row++}};this.scrollLines=function(config){var oldConfig=this.config;this.config=config;if(!oldConfig||oldConfig.lastRow<config.firstRow)return this.update(config);if(config.lastRow<oldConfig.firstRow)return this.update(config);var el=this.element;if(oldConfig.firstRow<config.firstRow)for(var row=this.session.getFoldedRowCount(oldConfig.firstRow,config.firstRow-1);row>0;row--)el.removeChild(el.firstChild);if(oldConfig.lastRow>config.lastRow)for(var row=this.session.getFoldedRowCount(config.lastRow+1,oldConfig.lastRow);row>0;row--)el.removeChild(el.lastChild);if(config.firstRow<oldConfig.firstRow){var fragment=this.$renderLinesFragment(config,config.firstRow,oldConfig.firstRow-1);if(el.firstChild)el.insertBefore(fragment,el.firstChild);else el.appendChild(fragment)}if(config.lastRow>oldConfig.lastRow){var fragment=this.$renderLinesFragment(config,oldConfig.lastRow+1,config.lastRow);el.appendChild(fragment)}};this.$renderLinesFragment=function(config,firstRow,lastRow){var fragment=this.element.ownerDocument.createDocumentFragment();var row=firstRow;var foldLine=this.session.getNextFoldLine(row);var foldStart=foldLine?foldLine.start.row:Infinity;while(true){if(row>foldStart){row=foldLine.end.row+1;foldLine=this.session.getNextFoldLine(row,foldLine);foldStart=foldLine?foldLine.start.row:Infinity}if(row>lastRow)break;var container=dom.createElement("div");var html=[];this.$renderLine(html,row,false,row==foldStart?foldLine:false);container.innerHTML=html.join("");if(this.$useLineGroups()){container.className="ace_line_group";fragment.appendChild(container);container.style.height=config.lineHeight*this.session.getRowLength(row)+"px"}else{while(container.firstChild)fragment.appendChild(container.firstChild)}row++}return fragment};this.update=function(config){this.config=config;var html=[];var firstRow=config.firstRow,lastRow=config.lastRow;var row=firstRow;var foldLine=this.session.getNextFoldLine(row);var foldStart=foldLine?foldLine.start.row:Infinity;while(true){if(row>foldStart){row=foldLine.end.row+1;foldLine=this.session.getNextFoldLine(row,foldLine);foldStart=foldLine?foldLine.start.row:Infinity}if(row>lastRow)break;if(this.$useLineGroups())html.push("<div class='ace_line_group' style='height:",config.lineHeight*this.session.getRowLength(row),"px'>");this.$renderLine(html,row,false,row==foldStart?foldLine:false);if(this.$useLineGroups())html.push("</div>");row++}this.element.innerHTML=html.join("")};this.$textToken={text:true,rparen:true,lparen:true};this.$renderToken=function(stringBuilder,screenColumn,token,value){var self=this;var replaceReg=/\t|&|<|>|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF\uFFF9-\uFFFC])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g;var replaceFunc=function(c,a,b,tabIdx,idx4){if(a){return self.showInvisibles?"<span class='ace_invisible ace_invisible_space'>"+lang.stringRepeat(self.SPACE_CHAR,c.length)+"</span>":c}else if(c=="&"){return"&#38;"}else if(c=="<"){return"&#60;"}else if(c==">"){return"&#62;"}else if(c=="\t"){var tabSize=self.session.getScreenTabSize(screenColumn+tabIdx);screenColumn+=tabSize-1;return self.$tabStrings[tabSize]}else if(c==""){var classToUse=self.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk";var space=self.showInvisibles?self.SPACE_CHAR:"";screenColumn+=1;return"<span class='"+classToUse+"' style='width:"+self.config.characterWidth*2+"px'>"+space+"</span>"}else if(b){return"<span class='ace_invisible ace_invisible_space ace_invalid'>"+self.SPACE_CHAR+"</span>"}else{screenColumn+=1;return"<span class='ace_cjk' style='width:"+self.config.characterWidth*2+"px'>"+c+"</span>"}};var output=value.replace(replaceReg,replaceFunc);if(!this.$textToken[token.type]){var classes="ace_"+token.type.replace(/\./g," ace_");var style="";if(token.type=="fold")style=" style='width:"+token.value.length*this.config.characterWidth+"px;' ";stringBuilder.push("<span class='",classes,"'",style,">",output,"</span>")}else{stringBuilder.push(output)}return screenColumn+value.length};this.renderIndentGuide=function(stringBuilder,value,max){var cols=value.search(this.$indentGuideRe);if(cols<=0||cols>=max)return value;if(value[0]==" "){cols-=cols%this.tabSize;stringBuilder.push(lang.stringRepeat(this.$tabStrings[" "],cols/this.tabSize));return value.substr(cols)}else if(value[0]=="\t"){stringBuilder.push(lang.stringRepeat(this.$tabStrings["\t"],cols));return value.substr(cols)}return value};this.$renderWrappedLine=function(stringBuilder,tokens,splits,onlyContents){var chars=0;var split=0;var splitChars=splits[0];var screenColumn=0;for(var i=0;i<tokens.length;i++){var token=tokens[i];var value=token.value;if(i==0&&this.displayIndentGuides){chars=value.length;value=this.renderIndentGuide(stringBuilder,value,splitChars);if(!value)continue;chars-=value.length}if(chars+value.length<splitChars){screenColumn=this.$renderToken(stringBuilder,screenColumn,token,value);chars+=value.length}else{while(chars+value.length>=splitChars){screenColumn=this.$renderToken(stringBuilder,screenColumn,token,value.substring(0,splitChars-chars));value=value.substring(splitChars-chars);chars=splitChars;if(!onlyContents){stringBuilder.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>")}stringBuilder.push(lang.stringRepeat("",splits.indent));split++;screenColumn=0;splitChars=splits[split]||Number.MAX_VALUE}if(value.length!=0){chars+=value.length;screenColumn=this.$renderToken(stringBuilder,screenColumn,token,value)}}}};this.$renderSimpleLine=function(stringBuilder,tokens){var screenColumn=0;var token=tokens[0];var value=token.value;if(this.displayIndentGuides)value=this.renderIndentGuide(stringBuilder,value);if(value)screenColumn=this.$renderToken(stringBuilder,screenColumn,token,value);for(var i=1;i<tokens.length;i++){token=tokens[i];value=token.value;screenColumn=this.$renderToken(stringBuilder,screenColumn,token,value)}};this.$renderLine=function(stringBuilder,row,onlyContents,foldLine){if(!foldLine&&foldLine!=false)foldLine=this.session.getFoldLine(row);if(foldLine)var tokens=this.$getFoldLineTokens(row,foldLine);else var tokens=this.session.getTokens(row);if(!onlyContents){stringBuilder.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(row)),"px'>")}if(tokens.length){var splits=this.session.getRowSplitData(row);if(splits&&splits.length)this.$renderWrappedLine(stringBuilder,tokens,splits,onlyContents);else this.$renderSimpleLine(stringBuilder,tokens)}if(this.showInvisibles){if(foldLine)row=foldLine.end.row;stringBuilder.push("<span class='ace_invisible ace_invisible_eol'>",row==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")}if(!onlyContents)stringBuilder.push("</div>")};this.$getFoldLineTokens=function(row,foldLine){var session=this.session;var renderTokens=[];function addTokens(tokens,from,to){var idx=0,col=0;while(col+tokens[idx].value.length<from){col+=tokens[idx].value.length;idx++;if(idx==tokens.length)return}if(col!=from){var value=tokens[idx].value.substring(from-col);if(value.length>to-from)value=value.substring(0,to-from);renderTokens.push({type:tokens[idx].type,value:value});col=from+value.length;idx+=1}while(col<to&&idx<tokens.length){var value=tokens[idx].value;if(value.length+col>to){renderTokens.push({type:tokens[idx].type,value:value.substring(0,to-col)})}else renderTokens.push(tokens[idx]);col+=value.length;idx+=1}}var tokens=session.getTokens(row);foldLine.walk((function(placeholder,row,column,lastColumn,isNewRow){if(placeholder!=null){renderTokens.push({type:"fold",value:placeholder})}else{if(isNewRow)tokens=session.getTokens(row);if(tokens.length)addTokens(tokens,lastColumn,column)}}),foldLine.end.row,this.session.getLine(foldLine.end.row).length);return renderTokens};this.$useLineGroups=function(){return this.session.getUseWrapMode()};this.destroy=function(){clearInterval(this.$pollSizeChangesTimer);if(this.$measureNode)this.$measureNode.parentNode.removeChild(this.$measureNode);delete this.$measureNode}}).call(Text.prototype);exports.Text=Text}));ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],(function(acequire,exports,module){"use strict";var dom=acequire("../lib/dom");var isIE8;var Cursor=function(parentEl){this.element=dom.createElement("div");this.element.className="ace_layer ace_cursor-layer";parentEl.appendChild(this.element);if(isIE8===undefined)isIE8=!("opacity"in this.element.style);this.isVisible=false;this.isBlinking=true;this.blinkInterval=1e3;this.smoothBlinking=false;this.cursors=[];this.cursor=this.addCursor();dom.addCssClass(this.element,"ace_hidden-cursors");this.$updateCursors=(isIE8?this.$updateVisibility:this.$updateOpacity).bind(this)};(function(){this.$updateVisibility=function(val){var cursors=this.cursors;for(var i=cursors.length;i--;)cursors[i].style.visibility=val?"":"hidden"};this.$updateOpacity=function(val){var cursors=this.cursors;for(var i=cursors.length;i--;)cursors[i].style.opacity=val?"":"0"};this.$padding=0;this.setPadding=function(padding){this.$padding=padding};this.setSession=function(session){this.session=session};this.setBlinking=function(blinking){if(blinking!=this.isBlinking){this.isBlinking=blinking;this.restartTimer()}};this.setBlinkInterval=function(blinkInterval){if(blinkInterval!=this.blinkInterval){this.blinkInterval=blinkInterval;this.restartTimer()}};this.setSmoothBlinking=function(smoothBlinking){if(smoothBlinking!=this.smoothBlinking&&!isIE8){this.smoothBlinking=smoothBlinking;dom.setCssClass(this.element,"ace_smooth-blinking",smoothBlinking);this.$updateCursors(true);this.$updateCursors=this.$updateOpacity.bind(this);this.restartTimer()}};this.addCursor=function(){var el=dom.createElement("div");el.className="ace_cursor";this.element.appendChild(el);this.cursors.push(el);return el};this.removeCursor=function(){if(this.cursors.length>1){var el=this.cursors.pop();el.parentNode.removeChild(el);return el}};this.hideCursor=function(){this.isVisible=false;dom.addCssClass(this.element,"ace_hidden-cursors");this.restartTimer()};this.showCursor=function(){this.isVisible=true;dom.removeCssClass(this.element,"ace_hidden-cursors");this.restartTimer()};this.restartTimer=function(){var update=this.$updateCursors;clearInterval(this.intervalId);clearTimeout(this.timeoutId);if(this.smoothBlinking){dom.removeCssClass(this.element,"ace_smooth-blinking")}update(true);if(!this.isBlinking||!this.blinkInterval||!this.isVisible)return;if(this.smoothBlinking){setTimeout(function(){dom.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))}var blink=function(){this.timeoutId=setTimeout((function(){update(false)}),.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval((function(){update(true);blink()}),this.blinkInterval);blink()};this.getPixelPosition=function(position,onScreen){if(!this.config||!this.session)return{left:0,top:0};if(!position)position=this.session.selection.getCursor();var pos=this.session.documentToScreenPosition(position);var cursorLeft=this.$padding+(this.session.$bidiHandler.isBidiRow(pos.row,position.row)?this.session.$bidiHandler.getPosLeft(pos.column):pos.column*this.config.characterWidth);var cursorTop=(pos.row-(onScreen?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:cursorLeft,top:cursorTop}};this.update=function(config){this.config=config;var selections=this.session.$selectionMarkers;var i=0,cursorIndex=0;if(selections===undefined||selections.length===0){selections=[{cursor:null}]}for(var i=0,n=selections.length;i<n;i++){var pixelPos=this.getPixelPosition(selections[i].cursor,true);if((pixelPos.top>config.height+config.offset||pixelPos.top<0)&&i>1){continue}var style=(this.cursors[cursorIndex++]||this.addCursor()).style;if(!this.drawCursor){style.left=pixelPos.left+"px";style.top=pixelPos.top+"px";style.width=config.characterWidth+"px";style.height=config.lineHeight+"px"}else{this.drawCursor(style,pixelPos,config,selections[i],this.session)}}while(this.cursors.length>cursorIndex)this.removeCursor();var overwrite=this.session.getOverwrite();this.$setOverwrite(overwrite);this.$pixelPos=pixelPos;this.restartTimer()};this.drawCursor=null;this.$setOverwrite=function(overwrite){if(overwrite!=this.overwrite){this.overwrite=overwrite;if(overwrite)dom.addCssClass(this.element,"ace_overwrite-cursors");else dom.removeCssClass(this.element,"ace_overwrite-cursors")}};this.destroy=function(){clearInterval(this.intervalId);clearTimeout(this.timeoutId)}}).call(Cursor.prototype);exports.Cursor=Cursor}));ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],(function(acequire,exports,module){"use strict";var oop=acequire("./lib/oop");var dom=acequire("./lib/dom");var event=acequire("./lib/event");var EventEmitter=acequire("./lib/event_emitter").EventEmitter;var MAX_SCROLL_H=32768;var ScrollBar=function(parent){this.element=dom.createElement("div");this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix;this.inner=dom.createElement("div");this.inner.className="ace_scrollbar-inner";this.element.appendChild(this.inner);parent.appendChild(this.element);this.setVisible(false);this.skipEvent=false;event.addListener(this.element,"scroll",this.onScroll.bind(this));event.addListener(this.element,"mousedown",event.preventDefault)};(function(){oop.implement(this,EventEmitter);this.setVisible=function(isVisible){this.element.style.display=isVisible?"":"none";this.isVisible=isVisible;this.coeff=1}}).call(ScrollBar.prototype);var VScrollBar=function(parent,renderer){ScrollBar.call(this,parent);this.scrollTop=0;this.scrollHeight=0;renderer.$scrollbarWidth=this.width=dom.scrollbarWidth(parent.ownerDocument);this.inner.style.width=this.element.style.width=(this.width||15)+5+"px";this.$minWidth=0};oop.inherits(VScrollBar,ScrollBar);(function(){this.classSuffix="-v";this.onScroll=function(){if(!this.skipEvent){this.scrollTop=this.element.scrollTop;if(this.coeff!=1){var h=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-h)/(this.coeff-h)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=false};this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)};this.setHeight=function(height){this.element.style.height=height+"px"};this.setInnerHeight=this.setScrollHeight=function(height){this.scrollHeight=height;if(height>MAX_SCROLL_H){this.coeff=MAX_SCROLL_H/height;height=MAX_SCROLL_H}else if(this.coeff!=1){this.coeff=1}this.inner.style.height=height+"px"};this.setScrollTop=function(scrollTop){if(this.scrollTop!=scrollTop){this.skipEvent=true;this.scrollTop=scrollTop;this.element.scrollTop=scrollTop*this.coeff}}}).call(VScrollBar.prototype);var HScrollBar=function(parent,renderer){ScrollBar.call(this,parent);this.scrollLeft=0;this.height=renderer.$scrollbarWidth;this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};oop.inherits(HScrollBar,ScrollBar);(function(){this.classSuffix="-h";this.onScroll=function(){if(!this.skipEvent){this.scrollLeft=this.element.scrollLeft;this._emit("scroll",{data:this.scrollLeft})}this.skipEvent=false};this.getHeight=function(){return this.isVisible?this.height:0};this.setWidth=function(width){this.element.style.width=width+"px"};this.setInnerWidth=function(width){this.inner.style.width=width+"px"};this.setScrollWidth=function(width){this.inner.style.width=width+"px"};this.setScrollLeft=function(scrollLeft){if(this.scrollLeft!=scrollLeft){this.skipEvent=true;this.scrollLeft=this.element.scrollLeft=scrollLeft}}}).call(HScrollBar.prototype);exports.ScrollBar=VScrollBar;exports.ScrollBarV=VScrollBar;exports.ScrollBarH=HScrollBar;exports.VScrollBar=VScrollBar;exports.HScrollBar=HScrollBar}));ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],(function(acequire,exports,module){"use strict";var event=acequire("./lib/event");var RenderLoop=function(onRender,win){this.onRender=onRender;this.pending=false;this.changes=0;this.window=win||window};(function(){this.schedule=function(change){this.changes=this.changes|change;if(!this.pending&&this.changes){this.pending=true;var _self=this;event.nextFrame((function(){_self.pending=false;var changes;while(changes=_self.changes){_self.changes=0;_self.onRender(changes)}}),this.window)}}}).call(RenderLoop.prototype);exports.RenderLoop=RenderLoop}));ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],(function(acequire,exports,module){var oop=acequire("../lib/oop");var dom=acequire("../lib/dom");var lang=acequire("../lib/lang");var useragent=acequire("../lib/useragent");var EventEmitter=acequire("../lib/event_emitter").EventEmitter;var CHAR_COUNT=0;var FontMetrics=exports.FontMetrics=function(parentEl){this.el=dom.createElement("div");this.$setMeasureNodeStyles(this.el.style,true);this.$main=dom.createElement("div");this.$setMeasureNodeStyles(this.$main.style);this.$measureNode=dom.createElement("div");this.$setMeasureNodeStyles(this.$measureNode.style);this.el.appendChild(this.$main);this.el.appendChild(this.$measureNode);parentEl.appendChild(this.el);if(!CHAR_COUNT)this.$testFractionalRect();this.$measureNode.innerHTML=lang.stringRepeat("X",CHAR_COUNT);this.$characterSize={width:0,height:0};this.checkForSizeChanges()};(function(){oop.implement(this,EventEmitter);this.$characterSize={width:0,height:0};this.$testFractionalRect=function(){var el=dom.createElement("div");this.$setMeasureNodeStyles(el.style);el.style.width="0.2px";document.documentElement.appendChild(el);var w=el.getBoundingClientRect().width;if(w>0&&w<1)CHAR_COUNT=50;else CHAR_COUNT=100;el.parentNode.removeChild(el)};this.$setMeasureNodeStyles=function(style,isRoot){style.width=style.height="auto";style.left=style.top="0px";style.visibility="hidden";style.position="absolute";style.whiteSpace="pre";if(useragent.isIE<8){style["font-family"]="inherit"}else{style.font="inherit"}style.overflow=isRoot?"hidden":"visible"};this.checkForSizeChanges=function(){var size=this.$measureSizes();if(size&&(this.$characterSize.width!==size.width||this.$characterSize.height!==size.height)){this.$measureNode.style.fontWeight="bold";var boldSize=this.$measureSizes();this.$measureNode.style.fontWeight="";this.$characterSize=size;this.charSizes=Object.create(null);this.allowBoldFonts=boldSize&&boldSize.width===size.width&&boldSize.height===size.height;this._emit("changeCharacterSize",{data:size})}};this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var self=this;return this.$pollSizeChangesTimer=setInterval((function(){self.checkForSizeChanges()}),500)};this.setPolling=function(val){if(val){this.$pollSizeChanges()}else if(this.$pollSizeChangesTimer){clearInterval(this.$pollSizeChangesTimer);this.$pollSizeChangesTimer=0}};this.$measureSizes=function(){if(CHAR_COUNT===50){var rect=null;try{rect=this.$measureNode.getBoundingClientRect()}catch(e){rect={width:0,height:0}}var size={height:rect.height,width:rect.width/CHAR_COUNT}}else{var size={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/CHAR_COUNT}}if(size.width===0||size.height===0)return null;return size};this.$measureCharWidth=function(ch){this.$main.innerHTML=lang.stringRepeat(ch,CHAR_COUNT);var rect=this.$main.getBoundingClientRect();return rect.width/CHAR_COUNT};this.getCharacterWidth=function(ch){var w=this.charSizes[ch];if(w===undefined){w=this.charSizes[ch]=this.$measureCharWidth(ch)/this.$characterSize.width}return w};this.destroy=function(){clearInterval(this.$pollSizeChangesTimer);if(this.el&&this.el.parentNode)this.el.parentNode.removeChild(this.el)}}).call(FontMetrics.prototype)}));ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"],(function(acequire,exports,module){"use strict";var oop=acequire("./lib/oop");var dom=acequire("./lib/dom");var config=acequire("./config");var useragent=acequire("./lib/useragent");var GutterLayer=acequire("./layer/gutter").Gutter;var MarkerLayer=acequire("./layer/marker").Marker;var TextLayer=acequire("./layer/text").Text;var CursorLayer=acequire("./layer/cursor").Cursor;var HScrollBar=acequire("./scrollbar").HScrollBar;var VScrollBar=acequire("./scrollbar").VScrollBar;var RenderLoop=acequire("./renderloop").RenderLoop;var FontMetrics=acequire("./layer/font_metrics").FontMetrics;var EventEmitter=acequire("./lib/event_emitter").EventEmitter;var editorCss='.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_text-input-ios {position: absolute !important;top: -100000px !important;left: -100000px !important;}';dom.importCssString(editorCss,"ace_editor.css");var VirtualRenderer=function(container,theme){var _self=this;this.container=container||dom.createElement("div");this.$keepTextAreaAtCursor=!useragent.isOldIE;dom.addCssClass(this.container,"ace_editor");this.setTheme(theme);this.$gutter=dom.createElement("div");this.$gutter.className="ace_gutter";this.container.appendChild(this.$gutter);this.$gutter.setAttribute("aria-hidden",true);this.scroller=dom.createElement("div");this.scroller.className="ace_scroller";this.container.appendChild(this.scroller);this.content=dom.createElement("div");this.content.className="ace_content";this.scroller.appendChild(this.content);this.$gutterLayer=new GutterLayer(this.$gutter);this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this));this.$markerBack=new MarkerLayer(this.content);var textLayer=this.$textLayer=new TextLayer(this.content);this.canvas=textLayer.element;this.$markerFront=new MarkerLayer(this.content);this.$cursorLayer=new CursorLayer(this.content);this.$horizScroll=false;this.$vScroll=false;this.scrollBar=this.scrollBarV=new VScrollBar(this.container,this);this.scrollBarH=new HScrollBar(this.container,this);this.scrollBarV.addEventListener("scroll",(function(e){if(!_self.$scrollAnimation)_self.session.setScrollTop(e.data-_self.scrollMargin.top)}));this.scrollBarH.addEventListener("scroll",(function(e){if(!_self.$scrollAnimation)_self.session.setScrollLeft(e.data-_self.scrollMargin.left)}));this.scrollTop=0;this.scrollLeft=0;this.cursorPos={row:0,column:0};this.$fontMetrics=new FontMetrics(this.container);this.$textLayer.$setFontMetrics(this.$fontMetrics);this.$textLayer.addEventListener("changeCharacterSize",(function(e){_self.updateCharacterSize();_self.onResize(true,_self.gutterWidth,_self.$size.width,_self.$size.height);_self._signal("changeCharacterSize",e)}));this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:true};this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1};this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0};this.$loop=new RenderLoop(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView);this.$loop.schedule(this.CHANGE_FULL);this.updateCharacterSize();this.setPadding(4);config.resetOptions(this);config._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1;this.CHANGE_MARKER=2;this.CHANGE_GUTTER=4;this.CHANGE_SCROLL=8;this.CHANGE_LINES=16;this.CHANGE_TEXT=32;this.CHANGE_SIZE=64;this.CHANGE_MARKER_BACK=128;this.CHANGE_MARKER_FRONT=256;this.CHANGE_FULL=512;this.CHANGE_H_SCROLL=1024;oop.implement(this,EventEmitter);this.updateCharacterSize=function(){if(this.$textLayer.allowBoldFonts!=this.$allowBoldFonts){this.$allowBoldFonts=this.$textLayer.allowBoldFonts;this.setStyle("ace_nobold",!this.$allowBoldFonts)}this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth();this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight();this.$updatePrintMargin()};this.setSession=function(session){if(this.session)this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode);this.session=session;if(session&&this.scrollMargin.top&&session.getScrollTop()<=0)session.setScrollTop(-this.scrollMargin.top);this.$cursorLayer.setSession(session);this.$markerBack.setSession(session);this.$markerFront.setSession(session);this.$gutterLayer.setSession(session);this.$textLayer.setSession(session);if(!session)return;this.$loop.schedule(this.CHANGE_FULL);this.session.$setFontMetrics(this.$fontMetrics);this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null;this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this);this.onChangeNewLineMode();this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode)};this.updateLines=function(firstRow,lastRow,force){if(lastRow===undefined)lastRow=Infinity;if(!this.$changedLines){this.$changedLines={firstRow:firstRow,lastRow:lastRow}}else{if(this.$changedLines.firstRow>firstRow)this.$changedLines.firstRow=firstRow;if(this.$changedLines.lastRow<lastRow)this.$changedLines.lastRow=lastRow}if(this.$changedLines.lastRow<this.layerConfig.firstRow){if(force)this.$changedLines.lastRow=this.layerConfig.lastRow;else return}if(this.$changedLines.firstRow>this.layerConfig.lastRow)return;this.$loop.schedule(this.CHANGE_LINES)};this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT);this.$textLayer.$updateEolChar();this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)};this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER);this.$textLayer.onChangeTabSize()};this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)};this.updateFull=function(force){if(force)this.$renderChanges(this.CHANGE_FULL,true);else this.$loop.schedule(this.CHANGE_FULL)};this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()};this.$changes=0;this.$updateSizeAsync=function(){if(this.$loop.pending)this.$size.$dirty=true;else this.onResize()};this.onResize=function(force,gutterWidth,width,height){if(this.resizing>2)return;else if(this.resizing>0)this.resizing++;else this.resizing=force?1:0;var el=this.container;if(!height)height=el.clientHeight||el.scrollHeight;if(!width)width=el.clientWidth||el.scrollWidth;var changes=this.$updateCachedSize(force,gutterWidth,width,height);if(!this.$size.scrollerHeight||!width&&!height)return this.resizing=0;if(force)this.$gutterLayer.$padding=null;if(force)this.$renderChanges(changes|this.$changes,true);else this.$loop.schedule(changes|this.$changes);if(this.resizing)this.resizing=0;this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null};this.$updateCachedSize=function(force,gutterWidth,width,height){height-=this.$extraHeight||0;var changes=0;var size=this.$size;var oldSize={width:size.width,height:size.height,scrollerHeight:size.scrollerHeight,scrollerWidth:size.scrollerWidth};if(height&&(force||size.height!=height)){size.height=height;changes|=this.CHANGE_SIZE;size.scrollerHeight=size.height;if(this.$horizScroll)size.scrollerHeight-=this.scrollBarH.getHeight();this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px";changes=changes|this.CHANGE_SCROLL}if(width&&(force||size.width!=width)){changes|=this.CHANGE_SIZE;size.width=width;if(gutterWidth==null)gutterWidth=this.$showGutter?this.$gutter.offsetWidth:0;this.gutterWidth=gutterWidth;this.scrollBarH.element.style.left=this.scroller.style.left=gutterWidth+"px";size.scrollerWidth=Math.max(0,width-gutterWidth-this.scrollBarV.getWidth());this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px";this.scroller.style.bottom=this.scrollBarH.getHeight()+"px";if(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||force)changes|=this.CHANGE_FULL}size.$dirty=!width||!height;if(changes)this._signal("resize",oldSize);return changes};this.onGutterResize=function(){var gutterWidth=this.$showGutter?this.$gutter.offsetWidth:0;if(gutterWidth!=this.gutterWidth)this.$changes|=this.$updateCachedSize(true,gutterWidth,this.$size.width,this.$size.height);if(this.session.getUseWrapMode()&&this.adjustWrapLimit()){this.$loop.schedule(this.CHANGE_FULL)}else if(this.$size.$dirty){this.$loop.schedule(this.CHANGE_FULL)}else{this.$computeLayerConfig();this.$loop.schedule(this.CHANGE_MARKER)}};this.adjustWrapLimit=function(){var availableWidth=this.$size.scrollerWidth-this.$padding*2;var limit=Math.floor(availableWidth/this.characterWidth);return this.session.adjustWrapLimit(limit,this.$showPrintMargin&&this.$printMarginColumn)};this.setAnimatedScroll=function(shouldAnimate){this.setOption("animatedScroll",shouldAnimate)};this.getAnimatedScroll=function(){return this.$animatedScroll};this.setShowInvisibles=function(showInvisibles){this.setOption("showInvisibles",showInvisibles);this.session.$bidiHandler.setShowInvisibles(showInvisibles)};this.getShowInvisibles=function(){return this.getOption("showInvisibles")};this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")};this.setDisplayIndentGuides=function(display){this.setOption("displayIndentGuides",display)};this.setShowPrintMargin=function(showPrintMargin){this.setOption("showPrintMargin",showPrintMargin)};this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")};this.setPrintMarginColumn=function(showPrintMargin){this.setOption("printMarginColumn",showPrintMargin)};this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")};this.getShowGutter=function(){return this.getOption("showGutter")};this.setShowGutter=function(show){return this.setOption("showGutter",show)};this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")};this.setFadeFoldWidgets=function(show){this.setOption("fadeFoldWidgets",show)};this.setHighlightGutterLine=function(shouldHighlight){this.setOption("highlightGutterLine",shouldHighlight)};this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")};this.$updateGutterLineHighlight=function(){var pos=this.$cursorLayer.$pixelPos;var height=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var cursor=this.session.selection.getCursor();cursor.column=0;pos=this.$cursorLayer.getPixelPosition(cursor,true);height*=this.session.getRowLength(cursor.row)}this.$gutterLineHighlight.style.top=pos.top-this.layerConfig.offset+"px";this.$gutterLineHighlight.style.height=height+"px"};this.$updatePrintMargin=function(){if(!this.$showPrintMargin&&!this.$printMarginEl)return;if(!this.$printMarginEl){var containerEl=dom.createElement("div");containerEl.className="ace_layer ace_print-margin-layer";this.$printMarginEl=dom.createElement("div");this.$printMarginEl.className="ace_print-margin";containerEl.appendChild(this.$printMarginEl);this.content.insertBefore(containerEl,this.content.firstChild)}var style=this.$printMarginEl.style;style.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px";style.visibility=this.$showPrintMargin?"visible":"hidden";if(this.session&&this.session.$wrap==-1)this.adjustWrapLimit()};this.getContainerElement=function(){return this.container};this.getMouseEventTarget=function(){return this.scroller};this.getTextAreaContainer=function(){return this.container};this.$moveTextAreaToCursor=function(){if(!this.$keepTextAreaAtCursor)return;var config=this.layerConfig;var posTop=this.$cursorLayer.$pixelPos.top;var posLeft=this.$cursorLayer.$pixelPos.left;posTop-=config.offset;var style=this.textarea.style;var h=this.lineHeight;if(posTop<0||posTop>config.height-h){style.top=style.left="0";return}var w=this.characterWidth;if(this.$composition){var val=this.textarea.value.replace(/^\x01+/,"");w*=this.session.$getStringScreenWidth(val)[0]+2;h+=2}posLeft-=this.scrollLeft;if(posLeft>this.$size.scrollerWidth-w)posLeft=this.$size.scrollerWidth-w;posLeft+=this.gutterWidth;style.height=h+"px";style.width=w+"px";style.left=Math.min(posLeft,this.$size.scrollerWidth-w)+"px";style.top=Math.min(posTop,this.$size.height-h)+"px"};this.getFirstVisibleRow=function(){return this.layerConfig.firstRow};this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)};this.getLastFullyVisibleRow=function(){var config=this.layerConfig;var lastRow=config.lastRow;var top=this.session.documentToScreenRow(lastRow,0)*config.lineHeight;if(top-this.session.getScrollTop()>config.height-config.lineHeight)return lastRow-1;return lastRow};this.getLastVisibleRow=function(){return this.layerConfig.lastRow};this.$padding=null;this.setPadding=function(padding){this.$padding=padding;this.$textLayer.setPadding(padding);this.$cursorLayer.setPadding(padding);this.$markerFront.setPadding(padding);this.$markerBack.setPadding(padding);this.$loop.schedule(this.CHANGE_FULL);this.$updatePrintMargin()};this.setScrollMargin=function(top,bottom,left,right){var sm=this.scrollMargin;sm.top=top|0;sm.bottom=bottom|0;sm.right=right|0;sm.left=left|0;sm.v=sm.top+sm.bottom;sm.h=sm.left+sm.right;if(sm.top&&this.scrollTop<=0&&this.session)this.session.setScrollTop(-sm.top);this.updateFull()};this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible};this.setHScrollBarAlwaysVisible=function(alwaysVisible){this.setOption("hScrollBarAlwaysVisible",alwaysVisible)};this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible};this.setVScrollBarAlwaysVisible=function(alwaysVisible){this.setOption("vScrollBarAlwaysVisible",alwaysVisible)};this.$updateScrollBarV=function(){var scrollHeight=this.layerConfig.maxHeight;var scrollerHeight=this.$size.scrollerHeight;if(!this.$maxLines&&this.$scrollPastEnd){scrollHeight-=(scrollerHeight-this.lineHeight)*this.$scrollPastEnd;if(this.scrollTop>scrollHeight-scrollerHeight){scrollHeight=this.scrollTop+scrollerHeight;this.scrollBarV.scrollTop=null}}this.scrollBarV.setScrollHeight(scrollHeight+this.scrollMargin.v);this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)};this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h);this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)};this.$frozen=false;this.freeze=function(){this.$frozen=true};this.unfreeze=function(){this.$frozen=false};this.$renderChanges=function(changes,force){if(this.$changes){changes|=this.$changes;this.$changes=0}if(!this.session||!this.container.offsetWidth||this.$frozen||!changes&&!force){this.$changes|=changes;return}if(this.$size.$dirty){this.$changes|=changes;return this.onResize(true)}if(!this.lineHeight){this.$textLayer.checkForSizeChanges()}this._signal("beforeRender");if(this.session&&this.session.$bidiHandler)this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var config=this.layerConfig;if(changes&this.CHANGE_FULL||changes&this.CHANGE_SIZE||changes&this.CHANGE_TEXT||changes&this.CHANGE_LINES||changes&this.CHANGE_SCROLL||changes&this.CHANGE_H_SCROLL){changes|=this.$computeLayerConfig();if(config.firstRow!=this.layerConfig.firstRow&&config.firstRowScreen==this.layerConfig.firstRowScreen){var st=this.scrollTop+(config.firstRow-this.layerConfig.firstRow)*this.lineHeight;if(st>0){this.scrollTop=st;changes=changes|this.CHANGE_SCROLL;changes|=this.$computeLayerConfig()}}config=this.layerConfig;this.$updateScrollBarV();if(changes&this.CHANGE_H_SCROLL)this.$updateScrollBarH();this.$gutterLayer.element.style.marginTop=-config.offset+"px";this.content.style.marginTop=-config.offset+"px";this.content.style.width=config.width+2*this.$padding+"px";this.content.style.height=config.minHeight+"px"}if(changes&this.CHANGE_H_SCROLL){this.content.style.marginLeft=-this.scrollLeft+"px";this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"}if(changes&this.CHANGE_FULL){this.$textLayer.update(config);if(this.$showGutter)this.$gutterLayer.update(config);this.$markerBack.update(config);this.$markerFront.update(config);this.$cursorLayer.update(config);this.$moveTextAreaToCursor();this.$highlightGutterLine&&this.$updateGutterLineHighlight();this._signal("afterRender");return}if(changes&this.CHANGE_SCROLL){if(changes&this.CHANGE_TEXT||changes&this.CHANGE_LINES)this.$textLayer.update(config);else this.$textLayer.scrollLines(config);if(this.$showGutter)this.$gutterLayer.update(config);this.$markerBack.update(config);this.$markerFront.update(config);this.$cursorLayer.update(config);this.$highlightGutterLine&&this.$updateGutterLineHighlight();this.$moveTextAreaToCursor();this._signal("afterRender");return}if(changes&this.CHANGE_TEXT){this.$textLayer.update(config);if(this.$showGutter)this.$gutterLayer.update(config)}else if(changes&this.CHANGE_LINES){if(this.$updateLines()||changes&this.CHANGE_GUTTER&&this.$showGutter)this.$gutterLayer.update(config)}else if(changes&this.CHANGE_TEXT||changes&this.CHANGE_GUTTER){if(this.$showGutter)this.$gutterLayer.update(config)}if(changes&this.CHANGE_CURSOR){this.$cursorLayer.update(config);this.$moveTextAreaToCursor();this.$highlightGutterLine&&this.$updateGutterLineHighlight()}if(changes&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)){this.$markerFront.update(config)}if(changes&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)){this.$markerBack.update(config)}this._signal("afterRender")};this.$autosize=function(){var height=this.session.getScreenLength()*this.lineHeight;var maxHeight=this.$maxLines*this.lineHeight;var desiredHeight=Math.min(maxHeight,Math.max((this.$minLines||1)*this.lineHeight,height))+this.scrollMargin.v+(this.$extraHeight||0);if(this.$horizScroll)desiredHeight+=this.scrollBarH.getHeight();if(this.$maxPixelHeight&&desiredHeight>this.$maxPixelHeight)desiredHeight=this.$maxPixelHeight;var vScroll=height>maxHeight;if(desiredHeight!=this.desiredHeight||this.$size.height!=this.desiredHeight||vScroll!=this.$vScroll){if(vScroll!=this.$vScroll){this.$vScroll=vScroll;this.scrollBarV.setVisible(vScroll)}var w=this.container.clientWidth;this.container.style.height=desiredHeight+"px";this.$updateCachedSize(true,this.$gutterWidth,w,desiredHeight);this.desiredHeight=desiredHeight;this._signal("autosize")}};this.$computeLayerConfig=function(){var session=this.session;var size=this.$size;var hideScrollbars=size.height<=2*this.lineHeight;var screenLines=this.session.getScreenLength();var maxHeight=screenLines*this.lineHeight;var longestLine=this.$getLongestLine();var horizScroll=!hideScrollbars&&(this.$hScrollBarAlwaysVisible||size.scrollerWidth-longestLine-2*this.$padding<0);var hScrollChanged=this.$horizScroll!==horizScroll;if(hScrollChanged){this.$horizScroll=horizScroll;this.scrollBarH.setVisible(horizScroll)}var vScrollBefore=this.$vScroll;if(this.$maxLines&&this.lineHeight>1)this.$autosize();var offset=this.scrollTop%this.lineHeight;var minHeight=size.scrollerHeight+this.lineHeight;var scrollPastEnd=!this.$maxLines&&this.$scrollPastEnd?(size.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;maxHeight+=scrollPastEnd;var sm=this.scrollMargin;this.session.setScrollTop(Math.max(-sm.top,Math.min(this.scrollTop,maxHeight-size.scrollerHeight+sm.bottom)));this.session.setScrollLeft(Math.max(-sm.left,Math.min(this.scrollLeft,longestLine+2*this.$padding-size.scrollerWidth+sm.right)));var vScroll=!hideScrollbars&&(this.$vScrollBarAlwaysVisible||size.scrollerHeight-maxHeight+scrollPastEnd<0||this.scrollTop>sm.top);var vScrollChanged=vScrollBefore!==vScroll;if(vScrollChanged){this.$vScroll=vScroll;this.scrollBarV.setVisible(vScroll)}var lineCount=Math.ceil(minHeight/this.lineHeight)-1;var firstRow=Math.max(0,Math.round((this.scrollTop-offset)/this.lineHeight));var lastRow=firstRow+lineCount;var firstRowScreen,firstRowHeight;var lineHeight=this.lineHeight;firstRow=session.screenToDocumentRow(firstRow,0);var foldLine=session.getFoldLine(firstRow);if(foldLine){firstRow=foldLine.start.row}firstRowScreen=session.documentToScreenRow(firstRow,0);firstRowHeight=session.getRowLength(firstRow)*lineHeight;lastRow=Math.min(session.screenToDocumentRow(lastRow,0),session.getLength()-1);minHeight=size.scrollerHeight+session.getRowLength(lastRow)*lineHeight+firstRowHeight;offset=this.scrollTop-firstRowScreen*lineHeight;var changes=0;if(this.layerConfig.width!=longestLine)changes=this.CHANGE_H_SCROLL;if(hScrollChanged||vScrollChanged){changes=this.$updateCachedSize(true,this.gutterWidth,size.width,size.height);this._signal("scrollbarVisibilityChanged");if(vScrollChanged)longestLine=this.$getLongestLine()}this.layerConfig={width:longestLine,padding:this.$padding,firstRow:firstRow,firstRowScreen:firstRowScreen,lastRow:lastRow,lineHeight:lineHeight,characterWidth:this.characterWidth,minHeight:minHeight,maxHeight:maxHeight,offset:offset,gutterOffset:lineHeight?Math.max(0,Math.ceil((offset+size.height-size.scrollerHeight)/lineHeight)):0,height:this.$size.scrollerHeight};return changes};this.$updateLines=function(){if(!this.$changedLines)return;var firstRow=this.$changedLines.firstRow;var lastRow=this.$changedLines.lastRow;this.$changedLines=null;var layerConfig=this.layerConfig;if(firstRow>layerConfig.lastRow+1){return}if(lastRow<layerConfig.firstRow){return}if(lastRow===Infinity){if(this.$showGutter)this.$gutterLayer.update(layerConfig);this.$textLayer.update(layerConfig);return}this.$textLayer.updateLines(layerConfig,firstRow,lastRow);return true};this.$getLongestLine=function(){var charCount=this.session.getScreenWidth();if(this.showInvisibles&&!this.session.$useWrapMode)charCount+=1;return Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(charCount*this.characterWidth))};this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(true));this.$loop.schedule(this.CHANGE_MARKER_FRONT)};this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers());this.$loop.schedule(this.CHANGE_MARKER_BACK)};this.addGutterDecoration=function(row,className){this.$gutterLayer.addGutterDecoration(row,className)};this.removeGutterDecoration=function(row,className){this.$gutterLayer.removeGutterDecoration(row,className)};this.updateBreakpoints=function(rows){this.$loop.schedule(this.CHANGE_GUTTER)};this.setAnnotations=function(annotations){this.$gutterLayer.setAnnotations(annotations);this.$loop.schedule(this.CHANGE_GUTTER)};this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)};this.hideCursor=function(){this.$cursorLayer.hideCursor()};this.showCursor=function(){this.$cursorLayer.showCursor()};this.scrollSelectionIntoView=function(anchor,lead,offset){this.scrollCursorIntoView(anchor,offset);this.scrollCursorIntoView(lead,offset)};this.scrollCursorIntoView=function(cursor,offset,$viewMargin){if(this.$size.scrollerHeight===0)return;var pos=this.$cursorLayer.getPixelPosition(cursor);var left=pos.left;var top=pos.top;var topMargin=$viewMargin&&$viewMargin.top||0;var bottomMargin=$viewMargin&&$viewMargin.bottom||0;var scrollTop=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;if(scrollTop+topMargin>top){if(offset&&scrollTop+topMargin>top+this.lineHeight)top-=offset*this.$size.scrollerHeight;if(top===0)top=-this.scrollMargin.top;this.session.setScrollTop(top)}else if(scrollTop+this.$size.scrollerHeight-bottomMargin<top+this.lineHeight){if(offset&&scrollTop+this.$size.scrollerHeight-bottomMargin<top-this.lineHeight)top+=offset*this.$size.scrollerHeight;this.session.setScrollTop(top+this.lineHeight-this.$size.scrollerHeight)}var scrollLeft=this.scrollLeft;if(scrollLeft>left){if(left<this.$padding+2*this.layerConfig.characterWidth)left=-this.scrollMargin.left;this.session.setScrollLeft(left)}else if(scrollLeft+this.$size.scrollerWidth<left+this.characterWidth){this.session.setScrollLeft(Math.round(left+this.characterWidth-this.$size.scrollerWidth))}else if(scrollLeft<=this.$padding&&left-scrollLeft<this.characterWidth){this.session.setScrollLeft(0)}};this.getScrollTop=function(){return this.session.getScrollTop()};this.getScrollLeft=function(){return this.session.getScrollLeft()};this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight};this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)};this.scrollToRow=function(row){this.session.setScrollTop(row*this.lineHeight)};this.alignCursor=function(cursor,alignment){if(typeof cursor=="number")cursor={row:cursor,column:0};var pos=this.$cursorLayer.getPixelPosition(cursor);var h=this.$size.scrollerHeight-this.lineHeight;var offset=pos.top-h*(alignment||0);this.session.setScrollTop(offset);return offset};this.STEPS=8;this.$calcSteps=function(fromValue,toValue){var i=0;var l=this.STEPS;var steps=[];var func=function(t,x_min,dx){return dx*(Math.pow(t-1,3)+1)+x_min};for(i=0;i<l;++i)steps.push(func(i/this.STEPS,fromValue,toValue-fromValue));return steps};this.scrollToLine=function(line,center,animate,callback){var pos=this.$cursorLayer.getPixelPosition({row:line,column:0});var offset=pos.top;if(center)offset-=this.$size.scrollerHeight/2;var initialScroll=this.scrollTop;this.session.setScrollTop(offset);if(animate!==false)this.animateScrolling(initialScroll,callback)};this.animateScrolling=function(fromValue,callback){var toValue=this.scrollTop;if(!this.$animatedScroll)return;var _self=this;if(fromValue==toValue)return;if(this.$scrollAnimation){var oldSteps=this.$scrollAnimation.steps;if(oldSteps.length){fromValue=oldSteps[0];if(fromValue==toValue)return}}var steps=_self.$calcSteps(fromValue,toValue);this.$scrollAnimation={from:fromValue,to:toValue,steps:steps};clearInterval(this.$timer);_self.session.setScrollTop(steps.shift());_self.session.$scrollTop=toValue;this.$timer=setInterval((function(){if(steps.length){_self.session.setScrollTop(steps.shift());_self.session.$scrollTop=toValue}else if(toValue!=null){_self.session.$scrollTop=-1;_self.session.setScrollTop(toValue);toValue=null}else{_self.$timer=clearInterval(_self.$timer);_self.$scrollAnimation=null;callback&&callback()}}),10)};this.scrollToY=function(scrollTop){if(this.scrollTop!==scrollTop){this.$loop.schedule(this.CHANGE_SCROLL);this.scrollTop=scrollTop}};this.scrollToX=function(scrollLeft){if(this.scrollLeft!==scrollLeft)this.scrollLeft=scrollLeft;this.$loop.schedule(this.CHANGE_H_SCROLL)};this.scrollTo=function(x,y){this.session.setScrollTop(y);this.session.setScrollLeft(y)};this.scrollBy=function(deltaX,deltaY){deltaY&&this.session.setScrollTop(this.session.getScrollTop()+deltaY);deltaX&&this.session.setScrollLeft(this.session.getScrollLeft()+deltaX)};this.isScrollableBy=function(deltaX,deltaY){if(deltaY<0&&this.session.getScrollTop()>=1-this.scrollMargin.top)return true;if(deltaY>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom)return true;if(deltaX<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left)return true;if(deltaX>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return true};this.pixelToScreenCoordinates=function(x,y){var canvasPos=this.scroller.getBoundingClientRect();var offsetX=x+this.scrollLeft-canvasPos.left-this.$padding;var offset=offsetX/this.characterWidth;var row=Math.floor((y+this.scrollTop-canvasPos.top)/this.lineHeight);var col=Math.round(offset);return{row:row,column:col,side:offset-col>0?1:-1,offsetX:offsetX}};this.screenToTextCoordinates=function(x,y){var canvasPos=this.scroller.getBoundingClientRect();var offsetX=x+this.scrollLeft-canvasPos.left-this.$padding;var col=Math.round(offsetX/this.characterWidth);var row=(y+this.scrollTop-canvasPos.top)/this.lineHeight;return this.session.screenToDocumentPosition(row,Math.max(col,0),offsetX)};this.textToScreenCoordinates=function(row,column){var canvasPos=this.scroller.getBoundingClientRect();var pos=this.session.documentToScreenPosition(row,column);var x=this.$padding+(this.session.$bidiHandler.isBidiRow(pos.row,row)?this.session.$bidiHandler.getPosLeft(pos.column):Math.round(pos.column*this.characterWidth));var y=pos.row*this.lineHeight;return{pageX:canvasPos.left+x-this.scrollLeft,pageY:canvasPos.top+y-this.scrollTop}};this.visualizeFocus=function(){dom.addCssClass(this.container,"ace_focus")};this.visualizeBlur=function(){dom.removeCssClass(this.container,"ace_focus")};this.showComposition=function(position){if(!this.$composition)this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText};this.$keepTextAreaAtCursor=true;dom.addCssClass(this.textarea,"ace_composition");this.textarea.style.cssText="";this.$moveTextAreaToCursor()};this.setCompositionText=function(text){this.$moveTextAreaToCursor()};this.hideComposition=function(){if(!this.$composition)return;dom.removeCssClass(this.textarea,"ace_composition");this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor;this.textarea.style.cssText=this.$composition.cssText;this.$composition=null};this.setTheme=function(theme,cb){var _self=this;this.$themeId=theme;_self._dispatchEvent("themeChange",{theme:theme});if(!theme||typeof theme=="string"){var moduleName=theme||this.$options.theme.initialValue;config.loadModule(["theme",moduleName],afterLoad)}else{afterLoad(theme)}function afterLoad(module){if(_self.$themeId!=theme)return cb&&cb();if(!module||!module.cssClass)throw new Error("couldn't load module "+theme+" or it didn't call define");dom.importCssString(module.cssText,module.cssClass,_self.container.ownerDocument);if(_self.theme)dom.removeCssClass(_self.container,_self.theme.cssClass);var padding="padding"in module?module.padding:"padding"in(_self.theme||{})?4:_self.$padding;if(_self.$padding&&padding!=_self.$padding)_self.setPadding(padding);_self.$theme=module.cssClass;_self.theme=module;dom.addCssClass(_self.container,module.cssClass);dom.setCssClass(_self.container,"ace_dark",module.isDark);if(_self.$size){_self.$size.width=0;_self.$updateSizeAsync()}_self._dispatchEvent("themeLoaded",{theme:module});cb&&cb()}};this.getTheme=function(){return this.$themeId};this.setStyle=function(style,include){dom.setCssClass(this.container,style,include!==false)};this.unsetStyle=function(style){dom.removeCssClass(this.container,style)};this.setCursorStyle=function(style){if(this.scroller.style.cursor!=style)this.scroller.style.cursor=style};this.setMouseCursor=function(cursorStyle){this.scroller.style.cursor=cursorStyle};this.destroy=function(){this.$textLayer.destroy();this.$cursorLayer.destroy()}}).call(VirtualRenderer.prototype);config.defineOptions(VirtualRenderer.prototype,"renderer",{animatedScroll:{initialValue:false},showInvisibles:{set:function(value){if(this.$textLayer.setShowInvisibles(value))this.$loop.schedule(this.CHANGE_TEXT)},initialValue:false},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:true},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(val){if(typeof val=="number")this.$printMarginColumn=val;this.$showPrintMargin=!!val;this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(show){this.$gutter.style.display=show?"block":"none";this.$loop.schedule(this.CHANGE_FULL);this.onGutterResize()},initialValue:true},fadeFoldWidgets:{set:function(show){dom.setCssClass(this.$gutter,"ace_fade-fold-widgets",show)},initialValue:false},showFoldWidgets:{set:function(show){this.$gutterLayer.setShowFoldWidgets(show)},initialValue:true},showLineNumbers:{set:function(show){this.$gutterLayer.setShowLineNumbers(show);this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:true},displayIndentGuides:{set:function(show){if(this.$textLayer.setDisplayIndentGuides(show))this.$loop.schedule(this.CHANGE_TEXT)},initialValue:true},highlightGutterLine:{set:function(shouldHighlight){if(!this.$gutterLineHighlight){this.$gutterLineHighlight=dom.createElement("div");this.$gutterLineHighlight.className="ace_gutter-active-line";this.$gutter.appendChild(this.$gutterLineHighlight);return}this.$gutterLineHighlight.style.display=shouldHighlight?"":"none";if(this.$cursorLayer.$pixelPos)this.$updateGutterLineHighlight()},initialValue:false,value:true},hScrollBarAlwaysVisible:{set:function(val){if(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:false},vScrollBarAlwaysVisible:{set:function(val){if(!this.$vScrollBarAlwaysVisible||!this.$vScroll)this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:false},fontSize:{set:function(size){if(typeof size=="number")size=size+"px";this.container.style.fontSize=size;this.updateFontSize()},initialValue:12},fontFamily:{set:function(name){this.container.style.fontFamily=name;this.updateFontSize()}},maxLines:{set:function(val){this.updateFull()}},minLines:{set:function(val){this.updateFull()}},maxPixelHeight:{set:function(val){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(val){val=+val||0;if(this.$scrollPastEnd==val)return;this.$scrollPastEnd=val;this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:0,handlesSet:true},fixedWidthGutter:{set:function(val){this.$gutterLayer.$fixedWidth=!!val;this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(val){this.setTheme(val)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:true}});exports.VirtualRenderer=VirtualRenderer}));ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],(function(acequire,exports,module){"use strict";var oop=acequire("../lib/oop");var net=acequire("../lib/net");var EventEmitter=acequire("../lib/event_emitter").EventEmitter;var config=acequire("../config");function $workerBlob(workerUrl,mod){var script=mod.src;"importScripts('"+net.qualifyURL(workerUrl)+"');";try{return new Blob([script],{type:"application/javascript"})}catch(e){var BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;var blobBuilder=new BlobBuilder;blobBuilder.append(script);return blobBuilder.getBlob("application/javascript")}}function createWorker(workerUrl,mod){var blob=$workerBlob(workerUrl,mod);var URL=window.URL||window.webkitURL;var blobURL=URL.createObjectURL(blob);return new Worker(blobURL)}var WorkerClient=function(topLevelNamespaces,mod,classname,workerUrl,importScripts){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this);this.changeListener=this.changeListener.bind(this);this.onMessage=this.onMessage.bind(this);if(acequire.nameToUrl&&!acequire.toUrl)acequire.toUrl=acequire.nameToUrl;if(config.get("packaged")||!acequire.toUrl){workerUrl=workerUrl||config.moduleUrl(mod.id,"worker")}else{var normalizePath=this.$normalizePath;workerUrl=workerUrl||normalizePath(acequire.toUrl("ace/worker/worker.js",null,"_"));var tlns={};topLevelNamespaces.forEach((function(ns){tlns[ns]=normalizePath(acequire.toUrl(ns,null,"_").replace(/(\.js)?(\?.*)?$/,""))}))}this.$worker=createWorker(workerUrl,mod);if(importScripts){this.send("importScripts",importScripts)}this.$worker.postMessage({init:true,tlns:tlns,module:mod.id,classname:classname});this.callbackId=1;this.callbacks={};this.$worker.onmessage=this.onMessage};(function(){oop.implement(this,EventEmitter);this.onMessage=function(e){var msg=e.data;switch(msg.type){case"event":this._signal(msg.name,{data:msg.data});break;case"call":var callback=this.callbacks[msg.id];if(callback){callback(msg.data);delete this.callbacks[msg.id]}break;case"error":this.reportError(msg.data);break;case"log":window.console&&console.log&&console.log.apply(console,msg.data);break}};this.reportError=function(err){window.console&&console.error&&console.error(err)};this.$normalizePath=function(path){return net.qualifyURL(path)};this.terminate=function(){this._signal("terminate",{});this.deltaQueue=null;this.$worker.terminate();this.$worker=null;if(this.$doc)this.$doc.off("change",this.changeListener);this.$doc=null};this.send=function(cmd,args){this.$worker.postMessage({command:cmd,args:args})};this.call=function(cmd,args,callback){if(callback){var id=this.callbackId++;this.callbacks[id]=callback;args.push(id)}this.send(cmd,args)};this.emit=function(event,data){try{this.$worker.postMessage({event:event,data:{data:data.data}})}catch(ex){console.error(ex.stack)}};this.attachToDocument=function(doc){if(this.$doc)this.terminate();this.$doc=doc;this.call("setValue",[doc.getValue()]);doc.on("change",this.changeListener)};this.changeListener=function(delta){if(!this.deltaQueue){this.deltaQueue=[];setTimeout(this.$sendDeltaQueue,0)}if(delta.action=="insert")this.deltaQueue.push(delta.start,delta.lines);else this.deltaQueue.push(delta.start,delta.end)};this.$sendDeltaQueue=function(){var q=this.deltaQueue;if(!q)return;this.deltaQueue=null;if(q.length>50&&q.length>this.$doc.getLength()>>1){this.call("setValue",[this.$doc.getValue()])}else this.emit("change",{data:q})}}).call(WorkerClient.prototype);var UIWorkerClient=function(topLevelNamespaces,mod,classname){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this);this.changeListener=this.changeListener.bind(this);this.callbackId=1;this.callbacks={};this.messageBuffer=[];var main=null;var emitSync=false;var sender=Object.create(EventEmitter);var _self=this;this.$worker={};this.$worker.terminate=function(){};this.$worker.postMessage=function(e){_self.messageBuffer.push(e);if(main){if(emitSync)setTimeout(processNext);else processNext()}};this.setEmitSync=function(val){emitSync=val};var processNext=function(){var msg=_self.messageBuffer.shift();if(msg.command)main[msg.command].apply(main,msg.args);else if(msg.event)sender._signal(msg.event,msg.data)};sender.postMessage=function(msg){_self.onMessage({data:msg})};sender.callback=function(data,callbackId){this.postMessage({type:"call",id:callbackId,data:data})};sender.emit=function(name,data){this.postMessage({type:"event",name:name,data:data})};config.loadModule(["worker",mod],(function(Main){main=new Main[classname](sender);while(_self.messageBuffer.length)processNext()}))};UIWorkerClient.prototype=WorkerClient.prototype;exports.UIWorkerClient=UIWorkerClient;exports.WorkerClient=WorkerClient;exports.createWorker=createWorker}));ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],(function(acequire,exports,module){"use strict";var Range=acequire("./range").Range;var EventEmitter=acequire("./lib/event_emitter").EventEmitter;var oop=acequire("./lib/oop");var PlaceHolder=function(session,length,pos,others,mainClass,othersClass){var _self=this;this.length=length;this.session=session;this.doc=session.getDocument();this.mainClass=mainClass;this.othersClass=othersClass;this.$onUpdate=this.onUpdate.bind(this);this.doc.on("change",this.$onUpdate);this.$others=others;this.$onCursorChange=function(){setTimeout((function(){_self.onCursorChange()}))};this.$pos=pos;var undoStack=session.getUndoManager().$undoStack||session.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=undoStack.length;this.setup();session.selection.on("changeCursor",this.$onCursorChange)};(function(){oop.implement(this,EventEmitter);this.setup=function(){var _self=this;var doc=this.doc;var session=this.session;this.selectionBefore=session.selection.toJSON();if(session.selection.inMultiSelectMode)session.selection.toSingleRange();this.pos=doc.createAnchor(this.$pos.row,this.$pos.column);var pos=this.pos;pos.$insertRight=true;pos.detach();pos.markerId=session.addMarker(new Range(pos.row,pos.column,pos.row,pos.column+this.length),this.mainClass,null,false);this.others=[];this.$others.forEach((function(other){var anchor=doc.createAnchor(other.row,other.column);anchor.$insertRight=true;anchor.detach();_self.others.push(anchor)}));session.setUndoSelect(false)};this.showOtherMarkers=function(){if(this.othersActive)return;var session=this.session;var _self=this;this.othersActive=true;this.others.forEach((function(anchor){anchor.markerId=session.addMarker(new Range(anchor.row,anchor.column,anchor.row,anchor.column+_self.length),_self.othersClass,null,false)}))};this.hideOtherMarkers=function(){if(!this.othersActive)return;this.othersActive=false;for(var i=0;i<this.others.length;i++){this.session.removeMarker(this.others[i].markerId)}};this.onUpdate=function(delta){if(this.$updating)return this.updateAnchors(delta);var range=delta;if(range.start.row!==range.end.row)return;if(range.start.row!==this.pos.row)return;this.$updating=true;var lengthDiff=delta.action==="insert"?range.end.column-range.start.column:range.start.column-range.end.column;var inMainRange=range.start.column>=this.pos.column&&range.start.column<=this.pos.column+this.length+1;var distanceFromStart=range.start.column-this.pos.column;this.updateAnchors(delta);if(inMainRange)this.length+=lengthDiff;if(inMainRange&&!this.session.$fromUndo){if(delta.action==="insert"){for(var i=this.others.length-1;i>=0;i--){var otherPos=this.others[i];var newPos={row:otherPos.row,column:otherPos.column+distanceFromStart};this.doc.insertMergedLines(newPos,delta.lines)}}else if(delta.action==="remove"){for(var i=this.others.length-1;i>=0;i--){var otherPos=this.others[i];var newPos={row:otherPos.row,column:otherPos.column+distanceFromStart};this.doc.remove(new Range(newPos.row,newPos.column,newPos.row,newPos.column-lengthDiff))}}}this.$updating=false;this.updateMarkers()};this.updateAnchors=function(delta){this.pos.onChange(delta);for(var i=this.others.length;i--;)this.others[i].onChange(delta);this.updateMarkers()};this.updateMarkers=function(){if(this.$updating)return;var _self=this;var session=this.session;var updateMarker=function(pos,className){session.removeMarker(pos.markerId);pos.markerId=session.addMarker(new Range(pos.row,pos.column,pos.row,pos.column+_self.length),className,null,false)};updateMarker(this.pos,this.mainClass);for(var i=this.others.length;i--;)updateMarker(this.others[i],this.othersClass)};this.onCursorChange=function(event){if(this.$updating||!this.session)return;var pos=this.session.selection.getCursor();if(pos.row===this.pos.row&&pos.column>=this.pos.column&&pos.column<=this.pos.column+this.length){this.showOtherMarkers();this._emit("cursorEnter",event)}else{this.hideOtherMarkers();this._emit("cursorLeave",event)}};this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId);this.hideOtherMarkers();this.doc.removeEventListener("change",this.$onUpdate);this.session.selection.removeEventListener("changeCursor",this.$onCursorChange);this.session.setUndoSelect(true);this.session=null};this.cancel=function(){if(this.$undoStackDepth===-1)return;var undoManager=this.session.getUndoManager();var undosRequired=(undoManager.$undoStack||undoManager.$undostack).length-this.$undoStackDepth;for(var i=0;i<undosRequired;i++){undoManager.undo(true)}if(this.selectionBefore)this.session.selection.fromJSON(this.selectionBefore)}}).call(PlaceHolder.prototype);exports.PlaceHolder=PlaceHolder}));ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(acequire,exports,module){var event=acequire("../lib/event");var useragent=acequire("../lib/useragent");function isSamePoint(p1,p2){return p1.row==p2.row&&p1.column==p2.column}function onMouseDown(e){var ev=e.domEvent;var alt=ev.altKey;var shift=ev.shiftKey;var ctrl=ev.ctrlKey;var accel=e.getAccelKey();var button=e.getButton();if(ctrl&&useragent.isMac)button=ev.button;if(e.editor.inMultiSelectMode&&button==2){e.editor.textInput.onContextMenu(e.domEvent);return}if(!ctrl&&!alt&&!accel){if(button===0&&e.editor.inMultiSelectMode)e.editor.exitMultiSelectMode();return}if(button!==0)return;var editor=e.editor;var selection=editor.selection;var isMultiSelect=editor.inMultiSelectMode;var pos=e.getDocumentPosition();var cursor=selection.getCursor();var inSelection=e.inSelection()||selection.isEmpty()&&isSamePoint(pos,cursor);var mouseX=e.x,mouseY=e.y;var onMouseSelection=function(e){mouseX=e.clientX;mouseY=e.clientY};var session=editor.session;var screenAnchor=editor.renderer.pixelToScreenCoordinates(mouseX,mouseY);var screenCursor=screenAnchor;var selectionMode;if(editor.$mouseHandler.$enableJumpToDef){if(ctrl&&alt||accel&&alt)selectionMode=shift?"block":"add";else if(alt&&editor.$blockSelectEnabled)selectionMode="block"}else{if(accel&&!alt){selectionMode="add";if(!isMultiSelect&&shift)return}else if(alt&&editor.$blockSelectEnabled){selectionMode="block"}}if(selectionMode&&useragent.isMac&&ev.ctrlKey){editor.$mouseHandler.cancelContextMenu()}if(selectionMode=="add"){if(!isMultiSelect&&inSelection)return;if(!isMultiSelect){var range=selection.toOrientedRange();editor.addSelectionMarker(range)}var oldRange=selection.rangeList.rangeAtPoint(pos);editor.$blockScrolling++;editor.inVirtualSelectionMode=true;if(shift){oldRange=null;range=selection.ranges[0]||range;editor.removeSelectionMarker(range)}editor.once("mouseup",(function(){var tmpSel=selection.toOrientedRange();if(oldRange&&tmpSel.isEmpty()&&isSamePoint(oldRange.cursor,tmpSel.cursor))selection.substractPoint(tmpSel.cursor);else{if(shift){selection.substractPoint(range.cursor)}else if(range){editor.removeSelectionMarker(range);selection.addRange(range)}selection.addRange(tmpSel)}editor.$blockScrolling--;editor.inVirtualSelectionMode=false}))}else if(selectionMode=="block"){e.stop();editor.inVirtualSelectionMode=true;var initialRange;var rectSel=[];var blockSelect=function(){var newCursor=editor.renderer.pixelToScreenCoordinates(mouseX,mouseY);var cursor=session.screenToDocumentPosition(newCursor.row,newCursor.column,newCursor.offsetX);if(isSamePoint(screenCursor,newCursor)&&isSamePoint(cursor,selection.lead))return;screenCursor=newCursor;editor.$blockScrolling++;editor.selection.moveToPosition(cursor);editor.renderer.scrollCursorIntoView();editor.removeSelectionMarkers(rectSel);rectSel=selection.rectangularRangeBlock(screenCursor,screenAnchor);if(editor.$mouseHandler.$clickSelection&&rectSel.length==1&&rectSel[0].isEmpty())rectSel[0]=editor.$mouseHandler.$clickSelection.clone();rectSel.forEach(editor.addSelectionMarker,editor);editor.updateSelectionMarkers();editor.$blockScrolling--};editor.$blockScrolling++;if(isMultiSelect&&!accel){selection.toSingleRange()}else if(!isMultiSelect&&accel){initialRange=selection.toOrientedRange();editor.addSelectionMarker(initialRange)}if(shift)screenAnchor=session.documentToScreenPosition(selection.lead);else selection.moveToPosition(pos);editor.$blockScrolling--;screenCursor={row:-1,column:-1};var onMouseSelectionEnd=function(e){clearInterval(timerId);editor.removeSelectionMarkers(rectSel);if(!rectSel.length)rectSel=[selection.toOrientedRange()];editor.$blockScrolling++;if(initialRange){editor.removeSelectionMarker(initialRange);selection.toSingleRange(initialRange)}for(var i=0;i<rectSel.length;i++)selection.addRange(rectSel[i]);editor.inVirtualSelectionMode=false;editor.$mouseHandler.$clickSelection=null;editor.$blockScrolling--};var onSelectionInterval=blockSelect;event.capture(editor.container,onMouseSelection,onMouseSelectionEnd);var timerId=setInterval((function(){onSelectionInterval()}),20);return e.preventDefault()}}exports.onMouseDown=onMouseDown}));ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],(function(acequire,exports,module){exports.defaultCommands=[{name:"addCursorAbove",exec:function(editor){editor.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:true},{name:"addCursorBelow",exec:function(editor){editor.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:true},{name:"addCursorAboveSkipCurrent",exec:function(editor){editor.selectMoreLines(-1,true)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:true},{name:"addCursorBelowSkipCurrent",exec:function(editor){editor.selectMoreLines(1,true)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:true},{name:"selectMoreBefore",exec:function(editor){editor.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:true},{name:"selectMoreAfter",exec:function(editor){editor.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:true},{name:"selectNextBefore",exec:function(editor){editor.selectMore(-1,true)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:true},{name:"selectNextAfter",exec:function(editor){editor.selectMore(1,true)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:true},{name:"splitIntoLines",exec:function(editor){editor.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:true},{name:"alignCursors",exec:function(editor){editor.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",exec:function(editor){editor.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:true}];exports.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(editor){editor.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:true,isAvailable:function(editor){return editor&&editor.inMultiSelectMode}}];var HashHandler=acequire("../keyboard/hash_handler").HashHandler;exports.keyboardHandler=new HashHandler(exports.multiSelectCommands)}));ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],(function(acequire,exports,module){var RangeList=acequire("./range_list").RangeList;var Range=acequire("./range").Range;var Selection=acequire("./selection").Selection;var onMouseDown=acequire("./mouse/multi_select_handler").onMouseDown;var event=acequire("./lib/event");var lang=acequire("./lib/lang");var commands=acequire("./commands/multi_select_commands");exports.commands=commands.defaultCommands.concat(commands.multiSelectCommands);var Search=acequire("./search").Search;var search=new Search;function find(session,needle,dir){search.$options.wrap=true;search.$options.needle=needle;search.$options.backwards=dir==-1;return search.find(session)}var EditSession=acequire("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(EditSession.prototype);(function(){this.ranges=null;this.rangeList=null;this.addRange=function(range,$blockChangeEvents){if(!range)return;if(!this.inMultiSelectMode&&this.rangeCount===0){var oldRange=this.toOrientedRange();this.rangeList.add(oldRange);this.rangeList.add(range);if(this.rangeList.ranges.length!=2){this.rangeList.removeAll();return $blockChangeEvents||this.fromOrientedRange(range)}this.rangeList.removeAll();this.rangeList.add(oldRange);this.$onAddRange(oldRange)}if(!range.cursor)range.cursor=range.end;var removed=this.rangeList.add(range);this.$onAddRange(range);if(removed.length)this.$onRemoveRange(removed);if(this.rangeCount>1&&!this.inMultiSelectMode){this._signal("multiSelect");this.inMultiSelectMode=true;this.session.$undoSelect=false;this.rangeList.attach(this.session)}return $blockChangeEvents||this.fromOrientedRange(range)};this.toSingleRange=function(range){range=range||this.ranges[0];var removed=this.rangeList.removeAll();if(removed.length)this.$onRemoveRange(removed);range&&this.fromOrientedRange(range)};this.substractPoint=function(pos){var removed=this.rangeList.substractPoint(pos);if(removed){this.$onRemoveRange(removed);return removed[0]}};this.mergeOverlappingRanges=function(){var removed=this.rangeList.merge();if(removed.length)this.$onRemoveRange(removed);else if(this.ranges[0])this.fromOrientedRange(this.ranges[0])};this.$onAddRange=function(range){this.rangeCount=this.rangeList.ranges.length;this.ranges.unshift(range);this._signal("addRange",{range:range})};this.$onRemoveRange=function(removed){this.rangeCount=this.rangeList.ranges.length;if(this.rangeCount==1&&this.inMultiSelectMode){var lastRange=this.rangeList.ranges.pop();removed.push(lastRange);this.rangeCount=0}for(var i=removed.length;i--;){var index=this.ranges.indexOf(removed[i]);this.ranges.splice(index,1)}this._signal("removeRange",{ranges:removed});if(this.rangeCount===0&&this.inMultiSelectMode){this.inMultiSelectMode=false;this._signal("singleSelect");this.session.$undoSelect=true;this.rangeList.detach(this.session)}lastRange=lastRange||this.ranges[0];if(lastRange&&!lastRange.isEqual(this.getRange()))this.fromOrientedRange(lastRange)};this.$initRangeList=function(){if(this.rangeList)return;this.rangeList=new RangeList;this.ranges=[];this.rangeCount=0};this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]};this.splitIntoLines=function(){if(this.rangeCount>1){var ranges=this.rangeList.ranges;var lastRange=ranges[ranges.length-1];var range=Range.fromPoints(ranges[0].start,lastRange.end);this.toSingleRange();this.setSelectionRange(range,lastRange.cursor==lastRange.start)}else{var range=this.getRange();var isBackwards=this.isBackwards();var startRow=range.start.row;var endRow=range.end.row;if(startRow==endRow){if(isBackwards)var start=range.end,end=range.start;else var start=range.start,end=range.end;this.addRange(Range.fromPoints(end,end));this.addRange(Range.fromPoints(start,start));return}var rectSel=[];var r=this.getLineRange(startRow,true);r.start.column=range.start.column;rectSel.push(r);for(var i=startRow+1;i<endRow;i++)rectSel.push(this.getLineRange(i,true));r=this.getLineRange(endRow,true);r.end.column=range.end.column;rectSel.push(r);rectSel.forEach(this.addRange,this)}};this.toggleBlockSelection=function(){if(this.rangeCount>1){var ranges=this.rangeList.ranges;var lastRange=ranges[ranges.length-1];var range=Range.fromPoints(ranges[0].start,lastRange.end);this.toSingleRange();this.setSelectionRange(range,lastRange.cursor==lastRange.start)}else{var cursor=this.session.documentToScreenPosition(this.selectionLead);var anchor=this.session.documentToScreenPosition(this.selectionAnchor);var rectSel=this.rectangularRangeBlock(cursor,anchor);rectSel.forEach(this.addRange,this)}};this.rectangularRangeBlock=function(screenCursor,screenAnchor,includeEmptyLines){var rectSel=[];var xBackwards=screenCursor.column<screenAnchor.column;if(xBackwards){var startColumn=screenCursor.column;var endColumn=screenAnchor.column;var startOffsetX=screenCursor.offsetX;var endOffsetX=screenAnchor.offsetX}else{var startColumn=screenAnchor.column;var endColumn=screenCursor.column;var startOffsetX=screenAnchor.offsetX;var endOffsetX=screenCursor.offsetX}var yBackwards=screenCursor.row<screenAnchor.row;if(yBackwards){var startRow=screenCursor.row;var endRow=screenAnchor.row}else{var startRow=screenAnchor.row;var endRow=screenCursor.row}if(startColumn<0)startColumn=0;if(startRow<0)startRow=0;if(startRow==endRow)includeEmptyLines=true;for(var row=startRow;row<=endRow;row++){var range=Range.fromPoints(this.session.screenToDocumentPosition(row,startColumn,startOffsetX),this.session.screenToDocumentPosition(row,endColumn,endOffsetX));if(range.isEmpty()){if(docEnd&&isSamePoint(range.end,docEnd))break;var docEnd=range.end}range.cursor=xBackwards?range.start:range.end;rectSel.push(range)}if(yBackwards)rectSel.reverse();if(!includeEmptyLines){var end=rectSel.length-1;while(rectSel[end].isEmpty()&&end>0)end--;if(end>0){var start=0;while(rectSel[start].isEmpty())start++}for(var i=end;i>=start;i--){if(rectSel[i].isEmpty())rectSel.splice(i,1)}}return rectSel}}).call(Selection.prototype);var Editor=acequire("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor();this.renderer.updateBackMarkers()};this.addSelectionMarker=function(orientedRange){if(!orientedRange.cursor)orientedRange.cursor=orientedRange.end;var style=this.getSelectionStyle();orientedRange.marker=this.session.addMarker(orientedRange,"ace_selection",style);this.session.$selectionMarkers.push(orientedRange);this.session.selectionMarkerCount=this.session.$selectionMarkers.length;return orientedRange};this.removeSelectionMarker=function(range){if(!range.marker)return;this.session.removeMarker(range.marker);var index=this.session.$selectionMarkers.indexOf(range);if(index!=-1)this.session.$selectionMarkers.splice(index,1);this.session.selectionMarkerCount=this.session.$selectionMarkers.length};this.removeSelectionMarkers=function(ranges){var markerList=this.session.$selectionMarkers;for(var i=ranges.length;i--;){var range=ranges[i];if(!range.marker)continue;this.session.removeMarker(range.marker);var index=markerList.indexOf(range);if(index!=-1)markerList.splice(index,1)}this.session.selectionMarkerCount=markerList.length};this.$onAddRange=function(e){this.addSelectionMarker(e.range);this.renderer.updateCursor();this.renderer.updateBackMarkers()};this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges);this.renderer.updateCursor();this.renderer.updateBackMarkers()};this.$onMultiSelect=function(e){if(this.inMultiSelectMode)return;this.inMultiSelectMode=true;this.setStyle("ace_multiselect");this.keyBinding.addKeyboardHandler(commands.keyboardHandler);this.commands.setDefaultHandler("exec",this.$onMultiSelectExec);this.renderer.updateCursor();this.renderer.updateBackMarkers()};this.$onSingleSelect=function(e){if(this.session.multiSelect.inVirtualMode)return;this.inMultiSelectMode=false;this.unsetStyle("ace_multiselect");this.keyBinding.removeKeyboardHandler(commands.keyboardHandler);this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec);this.renderer.updateCursor();this.renderer.updateBackMarkers();this._emit("changeSelection")};this.$onMultiSelectExec=function(e){var command=e.command;var editor=e.editor;if(!editor.multiSelect)return;if(!command.multiSelectAction){var result=command.exec(editor,e.args||{});editor.multiSelect.addRange(editor.multiSelect.toOrientedRange());editor.multiSelect.mergeOverlappingRanges()}else if(command.multiSelectAction=="forEach"){result=editor.forEachSelection(command,e.args)}else if(command.multiSelectAction=="forEachLine"){result=editor.forEachSelection(command,e.args,true)}else if(command.multiSelectAction=="single"){editor.exitMultiSelectMode();result=command.exec(editor,e.args||{})}else{result=command.multiSelectAction(editor,e.args||{})}return result};this.forEachSelection=function(cmd,args,options){if(this.inVirtualSelectionMode)return;var keepOrder=options&&options.keepOrder;var $byLines=options==true||options&&options.$byLines;var session=this.session;var selection=this.selection;var rangeList=selection.rangeList;var ranges=(keepOrder?selection:rangeList).ranges;var result;if(!ranges.length)return cmd.exec?cmd.exec(this,args||{}):cmd(this,args||{});var reg=selection._eventRegistry;selection._eventRegistry={};var tmpSel=new Selection(session);this.inVirtualSelectionMode=true;for(var i=ranges.length;i--;){if($byLines){while(i>0&&ranges[i].start.row==ranges[i-1].end.row)i--}tmpSel.fromOrientedRange(ranges[i]);tmpSel.index=i;this.selection=session.selection=tmpSel;var cmdResult=cmd.exec?cmd.exec(this,args||{}):cmd(this,args||{});if(!result&&cmdResult!==undefined)result=cmdResult;tmpSel.toOrientedRange(ranges[i])}tmpSel.detach();this.selection=session.selection=selection;this.inVirtualSelectionMode=false;selection._eventRegistry=reg;selection.mergeOverlappingRanges();var anim=this.renderer.$scrollAnimation;this.onCursorChange();this.onSelectionChange();if(anim&&anim.from==anim.to)this.renderer.animateScrolling(anim.from);return result};this.exitMultiSelectMode=function(){if(!this.inMultiSelectMode||this.inVirtualSelectionMode)return;this.multiSelect.toSingleRange()};this.getSelectedText=function(){var text="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var ranges=this.multiSelect.rangeList.ranges;var buf=[];for(var i=0;i<ranges.length;i++){buf.push(this.session.getTextRange(ranges[i]))}var nl=this.session.getDocument().getNewLineCharacter();text=buf.join(nl);if(text.length==(buf.length-1)*nl.length)text=""}else if(!this.selection.isEmpty()){text=this.session.getTextRange(this.getSelectionRange())}return text};this.$checkMultiselectChange=function(e,anchor){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var range=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&anchor==this.multiSelect.anchor)return;var pos=anchor==this.multiSelect.anchor?range.cursor==range.start?range.end:range.start:range.cursor;if(pos.row!=anchor.row||this.session.$clipPositionToDocument(pos.row,pos.column).column!=anchor.column)this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange())}};this.findAll=function(needle,options,additive){options=options||{};options.needle=needle||options.needle;if(options.needle==undefined){var range=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();options.needle=this.session.getTextRange(range)}this.$search.set(options);var ranges=this.$search.findAll(this.session);if(!ranges.length)return 0;this.$blockScrolling+=1;var selection=this.multiSelect;if(!additive)selection.toSingleRange(ranges[0]);for(var i=ranges.length;i--;)selection.addRange(ranges[i],true);if(range&&selection.rangeList.rangeAtPoint(range.start))selection.addRange(range,true);this.$blockScrolling-=1;return ranges.length};this.selectMoreLines=function(dir,skip){var range=this.selection.toOrientedRange();var isBackwards=range.cursor==range.end;var screenLead=this.session.documentToScreenPosition(range.cursor);if(this.selection.$desiredColumn)screenLead.column=this.selection.$desiredColumn;var lead=this.session.screenToDocumentPosition(screenLead.row+dir,screenLead.column);if(!range.isEmpty()){var screenAnchor=this.session.documentToScreenPosition(isBackwards?range.end:range.start);var anchor=this.session.screenToDocumentPosition(screenAnchor.row+dir,screenAnchor.column)}else{var anchor=lead}if(isBackwards){var newRange=Range.fromPoints(lead,anchor);newRange.cursor=newRange.start}else{var newRange=Range.fromPoints(anchor,lead);newRange.cursor=newRange.end}newRange.desiredColumn=screenLead.column;if(!this.selection.inMultiSelectMode){this.selection.addRange(range)}else{if(skip)var toRemove=range.cursor}this.selection.addRange(newRange);if(toRemove)this.selection.substractPoint(toRemove)};this.transposeSelections=function(dir){var session=this.session;var sel=session.multiSelect;var all=sel.ranges;for(var i=all.length;i--;){var range=all[i];if(range.isEmpty()){var tmp=session.getWordRange(range.start.row,range.start.column);range.start.row=tmp.start.row;range.start.column=tmp.start.column;range.end.row=tmp.end.row;range.end.column=tmp.end.column}}sel.mergeOverlappingRanges();var words=[];for(var i=all.length;i--;){var range=all[i];words.unshift(session.getTextRange(range))}if(dir<0)words.unshift(words.pop());else words.push(words.shift());for(var i=all.length;i--;){var range=all[i];var tmp=range.clone();session.replace(range,words[i]);range.start.row=tmp.start.row;range.start.column=tmp.start.column}};this.selectMore=function(dir,skip,stopAtFirst){var session=this.session;var sel=session.multiSelect;var range=sel.toOrientedRange();if(range.isEmpty()){range=session.getWordRange(range.start.row,range.start.column);range.cursor=dir==-1?range.start:range.end;this.multiSelect.addRange(range);if(stopAtFirst)return}var needle=session.getTextRange(range);var newRange=find(session,needle,dir);if(newRange){newRange.cursor=dir==-1?newRange.start:newRange.end;this.$blockScrolling+=1;this.session.unfold(newRange);this.multiSelect.addRange(newRange);this.$blockScrolling-=1;this.renderer.scrollCursorIntoView(null,.5)}if(skip)this.multiSelect.substractPoint(range.cursor)};this.alignCursors=function(){var session=this.session;var sel=session.multiSelect;var ranges=sel.ranges;var row=-1;var sameRowRanges=ranges.filter((function(r){if(r.cursor.row==row)return true;row=r.cursor.row}));if(!ranges.length||sameRowRanges.length==ranges.length-1){var range=this.selection.getRange();var fr=range.start.row,lr=range.end.row;var guessRange=fr==lr;if(guessRange){var max=this.session.getLength();var line;do{line=this.session.getLine(lr)}while(/[=:]/.test(line)&&++lr<max);do{line=this.session.getLine(fr)}while(/[=:]/.test(line)&&--fr>0);if(fr<0)fr=0;if(lr>=max)lr=max-1}var lines=this.session.removeFullLines(fr,lr);lines=this.$reAlignText(lines,guessRange);this.session.insert({row:fr,column:0},lines.join("\n")+"\n");if(!guessRange){range.start.column=0;range.end.column=lines[lines.length-1].length}this.selection.setRange(range)}else{sameRowRanges.forEach((function(r){sel.substractPoint(r.cursor)}));var maxCol=0;var minSpace=Infinity;var spaceOffsets=ranges.map((function(r){var p=r.cursor;var line=session.getLine(p.row);var spaceOffset=line.substr(p.column).search(/\S/g);if(spaceOffset==-1)spaceOffset=0;if(p.column>maxCol)maxCol=p.column;if(spaceOffset<minSpace)minSpace=spaceOffset;return spaceOffset}));ranges.forEach((function(r,i){var p=r.cursor;var l=maxCol-p.column;var d=spaceOffsets[i]-minSpace;if(l>d)session.insert(p,lang.stringRepeat(" ",l-d));else session.remove(new Range(p.row,p.column,p.row,p.column-l+d));r.start.column=r.end.column=maxCol;r.start.row=r.end.row=p.row;r.cursor=r.end}));sel.fromOrientedRange(ranges[0]);this.renderer.updateCursor();this.renderer.updateBackMarkers()}};this.$reAlignText=function(lines,forceLeft){var isLeftAligned=true,isRightAligned=true;var startW,textW,endW;return lines.map((function(line){var m=line.match(/(\s*)(.*?)(\s*)([=:].*)/);if(!m)return[line];if(startW==null){startW=m[1].length;textW=m[2].length;endW=m[3].length;return m}if(startW+textW+endW!=m[1].length+m[2].length+m[3].length)isRightAligned=false;if(startW!=m[1].length)isLeftAligned=false;if(startW>m[1].length)startW=m[1].length;if(textW<m[2].length)textW=m[2].length;if(endW>m[3].length)endW=m[3].length;return m})).map(forceLeft?alignLeft:isLeftAligned?isRightAligned?alignRight:alignLeft:unAlign);function spaces(n){return lang.stringRepeat(" ",n)}function alignLeft(m){return!m[2]?m[0]:spaces(startW)+m[2]+spaces(textW-m[2].length+endW)+m[4].replace(/^([=:])\s+/,"$1 ")}function alignRight(m){return!m[2]?m[0]:spaces(startW+textW-m[2].length)+m[2]+spaces(endW," ")+m[4].replace(/^([=:])\s+/,"$1 ")}function unAlign(m){return!m[2]?m[0]:spaces(startW)+m[2]+spaces(endW)+m[4].replace(/^([=:])\s+/,"$1 ")}}}).call(Editor.prototype);function isSamePoint(p1,p2){return p1.row==p2.row&&p1.column==p2.column}exports.onSessionChange=function(e){var session=e.session;if(session&&!session.multiSelect){session.$selectionMarkers=[];session.selection.$initRangeList();session.multiSelect=session.selection}this.multiSelect=session&&session.multiSelect;var oldSession=e.oldSession;if(oldSession){oldSession.multiSelect.off("addRange",this.$onAddRange);oldSession.multiSelect.off("removeRange",this.$onRemoveRange);oldSession.multiSelect.off("multiSelect",this.$onMultiSelect);oldSession.multiSelect.off("singleSelect",this.$onSingleSelect);oldSession.multiSelect.lead.off("change",this.$checkMultiselectChange);oldSession.multiSelect.anchor.off("change",this.$checkMultiselectChange)}if(session){session.multiSelect.on("addRange",this.$onAddRange);session.multiSelect.on("removeRange",this.$onRemoveRange);session.multiSelect.on("multiSelect",this.$onMultiSelect);session.multiSelect.on("singleSelect",this.$onSingleSelect);session.multiSelect.lead.on("change",this.$checkMultiselectChange);session.multiSelect.anchor.on("change",this.$checkMultiselectChange)}if(session&&this.inMultiSelectMode!=session.selection.inMultiSelectMode){if(session.selection.inMultiSelectMode)this.$onMultiSelect();else this.$onSingleSelect()}};function MultiSelect(editor){if(editor.$multiselectOnSessionChange)return;editor.$onAddRange=editor.$onAddRange.bind(editor);editor.$onRemoveRange=editor.$onRemoveRange.bind(editor);editor.$onMultiSelect=editor.$onMultiSelect.bind(editor);editor.$onSingleSelect=editor.$onSingleSelect.bind(editor);editor.$multiselectOnSessionChange=exports.onSessionChange.bind(editor);editor.$checkMultiselectChange=editor.$checkMultiselectChange.bind(editor);editor.$multiselectOnSessionChange(editor);editor.on("changeSession",editor.$multiselectOnSessionChange);editor.on("mousedown",onMouseDown);editor.commands.addCommands(commands.defaultCommands);addAltCursorListeners(editor)}function addAltCursorListeners(editor){var el=editor.textInput.getElement();var altCursor=false;event.addListener(el,"keydown",(function(e){var altDown=e.keyCode==18&&!(e.ctrlKey||e.shiftKey||e.metaKey);if(editor.$blockSelectEnabled&&altDown){if(!altCursor){editor.renderer.setMouseCursor("crosshair");altCursor=true}}else if(altCursor){reset()}}));event.addListener(el,"keyup",reset);event.addListener(el,"blur",reset);function reset(e){if(altCursor){editor.renderer.setMouseCursor("");altCursor=false}}}exports.MultiSelect=MultiSelect;acequire("./config").defineOptions(Editor.prototype,"editor",{enableMultiselect:{set:function(val){MultiSelect(this);if(val){this.on("changeSession",this.$multiselectOnSessionChange);this.on("mousedown",onMouseDown)}else{this.off("changeSession",this.$multiselectOnSessionChange);this.off("mousedown",onMouseDown)}},value:true},enableBlockSelect:{set:function(val){this.$blockSelectEnabled=val},value:true}})}));ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],(function(acequire,exports,module){"use strict";var Range=acequire("../../range").Range;var FoldMode=exports.FoldMode=function(){};(function(){this.foldingStartMarker=null;this.foldingStopMarker=null;this.getFoldWidget=function(session,foldStyle,row){var line=session.getLine(row);if(this.foldingStartMarker.test(line))return"start";if(foldStyle=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(line))return"end";return""};this.getFoldWidgetRange=function(session,foldStyle,row){return null};this.indentationBlock=function(session,row,column){var re=/\S/;var line=session.getLine(row);var startLevel=line.search(re);if(startLevel==-1)return;var startColumn=column||line.length;var maxRow=session.getLength();var startRow=row;var endRow=row;while(++row<maxRow){var level=session.getLine(row).search(re);if(level==-1)continue;if(level<=startLevel)break;endRow=row}if(endRow>startRow){var endColumn=session.getLine(endRow).length;return new Range(startRow,startColumn,endRow,endColumn)}};this.openingBracketBlock=function(session,bracket,row,column,typeRe){var start={row:row,column:column+1};var end=session.$findClosingBracket(bracket,start,typeRe);if(!end)return;var fw=session.foldWidgets[end.row];if(fw==null)fw=session.getFoldWidget(end.row);if(fw=="start"&&end.row>start.row){end.row--;end.column=session.getLine(end.row).length}return Range.fromPoints(start,end)};this.closingBracketBlock=function(session,bracket,row,column,typeRe){var end={row:row,column:column};var start=session.$findOpeningBracket(bracket,end);if(!start)return;start.column++;end.column--;return Range.fromPoints(start,end)}}).call(FoldMode.prototype)}));ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],(function(acequire,exports,module){"use strict";exports.isDark=false;exports.cssClass="ace-tm";exports.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';var dom=acequire("../lib/dom");dom.importCssString(exports.cssText,exports.cssClass)}));ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],(function(acequire,exports,module){"use strict";var oop=acequire("./lib/oop");var dom=acequire("./lib/dom");var Range=acequire("./range").Range;function LineWidgets(session){this.session=session;this.session.widgetManager=this;this.session.getRowLength=this.getRowLength;this.session.$getWidgetScreenLength=this.$getWidgetScreenLength;this.updateOnChange=this.updateOnChange.bind(this);this.renderWidgets=this.renderWidgets.bind(this);this.measureWidgets=this.measureWidgets.bind(this);this.session._changedWidgets=[];this.$onChangeEditor=this.$onChangeEditor.bind(this);this.session.on("change",this.updateOnChange);this.session.on("changeFold",this.updateOnFold);this.session.on("changeEditor",this.$onChangeEditor)}(function(){this.getRowLength=function(row){var h;if(this.lineWidgets)h=this.lineWidgets[row]&&this.lineWidgets[row].rowCount||0;else h=0;if(!this.$useWrapMode||!this.$wrapData[row]){return 1+h}else{return this.$wrapData[row].length+1+h}};this.$getWidgetScreenLength=function(){var screenRows=0;this.lineWidgets.forEach((function(w){if(w&&w.rowCount&&!w.hidden)screenRows+=w.rowCount}));return screenRows};this.$onChangeEditor=function(e){this.attach(e.editor)};this.attach=function(editor){if(editor&&editor.widgetManager&&editor.widgetManager!=this)editor.widgetManager.detach();if(this.editor==editor)return;this.detach();this.editor=editor;if(editor){editor.widgetManager=this;editor.renderer.on("beforeRender",this.measureWidgets);editor.renderer.on("afterRender",this.renderWidgets)}};this.detach=function(e){var editor=this.editor;if(!editor)return;this.editor=null;editor.widgetManager=null;editor.renderer.off("beforeRender",this.measureWidgets);editor.renderer.off("afterRender",this.renderWidgets);var lineWidgets=this.session.lineWidgets;lineWidgets&&lineWidgets.forEach((function(w){if(w&&w.el&&w.el.parentNode){w._inDocument=false;w.el.parentNode.removeChild(w.el)}}))};this.updateOnFold=function(e,session){var lineWidgets=session.lineWidgets;if(!lineWidgets||!e.action)return;var fold=e.data;var start=fold.start.row;var end=fold.end.row;var hide=e.action=="add";for(var i=start+1;i<end;i++){if(lineWidgets[i])lineWidgets[i].hidden=hide}if(lineWidgets[end]){if(hide){if(!lineWidgets[start])lineWidgets[start]=lineWidgets[end];else lineWidgets[end].hidden=hide}else{if(lineWidgets[start]==lineWidgets[end])lineWidgets[start]=undefined;lineWidgets[end].hidden=hide}}};this.updateOnChange=function(delta){var lineWidgets=this.session.lineWidgets;if(!lineWidgets)return;var startRow=delta.start.row;var len=delta.end.row-startRow;if(len===0){}else if(delta.action=="remove"){var removed=lineWidgets.splice(startRow+1,len);removed.forEach((function(w){w&&this.removeLineWidget(w)}),this);this.$updateRows()}else{var args=new Array(len);args.unshift(startRow,0);lineWidgets.splice.apply(lineWidgets,args);this.$updateRows()}};this.$updateRows=function(){var lineWidgets=this.session.lineWidgets;if(!lineWidgets)return;var noWidgets=true;lineWidgets.forEach((function(w,i){if(w){noWidgets=false;w.row=i;while(w.$oldWidget){w.$oldWidget.row=i;w=w.$oldWidget}}}));if(noWidgets)this.session.lineWidgets=null};this.addLineWidget=function(w){if(!this.session.lineWidgets)this.session.lineWidgets=new Array(this.session.getLength());var old=this.session.lineWidgets[w.row];if(old){w.$oldWidget=old;if(old.el&&old.el.parentNode){old.el.parentNode.removeChild(old.el);old._inDocument=false}}this.session.lineWidgets[w.row]=w;w.session=this.session;var renderer=this.editor.renderer;if(w.html&&!w.el){w.el=dom.createElement("div");w.el.innerHTML=w.html}if(w.el){dom.addCssClass(w.el,"ace_lineWidgetContainer");w.el.style.position="absolute";w.el.style.zIndex=5;renderer.container.appendChild(w.el);w._inDocument=true}if(!w.coverGutter){w.el.style.zIndex=3}if(w.pixelHeight==null){w.pixelHeight=w.el.offsetHeight}if(w.rowCount==null){w.rowCount=w.pixelHeight/renderer.layerConfig.lineHeight}var fold=this.session.getFoldAt(w.row,0);w.$fold=fold;if(fold){var lineWidgets=this.session.lineWidgets;if(w.row==fold.end.row&&!lineWidgets[fold.start.row])lineWidgets[fold.start.row]=w;else w.hidden=true}this.session._emit("changeFold",{data:{start:{row:w.row}}});this.$updateRows();this.renderWidgets(null,renderer);this.onWidgetChanged(w);return w};this.removeLineWidget=function(w){w._inDocument=false;w.session=null;if(w.el&&w.el.parentNode)w.el.parentNode.removeChild(w.el);if(w.editor&&w.editor.destroy)try{w.editor.destroy()}catch(e){}if(this.session.lineWidgets){var w1=this.session.lineWidgets[w.row];if(w1==w){this.session.lineWidgets[w.row]=w.$oldWidget;if(w.$oldWidget)this.onWidgetChanged(w.$oldWidget)}else{while(w1){if(w1.$oldWidget==w){w1.$oldWidget=w.$oldWidget;break}w1=w1.$oldWidget}}}this.session._emit("changeFold",{data:{start:{row:w.row}}});this.$updateRows()};this.getWidgetsAtRow=function(row){var lineWidgets=this.session.lineWidgets;var w=lineWidgets&&lineWidgets[row];var list=[];while(w){list.push(w);w=w.$oldWidget}return list};this.onWidgetChanged=function(w){this.session._changedWidgets.push(w);this.editor&&this.editor.renderer.updateFull()};this.measureWidgets=function(e,renderer){var changedWidgets=this.session._changedWidgets;var config=renderer.layerConfig;if(!changedWidgets||!changedWidgets.length)return;var min=Infinity;for(var i=0;i<changedWidgets.length;i++){var w=changedWidgets[i];if(!w||!w.el)continue;if(w.session!=this.session)continue;if(!w._inDocument){if(this.session.lineWidgets[w.row]!=w)continue;w._inDocument=true;renderer.container.appendChild(w.el)}w.h=w.el.offsetHeight;if(!w.fixedWidth){w.w=w.el.offsetWidth;w.screenWidth=Math.ceil(w.w/config.characterWidth)}var rowCount=w.h/config.lineHeight;if(w.coverLine){rowCount-=this.session.getRowLineCount(w.row);if(rowCount<0)rowCount=0}if(w.rowCount!=rowCount){w.rowCount=rowCount;if(w.row<min)min=w.row}}if(min!=Infinity){this.session._emit("changeFold",{data:{start:{row:min}}});this.session.lineWidgetWidth=null}this.session._changedWidgets=[]};this.renderWidgets=function(e,renderer){var config=renderer.layerConfig;var lineWidgets=this.session.lineWidgets;if(!lineWidgets)return;var first=Math.min(this.firstRow,config.firstRow);var last=Math.max(this.lastRow,config.lastRow,lineWidgets.length);while(first>0&&!lineWidgets[first])first--;this.firstRow=config.firstRow;this.lastRow=config.lastRow;renderer.$cursorLayer.config=config;for(var i=first;i<=last;i++){var w=lineWidgets[i];if(!w||!w.el)continue;if(w.hidden){w.el.style.top=-100-(w.pixelHeight||0)+"px";continue}if(!w._inDocument){w._inDocument=true;renderer.container.appendChild(w.el)}var top=renderer.$cursorLayer.getPixelPosition({row:i,column:0},true).top;if(!w.coverLine)top+=config.lineHeight*this.session.getRowLineCount(w.row);w.el.style.top=top-config.offset+"px";var left=w.coverGutter?0:renderer.gutterWidth;if(!w.fixedWidth)left-=renderer.scrollLeft;w.el.style.left=left+"px";if(w.fullWidth&&w.screenWidth){w.el.style.minWidth=config.width+2*config.padding+"px"}if(w.fixedWidth){w.el.style.right=renderer.scrollBar.getWidth()+"px"}else{w.el.style.right=""}}}}).call(LineWidgets.prototype);exports.LineWidgets=LineWidgets}));ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],(function(acequire,exports,module){"use strict";var LineWidgets=acequire("../line_widgets").LineWidgets;var dom=acequire("../lib/dom");var Range=acequire("../range").Range;function binarySearch(array,needle,comparator){var first=0;var last=array.length-1;while(first<=last){var mid=first+last>>1;var c=comparator(needle,array[mid]);if(c>0)first=mid+1;else if(c<0)last=mid-1;else return mid}return-(first+1)}function findAnnotations(session,row,dir){var annotations=session.getAnnotations().sort(Range.comparePoints);if(!annotations.length)return;var i=binarySearch(annotations,{row:row,column:-1},Range.comparePoints);if(i<0)i=-i-1;if(i>=annotations.length)i=dir>0?0:annotations.length-1;else if(i===0&&dir<0)i=annotations.length-1;var annotation=annotations[i];if(!annotation||!dir)return;if(annotation.row===row){do{annotation=annotations[i+=dir]}while(annotation&&annotation.row===row);if(!annotation)return annotations.slice()}var matched=[];row=annotation.row;do{matched[dir<0?"unshift":"push"](annotation);annotation=annotations[i+=dir]}while(annotation&&annotation.row==row);return matched.length&&matched}exports.showErrorMarker=function(editor,dir){var session=editor.session;if(!session.widgetManager){session.widgetManager=new LineWidgets(session);session.widgetManager.attach(editor)}var pos=editor.getCursorPosition();var row=pos.row;var oldWidget=session.widgetManager.getWidgetsAtRow(row).filter((function(w){return w.type=="errorMarker"}))[0];if(oldWidget){oldWidget.destroy()}else{row-=dir}var annotations=findAnnotations(session,row,dir);var gutterAnno;if(annotations){var annotation=annotations[0];pos.column=(annotation.pos&&typeof annotation.column!="number"?annotation.pos.sc:annotation.column)||0;pos.row=annotation.row;gutterAnno=editor.renderer.$gutterLayer.$annotations[pos.row]}else if(oldWidget){return}else{gutterAnno={text:["Looks good!"],className:"ace_ok"}}editor.session.unfold(pos.row);editor.selection.moveToPosition(pos);var w={row:pos.row,fixedWidth:true,coverGutter:true,el:dom.createElement("div"),type:"errorMarker"};var el=w.el.appendChild(dom.createElement("div"));var arrow=w.el.appendChild(dom.createElement("div"));arrow.className="error_widget_arrow "+gutterAnno.className;var left=editor.renderer.$cursorLayer.getPixelPosition(pos).left;arrow.style.left=left+editor.renderer.gutterWidth-5+"px";w.el.className="error_widget_wrapper";el.className="error_widget "+gutterAnno.className;el.innerHTML=gutterAnno.text.join("<br>");el.appendChild(dom.createElement("div"));var kb=function(_,hashId,keyString){if(hashId===0&&(keyString==="esc"||keyString==="return")){w.destroy();return{command:"null"}}};w.destroy=function(){if(editor.$mouseHandler.isMousePressed)return;editor.keyBinding.removeKeyboardHandler(kb);session.widgetManager.removeLineWidget(w);editor.off("changeSelection",w.destroy);editor.off("changeSession",w.destroy);editor.off("mouseup",w.destroy);editor.off("change",w.destroy)};editor.keyBinding.addKeyboardHandler(kb);editor.on("changeSelection",w.destroy);editor.on("changeSession",w.destroy);editor.on("mouseup",w.destroy);editor.on("change",w.destroy);editor.session.widgetManager.addLineWidget(w);w.el.onmousedown=editor.focus.bind(editor);editor.renderer.scrollCursorIntoView(null,.5,{bottom:w.el.offsetHeight})};dom.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")}));ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],(function(acequire,exports,module){"use strict";acequire("./lib/fixoldbrowsers");var dom=acequire("./lib/dom");var event=acequire("./lib/event");var Editor=acequire("./editor").Editor;var EditSession=acequire("./edit_session").EditSession;var UndoManager=acequire("./undomanager").UndoManager;var Renderer=acequire("./virtual_renderer").VirtualRenderer;acequire("./worker/worker_client");acequire("./keyboard/hash_handler");acequire("./placeholder");acequire("./multi_select");acequire("./mode/folding/fold_mode");acequire("./theme/textmate");acequire("./ext/error_marker");exports.config=acequire("./config");exports.acequire=acequire;if(true)exports.define=__webpack_require__(95);exports.edit=function(el){if(typeof el=="string"){var _id=el;el=document.getElementById(_id);if(!el)throw new Error("ace.edit can't find div #"+_id)}if(el&&el.env&&el.env.editor instanceof Editor)return el.env.editor;var value="";if(el&&/input|textarea/i.test(el.tagName)){var oldNode=el;value=oldNode.value;el=dom.createElement("pre");oldNode.parentNode.replaceChild(el,oldNode)}else if(el){value=dom.getInnerText(el);el.innerHTML=""}var doc=exports.createEditSession(value);var editor=new Editor(new Renderer(el));editor.setSession(doc);var env={document:doc,editor:editor,onResize:editor.resize.bind(editor,null)};if(oldNode)env.textarea=oldNode;event.addListener(window,"resize",env.onResize);editor.on("destroy",(function(){event.removeListener(window,"resize",env.onResize);env.editor.container.env=null}));editor.container.env=editor.env=env;return editor};exports.createEditSession=function(text,mode){var doc=new EditSession(text,mode);doc.setUndoManager(new UndoManager);return doc};exports.EditSession=EditSession;exports.UndoManager=UndoManager;exports.version="1.2.9"}));(function(){ace.acequire(["ace/ace"],(function(a){if(a){a.config.init(true);a.define=ace.define}if(!window.ace)window.ace=a;for(var key in a)if(a.hasOwnProperty(key))window.ace[key]=a[key]}))})();module.exports=window.ace.acequire("ace/ace")},function(module,exports){ace.define("ace/snippets",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/anchor","ace/keyboard/hash_handler","ace/tokenizer","ace/lib/dom","ace/editor"],(function(acequire,exports,module){"use strict";var oop=acequire("./lib/oop");var EventEmitter=acequire("./lib/event_emitter").EventEmitter;var lang=acequire("./lib/lang");var Range=acequire("./range").Range;var Anchor=acequire("./anchor").Anchor;var HashHandler=acequire("./keyboard/hash_handler").HashHandler;var Tokenizer=acequire("./tokenizer").Tokenizer;var comparePoints=Range.comparePoints;var SnippetManager=function(){this.snippetMap={};this.snippetNameMap={}};(function(){oop.implement(this,EventEmitter);this.getTokenizer=function(){function TabstopToken(str,_,stack){str=str.substr(1);if(/^\d+$/.test(str)&&!stack.inFormatString)return[{tabstopId:parseInt(str,10)}];return[{text:str}]}function escape(ch){return"(?:[^\\\\"+ch+"]|\\\\.)"}SnippetManager.$tokenizer=new Tokenizer({start:[{regex:/:/,onMatch:function(val,state,stack){if(stack.length&&stack[0].expectIf){stack[0].expectIf=false;stack[0].elseBranch=stack[0];return[stack[0]]}return":"}},{regex:/\\./,onMatch:function(val,state,stack){var ch=val[1];if(ch=="}"&&stack.length){val=ch}else if("`$\\".indexOf(ch)!=-1){val=ch}else if(stack.inFormatString){if(ch=="n")val="\n";else if(ch=="t")val="\n";else if("ulULE".indexOf(ch)!=-1){val={changeCase:ch,local:ch>"a"}}}return[val]}},{regex:/}/,onMatch:function(val,state,stack){return[stack.length?stack.shift():val]}},{regex:/\$(?:\d+|\w+)/,onMatch:TabstopToken},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(str,state,stack){var t=TabstopToken(str.substr(1),state,stack);stack.unshift(t[0]);return t},next:"snippetVar"},{regex:/\n/,token:"newline",merge:false}],snippetVar:[{regex:"\\|"+escape("\\|")+"*\\|",onMatch:function(val,state,stack){stack[0].choices=val.slice(1,-1).split(",")},next:"start"},{regex:"/("+escape("/")+"+)/(?:("+escape("/")+"*)/)(\\w*):?",onMatch:function(val,state,stack){var ts=stack[0];ts.fmtString=val;val=this.splitRegex.exec(val);ts.guard=val[1];ts.fmt=val[2];ts.flag=val[3];return""},next:"start"},{regex:"`"+escape("`")+"*`",onMatch:function(val,state,stack){stack[0].code=val.splice(1,-1);return""},next:"start"},{regex:"\\?",onMatch:function(val,state,stack){if(stack[0])stack[0].expectIf=true},next:"start"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:"/("+escape("/")+"+)/",token:"regex"},{regex:"",onMatch:function(val,state,stack){stack.inFormatString=true},next:"start"}]});SnippetManager.prototype.getTokenizer=function(){return SnippetManager.$tokenizer};return SnippetManager.$tokenizer};this.tokenizeTmSnippet=function(str,startState){return this.getTokenizer().getLineTokens(str,startState).tokens.map((function(x){return x.value||x}))};this.$getDefaultValue=function(editor,name){if(/^[A-Z]\d+$/.test(name)){var i=name.substr(1);return(this.variables[name[0]+"__"]||{})[i]}if(/^\d+$/.test(name)){return(this.variables.__||{})[name]}name=name.replace(/^TM_/,"");if(!editor)return;var s=editor.session;switch(name){case"CURRENT_WORD":var r=s.getWordRange();case"SELECTION":case"SELECTED_TEXT":return s.getTextRange(r);case"CURRENT_LINE":return s.getLine(editor.getCursorPosition().row);case"PREV_LINE":return s.getLine(editor.getCursorPosition().row-1);case"LINE_INDEX":return editor.getCursorPosition().column;case"LINE_NUMBER":return editor.getCursorPosition().row+1;case"SOFT_TABS":return s.getUseSoftTabs()?"YES":"NO";case"TAB_SIZE":return s.getTabSize();case"FILENAME":case"FILEPATH":return"";case"FULLNAME":return"Ace"}};this.variables={};this.getVariableValue=function(editor,varName){if(this.variables.hasOwnProperty(varName))return this.variables[varName](editor,varName)||"";return this.$getDefaultValue(editor,varName)||""};this.tmStrFormat=function(str,ch,editor){var flag=ch.flag||"";var re=ch.guard;re=new RegExp(re,flag.replace(/[^gi]/,""));var fmtTokens=this.tokenizeTmSnippet(ch.fmt,"formatString");var _self=this;var formatted=str.replace(re,(function(){_self.variables.__=arguments;var fmtParts=_self.resolveVariables(fmtTokens,editor);var gChangeCase="E";for(var i=0;i<fmtParts.length;i++){var ch=fmtParts[i];if(typeof ch=="object"){fmtParts[i]="";if(ch.changeCase&&ch.local){var next=fmtParts[i+1];if(next&&typeof next=="string"){if(ch.changeCase=="u")fmtParts[i]=next[0].toUpperCase();else fmtParts[i]=next[0].toLowerCase();fmtParts[i+1]=next.substr(1)}}else if(ch.changeCase){gChangeCase=ch.changeCase}}else if(gChangeCase=="U"){fmtParts[i]=ch.toUpperCase()}else if(gChangeCase=="L"){fmtParts[i]=ch.toLowerCase()}}return fmtParts.join("")}));this.variables.__=null;return formatted};this.resolveVariables=function(snippet,editor){var result=[];for(var i=0;i<snippet.length;i++){var ch=snippet[i];if(typeof ch=="string"){result.push(ch)}else if(typeof ch!="object"){continue}else if(ch.skip){gotoNext(ch)}else if(ch.processed<i){continue}else if(ch.text){var value=this.getVariableValue(editor,ch.text);if(value&&ch.fmtString)value=this.tmStrFormat(value,ch);ch.processed=i;if(ch.expectIf==null){if(value){result.push(value);gotoNext(ch)}}else{if(value){ch.skip=ch.elseBranch}else gotoNext(ch)}}else if(ch.tabstopId!=null){result.push(ch)}else if(ch.changeCase!=null){result.push(ch)}}function gotoNext(ch){var i1=snippet.indexOf(ch,i+1);if(i1!=-1)i=i1}return result};this.insertSnippetForSelection=function(editor,snippetText){var cursor=editor.getCursorPosition();var line=editor.session.getLine(cursor.row);var tabString=editor.session.getTabString();var indentString=line.match(/^\s*/)[0];if(cursor.column<indentString.length)indentString=indentString.slice(0,cursor.column);snippetText=snippetText.replace(/\r/g,"");var tokens=this.tokenizeTmSnippet(snippetText);tokens=this.resolveVariables(tokens,editor);tokens=tokens.map((function(x){if(x=="\n")return x+indentString;if(typeof x=="string")return x.replace(/\t/g,tabString);return x}));var tabstops=[];tokens.forEach((function(p,i){if(typeof p!="object")return;var id=p.tabstopId;var ts=tabstops[id];if(!ts){ts=tabstops[id]=[];ts.index=id;ts.value=""}if(ts.indexOf(p)!==-1)return;ts.push(p);var i1=tokens.indexOf(p,i+1);if(i1===-1)return;var value=tokens.slice(i+1,i1);var isNested=value.some((function(t){return typeof t==="object"}));if(isNested&&!ts.value){ts.value=value}else if(value.length&&(!ts.value||typeof ts.value!=="string")){ts.value=value.join("")}}));tabstops.forEach((function(ts){ts.length=0}));var expanding={};function copyValue(val){var copy=[];for(var i=0;i<val.length;i++){var p=val[i];if(typeof p=="object"){if(expanding[p.tabstopId])continue;var j=val.lastIndexOf(p,i-1);p=copy[j]||{tabstopId:p.tabstopId}}copy[i]=p}return copy}for(var i=0;i<tokens.length;i++){var p=tokens[i];if(typeof p!="object")continue;var id=p.tabstopId;var i1=tokens.indexOf(p,i+1);if(expanding[id]){if(expanding[id]===p)expanding[id]=null;continue}var ts=tabstops[id];var arg=typeof ts.value=="string"?[ts.value]:copyValue(ts.value);arg.unshift(i+1,Math.max(0,i1-i));arg.push(p);expanding[id]=p;tokens.splice.apply(tokens,arg);if(ts.indexOf(p)===-1)ts.push(p)}var row=0,column=0;var text="";tokens.forEach((function(t){if(typeof t==="string"){var lines=t.split("\n");if(lines.length>1){column=lines[lines.length-1].length;row+=lines.length-1}else column+=t.length;text+=t}else{if(!t.start)t.start={row:row,column:column};else t.end={row:row,column:column}}}));var range=editor.getSelectionRange();var end=editor.session.replace(range,text);var tabstopManager=new TabstopManager(editor);var selectionId=editor.inVirtualSelectionMode&&editor.selection.index;tabstopManager.addTabstops(tabstops,range.start,end,selectionId)};this.insertSnippet=function(editor,snippetText){var self=this;if(editor.inVirtualSelectionMode)return self.insertSnippetForSelection(editor,snippetText);editor.forEachSelection((function(){self.insertSnippetForSelection(editor,snippetText)}),null,{keepOrder:true});if(editor.tabstopManager)editor.tabstopManager.tabNext()};this.$getScope=function(editor){var scope=editor.session.$mode.$id||"";scope=scope.split("/").pop();if(scope==="html"||scope==="php"){if(scope==="php"&&!editor.session.$mode.inlinePhp)scope="html";var c=editor.getCursorPosition();var state=editor.session.getState(c.row);if(typeof state==="object"){state=state[0]}if(state.substring){if(state.substring(0,3)=="js-")scope="javascript";else if(state.substring(0,4)=="css-")scope="css";else if(state.substring(0,4)=="php-")scope="php"}}return scope};this.getActiveScopes=function(editor){var scope=this.$getScope(editor);var scopes=[scope];var snippetMap=this.snippetMap;if(snippetMap[scope]&&snippetMap[scope].includeScopes){scopes.push.apply(scopes,snippetMap[scope].includeScopes)}scopes.push("_");return scopes};this.expandWithTab=function(editor,options){var self=this;var result=editor.forEachSelection((function(){return self.expandSnippetForSelection(editor,options)}),null,{keepOrder:true});if(result&&editor.tabstopManager)editor.tabstopManager.tabNext();return result};this.expandSnippetForSelection=function(editor,options){var cursor=editor.getCursorPosition();var line=editor.session.getLine(cursor.row);var before=line.substring(0,cursor.column);var after=line.substr(cursor.column);var snippetMap=this.snippetMap;var snippet;this.getActiveScopes(editor).some((function(scope){var snippets=snippetMap[scope];if(snippets)snippet=this.findMatchingSnippet(snippets,before,after);return!!snippet}),this);if(!snippet)return false;if(options&&options.dryRun)return true;editor.session.doc.removeInLine(cursor.row,cursor.column-snippet.replaceBefore.length,cursor.column+snippet.replaceAfter.length);this.variables.M__=snippet.matchBefore;this.variables.T__=snippet.matchAfter;this.insertSnippetForSelection(editor,snippet.content);this.variables.M__=this.variables.T__=null;return true};this.findMatchingSnippet=function(snippetList,before,after){for(var i=snippetList.length;i--;){var s=snippetList[i];if(s.startRe&&!s.startRe.test(before))continue;if(s.endRe&&!s.endRe.test(after))continue;if(!s.startRe&&!s.endRe)continue;s.matchBefore=s.startRe?s.startRe.exec(before):[""];s.matchAfter=s.endRe?s.endRe.exec(after):[""];s.replaceBefore=s.triggerRe?s.triggerRe.exec(before)[0]:"";s.replaceAfter=s.endTriggerRe?s.endTriggerRe.exec(after)[0]:"";return s}};this.snippetMap={};this.snippetNameMap={};this.register=function(snippets,scope){var snippetMap=this.snippetMap;var snippetNameMap=this.snippetNameMap;var self=this;if(!snippets)snippets=[];function wrapRegexp(src){if(src&&!/^\^?\(.*\)\$?$|^\\b$/.test(src))src="(?:"+src+")";return src||""}function guardedRegexp(re,guard,opening){re=wrapRegexp(re);guard=wrapRegexp(guard);if(opening){re=guard+re;if(re&&re[re.length-1]!="$")re=re+"$"}else{re=re+guard;if(re&&re[0]!="^")re="^"+re}return new RegExp(re)}function addSnippet(s){if(!s.scope)s.scope=scope||"_";scope=s.scope;if(!snippetMap[scope]){snippetMap[scope]=[];snippetNameMap[scope]={}}var map=snippetNameMap[scope];if(s.name){var old=map[s.name];if(old)self.unregister(old);map[s.name]=s}snippetMap[scope].push(s);if(s.tabTrigger&&!s.trigger){if(!s.guard&&/^\w/.test(s.tabTrigger))s.guard="\\b";s.trigger=lang.escapeRegExp(s.tabTrigger)}if(!s.trigger&&!s.guard&&!s.endTrigger&&!s.endGuard)return;s.startRe=guardedRegexp(s.trigger,s.guard,true);s.triggerRe=new RegExp(s.trigger,"",true);s.endRe=guardedRegexp(s.endTrigger,s.endGuard,true);s.endTriggerRe=new RegExp(s.endTrigger,"",true)}if(snippets&&snippets.content)addSnippet(snippets);else if(Array.isArray(snippets))snippets.forEach(addSnippet);this._signal("registerSnippets",{scope:scope})};this.unregister=function(snippets,scope){var snippetMap=this.snippetMap;var snippetNameMap=this.snippetNameMap;function removeSnippet(s){var nameMap=snippetNameMap[s.scope||scope];if(nameMap&&nameMap[s.name]){delete nameMap[s.name];var map=snippetMap[s.scope||scope];var i=map&&map.indexOf(s);if(i>=0)map.splice(i,1)}}if(snippets.content)removeSnippet(snippets);else if(Array.isArray(snippets))snippets.forEach(removeSnippet)};this.parseSnippetFile=function(str){str=str.replace(/\r/g,"");var list=[],snippet={};var re=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;var m;while(m=re.exec(str)){if(m[1]){try{snippet=JSON.parse(m[1]);list.push(snippet)}catch(e){}}if(m[4]){snippet.content=m[4].replace(/^\t/gm,"");list.push(snippet);snippet={}}else{var key=m[2],val=m[3];if(key=="regex"){var guardRe=/\/((?:[^\/\\]|\\.)*)|$/g;snippet.guard=guardRe.exec(val)[1];snippet.trigger=guardRe.exec(val)[1];snippet.endTrigger=guardRe.exec(val)[1];snippet.endGuard=guardRe.exec(val)[1]}else if(key=="snippet"){snippet.tabTrigger=val.match(/^\S*/)[0];if(!snippet.name)snippet.name=val}else{snippet[key]=val}}}return list};this.getSnippetByName=function(name,editor){var snippetMap=this.snippetNameMap;var snippet;this.getActiveScopes(editor).some((function(scope){var snippets=snippetMap[scope];if(snippets)snippet=snippets[name];return!!snippet}),this);return snippet}}).call(SnippetManager.prototype);var TabstopManager=function(editor){if(editor.tabstopManager)return editor.tabstopManager;editor.tabstopManager=this;this.$onChange=this.onChange.bind(this);this.$onChangeSelection=lang.delayedCall(this.onChangeSelection.bind(this)).schedule;this.$onChangeSession=this.onChangeSession.bind(this);this.$onAfterExec=this.onAfterExec.bind(this);this.attach(editor)};(function(){this.attach=function(editor){this.index=0;this.ranges=[];this.tabstops=[];this.$openTabstops=null;this.selectedTabstop=null;this.editor=editor;this.editor.on("change",this.$onChange);this.editor.on("changeSelection",this.$onChangeSelection);this.editor.on("changeSession",this.$onChangeSession);this.editor.commands.on("afterExec",this.$onAfterExec);this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)};this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this);this.ranges=null;this.tabstops=null;this.selectedTabstop=null;this.editor.removeListener("change",this.$onChange);this.editor.removeListener("changeSelection",this.$onChangeSelection);this.editor.removeListener("changeSession",this.$onChangeSession);this.editor.commands.removeListener("afterExec",this.$onAfterExec);this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);this.editor.tabstopManager=null;this.editor=null};this.onChange=function(delta){var changeRange=delta;var isRemove=delta.action[0]=="r";var start=delta.start;var end=delta.end;var startRow=start.row;var endRow=end.row;var lineDif=endRow-startRow;var colDiff=end.column-start.column;if(isRemove){lineDif=-lineDif;colDiff=-colDiff}if(!this.$inChange&&isRemove){var ts=this.selectedTabstop;var changedOutside=ts&&!ts.some((function(r){return comparePoints(r.start,start)<=0&&comparePoints(r.end,end)>=0}));if(changedOutside)return this.detach()}var ranges=this.ranges;for(var i=0;i<ranges.length;i++){var r=ranges[i];if(r.end.row<start.row)continue;if(isRemove&&comparePoints(start,r.start)<0&&comparePoints(end,r.end)>0){this.removeRange(r);i--;continue}if(r.start.row==startRow&&r.start.column>start.column)r.start.column+=colDiff;if(r.end.row==startRow&&r.end.column>=start.column)r.end.column+=colDiff;if(r.start.row>=startRow)r.start.row+=lineDif;if(r.end.row>=startRow)r.end.row+=lineDif;if(comparePoints(r.start,r.end)>0)this.removeRange(r)}if(!ranges.length)this.detach()};this.updateLinkedFields=function(){var ts=this.selectedTabstop;if(!ts||!ts.hasLinkedRanges)return;this.$inChange=true;var session=this.editor.session;var text=session.getTextRange(ts.firstNonLinked);for(var i=ts.length;i--;){var range=ts[i];if(!range.linked)continue;var fmt=exports.snippetManager.tmStrFormat(text,range.original);session.replace(range,fmt)}this.$inChange=false};this.onAfterExec=function(e){if(e.command&&!e.command.readOnly)this.updateLinkedFields()};this.onChangeSelection=function(){if(!this.editor)return;var lead=this.editor.selection.lead;var anchor=this.editor.selection.anchor;var isEmpty=this.editor.selection.isEmpty();for(var i=this.ranges.length;i--;){if(this.ranges[i].linked)continue;var containsLead=this.ranges[i].contains(lead.row,lead.column);var containsAnchor=isEmpty||this.ranges[i].contains(anchor.row,anchor.column);if(containsLead&&containsAnchor)return}this.detach()};this.onChangeSession=function(){this.detach()};this.tabNext=function(dir){var max=this.tabstops.length;var index=this.index+(dir||1);index=Math.min(Math.max(index,1),max);if(index==max)index=0;this.selectTabstop(index);if(index===0)this.detach()};this.selectTabstop=function(index){this.$openTabstops=null;var ts=this.tabstops[this.index];if(ts)this.addTabstopMarkers(ts);this.index=index;ts=this.tabstops[this.index];if(!ts||!ts.length)return;this.selectedTabstop=ts;if(!this.editor.inVirtualSelectionMode){var sel=this.editor.multiSelect;sel.toSingleRange(ts.firstNonLinked.clone());for(var i=ts.length;i--;){if(ts.hasLinkedRanges&&ts[i].linked)continue;sel.addRange(ts[i].clone(),true)}if(sel.ranges[0])sel.addRange(sel.ranges[0].clone())}else{this.editor.selection.setRange(ts.firstNonLinked)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)};this.addTabstops=function(tabstops,start,end){if(!this.$openTabstops)this.$openTabstops=[];if(!tabstops[0]){var p=Range.fromPoints(end,end);moveRelative(p.start,start);moveRelative(p.end,start);tabstops[0]=[p];tabstops[0].index=0}var i=this.index;var arg=[i+1,0];var ranges=this.ranges;tabstops.forEach((function(ts,index){var dest=this.$openTabstops[index]||ts;for(var i=ts.length;i--;){var p=ts[i];var range=Range.fromPoints(p.start,p.end||p.start);movePoint(range.start,start);movePoint(range.end,start);range.original=p;range.tabstop=dest;ranges.push(range);if(dest!=ts)dest.unshift(range);else dest[i]=range;if(p.fmtString){range.linked=true;dest.hasLinkedRanges=true}else if(!dest.firstNonLinked)dest.firstNonLinked=range}if(!dest.firstNonLinked)dest.hasLinkedRanges=false;if(dest===ts){arg.push(dest);this.$openTabstops[index]=dest}this.addTabstopMarkers(dest)}),this);if(arg.length>2){if(this.tabstops.length)arg.push(arg.splice(2,1)[0]);this.tabstops.splice.apply(this.tabstops,arg)}};this.addTabstopMarkers=function(ts){var session=this.editor.session;ts.forEach((function(range){if(!range.markerId)range.markerId=session.addMarker(range,"ace_snippet-marker","text")}))};this.removeTabstopMarkers=function(ts){var session=this.editor.session;ts.forEach((function(range){session.removeMarker(range.markerId);range.markerId=null}))};this.removeRange=function(range){var i=range.tabstop.indexOf(range);range.tabstop.splice(i,1);i=this.ranges.indexOf(range);this.ranges.splice(i,1);this.editor.session.removeMarker(range.markerId);if(!range.tabstop.length){i=this.tabstops.indexOf(range.tabstop);if(i!=-1)this.tabstops.splice(i,1);if(!this.tabstops.length)this.detach()}};this.keyboardHandler=new HashHandler;this.keyboardHandler.bindKeys({Tab:function(ed){if(exports.snippetManager&&exports.snippetManager.expandWithTab(ed)){return}ed.tabstopManager.tabNext(1)},"Shift-Tab":function(ed){ed.tabstopManager.tabNext(-1)},Esc:function(ed){ed.tabstopManager.detach()},Return:function(ed){return false}})}).call(TabstopManager.prototype);var changeTracker={};changeTracker.onChange=Anchor.prototype.onChange;changeTracker.setPosition=function(row,column){this.pos.row=row;this.pos.column=column};changeTracker.update=function(pos,delta,$insertRight){this.$insertRight=$insertRight;this.pos=pos;this.onChange(delta)};var movePoint=function(point,diff){if(point.row==0)point.column+=diff.column;point.row+=diff.row};var moveRelative=function(point,start){if(point.row==start.row)point.column-=start.column;point.row-=start.row};acequire("./lib/dom").importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}");exports.snippetManager=new SnippetManager;var Editor=acequire("./editor").Editor;(function(){this.insertSnippet=function(content,options){return exports.snippetManager.insertSnippet(this,content,options)};this.expandSnippet=function(options){return exports.snippetManager.expandWithTab(this,options)}}).call(Editor.prototype)}));ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],(function(acequire,exports,module){"use strict";var Renderer=acequire("../virtual_renderer").VirtualRenderer;var Editor=acequire("../editor").Editor;var Range=acequire("../range").Range;var event=acequire("../lib/event");var lang=acequire("../lib/lang");var dom=acequire("../lib/dom");var $singleLineEditor=function(el){var renderer=new Renderer(el);renderer.$maxLines=4;var editor=new Editor(renderer);editor.setHighlightActiveLine(false);editor.setShowPrintMargin(false);editor.renderer.setShowGutter(false);editor.renderer.setHighlightGutterLine(false);editor.$mouseHandler.$focusWaitTimout=0;editor.$highlightTagPending=true;return editor};var AcePopup=function(parentNode){var el=dom.createElement("div");var popup=new $singleLineEditor(el);if(parentNode)parentNode.appendChild(el);el.style.display="none";popup.renderer.content.style.cursor="default";popup.renderer.setStyle("ace_autocomplete");popup.setOption("displayIndentGuides",false);popup.setOption("dragDelay",150);var noop=function(){};popup.focus=noop;popup.$isFocused=true;popup.renderer.$cursorLayer.restartTimer=noop;popup.renderer.$cursorLayer.element.style.opacity=0;popup.renderer.$maxLines=8;popup.renderer.$keepTextAreaAtCursor=false;popup.setHighlightActiveLine(false);popup.session.highlight("");popup.session.$searchHighlight.clazz="ace_highlight-marker";popup.on("mousedown",(function(e){var pos=e.getDocumentPosition();popup.selection.moveToPosition(pos);selectionMarker.start.row=selectionMarker.end.row=pos.row;e.stop()}));var lastMouseEvent;var hoverMarker=new Range(-1,0,-1,Infinity);var selectionMarker=new Range(-1,0,-1,Infinity);selectionMarker.id=popup.session.addMarker(selectionMarker,"ace_active-line","fullLine");popup.setSelectOnHover=function(val){if(!val){hoverMarker.id=popup.session.addMarker(hoverMarker,"ace_line-hover","fullLine")}else if(hoverMarker.id){popup.session.removeMarker(hoverMarker.id);hoverMarker.id=null}};popup.setSelectOnHover(false);popup.on("mousemove",(function(e){if(!lastMouseEvent){lastMouseEvent=e;return}if(lastMouseEvent.x==e.x&&lastMouseEvent.y==e.y){return}lastMouseEvent=e;lastMouseEvent.scrollTop=popup.renderer.scrollTop;var row=lastMouseEvent.getDocumentPosition().row;if(hoverMarker.start.row!=row){if(!hoverMarker.id)popup.setRow(row);setHoverMarker(row)}}));popup.renderer.on("beforeRender",(function(){if(lastMouseEvent&&hoverMarker.start.row!=-1){lastMouseEvent.$pos=null;var row=lastMouseEvent.getDocumentPosition().row;if(!hoverMarker.id)popup.setRow(row);setHoverMarker(row,true)}}));popup.renderer.on("afterRender",(function(){var row=popup.getRow();var t=popup.renderer.$textLayer;var selected=t.element.childNodes[row-t.config.firstRow];if(selected==t.selectedNode)return;if(t.selectedNode)dom.removeCssClass(t.selectedNode,"ace_selected");t.selectedNode=selected;if(selected)dom.addCssClass(selected,"ace_selected")}));var hideHoverMarker=function(){setHoverMarker(-1)};var setHoverMarker=function(row,suppressRedraw){if(row!==hoverMarker.start.row){hoverMarker.start.row=hoverMarker.end.row=row;if(!suppressRedraw)popup.session._emit("changeBackMarker");popup._emit("changeHoverMarker")}};popup.getHoveredRow=function(){return hoverMarker.start.row};event.addListener(popup.container,"mouseout",hideHoverMarker);popup.on("hide",hideHoverMarker);popup.on("changeSelection",hideHoverMarker);popup.session.doc.getLength=function(){return popup.data.length};popup.session.doc.getLine=function(i){var data=popup.data[i];if(typeof data=="string")return data;return data&&data.value||""};var bgTokenizer=popup.session.bgTokenizer;bgTokenizer.$tokenizeRow=function(row){var data=popup.data[row];var tokens=[];if(!data)return tokens;if(typeof data=="string")data={value:data};if(!data.caption)data.caption=data.value||data.name;var last=-1;var flag,c;for(var i=0;i<data.caption.length;i++){c=data.caption[i];flag=data.matchMask&1<<i?1:0;if(last!==flag){tokens.push({type:data.className||""+(flag?"completion-highlight":""),value:c});last=flag}else{tokens[tokens.length-1].value+=c}}if(data.meta){var maxW=popup.renderer.$size.scrollerWidth/popup.renderer.layerConfig.characterWidth;var metaData=data.meta;if(metaData.length+data.caption.length>maxW-2){metaData=metaData.substr(0,maxW-data.caption.length-3)+""}tokens.push({type:"rightAlignedText",value:metaData})}return tokens};bgTokenizer.$updateOnChange=noop;bgTokenizer.start=noop;popup.session.$computeWidth=function(){return this.screenWidth=0};popup.$blockScrolling=Infinity;popup.isOpen=false;popup.isTopdown=false;popup.autoSelect=true;popup.data=[];popup.setData=function(list){popup.setValue(lang.stringRepeat("\n",list.length),-1);popup.data=list||[];popup.setRow(0)};popup.getData=function(row){return popup.data[row]};popup.getRow=function(){return selectionMarker.start.row};popup.setRow=function(line){line=Math.max(this.autoSelect?0:-1,Math.min(this.data.length,line));if(selectionMarker.start.row!=line){popup.selection.clearSelection();selectionMarker.start.row=selectionMarker.end.row=line||0;popup.session._emit("changeBackMarker");popup.moveCursorTo(line||0,0);if(popup.isOpen)popup._signal("select")}};popup.on("changeSelection",(function(){if(popup.isOpen)popup.setRow(popup.selection.lead.row);popup.renderer.scrollCursorIntoView()}));popup.hide=function(){this.container.style.display="none";this._signal("hide");popup.isOpen=false};popup.show=function(pos,lineHeight,topdownOnly){var el=this.container;var screenHeight=window.innerHeight;var screenWidth=window.innerWidth;var renderer=this.renderer;var maxH=renderer.$maxLines*lineHeight*1.4;var top=pos.top+this.$borderSize;var allowTopdown=top>screenHeight/2&&!topdownOnly;if(allowTopdown&&top+lineHeight+maxH>screenHeight){renderer.$maxPixelHeight=top-2*this.$borderSize;el.style.top="";el.style.bottom=screenHeight-top+"px";popup.isTopdown=false}else{top+=lineHeight;renderer.$maxPixelHeight=screenHeight-top-.2*lineHeight;el.style.top=top+"px";el.style.bottom="";popup.isTopdown=true}el.style.display="";this.renderer.$textLayer.checkForSizeChanges();var left=pos.left;if(left+el.offsetWidth>screenWidth)left=screenWidth-el.offsetWidth;el.style.left=left+"px";this._signal("show");lastMouseEvent=null;popup.isOpen=true};popup.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize};popup.$imageSize=0;popup.$borderSize=1;return popup};dom.importCssString(".ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);}.ace_editor.ace_autocomplete .ace_line-hover {    position: absolute;    z-index: 2;}.ace_editor.ace_autocomplete .ace_scroller {   background: none;   border: none;   box-shadow: none;}.ace_rightAlignedText {    color: gray;    display: inline-block;    position: absolute;    right: 4px;    text-align: right;    z-index: -1;}.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #000;    text-shadow: 0 0 0.01em;}.ace_editor.ace_autocomplete {    width: 280px;    z-index: 200000;    background: #fbfbfb;    color: #444;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;}");exports.AcePopup=AcePopup}));ace.define("ace/autocomplete/util",["require","exports","module"],(function(acequire,exports,module){"use strict";exports.parForEach=function(array,fn,callback){var completed=0;var arLength=array.length;if(arLength===0)callback();for(var i=0;i<arLength;i++){fn(array[i],(function(result,err){completed++;if(completed===arLength)callback(result,err)}))}};var ID_REGEX=/[a-zA-Z_0-9\$\-\u00A2-\uFFFF]/;exports.retrievePrecedingIdentifier=function(text,pos,regex){regex=regex||ID_REGEX;var buf=[];for(var i=pos-1;i>=0;i--){if(regex.test(text[i]))buf.push(text[i]);else break}return buf.reverse().join("")};exports.retrieveFollowingIdentifier=function(text,pos,regex){regex=regex||ID_REGEX;var buf=[];for(var i=pos;i<text.length;i++){if(regex.test(text[i]))buf.push(text[i]);else break}return buf};exports.getCompletionPrefix=function(editor){var pos=editor.getCursorPosition();var line=editor.session.getLine(pos.row);var prefix;editor.completers.forEach(function(completer){if(completer.identifierRegexps){completer.identifierRegexps.forEach(function(identifierRegex){if(!prefix&&identifierRegex)prefix=this.retrievePrecedingIdentifier(line,pos.column,identifierRegex)}.bind(this))}}.bind(this));return prefix||this.retrievePrecedingIdentifier(line,pos.column)}}));ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/snippets"],(function(acequire,exports,module){"use strict";var HashHandler=acequire("./keyboard/hash_handler").HashHandler;var AcePopup=acequire("./autocomplete/popup").AcePopup;var util=acequire("./autocomplete/util");var event=acequire("./lib/event");var lang=acequire("./lib/lang");var dom=acequire("./lib/dom");var snippetManager=acequire("./snippets").snippetManager;var Autocomplete=function(){this.autoInsert=false;this.autoSelect=true;this.exactMatch=false;this.gatherCompletionsId=0;this.keyboardHandler=new HashHandler;this.keyboardHandler.bindKeys(this.commands);this.blurListener=this.blurListener.bind(this);this.changeListener=this.changeListener.bind(this);this.mousedownListener=this.mousedownListener.bind(this);this.mousewheelListener=this.mousewheelListener.bind(this);this.changeTimer=lang.delayedCall(function(){this.updateCompletions(true)}.bind(this));this.tooltipTimer=lang.delayedCall(this.updateDocTooltip.bind(this),50)};(function(){this.$init=function(){this.popup=new AcePopup(document.body||document.documentElement);this.popup.on("click",function(e){this.insertMatch();e.stop()}.bind(this));this.popup.focus=this.editor.focus.bind(this.editor);this.popup.on("show",this.tooltipTimer.bind(null,null));this.popup.on("select",this.tooltipTimer.bind(null,null));this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null));return this.popup};this.getPopup=function(){return this.popup||this.$init()};this.openPopup=function(editor,prefix,keepPopupPosition){if(!this.popup)this.$init();this.popup.autoSelect=this.autoSelect;this.popup.setData(this.completions.filtered);editor.keyBinding.addKeyboardHandler(this.keyboardHandler);var renderer=editor.renderer;this.popup.setRow(this.autoSelect?0:-1);if(!keepPopupPosition){this.popup.setTheme(editor.getTheme());this.popup.setFontSize(editor.getFontSize());var lineHeight=renderer.layerConfig.lineHeight;var pos=renderer.$cursorLayer.getPixelPosition(this.base,true);pos.left-=this.popup.getTextLeftOffset();var rect=editor.container.getBoundingClientRect();pos.top+=rect.top-renderer.layerConfig.offset;pos.left+=rect.left-editor.renderer.scrollLeft;pos.left+=renderer.gutterWidth;this.popup.show(pos,lineHeight)}else if(keepPopupPosition&&!prefix){this.detach()}};this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);this.editor.off("changeSelection",this.changeListener);this.editor.off("blur",this.blurListener);this.editor.off("mousedown",this.mousedownListener);this.editor.off("mousewheel",this.mousewheelListener);this.changeTimer.cancel();this.hideDocTooltip();this.gatherCompletionsId+=1;if(this.popup&&this.popup.isOpen)this.popup.hide();if(this.base)this.base.detach();this.activated=false;this.completions=this.base=null};this.changeListener=function(e){var cursor=this.editor.selection.lead;if(cursor.row!=this.base.row||cursor.column<this.base.column){this.detach()}if(this.activated)this.changeTimer.schedule();else this.detach()};this.blurListener=function(e){var el=document.activeElement;var text=this.editor.textInput.getElement();var fromTooltip=e.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(e.relatedTarget);var container=this.popup&&this.popup.container;if(el!=text&&el.parentNode!=container&&!fromTooltip&&el!=this.tooltipNode&&e.relatedTarget!=text){this.detach()}};this.mousedownListener=function(e){this.detach()};this.mousewheelListener=function(e){this.detach()};this.goTo=function(where){var row=this.popup.getRow();var max=this.popup.session.getLength()-1;switch(where){case"up":row=row<=0?max:row-1;break;case"down":row=row>=max?-1:row+1;break;case"start":row=0;break;case"end":row=max;break}this.popup.setRow(row)};this.insertMatch=function(data,options){if(!data)data=this.popup.getData(this.popup.getRow());if(!data)return false;if(data.completer&&data.completer.insertMatch){data.completer.insertMatch(this.editor,data)}else{if(this.completions.filterText){var ranges=this.editor.selection.getAllRanges();for(var i=0,range;range=ranges[i];i++){range.start.column-=this.completions.filterText.length;this.editor.session.remove(range)}}if(data.snippet)snippetManager.insertSnippet(this.editor,data.snippet);else this.editor.execCommand("insertstring",data.value||data)}this.detach()};this.commands={Up:function(editor){editor.completer.goTo("up")},Down:function(editor){editor.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(editor){editor.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(editor){editor.completer.goTo("end")},Esc:function(editor){editor.completer.detach()},Return:function(editor){return editor.completer.insertMatch()},"Shift-Return":function(editor){editor.completer.insertMatch(null,{deleteSuffix:true})},Tab:function(editor){var result=editor.completer.insertMatch();if(!result&&!editor.tabstopManager)editor.completer.goTo("down");else return result},PageUp:function(editor){editor.completer.popup.gotoPageUp()},PageDown:function(editor){editor.completer.popup.gotoPageDown()}};this.gatherCompletions=function(editor,callback){var session=editor.getSession();var pos=editor.getCursorPosition();var prefix=util.getCompletionPrefix(editor);this.base=session.doc.createAnchor(pos.row,pos.column-prefix.length);this.base.$insertRight=true;var matches=[];var total=editor.completers.length;editor.completers.forEach((function(completer,i){completer.getCompletions(editor,session,pos,prefix,(function(err,results){if(!err&&results)matches=matches.concat(results);callback(null,{prefix:util.getCompletionPrefix(editor),matches:matches,finished:--total===0})}))}));return true};this.showPopup=function(editor){if(this.editor)this.detach();this.activated=true;this.editor=editor;if(editor.completer!=this){if(editor.completer)editor.completer.detach();editor.completer=this}editor.on("changeSelection",this.changeListener);editor.on("blur",this.blurListener);editor.on("mousedown",this.mousedownListener);editor.on("mousewheel",this.mousewheelListener);this.updateCompletions()};this.updateCompletions=function(keepPopupPosition){if(keepPopupPosition&&this.base&&this.completions){var pos=this.editor.getCursorPosition();var prefix=this.editor.session.getTextRange({start:this.base,end:pos});if(prefix==this.completions.filterText)return;this.completions.setFilter(prefix);if(!this.completions.filtered.length)return this.detach();if(this.completions.filtered.length==1&&this.completions.filtered[0].value==prefix&&!this.completions.filtered[0].snippet)return this.detach();this.openPopup(this.editor,prefix,keepPopupPosition);return}var _id=this.gatherCompletionsId;this.gatherCompletions(this.editor,function(err,results){var detachIfFinished=function(){if(!results.finished)return;return this.detach()}.bind(this);var prefix=results.prefix;var matches=results&&results.matches;if(!matches||!matches.length)return detachIfFinished();if(prefix.indexOf(results.prefix)!==0||_id!=this.gatherCompletionsId)return;this.completions=new FilteredList(matches);if(this.exactMatch)this.completions.exactMatch=true;this.completions.setFilter(prefix);var filtered=this.completions.filtered;if(!filtered.length)return detachIfFinished();if(filtered.length==1&&filtered[0].value==prefix&&!filtered[0].snippet)return detachIfFinished();if(this.autoInsert&&filtered.length==1&&results.finished)return this.insertMatch(filtered[0]);this.openPopup(this.editor,prefix,keepPopupPosition)}.bind(this))};this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()};this.updateDocTooltip=function(){var popup=this.popup;var all=popup.data;var selected=all&&(all[popup.getHoveredRow()]||all[popup.getRow()]);var doc=null;if(!selected||!this.editor||!this.popup.isOpen)return this.hideDocTooltip();this.editor.completers.some((function(completer){if(completer.getDocTooltip)doc=completer.getDocTooltip(selected);return doc}));if(!doc)doc=selected;if(typeof doc=="string")doc={docText:doc};if(!doc||!(doc.docHTML||doc.docText))return this.hideDocTooltip();this.showDocTooltip(doc)};this.showDocTooltip=function(item){if(!this.tooltipNode){this.tooltipNode=dom.createElement("div");this.tooltipNode.className="ace_tooltip ace_doc-tooltip";this.tooltipNode.style.margin=0;this.tooltipNode.style.pointerEvents="auto";this.tooltipNode.tabIndex=-1;this.tooltipNode.onblur=this.blurListener.bind(this);this.tooltipNode.onclick=this.onTooltipClick.bind(this)}var tooltipNode=this.tooltipNode;if(item.docHTML){tooltipNode.innerHTML=item.docHTML}else if(item.docText){tooltipNode.textContent=item.docText}if(!tooltipNode.parentNode)document.body.appendChild(tooltipNode);var popup=this.popup;var rect=popup.container.getBoundingClientRect();tooltipNode.style.top=popup.container.style.top;tooltipNode.style.bottom=popup.container.style.bottom;if(window.innerWidth-rect.right<320){tooltipNode.style.right=window.innerWidth-rect.left+"px";tooltipNode.style.left=""}else{tooltipNode.style.left=rect.right+1+"px";tooltipNode.style.right=""}tooltipNode.style.display="block"};this.hideDocTooltip=function(){this.tooltipTimer.cancel();if(!this.tooltipNode)return;var el=this.tooltipNode;if(!this.editor.isFocused()&&document.activeElement==el)this.editor.focus();this.tooltipNode=null;if(el.parentNode)el.parentNode.removeChild(el)};this.onTooltipClick=function(e){var a=e.target;while(a&&a!=this.tooltipNode){if(a.nodeName=="A"&&a.href){a.rel="noreferrer";a.target="_blank";break}a=a.parentNode}}}).call(Autocomplete.prototype);Autocomplete.startCommand={name:"startAutocomplete",exec:function(editor){if(!editor.completer)editor.completer=new Autocomplete;editor.completer.autoInsert=false;editor.completer.autoSelect=true;editor.completer.showPopup(editor);editor.completer.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var FilteredList=function(array,filterText){this.all=array;this.filtered=array;this.filterText=filterText||"";this.exactMatch=false};(function(){this.setFilter=function(str){if(str.length>this.filterText&&str.lastIndexOf(this.filterText,0)===0)var matches=this.filtered;else var matches=this.all;this.filterText=str;matches=this.filterCompletions(matches,this.filterText);matches=matches.sort((function(a,b){return b.exactMatch-a.exactMatch||b.score-a.score}));var prev=null;matches=matches.filter((function(item){var caption=item.snippet||item.caption||item.value;if(caption===prev)return false;prev=caption;return true}));this.filtered=matches};this.filterCompletions=function(items,needle){var results=[];var upper=needle.toUpperCase();var lower=needle.toLowerCase();loop:for(var i=0,item;item=items[i];i++){var caption=item.value||item.caption||item.snippet;if(!caption)continue;var lastIndex=-1;var matchMask=0;var penalty=0;var index,distance;if(this.exactMatch){if(needle!==caption.substr(0,needle.length))continue loop}else{for(var j=0;j<needle.length;j++){var i1=caption.indexOf(lower[j],lastIndex+1);var i2=caption.indexOf(upper[j],lastIndex+1);index=i1>=0?i2<0||i1<i2?i1:i2:i2;if(index<0)continue loop;distance=index-lastIndex-1;if(distance>0){if(lastIndex===-1)penalty+=10;penalty+=distance}matchMask=matchMask|1<<index;lastIndex=index}}item.matchMask=matchMask;item.exactMatch=penalty?0:1;item.score=(item.score||0)-penalty;results.push(item)}return results}}).call(FilteredList.prototype);exports.Autocomplete=Autocomplete;exports.FilteredList=FilteredList}));ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],(function(acequire,exports,module){var Range=acequire("../range").Range;var splitRegex=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function getWordIndex(doc,pos){var textBefore=doc.getTextRange(Range.fromPoints({row:0,column:0},pos));return textBefore.split(splitRegex).length-1}function wordDistance(doc,pos){var prefixPos=getWordIndex(doc,pos);var words=doc.getValue().split(splitRegex);var wordScores=Object.create(null);var currentWord=words[prefixPos];words.forEach((function(word,idx){if(!word||word===currentWord)return;var distance=Math.abs(prefixPos-idx);var score=words.length-distance;if(wordScores[word]){wordScores[word]=Math.max(score,wordScores[word])}else{wordScores[word]=score}}));return wordScores}exports.getCompletions=function(editor,session,pos,prefix,callback){var wordScore=wordDistance(session,pos,prefix);var wordList=Object.keys(wordScore);callback(null,wordList.map((function(word){return{caption:word,value:word,score:wordScore[word],meta:"local"}})))}}));ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],(function(acequire,exports,module){"use strict";var snippetManager=acequire("../snippets").snippetManager;var Autocomplete=acequire("../autocomplete").Autocomplete;var config=acequire("../config");var lang=acequire("../lib/lang");var util=acequire("../autocomplete/util");var textCompleter=acequire("../autocomplete/text_completer");var keyWordCompleter={getCompletions:function(editor,session,pos,prefix,callback){if(session.$mode.completer){return session.$mode.completer.getCompletions(editor,session,pos,prefix,callback)}var state=editor.session.getState(pos.row);var completions=session.$mode.getCompletions(state,session,pos,prefix);callback(null,completions)}};var snippetCompleter={getCompletions:function(editor,session,pos,prefix,callback){var snippetMap=snippetManager.snippetMap;var completions=[];snippetManager.getActiveScopes(editor).forEach((function(scope){var snippets=snippetMap[scope]||[];for(var i=snippets.length;i--;){var s=snippets[i];var caption=s.name||s.tabTrigger;if(!caption)continue;completions.push({caption:caption,snippet:s.content,meta:s.tabTrigger&&!s.name?s.tabTrigger+" ":"snippet",type:"snippet"})}}),this);callback(null,completions)},getDocTooltip:function(item){if(item.type=="snippet"&&!item.docHTML){item.docHTML=["<b>",lang.escapeHTML(item.caption),"</b>","<hr></hr>",lang.escapeHTML(item.snippet)].join("")}}};var completers=[snippetCompleter,textCompleter,keyWordCompleter];exports.setCompleters=function(val){completers.length=0;if(val)completers.push.apply(completers,val)};exports.addCompleter=function(completer){completers.push(completer)};exports.textCompleter=textCompleter;exports.keyWordCompleter=keyWordCompleter;exports.snippetCompleter=snippetCompleter;var expandSnippet={name:"expandSnippet",exec:function(editor){return snippetManager.expandWithTab(editor)},bindKey:"Tab"};var onChangeMode=function(e,editor){loadSnippetsForMode(editor.session.$mode)};var loadSnippetsForMode=function(mode){var id=mode.$id;if(!snippetManager.files)snippetManager.files={};loadSnippetFile(id);if(mode.modes)mode.modes.forEach(loadSnippetsForMode)};var loadSnippetFile=function(id){if(!id||snippetManager.files[id])return;var snippetFilePath=id.replace("mode","snippets");snippetManager.files[id]={};config.loadModule(snippetFilePath,(function(m){if(m){snippetManager.files[id]=m;if(!m.snippets&&m.snippetText)m.snippets=snippetManager.parseSnippetFile(m.snippetText);snippetManager.register(m.snippets||[],m.scope);if(m.includeScopes){snippetManager.snippetMap[m.scope].includeScopes=m.includeScopes;m.includeScopes.forEach((function(x){loadSnippetFile("ace/mode/"+x)}))}}}))};var doLiveAutocomplete=function(e){var editor=e.editor;var hasCompleter=editor.completer&&editor.completer.activated;if(e.command.name==="backspace"){if(hasCompleter&&!util.getCompletionPrefix(editor))editor.completer.detach()}else if(e.command.name==="insertstring"){var prefix=util.getCompletionPrefix(editor);if(prefix&&!hasCompleter){if(!editor.completer){editor.completer=new Autocomplete}editor.completer.autoInsert=false;editor.completer.showPopup(editor)}}};var Editor=acequire("../editor").Editor;acequire("../config").defineOptions(Editor.prototype,"editor",{enableBasicAutocompletion:{set:function(val){if(val){if(!this.completers)this.completers=Array.isArray(val)?val:completers;this.commands.addCommand(Autocomplete.startCommand)}else{this.commands.removeCommand(Autocomplete.startCommand)}},value:false},enableLiveAutocompletion:{set:function(val){if(val){if(!this.completers)this.completers=Array.isArray(val)?val:completers;this.commands.on("afterExec",doLiveAutocomplete)}else{this.commands.removeListener("afterExec",doLiveAutocomplete)}},value:false},enableSnippets:{set:function(val){if(val){this.commands.addCommand(expandSnippet);this.on("changeMode",onChangeMode);onChangeMode(null,this)}else{this.commands.removeCommand(expandSnippet);this.off("changeMode",onChangeMode)}},value:false}})}));(function(){ace.acequire(["ace/ext/language_tools"],(function(){}))})()},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;function createThunkMiddleware(extraArgument){return function(_ref){var dispatch=_ref.dispatch,getState=_ref.getState;return function(next){return function(action){if(typeof action==="function"){return action(dispatch,getState,extraArgument)}return next(action)}}}}var thunk=createThunkMiddleware();thunk.withExtraArgument=createThunkMiddleware;exports["default"]=thunk},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"mountManagementSection",(function(){return mountManagementSection}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);var constants=__webpack_require__(36);var constants_plugin=__webpack_require__(5);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class breadcrumbs_BreadcrumbService{constructor(){_defineProperty(this,"breadcrumbs",{home:[]});_defineProperty(this,"setBreadcrumbsHandler",void 0)}setup(setBreadcrumbsHandler){this.setBreadcrumbsHandler=setBreadcrumbsHandler;this.breadcrumbs.home=[{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.breadcrumb.homeLabel",{defaultMessage:"Index Management"}),href:`/`}];this.breadcrumbs.templates=[...this.breadcrumbs.home,{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.breadcrumb.templatesLabel",{defaultMessage:"Templates"}),href:`/templates`}];this.breadcrumbs.templateCreate=[...this.breadcrumbs.templates,{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.breadcrumb.createTemplateLabel",{defaultMessage:"Create template"})}];this.breadcrumbs.templateEdit=[...this.breadcrumbs.templates,{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.breadcrumb.editTemplateLabel",{defaultMessage:"Edit template"})}];this.breadcrumbs.templateClone=[...this.breadcrumbs.templates,{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.breadcrumb.cloneTemplateLabel",{defaultMessage:"Clone template"})}]}setBreadcrumbs(type){if(!this.setBreadcrumbsHandler){throw new Error(`BreadcrumbService#setup() must be called first!`)}const newBreadcrumbs=this.breadcrumbs[type]?[...this.breadcrumbs[type]]:[...this.breadcrumbs.home];const lastBreadcrumb=newBreadcrumbs.pop();newBreadcrumbs.push({...lastBreadcrumb,href:undefined});this.setBreadcrumbsHandler(newBreadcrumbs)}}const breadcrumbService=new breadcrumbs_BreadcrumbService;const INDEX_DEFAULT="index_default";const STANDARD="standard";var external_kbnSharedDeps_React_=__webpack_require__(19);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(20);const FIELD_OPTIONS_TEXTS={"indexOptions.docs":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.indexOptions.docNumberTitle",{defaultMessage:"Doc number"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.indexOptions.docNumberDescription",{defaultMessage:"Index the doc number only. Used to verify the existence of a term in a field."})},"indexOptions.freqs":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.indexOptions.termFrequencyTitle",{defaultMessage:"Term frequencies"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.indexOptions.termFrequencyDescription",{defaultMessage:"Index the doc number and term frequencies. Repeated terms score higher than single terms."})},"indexOptions.positions":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.indexOptions.positionsTitle",{defaultMessage:"Positions"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.indexOptions.positionsDescription",{defaultMessage:"Index the doc number, term frequencies, positions, and start and end character offsets. Offsets map the term back to the original string."})},"indexOptions.offsets":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.indexOptions.offsetsTitle",{defaultMessage:"Offsets"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.indexOptions.offsetsDescription",{defaultMessage:"Doc number, term frequencies, positions, and start and end character offsets (which map the term back to the original string) are indexed."})},"analyzer.indexDefault":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.indexDefaultTitle",{defaultMessage:"Index default"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.indexDefaultDescription",{defaultMessage:"Use the analyzer defined for the index."})},"analyzer.standard":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.standardTitle",{defaultMessage:"Standard"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.standardDescription",{defaultMessage:"The standard analyzer divides text into terms on word boundaries, as defined by the Unicode Text Segmentation algorithm."})},"analyzer.simple":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.simpleTitle",{defaultMessage:"Simple"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.simpleDescription",{defaultMessage:"The simple analyzer divides text into terms whenever it encounters a character which is not a letter. "})},"analyzer.whitespace":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.whitespaceTitle",{defaultMessage:"Whitespace"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.whitespaceDescription",{defaultMessage:"The whitespace analyzer divides text into terms whenever it encounters any whitespace character."})},"analyzer.stop":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.stopTitle",{defaultMessage:"Stop"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.stopDescription",{defaultMessage:"The stop analyzer is like the simple analyzer, but also supports removal of stop words."})},"analyzer.keyword":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.keywordTitle",{defaultMessage:"Keyword"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.keywordDescription",{defaultMessage:"The keyword analyzer is a noop analyzer that accepts whatever text it is given and outputs the exact same text as a single term."})},"analyzer.pattern":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.patternTitle",{defaultMessage:"Pattern"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.patternDescription",{defaultMessage:"The pattern analyzer uses a regular expression to split the text into terms. It supports lower-casing and stop words."})},"analyzer.fingerprint":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.fingerprintTitle",{defaultMessage:"Fingerprint"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.fingerprintDescription",{defaultMessage:"The fingerprint analyzer is a specialist analyzer which creates a fingerprint which can be used for duplicate detection."})},"analyzer.language":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.languageTitle",{defaultMessage:"Language"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.languageDescription",{defaultMessage:"Elasticsearch provides many language-specific analyzers like english or french."})},"similarity.bm25":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.similarity.bm25Title",{defaultMessage:"Okapi BM25"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.similarity.bm25Description",{defaultMessage:"The default algorithm used in Elasticsearch and Lucene."})},"similarity.boolean":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.similarity.booleanTitle",{defaultMessage:"Boolean"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.similarity.booleanDescription",{defaultMessage:"A boolean similarity to use when full text-ranking is not needed. The score is based on whether the query terms match."})},"termVector.no":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.termVector.noTitle",{defaultMessage:"No"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.termVector.noDescription",{defaultMessage:"No term vectors are stored."})},"termVector.yes":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.termVector.yesTitle",{defaultMessage:"Yes"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.termVector.yesDescription",{defaultMessage:"Just the terms in the field are stored."})},"termVector.withPositions":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.termVector.withPositionsTitle",{defaultMessage:"With positions"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.termVector.withPositionsDescription",{defaultMessage:"Terms and positions are stored."})},"termVector.withOffsets":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.termVector.withOffsetsTitle",{defaultMessage:"With offsets"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.termVector.withOffsetsDescription",{defaultMessage:"Terms and character offsets are stored."})},"termVector.withPositionsOffsets":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.termVector.withPositionsOffsetsTitle",{defaultMessage:"With positions and offsets"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.termVector.withPositionsOffsetsDescription",{defaultMessage:"Terms, positions, and character offsets are stored."})},"termVector.withPositionsPayloads":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.termVector.withPositionsPayloadsTitle",{defaultMessage:"With positions and payloads"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.termVector.withPositionsPayloadsDescription",{defaultMessage:"Terms, positions, and payloads are stored."})},"termVector.withPositionsOffsetsPayloads":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.termVector.withPositionsOffsetsPayloadsTitle",{defaultMessage:"With positions, offsets, and payloads"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.termVector.withPositionsOffsetsPayloadsDescription",{defaultMessage:"Terms, positions, offsets and payloads are stored."})},"orientation.counterclockwise":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.orientation.counterclockwiseTitle",{defaultMessage:"Counterclockwise"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.orientation.counterclockwiseDescription",{defaultMessage:"Defines outer polygon vertices in counterclockwise order and interior shape vertices in clockwise order. This is the Open Geospatial Consortium (OGC) and GeoJSON standard."})},"orientation.clockwise":{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.orientation.clockwiseTitle",{defaultMessage:"Clockwise"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.orientation.clockwiseDescription",{defaultMessage:"Defines outer polygon vertices in clockwise order and interior shape vertices in counterclockwise order."})}};const LANGUAGE_OPTIONS_TEXT={arabic:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.arabic",{defaultMessage:"Arabic"}),armenian:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.armenian",{defaultMessage:"Armenian"}),basque:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.basque",{defaultMessage:"Basque"}),bengali:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.bengali",{defaultMessage:"Bengali"}),brazilian:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.brazilian",{defaultMessage:"Brazilian"}),bulgarian:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.bulgarian",{defaultMessage:"Bulgarian"}),catalan:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.catalan",{defaultMessage:"Catalan"}),cjk:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.cjk",{defaultMessage:"Cjk"}),czech:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.czech",{defaultMessage:"Czech"}),danish:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.danish",{defaultMessage:"Danish"}),dutch:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.dutch",{defaultMessage:"Dutch"}),english:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.english",{defaultMessage:"English"}),finnish:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.finnish",{defaultMessage:"Finnish"}),french:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.french",{defaultMessage:"French"}),galician:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.galician",{defaultMessage:"Galician"}),german:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.german",{defaultMessage:"German"}),greek:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.greek",{defaultMessage:"Greek"}),hindi:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.hindi",{defaultMessage:"Hindi"}),hungarian:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.hungarian",{defaultMessage:"Hungarian"}),indonesian:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.indonesian",{defaultMessage:"Indonesian"}),irish:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.irish",{defaultMessage:"Irish"}),italian:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.italian",{defaultMessage:"Italian"}),latvian:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.latvian",{defaultMessage:"Latvian"}),lithuanian:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.lithuanian",{defaultMessage:"Lithuanian"}),norwegian:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.norwegian",{defaultMessage:"Norwegian"}),persian:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.persian",{defaultMessage:"Persian"}),portuguese:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.portuguese",{defaultMessage:"Portuguese"}),romanian:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.romanian",{defaultMessage:"Romanian"}),russian:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.russian",{defaultMessage:"Russian"}),sorani:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.sorani",{defaultMessage:"Sorani"}),spanish:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.spanish",{defaultMessage:"Spanish"}),swedish:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.swedish",{defaultMessage:"Swedish"}),thai:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.thai",{defaultMessage:"Thai"}),turkish:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.languageAnalyzer.turkish",{defaultMessage:"Turkish"})};var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(21);const TYPE_DEFINITION={text:{value:"text",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.textDescription",{defaultMessage:"Text"}),documentation:{main:"/text.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.textLongDescription",defaultMessage:"Text fields support full-text search by breaking strings into individual, searchable terms. To index structured content, such as an email address, use the {keyword}.",values:{keyword:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getTypeDocLink("keyword"),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.textLongDescription.keywordTypeLink",{defaultMessage:"keyword data type"}))}}))},keyword:{value:"keyword",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.keywordDescription",{defaultMessage:"Keyword"}),documentation:{main:"/keyword.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.keywordLongDescription",defaultMessage:"Keyword fields support searching for an exact value and are useful for filtering, sorting, and aggregations. To index full-text content, such as an email body, use the {textType}.",values:{textType:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getTypeDocLink("text"),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.keywordLongDescription.textTypeLink",{defaultMessage:"text data type"}))}}))},constant_keyword:{value:"constant_keyword",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.constantKeywordDescription",{defaultMessage:"Constant keyword"}),documentation:{main:"/keyword.html#constant-keyword-field-type"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.constantKeywordLongDescription",defaultMessage:"Constant keyword fields are a special type of keyword fields for fields that contain the same keyword across all documents in the index. Supports the same queries and aggregations as {keyword} fields.",values:{keyword:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"keyword")}}))},numeric:{value:"numeric",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.numericDescription",{defaultMessage:"Numeric"}),documentation:{main:"/number.html"},subTypes:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.numericSubtypeDescription",{defaultMessage:"Numeric type"}),types:["byte","double","float","half_float","integer","long","scaled_float","short"]}},byte:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.byteDescription",{defaultMessage:"Byte"}),value:"byte",description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.byteLongDescription",defaultMessage:"Byte fields accept a signed 8-bit integer with a minimum value of {minValue} and a maximum value of {maxValue}.",values:{minValue:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"-128"),maxValue:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"127")}}))},double:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.doubleDescription",{defaultMessage:"Double"}),value:"double",description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.doubleLongDescription",defaultMessage:"Double fields accept a double-precision 64-bit floating point number, restricted to finite values (IEEE 754)."}))},integer:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.integerDescription",{defaultMessage:"Integer"}),value:"integer",description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.integerLongDescription",defaultMessage:"Integer fields accept a signed 32-bit integer with a minimum value of {minValue} and a maximum value of {maxValue}.",values:{minValue:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"-2",external_kbnSharedDeps_React_default.a.createElement("sup",{className:"eui-alignTop"},"31")),maxValue:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"2",external_kbnSharedDeps_React_default.a.createElement("sup",{className:"eui-alignTop"},"31"),"-1")}}))},long:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.longDescription",{defaultMessage:"Long"}),value:"long",description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.longLongDescription",defaultMessage:"Long fields accept a signed 64-bit integer with a minimum value of {minValue} and a maximum value of {maxValue}.",values:{minValue:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"-2",external_kbnSharedDeps_React_default.a.createElement("sup",{className:"eui-alignTop"},"63")),maxValue:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"2",external_kbnSharedDeps_React_default.a.createElement("sup",{className:"eui-alignTop"},"63"),"-1")}}))},float:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.floatDescription",{defaultMessage:"Float"}),value:"float",description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.floatLongDescription",defaultMessage:"Float fields accept a single-precision 32-bit floating point number, restricted to finite values (IEEE 754)."}))},half_float:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.halfFloatDescription",{defaultMessage:"Half float"}),value:"half_float",description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.halfFloatLongDescription",defaultMessage:"Half-float fields accept a half-precision 16-bit floating point number, restricted to finite values (IEEE 754)."}))},scaled_float:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.scaledFloatDescription",{defaultMessage:"Scaled float"}),value:"scaled_float",description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.scaledFloatLongDescription",defaultMessage:"Scaled-float fields accept a floating point number that is backed by a {longType} and scaled by a fixed {doubleType} scaling factor. Use this data type to store floating point data into an integer using a scaling factor. This saves disk space, but affects accuracy.",values:{longType:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"long"),doubleType:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"double")}}))},short:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.shortDescription",{defaultMessage:"Short"}),value:"short",description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.shortLongDescription",defaultMessage:"Short fields accept a signed 16-bit integer with a minimum value of {minValue} and a maximum value of {maxValue}.",values:{minValue:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"-32,768"),maxValue:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"32,767")}}))},date:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.dateDescription",{defaultMessage:"Date"}),value:"date",documentation:{main:"/date.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.dateLongDescription",defaultMessage:'Date fields accept strings with formatted dates ("2015/01/01 12:10:30"), long numbers representing milliseconds since the epoch, and integers representing seconds since the epoch. Multiple date formats are allowed. Dates with timezones are converted to UTC.'}))},date_nanos:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.dateNanosDescription",{defaultMessage:"Date nanoseconds"}),value:"date_nanos",documentation:{main:"/date_nanos.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.dateNanosLongDescription",defaultMessage:"Date nanoseconds fields store dates in nanosecond resolution. Aggregations remain in millisecond resolution. To store dates in millisecond resolution, use the {date}.",values:{date:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getTypeDocLink("date"),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.dateNanosLongDescription.dateTypeLink",{defaultMessage:"date data type"}))}}))},binary:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.binaryDescription",{defaultMessage:"Binary"}),value:"binary",documentation:{main:"/binary.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.binaryLongDescription",defaultMessage:"Binary fields accept a binary value as a Base64-encoded string. By default, binary fields are not stored or searchable."}))},ip:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.ipDescription",{defaultMessage:"IP"}),value:"ip",documentation:{main:"/ip.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.ipLongDescription",defaultMessage:"IP fields accept IPv4 or IPv6 addresses. If you need to store IP ranges in a single field, use the {ipRange}.",values:{ipRange:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getTypeDocLink("range"),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.ipLongDescription.ipRangeTypeLink",{defaultMessage:"IP range data type"}))}}))},boolean:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.booleanDescription",{defaultMessage:"Boolean"}),value:"boolean",documentation:{main:"/boolean.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.booleanLongDescription",defaultMessage:"Boolean fields accept JSON {true} and {false} values, as well as strings which are interpreted as true or false.",values:{true:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"true"),false:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"false")}}))},range:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.rangeDescription",{defaultMessage:"Range"}),value:"range",documentation:{main:"/range.html"},subTypes:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.rangeSubtypeDescription",{defaultMessage:"Range type"}),types:["date_range","double_range","float_range","integer_range","ip_range","long_range"]}},object:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.objectDescription",{defaultMessage:"Object"}),value:"object",documentation:{main:"/object.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.objectLongDescription",defaultMessage:"Object fields can contain children, which are queried as a flattened list. To query child objects independently, use the {nested}.",values:{nested:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getTypeDocLink("nested"),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.objectLongDescription.nestedTypeLink",{defaultMessage:"nested data type"}))}}))},nested:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.nestedDescription",{defaultMessage:"Nested"}),value:"nested",documentation:{main:"/nested.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.nestedLongDescription",defaultMessage:"Like {objects}, nested fields can contain children. The difference is that you can query their child objects independently.",values:{objects:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getTypeDocLink("object"),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.nestedLongDescription.objectTypeLink",{defaultMessage:"objects"}))}}))},rank_feature:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.rankFeatureDescription",{defaultMessage:"Rank feature"}),value:"rank_feature",documentation:{main:"/rank-feature.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.rankFeatureLongDescription",defaultMessage:"The rank feature field accepts a number that will boost documents in {rankFeatureQuery}.",values:{rankFeatureQuery:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getRankFeatureQueryLink(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.rankFeatureLongDescription.queryLink",{defaultMessage:"rank_feature queries"}))}}))},rank_features:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.rankFeaturesDescription",{defaultMessage:"Rank features"}),value:"rank_features",documentation:{main:"/rank-features.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.rankFeaturesLongDescription",defaultMessage:"The rank features field accepts numeric vectors that will boost documents in {rankFeatureQuery}.",values:{rankFeatureQuery:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getRankFeatureQueryLink(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.rankFeaturesLongDescription.queryLink",{defaultMessage:"rank_feature queries"}))}}))},dense_vector:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.denseVectorDescription",{defaultMessage:"Dense vector"}),value:"dense_vector",documentation:{main:"/dense-vector.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.denseVectorLongDescription",defaultMessage:"Dense vector fields store vectors of float values, useful for document scoring."}))},date_range:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.dateRangeDescription",{defaultMessage:"Date range"}),value:"date_range",description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.dateRangeLongDescription",defaultMessage:"Date range fields accept an unsigned 64-bit integer representing milliseconds since the system epoch."}))},double_range:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.doubleRangeDescription",{defaultMessage:"Double range"}),value:"double_range",description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.doubleRangeLongDescription",defaultMessage:"Double range fields accept a 64-bit double precision floating point number (IEEE 754 binary64)."}))},float_range:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.floatRangeDescription",{defaultMessage:"Float range"}),value:"float_range",description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.floatRangeLongDescription",defaultMessage:"Float range fields accept a 32-bit single precision floating point number (IEEE 754 binary32)."}))},integer_range:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.integerRangeDescription",{defaultMessage:"Integer range"}),value:"integer_range",description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.integerRangeLongDescription",defaultMessage:"Integer range fields accept a signed 32-bit integer."}))},long_range:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.longRangeDescription",{defaultMessage:"Long range"}),value:"long_range",description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.longRangeLongDescription",defaultMessage:"Long range fields accept a signed 64-bit integer."}))},ip_range:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.ipRangeDescription",{defaultMessage:"IP range"}),value:"ip_range",description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.ipRangeLongDescription",defaultMessage:"IP range fields accept an IPv4 or IPV6 address."}))},geo_point:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.geoPointDescription",{defaultMessage:"Geo-point"}),value:"geo_point",documentation:{main:"/geo-point.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.geoPointLongDescription",defaultMessage:"Geo-point fields accept latitude and longitude pairs. Use this data type to search within a bounding box, aggregate documents geographically, and sort documents by distance."}))},geo_shape:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.geoShapeDescription",{defaultMessage:"Geo-shape"}),value:"geo_shape",documentation:{main:"/geo-shape.html",learnMore:"/geo-shape.html#geoshape-indexing-approach"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.geoShapeType.fieldDescription",defaultMessage:"Geo-shapes are indexed by decomposing the shape into a triangular mesh and indexing each triangle as a 7-dimensional point in a BKD tree. {docsLink}",values:{docsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getTypeDocLink("geo_shape","learnMore"),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.geoShapeType.fieldDescription.learnMoreLink",{defaultMessage:"Learn more."}))}}))},completion:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.completionSuggesterDescription",{defaultMessage:"Completion suggester"}),value:"completion",documentation:{main:"/search-suggesters.html#completion-suggester"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.completionSuggesterLongDescription",defaultMessage:"Completion suggester fields support autocomplete, but require special data structures that occupy memory and build slowly."}))},token_count:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.tokenCountDescription",{defaultMessage:"Token count"}),value:"token_count",documentation:{main:"/token-count.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.tokenCountLongDescription",defaultMessage:"Token count fields accept string values.  These values are analyzed, and the number of tokens in the string are indexed."}))},percolator:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.percolatorDescription",{defaultMessage:"Percolator"}),value:"percolator",documentation:{main:"/percolator.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.percolatorLongDescription",defaultMessage:"The percolator data type enables {percolator}.",values:{percolator:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getPercolatorQueryLink(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.percolatorLongDescription.learnMoreLink",{defaultMessage:"percolator queries"}))}}))},histogram:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.histogramDescription",{defaultMessage:"Histogram"}),value:"histogram",documentation:{main:"/histogram.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.histogramLongDescription",defaultMessage:"Histogram fields store pre-aggregated numerical data representing a histogram, and are intended for use with aggregations."}))},join:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.joinDescription",{defaultMessage:"Join"}),value:"join",documentation:{main:"/parent-join.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.joinLongDescription",defaultMessage:"Join fields define parent-child relationships among documents of the same index."}))},alias:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.aliasDescription",{defaultMessage:"Alias"}),value:"alias",documentation:{main:"/alias.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.aliasLongDescription",defaultMessage:"Alias fields accept an alternative name for a field, which you can use in search requests."}))},search_as_you_type:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.searchAsYouTypeDescription",{defaultMessage:"Search-as-you-type"}),value:"search_as_you_type",documentation:{main:"/search-as-you-type.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.searchAsYouTypeLongDescription",defaultMessage:"Search-as-you-type fields break strings into subfields for search suggestions, and will match terms at any position in the string."}))},flattened:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.flattenedDescription",{defaultMessage:"Flattened"}),value:"flattened",documentation:{main:"/flattened.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.flattenedLongDescription",defaultMessage:"Flattened fields map an object as a single field and are useful for indexing objects with a large or unknown number of unique keys. Flattened fields support basic queries only."}))},shape:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.shapeDescription",{defaultMessage:"Shape"}),value:"shape",documentation:{main:"/shape.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.shapeLongDescription",defaultMessage:"Shape fields enable searching of complex shapes, such as rectangles and polygons."}))},point:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.pointDescription",{defaultMessage:"Point"}),value:"point",documentation:{main:"/point.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.pointLongDescription",defaultMessage:"Point fields enable searching of {code} pairs that fall in a 2-dimensional planar coordinate system.",values:{code:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"x,y")}}))},version:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.versionDescription",{defaultMessage:"Version"}),value:"version",documentation:{main:"/version.html"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.versionLongDescription",defaultMessage:"Version fields are helpful to handle software version values. This field isnt optimized for heavy wildcard, regex, or fuzzy searches. For these query types, use the {keywordType}.",values:{keywordType:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getTypeDocLink("keyword"),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.versionLongDescription.keywordTypeLink",{defaultMessage:"keyword data type"}))}}))},wildcard:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.wildcardDescription",{defaultMessage:"Wildcard"}),value:"wildcard",documentation:{main:"/keyword.html#wildcard-field-type"},description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.wildcardLongDescription",defaultMessage:"Wildcard fields store values optimized for wildcard grep-like queries."}))},other:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dataType.otherDescription",{defaultMessage:"Other"}),value:"other",description:()=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dataType.otherLongDescription",defaultMessage:"Specify type parameters in JSON."}))}};const MAIN_TYPES=["alias","binary","boolean","completion","constant_keyword","date","date_nanos","dense_vector","flattened","geo_point","geo_shape","ip","join","keyword","nested","numeric","object","percolator","range","rank_feature","rank_features","search_as_you_type","shape","text","token_count","histogram","wildcard","point","version","other"];const MAIN_DATA_TYPE_DEFINITION=MAIN_TYPES.reduce((acc,type)=>({...acc,[type]:TYPE_DEFINITION[type]}),{});const SUB_TYPE_MAP_TO_MAIN=Object.entries(MAIN_DATA_TYPE_DEFINITION).reduce((acc,[type,definition])=>{if({}.hasOwnProperty.call(definition,"subTypes")){definition.subTypes.types.forEach(subType=>{acc[subType]=type})}return acc},{});const ALL_DATA_TYPES=[...Object.keys(MAIN_DATA_TYPE_DEFINITION),...Object.keys(SUB_TYPE_MAP_TO_MAIN)];const TYPE_ONLY_ALLOWED_AT_ROOT_LEVEL=["join"];const TYPE_NOT_ALLOWED_MULTIFIELD=[...TYPE_ONLY_ALLOWED_AT_ROOT_LEVEL,"object","nested","alias"];const FIELD_TYPES_OPTIONS=Object.entries(MAIN_DATA_TYPE_DEFINITION).map(([dataType,{label:label}])=>({value:dataType,label:label}));const getSuperSelectOption=(title,description)=>({inputDisplay:title,dropdownDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("strong",null,title),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"euiTextColor--subdued"},description)))});const getOptionTexts=option=>getSuperSelectOption(FIELD_OPTIONS_TEXTS[option].title,FIELD_OPTIONS_TEXTS[option].description);const PARAMETERS_OPTIONS={index_options:[{value:"docs",...getOptionTexts("indexOptions.docs")},{value:"freqs",...getOptionTexts("indexOptions.freqs")},{value:"positions",...getOptionTexts("indexOptions.positions")},{value:"offsets",...getOptionTexts("indexOptions.offsets")}],index_options_flattened:[{value:"docs",...getOptionTexts("indexOptions.docs")},{value:"freqs",...getOptionTexts("indexOptions.freqs")}],index_options_keyword:[{value:"docs",...getOptionTexts("indexOptions.docs")},{value:"freqs",...getOptionTexts("indexOptions.freqs")}],analyzer:[{value:INDEX_DEFAULT,...getOptionTexts("analyzer.indexDefault")},{value:STANDARD,...getOptionTexts("analyzer.standard")},{value:"simple",...getOptionTexts("analyzer.simple")},{value:"whitespace",...getOptionTexts("analyzer.whitespace")},{value:"stop",...getOptionTexts("analyzer.stop")},{value:"keyword",...getOptionTexts("analyzer.keyword")},{value:"pattern",...getOptionTexts("analyzer.pattern")},{value:"fingerprint",...getOptionTexts("analyzer.fingerprint")},{value:"language",...getOptionTexts("analyzer.language")}],languageAnalyzer:Object.entries(LANGUAGE_OPTIONS_TEXT).map(([value,text])=>({value:value,text:text})),similarity:[{value:"BM25",...getOptionTexts("similarity.bm25")},{value:"boolean",...getOptionTexts("similarity.boolean")}],term_vector:[{value:"no",...getOptionTexts("termVector.no")},{value:"yes",...getOptionTexts("termVector.yes")},{value:"with_positions",...getOptionTexts("termVector.withPositions")},{value:"with_offsets",...getOptionTexts("termVector.withOffsets")},{value:"with_positions_offsets",...getOptionTexts("termVector.withPositionsOffsets")},{value:"with_positions_payloads",...getOptionTexts("termVector.withPositionsPayloads")},{value:"with_positions_offsets_payloads",...getOptionTexts("termVector.withPositionsOffsetsPayloads")}],orientation:[{value:"ccw",...getOptionTexts("orientation.counterclockwise")},{value:"cw",...getOptionTexts("orientation.clockwise")}]};const DATE_FORMATS=[{label:"epoch_millis"},{label:"epoch_second"},{label:"date_optional_time",strict:true},{label:"basic_date"},{label:"basic_date_time"},{label:"basic_date_time_no_millis"},{label:"basic_ordinal_date"},{label:"basic_ordinal_date_time"},{label:"basic_ordinal_date_time_no_millis"},{label:"basic_time"},{label:"basic_time_no_millis"},{label:"basic_t_time"},{label:"basic_t_time_no_millis"},{label:"basic_week_date",strict:true},{label:"basic_week_date_time",strict:true},{label:"basic_week_date_time_no_millis",strict:true},{label:"date",strict:true},{label:"date_hour",strict:true},{label:"date_hour_minute",strict:true},{label:"date_hour_minute_second",strict:true},{label:"date_hour_minute_second_fraction",strict:true},{label:"date_hour_minute_second_millis",strict:true},{label:"date_time",strict:true},{label:"date_time_no_millis",strict:true},{label:"hour",strict:true},{label:"hour_minute ",strict:true},{label:"hour_minute_second",strict:true},{label:"hour_minute_second_fraction",strict:true},{label:"hour_minute_second_millis",strict:true},{label:"ordinal_date",strict:true},{label:"ordinal_date_time",strict:true},{label:"ordinal_date_time_no_millis",strict:true},{label:"time",strict:true},{label:"time_no_millis",strict:true},{label:"t_time",strict:true},{label:"t_time_no_millis",strict:true},{label:"week_date",strict:true},{label:"week_date_time",strict:true},{label:"week_date_time_no_millis",strict:true},{label:"weekyear",strict:true},{label:"weekyear_week",strict:true},{label:"weekyear_week_day",strict:true},{label:"year",strict:true},{label:"year_month",strict:true},{label:"year_month_day",strict:true}];const STRICT_DATE_FORMAT_OPTIONS=DATE_FORMATS.filter(format=>format.strict).map(({label:label})=>({label:`strict_${label}`}));const DATE_FORMAT_OPTIONS=DATE_FORMATS.map(({label:label})=>({label:label}));const ALL_DATE_FORMAT_OPTIONS=[...DATE_FORMAT_OPTIONS,...STRICT_DATE_FORMAT_OPTIONS];var lib=__webpack_require__(61);var hook_form_lib_=__webpack_require__(22);var components_=__webpack_require__(24);var helpers_=__webpack_require__(25);var public_=__webpack_require__(23);var runtimeFields_public_=__webpack_require__(29);var kibanaReact_public_=__webpack_require__(27);var core_public_=__webpack_require__(31);const{toInt:toInt}=helpers_["fieldFormatters"];const{emptyField:emptyField,containsCharsField:containsCharsField,numberGreaterThanField:numberGreaterThanField,isJsonField:isJsonField}=helpers_["fieldValidators"];const commonErrorMessages={smallerThanZero:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.smallerZeroErrorMessage",{defaultMessage:"The value must be greater or equal to 0."}),spacesNotAllowed:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.spacesNotAllowedErrorMessage",{defaultMessage:"Spaces are not allowed."}),analyzerIsRequired:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.analyzerIsRequiredErrorMessage",{defaultMessage:"Specify the custom analyzer name or choose a built-in analyzer."})};const nullValueLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.nullValueFieldLabel",{defaultMessage:"Null value"});const nullValueValidateEmptyField=emptyField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.nullValueIsRequiredErrorMessage",{defaultMessage:"Null value is required."}));const mapIndexToValue=["true",true,"false",false];const indexOptionsConfig={label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.indexOptionsLabel",{defaultMessage:"Index options"}),helpText:()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.indexOptionsHelpText",defaultMessage:"Information to store in the index. {docsLink}",values:{docsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getIndexOptionsLink(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.configuration.indexOptionsdDocumentationLink",{defaultMessage:"Learn more."}))}}),type:hook_form_lib_["FIELD_TYPES"].SUPER_SELECT};const fielddataFrequencyFilterParam={fieldConfig:{defaultValue:{}},props:{min_segment_size:{fieldConfig:{type:hook_form_lib_["FIELD_TYPES"].NUMBER,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.minSegmentSizeFieldLabel",{defaultMessage:"Minimum segment size"}),defaultValue:50,formatters:[toInt]}}},schema:lib["record"](lib["union"]([lib["literal"]("min"),lib["literal"]("max"),lib["literal"]("min_segment_size")]),lib["number"])};const analyzerValidations=[{validator:emptyField(commonErrorMessages.analyzerIsRequired)},{validator:containsCharsField({chars:" ",message:commonErrorMessages.spacesNotAllowed})}];const PARAMETERS_DEFINITION={name:{fieldConfig:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.nameFieldLabel",{defaultMessage:"Field name"}),defaultValue:"",validations:[{validator:emptyField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.nameIsRequiredErrorMessage",{defaultMessage:"Give a name to the field."}))}]}},type:{fieldConfig:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.typeFieldLabel",{defaultMessage:"Field type"}),defaultValue:"text",deserializer:fieldType=>{if(typeof fieldType==="string"&&Boolean(fieldType)){return[{label:TYPE_DEFINITION[fieldType]?TYPE_DEFINITION[fieldType].label:fieldType,value:fieldType}]}return[{value:""}]},serializer:fieldType=>fieldType&&fieldType.length?fieldType[0].value:fieldType,validations:[{validator:emptyField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.typeIsRequiredErrorMessage",{defaultMessage:"Specify a field type."}))}]},schema:lib["string"]},store:{fieldConfig:{type:hook_form_lib_["FIELD_TYPES"].CHECKBOX,defaultValue:false},schema:lib["boolean"]},index:{fieldConfig:{type:hook_form_lib_["FIELD_TYPES"].CHECKBOX,defaultValue:true},schema:lib["boolean"]},doc_values:{fieldConfig:{defaultValue:true},schema:lib["boolean"]},doc_values_binary:{fieldConfig:{defaultValue:false},schema:lib["boolean"]},fielddata:{fieldConfig:{type:hook_form_lib_["FIELD_TYPES"].CHECKBOX,defaultValue:false},schema:lib["boolean"]},fielddata_frequency_filter:fielddataFrequencyFilterParam,fielddata_frequency_filter_percentage:{...fielddataFrequencyFilterParam,props:{min:{fieldConfig:{defaultValue:.01,serializer:value=>value===""?"":toInt(value)/100,deserializer:value=>Math.round(value*100)}},max:{fieldConfig:{defaultValue:1,serializer:value=>value===""?"":toInt(value)/100,deserializer:value=>Math.round(value*100)}}}},fielddata_frequency_filter_absolute:{...fielddataFrequencyFilterParam,props:{min:{fieldConfig:{defaultValue:2,validations:[{validator:numberGreaterThanField({than:1,message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.fieldDataFrequency.numberGreaterThanOneErrorMessage",{defaultMessage:"Value must be greater than one."})})}],formatters:[toInt]}},max:{fieldConfig:{defaultValue:5,validations:[{validator:numberGreaterThanField({than:1,message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.fieldDataFrequency.numberGreaterThanOneErrorMessage",{defaultMessage:"Value must be greater than one."})})}],formatters:[toInt]}}}},coerce:{fieldConfig:{defaultValue:true},schema:lib["boolean"]},coerce_shape:{fieldConfig:{defaultValue:false},schema:lib["boolean"]},ignore_malformed:{fieldConfig:{defaultValue:false},schema:lib["boolean"]},null_value:{fieldConfig:{defaultValue:"",type:hook_form_lib_["FIELD_TYPES"].TEXT,label:nullValueLabel}},null_value_ip:{fieldConfig:{defaultValue:"",type:hook_form_lib_["FIELD_TYPES"].TEXT,label:nullValueLabel,helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.nullValueIpHelpText",{defaultMessage:"Accepts an IP address."})}},null_value_numeric:{fieldConfig:{defaultValue:"",label:nullValueLabel,formatters:[toInt],validations:[{validator:nullValueValidateEmptyField}]},schema:lib["number"]},null_value_boolean:{fieldConfig:{defaultValue:false,label:nullValueLabel,deserializer:value=>mapIndexToValue.indexOf(value),serializer:value=>mapIndexToValue[value]},schema:lib["union"]([lib["literal"](true),lib["literal"](false),lib["literal"]("true"),lib["literal"]("false")])},null_value_geo_point:{fieldConfig:{defaultValue:"",label:nullValueLabel,helpText:()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.parameters.geoPointNullValueHelpText",defaultMessage:"Geo-points can be expressed as an object, string, geohash, array or {docsLink} POINT.",values:{docsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getWellKnownTextLink(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.wellKnownTextDocumentationLink",{defaultMessage:"Well-Known Text"}))}}),validations:[{validator:nullValueValidateEmptyField}],deserializer:value=>{if(value===""){return value}return JSON.stringify(value)},serializer:value=>{try{return JSON.parse(value)}catch(error){return value}}},schema:lib["any"]},null_value_point:{fieldConfig:{defaultValue:"",label:nullValueLabel,helpText:()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.parameters.pointNullValueHelpText",defaultMessage:"Points can be expressed as an object, string, array or {docsLink} POINT.",values:{docsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getWellKnownTextLink(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.pointWellKnownTextDocumentationLink",{defaultMessage:"Well-Known Text"}))}}),validations:[{validator:nullValueValidateEmptyField}],deserializer:value=>{if(value===""){return value}return JSON.stringify(value)},serializer:value=>{try{return JSON.parse(value)}catch(error){return value}}},schema:lib["any"]},copy_to:{fieldConfig:{defaultValue:"",type:hook_form_lib_["FIELD_TYPES"].TEXT,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.copyToLabel",{defaultMessage:"Group field name"}),validations:[{validator:emptyField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.copyToIsRequiredErrorMessage",{defaultMessage:"Group field name is required."}))}]},schema:lib["string"]},value:{fieldConfig:{defaultValue:"",type:hook_form_lib_["FIELD_TYPES"].TEXT,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.valueLabel",{defaultMessage:"Value"})},schema:lib["string"]},meta:{fieldConfig:{defaultValue:"",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.metaLabel",{defaultMessage:"Metadata"}),helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.parameters.metaHelpText",defaultMessage:"Use JSON format: {code}",values:{code:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,JSON.stringify({arbitrary_key:"anything_goes"}))}}),validations:[{validator:isJsonField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.metaFieldEditorJsonError",{defaultMessage:"Invalid JSON."}),{allowEmptyString:true})},{validator:({value:value})=>{if(typeof value!=="string"||value.trim()===""){return}const json=JSON.parse(value);const valuesAreNotString=Object.values(json).some(v=>typeof v!=="string");if(Array.isArray(json)){return{message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.metaFieldEditorArraysNotAllowedError",{defaultMessage:"Arrays are not allowed."})}}else if(valuesAreNotString){return{message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.metaFieldEditorOnlyStringValuesAllowedError",{defaultMessage:"Values must be a string."})}}}}],deserializer:value=>{if(value===""){return value}return JSON.stringify(value,null,2)},serializer:value=>{if(value.trim()===""){return undefined}try{const parsed=JSON.parse(value);if(!Object.keys(parsed).length){return undefined}return parsed}catch(error){return value}}},schema:lib["any"]},max_input_length:{fieldConfig:{defaultValue:50,type:hook_form_lib_["FIELD_TYPES"].NUMBER,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.maxInputLengthLabel",{defaultMessage:"Max input length"}),formatters:[toInt],validations:[{validator:emptyField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.maxInputLengthFieldRequiredErrorMessage",{defaultMessage:"Specify a max input length."}))}]},schema:lib["number"]},locale:{fieldConfig:{defaultValue:"ROOT",type:hook_form_lib_["FIELD_TYPES"].TEXT,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.localeLabel",{defaultMessage:"Locale"}),helpText:()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.parameters.localeHelpText",defaultMessage:"Separate the language, country, and variant, use {hyphen} or {underscore}. A maximum of 2 separators is allowed. Example: {locale}.",values:{locale:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"en-US"),hyphen:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"-"),underscore:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"_")}}),validations:[{validator:emptyField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.localeFieldRequiredErrorMessage",{defaultMessage:"Specify a locale."}))}]},schema:lib["string"]},orientation:{fieldConfig:{defaultValue:"ccw",type:hook_form_lib_["FIELD_TYPES"].SUPER_SELECT,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.orientationLabel",{defaultMessage:"Orientation"})},schema:lib["string"]},boost:{fieldConfig:{defaultValue:1,type:hook_form_lib_["FIELD_TYPES"].NUMBER,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.boostLabel",{defaultMessage:"Boost level"}),formatters:[toInt],validations:[{validator:({value:value})=>{if(value<0){return{message:commonErrorMessages.smallerThanZero}}}}]},schema:lib["number"]},scaling_factor:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.scalingFactorFieldTitle",{defaultMessage:"Scaling factor"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.scalingFactorFieldDescription",{defaultMessage:"Values will be multiplied by this factor at index time and rounded to the closest long value. High factor values improve accuracy, but also increase space requirements."}),fieldConfig:{defaultValue:"",type:hook_form_lib_["FIELD_TYPES"].NUMBER,deserializer:value=>value===""?value:+value,formatters:[toInt],label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.scalingFactorLabel",{defaultMessage:"Scaling factor"}),validations:[{validator:emptyField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.scalingFactorIsRequiredErrorMessage",{defaultMessage:"A scaling factor is required."}))},{validator:({value:value})=>{if(value<=0){return{message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.greaterThanZeroErrorMessage",{defaultMessage:"The scaling factor must be greater than 0."})}}}}],helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.scalingFactorHelpText",{defaultMessage:"Value must be greater than 0."})},schema:lib["number"]},dynamic:{fieldConfig:{defaultValue:true},schema:lib["union"]([lib["boolean"],lib["literal"]("strict")])},dynamic_toggle:{fieldConfig:{defaultValue:true}},dynamic_strict:{fieldConfig:{defaultValue:false,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dynamicStrictParameter.fieldTitle",{defaultMessage:"Throw an exception when the object contains an unmapped property"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dynamicStrictParameter.fieldHelpText",{defaultMessage:"By default, unmapped properties will be silently ignored when dynamic mapping is disabled. Optionally, you can choose to throw an exception when an object contains an unmapped property."})}},enabled:{fieldConfig:{defaultValue:true},schema:lib["boolean"]},format:{fieldConfig:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formatFieldLabel",{defaultMessage:"Format"}),defaultValue:"strict_date_optional_time||epoch_millis",serializer:format=>format.length?format.map(({label:label})=>label).join("||"):undefined,deserializer:formats=>formats.split("||").map(format=>({label:format})),helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.formatHelpText",defaultMessage:"Specify custom formats using {dateSyntax} syntax.",values:{dateSyntax:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"yyyy/MM/dd")}})},schema:lib["string"]},analyzer:{fieldConfig:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.analyzerFieldLabel",{defaultMessage:"Analyzer"}),defaultValue:INDEX_DEFAULT,validations:analyzerValidations},schema:lib["string"]},search_analyzer:{fieldConfig:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.searchAnalyzerFieldLabel",{defaultMessage:"Search analyzer"}),defaultValue:INDEX_DEFAULT,validations:analyzerValidations},schema:lib["string"]},search_quote_analyzer:{fieldConfig:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.searchQuoteAnalyzerFieldLabel",{defaultMessage:"Search quote analyzer"}),defaultValue:INDEX_DEFAULT,validations:analyzerValidations},schema:lib["string"]},normalizer:{fieldConfig:{label:"Normalizer",defaultValue:"",type:hook_form_lib_["FIELD_TYPES"].TEXT,validations:[{validator:emptyField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.normalizerIsRequiredErrorMessage",{defaultMessage:"Normalizer name is required."}))},{validator:containsCharsField({chars:" ",message:commonErrorMessages.spacesNotAllowed})}],helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.normalizerHelpText",{defaultMessage:`The name of a normalizer defined in the index's settings.`})},schema:lib["string"]},index_options:{fieldConfig:{...indexOptionsConfig,defaultValue:"positions"},schema:lib["string"]},index_options_keyword:{fieldConfig:{...indexOptionsConfig,defaultValue:"docs"},schema:lib["string"]},index_options_flattened:{fieldConfig:{...indexOptionsConfig,defaultValue:"docs"},schema:lib["string"]},eager_global_ordinals:{fieldConfig:{defaultValue:false},schema:lib["boolean"]},eager_global_ordinals_join:{fieldConfig:{defaultValue:true}},index_phrases:{fieldConfig:{defaultValue:false},schema:lib["boolean"]},positive_score_impact:{fieldConfig:{defaultValue:true},schema:lib["boolean"]},preserve_separators:{fieldConfig:{defaultValue:true},schema:lib["boolean"]},preserve_position_increments:{fieldConfig:{defaultValue:true},schema:lib["boolean"]},ignore_z_value:{fieldConfig:{defaultValue:true},schema:lib["boolean"]},points_only:{fieldConfig:{defaultValue:false},schema:lib["boolean"]},norms:{fieldConfig:{defaultValue:true},schema:lib["boolean"]},norms_keyword:{fieldConfig:{defaultValue:false},schema:lib["boolean"]},term_vector:{fieldConfig:{type:hook_form_lib_["FIELD_TYPES"].SUPER_SELECT,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.termVectorLabel",{defaultMessage:"Set term vector"}),defaultValue:"no"},schema:lib["string"]},path:{fieldConfig:{type:hook_form_lib_["FIELD_TYPES"].COMBO_BOX,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.pathLabel",{defaultMessage:"Field path"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.pathHelpText",{defaultMessage:"The absolute path from the root to the target field."}),validations:[{validator:emptyField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.pathIsRequiredErrorMessage",{defaultMessage:"Select a field to point the alias to."}))}],serializer:value=>value.length===0?"":value[0].id},targetTypesNotAllowed:["object","nested","alias"],schema:lib["string"]},position_increment_gap:{fieldConfig:{type:hook_form_lib_["FIELD_TYPES"].NUMBER,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.positionIncrementGapLabel",{defaultMessage:"Position increment gap"}),defaultValue:100,formatters:[toInt],validations:[{validator:emptyField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.positionIncrementGapIsRequiredErrorMessage",{defaultMessage:"Set a position increment gap value"}))},{validator:({value:value})=>{if(value<0){return{message:commonErrorMessages.smallerThanZero}}}}]},schema:lib["number"]},index_prefixes:{fieldConfig:{defaultValue:{}},props:{min_chars:{fieldConfig:{type:hook_form_lib_["FIELD_TYPES"].NUMBER,defaultValue:2,serializer:value=>value===""?"":toInt(value)}},max_chars:{fieldConfig:{type:hook_form_lib_["FIELD_TYPES"].NUMBER,defaultValue:5,serializer:value=>value===""?"":toInt(value)}}},schema:lib["partial"]({min_chars:lib["number"],max_chars:lib["number"]})},similarity:{fieldConfig:{defaultValue:"BM25",type:hook_form_lib_["FIELD_TYPES"].SUPER_SELECT,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.similarityLabel",{defaultMessage:"Similarity algorithm"})},schema:lib["string"]},split_queries_on_whitespace:{fieldConfig:{defaultValue:false},schema:lib["boolean"]},ignore_above:{fieldConfig:{defaultValue:8191,type:hook_form_lib_["FIELD_TYPES"].NUMBER,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.ignoreAboveFieldLabel",{defaultMessage:"Character length limit"}),formatters:[toInt],validations:[{validator:emptyField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.ignoreAboveIsRequiredErrorMessage",{defaultMessage:"Character length limit is required."}))},{validator:({value:value})=>{if(value<0){return{message:commonErrorMessages.smallerThanZero}}}}]},schema:lib["number"]},enable_position_increments:{fieldConfig:{defaultValue:true},schema:lib["boolean"]},depth_limit:{fieldConfig:{defaultValue:20,type:hook_form_lib_["FIELD_TYPES"].NUMBER,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.depthLimitFieldLabel",{defaultMessage:"Nested object depth limit"}),formatters:[toInt],validations:[{validator:({value:value})=>{if(value<0){return{message:commonErrorMessages.smallerThanZero}}}}]},schema:lib["number"]},dims:{fieldConfig:{defaultValue:"",type:hook_form_lib_["FIELD_TYPES"].NUMBER,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dimsFieldLabel",{defaultMessage:"Dimensions"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.dimsHelpTextDescription",{defaultMessage:"The number of dimensions in the vector."}),formatters:[toInt],validations:[{validator:emptyField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.dimsIsRequiredErrorMessage",{defaultMessage:"Specify a dimension."}))}]},schema:lib["string"]},relations:{fieldConfig:{defaultValue:[]},schema:lib["record"](lib["string"],lib["union"]([lib["string"],lib["array"](lib["string"])]))},max_shingle_size:{fieldConfig:{type:hook_form_lib_["FIELD_TYPES"].SELECT,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.largestShingleSizeFieldLabel",{defaultMessage:"Max shingle size"}),defaultValue:3,formatters:[toInt]},schema:lib["union"]([lib["literal"](2),lib["literal"](3),lib["literal"](4)])}};const MAX_DEPTH_DEFAULT_EDITOR=4;const EUI_SIZE=16;const CHILD_FIELD_INDENT_SIZE=EUI_SIZE*1.5;const LEFT_PADDING_SIZE_FIELD_ITEM_WRAPPER=EUI_SIZE*.25;function documentation_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class documentation_DocumentationService{constructor(){documentation_defineProperty(this,"esDocsBase","");documentation_defineProperty(this,"kibanaDocsBase","");documentation_defineProperty(this,"getTypeDocLink",(type,docType="main")=>{const typeDefinition=TYPE_DEFINITION[type];if(!typeDefinition||!typeDefinition.documentation||!typeDefinition.documentation[docType]){return undefined}return`${this.esDocsBase}${typeDefinition.documentation[docType]}`})}setup(docLinks){const{DOC_LINK_VERSION:DOC_LINK_VERSION,ELASTIC_WEBSITE_URL:ELASTIC_WEBSITE_URL}=docLinks;const docsBase=`${ELASTIC_WEBSITE_URL}guide/en`;this.esDocsBase=`${docsBase}/elasticsearch/reference/${DOC_LINK_VERSION}`;this.kibanaDocsBase=`${docsBase}/kibana/${DOC_LINK_VERSION}`}getEsDocsBase(){return this.esDocsBase}getSettingsDocumentationLink(){return`${this.esDocsBase}/index-modules.html#index-modules-settings`}getMappingDocumentationLink(){return`${this.esDocsBase}/mapping.html`}getRoutingLink(){return`${this.esDocsBase}/mapping-routing-field.html`}getDataStreamsDocumentationLink(){return`${this.esDocsBase}/data-streams.html`}getTemplatesDocumentationLink(isLegacy=false){return isLegacy?`${this.esDocsBase}/indices-templates-v1.html`:`${this.esDocsBase}/indices-templates.html`}getIdxMgmtDocumentationLink(){return`${this.kibanaDocsBase}/managing-indices.html`}getMappingTypesLink(){return`${this.esDocsBase}/mapping-types.html`}getDynamicMappingLink(){return`${this.esDocsBase}/dynamic-field-mapping.html`}getPercolatorQueryLink(){return`${this.esDocsBase}/query-dsl-percolate-query.html`}getRankFeatureQueryLink(){return`${this.esDocsBase}/rank-feature.html`}getMetaFieldLink(){return`${this.esDocsBase}/mapping-meta-field.html`}getDynamicTemplatesLink(){return`${this.esDocsBase}/dynamic-templates.html`}getMappingSourceFieldLink(){return`${this.esDocsBase}/mapping-source-field.html`}getDisablingMappingSourceFieldLink(){return`${this.esDocsBase}/mapping-source-field.html#disable-source-field`}getNullValueLink(){return`${this.esDocsBase}/null-value.html`}getTermVectorLink(){return`${this.esDocsBase}/term-vector.html`}getStoreLink(){return`${this.esDocsBase}/mapping-store.html`}getSimilarityLink(){return`${this.esDocsBase}/similarity.html`}getNormsLink(){return`${this.esDocsBase}/norms.html`}getIndexLink(){return`${this.esDocsBase}/mapping-index.html`}getIgnoreMalformedLink(){return`${this.esDocsBase}/ignore-malformed.html`}getMetaLink(){return`${this.esDocsBase}/mapping-field-meta.html`}getFormatLink(){return`${this.esDocsBase}/mapping-date-format.html`}getEagerGlobalOrdinalsLink(){return`${this.esDocsBase}/eager-global-ordinals.html`}getDocValuesLink(){return`${this.esDocsBase}/doc-values.html`}getCopyToLink(){return`${this.esDocsBase}/copy-to.html`}getCoerceLink(){return`${this.esDocsBase}/coerce.html`}getBoostLink(){return`${this.esDocsBase}/mapping-boost.html`}getNormalizerLink(){return`${this.esDocsBase}/normalizer.html`}getIgnoreAboveLink(){return`${this.esDocsBase}/ignore-above.html`}getFielddataLink(){return`${this.esDocsBase}/fielddata.html`}getFielddataFrequencyLink(){return`${this.esDocsBase}/fielddata.html#field-data-filtering`}getEnablingFielddataLink(){return`${this.esDocsBase}/fielddata.html#before-enabling-fielddata`}getIndexPhrasesLink(){return`${this.esDocsBase}/index-phrases.html`}getIndexPrefixesLink(){return`${this.esDocsBase}/index-prefixes.html`}getPositionIncrementGapLink(){return`${this.esDocsBase}/position-increment-gap.html`}getAnalyzerLink(){return`${this.esDocsBase}/analyzer.html`}getDateFormatLink(){return`${this.esDocsBase}/mapping-date-format.html`}getIndexOptionsLink(){return`${this.esDocsBase}/index-options.html`}getAlternativeToMappingTypesLink(){return`${this.esDocsBase}/removal-of-types.html#_alternatives_to_mapping_types`}getJoinMultiLevelsPerformanceLink(){return`${this.esDocsBase}/parent-join.html#_parent_join_and_performance`}getDynamicLink(){return`${this.esDocsBase}/dynamic.html`}getEnabledLink(){return`${this.esDocsBase}/enabled.html`}getRuntimeFields(){return`${this.esDocsBase}/runtime.html`}getWellKnownTextLink(){return"http://docs.opengeospatial.org/is/12-063r5/12-063r5.html"}getRootLocaleLink(){return"https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#ROOT"}}const documentationService=new documentation_DocumentationService;function wrapArray(subj){return Array.isArray(subj)?subj:[subj]}class UnreachableCaseError extends Error{constructor(val){super(`Unreachable case: ${val}`)}}function createUiCounterMetric({type:type,appName:appName,eventName:eventName,count:count=1}){return{type:type,appName:appName,eventName:eventName,count:count}}function trackUsageAgent(appName){const userAgent=window&&window.navigator&&window.navigator.userAgent||"";return{type:METRIC_TYPE.USER_AGENT,appName:appName,userAgent:userAgent}}var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(32);var external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_);function createApplicationUsageMetric(appId,viewId){return{type:METRIC_TYPE.APPLICATION_USAGE,appId:appId,viewId:viewId,startTime:external_kbnSharedDeps_MomentTimezone_default()(),numberOfClicks:0}}let METRIC_TYPE;(function(METRIC_TYPE){METRIC_TYPE["COUNT"]="count";METRIC_TYPE["LOADED"]="loaded";METRIC_TYPE["CLICK"]="click";METRIC_TYPE["USER_AGENT"]="user_agent";METRIC_TYPE["APPLICATION_USAGE"]="application_usage"})(METRIC_TYPE||(METRIC_TYPE={}));function storage_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class ReportStorageManager{constructor(storageKey,storage){storage_defineProperty(this,"storageKey",void 0);storage_defineProperty(this,"storage",void 0);this.storageKey=storageKey;this.storage=storage}get(){if(!this.storage)return;return this.storage.get(this.storageKey)}store(report){if(!this.storage)return;this.storage.set(this.storageKey,report)}}function application_usage_tracker_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class application_usage_tracker_ApplicationUsageTracker{constructor(reporter){application_usage_tracker_defineProperty(this,"trackedApplicationViews",{});application_usage_tracker_defineProperty(this,"reporter",void 0);application_usage_tracker_defineProperty(this,"currentAppId",void 0);application_usage_tracker_defineProperty(this,"currentApplicationKeys",[]);application_usage_tracker_defineProperty(this,"beforeUnloadListener",void 0);application_usage_tracker_defineProperty(this,"onVisiblityChangeListener",void 0);this.reporter=reporter}createKey(appId,viewId){return{appId:appId,viewId:viewId}}static serializeKey({appId:appId,viewId:viewId}){return`${appId}-${viewId}`}trackApplications(appKeys){for(const{appId:appId,viewId:viewId}of appKeys.filter(Boolean)){const serializedKey=application_usage_tracker_ApplicationUsageTracker.serializeKey({appId:appId,viewId:viewId});if(typeof this.trackedApplicationViews[serializedKey]!=="undefined"){continue}const metric=createApplicationUsageMetric(appId,viewId);this.trackedApplicationViews[serializedKey]=metric}}attachListeners(){if(typeof window==="undefined"||typeof document==="undefined"){return}this.beforeUnloadListener=()=>{this.flushTrackedViews()};this.onVisiblityChangeListener=()=>{if(document.visibilityState==="visible"){this.resumeTrackingAll()}else if(document.visibilityState==="hidden"){this.pauseTrackingAll()}};window.addEventListener("beforeunload",this.beforeUnloadListener);document.addEventListener("visibilitychange",this.onVisiblityChangeListener)}detachListeners(){if(typeof window==="undefined"||typeof document==="undefined"){return}if(this.beforeUnloadListener){window.removeEventListener("beforeunload",this.beforeUnloadListener)}if(this.onVisiblityChangeListener){document.removeEventListener("visibilitychange",this.onVisiblityChangeListener)}}sendMetricsToReporter(metrics){metrics.forEach(metric=>{this.reporter.reportApplicationUsage(metric)})}updateViewClickCounter(viewId){if(!this.currentAppId){return}const appKey=application_usage_tracker_ApplicationUsageTracker.serializeKey({appId:this.currentAppId,viewId:viewId});if(this.trackedApplicationViews[appKey]){this.trackedApplicationViews[appKey].numberOfClicks++}}flushTrackedViews(){const appViewMetrics=Object.values(this.trackedApplicationViews);this.sendMetricsToReporter(appViewMetrics);this.trackedApplicationViews={}}start(){this.attachListeners()}stop(){this.flushTrackedViews();this.detachListeners()}setCurrentAppId(appId){this.flushTrackedViews();this.currentAppId=appId}trackApplicationViewUsage(viewId){if(!this.currentAppId){return}const appKey=this.createKey(this.currentAppId,viewId);this.trackApplications([appKey])}pauseTrackingAll(){this.currentApplicationKeys=Object.values(this.trackedApplicationViews).map(({appId:appId,viewId:viewId})=>this.createKey(appId,viewId));this.flushTrackedViews()}resumeTrackingAll(){this.trackApplications(this.currentApplicationKeys);this.currentApplicationKeys=[];this.reporter.sendReports()}flushTrackedView(viewId){if(!this.currentAppId){return}const appKey=this.createKey(this.currentAppId,viewId);const serializedKey=application_usage_tracker_ApplicationUsageTracker.serializeKey(appKey);const appViewMetric=this.trackedApplicationViews[serializedKey];this.sendMetricsToReporter([appViewMetric]);delete this.trackedApplicationViews[serializedKey]}}function report_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const REPORT_VERSION=3;class report_ReportManager{constructor(report){report_defineProperty(this,"report",void 0);this.report=report||report_ReportManager.createReport()}static createReport(){return{reportVersion:REPORT_VERSION}}clearReport(){this.report=report_ReportManager.createReport()}isReportEmpty(){const{uiCounter:uiCounter,userAgent:userAgent,application_usage:appUsage}=this.report;const noUiCounters=!uiCounter||Object.keys(uiCounter).length===0;const noUserAgents=!userAgent||Object.keys(userAgent).length===0;const noAppUsage=!appUsage||Object.keys(appUsage).length===0;return noUiCounters&&noUserAgents&&noAppUsage}incrementTotal(count,currentTotal){const currentTotalNumber=typeof currentTotal==="number"?currentTotal:0;return count+currentTotalNumber}assignReports(newMetrics){wrapArray(newMetrics).forEach(newMetric=>this.assignReport(this.report,newMetric));return{report:this.report}}static createMetricKey(metric){switch(metric.type){case METRIC_TYPE.USER_AGENT:{const{appName:appName,type:type}=metric;return`${appName}-${type}`}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{const{appName:appName,eventName:eventName,type:type}=metric;return`${appName}-${type}-${eventName}`}case METRIC_TYPE.APPLICATION_USAGE:{const{appId:appId,viewId:viewId}=metric;return application_usage_tracker_ApplicationUsageTracker.serializeKey({appId:appId,viewId:viewId})}default:throw new UnreachableCaseError(metric)}}assignReport(report,metric){const key=report_ReportManager.createMetricKey(metric);switch(metric.type){case METRIC_TYPE.USER_AGENT:{const{appName:appName,type:type,userAgent:userAgent}=metric;if(userAgent){report.userAgent={[key]:{key:key,appName:appName,type:type,userAgent:metric.userAgent}}}return}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{var _report$uiCounter$key;const{appName:appName,type:type,eventName:eventName,count:count}=metric;report.uiCounter=report.uiCounter||{};const currentTotal=(_report$uiCounter$key=report.uiCounter[key])===null||_report$uiCounter$key===void 0?void 0:_report$uiCounter$key.total;report.uiCounter[key]={key:key,appName:appName,eventName:eventName,type:type,total:this.incrementTotal(count,currentTotal)};return}case METRIC_TYPE.APPLICATION_USAGE:{const{numberOfClicks:numberOfClicks,startTime:startTime,appId:appId,viewId:viewId}=metric;const minutesOnScreen=external_kbnSharedDeps_MomentTimezone_default()().diff(startTime,"minutes",true);report.application_usage=report.application_usage||{};const appExistingData=report.application_usage[key]||{minutesOnScreen:0,numberOfClicks:0,appId:appId,viewId:viewId};report.application_usage[key]={...appExistingData,minutesOnScreen:appExistingData.minutesOnScreen+minutesOnScreen,numberOfClicks:appExistingData.numberOfClicks+numberOfClicks};return}default:throw new UnreachableCaseError(metric)}}}report_defineProperty(report_ReportManager,"REPORT_VERSION",REPORT_VERSION);function reporter_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class reporter_Reporter{constructor(config){reporter_defineProperty(this,"checkInterval",void 0);reporter_defineProperty(this,"interval",void 0);reporter_defineProperty(this,"http",void 0);reporter_defineProperty(this,"reportManager",void 0);reporter_defineProperty(this,"storageManager",void 0);reporter_defineProperty(this,"debug",void 0);reporter_defineProperty(this,"retryCount",0);reporter_defineProperty(this,"maxRetries",3);reporter_defineProperty(this,"start",()=>{if(!this.interval){this.interval=setTimeout(()=>{this.interval=undefined;this.sendReports()},this.checkInterval)}});reporter_defineProperty(this,"reportUiCounter",(appName,type,eventNames,count)=>{const metrics=wrapArray(eventNames).map(eventName=>{this.log(`${type} Metric -> (${appName}:${eventName}):`);const report=createUiCounterMetric({type:type,appName:appName,eventName:eventName,count:count});this.log(report);return report});this.saveToReport(metrics)});reporter_defineProperty(this,"reportUserAgent",appName=>{this.log(`Reporting user-agent.`);const report=trackUsageAgent(appName);this.saveToReport([report])});reporter_defineProperty(this,"sendReports",async()=>{if(!this.reportManager.isReportEmpty()){try{await this.http(this.reportManager.report);this.flushReport()}catch(err){this.log(`Error Sending Metrics Report ${err}`);this.retryCount=this.retryCount+1;const versionMismatch=this.reportManager.report.reportVersion!==report_ReportManager.REPORT_VERSION;if(versionMismatch||this.retryCount>this.maxRetries){this.flushReport()}}}this.start()});const{http:http,storage:storage,debug:debug,checkInterval:checkInterval=9e4,storageKey:storageKey="analytics"}=config;this.http=http;this.checkInterval=checkInterval;this.storageManager=new ReportStorageManager(storageKey,storage);const storedReport=this.storageManager.get();this.reportManager=new report_ReportManager(storedReport);this.debug=!!debug}saveToReport(newMetrics){this.reportManager.assignReports(newMetrics);this.storageManager.store(this.reportManager.report)}flushReport(){this.retryCount=0;this.reportManager.clearReport();this.storageManager.store(this.reportManager.report)}log(message){if(this.debug){console.debug(message)}}reportApplicationUsage(appUsageReport){this.log(`Reporting application usage for ${appUsageReport.appId}, ${appUsageReport.viewId}`);this.saveToReport([appUsageReport])}}var uuid=__webpack_require__(62);var uuid_default=__webpack_require__.n(uuid);const getUniqueId=()=>uuid_default.a.v4();const getChildFieldsName=dataType=>{if(dataType==="text"||dataType==="keyword"){return"fields"}else if(dataType==="object"||dataType==="nested"){return"properties"}return undefined};const getFieldMeta=(field,isMultiField)=>{const childFieldsName=getChildFieldsName(field.type);const canHaveChildFields=isMultiField?false:childFieldsName==="properties";const hasChildFields=isMultiField?false:canHaveChildFields&&Boolean(field[childFieldsName])&&Object.keys(field[childFieldsName]).length>0;const canHaveMultiFields=childFieldsName==="fields";const hasMultiFields=canHaveMultiFields&&Boolean(field[childFieldsName])&&Object.keys(field[childFieldsName]).length>0;return{childFieldsName:childFieldsName,canHaveChildFields:canHaveChildFields,hasChildFields:hasChildFields,canHaveMultiFields:canHaveMultiFields,hasMultiFields:hasMultiFields,isExpanded:false}};const getTypeLabel=type=>type&&TYPE_DEFINITION[type]?TYPE_DEFINITION[type].label:`${TYPE_DEFINITION.other.label}: ${type}`;const getTypeLabelFromField=field=>{const{type:type}=field;const typeLabel=getTypeLabel(type);return typeLabel};const getFieldConfig=(param,prop)=>{var _PARAMETERS_DEFINITIO;if(prop!==undefined){var _props$prop;if(!PARAMETERS_DEFINITION[param].props||!PARAMETERS_DEFINITION[param].props[prop]){throw new Error(`No field config found for prop "${prop}" on param "${param}" `)}return((_props$prop=PARAMETERS_DEFINITION[param].props[prop])===null||_props$prop===void 0?void 0:_props$prop.fieldConfig)||{}}return((_PARAMETERS_DEFINITIO=PARAMETERS_DEFINITION[param])===null||_PARAMETERS_DEFINITIO===void 0?void 0:_PARAMETERS_DEFINITIO.fieldConfig)||{}};const replaceAliasPathByAliasId=byId=>{const aliases={};Object.entries(byId).forEach(([id,field])=>{if(field.source.type==="alias"){const aliasTargetField=Object.values(byId).find(_field=>_field.path.join(".")===field.source.path);if(aliasTargetField){field.source.path=aliasTargetField.id;aliases[aliasTargetField.id]=aliases[aliasTargetField.id]||[];aliases[aliasTargetField.id].push(id)}}});return{aliases:aliases,byId:byId}};const getMainTypeFromSubType=subType=>{var _SUB_TYPE_MAP_TO_MAIN;return(_SUB_TYPE_MAP_TO_MAIN=SUB_TYPE_MAP_TO_MAIN[subType])!==null&&_SUB_TYPE_MAP_TO_MAIN!==void 0?_SUB_TYPE_MAP_TO_MAIN:"other"};const getTypeMetaFromSource=sourceType=>{if(!MAIN_DATA_TYPE_DEFINITION[sourceType]){const mainType=getMainTypeFromSubType(sourceType);if(!mainType){throw new Error(`Property type "${sourceType}" not recognized and no subType was found for it.`)}return{mainType:mainType,subType:sourceType}}return{mainType:sourceType}};const normalize=(fieldsToNormalize={})=>{let maxNestedDepth=0;const normalizeFields=(props,to,paths,arrayToKeepRef,nestedDepth,isMultiField=false,parentId)=>Object.entries(props).sort(([a],[b])=>a>b?1:a<b?-1:0).reduce((acc,[propName,value])=>{const id=getUniqueId();arrayToKeepRef.push(id);const field={name:propName,...value};if(field.type===undefined&&field.properties!==undefined){field.type="object"}const meta=getFieldMeta(field,isMultiField);const{childFieldsName:childFieldsName,hasChildFields:hasChildFields,hasMultiFields:hasMultiFields}=meta;if(hasChildFields||hasMultiFields){const nextDepth=meta.canHaveChildFields||meta.canHaveMultiFields?nestedDepth+1:nestedDepth;meta.childFields=[];maxNestedDepth=Math.max(maxNestedDepth,nextDepth);normalizeFields(field[childFieldsName],to,[...paths,propName],meta.childFields,nextDepth,meta.canHaveMultiFields,id)}const{properties:properties,fields:fields,...rest}=field;const normalizedField={id:id,parentId:parentId,nestedDepth:nestedDepth,isMultiField:isMultiField,path:paths.length?[...paths,propName]:[propName],source:rest,...meta};acc[id]=normalizedField;return acc},to);const rootLevelFields=[];const{byId:byId,aliases:aliases}=replaceAliasPathByAliasId(normalizeFields(fieldsToNormalize,{},[],rootLevelFields,0));return{byId:byId,aliases:aliases,rootLevelFields:rootLevelFields,maxNestedDepth:maxNestedDepth}};const replaceAliasIdByAliasPath=(aliases,byId)=>{const updatedById={...byId};Object.entries(aliases).forEach(([targetId,aliasesIds])=>{const path=updatedById[targetId]?updatedById[targetId].path.join("."):"";aliasesIds.forEach(id=>{const aliasField=updatedById[id];if(!aliasField){return}const fieldWithUpdatedPath={...aliasField,source:{...aliasField.source,path:path}};updatedById[id]=fieldWithUpdatedPath})});return updatedById};const deNormalize=({rootLevelFields:rootLevelFields,byId:byId,aliases:aliases})=>{const serializedFieldsById=replaceAliasIdByAliasPath(aliases,byId);const deNormalizePaths=(ids,to={})=>{ids.forEach(id=>{const{source:source,childFields:childFields,childFieldsName:childFieldsName}=serializedFieldsById[id];const{name:name,...normalizedField}=source;const field=normalizedField;to[name]=field;if(childFields){field[childFieldsName]={};return deNormalizePaths(childFields,field[childFieldsName])}});return to};return deNormalizePaths(rootLevelFields)};const updateFieldsPathAfterFieldNameChange=(field,byId)=>{const updatedById={...byId};const paths=field.parentId?byId[field.parentId].path:[];const updateFieldPath=(_field,_paths)=>{const{name:name}=_field.source;const path=_paths.length===0?[name]:[..._paths,name];updatedById[_field.id]={..._field,path:path};if(_field.hasChildFields||_field.hasMultiFields){_field.childFields.map(fieldId=>byId[fieldId]).forEach(childField=>{updateFieldPath(childField,[..._paths,name])})}};updateFieldPath(field,paths);return{updatedFieldPath:updatedById[field.id].path,updatedById:updatedById}};const getAllChildFields=(field,byId)=>{const getChildFields=(_field,to=[])=>{if(_field.hasChildFields||_field.hasMultiFields){_field.childFields.map(fieldId=>byId[fieldId]).forEach(childField=>{to.push(childField);getChildFields(childField,to)})}return to};return getChildFields(field)};const getAllDescendantAliases=(field,fields,aliasesIds=[])=>{const hasAliases=fields.aliases[field.id]&&Boolean(fields.aliases[field.id].length);if(!hasAliases&&!field.hasChildFields&&!field.hasMultiFields){return aliasesIds}if(hasAliases){fields.aliases[field.id].forEach(id=>{aliasesIds.push(id)})}if(field.childFields){field.childFields.forEach(id=>{if(!fields.byId[id]){return}getAllDescendantAliases(fields.byId[id],fields,aliasesIds)})}return aliasesIds};const getFieldAncestors=(fieldId,byId)=>{const ancestors={};const currentField=byId[fieldId];let parent=currentField.parentId===undefined?undefined:byId[currentField.parentId];while(parent){ancestors[parent.id]=true;parent=parent.parentId===undefined?undefined:byId[parent.parentId]}return ancestors};const filterTypesForMultiField=options=>options.filter(option=>TYPE_NOT_ALLOWED_MULTIFIELD.includes(option.value)===false);const filterTypesForNonRootFields=options=>options.filter(option=>TYPE_ONLY_ALLOWED_AT_ROOT_LEVEL.includes(option.value)===false);const getMaxNestedDepth=byId=>Object.values(byId).reduce((maxDepth,field)=>Math.max(maxDepth,field.nestedDepth),0);const buildFieldTreeFromIds=(fieldsIds,byId,render)=>fieldsIds.map(id=>{const field=byId[id];const children=field.childFields?buildFieldTreeFromIds(field.childFields,byId,render):undefined;return{label:render(field),children:children}});const shouldDeleteChildFieldsAfterTypeChange=(oldType,newType)=>{if(oldType==="text"&&newType!=="keyword"){return true}else if(oldType==="keyword"&&newType!=="text"){return true}else if(oldType==="object"&&newType!=="nested"){return true}else if(oldType==="nested"&&newType!=="object"){return true}return false};const canUseMappingsEditor=maxNestedDepth=>maxNestedDepth<MAX_DEPTH_DEFAULT_EDITOR;const stripUndefinedValues=(obj,recursive=true)=>Object.entries(obj).reduce((acc,[key,value])=>{if(value===undefined){return acc}if(Array.isArray(value)||value instanceof Date||value===null){return{...acc,[key]:value}}return recursive&&typeof value==="object"?{...acc,[key]:stripUndefinedValues(value,recursive)}:{...acc,[key]:value}},{});const normalizeRuntimeFields=(fields={})=>Object.entries(fields).reduce((acc,[name,field])=>{const id=getUniqueId();return{...acc,[id]:{id:id,source:{name:name,...field}}}},{});const deNormalizeRuntimeFields=fields=>Object.values(fields).reduce((acc,{source:source})=>{const{name:name,...rest}=source;return{...acc,[name]:rest}},{});const CodeBlock=({children:children,padding:padding="normal"})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"euiCodeBlock euiCodeBlock--fontSmall euiCodeBlock--paddingLarge"},external_kbnSharedDeps_React_default.a.createElement("pre",{className:"euiCodeBlock__pre",style:{padding:padding==="small"?"6px 12px":undefined}},external_kbnSharedDeps_React_default.a.createElement("code",{className:"euiCodeBlock__code"},children)));const TreeItem=({treeItem:treeItem})=>external_kbnSharedDeps_React_default.a.createElement("li",{className:"esUiTreeItem"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"esUiTreeItem__label"},treeItem.label),treeItem.children&&external_kbnSharedDeps_React_default.a.createElement(Tree,{tree:treeItem.children}));const Tree=({tree:tree})=>external_kbnSharedDeps_React_default.a.createElement("ul",{className:"esUiTree"},tree.map((treeItem,i)=>external_kbnSharedDeps_React_default.a.createElement(TreeItem,{key:i,treeItem:treeItem})));const FieldsTree=({fields:fields})=>external_kbnSharedDeps_React_default.a.createElement(CodeBlock,null,external_kbnSharedDeps_React_default.a.createElement(Tree,{tree:fields}));const ModalConfirmationDeleteFields=({title:title,childFields:childFields,aliases:aliases,byId:byId,confirmButtonText:confirmButtonText,onCancel:onCancel,onConfirm:onConfirm})=>{const fieldsTree=childFields&&childFields.length?buildFieldTreeFromIds(childFields,byId,fieldItem=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,fieldItem.source.name,fieldItem.isMultiField&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"hollow"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.deleteField.confirmationModal.multiFieldBadgeLabel",{defaultMessage:"{dataType} multi-field",values:{dataType:TYPE_DEFINITION[fieldItem.source.type].label}}))))):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:title,onCancel:onCancel,onConfirm:onConfirm,cancelButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.deleteField.confirmationModal.cancelButtonLabel",{defaultMessage:"Cancel"}),buttonColor:"danger",confirmButtonText:confirmButtonText},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,fieldsTree&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.confirmationModal.deleteFieldsDescription",{defaultMessage:"This will also delete the following fields."})),external_kbnSharedDeps_React_default.a.createElement(FieldsTree,{fields:fieldsTree})),aliases&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.confirmationModal.deleteAliasesDescription",{defaultMessage:"The following aliases will also be deleted."})),external_kbnSharedDeps_React_default.a.createElement("ul",null,aliases.map(aliasPath=>external_kbnSharedDeps_React_default.a.createElement("li",{key:aliasPath},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,aliasPath)))))))};const AliasType=({field:field,allFields:allFields})=>external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(PathParameter,{field:field,allFields:allFields}));const getDefaultToggleValue=(param,field)=>{switch(param){case"boost":case"similarity":case"ignore_above":{return field[param]!==undefined&&field[param]!==getFieldConfig(param).defaultValue}case"normalizer":case"copy_to":case"null_value":{return field[param]!==undefined}default:return false}};const KeywordType=({field:field})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(IndexParameter,{config:{...getFieldConfig("index_options_keyword")},indexOptions:PARAMETERS_OPTIONS.index_options_keyword}),external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.normalizerFieldTitle",{defaultMessage:"Use normalizer"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.normalizerFieldDescription",{defaultMessage:"Process the keyword prior to indexing."}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.normalizerDocLinkText",{defaultMessage:"Normalizer documentation"}),href:documentationService.getNormalizerLink()},defaultToggleValue:getDefaultToggleValue("normalizer",field.source)},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"normalizer",config:getFieldConfig("normalizer"),component:components_["Field"]}))),external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(EagerGlobalOrdinalsParameter,null),external_kbnSharedDeps_React_default.a.createElement(IgnoreAboveParameter,{defaultToggleValue:getDefaultToggleValue("ignore_above",field.source)}),external_kbnSharedDeps_React_default.a.createElement(NormsParameter,{configPath:"norms_keyword"}),external_kbnSharedDeps_React_default.a.createElement(SimilarityParameter,{defaultToggleValue:getDefaultToggleValue("similarity",field.source)}),external_kbnSharedDeps_React_default.a.createElement(SplitQueriesOnWhitespaceParameter,null),external_kbnSharedDeps_React_default.a.createElement(DocValuesParameter,null),external_kbnSharedDeps_React_default.a.createElement(CopyToParameter,{defaultToggleValue:getDefaultToggleValue("copy_to",field.source)}),external_kbnSharedDeps_React_default.a.createElement(NullValueParameter,{defaultToggleValue:getDefaultToggleValue("null_value",field.source)}),external_kbnSharedDeps_React_default.a.createElement(StoreParameter,null),external_kbnSharedDeps_React_default.a.createElement(BoostParameter,{defaultToggleValue:getDefaultToggleValue("boost",field.source)})));const numeric_type_getDefaultToggleValue=(param,field)=>{switch(param){case"copy_to":case"boost":case"meta":case"ignore_malformed":{return field[param]!==undefined&&field[param]!==getFieldConfig(param).defaultValue}case"null_value":{return field.null_value!==undefined&&field.null_value!==""}default:return false}};const NumericType=({field:field})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["FormDataProvider"],{pathsToWatch:"subType"},formData=>{var _formData$subType,_formData$subType$;return((_formData$subType=formData.subType)===null||_formData$subType===void 0?void 0:(_formData$subType$=_formData$subType[0])===null||_formData$subType$===void 0?void 0:_formData$subType$.value)==="scaled_float"?external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:PARAMETERS_DEFINITION.scaling_factor.title,description:PARAMETERS_DEFINITION.scaling_factor.description,withToggle:false},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"scaling_factor",config:getFieldConfig("scaling_factor"),component:components_["Field"],"data-test-subj":"scalingFactor"})):null}),external_kbnSharedDeps_React_default.a.createElement(IndexParameter,{hasIndexOptions:false}),external_kbnSharedDeps_React_default.a.createElement(IgnoreMalformedParameter,null)),external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(CoerceNumberParameter,null),external_kbnSharedDeps_React_default.a.createElement(DocValuesParameter,null),external_kbnSharedDeps_React_default.a.createElement(CopyToParameter,{defaultToggleValue:numeric_type_getDefaultToggleValue("copy_to",field.source)}),external_kbnSharedDeps_React_default.a.createElement(NullValueParameter,{description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.numeric.nullValueFieldDescription",{defaultMessage:"Accepts a numeric value of the same type as the field which is substituted for any explicit null values."}),defaultToggleValue:numeric_type_getDefaultToggleValue("null_value",field.source)},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"null_value",component:components_["NumericField"],config:getFieldConfig("null_value_numeric")})),external_kbnSharedDeps_React_default.a.createElement(StoreParameter,null),external_kbnSharedDeps_React_default.a.createElement(MetaParameter,{defaultToggleValue:numeric_type_getDefaultToggleValue("meta",field.source)}),external_kbnSharedDeps_React_default.a.createElement(BoostParameter,{defaultToggleValue:numeric_type_getDefaultToggleValue("boost",field.source)})));const text_type_getDefaultToggleValue=(param,field)=>{switch(param){case"boost":case"position_increment_gap":case"similarity":case"meta":case"term_vector":{return field[param]!==undefined&&field[param]!==getFieldConfig(param).defaultValue}case"analyzers":{return field.search_analyzer!==undefined&&field.search_analyzer!==field.analyzer}case"copy_to":{return field[param]!==undefined&&field[param]!==""}case"indexPrefixes":{if(field.index_prefixes===undefined){return false}const minCharsValue=field.index_prefixes.min_chars;const defaultMinCharsValue=getFieldConfig("index_prefixes","min_chars").defaultValue;const maxCharsValue=field.index_prefixes.max_chars;const defaultMaxCharsValue=getFieldConfig("index_prefixes","min_chars").defaultValue;return minCharsValue!==defaultMinCharsValue||maxCharsValue!==defaultMaxCharsValue}case"fielddata":{return field.fielddata===true?true:field.fielddata_frequency_filter!==undefined}default:return false}};const TextType=external_kbnSharedDeps_React_default.a.memo(({field:field})=>{const onIndexPrefixesChanage=(minField,maxField)=>([min,max])=>{minField.setValue(min);maxField.setValue(max)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(IndexParameter,null)),external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(AnalyzersParameter,{field:field,withSearchQuoteAnalyzer:true}),external_kbnSharedDeps_React_default.a.createElement(EagerGlobalOrdinalsParameter,null),external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.indexPhrasesFieldTitle",{defaultMessage:"Index phrases"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.indexPhrasesFieldDescription",{defaultMessage:"Whether to index two-term word combinations into a separate field. Activating this will speed up phrase queries, but could slow down indexing."}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.indexPhrasesDocLinkText",{defaultMessage:"Index phrases documentation"}),href:documentationService.getIndexPhrasesLink()},formFieldPath:"index_phrases"}),external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.indexPrefixesFieldTitle",{defaultMessage:"Set index prefixes"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.indexPrefixesFieldDescription",{defaultMessage:"Whether to index prefixes of 2 and 5 characters into a separate field. Activating this will speed up prefix queries, but could slow down indexing."}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.indexPrefixesDocLinkText",{defaultMessage:"Index prefixes documentation"}),href:documentationService.getIndexPrefixesLink()},defaultToggleValue:text_type_getDefaultToggleValue("indexPrefixes",field.source)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.indexPrefixesRangeFieldLabel",{defaultMessage:"Min/max prefix length"}),fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseMultiFields"],{fields:{min:{path:"index_prefixes.min_chars",config:getFieldConfig("index_prefixes","min_chars")},max:{path:"index_prefixes.max_chars",config:getFieldConfig("index_prefixes","max_chars")}}},({min:min,max:max})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDualRange"],{min:0,max:20,value:[min.value,max.value],onChange:onIndexPrefixesChanage(min,max),showInput:true,fullWidth:true})))),external_kbnSharedDeps_React_default.a.createElement(NormsParameter,null),external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.positionIncrementGapFieldTitle",{defaultMessage:"Set position increment gap"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.positionIncrementGapFieldDescription",{defaultMessage:"The number of fake term positions which should be inserted between each element of an array of strings."}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.positionIncrementGapDocLinkText",{defaultMessage:"Position increment gap documentation"}),href:documentationService.getPositionIncrementGapLink()},defaultToggleValue:text_type_getDefaultToggleValue("position_increment_gap",field.source)},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["FormDataProvider"],{pathsToWatch:"index_options"},formData=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"position_increment_gap",config:getFieldConfig("position_increment_gap"),component:components_["RangeField"],componentProps:{euiFieldProps:{min:0,max:200,showInput:true,fullWidth:true}}}),formData.index_options!=="positions"&&formData.index_options!=="offsets"&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.positionsErrorTitle",{defaultMessage:"Positions not enabled."}),color:"danger",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.positionsErrorMessage",{defaultMessage:'You need to set the index options (under the "Searchable" toggle) to "Positions" or "Offsets" in order to be able to change the position increment gap.'}))))))),external_kbnSharedDeps_React_default.a.createElement(SimilarityParameter,{defaultToggleValue:text_type_getDefaultToggleValue("similarity",field.source)}),external_kbnSharedDeps_React_default.a.createElement(TermVectorParameter,{field:field,defaultToggleValue:text_type_getDefaultToggleValue("term_vector",field.source)}),external_kbnSharedDeps_React_default.a.createElement(FieldDataParameter,{field:field,defaultToggleValue:text_type_getDefaultToggleValue("fielddata",field.source)}),external_kbnSharedDeps_React_default.a.createElement(CopyToParameter,{defaultToggleValue:text_type_getDefaultToggleValue("copy_to",field.source)}),external_kbnSharedDeps_React_default.a.createElement(StoreParameter,null),external_kbnSharedDeps_React_default.a.createElement(MetaParameter,{defaultToggleValue:text_type_getDefaultToggleValue("meta",field.source)}),external_kbnSharedDeps_React_default.a.createElement(BoostParameter,{defaultToggleValue:text_type_getDefaultToggleValue("boost",field.source)})))});const boolean_type_getDefaultToggleValue=(param,field)=>{switch(param){case"meta":case"boost":{return field[param]!==undefined&&field[param]!==getFieldConfig(param).defaultValue}case"null_value":{return field.null_value!==undefined}default:return false}};const nullValueOptions=[{value:0,text:`"true"`},{value:1,text:"true"},{value:2,text:`"false"`},{value:3,text:"false"}];const BooleanType=({field:field})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(IndexParameter,{hasIndexOptions:false})),external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(DocValuesParameter,null),external_kbnSharedDeps_React_default.a.createElement(NullValueParameter,{defaultToggleValue:boolean_type_getDefaultToggleValue("null_value",field.source),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.booleanNullValueFieldDescription",{defaultMessage:"Replace explicit null values with a specific boolean value so that it can be indexed and searched."})},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"null_value",config:getFieldConfig("null_value_boolean"),component:components_["SelectField"],componentProps:{euiFieldProps:{options:nullValueOptions,fullWidth:true}}})),external_kbnSharedDeps_React_default.a.createElement(StoreParameter,null),external_kbnSharedDeps_React_default.a.createElement(MetaParameter,{defaultToggleValue:boolean_type_getDefaultToggleValue("meta",field.source)}),external_kbnSharedDeps_React_default.a.createElement(BoostParameter,{defaultToggleValue:boolean_type_getDefaultToggleValue("boost",field.source)})));const binary_type_getDefaultToggleValue=(param,field)=>field[param]!==undefined&&field[param]!==getFieldConfig(param).defaultValue;const BinaryType=({field:field})=>external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(DocValuesParameter,{configPath:"doc_values_binary"}),external_kbnSharedDeps_React_default.a.createElement(StoreParameter,null),external_kbnSharedDeps_React_default.a.createElement(MetaParameter,{defaultToggleValue:binary_type_getDefaultToggleValue("meta",field.source)}));const range_type_getDefaultToggleValue=(param,field)=>field[param]!==undefined&&field[param]!==getFieldConfig(param).defaultValue;const RangeType=({field:field})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(IndexParameter,{hasIndexOptions:false}),external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["FormDataProvider"],{pathsToWatch:"subType"},formData=>{var _formData$subType,_formData$subType$;return((_formData$subType=formData.subType)===null||_formData$subType===void 0?void 0:(_formData$subType$=_formData$subType[0])===null||_formData$subType$===void 0?void 0:_formData$subType$.value)==="date_range"?external_kbnSharedDeps_React_default.a.createElement(FormatParameter,{defaultValue:field.source.format,defaultToggleValue:range_type_getDefaultToggleValue("format",field.source)}):null})),external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["FormDataProvider"],{pathsToWatch:"subType"},formData=>{var _formData$subType2,_formData$subType2$;return((_formData$subType2=formData.subType)===null||_formData$subType2===void 0?void 0:(_formData$subType2$=_formData$subType2[0])===null||_formData$subType2$===void 0?void 0:_formData$subType2$.value)==="date_range"?external_kbnSharedDeps_React_default.a.createElement(LocaleParameter,{defaultToggleValue:range_type_getDefaultToggleValue("locale",field.source)}):null}),external_kbnSharedDeps_React_default.a.createElement(CoerceNumberParameter,null),external_kbnSharedDeps_React_default.a.createElement(StoreParameter,null),external_kbnSharedDeps_React_default.a.createElement(MetaParameter,{defaultToggleValue:range_type_getDefaultToggleValue("meta",field.source)}),external_kbnSharedDeps_React_default.a.createElement(BoostParameter,{defaultToggleValue:range_type_getDefaultToggleValue("boost",field.source)})));const ip_type_getDefaultToggleValue=(param,field)=>{switch(param){case"boost":{return field[param]!==undefined&&field[param]!==getFieldConfig(param).defaultValue}case"null_value":{return field.null_value!==undefined&&field.null_value!==""}default:return false}};const IpType=({field:field})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(IndexParameter,{hasIndexOptions:false})),external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(DocValuesParameter,null),external_kbnSharedDeps_React_default.a.createElement(NullValueParameter,{defaultToggleValue:ip_type_getDefaultToggleValue("null_value",field.source)},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"null_value",config:getFieldConfig("null_value_ip"),component:components_["Field"]})),external_kbnSharedDeps_React_default.a.createElement(StoreParameter,null),external_kbnSharedDeps_React_default.a.createElement(BoostParameter,{defaultToggleValue:ip_type_getDefaultToggleValue("boost",field.source)})));const token_count_type_getDefaultToggleValue=(param,field)=>{switch(param){case"analyzer":case"meta":case"boost":{return field[param]!==undefined&&field[param]!==getFieldConfig(param).defaultValue}case"null_value":{return field.null_value!==undefined&&field.null_value!==""}default:return false}};const TokenCountType=({field:field})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.tokenCount.analyzerSectionTitle",{defaultMessage:"Analyzer"}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.tokenCount.analyzerLinkText",{defaultMessage:"Analyzer documentation"}),href:documentationService.getAnalyzerLink()},withToggle:false},external_kbnSharedDeps_React_default.a.createElement(AnalyzerParameter,{path:"analyzer",config:{...getFieldConfig("analyzer"),defaultValue:STANDARD},defaultValue:field.source.analyzer,allowsIndexDefaultOption:false})),external_kbnSharedDeps_React_default.a.createElement(IndexParameter,{hasIndexOptions:false})),external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.tokenCount.enablePositionIncrementsFieldTitle",{defaultMessage:"Enable position increments"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.tokenCount.enablePositionIncrementsFieldDescription",{defaultMessage:"Whether to count position increments."}),formFieldPath:"enable_position_increments"}),external_kbnSharedDeps_React_default.a.createElement(DocValuesParameter,null),external_kbnSharedDeps_React_default.a.createElement(NullValueParameter,{defaultToggleValue:token_count_type_getDefaultToggleValue("null_value",field.source),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.tokenCount.nullValueFieldDescription",{defaultMessage:"Accepts a numeric value of the same type as the field which is substituted for any explicit null values."})},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"null_value",component:components_["NumericField"],config:getFieldConfig("null_value_numeric")})),external_kbnSharedDeps_React_default.a.createElement(StoreParameter,null),external_kbnSharedDeps_React_default.a.createElement(MetaParameter,{defaultToggleValue:token_count_type_getDefaultToggleValue("meta",field.source)}),external_kbnSharedDeps_React_default.a.createElement(BoostParameter,{defaultToggleValue:token_count_type_getDefaultToggleValue("boost",field.source)})));const completion_type_getDefaultToggleValue=(param,field)=>{switch(param){case"meta":case"max_input_length":{return field[param]!==undefined&&field[param]!==getFieldConfig(param).defaultValue}case"analyzers":{return field.search_analyzer!==undefined&&field.search_analyzer!==field.analyzer}default:return false}};const CompletionType=({field:field})=>external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(AnalyzersParameter,{field:field}),external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.completion.maxInputLengthFieldTitle",{defaultMessage:"Set max input length"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.completion.maxInputLengthFieldDescription",{defaultMessage:"Limits the length of a single input."}),defaultToggleValue:completion_type_getDefaultToggleValue("max_input_length",field.source)},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"max_input_length",config:getFieldConfig("max_input_length"),component:components_["Field"]})),external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.completion.preserveSeparatorsFieldTitle",{defaultMessage:"Preserve separators"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.completion.preserveSeparatorsFieldDescription",{defaultMessage:"Preserves the separators."}),formFieldPath:"preserve_separators"}),external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.completion.preservePositionIncrementsFieldTitle",{defaultMessage:"Preserve position increments"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.completion.preservePositionIncrementsFieldDescription",{defaultMessage:"Enables position increments."}),formFieldPath:"preserve_position_increments"}),external_kbnSharedDeps_React_default.a.createElement(MetaParameter,{defaultToggleValue:completion_type_getDefaultToggleValue("meta",field.source)}));const geo_point_type_getDefaultToggleValue=(param,field)=>{switch(param){case"meta":return field[param]!==undefined&&field[param]!==getFieldConfig(param).defaultValue;case"null_value":{return field.null_value!==undefined}default:return false}};const GeoPointType=({field:field})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(IgnoreMalformedParameter,{description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.geoPoint.ignoreMalformedFieldDescription",{defaultMessage:"By default, documents that contain malformed geo-points are not indexed. If enabled, these documents are indexed, but fields with malformed geo-points are filtered out. Be careful: if too many documents are indexed this way, queries on the field become meaningless."})})),external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(IgnoreZValueParameter,null),external_kbnSharedDeps_React_default.a.createElement(NullValueParameter,{defaultToggleValue:geo_point_type_getDefaultToggleValue("null_value",field.source),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.geoPoint.nullValueFieldDescription",{defaultMessage:"Replace explicit null values with a geo-point value so that it can be indexed and searched."})},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"null_value",component:components_["TextAreaField"],config:getFieldConfig("null_value_geo_point")})),external_kbnSharedDeps_React_default.a.createElement(MetaParameter,{defaultToggleValue:geo_point_type_getDefaultToggleValue("meta",field.source)})));const date_type_getDefaultToggleValue=(param,field)=>{switch(param){case"locale":case"format":case"meta":case"boost":{return field[param]!==undefined&&field[param]!==getFieldConfig(param).defaultValue}case"null_value":{return field.null_value!==undefined&&field.null_value!==""}default:return false}};const DateType=({field:field})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(IndexParameter,{hasIndexOptions:false}),external_kbnSharedDeps_React_default.a.createElement(FormatParameter,{defaultValue:field.source.format,defaultToggleValue:date_type_getDefaultToggleValue("format",field.source)}),external_kbnSharedDeps_React_default.a.createElement(IgnoreMalformedParameter,null)),external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(LocaleParameter,{defaultToggleValue:date_type_getDefaultToggleValue("locale",field.source)}),external_kbnSharedDeps_React_default.a.createElement(DocValuesParameter,null),external_kbnSharedDeps_React_default.a.createElement(NullValueParameter,{defaultToggleValue:date_type_getDefaultToggleValue("null_value",field.source),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dateType.nullValueFieldDescription",{defaultMessage:"Replace explicit null values with a date value so that it can be indexed and searched."})}),external_kbnSharedDeps_React_default.a.createElement(StoreParameter,null),external_kbnSharedDeps_React_default.a.createElement(MetaParameter,{defaultToggleValue:date_type_getDefaultToggleValue("meta",field.source)}),external_kbnSharedDeps_React_default.a.createElement(BoostParameter,{defaultToggleValue:date_type_getDefaultToggleValue("boost",field.source)})));const geo_shape_type_getDefaultToggleValue=(param,field)=>{const{defaultValue:defaultValue}=getFieldConfig(param);switch(param){case"orientation":{return field[param]!==undefined&&field[param]!==defaultValue}default:return field[param]!==undefined?field[param]:defaultValue!==undefined?defaultValue:false}};const GeoShapeType=({field:field})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(IgnoreMalformedParameter,{description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.geoShape.ignoreMalformedFieldDescription",{defaultMessage:"By default, documents that contain malformed GeoJSON or WKT shapes are not indexed. If enabled, these documents are indexed, but fields with malformed shapes are filtered out. Be careful: if too many documents are indexed this way, queries on the field become meaningless."})})),external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(OrientationParameter,{defaultToggleValue:geo_shape_type_getDefaultToggleValue("orientation",field.source)}),external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.geoShape.pointsOnlyFieldTitle",{defaultMessage:"Points only"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.geoShape.pointsOnlyFieldDescription",{defaultMessage:"Optimizes geo-shape queries if this field contains only geo-points. Shapes, including multi-point shapes, will be rejected."}),formFieldPath:"points_only"}),external_kbnSharedDeps_React_default.a.createElement(IgnoreZValueParameter,null),external_kbnSharedDeps_React_default.a.createElement(CoerceShapeParameter,null)));const search_as_you_type_getDefaultToggleValue=(param,field)=>{switch(param){case"similarity":case"term_vector":case"meta":case"max_shingle_size":{return field[param]!==undefined&&field[param]!==getFieldConfig(param).defaultValue}case"analyzers":{return field.search_analyzer!==undefined&&field.search_analyzer!==field.analyzer}default:return false}};const SearchAsYouType=external_kbnSharedDeps_React_default.a.memo(({field:field})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(IndexParameter,{config:{...getFieldConfig("index_options"),defaultValue:"positions"}})),external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(AnalyzersParameter,{field:field,withSearchQuoteAnalyzer:true}),external_kbnSharedDeps_React_default.a.createElement(MaxShingleSizeParameter,{defaultToggleValue:search_as_you_type_getDefaultToggleValue("max_shingle_size",field.source)}),external_kbnSharedDeps_React_default.a.createElement(NormsParameter,null),external_kbnSharedDeps_React_default.a.createElement(SimilarityParameter,{defaultToggleValue:search_as_you_type_getDefaultToggleValue("similarity",field.source)}),external_kbnSharedDeps_React_default.a.createElement(TermVectorParameter,{field:field,defaultToggleValue:search_as_you_type_getDefaultToggleValue("term_vector",field.source)}),external_kbnSharedDeps_React_default.a.createElement(StoreParameter,null),external_kbnSharedDeps_React_default.a.createElement(MetaParameter,{defaultToggleValue:search_as_you_type_getDefaultToggleValue("meta",field.source)}))));const flattened_type_getDefaultToggleValue=(param,field)=>{switch(param){case"boost":case"ignore_above":case"meta":case"similarity":{return field[param]!==undefined&&field[param]!==getFieldConfig(param).defaultValue}case"null_value":{return field.null_value!==undefined&&field.null_value!==""}default:return false}};const FlattenedType=external_kbnSharedDeps_React_default.a.memo(({field:field})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(IndexParameter,{config:getFieldConfig("index_options_flattened"),indexOptions:PARAMETERS_OPTIONS.index_options_flattened})),external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(EagerGlobalOrdinalsParameter,null),external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.depthLimitTitle",{defaultMessage:"Customize depth limit"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.depthLimitDescription",{defaultMessage:"The maximum allowed depth of the flattened object field, in terms of nested inner objects. Defaults to 20."})},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"depth_limit",config:getFieldConfig("depth_limit"),component:components_["Field"]})),external_kbnSharedDeps_React_default.a.createElement(IgnoreAboveParameter,{defaultToggleValue:flattened_type_getDefaultToggleValue("ignore_above",field.source)}),external_kbnSharedDeps_React_default.a.createElement(SplitQueriesOnWhitespaceParameter,null),external_kbnSharedDeps_React_default.a.createElement(SimilarityParameter,{defaultToggleValue:flattened_type_getDefaultToggleValue("similarity",field.source)}),external_kbnSharedDeps_React_default.a.createElement(DocValuesParameter,null),external_kbnSharedDeps_React_default.a.createElement(NullValueParameter,{defaultToggleValue:flattened_type_getDefaultToggleValue("null_value",field.source)}),external_kbnSharedDeps_React_default.a.createElement(MetaParameter,{defaultToggleValue:flattened_type_getDefaultToggleValue("meta",field.source)}),external_kbnSharedDeps_React_default.a.createElement(BoostParameter,{defaultToggleValue:flattened_type_getDefaultToggleValue("boost",field.source)}))));const shape_type_getDefaultToggleValue=(param,field)=>{const{defaultValue:defaultValue}=getFieldConfig(param);switch(param){case"boost":case"orientation":{return field[param]!==undefined&&field[param]!==defaultValue}default:return field[param]!==undefined?field[param]:defaultValue!==undefined?defaultValue:false}};const ShapeType=({field:field})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(IgnoreMalformedParameter,{description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.shapeType.ignoredMalformedFieldDescription",{defaultMessage:"By default, documents that contain malformed GeoJSON or WKT shapes are not indexed. If enabled, these documents are indexed, but fields with malformed shapes are filtered out. Be careful: if too many documents are indexed this way, queries on the field become meaningless."})})),external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(OrientationParameter,{defaultToggleValue:shape_type_getDefaultToggleValue("orientation",field.source)}),external_kbnSharedDeps_React_default.a.createElement(IgnoreZValueParameter,null),external_kbnSharedDeps_React_default.a.createElement(CoerceShapeParameter,null)));const DenseVectorType=()=>external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"dims",config:getFieldConfig("dims"),component:components_["Field"]}));const ObjectType=({field:field})=>external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(DynamicParameter,{defaultToggleValue:field.source.dynamic===true||field.source.dynamic===undefined}),external_kbnSharedDeps_React_default.a.createElement(EnabledParameter,null));const OtherType=()=>external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(OtherTypeJsonParameter,null));const NestedType=({field:field})=>external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(DynamicParameter,{defaultToggleValue:field.source.dynamic===true||field.source.dynamic===undefined}));const join_type_i18nTexts={eagerGlobalOrdinalsDescription:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.join.eagerGlobalOrdinalsFieldDescription",{defaultMessage:"The join field uses global ordinals to speed up joins. By default, if the index has changed, global ordinals for the join field will be rebuilt as part of the refresh. This can add significant time to the refresh, however most of the times this is the right trade-off."})};const JoinType=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(RelationsParameter,null)),external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(EagerGlobalOrdinalsParameter,{configPath:"eager_global_ordinals_join",description:join_type_i18nTexts.eagerGlobalOrdinalsDescription})));const histogram_type_getDefaultToggleValue=(param,field)=>field[param]!==undefined&&field[param]!==getFieldConfig(param).defaultValue;const HistogramType=({field:field})=>external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(IgnoreMalformedParameter,null),external_kbnSharedDeps_React_default.a.createElement(MetaParameter,{defaultToggleValue:histogram_type_getDefaultToggleValue("meta",field.source)}));const constant_keyword_type_getDefaultToggleValue=(param,field)=>field[param]!==undefined&&field[param]!==getFieldConfig(param).defaultValue;const ConstantKeywordType=({field:field})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.constantKeyword.valueFieldTitle",{defaultMessage:"Set value"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.constantKeyword.valueFieldDescription",{defaultMessage:"The value of this field for all documents in the index. If not specified, defaults to the value specified in the first document indexed."}),defaultToggleValue:constant_keyword_type_getDefaultToggleValue("value",field.source)},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"value",config:getFieldConfig("value"),component:components_["Field"]}))),external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(MetaParameter,{defaultToggleValue:constant_keyword_type_getDefaultToggleValue("meta",field.source)})));const RankFeatureType=()=>external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.rankFeature.positiveScoreImpactFieldTitle",{defaultMessage:"Positive score impact"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.rankFeature.positiveScoreImpactFieldDescription",{defaultMessage:"Rank features that correlate negatively with the score should disable this field."}),formFieldPath:"positive_score_impact"}));const wildcard_type_getDefaultToggleValue=(param,field)=>field[param]!==undefined&&field[param]!==getFieldConfig(param).defaultValue;const WildcardType=({field:field})=>external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(IgnoreAboveParameter,{defaultToggleValue:wildcard_type_getDefaultToggleValue("ignore_above",field.source)}));const point_type_getDefaultToggleValue=(param,field)=>field[param]!==undefined&&field[param]!==getFieldConfig(param).defaultValue;const PointType=({field:field})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(BasicParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(IgnoreMalformedParameter,{description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.point.ignoreMalformedFieldDescription",{defaultMessage:"By default, documents that contain malformed points are not indexed. If enabled, these documents are indexed, but fields with malformed points are filtered out. Be careful: if too many documents are indexed this way, queries on the field become meaningless."})})),external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(IgnoreZValueParameter,{description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.point.ignoreZValueFieldDescription",{defaultMessage:"Three dimension points will be accepted, but only x and y values will be indexed; the third dimension is ignored."})}),external_kbnSharedDeps_React_default.a.createElement(NullValueParameter,{defaultToggleValue:point_type_getDefaultToggleValue("null_value",field.source),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.point.nullValueFieldDescription",{defaultMessage:"Replace explicit null values with a point value so that it can be indexed and searched."})},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"null_value",component:components_["TextAreaField"],config:getFieldConfig("null_value_point")})),external_kbnSharedDeps_React_default.a.createElement(MetaParameter,{defaultToggleValue:point_type_getDefaultToggleValue("meta",field.source)})));const version_type_getDefaultToggleValue=(param,field)=>field[param]!==undefined&&field[param]!==getFieldConfig(param).defaultValue;const VersionType=({field:field})=>external_kbnSharedDeps_React_default.a.createElement(AdvancedParametersSection,null,external_kbnSharedDeps_React_default.a.createElement(MetaParameter,{defaultToggleValue:version_type_getDefaultToggleValue("meta",field.source)}));const typeToParametersFormMap={alias:AliasType,keyword:KeywordType,numeric:NumericType,text:TextType,boolean:BooleanType,binary:BinaryType,range:RangeType,ip:IpType,token_count:TokenCountType,completion:CompletionType,geo_point:GeoPointType,date:DateType,date_nanos:DateType,geo_shape:GeoShapeType,search_as_you_type:SearchAsYouType,flattened:FlattenedType,shape:ShapeType,dense_vector:DenseVectorType,object:ObjectType,other:OtherType,nested:NestedType,join:JoinType,histogram:HistogramType,constant_keyword:ConstantKeywordType,rank_feature:RankFeatureType,wildcard:WildcardType,point:PointType,version:VersionType};const getParametersFormForType=(type,subType)=>subType===undefined?typeToParametersFormMap[type]:typeToParametersFormMap[subType]||typeToParametersFormMap[type];const FieldBetaBadge=()=>{const betaText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.fieldBetaBadgeLabel",{defaultMessage:"Beta"});const tooltipText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.fieldBetaBadgeTooltip",{defaultMessage:"This field type is not GA. Please help us by reporting any bugs."});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBetaBadge"],{label:betaText,tooltipContent:tooltipText})};const FieldDescriptionSection=({children:children,isMultiField:isMultiField})=>{if(!children&&!isMultiField){return null}return external_kbnSharedDeps_React_default.a.createElement("section",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},children,isMultiField&&external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.multiFieldIntroductionText",{defaultMessage:"This field is a multi-field. You can use multi-fields to index the same field in different ways."}))))};const getTypeDefinition=(type,subType)=>{if(!type){return}const typeDefinition=TYPE_DEFINITION[type];const hasSubType=typeDefinition.subTypes!==undefined;if(hasSubType){if(subType){return TYPE_DEFINITION[subType]}return}return typeDefinition};const EditFieldHeaderForm=external_kbnSharedDeps_React_default.a.memo(({defaultValue:defaultValue,isRootLevelField:isRootLevelField,isMultiField:isMultiField})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(NameParameter,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(TypeParameter,{isRootLevelField:isRootLevelField,isMultiField:isMultiField})),external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["FormDataProvider"],{pathsToWatch:"type"},({type:type})=>{if(type===undefined){return null}const[fieldType]=type;return external_kbnSharedDeps_React_default.a.createElement(SubTypeParameter,{key:fieldType.value,type:fieldType.value,defaultValueType:defaultValue.type,isMultiField:isMultiField,isRootLevelField:isRootLevelField})})),external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["FormDataProvider"],{pathsToWatch:["type","subType"]},({type:type,subType:subType})=>{var _ref,_typeDefinition$descr;const typeDefinition=getTypeDefinition(type[0].value,subType&&subType[0].value);const description=(_ref=typeDefinition===null||typeDefinition===void 0?void 0:(_typeDefinition$descr=typeDefinition.description)===null||_typeDefinition$descr===void 0?void 0:_typeDefinition$descr.call(typeDefinition))!==null&&_ref!==void 0?_ref:null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),(typeDefinition===null||typeDefinition===void 0?void 0:typeDefinition.isBeta)&&external_kbnSharedDeps_React_default.a.createElement(FieldBetaBadge,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(FieldDescriptionSection,{isMultiField:isMultiField},description))})));const limitStringLength=(text,limit=18)=>{if(text.length<=limit){return text}return`...${text.substr(limit*-1)}`};const FormWrapper=({children:children})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,children);const EditField=external_kbnSharedDeps_React_default.a.memo(({form:form,field:field,allFields:allFields,exitEdit:exitEdit,updateField:updateField})=>{const submitForm=async()=>{const{isValid:isValid,data:data}=await form.submit();if(isValid){updateField({...field,source:data})}};const{isMultiField:isMultiField}=field;return external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["Form"],{form:form,FormWrapper:FormWrapper},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",{"data-test-subj":"flyoutTitle"},isMultiField?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.editMultiFieldTitle",{defaultMessage:"Edit multi-field '{fieldName}'",values:{fieldName:limitStringLength(field.source.name)}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.editFieldTitle",{defaultMessage:"Edit field '{fieldName}'",values:{fieldName:limitStringLength(field.source.name)}}))))),external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["FormDataProvider"],{pathsToWatch:["type","subType"]},({type:type,subType:subType})=>{var _subType$,_type$;const linkDocumentation=documentationService.getTypeDocLink(subType===null||subType===void 0?void 0:(_subType$=subType[0])===null||_subType$===void 0?void 0:_subType$.value)||documentationService.getTypeDocLink(type===null||type===void 0?void 0:(_type$=type[0])===null||_type$===void 0?void 0:_type$.value);if(!linkDocumentation){return null}const typeDefinition=TYPE_DEFINITION[type[0].value];const subTypeDefinition=TYPE_DEFINITION[subType===null||subType===void 0?void 0:subType[0].value];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",flush:"right",href:linkDocumentation,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.editField.typeDocumentation",{defaultMessage:"{type} documentation",values:{type:subTypeDefinition?subTypeDefinition.label:typeDefinition.label}})))})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,"data-test-subj":"fieldPath"},external_kbnSharedDeps_React_default.a.createElement(CodeBlock,{padding:"small"},field.path.join(" > "))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,external_kbnSharedDeps_React_default.a.createElement(EditFieldHeaderForm,{defaultValue:field.source,isRootLevelField:field.parentId===undefined,isMultiField:isMultiField}),external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["FormDataProvider"],{pathsToWatch:["type","subType"]},({type:type,subType:subType})=>{const ParametersForm=getParametersFormForType(type===null||type===void 0?void 0:type[0].value,subType===null||subType===void 0?void 0:subType[0].value);if(!ParametersForm){return null}return external_kbnSharedDeps_React_default.a.createElement(ParametersForm,{key:subType!==null&&subType!==void 0?subType:type,field:field,allFields:allFields,isMultiField:isMultiField})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],null,form.isSubmitted&&!form.isValid&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.editFieldFlyout.validationErrorTitle",{defaultMessage:"Fix errors in form before continuing."}),color:"danger",iconType:"cross","data-test-subj":"formError"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:exitEdit},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.editFieldCancelButtonLabel",{defaultMessage:"Cancel"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:submitForm,type:"submit",disabled:form.isSubmitted&&!form.isValid,"data-test-subj":"editFieldUpdateButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.editFieldUpdateButtonLabel",{defaultMessage:"Update"}))))))});const useUpdateField=()=>{const[state,setState]=Object(external_kbnSharedDeps_React_["useState"])({isModalOpen:false});const dispatch=useDispatch();const{fields:fields}=useMappingsState();const{byId:byId,aliases:aliases}=fields;const confirmButtonText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.updateField.confirmationModal.confirmDescription",{defaultMessage:"Confirm type change"});let modalTitle="";if(state.field){const{source:source}=state.field;modalTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.updateField.confirmationModal.title",{defaultMessage:"Confirm change '{fieldName}' type to '{fieldType}'.",values:{fieldName:source.name,fieldType:source.type}})}const closeModal=()=>{setState({isModalOpen:false})};const updateField=Object(external_kbnSharedDeps_React_["useCallback"])(field=>{const previousField=byId[field.id];const willDeleteChildFields=(oldType,newType)=>{const{hasChildFields:hasChildFields,hasMultiFields:hasMultiFields}=field;if(!hasChildFields&&!hasMultiFields){return false}return shouldDeleteChildFieldsAfterTypeChange(oldType,newType)};if(field.source.type!==previousField.source.type){const aliasesOnField=aliases[field.id]||[];const aliasesOnFieldAndDescendants=getAllDescendantAliases(field,fields);const isReferencedByAlias=aliasesOnField&&Boolean(aliasesOnField.length);const nextTypeCanHaveAlias=!PARAMETERS_DEFINITION.path.targetTypesNotAllowed.includes(field.source.type);let requiresConfirmation;let aliasesToDelete=[];if(isReferencedByAlias&&!nextTypeCanHaveAlias){aliasesToDelete=aliasesOnFieldAndDescendants;requiresConfirmation=true}else{requiresConfirmation=willDeleteChildFields(previousField.source.type,field.source.type);if(requiresConfirmation){aliasesToDelete=aliasesOnFieldAndDescendants.filter(id=>aliasesOnField.includes(id)===false)}}if(requiresConfirmation){setState({isModalOpen:true,field:field,aliases:Boolean(aliasesToDelete.length)?aliasesToDelete.map(id=>byId[id].path.join(" > ")).sort():undefined});return}}dispatch({type:"field.edit",value:field.source})},[dispatch,aliases,fields,byId]);const confirmTypeUpdate=()=>{dispatch({type:"field.edit",value:state.field.source});closeModal()};return{updateField:updateField,modal:{isOpen:state.isModalOpen,props:{childFields:state.field&&state.field.childFields,title:modalTitle,aliases:state.aliases,byId:byId,confirmButtonText:confirmButtonText,onConfirm:confirmTypeUpdate,onCancel:closeModal}}}};const defaultFlyoutProps={"data-test-subj":"mappingsEditorFieldEdit","aria-labelledby":"mappingsEditorFieldEditTitle",className:"mappingsEditor__editField",maxWidth:720};const EditFieldContainer=external_kbnSharedDeps_React_default.a.memo(({exitEdit:exitEdit})=>{const{fields:fields,documentFields:documentFields}=useMappingsState();const dispatch=useDispatch();const{updateField:updateField,modal:modal}=useUpdateField();const{status:status,fieldToEdit:fieldToEdit}=documentFields;const isEditing=status==="editingField";const field=fields.byId[fieldToEdit];const formDefaultValue=Object(external_kbnSharedDeps_React_["useMemo"])(()=>({...field===null||field===void 0?void 0:field.source}),[field===null||field===void 0?void 0:field.source]);const{form:form}=Object(hook_form_lib_["useForm"])({defaultValue:formDefaultValue,serializer:fieldSerializer,deserializer:fieldDeserializer,options:{stripEmptyFields:false},id:"edit-field"});const{subscribe:subscribe}=form;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const subscription=subscribe(updatedFieldForm=>{dispatch({type:"fieldForm.update",value:updatedFieldForm})});return subscription.unsubscribe},[subscribe,dispatch]);const renderModal=()=>modal.isOpen?external_kbnSharedDeps_React_default.a.createElement(ModalConfirmationDeleteFields,modal.props):null;if(!isEditing){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(EditField,{form:form,field:field,allFields:fields.byId,exitEdit:exitEdit,updateField:updateField}),renderModal())});const BasicParametersSection=({children:children})=>external_kbnSharedDeps_React_default.a.createElement("section",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),children);var external_kbnSharedDeps_Lodash_=__webpack_require__(26);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);const EditFieldFormRow=external_kbnSharedDeps_React_default.a.memo(({title:title,description:description,docLink:docLink,defaultToggleValue:defaultToggleValue,formFieldPath:formFieldPath,children:children,withToggle:withToggle=true,configPath:configPath,"data-test-subj":dataTestSubj})=>{const form=Object(hook_form_lib_["useFormContext"])();const initialVisibleState=withToggle===false?true:defaultToggleValue!==undefined?defaultToggleValue:formFieldPath!==undefined?getFieldConfig(configPath?configPath:formFieldPath).defaultValue:false;const[isContentVisible,setIsContentVisible]=Object(external_kbnSharedDeps_React_["useState"])(initialVisibleState);const isChildrenFunction=typeof children==="function";const onToggle=()=>{if(isContentVisible===true){form.reset({resetValues:false})}setIsContentVisible(!isContentVisible)};const renderToggleInput=()=>formFieldPath===undefined?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:title,checked:isContentVisible,onChange:onToggle,"data-test-subj":"formRowToggle",showLabel:false}):external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:formFieldPath,config:{...getFieldConfig(configPath?configPath:formFieldPath),defaultValue:initialVisibleState}},field=>external_kbnSharedDeps_React_default.a.createElement(components_["ToggleField"],{field:field,"data-test-subj":"abc",euiFieldProps:{label:title,showLabel:false,"data-test-subj":"formRowToggle"}}));const renderContent=()=>{const toggle=withToggle&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mappingsEditor__editFieldFormRow__toggle"},renderToggleInput());const controlsTitle=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,title));const controlsDescription=description&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued",className:"mappingsEditor__editField__formRow__description"},description);const controlsHeader=(controlsTitle||controlsDescription)&&external_kbnSharedDeps_React_default.a.createElement("div",{style:{paddingLeft:withToggle===false?"0":undefined}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,controlsTitle),docLink?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:docLink.text},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{href:docLink.href,target:"_blank",iconType:"help","aria-label":docLink.text}))):null),controlsDescription);const controls=(isContentVisible&&children!==undefined||isChildrenFunction)&&external_kbnSharedDeps_React_default.a.createElement("div",{style:{paddingLeft:withToggle===false?"0":undefined}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),isChildrenFunction?children(isContentVisible):children);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:"mappingsEditor__editField__formRow","data-test-subj":dataTestSubj},toggle,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement("div",null,controlsHeader,controls)))};return formFieldPath?external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["FormDataProvider"],{pathsToWatch:formFieldPath},formData=>{setIsContentVisible(Object(external_kbnSharedDeps_Lodash_["get"])(formData,formFieldPath));return renderContent()}):renderContent()});const AdvancedParametersSection=({children:children})=>{const[isVisible,setIsVisible]=Object(external_kbnSharedDeps_React_["useState"])(false);const toggleIsVisible=()=>{setIsVisible(!isVisible)};return external_kbnSharedDeps_React_default.a.createElement("div",{className:"mappingsEditor__editField__advancedSettings"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:toggleIsVisible,flush:"left","data-test-subj":"toggleAdvancedSetting"},isVisible?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.advancedSettings.hideButtonLabel",{defaultMessage:"Hide advanced settings"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.advancedSettings.showButtonLabel",{defaultMessage:"Show advanced settings"})),external_kbnSharedDeps_React_default.a.createElement("div",{style:{display:isVisible?"block":"none"},"data-test-subj":"advancedSettings"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement("div",null,children)))};const relationsSerializer=field=>{if(field.relations===undefined){return field}const relations=field.relations;const relationsSerialized=relations.reduce((acc,item)=>({...acc,[item.parent]:item.children.length===1?item.children[0]:item.children}),{});return{...field,relations:relationsSerialized}};const relationsDeserializer=field=>{if(field.relations===undefined){return field}const relations=field.relations;const relationsDeserialized=Object.entries(relations).map(([parent,children])=>({parent:parent,children:typeof children==="string"?[children]:children}));return{...field,relations:relationsDeserialized}};const childConfig={defaultValue:[]};const RelationsParameter=()=>{const renderWarning=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"warning",iconType:"alert",size:"s",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.join.multiLevelsParentJoinWarningTitle",defaultMessage:"Avoid using multiple levels to replicate a relational model. Each relation level increases computation time and memory consumption at query time. For best performance, {docsLink}",values:{docsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getJoinMultiLevelsPerformanceLink(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.join.multiLevelsPerformanceDocumentationLink",{defaultMessage:"denormalize your data."}))}})});return external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.relationshipsTitle",{defaultMessage:"Relationships"}),withToggle:false},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseArray"],{path:"relations",initialNumberOfItems:0},({items:items,addItem:addItem,removeItem:removeItem})=>{const columns=[{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.joinType.relationshipTable.parentColumnTitle",{defaultMessage:"Parent"}),render:item=>external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:"100%"}},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:`${item.path}.parent`,component:components_["TextField"],componentProps:{euiFieldProps:{"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.joinType.relationshipTable.parentFieldAriaLabel",{defaultMessage:"Parent field"})}},readDefaultValueOnForm:!item.isNew}))},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.joinType.relationshipTable.childrenColumnTitle",{defaultMessage:"Children"}),render:item=>external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:"100%"}},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:`${item.path}.children`,config:childConfig,component:components_["ComboBoxField"],componentProps:{euiFieldProps:{"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.joinType.relationshipTable.childrenFieldAriaLabel",{defaultMessage:"Children field"})}},readDefaultValueOnForm:!item.isNew}))},{width:"48px",actions:[{render:({id:id})=>{const label=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.joinType.relationshipTable.removeRelationshipTooltipLabel",{defaultMessage:"Remove relationship"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:label,delay:"long"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"data-test-subj":"removeRelationshipButton","aria-label":label,iconType:"minusInCircle",color:"danger",onClick:()=>removeItem(id)}))}}]}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,items.length>1&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,renderWarning(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBasicTable"],{items:items,itemId:"id",columns:columns,noItemsMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.joinType.relationshipTable.emptyTableMessage",{defaultMessage:"No relationship defined"}),hasActions:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:addItem,iconType:"plusInCircleFilled","data-test-subj":"addRelationButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.joinType.addRelationshipButtonLabel",{defaultMessage:"Add relationship"})))}))};const dynamicSerializer=field=>{if(field.dynamic_toggle===undefined){return field}const dynamic=field.dynamic_toggle===true?true:field.dynamic_strict===true?"strict":false;const{dynamic_toggle:dynamic_toggle,dynamic_strict:dynamic_strict,...rest}=field;return{...rest,dynamic:dynamic}};const dynamicDeserializer=field=>{if(field.dynamic===undefined){return field}const dynamicToggleValue=field.dynamic===true;const dynamicStrictValue=field.dynamic==="strict";return{...field,dynamic_toggle:dynamicToggleValue,dynamic_strict:dynamicStrictValue}};const DynamicParameter=({defaultToggleValue:defaultToggleValue})=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dynamicPropertyMappingParameter.fieldTitle",{defaultMessage:"Dynamic property mapping"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dynamicPropertyMappingParameter.fieldDescription",{defaultMessage:"By default, properties can be added dynamically to objects within a document, just by indexing a document with the object containing the new property."}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dynamicDocLinkText",{defaultMessage:"Dynamic documentation"}),href:documentationService.getDynamicLink()},formFieldPath:"dynamic_toggle",defaultToggleValue:defaultToggleValue},isOn=>isOn===false?external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"dynamic_strict",config:getFieldConfig("dynamic_strict"),component:components_["CheckBoxField"]}):null);const{validations:validations,...name_parameter_rest}=PARAMETERS_DEFINITION.name.fieldConfig;const NameParameter=()=>{const{fields:{rootLevelFields:rootLevelFields,byId:byId},documentFields:{fieldToAddFieldTo:fieldToAddFieldTo,fieldToEdit:fieldToEdit}}=useMappingsState();const initialName=fieldToEdit?byId[fieldToEdit].source.name:undefined;const parentId=fieldToEdit?byId[fieldToEdit].parentId:fieldToAddFieldTo;const uniqueNameValidator=Object(external_kbnSharedDeps_React_["useCallback"])(arg=>validateUniqueName({rootLevelFields:rootLevelFields,byId:byId},initialName,parentId)(arg),[rootLevelFields,byId,initialName,parentId]);const nameConfig=Object(external_kbnSharedDeps_React_["useMemo"])(()=>({...name_parameter_rest,validations:[...validations,{validator:uniqueNameValidator}]}),[uniqueNameValidator]);return external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"name",config:nameConfig,component:components_["TextField"],componentProps:{euiFieldProps:{"data-test-subj":"nameParameterInput"}}})};const IndexParameter=({indexOptions:indexOptions=PARAMETERS_OPTIONS.index_options,hasIndexOptions:hasIndexOptions=true,config:config=getFieldConfig("index_options")})=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.searchableFieldTitle",{defaultMessage:"Searchable"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.searchableFieldDescription",{defaultMessage:"Allow the field to be searched."}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.indexDocLinkText",{defaultMessage:"Searchable documentation"}),href:documentationService.getIndexLink()},formFieldPath:"index","data-test-subj":"indexParameter"},hasIndexOptions?external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"index_options",config:config,component:components_["Field"],componentProps:{euiFieldProps:{options:indexOptions}}}):undefined);const StoreParameter=()=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.storeFieldValueFieldTitle",{defaultMessage:"Store field value outside of _source"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.storeFieldValueFieldDescription",{defaultMessage:"This can be useful when the _source field is very large and you want to retrieve a few select fields without extracting them from _source."}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.storeDocLinkText",{defaultMessage:"Store documentation"}),href:documentationService.getStoreLink()},formFieldPath:"store"});const DocValuesParameter=({configPath:configPath="doc_values"})=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.docValuesFieldTitle",{defaultMessage:"Use doc values"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.docValuesFieldDescription",{defaultMessage:`Store each document's value for this field in memory so it can be used for sorting, aggregations, and in scripts.`}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.docValuesDocLinkText",{defaultMessage:"Doc values documentation"}),href:documentationService.getDocValuesLink()},formFieldPath:"doc_values",configPath:configPath});const BoostParameter=({defaultToggleValue:defaultToggleValue})=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.boostFieldTitle",{defaultMessage:"Set boost level"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.boostFieldDescription",{defaultMessage:"Boost this field at query time so it counts more toward the relevance score."}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.boostDocLinkText",{defaultMessage:"Boost documentation"}),href:documentationService.getBoostLink()},defaultToggleValue:defaultToggleValue},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"boost",config:getFieldConfig("boost"),component:components_["RangeField"],componentProps:{euiFieldProps:{min:1,max:20,showInput:true,fullWidth:true}}}));const ConfigContext=Object(external_kbnSharedDeps_React_["createContext"])(undefined);const ConfigProvider=({children:children})=>{const[state,setState]=Object(external_kbnSharedDeps_React_["useState"])({indexSettings:{}});return external_kbnSharedDeps_React_default.a.createElement(ConfigContext.Provider,{value:{value:state,update:setState}},children)};const useConfig=()=>{const ctx=Object(external_kbnSharedDeps_React_["useContext"])(ConfigContext);if(ctx===undefined){throw new Error("useConfig must be used within a <ConfigProvider />")}return ctx};const areOptionsSuperSelect=options=>{if(!options||!Boolean(options.length)){return false}return{}.hasOwnProperty.call(options[0],"text")===false};const AnalyzerParameterSelects=({onChange:onChange,mainDefaultValue:mainDefaultValue,subDefaultValue:subDefaultValue,config:config,options:options,mapOptionsToSubOptions:mapOptionsToSubOptions,"data-test-subj":dataTestSubj})=>{const{form:form}=Object(hook_form_lib_["useForm"])({defaultValue:{main:mainDefaultValue,sub:subDefaultValue}});const{subscribe:subscribe}=form;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const subscription=subscribe(updateData=>{const formData=updateData.data.internal;const value=formData.sub?formData.sub:formData.main;onChange(value)});return subscription.unsubscribe},[subscribe,onChange]);const getSubOptionsMeta=Object(external_kbnSharedDeps_React_["useCallback"])(mainValue=>mapOptionsToSubOptions!==undefined?mapOptionsToSubOptions[mainValue]:undefined,[mapOptionsToSubOptions]);const onMainValueChange=Object(external_kbnSharedDeps_React_["useCallback"])(mainValue=>{const subOptionsMeta=getSubOptionsMeta(mainValue);form.setFieldValue("sub",subOptionsMeta?subOptionsMeta.options[0].value:undefined)},[form,getSubOptionsMeta]);const renderSelect=(field,opts)=>{const isSuperSelect=areOptionsSuperSelect(opts);return isSuperSelect?external_kbnSharedDeps_React_default.a.createElement(components_["SuperSelectField"],{field:field,euiFieldProps:{options:opts},"data-test-subj":dataTestSubj}):external_kbnSharedDeps_React_default.a.createElement(components_["SelectField"],{field:field,euiFieldProps:{options:opts,hasNoInitialSelection:false},"data-test-subj":dataTestSubj})};return external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["Form"],{form:form},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["FormDataProvider"],{pathsToWatch:"main"},({main:main})=>{const subOptions=getSubOptionsMeta(main);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"main",config:config,onChange:onMainValueChange},field=>renderSelect(field,options))),subOptions&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"sub",config:{...config,defaultValue:subOptions.options[0].value,label:subOptions.label}},field=>renderSelect(field,subOptions.options))))}))};const ANALYZER_OPTIONS=PARAMETERS_OPTIONS.analyzer;const ANALYZER_OPTIONS_WITHOUT_DEFAULT=PARAMETERS_OPTIONS.analyzer.filter(({value:value})=>value!==INDEX_DEFAULT);const getCustomAnalyzers=indexSettings=>{const settings={}.hasOwnProperty.call(indexSettings,"index")?indexSettings.index:indexSettings;if(!{}.hasOwnProperty.call(settings,"analysis")||!{}.hasOwnProperty.call(settings.analysis,"analyzer")){return undefined}try{return Object.keys(settings.analysis.analyzer).map(value=>({value:value,text:value}))}catch{return undefined}};const AnalyzerParameter=({path:path,defaultValue:defaultValue,label:label,config:config,allowsIndexDefaultOption:allowsIndexDefaultOption=true,"data-test-subj":dataTestSubj})=>{const{value:{indexSettings:indexSettings}}=useConfig();const customAnalyzers=getCustomAnalyzers(indexSettings);const analyzerOptions=allowsIndexDefaultOption?ANALYZER_OPTIONS:ANALYZER_OPTIONS_WITHOUT_DEFAULT;const fieldOptions=[...analyzerOptions];const mapOptionsToSubOptions={language:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.analyzers.languageAnalyzerLabel",{defaultMessage:"Language"}),options:PARAMETERS_OPTIONS.languageAnalyzer}};if(customAnalyzers){const customOption={value:"custom",...getSuperSelectOption(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.customTitle",{defaultMessage:"Custom analyzer"}),external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formSelect.analyzer.customDescription",{defaultMessage:"Choose one of your custom analyzers."}))};fieldOptions.push(customOption);mapOptionsToSubOptions.custom={label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.analyzers.customAnalyzerLabel",{defaultMessage:"Custom"}),options:customAnalyzers}}const isDefaultValueInOptions=defaultValue===undefined||fieldOptions.some(option=>option.value===defaultValue);let mainValue=defaultValue;let subValue;let isDefaultValueInSubOptions=false;if(!isDefaultValueInOptions&&mapOptionsToSubOptions!==undefined){for(const[key,subOptions]of Object.entries(mapOptionsToSubOptions)){if(subOptions.options.some(option=>option.value===defaultValue)){isDefaultValueInSubOptions=true;mainValue=key;subValue=defaultValue;break}}}const[isCustom,setIsCustom]=Object(external_kbnSharedDeps_React_["useState"])(!isDefaultValueInOptions&&!isDefaultValueInSubOptions);const[selectsDefaultValue,setSelectsDefaultValue]=Object(external_kbnSharedDeps_React_["useState"])({main:mainValue,sub:subValue});const fieldConfig=config?config:getFieldConfig("analyzer");const fieldConfigWithLabel=label!==undefined?{...fieldConfig,label:label}:fieldConfig;const toggleCustom=field=>()=>{if(isCustom){field.setValue(fieldOptions[0].value)}else{field.setValue("")}field.reset({resetValue:false});setSelectsDefaultValue({main:undefined,sub:undefined});setIsCustom(!isCustom)};return external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:path,config:fieldConfigWithLabel},field=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"mappingsEditor__selectWithCustom"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs",onClick:toggleCustom(field),className:"mappingsEditor__selectWithCustom__button","data-test-subj":`${dataTestSubj}-toggleCustomButton`},isCustom?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.predefinedButtonLabel",{defaultMessage:"Use built-in analyzer"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.customButtonLabel",{defaultMessage:"Use custom analyzer"})),isCustom?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(components_["TextField"],{field:field,"data-test-subj":`${dataTestSubj}-custom`}))):external_kbnSharedDeps_React_default.a.createElement(AnalyzerParameterSelects,{onChange:field.setValue,mainDefaultValue:selectsDefaultValue.main,subDefaultValue:selectsDefaultValue.sub,config:fieldConfigWithLabel,options:fieldOptions,mapOptionsToSubOptions:mapOptionsToSubOptions,"data-test-subj":dataTestSubj})))};const AnalyzersParameter=({field:field,withSearchQuoteAnalyzer:withSearchQuoteAnalyzer=false})=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.analyzersSectionTitle",{defaultMessage:"Analyzers"}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.analyzersDocLinkText",{defaultMessage:"Analyzers documentation"}),href:documentationService.getAnalyzerLink()},withToggle:false,"data-test-subj":"analyzerParameters"},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["FormDataProvider"],{pathsToWatch:"useSameAnalyzerForSearch"},({useSameAnalyzerForSearch:useSameAnalyzerForSearch})=>{const label=useSameAnalyzerForSearch?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.indexSearchAnalyzerFieldLabel",{defaultMessage:"Index and search analyzer"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.indexAnalyzerFieldLabel",{defaultMessage:"Index analyzer"});return external_kbnSharedDeps_React_default.a.createElement(AnalyzerParameter,{path:"analyzer",label:label,defaultValue:field.source.analyzer,"data-test-subj":"indexAnalyzer"})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"useSameAnalyzerForSearch",component:components_["CheckBoxField"],componentProps:{"data-test-subj":"useSameAnalyzerForSearchCheckBox"},config:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.analyzers.useSameAnalyzerIndexAnSearch",{defaultMessage:"Use the same analyzers for index and searching"}),defaultValue:true}}),external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["FormDataProvider"],{pathsToWatch:"useSameAnalyzerForSearch"},({useSameAnalyzerForSearch:useSameAnalyzerForSearch})=>useSameAnalyzerForSearch?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(AnalyzerParameter,{path:"search_analyzer",defaultValue:field.source.search_analyzer,config:getFieldConfig("search_analyzer"),"data-test-subj":"searchAnalyzer"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))),withSearchQuoteAnalyzer&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(AnalyzerParameter,{path:"search_quote_analyzer",defaultValue:field.source.search_quote_analyzer,config:getFieldConfig("search_quote_analyzer"),"data-test-subj":"searchQuoteAnalyzer"})));const NullValueParameter=({defaultToggleValue:defaultToggleValue,description:description,children:children})=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.nullValueFieldTitle",{defaultMessage:"Set null value"}),description:description?description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.nullValueFieldDescription",{defaultMessage:"Replace explicit null values with the specified value so that it can be indexed and searched."}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.nullValueDocLinkText",{defaultMessage:"Null value documentation"}),href:documentationService.getNullValueLink()},defaultToggleValue:defaultToggleValue},children?children:external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"null_value",config:getFieldConfig("null_value"),component:components_["Field"]}));const EagerGlobalOrdinalsParameter=({description:description,configPath:configPath="eager_global_ordinals"})=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.eagerGlobalOrdinalsFieldTitle",{defaultMessage:"Build global ordinals at index time"}),description:description?description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.eagerGlobalOrdinalsFieldDescription",{defaultMessage:"By default, global ordinals are built at search time, which optimizes for index speed. You can optimize for search performance by building them at index time instead."}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.eagerGlobalOrdinalsDocLinkText",{defaultMessage:"Global ordinals documentation"}),href:documentationService.getEagerGlobalOrdinalsLink()},formFieldPath:"eager_global_ordinals",configPath:configPath});const NormsParameter=({configPath:configPath="norms"})=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.useNormsFieldTitle",{defaultMessage:"Use norms"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.useNormsFieldDescription",{defaultMessage:"Account for field length when scoring queries. Norms require significant memory and are not necessary for fields that are used solely for filtering or aggregations."}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.normsDocLinkText",{defaultMessage:"Norms documentation"}),href:documentationService.getNormsLink()},formFieldPath:"norms",configPath:configPath});const SimilarityParameter=({defaultToggleValue:defaultToggleValue})=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.setSimilarityFieldTitle",{defaultMessage:"Set similarity"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.setSimilarityFieldDescription",{defaultMessage:"The scoring algorithm or similarity to use."}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.similarityDocLinkText",{defaultMessage:"Similarity documentation"}),href:documentationService.getSimilarityLink()},defaultToggleValue:defaultToggleValue},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"similarity",config:getFieldConfig("similarity"),component:components_["Field"],componentProps:{euiFieldProps:{options:PARAMETERS_OPTIONS.similarity}}}));const targetFieldTypeNotAllowed=PARAMETERS_DEFINITION.path.targetTypesNotAllowed;const getSuggestedFields=(allFields,currentField)=>Object.entries(allFields).filter(([id,field])=>{if(currentField&&id===currentField.id){return false}if(targetFieldTypeNotAllowed.includes(field.source.type)){return false}return true}).map(([id,field])=>({id:id,label:field.path.join(" > ")})).sort((a,b)=>a.label>b.label?1:a.label<b.label?-1:0);const getDeserializer=allFields=>value=>{if(typeof value==="string"&&Boolean(value)){return[{id:value,label:allFields[value].path.join(" > ")}]}return[]};const PathParameter=({field:field,allFields:allFields})=>{const suggestedFields=getSuggestedFields(allFields,field);const fieldConfig=Object(external_kbnSharedDeps_React_["useMemo"])(()=>({...getFieldConfig("path"),deserializer:getDeserializer(allFields)}),[allFields]);return external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"path",config:fieldConfig},pathField=>{const error=pathField.getErrorsMessages();const isInvalid=error?Boolean(error.length):false;return external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.aliasType.aliasTargetFieldTitle",{defaultMessage:"Alias target"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.aliasType.aliasTargetFieldDescription",{defaultMessage:"Select the field you want your alias to point to. You will then be able to use the alias instead of the target field in search requests, and selected other APIs like field capabilities."}),withToggle:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,!Boolean(suggestedFields.length)&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{size:"s",color:"warning",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.aliasType.noFieldsAddedWarningMessage",{defaultMessage:"You need to add at least one field before creating an alias."})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:pathField.label,helpText:pathField.helpText,error:error,isInvalid:isInvalid,fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.aliasType.pathPlaceholderLabel",{defaultMessage:"Select a field"}),singleSelection:{asPlainText:true},options:suggestedFields,selectedOptions:pathField.value,onChange:value=>pathField.setValue(value),isClearable:false,fullWidth:true}))))})};const CoerceNumberParameter=()=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.coerceFieldTitle",{defaultMessage:"Coerce to number"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.coerceDescription",{defaultMessage:"Convert strings to numbers. If this field is an integer, fractions are truncated. If disabled, then documents with imperfectly formatted values are rejected."}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.coerceDocLinkText",{defaultMessage:"Coerce documentation"}),href:documentationService.getCoerceLink()},formFieldPath:"coerce"});const CoerceShapeParameter=()=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.coerceShapeFieldTitle",{defaultMessage:"Coerce to shape"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.coerceShapeDescription",{defaultMessage:"If disabled, then documents that contain polygons with unclosed linear rings are rejected."}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.coerceShapeDocLinkText",{defaultMessage:"Coerce documentation"}),href:documentationService.getCoerceLink()},formFieldPath:"coerce",configPath:"coerce_shape"});const FormatParameter=({defaultValue:defaultValue,defaultToggleValue:defaultToggleValue})=>{const defaultValueArray=defaultValue!==undefined?defaultValue.split("||").map(value=>({label:value})):[];const defaultValuesInOptions=defaultValueArray.filter(defaultFormat=>ALL_DATE_FORMAT_OPTIONS.includes(defaultFormat));const[comboBoxOptions,setComboBoxOptions]=Object(external_kbnSharedDeps_React_["useState"])([...ALL_DATE_FORMAT_OPTIONS,...defaultValuesInOptions]);return external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formatParameter.fieldTitle",{defaultMessage:"Set format"}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.formatParameter.fieldDescription",defaultMessage:"The date formats to parse. Most builit-ins use {strict} date formats, where YYYY is the year, MM is the month, and DD is the day. Example: 2020/11/01.",values:{strict:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"strict")}}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formatDocLinkText",{defaultMessage:"Format documentation"}),href:documentationService.getFormatLink()},defaultToggleValue:defaultToggleValue,"data-test-subj":"formatParameter"},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"format",config:getFieldConfig("format")},formatField=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:formatField.label,helpText:formatField.helpText,fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.formatParameter.placeholderLabel",{defaultMessage:"Select a format"}),options:comboBoxOptions,selectedOptions:formatField.value,onChange:value=>{formatField.setValue(value)},onCreateOption:searchValue=>{const newOption={label:searchValue};formatField.setValue([...formatField.value,newOption]);setComboBoxOptions([...comboBoxOptions,newOption])},fullWidth:true,"data-test-subj":"formatInput"}))))};const IgnoreMalformedParameter=({description:description})=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.ignoreMalformedFieldTitle",{defaultMessage:"Ignore malformed data"}),description:description?description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.ignoredMalformedFieldDescription",{defaultMessage:"By default, documents that contain the wrong data type for a field are not indexed. If enabled, these documents are indexed, but fields with the wrong data type are filtered out. Be careful: if too many documents are indexed this way, queries on the field become meaningless."}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.ignoreMalformedDocLinkText",{defaultMessage:"Ignore malformed documentation"}),href:documentationService.getIgnoreMalformedLink()},formFieldPath:"ignore_malformed"});const CopyToParameter=({defaultToggleValue:defaultToggleValue})=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.copyToFieldTitle",{defaultMessage:"Copy to group field"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.copyToFieldDescription",{defaultMessage:"Copy the values of multiple fields into a group field. This group field can then be queried as a single field."}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.copyToDocLinkText",{defaultMessage:"Copy to documentation"}),href:documentationService.getCopyToLink()},defaultToggleValue:defaultToggleValue},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"copy_to",config:getFieldConfig("copy_to"),component:components_["Field"]}));const TermVectorParameter=({field:field,defaultToggleValue:defaultToggleValue})=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.termVectorFieldTitle",{defaultMessage:"Set term vector"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.termVectorFieldDescription",{defaultMessage:"Store term vectors for an analyzed field."}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.termVectorDocLinkText",{defaultMessage:"Term vector documentation"}),href:documentationService.getTermVectorLink()},defaultToggleValue:defaultToggleValue},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["FormDataProvider"],{pathsToWatch:"term_vector"},formData=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"term_vector",config:getFieldConfig("term_vector"),component:components_["Field"],componentProps:{euiFieldProps:{options:PARAMETERS_OPTIONS.term_vector,fullWidth:true}}}),formData.term_vector==="with_positions_offsets"&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{size:"s",color:"warning",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.termVectorFieldWarningMessage",{defaultMessage:'Setting "With positions and offsets" will double the size of a fields index.'})})))));const TypeParameter=({isMultiField:isMultiField,isRootLevelField:isRootLevelField,showDocLink:showDocLink=false})=>external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"type",config:getFieldConfig("type")},typeField=>{const error=typeField.getErrorsMessages();const isInvalid=error?Boolean(error.length):false;let docLink=null;if(showDocLink&&typeField.value.length>0){const selectedType=typeField.value[0].value;docLink=documentationService.getTypeDocLink(selectedType)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:typeField.label,error:error,isInvalid:isInvalid,helpText:docLink?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:docLink,target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.typeField.documentationLinkLabel",{defaultMessage:"{typeName} documentation",values:{typeName:typeField.value&&typeField.value[0]?typeField.value[0].label:""}}))):null},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.typeField.placeholderLabel",{defaultMessage:"Select a type"}),singleSelection:{asPlainText:true},options:isMultiField?filterTypesForMultiField(FIELD_TYPES_OPTIONS):isRootLevelField?FIELD_TYPES_OPTIONS:filterTypesForNonRootFields(FIELD_TYPES_OPTIONS),selectedOptions:typeField.value,onChange:value=>{if(value.length===0){return}typeField.setValue(value)},isClearable:false,"data-test-subj":"fieldType"}))});const typeParameterConfig=getFieldConfig("type");const other_type_name_parameter_fieldConfig={label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.otherTypeNameFieldLabel",{defaultMessage:"Type Name"}),defaultValue:"",deserializer:typeParameterConfig.deserializer,serializer:typeParameterConfig.serializer,validations:[{validator:({value:fieldValue})=>{if(fieldValue[0].value.trim()===""){return{message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.otherTypeNameIsRequiredErrorMessage",{defaultMessage:"The type name is required."})}}}}]};const CustomTextField=({field:field})=>{var _field$value$0$value,_field$value$;const{setValue:setValue}=field;const transformedField={...field,value:(_field$value$0$value=(_field$value$=field.value[0])===null||_field$value$===void 0?void 0:_field$value$.value)!==null&&_field$value$0$value!==void 0?_field$value$0$value:""};const onChange=Object(external_kbnSharedDeps_React_["useCallback"])(e=>{setValue([{value:e.target.value}])},[setValue]);return external_kbnSharedDeps_React_default.a.createElement(components_["TextField"],{field:transformedField,euiFieldProps:{onChange:onChange,"data-test-subj":"fieldSubType"}})};const OtherTypeNameParameter=()=>external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"subType",config:other_type_name_parameter_fieldConfig,component:CustomTextField});const SubTypeParameter=({type:type,defaultValueType:defaultValueType,isMultiField:isMultiField,isRootLevelField:isRootLevelField})=>{if(type==="other"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(OtherTypeNameParameter,null))}const typeDefinition=TYPE_DEFINITION[type];const hasSubType=typeDefinition.subTypes!==undefined;if(!hasSubType){return null}const subTypeOptions=typeDefinition.subTypes.types.map(_subType=>TYPE_DEFINITION[_subType]).map(_subType=>({value:_subType.value,label:_subType.label}));const defaultValueSubType=typeDefinition.subTypes.types.includes(defaultValueType)?defaultValueType:typeDefinition.subTypes.types[0];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"subType",defaultValue:defaultValueSubType,config:{...getFieldConfig("type"),label:typeDefinition.subTypes.label}},subTypeField=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:subTypeField.label},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.subTypeField.placeholderLabel",{defaultMessage:"Select a type"}),singleSelection:{asPlainText:true},options:isMultiField?filterTypesForMultiField(subTypeOptions):isRootLevelField?subTypeOptions:filterTypesForNonRootFields(subTypeOptions),selectedOptions:subTypeField.value,onChange:subTypeField.setValue,isClearable:false,"data-test-subj":"fieldSubType"}))))};const IgnoreZValueParameter=({description:description})=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.ignoreZValueFieldTitle",{defaultMessage:"Ignore Z value"}),description:description||external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.ignoredZValueFieldDescription",{defaultMessage:"Three dimension points will be accepted, but only latitude and longitude values will be indexed; the third dimension is ignored."}),formFieldPath:"ignore_z_value"});const OrientationParameter=({defaultToggleValue:defaultToggleValue})=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.geoShapeType.orientationFieldTitle",{defaultMessage:"Set orientation"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.geoShapeType.orientationFieldDescription",{defaultMessage:"Interpret the vertex order for polygons and multipolygons as either clockwise or counterclockwise (default)."}),defaultToggleValue:defaultToggleValue},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"orientation",config:getFieldConfig("orientation"),component:components_["Field"],componentProps:{euiFieldProps:{options:PARAMETERS_OPTIONS.orientation,style:{minWidth:300}}}}));const FielddataFrequencyFilterPercentage=({min:min,max:max})=>{const onFrequencyFilterChange=([minValue,maxValue])=>{min.setValue(minValue);max.setValue(maxValue)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.fielddata.frequencyFilterPercentageFieldLabel",defaultMessage:"Percentage-based frequency range"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDualRange"],{min:0,max:100,value:[min.value,max.value],onChange:onFrequencyFilterChange,showInput:"inputWithPopover",append:"%"}))};const FielddataFrequencyFilterAbsolute=({min:min,max:max})=>{const minIsInvalid=!min.isChangingValue&&min.errors.length>0;const minErrorMessage=!min.isChangingValue&&min.errors.length?min.errors[0].message:null;const maxIsInvalid=!max.isChangingValue&&max.errors.length>0;const maxErrorMessage=!max.isChangingValue&&max.errors.length?max.errors[0].message:null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,isInvalid:minIsInvalid||maxIsInvalid,error:minErrorMessage||maxErrorMessage,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.fielddata.frequencyFilterAbsoluteFieldLabel",defaultMessage:"Absolute frequency range"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormControlLayoutDelimited"],{startControl:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{value:min.value,onChange:min.onChange,isLoading:min.isValidating,isInvalid:minIsInvalid,fullWidth:true,"data-test-subj":"input",controlOnly:true,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.fielddata.frequencyFilterAbsoluteMinAriaLabel",{defaultMessage:"Minimum absolute frequency"})}),endControl:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{value:max.value,onChange:max.onChange,isLoading:max.isValidating,isInvalid:maxIsInvalid,fullWidth:true,"data-test-subj":"input",controlOnly:true,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.fielddata.frequencyFilterAbsoluteMaxAriaLabel",{defaultMessage:"Maximum absolute frequency"})})}))};const FieldDataParameter=({field:field,defaultToggleValue:defaultToggleValue})=>{const[valueType,setValueType]=Object(external_kbnSharedDeps_React_["useState"])(field.source.fielddata_frequency_filter!==undefined?field.source.fielddata_frequency_filter.max>1?"absolute":"percentage":"percentage");function getConfig(fieldProp,type=valueType){return type==="percentage"?getFieldConfig("fielddata_frequency_filter_percentage",fieldProp):getFieldConfig("fielddata_frequency_filter_absolute",fieldProp)}const switchType=(min,max)=>()=>{var _nextMinConfig$deseri,_nextMinConfig$deseri2,_nextMaxConfig$deseri,_nextMaxConfig$deseri2;const nextValueType=valueType==="percentage"?"absolute":"percentage";const nextMinConfig=getConfig("min",nextValueType);const nextMaxConfig=getConfig("max",nextValueType);min.setValue((_nextMinConfig$deseri=(_nextMinConfig$deseri2=nextMinConfig.deserializer)===null||_nextMinConfig$deseri2===void 0?void 0:_nextMinConfig$deseri2.call(nextMinConfig,nextMinConfig.defaultValue))!==null&&_nextMinConfig$deseri!==void 0?_nextMinConfig$deseri:nextMinConfig.defaultValue);max.setValue((_nextMaxConfig$deseri=(_nextMaxConfig$deseri2=nextMaxConfig.deserializer)===null||_nextMaxConfig$deseri2===void 0?void 0:_nextMaxConfig$deseri2.call(nextMaxConfig,nextMaxConfig.defaultValue))!==null&&_nextMaxConfig$deseri!==void 0?_nextMaxConfig$deseri:nextMaxConfig.defaultValue);setValueType(nextValueType)};return external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.fielddata.fielddataFormRowTitle",{defaultMessage:"Fielddata"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.fielddata.fielddataFormRowDescription",{defaultMessage:"Whether to use in-memory fielddata for sorting, aggregations, or scripting."}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.fielddata.fieldDataDocLinkText",{defaultMessage:"Fielddata documentation"}),href:documentationService.getFielddataLink()},formFieldPath:"fielddata",defaultToggleValue:defaultToggleValue},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseMultiFields"],{fields:{min:{path:"fielddata_frequency_filter.min",config:getConfig("min")},max:{path:"fielddata_frequency_filter.max",config:getConfig("max")}}},({min:min,max:max})=>{const FielddataFrequencyComponent=valueType==="percentage"?FielddataFrequencyFilterPercentage:FielddataFrequencyFilterAbsolute;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"warning",iconType:"alert",size:"s",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.fielddata.fielddataEnabledWarningTitle",defaultMessage:"Fielddata can consume significant memory. This is particularly likely when loading high-cardinality text fields. {docsLink}",values:{docsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getEnablingFielddataLink(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.fielddata.fielddataEnabledDocumentationLink",{defaultMessage:"Learn more."}))}})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xxs"},external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.fielddata.fielddataDocumentFrequencyRangeTitle",{defaultMessage:"Document frequency range"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.fielddata.fielddataFrequencyMessage",defaultMessage:"This range determines the terms loaded into memory. Frequency is calculated per segment. Exclude small segments based on their size, in number of documents. {docsLink}",values:{docsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getFielddataFrequencyLink(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.fielddata.fielddataFrequencyDocumentationLink",{defaultMessage:"Learn more."}))}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(FielddataFrequencyComponent,{min:min,max:max})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"fielddata_frequency_filter.min_segment_size",config:getFieldConfig("fielddata_frequency_filter","min_segment_size"),component:components_["Field"]}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{compressed:true,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.fielddata.useAbsoluteValuesFieldLabel",{defaultMessage:"Use absolute values"}),checked:valueType==="absolute",onChange:switchType(min,max),"data-test-subj":"input"}))}))};const SplitQueriesOnWhitespaceParameter=()=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.splitQueriesOnWhitespaceFieldTitle",{defaultMessage:"Split queries on whitespace"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.splitQueriesOnWhitespaceDescription",{defaultMessage:"Full text queries will split the input on whitespace when building a query for this field."}),formFieldPath:"split_queries_on_whitespace"});const LocaleParameter=({defaultToggleValue:defaultToggleValue})=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.date.localeFieldTitle",{defaultMessage:"Set locale"}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dateType.localeFieldDescription",defaultMessage:"The locale to use when parsing dates. This is useful because months might not have the same name or abbreviation in all languages. Defaults to the {root} locale.",values:{root:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getRootLocaleLink(),target:"_blank"},"ROOT")}}),defaultToggleValue:defaultToggleValue},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"locale",config:getFieldConfig("locale"),component:components_["Field"]}));const EnabledParameter=()=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.searchableProperties.fieldTitle",{defaultMessage:"Searchable properties"}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.searchableProperties.fieldDescription",defaultMessage:"Allow object properties to be searched. The JSON can still be retrieved from the {source} field even after disabling this setting.",values:{source:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"_source")}}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.enabledDocLinkText",{defaultMessage:"Enabled documentation"}),href:documentationService.getEnabledLink()},formFieldPath:"enabled"});const MaxShingleSizeParameter=({defaultToggleValue:defaultToggleValue})=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.maxShingleSizeFieldTitle",{defaultMessage:"Set max shingle size"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.maxShingleSizeFieldDescription",{defaultMessage:"The default is three shingle subfields. More subfields enable more specific queries, but increase index size."}),defaultToggleValue:defaultToggleValue},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"max_shingle_size",component:components_["Field"],config:getFieldConfig("max_shingle_size"),componentProps:{euiFieldProps:{options:[{value:2,text:"2"},{value:3,text:"3"},{value:4,text:"4"}]}}}));const{isJsonField:other_type_json_parameter_isJsonField}=helpers_["fieldValidators"];const other_type_json_parameter_fieldConfig={label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.otherTypeJsonFieldLabel",{defaultMessage:"Type Parameters JSON"}),defaultValue:{},validations:[{validator:other_type_json_parameter_isJsonField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.otherTypeJsonInvalidJSONErrorMessage",{defaultMessage:"Invalid JSON."}))},{validator:({value:value})=>{const json=JSON.parse(value);if(Array.isArray(json)){return{message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.otherTypeJsonArrayNotAllowedErrorMessage",{defaultMessage:"Arrays are not allowed."})}}}},{validator:({value:value})=>{const json=JSON.parse(value);if(json.type){return{code:"ERR_CUSTOM_TYPE_OVERRIDDEN",message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.parameters.validations.otherTypeJsonTypeFieldErrorMessage",{defaultMessage:'Cannot override the "type" field.'})}}}}],deserializer:value=>{if(value===""){return value}return JSON.stringify(value,null,2)},serializer:value=>{try{return JSON.parse(value)}catch(error){return value}}};const OtherTypeJsonParameter=()=>external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"otherTypeJson",config:other_type_json_parameter_fieldConfig,component:components_["JsonEditorField"]});const MetaParameter=({defaultToggleValue:defaultToggleValue})=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.metaParameterTitle",{defaultMessage:"Set metadata"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.metaParameterDescription",{defaultMessage:"Arbitrary information about the field. Specify as JSON key-value pairs."}),defaultToggleValue:defaultToggleValue,docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.metaParameterDocLinkText",{defaultMessage:"Metadata documentation"}),href:documentationService.getMetaLink()},"data-test-subj":"metaParameter"},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"meta",config:getFieldConfig("meta"),component:components_["JsonEditorField"],componentProps:{euiCodeEditorProps:{["data-test-subj"]:"metaParameterEditor",height:"300px","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.metaParameterAriaLabel",{defaultMessage:"metadata field data editor"})}}}));const IgnoreAboveParameter=({defaultToggleValue:defaultToggleValue})=>external_kbnSharedDeps_React_default.a.createElement(EditFieldFormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.ignoreAboveFieldTitle",{defaultMessage:"Set length limit"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.ignoreAboveFieldDescription",{defaultMessage:"Strings longer than this value will not be indexed. This is useful for protecting against Lucenes term character-length limit of 8,191 UTF-8 characters."}),docLink:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.ignoreAboveDocLinkText",{defaultMessage:"Ignore above documentation"}),href:documentationService.getIgnoreAboveLink()},defaultToggleValue:defaultToggleValue},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"ignore_above",config:getFieldConfig("ignore_above"),component:components_["Field"]}));const PARAMETER_SERIALIZERS=[relationsSerializer,dynamicSerializer];const PARAMETER_DESERIALIZERS=[relationsDeserializer,dynamicDeserializer];const sanitizeField=field=>Object.entries(field).filter(({1:value})=>value!==INDEX_DEFAULT).reduce((acc,[param,value])=>({...acc,[param]:value}),{});const runParametersSerializers=field=>PARAMETER_SERIALIZERS.reduce((fieldSerialized,serializer)=>serializer(fieldSerialized),field);const runParametersDeserializers=field=>PARAMETER_DESERIALIZERS.reduce((fieldDeserialized,serializer)=>serializer(fieldDeserialized),field);const fieldSerializer=field=>{const{otherTypeJson:otherTypeJson,...rest}=field;const updatedField=Boolean(otherTypeJson)?{...otherTypeJson,...rest}:{...rest};if({}.hasOwnProperty.call(updatedField,"subType")){updatedField.type=updatedField.subType;delete updatedField.subType}delete updatedField.useSameAnalyzerForSearch;return sanitizeField(runParametersSerializers(updatedField))};const fieldDeserializer=field=>{const typeMeta=getTypeMetaFromSource(field.type);field.type=typeMeta.mainType;field.subType=typeMeta.subType;if(field.type==="other"){const{type:type,subType:subType,name:name,...otherTypeJson}=field;field.otherTypeJson=otherTypeJson}else{field.useSameAnalyzerForSearch={}.hasOwnProperty.call(field,"search_analyzer")===false}return runParametersDeserializers(field)};const validateUniqueName=({rootLevelFields:rootLevelFields,byId:byId},initialName="",parentId)=>{const validator=({value:value})=>{const existingNames=parentId?Object.values(byId).filter(field=>field.parentId===parentId).map(field=>field.source.name):rootLevelFields.map(fieldId=>byId[fieldId].source.name);if(existingNames.filter(name=>name!==initialName).includes(value)){return{message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.existNamesValidationErrorMessage",{defaultMessage:"There is already a field with this name."})}}};return validator};var Ord=__webpack_require__(102);var lib_Set=__webpack_require__(99);var Either=__webpack_require__(53);const failure=validation=>validation.map(e=>{const path=[];let validationName="";e.context.forEach((ctx,idx)=>{if(ctx.key){path.push(ctx.key)}if(idx===e.context.length-1){validationName=ctx.type.name}});const lastItemName=path[path.length-1];return{path:path,message:"Invalid value "+JSON.stringify(e.value)+` supplied to ${lastItemName}(${validationName})`}});const empty=[];const success=()=>empty;const errorReporter={report:Object(Either["fold"])(failure,success)};const ALLOWED_FIELD_PROPERTIES=[...Object.keys(PARAMETERS_DEFINITION),"type","properties","fields"];const DEFAULT_FIELD_TYPE="object";const validateFieldType=type=>{if(typeof type!=="string"){return false}if(!ALL_DATA_TYPES.includes(type)){return false}return true};const validateParameter=(parameter,value)=>{if(parameter==="type"){return true}if(parameter==="name"){return false}if(parameter==="properties"||parameter==="fields"){return Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(value)}const parameterSchema=PARAMETERS_DEFINITION[parameter].schema;if(parameterSchema){return Object(Either["isRight"])(parameterSchema.decode(value))}return true};const stripUnknownOrInvalidParameter=field=>Object.entries(field).reduce((acc,[key,value])=>{if(!ALLOWED_FIELD_PROPERTIES.includes(key)||!validateParameter(key,value)){acc.parametersRemoved.push(key)}else{var _acc$value;acc.value=(_acc$value=acc.value)!==null&&_acc$value!==void 0?_acc$value:{};acc.value[key]=value}return acc},{parametersRemoved:[]});const parseField=field=>{var _field$type;if(!Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(field)){return{parametersRemoved:[]}}if(!validateFieldType((_field$type=field.type)!==null&&_field$type!==void 0?_field$type:DEFAULT_FIELD_TYPE)){return{parametersRemoved:[]}}const fieldWithType={type:DEFAULT_FIELD_TYPE,...field};const parsedField=stripUnknownOrInvalidParameter(fieldWithType);const meta=getFieldMeta(fieldWithType);return{...parsedField,meta:meta}};const parseFields=(properties,path=[])=>Object.entries(properties).reduce((acc,[fieldName,unparsedField])=>{const fieldPath=[...path,fieldName].join(".");const{value:parsedField,parametersRemoved:parametersRemoved,meta:meta}=parseField(unparsedField);if(parsedField===undefined){acc.errors.push({code:"ERR_FIELD",fieldPath:fieldPath})}else{if(meta.hasChildFields||meta.hasMultiFields){const parsedChildren=parseFields(parsedField[meta.childFieldsName],[...path,fieldName]);parsedField[meta.childFieldsName]=parsedChildren.value;if(parsedChildren.errors){acc.errors=[...acc.errors,...parsedChildren.errors]}}acc.value[fieldName]=parsedField;if(Boolean(parametersRemoved.length)){acc.errors=[...acc.errors,...parametersRemoved.map(paramName=>({code:"ERR_PARAMETER",fieldPath:fieldPath,paramName:paramName}))]}}return acc},{value:{},errors:[]});const validateProperties=(properties={})=>{if(!Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(properties)){return{value:{},errors:[]}}return parseFields(properties)};const mappingsConfigurationSchema=lib["exact"](lib["partial"]({dynamic:lib["union"]([lib["literal"](true),lib["literal"](false),lib["literal"]("strict")]),date_detection:lib["boolean"],numeric_detection:lib["boolean"],dynamic_date_formats:lib["array"](lib["string"]),_source:lib["exact"](lib["partial"]({enabled:lib["boolean"],includes:lib["array"](lib["string"]),excludes:lib["array"](lib["string"])})),_meta:lib["UnknownRecord"],_routing:lib["interface"]({required:lib["boolean"]})}));const mappingsConfigurationSchemaKeys=Object.keys(mappingsConfigurationSchema.type.props);const sourceConfigurationSchemaKeys=Object.keys(mappingsConfigurationSchema.type.props._source.type.props);const validateMappingsConfiguration=mappingsConfiguration=>{const configurationRemoved=new Set;let copyOfMappingsConfig={...mappingsConfiguration};const result=mappingsConfigurationSchema.decode(mappingsConfiguration);const isSchemaInvalid=Object(Either["isLeft"])(result);const unknownConfigurationParameters=Object.keys(mappingsConfiguration).filter(key=>mappingsConfigurationSchemaKeys.includes(key)===false);const unknownSourceConfigurationParameters=mappingsConfiguration._source!==undefined?Object.keys(mappingsConfiguration._source).filter(key=>sourceConfigurationSchemaKeys.includes(key)===false):[];if(isSchemaInvalid){const errors=errorReporter.report(result);errors.forEach(error=>{const configurationName=error.path[0];configurationRemoved.add(configurationName);delete copyOfMappingsConfig[configurationName]})}if(unknownConfigurationParameters.length>0){unknownConfigurationParameters.forEach(configName=>configurationRemoved.add(configName))}if(unknownSourceConfigurationParameters.length>0){configurationRemoved.add("_source");delete copyOfMappingsConfig._source}copyOfMappingsConfig=Object(external_kbnSharedDeps_Lodash_["pick"])(copyOfMappingsConfig,mappingsConfigurationSchemaKeys);const errors=Object(lib_Set["toArray"])(Ord["ordString"])(configurationRemoved).map(configName=>({code:"ERR_CONFIG",configName:configName})).sort((a,b)=>a.configName.localeCompare(b.configName));return{value:copyOfMappingsConfig,errors:errors}};const validateMappings=(mappings={})=>{if(!Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(mappings)){return{value:{}}}const{properties:properties,dynamic_templates:dynamicTemplates,...mappingsConfiguration}=mappings;const{value:parsedConfiguration,errors:configurationErrors}=validateMappingsConfiguration(mappingsConfiguration);const{value:parsedProperties,errors:propertiesErrors}=validateProperties(properties);const errors=[...configurationErrors,...propertiesErrors];return{value:{...parsedConfiguration,properties:parsedProperties,dynamic_templates:dynamicTemplates!==null&&dynamicTemplates!==void 0?dynamicTemplates:[]},errors:errors.length?errors:undefined}};const VALID_MAPPINGS_PARAMETERS=[...mappingsConfigurationSchemaKeys,"dynamic_templates","properties","runtime"];const escapeRegExp=text=>text.replace(/[-\[\]{}()*+?.,\\^$|#\s]/g,"\\$&");const sortResult=(a,b)=>{if(a.metadata.score>b.metadata.score){return-1}else if(b.metadata.score>a.metadata.score){return 1}if(a.metadata.stringMatch===null){return 1}else if(b.metadata.stringMatch===null){return-1}if(a.metadata.matchFieldName&&b.metadata.matchFieldName){return a.field.source.name.length-b.field.source.name.length}if(a.metadata.stringMatch.length===b.metadata.stringMatch.length){return a.field.path.length-b.field.path.length}return b.metadata.stringMatch.length-a.metadata.stringMatch.length};const calculateScore=metadata=>{let score=0;if(metadata.fullyMatchFieldName){score+=15}if(metadata.matchFieldName){score+=5}if(metadata.matchPath){score+=15}if(metadata.matchStartOfPath){score+=5}if(metadata.fullyMatchPath){score+=5}if(metadata.matchType){score+=5}if(metadata.fullyMatchType){score+=5}return score};const getJSXdisplayFromMeta=(searchData,fieldData,metadata)=>{const{term:term}=searchData;const{path:path}=fieldData;let display=external_kbnSharedDeps_React_default.a.createElement("span",null,path);if(metadata.fullyMatchPath){display=external_kbnSharedDeps_React_default.a.createElement("span",{style:{lineHeight:1.5}},external_kbnSharedDeps_React_default.a.createElement("strong",null,path))}else if(metadata.matchStartOfPath){const endString=path.substr(term.length,path.length);display=external_kbnSharedDeps_React_default.a.createElement("span",{style:{lineHeight:1.5}},external_kbnSharedDeps_React_default.a.createElement("strong",null,term),endString)}else if(metadata.matchPath){const{stringMatch:stringMatch}=metadata;const charIndex=path.lastIndexOf(stringMatch);const startString=path.substr(0,charIndex);const endString=path.substr(charIndex+stringMatch.length);display=external_kbnSharedDeps_React_default.a.createElement("span",{style:{lineHeight:1.5}},startString,external_kbnSharedDeps_React_default.a.createElement("strong",null,stringMatch),endString)}return display};const getSearchMetadata=(searchData,fieldData)=>{const{term:term,type:type,searchRegexArray:searchRegexArray}=searchData;const typeToCompare=type!==null&&type!==void 0?type:term;const fullyMatchFieldName=term===fieldData.name;const fullyMatchPath=term===fieldData.path;const fieldNameRegMatch=searchRegexArray[0].exec(fieldData.name);const matchFieldName=fullyMatchFieldName?true:fieldNameRegMatch!==null;const matchStartOfPath=fieldData.path.startsWith(term);const matchType=fieldData.type.includes(typeToCompare);const fullyMatchType=typeToCompare===fieldData.type;let stringMatch=null;if(fullyMatchPath){stringMatch=fieldData.path}else if(matchFieldName){stringMatch=fullyMatchFieldName?fieldData.name:fieldNameRegMatch[0]}else{const arrayMatch=searchRegexArray.map(regex=>regex.exec(fieldData.path)).filter(Boolean).sort((a,b)=>b[0].length-a[0].length);if(arrayMatch.length){stringMatch=arrayMatch[0][0]}}const matchPath=stringMatch!==null;const metadata={matchFieldName:matchFieldName,matchPath:matchPath,matchStartOfPath:matchStartOfPath,fullyMatchPath:fullyMatchPath,matchType:matchType,fullyMatchFieldName:fullyMatchFieldName,fullyMatchType:fullyMatchType,stringMatch:stringMatch};const score=calculateScore(metadata);const display=getJSXdisplayFromMeta(searchData,fieldData,metadata);return{...metadata,display:display,score:score}};const getRegexArrayFromSearchTerms=searchTerms=>{const fuzzyJoinChar="([\\._-\\s]|(\\s>\\s))?";return[new RegExp(searchTerms.join(fuzzyJoinChar),"i")]};const parseSearchTerm=term=>{let type;let parsedTerm=term.replace(/\s+/g," ").trim();const words=parsedTerm.split(" ").map(escapeRegExp);if(words[words.length-1]===">"){words.pop();parsedTerm=words.join(" ")}const searchRegexArray=getRegexArrayFromSearchTerms(words);const firstWordIsType=ALL_DATA_TYPES.includes(words[0]);const lastWordIsType=ALL_DATA_TYPES.includes(words[words.length-1]);if(firstWordIsType){type=words[0]}else if(lastWordIsType){type=words[words.length-1]}return{term:parsedTerm,terms:words,type:type,searchRegexArray:searchRegexArray}};const searchFields=(term,fields)=>{const searchData=parseSearchTerm(term);if(searchData.term===""){return[]}return Object.values(fields).map(field=>({field:field,metadata:getSearchMetadata(searchData,{name:field.source.name,path:field.path.join(" > "),type:field.source.type})})).filter(({metadata:metadata})=>metadata.score>0).sort(sortResult).map(({field:field,metadata:{display:display}})=>({display:display,field:field}))};const isMappingDefinition=obj=>{const areAllKeysValid=Object.keys(obj).every(key=>VALID_MAPPINGS_PARAMETERS.includes(key));if(!areAllKeysValid){return false}const{properties:properties,dynamic_templates:dynamicTemplates,runtime:runtime,...mappingsConfiguration}=obj;const{errors:errors}=validateMappingsConfiguration(mappingsConfiguration);const isConfigurationValid=errors.length===0;const isPropertiesValid=properties===undefined||Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(properties);const isDynamicTemplatesValid=dynamicTemplates===undefined||Array.isArray(dynamicTemplates);const isRuntimeValid=runtime===undefined||Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(runtime);return isConfigurationValid&&isPropertiesValid&&isDynamicTemplatesValid&&isRuntimeValid};const getMappingsDefinitionWithType=mappings=>{if(isMappingDefinition(mappings)){return[{mappings:mappings}]}const typedMappings=Object.entries(mappings).reduce((acc,[type,value])=>{if(isMappingDefinition(value)){acc.push({type:type,mappings:value})}return acc},[]);return typedMappings};const doMappingsHaveType=(mappings={})=>getMappingsDefinitionWithType(mappings).filter(({type:type})=>type!==undefined).length>0;const extractMappingsDefinition=(mappings={})=>{const typedMappings=getMappingsDefinitionWithType(mappings);if(typedMappings.length===0){return null}if(typedMappings.length===1){return typedMappings[0]}return null};const addFieldToState=(field,state)=>{const updatedFields={...state.fields};const id=getUniqueId();const{fieldToAddFieldTo:fieldToAddFieldTo}=state.documentFields;const addToRootLevel=fieldToAddFieldTo===undefined;const parentField=addToRootLevel?undefined:updatedFields.byId[fieldToAddFieldTo];const isMultiField=parentField?parentField.canHaveMultiFields:false;updatedFields.byId={...updatedFields.byId};updatedFields.rootLevelFields=addToRootLevel?[...updatedFields.rootLevelFields,id]:updatedFields.rootLevelFields;const nestedDepth=parentField&&(parentField.canHaveChildFields||parentField.canHaveMultiFields)?parentField.nestedDepth+1:0;updatedFields.maxNestedDepth=Math.max(updatedFields.maxNestedDepth,nestedDepth);const{name:name}=field;const path=parentField?[...parentField.path,name]:[name];const newField={id:id,parentId:fieldToAddFieldTo,isMultiField:isMultiField,source:field,path:path,nestedDepth:nestedDepth,...getFieldMeta(field,isMultiField)};updatedFields.byId[id]=newField;if(parentField){const childFields=parentField.childFields||[];updatedFields.byId[fieldToAddFieldTo]={...parentField,childFields:[...childFields,id],hasChildFields:parentField.canHaveChildFields,hasMultiFields:parentField.canHaveMultiFields,isExpanded:true}}if(newField.source.type==="alias"){updatedFields.aliases=updateAliasesReferences(newField,updatedFields)}return{...state,isValid:true,fields:updatedFields}};const updateAliasesReferences=(field,{aliases:aliases},previousTargetPath)=>{const updatedAliases={...aliases};if(previousTargetPath&&updatedAliases[previousTargetPath]){updatedAliases[previousTargetPath]=updatedAliases[previousTargetPath].filter(id=>id!==field.id)}const targetId=field.source.path;if(!updatedAliases[targetId]){updatedAliases[targetId]=[]}updatedAliases[targetId]=[...updatedAliases[targetId],field.id];return updatedAliases};const removeFieldFromMap=(fieldId,fields)=>{let{rootLevelFields:rootLevelFields}=fields;const updatedById={...fields.byId};const{parentId:parentId}=updatedById[fieldId];delete updatedById[fieldId];if(parentId){const parentField=updatedById[parentId];if(parentField){const childFields=parentField.childFields.filter(childId=>childId!==fieldId);updatedById[parentId]={...parentField,childFields:childFields,hasChildFields:parentField.canHaveChildFields&&Boolean(childFields.length),hasMultiFields:parentField.canHaveMultiFields&&Boolean(childFields.length),isExpanded:!parentField.hasChildFields&&!parentField.hasMultiFields?false:parentField.isExpanded}}}else{rootLevelFields=rootLevelFields.filter(childId=>childId!==fieldId)}let updatedFields={...fields,rootLevelFields:rootLevelFields,byId:updatedById};if(updatedFields.aliases[fieldId]){updatedFields=updatedFields.aliases[fieldId].reduce((_updatedFields,aliasId)=>removeFieldFromMap(aliasId,_updatedFields),updatedFields);const upddatedAliases={...updatedFields.aliases};delete upddatedAliases[fieldId];return{...updatedFields,aliases:upddatedAliases}}return updatedFields};const reducer=(state,action)=>{switch(action.type){case"editor.replaceMappings":{return{...state,fieldForm:undefined,fields:action.value.fields,configuration:{...state.configuration,data:{internal:action.value.configuration,format:()=>action.value.configuration},defaultValue:action.value.configuration},templates:{...state.templates,data:{internal:action.value.templates,format:()=>action.value.templates},defaultValue:action.value.templates},documentFields:{...state.documentFields,...action.value.documentFields,fieldToAddFieldTo:undefined,fieldToEdit:undefined},runtimeFields:action.value.runtimeFields,runtimeFieldsList:{status:"idle"},search:{term:"",result:[]}}}case"configuration.update":{const nextState={...state,configuration:{...state.configuration,...action.value}};nextState.isValid=action.value.isValid;return nextState}case"configuration.save":{return{...state,configuration:{isValid:true,defaultValue:action.value,data:{internal:action.value,format:()=>action.value},validate:async()=>true}}}case"templates.update":{const nextState={...state,templates:{...state.templates,...action.value}};nextState.isValid=action.value.isValid;return nextState}case"templates.save":{return{...state,templates:{isValid:true,defaultValue:action.value,data:{internal:action.value,format:()=>action.value},validate:async()=>true}}}case"fieldForm.update":{const nextState={...state,fieldForm:action.value};nextState.isValid=action.value.isValid;return nextState}case"documentField.createField":{return{...state,documentFields:{...state.documentFields,fieldToAddFieldTo:action.value,status:"creatingField"}}}case"documentField.editField":{return{...state,documentFields:{...state.documentFields,status:"editingField",fieldToEdit:action.value}}}case"documentField.changeStatus":const isValid=action.value==="idle"?state.configuration.isValid:state.isValid;return{...state,isValid:isValid,fieldForm:undefined,documentFields:{...state.documentFields,status:action.value,fieldToAddFieldTo:undefined,fieldToEdit:undefined}};case"documentField.changeEditor":{const switchingToDefault=action.value==="default";const fields=switchingToDefault?normalize(state.fieldsJsonEditor.format()):state.fields;return{...state,fields:fields,fieldForm:undefined,documentFields:{...state.documentFields,status:"idle",fieldToAddFieldTo:undefined,fieldToEdit:undefined,editor:action.value}}}case"field.add":{return addFieldToState(action.value,state)}case"field.remove":{const field=state.fields.byId[action.value];const{id:id,hasChildFields:hasChildFields,hasMultiFields:hasMultiFields}=field;let updatedFields=removeFieldFromMap(id,state.fields);if(hasChildFields||hasMultiFields){const allChildFields=getAllChildFields(field,state.fields.byId);allChildFields.forEach(childField=>{updatedFields=removeFieldFromMap(childField.id,updatedFields)})}if(field.source.type==="alias"&&field.source.path){const targetId=field.source.path;updatedFields.aliases={...updatedFields.aliases,[targetId]:updatedFields.aliases[targetId].filter(aliasId=>aliasId!==id)}}updatedFields.maxNestedDepth=getMaxNestedDepth(updatedFields.byId);return{...state,fields:updatedFields,documentFields:{...state.documentFields,status:updatedFields.rootLevelFields.length===0?"creatingField":"idle"},search:Boolean(state.search.term)?{...state.search,result:searchFields(state.search.term,updatedFields.byId)}:state.search}}case"field.edit":{let updatedFields={...state.fields};const fieldToEdit=state.documentFields.fieldToEdit;const previousField=updatedFields.byId[fieldToEdit];let newField={...previousField,source:action.value};if(newField.source.type==="alias"){updatedFields.aliases=updateAliasesReferences(newField,updatedFields,previousField.source.path)}const nameHasChanged=newField.source.name!==previousField.source.name;const typeHasChanged=newField.source.type!==previousField.source.type;if(nameHasChanged){const{updatedFieldPath:updatedFieldPath,updatedById:updatedById}=updateFieldsPathAfterFieldNameChange(newField,updatedFields.byId);newField.path=updatedFieldPath;updatedFields.byId=updatedById}updatedFields.byId[fieldToEdit]=newField;if(typeHasChanged){const shouldDeleteChildFields=shouldDeleteChildFieldsAfterTypeChange(previousField.source.type,newField.source.type);if(previousField.source.type==="alias"&&previousField.source.path){updatedFields.aliases={...updatedFields.aliases,[previousField.source.path]:updatedFields.aliases[previousField.source.path].filter(aliasId=>aliasId!==fieldToEdit)}}else{const nextTypeCanHaveAlias=!PARAMETERS_DEFINITION.path.targetTypesNotAllowed.includes(newField.source.type);if(!nextTypeCanHaveAlias&&updatedFields.aliases[fieldToEdit]){updatedFields.aliases[fieldToEdit].forEach(aliasId=>{updatedFields=removeFieldFromMap(aliasId,updatedFields)});delete updatedFields.aliases[fieldToEdit]}}if(shouldDeleteChildFields&&previousField.childFields){const allChildFields=getAllChildFields(previousField,updatedFields.byId);allChildFields.forEach(childField=>{updatedFields=removeFieldFromMap(childField.id,updatedFields)})}newField={...newField,...getFieldMeta(action.value,newField.isMultiField),childFields:shouldDeleteChildFields?undefined:previousField.childFields,hasChildFields:shouldDeleteChildFields?false:previousField.hasChildFields,hasMultiFields:shouldDeleteChildFields?false:previousField.hasMultiFields,isExpanded:shouldDeleteChildFields?false:previousField.isExpanded};updatedFields.byId[fieldToEdit]=newField}updatedFields.maxNestedDepth=getMaxNestedDepth(updatedFields.byId);return{...state,isValid:true,fieldForm:undefined,fields:updatedFields,documentFields:{...state.documentFields,fieldToEdit:undefined,status:"idle"},search:Boolean(state.search.term)?{...state.search,result:searchFields(state.search.term,updatedFields.byId)}:state.search}}case"field.toggleExpand":{const{fieldId:fieldId,isExpanded:isExpanded}=action.value;const previousField=state.fields.byId[fieldId];const nextField={...previousField,isExpanded:isExpanded===undefined?!previousField.isExpanded:isExpanded};return{...state,fields:{...state.fields,byId:{...state.fields.byId,[fieldId]:nextField}}}}case"runtimeFieldsList.createField":{return{...state,runtimeFieldsList:{...state.runtimeFieldsList,status:"creatingField"}}}case"runtimeFieldsList.editField":{return{...state,runtimeFieldsList:{...state.runtimeFieldsList,status:"editingField",fieldToEdit:action.value}}}case"runtimeField.add":{const id=getUniqueId();const normalizedField={id:id,source:action.value};return{...state,runtimeFields:{...state.runtimeFields,[id]:normalizedField},runtimeFieldsList:{...state.runtimeFieldsList,status:"idle"}}}case"runtimeField.edit":{const fieldToEdit=state.runtimeFieldsList.fieldToEdit;return{...state,runtimeFields:{...state.runtimeFields,[fieldToEdit]:action.value},runtimeFieldsList:{...state.runtimeFieldsList,status:"idle"}}}case"runtimeField.remove":{const field=state.runtimeFields[action.value];const{id:id}=field;const updatedFields={...state.runtimeFields};delete updatedFields[id];return{...state,runtimeFields:updatedFields}}case"runtimeFieldsList.closeRuntimeFieldEditor":return{...state,runtimeFieldsList:{...state.runtimeFieldsList,status:"idle",fieldToEdit:undefined}};case"fieldsJsonEditor.update":{const nextState={...state,fieldsJsonEditor:{format(){return action.value.json},isValid:action.value.isValid}};nextState.isValid=action.value.isValid;return nextState}case"search:update":{return{...state,search:{term:action.value,result:searchFields(action.value,state.fields.byId)}}}case"validity:update":{return{...state,isValid:action.value}}default:throw new Error(`Action "${action.type}" not recognized.`)}};const StateContext=Object(external_kbnSharedDeps_React_["createContext"])(undefined);const DispatchContext=Object(external_kbnSharedDeps_React_["createContext"])(undefined);const StateProvider=({children:children})=>{const initialState={isValid:true,configuration:{defaultValue:{},data:{internal:{},format:()=>({})},validate:()=>Promise.resolve(true)},templates:{defaultValue:{},data:{internal:{},format:()=>({})},validate:()=>Promise.resolve(true)},fields:{byId:{},rootLevelFields:[],aliases:{},maxNestedDepth:0},documentFields:{status:"idle",editor:"default"},runtimeFields:{},runtimeFieldsList:{status:"idle"},fieldsJsonEditor:{format:()=>({}),isValid:true},search:{term:"",result:[]}};const[state,dispatch]=Object(external_kbnSharedDeps_React_["useReducer"])(reducer,initialState);return external_kbnSharedDeps_React_default.a.createElement(StateContext.Provider,{value:state},external_kbnSharedDeps_React_default.a.createElement(DispatchContext.Provider,{value:dispatch},children))};const useMappingsState=()=>{const ctx=Object(external_kbnSharedDeps_React_["useContext"])(StateContext);if(ctx===undefined){throw new Error("useMappingsState must be used within a <MappingsState>")}return ctx};const useDispatch=()=>{const ctx=Object(external_kbnSharedDeps_React_["useContext"])(DispatchContext);if(ctx===undefined){throw new Error("useDispatch must be used within a <MappingsState>")}return ctx};const UseField=Object(hook_form_lib_["getUseField"])({component:components_["Field"]});const DynamicMappingSection=()=>external_kbnSharedDeps_React_default.a.createElement(components_["FormRow"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dynamicMappingTitle",{defaultMessage:"Dynamic mapping"}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dynamicMappingDescription",defaultMessage:"Dynamic mapping allows an index template to interpret unmapped fields. {docsLink}",values:{docsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getDynamicMappingLink(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dynamicMappingDocumentionLink",{defaultMessage:"Learn more."}))}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(UseField,{path:"dynamicMapping.enabled",component:components_["ToggleField"],componentProps:{"data-test-subj":"dynamicMappingsToggle"}}))},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["FormDataProvider"],{pathsToWatch:["dynamicMapping.enabled","dynamicMapping.date_detection"]},formData=>{const{dynamicMapping:{enabled:enabled,date_detection:dateDetection}}=formData;if(enabled===undefined){return null}if(enabled){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(UseField,{key:"numericDetectionToggle",path:"dynamicMapping.numeric_detection",componentProps:{"data-test-subj":"numericDetection"}}),external_kbnSharedDeps_React_default.a.createElement(UseField,{path:"dynamicMapping.date_detection"}),dateDetection&&external_kbnSharedDeps_React_default.a.createElement(UseField,{path:"dynamicMapping.dynamic_date_formats",componentProps:{euiFieldProps:{options:ALL_DATE_FORMAT_OPTIONS,noSuggestions:false}}}))}else{return external_kbnSharedDeps_React_default.a.createElement(UseField,{key:"throwErrorsCheckBox",path:"dynamicMapping.throwErrorsForUnmappedFields",component:components_["CheckBoxField"]})}}));const SourceFieldSection=()=>{const renderWarning=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.disabledSourceFieldCallOutTitle",{defaultMessage:"Use caution when disabling the _source field"}),iconType:"alert",color:"warning"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.disabledSourceFieldCallOutDescription1",defaultMessage:"Disabling {source} lowers storage overhead within the index, but this comes at a cost. It also disables important features, such as the ability to reindex or debug queries by viewing the original document.",values:{source:external_kbnSharedDeps_React_default.a.createElement("code",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.disabledSourceFieldCallOutDescription1.sourceText",{defaultMessage:"_source"}))}})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement("a",{href:documentationService.getDisablingMappingSourceFieldLink(),target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.disabledSourceFieldCallOutDescription2",defaultMessage:"Learn more about alternatives to disabling the {source} field.",values:{source:external_kbnSharedDeps_React_default.a.createElement("code",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.disabledSourceFieldCallOutDescription2.sourceText",{defaultMessage:"_source"}))}}))));const renderFormFields=()=>external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"sourceField"},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"sourceField.includes"},({label:label,helpText:helpText,value:value,setValue:setValue})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:label,helpText:helpText,fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{noSuggestions:true,placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.sourceIncludeField.placeholderLabel",{defaultMessage:"path.to.field.*"}),selectedOptions:value,onChange:newValue=>{setValue(newValue)},onCreateOption:searchValue=>{const newOption={label:searchValue};setValue([...value,newOption])},fullWidth:true,"data-test-subj":"includesField"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"sourceField.excludes"},({label:label,helpText:helpText,value:value,setValue:setValue})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:label,helpText:helpText,fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{noSuggestions:true,placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.sourceExcludeField.placeholderLabel",{defaultMessage:"path.to.field.*"}),selectedOptions:value,onChange:newValue=>{setValue(newValue)},onCreateOption:searchValue=>{const newOption={label:searchValue};setValue([...value,newOption])},fullWidth:true,"data-test-subj":"excludesField"}))));return external_kbnSharedDeps_React_default.a.createElement(components_["FormRow"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.sourceFieldTitle",{defaultMessage:"_source field"}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.sourceFieldDescription",defaultMessage:"The _source field contains the original JSON document body that was provided at index time. Individual fields can be pruned by defining which ones to include or exclude from the _source field. {docsLink}",values:{docsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getMappingSourceFieldLink(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.sourceFieldDocumentionLink",{defaultMessage:"Learn more."}))}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"sourceField.enabled",component:components_["ToggleField"]}))},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["FormDataProvider"],{pathsToWatch:["sourceField.enabled"]},formData=>{const{sourceField:{enabled:enabled}}=formData;if(enabled===undefined){return null}return enabled?renderFormFields():renderWarning()}))};const meta_field_section_UseField=Object(hook_form_lib_["getUseField"])({component:components_["Field"]});const MetaFieldSection=()=>external_kbnSharedDeps_React_default.a.createElement(components_["FormRow"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.metaFieldTitle",{defaultMessage:"_meta field"}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.metaFieldDescription",defaultMessage:"Use the _meta field to store any metadata you want. {docsLink}",values:{docsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getMetaFieldLink(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.metaFieldDocumentionLink",{defaultMessage:"Learn more."}))}}))},external_kbnSharedDeps_React_default.a.createElement(meta_field_section_UseField,{path:"metaField",component:components_["JsonEditorField"],componentProps:{euiCodeEditorProps:{height:"400px","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.metaFieldEditorAriaLabel",{defaultMessage:"_meta field data editor"}),"data-test-subj":"metaField"}}}));const RoutingSection=()=>external_kbnSharedDeps_React_default.a.createElement(components_["FormRow"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.routingTitle",{defaultMessage:"_routing"}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.routingDescription",defaultMessage:"A document can be routed to a particular shard in an index. When using custom routing, it is important to provide the routing value whenever indexing a document as otherwise this could lead to a document being indexed on more than one shard. {docsLink}",values:{docsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getRoutingLink(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.routingDocumentionLink",{defaultMessage:"Learn more."}))}})},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"_routing.required",component:components_["ToggleField"],componentProps:{"data-test-subj":"routingRequiredToggle"}}));const{containsCharsField:configuration_form_schema_containsCharsField,isJsonField:configuration_form_schema_isJsonField}=helpers_["fieldValidators"];const fieldPathComboBoxConfig={helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.configuration.sourceFieldPathComboBoxHelpText",{defaultMessage:"Accepts a path to the field, including wildcards."}),type:hook_form_lib_["FIELD_TYPES"].COMBO_BOX,defaultValue:[],serializer:options=>options.map(({label:label})=>label),deserializer:values=>values.map(value=>({label:value}))};const configurationFormSchema={metaField:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.configuration.metaFieldEditorLabel",{defaultMessage:"_meta field data"}),helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.configuration.metaFieldEditorHelpText",defaultMessage:"Use JSON format: {code}",values:{code:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,JSON.stringify({arbitrary_data:"anything_goes"}))}}),validations:[{validator:configuration_form_schema_isJsonField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.configuration.metaFieldEditorJsonError",{defaultMessage:"The _meta field JSON is not valid."}),{allowEmptyString:true})}],deserializer:value=>{if(value===""){return value}return JSON.stringify(value,null,2)},serializer:value=>{try{const parsed=JSON.parse(value);if(!Object.keys(parsed).length){return undefined}return parsed}catch(error){return value}}},sourceField:{enabled:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.configuration.sourceFieldLabel",{defaultMessage:"Enable _source field"}),type:hook_form_lib_["FIELD_TYPES"].TOGGLE,defaultValue:true},includes:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.configuration.includeSourceFieldsLabel",{defaultMessage:"Include fields"}),...fieldPathComboBoxConfig},excludes:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.configuration.excludeSourceFieldsLabel",{defaultMessage:"Exclude fields"}),...fieldPathComboBoxConfig}},dynamicMapping:{enabled:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.configuration.enableDynamicMappingsLabel",{defaultMessage:"Enable dynamic mapping"}),type:hook_form_lib_["FIELD_TYPES"].TOGGLE,defaultValue:true},throwErrorsForUnmappedFields:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.configuration.throwErrorsForUnmappedFieldsLabel",{defaultMessage:"Throw an exception when a document contains an unmapped field"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.configuration.dynamicMappingStrictHelpText",{defaultMessage:"By default, unmapped fields will be silently ignored when dynamic mapping is disabled. Optionally, you can choose to throw an exception when a document contains an unmapped field."}),type:hook_form_lib_["FIELD_TYPES"].CHECKBOX,defaultValue:false},numeric_detection:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.configuration.numericFieldLabel",{defaultMessage:"Map numeric strings as numbers"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.configuration.numericFieldDescription",{defaultMessage:'For example, "1.0" would be mapped as a float and "1" would be mapped as an integer.'}),type:hook_form_lib_["FIELD_TYPES"].TOGGLE,defaultValue:false},date_detection:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.configuration.dateDetectionFieldLabel",{defaultMessage:"Map date strings as dates"}),type:hook_form_lib_["FIELD_TYPES"].TOGGLE,defaultValue:true},dynamic_date_formats:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.configuration.dynamicDatesFieldLabel",{defaultMessage:"Date formats"}),helpText:()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.configuration.dynamicDatesFieldHelpText",defaultMessage:"Strings in these formats will be mapped as dates. You can use built-in formats or custom formats. {docsLink}",values:{docsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getDateFormatLink(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.configuration.dynamicDatesFieldDocumentionLink",{defaultMessage:"Learn more."}))}}),type:hook_form_lib_["FIELD_TYPES"].COMBO_BOX,defaultValue:["strict_date_optional_time","yyyy/MM/dd HH:mm:ss Z||yyyy/MM/dd Z"],validations:[{validator:configuration_form_schema_containsCharsField({message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.configuration.dynamicDatesFieldValidationErrorMessage",{defaultMessage:"Spaces are not allowed."}),chars:" "}),type:hook_form_lib_["VALIDATION_TYPES"].ARRAY_ITEM}]}},_routing:{required:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.configuration.routingLabel",{defaultMessage:"Require _routing value for CRUD operations"}),defaultValue:false}}};const formSerializer=formData=>{const{dynamicMapping:{enabled:dynamicMappingsEnabled,throwErrorsForUnmappedFields:throwErrorsForUnmappedFields,numeric_detection:numeric_detection,date_detection:date_detection,dynamic_date_formats:dynamic_date_formats},sourceField:sourceField,metaField:metaField,_routing:_routing}=formData;const dynamic=dynamicMappingsEnabled?true:throwErrorsForUnmappedFields?"strict":false;const serialized={dynamic:dynamic,numeric_detection:numeric_detection,date_detection:date_detection,dynamic_date_formats:dynamic_date_formats,_source:sourceField,_meta:metaField,_routing:_routing};return serialized};const formDeserializer=formData=>{const{dynamic:dynamic,numeric_detection:numeric_detection,date_detection:date_detection,dynamic_date_formats:dynamic_date_formats,_source:{enabled:enabled,includes:includes,excludes:excludes}={},_meta:_meta,_routing:_routing}=formData;return{dynamicMapping:{enabled:dynamic===true||dynamic===undefined,throwErrorsForUnmappedFields:dynamic==="strict",numeric_detection:numeric_detection,date_detection:date_detection,dynamic_date_formats:dynamic_date_formats},sourceField:{enabled:enabled===true||enabled===undefined,includes:includes,excludes:excludes},metaField:_meta!==null&&_meta!==void 0?_meta:{},_routing:_routing}};const ConfigurationForm=external_kbnSharedDeps_React_default.a.memo(({value:value})=>{const isMounted=Object(external_kbnSharedDeps_React_["useRef"])(false);const{form:form}=Object(hook_form_lib_["useForm"])({schema:configurationFormSchema,serializer:formSerializer,deserializer:formDeserializer,defaultValue:value,id:"configurationForm"});const dispatch=useDispatch();const{subscribe:subscribe,submit:submit,reset:reset,getFormData:getFormData}=form;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const subscription=subscribe(({data:data,isValid:isValid,validate:validate})=>{dispatch({type:"configuration.update",value:{data:data,isValid:isValid,validate:validate,submitForm:submit}})});return subscription.unsubscribe},[dispatch,subscribe,submit]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(isMounted.current){reset({resetValues:true,defaultValue:value})}},[value,reset]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{isMounted.current=true;return()=>{isMounted.current=false;const configurationData=getFormData();dispatch({type:"configuration.save",value:configurationData})}},[getFormData,dispatch]);return external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["Form"],{form:form,isInvalid:form.isSubmitted&&!form.isValid,error:form.getErrors(),"data-test-subj":"advancedConfiguration"},external_kbnSharedDeps_React_default.a.createElement(DynamicMappingSection,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xl"}),external_kbnSharedDeps_React_default.a.createElement(MetaFieldSection,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xl"}),external_kbnSharedDeps_React_default.a.createElement(SourceFieldSection,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xl"}),external_kbnSharedDeps_React_default.a.createElement(RoutingSection,null))});var classnames=__webpack_require__(39);var classnames_default=__webpack_require__.n(classnames);const ChainedMultifieldsWarning=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.nestedMultifieldsDeprecatedCallOutTitle",{defaultMessage:"Chained multi-fields are deprecated"}),iconType:"alert",color:"warning","data-test-subj":"nestedMultifieldsDeprecatedCallout"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.nestedMultifieldsDeprecatedCallOutDescription",defaultMessage:"Defining chained multi-fields was deprecated in 7.3 and is now no longer supported. Consider flattening the chained fields blocks into a single level, or switching to {copyTo} if appropriate.",values:{copyTo:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"copy_to")}})));const AliasTypeRequiredParameters=({allFields:allFields})=>external_kbnSharedDeps_React_default.a.createElement(PathParameter,{allFields:allFields});const TokenCountTypeRequiredParameters=()=>external_kbnSharedDeps_React_default.a.createElement(components_["FormRow"],{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.tokenCount.analyzerFieldTitle",{defaultMessage:"Analyzer"})),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.tokenCount.analyzerFieldDescription",{defaultMessage:"The analyzer which should be used to analyze the string value. For best performance, use an analyzer without token filters."})},external_kbnSharedDeps_React_default.a.createElement(AnalyzerParameter,{path:"analyzer",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.tokenCountRequired.analyzerFieldLabel",{defaultMessage:"Index analyzer"}),defaultValue:STANDARD,allowsIndexDefaultOption:false}));const ScaledFloatTypeRequiredParameters=()=>external_kbnSharedDeps_React_default.a.createElement(components_["FormRow"],{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,PARAMETERS_DEFINITION.scaling_factor.title),description:PARAMETERS_DEFINITION.scaling_factor.description},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"scaling_factor",config:getFieldConfig("scaling_factor"),component:components_["Field"]}));const DenseVectorRequiredParameters=()=>{const{label:label}=getFieldConfig("dims");return external_kbnSharedDeps_React_default.a.createElement(components_["FormRow"],{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,label),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.denseVector.dimsFieldDescription",{defaultMessage:"Each documents dense vector is encoded as a binary doc value. Its size in bytes is equal to 4 * dimensions + 4."})},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"dims",config:getFieldConfig("dims"),component:components_["Field"]}))};const required_parameters_forms_typeToParametersFormMap={alias:AliasTypeRequiredParameters,token_count:TokenCountTypeRequiredParameters,scaled_float:ScaledFloatTypeRequiredParameters,dense_vector:DenseVectorRequiredParameters};const getRequiredParametersFormForType=(type,subType)=>required_parameters_forms_typeToParametersFormMap[subType]||required_parameters_forms_typeToParametersFormMap[type];const formWrapper=props=>external_kbnSharedDeps_React_default.a.createElement("form",props);const CreateField=external_kbnSharedDeps_React_default.a.memo((function CreateFieldComponent({allFields:allFields,isRootLevelField:isRootLevelField,isMultiField:isMultiField,paddingLeft:paddingLeft,isCancelable:isCancelable,maxNestedDepth:maxNestedDepth}){const dispatch=useDispatch();const{form:form}=Object(hook_form_lib_["useForm"])({serializer:fieldSerializer,options:{stripEmptyFields:false}});const{subscribe:subscribe}=form;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const subscription=subscribe(updatedFieldForm=>{dispatch({type:"fieldForm.update",value:updatedFieldForm})});return subscription.unsubscribe},[dispatch,subscribe]);const cancel=()=>{dispatch({type:"documentField.changeStatus",value:"idle"})};const submitForm=async(e,exitAfter=false)=>{if(e){e.preventDefault()}const{isValid:isValid,data:data}=await form.submit();if(isValid){form.reset();dispatch({type:"field.add",value:data});if(exitAfter){cancel()}}};const onClickOutside=()=>{const name=form.getFields().name.value;if(name.trim()===""){if(isCancelable!==false){cancel()}}else{submitForm(undefined,true)}};const renderFormFields=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(NameParameter,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(TypeParameter,{isRootLevelField:isRootLevelField,isMultiField:isMultiField,showDocLink:true})),external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["FormDataProvider"],{pathsToWatch:"type"},({type:type})=>{if(type===undefined){return null}const[fieldType]=type;return external_kbnSharedDeps_React_default.a.createElement(SubTypeParameter,{key:fieldType.value,type:fieldType.value,isMultiField:isMultiField!==null&&isMultiField!==void 0?isMultiField:false,isRootLevelField:isRootLevelField})}));const renderFormActions=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",justifyContent:"flexEnd"},isCancelable!==false&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:cancel,"data-test-subj":"cancelButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.createField.cancelButtonLabel",{defaultMessage:"Cancel"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"primary",fill:true,onClick:submitForm,type:"submit","data-test-subj":"addButton"},isMultiField?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.createField.addMultiFieldButtonLabel",{defaultMessage:"Add multi-field"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.createField.addFieldButtonLabel",{defaultMessage:"Add field"}))));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOutsideClickDetector"],{onOutsideClick:onClickOutside},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["Form"],{form:form,FormWrapper:formWrapper,onSubmit:submitForm,"data-test-subj":"createFieldForm"},external_kbnSharedDeps_React_default.a.createElement("div",{className:classnames_default()("mappingsEditor__createFieldWrapper",{"mappingsEditor__createFieldWrapper--toggle":Boolean(maxNestedDepth)&&maxNestedDepth>0,"mappingsEditor__createFieldWrapper--multiField":isMultiField}),style:{paddingLeft:`${isMultiField?paddingLeft-EUI_SIZE*1.5:paddingLeft}px`}},external_kbnSharedDeps_React_default.a.createElement("div",{className:"mappingsEditor__createFieldContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",alignItems:"center",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"mappingsEditor__createFieldContent__formFields"},renderFormFields()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},renderFormActions())),external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["FormDataProvider"],{pathsToWatch:["type","subType"]},({type:type,subType:subType})=>{const RequiredParametersForm=getRequiredParametersFormForType(type===null||type===void 0?void 0:type[0].value,subType===null||subType===void 0?void 0:subType[0].value);if(!RequiredParametersForm){return null}const typeDefinition=TYPE_DEFINITION[type===null||type===void 0?void 0:type[0].value];return external_kbnSharedDeps_React_default.a.createElement("div",{className:"mappingsEditor__createFieldRequiredProps"},typeDefinition.isBeta?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(FieldBetaBadge,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"})):null,external_kbnSharedDeps_React_default.a.createElement(RequiredParametersForm,{key:subType!==null&&subType!==void 0?subType:type,allFields:allFields}))})))))}));const DeleteFieldProvider=({children:children})=>{const[state,setState]=Object(external_kbnSharedDeps_React_["useState"])({isModalOpen:false});const dispatch=useDispatch();const{fields:fields}=useMappingsState();const{byId:byId}=fields;const confirmButtonText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.deleteField.confirmationModal.removeButtonLabel",{defaultMessage:"Remove"});let modalTitle;if(state.field){const{isMultiField:isMultiField,source:source}=state.field;modalTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.deleteField.confirmationModal.title",{defaultMessage:"Remove {fieldType} '{fieldName}'?",values:{fieldType:isMultiField?"multi-field":"field",fieldName:source.name}})}const deleteField=field=>{const aliases=getAllDescendantAliases(field,fields).map(id=>byId[id].path.join(" > ")).sort();const hasAliases=Boolean(aliases.length);setState({isModalOpen:true,field:field,aliases:hasAliases?aliases:undefined})};const closeModal=()=>{setState({isModalOpen:false})};const confirmDelete=()=>{dispatch({type:"field.remove",value:state.field.id});closeModal()};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,children(deleteField),state.isModalOpen&&external_kbnSharedDeps_React_default.a.createElement(ModalConfirmationDeleteFields,{title:modalTitle,childFields:state.field&&state.field.childFields,aliases:state.aliases,byId:byId,confirmButtonText:confirmButtonText,onConfirm:confirmDelete,onCancel:closeModal}))};const fields_list_item_i18nTexts={addMultiFieldButtonLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.addMultiFieldTooltipLabel",{defaultMessage:"Add a multi-field to index the same field in different ways."}),addPropertyButtonLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.addPropertyButtonLabel",{defaultMessage:"Add property"}),editButtonLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.editFieldButtonLabel",{defaultMessage:"Edit"}),deleteButtonLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.removeFieldButtonLabel",{defaultMessage:"Remove"}),fieldIsShadowedLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.fieldIsShadowedLabel",{defaultMessage:"Field shadowed by a runtime field with the same name."})};function FieldListItemComponent({field:field,allFields:allFields,isHighlighted:isHighlighted,isDimmed:isDimmed,isCreateFieldFormVisible:isCreateFieldFormVisible,areActionButtonsVisible:areActionButtonsVisible,isChainedMultifieldsWarningVisible:isChainedMultifieldsWarningVisible,isLastItem:isLastItem,isShadowed:isShadowed=false,childFieldsArray:childFieldsArray,maxNestedDepth:maxNestedDepth,addField:addField,editField:editField,toggleExpand:toggleExpand,treeDepth:treeDepth},ref){const{source:source,isMultiField:isMultiField,canHaveChildFields:canHaveChildFields,hasChildFields:hasChildFields,canHaveMultiFields:canHaveMultiFields,hasMultiFields:hasMultiFields,isExpanded:isExpanded,path:path}=field;const substractIndentAmount=maxNestedDepth===0?CHILD_FIELD_INDENT_SIZE*.5:0;const indent=treeDepth*CHILD_FIELD_INDENT_SIZE-substractIndentAmount;const indentCreateField=(treeDepth+1)*CHILD_FIELD_INDENT_SIZE+LEFT_PADDING_SIZE_FIELD_ITEM_WRAPPER-substractIndentAmount;const hasDottedLine=isMultiField?isLastItem?false:true:canHaveMultiFields&&isExpanded;const renderCreateField=()=>{if(!isCreateFieldFormVisible){return null}return external_kbnSharedDeps_React_default.a.createElement(CreateField,{allFields:allFields,isRootLevelField:false,isMultiField:canHaveMultiFields,paddingLeft:indentCreateField,maxNestedDepth:maxNestedDepth})};const renderActionButtons=()=>{if(!areActionButtonsVisible){return null}const{addMultiFieldButtonLabel:addMultiFieldButtonLabel,addPropertyButtonLabel:addPropertyButtonLabel,editButtonLabel:editButtonLabel,deleteButtonLabel:deleteButtonLabel}=fields_list_item_i18nTexts;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",className:"mappingsEditor__fieldsListItem__actions"},canHaveMultiFields&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:addMultiFieldButtonLabel},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"documents",onClick:addField,"data-test-subj":"addMultiFieldButton","aria-label":addMultiFieldButtonLabel}))),canHaveChildFields&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:addPropertyButtonLabel},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"plusInCircle",onClick:addField,"data-test-subj":"addPropertyButton","aria-label":addPropertyButtonLabel}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:editButtonLabel},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"pencil",onClick:editField,"data-test-subj":"editFieldButton","aria-label":editButtonLabel}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(DeleteFieldProvider,null,deleteField=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:deleteButtonLabel},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"trash",color:"danger",onClick:()=>deleteField(field),"data-test-subj":"removeFieldButton","aria-label":deleteButtonLabel})))))};const dataTestSubj=`${path.join("")}Field`;return external_kbnSharedDeps_React_default.a.createElement("li",{className:classnames_default()("mappingsEditor__fieldsListItem",{"mappingsEditor__fieldsListItem--dottedLine":hasDottedLine}),"data-test-subj":`fieldsListItem ${dataTestSubj}`,ref:ref},external_kbnSharedDeps_React_default.a.createElement("div",{style:{paddingLeft:`${indent}px`},className:classnames_default()("mappingsEditor__fieldsListItem__field",{"mappingsEditor__fieldsListItem__field--enabled":areActionButtonsVisible,"mappingsEditor__fieldsListItem__field--highlighted":isHighlighted,"mappingsEditor__fieldsListItem__field--dim":isDimmed})},external_kbnSharedDeps_React_default.a.createElement("div",{className:classnames_default()("mappingsEditor__fieldsListItem__wrapper",{"mappingsEditor__fieldsListItem__wrapper--indent":treeDepth===0&&maxNestedDepth===0})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",alignItems:"center",className:classnames_default()("mappingsEditor__fieldsListItem__content",{"mappingsEditor__fieldsListItem__content--toggle":hasChildFields||hasMultiFields,"mappingsEditor__fieldsListItem__content--multiField":isMultiField,"mappingsEditor__fieldsListItem__content--indent":!hasChildFields&&!hasMultiFields&&maxNestedDepth>treeDepth})},(hasChildFields||hasMultiFields)&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mappingsEditor__fieldsListItem__toggle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{color:"text",onClick:toggleExpand,iconType:isExpanded?"arrowDown":"arrowRight","data-test-subj":"toggleExpandButton","aria-label":isExpanded?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.collapseFieldButtonLabel",{defaultMessage:"Collapse field {name}",values:{name:source.name}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.expandFieldButtonLabel",{defaultMessage:"Expand field {name}",values:{name:source.name}})})),isMultiField&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mappingsEditor__fieldsListItem__icon"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{color:"subdued",type:"documents"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mappingsEditor__fieldsListItem__name","data-test-subj":`fieldName ${dataTestSubj}-fieldName`},source.name),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"hollow","data-test-subj":`${dataTestSubj}-datatype`,"data-type-value":source.type},isMultiField?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.multiFieldBadgeLabel",{defaultMessage:"{dataType} multi-field",values:{dataType:getTypeLabelFromField(source)}}):getTypeLabelFromField(source))),isShadowed&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:fields_list_item_i18nTexts.fieldIsShadowedLabel},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"warning","data-test-subj":"isShadowedIndicator"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.shadowedBadgeLabel",{defaultMessage:"Shadowed"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},renderActionButtons())))),isExpanded&&isChainedMultifieldsWarningVisible&&external_kbnSharedDeps_React_default.a.createElement(ChainedMultifieldsWarning,null),Boolean(childFieldsArray.length)&&isExpanded&&external_kbnSharedDeps_React_default.a.createElement(FieldsList,{fields:childFieldsArray,treeDepth:treeDepth+1}),renderCreateField())}const FieldsListItem=external_kbnSharedDeps_React_default.a.memo(Object(external_kbnSharedDeps_React_["forwardRef"])(FieldListItemComponent));const FieldsListItemContainer=({fieldId:fieldId,treeDepth:treeDepth,isLastItem:isLastItem})=>{const dispatch=useDispatch();const listElement=Object(external_kbnSharedDeps_React_["useRef"])(null);const{documentFields:{status:status,fieldToAddFieldTo:fieldToAddFieldTo,fieldToEdit:fieldToEdit},fields:{byId:byId,maxNestedDepth:maxNestedDepth,rootLevelFields:rootLevelFields},runtimeFields:runtimeFields}=useMappingsState();const getField=Object(external_kbnSharedDeps_React_["useCallback"])(id=>byId[id],[byId]);const runtimeFieldNames=Object.values(runtimeFields).map(field=>field.source.name);const field=getField(fieldId);const parentField=field.parentId===undefined?undefined:getField(field.parentId);const{childFields:childFields}=field;const isHighlighted=fieldToEdit===fieldId;const isDimmed=status==="editingField"&&fieldToEdit!==fieldId;const isCreateFieldFormVisible=status==="creatingField"&&fieldToAddFieldTo===fieldId;const areActionButtonsVisible=status==="idle";let isChainedMultifieldsWarningVisible=false;if(field.hasMultiFields&&!Boolean(parentField===null||parentField===void 0?void 0:parentField.hasMultiFields)){isChainedMultifieldsWarningVisible=field.childFields.map(getField).some(childField=>Boolean(childField===null||childField===void 0?void 0:childField.hasMultiFields))}const childFieldsArray=Object(external_kbnSharedDeps_React_["useMemo"])(()=>childFields!==undefined?childFields.map(getField):[],[childFields,getField]);const isShadowed=rootLevelFields.includes(fieldId)&&runtimeFieldNames.includes(field.source.name);const addField=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{dispatch({type:"documentField.createField",value:fieldId})},[fieldId,dispatch]);const editField=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{dispatch({type:"documentField.editField",value:fieldId})},[fieldId,dispatch]);const toggleExpand=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{dispatch({type:"field.toggleExpand",value:{fieldId:fieldId}})},[fieldId,dispatch]);return external_kbnSharedDeps_React_default.a.createElement(FieldsListItem,{ref:listElement,field:field,allFields:byId,treeDepth:treeDepth,isHighlighted:isHighlighted,isDimmed:isDimmed,isShadowed:isShadowed,isCreateFieldFormVisible:isCreateFieldFormVisible,areActionButtonsVisible:areActionButtonsVisible,isChainedMultifieldsWarningVisible:isChainedMultifieldsWarningVisible,isLastItem:isLastItem,childFieldsArray:childFieldsArray,maxNestedDepth:maxNestedDepth,addField:addField,editField:editField,toggleExpand:toggleExpand})};const FieldsList=external_kbnSharedDeps_React_default.a.memo((function FieldsListComponent({fields:fields,treeDepth:treeDepth}){if(fields===undefined){return null}return external_kbnSharedDeps_React_default.a.createElement("ul",{className:"mappingsEditor__fieldsList","data-test-subj":"fieldsList"},fields.map((field,index)=>external_kbnSharedDeps_React_default.a.createElement(FieldsListItemContainer,{key:field.id,fieldId:field.id,treeDepth:treeDepth===undefined?0:treeDepth,isLastItem:index===fields.length-1})))}));const DocumentFieldsHeader=external_kbnSharedDeps_React_default.a.memo(({searchValue:searchValue,onSearchChange:onSearchChange})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.documentFieldsDescription",defaultMessage:"Define the fields for your indexed documents. {docsLink}",values:{docsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getMappingTypesLink(),target:"_blank",external:true},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.documentFieldsDocumentationLink",{defaultMessage:"Learn more."}))}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldSearch"],{style:{minWidth:"350px"},placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.documentFields.searchFieldsPlaceholder",{defaultMessage:"Search fields"}),value:searchValue,onChange:e=>{if(typeof e==="string"){onSearchChange(e)}else{onSearchChange(e.target.value)}},"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.documentFields.searchFieldsAriaLabel",{defaultMessage:"Search mapped fields"})}))));const DocumentFieldsJsonEditor=({defaultValue:defaultValue})=>{const dispatch=useDispatch();const defaultValueRef=Object(external_kbnSharedDeps_React_["useRef"])(defaultValue);const onUpdate=Object(external_kbnSharedDeps_React_["useCallback"])(({data:data,isValid:isValid})=>dispatch({type:"fieldsJsonEditor.update",value:{json:data.format(),isValid:isValid}}),[dispatch]);return external_kbnSharedDeps_React_default.a.createElement(public_["JsonEditor"],{onUpdate:onUpdate,defaultValue:defaultValueRef.current})};const DocumentFieldsTreeEditor=()=>{const dispatch=useDispatch();const{fields:{byId:byId,rootLevelFields:rootLevelFields},documentFields:{status:status,fieldToAddFieldTo:fieldToAddFieldTo}}=useMappingsState();const getField=Object(external_kbnSharedDeps_React_["useCallback"])(fieldId=>byId[fieldId],[byId]);const fields=Object(external_kbnSharedDeps_React_["useMemo"])(()=>rootLevelFields.map(getField),[rootLevelFields,getField]);const addField=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{dispatch({type:"documentField.createField"})},[dispatch]);const renderCreateField=()=>{const isCreateFieldFormVisible=status==="creatingField"&&fieldToAddFieldTo===undefined;if(!isCreateFieldFormVisible){return null}return external_kbnSharedDeps_React_default.a.createElement(CreateField,{isCancelable:fields.length>0,allFields:byId,isRootLevelField:true})};const renderAddFieldButton=()=>{const isDisabled=status!=="idle";return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{disabled:isDisabled,onClick:addField,iconType:"plusInCircleFilled","data-test-subj":"addFieldButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.addFieldButtonLabel",{defaultMessage:"Add field"})))};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(FieldsList,{fields:fields}),renderCreateField(),renderAddFieldButton())};var react_tiny_virtual_list_cjs=__webpack_require__(104);var react_tiny_virtual_list_cjs_default=__webpack_require__.n(react_tiny_virtual_list_cjs);const SearchResultItem=external_kbnSharedDeps_React_default.a.memo((function FieldListItemFlatComponent({item:{display:display,field:field},areActionButtonsVisible:areActionButtonsVisible,isHighlighted:isHighlighted,isDimmed:isDimmed}){const dispatch=useDispatch();const{source:source,isMultiField:isMultiField,hasChildFields:hasChildFields,hasMultiFields:hasMultiFields}=field;const editField=()=>{dispatch({type:"documentField.editField",value:field.id})};const renderActionButtons=()=>{if(!areActionButtonsVisible){return null}const editButtonLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.editFieldButtonLabel",{defaultMessage:"Edit"});const deleteButtonLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.removeFieldButtonLabel",{defaultMessage:"Remove"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",className:"mappingsEditor__fieldsListItem__actions"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:editButtonLabel},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"pencil",onClick:editField,"data-test-subj":"editFieldButton","aria-label":editButtonLabel}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(DeleteFieldProvider,null,deleteField=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:deleteButtonLabel},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"trash",color:"danger",onClick:()=>deleteField(field),"data-test-subj":"removeFieldButton","aria-label":deleteButtonLabel})))))};return external_kbnSharedDeps_React_default.a.createElement("div",{className:classnames_default()("mappingsEditor__fieldsListItem"),"data-test-subj":"fieldsListItem"},external_kbnSharedDeps_React_default.a.createElement("div",{className:classnames_default()("mappingsEditor__fieldsListItem__field",{"mappingsEditor__fieldsListItem__field--enabled":areActionButtonsVisible,"mappingsEditor__fieldsListItem__field--selected":isHighlighted,"mappingsEditor__fieldsListItem__field--dim":isDimmed})},external_kbnSharedDeps_React_default.a.createElement("div",{className:classnames_default()("mappingsEditor__fieldsListItem__wrapper")},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",alignItems:"center",className:classnames_default()("mappingsEditor__fieldsListItem__content",{"mappingsEditor__fieldsListItem__content--toggle":hasChildFields||hasMultiFields,"mappingsEditor__fieldsListItem__content--multiField":isMultiField})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mappingsEditor__fieldsListItem__name"},display),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"hollow"},isMultiField?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.multiFieldBadgeLabel",{defaultMessage:"{dataType} multi-field",values:{dataType:TYPE_DEFINITION[source.type].label}}):getTypeLabelFromField(source))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,renderActionButtons())))))}));const ITEM_HEIGHT=64;const SearchResult=external_kbnSharedDeps_React_default.a.memo(({result:result,documentFieldsState:{status:status,fieldToEdit:fieldToEdit},style:virtualListStyle})=>{const dispatch=useDispatch();const listHeight=Math.min(result.length*ITEM_HEIGHT,600);const clearSearch=()=>{dispatch({type:"search:update",value:""})};return result.length===0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"search",title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.searchResult.emptyPromptTitle",defaultMessage:"No fields match your search"})),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:clearSearch},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.searchResult.emptyPrompt.clearSearchButtonLabel",defaultMessage:"Clear search"}))}):external_kbnSharedDeps_React_default.a.createElement(react_tiny_virtual_list_cjs_default.a,{style:{overflowX:"hidden",...virtualListStyle},width:"100%",height:listHeight,itemCount:result.length,itemSize:ITEM_HEIGHT,overscanCount:4,renderItem:({index:index,style:style})=>{const item=result[index];return external_kbnSharedDeps_React_default.a.createElement("div",{key:item.field.id,style:style},external_kbnSharedDeps_React_default.a.createElement(SearchResultItem,{item:item,areActionButtonsVisible:status==="idle",isDimmed:status==="editingField"&&fieldToEdit!==item.field.id,isHighlighted:status==="editingField"&&fieldToEdit===item.field.id}))}})});const{useGlobalFlyout:useGlobalFlyout}=public_["GlobalFlyout"];const DocumentFields=external_kbnSharedDeps_React_default.a.memo(()=>{const{fields:fields,search:search,documentFields:documentFields}=useMappingsState();const dispatch=useDispatch();const{addContent:addContentToGlobalFlyout,removeContent:removeContentFromGlobalFlyout}=useGlobalFlyout();const{editor:editorType}=documentFields;const isEditing=documentFields.status==="editingField";const jsonEditorDefaultValue=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{if(editorType==="json"){return deNormalize(fields)}},[editorType,fields]);const editor=editorType==="json"?external_kbnSharedDeps_React_default.a.createElement(DocumentFieldsJsonEditor,{defaultValue:jsonEditorDefaultValue}):external_kbnSharedDeps_React_default.a.createElement(DocumentFieldsTreeEditor,null);const onSearchChange=Object(external_kbnSharedDeps_React_["useCallback"])(value=>{dispatch({type:"search:update",value:value})},[dispatch]);const exitEdit=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{dispatch({type:"documentField.changeStatus",value:"idle"})},[dispatch]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(isEditing){addContentToGlobalFlyout({id:"mappingsEditField",Component:EditFieldContainer,props:{exitEdit:exitEdit},flyoutProps:{...defaultFlyoutProps,onClose:exitEdit},cleanUpFunc:exitEdit})}},[isEditing,addContentToGlobalFlyout,fields.byId,exitEdit]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!isEditing){removeContentFromGlobalFlyout("mappingsEditField")}},[isEditing,removeContentFromGlobalFlyout]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>()=>{if(isEditing){exitEdit()}},[isEditing,exitEdit]);const searchTerm=search.term.trim();return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"documentFields"},external_kbnSharedDeps_React_default.a.createElement(DocumentFieldsHeader,{searchValue:search.term,onSearchChange:onSearchChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),searchTerm!==""?external_kbnSharedDeps_React_default.a.createElement(SearchResult,{result:search.result,documentFieldsState:documentFields}):editor)});const EditorToggleControls=({editor:editor})=>{const dispatch=useDispatch();const{fieldsJsonEditor:fieldsJsonEditor}=useMappingsState();const[showMaxDepthWarning,setShowMaxDepthWarning]=external_kbnSharedDeps_React_default.a.useState(false);const[showValidityWarning,setShowValidityWarning]=external_kbnSharedDeps_React_default.a.useState(false);const clearWarnings=()=>{if(showMaxDepthWarning){setShowMaxDepthWarning(false)}if(showValidityWarning){setShowValidityWarning(false)}};if(editor==="default"){clearWarnings();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:()=>{dispatch({type:"documentField.changeEditor",value:"json"})}},"Use JSON Editor")}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:()=>{clearWarnings();const{isValid:isValid}=fieldsJsonEditor;if(!isValid){setShowValidityWarning(true)}else{const deNormalizedFields=fieldsJsonEditor.format();const{maxNestedDepth:maxNestedDepth}=normalize(deNormalizedFields);const canUseDefaultEditor=canUseMappingsEditor(maxNestedDepth);if(canUseDefaultEditor){dispatch({type:"documentField.changeEditor",value:"default"})}else{setShowMaxDepthWarning(true)}}}},"Use Mappings Editor"),showMaxDepthWarning?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"danger"},"Max depth for Mappings Editor exceeded"):null,showValidityWarning&&!fieldsJsonEditor.isValid?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"danger"},"JSON is invalid"):null)};const EmptyPrompt=({createField:createField,runtimeFieldsDocsUri:runtimeFieldsDocsUri})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"managementApp","data-test-subj":"emptyList",title:external_kbnSharedDeps_React_default.a.createElement("h2",{"data-test-subj":"title"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.runtimeFields.emptyPromptTitle",{defaultMessage:"Start by creating a runtime field"})),body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.runtimeFields.emptyPromptDescription",defaultMessage:"Define a field in the mapping and evaluate it at search time."}),external_kbnSharedDeps_React_default.a.createElement("br",null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:runtimeFieldsDocsUri,target:"_blank","data-test-subj":"learnMoreLink",external:true},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.runtimeFields.emptyPromptDocumentionLink",{defaultMessage:"Learn more."}))),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:()=>createField(),iconType:"plusInCircle","data-test-subj":"createRuntimeFieldButton",fill:true},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.runtimeFields.emptyPromptButtonLabel",{defaultMessage:"Create runtime field"}))});const DeleteRuntimeFieldProvider=({children:children})=>{const[state,setState]=Object(external_kbnSharedDeps_React_["useState"])({isModalOpen:false});const dispatch=useDispatch();const confirmButtonText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.deleteRuntimeField.confirmationModal.removeButtonLabel",{defaultMessage:"Remove"});let modalTitle;if(state.field){const{source:source}=state.field;modalTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.deleteRuntimeField.confirmationModal.title",{defaultMessage:"Remove runtime field '{fieldName}'?",values:{fieldName:source.name}})}const deleteField=field=>{setState({isModalOpen:true,field:field})};const closeModal=()=>{setState({isModalOpen:false})};const confirmDelete=()=>{dispatch({type:"runtimeField.remove",value:state.field.id});closeModal()};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,children(deleteField),state.isModalOpen&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:modalTitle,"data-test-subj":"runtimeFieldDeleteConfirmModal",onCancel:closeModal,onConfirm:confirmDelete,cancelButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.deleteRuntimeField.confirmationModal.cancelButtonLabel",{defaultMessage:"Cancel"}),buttonColor:"danger",confirmButtonText:confirmButtonText}))};function RuntimeFieldsListItemComponent({field:field,areActionButtonsVisible:areActionButtonsVisible,isHighlighted:isHighlighted,isDimmed:isDimmed,editField:editField},ref){const{source:source}=field;const renderActionButtons=()=>{if(!areActionButtonsVisible){return null}const editButtonLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.editRuntimeFieldButtonLabel",{defaultMessage:"Edit"});const deleteButtonLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.removeRuntimeFieldButtonLabel",{defaultMessage:"Remove"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",className:"mappingsEditor__fieldsListItem__actions"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:editButtonLabel},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"pencil",onClick:editField,"data-test-subj":"editFieldButton","aria-label":editButtonLabel}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(DeleteRuntimeFieldProvider,null,deleteField=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:deleteButtonLabel},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"trash",color:"danger",onClick:()=>deleteField(field),"data-test-subj":"removeFieldButton","aria-label":deleteButtonLabel})))))};return external_kbnSharedDeps_React_default.a.createElement("li",{className:"mappingsEditor__fieldsListItem","data-test-subj":"runtimeFieldsListItem"},external_kbnSharedDeps_React_default.a.createElement("div",{className:classnames_default()("mappingsEditor__fieldsListItem__field",{"mappingsEditor__fieldsListItem__field--enabled":areActionButtonsVisible,"mappingsEditor__fieldsListItem__field--highlighted":isHighlighted,"mappingsEditor__fieldsListItem__field--dim":isDimmed})},external_kbnSharedDeps_React_default.a.createElement("div",{className:"mappingsEditor__fieldsListItem__wrapper mappingsEditor__fieldsListItem__wrapper--indent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",alignItems:"center",className:"mappingsEditor__fieldsListItem__content"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mappingsEditor__fieldsListItem__name","data-test-subj":"fieldName"},source.name),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"hollow","data-test-subj":"fieldType","data-type-value":source.type},getTypeLabelFromField(source))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},renderActionButtons())))))}const RuntimeFieldsListItem=external_kbnSharedDeps_React_default.a.memo(RuntimeFieldsListItemComponent);const RuntimeFieldsListItemContainer=({fieldId:fieldId})=>{const dispatch=useDispatch();const{runtimeFieldsList:{status:status,fieldToEdit:fieldToEdit},runtimeFields:runtimeFields}=useMappingsState();const getField=Object(external_kbnSharedDeps_React_["useCallback"])(id=>runtimeFields[id],[runtimeFields]);const field=getField(fieldId);const isHighlighted=fieldToEdit===fieldId;const isDimmed=status==="editingField"&&fieldToEdit!==fieldId;const areActionButtonsVisible=status==="idle";const editField=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{dispatch({type:"runtimeFieldsList.editField",value:fieldId})},[fieldId,dispatch]);return external_kbnSharedDeps_React_default.a.createElement(RuntimeFieldsListItem,{field:field,isHighlighted:isHighlighted,isDimmed:isDimmed,areActionButtonsVisible:areActionButtonsVisible,editField:editField})};const{useGlobalFlyout:runtime_fields_list_useGlobalFlyout}=public_["GlobalFlyout"];const RuntimeFieldsList=()=>{const runtimeFieldsDocsUri=documentationService.getRuntimeFields();const{runtimeFields:runtimeFields,runtimeFieldsList:{status:status,fieldToEdit:fieldToEdit},fields:fields}=useMappingsState();const dispatch=useDispatch();const{addContent:addContentToGlobalFlyout,removeContent:removeContentFromGlobalFlyout}=runtime_fields_list_useGlobalFlyout();const{value:{docLinks:docLinks}}=useConfig();const createField=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{dispatch({type:"runtimeFieldsList.createField"})},[dispatch]);const exitEdit=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{dispatch({type:"runtimeFieldsList.closeRuntimeFieldEditor"})},[dispatch]);const saveRuntimeField=Object(external_kbnSharedDeps_React_["useCallback"])(field=>{if(fieldToEdit){dispatch({type:"runtimeField.edit",value:{id:fieldToEdit,source:field}})}else{dispatch({type:"runtimeField.add",value:field})}},[dispatch,fieldToEdit]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(status==="creatingField"||status==="editingField"){var _runtimeFields$fieldT;addContentToGlobalFlyout({id:"runtimeFieldEditor",Component:runtimeFields_public_["RuntimeFieldEditorFlyoutContent"],props:{onSave:saveRuntimeField,onCancel:exitEdit,defaultValue:fieldToEdit?(_runtimeFields$fieldT=runtimeFields[fieldToEdit])===null||_runtimeFields$fieldT===void 0?void 0:_runtimeFields$fieldT.source:undefined,docLinks:docLinks,ctx:{namesNotAllowed:Object.values(runtimeFields).map(field=>field.source.name),existingConcreteFields:Object.values(fields.byId).map(field=>({name:field.source.name,type:field.source.type}))}},flyoutProps:{"data-test-subj":"runtimeFieldEditor","aria-labelledby":"runtimeFieldEditorEditTitle",maxWidth:720,onClose:exitEdit},cleanUpFunc:exitEdit})}else if(status==="idle"){removeContentFromGlobalFlyout("runtimeFieldEditor")}},[status,fieldToEdit,runtimeFields,fields,docLinks,addContentToGlobalFlyout,removeContentFromGlobalFlyout,saveRuntimeField,exitEdit]);const fieldsToArray=Object.entries(runtimeFields);const isEmpty=fieldsToArray.length===0;const isCreateFieldDisabled=status!=="idle";return isEmpty?external_kbnSharedDeps_React_default.a.createElement(EmptyPrompt,{createField:createField,runtimeFieldsDocsUri:runtimeFieldsDocsUri}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.runtimeFieldsDescription",defaultMessage:"Define the runtime fields accessible at search time. {docsLink}",values:{docsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:runtimeFieldsDocsUri,target:"_blank",external:true},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.runtimeFieldsDocumentationLink",{defaultMessage:"Learn more."}))}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement("ul",null,fieldsToArray.map(([fieldId])=>external_kbnSharedDeps_React_default.a.createElement(RuntimeFieldsListItemContainer,{key:fieldId,fieldId:fieldId}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{disabled:isCreateFieldDisabled,onClick:createField,iconType:"plusInCircleFilled","data-test-subj":"createRuntimeFieldButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.addRuntimeFieldButtonLabel",{defaultMessage:"Add field"})))};const{isJsonField:templates_form_schema_isJsonField}=helpers_["fieldValidators"];const templatesFormSchema={dynamicTemplates:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.templates.dynamicTemplatesEditorLabel",{defaultMessage:"Dynamic templates data"}),validations:[{validator:templates_form_schema_isJsonField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.templates.dynamicTemplatesEditorJsonError",{defaultMessage:"The dynamic templates JSON is not valid."}))}]}};const stringifyJson=json=>Array.isArray(json)?JSON.stringify(json,null,2):"[\n\n]";const templates_form_formSerializer=formData=>{const{dynamicTemplates:dynamicTemplates}=formData;let parsedTemplates;try{parsedTemplates=JSON.parse(dynamicTemplates);if(!Array.isArray(parsedTemplates)){parsedTemplates=[parsedTemplates]}}catch{}return{dynamic_templates:Array.isArray(parsedTemplates)&&parsedTemplates.length>0?parsedTemplates:[]}};const templates_form_formDeserializer=formData=>{const{dynamic_templates:dynamic_templates}=formData;return{dynamicTemplates:stringifyJson(dynamic_templates)}};const TemplatesForm=external_kbnSharedDeps_React_default.a.memo(({value:value})=>{const isMounted=Object(external_kbnSharedDeps_React_["useRef"])(false);const{form:form}=Object(hook_form_lib_["useForm"])({schema:templatesFormSchema,serializer:templates_form_formSerializer,deserializer:templates_form_formDeserializer,defaultValue:value});const{subscribe:subscribe,getFormData:getFormData,submit:submitForm,reset:reset}=form;const dispatch=useDispatch();Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const subscription=subscribe(({data:data,isValid:isValid,validate:validate})=>{dispatch({type:"templates.update",value:{data:data,isValid:isValid,validate:validate,submitForm:submitForm}})});return subscription.unsubscribe},[subscribe,dispatch,submitForm]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(isMounted.current){reset({resetValues:true,defaultValue:value})}},[value,reset]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{isMounted.current=true;return()=>{isMounted.current=false;const dynamicTemplatesData=getFormData();dispatch({type:"templates.save",value:dynamicTemplatesData})}},[getFormData,dispatch]);return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"dynamicTemplates"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.dynamicTemplatesDescription",defaultMessage:"Use dynamic templates to define custom mappings that can be applied to dynamically added fields. {docsLink}",values:{docsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getDynamicTemplatesLink(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dynamicTemplatesDocumentationLink",{defaultMessage:"Learn more."}))}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["Form"],{form:form,isInvalid:form.isSubmitted&&!form.isValid,error:form.getErrors()},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"dynamicTemplates",component:components_["JsonEditorField"],componentProps:{euiCodeEditorProps:{["data-test-subj"]:"dynamicTemplatesEditor",height:"600px","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.dynamicTemplatesEditorAriaLabel",{defaultMessage:"Dynamic templates editor"})}}})))});const MultipleMappingsWarning=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.mappingTypesDetectedCallOutTitle",{defaultMessage:"Multiple mapping types detected"}),iconType:"alert",color:"warning","data-test-subj":"mappingTypesDetectedCallout"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.mappingTypesDetectedCallOutDescription",defaultMessage:"The mappings for this template uses multiple types, which are not supported. {docsLink}",values:{docsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getAlternativeToMappingTypesLink(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.mappingTypesDetectedCallOutDocumentationLink",{defaultMessage:"Consider these alternatives to mapping types."}))}})));const useMappingsStateListener=({onChange:onChange,value:value,mappingsType:mappingsType})=>{const state=useMappingsState();const dispatch=useDispatch();const{fields:mappedFields,runtime:runtimeFields}=value!==null&&value!==void 0?value:{};const parsedFieldsDefaultValue=Object(external_kbnSharedDeps_React_["useMemo"])(()=>normalize(mappedFields),[mappedFields]);const parsedRuntimeFieldsDefaultValue=Object(external_kbnSharedDeps_React_["useMemo"])(()=>normalizeRuntimeFields(runtimeFields),[runtimeFields]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const isFieldFormVisible=state.fieldForm!==undefined;const emptyNameValue=isFieldFormVisible&&(state.fieldForm.data.internal.name===undefined||state.fieldForm.data.internal.name.trim()==="");const bypassFieldFormValidation=state.documentFields.status==="creatingField"&&emptyNameValue;onChange({getData:()=>{const fields=state.documentFields.editor==="json"?state.fieldsJsonEditor.format():deNormalize(state.fields);const runtime=deNormalizeRuntimeFields(state.runtimeFields);const configurationData=state.configuration.data.format();const templatesData=state.templates.data.format();const output={...stripUndefinedValues({...configurationData,...templatesData})};if(fields&&Object.keys(fields).length>0){output.properties=fields}if(runtime&&Object.keys(runtime).length>0){output.runtime=runtime}if(Object.keys(output).length>0){return mappingsType===undefined?output:{[mappingsType]:output}}return mappingsType===undefined?undefined:{[mappingsType]:{}}},validate:async()=>{const configurationFormValidator=state.configuration.submitForm!==undefined?new Promise(async resolve=>{const{isValid:isValid}=await state.configuration.submitForm();resolve(isValid)}):Promise.resolve(true);const templatesFormValidator=state.templates.submitForm!==undefined?new Promise(async resolve=>{const{isValid:isValid}=await state.templates.submitForm();resolve(isValid)}):Promise.resolve(true);const promisesToValidate=[configurationFormValidator,templatesFormValidator];if(state.fieldForm!==undefined&&!bypassFieldFormValidation){promisesToValidate.push(state.fieldForm.validate())}return Promise.all(promisesToValidate).then(validationArray=>{const isValid=validationArray.every(Boolean)&&state.fieldsJsonEditor.isValid;dispatch({type:"validity:update",value:isValid});return isValid})},isValid:state.isValid})},[state,onChange,dispatch,mappingsType]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(value===undefined){return}dispatch({type:"editor.replaceMappings",value:{configuration:value.configuration,templates:value.templates,fields:parsedFieldsDefaultValue,documentFields:{status:parsedFieldsDefaultValue.rootLevelFields.length===0?"creatingField":"idle",editor:"default"},runtimeFields:parsedRuntimeFieldsDefaultValue}})},[value,parsedFieldsDefaultValue,dispatch,parsedRuntimeFieldsDefaultValue])};const MappingsEditor=external_kbnSharedDeps_React_default.a.memo(({onChange:onChange,value:value,docLinks:docLinks,indexSettings:indexSettings})=>{const{parsedDefaultValue:parsedDefaultValue,multipleMappingsDeclared:multipleMappingsDeclared,mappingsType:mappingsType}=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{const mappingsDefinition=extractMappingsDefinition(value);if(mappingsDefinition===null){return{multipleMappingsDeclared:true}}const{_source:_source,_meta:_meta,_routing:_routing,dynamic:dynamic,properties:properties,runtime:runtime,numeric_detection:numeric_detection,date_detection:date_detection,dynamic_date_formats:dynamic_date_formats,dynamic_templates:dynamic_templates}=mappingsDefinition.mappings;const parsed={configuration:{_source:_source,_meta:_meta,_routing:_routing,dynamic:dynamic,numeric_detection:numeric_detection,date_detection:date_detection,dynamic_date_formats:dynamic_date_formats},fields:properties,templates:{dynamic_templates:dynamic_templates},runtime:runtime};return{parsedDefaultValue:parsed,multipleMappingsDeclared:false,mappingsType:mappingsDefinition.type}},[value]);useMappingsStateListener({onChange:onChange,value:parsedDefaultValue,mappingsType:mappingsType});const{update:updateConfig}=useConfig();const state=useMappingsState();const[selectedTab,selectTab]=Object(external_kbnSharedDeps_React_["useState"])("fields");Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(multipleMappingsDeclared){onChange({getData:()=>value,validate:()=>Promise.resolve(true),isValid:true})}},[multipleMappingsDeclared,onChange,value]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{updateConfig({docLinks:docLinks,indexSettings:indexSettings!==null&&indexSettings!==void 0?indexSettings:{}})},[updateConfig,docLinks,indexSettings]);const changeTab=async tab=>{if(selectedTab==="advanced"){const{isValid:isConfigurationFormValid}=await state.configuration.submitForm();if(!isConfigurationFormValid){return}}else if(selectedTab==="templates"){const{isValid:isTemplatesFormValid}=await state.templates.submitForm();if(!isTemplatesFormValid){return}}selectTab(tab)};const tabToContentMap={fields:external_kbnSharedDeps_React_default.a.createElement(DocumentFields,null),runtimeFields:external_kbnSharedDeps_React_default.a.createElement(RuntimeFieldsList,null),templates:external_kbnSharedDeps_React_default.a.createElement(TemplatesForm,{value:state.templates.defaultValue}),advanced:external_kbnSharedDeps_React_default.a.createElement(ConfigurationForm,{value:state.configuration.defaultValue})};return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"mappingsEditor"},multipleMappingsDeclared?external_kbnSharedDeps_React_default.a.createElement(MultipleMappingsWarning,null):external_kbnSharedDeps_React_default.a.createElement("div",{className:"mappingsEditor"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTabs"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTab"],{onClick:()=>changeTab("fields"),isSelected:selectedTab==="fields","data-test-subj":"formTab"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.fieldsTabLabel",{defaultMessage:"Mapped fields"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTab"],{onClick:()=>changeTab("runtimeFields"),isSelected:selectedTab==="runtimeFields","data-test-subj":"formTab"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.runtimeFieldsTabLabel",{defaultMessage:"Runtime fields"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTab"],{onClick:()=>changeTab("templates"),isSelected:selectedTab==="templates","data-test-subj":"formTab"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.templatesTabLabel",{defaultMessage:"Dynamic templates"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTab"],{onClick:()=>changeTab("advanced"),isSelected:selectedTab==="advanced","data-test-subj":"formTab"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.advancedTabLabel",{defaultMessage:"Advanced options"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),tabToContentMap[selectedTab]))});const MAX_ERRORS_TO_DISPLAY=1;const getTexts=(view,totalErrors=0)=>({modalTitle:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.loadJsonModalTitle",{defaultMessage:"Load JSON"}),buttons:{confirm:view==="json"?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.loadJsonModal.loadButtonLabel",{defaultMessage:"Load and overwrite"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.loadJsonModal.acceptWarningLabel",{defaultMessage:"Continue loading"}),cancel:view==="json"?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.loadJsonModal.cancelButtonLabel",{defaultMessage:"Cancel"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.loadJsonModal.goBackButtonLabel",{defaultMessage:"Go back"})},editor:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.loadJsonModal.jsonEditorLabel",{defaultMessage:"Mappings object"})},validationErrors:{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.loadJsonModal.validationErrorTitle",defaultMessage:"{totalErrors} {totalErrors, plural, one {invalid option} other {invalid options}} detected in {mappings} object",values:{totalErrors:totalErrors,mappings:external_kbnSharedDeps_React_default.a.createElement("code",null,"mappings")}}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.loadJsonModal.validationErrorDescription",{defaultMessage:"If you continue loading the object, only valid options will be accepted."})}});const getErrorMessage=error=>{switch(error.code){case"ERR_CONFIG":{return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.loadJsonModal.validationError.configurationMessage",defaultMessage:"The {configName} configuration is invalid.",values:{configName:external_kbnSharedDeps_React_default.a.createElement("code",null,error.configName)}})}case"ERR_FIELD":{return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.loadJsonModal.validationError.fieldMessage",defaultMessage:"The {fieldPath} field is invalid.",values:{fieldPath:external_kbnSharedDeps_React_default.a.createElement("code",null,error.fieldPath)}})}case"ERR_PARAMETER":{return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.loadJsonModal.validationError.parameterMessage",defaultMessage:"The {paramName} parameter on field {fieldPath} is invalid.",values:{paramName:external_kbnSharedDeps_React_default.a.createElement("code",null,error.paramName),fieldPath:external_kbnSharedDeps_React_default.a.createElement("code",null,error.fieldPath)}})}}};const areAllObjectKeysValidParameters=obj=>Object.keys(obj).every(key=>VALID_MAPPINGS_PARAMETERS.includes(key));const LoadMappingsProvider=({onJson:onJson,children:children})=>{var _state$errors,_state$json;const[state,setState]=Object(external_kbnSharedDeps_React_["useState"])({isModalOpen:false});const[totalErrorsToDisplay,setTotalErrorsToDisplay]=Object(external_kbnSharedDeps_React_["useState"])(MAX_ERRORS_TO_DISPLAY);const jsonContent=Object(external_kbnSharedDeps_React_["useRef"])(undefined);const view=state.json!==undefined&&state.errors!==undefined?"validationResult":"json";const i18nTexts=getTexts(view,(_state$errors=state.errors)===null||_state$errors===void 0?void 0:_state$errors.length);const onJsonUpdate=Object(external_kbnSharedDeps_React_["useCallback"])(jsonUpdateData=>{jsonContent.current=jsonUpdateData},[]);const openModal=()=>{setState({isModalOpen:true})};const closeModal=()=>{setState({isModalOpen:false})};const getMappingsMetadata=unparsed=>{let hasCustomType=false;let isMultiTypeMappings=false;let customType;const areAllKeysValid=areAllObjectKeysValidParameters(unparsed);const areAllValuesPlainObjects=Object.values(unparsed).every(external_kbnSharedDeps_Lodash_["isPlainObject"]);const areAllValuesObjKeysValidParameterName=areAllValuesPlainObjects&&Object.values(unparsed).every(areAllObjectKeysValidParameters);if(!areAllKeysValid&&areAllValuesPlainObjects){hasCustomType=true;isMultiTypeMappings=Object.keys(unparsed).length>1}else if(areAllKeysValid&&areAllValuesPlainObjects&&areAllValuesObjKeysValidParameterName){hasCustomType=true;isMultiTypeMappings=Object.keys(unparsed).length>1}if(hasCustomType&&!isMultiTypeMappings){customType=Object.keys(unparsed)[0]}return{isMultiTypeMappings:isMultiTypeMappings,customType:customType}};const loadJson=()=>{if(jsonContent.current===undefined){onJson({});closeModal();return}const isValidJson=jsonContent.current.validate();if(isValidJson){const unparsed=jsonContent.current.data.format();if(Object.keys(unparsed).length===0){onJson(unparsed);closeModal();return}let mappingsToValidate=unparsed;const{isMultiTypeMappings:isMultiTypeMappings,customType:customType}=getMappingsMetadata(unparsed);if(isMultiTypeMappings){onJson(unparsed);closeModal();return}if(customType!==undefined&&customType!=="properties"){mappingsToValidate=unparsed[customType]}const{value:parsed,errors:errors}=validateMappings(mappingsToValidate);const parsedWithType=customType!==undefined?{[customType]:parsed}:parsed;if(errors){setState({isModalOpen:true,json:{unparsed:unparsed,parsed:parsedWithType},errors:errors});return}onJson(parsedWithType);closeModal()}};const onConfirm=()=>{if(view==="json"){loadJson()}else{onJson(state.json.parsed);closeModal()}};const onCancel=()=>{if(view==="json"){closeModal()}else{setState({isModalOpen:true,json:state.json})}};const renderErrorsFilterButton=()=>{const showingAllErrors=totalErrorsToDisplay>MAX_ERRORS_TO_DISPLAY;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:()=>setTotalErrorsToDisplay(showingAllErrors?MAX_ERRORS_TO_DISPLAY:state.errors.length),iconType:showingAllErrors?"arrowUp":"arrowDown"},showingAllErrors?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.hideErrorsButtonLabel",{defaultMessage:"Hide errors"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.showAllErrorsButtonLabel",{defaultMessage:"Show {numErrors} more errors",values:{numErrors:state.errors.length-MAX_ERRORS_TO_DISPLAY}}))};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,children(openModal),state.isModalOpen&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:i18nTexts.modalTitle,onCancel:onCancel,onConfirm:onConfirm,cancelButtonText:i18nTexts.buttons.cancel,confirmButtonText:i18nTexts.buttons.confirm,maxWidth:600},view==="json"?external_kbnSharedDeps_React_default.a.createElement("div",{className:"application"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsEditor.loadJsonModal.jsonEditorHelpText",defaultMessage:"Provide a mappings object, for example, the object assigned to an index {mappings} property. This will overwrite existing mappings, dynamic templates, and options.",values:{mappings:external_kbnSharedDeps_React_default.a.createElement("code",null,"mappings")}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(public_["JsonEditor"],{label:i18nTexts.editor.label,onUpdate:onJsonUpdate,defaultValue:(_state$json=state.json)===null||_state$json===void 0?void 0:_state$json.unparsed,euiCodeEditorProps:{height:"450px"}})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:i18nTexts.validationErrors.title,iconType:"alert",color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,i18nTexts.validationErrors.description)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement("ol",null,state.errors.slice(0,totalErrorsToDisplay).map((error,i)=>external_kbnSharedDeps_React_default.a.createElement("li",{key:i},getErrorMessage(error)))),state.errors.length>MAX_ERRORS_TO_DISPLAY&&renderErrorsFilterButton()))))};const LoadMappingsFromJsonButton=({onJson:onJson})=>external_kbnSharedDeps_React_default.a.createElement(LoadMappingsProvider,{onJson:onJson},openModal=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:openModal,size:"s"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.mappingsEditor.loadFromJsonButtonLabel",{defaultMessage:"Load JSON"})));const MappingsEditorProvider=({children:children})=>external_kbnSharedDeps_React_default.a.createElement(StateProvider,null,external_kbnSharedDeps_React_default.a.createElement(ConfigProvider,null,children));var types=__webpack_require__(54);const REFRESH_RATE_INDEX_LIST=3e4;const TAB_SUMMARY="TAB_SUMMARY";const TAB_SETTINGS="TAB_SETTINGS";const TAB_MAPPING="TAB_MAPPING";const TAB_STATS="TAB_STATS";const TAB_EDIT_SETTINGS="TAB_EDIT_SETTINGS";const ILM_URL_GENERATOR_ID="ILM_URL_GENERATOR_ID";const ILM_PAGES_POLICY_EDIT="policy_edit";const REACT_ROOT_ID="indexManagementReactRoot";var string_=__webpack_require__(30);function http_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class HttpService{constructor(){http_defineProperty(this,"client",void 0)}setup(httpClient){this.client=httpClient}get httpClient(){return this.client}}const httpService=new HttpService;const use_request_sendRequest=config=>Object(public_["sendRequest"])(httpService.httpClient,config);const use_request_useRequest=config=>Object(public_["useRequest"])(httpService.httpClient,config);let api_uiMetricService;const setUiMetricService=_uiMetricService=>{api_uiMetricService=_uiMetricService};function useLoadDataStreams({includeStats:includeStats}){return use_request_useRequest({path:`${constants["a"]}/data_streams`,method:"get",query:{includeStats:includeStats}})}function useLoadDataStream(name){return use_request_useRequest({path:`${constants["a"]}/data_streams/${encodeURIComponent(name)}`,method:"get"})}async function deleteDataStreams(dataStreams){return use_request_sendRequest({path:`${constants["a"]}/delete_data_streams`,method:"post",body:{dataStreams:dataStreams}})}async function api_loadIndices(){const response=await httpService.httpClient.get(`${constants["a"]}/indices`);return response.data?response.data:response}async function api_reloadIndices(indexNames,{asSystemRequest:asSystemRequest}={}){const body=JSON.stringify({indexNames:indexNames});const response=await httpService.httpClient.post(`${constants["a"]}/indices/reload`,{body:body,asSystemRequest:asSystemRequest});return response.data?response.data:response}async function api_closeIndices(indices){const body=JSON.stringify({indices:indices});const response=await httpService.httpClient.post(`${constants["a"]}/indices/close`,{body:body});const eventName=indices.length>1?constants["w"]:constants["v"];api_uiMetricService.trackMetric(METRIC_TYPE.COUNT,eventName);return response}async function api_deleteIndices(indices){const body=JSON.stringify({indices:indices});const response=await httpService.httpClient.post(`${constants["a"]}/indices/delete`,{body:body});const eventName=indices.length>1?constants["y"]:constants["x"];api_uiMetricService.trackMetric(METRIC_TYPE.COUNT,eventName);return response}async function api_openIndices(indices){const body=JSON.stringify({indices:indices});const response=await httpService.httpClient.post(`${constants["a"]}/indices/open`,{body:body});const eventName=indices.length>1?constants["G"]:constants["F"];api_uiMetricService.trackMetric(METRIC_TYPE.COUNT,eventName);return response}async function api_refreshIndices(indices){const body=JSON.stringify({indices:indices});const response=await httpService.httpClient.post(`${constants["a"]}/indices/refresh`,{body:body});const eventName=indices.length>1?constants["I"]:constants["H"];api_uiMetricService.trackMetric(METRIC_TYPE.COUNT,eventName);return response}async function api_flushIndices(indices){const body=JSON.stringify({indices:indices});const response=await httpService.httpClient.post(`${constants["a"]}/indices/flush`,{body:body});const eventName=indices.length>1?constants["A"]:constants["z"];api_uiMetricService.trackMetric(METRIC_TYPE.COUNT,eventName);return response}async function api_forcemergeIndices(indices,maxNumSegments){const body=JSON.stringify({indices:indices,maxNumSegments:maxNumSegments});const response=await httpService.httpClient.post(`${constants["a"]}/indices/forcemerge`,{body:body});const eventName=indices.length>1?constants["C"]:constants["B"];api_uiMetricService.trackMetric(METRIC_TYPE.COUNT,eventName);return response}async function api_clearCacheIndices(indices){const body=JSON.stringify({indices:indices});const response=await httpService.httpClient.post(`${constants["a"]}/indices/clear_cache`,{body:body});const eventName=indices.length>1?constants["u"]:constants["t"];api_uiMetricService.trackMetric(METRIC_TYPE.COUNT,eventName);return response}async function api_freezeIndices(indices){const body=JSON.stringify({indices:indices});const response=await httpService.httpClient.post(`${constants["a"]}/indices/freeze`,{body:body});const eventName=indices.length>1?constants["E"]:constants["D"];api_uiMetricService.trackMetric(METRIC_TYPE.COUNT,eventName);return response}async function api_unfreezeIndices(indices){const body=JSON.stringify({indices:indices});const response=await httpService.httpClient.post(`${constants["a"]}/indices/unfreeze`,{body:body});const eventName=indices.length>1?constants["K"]:constants["J"];api_uiMetricService.trackMetric(METRIC_TYPE.COUNT,eventName);return response}async function loadIndexSettings(indexName){const response=await httpService.httpClient.get(`${constants["a"]}/settings/${encodeURIComponent(indexName)}`);return response}async function api_updateIndexSettings(indexName,body){const response=await httpService.httpClient.put(`${constants["a"]}/settings/${encodeURIComponent(indexName)}`,{body:JSON.stringify(body)});api_uiMetricService.trackMetric(METRIC_TYPE.COUNT,constants["Z"]);return response}async function loadIndexStats(indexName){const response=await httpService.httpClient.get(`${constants["a"]}/stats/${encodeURIComponent(indexName)}`);return response}async function loadIndexMapping(indexName){const response=await httpService.httpClient.get(`${constants["a"]}/mapping/${encodeURIComponent(indexName)}`);return response}async function loadIndexData(type,indexName){switch(type){case TAB_MAPPING:return loadIndexMapping(indexName);case TAB_SETTINGS:return loadIndexSettings(indexName);case TAB_STATS:return loadIndexStats(indexName)}}function useLoadIndexTemplates(){return use_request_useRequest({path:`${constants["a"]}/index_templates`,method:"get"})}async function deleteTemplates(templates){const result=use_request_sendRequest({path:`${constants["a"]}/delete_index_templates`,method:"post",body:{templates:templates}});const uimActionType=templates.length>1?constants["P"]:constants["O"];api_uiMetricService.trackMetric(METRIC_TYPE.COUNT,uimActionType);return result}function useLoadIndexTemplate(name,isLegacy){return use_request_useRequest({path:`${constants["a"]}/index_templates/${encodeURIComponent(name)}`,method:"get",query:{legacy:isLegacy}})}async function saveTemplate(template,isClone){var _template$template;const includeTypeName=doMappingsHaveType((_template$template=template.template)===null||_template$template===void 0?void 0:_template$template.mappings);const result=await use_request_sendRequest({path:`${constants["a"]}/index_templates`,method:"post",body:JSON.stringify(template),query:{include_type_name:includeTypeName}});const uimActionType=isClone?constants["M"]:constants["N"];api_uiMetricService.trackMetric(METRIC_TYPE.COUNT,uimActionType);return result}async function updateTemplate(template){var _template$template2;const includeTypeName=doMappingsHaveType((_template$template2=template.template)===null||_template$template2===void 0?void 0:_template$template2.mappings);const{name:name}=template;const result=await use_request_sendRequest({path:`${constants["a"]}/index_templates/${encodeURIComponent(name)}`,method:"put",body:JSON.stringify(template),query:{include_type_name:includeTypeName}});api_uiMetricService.trackMetric(METRIC_TYPE.COUNT,constants["Y"]);return result}function simulateIndexTemplate(template){return use_request_sendRequest({path:`${constants["a"]}/index_templates/simulate`,method:"post",body:JSON.stringify(template)}).then(result=>{api_uiMetricService.trackMetric(METRIC_TYPE.COUNT,constants["X"]);return result})}const unitMagnitude={kb:1,mb:2,gb:3,tb:4,pb:5};const stringSort=fieldName=>item=>item[fieldName];const numericSort=fieldName=>item=>+item[fieldName];const byteSort=fieldName=>item=>{const rawValue=item[fieldName];if(!rawValue){return 0}const matchResult=rawValue.match(/(.*)([kmgtp]b)/);if(!matchResult){return 0}const[,number,unit]=matchResult;return+number*Math.pow(1024,unitMagnitude[unit])};const sorters={name:stringSort("name"),status:stringSort("status"),health:stringSort("health"),primary:numericSort("primary"),replica:numericSort("replica"),documents:numericSort("documents"),size:byteSort("size"),primary_size:byteSort("primary_size"),data_stream:stringSort("data_stream")};const sortTable=(array=[],sortField,isSortAscending)=>{const sorted=Object(external_kbnSharedDeps_Lodash_["sortBy"])(array,sorters[sortField]);return isSortAscending?sorted:sorted.reverse()};function ui_metric_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}let ui_metric_uiMetricService;class UiMetricService{constructor(appName){ui_metric_defineProperty(this,"appName",void 0);ui_metric_defineProperty(this,"usageCollection",void 0);this.appName=appName}setup(usageCollection){this.usageCollection=usageCollection}trackMetric(type,eventName){if(!this.usageCollection){return}return this.usageCollection.reportUiCounter(this.appName,type,eventName)}}const setUiMetricServiceInstance=instance=>{ui_metric_uiMetricService=instance};const getUiMetricServiceInstance=()=>ui_metric_uiMetricService;function notification_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class NotificationService{constructor(){notification_defineProperty(this,"_toasts",void 0);notification_defineProperty(this,"addToasts",(title,type,text)=>{this._toasts.add({title:title,color:type,text:text})})}setup(notifications){this._toasts=notifications.toasts}get toasts(){return this._toasts}showDangerToast(title,text){this.addToasts(title,"danger",text)}showWarningToast(title,text){this.addToasts(title,"warning",text)}showSuccessToast(title,text){this.addToasts(title,"success",text)}}const notificationService=new NotificationService;var react_redux_lib=__webpack_require__(40);var external_kbnSharedDeps_ReactDom_=__webpack_require__(33);var common=__webpack_require__(42);const AppContext=Object(external_kbnSharedDeps_React_["createContext"])(undefined);const AppContextProvider=({children:children,value:value})=>external_kbnSharedDeps_React_default.a.createElement(AppContext.Provider,{value:value},children);const AppContextConsumer=AppContext.Consumer;const useAppContext=()=>{const ctx=Object(external_kbnSharedDeps_React_["useContext"])(AppContext);if(!ctx){throw new Error('"useAppContext" can only be called inside of AppContext.Provider!')}return ctx};const useServices=()=>useAppContext().services;var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(28);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const SectionError=({title:title,error:error,...rest})=>{const{cause:causeRoot,message:message,statusText:statusText,attributes:{cause:causeAttributes}={}}=error;const cause=causeAttributes!==null&&causeAttributes!==void 0?causeAttributes:causeRoot;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],_extends({title:title,color:"danger",iconType:"alert"},rest),external_kbnSharedDeps_React_default.a.createElement("div",null,message||statusText),cause&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement("ul",null,cause.map((causeMsg,i)=>external_kbnSharedDeps_React_default.a.createElement("li",{key:i},causeMsg)))))};const SectionLoading=({children:children})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"xl"}),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued"},children),"data-test-subj":"sectionLoading"});const NoMatch=()=>external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.noMatch.noIndicesDescription",defaultMessage:"No indices to show"}));function PageErrorForbidden(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"securityApp",iconColor:undefined,title:external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.pageErrorForbidden.title",defaultMessage:"You do not have permissions to use Index Management"}))}))}const TemplateDeleteModal=({templatesToDelete:templatesToDelete,callback:callback})=>{const[isDeleteConfirmed,setIsDeleteConfirmed]=Object(external_kbnSharedDeps_React_["useState"])(false);const numTemplatesToDelete=templatesToDelete.length;const hasSystemTemplate=Boolean(templatesToDelete.find(({name:name})=>name.startsWith(".")));const handleDeleteTemplates=()=>{deleteTemplates(templatesToDelete).then(({data:{templatesDeleted:templatesDeleted,errors:errors},error:error})=>{const hasDeletedTemplates=templatesDeleted&&templatesDeleted.length;if(hasDeletedTemplates){const successMessage=templatesDeleted.length===1?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.deleteTemplatesModal.successDeleteSingleNotificationMessageText",{defaultMessage:"Deleted template '{templateName}'",values:{templateName:templatesToDelete[0].name}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.deleteTemplatesModal.successDeleteMultipleNotificationMessageText",{defaultMessage:"Deleted {numSuccesses, plural, one {# template} other {# templates}}",values:{numSuccesses:templatesDeleted.length}});callback({hasDeletedTemplates:hasDeletedTemplates});notificationService.showSuccessToast(successMessage)}if(error||errors&&errors.length){const hasMultipleErrors=errors&&errors.length>1||error&&templatesToDelete.length>1;const errorMessage=hasMultipleErrors?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.deleteTemplatesModal.multipleErrorsNotificationMessageText",{defaultMessage:"Error deleting {count} templates",values:{count:errors&&errors.length||templatesToDelete.length}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.deleteTemplatesModal.errorNotificationMessageText",{defaultMessage:"Error deleting template '{name}'",values:{name:errors&&errors[0].name||templatesToDelete[0]}});notificationService.showDangerToast(errorMessage)}})};const handleOnCancel=()=>{setIsDeleteConfirmed(false);callback()};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{buttonColor:"danger","data-test-subj":"deleteTemplatesConfirmation",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.deleteTemplatesModal.modalTitleText",defaultMessage:"Delete {numTemplatesToDelete, plural, one {template} other {# templates}}",values:{numTemplatesToDelete:numTemplatesToDelete}}),onCancel:handleOnCancel,onConfirm:handleDeleteTemplates,cancelButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.deleteTemplatesModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.deleteTemplatesModal.confirmButtonLabel",defaultMessage:"Delete {numTemplatesToDelete, plural, one {template} other {templates} }",values:{numTemplatesToDelete:numTemplatesToDelete}}),confirmButtonDisabled:hasSystemTemplate?!isDeleteConfirmed:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.deleteTemplatesModal.deleteDescription",defaultMessage:"You are about to delete {numTemplatesToDelete, plural, one {this template} other {these templates} }:",values:{numTemplatesToDelete:numTemplatesToDelete}})),external_kbnSharedDeps_React_default.a.createElement("ul",null,templatesToDelete.map(({name:name})=>external_kbnSharedDeps_React_default.a.createElement("li",{key:name},name,name.startsWith(".")?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{iconType:"alert",color:"hollow"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.deleteTemplatesModal.systemTemplateLabel",defaultMessage:"System template"}))):null))),hasSystemTemplate&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.deleteTemplatesModal.proceedWithCautionCallOutTitle",defaultMessage:"Deleting a system template can break Kibana"}),color:"danger",iconType:"alert","data-test-subj":"deleteSystemTemplateCallOut"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.deleteTemplatesModal.proceedWithCautionCallOutDescription",defaultMessage:"System templates are critical for internal operations. If you delete this template, you cant recover it."})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckbox"],{id:"confirmDeleteTemplatesCheckbox",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.deleteTemplatesModal.confirmDeleteCheckboxLabel",defaultMessage:"I understand the consequences of deleting a system template"}),checked:isDeleteConfirmed,onChange:e=>setIsDeleteConfirmed(e.target.checked)}))))};var template_serialization=__webpack_require__(38);const{stripEmptyFields:stripEmptyFields}=helpers_["serializers"];const SimulateTemplate=external_kbnSharedDeps_React_default.a.memo(({template:template,filters:filters})=>{const[templatePreview,setTemplatePreview]=Object(external_kbnSharedDeps_React_["useState"])("{}");const updatePreview=Object(external_kbnSharedDeps_React_["useCallback"])(async()=>{var _filteredTemplate;if(!template||Object.keys(template).length===0){return}const indexTemplate=Object(template_serialization["b"])(stripEmptyFields(template));indexTemplate.index_patterns=[uuid_default.a.v4()];const{data:data,error:error}=await simulateIndexTemplate(indexTemplate);let filteredTemplate=data;if(data){delete data.overlapping;if(data.template&&data.template.mappings===undefined){data.template.mappings={}}if(filters){filteredTemplate=Object.entries(filters).reduce((acc,[key,value])=>{if(!value){delete acc[key]}return acc},{...data.template})}}setTemplatePreview(JSON.stringify((_filteredTemplate=filteredTemplate)!==null&&_filteredTemplate!==void 0?_filteredTemplate:error,null,2))},[template,filters]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{updatePreview()},[updatePreview]);const isEmpty=templatePreview==="{}";const hasFilters=Boolean(filters);if(isEmpty&&hasFilters){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.simulateTemplate.noFilterSelected",defaultMessage:"Select at least one option to preview."}),iconType:"pin",size:"s"})}return isEmpty?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeBlock"],{lang:"json","data-test-subj":"simulateTemplatePreview"},templatePreview)});const CheckBox=Object(hook_form_lib_["getUseField"])({component:components_["CheckBoxField"]});const simulate_template_flyout_defaultFlyoutProps={"data-test-subj":"simulateTemplateFlyout","aria-labelledby":"simulateTemplateFlyoutTitle"};const simulate_template_flyout_i18nTexts={filters:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.simulateTemplate.filters.label",{defaultMessage:"Include:"}),mappings:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.simulateTemplate.filters.mappings",{defaultMessage:"Mappings"}),indexSettings:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.simulateTemplate.filters.indexSettings",{defaultMessage:"Index settings"}),aliases:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.simulateTemplate.filters.aliases",{defaultMessage:"Aliases"})}};const SimulateTemplateFlyoutContent=({onClose:onClose,getTemplate:getTemplate,filters:filters,onFiltersChange:onFiltersChange})=>{const isMounted=Object(external_kbnSharedDeps_React_["useRef"])(false);const[template,setTemplate]=Object(external_kbnSharedDeps_React_["useState"])({});const{form:form}=Object(hook_form_lib_["useForm"])({defaultValue:filters});const{subscribe:subscribe}=form;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{subscribe(formState=>{onFiltersChange(formState.data.format())})},[subscribe,onFiltersChange]);const updatePreview=Object(external_kbnSharedDeps_React_["useCallback"])(async()=>{const indexTemplate=await getTemplate();setTemplate(indexTemplate)},[getTemplate]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(isMounted.current===false){updatePreview()}isMounted.current=true},[updatePreview]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",{id:"componentTemplatesFlyoutTitle","data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.simulateTemplate.title",defaultMessage:"Preview index template"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.simulateTemplate.descriptionText",defaultMessage:"This is the final template that will be applied to matching indices based on the component templates you have selected and any overrides you've added."}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],{"data-test-subj":"content"},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["Form"],{form:form},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},simulate_template_flyout_i18nTexts.filters.label),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(CheckBox,{path:"mappings",config:{label:simulate_template_flyout_i18nTexts.filters.mappings}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(CheckBox,{path:"settings",config:{label:simulate_template_flyout_i18nTexts.filters.indexSettings}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(CheckBox,{path:"aliases",config:{label:simulate_template_flyout_i18nTexts.filters.aliases}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["FormDataProvider"],null,formData=>external_kbnSharedDeps_React_default.a.createElement(SimulateTemplate,{template:template,filters:formData})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"cross",flush:"left",onClick:onClose,"data-test-subj":"closeDetailsButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.simulateTemplate.closeButtonLabel",defaultMessage:"Close"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{iconType:"refresh",onClick:updatePreview,"data-test-subj":"updateSimulationButton",fill:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.simulateTemplate.updateButtonLabel",defaultMessage:"Update"}))))))};const{emptyField:template_form_schemas_emptyField,containsCharsField:template_form_schemas_containsCharsField,startsWithField:startsWithField,indexPatternField:indexPatternField,lowerCaseStringField:lowerCaseStringField,isJsonField:template_form_schemas_isJsonField}=helpers_["fieldValidators"];const{toInt:template_form_schemas_toInt}=helpers_["fieldFormatters"];const indexPatternInvalidCharacters=constants["k"].join(" ");const template_form_schemas_nameConfig={type:hook_form_lib_["FIELD_TYPES"].TEXT,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.fieldNameLabel",{defaultMessage:"Name"}),validations:[{validator:template_form_schemas_emptyField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateValidation.templateNameRequiredError",{defaultMessage:"A template name is required."}))},{validator:template_form_schemas_containsCharsField({chars:" ",message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateValidation.templateNameSpacesError",{defaultMessage:"Spaces are not allowed in a template name."})})},{validator:startsWithField({char:"_",message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateValidation.templateNameUnderscoreError",{defaultMessage:"A template name must not start with an underscore."})})},{validator:startsWithField({char:".",message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateValidation.templateNamePeriodError",{defaultMessage:"A template name must not start with a period."})})},{validator:template_form_schemas_containsCharsField({chars:constants["l"],message:({charsFound:charsFound})=>external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateValidation.templateNameInvalidaCharacterError",{defaultMessage:'A template name must not contain the character "{invalidChar}"',values:{invalidChar:charsFound[0]}})})},{validator:lowerCaseStringField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateValidation.templateNameLowerCaseRequiredError",{defaultMessage:"The template name must be in lowercase."}))}]};const nameConfigWithoutValidations={...template_form_schemas_nameConfig,validations:[]};const schemas={logistics:{name:template_form_schemas_nameConfig,indexPatterns:{type:hook_form_lib_["FIELD_TYPES"].COMBO_BOX,defaultValue:[],label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.fieldIndexPatternsLabel",{defaultMessage:"Index patterns"}),helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepLogistics.fieldIndexPatternsHelpText",defaultMessage:"Spaces and the characters {invalidCharactersList} are not allowed.",values:{invalidCharactersList:external_kbnSharedDeps_React_default.a.createElement("strong",null,indexPatternInvalidCharacters)}}),validations:[{validator:template_form_schemas_emptyField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateValidation.indexPatternsRequiredError",{defaultMessage:"At least one index pattern is required."}))},{validator:indexPatternField(external_kbnSharedDeps_KbnI18n_["i18n"]),type:hook_form_lib_["VALIDATION_TYPES"].ARRAY_ITEM,isBlocking:false}]},doCreateDataStream:{type:hook_form_lib_["FIELD_TYPES"].TOGGLE,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.datastreamLabel",{defaultMessage:"Create data stream"}),defaultValue:false},order:{type:hook_form_lib_["FIELD_TYPES"].NUMBER,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.fieldOrderLabel",{defaultMessage:"Order (optional)"}),formatters:[template_form_schemas_toInt]},priority:{type:hook_form_lib_["FIELD_TYPES"].NUMBER,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.fieldPriorityLabel",{defaultMessage:"Priority (optional)"}),formatters:[template_form_schemas_toInt]},version:{type:hook_form_lib_["FIELD_TYPES"].NUMBER,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.fieldVersionLabel",{defaultMessage:"Version (optional)"}),formatters:[template_form_schemas_toInt]},_meta:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.metaFieldEditorLabel",{defaultMessage:"_meta field data (optional)"}),helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepLogistics.metaFieldEditorHelpText",defaultMessage:"Use JSON format: {code}",values:{code:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,JSON.stringify({arbitrary_data:"anything_goes"}))}}),validations:[{validator:template_form_schemas_isJsonField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.metaFieldEditorJsonError",{defaultMessage:"The _meta field JSON is not valid."}),{allowEmptyString:true})}],deserializer:value=>{if(value===""){return value}return JSON.stringify(value,null,2)},serializer:value=>{try{return JSON.parse(value)}catch(error){return value}}},addMeta:{type:hook_form_lib_["FIELD_TYPES"].TOGGLE,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.addMetadataLabel",{defaultMessage:"Add metadata"})}}};const step_logistics_UseField=Object(hook_form_lib_["getUseField"])({component:components_["Field"]});const FormRow=Object(components_["getFormRow"])({titleTag:"h3"});function getFieldsMeta(esDocsBase){return{name:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.nameTitle",{defaultMessage:"Name"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.nameDescription",{defaultMessage:"A unique identifier for this template."}),testSubject:"nameField"},indexPatterns:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.indexPatternsTitle",{defaultMessage:"Index patterns"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.indexPatternsDescription",{defaultMessage:"The index patterns to apply to the template."}),testSubject:"indexPatternsField"},createDataStream:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.dataStreamTitle",{defaultMessage:"Data stream"}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepLogistics.dataStreamDescription",defaultMessage:"The template creates data streams instead of indices. {docsLink}",values:{docsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getDataStreamsDocumentationLink(),target:"_blank",external:true},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.dataStreamDocumentionLink",{defaultMessage:"Learn more."}))}}),testSubject:"dataStreamField"},order:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.orderTitle",{defaultMessage:"Merge order"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.orderDescription",{defaultMessage:"The merge order when multiple templates match an index."}),testSubject:"orderField"},priority:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.priorityTitle",{defaultMessage:"Priority"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.priorityDescription",{defaultMessage:"Only the highest priority template will be applied."}),testSubject:"priorityField"},version:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.versionTitle",{defaultMessage:"Version"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.versionDescription",{defaultMessage:"A number that identifies the template to external management systems."}),testSubject:"versionField"}}}function step_logistics_formDeserializer(formData){return{...formData,addMeta:Boolean(formData._meta&&Object.keys(formData._meta).length),doCreateDataStream:Boolean(formData.dataStream)}}function getformSerializer(initialTemplateData={}){return formData=>{var _initialTemplateData$;const{addMeta:addMeta,doCreateDataStream:doCreateDataStream,...rest}=formData;const dataStream=doCreateDataStream?(_initialTemplateData$=initialTemplateData.dataStream)!==null&&_initialTemplateData$!==void 0?_initialTemplateData$:{}:undefined;return{...rest,dataStream:dataStream}}}const StepLogistics=external_kbnSharedDeps_React_default.a.memo(({defaultValue:defaultValue,isEditing:isEditing=false,onChange:onChange,isLegacy:isLegacy=false})=>{const{form:form}=Object(hook_form_lib_["useForm"])({schema:schemas.logistics,defaultValue:defaultValue,options:{stripEmptyFields:false},serializer:getformSerializer(defaultValue),deserializer:step_logistics_formDeserializer});const{submit:submit,isSubmitted:isSubmitted,isValid:isFormValid,getErrors:getFormErrors,getFormData:getFormData}=form;const[{addMeta:addMeta}]=Object(hook_form_lib_["useFormData"])({form:form,watch:"addMeta"});const validate=Object(external_kbnSharedDeps_React_["useCallback"])(async()=>(await submit()).isValid,[submit]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{onChange({isValid:isFormValid,getData:getFormData,validate:validate})},[onChange,isFormValid,validate,getFormData]);const{name:name,indexPatterns:indexPatterns,createDataStream:createDataStream,order:order,priority:priority,version:version}=getFieldsMeta(documentationService.getEsDocsBase());return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepLogistics.stepTitle",defaultMessage:"Logistics"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",flush:"right",href:documentationService.getTemplatesDocumentationLink(isLegacy),target:"_blank",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepLogistics.docsButtonLabel",defaultMessage:"Index Templates docs"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["Form"],{form:form,isInvalid:isSubmitted&&!isFormValid,error:getFormErrors(),"data-test-subj":"stepLogistics"},external_kbnSharedDeps_React_default.a.createElement(FormRow,{title:name.title,description:name.description},external_kbnSharedDeps_React_default.a.createElement(step_logistics_UseField,{path:"name",componentProps:{["data-test-subj"]:name.testSubject,euiFieldProps:{disabled:isEditing}},config:isEditing?nameConfigWithoutValidations:template_form_schemas_nameConfig})),external_kbnSharedDeps_React_default.a.createElement(FormRow,{title:indexPatterns.title,description:indexPatterns.description},external_kbnSharedDeps_React_default.a.createElement(step_logistics_UseField,{path:"indexPatterns",componentProps:{["data-test-subj"]:indexPatterns.testSubject}})),isLegacy!==true&&external_kbnSharedDeps_React_default.a.createElement(FormRow,{title:createDataStream.title,description:createDataStream.description},external_kbnSharedDeps_React_default.a.createElement(step_logistics_UseField,{path:"doCreateDataStream",componentProps:{"data-test-subj":createDataStream.testSubject}})),isLegacy&&external_kbnSharedDeps_React_default.a.createElement(FormRow,{title:order.title,description:order.description},external_kbnSharedDeps_React_default.a.createElement(step_logistics_UseField,{path:"order",componentProps:{["data-test-subj"]:order.testSubject}})),isLegacy===false&&external_kbnSharedDeps_React_default.a.createElement(FormRow,{title:priority.title,description:priority.description},external_kbnSharedDeps_React_default.a.createElement(step_logistics_UseField,{path:"priority",componentProps:{["data-test-subj"]:priority.testSubject}})),external_kbnSharedDeps_React_default.a.createElement(FormRow,{title:version.title,description:version.description},external_kbnSharedDeps_React_default.a.createElement(step_logistics_UseField,{path:"version",componentProps:{["data-test-subj"]:version.testSubject}})),isLegacy===false&&external_kbnSharedDeps_React_default.a.createElement(FormRow,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.metaFieldTitle",{defaultMessage:"_meta field"}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepLogistics.metaFieldDescription",defaultMessage:"Use the _meta field to store any metadata you want."}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(step_logistics_UseField,{path:"addMeta","data-test-subj":"metaToggle"}))},addMeta&&external_kbnSharedDeps_React_default.a.createElement(step_logistics_UseField,{path:"_meta",component:components_["JsonEditorField"],componentProps:{euiCodeEditorProps:{height:"280px","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepLogistics.metaFieldEditorAriaLabel",{defaultMessage:"_meta field data editor"}),"data-test-subj":"metaField"}}}))))});const StepLogisticsContainer=({isEditing:isEditing,isLegacy:isLegacy})=>{const{defaultValue:defaultValue,updateContent:updateContent}=public_["Forms"].useContent("logistics");return external_kbnSharedDeps_React_default.a.createElement(StepLogistics,{defaultValue:defaultValue,onChange:updateContent,isEditing:isEditing,isLegacy:isLegacy})};const UIM_COMPONENT_TEMPLATE_LIST_LOAD="component_template_list_load";const UIM_COMPONENT_TEMPLATE_DELETE="component_template_delete";const UIM_COMPONENT_TEMPLATE_DELETE_MANY="component_template_delete_many";const UIM_COMPONENT_TEMPLATE_DETAILS="component_template_details";const UIM_COMPONENT_TEMPLATE_CREATE="component_template_create";const UIM_COMPONENT_TEMPLATE_UPDATE="component_template_update";const APP_CLUSTER_REQUIRED_PRIVILEGES=["manage_index_templates"];const getApi=(useRequest,sendRequest,apiBasePath,trackMetric)=>{function useLoadComponentTemplates(){return useRequest({path:`${apiBasePath}/component_templates`,method:"get"})}function deleteComponentTemplates(names){const result=sendRequest({path:`${apiBasePath}/component_templates/${names.map(name=>encodeURIComponent(name)).join(",")}`,method:"delete"});trackMetric(METRIC_TYPE.COUNT,names.length>1?UIM_COMPONENT_TEMPLATE_DELETE_MANY:UIM_COMPONENT_TEMPLATE_DELETE);return result}function useLoadComponentTemplate(name){return useRequest({path:`${apiBasePath}/component_templates/${encodeURIComponent(name)}`,method:"get"})}async function createComponentTemplate(componentTemplate){const result=await sendRequest({path:`${apiBasePath}/component_templates`,method:"post",body:JSON.stringify(componentTemplate)});trackMetric(METRIC_TYPE.COUNT,UIM_COMPONENT_TEMPLATE_CREATE);return result}async function updateComponentTemplate(componentTemplate){const{name:name}=componentTemplate;const result=await sendRequest({path:`${apiBasePath}/component_templates/${encodeURIComponent(name)}`,method:"put",body:JSON.stringify(componentTemplate)});trackMetric(METRIC_TYPE.COUNT,UIM_COMPONENT_TEMPLATE_UPDATE);return result}return{useLoadComponentTemplates:useLoadComponentTemplates,deleteComponentTemplates:deleteComponentTemplates,useLoadComponentTemplate:useLoadComponentTemplate,createComponentTemplate:createComponentTemplate,updateComponentTemplate:updateComponentTemplate}};const TabAliases=({aliases:aliases})=>{if(aliases&&Object.keys(aliases).length){return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"aliasesTabContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeBlock"],{lang:"json"},JSON.stringify(aliases,null,2)))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.aliasesTab.noAliasesTitle",defaultMessage:"No aliases defined."}),iconType:"pin","data-test-subj":"noAliasesCallout",size:"s"})};const TabMappings=({mappings:mappings})=>{if(mappings&&Object.keys(mappings).length){return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"mappingsTabContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeBlock"],{lang:"json"},JSON.stringify(mappings,null,2)))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.mappingsTab.noMappingsTitle",defaultMessage:"No mappings defined."}),iconType:"pin","data-test-subj":"noMappingsCallout",size:"s"})};const TabSettings=({settings:settings})=>{if(settings&&Object.keys(settings).length){return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"settingsTabContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeBlock"],{lang:"json"},JSON.stringify(settings,null,2)))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.settingsTab.noIndexSettingsTitle",defaultMessage:"No settings defined."}),iconType:"pin","data-test-subj":"noSettingsCallout",size:"s"})};const use_json_step_stringifyJson=json=>Object.keys(json).length?JSON.stringify(json,null,2):"{\n\n}";const useJsonStep=({defaultValue:defaultValue,onChange:onChange})=>{const[jsonContent,setJsonContent]=Object(external_kbnSharedDeps_React_["useState"])(use_json_step_stringifyJson(defaultValue!==null&&defaultValue!==void 0?defaultValue:{}));const[error,setError]=Object(external_kbnSharedDeps_React_["useState"])(null);const validateContent=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{const isValid=jsonContent.trim()===""?true:Object(string_["isJSON"])(jsonContent);if(!isValid){setError(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.validators.string.invalidJSONError",{defaultMessage:"Invalid JSON format."}))}else{setError(null)}return isValid},[jsonContent]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const isValid=validateContent();const getData=()=>{const value=isValid&&jsonContent.trim()!==""?JSON.parse(jsonContent):{};return Object.keys(value).length>0?value:undefined};const content={isValid:isValid,validate:async()=>isValid,getData:getData};onChange(content)},[jsonContent,onChange,validateContent]);return{jsonContent:jsonContent,setJsonContent:setJsonContent,error:error}};const StepAliases=external_kbnSharedDeps_React_default.a.memo(({defaultValue:defaultValue={},onChange:onChange,esDocsBase:esDocsBase})=>{const{jsonContent:jsonContent,setJsonContent:setJsonContent,error:error}=useJsonStep({defaultValue:defaultValue,onChange:onChange});return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"stepAliases"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h2",{"data-test-subj":"stepTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.formWizard.stepAliases.stepTitle",defaultMessage:"Aliases (optional)"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.formWizard.stepAliases.aliasesDescription",defaultMessage:"Set up aliases to associate with your indices."})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",flush:"right",href:`${esDocsBase}/indices-aliases.html`,target:"_blank",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.formWizard.stepAliases.docsButtonLabel",defaultMessage:"Index Aliases docs"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.formWizard.stepAliases.fieldAliasesLabel",defaultMessage:"Aliases"}),helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.formWizard.stepAliases.aliasesEditorHelpText",defaultMessage:"Use JSON format: {code}",values:{code:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,JSON.stringify({my_alias:{}}))}}),isInvalid:Boolean(error),error:error,fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeEditor"],{mode:"json",theme:"textmate",width:"100%",height:"500px",setOptions:{showLineNumbers:false,tabSize:2},editorProps:{$blockScrolling:Infinity},showGutter:false,minLines:6,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.formWizard.stepAliases.fieldAliasesAriaLabel",{defaultMessage:"Aliases code editor"}),value:jsonContent,onChange:setJsonContent,"data-test-subj":"aliasesEditor"})))});const StepAliasesContainer=({esDocsBase:esDocsBase})=>{const{defaultValue:defaultValue,updateContent:updateContent}=public_["Forms"].useContent("aliases");return external_kbnSharedDeps_React_default.a.createElement(StepAliases,{defaultValue:defaultValue,onChange:updateContent,esDocsBase:esDocsBase})};const StepMappings=external_kbnSharedDeps_React_default.a.memo(({defaultValue:defaultValue={},onChange:onChange,indexSettings:indexSettings,esDocsBase:esDocsBase})=>{const[mappings,setMappings]=Object(external_kbnSharedDeps_React_["useState"])(defaultValue);const{docLinks:docLinks}=useAppContext();const onMappingsEditorUpdate=Object(external_kbnSharedDeps_React_["useCallback"])(({isValid:isValid,getData:getData,validate:validate})=>{onChange({isValid:isValid,async validate(){return isValid===undefined?await validate():isValid},getData:getData})},[onChange]);const onJsonLoaded=json=>{setMappings(json)};return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"stepMappings"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h2",{"data-test-subj":"stepTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.formWizard.stepMappings.stepTitle",defaultMessage:"Mappings (optional)"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.formWizard.stepMappings.mappingsDescription",defaultMessage:"Define how to store and index documents."})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(LoadMappingsFromJsonButton,{onJson:onJsonLoaded})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",flush:"right",href:`${esDocsBase}/mapping.html`,target:"_blank",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.formWizard.stepMappings.docsButtonLabel",defaultMessage:"Mapping docs"})))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(MappingsEditor,{value:mappings,onChange:onMappingsEditorUpdate,indexSettings:indexSettings,docLinks:docLinks}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))});const StepMappingsContainer=({esDocsBase:esDocsBase})=>{const{defaultValue:defaultValue,updateContent:updateContent,getSingleContentData:getSingleContentData}=public_["Forms"].useContent("mappings");return external_kbnSharedDeps_React_default.a.createElement(StepMappings,{defaultValue:defaultValue,onChange:updateContent,indexSettings:getSingleContentData("settings"),esDocsBase:esDocsBase})};const StepSettings=external_kbnSharedDeps_React_default.a.memo(({defaultValue:defaultValue={},onChange:onChange,esDocsBase:esDocsBase})=>{const{jsonContent:jsonContent,setJsonContent:setJsonContent,error:error}=useJsonStep({defaultValue:defaultValue,onChange:onChange});return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"stepSettings"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h2",{"data-test-subj":"stepTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.formWizard.stepSettings.stepTitle",defaultMessage:"Index settings (optional)"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.formWizard.stepSettings.settingsDescription",defaultMessage:"Define the behavior of your indices."})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",flush:"right",href:`${esDocsBase}/index-modules.html#index-modules-settings`,target:"_blank",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.formWizard.stepSettings.docsButtonLabel",defaultMessage:"Index settings docs"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.formWizard.stepSettings.fieldIndexSettingsLabel",defaultMessage:"Index settings"}),helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.formWizard.stepSettings.settingsEditorHelpText",defaultMessage:"Use JSON format: {code}",values:{code:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,JSON.stringify({number_of_replicas:1}))}}),isInvalid:Boolean(error),error:error,fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeEditor"],{mode:"json",theme:"textmate",width:"100%",height:"500px",setOptions:{showLineNumbers:false,tabSize:2},editorProps:{$blockScrolling:Infinity},showGutter:false,minLines:6,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.formWizard.stepSettings.fieldIndexSettingsAriaLabel",{defaultMessage:"Index settings editor"}),value:jsonContent,onChange:setJsonContent,"data-test-subj":"settingsEditor"})))});const StepSettingsContainer=external_kbnSharedDeps_React_default.a.memo(({esDocsBase:esDocsBase})=>{const{defaultValue:defaultValue,updateContent:updateContent}=public_["Forms"].useContent("settings");return external_kbnSharedDeps_React_default.a.createElement(StepSettings,{defaultValue:defaultValue,onChange:updateContent,esDocsBase:esDocsBase})});var wizard_steps_types=__webpack_require__(86);const texts={settings:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateContentIndicator.indexSettingsTooltipLabel",{defaultMessage:"Index settings"}),mappings:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateContentIndicator.mappingsTooltipLabel",{defaultMessage:"Mappings"}),aliases:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateContentIndicator.aliasesTooltipLabel",{defaultMessage:"Aliases"})};const TemplateContentIndicator=({mappings:mappings,settings:settings,aliases:aliases,contentWhenEmpty:contentWhenEmpty=null})=>{const getColor=flag=>flag?"primary":"hollow";if(!mappings&&!settings&&!aliases){return contentWhenEmpty}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:texts.mappings},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:getColor(mappings)},"M"),"")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:texts.settings},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:getColor(settings)},"S"),"")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:texts.aliases},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:getColor(aliases)},"A")))};var common_lib=__webpack_require__(47);const getUseRequest=httpClient=>config=>Object(public_["useRequest"])(httpClient,config);const getSendRequest=httpClient=>config=>Object(public_["sendRequest"])(httpClient,config);const getDocumentation=({ELASTIC_WEBSITE_URL:ELASTIC_WEBSITE_URL,DOC_LINK_VERSION:DOC_LINK_VERSION})=>{const docsBase=`${ELASTIC_WEBSITE_URL}guide/en`;const esDocsBase=`${docsBase}/elasticsearch/reference/${DOC_LINK_VERSION}`;return{esDocsBase:esDocsBase,componentTemplates:`${esDocsBase}/indices-component-template.html`,componentTemplatesMetadata:`${esDocsBase}/indices-component-template.html#component-templates-metadata`}};const getBreadcrumbs=setBreadcrumbs=>{const baseBreadcrumbs=[{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplate.breadcrumb.homeLabel",{defaultMessage:"Index Management"}),href:"/"},{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplate.breadcrumb.componentTemplatesLabel",{defaultMessage:"Component templates"}),href:"/component_templates"}];const setCreateBreadcrumbs=()=>{const createBreadcrumbs=[...baseBreadcrumbs,{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplate.breadcrumb.createComponentTemplateLabel",{defaultMessage:"Create component template"})}];return setBreadcrumbs(createBreadcrumbs)};const setEditBreadcrumbs=()=>{const editBreadcrumbs=[...baseBreadcrumbs,{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplate.breadcrumb.editComponentTemplateLabel",{defaultMessage:"Edit component template"})}];return setBreadcrumbs(editBreadcrumbs)};return{setCreateBreadcrumbs:setCreateBreadcrumbs,setEditBreadcrumbs:setEditBreadcrumbs}};const ComponentTemplatesContext=Object(external_kbnSharedDeps_React_["createContext"])(undefined);const ComponentTemplatesProvider=({children:children,value:value})=>{const{httpClient:httpClient,apiBasePath:apiBasePath,trackMetric:trackMetric,docLinks:docLinks,toasts:toasts,setBreadcrumbs:setBreadcrumbs,getUrlForApp:getUrlForApp}=value;const useRequest=getUseRequest(httpClient);const sendRequest=getSendRequest(httpClient);const api=getApi(useRequest,sendRequest,apiBasePath,trackMetric);const documentation=getDocumentation(docLinks);const breadcrumbs=getBreadcrumbs(setBreadcrumbs);return external_kbnSharedDeps_React_default.a.createElement(ComponentTemplatesContext.Provider,{value:{api:api,documentation:documentation,trackMetric:trackMetric,toasts:toasts,httpClient:httpClient,apiBasePath:apiBasePath,breadcrumbs:breadcrumbs,getUrlForApp:getUrlForApp}},children)};const useComponentTemplatesContext=()=>{const ctx=Object(external_kbnSharedDeps_React_["useContext"])(ComponentTemplatesContext);if(!ctx){throw new Error('"useComponentTemplatesContext" can only be called inside of ComponentTemplatesProvider!')}return ctx};const useApi=()=>useComponentTemplatesContext().api;const ComponentTemplatesAuthProvider=({children:children})=>{const{httpClient:httpClient,apiBasePath:apiBasePath}=useComponentTemplatesContext();return external_kbnSharedDeps_React_default.a.createElement(public_["AuthorizationProvider"],{privilegesEndpoint:`${apiBasePath}/component_templates/privileges`,httpClient:httpClient},children)};const ComponentTemplatesWithPrivileges=({children:children})=>{const{apiError:apiError}=Object(public_["useAuthorizationContext"])();if(apiError){return external_kbnSharedDeps_React_default.a.createElement(public_["SectionError"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.componentTemplates.checkingPrivilegesErrorMessage",defaultMessage:"Error fetching user privileges from the server."}),error:apiError})}return external_kbnSharedDeps_React_default.a.createElement(public_["WithPrivileges"],{privileges:APP_CLUSTER_REQUIRED_PRIVILEGES.map(privilege=>`cluster.${privilege}`)},({isLoading:isLoading,hasPrivileges:hasPrivileges,privilegesMissing:privilegesMissing})=>{if(isLoading){return external_kbnSharedDeps_React_default.a.createElement(public_["SectionLoading"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.componentTemplates.checkingPrivilegesDescription",defaultMessage:"Checking privileges"}))}if(!hasPrivileges){return external_kbnSharedDeps_React_default.a.createElement(public_["NotAuthorizedSection"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.componentTemplates.deniedPrivilegeTitle",defaultMessage:"Cluster privileges required"}),message:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.componentTemplates.deniedPrivilegeDescription",defaultMessage:"To use Component Templates, you must have {privilegesCount, plural, one {this cluster privilege} other {these cluster privileges}}: {missingPrivileges}.",values:{missingPrivileges:privilegesMissing.cluster.join(", "),privilegesCount:privilegesMissing.cluster.length}})})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,children)})};const TabSummary=({componentTemplateDetails:componentTemplateDetails,showCallToAction:showCallToAction})=>{const{getUrlForApp:getUrlForApp}=useComponentTemplatesContext();const{version:version,_meta:_meta,_kbnMeta:_kbnMeta}=componentTemplateDetails;const{usedBy:usedBy}=_kbnMeta;const templateIsInUse=usedBy.length>0;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,!templateIsInUse&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateDetails.summaryTab.notInUseTitle",defaultMessage:"This component template is not in use by any index templates."}),iconType:"pin","data-test-subj":"notInUseCallout",size:"s"},showCallToAction&&external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateDetails.summaryTab.notInUseDescription",defaultMessage:"{createLink} an index template or {editLink} an existing one.",values:{createLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:getUrlForApp("management",{path:"/data/index_management/create_template"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateDetails.summaryTab.createTemplateLink",defaultMessage:"Create"})),editLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:getUrlForApp("management",{path:"/data/index_management/templates"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateDetails.summaryTab.updateTemplateLink",defaultMessage:"update"}))}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{textStyle:"reverse","data-test-subj":"summaryTabContent"},templateIsInUse&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],{"data-test-subj":"usedByTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateDetails.summaryTab.usedByDescriptionListTitle",defaultMessage:"Used by"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,external_kbnSharedDeps_React_default.a.createElement("ul",null,usedBy.map(templateName=>external_kbnSharedDeps_React_default.a.createElement("li",{key:templateName},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("span",null,templateName))))))),typeof version!=="undefined"&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],{"data-test-subj":"versionTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateDetails.summaryTab.versionDescriptionListTitle",defaultMessage:"Version"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,version)),_meta&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],{"data-test-subj":"metaTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateDetails.summaryTab.metaDescriptionListTitle",defaultMessage:"Metadata"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeBlock"],{lang:"json"},JSON.stringify(_meta,null,2))))))};const TABS=[{id:"summary",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateDetails.summaryTabTitle",{defaultMessage:"Summary"})},{id:"settings",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateDetails.settingsTabTitle",{defaultMessage:"Settings"})},{id:"mappings",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateDetails.mappingsTabTitle",{defaultMessage:"Mappings"})},{id:"aliases",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateDetails.aliasesTabTitle",{defaultMessage:"Aliases"})}];const ComponentTemplateTabs=({setActiveTab:setActiveTab,activeTab:activeTab})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTabs"],null,TABS.map(tab=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTab"],{onClick:()=>{setActiveTab(tab.id)},isSelected:tab.id===activeTab,key:tab.id,"data-test-subj":`${tab.id}Tab`},tab.name)));const ManageButton=({actions:actions,componentTemplateDetails:componentTemplateDetails})=>{const[isPopoverOpen,setIsPopOverOpen]=Object(external_kbnSharedDeps_React_["useState"])(false);const items=actions.map(({name:name,icon:icon,getIsDisabled:getIsDisabled,closePopoverOnClick:closePopoverOnClick,handleActionClick:handleActionClick})=>{const isDisabled=getIsDisabled?getIsDisabled(componentTemplateDetails):false;return{name:name,icon:icon,disabled:isDisabled,toolTipContent:isDisabled?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateDetails.manageButtonDisabledTooltipLabel",defaultMessage:"Template is in use and cannot be deleted"}):null,onClick:()=>{handleActionClick();if(closePopoverOnClick){setIsPopOverOpen(false)}},"data-test-subj":"action"}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"manageComponentTemplatePanel",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,"data-test-subj":"manageComponentTemplateButton",iconType:"arrowDown",iconSide:"right",onClick:()=>setIsPopOverOpen(prevBoolean=>!prevBoolean)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateDetails.manageButtonLabel",defaultMessage:"Manage"})),isOpen:isPopoverOpen,closePopover:()=>setIsPopOverOpen(false),panelPaddingSize:"none",anchorPosition:"rightUp",repositionOnScroll:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:0,"data-test-subj":"manageComponentTemplateContextMenu",panels:[{id:0,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateDetails.manageContextMenuPanelTitle",{defaultMessage:"Options"}),items:items}]}))};const component_template_details_defaultFlyoutProps={"data-test-subj":"componentTemplateDetails","aria-labelledby":"componentTemplateDetailsFlyoutTitle"};const ComponentTemplateDetailsFlyoutContent=({componentTemplateName:componentTemplateName,onClose:onClose,actions:actions,showSummaryCallToAction:showSummaryCallToAction})=>{const{api:api}=useComponentTemplatesContext();const decodedComponentTemplateName=Object(public_["attemptToURIDecode"])(componentTemplateName);const{data:componentTemplateDetails,isLoading:isLoading,error:error}=api.useLoadComponentTemplate(decodedComponentTemplateName);const[activeTab,setActiveTab]=Object(external_kbnSharedDeps_React_["useState"])("summary");let content;if(isLoading){content=external_kbnSharedDeps_React_default.a.createElement(public_["SectionLoading"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateDetails.loadingIndexTemplateDescription",defaultMessage:"Loading component template"}))}else if(error){content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateDetails.loadingErrorMessage",defaultMessage:"Error loading component template"}),color:"danger",iconType:"alert","data-test-subj":"sectionError"},external_kbnSharedDeps_React_default.a.createElement("p",null,error.message))}else if(componentTemplateDetails){const{template:{settings:settings,mappings:mappings,aliases:aliases}}=componentTemplateDetails;const tabToComponentMap={summary:external_kbnSharedDeps_React_default.a.createElement(TabSummary,{componentTemplateDetails:componentTemplateDetails,showCallToAction:showSummaryCallToAction}),settings:external_kbnSharedDeps_React_default.a.createElement(TabSettings,{settings:settings}),mappings:external_kbnSharedDeps_React_default.a.createElement(TabMappings,{mappings:mappings}),aliases:external_kbnSharedDeps_React_default.a.createElement(TabAliases,{aliases:aliases})};const tabContent=tabToComponentMap[activeTab];content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(ComponentTemplateTabs,{activeTab:activeTab,setActiveTab:setActiveTab}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),tabContent)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",{id:"componentTemplateDetailsFlyoutTitle","data-test-subj":"title"},decodedComponentTemplateName))),componentTemplateDetails!==null&&componentTemplateDetails!==void 0&&componentTemplateDetails._kbnMeta.isManaged?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false}," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"hollow"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateDetails.managedBadgeLabel",defaultMessage:"Managed"}))):null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],{"data-test-subj":"content"},content),actions&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],{"data-test-subj":"footer"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"cross",flush:"left",onClick:onClose,"data-test-subj":"closeDetailsButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateDetails.closeButtonLabel",defaultMessage:"Close"}))),componentTemplateDetails&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(ManageButton,{actions:actions,componentTemplateDetails:componentTemplateDetails})))))};function empty_prompt_extends(){empty_prompt_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return empty_prompt_extends.apply(this,arguments)}const empty_prompt_EmptyPrompt=({history:history})=>{const{documentation:documentation}=useComponentTemplatesContext();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"managementApp","data-test-subj":"emptyList",title:external_kbnSharedDeps_React_default.a.createElement("h2",{"data-test-subj":"title"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.home.componentTemplates.emptyPromptTitle",{defaultMessage:"Start by creating a component template"})),body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.componentTemplates.emptyPromptDescription",defaultMessage:"For example, you can create a component template for index settings that can be reused across index templates."}),external_kbnSharedDeps_React_default.a.createElement("br",null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentation.componentTemplates,target:"_blank",external:true},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.home.componentTemplates.emptyPromptDocumentionLink",{defaultMessage:"Learn more."}))),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],empty_prompt_extends({},Object(kibanaReact_public_["reactRouterNavigate"])(history,"/create_component_template"),{iconType:"plusInCircle",fill:true}),external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.home.componentTemplates.emptyPromptButtonLabel",{defaultMessage:"Create a component template"}))})};function table_extends(){table_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return table_extends.apply(this,arguments)}const ComponentTable=({componentTemplates:componentTemplates,onReloadClick:onReloadClick,onDeleteClick:onDeleteClick,onEditClick:onEditClick,onCloneClick:onCloneClick,history:history})=>{const{trackMetric:trackMetric}=useComponentTemplatesContext();const[selection,setSelection]=Object(external_kbnSharedDeps_React_["useState"])([]);const tableProps={itemId:"name",isSelectable:true,"data-test-subj":"componentTemplatesTable",sorting:{sort:{field:"name",direction:"asc"}},selection:{onSelectionChange:setSelection,selectable:({usedBy:usedBy})=>usedBy.length===0,selectableMessage:selectable=>selectable?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesList.table.selectionLabel",{defaultMessage:"Select this component template"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesList.table.disabledSelectionLabel",{defaultMessage:"Component template is in use and cannot be deleted"})},rowProps:()=>({"data-test-subj":"componentTemplateTableRow"}),search:{toolsLeft:selection.length>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"deleteComponentTemplatexButton",onClick:()=>onDeleteClick(selection.map(({name:name})=>name)),color:"danger"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplatesList.table.deleteComponentTemplatesButtonLabel",defaultMessage:"Delete {count, plural, one {component template} other {component templates} }",values:{count:selection.length}})):undefined,toolsRight:[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{key:"reloadButton",iconType:"refresh",color:"secondary","data-test-subj":"reloadButton",onClick:onReloadClick},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesList.table.reloadButtonLabel",{defaultMessage:"Reload"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],table_extends({fill:true,iconType:"plusInCircle","data-test-subj":"createPipelineButton",key:"createPipelineButton"},Object(kibanaReact_public_["reactRouterNavigate"])(history,"/create_component_template")),external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesList.table.createButtonLabel",{defaultMessage:"Create a component template"}))],box:{incremental:true},filters:[{type:"is",field:"isManaged",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesList.table.isManagedFilterLabel",{defaultMessage:"Managed"})},{type:"field_value_toggle_group",field:"usedBy.length",items:[{value:1,name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesList.table.inUseFilterOptionLabel",{defaultMessage:"In use"}),operator:"gte"},{value:0,name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesList.table.notInUseFilterOptionLabel",{defaultMessage:"Not in use"}),operator:"eq"}]}]},pagination:{initialPageSize:10,pageSizeOptions:[10,20,50]},columns:[{field:"name",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesList.table.nameColumnTitle",{defaultMessage:"Name"}),sortable:true,width:"20%",render:(name,item)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],table_extends({},Object(kibanaReact_public_["reactRouterNavigate"])(history,{pathname:encodeURI(`/component_templates/${encodeURIComponent(name)}`)},()=>trackMetric(METRIC_TYPE.CLICK,UIM_COMPONENT_TEMPLATE_DETAILS)),{"data-test-subj":"templateDetailsLink"}),name),item.isManaged&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,"",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"hollow","data-test-subj":"isManagedBadge"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesList.table.managedBadgeLabel",{defaultMessage:"Managed"}))))},{field:"usedBy",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesList.table.isInUseColumnTitle",{defaultMessage:"Usage count"}),sortable:true,render:usedBy=>{if(usedBy.length){return usedBy.length}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("i",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplatesList.table.notInUseCellDescription",defaultMessage:"Not in use"})))}},{field:"hasMappings",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesList.table.mappingsColumnTitle",{defaultMessage:"Mappings"}),truncateText:true,sortable:true,render:hasMappings=>hasMappings?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"check"}):null},{field:"hasSettings",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesList.table.settingsColumnTitle",{defaultMessage:"Settings"}),truncateText:true,sortable:true,render:hasSettings=>hasSettings?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"check"}):null},{field:"hasAliases",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesList.table.aliasesColumnTitle",{defaultMessage:"Aliases"}),truncateText:true,sortable:true,render:hasAliases=>hasAliases?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"check"}):null},{name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplatesList.table.actionColumnTitle",defaultMessage:"Actions"}),actions:[{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesList.table.actionEditText",{defaultMessage:"Edit"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesList.table.actionEditDecription",{defaultMessage:"Edit this component template"}),onClick:({name:name})=>onEditClick(name),isPrimary:true,icon:"pencil",type:"icon","data-test-subj":"editComponentTemplateButton"},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesList.table.actionCloneText",{defaultMessage:"Clone"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesList.table.actionCloneDecription",{defaultMessage:"Clone this component template"}),onClick:({name:name})=>onCloneClick(name),icon:"copy",type:"icon","data-test-subj":"cloneComponentTemplateButton"},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesList.table.deleteActionLabel",{defaultMessage:"Delete"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesList.table.deleteActionDescription",{defaultMessage:"Delete this component template"}),onClick:({name:name})=>onDeleteClick([name]),enabled:({usedBy:usedBy})=>usedBy.length===0,isPrimary:true,type:"icon",icon:"trash",color:"danger","data-test-subj":"deleteComponentTemplateButton"}]}],items:componentTemplates!==null&&componentTemplates!==void 0?componentTemplates:[]};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],tableProps)};const LoadError=({onReloadClick:onReloadClick})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{iconType:"faceSad",color:"danger","data-test-subj":"componentTemplatesLoadError",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.componentTemplates.list.loadErrorTitle",defaultMessage:"Unable to load component templates. {reloadLink}",values:{reloadLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:onReloadClick},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.componentTemplates.list.loadErrorReloadLinkLabel",defaultMessage:"Try again."}))}})});const ComponentTemplatesDeleteModal=({componentTemplatesToDelete:componentTemplatesToDelete,callback:callback})=>{const{toasts:toasts,api:api}=useComponentTemplatesContext();const numComponentTemplatesToDelete=componentTemplatesToDelete.length;const handleDeleteComponentTemplates=()=>{api.deleteComponentTemplates(componentTemplatesToDelete).then(({data:{itemsDeleted:itemsDeleted,errors:errors},error:error})=>{const hasDeletedComponentTemplates=itemsDeleted&&itemsDeleted.length;if(hasDeletedComponentTemplates){const successMessage=itemsDeleted.length===1?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.home.componentTemplates.deleteModal.successDeleteSingleNotificationMessageText",{defaultMessage:"Deleted component template '{componentTemplateName}'",values:{componentTemplateName:componentTemplatesToDelete[0]}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.home.componentTemplates.deleteModal.successDeleteMultipleNotificationMessageText",{defaultMessage:"Deleted {numSuccesses, plural, one {# component template} other {# component templates}}",values:{numSuccesses:itemsDeleted.length}});callback({hasDeletedComponentTemplates:hasDeletedComponentTemplates});toasts.addSuccess(successMessage)}if(error||errors!==null&&errors!==void 0&&errors.length){const hasMultipleErrors=(errors===null||errors===void 0?void 0:errors.length)>1||error&&componentTemplatesToDelete.length>1;const errorMessage=hasMultipleErrors?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.home.componentTemplates.deleteModal.multipleErrorsNotificationMessageText",{defaultMessage:"Error deleting {count} component templates",values:{count:(errors===null||errors===void 0?void 0:errors.length)||componentTemplatesToDelete.length}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.home.componentTemplates.deleteModal.errorNotificationMessageText",{defaultMessage:"Error deleting component template '{name}'",values:{name:errors&&errors[0].name||componentTemplatesToDelete[0]}});toasts.addDanger(errorMessage)}})};const handleOnCancel=()=>{callback()};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{buttonColor:"danger","data-test-subj":"deleteComponentTemplatesConfirmation",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.componentTemplates.deleteModal.modalTitleText",defaultMessage:"Delete {numComponentTemplatesToDelete, plural, one {component template} other {# component templates}}",values:{numComponentTemplatesToDelete:numComponentTemplatesToDelete}}),onCancel:handleOnCancel,onConfirm:handleDeleteComponentTemplates,cancelButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.componentTemplates.deleteModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.componentTemplates.confirmButtonLabel",defaultMessage:"Delete {numComponentTemplatesToDelete, plural, one {component template} other {component templates} }",values:{numComponentTemplatesToDelete:numComponentTemplatesToDelete}})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.componentTemplates.deleteModal.deleteDescription",defaultMessage:"You are about to delete {numComponentTemplatesToDelete, plural, one {this component template} other {these component templates} }:",values:{numComponentTemplatesToDelete:numComponentTemplatesToDelete}})),external_kbnSharedDeps_React_default.a.createElement("ul",null,componentTemplatesToDelete.map(name=>external_kbnSharedDeps_React_default.a.createElement("li",{key:name},name)))))};const{useGlobalFlyout:component_template_list_useGlobalFlyout}=public_["GlobalFlyout"];const ComponentTemplateList=({componentTemplateName:componentTemplateName,history:history})=>{const{addContent:addContentToGlobalFlyout,removeContent:removeContentFromGlobalFlyout}=component_template_list_useGlobalFlyout();const{api:api,trackMetric:trackMetric,documentation:documentation}=useComponentTemplatesContext();const{data:data,isLoading:isLoading,error:error,resendRequest:resendRequest}=api.useLoadComponentTemplates();const[componentTemplatesToDelete,setComponentTemplatesToDelete]=Object(external_kbnSharedDeps_React_["useState"])([]);const goToComponentTemplateList=Object(external_kbnSharedDeps_React_["useCallback"])(()=>history.push({pathname:"component_templates"}),[history]);const goToEditComponentTemplate=Object(external_kbnSharedDeps_React_["useCallback"])(name=>history.push({pathname:encodeURI(`edit_component_template/${encodeURIComponent(name)}`)}),[history]);const goToCloneComponentTemplate=Object(external_kbnSharedDeps_React_["useCallback"])(name=>history.push({pathname:encodeURI(`create_component_template/${encodeURIComponent(name)}`)}),[history]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{trackMetric(METRIC_TYPE.LOADED,UIM_COMPONENT_TEMPLATE_LIST_LOAD)},[trackMetric]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(componentTemplateName){const actions=[{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateDetails.editButtonLabel",{defaultMessage:"Edit"}),icon:"pencil",handleActionClick:()=>goToEditComponentTemplate(Object(public_["attemptToURIDecode"])(componentTemplateName))},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateDetails.cloneActionLabel",{defaultMessage:"Clone"}),icon:"copy",handleActionClick:()=>goToCloneComponentTemplate(Object(public_["attemptToURIDecode"])(componentTemplateName))},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateDetails.deleteButtonLabel",{defaultMessage:"Delete"}),icon:"trash",getIsDisabled:details=>details._kbnMeta.usedBy.length>0,closePopoverOnClick:true,handleActionClick:()=>{setComponentTemplatesToDelete([Object(public_["attemptToURIDecode"])(componentTemplateName)])}}];addContentToGlobalFlyout({id:"componentTemplateDetails",Component:ComponentTemplateDetailsFlyoutContent,props:{onClose:goToComponentTemplateList,componentTemplateName:componentTemplateName,showSummaryCallToAction:true,actions:actions},flyoutProps:{...component_template_details_defaultFlyoutProps,onClose:goToComponentTemplateList}})}},[componentTemplateName,goToComponentTemplateList,goToEditComponentTemplate,goToCloneComponentTemplate,addContentToGlobalFlyout,history]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!componentTemplateName){removeContentFromGlobalFlyout("componentTemplateDetails")}},[componentTemplateName,removeContentFromGlobalFlyout]);let content;if(isLoading){content=external_kbnSharedDeps_React_default.a.createElement(public_["SectionLoading"],{"data-test-subj":"sectionLoading"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.componentTemplates.list.loadingMessage",defaultMessage:"Loading component templates"}))}else if(data!==null&&data!==void 0&&data.length){content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.componentTemplates.list.componentTemplatesDescription",defaultMessage:"Use component templates to reuse settings, mappings, and aliases configurations in multiple index templates. {learnMoreLink}",values:{learnMoreLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentation.componentTemplates,target:"_blank",external:true},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplates.list.learnMoreLinkText",{defaultMessage:"Learn more."}))}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(ComponentTable,{componentTemplates:data,onReloadClick:resendRequest,onDeleteClick:setComponentTemplatesToDelete,onEditClick:goToEditComponentTemplate,onCloneClick:goToCloneComponentTemplate,history:history}))}else if(data&&data.length===0){content=external_kbnSharedDeps_React_default.a.createElement(empty_prompt_EmptyPrompt,{history:history})}else if(error){content=external_kbnSharedDeps_React_default.a.createElement(LoadError,{onReloadClick:resendRequest})}return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"componentTemplateList"},content,(componentTemplatesToDelete===null||componentTemplatesToDelete===void 0?void 0:componentTemplatesToDelete.length)>0?external_kbnSharedDeps_React_default.a.createElement(ComponentTemplatesDeleteModal,{callback:deleteResponse=>{if(deleteResponse!==null&&deleteResponse!==void 0&&deleteResponse.hasDeletedComponentTemplates){resendRequest();goToComponentTemplateList()}setComponentTemplatesToDelete([])},componentTemplatesToDelete:componentTemplatesToDelete}):null)};const ComponentTemplateListContainer=({match:{params:{componentTemplateName:componentTemplateName}},history:history})=>external_kbnSharedDeps_React_default.a.createElement(ComponentTemplatesAuthProvider,null,external_kbnSharedDeps_React_default.a.createElement(ComponentTemplatesWithPrivileges,null,external_kbnSharedDeps_React_default.a.createElement(ComponentTemplateList,{componentTemplateName:componentTemplateName,history:history})));const{emptyField:step_logistics_schema_emptyField,containsCharsField:step_logistics_schema_containsCharsField,isJsonField:step_logistics_schema_isJsonField}=helpers_["fieldValidators"];const{toInt:step_logistics_schema_toInt}=helpers_["fieldFormatters"];const step_logistics_schema_stringifyJson=json=>Object.keys(json).length?JSON.stringify(json,null,2):"{\n\n}";const parseJson=jsonString=>{let parsedJSON;try{parsedJSON=JSON.parse(jsonString)}catch{parsedJSON={}}return parsedJSON};const logisticsFormSchema={name:{defaultValue:undefined,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateForm.stepLogistics.nameFieldLabel",{defaultMessage:"Name"}),type:hook_form_lib_["FIELD_TYPES"].TEXT,validations:[{validator:step_logistics_schema_emptyField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateForm.validation.nameRequiredError",{defaultMessage:"A component template name is required."}))},{validator:step_logistics_schema_containsCharsField({chars:" ",message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateForm.stepLogistics.validation.nameSpacesError",{defaultMessage:"Spaces are not allowed in a component template name."})})}]},version:{type:hook_form_lib_["FIELD_TYPES"].NUMBER,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateForm.stepLogistics.versionFieldLabel",{defaultMessage:"Version (optional)"}),formatters:[step_logistics_schema_toInt]},_meta:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateForm.stepLogistics.metaFieldLabel",{defaultMessage:"_meta field data (optional)"}),helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.stepLogistics.metaHelpText",defaultMessage:"Use JSON format: {code}",values:{code:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,JSON.stringify({arbitrary_data:"anything_goes"}))}}),serializer:value=>{const result=parseJson(value);if(!Object.keys(result).length){return undefined}return result},deserializer:step_logistics_schema_stringifyJson,validations:[{validator:step_logistics_schema_isJsonField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateForm.stepLogistics.validation.metaJsonError",{defaultMessage:"The input is not valid."}),{allowEmptyString:true})}]}};const steps_step_logistics_UseField=Object(hook_form_lib_["getUseField"])({component:components_["Field"]});const step_logistics_FormRow=Object(components_["getFormRow"])({titleTag:"h3"});const step_logistics_StepLogistics=external_kbnSharedDeps_React_default.a.memo(({defaultValue:defaultValue,isEditing:isEditing,onChange:onChange})=>{const{form:form}=Object(hook_form_lib_["useForm"])({schema:logisticsFormSchema,defaultValue:defaultValue,options:{stripEmptyFields:false}});const{isValid:isFormValid,submit:submit,getFormData:getFormData,subscribe:subscribe}=form;const{documentation:documentation}=useComponentTemplatesContext();const[isMetaVisible,setIsMetaVisible]=Object(external_kbnSharedDeps_React_["useState"])(Boolean(defaultValue._meta&&Object.keys(defaultValue._meta).length));const validate=Object(external_kbnSharedDeps_React_["useCallback"])(async()=>(await submit()).isValid,[submit]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{onChange({isValid:isFormValid,validate:validate,getData:getFormData})},[isFormValid,getFormData,validate,onChange]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const subscription=subscribe(({data:data,isValid:isValid})=>{onChange({isValid:isValid,validate:validate,getData:data.format})});return subscription.unsubscribe},[subscribe,validate,onChange]);return external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["Form"],{form:form,"data-test-subj":"stepLogistics"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.stepLogistics.stepTitle",defaultMessage:"Logistics"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",flush:"right",href:documentation.componentTemplates,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.stepLogistics.docsButtonLabel",defaultMessage:"Component Templates docs"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(step_logistics_FormRow,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.stepLogistics.nameTitle",defaultMessage:"Name"}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.stepLogistics.nameDescription",defaultMessage:"Unique name for this component template."})},external_kbnSharedDeps_React_default.a.createElement(steps_step_logistics_UseField,{path:"name",componentProps:{["data-test-subj"]:"nameField",euiFieldProps:{disabled:isEditing}}})),external_kbnSharedDeps_React_default.a.createElement(step_logistics_FormRow,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.stepLogistics.versionTitle",defaultMessage:"Version"}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.stepLogistics.versionDescription",defaultMessage:"Number used by external management systems to identify the component template."})},external_kbnSharedDeps_React_default.a.createElement(steps_step_logistics_UseField,{path:"version",componentProps:{["data-test-subj"]:"versionField"}})),external_kbnSharedDeps_React_default.a.createElement(step_logistics_FormRow,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.stepLogistics.metaTitle",defaultMessage:"Metadata"}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.stepLogistics.metaDescription",defaultMessage:"Arbitrary information about the template, stored in the cluster state. {learnMoreLink}",values:{learnMoreLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentation.componentTemplatesMetadata,target:"_blank",external:true},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateForm.stepLogistics.metaDocumentionLink",{defaultMessage:"Learn more."}))}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.stepLogistics.metadataDescription",defaultMessage:"Add metadata"}),checked:isMetaVisible,onChange:e=>setIsMetaVisible(e.target.checked),"data-test-subj":"metaToggle"}))},isMetaVisible&&external_kbnSharedDeps_React_default.a.createElement(steps_step_logistics_UseField,{path:"_meta",component:components_["JsonEditorField"],componentProps:{euiCodeEditorProps:{["data-test-subj"]:"metaEditor",height:"200px","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateForm.stepLogistics.metaAriaLabel",{defaultMessage:"_meta field data editor"})}}})))});const step_logistics_container_StepLogisticsContainer=({isEditing:isEditing=false})=>{const{defaultValue:defaultValue,updateContent:updateContent}=public_["Forms"].useContent("logistics");return external_kbnSharedDeps_React_default.a.createElement(step_logistics_StepLogistics,{defaultValue:defaultValue,onChange:updateContent,isEditing:isEditing})};const{stripEmptyFields:step_review_stripEmptyFields}=helpers_["serializers"];const getDescriptionText=data=>{const hasEntries=data&&Object.entries(data).length>0;return hasEntries?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.stepReview.summaryTab.yesDescriptionText",defaultMessage:"Yes"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.stepReview.summaryTab.noDescriptionText",defaultMessage:"No"})};const StepReview=external_kbnSharedDeps_React_default.a.memo(({componentTemplate:componentTemplate})=>{const{name:name}=componentTemplate;const serializedComponentTemplate=Object(common_lib["b"])(step_review_stripEmptyFields(componentTemplate,{types:["string"]}));const{template:serializedTemplate,_meta:serializedMeta,version:serializedVersion}=serializedComponentTemplate;const SummaryTab=()=>external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"summaryTab"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{textStyle:"reverse"},typeof serializedVersion!=="undefined"&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.summaryTab.versionLabel",defaultMessage:"Version"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,serializedVersion)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.stepReview.summaryTab.settingsLabel",defaultMessage:"Index settings"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,getDescriptionText(serializedTemplate===null||serializedTemplate===void 0?void 0:serializedTemplate.settings)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.stepReview.summaryTab.mappingLabel",defaultMessage:"Mappings"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,getDescriptionText(serializedTemplate===null||serializedTemplate===void 0?void 0:serializedTemplate.mappings)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.stepReview.summaryTab.aliasesLabel",defaultMessage:"Aliases"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,getDescriptionText(serializedTemplate===null||serializedTemplate===void 0?void 0:serializedTemplate.aliases)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,serializedMeta&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.summaryTab.metaLabel",defaultMessage:"Metadata"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeBlock"],{language:"json"},JSON.stringify(serializedMeta,null,2)))))));const RequestTab=()=>{const endpoint=`PUT _component_template/${name||"<componentTemplateName>"}`;const templateString=JSON.stringify(serializedComponentTemplate,null,2);const request=`${endpoint}\n${templateString}`;const language=request.length<6e4?"json":undefined;return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"requestTab"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.stepReview.requestTab.descriptionText",defaultMessage:"This request will create the following component template."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeBlock"],{language:language,isCopyable:true},request))};return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"stepReview"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h2",{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.stepReview.stepTitle",defaultMessage:"Review details for '{templateName}'",values:{templateName:name}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTabbedContent"],{"data-test-subj":"content",tabs:[{id:"summary",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateForm.stepReview.summaryTabTitle",{defaultMessage:"Summary"}),content:external_kbnSharedDeps_React_default.a.createElement(SummaryTab,null)},{id:"request",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateForm.stepReview.requestTabTitle",{defaultMessage:"Request"}),content:external_kbnSharedDeps_React_default.a.createElement(RequestTab,null)}]}))});const StepReviewContainer=external_kbnSharedDeps_React_default.a.memo(({getComponentTemplateData:getComponentTemplateData})=>{const{getData:getData}=public_["Forms"].useMultiContentContext();const wizardContent=getData();const componentTemplate=getComponentTemplateData(wizardContent);return external_kbnSharedDeps_React_default.a.createElement(StepReview,{componentTemplate:componentTemplate})});const{stripEmptyFields:component_template_form_stripEmptyFields}=helpers_["serializers"];const{FormWizard:FormWizard,FormWizardStep:FormWizardStep}=public_["Forms"];const wizardSections={logistics:{id:"logistics",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateForm.steps.logisticsStepName",{defaultMessage:"Logistics"})},settings:{id:"settings",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateForm.steps.settingsStepName",{defaultMessage:"Index settings"})},mappings:{id:"mappings",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateForm.steps.mappingsStepName",{defaultMessage:"Mappings"})},aliases:{id:"aliases",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateForm.steps.aliasesStepName",{defaultMessage:"Aliases"})},review:{id:"review",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateForm.steps.summaryStepName",{defaultMessage:"Review"})}};const ComponentTemplateForm=({defaultValue:defaultValue={name:"",template:{},_meta:{},_kbnMeta:{usedBy:[],isManaged:false}},isEditing:isEditing,isSaving:isSaving,saveError:saveError,clearSaveError:clearSaveError,onSave:onSave})=>{const{template:{settings:settings,mappings:mappings,aliases:aliases},...logistics}=defaultValue;const{documentation:documentation}=useComponentTemplatesContext();const wizardDefaultValue={logistics:logistics,settings:settings,mappings:mappings,aliases:aliases};const i18nTexts={save:isEditing?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.saveButtonLabel",defaultMessage:"Save component template"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.createButtonLabel",defaultMessage:"Create component template"})};const apiError=saveError?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateForm.saveTemplateError",defaultMessage:"Unable to create component template"}),color:"danger",iconType:"alert","data-test-subj":"saveComponentTemplateError"},external_kbnSharedDeps_React_default.a.createElement("div",null,saveError.message||saveError.statusText)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"})):null;const cleanupComponentTemplateObject=componentTemplate=>{const outputTemplate={...componentTemplate};if(outputTemplate.template.settings===undefined){delete outputTemplate.template.settings}if(outputTemplate.template.mappings===undefined){delete outputTemplate.template.mappings}if(outputTemplate.template.aliases===undefined){delete outputTemplate.template.aliases}return outputTemplate};const buildComponentTemplateObject=Object(external_kbnSharedDeps_React_["useCallback"])(initialTemplate=>wizardData=>{const outputComponentTemplate={...initialTemplate,name:wizardData.logistics.name,version:wizardData.logistics.version,_meta:wizardData.logistics._meta,template:{settings:wizardData.settings,mappings:wizardData.mappings,aliases:wizardData.aliases}};return cleanupComponentTemplateObject(outputComponentTemplate)},[]);const onSaveComponentTemplate=Object(external_kbnSharedDeps_React_["useCallback"])(async wizardData=>{const componentTemplate=buildComponentTemplateObject(defaultValue)(wizardData);onSave(component_template_form_stripEmptyFields(componentTemplate,{types:["string"]}));clearSaveError()},[buildComponentTemplateObject,defaultValue,onSave,clearSaveError]);return external_kbnSharedDeps_React_default.a.createElement(FormWizard,{defaultValue:wizardDefaultValue,onSave:onSaveComponentTemplate,isEditing:isEditing,isSaving:isSaving,apiError:apiError,texts:i18nTexts},external_kbnSharedDeps_React_default.a.createElement(FormWizardStep,{id:wizardSections.logistics.id,label:wizardSections.logistics.label,isRequired:true},external_kbnSharedDeps_React_default.a.createElement(step_logistics_container_StepLogisticsContainer,{isEditing:isEditing})),external_kbnSharedDeps_React_default.a.createElement(FormWizardStep,{id:wizardSections.settings.id,label:wizardSections.settings.label},external_kbnSharedDeps_React_default.a.createElement(StepSettingsContainer,{esDocsBase:documentation.esDocsBase})),external_kbnSharedDeps_React_default.a.createElement(FormWizardStep,{id:wizardSections.mappings.id,label:wizardSections.mappings.label},external_kbnSharedDeps_React_default.a.createElement(StepMappingsContainer,{esDocsBase:documentation.esDocsBase})),external_kbnSharedDeps_React_default.a.createElement(FormWizardStep,{id:wizardSections.aliases.id,label:wizardSections.aliases.label},external_kbnSharedDeps_React_default.a.createElement(StepAliasesContainer,{esDocsBase:documentation.esDocsBase})),external_kbnSharedDeps_React_default.a.createElement(FormWizardStep,{id:wizardSections.review.id,label:wizardSections.review.label},external_kbnSharedDeps_React_default.a.createElement(StepReviewContainer,{getComponentTemplateData:buildComponentTemplateObject(defaultValue)})))};const ComponentTemplateCreate=({history:history,sourceComponentTemplate:sourceComponentTemplate})=>{const[isSaving,setIsSaving]=Object(external_kbnSharedDeps_React_["useState"])(false);const[saveError,setSaveError]=Object(external_kbnSharedDeps_React_["useState"])(null);const{api:api,breadcrumbs:breadcrumbs}=useComponentTemplatesContext();const onSave=async componentTemplate=>{const{name:name}=componentTemplate;setIsSaving(true);setSaveError(null);const{error:error}=await api.createComponentTemplate(componentTemplate);setIsSaving(false);if(error){setSaveError(error);return}history.push({pathname:encodeURI(`/component_templates/${encodeURIComponent(name)}`)})};const clearSaveError=()=>{setSaveError(null)};Object(external_kbnSharedDeps_React_["useEffect"])(()=>{breadcrumbs.setCreateBreadcrumbs()},[breadcrumbs]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"pageTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.createComponentTemplate.pageTitle",defaultMessage:"Create component template"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(ComponentTemplateForm,{defaultValue:sourceComponentTemplate,onSave:onSave,isSaving:isSaving,saveError:saveError,clearSaveError:clearSaveError})))};const ComponentTemplateEdit=({match:{params:{name:name}},history:history})=>{const{api:api,breadcrumbs:breadcrumbs}=useComponentTemplatesContext();const[isSaving,setIsSaving]=Object(external_kbnSharedDeps_React_["useState"])(false);const[saveError,setSaveError]=Object(external_kbnSharedDeps_React_["useState"])(null);const decodedName=Object(public_["attemptToURIDecode"])(name);const{error:error,data:componentTemplate,isLoading:isLoading}=api.useLoadComponentTemplate(decodedName);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{breadcrumbs.setEditBreadcrumbs()},[breadcrumbs]);const onSave=async updatedComponentTemplate=>{setIsSaving(true);setSaveError(null);const{error:saveErrorObject}=await api.updateComponentTemplate(updatedComponentTemplate);setIsSaving(false);if(saveErrorObject){setSaveError(saveErrorObject);return}history.push({pathname:encodeURI(`/component_templates/${encodeURIComponent(updatedComponentTemplate.name)}`)})};const clearSaveError=()=>{setSaveError(null)};let content;if(isLoading){content=external_kbnSharedDeps_React_default.a.createElement(public_["SectionLoading"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateEdit.loadingDescription",defaultMessage:"Loading component template"}))}else if(error){content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateEdit.loadComponentTemplateError",defaultMessage:"Error loading component template"}),color:"danger",iconType:"alert","data-test-subj":"loadComponentTemplateError"},external_kbnSharedDeps_React_default.a.createElement("div",null,error.message)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))}else if(componentTemplate){content=external_kbnSharedDeps_React_default.a.createElement(ComponentTemplateForm,{defaultValue:componentTemplate,onSave:onSave,isSaving:isSaving,saveError:saveError,clearSaveError:clearSaveError,isEditing:true})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"pageTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateEdit.editPageTitle",defaultMessage:"Edit component template '{name}'",values:{name:decodedName}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),content))};function component_template_clone_extends(){component_template_clone_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return component_template_clone_extends.apply(this,arguments)}const ComponentTemplateClone=props=>{const{sourceComponentTemplateName:sourceComponentTemplateName}=props.match.params;const decodedSourceName=Object(public_["attemptToURIDecode"])(sourceComponentTemplateName);const{toasts:toasts,api:api}=useComponentTemplatesContext();const{error:error,data:componentTemplateToClone,isLoading:isLoading}=api.useLoadComponentTemplate(decodedSourceName);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(error&&!isLoading){toasts.addError(error,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplateClone.loadComponentTemplateTitle",{defaultMessage:`Error loading component template '{sourceComponentTemplateName}'.`,values:{sourceComponentTemplateName:sourceComponentTemplateName}})})}},[error,isLoading]);if(isLoading){return external_kbnSharedDeps_React_default.a.createElement(public_["SectionLoading"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplateEdit.loadingDescription",defaultMessage:"Loading component template"}))}else{const sourceComponentTemplate=componentTemplateToClone?{...componentTemplateToClone,name:`${componentTemplateToClone.name}-copy`}:undefined;return external_kbnSharedDeps_React_default.a.createElement(ComponentTemplateCreate,component_template_clone_extends({},props,{sourceComponentTemplate:sourceComponentTemplate}))}};const CreateButtonPopOver=({anchorPosition:anchorPosition="upCenter"})=>{const[isPopoverOpen,setIsPopOverOpen]=Object(external_kbnSharedDeps_React_["useState"])(false);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"createComponentTemplatePanel",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,"data-test-subj":"manageTemplateButton",iconType:"arrowDown",iconSide:"right",onClick:()=>setIsPopOverOpen(prev=>!prev)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplatesFlyout.manageButtonLabel",defaultMessage:"Create"})),isOpen:isPopoverOpen,closePopover:()=>setIsPopOverOpen(false),panelPaddingSize:"none",anchorPosition:anchorPosition,repositionOnScroll:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:0,panels:[{id:0,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesFlyout.createContextMenuPanelTitle",{defaultMessage:"New component template"}),items:[{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesFlyout.createComponentTemplateFromScratchButtonLabel",{defaultMessage:"From scratch"}),icon:"plusInCircle",onClick:()=>{}},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesFlyout.createComponentTemplateFromExistingButtonLabel",{defaultMessage:"From existing index template"}),icon:"symlink",onClick:()=>{}}]}]}))};function FilterListButton({onChange:onChange,filters:filters}){const[isPopoverOpen,setIsPopoverOpen]=Object(external_kbnSharedDeps_React_["useState"])(false);const activeFilters=Object.values(filters).filter(v=>v.checked==="on");const onButtonClick=()=>{setIsPopoverOpen(!isPopoverOpen)};const closePopover=()=>{setIsPopoverOpen(false)};const toggleFilter=filter=>{const previousValue=filters[filter].checked;const nextValue=previousValue==="on"?"off":"on";onChange({...filters,[filter]:{...filters[filter],checked:nextValue}})};const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilterButton"],{iconType:"arrowDown",onClick:onButtonClick,isSelected:isPopoverOpen,numFilters:Object.keys(filters).length,hasActiveFilters:activeFilters.length>0,numActiveFilters:activeFilters.length,"data-test-subj":"filterButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexTemplatesList.filterButtonLabel",defaultMessage:"Filter"}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{ownFocus:true,button:button,isOpen:isPopoverOpen,closePopover:closePopover,panelPaddingSize:"none","data-test-subj":"filterList"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"euiFilterSelect__items"},Object.entries(filters).map(([filter,item],index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilterSelectItem"],{checked:item.checked,key:index,onClick:()=>toggleFilter(filter),"data-test-subj":"filterItem"},item.name))))}var component_templates_list_item=__webpack_require__(125);const ComponentTemplatesListItem=({component:component,onViewDetail:onViewDetail,actions:actions,isSelected:isSelected=false,dragHandleProps:dragHandleProps})=>{const hasActions=actions&&actions.length>0;const isSelectedValue=typeof isSelected==="function"?isSelected(component):isSelected;const isDraggable=Boolean(dragHandleProps);return external_kbnSharedDeps_React_default.a.createElement("div",{className:classnames_default()("componentTemplatesListItem",{"componentTemplatesListItem--selected":isSelectedValue}),"data-test-subj":"item"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center"},isDraggable&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement("div",dragHandleProps,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"grab"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,"data-test-subj":"name"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:()=>onViewDetail(component)},component.name)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"componentTemplatesListItem__contentIndicator"},external_kbnSharedDeps_React_default.a.createElement(TemplateContentIndicator,{settings:component.hasSettings,mappings:component.hasMappings,aliases:component.hasAliases})))),hasActions&&!isSelectedValue&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs"},actions.map((action,i)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{key:i},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:action.label},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:action.icon,onClick:()=>action.handler(component),"data-test-subj":`action-${action.icon}`,"aria-label":action.label}))))))),isSelectedValue&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{className:"componentTemplatesListItem__checkIcon",type:"check",color:"secondary"}))};function component_templates_list_extends(){component_templates_list_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return component_templates_list_extends.apply(this,arguments)}const ComponentTemplatesList=({components:components,listItemProps:listItemProps})=>external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"componentTemplatesList"},components.map(component=>external_kbnSharedDeps_React_default.a.createElement(ComponentTemplatesListItem,component_templates_list_extends({key:component.name,component:component},listItemProps))));var component_templates=__webpack_require__(134);function component_templates_escapeRegExp(text){return text.replace(/[-\[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function fuzzyMatch(searchValue,text){const pattern=`.*${searchValue.split("").map(component_templates_escapeRegExp).join(".*")}.*`;const regex=new RegExp(pattern);return regex.test(text)}const component_templates_i18nTexts={filters:{settings:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesSelector.filters.indexSettingsLabel",{defaultMessage:"Index settings"}),mappings:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesSelector.filters.mappingsLabel",{defaultMessage:"Mappings"}),aliases:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesSelector.filters.aliasesLabel",{defaultMessage:"Aliases"})},searchBoxPlaceholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesSelector.searchBox.placeholder",{defaultMessage:"Search component templates"})};const getInitialFilters=()=>({settings:{name:component_templates_i18nTexts.filters.settings,checked:"off"},mappings:{name:component_templates_i18nTexts.filters.mappings,checked:"off"},aliases:{name:component_templates_i18nTexts.filters.aliases,checked:"off"}});const ComponentTemplates=({isLoading:isLoading,components:components,listItemProps:listItemProps})=>{const[searchValue,setSearchValue]=Object(external_kbnSharedDeps_React_["useState"])("");const[filters,setFilters]=Object(external_kbnSharedDeps_React_["useState"])(getInitialFilters);const filteredComponents=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{if(isLoading){return[]}return components.filter(component=>{if(filters.settings.checked==="on"&&!component.hasSettings){return false}if(filters.mappings.checked==="on"&&!component.hasMappings){return false}if(filters.aliases.checked==="on"&&!component.hasAliases){return false}if(searchValue.trim()===""){return true}const match=fuzzyMatch(searchValue,component.name);return match}).sort((a,b)=>{if(a.name<b.name){return-1}else if(a.name>b.name){return 1}return 0})},[isLoading,components,searchValue,filters]);const isSearchResultEmpty=filteredComponents.length===0&&components.length>0;if(isLoading){return null}const clearSearch=()=>{setSearchValue("");setFilters(getInitialFilters())};const renderEmptyResult=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"search",title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplatesSelector.searchResult.emptyPromptTitle",defaultMessage:"No components match your search"})),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:clearSearch},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplatesSelector.searchResult.emptyPrompt.clearSearchButtonLabel",defaultMessage:"Clear search"})),"data-test-subj":"emptySearchResult"});return external_kbnSharedDeps_React_default.a.createElement("div",{className:"componentTemplates","data-test-subj":"componentTemplates"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"componentTemplates__header"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldSearch"],{placeholder:component_templates_i18nTexts.searchBoxPlaceholder,value:searchValue,onChange:e=>{setSearchValue(e.target.value)},"aria-label":component_templates_i18nTexts.searchBoxPlaceholder,className:"componentTemplates__searchBox","data-test-subj":"componentTemplateSearchBox"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(FilterListButton,{filters:filters,onChange:setFilters})))),external_kbnSharedDeps_React_default.a.createElement("div",{className:classnames_default()("eui-yScrollWithShadows componentTemplates__listWrapper",{"componentTemplates__listWrapper--is-empty":isSearchResultEmpty})},isSearchResultEmpty?renderEmptyResult():external_kbnSharedDeps_React_default.a.createElement(ComponentTemplatesList,{components:filteredComponents,listItemProps:listItemProps})))};function component_templates_selection_extends(){component_templates_selection_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return component_templates_selection_extends.apply(this,arguments)}const ComponentTemplatesSelection=({components:components,onReorder:onReorder,listItemProps:listItemProps})=>{const onDragEnd=({source:source,destination:destination})=>{if(source&&destination){const items=Object(external_kbnSharedDeps_ElasticEui_["euiDragDropReorder"])(components,source.index,destination.index);onReorder(items)}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDragDropContext"],{onDragEnd:onDragEnd},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDroppable"],{droppableId:"componentTemplates",spacing:"none"},components.map((component,idx)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDraggable"],{spacing:"none",key:component.name,index:idx,draggableId:component.name,customDragHandle:true},provided=>external_kbnSharedDeps_React_default.a.createElement(ComponentTemplatesListItem,component_templates_selection_extends({component:component,dragHandleProps:provided.dragHandleProps},listItemProps))))))};var component_templates_selector=__webpack_require__(143);const{useGlobalFlyout:component_templates_selector_useGlobalFlyout}=public_["GlobalFlyout"];const component_templates_selector_i18nTexts={icons:{view:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesSelector.viewItemIconLabel",{defaultMessage:"View"}),select:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesSelector.selectItemIconLabel",{defaultMessage:"Select"}),remove:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.componentTemplatesSelector.removeItemIconLabel",{defaultMessage:"Remove"})}};const ComponentTemplatesSelector=({onChange:onChange,defaultValue:defaultValue,onComponentsLoaded:onComponentsLoaded,docUri:docUri,emptyPrompt:{text:text,showCreateButton:showCreateButton}={}})=>{const{data:components,isLoading:isLoading,error:error}=useApi().useLoadComponentTemplates();const{addContent:addContentToGlobalFlyout,removeContent:removeContentFromGlobalFlyout}=component_templates_selector_useGlobalFlyout();const[selectedComponent,setSelectedComponent]=Object(external_kbnSharedDeps_React_["useState"])(null);const[componentsSelected,setComponentsSelected]=Object(external_kbnSharedDeps_React_["useState"])([]);const isInitialized=Object(external_kbnSharedDeps_React_["useRef"])(false);const hasSelection=Object.keys(componentsSelected).length>0;const hasComponents=components&&components.length>0?true:false;const closeComponentTemplateDetails=()=>{setSelectedComponent(null)};Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(components){if(defaultValue&&defaultValue.length>0&&componentsSelected.length===0&&isInitialized.current===false){const nextComponentsSelected=defaultValue.map(name=>components.find(comp=>comp.name===name)).filter(Boolean);setComponentsSelected(nextComponentsSelected);onChange(nextComponentsSelected.map(({name:name})=>name));isInitialized.current=true}else{onChange(componentsSelected.map(({name:name})=>name))}}},[defaultValue,components,componentsSelected,onChange]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!isLoading&&!error){onComponentsLoaded(components!==null&&components!==void 0?components:[])}},[isLoading,error,components,onComponentsLoaded]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(selectedComponent){addContentToGlobalFlyout({id:"componentTemplateDetails",Component:ComponentTemplateDetailsFlyoutContent,props:{onClose:closeComponentTemplateDetails,componentTemplateName:selectedComponent},flyoutProps:{...component_template_details_defaultFlyoutProps,onClose:closeComponentTemplateDetails},cleanUpFunc:()=>{setSelectedComponent(null)}})}},[selectedComponent,addContentToGlobalFlyout]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!selectedComponent){removeContentFromGlobalFlyout("componentTemplateDetails")}},[selectedComponent,removeContentFromGlobalFlyout]);const onSelectionReorder=reorderedComponents=>{setComponentsSelected(reorderedComponents)};const renderLoading=()=>external_kbnSharedDeps_React_default.a.createElement(public_["SectionLoading"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplatesSelector.loadingComponentsDescription",defaultMessage:"Loading component templates"}));const renderError=()=>external_kbnSharedDeps_React_default.a.createElement(public_["SectionError"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplatesSelector.loadingComponentsErrorMessage",defaultMessage:"Error loading components"}),error:error});const renderSelector=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:"componentTemplatesSelector"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:classnames_default()("componentTemplatesSelector__selection",{"componentTemplatesSelector__selection--is-empty":!hasSelection}),"data-test-subj":"componentTemplatesSelection"},hasSelection?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("div",{className:"componentTemplatesSelector__selection__header"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplatesSelector.selectionHeader.componentsSelectedLabel",defaultMessage:"Components selected: {count}",values:{count:external_kbnSharedDeps_React_default.a.createElement("span",{className:"componentTemplatesSelector__selection__header__count"},componentsSelected.length)}})),external_kbnSharedDeps_React_default.a.createElement("div",{className:"eui-yScrollWithShadows componentTemplatesSelector__selection__content"},external_kbnSharedDeps_React_default.a.createElement(ComponentTemplatesSelection,{components:componentsSelected,onReorder:onSelectionReorder,listItemProps:{onViewDetail:component=>{setSelectedComponent(component.name)},actions:[{label:component_templates_selector_i18nTexts.icons.remove,icon:"minusInCircle",handler:component=>{setComponentsSelected(prev=>prev.filter(({name:name})=>component.name!==name))}}]}}))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{textAlign:"center","data-test-subj":"emptyPrompt"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplatesSelector.noComponentSelectedLabel-1",defaultMessage:"Add component template building blocks to this template."}),external_kbnSharedDeps_React_default.a.createElement("br",null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplatesSelector.noComponentSelectedLabel-2",defaultMessage:"Component templates are applied in the order specified."})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(ComponentTemplates,{isLoading:isLoading,components:components!==null&&components!==void 0?components:[],listItemProps:{onViewDetail:component=>{setSelectedComponent(component.name)},actions:[{label:component_templates_selector_i18nTexts.icons.select,icon:"plusInCircle",handler:component=>{setComponentsSelected(prev=>[...prev,component])}}],isSelected:component=>componentsSelected.find(({name:name})=>component.name===name)!==undefined}})));if(isLoading){return renderLoading()}else if(error){return renderError()}else if(hasComponents){return renderSelector()}const emptyPromptBody=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",null,text!==null&&text!==void 0?text:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplatesSelector.emptyPromptDescription",defaultMessage:"Components templates let you save index settings, mappings and aliases and inherit from them in index templates."}),external_kbnSharedDeps_React_default.a.createElement("br",null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:docUri,target:"_blank",external:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplatesSelector.emptyPromptLearnMoreLinkText",defaultMessage:"Learn more."}))));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"managementApp",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.componentTemplatesSelector.emptyPromptTitle",defaultMessage:"You dont have any components yet"})),body:emptyPromptBody,actions:showCreateButton?external_kbnSharedDeps_React_default.a.createElement(CreateButtonPopOver,{anchorPosition:"downCenter"}):undefined,"data-test-subj":"emptyPrompt"})};const step_components_i18nTexts={title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.formWizard.stepComponents.stepTitle",defaultMessage:"Component templates (optional)"}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.formWizard.stepComponents.componentsDescription",defaultMessage:"Component templates let you save index settings, mappings and aliases and inherit from them in index templates."})};const StepComponents=({defaultValue:defaultValue,onChange:onChange,esDocsBase:esDocsBase})=>{const[state,setState]=Object(external_kbnSharedDeps_React_["useState"])({isLoadingComponents:true,components:[]});const onComponentsLoaded=Object(external_kbnSharedDeps_React_["useCallback"])(components=>{setState({isLoadingComponents:false,components:components})},[]);const onComponentSelectionChange=Object(external_kbnSharedDeps_React_["useCallback"])(components=>{onChange({isValid:true,validate:async()=>true,getData:()=>components.length>0?components:undefined})},[onChange]);const showHeader=state.isLoadingComponents===true||state.components.length>0;const docUri=`${esDocsBase}/indices-component-template.html`;const renderHeader=()=>{if(!showHeader){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h2",{"data-test-subj":"stepTitle"},step_components_i18nTexts.title)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,step_components_i18nTexts.description))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",flush:"right",href:docUri,target:"_blank",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.formWizard.stepComponents.docsButtonLabel",defaultMessage:"Component templates docs"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}))};return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"stepComponents"},renderHeader(),external_kbnSharedDeps_React_default.a.createElement(ComponentTemplatesSelector,{defaultValue:defaultValue,onChange:onComponentSelectionChange,onComponentsLoaded:onComponentsLoaded,docUri:docUri,emptyPrompt:{text:step_components_i18nTexts.description,showCreateButton:false}}))};const StepComponentContainer=()=>{const{defaultValue:defaultValue,updateContent:updateContent}=public_["Forms"].useContent("components");return external_kbnSharedDeps_React_default.a.createElement(StepComponents,{defaultValue:defaultValue,onChange:updateContent,esDocsBase:documentationService.getEsDocsBase()})};const{stripEmptyFields:steps_step_review_stripEmptyFields}=helpers_["serializers"];const NoneDescriptionText=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.summaryTab.noneDescriptionText",defaultMessage:"None"});const step_review_getDescriptionText=data=>{const hasEntries=data&&Object.entries(data).length>0;return hasEntries?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.summaryTab.yesDescriptionText",defaultMessage:"Yes"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.summaryTab.noDescriptionText",defaultMessage:"No"})};const PreviewTab=({template:template})=>external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"previewTab"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.previewTab.descriptionText",defaultMessage:"This is the final template that will be applied to matching indices. Component templates are applied in the order specified. Explicit mappings, settings, and aliases override the component templates."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(SimulateTemplate,{template:template}));const step_review_StepReview=external_kbnSharedDeps_React_default.a.memo(({template:template,navigateToStep:navigateToStep})=>{const{name:name,indexPatterns:indexPatterns,version:version,order:order,priority:priority,composedOf:composedOf,_meta:_meta,_kbnMeta:{isLegacy:isLegacy}}=template;const serializedTemplate=isLegacy?Object(common_lib["c"])(steps_step_review_stripEmptyFields(template,{types:["string"]})):Object(common_lib["d"])(steps_step_review_stripEmptyFields(template,{types:["string"]}));const serializedMappings=Object(common["getTemplateParameter"])(serializedTemplate,"mappings");const serializedSettings=Object(common["getTemplateParameter"])(serializedTemplate,"settings");const serializedAliases=Object(common["getTemplateParameter"])(serializedTemplate,"aliases");const numIndexPatterns=indexPatterns.length;const hasWildCardIndexPattern=Boolean(indexPatterns.find(pattern=>pattern==="*"));const SummaryTab=()=>external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"summaryTab"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.summaryTab.indexPatternsLabel",defaultMessage:"Index {numIndexPatterns, plural, one {pattern} other {patterns}}",values:{numIndexPatterns:numIndexPatterns}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,numIndexPatterns>1?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("ul",null,indexPatterns.map((indexName,i)=>external_kbnSharedDeps_React_default.a.createElement("li",{key:`${indexName}-${i}`},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("span",null,indexName)))))):indexPatterns.toString()),isLegacy?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.summaryTab.orderLabel",defaultMessage:"Order"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,order?order:external_kbnSharedDeps_React_default.a.createElement(NoneDescriptionText,null))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.summaryTab.priorityLabel",defaultMessage:"Priority"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,priority?priority:external_kbnSharedDeps_React_default.a.createElement(NoneDescriptionText,null))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.summaryTab.versionLabel",defaultMessage:"Version"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,version?version:external_kbnSharedDeps_React_default.a.createElement(NoneDescriptionText,null)),isLegacy!==true&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.summaryTab.componentsLabel",defaultMessage:"Component templates"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,composedOf&&composedOf.length>0?composedOf.length>1?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("ul",null,composedOf.map((component,i)=>external_kbnSharedDeps_React_default.a.createElement("li",{key:`${component}-${i}`},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("span",null,component)))))):composedOf.toString():external_kbnSharedDeps_React_default.a.createElement(NoneDescriptionText,null))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.summaryTab.settingsLabel",defaultMessage:"Index settings"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,step_review_getDescriptionText(serializedSettings)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.summaryTab.mappingLabel",defaultMessage:"Mappings"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,step_review_getDescriptionText(serializedMappings)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.summaryTab.aliasesLabel",defaultMessage:"Aliases"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,step_review_getDescriptionText(serializedAliases)),isLegacy!==true&&_meta&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],{"data-test-subj":"metaTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.summaryTab.metaLabel",defaultMessage:"Metadata"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeBlock"],{lang:"json"},JSON.stringify(_meta,null,2))))))));const RequestTab=()=>{var _template;const includeTypeName=doMappingsHaveType((_template=template.template)===null||_template===void 0?void 0:_template.mappings);const esApiEndpoint=isLegacy?"_template":"_index_template";const endpoint=`PUT ${esApiEndpoint}/${name||"<templateName>"}${includeTypeName?"?include_type_name":""}`;const templateString=JSON.stringify(serializedTemplate,null,2);const request=`${endpoint}\n${templateString}`;const language=request.length<6e4?"json":undefined;return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"requestTab"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.requestTab.descriptionText",defaultMessage:"This request will create the following index template."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeBlock"],{language:language,isCopyable:true},request))};const tabs=[{id:"summary",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepReview.summaryTabTitle",{defaultMessage:"Summary"}),content:external_kbnSharedDeps_React_default.a.createElement(SummaryTab,null)},{id:"request",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepReview.requestTabTitle",{defaultMessage:"Request"}),content:external_kbnSharedDeps_React_default.a.createElement(RequestTab,null)}];if(!isLegacy){tabs.splice(1,0,{id:"preview",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.stepReview.previewTabTitle",{defaultMessage:"Preview"}),content:external_kbnSharedDeps_React_default.a.createElement(PreviewTab,{template:template})})}return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"stepSummary"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h2",{"data-test-subj":"stepTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.stepTitle",defaultMessage:"Review details for '{templateName}'",values:{templateName:name}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),hasWildCardIndexPattern?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.summaryTab.indexPatternsWarningTitle",defaultMessage:"This template uses a wildcard (*) as an index pattern."}),color:"warning",iconType:"help","data-test-subj":"indexPatternsWarning"},external_kbnSharedDeps_React_default.a.createElement("p",{"data-test-subj":"indexPatternsWarningDescription"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.summaryTab.indexPatternsWarningDescription",defaultMessage:"All new indices that you create will use this template."})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:navigateToStep.bind(null,"logistics")},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.stepReview.summaryTab.indexPatternsWarningLinkText",defaultMessage:"Edit index patterns."})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"})):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTabbedContent"],{"data-test-subj":"summaryTabContent",tabs:tabs}))});const step_review_container_StepReviewContainer=external_kbnSharedDeps_React_default.a.memo(({getTemplateData:getTemplateData})=>{const{navigateToStep:navigateToStep}=public_["Forms"].useFormWizardContext();const{getData:getData}=public_["Forms"].useMultiContentContext();const wizardContent=getData();const template=getTemplateData(wizardContent);return external_kbnSharedDeps_React_default.a.createElement(step_review_StepReview,{template:template,navigateToStep:navigateToStep})});const{stripEmptyFields:template_form_stripEmptyFields}=helpers_["serializers"];const{FormWizard:template_form_FormWizard,FormWizardStep:template_form_FormWizardStep}=public_["Forms"];const{useGlobalFlyout:template_form_useGlobalFlyout}=public_["GlobalFlyout"];const template_form_wizardSections={logistics:{id:"logistics",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.steps.logisticsStepName",{defaultMessage:"Logistics"})},components:{id:"components",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.steps.componentsStepName",{defaultMessage:"Component templates"})},settings:{id:"settings",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.steps.settingsStepName",{defaultMessage:"Index settings"})},mappings:{id:"mappings",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.steps.mappingsStepName",{defaultMessage:"Mappings"})},aliases:{id:"aliases",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.steps.aliasesStepName",{defaultMessage:"Aliases"})},review:{id:"review",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateForm.steps.summaryStepName",{defaultMessage:"Review template"})}};const TemplateForm=({title:title,defaultValue:defaultValue,isEditing:isEditing,isSaving:isSaving,isLegacy:isLegacy=false,saveError:saveError,clearSaveError:clearSaveError,onSave:onSave})=>{const[wizardContent,setWizardContent]=Object(external_kbnSharedDeps_React_["useState"])(null);const{addContent:addContentToGlobalFlyout,closeFlyout:closeFlyout}=template_form_useGlobalFlyout();const simulateTemplateFilters=Object(external_kbnSharedDeps_React_["useRef"])({mappings:true,settings:true,aliases:true});const indexTemplate=defaultValue!==null&&defaultValue!==void 0?defaultValue:{name:"",indexPatterns:[],template:{},_kbnMeta:{type:"default",hasDatastream:false,isLegacy:isLegacy}};const{template:{settings:settings,mappings:mappings,aliases:aliases}={},composedOf:composedOf,_kbnMeta:_kbnMeta,...logistics}=indexTemplate;const wizardDefaultValue={logistics:logistics,settings:settings,mappings:mappings,aliases:aliases,components:indexTemplate.composedOf};const i18nTexts={save:isEditing?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.saveButtonLabel",defaultMessage:"Save template"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.createButtonLabel",defaultMessage:"Create template"})};const apiError=saveError?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(SectionError,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.saveTemplateError",defaultMessage:"Unable to create template"}),error:saveError,"data-test-subj":"saveTemplateError"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"})):null;const cleanupTemplateObject=template=>{const outputTemplate={...template};if(outputTemplate.template){if(outputTemplate.template.settings===undefined){delete outputTemplate.template.settings}if(outputTemplate.template.mappings===undefined){delete outputTemplate.template.mappings}if(outputTemplate.template.aliases===undefined){delete outputTemplate.template.aliases}if(Object.keys(outputTemplate.template).length===0){delete outputTemplate.template}}return outputTemplate};const buildTemplateObject=Object(external_kbnSharedDeps_React_["useCallback"])(initialTemplate=>wizardData=>{const outputTemplate={...wizardData.logistics,_kbnMeta:initialTemplate._kbnMeta,composedOf:wizardData.components,template:{settings:wizardData.settings,mappings:wizardData.mappings,aliases:wizardData.aliases}};return cleanupTemplateObject(outputTemplate)},[]);const onWizardContentChange=Object(external_kbnSharedDeps_React_["useCallback"])(content=>{setWizardContent(content)},[]);const onSaveTemplate=Object(external_kbnSharedDeps_React_["useCallback"])(async wizardData=>{const template=buildTemplateObject(indexTemplate)(wizardData);onSave(template_form_stripEmptyFields(template,{types:["string"]}));clearSaveError()},[indexTemplate,buildTemplateObject,onSave,clearSaveError]);const getSimulateTemplate=Object(external_kbnSharedDeps_React_["useCallback"])(async()=>{if(!wizardContent){return}const isValid=await wizardContent.validate();if(!isValid){return}const wizardData=wizardContent.getData();const template=buildTemplateObject(indexTemplate)(wizardData);return template},[buildTemplateObject,indexTemplate,wizardContent]);const onSimulateTemplateFiltersChange=Object(external_kbnSharedDeps_React_["useCallback"])(filters=>{simulateTemplateFilters.current=filters},[]);const showPreviewFlyout=()=>{addContentToGlobalFlyout({id:"simulateTemplate",Component:SimulateTemplateFlyoutContent,props:{getTemplate:getSimulateTemplate,onClose:closeFlyout,filters:simulateTemplateFilters.current,onFiltersChange:onSimulateTemplateFiltersChange},flyoutProps:simulate_template_flyout_defaultFlyoutProps})};const getRightContentWizardNav=stepId=>{if(isLegacy){return null}if(stepId==="logistics"||stepId==="review"){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",onClick:showPreviewFlyout},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateForm.previewIndexTemplateButtonLabel",defaultMessage:"Preview index template"}))};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,title,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(template_form_FormWizard,{defaultValue:wizardDefaultValue,onSave:onSaveTemplate,isEditing:isEditing,isSaving:isSaving,apiError:apiError,texts:i18nTexts,onChange:onWizardContentChange,rightContentNav:getRightContentWizardNav},external_kbnSharedDeps_React_default.a.createElement(template_form_FormWizardStep,{id:template_form_wizardSections.logistics.id,label:template_form_wizardSections.logistics.label,isRequired:true},external_kbnSharedDeps_React_default.a.createElement(StepLogisticsContainer,{isEditing:isEditing,isLegacy:indexTemplate._kbnMeta.isLegacy})),indexTemplate._kbnMeta.isLegacy!==true&&external_kbnSharedDeps_React_default.a.createElement(template_form_FormWizardStep,{id:template_form_wizardSections.components.id,label:template_form_wizardSections.components.label},external_kbnSharedDeps_React_default.a.createElement(StepComponentContainer,null)),external_kbnSharedDeps_React_default.a.createElement(template_form_FormWizardStep,{id:template_form_wizardSections.settings.id,label:template_form_wizardSections.settings.label},external_kbnSharedDeps_React_default.a.createElement(StepSettingsContainer,{esDocsBase:documentationService.getEsDocsBase()})),external_kbnSharedDeps_React_default.a.createElement(template_form_FormWizardStep,{id:template_form_wizardSections.mappings.id,label:template_form_wizardSections.mappings.label},external_kbnSharedDeps_React_default.a.createElement(StepMappingsContainer,{esDocsBase:documentationService.getEsDocsBase()})),external_kbnSharedDeps_React_default.a.createElement(template_form_FormWizardStep,{id:template_form_wizardSections.aliases.id,label:template_form_wizardSections.aliases.label},external_kbnSharedDeps_React_default.a.createElement(StepAliasesContainer,{esDocsBase:documentationService.getEsDocsBase()})),external_kbnSharedDeps_React_default.a.createElement(template_form_FormWizardStep,{id:template_form_wizardSections.review.id,label:template_form_wizardSections.review.label},external_kbnSharedDeps_React_default.a.createElement(step_review_container_StepReviewContainer,{getTemplateData:buildTemplateObject(indexTemplate)}))))};const healthToColor=health=>{switch(health){case"green":return"success";case"yellow":return"warning";case"red":return"danger"}};const DataHealth=({health:health})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHealth"],{color:healthToColor(health)},health);var routing=__webpack_require__(3);const DeleteDataStreamConfirmationModal=({dataStreams:dataStreams,onClose:onClose})=>{const dataStreamsCount=dataStreams.length;const handleDeleteDataStreams=()=>{deleteDataStreams(dataStreams).then(({data:{dataStreamsDeleted:dataStreamsDeleted,errors:errors},error:error})=>{const hasDeletedDataStreams=dataStreamsDeleted&&dataStreamsDeleted.length;if(hasDeletedDataStreams){const successMessage=dataStreamsDeleted.length===1?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.deleteDataStreamsConfirmationModal.successDeleteSingleNotificationMessageText",{defaultMessage:"Deleted data stream '{dataStreamName}'",values:{dataStreamName:dataStreams[0]}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.deleteDataStreamsConfirmationModal.successDeleteMultipleNotificationMessageText",{defaultMessage:"Deleted {numSuccesses, plural, one {# data stream} other {# data streams}}",values:{numSuccesses:dataStreamsDeleted.length}});onClose({hasDeletedDataStreams:hasDeletedDataStreams});notificationService.showSuccessToast(successMessage)}if(error||errors&&errors.length){const hasMultipleErrors=errors&&errors.length>1||error&&dataStreams.length>1;const errorMessage=hasMultipleErrors?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.deleteDataStreamsConfirmationModal.multipleErrorsNotificationMessageText",{defaultMessage:"Error deleting {count} data streams",values:{count:errors&&errors.length||dataStreams.length}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.deleteDataStreamsConfirmationModal.errorNotificationMessageText",{defaultMessage:"Error deleting data stream '{name}'",values:{name:errors&&errors[0].name||dataStreams[0]}});notificationService.showDangerToast(errorMessage)}})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{buttonColor:"danger","data-test-subj":"deleteDataStreamsConfirmation",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.deleteDataStreamsConfirmationModal.modalTitleText",defaultMessage:"Delete {dataStreamsCount, plural, one {data stream} other {# data streams}}",values:{dataStreamsCount:dataStreamsCount}}),onCancel:()=>onClose(),onConfirm:handleDeleteDataStreams,cancelButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.deleteDataStreamsConfirmationModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.deleteDataStreamsConfirmationModal.confirmButtonLabel",defaultMessage:"Delete {dataStreamsCount, plural, one {data stream} other {data streams} }",values:{dataStreamsCount:dataStreamsCount}})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.deleteDataStreamsConfirmationModal.warningTitle",defaultMessage:"Deleting data streams also deletes indices"}),color:"danger",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.deleteDataStreamsConfirmationModal.warningMessage",defaultMessage:"Data streams are collections of time series indices. Deleting a data stream will also delete its indices."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.deleteDataStreamsConfirmationModal.deleteDescription",defaultMessage:"You are about to delete {dataStreamsCount, plural, one {this data stream} other {these data streams} }:",values:{dataStreamsCount:dataStreamsCount}})),external_kbnSharedDeps_React_default.a.createElement("ul",null,dataStreams.map(name=>external_kbnSharedDeps_React_default.a.createElement("li",{key:name},name)))))};var external_kbnSharedDeps_Moment_=__webpack_require__(34);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);const humanizeTimeStamp=timeStamp=>external_kbnSharedDeps_Moment_default()(timeStamp).format("MMMM Do, YYYY h:mm:ss A");const isFleetManaged=dataStream=>{var _dataStream$_meta,_dataStream$_meta2;return Boolean(((_dataStream$_meta=dataStream._meta)===null||_dataStream$_meta===void 0?void 0:_dataStream$_meta.managed)&&((_dataStream$_meta2=dataStream._meta)===null||_dataStream$_meta2===void 0?void 0:_dataStream$_meta2.managed_by)==="ingest-manager")};const filterDataStreams=(dataStreams,visibleTypes)=>dataStreams.filter(dataStream=>{if(!dataStream.hidden&&!isFleetManaged(dataStream)){return true}if(dataStream.hidden&&visibleTypes.includes("hidden")){return true}return isFleetManaged(dataStream)&&visibleTypes.includes("managed")});const isSelectedDataStreamHidden=(dataStreams,selectedDataStreamName)=>{var _dataStreams$find;return!!selectedDataStreamName&&!!((_dataStreams$find=dataStreams.find(dataStream=>dataStream.name===selectedDataStreamName))!==null&&_dataStreams$find!==void 0&&_dataStreams$find.hidden)};const DataStreamsBadges=({dataStream:dataStream})=>{const badges=[];if(isFleetManaged(dataStream)){badges.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"hollow",key:"managed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.dataStreamList.table.managedDataStreamBadge",defaultMessage:"Fleet-managed"})))}if(dataStream.hidden){badges.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"hollow",key:"hidden"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.dataStreamList.table.hiddenDataStreamBadge",defaultMessage:"Hidden"})))}return badges.length>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,"",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadgeGroup"],null,badges)):null};function data_stream_table_extends(){data_stream_table_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return data_stream_table_extends.apply(this,arguments)}const DataStreamTable=({dataStreams:dataStreams,reload:reload,history:history,filters:filters,includeStats:includeStats})=>{const[selection,setSelection]=Object(external_kbnSharedDeps_React_["useState"])([]);const[dataStreamsToDelete,setDataStreamsToDelete]=Object(external_kbnSharedDeps_React_["useState"])([]);const columns=[];columns.push({field:"name",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamList.table.nameColumnTitle",{defaultMessage:"Name"}),truncateText:true,sortable:true,render:(name,dataStream)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],data_stream_table_extends({"data-test-subj":"nameLink"},Object(kibanaReact_public_["reactRouterNavigate"])(history,Object(routing["a"])(name))),name),external_kbnSharedDeps_React_default.a.createElement(DataStreamsBadges,{dataStream:dataStream}))});columns.push({field:"health",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamList.table.healthColumnTitle",{defaultMessage:"Health"}),truncateText:true,sortable:true,render:health=>external_kbnSharedDeps_React_default.a.createElement(DataHealth,{health:health}),width:"100px"});if(includeStats){columns.push({field:"maxTimeStamp",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamList.table.maxTimeStampColumnTitle",{defaultMessage:"Last updated"}),width:"300px",truncateText:true,sortable:true,render:maxTimeStamp=>maxTimeStamp?humanizeTimeStamp(maxTimeStamp):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamList.table.maxTimeStampColumnNoneMessage",{defaultMessage:"Never"})});columns.push({field:"storageSizeBytes",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamList.table.storageSizeColumnTitle",{defaultMessage:"Storage size"}),truncateText:true,sortable:true,render:(storageSizeBytes,dataStream)=>dataStream.storageSize})}columns.push({field:"indices",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamList.table.indicesColumnTitle",{defaultMessage:"Indices"}),truncateText:true,sortable:true,render:(indices,dataStream)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],data_stream_table_extends({"data-test-subj":"indicesLink"},Object(kibanaReact_public_["reactRouterNavigate"])(history,Object(routing["b"])(`data_stream="${dataStream.name}"`,true))),indices.length)});columns.push({name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamList.table.actionColumnTitle",{defaultMessage:"Actions"}),actions:[{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamList.table.actionDeleteText",{defaultMessage:"Delete"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamList.table.actionDeleteDescription",{defaultMessage:"Delete this data stream"}),icon:"trash",color:"danger",type:"icon",onClick:({name:name})=>{setDataStreamsToDelete([name])},isPrimary:true,"data-test-subj":"deleteDataStream",available:({privileges:{delete_index:deleteIndex}})=>deleteIndex}]});const pagination={initialPageSize:20,pageSizeOptions:[10,20,50]};const sorting={sort:{field:"name",direction:"asc"}};const selectionConfig={onSelectionChange:setSelection};const searchConfig={query:filters,box:{incremental:true},toolsLeft:selection.length>0&&selection.every(dataStream=>dataStream.privileges.delete_index)?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"deleteDataStreamsButton",onClick:()=>setDataStreamsToDelete(selection.map(({name:name})=>name)),color:"danger"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.dataStreamList.table.deleteDataStreamsButtonLabel",defaultMessage:"Delete {count, plural, one {data stream} other {data streams} }",values:{count:selection.length}})):undefined,toolsRight:[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"secondary",iconType:"refresh",onClick:reload,"data-test-subj":"reloadButton",key:"reloadButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.dataStreamList.reloadDataStreamsButtonLabel",defaultMessage:"Reload"}))]};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,dataStreamsToDelete&&dataStreamsToDelete.length>0?external_kbnSharedDeps_React_default.a.createElement(DeleteDataStreamConfirmationModal,{onClose:data=>{if(data&&data.hasDeletedDataStreams){reload()}else{setDataStreamsToDelete([])}},dataStreams:dataStreamsToDelete}):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{items:dataStreams||[],itemId:"name",columns:columns,search:searchConfig,sorting:sorting,isSelectable:true,selection:selectionConfig,pagination:pagination,rowProps:()=>({"data-test-subj":"row"}),cellProps:()=>({"data-test-subj":"cell"}),"data-test-subj":"dataStreamTable",message:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.dataStreamList.table.noDataStreamsMessage",defaultMessage:"No data streams found"}),tableLayout:"auto"}))};const useUrlGenerator=({urlGeneratorId:urlGeneratorId,urlGeneratorState:urlGeneratorState})=>{const{urlGenerators:urlGenerators}=useAppContext();const[link,setLink]=Object(external_kbnSharedDeps_React_["useState"])();Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const updateLink=async()=>{let urlGenerator;try{urlGenerator=urlGenerators.getUrlGenerator(urlGeneratorId);const url=await urlGenerator.createUrl(urlGeneratorState);setLink(url)}catch(e){}};updateLink()},[urlGeneratorId,urlGeneratorState,urlGenerators]);return link};function data_stream_detail_panel_extends(){data_stream_detail_panel_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return data_stream_detail_panel_extends.apply(this,arguments)}const DetailsList=({details:details})=>{const groups=[];let items;details.forEach((detail,index)=>{const{name:name,toolTip:toolTip,content:content}=detail;if(index%2===0){items=[];groups.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{key:groups.length},items))}items.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{key:name},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},name),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},toolTip&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:toolTip,position:"top"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,content)))});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{textStyle:"reverse"},groups)};const DataStreamDetailPanel=({dataStreamName:dataStreamName,onClose:onClose})=>{const{error:error,data:dataStream,isLoading:isLoading}=useLoadDataStream(dataStreamName);const[isDeleting,setIsDeleting]=Object(external_kbnSharedDeps_React_["useState"])(false);const ilmPolicyLink=useUrlGenerator({urlGeneratorId:ILM_URL_GENERATOR_ID,urlGeneratorState:{page:ILM_PAGES_POLICY_EDIT,policyName:dataStream===null||dataStream===void 0?void 0:dataStream.ilmPolicyName}});const{history:history}=useAppContext();let content;if(isLoading){content=external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.loadingDataStreamDescription",{defaultMessage:"Loading data stream"}))}else if(error){content=external_kbnSharedDeps_React_default.a.createElement(SectionError,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.loadingDataStreamErrorMessage",{defaultMessage:"Error loading data stream"}),error:error,"data-test-subj":"sectionError"})}else if(dataStream){const{health:health,indices:indices,timeStampField:timeStampField,generation:generation,indexTemplateName:indexTemplateName,ilmPolicyName:ilmPolicyName,storageSize:storageSize,maxTimeStamp:maxTimeStamp}=dataStream;const details=[{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.healthTitle",{defaultMessage:"Health"}),toolTip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.healthToolTip",{defaultMessage:`The health of the data stream's current backing indices`}),content:external_kbnSharedDeps_React_default.a.createElement(DataHealth,{health:health})},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.maxTimeStampTitle",{defaultMessage:"Last updated"}),toolTip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.maxTimeStampToolTip",{defaultMessage:"The most recent document to be added to the data stream"}),content:maxTimeStamp?humanizeTimeStamp(maxTimeStamp):external_kbnSharedDeps_React_default.a.createElement("em",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.maxTimeStampNoneMessage",{defaultMessage:`Never`}))},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.storageSizeTitle",{defaultMessage:"Storage size"}),toolTip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.storageSizeToolTip",{defaultMessage:`Total size of all shards in the data streams backing indices`}),content:storageSize},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.indicesTitle",{defaultMessage:"Indices"}),toolTip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.indicesToolTip",{defaultMessage:`The data stream's current backing indices`}),content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],Object(kibanaReact_public_["reactRouterNavigate"])(history,Object(routing["b"])(`data_stream="${dataStreamName}"`,true)),indices.length)},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.timestampFieldTitle",{defaultMessage:"Timestamp field"}),toolTip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.timestampFieldToolTip",{defaultMessage:"Timestamp field shared by all documents in the data stream"}),content:timeStampField.name},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.generationTitle",{defaultMessage:"Generation"}),toolTip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.generationToolTip",{defaultMessage:"Cumulative count of backing indices created for the data stream"}),content:generation},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.indexTemplateTitle",{defaultMessage:"Index template"}),toolTip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.indexTemplateToolTip",{defaultMessage:"The index template that configured the data stream and configures its backing indices"}),content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],data_stream_detail_panel_extends({"data-test-subj":"indexTemplateLink"},Object(kibanaReact_public_["reactRouterNavigate"])(history,Object(routing["d"])(indexTemplateName))),indexTemplateName)},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.ilmPolicyTitle",{defaultMessage:"Index lifecycle policy"}),toolTip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.ilmPolicyToolTip",{defaultMessage:`The index lifecycle policy that manages the data stream's data`}),content:ilmPolicyName&&ilmPolicyLink?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{"data-test-subj":"ilmPolicyLink",href:ilmPolicyLink},ilmPolicyName):ilmPolicyName||external_kbnSharedDeps_React_default.a.createElement("em",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.ilmPolicyContentNoneMessage",{defaultMessage:`None`}))}];content=external_kbnSharedDeps_React_default.a.createElement(DetailsList,{details:details})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,isDeleting?external_kbnSharedDeps_React_default.a.createElement(DeleteDataStreamConfirmationModal,{onClose:data=>{if(data&&data.hasDeletedDataStreams){onClose(true)}else{setIsDeleting(false)}},dataStreams:[dataStreamName]}):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{onClose:onClose,"data-test-subj":"dataStreamDetailPanel","aria-labelledby":"dataStreamDetailPanelTitle",size:"m",maxWidth:500},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",{id:"dataStreamDetailPanelTitle","data-test-subj":"dataStreamDetailPanelTitle"},dataStreamName,dataStream&&external_kbnSharedDeps_React_default.a.createElement(DataStreamsBadges,{dataStream:dataStream})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],{"data-test-subj":"content"},content),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"cross",flush:"left",onClick:()=>onClose(),"data-test-subj":"closeDetailsButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.closeButtonLabel",{defaultMessage:"Close"}))),!isLoading&&!error&&dataStream!==null&&dataStream!==void 0&&dataStream.privileges.delete_index?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"danger",iconType:"trash",onClick:()=>setIsDeleting(true),"data-test-subj":"deleteDataStreamButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamDetailPanel.deleteButtonLabel",{defaultMessage:"Delete data stream"}))):null))))};function filter_list_button_FilterListButton({onChange:onChange,filters:filters}){const[isPopoverOpen,setIsPopoverOpen]=Object(external_kbnSharedDeps_React_["useState"])(false);const activeFilters=Object.values(filters).filter(v=>v.checked==="on");const onButtonClick=()=>{setIsPopoverOpen(!isPopoverOpen)};const closePopover=()=>{setIsPopoverOpen(false)};const toggleFilter=filter=>{const previousValue=filters[filter].checked;onChange({...filters,[filter]:{...filters[filter],checked:previousValue==="on"?"off":"on"}})};const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilterButton"],{iconType:"arrowDown",onClick:onButtonClick,isSelected:isPopoverOpen,numFilters:Object.keys(filters).length,hasActiveFilters:activeFilters.length>0,numActiveFilters:activeFilters.length,"data-test-subj":"viewButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexTemplatesList.viewButtonLabel",defaultMessage:"View"}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{ownFocus:true,button:button,isOpen:isPopoverOpen,closePopover:closePopover,panelPaddingSize:"none","data-test-subj":"filterList"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"euiFilterSelect__items"},Object.entries(filters).map(([filter,item],index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilterSelectItem"],{checked:item.checked,key:index,onClick:()=>toggleFilter(filter),"data-test-subj":"filterItem"},item.name))))}function data_stream_list_extends(){data_stream_list_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return data_stream_list_extends.apply(this,arguments)}const DataStreamList=({match:{params:{dataStreamName:dataStreamName}},location:{search:search},history:history})=>{const{isDeepLink:isDeepLink,includeHidden:includeHidden}=Object(public_["extractQueryParams"])(search);const decodedDataStreamName=Object(public_["attemptToURIDecode"])(dataStreamName);const{core:{getUrlForApp:getUrlForApp},plugins:{isFleetEnabled:isFleetEnabled}}=useAppContext();const[isIncludeStatsChecked,setIsIncludeStatsChecked]=Object(external_kbnSharedDeps_React_["useState"])(false);const{error:error,isLoading:isLoading,data:dataStreams,resendRequest:reload}=useLoadDataStreams({includeStats:isIncludeStatsChecked});const[filters,setFilters]=Object(external_kbnSharedDeps_React_["useState"])({managed:{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamList.viewManagedLabel",{defaultMessage:"Fleet-managed data streams"}),checked:"on"},hidden:{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamList.viewHiddenLabel",{defaultMessage:"Hidden data streams"}),checked:includeHidden?"on":"off"}});const activateHiddenFilter=shouldBeActive=>{if(shouldBeActive&&filters.hidden.checked==="off"){setFilters({...filters,hidden:{...filters.hidden,checked:"on"}})}};const filteredDataStreams=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{if(!dataStreams){return[]}const visibleTypes=Object.entries(filters).filter(([name,_filter])=>_filter.checked==="on").map(([name])=>name);return filterDataStreams(dataStreams,visibleTypes)},[dataStreams,filters]);const renderHeader=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.dataStreamList.dataStreamsDescription",defaultMessage:"Data streams store time-series data across multiple indices. {learnMoreLink}",values:{learnMoreLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getDataStreamsDocumentationLink(),target:"_blank",external:true},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamListDescription.learnMoreLinkText",{defaultMessage:"Learn more."}))}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamListControls.includeStatsSwitchLabel",{defaultMessage:"Include stats"}),checked:isIncludeStatsChecked,onChange:e=>setIsIncludeStatsChecked(e.target.checked),"data-test-subj":"includeStatsSwitch"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamListControls.includeStatsSwitchToolTip",{defaultMessage:"Including stats can increase reload times"}),position:"top"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(filter_list_button_FilterListButton,{filters:filters,onChange:setFilters})));let content;if(isLoading){content=external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.dataStreamList.loadingDataStreamsDescription",defaultMessage:"Loading data streams"}))}else if(error){content=external_kbnSharedDeps_React_default.a.createElement(SectionError,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.dataStreamList.loadingDataStreamsErrorMessage",defaultMessage:"Error loading data streams"}),error:error})}else if(Array.isArray(dataStreams)&&dataStreams.length===0){content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"managementApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.dataStreamList.emptyPrompt.noDataStreamsTitle",defaultMessage:"You don't have any data streams yet"})),body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.dataStreamList.emptyPrompt.noDataStreamsDescription",defaultMessage:"Data streams store time-series data across multiple indices."})," ",isFleetEnabled?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.dataStreamList.emptyPrompt.noDataStreamsCtaIngestManagerMessage",defaultMessage:"Get started with data streams in {link}.",values:{link:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{"data-test-subj":"dataStreamsEmptyPromptTemplateLink",href:getUrlForApp("fleet")},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamList.emptyPrompt.noDataStreamsCtaIngestManagerLink",{defaultMessage:"Fleet"}))}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.dataStreamList.emptyPrompt.noDataStreamsCtaIndexTemplateMessage",defaultMessage:"Get started with data streams by creating a {link}.",values:{link:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],data_stream_list_extends({"data-test-subj":"dataStreamsEmptyPromptTemplateLink"},Object(kibanaReact_public_["reactRouterNavigate"])(history,{pathname:"/templates"})),external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.dataStreamList.emptyPrompt.noDataStreamsCtaIndexTemplateLink",{defaultMessage:"composable index template"}))}})),"data-test-subj":"emptyPrompt"})}else if(Array.isArray(dataStreams)&&dataStreams.length>0){activateHiddenFilter(isSelectedDataStreamHidden(dataStreams,decodedDataStreamName));content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,renderHeader(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(DataStreamTable,{filters:isDeepLink&&decodedDataStreamName!==undefined?`name="${decodedDataStreamName}"`:"",dataStreams:filteredDataStreams,reload:reload,history:history,includeStats:isIncludeStatsChecked}))}return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"dataStreamList"},content,decodedDataStreamName&&external_kbnSharedDeps_React_default.a.createElement(DataStreamDetailPanel,{dataStreamName:decodedDataStreamName,onClose:shouldReload=>{history.push(`/${Section.DataStreams}`);if(shouldReload){reload()}}}))};const renderBadges=(index,filterChanged,extensionsService)=>{const badgeLabels=[];extensionsService.badges.forEach(({matchIndex:matchIndex,label:label,color:color,filterExpression:filterExpression})=>{if(matchIndex(index)){const clickHandler=()=>{filterChanged&&filterExpression&&filterChanged(external_kbnSharedDeps_ElasticEui_["EuiSearchBar"].Query.parse(filterExpression))};const ariaLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.badgeAriaLabel",{defaultMessage:"{label}. Select to filter on this.",values:{label:label}});badgeLabels.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:label}," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:color,onClick:clickHandler,onClickAriaLabel:ariaLabel},label)))}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,badgeLabels)};const flattenPanelTree=(tree,array=[])=>{array.push(tree);if(tree.items){tree.items.forEach(item=>{if(item.panel){flattenPanelTree(item.panel,array);item.panel=item.panel.id}})}return array};function index_actions_context_menu_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class index_actions_context_menu_IndexActionsContextMenu extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);index_actions_context_menu_defineProperty(this,"closeConfirmModal",()=>{this.setState({renderConfirmModal:null});this.props.resetSelection&&this.props.resetSelection()});index_actions_context_menu_defineProperty(this,"confirmAction",isActionConfirmed=>{this.setState({isActionConfirmed:isActionConfirmed})});index_actions_context_menu_defineProperty(this,"onButtonClick",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))});index_actions_context_menu_defineProperty(this,"closePopoverAndExecute",func=>{this.setState({isPopoverOpen:false,renderConfirmModal:false});func();this.props.resetSelection&&this.props.resetSelection()});index_actions_context_menu_defineProperty(this,"closePopover",()=>{this.setState({isPopoverOpen:false})});index_actions_context_menu_defineProperty(this,"forcemergeSegmentsError",()=>{const{forcemergeSegments:forcemergeSegments}=this.state;if(!forcemergeSegments||forcemergeSegments.match(/^([1-9][0-9]*)?$/)){return}else{return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.segmentsNumberErrorMessage",{defaultMessage:"The number of segments must be greater than zero."})}});index_actions_context_menu_defineProperty(this,"renderForcemergeSegmentsModal",()=>{const{forcemergeIndices:forcemergeIndices,indexNames:indexNames}=this.props;const helpText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.forceMerge.forceMergeSegmentsHelpText",{defaultMessage:"Merge the segments in an index until the number is reduced to this or fewer segments. The default is 1."});const selectedIndexCount=indexNames.length;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.forceMerge.confirmModal.modalTitle",{defaultMessage:"Force merge"}),onCancel:this.closeConfirmModal,onConfirm:()=>{if(!this.forcemergeSegmentsError()){this.closePopoverAndExecute(()=>{forcemergeIndices(this.state.forcemergeSegments);this.setState({forcemergeSegments:null,showForcemergeSegmentsModal:null})})}},cancelButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.forceMerge.confirmModal.cancelButtonText",{defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.forceMerge.confirmModal.confirmButtonText",{defaultMessage:"Force merge"})},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexActionsMenu.forceMerge.forceMergeDescription",defaultMessage:"You are about to force merge {selectedIndexCount, plural, one {this index} other {these indices} }:",values:{selectedIndexCount:selectedIndexCount}})),external_kbnSharedDeps_React_default.a.createElement("ul",null,indexNames.map(indexName=>external_kbnSharedDeps_React_default.a.createElement("li",{key:indexName},indexName))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.forceMerge.proceedWithCautionCallOutTitle",{defaultMessage:"Proceed with caution!"}),color:"warning",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexActionsMenu.forceMerge.forceMergeWarningDescription",defaultMessage:" Don't force-merge indices to which you're still writing, or to which you'll write again in the future. Instead, rely on the automatic background merge process to perform merges as needed to keep the index running smoothly. If you write to a force-merged index then its performance may become much worse. "}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],{isInvalid:!!this.forcemergeSegmentsError(),error:this.forcemergeSegmentsError()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.forceMerge.maximumNumberOfSegmentsFormRowLabel",{defaultMessage:"Maximum number of segments per shard"}),helpText:helpText},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{onChange:event=>{this.setState({forcemergeSegments:event.target.value})},min:1,name:"maxNumberSegments"}))))});index_actions_context_menu_defineProperty(this,"renderConfirmDeleteModal",()=>{const{deleteIndices:deleteIndices,indexNames:indexNames,hasSystemIndex:hasSystemIndex,isSystemIndexByName:isSystemIndexByName}=this.props;const{isActionConfirmed:isActionConfirmed}=this.state;const selectedIndexCount=indexNames.length;const standardIndexModalBody=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexActionsMenu.deleteIndex.deleteDescription",defaultMessage:"You are about to delete {selectedIndexCount, plural, one {this index} other {these indices} }:",values:{selectedIndexCount:selectedIndexCount}})),external_kbnSharedDeps_React_default.a.createElement("ul",null,indexNames.map(indexName=>external_kbnSharedDeps_React_default.a.createElement("li",{key:indexName},indexName))),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexActionsMenu.deleteIndex.deleteWarningDescription",defaultMessage:"You can't recover a deleted index. Make sure you have appropriate backups."})));const systemIndexModalBody=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexActionsMenu.deleteIndex.deleteDescription",defaultMessage:"You are about to delete {selectedIndexCount, plural, one {this index} other {these indices} }:",values:{selectedIndexCount:selectedIndexCount}})),external_kbnSharedDeps_React_default.a.createElement("ul",null,indexNames.map(indexName=>external_kbnSharedDeps_React_default.a.createElement("li",{key:indexName},indexName,isSystemIndexByName[indexName]?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{iconType:"alert",color:"hollow"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexActionsMenu.deleteIndex.systemIndexLabel",defaultMessage:"System index"}))):""))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.deleteIndex.proceedWithCautionCallOutTitle",{defaultMessage:"Deleting a system index can break Kibana"}),color:"danger",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexActionsMenu.deleteIndex.proceedWithCautionCallOutDescription",defaultMessage:"System indices are critical for internal operations. If you delete a system index, you can't recover it. Make sure you have appropriate backups."})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckbox"],{id:"confirmDeleteIndicesCheckbox",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexActionsMenu.deleteIndex.checkboxLabel",defaultMessage:"I understand the consequences of deleting a system index"}),checked:isActionConfirmed,onChange:e=>this.confirmAction(e.target.checked)})));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.deleteIndex.confirmModal.modalTitle",{defaultMessage:"Delete {selectedIndexCount, plural, one {index} other {# indices} }",values:{selectedIndexCount:selectedIndexCount}}),onCancel:()=>{this.confirmAction(false);this.closeConfirmModal()},onConfirm:()=>this.closePopoverAndExecute(deleteIndices),buttonColor:"danger",confirmButtonDisabled:hasSystemIndex?!isActionConfirmed:false,cancelButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.deleteIndex.confirmModal.cancelButtonText",{defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.deleteIndex.confirmModal.confirmButtonText",{defaultMessage:"Delete {selectedIndexCount, plural, one {index} other {indices} }",values:{selectedIndexCount:selectedIndexCount}})},hasSystemIndex?systemIndexModalBody:standardIndexModalBody)});index_actions_context_menu_defineProperty(this,"renderConfirmCloseModal",()=>{const{closeIndices:closeIndices,indexNames:indexNames,isSystemIndexByName:isSystemIndexByName}=this.props;const{isActionConfirmed:isActionConfirmed}=this.state;const selectedIndexCount=indexNames.length;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.closeIndex.confirmModal.modalTitle",{defaultMessage:"Close {selectedIndexCount, plural, one {index} other {# indices} }",values:{selectedIndexCount:selectedIndexCount}}),onCancel:()=>{this.confirmAction(false);this.closeConfirmModal()},onConfirm:()=>this.closePopoverAndExecute(closeIndices),buttonColor:"danger",confirmButtonDisabled:!isActionConfirmed,cancelButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.deleteIndex.confirmModal.cancelButtonText",{defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.closeIndex.confirmModal.confirmButtonText",{defaultMessage:"Close {selectedIndexCount, plural, one {index} other {indices} }",values:{selectedIndexCount:selectedIndexCount}})},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexActionsMenu.closeIndex.closeDescription",defaultMessage:"You are about to close {selectedIndexCount, plural, one {this index} other {these indices} }:",values:{selectedIndexCount:selectedIndexCount}})),external_kbnSharedDeps_React_default.a.createElement("ul",null,indexNames.map(indexName=>external_kbnSharedDeps_React_default.a.createElement("li",{key:indexName},indexName,isSystemIndexByName[indexName]?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{iconType:"alert",color:"hollow"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexActionsMenu.closeIndex.systemIndexLabel",defaultMessage:"System index"}))):""))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.closeIndex.proceedWithCautionCallOutTitle",{defaultMessage:"Closing a system index can break Kibana"}),color:"danger",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexActionsMenu.closeIndex.proceedWithCautionCallOutDescription",defaultMessage:"System indices are critical for internal operations. You can reopen the index using the Open Index API."})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckbox"],{id:"confirmCloseIndicesCheckbox",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexActionsMenu.closeIndex.checkboxLabel",defaultMessage:"I understand the consequences of closing a system index"}),checked:isActionConfirmed,onChange:e=>this.confirmAction(e.target.checked)})))});index_actions_context_menu_defineProperty(this,"renderConfirmFreezeModal",()=>{const{freezeIndices:freezeIndices,indexNames:indexNames}=this.props;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.freezeEntity.confirmModal.modalTitle",{defaultMessage:"Confirm freeze {count, plural, one {index} other {indices}}",values:{count:indexNames.length}}),onCancel:this.closeConfirmModal,onConfirm:()=>this.closePopoverAndExecute(freezeIndices),cancelButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.freezeEntity.confirmModal.cancelButtonText",{defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.freezeEntity.confirmModal.confirmButtonText",{defaultMessage:"Freeze {count, plural, one {index} other {indices}}",values:{count:indexNames.length}})},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexActionsMenu.freezeEntity.freezeDescription",defaultMessage:"You are about to freeze {count, plural, one {this index} other {these indices}}:",values:{count:indexNames.length}})),external_kbnSharedDeps_React_default.a.createElement("ul",null,indexNames.map(indexName=>external_kbnSharedDeps_React_default.a.createElement("li",{key:indexName},indexName))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.freezeEntity.proceedWithCautionCallOutTitle",{defaultMessage:"Proceed with caution"}),color:"warning",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexActionsMenu.freezeEntity.freezeEntityWarningDescription",defaultMessage:" A frozen index has little overhead on the cluster and is blocked for write operations. You can search a frozen index, but expect queries to be slower. "}))))});this.state={isPopoverOpen:false,renderConfirmModal:null,isActionConfirmed:false}}panels({services:{extensionsService:extensionsService},core:{getUrlForApp:getUrlForApp}}){const{closeIndices:closeIndices,openIndices:openIndices,flushIndices:flushIndices,refreshIndices:refreshIndices,clearCacheIndices:clearCacheIndices,editIndex:editIndex,showMapping:showMapping,showStats:showStats,showSettings:showSettings,detailPanel:detailPanel,indexNames:indexNames,indexStatusByName:indexStatusByName,performExtensionAction:performExtensionAction,indices:indices,reloadIndices:reloadIndices,unfreezeIndices:unfreezeIndices,hasSystemIndex:hasSystemIndex}=this.props;const allOpen=Object(external_kbnSharedDeps_Lodash_["every"])(indexNames,indexName=>indexStatusByName[indexName]===constants["h"]);const allFrozen=Object(external_kbnSharedDeps_Lodash_["every"])(indices,index=>index.isFrozen);const allUnfrozen=Object(external_kbnSharedDeps_Lodash_["every"])(indices,index=>!index.isFrozen);const selectedIndexCount=indexNames.length;const items=[];if(!detailPanel&&selectedIndexCount===1){items.push({name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.showIndexSettingsLabel",{defaultMessage:"Show {selectedIndexCount, plural, one {index} other {indices} } settings",values:{selectedIndexCount:selectedIndexCount}}),onClick:()=>{this.closePopoverAndExecute(showSettings)}});items.push({name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.showIndexMappingLabel",{defaultMessage:"Show {selectedIndexCount, plural, one {index} other {indices} } mapping",values:{selectedIndexCount:selectedIndexCount}}),onClick:()=>{this.closePopoverAndExecute(showMapping)}});if(allOpen){items.push({name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.showIndexStatsLabel",{defaultMessage:"Show {selectedIndexCount, plural, one {index} other {indices} } stats",values:{selectedIndexCount:selectedIndexCount}}),onClick:()=>{this.closePopoverAndExecute(showStats)}})}items.push({name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.editIndexSettingsLabel",{defaultMessage:"Edit {selectedIndexCount, plural, one {index} other {indices} } settings",values:{selectedIndexCount:selectedIndexCount}}),onClick:()=>{this.closePopoverAndExecute(editIndex)}})}if(allOpen){items.push({name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.closeIndexLabel",{defaultMessage:"Close {selectedIndexCount, plural, one {index} other {indices} }",values:{selectedIndexCount:selectedIndexCount}}),onClick:()=>{if(hasSystemIndex){this.closePopover();this.setState({renderConfirmModal:this.renderConfirmCloseModal});return}this.closePopoverAndExecute(closeIndices)}});items.push({name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.forceMergeIndexLabel",{defaultMessage:"Force merge {selectedIndexCount, plural, one {index} other {indices} }",values:{selectedIndexCount:selectedIndexCount}}),onClick:()=>{this.closePopover();this.setState({renderConfirmModal:this.renderForcemergeSegmentsModal})}});items.push({name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.refreshIndexLabel",{defaultMessage:"Refresh {selectedIndexCount, plural, one {index} other {indices} }",values:{selectedIndexCount:selectedIndexCount}}),onClick:()=>{this.closePopoverAndExecute(refreshIndices)}});items.push({name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.clearIndexCacheLabel",{defaultMessage:"Clear {selectedIndexCount, plural, one {index} other {indices} } cache",values:{selectedIndexCount:selectedIndexCount}}),onClick:()=>{this.closePopoverAndExecute(clearCacheIndices)}});items.push({name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.flushIndexLabel",{defaultMessage:"Flush {selectedIndexCount, plural, one {index} other {indices} }",values:{selectedIndexCount:selectedIndexCount}}),onClick:()=>{this.closePopoverAndExecute(flushIndices)}});if(allFrozen){items.push({name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.unfreezeIndexLabel",{defaultMessage:"Unfreeze {selectedIndexCount, plural, one {index} other {indices} }",values:{selectedIndexCount:selectedIndexCount}}),onClick:()=>{this.closePopoverAndExecute(unfreezeIndices)}})}else if(allUnfrozen){items.push({name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.freezeIndexLabel",{defaultMessage:"Freeze {selectedIndexCount, plural, one {index} other {indices} }",values:{selectedIndexCount:selectedIndexCount}}),onClick:()=>{this.closePopover();this.setState({renderConfirmModal:this.renderConfirmFreezeModal})}})}}else{items.push({name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.openIndexLabel",{defaultMessage:"Open {selectedIndexCount, plural, one {index} other {indices} }",values:{selectedIndexCount:selectedIndexCount}}),onClick:()=>{this.closePopoverAndExecute(openIndices)}})}items.push({name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.deleteIndexLabel",{defaultMessage:"Delete {selectedIndexCount, plural, one {index} other {indices} }",values:{selectedIndexCount:selectedIndexCount}}),onClick:()=>{this.closePopover();this.setState({renderConfirmModal:this.renderConfirmDeleteModal})}});extensionsService.actions.forEach(actionExtension=>{const actionExtensionDefinition=actionExtension({indices:indices,reloadIndices:reloadIndices,getUrlForApp:getUrlForApp});if(actionExtensionDefinition){const{buttonLabel:buttonLabel,requestMethod:requestMethod,successMessage:successMessage,renderConfirmModal:renderConfirmModal}=actionExtensionDefinition;if(requestMethod){items.push({name:buttonLabel,onClick:()=>{this.closePopoverAndExecute(async()=>{await performExtensionAction(requestMethod,successMessage)})}})}else{items.push({name:buttonLabel,onClick:()=>{this.closePopover();this.setState({renderConfirmModal:renderConfirmModal})}})}}});items.forEach(item=>{item["data-test-subj"]="indexTableContextMenuButton"});const panelTree={id:0,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.panelTitle",{defaultMessage:"{selectedIndexCount, plural, one {Index} other {Indices} } options",values:{selectedIndexCount:selectedIndexCount}}),items:items};return flattenPanelTree(panelTree)}render(){return external_kbnSharedDeps_React_default.a.createElement(AppContextConsumer,null,appDependencies=>{const{indexNames:indexNames}=this.props;const selectedIndexCount=indexNames.length;const{iconSide:iconSide="right",anchorPosition:anchorPosition="rightUp",label:label=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.manageButtonLabel",{defaultMessage:"Manage {selectedIndexCount, plural, one {index} other {indices}}",values:{selectedIndexCount:selectedIndexCount}}),iconType:iconType="arrowDown"}=this.props;const panels=this.panels(appDependencies);const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"indexActionsContextMenuButton",iconSide:iconSide,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexActionsMenu.manageButtonAriaLabel",{defaultMessage:"{selectedIndexCount, plural, one {index} other {indices} } options",values:{selectedIndexCount:selectedIndexCount}}),onClick:this.onButtonClick,iconType:iconType,fill:true},label);return external_kbnSharedDeps_React_default.a.createElement("div",null,this.state.renderConfirmModal?this.state.renderConfirmModal(this.closeConfirmModal):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"contextMenuIndices",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:anchorPosition,repositionOnScroll:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:0,panels:panels})))})}}var redux_actions_lib=__webpack_require__(35);const clearCacheIndicesStart=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_CLEAR_CACHE_INDICES_START");const clear_cache_indices_clearCacheIndices=({indexNames:indexNames})=>async dispatch=>{dispatch(clearCacheIndicesStart({indexNames:indexNames}));try{await api_clearCacheIndices(indexNames)}catch(error){notificationService.showDangerToast(error.message);return dispatch(clearRowStatus({indexNames:indexNames}))}dispatch(reload_indices_reloadIndices(indexNames));notificationService.showSuccessToast(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.clearCacheIndicesAction.successMessage",{defaultMessage:"Successfully cleared cache: [{indexNames}]",values:{indexNames:indexNames.join(", ")}}))};const clearRowStatus=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_CLEAR_ROW_STATUS");const closeIndicesStart=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_CLOSE_INDICES_START");const close_indices_closeIndices=({indexNames:indexNames})=>async dispatch=>{dispatch(closeIndicesStart({indexNames:indexNames}));try{await api_closeIndices(indexNames)}catch(error){notificationService.showDangerToast(error.message);return dispatch(clearRowStatus({indexNames:indexNames}))}dispatch(reload_indices_reloadIndices(indexNames));notificationService.showSuccessToast(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.closeIndicesAction.successfullyClosedIndicesMessage",{defaultMessage:"Successfully closed: [{indexNames}]",values:{indexNames:indexNames.join(", ")}}))};const deleteIndicesSuccess=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_DELETE_INDICES_SUCCESS");const delete_indices_deleteIndices=({indexNames:indexNames})=>async dispatch=>{try{await api_deleteIndices(indexNames)}catch(error){notificationService.showDangerToast(error.message);return dispatch(clearRowStatus({indexNames:indexNames}))}notificationService.showSuccessToast(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.deleteIndicesAction.successfullyDeletedIndicesMessage",{defaultMessage:"Successfully deleted: [{indexNames}]",values:{indexNames:indexNames.join(", ")}}));dispatch(deleteIndicesSuccess({indexNames:indexNames}))};const flushIndicesStart=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_FLUSH_INDICES_START");const flush_indices_flushIndices=({indexNames:indexNames})=>async dispatch=>{dispatch(flushIndicesStart({indexNames:indexNames}));try{await api_flushIndices(indexNames)}catch(error){notificationService.showDangerToast(error.message);return dispatch(clearRowStatus({indexNames:indexNames}))}dispatch(reload_indices_reloadIndices(indexNames));notificationService.showSuccessToast(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.flushIndicesAction.successfullyFlushedIndicesMessage",{defaultMessage:"Successfully flushed: [{indexNames}]",values:{indexNames:indexNames.join(", ")}}))};const forcemergeIndicesStart=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_FORCEMERGE_INDICES_START");const forcemerge_indices_forcemergeIndices=({indexNames:indexNames,maxNumSegments:maxNumSegments})=>async dispatch=>{dispatch(forcemergeIndicesStart({indexNames:indexNames}));try{await api_forcemergeIndices(indexNames,maxNumSegments)}catch(error){notificationService.showDangerToast(error.message);return dispatch(clearRowStatus({indexNames:indexNames}))}dispatch(reload_indices_reloadIndices(indexNames));notificationService.showSuccessToast(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.forceMergeIndicesAction.successfullyForceMergedIndicesMessage",{defaultMessage:"Successfully force merged: [{indexNames}]",values:{indexNames:indexNames.join(", ")}}))};const loadIndicesStart=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_LOAD_INDICES_START");const loadIndicesSuccess=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_LOAD_INDICES_SUCCESS");const loadIndicesError=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_LOAD_INDICES_ERROR");const load_indices_loadIndices=()=>async dispatch=>{dispatch(loadIndicesStart());let indices;try{indices=await api_loadIndices()}catch(error){return dispatch(loadIndicesError(error))}dispatch(loadIndicesSuccess({indices:indices}))};const loadIndexDataSuccess=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_LOAD_INDEX_DATA_SUCCESS");const load_index_data_loadIndexData=({indexName:indexName,dataType:dataType})=>async dispatch=>{let data;try{data=await loadIndexData(dataType,indexName)}catch(error){notificationService.showDangerToast(error.message)}dispatch(loadIndexDataSuccess({data:data,indexName:indexName}))};const openIndicesStart=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_OPEN_INDICES_START");const open_indices_openIndices=({indexNames:indexNames})=>async dispatch=>{dispatch(openIndicesStart({indexNames:indexNames}));try{await api_openIndices(indexNames)}catch(error){notificationService.showDangerToast(error.message);return dispatch(clearRowStatus({indexNames:indexNames}))}dispatch(reload_indices_reloadIndices(indexNames));notificationService.showSuccessToast(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.openIndicesAction.successfullyOpenedIndicesMessage",{defaultMessage:"Successfully opened: [{indexNames}]",values:{indexNames:indexNames.join(", ")}}))};const refreshIndicesStart=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_REFRESH_INDICES_START");const refresh_indices_refreshIndices=({indexNames:indexNames})=>async dispatch=>{dispatch(refreshIndicesStart({indexNames:indexNames}));try{await api_refreshIndices(indexNames)}catch(error){notificationService.showDangerToast(error.message);return dispatch(clearRowStatus({indexNames:indexNames}))}dispatch(reload_indices_reloadIndices(indexNames));notificationService.showSuccessToast(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.refreshIndicesAction.successfullyRefreshedIndicesMessage",{defaultMessage:"Successfully refreshed: [{indexNames}]",values:{indexNames:indexNames.join(", ")}}))};const freezeIndicesStart=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_FREEZE_INDICES_START");const freeze_indices_freezeIndices=({indexNames:indexNames})=>async dispatch=>{dispatch(freezeIndicesStart({indexNames:indexNames}));try{await api_freezeIndices(indexNames)}catch(error){notificationService.showDangerToast(error.message);return dispatch(clearRowStatus({indexNames:indexNames}))}dispatch(reload_indices_reloadIndices(indexNames));notificationService.showSuccessToast(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.freezeIndicesAction.successfullyFrozeIndicesMessage",{defaultMessage:"Successfully froze: [{indexNames}]",values:{indexNames:indexNames.join(", ")}}))};const unfreezeIndicesStart=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_UNFREEZE_INDICES_START");const unfreeze_indices_unfreezeIndices=({indexNames:indexNames})=>async dispatch=>{dispatch(unfreezeIndicesStart({indexNames:indexNames}));try{await api_unfreezeIndices(indexNames)}catch(error){notificationService.showDangerToast(error.message);return dispatch(clearRowStatus({indexNames:indexNames}))}dispatch(reload_indices_reloadIndices(indexNames));notificationService.showSuccessToast(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.unfreezeIndicesAction.successfullyUnfrozeIndicesMessage",{defaultMessage:"Successfully unfroze: [{indexNames}]",values:{indexNames:indexNames.join(", ")}}))};const reloadIndicesSuccess=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_RELOAD_INDICES_SUCCESS");const reload_indices_reloadIndices=(indexNames,options)=>async dispatch=>{let indices;try{indices=await api_reloadIndices(indexNames,options)}catch(error){if(error.status===404||error.status===403){return dispatch(load_indices_loadIndices())}return notificationService.showDangerToast(error.message)}if(indices&&indices.length>0){return dispatch(reloadIndicesSuccess({indices:indices}))}else{return notificationService.showWarningToast(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.reloadIndicesAction.indicesPageRefreshFailureMessage",{defaultMessage:"Failed to refresh current page of indices."}))}};const applyFilters=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_APPLY_FILTERS");const filtersApplied=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_FILTERS_APPLIED");const table_state_filterChanged=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_FILTER_CHANGED");const table_state_pageChanged=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_PAGE_CHANGED");const table_state_pageSizeChanged=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_PAGE_SIZE_CHANGED");const sortChanged=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_SORT_CHANGED");const table_state_toggleChanged=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_TOGGLE_CHANGED");const editIndexSettings=({indexName:indexName})=>async dispatch=>{let indexSettings;try{indexSettings=await loadIndexSettings(indexName)}catch(error){return notificationService.showDangerToast(error.message)}notificationService.showSuccessToast(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.editIndexSettingsAction.successfullySavedSettingsForIndicesMessage",{defaultMessage:"Successfully saved settings for {indexName}",values:{indexName:indexName}}));dispatch(loadIndexDataSuccess({data:indexSettings,panelType:"editIndexSettings",indexName:indexName}))};const updateIndexSettingsSuccess=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_UPDATE_INDEX_SETTINGS_SUCCESS");const updateIndexSettingsError=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_UPDATE_INDEX_SETTINGS_ERROR");const update_index_settings_updateIndexSettings=({indexName:indexName,settings:settings})=>async dispatch=>{if(Object.keys(settings).length!==0){try{const{error:error,message:message}=await api_updateIndexSettings(indexName,settings);if(error){return dispatch(updateIndexSettingsError({error:message}))}}catch(error){return dispatch(updateIndexSettingsError({error:error.message}))}}dispatch(updateIndexSettingsSuccess());dispatch(reload_indices_reloadIndices([indexName]));notificationService.showSuccessToast(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.updateIndexSettingsAction.settingsSuccessUpdateMessage",{defaultMessage:"Successfully updated settings for index {indexName}",values:{indexName:indexName}}))};const detail_panel_openDetailPanel=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_OPEN_DETAIL_PANEL");const detail_panel_closeDetailPanel=Object(redux_actions_lib["createAction"])("INDEX_MANAGEMENT_CLOSE_DETAIL_PANEL");const extension_action_performExtensionAction=({requestMethod:requestMethod,indexNames:indexNames,successMessage:successMessage})=>async dispatch=>{try{await requestMethod(indexNames,httpService.httpClient)}catch(error){notificationService.showDangerToast(error.message);return}dispatch(reload_indices_reloadIndices(indexNames));notificationService.showSuccessToast(successMessage)};var reselect_lib=__webpack_require__(171);var query_string=__webpack_require__(52);var query_string_default=__webpack_require__.n(query_string);const indexStatusLabels={[constants["b"]]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexStatusLabels.clearingCacheStatusLabel",{defaultMessage:"clearing cache..."}),[constants["c"]]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexStatusLabels.closedStatusLabel",{defaultMessage:"closed"}),[constants["d"]]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexStatusLabels.closingStatusLabel",{defaultMessage:"closing..."}),[constants["g"]]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexStatusLabels.mergingStatusLabel",{defaultMessage:"merging..."}),[constants["i"]]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexStatusLabels.openingStatusLabel",{defaultMessage:"opening..."}),[constants["j"]]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexStatusLabels.refreshingStatusLabel",{defaultMessage:"refreshing..."}),[constants["e"]]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexStatusLabels.flushingStatusLabel",{defaultMessage:"flushing..."}),[constants["f"]]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexStatusLabels.forcingMergeStatusLabel",{defaultMessage:"forcing merge..."})};var extension_service=__webpack_require__(4);const getDetailPanelData=state=>state.detailPanel.data;const getDetailPanelError=state=>state.detailPanel.error;const getDetailPanelType=state=>state.detailPanel.panelType;const isDetailPanelOpen=state=>!!getDetailPanelType(state);const getDetailPanelIndexName=state=>state.detailPanel.indexName;const getIndices=state=>state.indices.byId;const selectors_indicesLoading=state=>state.indices.loading;const selectors_indicesError=state=>state.indices.error;const getIndicesAsArray=state=>Object.values(state.indices.byId);const getIndicesByName=(state,indexNames)=>{const indices=getIndices(state);return indexNames.map(indexName=>indices[indexName])};const getIndexByIndexName=(state,name)=>getIndices(state)[name];const getFilteredIds=state=>state.indices.filteredIds;const getRowStatuses=state=>state.rowStatus;const getTableState=state=>state.tableState;const getTableLocationProp=(_,props)=>props.location;const getAllIds=state=>state.indices.allIds;const getIndexStatusByIndexName=(state,indexName)=>{const indices=getIndices(state);const{status:status}=indices[indexName]||{};return status};const getIsSystemIndexByName=indexNames=>indexNames.reduce((obj,indexName)=>{obj[indexName]=indexName.startsWith(".");return obj},{});const selectors_hasSystemIndex=indexNames=>Boolean(indexNames.find(indexName=>indexName.startsWith(".")));const defaultFilterFields=["name"];const filterByToggles=(indices,toggleNameToVisibleMap)=>{const togglesByName=extension_service["a"].toggles.reduce((byName,toggle)=>({...byName,[toggle.name]:toggle}),{});const toggleNames=Object.keys(togglesByName);if(!toggleNames.length){return indices}return indices.filter(index=>toggleNames.some(toggleName=>{if(!togglesByName[toggleName].matchIndex(index)){return true}const isVisible=toggleNameToVisibleMap[toggleName]===true;return isVisible}))};const getFilteredIndices=Object(reselect_lib["createSelector"])(getIndices,getAllIds,getTableState,getTableLocationProp,(indices,allIds,tableState,tableLocation)=>{let indexArray=allIds.map(indexName=>indices[indexName]);indexArray=filterByToggles(indexArray,tableState.toggleNameToVisibleMap);const{includeHiddenIndices:includeHiddenParam}=query_string["parse"](tableLocation.search);const includeHidden=includeHiddenParam==="true";const filteredIndices=includeHidden?indexArray:indexArray.filter(index=>!(index.name+"").startsWith(".")&&!index.hidden);const filter=tableState.filter||external_kbnSharedDeps_ElasticEui_["EuiSearchBar"].Query.MATCH_ALL;return external_kbnSharedDeps_ElasticEui_["EuiSearchBar"].Query.execute(filter,filteredIndices,{defaultFields:defaultFilterFields})});const getTotalItems=Object(reselect_lib["createSelector"])(getFilteredIndices,filteredIndices=>Object.keys(filteredIndices).length);const getPager=Object(reselect_lib["createSelector"])(getTableState,getTotalItems,({currentPage:currentPage,pageSize:pageSize},totalItems)=>new external_kbnSharedDeps_ElasticEui_["Pager"](totalItems,pageSize,currentPage));const getPageOfIndices=Object(reselect_lib["createSelector"])(getFilteredIndices,getTableState,getRowStatuses,getPager,(filteredIndices,tableState,rowStatuses,pager)=>{const sortedIndexes=sortTable(filteredIndices,tableState.sortField,tableState.isSortAscending);const{firstItemIndex:firstItemIndex,lastItemIndex:lastItemIndex}=pager;const pagedIndexes=sortedIndexes.slice(firstItemIndex,lastItemIndex+1);return pagedIndexes.map(index=>{const status=indexStatusLabels[rowStatuses[index.name]]||rowStatuses[index.name]||indexStatusLabels[index.status]||index.status;return{...index,status:status}})});const getFilter=Object(reselect_lib["createSelector"])(getTableState,({filter:filter})=>filter);const selectors_isSortAscending=Object(reselect_lib["createSelector"])(getTableState,({isSortAscending:isSortAscending})=>isSortAscending);const getSortField=Object(reselect_lib["createSelector"])(getTableState,({sortField:sortField})=>sortField);const mapStateToProps=(state,ownProps)=>{const indexStatusByName={};const{indexNames:indexNames}=ownProps;indexNames.forEach(indexName=>{indexStatusByName[indexName]=getIndexStatusByIndexName(state,indexName)});return{indexStatusByName:indexStatusByName,indices:getIndicesByName(state,indexNames),isSystemIndexByName:getIsSystemIndexByName(indexNames),hasSystemIndex:selectors_hasSystemIndex(indexNames)}};const mapDispatchToProps=(dispatch,{indexNames:indexNames})=>({editIndexSettings:()=>{dispatch(editIndexSettings({indexName:indexNames[0]}))},clearCacheIndices:()=>{dispatch(clear_cache_indices_clearCacheIndices({indexNames:indexNames}))},closeIndices:()=>{dispatch(close_indices_closeIndices({indexNames:indexNames}))},flushIndices:()=>{dispatch(flush_indices_flushIndices({indexNames:indexNames}))},openIndices:()=>{dispatch(open_indices_openIndices({indexNames:indexNames}))},refreshIndices:()=>{dispatch(refresh_indices_refreshIndices({indexNames:indexNames}))},freezeIndices:()=>{dispatch(freeze_indices_freezeIndices({indexNames:indexNames}))},unfreezeIndices:()=>{dispatch(unfreeze_indices_unfreezeIndices({indexNames:indexNames}))},forcemergeIndices:maxNumSegments=>{dispatch(forcemerge_indices_forcemergeIndices({indexNames:indexNames,maxNumSegments:maxNumSegments}))},showSettings:()=>{dispatch(detail_panel_openDetailPanel({indexName:indexNames[0],panelType:TAB_SETTINGS}))},showMapping:()=>{dispatch(detail_panel_openDetailPanel({indexName:indexNames[0],panelType:TAB_MAPPING}))},showStats:()=>{dispatch(detail_panel_openDetailPanel({indexName:indexNames[0],panelType:TAB_STATS}))},editIndex:()=>{const indexName=indexNames?indexNames[0]:null;if(indexName){dispatch(detail_panel_openDetailPanel({indexName:indexName,panelType:TAB_EDIT_SETTINGS}))}},deleteIndices:()=>{dispatch(delete_indices_deleteIndices({indexNames:indexNames}))},reloadIndices:()=>{dispatch(reload_indices_reloadIndices(indexNames))},performExtensionAction:(requestMethod,successMessage)=>{dispatch(extension_action_performExtensionAction({requestMethod:requestMethod,successMessage:successMessage,indexNames:indexNames}))}});const index_actions_context_menu_container_IndexActionsContextMenu=Object(react_redux_lib["connect"])(mapStateToProps,mapDispatchToProps)(index_actions_context_menu_IndexActionsContextMenu);var textmate=__webpack_require__(175);class show_json_ShowJson extends external_kbnSharedDeps_React_default.a.PureComponent{UNSAFE_componentWillMount(){this.props.loadIndexData(this.props)}UNSAFE_componentWillUpdate(newProps){const{data:data,loadIndexData:loadIndexData}=newProps;if(!data){loadIndexData(newProps)}}render(){const{data:data}=this.props;if(!data){return null}const json=JSON.stringify(data,null,2);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeBlock"],{lang:"json"},json)}}const show_json_container_mapStateToProps=state=>{const indexName=getDetailPanelIndexName(state);return{error:getDetailPanelError(state),data:getDetailPanelData(state),dataType:getDetailPanelType(state),indexName:indexName,indexStatus:getIndexStatusByIndexName(state,indexName)}};const show_json_container_mapDispatchToProps={loadIndexData:load_index_data_loadIndexData,closeDetailPanel:detail_panel_closeDetailPanel};const show_json_container_ShowJson=Object(react_redux_lib["connect"])(show_json_container_mapStateToProps,show_json_container_mapDispatchToProps)(show_json_ShowJson);const getHeaders=()=>({health:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.summary.headers.healthHeader",{defaultMessage:"Health"}),status:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.summary.headers.statusHeader",{defaultMessage:"Status"}),primary:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.summary.headers.primaryHeader",{defaultMessage:"Primaries"}),replica:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.summary.headers.replicaHeader",{defaultMessage:"Replicas"}),documents:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.summary.headers.documentsHeader",{defaultMessage:"Docs Count"}),documents_deleted:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.summary.headers.deletedDocumentsHeader",{defaultMessage:"Docs Deleted"}),size:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.summary.headers.storageSizeHeader",{defaultMessage:"Storage Size"}),primary_size:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.summary.headers.primaryStorageSizeHeader",{defaultMessage:"Primary Storage Size"}),aliases:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.summary.headers.aliases",{defaultMessage:"Aliases"})});class summary_Summary extends external_kbnSharedDeps_React_default.a.PureComponent{getAdditionalContent(extensionsService,getUrlForApp){const{index:index}=this.props;const extensions=extensionsService.summaries;return extensions.map((summaryExtension,i)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:`summaryExtension-${i}`},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],null),summaryExtension(index,getUrlForApp)))}buildRows(){const{index:index}=this.props;const headers=getHeaders();const rows={left:[],right:[]};Object.keys(headers).forEach((fieldName,arrayIndex)=>{const value=index[fieldName];let content=value;if(fieldName==="health"){content=external_kbnSharedDeps_React_default.a.createElement(DataHealth,{health:value})}if(Array.isArray(content)){content=content.join(", ")}const cell=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],{key:fieldName},external_kbnSharedDeps_React_default.a.createElement("strong",null,headers[fieldName])),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],{key:fieldName+"_desc"},content)];if(arrayIndex%2===0){rows.left.push(cell)}else{rows.right.push(cell)}});return rows}render(){return external_kbnSharedDeps_React_default.a.createElement(AppContextConsumer,null,({services:services,core:core})=>{const{left:left,right:right}=this.buildRows();const additionalContent=this.getAdditionalContent(services.extensionsService,core.getUrlForApp);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.summary.summaryTitle",defaultMessage:"General"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{type:"column"},left)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{type:"column"},right))),additionalContent)})}}const summary_container_mapStateToProps=state=>{const indexName=getDetailPanelIndexName(state);return{indexName:indexName,index:getIndexByIndexName(state,indexName)}};const summary_container_Summary=Object(react_redux_lib["connect"])(summary_container_mapStateToProps)(summary_Summary);const readOnlySettings=["index.creation_date","index.number_of_shards","index.provided_name","index.uuid","index.version.created","index.compound_format","index.data_path","index.format","index.number_of_routing_shards","index.sort.field","index.sort.missing","index.sort.mode","index.sort.order","index.routing_partition_size","index.store.type"];const settingsToDisplay=["index.number_of_replicas","index.blocks.read_only_allow_delete","index.codec","index.priority","index.query.default_field","index.refresh_interval","index.write.wait_for_active_shards"];var brace=__webpack_require__(176);var brace_default=__webpack_require__.n(brace);var language_tools=__webpack_require__(177);const splitTokens=line=>line.split(/\s+/);const wordCompleter=words=>({identifierRegexps:[/[a-zA-Z_0-9\.\$\-\u00A2-\uFFFF]/],getCompletions:(editor,session,pos,prefix,callback)=>{const document=session.getDocument();const currentLine=document.getLine(pos.row);const previousLine=document.getLine(pos.row-1);const currentTokens=splitTokens(currentLine.slice(0,pos.column));const fullLineTokens=splitTokens(currentLine);const isInArray=previousLine&&splitTokens(previousLine).slice(-1)[0]==="[";const[,secondToken=null]=currentTokens;const[,secondFullToken=null]=fullLineTokens;if(isInArray||currentTokens.length>2){return callback(null,[])}const startQuote=secondToken==='"'?"":'"';const endQuote=secondFullToken==='""'?"":'"';callback(null,words.map(word=>({caption:` ${word}`,value:`${startQuote}${word}${endQuote}`})))}});const createAceEditor=(div,value,readOnly=true,autocompleteArray)=>{const editor=brace_default.a.edit(div);editor.$blockScrolling=Infinity;editor.setValue(value,-1);const session=editor.getSession();session.setUseWrapMode(true);session.setMode("ace/mode/json");if(autocompleteArray){const languageTools=brace_default.a.acequire("ace/ext/language_tools");const autocompleter=wordCompleter(autocompleteArray);languageTools.setCompleters([autocompleter])}const options={readOnly:readOnly,highlightActiveLine:false,highlightGutterLine:false,minLines:20,maxLines:30};const autocompleteOptions=readOnly?{}:{enableBasicAutocompletion:true,enableLiveAutocompletion:true};editor.setOptions({...options,...autocompleteOptions});editor.setBehavioursEnabled(!readOnly);return editor};const flattenObject=(nestedObj,flattenArrays)=>{const stack=[];const flatObj={};const dot=".";(function flattenObj(obj){external_kbnSharedDeps_Lodash_default.a.keys(obj).forEach((function(key){stack.push(key);if(!flattenArrays&&Array.isArray(obj[key]))flatObj[stack.join(dot)]=obj[key];else if(external_kbnSharedDeps_Lodash_default.a.isObject(obj[key]))flattenObj(obj[key]);else flatObj[stack.join(dot)]=obj[key];stack.pop()}))})(nestedObj);return flatObj};function edit_settings_json_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class edit_settings_json_EditSettingsJson extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(){super();edit_settings_json_defineProperty(this,"commitSettings",()=>{const{updateIndexSettings:updateIndexSettings,indexName:indexName}=this.props;const json=this.editor.getValue();const settings=JSON.parse(json);Object.keys(this.originalSettings).forEach(key=>{if(external_kbnSharedDeps_Lodash_default.a.isEqual(this.originalSettings[key],settings[key])){delete settings[key]}});updateIndexSettings({indexName:indexName,settings:settings})});this.state={valid:true}}transformSettingsForApi(data,isOpen){const{defaults:defaults,settings:settings}=data;const flattenedSettings=flattenObject(settings);const flattenedDefaults=flattenObject(defaults);const filteredDefaults=external_kbnSharedDeps_Lodash_default.a.pick(flattenedDefaults,settingsToDisplay);const newSettings={...filteredDefaults,...flattenedSettings};this.settingsKeys=Object.keys(newSettings);readOnlySettings.forEach(e=>delete newSettings[e]);if(isOpen){delete newSettings["index.codec"]}return newSettings}UNSAFE_componentWillMount(){const{indexName:indexName}=this.props;this.props.loadIndexData({dataType:TAB_SETTINGS,indexName:indexName})}componentDidUpdate(){const{data:data,indexStatus:indexStatus}=this.props;if(data&&!this.editor){const isOpen=indexStatus==="open";const newSettings=this.transformSettingsForApi(data,isOpen);this.originalSettings=newSettings;const prettyJson=JSON.stringify(newSettings,null,2);const settingsKeys=Object.keys(newSettings);const editor=this.editor=createAceEditor(this.aceDiv,prettyJson,false,settingsKeys);const session=editor.getSession();session.on("changeAnnotation",()=>{const isEmptyString=session.getValue()==="";this.setState({valid:!isEmptyString&&session.getAnnotations().length===0})})}}componentWillUnmount(){this.editor&&this.editor.destroy()}errorMessage(){const{error:error}=this.props;if(!error){return null}return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{color:"danger",type:"alert"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"danger"},error),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null))}render(){const{data:data}=this.props;if(!data){return null}return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.editSettingsJSON.saveJSONDescription",defaultMessage:"Edit, then save your JSON"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",fill:true,"data-test-subj":"updateEditIndexSettingsButton",onClick:this.commitSettings,disabled:!this.state.valid},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.editSettingsJSON.saveJSONButtonLabel",defaultMessage:"Save"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getSettingsDocumentationLink(),target:"_blank",rel:"noopener noreferrer"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.editSettingsJSON.settingsReferenceLinkText",defaultMessage:"Settings reference"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"indexJsonEditor",ref:aceDiv=>{this.aceDiv=aceDiv}}),this.errorMessage(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null))}}const edit_settings_json_container_mapStateToProps=state=>{const indexName=getDetailPanelIndexName(state);return{error:getDetailPanelError(state),data:getDetailPanelData(state),indexName:indexName,indexStatus:getIndexStatusByIndexName(state,indexName)}};const edit_settings_json_container_mapDispatchToProps={loadIndexData:load_index_data_loadIndexData,closeDetailPanel:detail_panel_closeDetailPanel,updateIndexSettings:update_index_settings_updateIndexSettings};const edit_settings_json_container_EditSettingsJson=Object(react_redux_lib["connect"])(edit_settings_json_container_mapStateToProps,edit_settings_json_container_mapDispatchToProps)(edit_settings_json_EditSettingsJson);const tabToHumanizedMap={[TAB_SUMMARY]:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.detailPanel.tabSummaryLabel",defaultMessage:"Summary"}),[TAB_SETTINGS]:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.detailPanel.tabSettingsLabel",defaultMessage:"Settings"}),[TAB_MAPPING]:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.detailPanel.tabMappingLabel",defaultMessage:"Mappings"}),[TAB_STATS]:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.detailPanel.tabStatsLabel",defaultMessage:"Stats"}),[TAB_EDIT_SETTINGS]:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.detailPanel.tabEditSettingsLabel",defaultMessage:"Edit settings"})};const detail_panel_tabs=[TAB_SUMMARY,TAB_SETTINGS,TAB_MAPPING,TAB_STATS,TAB_EDIT_SETTINGS];const DetailPanel=({panelType:panelType,indexName:indexName,index:index,openDetailPanel:openDetailPanel,closeDetailPanel:closeDetailPanel})=>{const{extensionsService:extensionsService}=useServices();const renderTabs=()=>detail_panel_tabs.map((tab,i)=>{const isSelected=tab===panelType;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTab"],{onClick:()=>openDetailPanel({panelType:tab,indexName:indexName}),isSelected:isSelected,"data-test-subj":`detailPanelTab${isSelected?"Selected":""}`,disabled:tab===TAB_STATS&&index.status!==constants["h"],key:i},tabToHumanizedMap[tab])});if(!panelType){return null}let component=null;switch(panelType){case TAB_EDIT_SETTINGS:component=external_kbnSharedDeps_React_default.a.createElement(edit_settings_json_container_EditSettingsJson,null);break;case TAB_MAPPING:case TAB_SETTINGS:case TAB_STATS:component=external_kbnSharedDeps_React_default.a.createElement(show_json_container_ShowJson,null);break;default:component=external_kbnSharedDeps_React_default.a.createElement(summary_container_Summary,null)}const content=index?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,component),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{key:"menu",render:()=>external_kbnSharedDeps_React_default.a.createElement(index_actions_context_menu_container_IndexActionsContextMenu,{iconSide:"left",indexNames:[indexName],anchorPosition:"upRight",detailPanel:true,iconType:"arrowUp",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.detailPanel.manageContextMenuLabel",defaultMessage:"Manage"})})}))))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.detailPanel.missingIndexTitle",defaultMessage:"Missing index"}),color:"danger",iconType:"cross"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.detailPanel.missingIndexMessage",defaultMessage:"This index does not exist. It might have been deleted by a running job or another system."})));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{"data-test-subj":"indexDetailFlyout",onClose:closeDetailPanel,"aria-labelledby":"indexDetailsFlyoutTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{id:"indexDetailsFlyoutTitle"},external_kbnSharedDeps_React_default.a.createElement("h2",null,indexName,renderBadges(index,undefined,extensionsService))),index?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTabs"],null,renderTabs()):null),content)};const detail_panel_container_mapStateToProps=state=>{const indexName=getDetailPanelIndexName(state);return{panelType:getDetailPanelType(state),indexName:indexName,index:getIndexByIndexName(state,indexName)}};const detail_panel_container_mapDispatchToProps=dispatch=>({clearCacheIndex:indexName=>{dispatch(clear_cache_indices_clearCacheIndices({indexNames:[indexName]}))},closeIndex:indexName=>{dispatch(close_indices_closeIndices({indexNames:[indexName]}))},flushIndex:indexName=>{dispatch(flush_indices_flushIndices({indexNames:[indexName]}))},openIndex:indexName=>{dispatch(open_indices_openIndices({indexNames:[indexName]}))},refreshIndex:indexName=>{dispatch(refresh_indices_refreshIndices({indexNames:[indexName]}))},forcemergeIndex:indexName=>{dispatch(forcemerge_indices_forcemergeIndices({indexNames:[indexName]}))},deleteIndex:indexName=>{dispatch(delete_indices_deleteIndices({indexNames:[indexName]}))},closeDetailPanel:()=>dispatch(detail_panel_closeDetailPanel()),openDetailPanel:(indexName,panelType)=>dispatch(detail_panel_openDetailPanel(indexName,panelType))});const detail_panel_container_DetailPanel=Object(react_redux_lib["connect"])(detail_panel_container_mapStateToProps,detail_panel_container_mapDispatchToProps)(DetailPanel);function index_table_extends(){index_table_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return index_table_extends.apply(this,arguments)}function index_table_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const HEADERS={name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexTable.headers.nameHeader",{defaultMessage:"Name"}),health:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexTable.headers.healthHeader",{defaultMessage:"Health"}),status:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexTable.headers.statusHeader",{defaultMessage:"Status"}),primary:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexTable.headers.primaryHeader",{defaultMessage:"Primaries"}),replica:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexTable.headers.replicaHeader",{defaultMessage:"Replicas"}),documents:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexTable.headers.documentsHeader",{defaultMessage:"Docs count"}),size:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexTable.headers.storageSizeHeader",{defaultMessage:"Storage size"}),data_stream:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexTable.headers.dataStreamHeader",{defaultMessage:"Data stream"})};class index_table_IndexTable extends external_kbnSharedDeps_React_["Component"]{static getDerivedStateFromProps(props,state){const{selectedIndicesMap:selectedIndicesMap}=state;const indexNames=props.indices.map(index=>index.name);const selectedIndexNames=Object.keys(selectedIndicesMap);const missingIndexNames=selectedIndexNames.filter(selectedIndexName=>!indexNames.includes(selectedIndexName));if(missingIndexNames.length){const newMap={...selectedIndicesMap};missingIndexNames.forEach(missingIndexName=>delete newMap[missingIndexName]);return{selectedIndicesMap:newMap}}return null}constructor(props){super(props);index_table_defineProperty(this,"onSort",column=>{const{sortField:sortField,isSortAscending:isSortAscending,sortChanged:sortChanged}=this.props;const newIsSortAscending=sortField===column?!isSortAscending:true;sortChanged(column,newIsSortAscending)});index_table_defineProperty(this,"onFilterChanged",({query:query,error:error})=>{if(error){this.setState({filterError:error})}else{this.props.filterChanged(query);this.setState({filterError:null})}});index_table_defineProperty(this,"getFilters",extensionsService=>{const{allIndices:allIndices}=this.props;return extensionsService.filters.reduce((accum,filterExtension)=>{const filtersToAdd=filterExtension(allIndices);return[...accum,...filtersToAdd]},[])});index_table_defineProperty(this,"toggleAll",()=>{const allSelected=this.areAllItemsSelected();if(allSelected){return this.setState({selectedIndicesMap:{}})}const{indices:indices}=this.props;const selectedIndicesMap={};indices.forEach(({name:name})=>{selectedIndicesMap[name]=true});this.setState({selectedIndicesMap:selectedIndicesMap})});index_table_defineProperty(this,"toggleItem",name=>{this.setState(({selectedIndicesMap:selectedIndicesMap})=>{const newMap={...selectedIndicesMap};if(newMap[name]){delete newMap[name]}else{newMap[name]=true}return{selectedIndicesMap:newMap}})});index_table_defineProperty(this,"isItemSelected",name=>!!this.state.selectedIndicesMap[name]);index_table_defineProperty(this,"areAllItemsSelected",()=>{const{indices:indices}=this.props;const indexOfUnselectedItem=indices.findIndex(index=>!this.isItemSelected(index.name));return indexOfUnselectedItem===-1});index_table_defineProperty(this,"onItemSelectionChanged",selectedIndices=>{this.setState({selectedIndices:selectedIndices})});this.state={selectedIndicesMap:{}}}componentDidMount(){this.props.loadIndices();this.interval=setInterval(()=>this.props.reloadIndices(this.props.indices.map(i=>i.name),{asSystemRequest:true}),REFRESH_RATE_INDEX_LIST);const{location:location,filterChanged:filterChanged}=this.props;const{filter:filter}=query_string_default.a.parse(location&&location.search||"");if(filter){const decodedFilter=Object(public_["attemptToURIDecode"])(filter);try{const filter=external_kbnSharedDeps_ElasticEui_["EuiSearchBar"].Query.parse(decodedFilter);filterChanged(filter)}catch(e){this.setState({filterError:e})}}}componentWillUnmount(){this.props.filterChanged("");clearInterval(this.interval)}readURLParams(){const{location:location}=this.props;const{includeHiddenIndices:includeHiddenIndices}=query_string_default.a.parse(location&&location.search||"");return{includeHiddenIndices:includeHiddenIndices==="true"}}setIncludeHiddenParam(hidden){const{pathname:pathname,search:search}=this.props.location;const params=query_string_default.a.parse(search);if(hidden){params.includeHiddenIndices="true"}else{delete params.includeHiddenIndices}this.props.history.push(pathname+"?"+query_string_default.a.stringify(params))}renderFilterError(){const{filterError:filterError}=this.state;if(!filterError){return}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{iconType:"faceSad",color:"danger",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexTable.invalidSearchErrorMessage",{defaultMessage:"Invalid search: {errorMessage}",values:{errorMessage:filterError.message}})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null))}buildHeader(){const{sortField:sortField,isSortAscending:isSortAscending}=this.props;return Object.entries(HEADERS).map(([fieldName,label])=>{const isSorted=sortField===fieldName;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableHeaderCell"],{key:fieldName,onSort:()=>this.onSort(fieldName),isSorted:isSorted,isSortAscending:isSortAscending,className:"indTable__header--"+fieldName,"data-test-subj":`indexTableHeaderCell-${fieldName}`},label)})}buildRowCell(fieldName,value,index,appServices){const{openDetailPanel:openDetailPanel,filterChanged:filterChanged,history:history}=this.props;if(fieldName==="health"){return external_kbnSharedDeps_React_default.a.createElement(DataHealth,{health:value})}else if(fieldName==="name"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{"data-test-subj":"indexTableIndexNameLink",onClick:()=>{appServices.uiMetricService.trackMetric(METRIC_TYPE.CLICK,constants["L"]);openDetailPanel(value)}},value),renderBadges(index,filterChanged,appServices.extensionsService))}else if(fieldName==="data_stream"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],index_table_extends({"data-test-subj":"dataStreamLink"},Object(kibanaReact_public_["reactRouterNavigate"])(history,{pathname:Object(routing["a"])(value),search:"?isDeepLink=true"})),value)}return value}buildRowCells(index,appServices){return Object.keys(HEADERS).map(fieldName=>{const{name:name}=index;const value=index[fieldName];if(fieldName==="name"){return external_kbnSharedDeps_React_default.a.createElement("th",{key:`${fieldName}-${name}`,className:"euiTableRowCell",scope:"row","data-test-subj":`indexTableCell-${fieldName}`},external_kbnSharedDeps_React_default.a.createElement("div",{className:`euiTableCellContent indTable__cell--${fieldName}`},external_kbnSharedDeps_React_default.a.createElement("span",{className:"eui-textLeft"},this.buildRowCell(fieldName,value,index,appServices))))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableRowCell"],{key:`${fieldName}-${name}`,truncateText:false,"data-test-subj":`indexTableCell-${fieldName}`,className:"indTable__cell--"+fieldName,header:fieldName},this.buildRowCell(fieldName,value,index,appServices))})}renderError(){const{indicesError:indicesError}=this.props;const data=indicesError.body?indicesError.body:indicesError;const{error:errorString,cause:cause,message:message}=data;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexTable.serverErrorTitle",defaultMessage:"Error loading indices"}),color:"danger",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement("div",null,message||errorString),cause&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement("ul",null,cause.map((message,i)=>external_kbnSharedDeps_React_default.a.createElement("li",{key:i},message))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xl"}))}renderBanners(extensionsService){const{allIndices:allIndices=[],filterChanged:filterChanged}=this.props;return extensionsService.banners.map((bannerExtension,i)=>{const bannerData=bannerExtension(allIndices);if(!bannerData){return null}const{type:type,title:title,message:message,filter:filter,filterLabel:filterLabel}=bannerData;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:`bannerExtension${i}`},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:type,size:"m",title:title},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,message,filter?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:()=>filterChanged(filter)},filterLabel):null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))})}buildRows(appServices){const{indices:indices=[],detailPanelIndexName:detailPanelIndexName}=this.props;return indices.map(index=>{const{name:name}=index;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableRow"],{"data-test-subj":"indexTableRow",isSelected:this.isItemSelected(name)||name===detailPanelIndexName,isSelectable:true,key:`${name}-row`},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableRowCellCheckbox"],{key:`checkbox-${name}`},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckbox"],{type:"inList",id:`checkboxSelectIndex-${name}`,checked:this.isItemSelected(name),onChange:()=>{this.toggleItem(name)},"data-test-subj":"indexTableRowCheckbox","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexTable.selectIndexAriaLabel",{defaultMessage:"Select this row"})})),this.buildRowCells(index,appServices))})}renderPager(){const{pager:pager,pageChanged:pageChanged,pageSizeChanged:pageSizeChanged}=this.props;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTablePagination"],{activePage:pager.getCurrentPageIndex(),itemsPerPage:pager.itemsPerPage,itemsPerPageOptions:[10,50,100],pageCount:pager.getTotalPages(),onChangeItemsPerPage:pageSizeChanged,onChangePage:pageChanged})}renderToggleControl({name:name,label:label}){const{toggleNameToVisibleMap:toggleNameToVisibleMap,toggleChanged:toggleChanged}=this.props;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{key:name,grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{id:`checkboxToggles-${name}`,"data-test-subj":`checkboxToggles-${name}`,checked:toggleNameToVisibleMap[name],onChange:event=>toggleChanged(name,event.target.checked),label:label}))}render(){const{filter:filter,indices:indices,loadIndices:loadIndices,indicesLoading:indicesLoading,indicesError:indicesError,allIndices:allIndices,pager:pager}=this.props;const{includeHiddenIndices:includeHiddenIndices}=this.readURLParams();let emptyState;if(indicesLoading){emptyState=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceAround"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"xl"})))}if(!indicesLoading&&!indicesError){emptyState=external_kbnSharedDeps_React_default.a.createElement(NoMatch,null)}const{selectedIndicesMap:selectedIndicesMap}=this.state;const atLeastOneItemSelected=Object.keys(selectedIndicesMap).length>0;if(indicesError&&indicesError.status===403){return external_kbnSharedDeps_React_default.a.createElement(PageErrorForbidden,null)}return external_kbnSharedDeps_React_default.a.createElement(AppContextConsumer,null,({services:services})=>{const{extensionsService:extensionsService}=services;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.idxMgmtDescription",defaultMessage:"Update your Elasticsearch indices individually or in bulk. {learnMoreLink}",values:{learnMoreLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getIdxMgmtDocumentationLink(),target:"_blank",external:true},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexTableDescription.learnMoreLinkText",{defaultMessage:"Learn more."}))}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},indicesLoading&&allIndices.length===0||indicesError?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,extensionsService.toggles.map(toggle=>this.renderToggleControl(toggle)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{id:"checkboxShowHiddenIndices","data-test-subj":"indexTableIncludeHiddenIndicesToggle",checked:includeHiddenIndices,onChange:event=>this.setIncludeHiddenParam(event.target.checked),label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexTable.hiddenIndicesSwitchLabel",defaultMessage:"Include hidden indices"})}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),this.renderBanners(extensionsService),indicesError&&this.renderError(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"l",alignItems:"center"},atLeastOneItemSelected?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{key:"menu",render:()=>external_kbnSharedDeps_React_default.a.createElement(index_actions_context_menu_container_IndexActionsContextMenu,{indexNames:Object.keys(selectedIndicesMap),resetSelection:()=>{this.setState({selectedIndicesMap:{}})}})})):null,indicesLoading&&allIndices.length===0||indicesError?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSearchBar"],{filters:this.getFilters(extensionsService).length>0?this.getFilters(extensionsService):null,defaultQuery:filter,query:filter,box:{incremental:true,placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexTable.systemIndicesSearchInputPlaceholder",{defaultMessage:"Search"})},"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexTable.systemIndicesSearchIndicesAriaLabel",{defaultMessage:"Search indices"}),"data-test-subj":"indexTableFilterInput",onChange:this.onFilterChanged})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{isLoading:indicesLoading,color:"secondary",onClick:()=>{loadIndices()},iconType:"refresh","data-test-subj":"reloadIndicesButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexTable.reloadIndicesButton",defaultMessage:"Reload indices"}))))),this.renderFilterError(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),indices.length>0?external_kbnSharedDeps_React_default.a.createElement("div",{style:{maxWidth:"100%",overflow:"auto"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTable"],{className:"indTable","data-test-subj":"indexTable"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiScreenReaderOnly"],null,external_kbnSharedDeps_React_default.a.createElement("caption",{role:"status","aria-relevant":"text","aria-live":"polite"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexTable.captionText",defaultMessage:"Below is the indices table containing {count, plural, one {# row} other {# rows}} out of {total}.",values:{count:indices.length,total:pager.totalItems}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableHeaderCellCheckbox"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckbox"],{id:"selectAllIndexes",checked:this.areAllItemsSelected(),onChange:this.toggleAll,type:"inList","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexTable.selectAllIndicesAriaLabel",{defaultMessage:"Select all rows"})})),this.buildHeader()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableBody"],null,this.buildRows(services)))):emptyState,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),indices.length>0?this.renderPager():null)})}}const index_table_container_mapStateToProps=(state,props)=>({allIndices:getIndicesAsArray(state),isDetailPanelOpen:isDetailPanelOpen(state),detailPanelIndexName:getDetailPanelIndexName(state),indices:getPageOfIndices(state,props),pager:getPager(state,props),filter:getFilter(state),sortField:getSortField(state),isSortAscending:selectors_isSortAscending(state),indicesLoading:selectors_indicesLoading(state),indicesError:selectors_indicesError(state),toggleNameToVisibleMap:getTableState(state).toggleNameToVisibleMap});const index_table_container_mapDispatchToProps=dispatch=>({filterChanged:filter=>{dispatch(table_state_filterChanged({filter:filter}))},pageChanged:pageNumber=>{dispatch(table_state_pageChanged({pageNumber:pageNumber}))},pageSizeChanged:pageSize=>{dispatch(table_state_pageSizeChanged({pageSize:pageSize}))},sortChanged:(sortField,isSortAscending)=>{dispatch(sortChanged({sortField:sortField,isSortAscending:isSortAscending}))},toggleChanged:(toggleName,toggleValue)=>{dispatch(table_state_toggleChanged({toggleName:toggleName,toggleValue:toggleValue}))},openDetailPanel:indexName=>{dispatch(detail_panel_openDetailPanel({indexName:indexName}))},closeDetailPanel:()=>{dispatch(detail_panel_closeDetailPanel())},loadIndices:()=>{dispatch(load_indices_loadIndices())},reloadIndices:(indexNames,options)=>{dispatch(reload_indices_reloadIndices(indexNames,options))}});const index_table_container_IndexTable=Object(external_kbnSharedDeps_ReactRouterDom_["withRouter"])(Object(react_redux_lib["connect"])(index_table_container_mapStateToProps,index_table_container_mapDispatchToProps)(index_table_IndexTable));const IndexList=({history:history})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"im-snapshotTestSubject","data-test-subj":"indicesList"},external_kbnSharedDeps_React_default.a.createElement(index_table_container_IndexTable,{history:history}),external_kbnSharedDeps_React_default.a.createElement(detail_panel_container_DetailPanel,null));const getIsLegacyFromQueryParams=location=>{const{legacy:legacy}=Object(query_string["parse"])(location.search.substring(1));if(!Boolean(legacy)||typeof legacy!=="string"){return false}return legacy==="true"};const template_type_indicator_i18nTexts={managed:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateBadgeType.managed",{defaultMessage:"Managed"}),cloudManaged:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateBadgeType.cloudManaged",{defaultMessage:"Cloud-managed"}),system:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateBadgeType.system",{defaultMessage:"System"})};const TemplateTypeIndicator=({templateType:templateType})=>{if(templateType==="default"){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"hollow","data-test-subj":"templateTypeBadge"},template_type_indicator_i18nTexts[templateType])};function template_table_extends(){template_table_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return template_table_extends.apply(this,arguments)}const TemplateTable=({templates:templates,reload:reload,editTemplate:editTemplate,cloneTemplate:cloneTemplate,history:history})=>{const{uiMetricService:uiMetricService}=useServices();const[selection,setSelection]=Object(external_kbnSharedDeps_React_["useState"])([]);const[templatesToDelete,setTemplatesToDelete]=Object(external_kbnSharedDeps_React_["useState"])([]);const columns=[{field:"name",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.table.nameColumnTitle",{defaultMessage:"Name"}),truncateText:true,sortable:true,render:(name,item)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],template_table_extends({},Object(kibanaReact_public_["reactRouterNavigate"])(history,Object(routing["d"])(name),()=>uiMetricService.trackMetric(METRIC_TYPE.CLICK,constants["W"])),{"data-test-subj":"templateDetailsLink"}),name),"",external_kbnSharedDeps_React_default.a.createElement(TemplateTypeIndicator,{templateType:item._kbnMeta.type}))},{field:"indexPatterns",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.table.indexPatternsColumnTitle",{defaultMessage:"Index patterns"}),truncateText:true,sortable:true,render:indexPatterns=>external_kbnSharedDeps_React_default.a.createElement("strong",null,indexPatterns.join(", "))},{field:"composedOf",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.table.componentsColumnTitle",{defaultMessage:"Components"}),truncateText:true,sortable:true,render:(composedOf=[])=>external_kbnSharedDeps_React_default.a.createElement("span",null,composedOf.join(", "))},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.table.dataStreamColumnTitle",{defaultMessage:"Data stream"}),truncateText:true,render:template=>template._kbnMeta.hasDatastream?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"check"}):null},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.table.contentColumnTitle",{defaultMessage:"Content"}),width:"120px",render:item=>external_kbnSharedDeps_React_default.a.createElement(TemplateContentIndicator,{mappings:item.hasMappings,settings:item.hasSettings,aliases:item.hasAliases,contentWhenEmpty:external_kbnSharedDeps_React_default.a.createElement("em",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.table.noneDescriptionText",{defaultMessage:"None"}))})},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.table.actionColumnTitle",{defaultMessage:"Actions"}),width:"120px",actions:[{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.table.actionEditText",{defaultMessage:"Edit"}),isPrimary:true,description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.table.actionEditDecription",{defaultMessage:"Edit this template"}),icon:"pencil",type:"icon",onClick:({name:name})=>{editTemplate(name)},enabled:({_kbnMeta:{type:type}})=>type!=="cloudManaged"},{type:"icon",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.table.actionCloneTitle",{defaultMessage:"Clone"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.table.actionCloneDescription",{defaultMessage:"Clone this template"}),icon:"copy",onClick:({name:name})=>{cloneTemplate(name)}},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.table.actionDeleteText",{defaultMessage:"Delete"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.table.actionDeleteDecription",{defaultMessage:"Delete this template"}),icon:"trash",color:"danger",type:"icon",onClick:({name:name,_kbnMeta:{isLegacy:isLegacy}})=>{setTemplatesToDelete([{name:name,isLegacy:isLegacy}])},isPrimary:true,enabled:({_kbnMeta:{type:type}})=>type!=="cloudManaged"}]}];const pagination={initialPageSize:20,pageSizeOptions:[10,20,50]};const sorting={sort:{field:"name",direction:"asc"}};const selectionConfig={onSelectionChange:setSelection,selectable:({_kbnMeta:{type:type}})=>type!=="cloudManaged",selectableMessage:selectable=>{if(!selectable){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.table.deleteCloudManagedTemplateTooltip",{defaultMessage:"You cannot delete a cloud-managed template."})}return""}};const searchConfig={box:{incremental:true},toolsLeft:selection.length>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"deleteTemplatesButton",onClick:()=>setTemplatesToDelete(selection.map(({name:name,_kbnMeta:{isLegacy:isLegacy}})=>({name:name,isLegacy:isLegacy}))),color:"danger"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateList.table.deleteTemplatesButtonLabel",defaultMessage:"Delete {count, plural, one {template} other {templates} }",values:{count:selection.length}})):undefined,toolsRight:[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],template_table_extends({iconType:"plusInCircle","data-test-subj":"createTemplateButton",key:"createTemplateButton",fill:true},Object(kibanaReact_public_["reactRouterNavigate"])(history,"/create_template")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateList.table.createTemplatesButtonLabel",defaultMessage:"Create template"}))]};const goToList=()=>history.push("templates");return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,templatesToDelete&&templatesToDelete.length>0?external_kbnSharedDeps_React_default.a.createElement(TemplateDeleteModal,{callback:data=>{if(data&&data.hasDeletedTemplates){reload();goToList()}setTemplatesToDelete([])},templatesToDelete:templatesToDelete}):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{items:templates||[],itemId:"name",columns:columns,search:searchConfig,sorting:sorting,isSelectable:true,selection:selectionConfig,pagination:pagination,rowProps:()=>({"data-test-subj":"row"}),cellProps:()=>({"data-test-subj":"cell"}),"data-test-subj":"templateTable",message:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateList.table.noIndexTemplatesMessage",defaultMessage:"No index templates found"})}))};const tab_summary_i18nTexts={yes:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateDetails.summaryTab.yesDescriptionText",{defaultMessage:"Yes"}),no:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateDetails.summaryTab.noDescriptionText",{defaultMessage:"No"}),none:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateDetails.summaryTab.noneDescriptionText",{defaultMessage:"None"})};const tab_summary_TabSummary=({templateDetails:templateDetails})=>{const{version:version,priority:priority,composedOf:composedOf,order:order,indexPatterns:indexPatterns=[],ilmPolicy:ilmPolicy,_meta:_meta,_kbnMeta:{isLegacy:isLegacy,hasDatastream:hasDatastream}}=templateDetails;const numIndexPatterns=indexPatterns.length;const ilmPolicyLink=useUrlGenerator({urlGeneratorId:ILM_URL_GENERATOR_ID,urlGeneratorState:{page:ILM_PAGES_POLICY_EDIT,policyName:ilmPolicy===null||ilmPolicy===void 0?void 0:ilmPolicy.name}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{"data-test-subj":"summaryTab"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateDetails.summaryTab.indexPatternsDescriptionListTitle",defaultMessage:"Index {numIndexPatterns, plural, one {pattern} other {patterns}}",values:{numIndexPatterns:numIndexPatterns}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,numIndexPatterns>1?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("ul",null,indexPatterns.map((indexName,i)=>external_kbnSharedDeps_React_default.a.createElement("li",{key:`${indexName}-${i}`},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("span",null,indexName)))))):indexPatterns.toString()),isLegacy!==true?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateDetails.summaryTab.priorityDescriptionListTitle",defaultMessage:"Priority"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,priority||priority===0?priority:tab_summary_i18nTexts.none)):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateDetails.summaryTab.orderDescriptionListTitle",defaultMessage:"Order"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,order||order===0?order:tab_summary_i18nTexts.none)),isLegacy!==true&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],{"data-test-subj":"componentsTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateDetails.summaryTab.componentsDescriptionListTitle",defaultMessage:"Component templates"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,composedOf&&composedOf.length>0?external_kbnSharedDeps_React_default.a.createElement("ul",null,composedOf.map(component=>external_kbnSharedDeps_React_default.a.createElement("li",{key:component},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("span",null,component))))):tab_summary_i18nTexts.none)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{textStyle:"reverse"},isLegacy&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateDetails.summaryTab.ilmPolicyDescriptionListTitle",defaultMessage:"ILM policy"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,ilmPolicy!==null&&ilmPolicy!==void 0&&ilmPolicy.name&&ilmPolicyLink?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:ilmPolicyLink},ilmPolicy.name):(ilmPolicy===null||ilmPolicy===void 0?void 0:ilmPolicy.name)||tab_summary_i18nTexts.none)),isLegacy!==true&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateDetails.summaryTab.dataStreamDescriptionListTitle",defaultMessage:"Data stream"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,hasDatastream?tab_summary_i18nTexts.yes:tab_summary_i18nTexts.no)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateDetails.summaryTab.versionDescriptionListTitle",defaultMessage:"Version"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,version||version===0?version:tab_summary_i18nTexts.none)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{textStyle:"reverse"},isLegacy!==true&&_meta&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],{"data-test-subj":"metaTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateDetails.summaryTab.metaDescriptionListTitle",defaultMessage:"Metadata"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeBlock"],{lang:"json"},JSON.stringify(_meta,null,2))))))};const TabPreview=({templateDetails:templateDetails})=>external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"previewTabContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateDetails.previewTab.descriptionText",defaultMessage:"This is the final template that will be applied to matching indices."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(SimulateTemplate,{template:templateDetails}));const SUMMARY_TAB_ID="summary";const MAPPINGS_TAB_ID="mappings";const ALIASES_TAB_ID="aliases";const SETTINGS_TAB_ID="settings";const PREVIEW_TAB_ID="preview";const template_details_content_TABS=[{id:SUMMARY_TAB_ID,name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateDetails.summaryTabTitle",{defaultMessage:"Summary"})},{id:SETTINGS_TAB_ID,name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateDetails.settingsTabTitle",{defaultMessage:"Settings"})},{id:MAPPINGS_TAB_ID,name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateDetails.mappingsTabTitle",{defaultMessage:"Mappings"})},{id:ALIASES_TAB_ID,name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateDetails.aliasesTabTitle",{defaultMessage:"Aliases"})},{id:PREVIEW_TAB_ID,name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateDetails.previewTabTitle",{defaultMessage:"Preview"})}];const tabToUiMetricMap={[SUMMARY_TAB_ID]:constants["U"],[SETTINGS_TAB_ID]:constants["T"],[MAPPINGS_TAB_ID]:constants["R"],[ALIASES_TAB_ID]:constants["Q"],[PREVIEW_TAB_ID]:constants["S"]};const TemplateDetailsContent=({template:{name:templateName,isLegacy:isLegacy},onClose:onClose,editTemplate:editTemplate,cloneTemplate:cloneTemplate,reload:reload})=>{const{uiMetricService:uiMetricService}=useServices();const{error:error,data:templateDetails,isLoading:isLoading}=useLoadIndexTemplate(templateName,isLegacy);const isCloudManaged=(templateDetails===null||templateDetails===void 0?void 0:templateDetails._kbnMeta.type)==="cloudManaged";const[templateToDelete,setTemplateToDelete]=Object(external_kbnSharedDeps_React_["useState"])([]);const[activeTab,setActiveTab]=Object(external_kbnSharedDeps_React_["useState"])(SUMMARY_TAB_ID);const[isPopoverOpen,setIsPopOverOpen]=Object(external_kbnSharedDeps_React_["useState"])(false);const renderHeader=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",{id:"templateDetailsFlyoutTitle","data-test-subj":"title"},templateName,templateDetails&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,"",external_kbnSharedDeps_React_default.a.createElement(TemplateTypeIndicator,{templateType:templateDetails._kbnMeta.type})))));const renderBody=()=>{if(isLoading){return external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateDetails.loadingIndexTemplateDescription",defaultMessage:"Loading template"}))}if(error){return external_kbnSharedDeps_React_default.a.createElement(SectionError,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateDetails.loadingIndexTemplateErrorMessage",defaultMessage:"Error loading template"}),error:error,"data-test-subj":"sectionError"})}if(templateDetails){const{template:{settings:settings,mappings:mappings,aliases:aliases}={}}=templateDetails;const tabToComponentMap={[SUMMARY_TAB_ID]:external_kbnSharedDeps_React_default.a.createElement(tab_summary_TabSummary,{templateDetails:templateDetails}),[SETTINGS_TAB_ID]:external_kbnSharedDeps_React_default.a.createElement(TabSettings,{settings:settings}),[MAPPINGS_TAB_ID]:external_kbnSharedDeps_React_default.a.createElement(TabMappings,{mappings:mappings}),[ALIASES_TAB_ID]:external_kbnSharedDeps_React_default.a.createElement(TabAliases,{aliases:aliases}),[PREVIEW_TAB_ID]:external_kbnSharedDeps_React_default.a.createElement(TabPreview,{templateDetails:templateDetails})};const tabContent=tabToComponentMap[activeTab];const managedTemplateCallout=isCloudManaged&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateDetails.cloudManagedTemplateInfoTitle",defaultMessage:"Editing a cloud-managed template is not permitted."}),color:"primary",size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateDetails.cloudManagedTemplateInfoDescription",defaultMessage:"Cloud-managed templates are critical for internal operations."})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,managedTemplateCallout,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTabs"],null,template_details_content_TABS.filter(tab=>{if(isLegacy&&tab.id===PREVIEW_TAB_ID){return false}return true}).map(tab=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTab"],{onClick:()=>{uiMetricService.trackMetric(METRIC_TYPE.CLICK,tabToUiMetricMap[tab.id]);setActiveTab(tab.id)},isSelected:tab.id===activeTab,key:tab.id,"data-test-subj":"tab"},tab.name))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),tabContent)}};const renderFooter=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"cross",flush:"left",onClick:onClose,"data-test-subj":"closeDetailsButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateDetails.closeButtonLabel",defaultMessage:"Close"}))),templateDetails&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"manageTemplatePanel",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,"data-test-subj":"manageTemplateButton",iconType:"arrowDown",iconSide:"right",onClick:()=>setIsPopOverOpen(prev=>!prev)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateDetails.manageButtonLabel",defaultMessage:"Manage"})),isOpen:isPopoverOpen,closePopover:()=>setIsPopOverOpen(false),panelPaddingSize:"none",anchorPosition:"rightUp",repositionOnScroll:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:0,panels:[{id:0,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateDetails.manageContextMenuPanelTitle",{defaultMessage:"Template options"}),items:[{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateDetails.editButtonLabel",{defaultMessage:"Edit"}),icon:"pencil",onClick:()=>editTemplate(templateName,isLegacy),disabled:isCloudManaged},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateDetails.cloneButtonLabel",{defaultMessage:"Clone"}),icon:"copy",onClick:()=>cloneTemplate(templateName,isLegacy)},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateDetails.deleteButtonLabel",{defaultMessage:"Delete"}),icon:"trash",onClick:()=>setTemplateToDelete([{name:templateName,isLegacy:isLegacy}]),disabled:isCloudManaged}]}]})))));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,renderHeader(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],{"data-test-subj":"content"},renderBody()),renderFooter(),templateToDelete&&templateToDelete.length>0?external_kbnSharedDeps_React_default.a.createElement(TemplateDeleteModal,{callback:data=>{if(data&&data.hasDeletedTemplates){reload()}else{setTemplateToDelete([])}onClose()},templatesToDelete:templateToDelete}):null)};const TemplateDetails=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{onClose:props.onClose,"data-test-subj":"templateDetails","aria-labelledby":"templateDetailsFlyoutTitle"},external_kbnSharedDeps_React_default.a.createElement(TemplateDetailsContent,props));function template_table_template_table_extends(){template_table_template_table_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return template_table_template_table_extends.apply(this,arguments)}const LegacyTemplateTable=({templates:templates,reload:reload,editTemplate:editTemplate,cloneTemplate:cloneTemplate,history:history})=>{const{uiMetricService:uiMetricService}=useServices();const[selection,setSelection]=Object(external_kbnSharedDeps_React_["useState"])([]);const[templatesToDelete,setTemplatesToDelete]=Object(external_kbnSharedDeps_React_["useState"])([]);const columns=[{field:"name",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.legacyTable.nameColumnTitle",{defaultMessage:"Name"}),truncateText:true,sortable:true,render:(name,item)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],template_table_template_table_extends({},Object(kibanaReact_public_["reactRouterNavigate"])(history,Object(routing["d"])(name,Boolean(item._kbnMeta.isLegacy)),()=>uiMetricService.trackMetric(METRIC_TYPE.CLICK,constants["W"])),{"data-test-subj":"templateDetailsLink"}),name),"",external_kbnSharedDeps_React_default.a.createElement(TemplateTypeIndicator,{templateType:item._kbnMeta.type}))},{field:"indexPatterns",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.legacyTable.indexPatternsColumnTitle",{defaultMessage:"Index patterns"}),truncateText:true,sortable:true,render:indexPatterns=>external_kbnSharedDeps_React_default.a.createElement("strong",null,indexPatterns.join(", "))},{field:"ilmPolicy",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.legacyTable.ilmPolicyColumnTitle",{defaultMessage:"ILM policy"}),truncateText:true,sortable:true,render:ilmPolicy=>ilmPolicy&&ilmPolicy.name?external_kbnSharedDeps_React_default.a.createElement("span",{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.legacyTable.ilmPolicyColumnDescription",{defaultMessage:"'{policyName}' index lifecycle policy",values:{policyName:ilmPolicy.name}})},ilmPolicy.name):null},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.legacyTable.contentColumnTitle",{defaultMessage:"Content"}),width:"120px",render:item=>external_kbnSharedDeps_React_default.a.createElement(TemplateContentIndicator,{mappings:item.hasMappings,settings:item.hasSettings,aliases:item.hasAliases,contentWhenEmpty:external_kbnSharedDeps_React_default.a.createElement("em",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.table.noneDescriptionText",{defaultMessage:"None"}))})},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.legacyTable.actionColumnTitle",{defaultMessage:"Actions"}),width:"120px",actions:[{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.legacyTable.actionEditText",{defaultMessage:"Edit"}),isPrimary:true,description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.legacyTable.actionEditDecription",{defaultMessage:"Edit this template"}),icon:"pencil",type:"icon",onClick:({name:name})=>{editTemplate(name,true)},enabled:({_kbnMeta:{type:type}})=>type!=="cloudManaged"},{type:"icon",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.legacyTable.actionCloneTitle",{defaultMessage:"Clone"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.legacyTable.actionCloneDescription",{defaultMessage:"Clone this template"}),icon:"copy",onClick:({name:name})=>{cloneTemplate(name,true)}},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.legacyTable.actionDeleteText",{defaultMessage:"Delete"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.legacyTable.actionDeleteDecription",{defaultMessage:"Delete this template"}),icon:"trash",color:"danger",type:"icon",onClick:({name:name,_kbnMeta:{isLegacy:isLegacy}})=>{setTemplatesToDelete([{name:name,isLegacy:isLegacy}])},isPrimary:true,enabled:({_kbnMeta:{type:type}})=>type!=="cloudManaged"}]}];const pagination={initialPageSize:20,pageSizeOptions:[10,20,50]};const sorting={sort:{field:"name",direction:"asc"}};const selectionConfig={onSelectionChange:setSelection,selectable:({_kbnMeta:{type:type}})=>type!=="cloudManaged",selectableMessage:selectable=>{if(!selectable){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.templateList.legacyTable.deleteCloudManagedTemplateTooltip",{defaultMessage:"You cannot delete a cloud-managed template."})}return""}};const searchConfig={box:{incremental:true},toolsLeft:selection.length>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"deleteTemplatesButton",onClick:()=>setTemplatesToDelete(selection.map(({name:name,_kbnMeta:{isLegacy:isLegacy}})=>({name:name,isLegacy:isLegacy}))),color:"danger"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateList.legacyTable.deleteTemplatesButtonLabel",defaultMessage:"Delete {count, plural, one {template} other {templates} }",values:{count:selection.length}})):undefined,toolsRight:[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],template_table_template_table_extends({iconType:"plusInCircle","data-test-subj":"createLegacyTemplateButton",key:"createTemplateButton"},Object(kibanaReact_public_["reactRouterNavigate"])(history,{pathname:"/create_template",search:"legacy=true"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateList.legacyTable.createLegacyTemplatesButtonLabel",defaultMessage:"Create legacy template"}))]};const goToList=()=>history.push("templates");return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,templatesToDelete&&templatesToDelete.length>0?external_kbnSharedDeps_React_default.a.createElement(TemplateDeleteModal,{callback:data=>{if(data&&data.hasDeletedTemplates){reload();goToList()}setTemplatesToDelete([])},templatesToDelete:templatesToDelete}):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{items:templates||[],itemId:"name",columns:columns,search:searchConfig,sorting:sorting,isSelectable:true,selection:selectionConfig,pagination:pagination,rowProps:()=>({"data-test-subj":"row"}),cellProps:()=>({"data-test-subj":"cell"}),"data-test-subj":"legacyTemplateTable",message:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateList.legacyTable.noLegacyIndexTemplatesMessage",defaultMessage:"No legacy index templates found"})}))};function filterTemplates(templates,types){return templates.filter(template=>{if(template._kbnMeta.type==="default"){return true}return types.includes(template._kbnMeta.type)})}const TemplateList=({match:{params:{templateName:templateName}},location:location,history:history})=>{const{uiMetricService:uiMetricService}=useServices();const{error:error,isLoading:isLoading,data:allTemplates,resendRequest:reload}=useLoadIndexTemplates();const[filters,setFilters]=Object(external_kbnSharedDeps_React_["useState"])({managed:{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexTemplatesList.viewManagedTemplateLabel",{defaultMessage:"Managed templates"}),checked:"on"},cloudManaged:{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexTemplatesList.viewCloudManagedTemplateLabel",{defaultMessage:"Cloud-managed templates"}),checked:"off"},system:{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.indexTemplatesList.viewSystemTemplateLabel",{defaultMessage:"System templates"}),checked:"off"}});const filteredTemplates=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{if(!allTemplates){return{templates:[],legacyTemplates:[]}}const visibleTemplateTypes=Object.entries(filters).filter(([name,_filter])=>_filter.checked==="on").map(([name])=>name);return{templates:filterTemplates(allTemplates.templates,visibleTemplateTypes),legacyTemplates:filterTemplates(allTemplates.legacyTemplates,visibleTemplateTypes)}},[allTemplates,filters]);const selectedTemplate=Boolean(templateName)?{name:Object(public_["attemptToURIDecode"])(templateName),isLegacy:getIsLegacyFromQueryParams(location)}:null;const isTemplateDetailsVisible=selectedTemplate!==null;const hasTemplates=allTemplates&&(allTemplates.legacyTemplates.length>0||allTemplates.templates.length>0);const closeTemplateDetails=()=>{history.push(Object(routing["f"])())};const editTemplate=(name,isLegacy)=>{history.push(Object(routing["e"])(name,isLegacy))};const cloneTemplate=(name,isLegacy)=>{history.push(Object(routing["c"])(name,isLegacy))};const renderHeader=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.indexTemplatesDescription",defaultMessage:"Use index templates to automatically apply settings, mappings, and aliases to indices. {learnMoreLink}",values:{learnMoreLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationService.getTemplatesDocumentationLink(),target:"_blank",external:true},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.idxMgmt.home.indexTemplatesDescription.learnMoreLinkText",{defaultMessage:"Learn more."}))}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(filter_list_button_FilterListButton,{filters:filters,onChange:setFilters})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"secondary",iconType:"refresh",onClick:reload,"data-test-subj":"reloadButton",key:"reloadButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateList.table.reloadTemplatesButtonLabel",defaultMessage:"Reload"}))));const renderTemplatesTable=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(TemplateTable,{templates:filteredTemplates.templates,reload:reload,editTemplate:editTemplate,cloneTemplate:cloneTemplate,history:history}));const renderLegacyTemplatesTable=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xl"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.legacyIndexTemplatesTitle",defaultMessage:"Legacy index templates"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(LegacyTemplateTable,{templates:filteredTemplates.legacyTemplates,reload:reload,editTemplate:editTemplate,cloneTemplate:cloneTemplate,history:history}));const renderContent=()=>{if(isLoading){return external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexTemplatesList.loadingIndexTemplatesDescription",defaultMessage:"Loading templates"}))}else if(error){return external_kbnSharedDeps_React_default.a.createElement(SectionError,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexTemplatesList.loadingIndexTemplatesErrorMessage",defaultMessage:"Error loading templates"}),error:error})}else if(!hasTemplates){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"managementApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.indexTemplatesList.emptyPrompt.noIndexTemplatesTitle",defaultMessage:"You don't have any templates yet"})),"data-test-subj":"emptyPrompt"})}else{return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,renderHeader(),renderTemplatesTable(),renderLegacyTemplatesTable())}};Object(external_kbnSharedDeps_React_["useEffect"])(()=>{uiMetricService.trackMetric(METRIC_TYPE.LOADED,constants["V"])},[uiMetricService]);return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"templateList"},renderContent(),isTemplateDetailsVisible&&external_kbnSharedDeps_React_default.a.createElement(TemplateDetails,{template:selectedTemplate,onClose:closeTemplateDetails,editTemplate:editTemplate,cloneTemplate:cloneTemplate,reload:reload}))};let Section;(function(Section){Section["Indices"]="indices";Section["DataStreams"]="data_streams";Section["IndexTemplates"]="templates";Section["ComponentTemplates"]="component_templates"})(Section||(Section={}));const homeSections=[Section.Indices,Section.DataStreams,Section.IndexTemplates,Section.ComponentTemplates];const IndexManagementHome=({match:{params:{section:section}},history:history})=>{const tabs=[{id:Section.Indices,name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.indicesTabTitle",defaultMessage:"Indices"})},{id:Section.DataStreams,name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.dataStreamsTabTitle",defaultMessage:"Data Streams"})},{id:Section.IndexTemplates,name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.indexTemplatesTabTitle",defaultMessage:"Index Templates"})},{id:Section.ComponentTemplates,name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.componentTemplatesTabTitle",defaultMessage:"Component Templates"})}];const onSectionChange=newSection=>{history.push(`/${newSection}`)};Object(external_kbnSharedDeps_React_["useEffect"])(()=>{breadcrumbService.setBreadcrumbs("home")},[]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true},external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"appTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.appTitle",defaultMessage:"Index Management"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{href:documentationService.getIdxMgmtDocumentationLink(),target:"_blank",iconType:"help","data-test-subj":"documentationLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.home.idxMgmtDocsLinkText",defaultMessage:"Index Management docs"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTabs"],null,tabs.map(tab=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTab"],{onClick:()=>onSectionChange(tab.id),isSelected:tab.id===section,key:tab.id,"data-test-subj":`${tab.id}Tab`},tab.name))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Switch"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:[`/${Section.DataStreams}`,`/${Section.DataStreams}/:dataStreamName?`],component:DataStreamList}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:`/${Section.Indices}`,component:IndexList}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:[`/${Section.IndexTemplates}`,`/${Section.IndexTemplates}/:templateName?`],component:TemplateList}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:[`/${Section.ComponentTemplates}`,`/${Section.ComponentTemplates}/:componentTemplateName?`],component:ComponentTemplateListContainer}))))};const TemplateCreate=({history:history})=>{const[isSaving,setIsSaving]=Object(external_kbnSharedDeps_React_["useState"])(false);const[saveError,setSaveError]=Object(external_kbnSharedDeps_React_["useState"])(null);const search=Object(query_string["parse"])(Object(external_kbnSharedDeps_ReactRouterDom_["useLocation"])().search.substring(1));const isLegacy=Boolean(search.legacy);const onSave=async template=>{const{name:name}=template;setIsSaving(true);setSaveError(null);const{error:error}=await saveTemplate(template);setIsSaving(false);if(error){setSaveError(error);return}history.push(Object(routing["d"])(name,template._kbnMeta.isLegacy))};const clearSaveError=()=>{setSaveError(null)};Object(external_kbnSharedDeps_React_["useEffect"])(()=>{breadcrumbService.setBreadcrumbs("templateCreate")},[]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(TemplateForm,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"pageTitle"},isLegacy?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.createTemplate.createLegacyTemplatePageTitle",defaultMessage:"Create legacy template"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.createTemplate.createTemplatePageTitle",defaultMessage:"Create template"}))),onSave:onSave,isSaving:isSaving,saveError:saveError,clearSaveError:clearSaveError,isLegacy:isLegacy})))};const TemplateClone=({match:{params:{name:name}},location:location,history:history})=>{const decodedTemplateName=Object(public_["attemptToURIDecode"])(name);const isLegacy=getIsLegacyFromQueryParams(location);const[isSaving,setIsSaving]=Object(external_kbnSharedDeps_React_["useState"])(false);const[saveError,setSaveError]=Object(external_kbnSharedDeps_React_["useState"])(null);const{error:templateToCloneError,data:templateToClone,isLoading:isLoading}=useLoadIndexTemplate(decodedTemplateName,isLegacy);const onSave=async template=>{setIsSaving(true);setSaveError(null);const{error:error}=await saveTemplate(template,true);const{name:newTemplateName}=template;setIsSaving(false);if(error){setSaveError(error);return}history.push(Object(routing["d"])(newTemplateName,template._kbnMeta.isLegacy))};const clearSaveError=()=>{setSaveError(null)};let content;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{breadcrumbService.setBreadcrumbs("templateClone")},[]);if(isLoading){content=external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateCreate.loadingTemplateToCloneDescription",defaultMessage:"Loading template to clone"}))}else if(templateToCloneError){content=external_kbnSharedDeps_React_default.a.createElement(SectionError,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateCreate.loadingTemplateToCloneErrorMessage",defaultMessage:"Error loading template to clone"}),error:templateToCloneError,"data-test-subj":"sectionError"})}else if(templateToClone){const templateData={...templateToClone,name:`${decodedTemplateName}-copy`};content=external_kbnSharedDeps_React_default.a.createElement(TemplateForm,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"pageTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.createTemplate.cloneTemplatePageTitle",defaultMessage:"Clone template '{name}'",values:{name:decodedTemplateName}}))),defaultValue:templateData,onSave:onSave,isSaving:isSaving,saveError:saveError,clearSaveError:clearSaveError,isLegacy:isLegacy})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,content))};const TemplateEdit=({match:{params:{name:name}},location:location,history:history})=>{const decodedTemplateName=Object(public_["attemptToURIDecode"])(name);const isLegacy=getIsLegacyFromQueryParams(location);const[isSaving,setIsSaving]=Object(external_kbnSharedDeps_React_["useState"])(false);const[saveError,setSaveError]=Object(external_kbnSharedDeps_React_["useState"])(null);const{error:error,data:template,isLoading:isLoading}=useLoadIndexTemplate(decodedTemplateName,isLegacy);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{breadcrumbService.setBreadcrumbs("templateEdit")},[]);const onSave=async updatedTemplate=>{setIsSaving(true);setSaveError(null);const{error:saveErrorObject}=await updateTemplate(updatedTemplate);setIsSaving(false);if(saveErrorObject){setSaveError(saveErrorObject);return}history.push(Object(routing["d"])(decodedTemplateName,updatedTemplate._kbnMeta.isLegacy))};const clearSaveError=()=>{setSaveError(null)};let content;if(isLoading){content=external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateEdit.loadingIndexTemplateDescription",defaultMessage:"Loading template"}))}else if(error){content=external_kbnSharedDeps_React_default.a.createElement(SectionError,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateEdit.loadingIndexTemplateErrorMessage",defaultMessage:"Error loading template"}),error:error,"data-test-subj":"sectionError"})}else if(template){const{name:templateName,_kbnMeta:{type:type}}=template;const isSystemTemplate=templateName&&templateName.startsWith(".");if(type==="cloudManaged"){content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateEdit.managedTemplateWarningTitle",defaultMessage:"Editing a managed template is not permitted"}),color:"danger",iconType:"alert","data-test-subj":"systemTemplateEditCallout"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateEdit.managedTemplateWarningDescription",defaultMessage:"Managed templates are critical for internal operations."}))}else{content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,isSystemTemplate&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateEdit.systemTemplateWarningTitle",defaultMessage:"Editing a system template can break Kibana"}),color:"danger",iconType:"alert","data-test-subj":"systemTemplateEditCallout"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.templateEdit.systemTemplateWarningDescription",defaultMessage:"System templates are critical for internal operations."})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"})),external_kbnSharedDeps_React_default.a.createElement(TemplateForm,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"pageTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.idxMgmt.editTemplate.editTemplatePageTitle",defaultMessage:"Edit template '{name}'",values:{name:decodedTemplateName}}))),defaultValue:template,onSave:onSave,isSaving:isSaving,saveError:saveError,clearSaveError:clearSaveError,isEditing:true,isLegacy:isLegacy}))}}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,content))};const App=({history:history})=>{const{uiMetricService:uiMetricService}=useServices();Object(external_kbnSharedDeps_React_["useEffect"])(()=>uiMetricService.trackMetric(METRIC_TYPE.LOADED,constants["m"]),[uiMetricService]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Router"],{history:history},external_kbnSharedDeps_React_default.a.createElement(AppWithoutRouter,null))};const AppWithoutRouter=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Switch"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:"/create_template",component:TemplateCreate}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:"/clone_template/:name*",component:TemplateClone}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:"/edit_template/:name*",component:TemplateEdit}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:"/create_component_template",component:ComponentTemplateCreate}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:"/create_component_template/:sourceComponentTemplateName",component:ComponentTemplateClone}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:"/edit_component_template/:name*",component:ComponentTemplateEdit}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:`/:section(${homeSections.join("|")})`,component:IndexManagementHome}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Redirect"],{from:`/`,to:`/indices`}));var redux=__webpack_require__(49);var redux_thunk_lib=__webpack_require__(178);var redux_thunk_lib_default=__webpack_require__.n(redux_thunk_lib);const defaultTableState={filter:"",pageSize:10,currentPage:0,sortField:"index.name",isSortAscending:true};const table_state_tableState=Object(redux_actions_lib["handleActions"])({[table_state_filterChanged](state,action){const{filter:filter}=action.payload;return{...state,filter:filter,currentPage:0}},[table_state_toggleChanged](state,action){const{toggleName:toggleName,toggleValue:toggleValue}=action.payload;const toggleNameToVisibleMap={...state.toggleNameToVisibleMap};toggleNameToVisibleMap[toggleName]=toggleValue;return{...state,toggleNameToVisibleMap:toggleNameToVisibleMap}},[sortChanged](state,action){const{sortField:sortField,isSortAscending:isSortAscending}=action.payload;return{...state,sortField:sortField,isSortAscending:isSortAscending}},[table_state_pageChanged](state,action){const{pageNumber:pageNumber}=action.payload;return{...state,currentPage:pageNumber}},[table_state_pageSizeChanged](state,action){const{pageSize:pageSize}=action.payload;return{...state,pageSize:pageSize}}},defaultTableState);const defaultState={};const getDetailPanelReducer=uiMetricService=>Object(redux_actions_lib["handleActions"])({[deleteIndicesSuccess](state,action){const{indexNames:indexNames}=action.payload;const{indexName:indexName}=state;if(indexNames.includes(indexName)){return{}}else{return state}},[detail_panel_openDetailPanel](state,action){const{panelType:panelType,indexName:indexName,title:title}=action.payload;const panelTypeToUiMetricMap={[TAB_SUMMARY]:constants["s"],[TAB_SETTINGS]:constants["q"],[TAB_MAPPING]:constants["p"],[TAB_STATS]:constants["r"],[TAB_EDIT_SETTINGS]:constants["o"]};if(panelTypeToUiMetricMap[panelType]){uiMetricService.trackMetric(METRIC_TYPE.COUNT,panelTypeToUiMetricMap[panelType])}return{panelType:panelType||state.panelType||TAB_SUMMARY,indexName:indexName,title:title}},[detail_panel_closeDetailPanel](){return{}},[loadIndexDataSuccess](state,action){const{data:data}=action.payload;const newState={...state,data:data};return newState},[updateIndexSettingsError](state,action){const{error:error}=action.payload;const newState={...state,error:error};return newState},[updateIndexSettingsSuccess](){return{}}},defaultState);const indices_byId=Object(redux_actions_lib["handleActions"])({[deleteIndicesSuccess](state,action){const{indexNames:indexNames}=action.payload;const newState={};Object.values(state).forEach(index=>{if(!indexNames.includes(index.name)){newState[index.name]=index}});return newState},[loadIndicesSuccess](state,action){const{indices:indices}=action.payload;const newState={};indices.forEach(index=>{newState[index.name]=index});return newState},[reloadIndicesSuccess](state,action){const{indices:indices}=action.payload;const newState={};indices.forEach(index=>{newState[index.name]=index});return{...state,...newState}}},{});const indices_allIds=Object(redux_actions_lib["handleActions"])({[deleteIndicesSuccess](state,action){const{indexNames:indexNames}=action.payload;const newState=[];state.forEach(indexName=>{if(!indexNames.includes(indexName)){newState.push(indexName)}});return newState},[loadIndicesSuccess](state,action){const{indices:indices}=action.payload;return indices.map(index=>index.name)},[reloadIndicesSuccess](state){return state}},[]);const loading=Object(redux_actions_lib["handleActions"])({[loadIndicesStart](){return true},[loadIndicesSuccess](){return false},[loadIndicesError](){return false}},true);const indices_error=Object(redux_actions_lib["handleActions"])({[loadIndicesError](state,action){const error=action.payload;const newState={...error};return newState}},false);const indices_indices=Object(redux["combineReducers"])({loading:loading,error:indices_error,byId:indices_byId,allIds:indices_allIds});const rowStatus=Object(redux_actions_lib["handleActions"])({[clearRowStatus](state,action){const{indexNames:indexNames}=action.payload;const newState={...state};indexNames.forEach(indexName=>{delete newState[indexName]});return newState},[closeIndicesStart](state,action){const{indexNames:indexNames}=action.payload;const statuses={};indexNames.forEach(indexName=>{statuses[indexName]=constants["d"]});return{...state,...statuses}},[openIndicesStart](state,action){const{indexNames:indexNames}=action.payload;const statuses={};indexNames.forEach(indexName=>{statuses[indexName]=constants["i"]});return{...state,...statuses}},[refreshIndicesStart](state,action){const{indexNames:indexNames}=action.payload;const statuses={};indexNames.forEach(indexName=>{statuses[indexName]=constants["j"]});return{...state,...statuses}},[flushIndicesStart](state,action){const{indexNames:indexNames}=action.payload;const statuses={};indexNames.forEach(indexName=>{statuses[indexName]=constants["e"]});return{...state,...statuses}},[forcemergeIndicesStart](state,action){const{indexNames:indexNames}=action.payload;const statuses={};indexNames.forEach(indexName=>{statuses[indexName]=constants["f"]});return{...state,...statuses}},[clearCacheIndicesStart](state,action){const{indexNames:indexNames}=action.payload;const statuses={};indexNames.forEach(indexName=>{statuses[indexName]=constants["b"]});return{...state,...statuses}},[reloadIndicesSuccess](state,action){const{indices:indices}=action.payload;const indicesByName=indices.reduce((acc,index)=>{acc[index.name]=index;return acc},{});const newState={...state};for(const indexName in state){if(state[indexName]===constants["d"]&&indicesByName[indexName].status===constants["c"]){delete newState[indexName]}if(state[indexName]===constants["i"]&&indicesByName[indexName].status===constants["h"]){delete newState[indexName]}if(state[indexName]===constants["j"]&&indicesByName[indexName].status===constants["h"]){delete newState[indexName]}if(state[indexName]===constants["j"]&&indicesByName[indexName].status===constants["c"]){delete newState[indexName]}if(state[indexName]===constants["e"]&&indicesByName[indexName].status===constants["h"]){delete newState[indexName]}if(state[indexName]===constants["e"]&&indicesByName[indexName].status===constants["c"]){delete newState[indexName]}if(state[indexName]===constants["f"]&&indicesByName[indexName].status===constants["h"]){delete newState[indexName]}if(state[indexName]===constants["f"]&&indicesByName[indexName].status===constants["c"]){delete newState[indexName]}if(state[indexName]===constants["b"]&&indicesByName[indexName].status===constants["h"]){delete newState[indexName]}if(state[indexName]===constants["b"]&&indicesByName[indexName].status===constants["c"]){delete newState[indexName]}}return newState}},{});const getReducer=({uiMetricService:uiMetricService})=>Object(redux["combineReducers"])({indices:indices_indices,rowStatus:rowStatus,tableState:table_state_tableState,detailPanel:getDetailPanelReducer(uiMetricService)});function indexManagementStore(services){const toggleNameToVisibleMap={};services.extensionsService.toggles.forEach(toggleExtension=>{toggleNameToVisibleMap[toggleExtension.name]=false});const initialState={tableState:{...defaultTableState,toggleNameToVisibleMap:toggleNameToVisibleMap}};const enhancers=[Object(redux["applyMiddleware"])(redux_thunk_lib_default.a)];window.__REDUX_DEVTOOLS_EXTENSION__&&enhancers.push(window.__REDUX_DEVTOOLS_EXTENSION__());return Object(redux["createStore"])(getReducer(services),initialState,Object(redux["compose"])(...enhancers))}const{GlobalFlyoutProvider:GlobalFlyoutProvider}=public_["GlobalFlyout"];const renderApp=(elem,{core:core,dependencies:dependencies})=>{if(!elem){return()=>undefined}const{i18n:i18n,docLinks:docLinks,notifications:notifications,application:application}=core;const{Context:I18nContext}=i18n;const{services:services,history:history,setBreadcrumbs:setBreadcrumbs,uiSettings:uiSettings}=dependencies;const{Provider:KibanaReactContextProvider}=Object(kibanaReact_public_["createKibanaReactContext"])({uiSettings:uiSettings});const componentTemplateProviderValues={httpClient:services.httpService.httpClient,apiBasePath:common["API_BASE_PATH"],trackMetric:services.uiMetricService.trackMetric.bind(services.uiMetricService),docLinks:docLinks,toasts:notifications.toasts,setBreadcrumbs:setBreadcrumbs,getUrlForApp:application.getUrlForApp};Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(KibanaReactContextProvider,null,external_kbnSharedDeps_React_default.a.createElement(react_redux_lib["Provider"],{store:indexManagementStore(services)},external_kbnSharedDeps_React_default.a.createElement(AppContextProvider,{value:dependencies},external_kbnSharedDeps_React_default.a.createElement(MappingsEditorProvider,null,external_kbnSharedDeps_React_default.a.createElement(ComponentTemplatesProvider,{value:componentTemplateProviderValues},external_kbnSharedDeps_React_default.a.createElement(GlobalFlyoutProvider,null,external_kbnSharedDeps_React_default.a.createElement(App,{history:history})))))))),elem);return()=>{Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(elem)}};function initSetup({usageCollection:usageCollection,coreSetup:coreSetup}){const{http:http,notifications:notifications}=coreSetup;httpService.setup(http);notificationService.setup(notifications);const uiMetricService=new UiMetricService(constants["n"]);setUiMetricService(uiMetricService);uiMetricService.setup(usageCollection);return{uiMetricService:uiMetricService}}async function mountManagementSection(coreSetup,usageCollection,params,extensionsService,isFleetEnabled){const{element:element,setBreadcrumbs:setBreadcrumbs,history:history}=params;const[core,startDependencies]=await coreSetup.getStartServices();const{docLinks:docLinks,fatalErrors:fatalErrors,application:application,chrome:{docTitle:docTitle},uiSettings:uiSettings}=core;const{urlGenerators:urlGenerators}=startDependencies.share;docTitle.change(constants_plugin["a"].getI18nName(external_kbnSharedDeps_KbnI18n_["i18n"]));breadcrumbService.setup(setBreadcrumbs);documentationService.setup(docLinks);const{uiMetricService:uiMetricService}=initSetup({usageCollection:usageCollection,coreSetup:coreSetup});const appDependencies={core:{fatalErrors:fatalErrors,getUrlForApp:application.getUrlForApp},plugins:{usageCollection:usageCollection,isFleetEnabled:isFleetEnabled},services:{httpService:httpService,notificationService:notificationService,uiMetricService:uiMetricService,extensionsService:extensionsService},history:history,setBreadcrumbs:setBreadcrumbs,uiSettings:uiSettings,urlGenerators:urlGenerators,docLinks:docLinks};const unmountAppCallback=renderApp(element,{core:core,dependencies:appDependencies});return()=>{docTitle.reset();unmountAppCallback()}}}])]);