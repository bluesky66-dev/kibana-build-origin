(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=14)})([function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/data/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&btoa){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item,useSourceMap);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list};function cssWithMappingToString(item,useSourceMap){var content=item[1]||"";var cssMapping=item[3];if(!cssMapping){return content}if(useSourceMap&&typeof btoa==="function"){var sourceMapping=toComment(cssMapping);var sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));var data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_savedObjects_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15);var _node_modules_val_loader_dist_cjs_js_key_savedObjects_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_savedObjects_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/savedObjects/public",__webpack_require__,25)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["savedObjects"]},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(17);case"v7light":return __webpack_require__(19);case"v8dark":return __webpack_require__(21);case"v8light":return __webpack_require__(23)}},function(module,exports,__webpack_require__){var api=__webpack_require__(6);var content=__webpack_require__(18);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(7);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".kbnSavedObjectSaveModal {\n  width: 400px; }\n\n.kbnSavedObjectsSaveModal--wide {\n  width: 800px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(6);var content=__webpack_require__(20);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(7);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".kbnSavedObjectSaveModal {\n  width: 400px; }\n\n.kbnSavedObjectsSaveModal--wide {\n  width: 800px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(6);var content=__webpack_require__(22);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(7);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".kbnSavedObjectSaveModal {\n  width: 400px; }\n\n.kbnSavedObjectsSaveModal--wide {\n  width: 800px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(6);var content=__webpack_require__(24);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(7);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".kbnSavedObjectSaveModal {\n  width: 400px; }\n\n.kbnSavedObjectsSaveModal--wide {\n  width: 800px; }\n",""]);module.exports=exports},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"OnSaveProps",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SavedObjectSaveModal",(function(){return saved_object_save_modal_SavedObjectSaveModal}));__webpack_require__.d(__webpack_exports__,"SavedObjectSaveModalOrigin",(function(){return SavedObjectSaveModalOrigin}));__webpack_require__.d(__webpack_exports__,"OriginSaveModalProps",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SaveModalState",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SaveResult",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"showSaveModal",(function(){return showSaveModal}));__webpack_require__.d(__webpack_exports__,"getSavedObjectFinder",(function(){return getSavedObjectFinder}));__webpack_require__.d(__webpack_exports__,"SavedObjectFinderUi",(function(){return saved_object_finder_SavedObjectFinderUi}));__webpack_require__.d(__webpack_exports__,"SavedObjectMetaData",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SavedObjectLoader",(function(){return saved_object_loader_SavedObjectLoader}));__webpack_require__.d(__webpack_exports__,"SavedObjectLoaderFindOptions",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"checkForDuplicateTitle",(function(){return checkForDuplicateTitle}));__webpack_require__.d(__webpack_exports__,"saveWithConfirmation",(function(){return saveWithConfirmation}));__webpack_require__.d(__webpack_exports__,"isErrorNonFatal",(function(){return isErrorNonFatal}));__webpack_require__.d(__webpack_exports__,"SavedObjectDecorator",(function(){return decorators_types["SavedObjectDecorator"]}));__webpack_require__.d(__webpack_exports__,"SavedObjectDecoratorFactory",(function(){return decorators_types["SavedObjectDecoratorFactory"]}));__webpack_require__.d(__webpack_exports__,"SavedObjectDecoratorConfig",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SavedObjectSaveOpts",(function(){return public_types["SavedObjectSaveOpts"]}));__webpack_require__.d(__webpack_exports__,"SavedObject",(function(){return public_types["SavedObject"]}));__webpack_require__.d(__webpack_exports__,"SavedObjectConfig",(function(){return public_types["SavedObjectConfig"]}));__webpack_require__.d(__webpack_exports__,"PER_PAGE_SETTING",(function(){return PER_PAGE_SETTING}));__webpack_require__.d(__webpack_exports__,"LISTING_LIMIT_SETTING",(function(){return LISTING_LIMIT_SETTING}));__webpack_require__.d(__webpack_exports__,"SavedObjectsStart",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SavedObjectSetup",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var public_0=__webpack_require__(16);var external_kbnSharedDeps_Lodash_=__webpack_require__(3);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);async function hydrateIndexPattern(id,savedObject,indexPatterns,config){const indexPattern=config.indexPattern;if(!savedObject.searchSource){return null}const index=id||indexPattern||savedObject.searchSource.getOwnField("index");if(typeof index!=="string"||!index){return null}const indexObj=await indexPatterns.get(index);savedObject.searchSource.setField("index",indexObj);return indexObj}async function intializeSavedObject(savedObject,savedObjectsClient,config){const esType=config.type;if(!esType)throw new Error("You must define a type name to use SavedObject objects.");if(!savedObject.id){external_kbnSharedDeps_Lodash_default.a.assign(savedObject,savedObject.defaults);await savedObject.hydrateIndexPattern();if(typeof config.afterESResp==="function"){savedObject=await config.afterESResp(savedObject)}return savedObject}const resp=await savedObjectsClient.get(esType,savedObject.id);const respMapped={_id:resp.id,_type:resp.type,_source:external_kbnSharedDeps_Lodash_default.a.cloneDeep(resp.attributes),references:resp.references,found:!!resp._version};await savedObject.applyESResp(respMapped);if(typeof config.init==="function"){await config.init.call(savedObject)}return savedObject}var public_=__webpack_require__(5);var types=__webpack_require__(9);const expandShorthand=sh=>Object(external_kbnSharedDeps_Lodash_["mapValues"])(sh,val=>{const fieldMap=Object(external_kbnSharedDeps_Lodash_["isString"])(val)?{type:val}:val;const json={type:public_["ES_FIELD_TYPES"].TEXT,_serialize(v){if(v)return JSON.stringify(v)},_deserialize(v){if(v)return JSON.parse(v)}};return fieldMap.type==="json"?json:fieldMap});function serializeSavedObject(savedObject,config){var _config$mapping;const mapping=expandShorthand((_config$mapping=config.mapping)!==null&&_config$mapping!==void 0?_config$mapping:{});const attributes={};const references=[];external_kbnSharedDeps_Lodash_default.a.forOwn(mapping,(fieldMapping,fieldName)=>{if(typeof fieldName!=="string"){return}const savedObjectFieldVal=savedObject[fieldName];if(savedObjectFieldVal!=null){attributes[fieldName]=fieldMapping._serialize?fieldMapping._serialize(savedObjectFieldVal):savedObjectFieldVal}});if(savedObject.searchSource){const{searchSourceJSON:searchSourceJSON,references:searchSourceReferences}=savedObject.searchSource.serialize();attributes.kibanaSavedObjectMeta={searchSourceJSON:searchSourceJSON};references.push(...searchSourceReferences)}if(savedObject.searchSourceFields){const[searchSourceFields,searchSourceReferences]=Object(public_["extractSearchSourceReferences"])(savedObject.searchSourceFields);const searchSourceJSON=JSON.stringify(searchSourceFields);attributes.kibanaSavedObjectMeta={searchSourceJSON:searchSourceJSON};references.push(...searchSourceReferences)}if(savedObject.unresolvedIndexPatternReference){references.push(savedObject.unresolvedIndexPatternReference)}return{attributes:attributes,references:references}}var kibanaUtils_public_=__webpack_require__(12);async function applyESResp(resp,savedObject,config,dependencies){var _config$mapping;const mapping=expandShorthand((_config$mapping=config.mapping)!==null&&_config$mapping!==void 0?_config$mapping:{});const savedObjectType=config.type||"";savedObject._source=external_kbnSharedDeps_Lodash_default.a.cloneDeep(resp._source);if(typeof resp.found==="boolean"&&!resp.found){throw new kibanaUtils_public_["SavedObjectNotFound"](savedObjectType,savedObject.id||"")}const meta=resp._source.kibanaSavedObjectMeta||{};delete resp._source.kibanaSavedObjectMeta;if(!config.indexPattern&&savedObject._source.indexPattern){config.indexPattern=savedObject._source.indexPattern;delete savedObject._source.indexPattern}external_kbnSharedDeps_Lodash_default.a.defaults(savedObject._source,savedObject.defaults);external_kbnSharedDeps_Lodash_default.a.forOwn(mapping,(fieldMapping,fieldName)=>{if(fieldMapping._deserialize&&typeof fieldName==="string"){savedObject._source[fieldName]=fieldMapping._deserialize(savedObject._source[fieldName])}});external_kbnSharedDeps_Lodash_default.a.assign(savedObject,savedObject._source);savedObject.lastSavedTitle=savedObject.title;if(meta.searchSourceJSON){try{let searchSourceValues=Object(public_["parseSearchSourceJSON"])(meta.searchSourceJSON);if(config.searchSource){searchSourceValues=Object(public_["injectSearchSourceReferences"])(searchSourceValues,resp.references);savedObject.searchSource=await dependencies.search.searchSource.create(searchSourceValues)}else{savedObject.searchSourceFields=searchSourceValues}}catch(error){if(error.constructor.name==="SavedObjectNotFound"&&error.savedObjectType==="index-pattern"){savedObject.unresolvedIndexPatternReference={name:"kibanaSavedObjectMeta.searchSourceJSON.index",id:JSON.parse(meta.searchSourceJSON).index,type:"index-pattern"}}throw error}}const injectReferences=config.injectReferences;if(injectReferences&&resp.references&&resp.references.length>0){injectReferences(savedObject,resp.references)}if(typeof config.afterESResp==="function"){savedObject=await config.afterESResp(savedObject)}return savedObject}var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);const OVERWRITE_REJECTED=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.overwriteRejectedDescription",{defaultMessage:"Overwrite confirmation was rejected"});const SAVE_DUPLICATE_REJECTED=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.saveDuplicateRejectedDescription",{defaultMessage:"Save with duplicate title confirmation was rejected"});var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(1);var kibanaReact_public_=__webpack_require__(13);function confirmModalPromise(message="",title="",confirmBtnText="",overlays){return new Promise((resolve,reject)=>{const cancelButtonText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.confirmModal.cancelButtonLabel",{defaultMessage:"Cancel"});const modal=overlays.openModal(Object(kibanaReact_public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{onCancel:()=>{modal.close();reject()},onConfirm:()=>{modal.close();resolve(true)},confirmButtonText:confirmBtnText,cancelButtonText:cancelButtonText,title:title},message)))})}async function createSource(source,savedObject,esType,options={},services){const{savedObjectsClient:savedObjectsClient,overlays:overlays}=services;try{return await savedObjectsClient.create(esType,source,options)}catch(err){if(external_kbnSharedDeps_Lodash_default.a.get(err,"res.status")===409){const confirmMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.confirmModal.overwriteConfirmationMessage",{defaultMessage:"Are you sure you want to overwrite {title}?",values:{title:savedObject.title}});const title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.confirmModal.overwriteTitle",{defaultMessage:"Overwrite {name}?",values:{name:savedObject.getDisplayName()}});const confirmButtonText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.confirmModal.overwriteButtonLabel",{defaultMessage:"Overwrite"});return confirmModalPromise(confirmMessage,title,confirmButtonText,overlays).then(()=>savedObjectsClient.create(esType,source,savedObject.creationOpts({overwrite:true,...options}))).catch(()=>Promise.reject(new Error(OVERWRITE_REJECTED)))}return await Promise.reject(err)}}async function findObjectByTitle(savedObjectsClient,type,title){if(!title){return}const response=await savedObjectsClient.find({type:type,perPage:10,search:`"${title}"`,searchFields:["title"],fields:["title"]});return response.savedObjects.find(obj=>obj.get("title").toLowerCase()===title.toLowerCase())}function displayDuplicateTitleConfirmModal(savedObject,overlays){const confirmMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.confirmModal.saveDuplicateConfirmationMessage",{defaultMessage:`A {name} with the title '{title}' already exists. Would you like to save anyway?`,values:{title:savedObject.title,name:savedObject.getDisplayName()}});const confirmButtonText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.confirmModal.saveDuplicateButtonLabel",{defaultMessage:"Save {name}",values:{name:savedObject.getDisplayName()}});try{return confirmModalPromise(confirmMessage,"",confirmButtonText,overlays)}catch(_){return Promise.reject(new Error(SAVE_DUPLICATE_REJECTED))}}async function checkForDuplicateTitle(savedObject,isTitleDuplicateConfirmed,onTitleDuplicate,services){const{savedObjectsClient:savedObjectsClient,overlays:overlays}=services;if(isTitleDuplicateConfirmed){return true}if(savedObject.title===savedObject.lastSavedTitle&&!savedObject.copyOnSave){return true}const duplicate=await findObjectByTitle(savedObjectsClient,savedObject.getEsType(),savedObject.title);if(!duplicate||duplicate.id===savedObject.id){return true}if(onTitleDuplicate){onTitleDuplicate();return Promise.reject(new Error(SAVE_DUPLICATE_REJECTED))}return displayDuplicateTitleConfirmModal(savedObject,overlays)}function isErrorNonFatal(error){if(!error)return false;return error.message===OVERWRITE_REJECTED||error.message===SAVE_DUPLICATE_REJECTED}async function saveSavedObject(savedObject,config,{confirmOverwrite:confirmOverwrite=false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed=false,onTitleDuplicate:onTitleDuplicate}={},services){const{savedObjectsClient:savedObjectsClient,chrome:chrome}=services;const esType=config.type||"";const extractReferences=config.extractReferences;const originalId=savedObject.id;if(savedObject.copyOnSave){delete savedObject.id}let{attributes:attributes,references:references}=savedObject._serialize();if(extractReferences){({attributes:attributes,references:references}=extractReferences({attributes:attributes,references:references}))}if(!references)throw new Error("References not returned from extractReferences");try{await checkForDuplicateTitle(savedObject,isTitleDuplicateConfirmed,onTitleDuplicate,services);savedObject.isSaving=true;const resp=confirmOverwrite?await createSource(attributes,savedObject,esType,savedObject.creationOpts({references:references}),services):await savedObjectsClient.create(esType,attributes,savedObject.creationOpts({references:references,overwrite:true}));savedObject.id=resp.id;if(savedObject.showInRecentlyAccessed&&savedObject.getFullPath){chrome.recentlyAccessed.add(savedObject.getFullPath(),savedObject.title,String(savedObject.id))}savedObject.isSaving=false;savedObject.lastSavedTitle=savedObject.title;return savedObject.id}catch(err){savedObject.isSaving=false;savedObject.id=originalId;if(isErrorNonFatal(err)){return""}return Promise.reject(err)}}const applyDecorators=(object,config,decorators)=>{decorators.forEach(decorator=>{decorator.decorateConfig(config);decorator.decorateObject(object)})};function buildSavedObject(savedObject,config,services,decorators=[]){applyDecorators(savedObject,config,decorators);const{indexPatterns:indexPatterns,savedObjectsClient:savedObjectsClient}=services;const esType=config.type||"";savedObject.getDisplayName=()=>esType;savedObject.getEsType=()=>esType;savedObject.isSaving=false;savedObject.defaults=config.defaults||{};savedObject.searchSource=config.searchSource?services.search.searchSource.createEmpty():undefined;savedObject.id=config.id||void 0;savedObject.migrationVersion=config.migrationVersion;savedObject.copyOnSave=false;savedObject.hydrateIndexPattern=id=>hydrateIndexPattern(id||"",savedObject,indexPatterns,config);savedObject.init=Object(external_kbnSharedDeps_Lodash_["once"])(()=>intializeSavedObject(savedObject,savedObjectsClient,config));savedObject.applyESResp=resp=>applyESResp(resp,savedObject,config,services);savedObject._serialize=()=>serializeSavedObject(savedObject,config);savedObject.isTitleChanged=()=>savedObject._source&&savedObject._source.title!==savedObject.title;savedObject.creationOpts=(opts={})=>({id:savedObject.id,migrationVersion:savedObject.migrationVersion,...opts});savedObject.save=async opts=>{try{const result=await saveSavedObject(savedObject,config,opts,services);return Promise.resolve(result)}catch(e){return Promise.reject(e)}};savedObject.destroy=()=>{};savedObject.delete=()=>{if(!savedObject.id){return Promise.reject(new Error("Deleting a saved Object requires type and id"))}return savedObjectsClient.delete(esType,savedObject.id)}}function createSavedObjectClass(services,decoratorRegistry){class SavedObjectClass{constructor(config={}){const self=this;buildSavedObject(self,config,services,decoratorRegistry.getOrderedDecorators(services))}}return SavedObjectClass}class StringUtils{static upperFirst(str=""){return str?str.charAt(0).toUpperCase()+str.slice(1):""}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class saved_object_loader_SavedObjectLoader{constructor(SavedObjectClass,savedObjectsClient){this.savedObjectsClient=savedObjectsClient;_defineProperty(this,"Class",void 0);_defineProperty(this,"type",void 0);_defineProperty(this,"lowercaseType",void 0);_defineProperty(this,"loaderProperties",void 0);this.type=SavedObjectClass.type;this.Class=SavedObjectClass;this.lowercaseType=this.type.toLowerCase();this.loaderProperties={name:`${this.lowercaseType}s`,noun:StringUtils.upperFirst(this.type),nouns:`${this.lowercaseType}s`}}async get(opts){const obj=new this.Class(opts);return obj.init()}urlFor(id){return`#/${this.lowercaseType}/${encodeURIComponent(id)}`}async delete(ids){const idsUsed=!Array.isArray(ids)?[ids]:ids;const deletions=idsUsed.map(id=>{const savedObject=new this.Class(id);return savedObject.delete()});await Promise.all(deletions)}mapHitSource(source,id,references=[]){source.id=id;source.url=this.urlFor(id);source.references=references;return source}mapSavedObjectApiHits({attributes:attributes,id:id,references:references=[]}){return this.mapHitSource(attributes,id,references)}findAll(search="",{size:size=100,fields:fields,hasReference:hasReference}){return this.savedObjectsClient.find({type:this.lowercaseType,search:search?`${search}*`:undefined,perPage:size,page:1,searchFields:["title^3","description"],defaultSearchOperator:"AND",fields:fields,hasReference:hasReference}).then(resp=>({total:resp.total,hits:resp.savedObjects.map(savedObject=>this.mapSavedObjectApiHits(savedObject))}))}find(search="",sizeOrOptions=100){const options=typeof sizeOrOptions==="number"?{size:sizeOrOptions}:sizeOrOptions;return this.findAll(search,options).then(resp=>({total:resp.total,hits:resp.hits.filter(savedObject=>!savedObject.error)}))}}async function saveWithConfirmation(source,savedObject,options,services){const{savedObjectsClient:savedObjectsClient,overlays:overlays}=services;try{return await savedObjectsClient.create(savedObject.getEsType(),source,options)}catch(err){if(Object(external_kbnSharedDeps_Lodash_["get"])(err,"res.status")===409){const confirmMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.confirmModal.overwriteConfirmationMessage",{defaultMessage:"Are you sure you want to overwrite {title}?",values:{title:savedObject.title}});const title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.confirmModal.overwriteTitle",{defaultMessage:"Overwrite {name}?",values:{name:savedObject.displayName}});const confirmButtonText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.confirmModal.overwriteButtonLabel",{defaultMessage:"Overwrite"});return confirmModalPromise(confirmMessage,title,confirmButtonText,overlays).then(()=>savedObjectsClient.create(savedObject.getEsType(),source,{overwrite:true,...options})).catch(()=>Promise.reject(new Error(OVERWRITE_REJECTED)))}return await Promise.reject(err)}}function registry_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class SavedObjectDecoratorRegistry{constructor(){registry_defineProperty(this,"registry",new Map)}register(config){if(this.registry.has(config.id)){throw new Error(`A decorator is already registered for id ${config.id}`)}if([...this.registry.values()].find(({priority:priority})=>priority===config.priority)){throw new Error(`A decorator is already registered for priority ${config.priority}`)}this.registry.set(config.id,config)}getOrderedDecorators(services){return[...this.registry.values()].sort((a,b)=>a.priority-b.priority).map(({factory:factory})=>factory(services))}}var decorators_types=__webpack_require__(10);const PER_PAGE_SETTING="savedObjects:perPage";const LISTING_LIMIT_SETTING="savedObjects:listingLimit";function plugin_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class plugin_SavedObjectsPublicPlugin{constructor(){plugin_defineProperty(this,"decoratorRegistry",new SavedObjectDecoratorRegistry)}setup(){return{registerDecorator:config=>this.decoratorRegistry.register(config)}}start(core,{data:data}){return{SavedObjectClass:createSavedObjectClass({indexPatterns:data.indexPatterns,savedObjectsClient:core.savedObjects.client,search:data.search,chrome:core.chrome,overlays:core.overlays},this.decoratorRegistry),settings:{getPerPage:()=>core.uiSettings.get(PER_PAGE_SETTING),getListingLimit:()=>core.uiSettings.get(LISTING_LIMIT_SETTING)}}}}var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(4);function saved_object_save_modal_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const generateId=Object(external_kbnSharedDeps_ElasticEui_["htmlIdGenerator"])();class saved_object_save_modal_SavedObjectSaveModal extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args);saved_object_save_modal_defineProperty(this,"warning",external_kbnSharedDeps_React_default.a.createRef());saved_object_save_modal_defineProperty(this,"state",{title:this.props.title,copyOnSave:Boolean(this.props.initialCopyOnSave),isTitleDuplicateConfirmed:false,hasTitleDuplicate:false,isLoading:false,visualizationDescription:this.props.description?this.props.description:""});saved_object_save_modal_defineProperty(this,"renderViewDescription",()=>{if(!this.props.showDescription){return}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.descriptionLabel",defaultMessage:"Description"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextArea"],{"data-test-subj":"viewDescription",value:this.state.visualizationDescription,onChange:this.onDescriptionChange}))});saved_object_save_modal_defineProperty(this,"onDescriptionChange",event=>{this.setState({visualizationDescription:event.target.value})});saved_object_save_modal_defineProperty(this,"onTitleDuplicate",()=>{this.setState({isLoading:false,isTitleDuplicateConfirmed:true,hasTitleDuplicate:true});if(this.warning.current){this.warning.current.focus()}});saved_object_save_modal_defineProperty(this,"saveSavedObject",async()=>{if(this.state.isLoading){return}this.setState({isLoading:true});await this.props.onSave({newTitle:this.state.title,newCopyOnSave:this.state.copyOnSave,isTitleDuplicateConfirmed:this.state.isTitleDuplicateConfirmed,onTitleDuplicate:this.onTitleDuplicate,newDescription:this.state.visualizationDescription})});saved_object_save_modal_defineProperty(this,"onTitleChange",event=>{this.setState({title:event.target.value,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false})});saved_object_save_modal_defineProperty(this,"onCopyOnSaveChange",event=>{this.setState({copyOnSave:event.target.checked});if(this.props.onCopyOnSaveChange){this.props.onCopyOnSaveChange(event.target.checked)}});saved_object_save_modal_defineProperty(this,"onFormSubmit",event=>{event.preventDefault();this.saveSavedObject()});saved_object_save_modal_defineProperty(this,"renderConfirmButton",()=>{const{isLoading:isLoading,title:title}=this.state;let confirmLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.saveModal.saveButtonLabel",{defaultMessage:"Save"});if(this.props.confirmButtonLabel){confirmLabel=this.props.confirmButtonLabel}const isValid=this.props.isValid!==undefined?this.props.isValid:true;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,"data-test-subj":"confirmSaveSavedObjectButton",isLoading:isLoading,isDisabled:title.length===0||!isValid,type:"submit"},confirmLabel)});saved_object_save_modal_defineProperty(this,"renderDuplicateTitleCallout",duplicateWarningId=>{if(!this.state.hasTitleDuplicate){return}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("div",{ref:this.warning,tabIndex:-1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.duplicateTitleLabel",defaultMessage:"This {objectType} already exists",values:{objectType:this.props.objectType}}),color:"warning","data-test-subj":"titleDupicateWarnMsg",id:duplicateWarningId},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.duplicateTitleDescription",defaultMessage:"Saving '{title}' creates a duplicate title.",values:{title:this.state.title}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null))});saved_object_save_modal_defineProperty(this,"renderCopyOnSave",()=>{if(!this.props.showCopyOnSave){return}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{"data-test-subj":"saveAsNewCheckbox",checked:this.state.copyOnSave,onChange:this.onCopyOnSaveChange,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.saveAsNewLabel",defaultMessage:"Save as new {objectType}",values:{objectType:this.props.objectType}})}))})}render(){const{isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,hasTitleDuplicate:hasTitleDuplicate,title:title}=this.state;const duplicateWarningId=generateId();const hasColumns=!!this.props.rightOptions;const formBodyContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.titleLabel",defaultMessage:"Title"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{fullWidth:true,autoFocus:true,"data-test-subj":"savedObjectTitle",value:title,onChange:this.onTitleChange,isInvalid:!isTitleDuplicateConfirmed&&hasTitleDuplicate||title.length===0,"aria-describedby":this.state.hasTitleDuplicate?duplicateWarningId:undefined})),this.renderViewDescription(),typeof this.props.options==="function"?this.props.options(this.state):this.props.options);const formBody=hasColumns?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,formBodyContent),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,typeof this.props.rightOptions==="function"?this.props.rightOptions(this.state):this.props.rightOptions)):formBodyContent;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],{"data-test-subj":"savedObjectSaveModal",className:`kbnSavedObjectSaveModal${hasColumns?" kbnSavedObjectsSaveModal--wide":""}`,onClose:this.props.onClose},external_kbnSharedDeps_React_default.a.createElement("form",{onSubmit:this.onFormSubmit,className:"euiModal__flex"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.saveTitle",defaultMessage:"Save {objectType}",values:{objectType:this.props.objectType}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],null,this.renderDuplicateTitleCallout(duplicateWarningId),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,!this.props.showDescription&&this.props.description&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},this.props.description),formBody,this.renderCopyOnSave())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"saveCancelButton",onClick:this.props.onClose},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.cancelButtonLabel",defaultMessage:"Cancel"})),this.renderConfirmButton())))}}function SavedObjectSaveModalOrigin(props){const[returnToOriginMode,setReturnToOriginMode]=Object(external_kbnSharedDeps_React_["useState"])(Boolean(props.originatingApp));const{documentInfo:documentInfo}=props;const returnLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.saveModalOrigin.returnToOriginLabel",{defaultMessage:"Return"});const addLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.saveModalOrigin.addToOriginLabel",{defaultMessage:"Add"});const getReturnToOriginSwitch=state=>{const sourceOptions=typeof props.options==="function"?props.options(state):props.options;if(!props.originatingApp){return sourceOptions}const origin=props.getAppNameFromId?props.getAppNameFromId(props.originatingApp)||props.originatingApp:props.originatingApp;if(!state.copyOnSave||props.originatingApp==="dashboards"){var _props$returnToOrigin;const originVerb=!documentInfo.id||state.copyOnSave?addLabel:returnLabel;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,sourceOptions,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{"data-test-subj":"returnToOriginModeSwitch",checked:returnToOriginMode,onChange:event=>{setReturnToOriginMode(event.target.checked)},label:(_props$returnToOrigin=props.returnToOriginSwitchLabel)!==null&&_props$returnToOrigin!==void 0?_props$returnToOrigin:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjects.saveModalOrigin.originAfterSavingSwitchLabel",defaultMessage:"{originVerb} to {origin} after saving",values:{originVerb:originVerb,origin:origin}})})))}else{setReturnToOriginMode(false);return sourceOptions}};const onModalSave=onSaveProps=>{props.onSave({...onSaveProps,returnToOrigin:returnToOriginMode})};const confirmButtonLabel=returnToOriginMode?external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.saveModalOrigin.saveAndReturnLabel",{defaultMessage:"Save and return"}):null;return external_kbnSharedDeps_React_default.a.createElement(saved_object_save_modal_SavedObjectSaveModal,{onSave:onModalSave,onClose:props.onClose,title:documentInfo.title,showCopyOnSave:documentInfo.id?true:false,initialCopyOnSave:Boolean(documentInfo.id)&&returnToOriginMode,confirmButtonLabel:confirmButtonLabel,objectType:props.objectType,options:getReturnToOriginSwitch,description:documentInfo.description,showDescription:true})}var external_kbnSharedDeps_ReactDom_=__webpack_require__(11);var external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_);function isSuccess(result){return"id"in result}function showSaveModal(saveModal,I18nContext,Wrapper){const container=document.createElement("div");const closeModal=()=>{external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(container);document.body.removeChild(container)};const onSave=saveModal.props.onSave;const onSaveConfirmed=async(...args)=>{const response=await onSave(...args);if(Boolean(isSuccess(response)?response.id:response.error)){closeModal()}return response};document.body.appendChild(container);const element=external_kbnSharedDeps_React_default.a.cloneElement(saveModal,{onSave:onSaveConfirmed,onClose:closeModal});const wrappedElement=Wrapper?external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(Wrapper,null,element)):external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,element);external_kbnSharedDeps_ReactDom_default.a.render(wrappedElement,container)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function saved_object_finder_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class saved_object_finder_SavedObjectFinderUi extends external_kbnSharedDeps_React_default.a.Component{constructor(props){super(props);saved_object_finder_defineProperty(this,"isComponentMounted",false);saved_object_finder_defineProperty(this,"debouncedFetch",external_kbnSharedDeps_Lodash_default.a.debounce(async query=>{const metaDataMap=this.getSavedObjectMetaDataMap();const fields=Object.values(metaDataMap).map(metaData=>metaData.includeFields||[]).reduce((allFields,currentFields)=>allFields.concat(currentFields),["title"]);const perPage=this.props.uiSettings.get(LISTING_LIMIT_SETTING);const resp=await this.props.savedObjects.client.find({type:Object.keys(metaDataMap),fields:[...new Set(fields)],search:query?`${query}*`:undefined,page:1,perPage:perPage,searchFields:["title^3","description"],defaultSearchOperator:"AND"});resp.savedObjects=resp.savedObjects.filter(savedObject=>{const metaData=metaDataMap[savedObject.type];if(metaData.showSavedObject){return metaData.showSavedObject(savedObject)}else{return true}});if(!this.isComponentMounted){return}if(query===this.state.query){this.setState({isFetchingItems:false,page:0,items:resp.savedObjects.map(savedObject=>{const{attributes:{title:title},id:id,type:type}=savedObject;return{title:typeof title==="string"?title:"",id:id,type:type,savedObject:savedObject}})})}},300));saved_object_finder_defineProperty(this,"getPageOfItems",()=>{const items=this.state.items.slice();const{sortDirection:sortDirection}=this.state;if(sortDirection||!this.state.query){items.sort(({title:titleA},{title:titleB})=>{let order=1;if(sortDirection==="desc"){order=-1}return order*(titleA||"").toLowerCase().localeCompare((titleB||"").toLowerCase())})}const startIndex=this.state.page*this.state.perPage;const lastIndex=startIndex+this.state.perPage;return items.filter(item=>this.state.filteredTypes.length===0||this.state.filteredTypes.includes(item.type)).slice(startIndex,lastIndex)});saved_object_finder_defineProperty(this,"fetchItems",()=>{this.setState({isFetchingItems:true},this.debouncedFetch.bind(null,this.state.query))});this.state={items:[],isFetchingItems:false,page:0,perPage:props.initialPageSize||props.fixedPageSize||10,query:"",filterOpen:false,filteredTypes:[],sortOpen:false}}componentWillUnmount(){this.isComponentMounted=false;this.debouncedFetch.cancel()}componentDidMount(){this.isComponentMounted=true;this.fetchItems()}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,this.renderSearchBar(),this.renderListing())}getSavedObjectMetaDataMap(){return this.props.savedObjectMetaData.reduce((map,metaData)=>({...map,[metaData.type]:metaData}),{})}getPageCount(){return Math.ceil((this.state.filteredTypes.length===0?this.state.items.length:this.state.items.filter(item=>this.state.filteredTypes.length===0||this.state.filteredTypes.includes(item.type)).length)/this.state.perPage)}getAvailableSavedObjectMetaData(){const typesInItems=new Set;this.state.items.forEach(item=>{typesInItems.add(item.type)});return this.props.savedObjectMetaData.filter(metaData=>typesInItems.has(metaData.type))}getSortOptions(){const sortOptions=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"asc",icon:this.state.sortDirection==="asc"||this.state.query===""&&this.state.sortDirection!=="desc"?"check":"empty",onClick:()=>{this.setState({sortDirection:"asc"})}},external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.finder.sortAsc",{defaultMessage:"Ascending"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"desc",icon:this.state.sortDirection==="desc"?"check":"empty",onClick:()=>{this.setState({sortDirection:"desc"})}},external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.finder.sortDesc",{defaultMessage:"Descending"}))];if(this.state.query){sortOptions.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"auto",icon:!this.state.sortDirection?"check":"empty",onClick:()=>{this.setState({sortDirection:undefined})}},external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.finder.sortAuto",{defaultMessage:"Best match"})))}return sortOptions}renderSearchBar(){const availableSavedObjectMetaData=this.getAvailableSavedObjectMetaData();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldSearch"],{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.finder.searchPlaceholder",{defaultMessage:"Search"}),"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.finder.searchPlaceholder",{defaultMessage:"Search"}),fullWidth:true,value:this.state.query,onChange:e=>{this.setState({query:e.target.value},this.fetchItems)},"data-test-subj":"savedObjectFinderSearchInput",isLoading:this.state.isFetchingItems})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilterGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"addPanelSortPopover",panelClassName:"euiFilterGroup__popoverPanel",panelPaddingSize:"none",isOpen:this.state.sortOpen,closePopover:()=>this.setState({sortOpen:false}),button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilterButton"],{onClick:()=>this.setState(({sortOpen:sortOpen})=>({sortOpen:!sortOpen})),iconType:"arrowDown",isSelected:this.state.sortOpen,"data-test-subj":"savedObjectFinderSortButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.finder.sortButtonLabel",{defaultMessage:"Sort"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],{watchedItemProps:["icon","disabled"],items:this.getSortOptions()})),this.props.showFilter&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"addPanelFilterPopover",panelClassName:"euiFilterGroup__popoverPanel",panelPaddingSize:"none",isOpen:this.state.filterOpen,closePopover:()=>this.setState({filterOpen:false}),button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilterButton"],{onClick:()=>this.setState(({filterOpen:filterOpen})=>({filterOpen:!filterOpen})),iconType:"arrowDown","data-test-subj":"savedObjectFinderFilterButton",isSelected:this.state.filterOpen,numFilters:this.props.savedObjectMetaData.length,hasActiveFilters:this.state.filteredTypes.length>0,numActiveFilters:this.state.filteredTypes.length},external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.finder.filterButtonLabel",{defaultMessage:"Types"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],{watchedItemProps:["icon","disabled"],items:this.props.savedObjectMetaData.map(metaData=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:metaData.type,disabled:!availableSavedObjectMetaData.includes(metaData),icon:this.state.filteredTypes.includes(metaData.type)?"check":"empty","data-test-subj":`savedObjectFinderFilter-${metaData.type}`,onClick:()=>{this.setState(({filteredTypes:filteredTypes})=>({filteredTypes:filteredTypes.includes(metaData.type)?filteredTypes.filter(t=>t!==metaData.type):[...filteredTypes,metaData.type],page:0}))}},metaData.name))})))),this.props.children?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},this.props.children):null)}renderListing(){const items=this.state.items.length===0?[]:this.getPageOfItems();const{onChoose:onChoose,savedObjectMetaData:savedObjectMetaData}=this.props;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,this.state.isFetchingItems&&this.state.items.length===0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{"data-test-subj":"savedObjectFinderLoadingIndicator"}))),items.length>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiListGroup"],{"data-test-subj":"savedObjectFinderItemList",maxWidth:false},items.map(item=>{const currentSavedObjectMetaData=savedObjectMetaData.find(metaData=>metaData.type===item.type);const fullName=currentSavedObjectMetaData.getTooltipForSavedObject?currentSavedObjectMetaData.getTooltipForSavedObject(item.savedObject):`${item.title} (${currentSavedObjectMetaData.name})`;const iconType=(currentSavedObjectMetaData||{getIconForSavedObject:()=>"document"}).getIconForSavedObject(item.savedObject);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiListGroupItem"],{key:item.id,iconType:iconType,label:item.title,onClick:onChoose?()=>{onChoose(item.id,item.type,fullName,item.savedObject)}:undefined,title:fullName,"data-test-subj":`savedObjectTitle${(item.title||"").split(" ").join("-")}`})})):!this.state.isFetchingItems&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{body:this.props.noItemsMessage}),this.getPageCount()>1&&(this.props.fixedPageSize?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPagination"],{activePage:this.state.page,pageCount:this.getPageCount(),onPageClick:page=>{this.setState({page:page})}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTablePagination"],{activePage:this.state.page,pageCount:this.getPageCount(),onChangePage:page=>{this.setState({page:page})},onChangeItemsPerPage:perPage=>{this.setState({perPage:perPage})},itemsPerPage:this.state.perPage,itemsPerPageOptions:[5,10,15,25]})))}}const getSavedObjectFinder=(savedObject,uiSettings)=>props=>external_kbnSharedDeps_React_default.a.createElement(saved_object_finder_SavedObjectFinderUi,_extends({},props,{savedObjects:savedObject,uiSettings:uiSettings}));var public_types=__webpack_require__(8);const public_plugin=()=>new plugin_SavedObjectsPublicPlugin}]);