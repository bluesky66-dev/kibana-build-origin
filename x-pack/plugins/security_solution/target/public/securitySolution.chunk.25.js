/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window["securitySolution_bundle_jsonpfunction"]=window["securitySolution_bundle_jsonpfunction"]||[]).push([[25],{1178:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"PinnedTabContentComponent",(function(){return PinnedTabContentComponent}));__webpack_require__.d(__webpack_exports__,"default",(function(){return PinnedTabContent}));var _elastic_eui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(72);var _elastic_eui__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_elastic_eui__WEBPACK_IMPORTED_MODULE_0__);var lodash_fp__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7);var lodash_fp__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash_fp__WEBPACK_IMPORTED_MODULE_1__);var react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6);var react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);var styled_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(73);var styled_components__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_3__);var react_redux__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(105);var react_redux__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_4__);var fast_deep_equal__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(107);var fast_deep_equal__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(fast_deep_equal__WEBPACK_IMPORTED_MODULE_5__);var _store_timeline__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(108);var _containers_index__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(407);var _body_column_headers_default_headers__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(142);var _body__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(400);var _footer__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(410);var _detections_components_alerts_table_default_config__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(204);var _common_components_events_viewer_event_details_width_context__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(272);var _common_store_sourcerer__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(137);var _common_store_sourcerer_model__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(117);var _store_timeline_defaults__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(118);var _common_containers_sourcerer__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(124);var _common_containers_use_full_screen__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(139);var _helpers__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(119);var _common_types_timeline__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(106);var _side_panel__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(280);var _common_hooks_use_selector__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(109);var _common_components_exit_full_screen__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(310);const StyledEuiFlyoutBody=styled_components__WEBPACK_IMPORTED_MODULE_3___default()(_elastic_eui__WEBPACK_IMPORTED_MODULE_0__["EuiFlyoutBody"]).withConfig({displayName:"StyledEuiFlyoutBody",componentId:"sc-1kqzlqh-0"})(["overflow-y:hidden;flex:1;.euiFlyoutBody__overflow{overflow:hidden;mask-image:none;}.euiFlyoutBody__overflowContent{padding:0;height:100%;display:flex;}"]);const StyledEuiFlyoutFooter=styled_components__WEBPACK_IMPORTED_MODULE_3___default()(_elastic_eui__WEBPACK_IMPORTED_MODULE_0__["EuiFlyoutFooter"]).withConfig({displayName:"StyledEuiFlyoutFooter",componentId:"sc-1kqzlqh-1"})(["background:none;padding:0;&.euiFlyoutFooter{","}"],({theme:theme})=>`padding: ${theme.eui.euiSizeS} 0 0 0;`);const ExitFullScreenFlexItem=styled_components__WEBPACK_IMPORTED_MODULE_3___default()(_elastic_eui__WEBPACK_IMPORTED_MODULE_0__["EuiFlexItem"]).withConfig({displayName:"ExitFullScreenFlexItem",componentId:"sc-1kqzlqh-2"})(["&.euiFlexItem{","}width:180px;"],({theme:theme})=>`margin: ${theme.eui.euiSizeS} 0 0 ${theme.eui.euiSizeS};`);const FullWidthFlexGroup=styled_components__WEBPACK_IMPORTED_MODULE_3___default()(_elastic_eui__WEBPACK_IMPORTED_MODULE_0__["EuiFlexGroup"]).withConfig({displayName:"FullWidthFlexGroup",componentId:"sc-1kqzlqh-3"})(["margin:0;width:100%;overflow:hidden;"]);const ScrollableFlexItem=styled_components__WEBPACK_IMPORTED_MODULE_3___default()(_elastic_eui__WEBPACK_IMPORTED_MODULE_0__["EuiFlexItem"]).withConfig({displayName:"ScrollableFlexItem",componentId:"sc-1kqzlqh-4"})(["overflow:hidden;"]);const VerticalRule=styled_components__WEBPACK_IMPORTED_MODULE_3___default.a.div.withConfig({displayName:"VerticalRule",componentId:"sc-1kqzlqh-5"})(["width:2px;height:100%;background:",";"],({theme:theme})=>theme.eui.euiColorLightShade);VerticalRule.displayName="VerticalRule";const PinnedTabContentComponent=({columns:columns,timelineId:timelineId,itemsPerPage:itemsPerPage,itemsPerPageOptions:itemsPerPageOptions,pinnedEventIds:pinnedEventIds,onEventClosed:onEventClosed,showExpandedDetails:showExpandedDetails,sort:sort})=>{const{browserFields:browserFields,docValueFields:docValueFields,loading:loadingSourcerer}=Object(_common_containers_sourcerer__WEBPACK_IMPORTED_MODULE_16__["b"])(_common_store_sourcerer_model__WEBPACK_IMPORTED_MODULE_14__["SourcererScopeName"].timeline);const{setTimelineFullScreen:setTimelineFullScreen,timelineFullScreen:timelineFullScreen}=Object(_common_containers_use_full_screen__WEBPACK_IMPORTED_MODULE_17__["b"])();const existingIndexNamesSelector=Object(react__WEBPACK_IMPORTED_MODULE_2__["useMemo"])(()=>_common_store_sourcerer__WEBPACK_IMPORTED_MODULE_13__["d"].getAllExistingIndexNamesSelector(),[]);const existingIndexNames=Object(_common_hooks_use_selector__WEBPACK_IMPORTED_MODULE_21__["a"])(existingIndexNamesSelector);const filterQuery=Object(react__WEBPACK_IMPORTED_MODULE_2__["useMemo"])(()=>{if(Object(lodash_fp__WEBPACK_IMPORTED_MODULE_1__["isEmpty"])(pinnedEventIds)){return""}const filterObj=Object.entries(pinnedEventIds).reduce((acc,[pinnedId,isPinned])=>{if(isPinned){return{...acc,bool:{...acc.bool,should:[...acc.bool.should,{match_phrase:{_id:pinnedId}}]}}}return acc},{bool:{should:[],minimum_should_match:1}});try{return JSON.stringify(filterObj)}catch{return""}},[pinnedEventIds]);const timelineQueryFields=Object(react__WEBPACK_IMPORTED_MODULE_2__["useMemo"])(()=>{const columnsHeader=Object(lodash_fp__WEBPACK_IMPORTED_MODULE_1__["isEmpty"])(columns)?_body_column_headers_default_headers__WEBPACK_IMPORTED_MODULE_8__["c"]:columns;const columnFields=columnsHeader.map(c=>c.id);return[...columnFields,..._detections_components_alerts_table_default_config__WEBPACK_IMPORTED_MODULE_11__["f"]]},[columns]);const timelineQuerySortField=Object(react__WEBPACK_IMPORTED_MODULE_2__["useMemo"])(()=>sort.map(({columnId:columnId,columnType:columnType,sortDirection:sortDirection})=>({field:columnId,type:columnType,direction:sortDirection})),[sort]);const[isQueryLoading,{events:events,totalCount:totalCount,pageInfo:pageInfo,loadPage:loadPage,updatedAt:updatedAt,refetch:refetch}]=Object(_containers_index__WEBPACK_IMPORTED_MODULE_7__["a"])({docValueFields:docValueFields,endDate:"",id:`pinned-${timelineId}`,indexNames:existingIndexNames,fields:timelineQueryFields,limit:itemsPerPage,filterQuery:filterQuery,skip:filterQuery==="",startDate:"",sort:timelineQuerySortField,timerangeKind:undefined});const handleOnPanelClosed=Object(react__WEBPACK_IMPORTED_MODULE_2__["useCallback"])(()=>{onEventClosed({tabType:_common_types_timeline__WEBPACK_IMPORTED_MODULE_19__["h"].pinned,timelineId:timelineId})},[timelineId,onEventClosed]);return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(FullWidthFlexGroup,{"data-test-subj":`${_common_types_timeline__WEBPACK_IMPORTED_MODULE_19__["h"].pinned}-tab`},timelineFullScreen&&setTimelineFullScreen!=null&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ExitFullScreenFlexItem,{grow:false},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_common_components_exit_full_screen__WEBPACK_IMPORTED_MODULE_22__["b"],{fullScreen:timelineFullScreen,setFullScreen:setTimelineFullScreen})),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ScrollableFlexItem,{grow:2},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_common_components_events_viewer_event_details_width_context__WEBPACK_IMPORTED_MODULE_12__["a"],null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(StyledEuiFlyoutBody,{"data-test-subj":`${_common_types_timeline__WEBPACK_IMPORTED_MODULE_19__["h"].pinned}-tab-flyout-body`,className:"timeline-flyout-body"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_body__WEBPACK_IMPORTED_MODULE_9__["a"],{activePage:pageInfo.activePage,browserFields:browserFields,data:events,id:timelineId,refetch:refetch,sort:sort,tabType:_common_types_timeline__WEBPACK_IMPORTED_MODULE_19__["h"].pinned,totalPages:Object(_helpers__WEBPACK_IMPORTED_MODULE_18__["j"])({itemsCount:totalCount,itemsPerPage:itemsPerPage})})),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(StyledEuiFlyoutFooter,{"data-test-subj":`${_common_types_timeline__WEBPACK_IMPORTED_MODULE_19__["h"].pinned}-tab-flyout-footer`,className:"timeline-flyout-footer"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_footer__WEBPACK_IMPORTED_MODULE_10__["a"],{activePage:pageInfo.activePage,"data-test-subj":"timeline-footer",updatedAt:updatedAt,height:_footer__WEBPACK_IMPORTED_MODULE_10__["b"],id:timelineId,isLive:false,isLoading:isQueryLoading||loadingSourcerer,itemsCount:events.length,itemsPerPage:itemsPerPage,itemsPerPageOptions:itemsPerPageOptions,onChangePage:loadPage,totalCount:totalCount})))),showExpandedDetails&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(VerticalRule,null),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ScrollableFlexItem,{grow:1},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_side_panel__WEBPACK_IMPORTED_MODULE_20__["a"],{browserFields:browserFields,docValueFields:docValueFields,handleOnPanelClosed:handleOnPanelClosed,tabType:_common_types_timeline__WEBPACK_IMPORTED_MODULE_19__["h"].pinned,timelineId:timelineId})))))};const makeMapStateToProps=()=>{const getTimeline=_store_timeline__WEBPACK_IMPORTED_MODULE_6__["b"].getTimelineByIdSelector();const mapStateToProps=(state,{timelineId:timelineId})=>{var _getTimeline,_expandedDetail$Timel;const timeline=(_getTimeline=getTimeline(state,timelineId))!==null&&_getTimeline!==void 0?_getTimeline:_store_timeline_defaults__WEBPACK_IMPORTED_MODULE_15__["a"];const{columns:columns,expandedDetail:expandedDetail,itemsPerPage:itemsPerPage,itemsPerPageOptions:itemsPerPageOptions,pinnedEventIds:pinnedEventIds,sort:sort}=timeline;return{columns:columns,timelineId:timelineId,itemsPerPage:itemsPerPage,itemsPerPageOptions:itemsPerPageOptions,pinnedEventIds:pinnedEventIds,showExpandedDetails:!!expandedDetail[_common_types_timeline__WEBPACK_IMPORTED_MODULE_19__["h"].pinned]&&!!((_expandedDetail$Timel=expandedDetail[_common_types_timeline__WEBPACK_IMPORTED_MODULE_19__["h"].pinned])!==null&&_expandedDetail$Timel!==void 0&&_expandedDetail$Timel.panelView),sort:sort}};return mapStateToProps};const mapDispatchToProps=(dispatch,{timelineId:timelineId})=>({onEventClosed:args=>{dispatch(_store_timeline__WEBPACK_IMPORTED_MODULE_6__["a"].toggleDetailPanel(args))}});const connector=Object(react_redux__WEBPACK_IMPORTED_MODULE_4__["connect"])(makeMapStateToProps,mapDispatchToProps);const PinnedTabContent=connector(react__WEBPACK_IMPORTED_MODULE_2___default.a.memo(PinnedTabContentComponent,(prevProps,nextProps)=>prevProps.itemsPerPage===nextProps.itemsPerPage&&prevProps.onEventClosed===nextProps.onEventClosed&&prevProps.showExpandedDetails===nextProps.showExpandedDetails&&prevProps.timelineId===nextProps.timelineId&&fast_deep_equal__WEBPACK_IMPORTED_MODULE_5___default()(prevProps.columns,nextProps.columns)&&fast_deep_equal__WEBPACK_IMPORTED_MODULE_5___default()(prevProps.itemsPerPageOptions,nextProps.itemsPerPageOptions)&&fast_deep_equal__WEBPACK_IMPORTED_MODULE_5___default()(prevProps.pinnedEventIds,nextProps.pinnedEventIds)&&fast_deep_equal__WEBPACK_IMPORTED_MODULE_5___default()(prevProps.sort,nextProps.sort)))}}]);