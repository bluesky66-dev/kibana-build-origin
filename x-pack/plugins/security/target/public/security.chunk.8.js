/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window["security_bundle_jsonpfunction"]=window["security_bundle_jsonpfunction"]||[]).push([[8],{101:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return RoleTableDisplay}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);var model=__webpack_require__(13);const RoleTableDisplay=({role:role,navigateToApp:navigateToApp})=>{let content;let path;if(typeof role==="string"){content=external_kbnSharedDeps_React_default.a.createElement("div",null,role);path=`security/roles/edit/${encodeURIComponent(role)}`}else if(Object(model["g"])(role)){content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:Object(model["d"])(role),"data-test-subj":"roleDeprecationTooltip"},external_kbnSharedDeps_React_default.a.createElement("div",null,role.name," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"alert",color:"warning",size:"s",className:"eui-alignTop"})));path=`security/roles/edit/${encodeURIComponent(role.name)}`}else{content=external_kbnSharedDeps_React_default.a.createElement("div",null,role.name);path=`security/roles/edit/${encodeURIComponent(role.name)}`}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:()=>navigateToApp("management",{path:path})},content)}},301:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"RoleMappingsGridPage",(function(){return role_mappings_grid_page_RoleMappingsGridPage}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(5);const EDIT_ROLE_MAPPING_PATH=`/edit`;const getEditRoleMappingHref=roleMappingName=>`${EDIT_ROLE_MAPPING_PATH}/${encodeURIComponent(roleMappingName)}`;var public_=__webpack_require__(6);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const CreateRoleMappingButton=({history:history})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],_extends({"data-test-subj":"createRoleMappingButton"},Object(public_["reactRouterNavigate"])(history,EDIT_ROLE_MAPPING_PATH),{fill:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.createRoleMappingButton",defaultMessage:"Create role mapping"}));const EmptyPrompt=({history:history})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"managementApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.emptyPromptTitle",defaultMessage:"Create your first role mapping"})),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.emptyPromptDescription",defaultMessage:"Role mappings control which roles are assigned to your users."}))),actions:external_kbnSharedDeps_React_default.a.createElement(CreateRoleMappingButton,{history:history}),"data-test-subj":"roleMappingsEmptyPrompt"});var components=__webpack_require__(98);var role_table_display=__webpack_require__(101);var badges=__webpack_require__(88);function role_mappings_grid_page_extends(){role_mappings_grid_page_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return role_mappings_grid_page_extends.apply(this,arguments)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class role_mappings_grid_page_RoleMappingsGridPage extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);_defineProperty(this,"renderTable",()=>{const{roleMappings:roleMappings,selectedItems:selectedItems,loadState:loadState}=this.state;const message=loadState==="loadingTable"?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.roleMappingTableLoadingMessage",defaultMessage:"Loading role mappingsâ€¦"}):undefined;const sorting={sort:{field:"name",direction:"asc"}};const pagination={initialPageSize:20,pageSizeOptions:[10,20,50]};const selection={onSelectionChange:newSelectedItems=>{this.setState({selectedItems:newSelectedItems})}};const search={toolsLeft:selectedItems.length?external_kbnSharedDeps_React_default.a.createElement(components["a"],{roleMappingsAPI:this.props.roleMappingsAPI,notifications:this.props.notifications},deleteRoleMappingsPrompt=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:()=>deleteRoleMappingsPrompt(selectedItems,this.onRoleMappingsDeleted),color:"danger","data-test-subj":"bulkDeleteActionButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.deleteRoleMappingButton",defaultMessage:"Delete {count, plural, one {role mapping} other {role mappings}}",values:{count:selectedItems.length}}))):undefined,toolsRight:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"secondary",iconType:"refresh",onClick:()=>this.reloadRoleMappings(),"data-test-subj":"reloadButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.reloadRoleMappingsButton",defaultMessage:"Reload"})),box:{incremental:true},filters:undefined};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{items:roleMappings,itemId:"name",columns:this.getColumnConfig(),search:search,sorting:sorting,selection:selection,pagination:pagination,loading:loadState==="loadingTable",message:message,isSelectable:true,rowProps:()=>({"data-test-subj":"roleMappingRow"})})});_defineProperty(this,"getColumnConfig",()=>{const config=[{field:"name",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.nameColumnName",{defaultMessage:"Name"}),sortable:true,render:roleMappingName=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],role_mappings_grid_page_extends({},Object(public_["reactRouterNavigate"])(this.props.history,getEditRoleMappingHref(roleMappingName)),{"data-test-subj":"roleMappingName"}),roleMappingName)},{field:"roles",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.rolesColumnName",{defaultMessage:"Roles"}),sortable:true,render:(entry,record)=>{const{roles:assignedRoleNames=[],role_templates:roleTemplates=[]}=record;if(roleTemplates.length>0){return external_kbnSharedDeps_React_default.a.createElement("span",{"data-test-subj":"roleMappingRoles"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.roleTemplates",{defaultMessage:"{templateCount, plural, one{# role template} other {# role templates}} defined",values:{templateCount:roleTemplates.length}}))}const roleLinks=assignedRoleNames.map((rolename,index)=>{var _this$state$roles$fin,_this$state$roles;const role=(_this$state$roles$fin=(_this$state$roles=this.state.roles)===null||_this$state$roles===void 0?void 0:_this$state$roles.find(r=>r.name===rolename))!==null&&_this$state$roles$fin!==void 0?_this$state$roles$fin:rolename;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,key:rolename},external_kbnSharedDeps_React_default.a.createElement(role_table_display["a"],{role:role,navigateToApp:this.props.navigateToApp}))});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s","data-test-subj":"roleMappingRoles",wrap:true},roleLinks)}},{field:"enabled",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.enabledColumnName",{defaultMessage:"Enabled"}),sortable:true,render:enabled=>{if(enabled){return external_kbnSharedDeps_React_default.a.createElement(badges["c"],{"data-test-subj":"roleMappingEnabled"})}return external_kbnSharedDeps_React_default.a.createElement(badges["b"],{"data-test-subj":"roleMappingEnabled"})}},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.actionsColumnName",{defaultMessage:"Actions"}),actions:[{render:record=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.actionEditTooltip",{defaultMessage:"Edit"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],role_mappings_grid_page_extends({"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.actionEditAriaLabel",{defaultMessage:`Edit '{name}'`,values:{name:record.name}}),iconType:"pencil",color:"primary","data-test-subj":`editRoleMappingButton-${record.name}`},Object(public_["reactRouterNavigate"])(this.props.history,getEditRoleMappingHref(record.name)))))},{render:record=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(components["a"],{roleMappingsAPI:this.props.roleMappingsAPI,notifications:this.props.notifications},deleteRoleMappingPrompt=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.actionDeleteTooltip",{defaultMessage:"Delete"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.actionDeleteAriaLabel",{defaultMessage:`Delete '{name}'`,values:{name:record.name}}),iconType:"trash",color:"danger","data-test-subj":`deleteRoleMappingButton-${record.name}`,onClick:()=>deleteRoleMappingPrompt([record],this.onRoleMappingsDeleted)})))))}]}];return config});_defineProperty(this,"onRoleMappingsDeleted",roleMappings=>{if(roleMappings.length){this.reloadRoleMappings()}});_defineProperty(this,"performInitialLoad",async()=>{try{const[roleMappings,roles]=await Promise.all([this.props.roleMappingsAPI.getRoleMappings(),this.props.rolesAPIClient.getRoles()]);this.setState({roleMappings:roleMappings,roles:roles})}catch(e){this.setState({error:e})}this.setState({loadState:"finished"})});_defineProperty(this,"reloadRoleMappings",()=>{this.setState({roleMappings:[],loadState:"loadingTable"});this.loadRoleMappings()});_defineProperty(this,"loadRoleMappings",async()=>{try{const roleMappings=await this.props.roleMappingsAPI.getRoleMappings();this.setState({roleMappings:roleMappings})}catch(e){this.setState({error:e})}this.setState({loadState:"finished"})});this.state={loadState:"loadingApp",roleMappings:null,roles:null,hasCompatibleRealms:true,selectedItems:[],error:undefined}}componentDidMount(){this.checkPrivileges()}render(){const{loadState:loadState,error:error,roleMappings:roleMappings}=this.state;if(loadState==="permissionDenied"){return external_kbnSharedDeps_React_default.a.createElement(components["c"],null)}if(loadState==="loadingApp"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(components["d"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.loadingRoleMappingsDescription",defaultMessage:"Loading role mappingsâ€¦"})))}if(error){const{body:{error:errorTitle,message:message,statusCode:statusCode}}=error;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.loadingRoleMappingsErrorTitle",defaultMessage:"Error loading Role mappings"}),color:"danger",iconType:"alert"},statusCode,": ",errorTitle," - ",message))}if(loadState==="finished"&&roleMappings&&roleMappings.length===0){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(EmptyPrompt,{history:this.props.history}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.roleMappingTitle",defaultMessage:"Role Mappings"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued",size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.roleMappingDescription",defaultMessage:"Role mappings define which roles are assigned to users from an external identity provider. {learnMoreLink}",values:{learnMoreLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:this.props.docLinks.links.security.mappingRoles,external:true,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.learnMoreLinkText",defaultMessage:"Learn more."}))}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],role_mappings_grid_page_extends({"data-test-subj":"createRoleMappingButton"},Object(public_["reactRouterNavigate"])(this.props.history,EDIT_ROLE_MAPPING_PATH)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.createRoleMappingButtonLabel",defaultMessage:"Create role mapping"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,!this.state.hasCompatibleRealms&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(components["b"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null)),this.renderTable())))}async checkPrivileges(){try{const{canManageRoleMappings:canManageRoleMappings,hasCompatibleRealms:hasCompatibleRealms}=await this.props.roleMappingsAPI.checkRoleMappingFeatures();this.setState({loadState:canManageRoleMappings?this.state.loadState:"permissionDenied",hasCompatibleRealms:hasCompatibleRealms});if(canManageRoleMappings){this.performInitialLoad()}}catch(e){this.setState({error:e,loadState:"finished"})}}}},88:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DeprecatedBadge}));__webpack_require__.d(__webpack_exports__,"b",(function(){return DisabledBadge}));__webpack_require__.d(__webpack_exports__,"c",(function(){return EnabledBadge}));__webpack_require__.d(__webpack_exports__,"d",(function(){return ReservedBadge}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(5);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);const OptionalToolTip=props=>{if(props.tooltipContent){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:props.tooltipContent},props.children)}return props.children};const DeprecatedBadge=props=>external_kbnSharedDeps_React_default.a.createElement(OptionalToolTip,{tooltipContent:props.tooltipContent},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{"data-test-subj":props["data-test-subj"],color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.deprecatedBadge",defaultMessage:"Deprecated"})));const DisabledBadge=props=>external_kbnSharedDeps_React_default.a.createElement(OptionalToolTip,{tooltipContent:props.tooltipContent},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{"data-test-subj":props["data-test-subj"],color:"hollow"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.disabledBadge",defaultMessage:"Disabled"})));const EnabledBadge=props=>external_kbnSharedDeps_React_default.a.createElement(OptionalToolTip,{tooltipContent:props.tooltipContent},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{"data-test-subj":props["data-test-subj"],color:"secondary"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.enabledBadge",defaultMessage:"Enabled"})));const ReservedBadge=props=>external_kbnSharedDeps_React_default.a.createElement(OptionalToolTip,{tooltipContent:props.tooltipContent},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{"data-test-subj":props["data-test-subj"],color:"primary"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.reservedBadge",defaultMessage:"Reserved"})))},98:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DeleteProvider}));__webpack_require__.d(__webpack_exports__,"b",(function(){return NoCompatibleRealms}));__webpack_require__.d(__webpack_exports__,"c",(function(){return PermissionDenied}));__webpack_require__.d(__webpack_exports__,"d",(function(){return SectionLoading}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);const DeleteProvider=({roleMappingsAPI:roleMappingsAPI,children:children,notifications:notifications})=>{const[roleMappings,setRoleMappings]=Object(external_kbnSharedDeps_React_["useState"])([]);const[isModalOpen,setIsModalOpen]=Object(external_kbnSharedDeps_React_["useState"])(false);const[isDeleteInProgress,setIsDeleteInProgress]=Object(external_kbnSharedDeps_React_["useState"])(false);const onSuccessCallback=Object(external_kbnSharedDeps_React_["useRef"])(null);const deleteRoleMappingsPrompt=(roleMappingsToDelete,onSuccess=(()=>undefined))=>{if(!roleMappingsToDelete||!roleMappingsToDelete.length){throw new Error("No Role Mappings specified for delete")}setIsModalOpen(true);setRoleMappings(roleMappingsToDelete);onSuccessCallback.current=onSuccess};const closeModal=()=>{setIsModalOpen(false);setRoleMappings([])};const deleteRoleMappings=async()=>{let result;setIsDeleteInProgress(true);try{result=await roleMappingsAPI.deleteRoleMappings(roleMappings.map(rm=>rm.name))}catch(e){notifications.toasts.addError(e,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.unknownError",{defaultMessage:"Error deleting role mappings"})});setIsDeleteInProgress(false);return}setIsDeleteInProgress(false);closeModal();const successfulDeletes=result.filter(res=>res.success);const erroredDeletes=result.filter(res=>!res.success);if(successfulDeletes.length>0){const hasMultipleSuccesses=successfulDeletes.length>1;const successMessage=hasMultipleSuccesses?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.successMultipleNotificationTitle",{defaultMessage:"Deleted {count} role mappings",values:{count:successfulDeletes.length}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.successSingleNotificationTitle",{defaultMessage:"Deleted role mapping '{name}'",values:{name:successfulDeletes[0].name}});notifications.toasts.addSuccess({title:successMessage,"data-test-subj":"deletedRoleMappingSuccessToast"});if(onSuccessCallback.current){onSuccessCallback.current(successfulDeletes.map(({name:name})=>name))}}if(erroredDeletes.length>0){const hasMultipleErrors=erroredDeletes.length>1;const errorMessage=hasMultipleErrors?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.errorMultipleNotificationTitle",{defaultMessage:"Error deleting {count} role mappings",values:{count:erroredDeletes.length}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.errorSingleNotificationTitle",{defaultMessage:"Error deleting role mapping '{name}'",values:{name:erroredDeletes[0].name}});notifications.toasts.addDanger(errorMessage)}};const renderModal=()=>{if(!isModalOpen){return null}const isSingle=roleMappings.length===1;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:isSingle?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.confirmModal.deleteSingleTitle",{defaultMessage:"Delete role mapping '{name}'?",values:{name:roleMappings[0].name}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.confirmModal.deleteMultipleTitle",{defaultMessage:"Delete {count} role mappings?",values:{count:roleMappings.length}}),onCancel:closeModal,onConfirm:deleteRoleMappings,cancelButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.confirmModal.cancelButtonLabel",{defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.confirmModal.confirmButtonLabel",{defaultMessage:"Delete {count, plural, one {role mapping} other {role mappings}}",values:{count:roleMappings.length}}),confirmButtonDisabled:isDeleteInProgress,buttonColor:"danger","data-test-subj":"deleteRoleMappingConfirmationModal"},!isSingle?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.confirmModal.deleteMultipleListDescription",{defaultMessage:"You are about to delete these role mappings:"})),external_kbnSharedDeps_React_default.a.createElement("ul",null,roleMappings.map(({name:name})=>external_kbnSharedDeps_React_default.a.createElement("li",{key:name},name)))):null)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,children(deleteRoleMappingsPrompt),renderModal())};var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(5);var public_=__webpack_require__(6);const NoCompatibleRealms=()=>{const docLinks=Object(public_["useKibana"])().services.docLinks;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.noCompatibleRealmsErrorTitle",defaultMessage:"No compatible realms are enabled in Elasticsearch"}),color:"warning",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.noCompatibleRealmsErrorDescription",defaultMessage:"Role mappings will not be applied to any users. Contact your system administrator and refer to the {link} for more information.",values:{link:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:docLinks.links.security.mappingRoles,external:true,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.noCompatibleRealmsErrorLinkText",defaultMessage:"docs"}))}}))};const PermissionDenied=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{horizontalPosition:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"securityApp",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.deniedPermissionTitle",defaultMessage:"You need permission to manage role mappings"})),body:external_kbnSharedDeps_React_default.a.createElement("p",{"data-test-subj":"permissionDeniedMessage"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.deniedPermissionDescription",defaultMessage:"Contact your system administrator."}))})));const SectionLoading=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"xl"}),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued"},props.children||external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.editRoleMapping.loadingRoleMappingDescription",defaultMessage:"Loadingâ€¦"})),"data-test-subj":"sectionLoading"})}}]);