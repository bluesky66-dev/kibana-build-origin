(window["visTypeVega_bundle_jsonpfunction"]=window["visTypeVega_bundle_jsonpfunction"]||[]).push([[4],{144:function(module,exports){ace.define("ace/mode/hjson_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(acequire,exports,module){"use strict";var oop=acequire("../lib/oop");var TextHighlightRules=acequire("./text_highlight_rules").TextHighlightRules;var HjsonHighlightRules=function(){this.$rules={start:[{include:"#comments"},{include:"#rootObject"},{include:"#value"}],"#array":[{token:"paren.lparen",regex:/\[/,push:[{token:"paren.rparen",regex:/\]/,next:"pop"},{include:"#value"},{include:"#comments"},{token:"text",regex:/,|$/},{token:"invalid.illegal",regex:/[^\s\]]/},{defaultToken:"array"}]}],"#comments":[{token:["comment.punctuation","comment.line"],regex:/(#)(.*$)/},{token:"comment.punctuation",regex:/\/\*/,push:[{token:"comment.punctuation",regex:/\*\//,next:"pop"},{defaultToken:"comment.block"}]},{token:["comment.punctuation","comment.line"],regex:/(\/\/)(.*$)/}],"#constant":[{token:"constant",regex:/\b(?:true|false|null)\b/}],"#keyname":[{token:"keyword",regex:/(?:[^,\{\[\}\]\s]+|"(?:[^"\\]|\\.)*")\s*(?=:)/}],"#mstring":[{token:"string",regex:/'''/,push:[{token:"string",regex:/'''/,next:"pop"},{defaultToken:"string"}]}],"#number":[{token:"constant.numeric",regex:/-?(?:0|[1-9]\d*)(?:(?:\.\d+)?(?:[eE][+-]?\d+)?)?/,comment:"handles integer and decimal numbers"}],"#object":[{token:"paren.lparen",regex:/\{/,push:[{token:"paren.rparen",regex:/\}/,next:"pop"},{include:"#keyname"},{include:"#value"},{token:"text",regex:/:/},{token:"text",regex:/,/},{defaultToken:"paren"}]}],"#rootObject":[{token:"paren",regex:/(?=\s*(?:[^,\{\[\}\]\s]+|"(?:[^"\\]|\\.)*")\s*:)/,push:[{token:"paren.rparen",regex:/---none---/,next:"pop"},{include:"#keyname"},{include:"#value"},{token:"text",regex:/:/},{token:"text",regex:/,/},{defaultToken:"paren"}]}],"#string":[{token:"string",regex:/"/,push:[{token:"string",regex:/"/,next:"pop"},{token:"constant.language.escape",regex:/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/},{token:"invalid.illegal",regex:/\\./},{defaultToken:"string"}]}],"#ustring":[{token:"string",regex:/\b[^:,0-9\-\{\[\}\]\s].*$/}],"#value":[{include:"#constant"},{include:"#number"},{include:"#string"},{include:"#array"},{include:"#object"},{include:"#comments"},{include:"#mstring"},{include:"#ustring"}]};this.normalizeRules()};HjsonHighlightRules.metaData={fileTypes:["hjson"],foldingStartMarker:"(?x:     # turn on extended mode\n              ^    # a line beginning with\n              \\s*    # some optional space\n              [{\\[]  # the start of an object or array\n              (?!    # but not followed by\n              .*   # whatever\n              [}\\]]  # and the close of an object or array\n              ,?   # an optional comma\n              \\s*  # some optional space\n              $    # at the end of the line\n              )\n              |    # ...or...\n              [{\\[]  # the start of an object or array\n              \\s*    # some optional space\n              $    # at the end of the line\n            )",foldingStopMarker:"(?x:   # turn on extended mode\n             ^    # a line beginning with\n             \\s*  # some optional space\n             [}\\]]  # and the close of an object or array\n             )",keyEquivalent:"^~J",name:"Hjson",scopeName:"source.hjson"};oop.inherits(HjsonHighlightRules,TextHighlightRules);exports.HjsonHighlightRules=HjsonHighlightRules}));ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(acequire,exports,module){"use strict";var oop=acequire("../../lib/oop");var Range=acequire("../../range").Range;var BaseFoldMode=acequire("./fold_mode").FoldMode;var FoldMode=exports.FoldMode=function(commentRegex){if(commentRegex){this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+commentRegex.start));this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+commentRegex.end))}};oop.inherits(FoldMode,BaseFoldMode);(function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/;this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/;this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/;this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/;this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/;this._getFoldWidgetBase=this.getFoldWidget;this.getFoldWidget=function(session,foldStyle,row){var line=session.getLine(row);if(this.singleLineBlockCommentRe.test(line)){if(!this.startRegionRe.test(line)&&!this.tripleStarBlockCommentRe.test(line))return""}var fw=this._getFoldWidgetBase(session,foldStyle,row);if(!fw&&this.startRegionRe.test(line))return"start";return fw};this.getFoldWidgetRange=function(session,foldStyle,row,forceMultiline){var line=session.getLine(row);if(this.startRegionRe.test(line))return this.getCommentRegionBlock(session,line,row);var match=line.match(this.foldingStartMarker);if(match){var i=match.index;if(match[1])return this.openingBracketBlock(session,match[1],row,i);var range=session.getCommentFoldRange(row,i+match[0].length,1);if(range&&!range.isMultiLine()){if(forceMultiline){range=this.getSectionRange(session,row)}else if(foldStyle!="all")range=null}return range}if(foldStyle==="markbegin")return;var match=line.match(this.foldingStopMarker);if(match){var i=match.index+match[0].length;if(match[1])return this.closingBracketBlock(session,match[1],row,i);return session.getCommentFoldRange(row,i,-1)}};this.getSectionRange=function(session,row){var line=session.getLine(row);var startIndent=line.search(/\S/);var startRow=row;var startColumn=line.length;row=row+1;var endRow=row;var maxRow=session.getLength();while(++row<maxRow){line=session.getLine(row);var indent=line.search(/\S/);if(indent===-1)continue;if(startIndent>indent)break;var subRange=this.getFoldWidgetRange(session,"all",row);if(subRange){if(subRange.start.row<=startRow){break}else if(subRange.isMultiLine()){row=subRange.end.row}else if(startIndent==indent){break}}endRow=row}return new Range(startRow,startColumn,endRow,session.getLine(endRow).length)};this.getCommentRegionBlock=function(session,line,row){var startColumn=line.search(/\s*$/);var maxRow=session.getLength();var startRow=row;var re=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/;var depth=1;while(++row<maxRow){line=session.getLine(row);var m=re.exec(line);if(!m)continue;if(m[1])depth--;else depth++;if(!depth)break}var endRow=row;if(endRow>startRow){return new Range(startRow,startColumn,endRow,line.length)}}}).call(FoldMode.prototype)}));ace.define("ace/mode/hjson",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/hjson_highlight_rules","ace/mode/folding/cstyle"],(function(acequire,exports,module){"use strict";var oop=acequire("../lib/oop");var TextMode=acequire("./text").Mode;var HjsonHighlightRules=acequire("./hjson_highlight_rules").HjsonHighlightRules;var FoldMode=acequire("./folding/cstyle").FoldMode;var Mode=function(){this.HighlightRules=HjsonHighlightRules;this.foldingRules=new FoldMode};oop.inherits(Mode,TextMode);(function(){this.lineCommentStart="//";this.blockComment={start:"/*",end:"*/"};this.$id="ace/mode/hjson"}).call(Mode.prototype);exports.Mode=Mode}))},145:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(146);case"v7light":return __webpack_require__(148);case"v8dark":return __webpack_require__(150);case"v8light":return __webpack_require__(152)}},146:function(module,exports,__webpack_require__){var api=__webpack_require__(38);var content=__webpack_require__(147);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},147:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(37);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".visEditor--vega .visEditorSidebar__config {\n  padding: 0; }\n\n@media only screen and (max-width: 574px) {\n  .vgaEditor {\n    scrollbar-width: thin;\n    max-height: 240px;\n    overflow-y: auto; }\n    .vgaEditor::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .vgaEditor::-webkit-scrollbar-thumb {\n      background-color: rgba(152, 162, 179, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .vgaEditor::-webkit-scrollbar-corner, .vgaEditor::-webkit-scrollbar-track {\n      background-color: transparent; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .vgaEditor {\n    scrollbar-width: thin;\n    max-height: 240px;\n    overflow-y: auto; }\n    .vgaEditor::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .vgaEditor::-webkit-scrollbar-thumb {\n      background-color: rgba(152, 162, 179, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .vgaEditor::-webkit-scrollbar-corner, .vgaEditor::-webkit-scrollbar-track {\n      background-color: transparent; } }\n\n@media only screen and (min-width: 768px) and (max-width: 991px) {\n  .vgaEditor {\n    scrollbar-width: thin;\n    max-height: 240px;\n    overflow-y: auto; }\n    .vgaEditor::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .vgaEditor::-webkit-scrollbar-thumb {\n      background-color: rgba(152, 162, 179, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .vgaEditor::-webkit-scrollbar-corner, .vgaEditor::-webkit-scrollbar-track {\n      background-color: transparent; } }\n\n.vgaEditor__aceEditorActions {\n  position: absolute;\n  z-index: 1000;\n  top: 8px;\n  right: 40px;\n  line-height: 1; }\n",""]);module.exports=exports},148:function(module,exports,__webpack_require__){var api=__webpack_require__(38);var content=__webpack_require__(149);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},149:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(37);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".visEditor--vega .visEditorSidebar__config {\n  padding: 0; }\n\n@media only screen and (max-width: 574px) {\n  .vgaEditor {\n    scrollbar-width: thin;\n    max-height: 240px;\n    overflow-y: auto; }\n    .vgaEditor::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .vgaEditor::-webkit-scrollbar-thumb {\n      background-color: rgba(105, 112, 125, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .vgaEditor::-webkit-scrollbar-corner, .vgaEditor::-webkit-scrollbar-track {\n      background-color: transparent; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .vgaEditor {\n    scrollbar-width: thin;\n    max-height: 240px;\n    overflow-y: auto; }\n    .vgaEditor::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .vgaEditor::-webkit-scrollbar-thumb {\n      background-color: rgba(105, 112, 125, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .vgaEditor::-webkit-scrollbar-corner, .vgaEditor::-webkit-scrollbar-track {\n      background-color: transparent; } }\n\n@media only screen and (min-width: 768px) and (max-width: 991px) {\n  .vgaEditor {\n    scrollbar-width: thin;\n    max-height: 240px;\n    overflow-y: auto; }\n    .vgaEditor::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .vgaEditor::-webkit-scrollbar-thumb {\n      background-color: rgba(105, 112, 125, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .vgaEditor::-webkit-scrollbar-corner, .vgaEditor::-webkit-scrollbar-track {\n      background-color: transparent; } }\n\n.vgaEditor__aceEditorActions {\n  position: absolute;\n  z-index: 1000;\n  top: 8px;\n  right: 40px;\n  line-height: 1; }\n",""]);module.exports=exports},150:function(module,exports,__webpack_require__){var api=__webpack_require__(38);var content=__webpack_require__(151);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},151:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(37);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".visEditor--vega .visEditorSidebar__config {\n  padding: 0; }\n\n@media only screen and (max-width: 574px) {\n  .vgaEditor {\n    scrollbar-width: thin;\n    max-height: 240px;\n    overflow-y: auto; }\n    .vgaEditor::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .vgaEditor::-webkit-scrollbar-thumb {\n      background-color: rgba(152, 162, 179, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .vgaEditor::-webkit-scrollbar-corner, .vgaEditor::-webkit-scrollbar-track {\n      background-color: transparent; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .vgaEditor {\n    scrollbar-width: thin;\n    max-height: 240px;\n    overflow-y: auto; }\n    .vgaEditor::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .vgaEditor::-webkit-scrollbar-thumb {\n      background-color: rgba(152, 162, 179, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .vgaEditor::-webkit-scrollbar-corner, .vgaEditor::-webkit-scrollbar-track {\n      background-color: transparent; } }\n\n@media only screen and (min-width: 768px) and (max-width: 991px) {\n  .vgaEditor {\n    scrollbar-width: thin;\n    max-height: 240px;\n    overflow-y: auto; }\n    .vgaEditor::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .vgaEditor::-webkit-scrollbar-thumb {\n      background-color: rgba(152, 162, 179, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .vgaEditor::-webkit-scrollbar-corner, .vgaEditor::-webkit-scrollbar-track {\n      background-color: transparent; } }\n\n.vgaEditor__aceEditorActions {\n  position: absolute;\n  z-index: 1000;\n  top: 8px;\n  right: 40px;\n  line-height: 1; }\n",""]);module.exports=exports},152:function(module,exports,__webpack_require__){var api=__webpack_require__(38);var content=__webpack_require__(153);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},153:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(37);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".visEditor--vega .visEditorSidebar__config {\n  padding: 0; }\n\n@media only screen and (max-width: 574px) {\n  .vgaEditor {\n    scrollbar-width: thin;\n    max-height: 240px;\n    overflow-y: auto; }\n    .vgaEditor::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .vgaEditor::-webkit-scrollbar-thumb {\n      background-color: rgba(105, 112, 125, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .vgaEditor::-webkit-scrollbar-corner, .vgaEditor::-webkit-scrollbar-track {\n      background-color: transparent; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .vgaEditor {\n    scrollbar-width: thin;\n    max-height: 240px;\n    overflow-y: auto; }\n    .vgaEditor::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .vgaEditor::-webkit-scrollbar-thumb {\n      background-color: rgba(105, 112, 125, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .vgaEditor::-webkit-scrollbar-corner, .vgaEditor::-webkit-scrollbar-track {\n      background-color: transparent; } }\n\n@media only screen and (min-width: 768px) and (max-width: 991px) {\n  .vgaEditor {\n    scrollbar-width: thin;\n    max-height: 240px;\n    overflow-y: auto; }\n    .vgaEditor::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .vgaEditor::-webkit-scrollbar-thumb {\n      background-color: rgba(105, 112, 125, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .vgaEditor::-webkit-scrollbar-corner, .vgaEditor::-webkit-scrollbar-track {\n      background-color: transparent; } }\n\n.vgaEditor__aceEditorActions {\n  position: absolute;\n  z-index: 1000;\n  top: 8px;\n  right: 40px;\n  line-height: 1; }\n",""]);module.exports=exports},214:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",(function(){return VegaVisEditor}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(8);var json_stringify_pretty_compact=__webpack_require__(62);var json_stringify_pretty_compact_default=__webpack_require__.n(json_stringify_pretty_compact);var hjson=__webpack_require__(10);var hjson_default=__webpack_require__.n(hjson);var mode_hjson=__webpack_require__(144);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(3);var services=__webpack_require__(1);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(15);function VegaHelpMenu(){const[isPopoverOpen,setIsPopoverOpen]=Object(external_kbnSharedDeps_React_["useState"])(false);const onButtonClick=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setIsPopoverOpen(!isPopoverOpen),[isPopoverOpen]);const closePopover=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setIsPopoverOpen(false),[]);const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"questionInCircle",onClick:onButtonClick,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVega.editor.vegaHelpButtonAriaLabel",{defaultMessage:"Vega help"})});const items=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"vegaHelp",href:"https://www.elastic.co/guide/en/kibana/master/vega-graph.html",target:"_blank",onClick:closePopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visTypeVega.editor.vegaHelpLinkText",defaultMessage:"Kibana Vega help"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"vegaLiteDocs",href:"https://vega.github.io/vega-lite/docs/",target:"_blank",onClick:closePopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visTypeVega.editor.vegaLiteDocumentationLinkText",defaultMessage:"Vega-Lite documentation"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"vegaDoc",href:"https://vega.github.io/vega/docs/",target:"_blank",onClick:closePopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visTypeVega.editor.vegaDocumentationLinkText",defaultMessage:"Vega documentation"}))];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"helpMenu",button:button,isOpen:isPopoverOpen,closePopover:closePopover,panelPaddingSize:"none",anchorPosition:"downLeft"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],{items:items}))}function VegaActionsMenu({formatHJson:formatHJson,formatJson:formatJson}){const[isPopoverOpen,setIsPopoverOpen]=Object(external_kbnSharedDeps_React_["useState"])(false);const onButtonClick=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setIsPopoverOpen(isOpen=>!isOpen),[]);const onHJsonCLick=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{formatHJson();setIsPopoverOpen(false)},[formatHJson]);const onJsonCLick=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{formatJson();setIsPopoverOpen(false)},[formatJson]);const closePopover=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setIsPopoverOpen(false),[]);const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"wrench",onClick:onButtonClick,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVega.editor.vegaEditorOptionsButtonAriaLabel",{defaultMessage:"Vega editor options"})});const items=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"hjson",onClick:onHJsonCLick},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visTypeVega.editor.reformatAsHJSONButtonLabel",defaultMessage:"Reformat as HJSON"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"json",onClick:onJsonCLick},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visTypeVega.editor.reformatAsJSONButtonLabel",defaultMessage:"Reformat as JSON, delete comments"}))];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"actionsMenu",button:button,isOpen:isPopoverOpen,closePopover:closePopover,panelPaddingSize:"none",anchorPosition:"downLeft"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],{items:items}))}var vega_editor=__webpack_require__(145);const aceOptions={maxLines:Infinity,highlightActiveLine:false,showPrintMargin:false,tabSize:2,useSoftTabs:true,wrap:true};const hjsonStringifyOptions={bracesSameLine:true,keepWsc:true};function format(value,stringify,options){try{const spec=hjson_default.a.parse(value,{legacyRoot:false,keepWsc:true});return stringify(spec,options)}catch(err){Object(services["e"])().toasts.addError(err,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVega.editor.formatError",{defaultMessage:"Error formatting spec"})});return value}}function VegaVisEditor({stateParams:stateParams,setValue:setValue}){const onChange=Object(external_kbnSharedDeps_React_["useCallback"])(value=>{setValue("spec",value)},[setValue]);const formatJson=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setValue("spec",format(stateParams.spec,json_stringify_pretty_compact_default.a)),[setValue,stateParams.spec]);const formatHJson=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setValue("spec",format(stateParams.spec,hjson_default.a.stringify,hjsonStringifyOptions)),[setValue,stateParams.spec]);return external_kbnSharedDeps_React_default.a.createElement("div",{className:"vgaEditor"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeEditor"],{"data-test-subj":"vega-editor",mode:"hjson",theme:"textmate",width:"100%",height:"auto",onChange:onChange,value:stateParams.spec,setOptions:aceOptions}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"vgaEditor__aceEditorActions"},external_kbnSharedDeps_React_default.a.createElement(VegaHelpMenu,null),external_kbnSharedDeps_React_default.a.createElement(VegaActionsMenu,{formatHJson:formatHJson,formatJson:formatJson})))}},37:function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item,useSourceMap);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list};function cssWithMappingToString(item,useSourceMap){var content=item[1]||"";var cssMapping=item[3];if(!cssMapping){return content}if(useSourceMap&&typeof btoa==="function"){var sourceMapping=toComment(cssMapping);var sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));var data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}},38:function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&btoa){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},62:function(module,exports){function stringify(obj,options){options=options||{};var indent=JSON.stringify([1],null,get(options,"indent",2)).slice(2,-3);var addMargin=get(options,"margins",false);var maxLength=indent===""?Infinity:get(options,"maxLength",80);return function _stringify(obj,currentIndent,reserved){if(obj&&typeof obj.toJSON==="function"){obj=obj.toJSON()}var string=JSON.stringify(obj);if(string===undefined){return string}var length=maxLength-currentIndent.length-reserved;if(string.length<=length){var prettified=prettify(string,addMargin);if(prettified.length<=length){return prettified}}if(typeof obj==="object"&&obj!==null){var nextIndent=currentIndent+indent;var items=[];var delimiters;var comma=function(array,index){return index===array.length-1?0:1};if(Array.isArray(obj)){for(var index=0;index<obj.length;index++){items.push(_stringify(obj[index],nextIndent,comma(obj,index))||"null")}delimiters="[]"}else{Object.keys(obj).forEach((function(key,index,array){var keyPart=JSON.stringify(key)+": ";var value=_stringify(obj[key],nextIndent,keyPart.length+comma(array,index));if(value!==undefined){items.push(keyPart+value)}}));delimiters="{}"}if(items.length>0){return[delimiters[0],indent+items.join(",\n"+nextIndent),delimiters[1]].join("\n"+currentIndent)}}return string}(obj,"",0)}var stringOrChar=/("(?:[^\\"]|\\.)*")|[:,\][}{]/g;function prettify(string,addMargin){var m=addMargin?" ":"";var tokens={"{":"{"+m,"[":"["+m,"}":m+"}","]":m+"]",",":", ",":":": "};return string.replace(stringOrChar,(function(match,string){return string?match:tokens[match]}))}function get(options,name,defaultValue){return name in options?options[name]:defaultValue}module.exports=stringify}}]);