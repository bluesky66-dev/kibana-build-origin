/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window["indexLifecycleManagement_bundle_jsonpfunction"]=window["indexLifecycleManagement_bundle_jsonpfunction"]||[]).push([[1],Array(33).concat([function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&btoa){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item,useSourceMap);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list};function cssWithMappingToString(item,useSourceMap){var content=item[1]||"";var cssMapping=item[3];if(!cssMapping){return content}if(useSourceMap&&typeof btoa==="function"){var sourceMapping=toComment(cssMapping);var sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));var data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}},function(module,exports,__webpack_require__){"use strict";if(true){module.exports=__webpack_require__(38)}else{}},function(module,exports){var getRandomValues=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function whatwgRNG(){getRandomValues(rnds8);return rnds8}}else{var rnds=new Array(16);module.exports=function mathRNG(){for(var i=0,r;i<16;i++){if((i&3)===0)r=Math.random()*4294967296;rnds[i]=r>>>((i&3)<<3)&255}return rnds}}},function(module,exports){var byteToHex=[];for(var i=0;i<256;++i){byteToHex[i]=(i+256).toString(16).substr(1)}function bytesToUuid(buf,offset){var i=offset||0;var bth=byteToHex;return[bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]].join("")}module.exports=bytesToUuid},function(module,exports){function t(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function n(t){return!!t&&!!t[H]}function r(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var n=Object.getPrototypeOf(t);return!n||n===Object.prototype}(t)||Array.isArray(t)||!!t[G]||!!t.constructor[G]||c(t)||s(t))}function e(t,n,r){void 0===r&&(r=!1),0===i(t)?(r?Object.keys:Q)(t).forEach((function(e){r&&"symbol"==typeof e||n(e,t[e],t)})):t.forEach((function(r,e){return n(e,r,t)}))}function i(t){var n=t[H];return n?n.t>3?n.t-4:n.t:Array.isArray(t)?1:c(t)?2:s(t)?3:0}function u(t,n){return 2===i(t)?t.has(n):Object.prototype.hasOwnProperty.call(t,n)}function o(t,n){return 2===i(t)?t.get(n):t[n]}function f(t,n,r){var e=i(t);2===e?t.set(n,r):3===e?(t.delete(n),t.add(r)):t[n]=r}function a(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}function c(t){return W&&t instanceof Map}function s(t){return X&&t instanceof Set}function v(t){return t.i||t.u}function p(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var n=T(t);delete n[H];for(var r=Q(n),e=0;e<r.length;e++){var i=r[e],u=n[i];!1===u.writable&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[i]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),n)}function l(t,u){return void 0===u&&(u=!1),d(t)||n(t)||!r(t)?t:(i(t)>1&&(t.set=t.add=t.clear=t.delete=h),Object.freeze(t),u&&e(t,(function(t,n){return l(n,!0)}),!0),t)}function h(){t(2)}function d(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function _(n){var r=U[n];return r||t(18,n),r}function y(t,n){U[t]||(U[t]=n)}function b(){return J}function m(t,n){n&&(_("Patches"),t.o=[],t.s=[],t.v=n)}function j(t){O(t),t.p.forEach(w),t.p=null}function O(t){t===J&&(J=t.l)}function x(t){return J={p:[],l:J,h:t,_:!0,m:0}}function w(t){var n=t[H];0===n.t||1===n.t?n.j():n.O=!0}function S(n,e){e.m=e.p.length;var i=e.p[0],u=void 0!==n&&n!==i;return e.h.S||_("ES5").M(e,n,u),u?(i[H].P&&(j(e),t(4)),r(n)&&(n=M(e,n),e.l||g(e,n)),e.o&&_("Patches").g(i[H],n,e.o,e.s)):n=M(e,i,[]),j(e),e.o&&e.v(e.o,e.s),n!==B?n:void 0}function M(t,n,r){if(d(n))return n;var i=n[H];if(!i)return e(n,(function(e,u){return P(t,i,n,e,u,r)}),!0),n;if(i.A!==t)return n;if(!i.P)return g(t,i.u,!0),i.u;if(!i.R){i.R=!0,i.A.m--;var u=4===i.t||5===i.t?i.i=p(i.k):i.i;e(3===i.t?new Set(u):u,(function(n,e){return P(t,i,u,n,e,r)})),g(t,u,!1),r&&t.o&&_("Patches").F(i,r,t.o,t.s)}return i.i}function P(t,e,i,o,a,c){if(n(a)){var s=M(t,a,c&&e&&3!==e.t&&!u(e.D,o)?c.concat(o):void 0);if(f(i,o,s),!n(s))return;t._=!1}if(r(a)&&!d(a)){if(!t.h.K&&t.m<1)return;M(t,a),e&&e.A.l||g(t,a)}}function g(t,n,r){void 0===r&&(r=!1),t.h.K&&t._&&l(n,r)}function A(t,n){var r=t[H];return(r?v(r):t)[n]}function z(t,n){if(n in t)for(var r=Object.getPrototypeOf(t);r;){var e=Object.getOwnPropertyDescriptor(r,n);if(e)return e;r=Object.getPrototypeOf(r)}}function E(t){t.P||(t.P=!0,t.l&&E(t.l))}function R(t){t.i||(t.i=p(t.u))}function k(t,n,r){var e=c(n)?_("MapSet").$(n,r):s(n)?_("MapSet").C(n,r):t.S?function(t,n){var r=Array.isArray(t),e={t:r?1:0,A:n?n.A:b(),P:!1,R:!1,D:{},l:n,u:t,k:null,i:null,j:null,I:!1},i=e,u=V;r&&(i=[e],u=Y);var o=Proxy.revocable(i,u),f=o.revoke,a=o.proxy;return e.k=a,e.j=f,a}(n,r):_("ES5").J(n,r);return(r?r.A:b()).p.push(e),e}function F(u){return n(u)||t(22,u),function t(n){if(!r(n))return n;var u,a=n[H],c=i(n);if(a){if(!a.P&&(a.t<4||!_("ES5").N(a)))return a.u;a.R=!0,u=D(n,c),a.R=!1}else u=D(n,c);return e(u,(function(n,r){a&&o(a.u,n)===r||f(u,n,t(r))})),3===c?new Set(u):u}(u)}function D(t,n){switch(n){case 2:return new Map(t);case 3:return Array.from(t)}return p(t)}function K(){function t(t,n){var r=f[t];return r?r.enumerable=n:f[t]=r={configurable:!0,enumerable:n,get:function(){return V.get(this[H],t)},set:function(n){V.set(this[H],t,n)}},r}function r(t){for(var n=t.length-1;n>=0;n--){var r=t[n][H];if(!r.P)switch(r.t){case 5:o(r)&&E(r);break;case 4:i(r)&&E(r)}}}function i(t){for(var n=t.u,r=t.k,e=Q(r),i=e.length-1;i>=0;i--){var o=e[i];if(o!==H){var f=n[o];if(void 0===f&&!u(n,o))return!0;var c=r[o],s=c&&c[H];if(s?s.u!==f:!a(c,f))return!0}}var v=!!n[H];return e.length!==Q(n).length+(v?0:1)}function o(t){var n=t.k;if(n.length!==t.u.length)return!0;var r=Object.getOwnPropertyDescriptor(n,n.length-1);return!(!r||r.get)}var f={};y("ES5",{J:function(n,r){var e=Array.isArray(n),i=function(n,r){if(n){for(var e=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(e,""+i,t(i,!0));return e}var u=T(r);delete u[H];for(var o=Q(u),f=0;f<o.length;f++){var a=o[f];u[a]=t(a,n||!!u[a].enumerable)}return Object.create(Object.getPrototypeOf(r),u)}(e,n),u={t:e?5:4,A:r?r.A:b(),P:!1,R:!1,D:{},l:r,u:n,k:i,i:null,O:!1,I:!1};return Object.defineProperty(i,H,{value:u,writable:!0}),i},M:function(t,i,f){f?n(i)&&i[H].A===t&&r(t.p):(t.o&&function t(n){if(n&&"object"==typeof n){var r=n[H];if(r){var i=r.u,f=r.k,a=r.D,c=r.t;if(4===c)e(f,(function(n){n!==H&&(void 0!==i[n]||u(i,n)?a[n]||t(f[n]):(a[n]=!0,E(r)))})),e(i,(function(t){void 0!==f[t]||u(f,t)||(a[t]=!1,E(r))}));else if(5===c){if(o(r)&&(E(r),a.length=!0),f.length<i.length)for(var s=f.length;s<i.length;s++)a[s]=!1;else for(var v=i.length;v<f.length;v++)a[v]=!0;for(var p=Math.min(f.length,i.length),l=0;l<p;l++)void 0===a[l]&&t(f[l])}}}}(t.p[0]),r(t.p))},N:function(t){return 4===t.t?i(t):o(t)}})}function $(){function f(t){if(!r(t))return t;if(Array.isArray(t))return t.map(f);if(c(t))return new Map(Array.from(t.entries()).map((function(t){return[t[0],f(t[1])]})));if(s(t))return new Set(Array.from(t).map(f));var n=Object.create(Object.getPrototypeOf(t));for(var e in t)n[e]=f(t[e]);return n}function a(t){return n(t)?f(t):t}var v="add";y("Patches",{W:function(n,r){return r.forEach((function(r){for(var e=r.path,u=r.op,a=n,c=0;c<e.length-1;c++){var s=i(a),p=e[c];0!==s&&1!==s||"__proto__"!==p&&"constructor"!==p||t(24),"function"==typeof a&&"prototype"===p&&t(24),"object"!=typeof(a=o(a,p))&&t(15,e.join("/"))}var l=i(a),h=f(r.value),d=e[e.length-1];switch(u){case"replace":switch(l){case 2:return a.set(d,h);case 3:t(16);default:return a[d]=h}case v:switch(l){case 1:return a.splice(d,0,h);case 2:return a.set(d,h);case 3:return a.add(h);default:return a[d]=h}case"remove":switch(l){case 1:return a.splice(d,1);case 2:return a.delete(d);case 3:return a.delete(r.value);default:return delete a[d]}default:t(17,u)}})),n},F:function(t,n,r,i){switch(t.t){case 0:case 4:case 2:return function(t,n,r,i){var f=t.u,c=t.i;e(t.D,(function(t,e){var s=o(f,t),p=o(c,t),l=e?u(f,t)?"replace":v:"remove";if(s!==p||"replace"!==l){var h=n.concat(t);r.push("remove"===l?{op:l,path:h}:{op:l,path:h,value:p}),i.push(l===v?{op:"remove",path:h}:"remove"===l?{op:v,path:h,value:a(s)}:{op:"replace",path:h,value:a(s)})}}))}(t,n,r,i);case 5:case 1:return function(t,n,r,e){var i=t.u,u=t.D,o=t.i;if(o.length<i.length){var f=[o,i];i=f[0],o=f[1];var c=[e,r];r=c[0],e=c[1]}for(var s=0;s<i.length;s++)if(u[s]&&o[s]!==i[s]){var p=n.concat([s]);r.push({op:"replace",path:p,value:a(o[s])}),e.push({op:"replace",path:p,value:a(i[s])})}for(var l=i.length;l<o.length;l++){var h=n.concat([l]);r.push({op:v,path:h,value:a(o[l])})}i.length<o.length&&e.push({op:"replace",path:n.concat(["length"]),value:i.length})}(t,n,r,i);case 3:return function(t,n,r,e){var i=t.u,u=t.i,o=0;i.forEach((function(t){if(!u.has(t)){var i=n.concat([o]);r.push({op:"remove",path:i,value:t}),e.unshift({op:v,path:i,value:t})}o++})),o=0,u.forEach((function(t){if(!i.has(t)){var u=n.concat([o]);r.push({op:v,path:u,value:t}),e.unshift({op:"remove",path:u,value:t})}o++}))}(t,n,r,i)}},g:function(t,n,r,e){r.push({op:"replace",path:[],value:n}),e.push({op:"replace",path:[],value:t.u})}})}function C(){function n(t,n){function r(){this.constructor=t}f(t,n),t.prototype=(r.prototype=n.prototype,new r)}function i(t){t.i||(t.D=new Map,t.i=new Map(t.u))}function u(t){t.i||(t.i=new Set,t.u.forEach((function(n){if(r(n)){var e=k(t.A.h,n,t);t.p.set(n,e),t.i.add(e)}else t.i.add(n)})))}function o(n){n.O&&t(3,JSON.stringify(v(n)))}var f=function(t,n){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)},a=function(){function t(t,n){return this[H]={t:2,l:n,A:n?n.A:b(),P:!1,R:!1,i:void 0,D:void 0,u:t,k:this,I:!1,O:!1},this}n(t,Map);var u=t.prototype;return Object.defineProperty(u,"size",{get:function(){return v(this[H]).size}}),u.has=function(t){return v(this[H]).has(t)},u.set=function(t,n){var r=this[H];return o(r),v(r).has(t)&&v(r).get(t)===n||(i(r),E(r),r.D.set(t,!0),r.i.set(t,n),r.D.set(t,!0)),this},u.delete=function(t){if(!this.has(t))return!1;var n=this[H];return o(n),i(n),E(n),n.D.set(t,!1),n.i.delete(t),!0},u.clear=function(){var t=this[H];o(t),v(t).size&&(i(t),E(t),t.D=new Map,e(t.u,(function(n){t.D.set(n,!1)})),t.i.clear())},u.forEach=function(t,n){var r=this;v(this[H]).forEach((function(e,i){t.call(n,r.get(i),i,r)}))},u.get=function(t){var n=this[H];o(n);var e=v(n).get(t);if(n.R||!r(e))return e;if(e!==n.u.get(t))return e;var u=k(n.A.h,e,n);return i(n),n.i.set(t,u),u},u.keys=function(){return v(this[H]).keys()},u.values=function(){var t,n=this,r=this.keys();return(t={})[L]=function(){return n.values()},t.next=function(){var t=r.next();return t.done?t:{done:!1,value:n.get(t.value)}},t},u.entries=function(){var t,n=this,r=this.keys();return(t={})[L]=function(){return n.entries()},t.next=function(){var t=r.next();if(t.done)return t;var e=n.get(t.value);return{done:!1,value:[t.value,e]}},t},u[L]=function(){return this.entries()},t}(),c=function(){function t(t,n){return this[H]={t:3,l:n,A:n?n.A:b(),P:!1,R:!1,i:void 0,u:t,k:this,p:new Map,O:!1,I:!1},this}n(t,Set);var r=t.prototype;return Object.defineProperty(r,"size",{get:function(){return v(this[H]).size}}),r.has=function(t){var n=this[H];return o(n),n.i?!!n.i.has(t)||!(!n.p.has(t)||!n.i.has(n.p.get(t))):n.u.has(t)},r.add=function(t){var n=this[H];return o(n),this.has(t)||(u(n),E(n),n.i.add(t)),this},r.delete=function(t){if(!this.has(t))return!1;var n=this[H];return o(n),u(n),E(n),n.i.delete(t)||!!n.p.has(t)&&n.i.delete(n.p.get(t))},r.clear=function(){var t=this[H];o(t),v(t).size&&(u(t),E(t),t.i.clear())},r.values=function(){var t=this[H];return o(t),u(t),t.i.values()},r.entries=function(){var t=this[H];return o(t),u(t),t.i.entries()},r.keys=function(){return this.values()},r[L]=function(){return this.values()},r.forEach=function(t,n){for(var r=this.values(),e=r.next();!e.done;)t.call(n,e.value,e.value,this),e=r.next()},t}();y("MapSet",{$:function(t,n){return new a(t,n)},C:function(t,n){return new c(t,n)}})}var I;Object.defineProperty(exports,"__esModule",{value:!0});var J,N="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),W="undefined"!=typeof Map,X="undefined"!=typeof Set,q="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,B=N?Symbol.for("immer-nothing"):((I={})["immer-nothing"]=!0,I),G=N?Symbol.for("immer-draftable"):"__$immer_draftable",H=N?Symbol.for("immer-state"):"__$immer_state",L="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",Q="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,T=Object.getOwnPropertyDescriptors||function(t){var n={};return Q(t).forEach((function(r){n[r]=Object.getOwnPropertyDescriptor(t,r)})),n},U={},V={get:function(t,n){if(n===H)return t;var e=v(t);if(!u(e,n))return function(t,n,r){var e,i=z(n,r);return i?"value"in i?i.value:null===(e=i.get)||void 0===e?void 0:e.call(t.k):void 0}(t,e,n);var i=e[n];return t.R||!r(i)?i:i===A(t.u,n)?(R(t),t.i[n]=k(t.A.h,i,t)):i},has:function(t,n){return n in v(t)},ownKeys:function(t){return Reflect.ownKeys(v(t))},set:function(t,n,r){var e=z(v(t),n);if(null==e?void 0:e.set)return e.set.call(t.k,r),!0;if(!t.P){var i=A(v(t),n),o=null==i?void 0:i[H];if(o&&o.u===r)return t.i[n]=r,t.D[n]=!1,!0;if(a(r,i)&&(void 0!==r||u(t.u,n)))return!0;R(t),E(t)}return t.i[n]=r,t.D[n]=!0,!0},deleteProperty:function(t,n){return void 0!==A(t.u,n)||n in t.u?(t.D[n]=!1,R(t),E(t)):delete t.D[n],t.i&&delete t.i[n],!0},getOwnPropertyDescriptor:function(t,n){var r=v(t),e=Reflect.getOwnPropertyDescriptor(r,n);return e?{writable:!0,configurable:1!==t.t||"length"!==n,enumerable:e.enumerable,value:r[n]}:e},defineProperty:function(){t(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.u)},setPrototypeOf:function(){t(12)}},Y={};e(V,(function(t,n){Y[t]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}})),Y.deleteProperty=function(t,n){return V.deleteProperty.call(this,t[0],n)},Y.set=function(t,n,r){return V.set.call(this,t[0],n,r,t[0])};var Z=function(){function e(t){this.S=q,this.K=!0,"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var i=e.prototype;return i.produce=function(n,e,i){if("function"==typeof n&&"function"!=typeof e){var u=e;e=n;var o=this;return function(t){var n=this;void 0===t&&(t=u);for(var r=arguments.length,i=Array(r>1?r-1:0),f=1;f<r;f++)i[f-1]=arguments[f];return o.produce(t,(function(t){var r;return(r=e).call.apply(r,[n,t].concat(i))}))}}var f;if("function"!=typeof e&&t(6),void 0!==i&&"function"!=typeof i&&t(7),r(n)){var a=x(this),c=k(this,n,void 0),s=!0;try{f=e(c),s=!1}finally{s?j(a):O(a)}return"undefined"!=typeof Promise&&f instanceof Promise?f.then((function(t){return m(a,i),S(t,a)}),(function(t){throw j(a),t})):(m(a,i),S(f,a))}if(!n||"object"!=typeof n){if((f=e(n))===B)return;return void 0===f&&(f=n),this.K&&l(f,!0),f}t(21,n)},i.produceWithPatches=function(t,n){var r,e,i=this;return"function"==typeof t?function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),u=1;u<r;u++)e[u-1]=arguments[u];return i.produceWithPatches(n,(function(n){return t.apply(void 0,[n].concat(e))}))}:[this.produce(t,n,(function(t,n){r=t,e=n})),r,e]},i.createDraft=function(e){r(e)||t(8),n(e)&&(e=F(e));var i=x(this),u=k(this,e,void 0);return u[H].I=!0,O(i),u},i.finishDraft=function(t,n){var r=(t&&t[H]).A;return m(r,n),S(void 0,r)},i.setAutoFreeze=function(t){this.K=t},i.setUseProxies=function(n){n&&!q&&t(20),this.S=n},i.applyPatches=function(t,r){var e;for(e=r.length-1;e>=0;e--){var i=r[e];if(0===i.path.length&&"replace"===i.op){t=i.value;break}}var u=_("Patches").W;return n(t)?u(t,r):this.produce(t,(function(t){return u(t,r.slice(e+1))}))},e}(),tt=new Z,nt=tt.produce,rt=tt.produceWithPatches.bind(tt),et=tt.setAutoFreeze.bind(tt),it=tt.setUseProxies.bind(tt),ut=tt.applyPatches.bind(tt),ot=tt.createDraft.bind(tt),ft=tt.finishDraft.bind(tt);exports.Immer=Z,exports.applyPatches=ut,exports.castDraft=function(t){return t},exports.castImmutable=function(t){return t},exports.createDraft=ot,exports.current=F,exports.default=nt,exports.enableAllPlugins=function(){K(),C(),$()},exports.enableES5=K,exports.enableMapSet=C,exports.enablePatches=$,exports.finishDraft=ft,exports.freeze=l,exports.immerable=G,exports.isDraft=n,exports.isDraftable=r,exports.nothing=B,exports.original=function(r){return n(r)||t(23,r),r[H].u},exports.produce=nt,exports.produceWithPatches=rt,exports.setAutoFreeze=et,exports.setUseProxies=it},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(40);case"v7light":return __webpack_require__(42);case"v8dark":return __webpack_require__(44);case"v8light":return __webpack_require__(46)}},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(41);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmTimeline {\n  overflow: hidden;\n  width: 100%; }\n  .ilmTimeline__phasesContainer {\n    /*\n    * Let the delete icon sit on the same line as the phase color bars\n    */\n    display: inline-block;\n    width: 100%; }\n    .ilmTimeline__phasesContainer__phase:first-child {\n      padding-left: 0;\n      padding-right: 8px; }\n    .ilmTimeline__phasesContainer__phase:last-child {\n      padding-left: 8px;\n      padding-right: 0; }\n    .ilmTimeline__phasesContainer__phase:only-child {\n      padding-left: 0;\n      padding-right: 0; }\n    .ilmTimeline__phasesContainer__phase {\n      /*\n      * Let the phase color bars sit horizontally\n      */\n      display: inline-block;\n      padding-left: 8px;\n      padding-right: 8px; }\n  .ilmTimeline__deleteIconContainer {\n    /*\n    * Create a bit of space between the timeline and the delete icon\n    */\n    padding: 12px;\n    margin-left: 12px;\n    background-color: #25262E;\n    color: #98A2B3;\n    border-radius: 50%; }\n  .ilmTimeline__colorBar {\n    display: inline-block;\n    height: 8px;\n    margin-top: 8px;\n    margin-bottom: 4px;\n    border-radius: calc(8px / 2);\n    width: 100%; }\n  .ilmTimeline__hotPhase {\n    width: var(--ilm-timeline-hot-phase-width); }\n    .ilmTimeline__hotPhase__colorBar {\n      background-color: #E7664C; }\n  .ilmTimeline__warmPhase {\n    width: var(--ilm-timeline-warm-phase-width); }\n    .ilmTimeline__warmPhase__colorBar {\n      background-color: #D6BF57; }\n  .ilmTimeline__coldPhase {\n    width: var(--ilm-timeline-cold-phase-width); }\n    .ilmTimeline__coldPhase__colorBar {\n      background-color: #6092C0; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(43);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmTimeline {\n  overflow: hidden;\n  width: 100%; }\n  .ilmTimeline__phasesContainer {\n    /*\n    * Let the delete icon sit on the same line as the phase color bars\n    */\n    display: inline-block;\n    width: 100%; }\n    .ilmTimeline__phasesContainer__phase:first-child {\n      padding-left: 0;\n      padding-right: 8px; }\n    .ilmTimeline__phasesContainer__phase:last-child {\n      padding-left: 8px;\n      padding-right: 0; }\n    .ilmTimeline__phasesContainer__phase:only-child {\n      padding-left: 0;\n      padding-right: 0; }\n    .ilmTimeline__phasesContainer__phase {\n      /*\n      * Let the phase color bars sit horizontally\n      */\n      display: inline-block;\n      padding-left: 8px;\n      padding-right: 8px; }\n  .ilmTimeline__deleteIconContainer {\n    /*\n    * Create a bit of space between the timeline and the delete icon\n    */\n    padding: 12px;\n    margin-left: 12px;\n    background-color: #F5F7FA;\n    color: #69707D;\n    border-radius: 50%; }\n  .ilmTimeline__colorBar {\n    display: inline-block;\n    height: 8px;\n    margin-top: 8px;\n    margin-bottom: 4px;\n    border-radius: calc(8px / 2);\n    width: 100%; }\n  .ilmTimeline__hotPhase {\n    width: var(--ilm-timeline-hot-phase-width); }\n    .ilmTimeline__hotPhase__colorBar {\n      background-color: #E7664C; }\n  .ilmTimeline__warmPhase {\n    width: var(--ilm-timeline-warm-phase-width); }\n    .ilmTimeline__warmPhase__colorBar {\n      background-color: #D6BF57; }\n  .ilmTimeline__coldPhase {\n    width: var(--ilm-timeline-cold-phase-width); }\n    .ilmTimeline__coldPhase__colorBar {\n      background-color: #6092C0; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(45);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmTimeline {\n  overflow: hidden;\n  width: 100%; }\n  .ilmTimeline__phasesContainer {\n    /*\n    * Let the delete icon sit on the same line as the phase color bars\n    */\n    display: inline-block;\n    width: 100%; }\n    .ilmTimeline__phasesContainer__phase:first-child {\n      padding-left: 0;\n      padding-right: 8px; }\n    .ilmTimeline__phasesContainer__phase:last-child {\n      padding-left: 8px;\n      padding-right: 0; }\n    .ilmTimeline__phasesContainer__phase:only-child {\n      padding-left: 0;\n      padding-right: 0; }\n    .ilmTimeline__phasesContainer__phase {\n      /*\n      * Let the phase color bars sit horizontally\n      */\n      display: inline-block;\n      padding-left: 8px;\n      padding-right: 8px; }\n  .ilmTimeline__deleteIconContainer {\n    /*\n    * Create a bit of space between the timeline and the delete icon\n    */\n    padding: 12px;\n    margin-left: 12px;\n    background-color: #25262E;\n    color: #98A2B3;\n    border-radius: 50%; }\n  .ilmTimeline__colorBar {\n    display: inline-block;\n    height: 8px;\n    margin-top: 8px;\n    margin-bottom: 4px;\n    border-radius: calc(8px / 2);\n    width: 100%; }\n  .ilmTimeline__hotPhase {\n    width: var(--ilm-timeline-hot-phase-width); }\n    .ilmTimeline__hotPhase__colorBar {\n      background-color: #E7664C; }\n  .ilmTimeline__warmPhase {\n    width: var(--ilm-timeline-warm-phase-width); }\n    .ilmTimeline__warmPhase__colorBar {\n      background-color: #D6BF57; }\n  .ilmTimeline__coldPhase {\n    width: var(--ilm-timeline-cold-phase-width); }\n    .ilmTimeline__coldPhase__colorBar {\n      background-color: #6092C0; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(47);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmTimeline {\n  overflow: hidden;\n  width: 100%; }\n  .ilmTimeline__phasesContainer {\n    /*\n    * Let the delete icon sit on the same line as the phase color bars\n    */\n    display: inline-block;\n    width: 100%; }\n    .ilmTimeline__phasesContainer__phase:first-child {\n      padding-left: 0;\n      padding-right: 8px; }\n    .ilmTimeline__phasesContainer__phase:last-child {\n      padding-left: 8px;\n      padding-right: 0; }\n    .ilmTimeline__phasesContainer__phase:only-child {\n      padding-left: 0;\n      padding-right: 0; }\n    .ilmTimeline__phasesContainer__phase {\n      /*\n      * Let the phase color bars sit horizontally\n      */\n      display: inline-block;\n      padding-left: 8px;\n      padding-right: 8px; }\n  .ilmTimeline__deleteIconContainer {\n    /*\n    * Create a bit of space between the timeline and the delete icon\n    */\n    padding: 12px;\n    margin-left: 12px;\n    background-color: #F5F7FA;\n    color: #69707D;\n    border-radius: 50%; }\n  .ilmTimeline__colorBar {\n    display: inline-block;\n    height: 8px;\n    margin-top: 8px;\n    margin-bottom: 4px;\n    border-radius: calc(8px / 2);\n    width: 100%; }\n  .ilmTimeline__hotPhase {\n    width: var(--ilm-timeline-hot-phase-width); }\n    .ilmTimeline__hotPhase__colorBar {\n      background-color: #E7664C; }\n  .ilmTimeline__warmPhase {\n    width: var(--ilm-timeline-warm-phase-width); }\n    .ilmTimeline__warmPhase__colorBar {\n      background-color: #D6BF57; }\n  .ilmTimeline__coldPhase {\n    width: var(--ilm-timeline-cold-phase-width); }\n    .ilmTimeline__coldPhase__colorBar {\n      background-color: #6092C0; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(49);case"v7light":return __webpack_require__(51);case"v8dark":return __webpack_require__(53);case"v8light":return __webpack_require__(55)}},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(50);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".indexLifecycleManagement__phase__dataTierAllocation__controlSection {\n  background-color: #25262E;\n  padding-top: 12px;\n  padding-left: 12px;\n  padding-right: 12px;\n  padding-bottom: 12px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(52);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".indexLifecycleManagement__phase__dataTierAllocation__controlSection {\n  background-color: #F5F7FA;\n  padding-top: 12px;\n  padding-left: 12px;\n  padding-right: 12px;\n  padding-bottom: 12px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(54);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".indexLifecycleManagement__phase__dataTierAllocation__controlSection {\n  background-color: #25262E;\n  padding-top: 12px;\n  padding-left: 12px;\n  padding-right: 12px;\n  padding-bottom: 12px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(56);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".indexLifecycleManagement__phase__dataTierAllocation__controlSection {\n  background-color: #F5F7FA;\n  padding-top: 12px;\n  padding-left: 12px;\n  padding-right: 12px;\n  padding-bottom: 12px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(58);case"v7light":return __webpack_require__(60);case"v8dark":return __webpack_require__(62);case"v8light":return __webpack_require__(64)}},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(59);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmDataTierAllocationField {\n  max-width: 400px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(61);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmDataTierAllocationField {\n  max-width: 400px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(63);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmDataTierAllocationField {\n  max-width: 400px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(65);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmDataTierAllocationField {\n  max-width: 400px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var v1=__webpack_require__(67);var v4=__webpack_require__(68);var uuid=v4;uuid.v1=v1;uuid.v4=v4;module.exports=uuid},function(module,exports,__webpack_require__){var rng=__webpack_require__(36);var bytesToUuid=__webpack_require__(37);var _nodeId;var _clockseq;var _lastMSecs=0;var _lastNSecs=0;function v1(options,buf,offset){var i=buf&&offset||0;var b=buf||[];options=options||{};var node=options.node||_nodeId;var clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;if(node==null||clockseq==null){var seedBytes=rng();if(node==null){node=_nodeId=[seedBytes[0]|1,seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]}if(clockseq==null){clockseq=_clockseq=(seedBytes[6]<<8|seedBytes[7])&16383}}var msecs=options.msecs!==undefined?options.msecs:(new Date).getTime();var nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1;var dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&options.clockseq===undefined){clockseq=clockseq+1&16383}if((dt<0||msecs>_lastMSecs)&&options.nsecs===undefined){nsecs=0}if(nsecs>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}_lastMSecs=msecs;_lastNSecs=nsecs;_clockseq=clockseq;msecs+=122192928e5;var tl=((msecs&268435455)*1e4+nsecs)%4294967296;b[i++]=tl>>>24&255;b[i++]=tl>>>16&255;b[i++]=tl>>>8&255;b[i++]=tl&255;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255;b[i++]=tmh&255;b[i++]=tmh>>>24&15|16;b[i++]=tmh>>>16&255;b[i++]=clockseq>>>8|128;b[i++]=clockseq&255;for(var n=0;n<6;++n){b[i+n]=node[n]}return buf?buf:bytesToUuid(b)}module.exports=v1},function(module,exports,__webpack_require__){var rng=__webpack_require__(36);var bytesToUuid=__webpack_require__(37);function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=="string"){buf=options==="binary"?new Array(16):null;options=null}options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){for(var ii=0;ii<16;++ii){buf[i+ii]=rnds[ii]}}return buf||bytesToUuid(rnds)}module.exports=v4},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(70);case"v7light":return __webpack_require__(72);case"v8dark":return __webpack_require__(74);case"v8light":return __webpack_require__(76)}},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(71);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmSearchableSnapshotField {\n  max-width: 400px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(73);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmSearchableSnapshotField {\n  max-width: 400px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(75);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmSearchableSnapshotField {\n  max-width: 400px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(77);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmSearchableSnapshotField {\n  max-width: 400px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(79);case"v7light":return __webpack_require__(81);case"v8dark":return __webpack_require__(83);case"v8light":return __webpack_require__(85)}},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(80);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmPhaseIcon {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n  background-color: #25262E; }\n  .ilmPhaseIcon--disabled {\n    margin-top: 8px;\n    width: 16px;\n    height: 16px; }\n  .ilmPhaseIcon--delete {\n    background-color: #343741; }\n  .ilmPhaseIcon__inner--hot {\n    fill: #FF7E62; }\n  .ilmPhaseIcon__inner--warm {\n    fill: #F1D86F; }\n  .ilmPhaseIcon__inner--cold {\n    fill: #79AAD9; }\n  .ilmPhaseIcon__inner--delete {\n    fill: #98A2B3; }\n  .ilmPhaseIcon__inner--disabled {\n    fill: #535966; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(82);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmPhaseIcon {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n  background-color: #F5F7FA; }\n  .ilmPhaseIcon--disabled {\n    margin-top: 8px;\n    width: 16px;\n    height: 16px; }\n  .ilmPhaseIcon--delete {\n    background-color: #D3DAE6; }\n  .ilmPhaseIcon__inner--hot {\n    fill: #FF7E62; }\n  .ilmPhaseIcon__inner--warm {\n    fill: #F1D86F; }\n  .ilmPhaseIcon__inner--cold {\n    fill: #79AAD9; }\n  .ilmPhaseIcon__inner--delete {\n    fill: #69707D; }\n  .ilmPhaseIcon__inner--disabled {\n    fill: #98A2B3; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(84);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmPhaseIcon {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n  background-color: #25262E; }\n  .ilmPhaseIcon--disabled {\n    margin-top: 8px;\n    width: 16px;\n    height: 16px; }\n  .ilmPhaseIcon--delete {\n    background-color: #343741; }\n  .ilmPhaseIcon__inner--hot {\n    fill: #FF7E62; }\n  .ilmPhaseIcon__inner--warm {\n    fill: #F1D86F; }\n  .ilmPhaseIcon__inner--cold {\n    fill: #79AAD9; }\n  .ilmPhaseIcon__inner--delete {\n    fill: #98A2B3; }\n  .ilmPhaseIcon__inner--disabled {\n    fill: #535966; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(86);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmPhaseIcon {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n  background-color: #F5F7FA; }\n  .ilmPhaseIcon--disabled {\n    margin-top: 8px;\n    width: 16px;\n    height: 16px; }\n  .ilmPhaseIcon--delete {\n    background-color: #D3DAE6; }\n  .ilmPhaseIcon__inner--hot {\n    fill: #FF7E62; }\n  .ilmPhaseIcon__inner--warm {\n    fill: #F1D86F; }\n  .ilmPhaseIcon__inner--cold {\n    fill: #79AAD9; }\n  .ilmPhaseIcon__inner--delete {\n    fill: #69707D; }\n  .ilmPhaseIcon__inner--disabled {\n    fill: #98A2B3; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(88);case"v7light":return __webpack_require__(90);case"v8dark":return __webpack_require__(92);case"v8light":return __webpack_require__(94)}},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(89);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmPhase .euiCommentEvent__header {\n  padding: 16px; }\n\n.ilmPhase .euiCommentEvent__body {\n  padding: 16px; }\n\n.ilmPhase .ilmSettingsButton {\n  color: #1BA9F5;\n  padding-top: 8px;\n  padding-bottom: 8px; }\n\n.ilmPhase .euiCommentTimeline {\n  padding-top: 16px; }\n  .ilmPhase .euiCommentTimeline::before {\n    height: calc(100% + 40px); }\n\n.ilmPhase--enabled .euiCommentEvent__header {\n  background-color: #1D1E24; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(91);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmPhase .euiCommentEvent__header {\n  padding: 16px; }\n\n.ilmPhase .euiCommentEvent__body {\n  padding: 16px; }\n\n.ilmPhase .ilmSettingsButton {\n  color: #006BB4;\n  padding-top: 8px;\n  padding-bottom: 8px; }\n\n.ilmPhase .euiCommentTimeline {\n  padding-top: 16px; }\n  .ilmPhase .euiCommentTimeline::before {\n    height: calc(100% + 40px); }\n\n.ilmPhase--enabled .euiCommentEvent__header {\n  background-color: #FFF; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(93);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmPhase .euiCommentEvent__header {\n  padding: 16px; }\n\n.ilmPhase .euiCommentEvent__body {\n  padding: 16px; }\n\n.ilmPhase .ilmSettingsButton {\n  color: #36A2EF;\n  padding-top: 8px;\n  padding-bottom: 8px; }\n\n.ilmPhase .euiCommentTimeline {\n  padding-top: 16px; }\n  .ilmPhase .euiCommentTimeline::before {\n    height: calc(100% + 40px); }\n\n.ilmPhase--enabled .euiCommentEvent__header {\n  background-color: #1D1E24; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(95);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmPhase .euiCommentEvent__header {\n  padding: 16px; }\n\n.ilmPhase .euiCommentEvent__body {\n  padding: 16px; }\n\n.ilmPhase .ilmSettingsButton {\n  color: #07C;\n  padding-top: 8px;\n  padding-bottom: 8px; }\n\n.ilmPhase .euiCommentTimeline {\n  padding-top: 16px; }\n  .ilmPhase .euiCommentTimeline::before {\n    height: calc(100% + 40px); }\n\n.ilmPhase--enabled .euiCommentEvent__header {\n  background-color: #FFF; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(97);case"v7light":return __webpack_require__(99);case"v8dark":return __webpack_require__(101);case"v8light":return __webpack_require__(103)}},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(98);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmDeletePhase .euiCommentEvent__header {\n  padding: 16px;\n  background-color: #1D1E24; }\n\n.ilmDeletePhase .euiCommentEvent__body {\n  padding: 16px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(100);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmDeletePhase .euiCommentEvent__header {\n  padding: 16px;\n  background-color: #FFF; }\n\n.ilmDeletePhase .euiCommentEvent__body {\n  padding: 16px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(102);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmDeletePhase .euiCommentEvent__header {\n  padding: 16px;\n  background-color: #1D1E24; }\n\n.ilmDeletePhase .euiCommentEvent__body {\n  padding: 16px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(104);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".ilmDeletePhase .euiCommentEvent__header {\n  padding: 16px;\n  background-color: #FFF; }\n\n.ilmDeletePhase .euiCommentEvent__body {\n  padding: 16px; }\n",""]);module.exports=exports},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"renderApp",(function(){return renderApp}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(29);var public_=__webpack_require__(26);var hook_form_lib_=__webpack_require__(24);var helpers_=__webpack_require__(27);var components_=__webpack_require__(25);var esUiShared_public_=__webpack_require__(15);const useKibana=()=>Object(public_["useKibana"])();var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(30);var web=__webpack_require__(12);var ui_metric=__webpack_require__(17);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(1);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(3);var constants=__webpack_require__(10);var api=__webpack_require__(9);const splitSizeAndUnits=field=>{let size="";let units="";const result=/(\d+)(\w+)/.exec(field);if(result){size=result[1];units=result[2]}return{size:size,units:units}};const getPolicyByName=(policies,policyName="")=>{if(policies&&policies.length>0){return policies.find(policy=>policy.name===policyName)}};var application_constants=__webpack_require__(5);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);var external_kbnSharedDeps_Lodash_=__webpack_require__(8);var notification=__webpack_require__(6);var documentation=__webpack_require__(16);var dist=__webpack_require__(35);const determineDataTierAllocationType=(actions={})=>{const{allocate:allocate,migrate:migrate}=actions;if((migrate===null||migrate===void 0?void 0:migrate.enabled)===false){return"none"}if(!allocate){return"node_roles"}if(allocate.require&&Object.keys(allocate.require).length||allocate.include&&Object.keys(allocate.include).length||allocate.exclude&&Object.keys(allocate.exclude).length){return"node_attrs"}return"node_roles"};const getAvailableNodeRoleForPhase=(phase,nodesByRoles)=>{var _nodesByRoles$data,_preferredNodeRoles$f;const preferredNodeRoles=constants["c"][phase];if((_nodesByRoles$data=nodesByRoles.data)!==null&&_nodesByRoles$data!==void 0&&_nodesByRoles$data.length){return preferredNodeRoles[0]}return(_preferredNodeRoles$f=preferredNodeRoles.find(role=>{var _nodesByRoles$role;return Boolean((_nodesByRoles$role=nodesByRoles[role])===null||_nodesByRoles$role===void 0?void 0:_nodesByRoles$role.length)}))!==null&&_preferredNodeRoles$f!==void 0?_preferredNodeRoles$f:"none"};const isNodeRoleFirstPreference=(phase,nodeRole)=>constants["c"][phase][0]===nodeRole;const rollover_isUsingDefaultRollover=policy=>{var _policy$phases,_policy$phases$hot,_policy$phases$hot$ac;const rollover=policy===null||policy===void 0?void 0:(_policy$phases=policy.phases)===null||_policy$phases===void 0?void 0:(_policy$phases$hot=_policy$phases.hot)===null||_policy$phases$hot===void 0?void 0:(_policy$phases$hot$ac=_policy$phases$hot.actions)===null||_policy$phases$hot$ac===void 0?void 0:_policy$phases$hot$ac.rollover;return Boolean(rollover&&rollover.max_age===application_constants["p"].max_age&&rollover.max_docs===application_constants["p"].max_docs&&rollover.max_size===application_constants["p"].max_size)};const deserializer=policy=>{var _hot$actions,_hot$actions2,_hot$actions2$forceme,_hot$actions3,_warm$actions,_warm$actions$forceme,_warm$actions2,_cold$actions;const{phases:{hot:hot,warm:warm,cold:cold,delete:deletePhase}}=policy;const _meta={hot:{isUsingDefaultRollover:rollover_isUsingDefaultRollover(policy),customRollover:{enabled:Boolean(hot===null||hot===void 0?void 0:(_hot$actions=hot.actions)===null||_hot$actions===void 0?void 0:_hot$actions.rollover)},bestCompression:(hot===null||hot===void 0?void 0:(_hot$actions2=hot.actions)===null||_hot$actions2===void 0?void 0:(_hot$actions2$forceme=_hot$actions2.forcemerge)===null||_hot$actions2$forceme===void 0?void 0:_hot$actions2$forceme.index_codec)==="best_compression",readonlyEnabled:Boolean(hot===null||hot===void 0?void 0:(_hot$actions3=hot.actions)===null||_hot$actions3===void 0?void 0:_hot$actions3.readonly)},warm:{enabled:Boolean(warm),warmPhaseOnRollover:warm===undefined?true:Boolean(warm.min_age==="0ms"),bestCompression:(warm===null||warm===void 0?void 0:(_warm$actions=warm.actions)===null||_warm$actions===void 0?void 0:(_warm$actions$forceme=_warm$actions.forcemerge)===null||_warm$actions$forceme===void 0?void 0:_warm$actions$forceme.index_codec)==="best_compression",dataTierAllocationType:determineDataTierAllocationType(warm===null||warm===void 0?void 0:warm.actions),readonlyEnabled:Boolean(warm===null||warm===void 0?void 0:(_warm$actions2=warm.actions)===null||_warm$actions2===void 0?void 0:_warm$actions2.readonly)},cold:{enabled:Boolean(cold),dataTierAllocationType:determineDataTierAllocationType(cold===null||cold===void 0?void 0:cold.actions),freezeEnabled:Boolean(cold===null||cold===void 0?void 0:(_cold$actions=cold.actions)===null||_cold$actions===void 0?void 0:_cold$actions.freeze)},delete:{enabled:Boolean(deletePhase)}};return Object(dist["produce"])({...policy,_meta:_meta},draft=>{var _draft$phases$hot,_draft$phases$hot$act;if((_draft$phases$hot=draft.phases.hot)!==null&&_draft$phases$hot!==void 0&&(_draft$phases$hot$act=_draft$phases$hot.actions)!==null&&_draft$phases$hot$act!==void 0&&_draft$phases$hot$act.rollover){if(draft.phases.hot.actions.rollover.max_size){const maxSize=splitSizeAndUnits(draft.phases.hot.actions.rollover.max_size);draft.phases.hot.actions.rollover.max_size=maxSize.size;draft._meta.hot.customRollover.maxStorageSizeUnit=maxSize.units}if(draft.phases.hot.actions.rollover.max_age){const maxAge=splitSizeAndUnits(draft.phases.hot.actions.rollover.max_age);draft.phases.hot.actions.rollover.max_age=maxAge.size;draft._meta.hot.customRollover.maxAgeUnit=maxAge.units}}if(draft.phases.warm){var _draft$phases$warm$ac,_draft$phases$warm$ac2;if((_draft$phases$warm$ac=draft.phases.warm.actions)!==null&&_draft$phases$warm$ac!==void 0&&(_draft$phases$warm$ac2=_draft$phases$warm$ac.allocate)!==null&&_draft$phases$warm$ac2!==void 0&&_draft$phases$warm$ac2.require){Object.entries(draft.phases.warm.actions.allocate.require).forEach(entry=>{draft._meta.warm.allocationNodeAttribute=entry.join(":")})}if(draft.phases.warm.min_age){const minAge=splitSizeAndUnits(draft.phases.warm.min_age);draft.phases.warm.min_age=minAge.size;draft._meta.warm.minAgeUnit=minAge.units}}if(draft.phases.cold){var _draft$phases$cold$ac,_draft$phases$cold$ac2;if((_draft$phases$cold$ac=draft.phases.cold.actions)!==null&&_draft$phases$cold$ac!==void 0&&(_draft$phases$cold$ac2=_draft$phases$cold$ac.allocate)!==null&&_draft$phases$cold$ac2!==void 0&&_draft$phases$cold$ac2.require){Object.entries(draft.phases.cold.actions.allocate.require).forEach(entry=>{draft._meta.cold.allocationNodeAttribute=entry.join(":")})}if(draft.phases.cold.min_age){const minAge=splitSizeAndUnits(draft.phases.cold.min_age);draft.phases.cold.min_age=minAge.size;draft._meta.cold.minAgeUnit=minAge.units}}if(draft.phases.delete){if(draft.phases.delete.min_age){const minAge=splitSizeAndUnits(draft.phases.delete.min_age);draft.phases.delete.min_age=minAge.size;draft._meta.delete.minAgeUnit=minAge.units}}})};const serializeMigrateAndAllocateActions=({dataTierAllocationType:dataTierAllocationType,allocationNodeAttribute:allocationNodeAttribute},mergedActions={},originalActions={},numberOfReplicas)=>{var _originalActions$allo,_originalActions$allo3;const{allocate:allocate,migrate:migrate,...otherActions}=mergedActions;const actions={...otherActions};if(allocate){const{include:include,exclude:exclude,require:require,number_of_replicas:__,...otherSettings}=allocate;if(!Object(external_kbnSharedDeps_Lodash_["isEmpty"])(otherSettings)){actions.allocate={...otherSettings}}}switch(dataTierAllocationType){case"node_attrs":if(allocationNodeAttribute){const[name,value]=allocationNodeAttribute.split(":");actions.allocate={...actions.allocate,require:{[name]:value}}}else{actions.migrate=originalActions.migrate}if(!Object(external_kbnSharedDeps_Lodash_["isEmpty"])(originalActions===null||originalActions===void 0?void 0:(_originalActions$allo=originalActions.allocate)===null||_originalActions$allo===void 0?void 0:_originalActions$allo.include)){var _originalActions$allo2;actions.allocate={...actions.allocate,include:{...originalActions===null||originalActions===void 0?void 0:(_originalActions$allo2=originalActions.allocate)===null||_originalActions$allo2===void 0?void 0:_originalActions$allo2.include}}}if(!Object(external_kbnSharedDeps_Lodash_["isEmpty"])(originalActions===null||originalActions===void 0?void 0:(_originalActions$allo3=originalActions.allocate)===null||_originalActions$allo3===void 0?void 0:_originalActions$allo3.exclude)){var _originalActions$allo4;actions.allocate={...actions.allocate,exclude:{...originalActions===null||originalActions===void 0?void 0:(_originalActions$allo4=originalActions.allocate)===null||_originalActions$allo4===void 0?void 0:_originalActions$allo4.exclude}}}break;case"none":actions.migrate={...originalActions===null||originalActions===void 0?void 0:originalActions.migrate,enabled:false};break;default:}if(numberOfReplicas!=null){actions.allocate={...actions.allocate,number_of_replicas:numberOfReplicas}}return actions};const createSerializer=originalPolicy=>data=>{const{_meta:_meta,...updatedPolicy}=data;updatedPolicy.phases={hot:{actions:{}},...updatedPolicy.phases};return Object(dist["produce"])(originalPolicy!==null&&originalPolicy!==void 0?originalPolicy:application_constants["o"],draft=>{var _meta$hot,_meta$hot2,_draft$phases$hot;Object(external_kbnSharedDeps_Lodash_["merge"])(draft,updatedPolicy);const isUsingRollover=Boolean(((_meta$hot=_meta.hot)===null||_meta$hot===void 0?void 0:_meta$hot.isUsingDefaultRollover)||((_meta$hot2=_meta.hot)===null||_meta$hot2===void 0?void 0:_meta$hot2.customRollover.enabled));if(draft.phases.hot){var _draft$phases$hot$min;draft.phases.hot.min_age=(_draft$phases$hot$min=draft.phases.hot.min_age)!==null&&_draft$phases$hot$min!==void 0?_draft$phases$hot$min:"0ms"}if((_draft$phases$hot=draft.phases.hot)!==null&&_draft$phases$hot!==void 0&&_draft$phases$hot.actions){var _actions2,_updatedPolicy$phases,_updatedPolicy$phases2,_actions3;const hotPhaseActions=draft.phases.hot.actions;if(isUsingRollover){var _meta$hot3,_actions,_meta$hot6,_meta$hot7,_meta$hot8;if((_meta$hot3=_meta.hot)!==null&&_meta$hot3!==void 0&&_meta$hot3.isUsingDefaultRollover){hotPhaseActions.rollover=Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(application_constants["p"])}else{var _actions$rollover,_actions$rollover2,_actions$rollover3;if(!hotPhaseActions.rollover){hotPhaseActions.rollover={}}if((_actions$rollover=updatedPolicy.phases.hot.actions.rollover)!==null&&_actions$rollover!==void 0&&_actions$rollover.max_age){var _meta$hot4;hotPhaseActions.rollover.max_age=`${hotPhaseActions.rollover.max_age}${(_meta$hot4=_meta.hot)===null||_meta$hot4===void 0?void 0:_meta$hot4.customRollover.maxAgeUnit}`}else{delete hotPhaseActions.rollover.max_age}if(typeof((_actions$rollover2=updatedPolicy.phases.hot.actions.rollover)===null||_actions$rollover2===void 0?void 0:_actions$rollover2.max_docs)!=="number"){delete hotPhaseActions.rollover.max_docs}if((_actions$rollover3=updatedPolicy.phases.hot.actions.rollover)!==null&&_actions$rollover3!==void 0&&_actions$rollover3.max_size){var _meta$hot5;hotPhaseActions.rollover.max_size=`${hotPhaseActions.rollover.max_size}${(_meta$hot5=_meta.hot)===null||_meta$hot5===void 0?void 0:_meta$hot5.customRollover.maxStorageSizeUnit}`}else{delete hotPhaseActions.rollover.max_size}}if(!((_actions=updatedPolicy.phases.hot.actions)!==null&&_actions!==void 0&&_actions.forcemerge)){delete hotPhaseActions.forcemerge}else if((_meta$hot6=_meta.hot)!==null&&_meta$hot6!==void 0&&_meta$hot6.bestCompression){hotPhaseActions.forcemerge.index_codec="best_compression"}else{delete hotPhaseActions.forcemerge.index_codec}if((_meta$hot7=_meta.hot)!==null&&_meta$hot7!==void 0&&_meta$hot7.bestCompression&&hotPhaseActions.forcemerge){hotPhaseActions.forcemerge.index_codec="best_compression"}if((_meta$hot8=_meta.hot)!==null&&_meta$hot8!==void 0&&_meta$hot8.readonlyEnabled){var _hotPhaseActions$read;hotPhaseActions.readonly=(_hotPhaseActions$read=hotPhaseActions.readonly)!==null&&_hotPhaseActions$read!==void 0?_hotPhaseActions$read:{}}else{delete hotPhaseActions.readonly}}else{delete hotPhaseActions.rollover;delete hotPhaseActions.forcemerge;delete hotPhaseActions.readonly}if(!((_actions2=updatedPolicy.phases.hot.actions)!==null&&_actions2!==void 0&&_actions2.set_priority)){delete hotPhaseActions.set_priority}if(!((_updatedPolicy$phases=updatedPolicy.phases.hot)!==null&&_updatedPolicy$phases!==void 0&&(_updatedPolicy$phases2=_updatedPolicy$phases.actions)!==null&&_updatedPolicy$phases2!==void 0&&_updatedPolicy$phases2.shrink)){delete hotPhaseActions.shrink}if(!((_actions3=updatedPolicy.phases.hot.actions)!==null&&_actions3!==void 0&&_actions3.searchable_snapshot)){delete hotPhaseActions.searchable_snapshot}}if(_meta.warm.enabled){var _draft$phases$warm$ac,_draft$phases$warm,_updatedPolicy$phases3,_originalPolicy$phase,_updatedPolicy$phases4,_updatedPolicy$phases5,_updatedPolicy$phases6,_updatedPolicy$phases7,_updatedPolicy$phases8,_updatedPolicy$phases9,_updatedPolicy$phases10,_updatedPolicy$phases11,_updatedPolicy$phases12;draft.phases.warm.actions=(_draft$phases$warm$ac=(_draft$phases$warm=draft.phases.warm)===null||_draft$phases$warm===void 0?void 0:_draft$phases$warm.actions)!==null&&_draft$phases$warm$ac!==void 0?_draft$phases$warm$ac:{};const warmPhase=draft.phases.warm;if((_updatedPolicy$phases3=updatedPolicy.phases.warm)!==null&&_updatedPolicy$phases3!==void 0&&_updatedPolicy$phases3.min_age){warmPhase.min_age=`${updatedPolicy.phases.warm.min_age}${_meta.warm.minAgeUnit}`}warmPhase.actions=serializeMigrateAndAllocateActions(_meta.warm,warmPhase.actions,originalPolicy===null||originalPolicy===void 0?void 0:(_originalPolicy$phase=originalPolicy.phases.warm)===null||_originalPolicy$phase===void 0?void 0:_originalPolicy$phase.actions,(_updatedPolicy$phases4=updatedPolicy.phases.warm)===null||_updatedPolicy$phases4===void 0?void 0:(_updatedPolicy$phases5=_updatedPolicy$phases4.actions)===null||_updatedPolicy$phases5===void 0?void 0:(_updatedPolicy$phases6=_updatedPolicy$phases5.allocate)===null||_updatedPolicy$phases6===void 0?void 0:_updatedPolicy$phases6.number_of_replicas);if(!((_updatedPolicy$phases7=updatedPolicy.phases.warm)!==null&&_updatedPolicy$phases7!==void 0&&(_updatedPolicy$phases8=_updatedPolicy$phases7.actions)!==null&&_updatedPolicy$phases8!==void 0&&_updatedPolicy$phases8.forcemerge)){delete warmPhase.actions.forcemerge}else if(_meta.warm.bestCompression){warmPhase.actions.forcemerge.index_codec="best_compression"}else{delete warmPhase.actions.forcemerge.index_codec}if(_meta.warm.readonlyEnabled){var _warmPhase$actions$re;warmPhase.actions.readonly=(_warmPhase$actions$re=warmPhase.actions.readonly)!==null&&_warmPhase$actions$re!==void 0?_warmPhase$actions$re:{}}else{delete warmPhase.actions.readonly}if(!((_updatedPolicy$phases9=updatedPolicy.phases.warm)!==null&&_updatedPolicy$phases9!==void 0&&(_updatedPolicy$phases10=_updatedPolicy$phases9.actions)!==null&&_updatedPolicy$phases10!==void 0&&_updatedPolicy$phases10.set_priority)){delete warmPhase.actions.set_priority}if(!((_updatedPolicy$phases11=updatedPolicy.phases.warm)!==null&&_updatedPolicy$phases11!==void 0&&(_updatedPolicy$phases12=_updatedPolicy$phases11.actions)!==null&&_updatedPolicy$phases12!==void 0&&_updatedPolicy$phases12.shrink)){delete warmPhase.actions.shrink}}else{delete draft.phases.warm}if(_meta.cold.enabled){var _draft$phases$cold$ac,_draft$phases$cold,_updatedPolicy$phases13,_originalPolicy$phase2,_updatedPolicy$phases14,_updatedPolicy$phases15,_updatedPolicy$phases16,_updatedPolicy$phases17,_updatedPolicy$phases18,_updatedPolicy$phases19,_updatedPolicy$phases20;draft.phases.cold.actions=(_draft$phases$cold$ac=(_draft$phases$cold=draft.phases.cold)===null||_draft$phases$cold===void 0?void 0:_draft$phases$cold.actions)!==null&&_draft$phases$cold$ac!==void 0?_draft$phases$cold$ac:{};const coldPhase=draft.phases.cold;if((_updatedPolicy$phases13=updatedPolicy.phases.cold)!==null&&_updatedPolicy$phases13!==void 0&&_updatedPolicy$phases13.min_age){coldPhase.min_age=`${updatedPolicy.phases.cold.min_age}${_meta.cold.minAgeUnit}`}coldPhase.actions=serializeMigrateAndAllocateActions(_meta.cold,coldPhase.actions,originalPolicy===null||originalPolicy===void 0?void 0:(_originalPolicy$phase2=originalPolicy.phases.cold)===null||_originalPolicy$phase2===void 0?void 0:_originalPolicy$phase2.actions,(_updatedPolicy$phases14=updatedPolicy.phases.cold)===null||_updatedPolicy$phases14===void 0?void 0:(_updatedPolicy$phases15=_updatedPolicy$phases14.actions)===null||_updatedPolicy$phases15===void 0?void 0:(_updatedPolicy$phases16=_updatedPolicy$phases15.allocate)===null||_updatedPolicy$phases16===void 0?void 0:_updatedPolicy$phases16.number_of_replicas);if(_meta.cold.freezeEnabled){var _coldPhase$actions$fr;coldPhase.actions.freeze=(_coldPhase$actions$fr=coldPhase.actions.freeze)!==null&&_coldPhase$actions$fr!==void 0?_coldPhase$actions$fr:{}}else{delete coldPhase.actions.freeze}if(!((_updatedPolicy$phases17=updatedPolicy.phases.cold)!==null&&_updatedPolicy$phases17!==void 0&&(_updatedPolicy$phases18=_updatedPolicy$phases17.actions)!==null&&_updatedPolicy$phases18!==void 0&&_updatedPolicy$phases18.set_priority)){delete coldPhase.actions.set_priority}if(!((_updatedPolicy$phases19=updatedPolicy.phases.cold)!==null&&_updatedPolicy$phases19!==void 0&&(_updatedPolicy$phases20=_updatedPolicy$phases19.actions)!==null&&_updatedPolicy$phases20!==void 0&&_updatedPolicy$phases20.searchable_snapshot)){delete coldPhase.actions.searchable_snapshot}}else{delete draft.phases.cold}if(_meta.delete.enabled){var _deletePhase$actions,_deletePhase$actions$,_updatedPolicy$phases21,_updatedPolicy$phases22,_updatedPolicy$phases23;const deletePhase=draft.phases.delete;deletePhase.actions=(_deletePhase$actions=deletePhase.actions)!==null&&_deletePhase$actions!==void 0?_deletePhase$actions:{};deletePhase.actions.delete=(_deletePhase$actions$=deletePhase.actions.delete)!==null&&_deletePhase$actions$!==void 0?_deletePhase$actions$:{};if((_updatedPolicy$phases21=updatedPolicy.phases.delete)!==null&&_updatedPolicy$phases21!==void 0&&_updatedPolicy$phases21.min_age){deletePhase.min_age=`${updatedPolicy.phases.delete.min_age}${_meta.delete.minAgeUnit}`}if(!((_updatedPolicy$phases22=updatedPolicy.phases.delete)!==null&&_updatedPolicy$phases22!==void 0&&(_updatedPolicy$phases23=_updatedPolicy$phases22.actions)!==null&&_updatedPolicy$phases23!==void 0&&_updatedPolicy$phases23.wait_for_snapshot)){delete deletePhase.actions.wait_for_snapshot}}else{delete draft.phases.delete}})};const isUsingCustomRolloverPath="_meta.hot.customRollover.enabled";const isUsingDefaultRolloverPath="_meta.hot.isUsingDefaultRollover";const ROLLOVER_FORM_PATHS={maxDocs:"phases.hot.actions.rollover.max_docs",maxAge:"phases.hot.actions.rollover.max_age",maxSize:"phases.hot.actions.rollover.max_size"};const i18nTexts={editPolicy:{shrinkLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.shrink.indexFieldLabel",{defaultMessage:"Shrink index"}),rolloverOffsetsHotPhaseTiming:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.rollover.rolloverOffsetsPhaseTimingDescription",{defaultMessage:"How long it takes to reach the rollover criteria in the hot phase can vary."}),searchableSnapshotInHotPhase:{searchableSnapshotDisallowed:{calloutTitle:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.searchableSnapshot.disallowedCalloutTitle",{defaultMessage:"Searchable snapshot disabled"}),calloutBody:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.searchableSnapshot.disallowedCalloutBody",{defaultMessage:"To use searchable snapshot in this phase you must disable searchable snapshot in the hot phase."})}},forceMergeEnabledFieldLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.forcemerge.enableLabel",{defaultMessage:"Force merge data"}),readonlyEnabledFieldLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.readonlyFieldLabel",{defaultMessage:"Make index read only"}),maxNumSegmentsFieldLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.forceMerge.numberOfSegmentsLabel",{defaultMessage:"Number of segments"}),indexPriorityFieldLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.indexPriorityLabel",{defaultMessage:"Index priority"}),bestCompressionFieldLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.forcemerge.bestCompressionLabel",{defaultMessage:"Compress stored fields"}),bestCompressionFieldHelpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.forceMerge.bestCompressionText",{defaultMessage:"Use higher compression for stored fields at the cost of slower performance."}),allocationTypeOptionsFieldLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.dataTierAllocation.allocationFieldLabel",{defaultMessage:"Data tier options"}),allocationNodeAttributeFieldLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.dataTierAllocation.nodeAllocationFieldLabel",{defaultMessage:"Select a node attribute"}),searchableSnapshotsFieldLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotFieldLabel",{defaultMessage:"Searchable snapshot repository"}),errors:{numberRequired:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.errors.numberRequiredErrorMessage",{defaultMessage:"A number is required."}),numberGreatThan0Required:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.errors.numberAboveZeroRequiredError",{defaultMessage:"Only numbers above 0 are allowed."}),maximumAgeRequiredMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.errors.maximumAgeMissingError",{defaultMessage:"A maximum age is required."}),maximumSizeRequiredMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.errors.maximumIndexSizeMissingError",{defaultMessage:"A maximum index size is required."}),maximumDocumentsRequiredMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.errors.maximumDocumentsMissingError",{defaultMessage:"Maximum documents is required."}),rollOverConfigurationCallout:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.errors.rolloverConfigurationError.title",{defaultMessage:"Invalid rollover configuration"}),body:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.errors.rolloverConfigurationError.body",{defaultMessage:"A value for one of maximum size, maximum documents, or maximum age is required."})},nonNegativeNumberRequired:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.errors.nonNegativeNumberRequiredError",{defaultMessage:"Only non-negative numbers are allowed."}),policyNameContainsInvalidChars:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.errors.policyNameContainsInvalidCharsError",{defaultMessage:"A policy name cannot contain spaces or commas."}),policyNameAlreadyUsedErrorMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.policyNameAlreadyUsedError",{defaultMessage:"That policy name is already used."}),policyNameMustBeDifferentErrorMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.differentPolicyNameRequiredError",{defaultMessage:"The policy name must be different."}),policyNameRequiredMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.policyNameRequiredError",{defaultMessage:"A policy name is required."}),policyNameStartsWithUnderscoreErrorMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.policyNameStartsWithUnderscoreError",{defaultMessage:"A policy name cannot start with an underscore."}),policyNameTooLongErrorMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.policyNameTooLongError",{defaultMessage:"A policy name cannot be longer than 255 bytes."}),searchableSnapshotRepoRequired:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotRepoRequiredError",{defaultMessage:"A snapshot repository name is required."})},titles:{hot:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.hotPhase.hotPhaseTitle",{defaultMessage:"Hot phase"}),warm:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.warmPhase.warmPhaseTitle",{defaultMessage:"Warm phase"}),cold:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.coldPhase.coldPhaseTitle",{defaultMessage:"Cold phase"}),delete:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.deletePhaseTitle",{defaultMessage:"Delete phase"})},descriptions:{hot:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.hotPhase.hotPhaseDescription",{defaultMessage:"Store your most-recent, most frequently-searched data in the hot tier, which provides the best indexing and search performance at the highest cost."}),warm:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.warmPhase.warmPhaseDescription",{defaultMessage:"Move data to the warm tier, which is optimized for search performance over indexing performance. Data is infrequently added or updated in the warm phase."}),cold:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.coldPhase.coldPhaseDescription",{defaultMessage:"Move data to the cold tier, which is optimized for cost savings over search performance. Data is normally read-only in the cold phase."}),delete:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.deletePhaseDescription",{defaultMessage:"Delete data you no longer need."})}}};const{numberGreaterThanField:numberGreaterThanField,containsCharsField:containsCharsField,emptyField:emptyField,startsWithField:startsWithField}=helpers_["fieldValidators"];const createIfNumberExistsValidator=({than:than,message:message})=>arg=>{if(arg.value){return numberGreaterThanField({than:than,message:message})({...arg,value:parseInt(arg.value,10)})}};const ifExistsNumberGreaterThanZero=createIfNumberExistsValidator({than:0,message:i18nTexts.editPolicy.errors.numberGreatThan0Required});const ifExistsNumberNonNegative=createIfNumberExistsValidator({than:-1,message:i18nTexts.editPolicy.errors.nonNegativeNumberRequired});const ROLLOVER_EMPTY_VALIDATION="ROLLOVER_EMPTY_VALIDATION";const rolloverThresholdsValidator=({form:form,path:path})=>{var _fields$ROLLOVER_FORM,_fields$ROLLOVER_FORM2,_fields$ROLLOVER_FORM3;const fields=form.getFields();if(!((_fields$ROLLOVER_FORM=fields[ROLLOVER_FORM_PATHS.maxAge])!==null&&_fields$ROLLOVER_FORM!==void 0&&_fields$ROLLOVER_FORM.value||(_fields$ROLLOVER_FORM2=fields[ROLLOVER_FORM_PATHS.maxDocs])!==null&&_fields$ROLLOVER_FORM2!==void 0&&_fields$ROLLOVER_FORM2.value||(_fields$ROLLOVER_FORM3=fields[ROLLOVER_FORM_PATHS.maxSize])!==null&&_fields$ROLLOVER_FORM3!==void 0&&_fields$ROLLOVER_FORM3.value)){if(path===ROLLOVER_FORM_PATHS.maxAge){return{code:ROLLOVER_EMPTY_VALIDATION,message:i18nTexts.editPolicy.errors.maximumAgeRequiredMessage}}else if(path===ROLLOVER_FORM_PATHS.maxDocs){return{code:ROLLOVER_EMPTY_VALIDATION,message:i18nTexts.editPolicy.errors.maximumDocumentsRequiredMessage}}else{return{code:ROLLOVER_EMPTY_VALIDATION,message:i18nTexts.editPolicy.errors.maximumSizeRequiredMessage}}}else{fields[ROLLOVER_FORM_PATHS.maxAge].clearErrors(ROLLOVER_EMPTY_VALIDATION);fields[ROLLOVER_FORM_PATHS.maxDocs].clearErrors(ROLLOVER_EMPTY_VALIDATION);fields[ROLLOVER_FORM_PATHS.maxSize].clearErrors(ROLLOVER_EMPTY_VALIDATION)}};const minAgeValidator=arg=>numberGreaterThanField({than:0,allowEquality:true,message:i18nTexts.editPolicy.errors.nonNegativeNumberRequired})({...arg,value:arg.value===""?-Infinity:parseInt(arg.value,10)});const createPolicyNameValidations=({policies:policies,saveAsNewPolicy:saveAsNewPolicy,originalPolicyName:originalPolicyName})=>[{validator:emptyField(i18nTexts.editPolicy.errors.policyNameRequiredMessage)},{validator:startsWithField({message:i18nTexts.editPolicy.errors.policyNameStartsWithUnderscoreErrorMessage,char:"_"})},{validator:containsCharsField({message:i18nTexts.editPolicy.errors.policyNameContainsInvalidChars,chars:[","," "]})},{validator:arg=>{const policyName=arg.value;if(window.TextEncoder&&(new window.TextEncoder).encode(policyName).length>255){return{message:i18nTexts.editPolicy.errors.policyNameTooLongErrorMessage}}}},{validator:arg=>{const policyName=arg.value;if(saveAsNewPolicy&&policyName===originalPolicyName){return{message:i18nTexts.editPolicy.errors.policyNameMustBeDifferentErrorMessage}}else if(policyName!==originalPolicyName){const policyNames=policies.map(existingPolicy=>existingPolicy.name);if(policyNames.includes(policyName)){return{message:i18nTexts.editPolicy.errors.policyNameAlreadyUsedErrorMessage}}}}}];const rolloverFormPaths=Object.values(ROLLOVER_FORM_PATHS);const{emptyField:schema_emptyField,numberGreaterThanField:schema_numberGreaterThanField}=helpers_["fieldValidators"];const serializers={stringToNumber:v=>v!=null?parseInt(v,10):undefined};const schema={_meta:{hot:{isUsingDefaultRollover:{defaultValue:true,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.isUsingDefaultRollover",{defaultMessage:"Use recommended defaults"})},customRollover:{enabled:{defaultValue:true,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.enableRolloverLabel",{defaultMessage:"Enable rollover"})},maxStorageSizeUnit:{defaultValue:"gb"},maxAgeUnit:{defaultValue:"d"}},bestCompression:{label:i18nTexts.editPolicy.bestCompressionFieldLabel},readonlyEnabled:{defaultValue:false,label:i18nTexts.editPolicy.readonlyEnabledFieldLabel}},warm:{enabled:{defaultValue:false,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.warmPhase.activateWarmPhaseSwitchLabel",{defaultMessage:"Activate warm phase"})},minAgeUnit:{defaultValue:"d"},bestCompression:{label:i18nTexts.editPolicy.bestCompressionFieldLabel},dataTierAllocationType:{label:i18nTexts.editPolicy.allocationTypeOptionsFieldLabel},allocationNodeAttribute:{label:i18nTexts.editPolicy.allocationNodeAttributeFieldLabel},readonlyEnabled:{defaultValue:false,label:i18nTexts.editPolicy.readonlyEnabledFieldLabel}},cold:{enabled:{defaultValue:false,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.coldPhase.activateColdPhaseSwitchLabel",{defaultMessage:"Activate cold phase"})},freezeEnabled:{defaultValue:false,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.coldPhase.freezeIndexLabel",{defaultMessage:"Freeze index"})},minAgeUnit:{defaultValue:"d"},dataTierAllocationType:{label:i18nTexts.editPolicy.allocationTypeOptionsFieldLabel},allocationNodeAttribute:{label:i18nTexts.editPolicy.allocationNodeAttributeFieldLabel}},delete:{enabled:{defaultValue:false,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.activateWarmPhaseSwitchLabel",{defaultMessage:"Activate delete phase"})},minAgeUnit:{defaultValue:"d"}}},phases:{hot:{actions:{rollover:{max_age:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.maximumAgeLabel",{defaultMessage:"Maximum age"}),validations:[{validator:rolloverThresholdsValidator},{validator:ifExistsNumberGreaterThanZero}],fieldsToValidateOnChange:rolloverFormPaths},max_docs:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.maximumDocumentsLabel",{defaultMessage:"Maximum documents"}),validations:[{validator:rolloverThresholdsValidator},{validator:ifExistsNumberGreaterThanZero}],serializer:serializers.stringToNumber,fieldsToValidateOnChange:rolloverFormPaths},max_size:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.maximumIndexSizeLabel",{defaultMessage:"Maximum index size"}),validations:[{validator:rolloverThresholdsValidator},{validator:ifExistsNumberGreaterThanZero}],fieldsToValidateOnChange:rolloverFormPaths}},forcemerge:{max_num_segments:{label:i18nTexts.editPolicy.maxNumSegmentsFieldLabel,validations:[{validator:schema_emptyField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.forcemerge.numberOfSegmentsRequiredError",{defaultMessage:"A value for number of segments is required."}))},{validator:ifExistsNumberGreaterThanZero}],serializer:serializers.stringToNumber}},shrink:{number_of_shards:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.shrink.numberOfPrimaryShardsLabel",{defaultMessage:"Number of primary shards"}),validations:[{validator:schema_emptyField(i18nTexts.editPolicy.errors.numberRequired)},{validator:schema_numberGreaterThanField({message:i18nTexts.editPolicy.errors.numberGreatThan0Required,than:0})}],serializer:serializers.stringToNumber}},set_priority:{priority:{defaultValue:application_constants["n"].hot,label:i18nTexts.editPolicy.indexPriorityFieldLabel,validations:[{validator:schema_emptyField(i18nTexts.editPolicy.errors.numberRequired)},{validator:ifExistsNumberNonNegative}],serializer:serializers.stringToNumber}}}},warm:{min_age:{defaultValue:"0",validations:[{validator:minAgeValidator}]},actions:{allocate:{number_of_replicas:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.numberOfReplicasLabel",{defaultMessage:"Number of replicas"}),validations:[{validator:schema_emptyField(i18nTexts.editPolicy.errors.numberRequired)},{validator:ifExistsNumberNonNegative}],serializer:serializers.stringToNumber}},shrink:{number_of_shards:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.shrink.numberOfPrimaryShardsLabel",{defaultMessage:"Number of primary shards"}),validations:[{validator:schema_emptyField(i18nTexts.editPolicy.errors.numberRequired)},{validator:schema_numberGreaterThanField({message:i18nTexts.editPolicy.errors.numberGreatThan0Required,than:0})}],serializer:serializers.stringToNumber}},forcemerge:{max_num_segments:{label:i18nTexts.editPolicy.maxNumSegmentsFieldLabel,validations:[{validator:schema_emptyField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.forcemerge.numberOfSegmentsRequiredError",{defaultMessage:"A value for number of segments is required."}))},{validator:ifExistsNumberGreaterThanZero}],serializer:serializers.stringToNumber}},set_priority:{priority:{defaultValue:application_constants["n"].warm,label:i18nTexts.editPolicy.indexPriorityFieldLabel,validations:[{validator:schema_emptyField(i18nTexts.editPolicy.errors.numberRequired)},{validator:ifExistsNumberNonNegative}],serializer:serializers.stringToNumber}}}},cold:{min_age:{defaultValue:"0",validations:[{validator:minAgeValidator}]},actions:{allocate:{number_of_replicas:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.coldPhase.numberOfReplicasLabel",{defaultMessage:"Number of replicas"}),validations:[{validator:schema_emptyField(i18nTexts.editPolicy.errors.numberRequired)},{validator:ifExistsNumberNonNegative}],serializer:serializers.stringToNumber}},set_priority:{priority:{defaultValue:application_constants["n"].cold,label:i18nTexts.editPolicy.indexPriorityFieldLabel,validations:[{validator:schema_emptyField(i18nTexts.editPolicy.errors.numberRequired)},{validator:ifExistsNumberNonNegative}],serializer:serializers.stringToNumber}},searchable_snapshot:{snapshot_repository:{label:i18nTexts.editPolicy.searchableSnapshotsFieldLabel,validations:[{validator:schema_emptyField(i18nTexts.editPolicy.errors.searchableSnapshotRepoRequired)}]}}}},delete:{min_age:{defaultValue:"365",validations:[{validator:minAgeValidator}]},actions:{wait_for_snapshot:{policy:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.waitForSnapshot.snapshotPolicyFieldLabel",{defaultMessage:"Policy name (optional)"})}}}}}};const ConfigurationIssuesContext=Object(external_kbnSharedDeps_React_["createContext"])(null);const pathToHotPhaseSearchableSnapshot="phases.hot.actions.searchable_snapshot.snapshot_repository";const ConfigurationIssuesProvider=({children:children})=>{const[formData]=Object(hook_form_lib_["useFormData"])({watch:[pathToHotPhaseSearchableSnapshot,isUsingCustomRolloverPath,isUsingDefaultRolloverPath]});const isUsingDefaultRollover=Object(external_kbnSharedDeps_Lodash_["get"])(formData,isUsingDefaultRolloverPath);const isUsingCustomRollover=Object(external_kbnSharedDeps_Lodash_["get"])(formData,isUsingCustomRolloverPath,true);return external_kbnSharedDeps_React_default.a.createElement(ConfigurationIssuesContext.Provider,{value:{isUsingRollover:isUsingDefaultRollover===false?isUsingCustomRollover:true,isUsingSearchableSnapshotInHotPhase:Object(external_kbnSharedDeps_Lodash_["get"])(formData,pathToHotPhaseSearchableSnapshot)!=null}},children)};const useConfigurationIssues=()=>{const ctx=Object(external_kbnSharedDeps_React_["useContext"])(ConfigurationIssuesContext);if(!ctx)throw new Error("Cannot use configuration issues outside of configuration issues context");return ctx};const FormErrorsContext=Object(external_kbnSharedDeps_React_["createContext"])(null);const createEmptyErrors=()=>({hasErrors:false,hot:{},warm:{},cold:{},delete:{},other:{}});const FormErrorsProvider=({children:children})=>{const[errors,setErrors]=Object(external_kbnSharedDeps_React_["useState"])(createEmptyErrors);const form=Object(hook_form_lib_["useFormContext"])();const{getErrors:getFormErrors}=form;const addError=Object(external_kbnSharedDeps_React_["useCallback"])((phase,fieldPath,errorMessages)=>{setErrors(previousErrors=>({...previousErrors,hasErrors:true,[phase]:{...previousErrors[phase],[fieldPath]:errorMessages}}))},[setErrors]);const clearError=Object(external_kbnSharedDeps_React_["useCallback"])((phase,fieldPath)=>{if(getFormErrors().length){setErrors(previousErrors=>{const{[phase]:{[fieldPath]:fieldErrorToOmit,...restOfPhaseErrors},hasErrors:hasErrors,...otherPhases}=previousErrors;const nextHasErrors=Object.keys(restOfPhaseErrors).length===0&&Object.values(otherPhases).some(phaseErrors=>!!Object.keys(phaseErrors).length);return{...previousErrors,hasErrors:nextHasErrors,[phase]:restOfPhaseErrors}})}else{setErrors(createEmptyErrors)}},[getFormErrors,setErrors]);return external_kbnSharedDeps_React_default.a.createElement(FormErrorsContext.Provider,{value:{errors:errors,addError:addError,clearError:clearError}},children)};const useFormErrorsContext=()=>{const ctx=Object(external_kbnSharedDeps_React_["useContext"])(FormErrorsContext);if(!ctx){throw new Error("useFormErrorsContext can only be used inside of FormErrorsProvider")}return ctx};const getPhaseTimingConfiguration=formData=>{var _formData$_meta,_formData$_meta$warm,_formData$_meta2,_formData$_meta2$cold;const isWarmPhaseEnabled=formData===null||formData===void 0?void 0:(_formData$_meta=formData._meta)===null||_formData$_meta===void 0?void 0:(_formData$_meta$warm=_formData$_meta.warm)===null||_formData$_meta$warm===void 0?void 0:_formData$_meta$warm.enabled;const isColdPhaseEnabled=formData===null||formData===void 0?void 0:(_formData$_meta2=formData._meta)===null||_formData$_meta2===void 0?void 0:(_formData$_meta2$cold=_formData$_meta2.cold)===null||_formData$_meta2$cold===void 0?void 0:_formData$_meta2$cold.enabled;return{hot:{isFinalDataPhase:!isWarmPhaseEnabled&&!isColdPhaseEnabled},warm:{isFinalDataPhase:isWarmPhaseEnabled&&!isColdPhaseEnabled},cold:{isFinalDataPhase:isColdPhaseEnabled}}};const PhaseTimingsContext=Object(external_kbnSharedDeps_React_["createContext"])(null);const PhaseTimingsProvider=({children:children})=>{const[formData]=Object(hook_form_lib_["useFormData"])({watch:["_meta.warm.enabled","_meta.cold.enabled","_meta.delete.enabled"]});return external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{path:"_meta.delete.enabled"},field=>{var _formData$_meta3,_formData$_meta3$dele;return external_kbnSharedDeps_React_default.a.createElement(PhaseTimingsContext.Provider,{value:{...getPhaseTimingConfiguration(formData),isDeletePhaseEnabled:formData===null||formData===void 0?void 0:(_formData$_meta3=formData._meta)===null||_formData$_meta3===void 0?void 0:(_formData$_meta3$dele=_formData$_meta3.delete)===null||_formData$_meta3$dele===void 0?void 0:_formData$_meta3$dele.enabled,setDeletePhaseEnabled:field.setValue}},children)})};const usePhaseTimings=()=>{const ctx=Object(external_kbnSharedDeps_React_["useContext"])(PhaseTimingsContext);if(!ctx)throw new Error("Cannot use phase timings outside of phase timings context");return ctx};const Form=({form:form,children:children})=>external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["Form"],{form:form},external_kbnSharedDeps_React_default.a.createElement(ConfigurationIssuesProvider,null,external_kbnSharedDeps_React_default.a.createElement(FormErrorsProvider,null,external_kbnSharedDeps_React_default.a.createElement(PhaseTimingsProvider,null,children))));function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const isXPhaseField=phase=>fieldPath=>fieldPath.startsWith(`phases.${phase}`)||fieldPath.startsWith(`_meta.${phase}`);const isHotPhaseField=isXPhaseField("hot");const isWarmPhaseField=isXPhaseField("warm");const isColdPhaseField=isXPhaseField("cold");const isDeletePhaseField=isXPhaseField("delete");const determineFieldPhase=fieldPath=>{if(isHotPhaseField(fieldPath)){return"hot"}if(isWarmPhaseField(fieldPath)){return"warm"}if(isColdPhaseField(fieldPath)){return"cold"}if(isDeletePhaseField(fieldPath)){return"delete"}return"other"};const EnhancedUseField=props=>{const{path:path}=props;const isMounted=Object(external_kbnSharedDeps_React_["useRef"])(false);const phase=Object(external_kbnSharedDeps_React_["useMemo"])(()=>determineFieldPhase(path),[path]);const{addError:addError,clearError:clearError}=useFormErrorsContext();const onError=Object(external_kbnSharedDeps_React_["useCallback"])(errors=>{if(!isMounted.current){return}if(errors){addError(phase,path,errors)}else{clearError(phase,path)}},[phase,path,addError,clearError]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{isMounted.current=true;return()=>{isMounted.current=false}},[]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>()=>{if(isMounted.current===false){clearError(phase,path)}},[phase,path,clearError]);return external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],_extends({},props,{onError:onError}))};var services_ui_metric=__webpack_require__(7);var api_errors=__webpack_require__(14);const savePolicy=async(serializedPolicy,isNew)=>{try{await Object(api["g"])(serializedPolicy)}catch(err){const title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.saveErrorMessage",{defaultMessage:"Error saving lifecycle policy {lifecycleName}",values:{lifecycleName:serializedPolicy.name}});Object(api_errors["a"])(err,title);return false}const uiMetrics=Object(services_ui_metric["a"])(serializedPolicy.phases);uiMetrics.push(isNew?application_constants["j"]:application_constants["m"]);Object(services_ui_metric["c"])(web["a"].COUNT,uiMetrics);const message=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.successfulSaveMessage",{defaultMessage:'{verb} lifecycle policy "{lifecycleName}"',values:{verb:isNew?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.createdMessage",{defaultMessage:"Created"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.updatedMessage",{defaultMessage:"Updated"}),lifecycleName:serializedPolicy.name}});notification["c"].addSuccess(message);return true};const LearnMoreLink=({docPath:docPath,text:text})=>{const content=text?text:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.learnMore",defaultMessage:"Learn more"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:Object(documentation["a"])(docPath),target:"_blank",external:true},content)};const OptionalLabel=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.optionalMessage",defaultMessage:" (optional)"});const prettifyFormJson=policy=>({...policy,phases:{hot:policy.phases.hot,warm:policy.phases.warm,cold:policy.phases.cold,delete:policy.phases.delete}});const PolicyJsonFlyout=({policyName:policyName,close:close})=>{const[policy,setPolicy]=Object(external_kbnSharedDeps_React_["useState"])(undefined);const{validate:validateForm}=Object(hook_form_lib_["useFormContext"])();const[,getFormData]=Object(hook_form_lib_["useFormData"])();const updatePolicy=Object(external_kbnSharedDeps_React_["useCallback"])(async()=>{setPolicy(undefined);if(await validateForm()){setPolicy(prettifyFormJson(getFormData()))}else{setPolicy(null)}},[setPolicy,getFormData,validateForm]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{updatePolicy()},[updatePolicy]);let content;switch(policy){case undefined:content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],null);break;case null:content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{iconType:"alert",color:"danger",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyJsonFlyout.validationErrorCallout.title",{defaultMessage:"Invalid policy"})},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyJsonFlyout.validationErrorCallout.body",{defaultMessage:"To view the JSON for this policy address all validation errors."}));break;default:const{phases:phases}=policy;const json=JSON.stringify({policy:{phases:phases}},null,2);const endpoint=`PUT _ilm/policy/${policyName||"<policyName>"}`;const request=`${endpoint}\n${json}`;content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyJsonFlyout.descriptionText",defaultMessage:"This Elasticsearch request will create or update this index lifecycle policy."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeBlock"],{language:"json",isCopyable:true},request));break}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{maxWidth:480,onClose:close},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h2",null,policyName?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyJsonFlyout.namedTitle",defaultMessage:"Request for '{policyName}'",values:{policyName:policyName}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyJsonFlyout.unnamedTitle",defaultMessage:"Request"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,content),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"cross",onClick:close,flush:"left"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyJsonFlyout.closeButtonLabel",defaultMessage:"Close"}))))};function described_form_row_extends(){described_form_row_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return described_form_row_extends.apply(this,arguments)}const DescribedFormRow=({children:children,switchProps:switchProps,description:description,fieldNotices:fieldNotices,...restDescribedFormProps})=>{var _switchProps$checked;if(switchProps&&!(typeof switchProps.checked==="boolean"||typeof switchProps.initialValue==="boolean")){throw new Error("Must specify controlled, uncontrolled component. See SwitchProps interface!")}const[uncontrolledIsContentVisible,setUncontrolledIsContentVisible]=Object(external_kbnSharedDeps_React_["useState"])(()=>{var _switchProps$initialV;return(_switchProps$initialV=switchProps===null||switchProps===void 0?void 0:switchProps.initialValue)!==null&&_switchProps$initialV!==void 0?_switchProps$initialV:false});const isContentVisible=Boolean(switchProps===undefined||((_switchProps$checked=switchProps===null||switchProps===void 0?void 0:switchProps.checked)!==null&&_switchProps$checked!==void 0?_switchProps$checked:uncontrolledIsContentVisible));const renderToggle=()=>{if(!switchProps){return null}const{onChange:onChange,checked:checked,initialValue:initialValue,...restSwitchProps}=switchProps;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],described_form_row_extends({},restSwitchProps,{checked:isContentVisible,onChange:e=>{const nextValue=e.target.checked;setUncontrolledIsContentVisible(nextValue);if(onChange){onChange(nextValue)}}}))};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],described_form_row_extends({},restDescribedFormProps,{description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,description,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),renderToggle(),fieldNotices)}),isContentVisible?typeof children==="function"?children():children:null)};function toggle_field_with_described_form_row_extends(){toggle_field_with_described_form_row_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return toggle_field_with_described_form_row_extends.apply(this,arguments)}const ToggleFieldWithDescribedFormRow=({switchProps:switchProps,...passThroughProps})=>external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{path:switchProps.path},field=>external_kbnSharedDeps_React_default.a.createElement(DescribedFormRow,toggle_field_with_described_form_row_extends({},passThroughProps,{switchProps:{...switchProps,label:field.label,checked:field.value,onChange:field.setValue}})));const FieldLoadingError=props=>{const{title:title,body:body,resendRequest:resendRequest}=props;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":props["data-test-subj"],iconType:"help",color:"warning",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,title,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{size:"s",color:"warning",onClick:resendRequest,iconType:"refresh","aria-label":props["aria-label"]}))},body))};var external_kbnSharedDeps_Moment_=__webpack_require__(28);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);const phaseOrder=["hot","warm","cold","delete"];const getMinAge=(phase,formData)=>{var _formData$phases,_formData$phases$phas;return{min_age:(_formData$phases=formData.phases)!==null&&_formData$phases!==void 0&&(_formData$phases$phas=_formData$phases[phase])!==null&&_formData$phases$phas!==void 0&&_formData$phases$phas.min_age?formData.phases[phase].min_age+formData._meta[phase].minAgeUnit:"0ms"}};const getPhaseMinAgeInMilliseconds=phase=>{let milliseconds;const{units:units,size:size}=splitSizeAndUnits(phase.min_age);if(units==="micros"){milliseconds=parseInt(size,10)/1e3}else if(units==="nanos"){milliseconds=parseInt(size,10)/1e6}else{milliseconds=external_kbnSharedDeps_Moment_default.a.duration(size,units).asMilliseconds()}return milliseconds};const formDataToAbsoluteTimings=formData=>{const{_meta:_meta}=formData;if(!_meta){return{hot:{min_age:undefined}}}return{hot:{min_age:undefined},warm:_meta.warm.enabled?getMinAge("warm",formData):undefined,cold:_meta.cold.enabled?getMinAge("cold",formData):undefined,delete:_meta.delete.enabled?getMinAge("delete",formData):undefined}};const calculateRelativeFromAbsoluteMilliseconds=inputs=>phaseOrder.reduce((acc,phaseName,idx)=>{var _inputs$nextPhase;if(phaseName==="delete"){return acc}const phase=inputs[phaseName];if(!phase){return acc}const nextPhase=phaseOrder.slice(idx+1).find(nextPhaseName=>Boolean(inputs[nextPhaseName]));let nextPhaseMinAge=Infinity;if(nextPhase&&(_inputs$nextPhase=inputs[nextPhase])!==null&&_inputs$nextPhase!==void 0&&_inputs$nextPhase.min_age){nextPhaseMinAge=getPhaseMinAgeInMilliseconds(inputs[nextPhase])}return{total:Math.max(acc.total,nextPhaseMinAge),phases:{...acc.phases,[phaseName]:Math.max(nextPhaseMinAge-acc.total,0)}}},{total:0,phases:{hot:0,warm:inputs.warm?0:undefined,cold:inputs.cold?0:undefined}});const TimelinePhaseText=({phaseName:phaseName,durationInPhase:durationInPhase})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",justifyContent:"flexStart",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("strong",null,phaseName))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},typeof durationInPhase==="string"?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},durationInPhase):durationInPhase));var timeline=__webpack_require__(39);const exists=v=>v!=null;const toPercent=(n,total)=>n/total*100;const msTimeToOverallPercent=(ms,totalMs)=>{if(!isFinite(ms)){return 100}if(totalMs===0){return 100}return toPercent(ms,totalMs)};const SCORE_BUFFER_AMOUNT=50;const timeline_i18nTexts={title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.timeline.title",{defaultMessage:"Policy summary"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.timeline.description",{defaultMessage:"This policy moves data through the following phases."}),hotPhase:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.timeline.hotPhaseSectionTitle",{defaultMessage:"Hot phase"}),warmPhase:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.timeline.warmPhaseSectionTitle",{defaultMessage:"Warm phase"}),coldPhase:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.timeline.coldPhaseSectionTitle",{defaultMessage:"Cold phase"}),deleteIcon:{toolTipContent:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.timeline.deleteIconToolTipContent",{defaultMessage:"Policy deletes the index after lifecycle phases complete."})},foreverIcon:{ariaLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.timeline.foreverIconToolTipContent",{defaultMessage:"Forever"})}};const calculateWidths=inputs=>{const hotScore=msTimeToOverallPercent(inputs.phases.hot,inputs.total)+SCORE_BUFFER_AMOUNT;const warmScore=inputs.phases.warm!=null?msTimeToOverallPercent(inputs.phases.warm,inputs.total)+SCORE_BUFFER_AMOUNT:0;const coldScore=inputs.phases.cold!=null?msTimeToOverallPercent(inputs.phases.cold,inputs.total)+SCORE_BUFFER_AMOUNT:0;const totalScore=hotScore+warmScore+coldScore;return{hot:`${toPercent(hotScore,totalScore)}%`,warm:`${toPercent(warmScore,totalScore)}%`,cold:`${toPercent(coldScore,totalScore)}%`}};const Timeline=Object(external_kbnSharedDeps_React_["memo"])(({hasDeletePhase:hasDeletePhase,isUsingRollover:isUsingRollover,...phasesMinAge})=>{const absoluteTimings={hot:{min_age:phasesMinAge.hotPhaseMinAge},warm:phasesMinAge.warmPhaseMinAge?{min_age:phasesMinAge.warmPhaseMinAge}:undefined,cold:phasesMinAge.coldPhaseMinAge?{min_age:phasesMinAge.coldPhaseMinAge}:undefined,delete:phasesMinAge.deletePhaseMinAge?{min_age:phasesMinAge.deletePhaseMinAge}:undefined};const phaseAgeInMilliseconds=calculateRelativeFromAbsoluteMilliseconds(absoluteTimings);const widths=calculateWidths(phaseAgeInMilliseconds);const getDurationInPhaseContent=phase=>phaseAgeInMilliseconds.phases[phase]===Infinity?external_kbnSharedDeps_React_default.a.createElement(InfinityIcon,{color:"subdued","aria-label":timeline_i18nTexts.foreverIcon.ariaLabel}):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",direction:"column",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,timeline_i18nTexts.title)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},timeline_i18nTexts.description,"",external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{docPath:"ilm-index-lifecycle.html#ilm-phase-transitions",text:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.learnAboutTimingText",defaultMessage:"Learn about timing"})}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement("div",{className:"ilmTimeline",ref:el=>{if(el){var _widths$warm,_widths$cold;el.style.setProperty("--ilm-timeline-hot-phase-width",widths.hot);el.style.setProperty("--ilm-timeline-warm-phase-width",(_widths$warm=widths.warm)!==null&&_widths$warm!==void 0?_widths$warm:null);el.style.setProperty("--ilm-timeline-cold-phase-width",(_widths$cold=widths.cold)!==null&&_widths$cold!==void 0?_widths$cold:null)}}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"none",alignItems:"flexStart",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement("div",{className:"ilmTimeline__phasesContainer"},external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"ilmTimelineHotPhase",className:"ilmTimeline__phasesContainer__phase ilmTimeline__hotPhase"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"ilmTimeline__colorBar ilmTimeline__hotPhase__colorBar"}),external_kbnSharedDeps_React_default.a.createElement(TimelinePhaseText,{phaseName:timeline_i18nTexts.hotPhase,durationInPhase:getDurationInPhaseContent("hot")})),exists(phaseAgeInMilliseconds.phases.warm)&&external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"ilmTimelineWarmPhase",className:"ilmTimeline__phasesContainer__phase ilmTimeline__warmPhase"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"ilmTimeline__colorBar ilmTimeline__warmPhase__colorBar"}),external_kbnSharedDeps_React_default.a.createElement(TimelinePhaseText,{phaseName:timeline_i18nTexts.warmPhase,durationInPhase:getDurationInPhaseContent("warm")})),exists(phaseAgeInMilliseconds.phases.cold)&&external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"ilmTimelineColdPhase",className:"ilmTimeline__phasesContainer__phase ilmTimeline__coldPhase"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"ilmTimeline__colorBar ilmTimeline__coldPhase__colorBar"}),external_kbnSharedDeps_React_default.a.createElement(TimelinePhaseText,{phaseName:timeline_i18nTexts.coldPhase,durationInPhase:getDurationInPhaseContent("cold")})))),hasDeletePhase&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"ilmTimelineDeletePhase",className:"ilmTimeline__deleteIconContainer"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"trash",content:timeline_i18nTexts.deleteIcon.toolTipContent})))))))});const timeline_container_Timeline=()=>{var _timings$warm,_timings$cold,_timings$delete,_formData$_meta,_formData$_meta$delet;const[formData]=Object(hook_form_lib_["useFormData"])();const timings=formDataToAbsoluteTimings(formData);const{isUsingRollover:isUsingRollover}=useConfigurationIssues();return external_kbnSharedDeps_React_default.a.createElement(Timeline,{hotPhaseMinAge:timings.hot.min_age,warmPhaseMinAge:(_timings$warm=timings.warm)===null||_timings$warm===void 0?void 0:_timings$warm.min_age,coldPhaseMinAge:(_timings$cold=timings.cold)===null||_timings$cold===void 0?void 0:_timings$cold.min_age,deletePhaseMinAge:(_timings$delete=timings.delete)===null||_timings$delete===void 0?void 0:_timings$delete.min_age,isUsingRollover:isUsingRollover,hasDeletePhase:Boolean((_formData$_meta=formData._meta)===null||_formData$_meta===void 0?void 0:(_formData$_meta$delet=_formData$_meta.delete)===null||_formData$_meta$delet===void 0?void 0:_formData$_meta$delet.enabled)})};const form_errors_callout_i18nTexts={callout:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyErrorCalloutTitle",{defaultMessage:"This policy contains errors"}),body:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyErrorCalloutDescription",{defaultMessage:"Please fix all errors before saving the policy."})}};const FormErrorsCallout=()=>{const{errors:{hasErrors:hasErrors}}=useFormErrorsContext();if(!hasErrors){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"policyFormErrorsCallout",color:"danger",title:form_errors_callout_i18nTexts.callout.title},form_errors_callout_i18nTexts.callout.body),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null))};function infinity_icon_svg_extends(){infinity_icon_svg_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return infinity_icon_svg_extends.apply(this,arguments)}const InfinityIconSvg=props=>external_kbnSharedDeps_React_default.a.createElement("svg",infinity_icon_svg_extends({viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none"},props),external_kbnSharedDeps_React_default.a.createElement("defs",null),external_kbnSharedDeps_React_default.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.44354 9.86928c-.47429.46802-1.12585.75702-1.84475.75702-1.45038 0-2.626143-1.17576-2.626143-2.62614S2.14841 5.37401 3.59879 5.37401c.71899 0 1.37049.28893 1.84473.75702l.00033-.00033.27438.27438L7.31327 8.0001l-.00001.00001.68777.68777.00001-.00002 1.86843 1.86844-.00078.0007c.65021.6442 1.54481 1.042 2.53251 1.042C14.3888 11.599 16 9.98772 16 8.00016s-1.6112-3.59879-3.5988-3.59879c-.9876 0-1.8822.39779-2.53249 1.04188l.00072.00073-.76518.76516.68777.68777.79978-.79975-.0002-.00017c.471-.44801 1.1082-.72298 1.8096-.72298 1.4504 0 2.6262 1.17577 2.6262 2.62615s-1.1758 2.62614-2.6262 2.62614c-.7012 0-1.3384-.2749-1.8094-.72282l.0002-.00024L8.68881 8.0001l.00278-.00277-.68777-.68777-.00278.00278-1.90297-1.90295-.0007.0007c-.64728-.62456-1.52806-1.00872-2.49858-1.00872C1.61124 4.40137 0 6.0126 0 8.00016 0 9.98772 1.61124 11.599 3.59879 11.599c.97055 0 1.85122-.3841 2.49844-1.0086l.00065.0006.80272-.8027-.68777-.68777-.76902.76901-.00027-.00026z"}));const deleteDataLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.phaseTiming.beforeDeleteDescription",{defaultMessage:"Delete data after this phase"});const keepDataLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.phaseTiming.foreverTimingDescription",{defaultMessage:"Keep data in this phase forever"});const PhaseFooter=({phase:phase})=>{const{isDeletePhaseEnabled:isDeletePhaseEnabled,setDeletePhaseEnabled:setValue,[phase]:phaseConfiguration}=usePhaseTimings();if(!phaseConfiguration.isFinalDataPhase){return null}const selectedButton=isDeletePhaseEnabled?"ilmEnableDeletePhaseButton":"ilmDisableDeletePhaseButton";const buttons=[{id:`ilmDisableDeletePhaseButton`,label:keepDataLabel,iconType:InfinityIconSvg},{id:`ilmEnableDeletePhaseButton`,label:deleteDataLabel,iconType:"trash","data-test-subj":"enableDeletePhaseButton"}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s",wrap:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},isDeletePhaseEnabled?deleteDataLabel:keepDataLabel)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonGroup"],{legend:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.buttonGroupLegend",{defaultMessage:"Enable or disable delete phase"}),options:buttons,idSelected:selectedButton,onChange:id=>{setValue(id==="ilmEnableDeletePhaseButton")},isIconOnly:true})))};function infinity_icon_extends(){infinity_icon_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return infinity_icon_extends.apply(this,arguments)}const InfinityIcon=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],infinity_icon_extends({type:InfinityIconSvg},props));const EditPolicyContext=Object(external_kbnSharedDeps_React_["createContext"])(null);const EditPolicyContextProvider=({value:value,children:children})=>external_kbnSharedDeps_React_default.a.createElement(EditPolicyContext.Provider,{value:value},children);const useEditPolicyContext=()=>{const ctx=Object(external_kbnSharedDeps_React_["useContext"])(EditPolicyContext);if(!ctx){throw new Error("useEditPolicyContext can only be called inside of EditPolicyContext!")}return ctx};const NodeAttrsDetails=({close:close,selectedNodeAttrs:selectedNodeAttrs})=>{const{data:data,isLoading:isLoading,error:error,resendRequest:resendRequest}=Object(api["i"])(selectedNodeAttrs);let content;if(isLoading){content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingContent"],{lines:3})}else if(error){const{statusCode:statusCode,message:message}=error;content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.nodeDetailsLoadingFailedTitle",defaultMessage:"Unable to load node attribute details"}),color:"danger"},external_kbnSharedDeps_React_default.a.createElement("p",null,message," (",statusCode,")"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:resendRequest,iconType:"refresh",color:"danger"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.nodeDetailsReloadButton",defaultMessage:"Try again"})))}else{content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{items:data||[],columns:[{field:"nodeId",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.nodeAttrDetails.idField",{defaultMessage:"ID"})},{field:"stats.name",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.nodeAttrDetails.nameField",{defaultMessage:"Name"})},{field:"stats.host",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.nodeAttrDetails.hostField",{defaultMessage:"Host"})}],pagination:true,sorting:true})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPortal"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{ownFocus:true,onClose:close},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.nodeAttrDetails.title",defaultMessage:"Nodes that contain the attribute {selectedNodeAttrs}",values:{selectedNodeAttrs:selectedNodeAttrs}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),content)))};const learnMoreLink=external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{text:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.learnAboutShardAllocationLink",defaultMessage:"Learn about shard allocation"}),docPath:"modules-cluster.html#cluster-shard-allocation-settings"});const node_allocation_i18nTexts={doNotModifyAllocationOption:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.nodeAllocation.doNotModifyAllocationOption",{defaultMessage:"Do not modify allocation configuration"})};const NodeAllocation=({phase:phase,nodes:nodes,isLoading:isLoading})=>{const allocationNodeAttributePath=`_meta.${phase}.allocationNodeAttribute`;const[formData]=Object(hook_form_lib_["useFormData"])({watch:[allocationNodeAttributePath]});const selectedAllocationNodeAttribute=Object(external_kbnSharedDeps_Lodash_["get"])(formData,allocationNodeAttributePath);const[selectedNodeAttrsForDetails,setSelectedNodeAttrsForDetails]=Object(external_kbnSharedDeps_React_["useState"])(null);const nodeOptions=Object.keys(nodes).map(attrs=>({text:`${attrs} (${nodes[attrs].length})`,value:attrs}));nodeOptions.sort((a,b)=>a.value.localeCompare(b.value));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.nodeAllocation.customOption.description",defaultMessage:"Use node attributes to control shard allocation. {learnMoreLink}.",values:{learnMoreLink:learnMoreLink}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{path:`_meta.${phase}.allocationNodeAttribute`,component:components_["SelectField"],componentProps:{helpText:!!selectedAllocationNodeAttribute?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs",style:{maxWidth:400},"data-test-subj":`${phase}-viewNodeDetailsFlyoutButton`,flush:"left",onClick:()=>setSelectedNodeAttrsForDetails(selectedAllocationNodeAttribute)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.viewNodeDetailsButton",defaultMessage:"View nodes with the selected attribute"})):undefined,euiFieldProps:{"data-test-subj":`${phase}-selectedNodeAttrs`,options:[{text:node_allocation_i18nTexts.doNotModifyAllocationOption,value:""}].concat(nodeOptions),hasNoInitialSelection:false,isLoading:isLoading}}}),selectedNodeAttrsForDetails?external_kbnSharedDeps_React_default.a.createElement(NodeAttrsDetails,{selectedNodeAttrs:selectedNodeAttrsForDetails,close:()=>setSelectedNodeAttrsForDetails(null)}):null)};var data_tier_allocation=__webpack_require__(48);const data_tier_allocation_i18nTexts={allocationOptions:{warm:{default:{input:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.defaultOption.input",{defaultMessage:"Use warm nodes (recommended)"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.defaultOption.helpText",{defaultMessage:"Move data to nodes in the warm tier."})},none:{inputDisplay:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.noneOption.input",{defaultMessage:"Off"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.noneOption.helpText",{defaultMessage:"Do not move data in the warm phase."})},custom:{inputDisplay:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.customOption.input",{defaultMessage:"Custom"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.customOption.helpText",{defaultMessage:"Move data based on node attributes."})}},cold:{default:{input:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.defaultOption.input",{defaultMessage:"Use cold nodes (recommended)"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.defaultOption.helpText",{defaultMessage:"Move data to nodes in the cold tier."})},none:{inputDisplay:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.noneOption.input",{defaultMessage:"Off"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.noneOption.helpText",{defaultMessage:"Do not move data in the cold phase."})},custom:{inputDisplay:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.customOption.input",{defaultMessage:"Custom"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.customOption.helpText",{defaultMessage:"Move data based on node attributes."})}}}};const getSelectOptions=(phase,disableDataTierOption)=>[disableDataTierOption?undefined:{"data-test-subj":"defaultDataAllocationOption",value:"node_roles",inputDisplay:data_tier_allocation_i18nTexts.allocationOptions[phase].default.input,dropdownDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("strong",null,data_tier_allocation_i18nTexts.allocationOptions[phase].default.input),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"euiTextColor--subdued"},data_tier_allocation_i18nTexts.allocationOptions[phase].default.helpText)))},{"data-test-subj":"customDataAllocationOption",value:"node_attrs",inputDisplay:data_tier_allocation_i18nTexts.allocationOptions[phase].custom.inputDisplay,dropdownDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("strong",null,data_tier_allocation_i18nTexts.allocationOptions[phase].custom.inputDisplay),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"euiTextColor--subdued"},data_tier_allocation_i18nTexts.allocationOptions[phase].custom.helpText)))},{"data-test-subj":"noneDataAllocationOption",value:"none",inputDisplay:data_tier_allocation_i18nTexts.allocationOptions[phase].none.inputDisplay,dropdownDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("strong",null,data_tier_allocation_i18nTexts.allocationOptions[phase].none.inputDisplay),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"euiTextColor--subdued"},data_tier_allocation_i18nTexts.allocationOptions[phase].none.helpText)))}].filter(Boolean);const DataTierAllocation=props=>{const{phase:phase,hasNodeAttributes:hasNodeAttributes,disableDataTierOption:disableDataTierOption,isLoading:isLoading}=props;const dataTierAllocationTypePath=`_meta.${phase}.dataTierAllocationType`;const[formData]=Object(hook_form_lib_["useFormData"])({watch:dataTierAllocationTypePath});const dataTierAllocationType=Object(external_kbnSharedDeps_Lodash_["get"])(formData,dataTierAllocationTypePath);return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":`${phase}-dataTierAllocationControls`},external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{path:dataTierAllocationTypePath},field=>{if(disableDataTierOption&&field.value==="node_roles"){field.setValue("node_attrs")}return external_kbnSharedDeps_React_default.a.createElement(components_["SuperSelectField"],{field:field,euiFieldProps:{isLoading:isLoading,hasDividers:true,"data-test-subj":"dataTierSelect",options:getSelectOptions(phase,disableDataTierOption)}})}),dataTierAllocationType==="node_attrs"&&hasNodeAttributes&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"indexLifecycleManagement__phase__dataTierAllocation__controlSection"},external_kbnSharedDeps_React_default.a.createElement(NodeAllocation,props))))};const i18nTextsNodeRoleToDataTier={data_hot:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.dataTierHotLabel",{defaultMessage:"hot"}),data_warm:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.dataTierWarmLabel",{defaultMessage:"warm"}),data_cold:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.dataTierColdLabel",{defaultMessage:"cold"})};const default_allocation_notice_i18nTexts={notice:{warm:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.defaultAllocationNotice.warm.title",{defaultMessage:"No nodes assigned to the warm tier"}),body:nodeRole=>external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.defaultAllocationNotice.warm",{defaultMessage:"This policy will move data in the warm phase to {tier} tier nodes instead.",values:{tier:i18nTextsNodeRoleToDataTier[nodeRole]}})},cold:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.defaultAllocationNotice.cold.title",{defaultMessage:"No nodes assigned to the cold tier"}),body:nodeRole=>external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.defaultAllocationNotice.cold",{defaultMessage:"This policy will move data in the cold phase to {tier} tier nodes instead.",values:{tier:i18nTextsNodeRoleToDataTier[nodeRole]}})}},warning:{warm:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.defaultAllocationNotAvailableTitle",{defaultMessage:"No nodes assigned to the warm tier"}),body:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.defaultAllocationNotAvailableBody",{defaultMessage:"Assign at least one node to the warm or hot tier to use role-based allocation. The policy will fail to complete allocation if there are no available nodes."})},cold:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.defaultAllocationNotAvailableTitle",{defaultMessage:"No nodes assigned to the cold tier"}),body:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.defaultAllocationNotAvailableBody",{defaultMessage:"Assign at least one node to the cold, warm, or hot tier to use role-based allocation. The policy will fail to complete allocation if there are no available nodes."})}}};const DefaultAllocationNotice=({phase:phase,targetNodeRole:targetNodeRole})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"defaultAllocationNotice",title:default_allocation_notice_i18nTexts.notice[phase].title},default_allocation_notice_i18nTexts.notice[phase].body(targetNodeRole));const default_allocation_warning_i18nTexts={warning:{warm:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.defaultAllocationNotAvailableTitle",{defaultMessage:"No nodes assigned to the warm tier"}),body:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.defaultAllocationNotAvailableBody",{defaultMessage:"Assign at least one node to the warm or hot tier to use role-based allocation. The policy will fail to complete allocation if there are no available nodes."})},cold:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.defaultAllocationNotAvailableTitle",{defaultMessage:"No nodes assigned to the cold tier"}),body:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.defaultAllocationNotAvailableBody",{defaultMessage:"Assign at least one node to the cold, warm, or hot tier to use role-based allocation. The policy will fail to complete allocation if there are no available nodes."})}}};const DefaultAllocationWarning=({phase:phase})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"defaultAllocationWarning",title:default_allocation_warning_i18nTexts.warning[phase].title,color:"warning"},default_allocation_warning_i18nTexts.warning[phase].body);const no_node_attributes_warning_i18nTexts={title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.nodeAttributesMissingLabel",{defaultMessage:"No custom node attributes configured"}),warm:{body:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.warm.nodeAttributesMissingDescription",{defaultMessage:"Define custom node attributes in elasticsearch.yml to use attribute-based allocation."})},cold:{body:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.cold.nodeAttributesMissingDescription",{defaultMessage:"Define custom node attributes in elasticsearch.yml to use attribute-based allocation."})}};const NoNodeAttributesWarning=({phase:phase})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"noNodeAttributesWarning",style:{maxWidth:400},title:no_node_attributes_warning_i18nTexts.title,color:"warning"},no_node_attributes_warning_i18nTexts[phase].body);const missing_cold_tier_callout_i18nTexts={title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.cloudMissingColdTierCallout.title",{defaultMessage:"Create a cold tier"}),body:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.cloudMissingColdTierCallout.body",{defaultMessage:"Edit your Elastic Cloud deployment to set up a cold tier."}),linkText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.cloudMissingColdTierCallout.linkToCloudDeploymentDescription",{defaultMessage:"View cloud deployment"})};const MissingColdTierCallout=({linkToCloudDeployment:linkToCloudDeployment})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:missing_cold_tier_callout_i18nTexts.title,"data-test-subj":"cloudMissingColdTierCallout"},missing_cold_tier_callout_i18nTexts.body," ",Boolean(linkToCloudDeployment)&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:linkToCloudDeployment,external:true},missing_cold_tier_callout_i18nTexts.linkText));const cloud_data_tier_callout_i18nTexts={title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.cloudDataTierCallout.title",{defaultMessage:"Migrate to data tiers"}),body:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.cloudDataTierCallout.body",{defaultMessage:"Migrate your Elastic Cloud deployment to use data tiers."}),linkText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.cloudDataTierCallout.linkToCloudDeploymentDescription",{defaultMessage:"View cloud deployment"})};const CloudDataTierCallout=({linkToCloudDeployment:linkToCloudDeployment})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:cloud_data_tier_callout_i18nTexts.title,"data-test-subj":"cloudDataTierCallout"},cloud_data_tier_callout_i18nTexts.body," ",Boolean(linkToCloudDeployment)&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:linkToCloudDeployment,external:true},cloud_data_tier_callout_i18nTexts.linkText));const LoadingError=({statusCode:statusCode,message:message,onResendRequest:onResendRequest})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.nodeAttributesLoadingFailedTitle",defaultMessage:"Unable to load node data"}),color:"danger"},external_kbnSharedDeps_React_default.a.createElement("p",null,message," (",statusCode,")"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:onResendRequest,iconType:"refresh",color:"danger"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.nodeAttributesReloadButton",defaultMessage:"Try again"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xl"}));var _data_tier_allocation=__webpack_require__(57);const data_tier_allocation_field_i18nTexts={title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.common.dataTier.title",{defaultMessage:"Data allocation"})};const DataTierAllocationField=({phase:phase,description:description})=>{var _cloud$isCloudEnabled;const{services:{cloud:cloud}}=useKibana();const dataTierAllocationTypePath=`_meta.${phase}.dataTierAllocationType`;const[formData]=Object(hook_form_lib_["useFormData"])({watch:dataTierAllocationTypePath});const allocationType=Object(external_kbnSharedDeps_Lodash_["get"])(formData,dataTierAllocationTypePath);const{data:data,resendRequest:resendRequest,error:error,isLoading:isLoading}=Object(api["j"])();const{nodesByRoles:nodesByRoles,nodesByAttributes:nodesByAttributes,isUsingDeprecatedDataRoleConfig:isUsingDeprecatedDataRoleConfig}=data;const hasDataNodeRoles=Object.keys(nodesByRoles).some(nodeRole=>nodeRole.trim().startsWith("data_"));const hasNodeAttrs=Boolean(Object.keys(nodesByAttributes!==null&&nodesByAttributes!==void 0?nodesByAttributes:{}).length);const isCloudEnabled=(_cloud$isCloudEnabled=cloud===null||cloud===void 0?void 0:cloud.isCloudEnabled)!==null&&_cloud$isCloudEnabled!==void 0?_cloud$isCloudEnabled:false;const cloudDeploymentUrl=cloud===null||cloud===void 0?void 0:cloud.cloudDeploymentUrl;const renderNotice=()=>{switch(allocationType){case"node_roles":if(isCloudEnabled&&phase==="cold"&&!isUsingDeprecatedDataRoleConfig){var _nodesByRoles$data_co;const hasNoNodesWithNodeRole=!((_nodesByRoles$data_co=nodesByRoles.data_cold)!==null&&_nodesByRoles$data_co!==void 0&&_nodesByRoles$data_co.length);if(hasDataNodeRoles&&hasNoNodesWithNodeRole){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(MissingColdTierCallout,{linkToCloudDeployment:cloudDeploymentUrl}))}}const allocationNodeRole=getAvailableNodeRoleForPhase(phase,nodesByRoles);if(allocationNodeRole==="none"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(DefaultAllocationWarning,{phase:phase}))}if(!isNodeRoleFirstPreference(phase,allocationNodeRole)){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(DefaultAllocationNotice,{phase:phase,targetNodeRole:allocationNodeRole}))}break;case"node_attrs":if(!hasNodeAttrs){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(NoNodeAttributesWarning,{phase:phase}))}if(isCloudEnabled&&isUsingDeprecatedDataRoleConfig){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(CloudDataTierCallout,{linkToCloudDeployment:cloudDeploymentUrl}))}break;default:return null}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,data_tier_allocation_field_i18nTexts.title),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,description,isLoading?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"xl"})):error&&external_kbnSharedDeps_React_default.a.createElement(LoadingError,{onResendRequest:resendRequest,message:error.message,statusCode:error.statusCode})),fullWidth:true},external_kbnSharedDeps_React_default.a.createElement("div",{className:"ilmDataTierAllocationField"},external_kbnSharedDeps_React_default.a.createElement(DataTierAllocation,{hasNodeAttributes:hasNodeAttrs,phase:phase,nodes:nodesByAttributes,disableDataTierOption:Boolean(isCloudEnabled&&isUsingDeprecatedDataRoleConfig),isLoading:isLoading}),!isLoading&&renderNotice()))};var uuid=__webpack_require__(66);var uuid_default=__webpack_require__.n(uuid);const ForcemergeField=({phase:phase})=>{const{policy:policy}=useEditPolicyContext();const initialToggleValue=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{var _policy$phases$phase,_policy$phases$phase$;return((_policy$phases$phase=policy.phases[phase])===null||_policy$phases$phase===void 0?void 0:(_policy$phases$phase$=_policy$phases$phase.actions)===null||_policy$phases$phase$===void 0?void 0:_policy$phases$phase$.forcemerge)!=null},[policy,phase]);return external_kbnSharedDeps_React_default.a.createElement(DescribedFormRow,{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.forceMerge.enableText",defaultMessage:"Force merge"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.forceMerge.enableExplanationText",defaultMessage:"Reduce the number of segments in each index shard and clean up deleted documents."})," ",external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{docPath:"ilm-forcemerge.html"})),titleSize:"xs",fullWidth:true,switchProps:{label:i18nTexts.editPolicy.forceMergeEnabledFieldLabel,"data-test-subj":`${phase}-forceMergeSwitch`,initialValue:initialToggleValue}},external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{path:`phases.${phase}.actions.forcemerge.max_num_segments`,component:components_["NumericField"],componentProps:{fullWidth:false,euiFieldProps:{"data-test-subj":`${phase}-selectedForceMergeSegments`,min:1}}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{path:`_meta.${phase}.bestCompression`},field=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckbox"],{label:field.label,checked:field.value,onChange:field.onChange,"data-test-subj":`${phase}-bestCompression`,id:uuid_default()()})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:i18nTexts.editPolicy.bestCompressionFieldHelpText,position:"right"})))))};function getUnitsAriaLabelForPhase(phase){switch(phase){case"warm":return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.phaseWarm.minimumAgeUnitsAriaLabel",{defaultMessage:"Units for timing of warm phase"});case"cold":return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.phaseCold.minimumAgeUnitsAriaLabel",{defaultMessage:"Units for timing of cold phase"});case"delete":return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.phaseDelete.minimumAgeUnitsAriaLabel",{defaultMessage:"Units for timing of delete phase"})}}function getTimingLabelForPhase(phase){switch(phase){case"warm":return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.phaseWarm.minimumAgeLabel",{defaultMessage:"Timing for warm phase"});case"cold":return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.phaseCold.minimumAgeLabel",{defaultMessage:"Timing for cold phase"});case"delete":return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.phaseDelete.minimumAgeLabel",{defaultMessage:"Timing for delete phase"})}}const min_age_field_i18nTexts={daysOptionLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.daysOptionLabel",{defaultMessage:"days"}),hoursOptionLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.hoursOptionLabel",{defaultMessage:"hours"}),minutesOptionLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.minutesOptionLabel",{defaultMessage:"minutes"}),secondsOptionLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.secondsOptionLabel",{defaultMessage:"seconds"}),millisecondsOptionLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.milliSecondsOptionLabel",{defaultMessage:"milliseconds"}),microsecondsOptionLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.microSecondsOptionLabel",{defaultMessage:"microseconds"}),nanosecondsOptionLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.nanoSecondsOptionLabel",{defaultMessage:"nanoseconds"}),rolloverToolTipDescription:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.minimumAge.rolloverToolTipDescription",{defaultMessage:"Data age is calculated from rollover. Rollover is configured in the hot phase."}),minAgeUnitFieldSuffix:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.minimumAge.minimumAgeFieldSuffixLabel",{defaultMessage:"old"})};const MinAgeField=({phase:phase})=>{const{isUsingRollover:isUsingRollover}=useConfigurationIssues();return external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{path:`phases.${phase}.min_age`},field=>{const{isInvalid:isInvalid,errorMessage:errorMessage}=Object(hook_form_lib_["getFieldValidityAndErrorMessage"])(field);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,isInvalid:isInvalid,error:errorMessage},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",alignItems:"center",justifyContent:"spaceBetween",wrap:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{className:"eui-textNoWrap",size:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.minimumAge.minimumAgeFieldLabel",defaultMessage:"Move data into phase when:"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{style:{minWidth:50},compressed:true,"aria-label":getTimingLabelForPhase(phase),isInvalid:isInvalid,value:field.value,onChange:field.onChange,isLoading:field.isValidating,"data-test-subj":`${phase}-selectedMinimumAge`,min:0})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true,style:{minWidth:165}},external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{path:`_meta.${phase}.minAgeUnit`},unitField=>{const{isInvalid:isUnitFieldInvalid}=Object(hook_form_lib_["getFieldValidityAndErrorMessage"])(unitField);const icon=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":`${phase}-rolloverMinAgeInputIconTip`}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"iInCircle","aria-label":min_age_field_i18nTexts.rolloverToolTipDescription,content:min_age_field_i18nTexts.rolloverToolTipDescription}));const selectAppendValue=isUsingRollover?[min_age_field_i18nTexts.minAgeUnitFieldSuffix,icon]:[min_age_field_i18nTexts.minAgeUnitFieldSuffix];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{compressed:true,value:unitField.value,onChange:e=>{unitField.setValue(e.target.value)},isInvalid:isUnitFieldInvalid,append:selectAppendValue,"data-test-subj":`${phase}-selectedMinimumAgeUnits`,"aria-label":getUnitsAriaLabelForPhase(phase),options:[{value:"d",text:min_age_field_i18nTexts.daysOptionLabel},{value:"h",text:min_age_field_i18nTexts.hoursOptionLabel},{value:"m",text:min_age_field_i18nTexts.minutesOptionLabel},{value:"s",text:min_age_field_i18nTexts.secondsOptionLabel},{value:"ms",text:min_age_field_i18nTexts.millisecondsOptionLabel},{value:"micros",text:min_age_field_i18nTexts.microsecondsOptionLabel},{value:"nanos",text:min_age_field_i18nTexts.nanosecondsOptionLabel}]})}))))))})};const waitForSnapshotFormField="phases.delete.actions.wait_for_snapshot.policy";const SnapshotPoliciesField=()=>{const{getUrlForApp:getUrlForApp}=useEditPolicyContext();const{error:error,isLoading:isLoading,data:data,resendRequest:resendRequest}=Object(api["l"])();const[formData]=Object(hook_form_lib_["useFormData"])({watch:waitForSnapshotFormField});const selectedSnapshotPolicy=Object(external_kbnSharedDeps_Lodash_["get"])(formData,waitForSnapshotFormField);const policies=data.map(name=>({label:name,value:name}));const getUrlForSnapshotPolicyWizard=()=>getUrlForApp("management",{path:`data/snapshot_restore/add_policy`});let calloutContent;if(error){calloutContent=external_kbnSharedDeps_React_default.a.createElement(FieldLoadingError,{resendRequest:resendRequest,"data-test-subj":"policiesErrorCallout","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.reloadPoliciesLabel",{defaultMessage:"Reload policies"}),title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesLoadedTitle",defaultMessage:"Unable to load existing policies"}),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesLoadedMessage",defaultMessage:"Refresh this field and enter the name of an existing snapshot policy."})})}else if(data.length===0){calloutContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"noPoliciesCallout",color:"warning",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesCreatedTitle",defaultMessage:"No snapshot policies found"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesCreatedMessage",defaultMessage:"{link} to automate the creation and deletion of cluster snapshots.",values:{link:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:getUrlForSnapshotPolicyWizard(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesCreatedLink",{defaultMessage:"Create a snapshot lifecycle policy"}))}})))}else if(selectedSnapshotPolicy&&!data.includes(selectedSnapshotPolicy)){calloutContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"customPolicyCallout",color:"warning",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.customPolicyTitle",defaultMessage:"Policy name not found"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.customPolicyMessage",defaultMessage:"Enter the name of an existing snapshot policy, or {link} with this name.",values:{link:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:getUrlForSnapshotPolicyWizard(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.customPolicyLink",{defaultMessage:"create a new policy"}))}})))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.waitForSnapshotTitle",defaultMessage:"Wait for snapshot policy"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.waitForSnapshotDescription",defaultMessage:"Specify a snapshot policy to be executed before the deletion of the index. This ensures that a snapshot of the deleted index is available."})," ",external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{docPath:"ilm-wait-for-snapshot.html"})),titleSize:"xs",fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{path:waitForSnapshotFormField,componentProps:{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.waitForSnapshotLabel",defaultMessage:"Snapshot policy name"}),external_kbnSharedDeps_React_default.a.createElement(OptionalLabel,null))}},field=>{const singleSelectionArray=field.value?[field.value]:[];return external_kbnSharedDeps_React_default.a.createElement(components_["ComboBoxField"],{field:{...field,value:singleSelectionArray},euiFieldProps:{"data-test-subj":"snapshotPolicyCombobox",fullWidth:false,options:policies,singleSelection:{asPlainText:true},isLoading:isLoading,noSuggestions:!!(error||data.length===0),onCreateOption:newOption=>{field.setValue(newOption)},onChange:options=>{if(options.length>0){field.setValue(options[0].label)}else{field.setValue("")}}}})}),calloutContent))};const ShrinkField=({phase:phase})=>{var _policy$phases$phase,_policy$phases$phase$;const path=`phases.${phase}.actions.shrink.number_of_shards`;const{policy:policy}=useEditPolicyContext();return external_kbnSharedDeps_React_default.a.createElement(DescribedFormRow,{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.shrinkText",defaultMessage:"Shrink"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.shrinkIndexExplanationText",defaultMessage:"Shrink the index to a new index with fewer primary shards."})," ",external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{docPath:"ilm-shrink.html"})),titleSize:"xs",switchProps:{"data-test-subj":`${phase}-shrinkSwitch`,label:i18nTexts.editPolicy.shrinkLabel,initialValue:Boolean((_policy$phases$phase=policy.phases[phase])===null||_policy$phases$phase===void 0?void 0:(_policy$phases$phase$=_policy$phases$phase.actions)===null||_policy$phases$phase$===void 0?void 0:_policy$phases$phase$.shrink)},fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{path:path,component:components_["NumericField"],componentProps:{fullWidth:false,euiFieldProps:{"data-test-subj":`${phase}-primaryShardCount`,min:1}}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null))};const SearchableSnapshotDataProvider=({children:children})=>children(Object(api["m"])());var _searchable_snapshot_field=__webpack_require__(69);const{emptyField:searchable_snapshot_field_emptyField}=helpers_["fieldValidators"];const CLOUD_DEFAULT_REPO="found-snapshots";const SearchableSnapshotField=({phase:phase})=>{const{services:{cloud:cloud}}=useKibana();const{getUrlForApp:getUrlForApp,policy:policy,license:license,isNewPolicy:isNewPolicy}=useEditPolicyContext();const{isUsingSearchableSnapshotInHotPhase:isUsingSearchableSnapshotInHotPhase}=useConfigurationIssues();const searchableSnapshotPath=`phases.${phase}.actions.searchable_snapshot.snapshot_repository`;const[formData]=Object(hook_form_lib_["useFormData"])({watch:searchableSnapshotPath});const searchableSnapshotRepo=Object(external_kbnSharedDeps_Lodash_["get"])(formData,searchableSnapshotPath);const isColdPhase=phase==="cold";const isDisabledDueToLicense=!license.canUseSearchableSnapshot();const[isFieldToggleChecked,setIsFieldToggleChecked]=Object(external_kbnSharedDeps_React_["useState"])(()=>{var _policy$phases$phase,_policy$phases$phase$,_policy$phases$phase$2;return Boolean(isColdPhase&&isNewPolicy&&(cloud===null||cloud===void 0?void 0:cloud.isCloudEnabled)||((_policy$phases$phase=policy.phases[phase])===null||_policy$phases$phase===void 0?void 0:(_policy$phases$phase$=_policy$phases$phase.actions)===null||_policy$phases$phase$===void 0?void 0:(_policy$phases$phase$2=_policy$phases$phase$.searchable_snapshot)===null||_policy$phases$phase$2===void 0?void 0:_policy$phases$phase$2.snapshot_repository))});Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(isDisabledDueToLicense){setIsFieldToggleChecked(false)}},[isDisabledDueToLicense]);const renderField=()=>external_kbnSharedDeps_React_default.a.createElement(SearchableSnapshotDataProvider,null,({error:error,isLoading:isLoading,resendRequest:resendRequest,data:data})=>{var _data$repositories;const repos=(_data$repositories=data===null||data===void 0?void 0:data.repositories)!==null&&_data$repositories!==void 0?_data$repositories:[];let calloutContent;if(!isLoading){if(error){calloutContent=external_kbnSharedDeps_React_default.a.createElement(FieldLoadingError,{resendRequest:resendRequest,"data-test-subj":"repositoriesErrorCallout","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.reloadSnapshotRepositoriesLabel",{defaultMessage:"Reload snapshot repositories"}),title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.loadSnapshotRepositoriesErrorTitle",defaultMessage:"Unable to load snapshot repositories"}),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.loadSnapshotRepositoriesErrorBody",defaultMessage:"Refresh this field and enter the name of an existing snapshot repository."})})}else if(repos.length===0){calloutContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"warning",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.noSnapshotRepositoriesTitle",{defaultMessage:"No snapshot repositories found"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.noSnapshotRepositoriesFoundBody",defaultMessage:"{link} to use searchable snapshots.",values:{link:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:getUrlForApp("management",{path:`data/snapshot_restore/add_repository`}),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.createSearchableSnapshotLink",{defaultMessage:"Create a snapshot repository"}))}}))}else if(searchableSnapshotRepo&&!repos.includes(searchableSnapshotRepo)){calloutContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.noSnapshotRepositoriesWithNameTitle",{defaultMessage:"Repository name not found"}),color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.noSnapshotRepositoryWithNameBody",defaultMessage:"Enter the name of an existing repository, or {link} with this name.",values:{link:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:getUrlForApp("management",{path:`data/snapshot_restore/add_repository`}),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.createSnapshotRepositoryLink",{defaultMessage:"create a new snapshot repository"}))}}))}}return external_kbnSharedDeps_React_default.a.createElement("div",{className:"ilmSearchableSnapshotField"},external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{config:{label:i18nTexts.editPolicy.searchableSnapshotsFieldLabel,defaultValue:cloud!==null&&cloud!==void 0&&cloud.isCloudEnabled?CLOUD_DEFAULT_REPO:undefined,validations:[{validator:searchable_snapshot_field_emptyField(i18nTexts.editPolicy.errors.searchableSnapshotRepoRequired)}]},path:searchableSnapshotPath},field=>{const singleSelectionArray=field.value?[field.value]:[];return external_kbnSharedDeps_React_default.a.createElement(components_["ComboBoxField"],{field:{...field,value:singleSelectionArray},label:field.label,fullWidth:false,euiFieldProps:{"data-test-subj":"searchableSnapshotCombobox",options:repos.map(repo=>({label:repo,value:repo})),singleSelection:{asPlainText:true},isLoading:isLoading,noSuggestions:!!(error||repos.length===0),onCreateOption:newOption=>{field.setValue(newOption)},onChange:options=>{if(options.length>0){field.setValue(options[0].label)}else{field.setValue("")}}}})}),calloutContent&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),calloutContent))});const renderInfoCallout=()=>{let infoCallout;if(phase==="hot"&&isUsingSearchableSnapshotInHotPhase){infoCallout=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{size:"s",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotCalloutBody",{defaultMessage:"Force merge, shrink and freeze actions are not allowed when searchable snapshots are enabled in this phase."}),"data-test-subj":"searchableSnapshotFieldsDisabledCallout"})}else if(isDisabledDueToLicense){infoCallout=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"searchableSnapshotDisabledDueToLicense",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotLicenseCalloutTitle",{defaultMessage:"Enterprise license required"}),iconType:"questionInCircle"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotLicenseCalloutBody",{defaultMessage:"To create a searchable snapshot an enterprise license is required."}))}return infoCallout?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),infoCallout,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null)):undefined};return external_kbnSharedDeps_React_default.a.createElement(DescribedFormRow,{"data-test-subj":`searchableSnapshotField-${phase}`,switchProps:{checked:isFieldToggleChecked,disabled:isDisabledDueToLicense,onChange:setIsFieldToggleChecked,"data-test-subj":"searchableSnapshotToggle",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotsToggleLabel",{defaultMessage:"Create searchable snapshot"})},title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotFieldTitle",{defaultMessage:"Searchable snapshot"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotFieldDescription",defaultMessage:"Take a snapshot of the managed index in the selected repository and mount it as a searchable snapshot. {learnMoreLink}",values:{learnMoreLink:external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{docPath:"ilm-searchable-snapshot.html"})}}))),fieldNotices:renderInfoCallout(),fullWidth:true},isDisabledDueToLicense?external_kbnSharedDeps_React_default.a.createElement("div",null):renderField)};const ReadonlyField=({phase:phase})=>external_kbnSharedDeps_React_default.a.createElement(ToggleFieldWithDescribedFormRow,{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.readonlyTitle",defaultMessage:"Read only"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.readonlyDescription",defaultMessage:"Enable to make the index and index metadata read only, disable to allow writes and metadata changes."})," ",external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{docPath:"ilm-readonly.html"})),fullWidth:true,titleSize:"xs",switchProps:{"data-test-subj":`${phase}-readonlySwitch`,path:`_meta.${phase}.readonlyEnabled`}},external_kbnSharedDeps_React_default.a.createElement("div",null));const ReplicasField=({phase:phase})=>{var _policy$phases$phase,_policy$phases$phase$,_policy$phases$phase$2;const{policy:policy}=useEditPolicyContext();const initialValue=((_policy$phases$phase=policy.phases[phase])===null||_policy$phases$phase===void 0?void 0:(_policy$phases$phase$=_policy$phases$phase.actions)===null||_policy$phases$phase$===void 0?void 0:(_policy$phases$phase$2=_policy$phases$phase$.allocate)===null||_policy$phases$phase$2===void 0?void 0:_policy$phases$phase$2.number_of_replicas)!=null;return external_kbnSharedDeps_React_default.a.createElement(DescribedFormRow,{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.numberOfReplicas.formRowTitle",{defaultMessage:"Replicas"})),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.numberOfReplicas.formRowDescription",{defaultMessage:"Set the number of replicas. Remains the same as the previous phase by default."}),switchProps:{"data-test-subj":`${phase}-setReplicasSwitch`,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.numberOfReplicas.switchLabel",{defaultMessage:"Set replicas"}),initialValue:initialValue},fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{path:`phases.${phase}.actions.allocate.number_of_replicas`,component:components_["NumericField"],componentProps:{fullWidth:false,euiFieldProps:{"data-test-subj":`${phase}-selectedReplicaCount`,min:0}}}))};const IndexPriorityField=({phase:phase})=>{const{policy:policy,isNewPolicy:isNewPolicy}=useEditPolicyContext();const initialToggleValue=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{var _policy$phases$phase,_policy$phases$phase2,_policy$phases$phase3;return isNewPolicy||!((_policy$phases$phase=policy.phases[phase])!==null&&_policy$phases$phase!==void 0&&_policy$phases$phase.actions)||((_policy$phases$phase2=policy.phases[phase])===null||_policy$phases$phase2===void 0?void 0:(_policy$phases$phase3=_policy$phases$phase2.actions)===null||_policy$phases$phase3===void 0?void 0:_policy$phases$phase3.set_priority)!=null},[isNewPolicy,policy.phases,phase]);return external_kbnSharedDeps_React_default.a.createElement(DescribedFormRow,{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.indexPriorityText",defaultMessage:"Index priority"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.warmPhase.indexPriorityExplanationText",defaultMessage:"Set the priority for recovering your indices after a node restart. Indices with higher priorities are recovered before indices with lower priorities."})," ",external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{docPath:"ilm-set-priority.html"})),titleSize:"xs",fullWidth:true,switchProps:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.indexPriority.indexPriorityEnabledFieldLabel",{defaultMessage:"Set index priority"}),"data-test-subj":`${phase}-indexPrioritySwitch`,initialValue:initialToggleValue}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{path:`phases.${phase}.actions.set_priority.priority`,component:components_["NumericField"],euiFieldProps:{fullWidth:false,"data-test-subj":`${phase}-indexPriority`,min:0}}))};const phase_error_indicator_i18nTexts={toolTipContent:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.phaseErrorIcon.tooltipDescription",{defaultMessage:"This phase contains errors."})};const PhaseErrorIndicator=Object(external_kbnSharedDeps_React_["memo"])(({phase:phase})=>{const{errors:errors}=useFormErrorsContext();if(Object.keys(errors[phase]).length){return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":`phaseErrorIndicator-${phase}`},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"alert",color:"danger",content:phase_error_indicator_i18nTexts.toolTipContent}))}return null});var phase_icon=__webpack_require__(78);const PhaseIcon=({enabled:enabled,phase:phase})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:`ilmPhaseIcon ilmPhaseIcon--${phase} ${enabled?"":"ilmPhaseIcon--disabled"}`},enabled?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{className:`ilmPhaseIcon__inner--${phase}`,type:phase==="delete"?"trash":"checkInCircleFilled",size:phase==="delete"?"m":"l"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{className:"ilmPhaseIcon__inner--disabled",type:"dot",size:"s"}));var phase_phase=__webpack_require__(87);const Phase=({children:children,topLevelSettings:topLevelSettings,phase:phase})=>{const enabledPath=`_meta.${phase}.enabled`;const[formData]=Object(hook_form_lib_["useFormData"])({watch:[enabledPath]});const isHotPhase=phase==="hot";const enabled=Object(external_kbnSharedDeps_Lodash_["get"])(formData,enabledPath)||isHotPhase;const phaseTitle=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s",wrap:true},!isHotPhase&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{path:enabledPath,component:components_["ToggleField"],componentProps:{euiFieldProps:{"data-test-subj":`enablePhaseSwitch-${phase}`,showLabel:false}}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,i18nTexts.editPolicy.titles[phase]))),isHotPhase&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.phaseTitle.requiredBadge",defaultMessage:"Required"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(PhaseErrorIndicator,{phase:phase})));const minAge=!isHotPhase&&enabled?external_kbnSharedDeps_React_default.a.createElement(MinAgeField,{phase:phase}):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComment"],{username:phaseTitle,actions:minAge,timelineIcon:external_kbnSharedDeps_React_default.a.createElement(PhaseIcon,{enabled:enabled,phase:phase}),className:`ilmPhase ${enabled?"ilmPhase--enabled":""}`},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued",size:"s",style:{maxWidth:"50%"}},i18nTexts.editPolicy.descriptions[phase]),enabled&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,!!topLevelSettings?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),topLevelSettings):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:`${phase}-settingsSwitch`,buttonContent:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.phaseSettings.buttonLabel",defaultMessage:"Advanced settings"}),buttonClassName:"ilmSettingsButton",extraAction:external_kbnSharedDeps_React_default.a.createElement(PhaseFooter,{phase:phase})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),children)))};const maxSizeStoredUnits=[{value:"gb",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.gigabytesLabel",{defaultMessage:"gigabytes"})},{value:"mb",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.megabytesLabel",{defaultMessage:"megabytes"})},{value:"b",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.bytesLabel",{defaultMessage:"bytes"})},{value:"kb",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.kilobytesLabel",{defaultMessage:"kilobytes"})},{value:"tb",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.terabytesLabel",{defaultMessage:"terabytes"})},{value:"pb",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.petabytesLabel",{defaultMessage:"petabytes"})}];const maxAgeUnits=[{value:"d",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.daysLabel",{defaultMessage:"days"})},{value:"h",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.hoursLabel",{defaultMessage:"hours"})},{value:"m",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.minutesLabel",{defaultMessage:"minutes"})},{value:"s",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.secondsLabel",{defaultMessage:"seconds"})},{value:"ms",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.millisecondsLabel",{defaultMessage:"milliseconds"})},{value:"micros",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.microsecondsLabel",{defaultMessage:"microseconds"})},{value:"nanos",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.nanosecondsLabel",{defaultMessage:"nanoseconds"})}];const HotPhase=()=>{const{license:license}=useEditPolicyContext();const[formData]=Object(hook_form_lib_["useFormData"])({watch:isUsingDefaultRolloverPath});const{isUsingRollover:isUsingRollover}=useConfigurationIssues();const isUsingDefaultRollover=Object(external_kbnSharedDeps_Lodash_["get"])(formData,isUsingDefaultRolloverPath);const[showEmptyRolloverFieldsError,setShowEmptyRolloverFieldsError]=Object(external_kbnSharedDeps_React_["useState"])(false);return external_kbnSharedDeps_React_default.a.createElement(Phase,{phase:"hot"},external_kbnSharedDeps_React_default.a.createElement(DescribedFormRow,{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.rolloverFieldTitle",{defaultMessage:"Rollover"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.hotPhase.rolloverDescriptionMessage",defaultMessage:"Start writing to a new index when the current index reaches a certain size, document count, or age. Enables you to optimize performance and manage resource usage when working with time series data."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.rollover.rolloverOffsetsPhaseTimingDescriptionNote",{defaultMessage:"Note: "})),i18nTexts.editPolicy.rolloverOffsetsHotPhaseTiming," ",external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{text:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.hotPhase.learnAboutRolloverLinkText",defaultMessage:"Learn more"}),docPath:"ilm-rollover.html"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{path:isUsingDefaultRolloverPath},field=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"default"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:field.label,checked:field.value,onChange:e=>field.setValue(e.target.checked),"data-test-subj":"useDefaultRolloverSwitch"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.hotPhase.rolloverDefaultsTipContent",defaultMessage:"Rollover when an index is 30 days old or reaches 50 gigabytes."})))),fullWidth:true},isUsingDefaultRollover===false?external_kbnSharedDeps_React_default.a.createElement("div",{"aria-live":"polite",role:"region"},external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{path:"_meta.hot.customRollover.enabled"},field=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:field.label,checked:field.value,onChange:e=>field.setValue(e.target.checked),"data-test-subj":"rolloverSwitch"})),isUsingRollover&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),showEmptyRolloverFieldsError&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:i18nTexts.editPolicy.errors.rollOverConfigurationCallout.title,"data-test-subj":"rolloverSettingsRequired",color:"danger"},external_kbnSharedDeps_React_default.a.createElement("div",null,i18nTexts.editPolicy.errors.rollOverConfigurationCallout.body)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{maxWidth:188}},external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{path:ROLLOVER_FORM_PATHS.maxSize},field=>{const showErrorCallout=field.errors.some(e=>e.code===ROLLOVER_EMPTY_VALIDATION);if(showErrorCallout!==showEmptyRolloverFieldsError){setShowEmptyRolloverFieldsError(showErrorCallout)}return external_kbnSharedDeps_React_default.a.createElement(components_["NumericField"],{field:field,euiFieldProps:{"data-test-subj":`hot-selectedMaxSizeStored`,min:1}})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{maxWidth:188}},external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{key:"_meta.hot.customRollover.maxStorageSizeUnit",path:"_meta.hot.customRollover.maxStorageSizeUnit",component:components_["SelectField"],componentProps:{"data-test-subj":`hot-selectedMaxSizeStoredUnits`,hasEmptyLabelSpace:true,euiFieldProps:{options:maxSizeStoredUnits,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.maximumIndexSizeUnitsAriaLabel",{defaultMessage:"Maximum index size units"})}}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{maxWidth:188}},external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{path:ROLLOVER_FORM_PATHS.maxDocs,component:components_["NumericField"],componentProps:{euiFieldProps:{"data-test-subj":`hot-selectedMaxDocuments`,min:1}}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{maxWidth:188}},external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{path:ROLLOVER_FORM_PATHS.maxAge,component:components_["NumericField"],componentProps:{euiFieldProps:{"data-test-subj":`hot-selectedMaxAge`,min:1}}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{maxWidth:188}},external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{key:"_meta.hot.customRollover.maxAgeUnit",path:"_meta.hot.customRollover.maxAgeUnit",component:components_["SelectField"],componentProps:{"data-test-subj":`hot-selectedMaxAgeUnits`,hasEmptyLabelSpace:true,euiFieldProps:{"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.maximumAgeUnitsAriaLabel",{defaultMessage:"Maximum age units"}),options:maxAgeUnits}}}))))):external_kbnSharedDeps_React_default.a.createElement("div",null)),isUsingRollover&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(ForcemergeField,{phase:"hot"}),external_kbnSharedDeps_React_default.a.createElement(ShrinkField,{phase:"hot"}),license.canUseSearchableSnapshot()&&external_kbnSharedDeps_React_default.a.createElement(SearchableSnapshotField,{phase:"hot"}),external_kbnSharedDeps_React_default.a.createElement(ReadonlyField,{phase:"hot"})),external_kbnSharedDeps_React_default.a.createElement(IndexPriorityField,{phase:"hot"}))};const warm_phase_i18nTexts={dataTierAllocation:{description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.description",{defaultMessage:"Move data to nodes optimized for less-frequent, read-only access."})}};const WarmPhase=()=>{const{isUsingSearchableSnapshotInHotPhase:isUsingSearchableSnapshotInHotPhase}=useConfigurationIssues();return external_kbnSharedDeps_React_default.a.createElement(Phase,{phase:"warm"},external_kbnSharedDeps_React_default.a.createElement(ReplicasField,{phase:"warm"}),!isUsingSearchableSnapshotInHotPhase&&external_kbnSharedDeps_React_default.a.createElement(ShrinkField,{phase:"warm"}),!isUsingSearchableSnapshotInHotPhase&&external_kbnSharedDeps_React_default.a.createElement(ForcemergeField,{phase:"warm"}),external_kbnSharedDeps_React_default.a.createElement(ReadonlyField,{phase:"warm"}),external_kbnSharedDeps_React_default.a.createElement(DataTierAllocationField,{description:warm_phase_i18nTexts.dataTierAllocation.description,phase:"warm"}),external_kbnSharedDeps_React_default.a.createElement(IndexPriorityField,{phase:"warm"}))};const cold_phase_i18nTexts={dataTierAllocation:{description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.description",{defaultMessage:"Move data to nodes optimized for less frequent, read-only access. Store data in the cold phase on less-expensive hardware."})}};const ColdPhase=()=>{const{isUsingSearchableSnapshotInHotPhase:isUsingSearchableSnapshotInHotPhase}=useConfigurationIssues();return external_kbnSharedDeps_React_default.a.createElement(Phase,{phase:"cold",topLevelSettings:external_kbnSharedDeps_React_default.a.createElement(SearchableSnapshotField,{phase:"cold"})},external_kbnSharedDeps_React_default.a.createElement(ReplicasField,{phase:"cold"}),!isUsingSearchableSnapshotInHotPhase&&external_kbnSharedDeps_React_default.a.createElement(ToggleFieldWithDescribedFormRow,{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.coldPhase.freezeText",defaultMessage:"Freeze"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.coldPhase.freezeIndexExplanationText",defaultMessage:"Make the index read-only and minimize its memory footprint."})," ",external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{docPath:"ilm-freeze.html"})),fullWidth:true,titleSize:"xs",switchProps:{"data-test-subj":"freezeSwitch",path:"_meta.cold.freezeEnabled"}},external_kbnSharedDeps_React_default.a.createElement("div",null)),external_kbnSharedDeps_React_default.a.createElement(DataTierAllocationField,{description:cold_phase_i18nTexts.dataTierAllocation.description,phase:"cold"}),external_kbnSharedDeps_React_default.a.createElement(IndexPriorityField,{phase:"cold"}))};var delete_phase=__webpack_require__(96);const formFieldPaths={enabled:"_meta.delete.enabled"};const DeletePhase=()=>{const{setDeletePhaseEnabled:setDeletePhaseEnabled}=usePhaseTimings();const[formData]=Object(hook_form_lib_["useFormData"])({watch:formFieldPaths.enabled});const enabled=Object(external_kbnSharedDeps_Lodash_["get"])(formData,formFieldPaths.enabled);if(!enabled){return null}const phaseTitle=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s",wrap:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,i18nTexts.editPolicy.titles.delete))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:()=>setDeletePhaseEnabled(false),"data-test-subj":"disableDeletePhaseButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.removeDeletePhaseButtonLabel",defaultMessage:"Remove"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(PhaseErrorIndicator,{phase:"delete"})));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComment"],{"data-test-subj":"delete-phaseContent",username:phaseTitle,actions:external_kbnSharedDeps_React_default.a.createElement(MinAgeField,{phase:"delete"}),className:"ilmDeletePhase ilmPhase",timelineIcon:external_kbnSharedDeps_React_default.a.createElement(PhaseIcon,{enabled:enabled,phase:"delete"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued",size:"s",style:{maxWidth:"50%"}},i18nTexts.editPolicy.descriptions.delete),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(SnapshotPoliciesField,null))};const policyNamePath="name";const EditPolicy=({history:history})=>{Object(external_kbnSharedDeps_React_["useEffect"])(()=>{window.scrollTo(0,0)},[]);const[isShowingPolicyJsonFlyout,setIsShowingPolicyJsonFlyout]=Object(external_kbnSharedDeps_React_["useState"])(false);const{isNewPolicy:isNewPolicy,policy:currentPolicy,existingPolicies:existingPolicies,policyName:policyName}=useEditPolicyContext();const serializer=Object(external_kbnSharedDeps_React_["useMemo"])(()=>createSerializer(isNewPolicy?undefined:currentPolicy),[isNewPolicy,currentPolicy]);const[saveAsNew,setSaveAsNew]=Object(external_kbnSharedDeps_React_["useState"])(false);const originalPolicyName=isNewPolicy?"":policyName;const{form:form}=Object(hook_form_lib_["useForm"])({schema:schema,defaultValue:{...currentPolicy,name:originalPolicyName},deserializer:deserializer,serializer:serializer});const[formData]=Object(hook_form_lib_["useFormData"])({form:form,watch:policyNamePath});const currentPolicyName=Object(external_kbnSharedDeps_Lodash_["get"])(formData,policyNamePath);const policyNameValidations=Object(external_kbnSharedDeps_React_["useMemo"])(()=>createPolicyNameValidations({originalPolicyName:originalPolicyName,policies:existingPolicies,saveAsNewPolicy:saveAsNew}),[originalPolicyName,existingPolicies,saveAsNew]);const backToPolicyList=()=>{history.push("/policies")};const submit=async()=>{const{data:policy,isValid:isValid}=await form.submit();if(!isValid){notification["c"].addDanger(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.formErrorsMessage",{defaultMessage:"Please fix the errors on this page."}))}else{const success=await savePolicy({...policy,name:saveAsNew||isNewPolicy?currentPolicyName:originalPolicyName},isNewPolicy||saveAsNew);if(success){backToPolicyList()}}};const togglePolicyJsonFlyout=()=>{setIsShowingPolicyJsonFlyout(!isShowingPolicyJsonFlyout)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPage"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l","data-test-subj":"policyTitle"},external_kbnSharedDeps_React_default.a.createElement("h1",null,isNewPolicy?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.createPolicyMessage",{defaultMessage:"Create policy"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.editPolicyMessage",{defaultMessage:"Edit policy {originalPolicyName}",values:{originalPolicyName:originalPolicyName}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{href:Object(documentation["a"])("index-lifecycle-management.html"),target:"_blank",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.documentationLinkText",defaultMessage:"Documentation"})))),external_kbnSharedDeps_React_default.a.createElement(Form,{form:form},isNewPolicy?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.editingExistingPolicyMessage",defaultMessage:"You are editing an existing policy"})),"."," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.editingExistingPolicyExplanationMessage",defaultMessage:"Any changes you make will affect the indices that are attached to this policy. Alternatively, you can save these changes in a new policy."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{"data-test-subj":"saveAsNewSwitch",style:{maxWidth:"100%"},checked:saveAsNew,onChange:e=>{setSaveAsNew(e.target.checked)},label:external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.saveAsNewPolicyMessage",defaultMessage:"Save as new policy"}))}))),saveAsNew||isNewPolicy?external_kbnSharedDeps_React_default.a.createElement(EnhancedUseField,{path:policyNamePath,config:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.policyNameLabel",{defaultMessage:"Policy name"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.validPolicyNameMessage",{defaultMessage:"A policy name cannot start with an underscore and cannot contain a comma or a space."}),validations:policyNameValidations},component:components_["TextField"],componentProps:{fullWidth:false,euiFieldProps:{"data-test-subj":"policyNameField"}}}):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],null),external_kbnSharedDeps_React_default.a.createElement(timeline_container_Timeline,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(HotPhase,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(WarmPhase,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(ColdPhase,null),external_kbnSharedDeps_React_default.a.createElement(DeletePhase,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],null),external_kbnSharedDeps_React_default.a.createElement(FormErrorsCallout,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"savePolicyButton",fill:true,iconType:"check",iconSide:"left",disabled:form.isValid===false||form.isSubmitting,onClick:submit},saveAsNew?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.saveAsNewButton",defaultMessage:"Save as new policy"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.saveButton",defaultMessage:"Save policy"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"cancelTestPolicy",onClick:backToPolicyList},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.cancelButton",defaultMessage:"Cancel"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:togglePolicyJsonFlyout,"data-test-subj":"requestButton"},isShowingPolicyJsonFlyout?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.hidePolicyJsonButto",defaultMessage:"Hide request"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.showPolicyJsonButto",defaultMessage:"Show request"})))),isShowingPolicyJsonFlyout?external_kbnSharedDeps_React_default.a.createElement(PolicyJsonFlyout,{policyName:saveAsNew?currentPolicyName:policyName,close:()=>setIsShowingPolicyJsonFlyout(false)}):null))))};const edit_policy_container_EditPolicy=({match:{params:{policyName:policyName}},getUrlForApp:getUrlForApp,history:history})=>{var _existingPolicy$polic;const{services:{breadcrumbService:breadcrumbService,license:license}}=useKibana();const{error:error,isLoading:isLoading,data:policies,resendRequest:resendRequest}=Object(api["k"])(false);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{breadcrumbService.setBreadcrumbs("editPolicy")},[breadcrumbService]);if(isLoading){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"xl"}),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.policiesLoading",defaultMessage:"Loading policies..."})})}if(error||!policies){const{statusCode:statusCode,message:message}=error?error:{statusCode:"",message:""};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.lifecyclePoliciesLoadingFailedTitle",defaultMessage:"Unable to load existing lifecycle policies"})),body:external_kbnSharedDeps_React_default.a.createElement("p",null,message," (",statusCode,")"),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:resendRequest,iconType:"refresh",color:"danger"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.lifecyclePoliciesReloadButton",defaultMessage:"Try again"}))})}const existingPolicy=getPolicyByName(policies,Object(esUiShared_public_["attemptToURIDecode"])(policyName));return external_kbnSharedDeps_React_default.a.createElement(EditPolicyContextProvider,{value:{isNewPolicy:!(existingPolicy!==null&&existingPolicy!==void 0&&existingPolicy.policy),policyName:Object(esUiShared_public_["attemptToURIDecode"])(policyName),policy:(_existingPolicy$polic=existingPolicy===null||existingPolicy===void 0?void 0:existingPolicy.policy)!==null&&_existingPolicy$polic!==void 0?_existingPolicy$polic:application_constants["o"],existingPolicies:policies,getUrlForApp:getUrlForApp,license:{canUseSearchableSnapshot:()=>license.hasAtLeast(constants["a"])}}},external_kbnSharedDeps_React_default.a.createElement(EditPolicy,{history:history}))};const filterItems=(field,filter,items=[])=>{const lowerFilter=filter.toLowerCase();return items.filter(item=>{const normalizedValue=String(item[field]).toLowerCase();return normalizedValue.includes(lowerFilter)})};const sortTable=(array=[],sortField,isSortAscending)=>{let sorter;if(sortField==="linkedIndices"){sorter=item=>(item[sortField]||[]).length}else{sorter=item=>item[sortField]}const sorted=Object(external_kbnSharedDeps_Lodash_["sortBy"])(array,sorter);return isSortAscending?sorted:sorted.reverse()};var external_kbnSharedDeps_ElasticEuiLibServices_=__webpack_require__(31);var indexManagement_public_=__webpack_require__(32);var navigation=__webpack_require__(11);const AddPolicyToTemplateConfirmModal=({policy:policy,onCancel:onCancel})=>{const[isLegacy,setIsLegacy]=Object(external_kbnSharedDeps_React_["useState"])(false);const[templateName,setTemplateName]=Object(external_kbnSharedDeps_React_["useState"])("");const[aliasName,setAliasName]=Object(external_kbnSharedDeps_React_["useState"])("");const[templateError,setTemplateError]=Object(external_kbnSharedDeps_React_["useState"])("");const{error:error,isLoading:isLoading,data:templates,resendRequest:resendRequest}=Object(api["h"])(isLegacy);const renderTemplateHasPolicyWarning=()=>{var _selectedTemplate$set,_selectedTemplate$set2,_selectedTemplate$set3;const selectedTemplate=templates.find(template=>template.name===templateName);const existingPolicyName=selectedTemplate===null||selectedTemplate===void 0?void 0:(_selectedTemplate$set=selectedTemplate.settings)===null||_selectedTemplate$set===void 0?void 0:(_selectedTemplate$set2=_selectedTemplate$set.index)===null||_selectedTemplate$set2===void 0?void 0:(_selectedTemplate$set3=_selectedTemplate$set2.lifecycle)===null||_selectedTemplate$set3===void 0?void 0:_selectedTemplate$set3.name;if(!existingPolicyName){return}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{style:{maxWidth:400},title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.templateHasPolicyWarningTitle",defaultMessage:"Template already has policy"}),color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyToTemplateConfirmModal.indexHasNoAliasesWarningMessage",defaultMessage:"This index template already has the policy {existingPolicyName} attached to it. Adding this policy will overwrite that configuration.",values:{existingPolicyName:existingPolicyName}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))};const renderUnableToLoadTemplatesCallout=()=>{const{statusCode:statusCode="",message:message=""}=error;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{style:{maxWidth:400},title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.errorLoadingTemplatesTitle",defaultMessage:"Unable to load index templates"}),color:"danger"},external_kbnSharedDeps_React_default.a.createElement("p",null,message," (",statusCode,")"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{isLoading:isLoading,color:"danger",onClick:resendRequest},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyToTemplateConfirmModal.errorLoadingTemplatesButton",defaultMessage:"Try again"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))};const renderAliasFormElement=()=>{var _policy$policy$phases;const showAliasTextInput=(_policy$policy$phases=policy.policy.phases.hot)===null||_policy$policy$phases===void 0?void 0:_policy$policy$phases.actions.rollover;if(!showAliasTextInput){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.rolloverAliasLabel",defaultMessage:"Alias for rollover index"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{value:aliasName,onChange:e=>{setAliasName(e.target.value)}}))};const renderForm=()=>{let options=[];if(templates){options=templates.map(({name:name})=>({label:name}))}const onComboChange=comboOptions=>{setTemplateError("");setTemplateName(comboOptions.length>0?comboOptions[0].label:"")};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.showLegacyTemplates",defaultMessage:"Show legacy index templates"}),checked:isLegacy,onChange:e=>{setTemplateName("");setIsLegacy(e.target.checked)}})),error?renderUnableToLoadTemplatesCallout():external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,renderTemplateHasPolicyWarning(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{isInvalid:!!templateError,error:templateError,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.chooseTemplateLabel",defaultMessage:"Index template"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{isLoading:isLoading,placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.chooseTemplateMessage",{defaultMessage:"Select an index template"}),options:options,selectedOptions:templateName?[{label:templateName}]:[],onChange:onComboChange,singleSelection:{asPlainText:true},isClearable:true}))),renderAliasFormElement())};const addPolicyToTemplate=async()=>{const policyName=policy.name;if(!templateName){setTemplateError(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.noTemplateSelectedErrorMessage",{defaultMessage:"You must select an index template."}));return}try{await Object(api["b"])({policyName:policyName,templateName:templateName,aliasName:aliasName===""?undefined:aliasName},isLegacy);const message=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.successMessage",{defaultMessage:"Added policy {policyName} to index template {templateName}",values:{policyName:policyName,templateName:templateName}});notification["c"].addSuccess(message);onCancel()}catch(e){const title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.errorMessage",{defaultMessage:'Error adding policy "{policyName}" to index template {templateName}',values:{policyName:policyName,templateName:templateName}});Object(api_errors["a"])(e,title)}};const title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.title",{defaultMessage:'Add policy "{name}" to index template',values:{name:policy.name}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:title,onCancel:onCancel,onConfirm:addPolicyToTemplate,cancelButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.cancelButton",{defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.confirmButton",{defaultMessage:"Add policy"}),confirmButtonDisabled:isLoading||!!error||!templates},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.explanationText",defaultMessage:"This will apply the lifecycle policy to all indices which match the index template."})," ",external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{docPath:"index-templates.html",text:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.learnAboutIndexTemplatesLink",defaultMessage:"Learn about index templates"})}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),renderForm())};function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class confirm_delete_ConfirmDelete extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);_defineProperty(this,"deletePolicy",async()=>{const{policyToDelete:policyToDelete,callback:callback}=this.props;const policyName=policyToDelete.name;try{await Object(api["c"])(policyName);const message=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.confirmDelete.successMessage",{defaultMessage:"Deleted policy {policyName}",values:{policyName:policyName}});notification["c"].addSuccess(message)}catch(e){const title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.confirmDelete.errorMessage",{defaultMessage:"Error deleting policy {policyName}",values:{policyName:policyName}});Object(api_errors["a"])(e,title)}if(callback){callback()}})}render(){const{policyToDelete:policyToDelete,onCancel:onCancel}=this.props;const title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.confirmDelete.title",{defaultMessage:'Delete policy "{name}"',values:{name:policyToDelete.name}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:title,onCancel:onCancel,onConfirm:this.deletePolicy,cancelButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.confirmDelete.cancelButton",defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.confirmDelete.deleteButton",defaultMessage:"Delete"}),buttonColor:"danger"},external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.confirmDelete.undoneWarning",defaultMessage:"You can't recover a deleted policy."})))}}function table_content_extends(){table_content_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return table_content_extends.apply(this,arguments)}const COLUMNS=[["name",{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.headers.nameHeader",{defaultMessage:"Name"}),width:200}],["linkedIndices",{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.headers.linkedIndicesHeader",{defaultMessage:"Linked indices"}),width:120}],["version",{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.headers.versionHeader",{defaultMessage:"Version"}),width:120}],["modified_date",{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.headers.modifiedDateHeader",{defaultMessage:"Modified date"}),width:200}]];const TableContent=({policies:policies,totalNumber:totalNumber,navigateToApp:navigateToApp,setConfirmModal:setConfirmModal,handleDelete:handleDelete,history:history})=>{const[popoverPolicy,setPopoverPolicy]=Object(external_kbnSharedDeps_React_["useState"])();const[sort,setSort]=Object(external_kbnSharedDeps_React_["useState"])({sortField:"name",isSortAscending:true});const[pageSize,setPageSize]=Object(external_kbnSharedDeps_React_["useState"])(10);const[currentPage,setCurrentPage]=Object(external_kbnSharedDeps_React_["useState"])(0);let sortedPolicies=sortTable(policies,sort.sortField,sort.isSortAscending);const pager=new external_kbnSharedDeps_ElasticEui_["Pager"](totalNumber,pageSize,currentPage);const{firstItemIndex:firstItemIndex,lastItemIndex:lastItemIndex}=pager;sortedPolicies=sortedPolicies.slice(firstItemIndex,lastItemIndex+1);const isPolicyPopoverOpen=policyName=>popoverPolicy===policyName;const closePolicyPopover=()=>{setPopoverPolicy("")};const openPolicyPopover=policyName=>{setPopoverPolicy(policyName)};const togglePolicyPopover=policyName=>{if(isPolicyPopoverOpen(policyName)){closePolicyPopover()}else{openPolicyPopover(policyName)}};const onSort=column=>{const newIsSortAscending=sort.sortField===column?!sort.isSortAscending:true;setSort({sortField:column,isSortAscending:newIsSortAscending})};const headers=[];COLUMNS.forEach(([fieldName,{label:label,width:width}])=>{const isSorted=sort.sortField===fieldName;headers.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableHeaderCell"],{key:fieldName,onSort:()=>onSort(fieldName),isSorted:isSorted,isSortAscending:sort.isSortAscending,"data-test-subj":`policyTableHeaderCell-${fieldName}`,className:"policyTable__header--"+fieldName,width:width},label))});headers.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableHeaderCell"],{key:"deleteHeader","data-test-subj":"policyTableHeaderCell-delete",width:150}));const buildActionPanelTree=policy=>{const hasLinkedIndices=Boolean(policy.linkedIndices&&policy.linkedIndices.length);const viewIndicesLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.viewIndicesButtonText",{defaultMessage:"View indices linked to policy"});const addPolicyToTemplateLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.addPolicyToTemplateButtonText",{defaultMessage:"Add policy to index template"});const deletePolicyLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.deletePolicyButtonText",{defaultMessage:"Delete policy"});const deletePolicyTooltip=hasLinkedIndices?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.deletePolicyButtonDisabledTooltip",{defaultMessage:"You cannot delete a policy that is being used by an index"}):null;const items=[];if(hasLinkedIndices){items.push({name:viewIndicesLabel,icon:"list",onClick:()=>{navigateToApp("management",{path:`/data/index_management${Object(indexManagement_public_["getIndexListUri"])(`ilm.policy:"${policy.name}"`,true)}`})}})}items.push({name:addPolicyToTemplateLabel,icon:"plusInCircle",onClick:()=>{setConfirmModal(renderAddPolicyToTemplateConfirmModal(policy))}});items.push({name:deletePolicyLabel,disabled:hasLinkedIndices,icon:"trash",toolTipContent:deletePolicyTooltip,onClick:()=>{setConfirmModal(renderDeleteConfirmModal(policy))}});const panelTree={id:0,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.policyActionsMenu.panelTitle",{defaultMessage:"Policy options"}),items:items};return[panelTree]};const renderRowCell=(fieldName,value)=>{if(fieldName==="name"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],table_content_extends({"data-test-subj":"policyTablePolicyNameLink"},Object(public_["reactRouterNavigate"])(history,Object(navigation["d"])(value),()=>Object(services_ui_metric["c"])(web["a"].CLICK,application_constants["f"]))),value)}else if(fieldName==="linkedIndices"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("b",null,value?value.length:"0"))}else if(fieldName==="modified_date"&&value){return external_kbnSharedDeps_Moment_default()(value).format("YYYY-MM-DD HH:mm:ss")}return value};const renderRowCells=policy=>{const{name:name}=policy;const cells=[];COLUMNS.forEach(([fieldName,{width:width}])=>{const value=policy[fieldName];if(fieldName==="name"){cells.push(external_kbnSharedDeps_React_default.a.createElement("th",{key:`${fieldName}-${name}`,className:"euiTableRowCell",scope:"row","data-test-subj":`policyTableCell-${fieldName}`},external_kbnSharedDeps_React_default.a.createElement("div",{className:`euiTableCellContent policyTable__content--${fieldName}`},renderRowCell(fieldName,value))))}else{cells.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableRowCell"],{key:`${fieldName}-${name}`,truncateText:false,"data-test-subj":`policyTableCell-${fieldName}`,className:"policyTable__content--"+fieldName,width:width},renderRowCell(fieldName,value)))}});const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"policyActionsContextMenuButton",onClick:()=>togglePolicyPopover(policy.name),color:"primary"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.actionsButtonText",{defaultMessage:"Actions"}));cells.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableRowCell"],{align:external_kbnSharedDeps_ElasticEuiLibServices_["RIGHT_ALIGNMENT"],key:`delete-${name}`,truncateText:false,"data-test-subj":`policyTableCell-actions-${name}`,style:{width:150}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:`contextMenuPolicy-${name}`,button:button,isOpen:isPolicyPopoverOpen(policy.name),closePopover:closePolicyPopover,panelPaddingSize:"none",anchorPosition:"rightUp",repositionOnScroll:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:0,panels:buildActionPanelTree(policy)}))));return cells};const rows=sortedPolicies.map(policy=>{const{name:name}=policy;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableRow"],{"data-test-subj":"policyTableRow",key:`${name}-row`},renderRowCells(policy))});const renderAddPolicyToTemplateConfirmModal=policy=>external_kbnSharedDeps_React_default.a.createElement(AddPolicyToTemplateConfirmModal,{policy:policy,onCancel:()=>setConfirmModal(null)});const renderDeleteConfirmModal=policy=>external_kbnSharedDeps_React_default.a.createElement(confirm_delete_ConfirmDelete,{policyToDelete:policy,callback:handleDelete,onCancel:()=>{setConfirmModal(null)}});const renderPager=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTablePagination"],{activePage:pager.getCurrentPageIndex(),itemsPerPage:pager.itemsPerPage,itemsPerPageOptions:[10,50,100],pageCount:pager.getTotalPages(),onChangeItemsPerPage:setPageSize,onChangePage:setCurrentPage});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTable"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiScreenReaderOnly"],null,external_kbnSharedDeps_React_default.a.createElement("caption",{role:"status","aria-relevant":"text","aria-live":"polite"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.captionText",defaultMessage:"Below is the index lifecycle policy table containing {count, plural, one {# row} other {# rows}} out of {total}.",values:{count:sortedPolicies.length,total:totalNumber}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableHeader"],null,headers),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableBody"],null,rows)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),policies.length>10?renderPager():null)};function policy_table_extends(){policy_table_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return policy_table_extends.apply(this,arguments)}const PolicyTable=({policies:policies,history:history,navigateToApp:navigateToApp,updatePolicies:updatePolicies})=>{const[confirmModal,setConfirmModal]=Object(external_kbnSharedDeps_React_["useState"])();const[filter,setFilter]=Object(external_kbnSharedDeps_React_["useState"])("");const createPolicyButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],policy_table_extends({},Object(public_["reactRouterNavigate"])(history,Object(navigation["c"])()),{fill:true,iconType:"plusInCircle","data-test-subj":"createPolicyButton"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.emptyPrompt.createButtonLabel",defaultMessage:"Create policy"}));let content;if(policies.length>0){const filteredPolicies=filterItems("name",filter,policies);let tableContent;if(filteredPolicies.length>0){tableContent=external_kbnSharedDeps_React_default.a.createElement(TableContent,{policies:filteredPolicies,totalNumber:policies.length,navigateToApp:navigateToApp,setConfirmModal:setConfirmModal,handleDelete:()=>{updatePolicies();setConfirmModal(null)},history:history})}else{tableContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.noMatch.noPolicicesDescription",defaultMessage:"No policies to show"})}content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"l",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldSearch"],{fullWidth:true,value:filter,onChange:event=>{setFilter(event.target.value)},"data-test-subj":"policyTableFilterInput",placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.systempoliciesSearchInputPlaceholder",{defaultMessage:"Search"}),"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.systempoliciesSearchInputAriaLabel",{defaultMessage:"Search policies"})}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),tableContent)}else{return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{verticalPosition:"center",horizontalPosition:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"managementApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.emptyPromptTitle",defaultMessage:"Create your first index lifecycle policy"})),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.emptyPromptDescription",defaultMessage:" An index lifecycle policy helps you manage your indices as they age."}))),actions:createPolicyButton})))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{verticalPosition:"center",horizontalPosition:"center"},confirmModal,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"sectionHeading"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.sectionHeading",defaultMessage:"Index Lifecycle Policies"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},createPolicyButton)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.sectionDescription",defaultMessage:"Manage your indices as they age.  Attach a policy to automate when and how to transition an index through its lifecycle."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),content))};const policy_table_container_PolicyTable=({navigateToApp:navigateToApp,history:history})=>{const{services:{breadcrumbService:breadcrumbService}}=useKibana();const{data:policies,isLoading:isLoading,error:error,resendRequest:resendRequest}=Object(api["k"])(true);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{breadcrumbService.setBreadcrumbs("policies")},[breadcrumbService]);if(isLoading){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"xl"}),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.policiesLoading",defaultMessage:"Loading policies..."})})}if(error){const{statusCode:statusCode,message:message}=error?error:{statusCode:"",message:""};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.policiesLoadingFailedTitle",defaultMessage:"Unable to load existing lifecycle policies"})),body:external_kbnSharedDeps_React_default.a.createElement("p",null,message," (",statusCode,")"),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:resendRequest,iconType:"refresh",color:"danger"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.policiesReloadButton",defaultMessage:"Try again"}))})}return external_kbnSharedDeps_React_default.a.createElement(PolicyTable,{policies:policies||[],history:history,navigateToApp:navigateToApp,updatePolicies:resendRequest})};function app_extends(){app_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return app_extends.apply(this,arguments)}const AppWithRouter=({history:history,navigateToApp:navigateToApp,getUrlForApp:getUrlForApp})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Router"],{history:history},external_kbnSharedDeps_React_default.a.createElement(App,{navigateToApp:navigateToApp,getUrlForApp:getUrlForApp}));const App=({navigateToApp:navigateToApp,getUrlForApp:getUrlForApp})=>{Object(external_kbnSharedDeps_React_["useEffect"])(()=>Object(services_ui_metric["c"])(web["a"].LOADED,ui_metric["a"]),[]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Switch"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Redirect"],{exact:true,from:"/",to:navigation["a"].list}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:navigation["a"].list,render:props=>external_kbnSharedDeps_React_default.a.createElement(policy_table_container_PolicyTable,app_extends({},props,{navigateToApp:navigateToApp}))}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:navigation["a"].edit,render:props=>external_kbnSharedDeps_React_default.a.createElement(edit_policy_container_EditPolicy,app_extends({},props,{getUrlForApp:getUrlForApp}))}))};const renderApp=(element,I18nContext,history,navigateToApp,getUrlForApp,breadcrumbService,license,cloud)=>{Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(public_["KibanaContextProvider"],{services:{cloud:cloud,breadcrumbService:breadcrumbService,license:license}},external_kbnSharedDeps_React_default.a.createElement(AppWithRouter,{history:history,navigateToApp:navigateToApp,getUrlForApp:getUrlForApp}))),element);return()=>Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(element)}}])]);