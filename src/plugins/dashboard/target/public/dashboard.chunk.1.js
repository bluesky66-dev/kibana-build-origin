(window["dashboard_bundle_jsonpfunction"]=window["dashboard_bundle_jsonpfunction"]||[]).push([[1],Array(127).concat([function(module,exports){},function(module,exports,__webpack_require__){var getNative=__webpack_require__(131);var nativeCreate=getNative(Object,"create");module.exports=nativeCreate},function(module,exports,__webpack_require__){var eq=__webpack_require__(136);function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}module.exports=assocIndexOf},function(module,exports,__webpack_require__){var isKeyable=__webpack_require__(181);function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}module.exports=getMapData},function(module,exports,__webpack_require__){var baseIsNative=__webpack_require__(155),getValue=__webpack_require__(159);function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}module.exports=getNative},function(module,exports){var isArray=Array.isArray;module.exports=isArray},function(module,exports){},function(module,exports,__webpack_require__){var assignValue=__webpack_require__(152),castPath=__webpack_require__(160),isFunction=__webpack_require__(135),isIndex=__webpack_require__(188),isObject=__webpack_require__(36),toKey=__webpack_require__(189);function baseSet(object,path,value,customizer){if(!isObject(object)){return object}path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(key=="prototype"&&isFunction(nested)){throw new Error("Illegal access of function prototype")}if(index!=lastIndex){var objValue=hasOwnProperty.call(nested,key)?nested[key]:undefined;newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{}}}assignValue(nested,key,newValue);nested=nested[key]}return object}module.exports=baseSet},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(71),isObject=__webpack_require__(36);var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}module.exports=isFunction},function(module,exports){function eq(value,other){return value===other||value!==value&&other!==other}module.exports=eq},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(138);case"v7light":return __webpack_require__(140);case"v8dark":return __webpack_require__(142);case"v8light":return __webpack_require__(144)}},function(module,exports,__webpack_require__){var api=__webpack_require__(44);var content=__webpack_require__(139);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(45);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".react-grid-layout .gs-w {\n  z-index: auto; }\n\n/**\n * 1. Due to https://github.com/STRML/react-grid-layout/issues/240 we have to manually hide the resizable\n * element.\n */\n.dshLayout--viewing .react-resizable-handle {\n  display: none;\n  /* 1 */ }\n\n/**\n * 1. If we don't give the resizable handler a larger z index value the layout will hide it.\n */\n.dshLayout--editing .react-resizable-handle {\n  width: 24px;\n  height: 24px;\n  z-index: 1000;\n  /* 1 */\n  right: 0;\n  bottom: 0;\n  padding-right: 8px;\n  padding-bottom: 8px; }\n\n/**\n * 1. Need to override the react grid layout height when a single panel is expanded. Important is required because\n * otherwise the height is set inline.\n */\n.dshLayout-isMaximizedPanel {\n  height: 100% !important;\n  /* 1. */\n  width: 100%;\n  position: absolute !important;\n  /* 1 */ }\n\n/**\n * .dshLayout-withoutMargins only affects the panel styles themselves, see ../panel\n */\n/**\n * When a single panel is expanded, all the other panels are hidden in the grid.\n */\n.dshDashboardGrid__item--hidden {\n  display: none; }\n\n/**\n * 1. We need to mark this as important because react grid layout sets the width and height of the panels inline.\n */\n.dshDashboardGrid__item--expanded {\n  height: 100% !important;\n  /* 1 */\n  width: 100% !important;\n  /* 1 */\n  top: 0 !important;\n  /* 1 */\n  left: 0 !important;\n  /* 1 */ }\n\n.react-grid-item {\n  /**\n   * Disable transitions from the library on each grid element.\n   */\n  transition: none;\n  /**\n    * Copy over and overwrite the fill color with EUI color mixin (for theming)\n    */\n  /**\n   * Dragged/Resized panels in dashboard should always appear above other panels\n   * and above the placeholder\n   */\n  /**\n   * Overwrites red coloring that comes from this library by default.\n   */ }\n  .react-grid-item > .react-resizable-handle {\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='6' height='6' viewBox='0 0 6 6'%3E%3Cpolygon fill='rgb%28152, 162, 179%29' points='6 6 0 6 0 4.2 4 4.2 4.2 4.2 4.2 0 6 0' /%3E%3C/svg%3E%0A\"); }\n    .react-grid-item > .react-resizable-handle::after {\n      border: none !important;\n      /** overrides library default visual indicator **/ }\n    .react-grid-item > .react-resizable-handle:hover, .react-grid-item > .react-resizable-handle:focus {\n      background-color: rgba(255, 206, 122, 0.3); }\n  .react-grid-item.resizing, .react-grid-item.react-draggable-dragging {\n    z-index: 2000 !important; }\n  .react-grid-item.react-draggable-dragging {\n    transition: box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    box-shadow: 0 40px 64px 0 rgba(0, 0, 0, 0.1), 0 24px 32px 0 rgba(0, 0, 0, 0.1), 0 16px 16px 0 rgba(0, 0, 0, 0.1), 0 8px 8px 0 rgba(0, 0, 0, 0.1), 0 4px 4px 0 rgba(0, 0, 0, 0.1), 0 2px 2px 0 rgba(0, 0, 0, 0.1);\n    border-radius: 4px; }\n  .react-grid-item.react-grid-placeholder {\n    border-radius: 4px;\n    background: #FFCE7A; }\n\n@media only screen and (max-width: 574px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n/**\n  * EDITING MODE\n  * Use .dshLayout--editing to target editing state because\n  * .embPanel--editing doesn't get updating without a hard refresh\n  */\n.dshLayout-withoutMargins .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  box-shadow: none;\n  border-radius: 0; }\n\n.dshLayout-withoutMargins:not(.dshLayout--editing) .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  border-color: transparent; }\n\n.dshDashboardViewport {\n  width: 100%; }\n\n.dshDashboardViewport-withMargins {\n  width: 100%; }\n\n.dshAppContainer {\n  display: flex;\n  flex-direction: column;\n  flex: 1; }\n\n.dashboardViewport {\n  flex: 1;\n  display: flex;\n  flex-direction: column; }\n\n.dshStartScreen {\n  text-align: center; }\n\n.dshStartScreen__pageContent {\n  padding: 40px; }\n\n.dshStartScreen__panelDesc {\n  max-width: 260px;\n  margin: 0 auto; }\n\n.dshEmptyWidget {\n  background-color: #25262E;\n  border: 1px solid #343741;\n  border-style: dashed;\n  border-radius: 4px;\n  padding: 80px;\n  max-width: 400px;\n  margin-left: 8px;\n  text-align: center; }\n\n.dshUnsavedListingItem {\n  margin-top: 12px; }\n\n.dshUnsavedListingItem__icon {\n  margin-right: 12px; }\n\n.dshUnsavedListingItem__title {\n  margin-bottom: 0 !important; }\n\n.dshUnsavedListingItem__loading {\n  color: #81858f !important; }\n\n.dshUnsavedListingItem__actions {\n  margin-left: 28px; }\n\n@media only screen and (max-width: 574px) {\n  .dshUnsavedListingItem {\n    margin-top: 16px; }\n  .dshUnsavedListingItem__heading {\n    margin-bottom: 4px; }\n  .dshUnsavedListingItem__actions {\n    flex-direction: column; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .dshUnsavedListingItem {\n    margin-top: 16px; }\n  .dshUnsavedListingItem__heading {\n    margin-bottom: 4px; }\n  .dshUnsavedListingItem__actions {\n    flex-direction: column; } }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(44);var content=__webpack_require__(141);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(45);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".react-grid-layout .gs-w {\n  z-index: auto; }\n\n/**\n * 1. Due to https://github.com/STRML/react-grid-layout/issues/240 we have to manually hide the resizable\n * element.\n */\n.dshLayout--viewing .react-resizable-handle {\n  display: none;\n  /* 1 */ }\n\n/**\n * 1. If we don't give the resizable handler a larger z index value the layout will hide it.\n */\n.dshLayout--editing .react-resizable-handle {\n  width: 24px;\n  height: 24px;\n  z-index: 1000;\n  /* 1 */\n  right: 0;\n  bottom: 0;\n  padding-right: 8px;\n  padding-bottom: 8px; }\n\n/**\n * 1. Need to override the react grid layout height when a single panel is expanded. Important is required because\n * otherwise the height is set inline.\n */\n.dshLayout-isMaximizedPanel {\n  height: 100% !important;\n  /* 1. */\n  width: 100%;\n  position: absolute !important;\n  /* 1 */ }\n\n/**\n * .dshLayout-withoutMargins only affects the panel styles themselves, see ../panel\n */\n/**\n * When a single panel is expanded, all the other panels are hidden in the grid.\n */\n.dshDashboardGrid__item--hidden {\n  display: none; }\n\n/**\n * 1. We need to mark this as important because react grid layout sets the width and height of the panels inline.\n */\n.dshDashboardGrid__item--expanded {\n  height: 100% !important;\n  /* 1 */\n  width: 100% !important;\n  /* 1 */\n  top: 0 !important;\n  /* 1 */\n  left: 0 !important;\n  /* 1 */ }\n\n.react-grid-item {\n  /**\n   * Disable transitions from the library on each grid element.\n   */\n  transition: none;\n  /**\n    * Copy over and overwrite the fill color with EUI color mixin (for theming)\n    */\n  /**\n   * Dragged/Resized panels in dashboard should always appear above other panels\n   * and above the placeholder\n   */\n  /**\n   * Overwrites red coloring that comes from this library by default.\n   */ }\n  .react-grid-item > .react-resizable-handle {\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='6' height='6' viewBox='0 0 6 6'%3E%3Cpolygon fill='rgb%28105, 112, 125%29' points='6 6 0 6 0 4.2 4 4.2 4.2 4.2 4.2 0 6 0' /%3E%3C/svg%3E%0A\"); }\n    .react-grid-item > .react-resizable-handle::after {\n      border: none !important;\n      /** overrides library default visual indicator **/ }\n    .react-grid-item > .react-resizable-handle:hover, .react-grid-item > .react-resizable-handle:focus {\n      background-color: rgba(245, 167, 0, 0.1); }\n  .react-grid-item.resizing, .react-grid-item.react-draggable-dragging {\n    z-index: 2000 !important; }\n  .react-grid-item.react-draggable-dragging {\n    transition: box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    box-shadow: 0 40px 64px 0 rgba(65, 78, 101, 0.1), 0 24px 32px 0 rgba(65, 78, 101, 0.1), 0 16px 16px 0 rgba(65, 78, 101, 0.1), 0 8px 8px 0 rgba(65, 78, 101, 0.1), 0 4px 4px 0 rgba(65, 78, 101, 0.1), 0 2px 2px 0 rgba(65, 78, 101, 0.1);\n    border-radius: 4px; }\n  .react-grid-item.react-grid-placeholder {\n    border-radius: 4px;\n    background: #F5A700; }\n\n@media only screen and (max-width: 574px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n/**\n  * EDITING MODE\n  * Use .dshLayout--editing to target editing state because\n  * .embPanel--editing doesn't get updating without a hard refresh\n  */\n.dshLayout-withoutMargins .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  box-shadow: none;\n  border-radius: 0; }\n\n.dshLayout-withoutMargins:not(.dshLayout--editing) .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  border-color: transparent; }\n\n.dshDashboardViewport {\n  width: 100%; }\n\n.dshDashboardViewport-withMargins {\n  width: 100%; }\n\n.dshAppContainer {\n  display: flex;\n  flex-direction: column;\n  flex: 1; }\n\n.dashboardViewport {\n  flex: 1;\n  display: flex;\n  flex-direction: column; }\n\n.dshStartScreen {\n  text-align: center; }\n\n.dshStartScreen__pageContent {\n  padding: 40px; }\n\n.dshStartScreen__panelDesc {\n  max-width: 260px;\n  margin: 0 auto; }\n\n.dshEmptyWidget {\n  background-color: #F5F7FA;\n  border: 1px solid #D3DAE6;\n  border-style: dashed;\n  border-radius: 4px;\n  padding: 80px;\n  max-width: 400px;\n  margin-left: 8px;\n  text-align: center; }\n\n.dshUnsavedListingItem {\n  margin-top: 12px; }\n\n.dshUnsavedListingItem__icon {\n  margin-right: 12px; }\n\n.dshUnsavedListingItem__title {\n  margin-bottom: 0 !important; }\n\n.dshUnsavedListingItem__loading {\n  color: #6a717d !important; }\n\n.dshUnsavedListingItem__actions {\n  margin-left: 28px; }\n\n@media only screen and (max-width: 574px) {\n  .dshUnsavedListingItem {\n    margin-top: 16px; }\n  .dshUnsavedListingItem__heading {\n    margin-bottom: 4px; }\n  .dshUnsavedListingItem__actions {\n    flex-direction: column; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .dshUnsavedListingItem {\n    margin-top: 16px; }\n  .dshUnsavedListingItem__heading {\n    margin-bottom: 4px; }\n  .dshUnsavedListingItem__actions {\n    flex-direction: column; } }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(44);var content=__webpack_require__(143);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(45);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".react-grid-layout .gs-w {\n  z-index: auto; }\n\n/**\n * 1. Due to https://github.com/STRML/react-grid-layout/issues/240 we have to manually hide the resizable\n * element.\n */\n.dshLayout--viewing .react-resizable-handle {\n  display: none;\n  /* 1 */ }\n\n/**\n * 1. If we don't give the resizable handler a larger z index value the layout will hide it.\n */\n.dshLayout--editing .react-resizable-handle {\n  width: 24px;\n  height: 24px;\n  z-index: 1000;\n  /* 1 */\n  right: 0;\n  bottom: 0;\n  padding-right: 8px;\n  padding-bottom: 8px; }\n\n/**\n * 1. Need to override the react grid layout height when a single panel is expanded. Important is required because\n * otherwise the height is set inline.\n */\n.dshLayout-isMaximizedPanel {\n  height: 100% !important;\n  /* 1. */\n  width: 100%;\n  position: absolute !important;\n  /* 1 */ }\n\n/**\n * .dshLayout-withoutMargins only affects the panel styles themselves, see ../panel\n */\n/**\n * When a single panel is expanded, all the other panels are hidden in the grid.\n */\n.dshDashboardGrid__item--hidden {\n  display: none; }\n\n/**\n * 1. We need to mark this as important because react grid layout sets the width and height of the panels inline.\n */\n.dshDashboardGrid__item--expanded {\n  height: 100% !important;\n  /* 1 */\n  width: 100% !important;\n  /* 1 */\n  top: 0 !important;\n  /* 1 */\n  left: 0 !important;\n  /* 1 */ }\n\n.react-grid-item {\n  /**\n   * Disable transitions from the library on each grid element.\n   */\n  transition: none;\n  /**\n    * Copy over and overwrite the fill color with EUI color mixin (for theming)\n    */\n  /**\n   * Dragged/Resized panels in dashboard should always appear above other panels\n   * and above the placeholder\n   */\n  /**\n   * Overwrites red coloring that comes from this library by default.\n   */ }\n  .react-grid-item > .react-resizable-handle {\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='6' height='6' viewBox='0 0 6 6'%3E%3Cpolygon fill='rgb%28152, 162, 179%29' points='6 6 0 6 0 4.2 4 4.2 4.2 4.2 4.2 0 6 0' /%3E%3C/svg%3E%0A\"); }\n    .react-grid-item > .react-resizable-handle::after {\n      border: none !important;\n      /** overrides library default visual indicator **/ }\n    .react-grid-item > .react-resizable-handle:hover, .react-grid-item > .react-resizable-handle:focus {\n      background-color: rgba(243, 211, 113, 0.3); }\n  .react-grid-item.resizing, .react-grid-item.react-draggable-dragging {\n    z-index: 2000 !important; }\n  .react-grid-item.react-draggable-dragging {\n    transition: box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    box-shadow: 0 2.7px 9px rgba(0, 0, 0, 0.325), 0 9.4px 24px rgba(0, 0, 0, 0.225), 0 21.8px 43px rgba(0, 0, 0, 0.2);\n    border-radius: 6px; }\n  .react-grid-item.react-grid-placeholder {\n    border-radius: 6px;\n    background: #F3D371; }\n\n@media only screen and (max-width: 574px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n/**\n  * EDITING MODE\n  * Use .dshLayout--editing to target editing state because\n  * .embPanel--editing doesn't get updating without a hard refresh\n  */\n.dshLayout-withoutMargins .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  box-shadow: none;\n  border-radius: 0; }\n\n.dshLayout-withoutMargins:not(.dshLayout--editing) .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  border-color: transparent; }\n\n.dshDashboardViewport {\n  width: 100%; }\n\n.dshDashboardViewport-withMargins {\n  width: 100%; }\n\n.dshAppContainer {\n  display: flex;\n  flex-direction: column;\n  flex: 1; }\n\n.dashboardViewport {\n  flex: 1;\n  display: flex;\n  flex-direction: column; }\n\n.dshStartScreen {\n  text-align: center; }\n\n.dshStartScreen__pageContent {\n  padding: 40px; }\n\n.dshStartScreen__panelDesc {\n  max-width: 260px;\n  margin: 0 auto; }\n\n.dshEmptyWidget {\n  background-color: #25262E;\n  border: 1px solid #343741;\n  border-style: dashed;\n  border-radius: 6px;\n  padding: 80px;\n  max-width: 400px;\n  margin-left: 8px;\n  text-align: center; }\n\n.dshUnsavedListingItem {\n  margin-top: 12px; }\n\n.dshUnsavedListingItem__icon {\n  margin-right: 12px; }\n\n.dshUnsavedListingItem__title {\n  margin-bottom: 0 !important; }\n\n.dshUnsavedListingItem__loading {\n  color: #81858f !important; }\n\n.dshUnsavedListingItem__actions {\n  margin-left: 28px; }\n\n@media only screen and (max-width: 574px) {\n  .dshUnsavedListingItem {\n    margin-top: 16px; }\n  .dshUnsavedListingItem__heading {\n    margin-bottom: 4px; }\n  .dshUnsavedListingItem__actions {\n    flex-direction: column; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .dshUnsavedListingItem {\n    margin-top: 16px; }\n  .dshUnsavedListingItem__heading {\n    margin-bottom: 4px; }\n  .dshUnsavedListingItem__actions {\n    flex-direction: column; } }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(44);var content=__webpack_require__(145);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(45);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".react-grid-layout .gs-w {\n  z-index: auto; }\n\n/**\n * 1. Due to https://github.com/STRML/react-grid-layout/issues/240 we have to manually hide the resizable\n * element.\n */\n.dshLayout--viewing .react-resizable-handle {\n  display: none;\n  /* 1 */ }\n\n/**\n * 1. If we don't give the resizable handler a larger z index value the layout will hide it.\n */\n.dshLayout--editing .react-resizable-handle {\n  width: 24px;\n  height: 24px;\n  z-index: 1000;\n  /* 1 */\n  right: 0;\n  bottom: 0;\n  padding-right: 8px;\n  padding-bottom: 8px; }\n\n/**\n * 1. Need to override the react grid layout height when a single panel is expanded. Important is required because\n * otherwise the height is set inline.\n */\n.dshLayout-isMaximizedPanel {\n  height: 100% !important;\n  /* 1. */\n  width: 100%;\n  position: absolute !important;\n  /* 1 */ }\n\n/**\n * .dshLayout-withoutMargins only affects the panel styles themselves, see ../panel\n */\n/**\n * When a single panel is expanded, all the other panels are hidden in the grid.\n */\n.dshDashboardGrid__item--hidden {\n  display: none; }\n\n/**\n * 1. We need to mark this as important because react grid layout sets the width and height of the panels inline.\n */\n.dshDashboardGrid__item--expanded {\n  height: 100% !important;\n  /* 1 */\n  width: 100% !important;\n  /* 1 */\n  top: 0 !important;\n  /* 1 */\n  left: 0 !important;\n  /* 1 */ }\n\n.react-grid-item {\n  /**\n   * Disable transitions from the library on each grid element.\n   */\n  transition: none;\n  /**\n    * Copy over and overwrite the fill color with EUI color mixin (for theming)\n    */\n  /**\n   * Dragged/Resized panels in dashboard should always appear above other panels\n   * and above the placeholder\n   */\n  /**\n   * Overwrites red coloring that comes from this library by default.\n   */ }\n  .react-grid-item > .react-resizable-handle {\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='6' height='6' viewBox='0 0 6 6'%3E%3Cpolygon fill='rgb%28105, 112, 125%29' points='6 6 0 6 0 4.2 4 4.2 4.2 4.2 4.2 0 6 0' /%3E%3C/svg%3E%0A\"); }\n    .react-grid-item > .react-resizable-handle::after {\n      border: none !important;\n      /** overrides library default visual indicator **/ }\n    .react-grid-item > .react-resizable-handle:hover, .react-grid-item > .react-resizable-handle:focus {\n      background-color: rgba(254, 197, 20, 0.1); }\n  .react-grid-item.resizing, .react-grid-item.react-draggable-dragging {\n    z-index: 2000 !important; }\n  .react-grid-item.react-draggable-dragging {\n    transition: box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    box-shadow: 0 2.7px 9px rgba(0, 0, 0, 0.13), 0 9.4px 24px rgba(0, 0, 0, 0.09), 0 21.8px 43px rgba(0, 0, 0, 0.08);\n    border-radius: 6px; }\n  .react-grid-item.react-grid-placeholder {\n    border-radius: 6px;\n    background: #FEC514; }\n\n@media only screen and (max-width: 574px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n/**\n  * EDITING MODE\n  * Use .dshLayout--editing to target editing state because\n  * .embPanel--editing doesn't get updating without a hard refresh\n  */\n.dshLayout-withoutMargins .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  box-shadow: none;\n  border-radius: 0; }\n\n.dshLayout-withoutMargins:not(.dshLayout--editing) .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  border-color: transparent; }\n\n.dshDashboardViewport {\n  width: 100%; }\n\n.dshDashboardViewport-withMargins {\n  width: 100%; }\n\n.dshAppContainer {\n  display: flex;\n  flex-direction: column;\n  flex: 1; }\n\n.dashboardViewport {\n  flex: 1;\n  display: flex;\n  flex-direction: column; }\n\n.dshStartScreen {\n  text-align: center; }\n\n.dshStartScreen__pageContent {\n  padding: 40px; }\n\n.dshStartScreen__panelDesc {\n  max-width: 260px;\n  margin: 0 auto; }\n\n.dshEmptyWidget {\n  background-color: #F5F7FA;\n  border: 1px solid #D3DAE6;\n  border-style: dashed;\n  border-radius: 6px;\n  padding: 80px;\n  max-width: 400px;\n  margin-left: 8px;\n  text-align: center; }\n\n.dshUnsavedListingItem {\n  margin-top: 12px; }\n\n.dshUnsavedListingItem__icon {\n  margin-right: 12px; }\n\n.dshUnsavedListingItem__title {\n  margin-bottom: 0 !important; }\n\n.dshUnsavedListingItem__loading {\n  color: #69707D !important; }\n\n.dshUnsavedListingItem__actions {\n  margin-left: 28px; }\n\n@media only screen and (max-width: 574px) {\n  .dshUnsavedListingItem {\n    margin-top: 16px; }\n  .dshUnsavedListingItem__heading {\n    margin-bottom: 4px; }\n  .dshUnsavedListingItem__actions {\n    flex-direction: column; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .dshUnsavedListingItem {\n    margin-top: 16px; }\n  .dshUnsavedListingItem__heading {\n    margin-bottom: 4px; }\n  .dshUnsavedListingItem__actions {\n    flex-direction: column; } }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){"use strict";const strictUriEncode=__webpack_require__(147);const decodeComponent=__webpack_require__(148);const splitOnFirst=__webpack_require__(149);const isNullOrUndefined=value=>value===null||value===undefined;function encoderForArrayFormat(options){switch(options.arrayFormat){case"index":return key=>(result,value)=>{const index=result.length;if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}if(value===null){return[...result,[encode(key,options),"[",index,"]"].join("")]}return[...result,[encode(key,options),"[",encode(index,options),"]=",encode(value,options)].join("")]};case"bracket":return key=>(result,value)=>{if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}if(value===null){return[...result,[encode(key,options),"[]"].join("")]}return[...result,[encode(key,options),"[]=",encode(value,options)].join("")]};case"comma":case"separator":return key=>(result,value)=>{if(value===null||value===undefined||value.length===0){return result}if(result.length===0){return[[encode(key,options),"=",encode(value,options)].join("")]}return[[result,encode(value,options)].join(options.arrayFormatSeparator)]};default:return key=>(result,value)=>{if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}if(value===null){return[...result,encode(key,options)]}return[...result,[encode(key,options),"=",encode(value,options)].join("")]}}}function parserForArrayFormat(options){let result;switch(options.arrayFormat){case"index":return(key,value,accumulator)=>{result=/\[(\d*)\]$/.exec(key);key=key.replace(/\[\d*\]$/,"");if(!result){accumulator[key]=value;return}if(accumulator[key]===undefined){accumulator[key]={}}accumulator[key][result[1]]=value};case"bracket":return(key,value,accumulator)=>{result=/(\[\])$/.exec(key);key=key.replace(/\[\]$/,"");if(!result){accumulator[key]=value;return}if(accumulator[key]===undefined){accumulator[key]=[value];return}accumulator[key]=[].concat(accumulator[key],value)};case"comma":case"separator":return(key,value,accumulator)=>{const isArray=typeof value==="string"&&value.split("").indexOf(options.arrayFormatSeparator)>-1;const newValue=isArray?value.split(options.arrayFormatSeparator).map(item=>decode(item,options)):value===null?value:decode(value,options);accumulator[key]=newValue};default:return(key,value,accumulator)=>{if(accumulator[key]===undefined){accumulator[key]=value;return}accumulator[key]=[].concat(accumulator[key],value)}}}function validateArrayFormatSeparator(value){if(typeof value!=="string"||value.length!==1){throw new TypeError("arrayFormatSeparator must be single character string")}}function encode(value,options){if(options.encode){return options.strict?strictUriEncode(value):encodeURIComponent(value)}return value}function decode(value,options){if(options.decode){return decodeComponent(value)}return value}function keysSorter(input){if(Array.isArray(input)){return input.sort()}if(typeof input==="object"){return keysSorter(Object.keys(input)).sort((a,b)=>Number(a)-Number(b)).map(key=>input[key])}return input}function removeHash(input){const hashStart=input.indexOf("#");if(hashStart!==-1){input=input.slice(0,hashStart)}return input}function getHash(url){let hash="";const hashStart=url.indexOf("#");if(hashStart!==-1){hash=url.slice(hashStart)}return hash}function extract(input){input=removeHash(input);const queryStart=input.indexOf("?");if(queryStart===-1){return""}return input.slice(queryStart+1)}function parseValue(value,options){if(options.parseNumbers&&!Number.isNaN(Number(value))&&(typeof value==="string"&&value.trim()!=="")){value=Number(value)}else if(options.parseBooleans&&value!==null&&(value.toLowerCase()==="true"||value.toLowerCase()==="false")){value=value.toLowerCase()==="true"}return value}function parse(input,options){options=Object.assign({decode:true,sort:true,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:false,parseBooleans:false},options);validateArrayFormatSeparator(options.arrayFormatSeparator);const formatter=parserForArrayFormat(options);const ret=Object.create(null);if(typeof input!=="string"){return ret}input=input.trim().replace(/^[?#&]/,"");if(!input){return ret}for(const param of input.split("&")){let[key,value]=splitOnFirst(options.decode?param.replace(/\+/g," "):param,"=");value=value===undefined?null:["comma","separator"].includes(options.arrayFormat)?value:decode(value,options);formatter(decode(key,options),value,ret)}for(const key of Object.keys(ret)){const value=ret[key];if(typeof value==="object"&&value!==null){for(const k of Object.keys(value)){value[k]=parseValue(value[k],options)}}else{ret[key]=parseValue(value,options)}}if(options.sort===false){return ret}return(options.sort===true?Object.keys(ret).sort():Object.keys(ret).sort(options.sort)).reduce((result,key)=>{const value=ret[key];if(Boolean(value)&&typeof value==="object"&&!Array.isArray(value)){result[key]=keysSorter(value)}else{result[key]=value}return result},Object.create(null))}exports.extract=extract;exports.parse=parse;exports.stringify=(object,options)=>{if(!object){return""}options=Object.assign({encode:true,strict:true,arrayFormat:"none",arrayFormatSeparator:","},options);validateArrayFormatSeparator(options.arrayFormatSeparator);const shouldFilter=key=>options.skipNull&&isNullOrUndefined(object[key])||options.skipEmptyString&&object[key]==="";const formatter=encoderForArrayFormat(options);const objectCopy={};for(const key of Object.keys(object)){if(!shouldFilter(key)){objectCopy[key]=object[key]}}const keys=Object.keys(objectCopy);if(options.sort!==false){keys.sort(options.sort)}return keys.map(key=>{const value=object[key];if(value===undefined){return""}if(value===null){return encode(key,options)}if(Array.isArray(value)){return value.reduce(formatter(key),[]).join("&")}return encode(key,options)+"="+encode(value,options)}).filter(x=>x.length>0).join("&")};exports.parseUrl=(input,options)=>{options=Object.assign({decode:true},options);const[url,hash]=splitOnFirst(input,"#");return Object.assign({url:url.split("?")[0]||"",query:parse(extract(input),options)},options&&options.parseFragmentIdentifier&&hash?{fragmentIdentifier:decode(hash,options)}:{})};exports.stringifyUrl=(input,options)=>{options=Object.assign({encode:true,strict:true},options);const url=removeHash(input.url).split("?")[0]||"";const queryFromUrl=exports.extract(input.url);const parsedQueryFromUrl=exports.parse(queryFromUrl,{sort:false});const query=Object.assign(parsedQueryFromUrl,input.query);let queryString=exports.stringify(query,options);if(queryString){queryString=`?${queryString}`}let hash=getHash(input.url);if(input.fragmentIdentifier){hash=`#${encode(input.fragmentIdentifier,options)}`}return`${url}${queryString}${hash}`}},function(module,exports,__webpack_require__){"use strict";module.exports=str=>encodeURIComponent(str).replace(/[!'()*]/g,x=>`%${x.charCodeAt(0).toString(16).toUpperCase()}`)},function(module,exports,__webpack_require__){"use strict";var token="%[a-f0-9]{2}";var singleMatcher=new RegExp(token,"gi");var multiMatcher=new RegExp("("+token+")+","gi");function decodeComponents(components,split){try{return decodeURIComponent(components.join(""))}catch(err){}if(components.length===1){return components}split=split||1;var left=components.slice(0,split);var right=components.slice(split);return Array.prototype.concat.call([],decodeComponents(left),decodeComponents(right))}function decode(input){try{return decodeURIComponent(input)}catch(err){var tokens=input.match(singleMatcher);for(var i=1;i<tokens.length;i++){input=decodeComponents(tokens,i).join("");tokens=input.match(singleMatcher)}return input}}function customDecodeURIComponent(input){var replaceMap={"%FE%FF":"��","%FF%FE":"��"};var match=multiMatcher.exec(input);while(match){try{replaceMap[match[0]]=decodeURIComponent(match[0])}catch(err){var result=decode(match[0]);if(result!==match[0]){replaceMap[match[0]]=result}}match=multiMatcher.exec(input)}replaceMap["%C2"]="�";var entries=Object.keys(replaceMap);for(var i=0;i<entries.length;i++){var key=entries[i];input=input.replace(new RegExp(key,"g"),replaceMap[key])}return input}module.exports=function(encodedURI){if(typeof encodedURI!=="string"){throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof encodedURI+"`")}try{encodedURI=encodedURI.replace(/\+/g," ");return decodeURIComponent(encodedURI)}catch(err){return customDecodeURIComponent(encodedURI)}}},function(module,exports,__webpack_require__){"use strict";module.exports=(string,separator)=>{if(!(typeof string==="string"&&typeof separator==="string")){throw new TypeError("Expected the arguments to be of type `string`")}if(separator===""){return[string]}const separatorIndex=string.indexOf(separator);if(separatorIndex===-1){return[string]}return[string.slice(0,separatorIndex),string.slice(separatorIndex+separator.length)]}},function(module,exports,__webpack_require__){exports.set=__webpack_require__(151);exports.setWith=__webpack_require__(190)},function(module,exports,__webpack_require__){var baseSet=__webpack_require__(134);function set(object,path,value){return object==null?object:baseSet(object,path,value)}module.exports=set},function(module,exports,__webpack_require__){var baseAssignValue=__webpack_require__(153),eq=__webpack_require__(136);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}module.exports=assignValue},function(module,exports,__webpack_require__){var defineProperty=__webpack_require__(154);function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty){defineProperty(object,key,{configurable:true,enumerable:true,value:value,writable:true})}else{object[key]=value}}module.exports=baseAssignValue},function(module,exports,__webpack_require__){var getNative=__webpack_require__(131);var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();module.exports=defineProperty},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(135),isMasked=__webpack_require__(156),isObject=__webpack_require__(36),toSource=__webpack_require__(158);var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var funcProto=Function.prototype,objectProto=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}module.exports=baseIsNative},function(module,exports,__webpack_require__){var coreJsData=__webpack_require__(157);var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}module.exports=isMasked},function(module,exports,__webpack_require__){var root=__webpack_require__(47);var coreJsData=root["__core-js_shared__"];module.exports=coreJsData},function(module,exports){var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}module.exports=toSource},function(module,exports){function getValue(object,key){return object==null?undefined:object[key]}module.exports=getValue},function(module,exports,__webpack_require__){var isArray=__webpack_require__(132),isKey=__webpack_require__(161),stringToPath=__webpack_require__(162),toString=__webpack_require__(185);function castPath(value,object){if(isArray(value)){return value}return isKey(value,object)?[value]:stringToPath(toString(value))}module.exports=castPath},function(module,exports,__webpack_require__){var isArray=__webpack_require__(132),isSymbol=__webpack_require__(70);var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(value,object){if(isArray(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}module.exports=isKey},function(module,exports,__webpack_require__){var memoizeCapped=__webpack_require__(163);var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=memoizeCapped((function(string){var result=[];if(string.charCodeAt(0)===46){result.push("")}string.replace(rePropName,(function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)}));return result}));module.exports=stringToPath},function(module,exports,__webpack_require__){var memoize=__webpack_require__(164);var MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,(function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key}));var cache=result.cache;return result}module.exports=memoizeCapped},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(165);var FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;module.exports=memoize},function(module,exports,__webpack_require__){var mapCacheClear=__webpack_require__(166),mapCacheDelete=__webpack_require__(180),mapCacheGet=__webpack_require__(182),mapCacheHas=__webpack_require__(183),mapCacheSet=__webpack_require__(184);function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;module.exports=MapCache},function(module,exports,__webpack_require__){var Hash=__webpack_require__(167),ListCache=__webpack_require__(173),Map=__webpack_require__(179);function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}module.exports=mapCacheClear},function(module,exports,__webpack_require__){var hashClear=__webpack_require__(168),hashDelete=__webpack_require__(169),hashGet=__webpack_require__(170),hashHas=__webpack_require__(171),hashSet=__webpack_require__(172);function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;module.exports=Hash},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(128);function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}module.exports=hashClear},function(module,exports){function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}module.exports=hashDelete},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(128);var HASH_UNDEFINED="__lodash_hash_undefined__";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}module.exports=hashGet},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(128);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}module.exports=hashHas},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(128);var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}module.exports=hashSet},function(module,exports,__webpack_require__){var listCacheClear=__webpack_require__(174),listCacheDelete=__webpack_require__(175),listCacheGet=__webpack_require__(176),listCacheHas=__webpack_require__(177),listCacheSet=__webpack_require__(178);function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;module.exports=ListCache},function(module,exports){function listCacheClear(){this.__data__=[];this.size=0}module.exports=listCacheClear},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(129);var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}module.exports=listCacheDelete},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(129);function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}module.exports=listCacheGet},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(129);function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}module.exports=listCacheHas},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(129);function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}module.exports=listCacheSet},function(module,exports,__webpack_require__){var getNative=__webpack_require__(131),root=__webpack_require__(47);var Map=getNative(root,"Map");module.exports=Map},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(130);function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}module.exports=mapCacheDelete},function(module,exports){function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}module.exports=isKeyable},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(130);function mapCacheGet(key){return getMapData(this,key).get(key)}module.exports=mapCacheGet},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(130);function mapCacheHas(key){return getMapData(this,key).has(key)}module.exports=mapCacheHas},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(130);function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}module.exports=mapCacheSet},function(module,exports,__webpack_require__){var baseToString=__webpack_require__(186);function toString(value){return value==null?"":baseToString(value)}module.exports=toString},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(49),arrayMap=__webpack_require__(187),isArray=__webpack_require__(132),isSymbol=__webpack_require__(70);var INFINITY=1/0;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(value){if(typeof value=="string"){return value}if(isArray(value)){return arrayMap(value,baseToString)+""}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=baseToString},function(module,exports){function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}module.exports=arrayMap},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type=="number"||type!="symbol"&&reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}module.exports=isIndex},function(module,exports,__webpack_require__){var isSymbol=__webpack_require__(70);var INFINITY=1/0;function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=toKey},function(module,exports,__webpack_require__){var baseSet=__webpack_require__(134);function setWith(object,path,value,customizer){customizer=typeof customizer=="function"?customizer:undefined;return object==null?object:baseSet(object,path,value,customizer)}module.exports=setWith},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(192);case"v7light":return __webpack_require__(194);case"v8dark":return __webpack_require__(196);case"v8light":return __webpack_require__(198)}},function(module,exports,__webpack_require__){var api=__webpack_require__(44);var content=__webpack_require__(193);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(45);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".panelToolbar {\n  padding: 0 8px 8px;\n  flex-grow: 0; }\n\n.panelToolbarButton {\n  line-height: 40px;\n  background-color: #1D1E24;\n  border-color: #343741 !important; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(44);var content=__webpack_require__(195);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(45);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".panelToolbar {\n  padding: 0 8px 8px;\n  flex-grow: 0; }\n\n.panelToolbarButton {\n  line-height: 40px;\n  background-color: #FFF;\n  border-color: #D3DAE6 !important; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(44);var content=__webpack_require__(197);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(45);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".panelToolbar {\n  padding: 0 8px 8px;\n  flex-grow: 0; }\n\n.panelToolbarButton {\n  line-height: 40px;\n  background-color: #1D1E24;\n  border-color: #343741 !important; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(44);var content=__webpack_require__(199);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(45);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".panelToolbar {\n  padding: 0 8px 8px;\n  flex-grow: 0; }\n\n.panelToolbarButton {\n  line-height: 40px;\n  background-color: #FFF;\n  border-color: #D3DAE6 !important; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(126);var react_1=__webpack_require__(0);var useEffectOnce_1=tslib_1.__importDefault(__webpack_require__(201));var useUnmount=function(fn){var fnRef=react_1.useRef(fn);fnRef.current=fn;useEffectOnce_1.default((function(){return function(){return fnRef.current()}}))};exports.default=useUnmount},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useEffectOnce=function(effect){react_1.useEffect(effect,[])};exports.default=useEffectOnce},function(module,exports,__webpack_require__){"use strict";module.exports=function equal(a,b){if(a===b)return true;if(a&&b&&typeof a=="object"&&typeof b=="object"){if(a.constructor!==b.constructor)return false;var length,i,keys;if(Array.isArray(a)){length=a.length;if(length!=b.length)return false;for(i=length;i--!==0;)if(!equal(a[i],b[i]))return false;return true}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();keys=Object.keys(a);length=keys.length;if(length!==Object.keys(b).length)return false;for(i=length;i--!==0;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return false;for(i=length;i--!==0;){var key=keys[i];if(!equal(a[key],b[key]))return false}return true}return a!==a&&b!==b}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"dashboardUrlParams",(function(){return dashboardUrlParams}));__webpack_require__.d(__webpack_exports__,"mountApp",(function(){return mountApp}));var public_application=__webpack_require__(137);var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(18);var query_string=__webpack_require__(146);var external_kbnSharedDeps_ReactDom_=__webpack_require__(14);var external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_);var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(123);var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(37);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(4);var external_kbnSharedDeps_Lodash_=__webpack_require__(8);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);var services_data=__webpack_require__(21);var external_kbnSharedDeps_Moment_=__webpack_require__(124);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);class filter_utils_FilterUtils{static convertTimeToUTCString(time){if(external_kbnSharedDeps_Moment_default()(time).isValid()){return external_kbnSharedDeps_Moment_default()(time).utc().format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")}else{return time}}static areTimesEqual(timeA,timeB){return this.convertTimeToUTCString(timeA)===this.convertTimeToUTCString(timeB)}static cleanFiltersForComparison(filters){return external_kbnSharedDeps_Lodash_default.a.map(filters,filter=>{const f=external_kbnSharedDeps_Lodash_default.a.omit(filter,["$$hashKey","$state"]);if(f.meta){return external_kbnSharedDeps_Lodash_default.a.omit(f.meta,["value"])}return f})}}function updateSavedDashboard(savedDashboard,appState,timeFilter,hasTaggingCapabilities,toJson){savedDashboard.title=appState.title;savedDashboard.description=appState.description;savedDashboard.timeRestore=appState.timeRestore;savedDashboard.panelsJSON=toJson(appState.panels);savedDashboard.optionsJSON=toJson(appState.options);if(hasTaggingCapabilities(savedDashboard)){savedDashboard.setTags(appState.tags)}savedDashboard.timeFrom=savedDashboard.timeRestore?filter_utils_FilterUtils.convertTimeToUTCString(timeFilter.getTime().from):undefined;savedDashboard.timeTo=savedDashboard.timeRestore?filter_utils_FilterUtils.convertTimeToUTCString(timeFilter.getTime().to):undefined;const timeRestoreObj=external_kbnSharedDeps_Lodash_default.a.pick(timeFilter.getRefreshInterval(),["display","pause","section","value"]);savedDashboard.refreshInterval=savedDashboard.timeRestore?timeRestoreObj:undefined;const unpinnedFilters=savedDashboard.getFilters().filter(filter=>!services_data["esFilters"].isFilterPinned(filter));savedDashboard.searchSource.setField("filter",unpinnedFilters)}function saveDashboard(toJson,timeFilter,dashboardStateManager,saveOptions){const savedDashboard=dashboardStateManager.savedDashboard;const appState=dashboardStateManager.appState;const hasTaggingCapabilities=dashboardStateManager.hasTaggingCapabilities;updateSavedDashboard(savedDashboard,appState,timeFilter,hasTaggingCapabilities,toJson);return savedDashboard.save(saveOptions).then(id=>{if(id){dashboardStateManager.lastSavedDashboardFilters=dashboardStateManager.getFilterState()}return id})}function getAppStateDefaults(viewMode,savedDashboard,hasTaggingCapabilities){return{fullScreenMode:false,title:savedDashboard.title,description:savedDashboard.description||"",tags:hasTaggingCapabilities(savedDashboard)?savedDashboard.getTags():[],timeRestore:savedDashboard.timeRestore,panels:savedDashboard.panelsJSON?JSON.parse(savedDashboard.panelsJSON):[],options:savedDashboard.optionsJSON?JSON.parse(savedDashboard.optionsJSON):{},query:savedDashboard.getQuery(),filters:savedDashboard.getFilters(),viewMode:viewMode}}var satisfies=__webpack_require__(50);var satisfies_default=__webpack_require__.n(satisfies);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);function wrapArray(subj){return Array.isArray(subj)?subj:[subj]}class UnreachableCaseError extends Error{constructor(val){super(`Unreachable case: ${val}`)}}function createUiCounterMetric({type:type,appName:appName,eventName:eventName,count:count=1}){return{type:type,appName:appName,eventName:eventName,count:count}}function trackUsageAgent(appName){const userAgent=window&&window.navigator&&window.navigator.userAgent||"";return{type:METRIC_TYPE.USER_AGENT,appName:appName,userAgent:userAgent}}var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(122);var external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_);function createApplicationUsageMetric(appId,viewId){return{type:METRIC_TYPE.APPLICATION_USAGE,appId:appId,viewId:viewId,startTime:external_kbnSharedDeps_MomentTimezone_default()(),numberOfClicks:0}}let METRIC_TYPE;(function(METRIC_TYPE){METRIC_TYPE["COUNT"]="count";METRIC_TYPE["LOADED"]="loaded";METRIC_TYPE["CLICK"]="click";METRIC_TYPE["USER_AGENT"]="user_agent";METRIC_TYPE["APPLICATION_USAGE"]="application_usage"})(METRIC_TYPE||(METRIC_TYPE={}));function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class ReportStorageManager{constructor(storageKey,storage){_defineProperty(this,"storageKey",void 0);_defineProperty(this,"storage",void 0);this.storageKey=storageKey;this.storage=storage}get(){if(!this.storage)return;return this.storage.get(this.storageKey)}store(report){if(!this.storage)return;this.storage.set(this.storageKey,report)}}function application_usage_tracker_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class application_usage_tracker_ApplicationUsageTracker{constructor(reporter){application_usage_tracker_defineProperty(this,"trackedApplicationViews",{});application_usage_tracker_defineProperty(this,"reporter",void 0);application_usage_tracker_defineProperty(this,"currentAppId",void 0);application_usage_tracker_defineProperty(this,"currentApplicationKeys",[]);application_usage_tracker_defineProperty(this,"beforeUnloadListener",void 0);application_usage_tracker_defineProperty(this,"onVisiblityChangeListener",void 0);this.reporter=reporter}createKey(appId,viewId){return{appId:appId,viewId:viewId}}static serializeKey({appId:appId,viewId:viewId}){return`${appId}-${viewId}`}trackApplications(appKeys){for(const{appId:appId,viewId:viewId}of appKeys.filter(Boolean)){const serializedKey=application_usage_tracker_ApplicationUsageTracker.serializeKey({appId:appId,viewId:viewId});if(typeof this.trackedApplicationViews[serializedKey]!=="undefined"){continue}const metric=createApplicationUsageMetric(appId,viewId);this.trackedApplicationViews[serializedKey]=metric}}attachListeners(){if(typeof window==="undefined"||typeof document==="undefined"){return}this.beforeUnloadListener=()=>{this.flushTrackedViews()};this.onVisiblityChangeListener=()=>{if(document.visibilityState==="visible"){this.resumeTrackingAll()}else if(document.visibilityState==="hidden"){this.pauseTrackingAll()}};window.addEventListener("beforeunload",this.beforeUnloadListener);document.addEventListener("visibilitychange",this.onVisiblityChangeListener)}detachListeners(){if(typeof window==="undefined"||typeof document==="undefined"){return}if(this.beforeUnloadListener){window.removeEventListener("beforeunload",this.beforeUnloadListener)}if(this.onVisiblityChangeListener){document.removeEventListener("visibilitychange",this.onVisiblityChangeListener)}}sendMetricsToReporter(metrics){metrics.forEach(metric=>{this.reporter.reportApplicationUsage(metric)})}updateViewClickCounter(viewId){if(!this.currentAppId){return}const appKey=application_usage_tracker_ApplicationUsageTracker.serializeKey({appId:this.currentAppId,viewId:viewId});if(this.trackedApplicationViews[appKey]){this.trackedApplicationViews[appKey].numberOfClicks++}}flushTrackedViews(){const appViewMetrics=Object.values(this.trackedApplicationViews);this.sendMetricsToReporter(appViewMetrics);this.trackedApplicationViews={}}start(){this.attachListeners()}stop(){this.flushTrackedViews();this.detachListeners()}setCurrentAppId(appId){this.flushTrackedViews();this.currentAppId=appId}trackApplicationViewUsage(viewId){if(!this.currentAppId){return}const appKey=this.createKey(this.currentAppId,viewId);this.trackApplications([appKey])}pauseTrackingAll(){this.currentApplicationKeys=Object.values(this.trackedApplicationViews).map(({appId:appId,viewId:viewId})=>this.createKey(appId,viewId));this.flushTrackedViews()}resumeTrackingAll(){this.trackApplications(this.currentApplicationKeys);this.currentApplicationKeys=[];this.reporter.sendReports()}flushTrackedView(viewId){if(!this.currentAppId){return}const appKey=this.createKey(this.currentAppId,viewId);const serializedKey=application_usage_tracker_ApplicationUsageTracker.serializeKey(appKey);const appViewMetric=this.trackedApplicationViews[serializedKey];this.sendMetricsToReporter([appViewMetric]);delete this.trackedApplicationViews[serializedKey]}}function report_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const REPORT_VERSION=3;class report_ReportManager{constructor(report){report_defineProperty(this,"report",void 0);this.report=report||report_ReportManager.createReport()}static createReport(){return{reportVersion:REPORT_VERSION}}clearReport(){this.report=report_ReportManager.createReport()}isReportEmpty(){const{uiCounter:uiCounter,userAgent:userAgent,application_usage:appUsage}=this.report;const noUiCounters=!uiCounter||Object.keys(uiCounter).length===0;const noUserAgents=!userAgent||Object.keys(userAgent).length===0;const noAppUsage=!appUsage||Object.keys(appUsage).length===0;return noUiCounters&&noUserAgents&&noAppUsage}incrementTotal(count,currentTotal){const currentTotalNumber=typeof currentTotal==="number"?currentTotal:0;return count+currentTotalNumber}assignReports(newMetrics){wrapArray(newMetrics).forEach(newMetric=>this.assignReport(this.report,newMetric));return{report:this.report}}static createMetricKey(metric){switch(metric.type){case METRIC_TYPE.USER_AGENT:{const{appName:appName,type:type}=metric;return`${appName}-${type}`}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{const{appName:appName,eventName:eventName,type:type}=metric;return`${appName}-${type}-${eventName}`}case METRIC_TYPE.APPLICATION_USAGE:{const{appId:appId,viewId:viewId}=metric;return application_usage_tracker_ApplicationUsageTracker.serializeKey({appId:appId,viewId:viewId})}default:throw new UnreachableCaseError(metric)}}assignReport(report,metric){const key=report_ReportManager.createMetricKey(metric);switch(metric.type){case METRIC_TYPE.USER_AGENT:{const{appName:appName,type:type,userAgent:userAgent}=metric;if(userAgent){report.userAgent={[key]:{key:key,appName:appName,type:type,userAgent:metric.userAgent}}}return}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{var _report$uiCounter$key;const{appName:appName,type:type,eventName:eventName,count:count}=metric;report.uiCounter=report.uiCounter||{};const currentTotal=(_report$uiCounter$key=report.uiCounter[key])===null||_report$uiCounter$key===void 0?void 0:_report$uiCounter$key.total;report.uiCounter[key]={key:key,appName:appName,eventName:eventName,type:type,total:this.incrementTotal(count,currentTotal)};return}case METRIC_TYPE.APPLICATION_USAGE:{const{numberOfClicks:numberOfClicks,startTime:startTime,appId:appId,viewId:viewId}=metric;const minutesOnScreen=external_kbnSharedDeps_MomentTimezone_default()().diff(startTime,"minutes",true);report.application_usage=report.application_usage||{};const appExistingData=report.application_usage[key]||{minutesOnScreen:0,numberOfClicks:0,appId:appId,viewId:viewId};report.application_usage[key]={...appExistingData,minutesOnScreen:appExistingData.minutesOnScreen+minutesOnScreen,numberOfClicks:appExistingData.numberOfClicks+numberOfClicks};return}default:throw new UnreachableCaseError(metric)}}}report_defineProperty(report_ReportManager,"REPORT_VERSION",REPORT_VERSION);function reporter_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class reporter_Reporter{constructor(config){reporter_defineProperty(this,"checkInterval",void 0);reporter_defineProperty(this,"interval",void 0);reporter_defineProperty(this,"http",void 0);reporter_defineProperty(this,"reportManager",void 0);reporter_defineProperty(this,"storageManager",void 0);reporter_defineProperty(this,"debug",void 0);reporter_defineProperty(this,"retryCount",0);reporter_defineProperty(this,"maxRetries",3);reporter_defineProperty(this,"start",()=>{if(!this.interval){this.interval=setTimeout(()=>{this.interval=undefined;this.sendReports()},this.checkInterval)}});reporter_defineProperty(this,"reportUiCounter",(appName,type,eventNames,count)=>{const metrics=wrapArray(eventNames).map(eventName=>{this.log(`${type} Metric -> (${appName}:${eventName}):`);const report=createUiCounterMetric({type:type,appName:appName,eventName:eventName,count:count});this.log(report);return report});this.saveToReport(metrics)});reporter_defineProperty(this,"reportUserAgent",appName=>{this.log(`Reporting user-agent.`);const report=trackUsageAgent(appName);this.saveToReport([report])});reporter_defineProperty(this,"sendReports",async()=>{if(!this.reportManager.isReportEmpty()){try{await this.http(this.reportManager.report);this.flushReport()}catch(err){this.log(`Error Sending Metrics Report ${err}`);this.retryCount=this.retryCount+1;const versionMismatch=this.reportManager.report.reportVersion!==report_ReportManager.REPORT_VERSION;if(versionMismatch||this.retryCount>this.maxRetries){this.flushReport()}}}this.start()});const{http:http,storage:storage,debug:debug,checkInterval:checkInterval=9e4,storageKey:storageKey="analytics"}=config;this.http=http;this.checkInterval=checkInterval;this.storageManager=new ReportStorageManager(storageKey,storage);const storedReport=this.storageManager.get();this.reportManager=new report_ReportManager(storedReport);this.debug=!!debug}saveToReport(newMetrics){this.reportManager.assignReports(newMetrics);this.storageManager.store(this.reportManager.report)}flushReport(){this.retryCount=0;this.reportManager.clearReport();this.storageManager.store(this.reportManager.report)}log(message){if(this.debug){console.debug(message)}}reportApplicationUsage(appUsageReport){this.log(`Reporting application usage for ${appUsageReport.appId}, ${appUsageReport.viewId}`);this.saveToReport([appUsageReport])}}var types=__webpack_require__(133);var bwc_types=__webpack_require__(127);var common_types=__webpack_require__(31);var uuid=__webpack_require__(28);var uuid_default=__webpack_require__.n(uuid);const PANEL_HEIGHT_SCALE_FACTOR=5;const PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS=4;const PANEL_WIDTH_SCALE_FACTOR=4;function isPre61Panel(panel){return panel.row!==undefined}function is61Panel(panel){return satisfies_default()(panel.version,"6.1.x")}function is62Panel(panel){return satisfies_default()(panel.version,"6.2.x")}function is63Panel(panel){return satisfies_default()(panel.version,"6.3.x")}function is640To720Panel(panel){return satisfies_default()(panel.version,">6.3")&&satisfies_default()(panel.version,"<7.3")}function migratePre61PanelToLatest(panel,version,useMargins,uiState){if(panel.col===undefined||panel.row===undefined){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.panel.unableToMigratePanelDataForSixOneZeroErrorMessage",{defaultMessage:'Unable to migrate panel data for "6.1.0" backwards compatibility, panel does not contain expected col and/or row fields'}))}const embeddableConfig=uiState?uiState[`P-${panel.panelIndex}`]||{}:{};if(panel.columns||panel.sort){embeddableConfig.columns=panel.columns;embeddableConfig.sort=panel.sort}const heightScaleFactor=useMargins?PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS:PANEL_HEIGHT_SCALE_FACTOR;const DASHBOARD_GRID_COLUMN_COUNT=48;const DEFAULT_PANEL_WIDTH=DASHBOARD_GRID_COLUMN_COUNT/2;const DEFAULT_PANEL_HEIGHT=15;const{columns:columns,sort:sort,row:row,col:col,size_x:sizeX,size_y:sizeY,...rest}=panel;const panelIndex=panel.panelIndex?panel.panelIndex.toString():uuid_default.a.v4();return{...rest,version:version,panelIndex:panelIndex,gridData:{x:(col-1)*PANEL_WIDTH_SCALE_FACTOR,y:(row-1)*heightScaleFactor,w:sizeX?sizeX*PANEL_WIDTH_SCALE_FACTOR:DEFAULT_PANEL_WIDTH,h:sizeY?sizeY*heightScaleFactor:DEFAULT_PANEL_HEIGHT,i:panelIndex},embeddableConfig:embeddableConfig}}function migrate610PanelToLatest(panel,version,useMargins,uiState){["w","x","h","y"].forEach(key=>{if(panel.gridData[key]===undefined){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.panel.unableToMigratePanelDataForSixThreeZeroErrorMessage",{defaultMessage:'Unable to migrate panel data for "6.3.0" backwards compatibility, panel does not contain expected field: {key}',values:{key:key}}))}});const embeddableConfig=uiState?uiState[`P-${panel.panelIndex}`]||{}:{};if(panel.columns||panel.sort){embeddableConfig.columns=panel.columns;embeddableConfig.sort=panel.sort}const heightScaleFactor=useMargins?PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS:PANEL_HEIGHT_SCALE_FACTOR;const{columns:columns,sort:sort,...rest}=panel;const panelIndex=panel.panelIndex?panel.panelIndex.toString():uuid_default.a.v4();return{...rest,version:version,panelIndex:panelIndex,gridData:{w:panel.gridData.w*PANEL_WIDTH_SCALE_FACTOR,h:panel.gridData.h*heightScaleFactor,x:panel.gridData.x*PANEL_WIDTH_SCALE_FACTOR,y:panel.gridData.y*heightScaleFactor,i:panel.gridData.i},embeddableConfig:embeddableConfig}}function migrate620PanelToLatest(panel,version,useMargins){const embeddableConfig=panel.embeddableConfig||{};if(panel.columns||panel.sort){embeddableConfig.columns=panel.columns;embeddableConfig.sort=panel.sort}const heightScaleFactor=useMargins?PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS:PANEL_HEIGHT_SCALE_FACTOR;const{columns:columns,sort:sort,...rest}=panel;const panelIndex=panel.panelIndex?panel.panelIndex.toString():uuid_default.a.v4();return{...rest,version:version,panelIndex:panelIndex,gridData:{w:panel.gridData.w*PANEL_WIDTH_SCALE_FACTOR,h:panel.gridData.h*heightScaleFactor,x:panel.gridData.x*PANEL_WIDTH_SCALE_FACTOR,y:panel.gridData.y*heightScaleFactor,i:panel.gridData.i},embeddableConfig:embeddableConfig}}function migrate630PanelToLatest(panel,version){const embeddableConfig=panel.embeddableConfig||{};if(panel.columns||panel.sort){embeddableConfig.columns=panel.columns;embeddableConfig.sort=panel.sort}const{columns:columns,sort:sort,...rest}=panel;const panelIndex=panel.panelIndex?panel.panelIndex.toString():uuid_default.a.v4();return{...rest,version:version,panelIndex:panelIndex,embeddableConfig:embeddableConfig}}function migrate640To720PanelsToLatest(panel,version){const panelIndex=panel.panelIndex?panel.panelIndex.toString():uuid_default.a.v4();return{...panel,version:version,panelIndex:panelIndex}}function migratePanelsTo730(panels,version,useMargins,uiState){return panels.map(panel=>{if(isPre61Panel(panel)){return migratePre61PanelToLatest(panel,version,useMargins,uiState)}if(is61Panel(panel)){return migrate610PanelToLatest(panel,version,useMargins,uiState)}if(is62Panel(panel)){return migrate620PanelToLatest(panel,version,useMargins)}if(is63Panel(panel)){return migrate630PanelToLatest(panel,version)}if(is640To720Panel(panel)){return migrate640To720PanelsToLatest(panel,version)}return panel})}function migrateAppState(appState,kibanaVersion,usageCollection){if(!appState.panels){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.panel.invalidData",{defaultMessage:"Invalid data in url"}))}const panelNeedsMigration=appState.panels.some(panel=>{if(panel.version===undefined)return true;const version=panel.version;if(usageCollection){usageCollection.reportUiCounter("DashboardPanelVersionInUrl",METRIC_TYPE.LOADED,`${version}`)}return satisfies_default()(version,"<7.3")});if(panelNeedsMigration){appState.panels=migratePanelsTo730(appState.panels,kibanaVersion,appState.useMargins,appState.uiState);delete appState.uiState}return appState}function getDashboardIdFromUrl(url){var _url$match;const[,dashboardId]=(_url$match=url.match(/view\/(.*?)(\/|\?|$)/))!==null&&_url$match!==void 0?_url$match:[undefined,undefined];return dashboardId!==null&&dashboardId!==void 0?dashboardId:undefined}var url_generator=__webpack_require__(15);function createSessionRestorationDataProvider(deps){return{getName:async()=>deps.getDashboardTitle(),getUrlGeneratorData:async()=>({urlGeneratorId:url_generator["a"],initialState:getUrlGeneratorState({...deps,shouldRestoreSearchSession:false}),restoreState:getUrlGeneratorState({...deps,shouldRestoreSearchSession:true})})}}function getUrlGeneratorState({data:data,getAppState:getAppState,getDashboardId:getDashboardId,shouldRestoreSearchSession:shouldRestoreSearchSession}){const appState=getAppState();return{dashboardId:getDashboardId(),timeRange:shouldRestoreSearchSession?data.query.timefilter.timefilter.getAbsoluteTime():data.query.timefilter.timefilter.getTime(),filters:data.query.filterManager.getFilters(),query:data.query.queryString.formatQuery(appState.query),savedQuery:appState.savedQuery,useHash:false,preserveSavedFilters:false,viewMode:appState.viewMode,panels:getDashboardId()?undefined:appState.panels,searchSessionId:shouldRestoreSearchSession?data.search.session.getSessionId():undefined,refreshInterval:shouldRestoreSearchSession?{pause:true,value:0}:undefined}}function addHelpMenuToAppChrome(chrome,docLinks){chrome.setHelpExtension({appName:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.helpMenu.appName",{defaultMessage:"Dashboards"}),links:[{linkType:"documentation",href:`${docLinks.links.dashboard.guide}`}]})}async function attemptLoadDashboardByTitle(title,savedObjectsClient){const results=await savedObjectsClient.find({search:`"${title}"`,searchFields:["title"],type:"dashboard"});const matchingDashboards=results.savedObjects.filter(dashboard=>dashboard.attributes.title.toLowerCase()===title.toLowerCase());if(matchingDashboards.length===1){return{id:matchingDashboards[0].id}}}var elastic_safer_lodash_set=__webpack_require__(150);var kibana_utils=__webpack_require__(46);var dashboard_strings=__webpack_require__(2);function dashboard_panel_storage_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const DASHBOARD_PANELS_UNSAVED_ID="unsavedDashboard";const DASHBOARD_PANELS_SESSION_KEY="dashboardStateManagerPanels";class dashboard_panel_storage_DashboardPanelStorage{constructor(toasts,activeSpaceId){this.toasts=toasts;this.activeSpaceId=activeSpaceId;dashboard_panel_storage_defineProperty(this,"sessionStorage",void 0);this.sessionStorage=new kibana_utils["a"](sessionStorage)}clearPanels(id=DASHBOARD_PANELS_UNSAVED_ID){try{const sessionStorage=this.sessionStorage.get(DASHBOARD_PANELS_SESSION_KEY);const sessionStorageForSpace=(sessionStorage===null||sessionStorage===void 0?void 0:sessionStorage[this.activeSpaceId])||{};if(sessionStorageForSpace[id]){delete sessionStorageForSpace[id];this.sessionStorage.set(DASHBOARD_PANELS_SESSION_KEY,sessionStorage)}}catch(e){this.toasts.addDanger({title:dashboard_strings["x"].getPanelsClearError(e.message),"data-test-subj":"dashboardPanelsClearFailure"})}}getPanels(id=DASHBOARD_PANELS_UNSAVED_ID){try{var _this$sessionStorage$,_this$sessionStorage$2;return(_this$sessionStorage$=this.sessionStorage.get(DASHBOARD_PANELS_SESSION_KEY))===null||_this$sessionStorage$===void 0?void 0:(_this$sessionStorage$2=_this$sessionStorage$[this.activeSpaceId])===null||_this$sessionStorage$2===void 0?void 0:_this$sessionStorage$2[id]}catch(e){this.toasts.addDanger({title:dashboard_strings["x"].getPanelsGetError(e.message),"data-test-subj":"dashboardPanelsGetFailure"})}}setPanels(id=DASHBOARD_PANELS_UNSAVED_ID,newPanels){try{const sessionStoragePanels=this.sessionStorage.get(DASHBOARD_PANELS_SESSION_KEY)||{};Object(elastic_safer_lodash_set["set"])(sessionStoragePanels,[this.activeSpaceId,id],newPanels);this.sessionStorage.set(DASHBOARD_PANELS_SESSION_KEY,sessionStoragePanels)}catch(e){this.toasts.addDanger({title:dashboard_strings["x"].getPanelsSetError(e.message),"data-test-subj":"dashboardPanelsSetFailure"})}}getDashboardIdsWithUnsavedChanges(){try{var _this$sessionStorage$3;return Object.keys(((_this$sessionStorage$3=this.sessionStorage.get(DASHBOARD_PANELS_SESSION_KEY))===null||_this$sessionStorage$3===void 0?void 0:_this$sessionStorage$3[this.activeSpaceId])||{})}catch(e){this.toasts.addDanger({title:dashboard_strings["x"].getPanelsGetError(e.message),"data-test-subj":"dashboardPanelsGetFailure"});return[]}}dashboardHasUnsavedEdits(id=DASHBOARD_PANELS_UNSAVED_ID){return this.getDashboardIdsWithUnsavedChanges().indexOf(id)!==-1}}var kibana_react=__webpack_require__(10);const confirmDiscardUnsavedChanges=(overlays,discardCallback)=>overlays.openConfirm(dashboard_strings["n"].getDiscardSubtitle(),{confirmButtonText:dashboard_strings["n"].getDiscardConfirmButtonText(),cancelButtonText:dashboard_strings["n"].getDiscardCancelButtonText(),buttonColor:"danger",defaultFocusedButton:external_kbnSharedDeps_ElasticEui_["EUI_MODAL_CANCEL_BUTTON"],title:dashboard_strings["n"].getDiscardTitle()}).then(isConfirmed=>{if(isConfirmed){discardCallback()}});const confirmDiscardOrKeepUnsavedChanges=overlays=>{const titleId="confirmDiscardOrKeepTitle";const descriptionId="confirmDiscardOrKeepDescription";return new Promise(resolve=>{const session=overlays.openModal(Object(kibana_react["f"])(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFocusTrap"],{clickOutsideDisables:true,initialFocus:".discardConfirmKeepButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOutsideClickDetector"],{onOutsideClick:()=>session.close()},external_kbnSharedDeps_React_default.a.createElement("div",{role:"dialog","aria-modal":"true","aria-labelledby":titleId,"aria-describedby":descriptionId},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],{"data-test-subj":"dashboardDiscardConfirm"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h2",{id:titleId},dashboard_strings["w"].getLeaveEditModeTitle()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",{id:descriptionId},dashboard_strings["w"].getLeaveEditModeSubtitle()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"dashboardDiscardConfirmCancel",onClick:()=>session.close()},dashboard_strings["w"].getLeaveEditModeCancelButtonText()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{color:"danger","data-test-subj":"dashboardDiscardConfirmDiscard",onClick:()=>{session.close();resolve("discard")}},dashboard_strings["w"].getLeaveEditModeDiscardButtonText()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,"data-test-subj":"dashboardDiscardConfirmKeep",className:"discardConfirmKeepButton",onClick:()=>{session.close();resolve("keep")}},dashboard_strings["w"].getLeaveEditModeKeepChangesText())))))),{"data-test-subj":"dashboardDiscardConfirmModal",maxWidth:550})})};const confirmCreateWithUnsaved=(overlays,startBlankCallback,contineCallback)=>{const titleId="confirmDiscardOrKeepTitle";const descriptionId="confirmDiscardOrKeepDescription";const session=overlays.openModal(Object(kibana_react["f"])(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFocusTrap"],{clickOutsideDisables:true,initialFocus:".dashboardCreateConfirmContinueButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOutsideClickDetector"],{onOutsideClick:()=>session.close()},external_kbnSharedDeps_React_default.a.createElement("div",{role:"dialog","aria-modal":"true","aria-labelledby":titleId,"aria-describedby":descriptionId},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],{"data-test-subj":"dashboardCreateConfirm"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h2",{id:titleId},dashboard_strings["a"].getCreateTitle()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",{id:descriptionId},dashboard_strings["a"].getCreateSubtitle()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"dashboardCreateConfirmCancel",onClick:()=>session.close()},dashboard_strings["a"].getCancelButtonText()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{color:"danger","data-test-subj":"dashboardCreateConfirmStartOver",onClick:()=>{startBlankCallback();session.close()}},dashboard_strings["a"].getStartOverButtonText()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,"data-test-subj":"dashboardCreateConfirmContinue",className:"dashboardCreateConfirmContinueButton",onClick:()=>{contineCallback();session.close()}},dashboard_strings["a"].getContinueButtonText())))))),{"data-test-subj":"dashboardCreateConfirmModal"})};const DashboardUnsavedItem=({id:id,title:title,onOpenClick:onOpenClick,onDiscardClick:onDiscardClick})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"dshUnsavedListingItem"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"none",className:"dshUnsavedListingItem__heading",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{color:"text",className:"dshUnsavedListingItem__icon",type:title?"dashboardApp":"clock"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xxs"},external_kbnSharedDeps_React_default.a.createElement("h4",{className:`dshUnsavedListingItem__title ${title?"":"dshUnsavedListingItem__loading"}`},title||dashboard_strings["m"].getLoadingTitle())))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"flexStart",gutterSize:"none",className:"dshUnsavedListingItem__actions",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{flush:"left",size:"s",color:"primary",disabled:!title,onClick:onOpenClick,"data-test-subj":title?`edit-unsaved-${title.split(" ").join("-")}`:undefined,"aria-label":dashboard_strings["m"].getEditAriaLabel(title!==null&&title!==void 0?title:id)},dashboard_strings["m"].getEditTitle())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{flush:"left",size:"s",color:"danger",disabled:!title,onClick:onDiscardClick,"data-test-subj":title?`discard-unsaved-${title.split(" ").join("-")}`:undefined,"aria-label":dashboard_strings["m"].getDiscardAriaLabel(title!==null&&title!==void 0?title:id)},dashboard_strings["m"].getDiscardTitle()))));const DashboardUnsavedListing=({redirectTo:redirectTo,unsavedDashboardIds:unsavedDashboardIds,refreshUnsavedDashboards:refreshUnsavedDashboards})=>{const{services:{dashboardPanelStorage:dashboardPanelStorage,savedDashboards:savedDashboards,core:{overlays:overlays}}}=Object(kibana_react["g"])();const[items,setItems]=Object(external_kbnSharedDeps_React_["useState"])({});const onOpen=Object(external_kbnSharedDeps_React_["useCallback"])(id=>{redirectTo({destination:"dashboard",id:id,editMode:true})},[redirectTo]);const onDiscard=Object(external_kbnSharedDeps_React_["useCallback"])(id=>{confirmDiscardUnsavedChanges(overlays,()=>{dashboardPanelStorage.clearPanels(id);refreshUnsavedDashboards()})},[overlays,refreshUnsavedDashboards,dashboardPanelStorage]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if((unsavedDashboardIds===null||unsavedDashboardIds===void 0?void 0:unsavedDashboardIds.length)===0){return}let canceled=false;const dashPromises=unsavedDashboardIds.filter(id=>id!==DASHBOARD_PANELS_UNSAVED_ID).map(dashboardId=>savedDashboards.get(dashboardId).catch(()=>dashboardId));Promise.all(dashPromises).then(dashboards=>{const dashboardMap={};if(canceled){return}let hasError=false;const newItems=dashboards.reduce((map,dashboard)=>{if(typeof dashboard==="string"){hasError=true;dashboardPanelStorage.clearPanels(dashboard);return map}return{...map,[dashboard.id||DASHBOARD_PANELS_UNSAVED_ID]:dashboard}},dashboardMap);if(hasError){refreshUnsavedDashboards();return}setItems(newItems)});return()=>{canceled=true}},[savedDashboards,dashboardPanelStorage,refreshUnsavedDashboards,unsavedDashboardIds]);return unsavedDashboardIds.length===0?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{heading:"h3",title:dashboard_strings["m"].getUnsavedChangesTitle(unsavedDashboardIds.length>1)},unsavedDashboardIds.map(dashboardId=>{var _items$dashboardId;const title=dashboardId===DASHBOARD_PANELS_UNSAVED_ID?Object(dashboard_strings["u"])():(_items$dashboardId=items[dashboardId])===null||_items$dashboardId===void 0?void 0:_items$dashboardId.title;const redirectId=dashboardId===DASHBOARD_PANELS_UNSAVED_ID?undefined:dashboardId;return external_kbnSharedDeps_React_default.a.createElement(DashboardUnsavedItem,{key:dashboardId,id:dashboardId,title:title,onOpenClick:()=>onOpen(redirectId),onDiscardClick:()=>onDiscard(redirectId)})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))};var public_=__webpack_require__(6);var dashboard_constants=__webpack_require__(7);const getDashboardListItemLink=(application,kbnUrlStateStorage,useHash,id,timeRestore)=>{let url=application.getUrlForApp(dashboard_constants["a"].DASHBOARDS_ID,{path:`#${Object(dashboard_constants["b"])(id)}`});const globalStateInUrl=kbnUrlStateStorage.get(url_generator["c"])||{};if(timeRestore){delete globalStateInUrl.time;delete globalStateInUrl.refreshInterval}url=Object(public_["setStateToKbnUrl"])(url_generator["c"],globalStateInUrl,{useHash:useHash},url);return url};function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const DashboardListing=({title:title,redirectTo:redirectTo,initialFilter:initialFilter,kbnUrlStateStorage:kbnUrlStateStorage})=>{const{services:{core:core,data:data,savedObjects:savedObjects,savedDashboards:savedDashboards,savedObjectsClient:savedObjectsClient,savedObjectsTagging:savedObjectsTagging,dashboardCapabilities:dashboardCapabilities,dashboardPanelStorage:dashboardPanelStorage,chrome:{setBreadcrumbs:setBreadcrumbs}}}=Object(kibana_react["g"])();const[unsavedDashboardIds,setUnsavedDashboardIds]=Object(external_kbnSharedDeps_React_["useState"])(dashboardPanelStorage.getDashboardIdsWithUnsavedChanges());Object(external_kbnSharedDeps_React_["useEffect"])(()=>{setBreadcrumbs([{text:Object(dashboard_strings["q"])()}])},[setBreadcrumbs]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const{stop:stopSyncingQueryServiceStateWithUrl}=Object(services_data["syncQueryStateWithUrl"])(data.query,kbnUrlStateStorage);if(title){attemptLoadDashboardByTitle(title,savedObjectsClient).then(result=>{if(!result)return;redirectTo({destination:"dashboard",id:result.id,useReplace:true})})}return()=>{stopSyncingQueryServiceStateWithUrl()}},[title,savedObjectsClient,redirectTo,data.query,kbnUrlStateStorage]);const hideWriteControls=dashboardCapabilities.hideWriteControls;const listingLimit=savedObjects.settings.getListingLimit();const defaultFilter=title?`"${title}"`:"";const tableColumns=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getTableColumns(core.application,kbnUrlStateStorage,core.uiSettings.get("state:storeInSessionStorage"),savedObjectsTagging),[core.application,core.uiSettings,kbnUrlStateStorage,savedObjectsTagging]);const createItem=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{if(!dashboardPanelStorage.dashboardHasUnsavedEdits()){redirectTo({destination:"dashboard"})}else{confirmCreateWithUnsaved(core.overlays,()=>{dashboardPanelStorage.clearPanels();redirectTo({destination:"dashboard"})},()=>redirectTo({destination:"dashboard"}))}},[dashboardPanelStorage,redirectTo,core.overlays]);const noItemsFragment=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getNoItemsMessage(hideWriteControls,core.application,createItem),[createItem,core.application,hideWriteControls]);const fetchItems=Object(external_kbnSharedDeps_React_["useCallback"])(filter=>{let searchTerm=filter;let references;if(savedObjectsTagging){const parsed=savedObjectsTagging.ui.parseSearchQuery(filter,{useName:true});searchTerm=parsed.searchTerm;references=parsed.tagReferences}return savedDashboards.find(searchTerm,{size:listingLimit,hasReference:references})},[listingLimit,savedDashboards,savedObjectsTagging]);const deleteItems=Object(external_kbnSharedDeps_React_["useCallback"])(dashboards=>{dashboards.map(d=>dashboardPanelStorage.clearPanels(d.id));setUnsavedDashboardIds(dashboardPanelStorage.getDashboardIdsWithUnsavedChanges());return savedDashboards.delete(dashboards.map(d=>d.id))},[savedDashboards,dashboardPanelStorage]);const editItem=Object(external_kbnSharedDeps_React_["useCallback"])(({id:id})=>redirectTo({destination:"dashboard",id:id,editMode:true}),[redirectTo]);const searchFilters=Object(external_kbnSharedDeps_React_["useMemo"])(()=>savedObjectsTagging?[savedObjectsTagging.ui.getSearchBarFilter({useName:true})]:[],[savedObjectsTagging]);const{getEntityName:getEntityName,getTableCaption:getTableCaption,getTableListTitle:getTableListTitle,getEntityNamePlural:getEntityNamePlural}=dashboard_strings["i"];return external_kbnSharedDeps_React_default.a.createElement(kibana_react["c"],_extends({createItem:hideWriteControls?undefined:createItem,deleteItems:hideWriteControls?undefined:deleteItems,initialPageSize:savedObjects.settings.getPerPage(),editItem:hideWriteControls?undefined:editItem,initialFilter:initialFilter!==null&&initialFilter!==void 0?initialFilter:defaultFilter,toastNotifications:core.notifications.toasts,headingId:"dashboardListingHeading",findItems:fetchItems,rowHeader:"title",entityNamePlural:getEntityNamePlural(),tableListTitle:getTableListTitle(),tableCaption:getTableCaption(),entityName:getEntityName()},{noItemsFragment:noItemsFragment,searchFilters:searchFilters,listingLimit:listingLimit,tableColumns:tableColumns}),external_kbnSharedDeps_React_default.a.createElement(DashboardUnsavedListing,{redirectTo:redirectTo,unsavedDashboardIds:unsavedDashboardIds,refreshUnsavedDashboards:()=>setUnsavedDashboardIds(dashboardPanelStorage.getDashboardIdsWithUnsavedChanges())}))};const getTableColumns=(application,kbnUrlStateStorage,useHash,savedObjectsTagging)=>[{field:"title",name:dashboard_strings["i"].getTitleColumnName(),sortable:true,render:(field,record)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:getDashboardListItemLink(application,kbnUrlStateStorage,useHash,record.id,record.timeRestore),"data-test-subj":`dashboardListingTitleLink-${record.title.split(" ").join("-")}`},field)},{field:"description",name:dashboard_strings["i"].getDescriptionColumnName(),render:(field,record)=>external_kbnSharedDeps_React_default.a.createElement("span",null,record.description),sortable:true},...savedObjectsTagging?[savedObjectsTagging.ui.getTableColumnDefinition()]:[]];const getNoItemsMessage=(hideWriteControls,application,createItem)=>{if(hideWriteControls){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"dashboardApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",{id:"dashboardListingHeading"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.listing.noItemsMessage",defaultMessage:"Looks like you don't have any dashboards."}))}))}return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"dashboardApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",{id:"dashboardListingHeading"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.listing.createNewDashboard.title",defaultMessage:"Create your first dashboard"})),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.listing.createNewDashboard.combineDataViewFromKibanaAppDescription",defaultMessage:"You can combine data views from any Kibana app into one dashboard and see everything in one place."})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.listing.createNewDashboard.newToKibanaDescription",defaultMessage:"New to Kibana? {sampleDataInstallLink} to take a test drive.",values:{sampleDataInstallLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:()=>application.navigateToApp("home",{path:"#/tutorial_directory/sampleData"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.listing.createNewDashboard.sampleDataInstallLinkText",defaultMessage:"Install some sample data"}))}}))),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:createItem,fill:true,iconType:"plusInCircle","data-test-subj":"createDashboardPromptButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.listing.createNewDashboard.createButtonLabel",defaultMessage:"Create new dashboard"}))}))};var external_kbnSharedDeps_Rxjs_=__webpack_require__(48);var kibanaReact_public_=__webpack_require__(12);var external_kbnSharedDeps_Angular_=__webpack_require__(125);var external_kbnSharedDeps_Angular_default=__webpack_require__.n(external_kbnSharedDeps_Angular_);var useUnmount=__webpack_require__(200);var useUnmount_default=__webpack_require__.n(useUnmount);var services_embeddable=__webpack_require__(3);var saved_objects=__webpack_require__(25);const TopNavIds={SHARE:"share",OPTIONS:"options",QUICK_SAVE:"quickSave",SAVE:"save",EXIT_EDIT_MODE:"exitEditMode",ENTER_EDIT_MODE:"enterEditMode",CLONE:"clone",FULL_SCREEN:"fullScreenMode"};function getTopNavConfig(dashboardMode,actions,options){switch(dashboardMode){case services_embeddable["ViewMode"].VIEW:return options.hideWriteControls?[getFullScreenConfig(actions[TopNavIds.FULL_SCREEN]),getShareConfig(actions[TopNavIds.SHARE])]:[getFullScreenConfig(actions[TopNavIds.FULL_SCREEN]),getShareConfig(actions[TopNavIds.SHARE]),getCloneConfig(actions[TopNavIds.CLONE]),getEditConfig(actions[TopNavIds.ENTER_EDIT_MODE])];case services_embeddable["ViewMode"].EDIT:const disableButton=options.isSaveInProgress;const navItems=[getOptionsConfig(actions[TopNavIds.OPTIONS],disableButton),getShareConfig(actions[TopNavIds.SHARE],disableButton)];if(!options.isNewDashboard){navItems.push(getSaveConfig(actions[TopNavIds.SAVE],options.isNewDashboard,disableButton));navItems.push(getViewConfig(actions[TopNavIds.EXIT_EDIT_MODE],disableButton));navItems.push(getQuickSave(actions[TopNavIds.QUICK_SAVE],disableButton,options.isDirty))}else{navItems.push(getViewConfig(actions[TopNavIds.EXIT_EDIT_MODE],true));navItems.push(getSaveConfig(actions[TopNavIds.SAVE],options.isNewDashboard,disableButton))}return navItems;default:return[]}}function getSaveButtonLabel(){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.saveButtonAriaLabel",{defaultMessage:"save"})}function getSaveAsButtonLabel(){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.saveAsButtonAriaLabel",{defaultMessage:"save as"})}function getFullScreenConfig(action){return{id:"full-screen",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.fullScreenButtonAriaLabel",{defaultMessage:"full screen"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.fullScreenConfigDescription",{defaultMessage:"Full Screen Mode"}),testId:"dashboardFullScreenMode",run:action}}function getEditConfig(action){return{emphasize:true,id:"edit",iconType:"pencil",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.editButtonAriaLabel",{defaultMessage:"edit"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.editConfigDescription",{defaultMessage:"Switch to edit mode"}),testId:"dashboardEditMode",className:"eui-hideFor--s eui-hideFor--xs",run:action}}function getQuickSave(action,isLoading,isDirty){return{isLoading:isLoading,disableButton:!isDirty,id:"quick-save",iconType:"save",emphasize:true,label:getSaveButtonLabel(),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.saveConfigDescription",{defaultMessage:"Quick save your dashboard without any prompts"}),testId:"dashboardQuickSaveMenuItem",run:action}}function getSaveConfig(action,isNewDashboard=false,disableButton){return{disableButton:disableButton,id:"save",label:isNewDashboard?getSaveButtonLabel():getSaveAsButtonLabel(),iconType:isNewDashboard?"save":undefined,description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.saveAsConfigDescription",{defaultMessage:"Save as a new dashboard"}),testId:"dashboardSaveMenuItem",run:action,emphasize:isNewDashboard}}function getViewConfig(action,disableButton){return{disableButton:disableButton,id:"cancel",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.cancelButtonAriaLabel",{defaultMessage:"Switch to view mode"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.viewConfigDescription",{defaultMessage:"Switch to view-only mode"}),testId:"dashboardViewOnlyMode",run:action}}function getCloneConfig(action){return{id:"clone",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.cloneButtonAriaLabel",{defaultMessage:"clone"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.cloneConfigDescription",{defaultMessage:"Create a copy of your dashboard"}),testId:"dashboardClone",run:action}}function getShareConfig(action,disableButton){return{id:"share",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.shareButtonAriaLabel",{defaultMessage:"share"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.shareConfigDescription",{defaultMessage:"Share Dashboard"}),testId:"shareTopNavButton",run:action!==null&&action!==void 0?action:()=>{},disableButton:!action||disableButton}}function getOptionsConfig(action,disableButton){return{disableButton:disableButton,id:"options",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.optionsButtonAriaLabel",{defaultMessage:"options"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNave.optionsConfigDescription",{defaultMessage:"Options"}),testId:"dashboardOptionsButton",run:action}}function save_modal_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class save_modal_DashboardSaveModal extends external_kbnSharedDeps_React_default.a.Component{constructor(props){var _this$props$tags;super(props);save_modal_defineProperty(this,"state",{description:this.props.description,timeRestore:this.props.timeRestore,tags:(_this$props$tags=this.props.tags)!==null&&_this$props$tags!==void 0?_this$props$tags:[]});save_modal_defineProperty(this,"saveDashboard",({newTitle:newTitle,newCopyOnSave:newCopyOnSave,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate})=>{this.props.onSave({newTitle:newTitle,newDescription:this.state.description,newCopyOnSave:newCopyOnSave,newTimeRestore:this.state.timeRestore,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate,newTags:this.state.tags})});save_modal_defineProperty(this,"onDescriptionChange",event=>{this.setState({description:event.target.value})});save_modal_defineProperty(this,"onTimeRestoreChange",event=>{this.setState({timeRestore:event.target.checked})})}renderDashboardSaveOptions(){const{savedObjectsTagging:savedObjectsTagging}=this.props;const tagSelector=savedObjectsTagging?external_kbnSharedDeps_React_default.a.createElement(savedObjectsTagging.ui.components.SavedObjectSaveModalTagSelector,{initialSelection:this.state.tags,onTagsSelected:tags=>{this.setState({tags:tags})}}):undefined;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.topNav.saveModal.descriptionFormRowLabel",defaultMessage:"Description"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextArea"],{"data-test-subj":"dashboardDescription",value:this.state.description,onChange:this.onDescriptionChange})),tagSelector,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.topNav.saveModal.storeTimeWithDashboardFormRowHelpText",defaultMessage:"This changes the time filter to the currently selected time each time this dashboard is loaded."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{"data-test-subj":"storeTimeWithDashboard",checked:this.state.timeRestore,onChange:this.onTimeRestoreChange,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.topNav.saveModal.storeTimeWithDashboardFormRowLabel",defaultMessage:"Store time with dashboard"})})))}render(){return external_kbnSharedDeps_React_default.a.createElement(saved_objects["b"],{onSave:this.saveDashboard,onClose:this.props.onClose,title:this.props.title,showCopyOnSave:this.props.showCopyOnSave,objectType:"dashboard",options:this.renderDashboardSaveOptions(),showDescription:false})}}function clone_modal_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class clone_modal_DashboardCloneModal extends external_kbnSharedDeps_React_default.a.Component{constructor(props){super(props);clone_modal_defineProperty(this,"isMounted",false);clone_modal_defineProperty(this,"onTitleDuplicate",()=>{this.setState({isTitleDuplicateConfirmed:true,hasTitleDuplicate:true})});clone_modal_defineProperty(this,"cloneDashboard",async()=>{this.setState({isLoading:true});await this.props.onClone(this.state.newDashboardName,this.state.isTitleDuplicateConfirmed,this.onTitleDuplicate);if(this.isMounted){this.setState({isLoading:false})}});clone_modal_defineProperty(this,"onInputChange",event=>{this.setState({newDashboardName:event.target.value,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false})});clone_modal_defineProperty(this,"renderDuplicateTitleCallout",()=>{if(!this.state.hasTitleDuplicate){return}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{size:"s",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNav.cloneModal.dashboardExistsTitle",{defaultMessage:"A dashboard with the title {newDashboardName} already exists.",values:{newDashboardName:`'${this.state.newDashboardName}'`}}),color:"warning","data-test-subj":"titleDupicateWarnMsg"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.topNav.cloneModal.dashboardExistsDescription",defaultMessage:"Click {confirmClone} to clone the dashboard with the duplicate title.",values:{confirmClone:external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.topNav.cloneModal.confirmCloneDescription",defaultMessage:"Confirm Clone"}))}}))))});this.state={newDashboardName:props.title,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false,isLoading:false}}componentDidMount(){this.isMounted=true}componentWillUnmount(){this.isMounted=false}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],{"data-test-subj":"dashboardCloneModal",className:"dshCloneModal",onClose:this.props.onClose},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.topNav.cloneModal.cloneDashboardModalHeaderTitle",defaultMessage:"Clone dashboard"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.topNav.cloneModal.enterNewNameForDashboardDescription",defaultMessage:"Please enter a new name for your dashboard."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{autoFocus:true,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.cloneModal.cloneDashboardTitleAriaLabel",{defaultMessage:"Cloned Dashboard Title"}),"data-test-subj":"clonedDashboardTitle",value:this.state.newDashboardName,onChange:this.onInputChange,isInvalid:this.state.hasTitleDuplicate}),this.renderDuplicateTitleCallout()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"cloneCancelButton",onClick:this.props.onClose},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.topNav.cloneModal.cancelButtonLabel",defaultMessage:"Cancel"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,"data-test-subj":"cloneConfirmButton",onClick:this.cloneDashboard,isLoading:this.state.isLoading},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.topNav.cloneModal.confirmButtonLabel",defaultMessage:"Confirm Clone"}))))}}function showCloneModal(onClone,title){const container=document.createElement("div");const closeModal=()=>{external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(container);document.body.removeChild(container)};const onCloneConfirmed=async(newTitle,isTitleDuplicateConfirmed,onTitleDuplicate)=>{onClone(newTitle,isTitleDuplicateConfirmed,onTitleDuplicate).then(response=>{if(response.error||response.id){closeModal()}})};document.body.appendChild(container);const element=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement(clone_modal_DashboardCloneModal,{onClone:onCloneConfirmed,onClose:closeModal,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNav.showCloneModal.dashboardCopyTitle",{defaultMessage:"{title} Copy",values:{title:title}})}));external_kbnSharedDeps_ReactDom_default.a.render(element,container)}function options_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class options_OptionsMenu extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);options_defineProperty(this,"state",{useMargins:this.props.useMargins,hidePanelTitles:this.props.hidePanelTitles,syncColors:this.props.syncColors});options_defineProperty(this,"handleUseMarginsChange",evt=>{const isChecked=evt.target.checked;this.props.onUseMarginsChange(isChecked);this.setState({useMargins:isChecked})});options_defineProperty(this,"handleHidePanelTitlesChange",evt=>{const isChecked=!evt.target.checked;this.props.onHidePanelTitlesChange(isChecked);this.setState({hidePanelTitles:isChecked})});options_defineProperty(this,"handleSyncColorsChange",evt=>{const isChecked=evt.target.checked;this.props.onSyncColorsChange(isChecked);this.setState({syncColors:isChecked})})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],{"data-test-subj":"dashboardOptionsMenu"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNav.options.useMarginsBetweenPanelsSwitchLabel",{defaultMessage:"Use margins between panels"}),checked:this.state.useMargins,onChange:this.handleUseMarginsChange,"data-test-subj":"dashboardMarginsCheckbox"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNav.options.hideAllPanelTitlesSwitchLabel",{defaultMessage:"Show panel titles"}),checked:!this.state.hidePanelTitles,onChange:this.handleHidePanelTitlesChange,"data-test-subj":"dashboardPanelTitlesCheckbox"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.topNav.options.syncColorsBetweenPanelsSwitchLabel",{defaultMessage:"Sync color palettes across panels"}),checked:this.state.syncColors,onChange:this.handleSyncColorsChange,"data-test-subj":"dashboardSyncColorsCheckbox"})))}}let isOpen=false;const show_options_popover_container=document.createElement("div");const onClose=()=>{external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(show_options_popover_container);isOpen=false};function showOptionsPopover({anchorElement:anchorElement,useMargins:useMargins,onUseMarginsChange:onUseMarginsChange,hidePanelTitles:hidePanelTitles,onHidePanelTitlesChange:onHidePanelTitlesChange,syncColors:syncColors,onSyncColorsChange:onSyncColorsChange}){if(isOpen){onClose();return}isOpen=true;document.body.appendChild(show_options_popover_container);const element=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiWrappingPopover"],{id:"popover",button:anchorElement,isOpen:true,closePopover:onClose},external_kbnSharedDeps_React_default.a.createElement(options_OptionsMenu,{useMargins:useMargins,onUseMarginsChange:onUseMarginsChange,hidePanelTitles:hidePanelTitles,onHidePanelTitlesChange:onHidePanelTitlesChange,syncColors:syncColors,onSyncColorsChange:onSyncColorsChange})));external_kbnSharedDeps_ReactDom_default.a.render(element,show_options_popover_container)}const showFilterBarId="showFilterBar";const showPublicUrlSwitch=anonymousUserCapabilities=>{if(!anonymousUserCapabilities.dashboard)return false;const dashboard=anonymousUserCapabilities.dashboard;return!!dashboard.show};function ShowShareModal({share:share,anchorElement:anchorElement,savedDashboard:savedDashboard,dashboardCapabilities:dashboardCapabilities,dashboardStateManager:dashboardStateManager}){const EmbedUrlParamExtension=({setParamValue:setParamValue})=>{const[urlParamsSelectedMap,seturlParamsSelectedMap]=Object(external_kbnSharedDeps_React_["useState"])({showFilterBar:true});const checkboxes=[{id:dashboardUrlParams.showTopMenu,label:dashboard_strings["y"].getTopMenuCheckbox()},{id:dashboardUrlParams.showQueryInput,label:dashboard_strings["y"].getQueryCheckbox()},{id:dashboardUrlParams.showTimeFilter,label:dashboard_strings["y"].getTimeFilterCheckbox()},{id:showFilterBarId,label:dashboard_strings["y"].getFilterBarCheckbox()}];const handleChange=param=>{const newSelectedMap={...urlParamsSelectedMap,[param]:!urlParamsSelectedMap[param]};const urlParamValues={[dashboardUrlParams.showTopMenu]:newSelectedMap[dashboardUrlParams.showTopMenu],[dashboardUrlParams.showQueryInput]:newSelectedMap[dashboardUrlParams.showQueryInput],[dashboardUrlParams.showTimeFilter]:newSelectedMap[dashboardUrlParams.showTimeFilter],[dashboardUrlParams.hideFilterBar]:!newSelectedMap[showFilterBarId]};seturlParamsSelectedMap(newSelectedMap);setParamValue(urlParamValues)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckboxGroup"],{options:checkboxes,idToSelectedMap:urlParamsSelectedMap,onChange:handleChange,legend:{children:dashboard_strings["y"].getCheckboxLegend()},"data-test-subj":"embedUrlParamExtension"})};share.toggleShareContextMenu({anchorElement:anchorElement,allowEmbed:true,allowShortUrl:dashboardCapabilities.createShortUrl,shareableUrl:Object(kibana_utils["f"])("_a",dashboardStateManager.getAppState(),{useHash:false,storeInHashQuery:true},Object(kibana_utils["h"])(window.location.href)),objectId:savedDashboard.id,objectType:"dashboard",sharingData:{title:savedDashboard.title},isDirty:dashboardStateManager.getIsDirty(),embedUrlParamExtensions:[{paramName:"embed",component:EmbedUrlParamExtension}],showPublicUrlSwitch:showPublicUrlSwitch})}var panel_toolbar=__webpack_require__(191);const PanelToolbar=({onAddPanelClick:onAddPanelClick,onLibraryClick:onLibraryClick})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:"panelToolbar",id:"kbnDashboard__panelToolbar",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,size:"s",iconType:"plusInCircleFilled",onClick:onAddPanelClick,"data-test-subj":"dashboardAddNewPanelButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.panelToolbar.addPanelButtonLabel",{defaultMessage:"Create panel"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",color:"text",className:"panelToolbarButton",iconType:"folderOpen",onClick:onLibraryClick,"data-test-subj":"dashboardAddPanelButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.panelToolbar.libraryButtonLabel",{defaultMessage:"Add from library"}))));function DashboardTopNav({dashboardStateManager:dashboardStateManager,clearUnsavedChanges:clearUnsavedChanges,dashboardContainer:dashboardContainer,lastDashboardId:lastDashboardId,unsavedChanges:unsavedChanges,savedDashboard:savedDashboard,onQuerySubmit:onQuerySubmit,embedSettings:embedSettings,indexPatterns:indexPatterns,redirectTo:redirectTo,timefilter:timefilter,viewMode:viewMode}){const{core:core,data:data,share:share,chrome:chrome,embeddable:embeddable,navigation:navigation,uiSettings:uiSettings,setHeaderActionMenu:setHeaderActionMenu,savedObjectsTagging:savedObjectsTagging,dashboardCapabilities:dashboardCapabilities,dashboardPanelStorage:dashboardPanelStorage,allowByValueEmbeddables:allowByValueEmbeddables}=Object(kibana_react["g"])().services;const[state,setState]=Object(external_kbnSharedDeps_React_["useState"])({chromeIsVisible:false});const[isSaveInProgress,setIsSaveInProgress]=Object(external_kbnSharedDeps_React_["useState"])(false);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const visibleSubscription=chrome.getIsVisible$().subscribe(chromeIsVisible=>{setState(s=>({...s,chromeIsVisible:chromeIsVisible}))});const{id:id,title:title,getFullEditPath:getFullEditPath}=savedDashboard;if(id||allowByValueEmbeddables){chrome.recentlyAccessed.add(getFullEditPath(dashboardStateManager.getIsEditMode()),title||Object(dashboard_strings["u"])(),id||DASHBOARD_PANELS_UNSAVED_ID)}return()=>{visibleSubscription.unsubscribe()}},[chrome,allowByValueEmbeddables,dashboardStateManager,savedDashboard]);const addFromLibrary=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{if(!Object(services_embeddable["isErrorEmbeddable"])(dashboardContainer)){setState(s=>({...s,addPanelOverlay:Object(services_embeddable["openAddPanelFlyout"])({embeddable:dashboardContainer,getAllFactories:embeddable.getEmbeddableFactories,getFactory:embeddable.getEmbeddableFactory,notifications:core.notifications,overlays:core.overlays,SavedObjectFinder:Object(saved_objects["c"])(core.savedObjects,uiSettings)})}))}},[embeddable.getEmbeddableFactories,embeddable.getEmbeddableFactory,dashboardContainer,core.notifications,core.savedObjects,core.overlays,uiSettings]);const createNew=Object(external_kbnSharedDeps_React_["useCallback"])(async()=>{const type="visualization";const factory=embeddable.getEmbeddableFactory(type);if(!factory){throw new services_embeddable["EmbeddableFactoryNotFoundError"](type)}await factory.create({},dashboardContainer)},[dashboardContainer,embeddable]);const clearAddPanel=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{if(state.addPanelOverlay){state.addPanelOverlay.close();setState(s=>({...s,addPanelOverlay:undefined}))}},[state.addPanelOverlay]);const onChangeViewMode=Object(external_kbnSharedDeps_React_["useCallback"])(newMode=>{clearAddPanel();const isPageRefresh=newMode===dashboardStateManager.getViewMode();const isLeavingEditMode=!isPageRefresh&&newMode===services_embeddable["ViewMode"].VIEW;const willLoseChanges=isLeavingEditMode&&dashboardStateManager.getIsDirty(timefilter);function switchViewMode(){dashboardStateManager.switchViewMode(newMode);if(savedDashboard!==null&&savedDashboard!==void 0&&savedDashboard.id&&allowByValueEmbeddables){const{getFullEditPath:getFullEditPath,title:title,id:id}=savedDashboard;chrome.recentlyAccessed.add(getFullEditPath(newMode===services_embeddable["ViewMode"].EDIT),title,id)}}if(!willLoseChanges){switchViewMode();return}function discardChanges(){dashboardStateManager.resetState();dashboardStateManager.clearUnsavedPanels();if(dashboardStateManager.getIsTimeSavedWithDashboard()){dashboardStateManager.syncTimefilterWithDashboardTime(timefilter);dashboardStateManager.syncTimefilterWithDashboardRefreshInterval(timefilter)}dashboardStateManager.switchViewMode(services_embeddable["ViewMode"].VIEW)}confirmDiscardOrKeepUnsavedChanges(core.overlays).then(selection=>{if(selection==="discard"){discardChanges()}if(selection!=="cancel"){switchViewMode()}})},[timefilter,core.overlays,clearAddPanel,savedDashboard,dashboardStateManager,allowByValueEmbeddables,chrome.recentlyAccessed]);const save=Object(external_kbnSharedDeps_React_["useCallback"])(async saveOptions=>{setIsSaveInProgress(true);return saveDashboard(external_kbnSharedDeps_Angular_default.a.toJson,timefilter,dashboardStateManager,saveOptions).then((function(id){if(id){core.notifications.toasts.addSuccess({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.dashboardWasSavedSuccessMessage",{defaultMessage:`Dashboard '{dashTitle}' was saved`,values:{dashTitle:dashboardStateManager.savedDashboard.title}}),"data-test-subj":"saveDashboardSuccess"});dashboardPanelStorage.clearPanels(lastDashboardId);if(id!==lastDashboardId){redirectTo({id:id,destination:"dashboard",useReplace:true})}else{dashboardStateManager.resetState();chrome.docTitle.change(dashboardStateManager.savedDashboard.lastSavedTitle)}}setIsSaveInProgress(false);return{id:id}})).catch(error=>{var _core$notifications;(_core$notifications=core.notifications)===null||_core$notifications===void 0?void 0:_core$notifications.toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.dashboardWasNotSavedDangerMessage",{defaultMessage:`Dashboard '{dashTitle}' was not saved. Error: {errorMessage}`,values:{dashTitle:dashboardStateManager.savedDashboard.title,errorMessage:error.message}}),"data-test-subj":"saveDashboardFailure"});return{error:error}})},[core.notifications.toasts,dashboardStateManager,dashboardPanelStorage,lastDashboardId,chrome.docTitle,redirectTo,timefilter]);const runSave=Object(external_kbnSharedDeps_React_["useCallback"])(async()=>{const currentTitle=dashboardStateManager.getTitle();const currentDescription=dashboardStateManager.getDescription();const currentTimeRestore=dashboardStateManager.getTimeRestore();let currentTags=[];if(savedObjectsTagging){const dashboard=dashboardStateManager.savedDashboard;if(savedObjectsTagging.ui.hasTagDecoration(dashboard)){currentTags=dashboard.getTags()}}const onSave=({newTitle:newTitle,newDescription:newDescription,newCopyOnSave:newCopyOnSave,newTimeRestore:newTimeRestore,onTitleDuplicate:onTitleDuplicate,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,newTags:newTags})=>{dashboardStateManager.setTitle(newTitle);dashboardStateManager.setDescription(newDescription);dashboardStateManager.savedDashboard.copyOnSave=newCopyOnSave;dashboardStateManager.setTimeRestore(newTimeRestore);if(savedObjectsTagging&&newTags){dashboardStateManager.setTags(newTags)}const saveOptions={confirmOverwrite:false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate};return save(saveOptions).then(response=>{if(!response.id){dashboardStateManager.setTitle(currentTitle);dashboardStateManager.setDescription(currentDescription);dashboardStateManager.setTimeRestore(currentTimeRestore);if(savedObjectsTagging){dashboardStateManager.setTags(currentTags)}}return response})};const dashboardSaveModal=external_kbnSharedDeps_React_default.a.createElement(save_modal_DashboardSaveModal,{onSave:onSave,onClose:()=>{},title:currentTitle,description:currentDescription,tags:currentTags,savedObjectsTagging:savedObjectsTagging,timeRestore:currentTimeRestore,showCopyOnSave:lastDashboardId?true:false});clearAddPanel();Object(saved_objects["d"])(dashboardSaveModal,core.i18n.Context)},[save,clearAddPanel,lastDashboardId,core.i18n.Context,savedObjectsTagging,dashboardStateManager]);const runQuickSave=Object(external_kbnSharedDeps_React_["useCallback"])(async()=>{const currentTitle=dashboardStateManager.getTitle();const currentDescription=dashboardStateManager.getDescription();const currentTimeRestore=dashboardStateManager.getTimeRestore();let currentTags=[];if(savedObjectsTagging){const dashboard=dashboardStateManager.savedDashboard;if(savedObjectsTagging.ui.hasTagDecoration(dashboard)){currentTags=dashboard.getTags()}}setIsSaveInProgress(true);save({}).then(response=>{if(!response.id){dashboardStateManager.setTitle(currentTitle);dashboardStateManager.setDescription(currentDescription);dashboardStateManager.setTimeRestore(currentTimeRestore);if(savedObjectsTagging){dashboardStateManager.setTags(currentTags)}}else{clearUnsavedChanges()}setIsSaveInProgress(false);return response})},[save,savedObjectsTagging,dashboardStateManager,clearUnsavedChanges]);const runClone=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{const currentTitle=dashboardStateManager.getTitle();const onClone=async(newTitle,isTitleDuplicateConfirmed,onTitleDuplicate)=>{dashboardStateManager.savedDashboard.copyOnSave=true;dashboardStateManager.setTitle(newTitle);const saveOptions={confirmOverwrite:false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate};return save(saveOptions).then(response=>{if(response.error){dashboardStateManager.setTitle(currentTitle)}return response})};showCloneModal(onClone,currentTitle)},[dashboardStateManager,save]);const dashboardTopNavActions=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{const actions={[TopNavIds.FULL_SCREEN]:()=>{dashboardStateManager.setFullScreenMode(true)},[TopNavIds.EXIT_EDIT_MODE]:()=>onChangeViewMode(services_embeddable["ViewMode"].VIEW),[TopNavIds.ENTER_EDIT_MODE]:()=>onChangeViewMode(services_embeddable["ViewMode"].EDIT),[TopNavIds.SAVE]:runSave,[TopNavIds.QUICK_SAVE]:runQuickSave,[TopNavIds.CLONE]:runClone,[TopNavIds.OPTIONS]:anchorElement=>{showOptionsPopover({anchorElement:anchorElement,useMargins:dashboardStateManager.getUseMargins(),onUseMarginsChange:isChecked=>{dashboardStateManager.setUseMargins(isChecked)},syncColors:dashboardStateManager.getSyncColors(),onSyncColorsChange:isChecked=>{dashboardStateManager.setSyncColors(isChecked)},hidePanelTitles:dashboardStateManager.getHidePanelTitles(),onHidePanelTitlesChange:isChecked=>{dashboardStateManager.setHidePanelTitles(isChecked)}})}};if(share){actions[TopNavIds.SHARE]=anchorElement=>ShowShareModal({share:share,anchorElement:anchorElement,savedDashboard:savedDashboard,dashboardStateManager:dashboardStateManager,dashboardCapabilities:dashboardCapabilities})}return actions},[dashboardCapabilities,dashboardStateManager,onChangeViewMode,savedDashboard,runClone,runSave,runQuickSave,share]);useUnmount_default()(()=>{clearAddPanel()});const getNavBarProps=()=>{const shouldShowNavBarComponent=forceShow=>(forceShow||state.chromeIsVisible)&&!dashboardStateManager.getFullScreenMode();const shouldShowFilterBar=forceHide=>!forceHide&&(data.query.filterManager.getFilters().length>0||!dashboardStateManager.getFullScreenMode());const isFullScreenMode=dashboardStateManager.getFullScreenMode();const screenTitle=dashboardStateManager.getTitle();const showTopNavMenu=shouldShowNavBarComponent(Boolean(embedSettings===null||embedSettings===void 0?void 0:embedSettings.forceShowTopNavMenu));const showQueryInput=shouldShowNavBarComponent(Boolean(embedSettings===null||embedSettings===void 0?void 0:embedSettings.forceShowQueryInput));const showDatePicker=shouldShowNavBarComponent(Boolean(embedSettings===null||embedSettings===void 0?void 0:embedSettings.forceShowDatePicker));const showQueryBar=showQueryInput||showDatePicker;const showFilterBar=shouldShowFilterBar(Boolean(embedSettings===null||embedSettings===void 0?void 0:embedSettings.forceHideFilterBar));const showSearchBar=showQueryBar||showFilterBar;const topNav=getTopNavConfig(viewMode,dashboardTopNavActions,{hideWriteControls:dashboardCapabilities.hideWriteControls,isNewDashboard:!savedDashboard.id,isDirty:dashboardStateManager.getIsDirty(timefilter),isSaveInProgress:isSaveInProgress});const badges=unsavedChanges?[{"data-test-subj":"dashboardUnsavedChangesBadge",badgeText:dashboard_strings["z"].getUnsavedChangedBadgeText(),color:"secondary"}]:undefined;return{badges:badges,appName:"dashboard",config:showTopNavMenu?topNav:undefined,className:isFullScreenMode?"kbnTopNavMenu-isFullScreen":undefined,screenTitle:screenTitle,showTopNavMenu:showTopNavMenu,showSearchBar:showSearchBar,showQueryBar:showQueryBar,showQueryInput:showQueryInput,showDatePicker:showDatePicker,showFilterBar:showFilterBar,setMenuMountPoint:embedSettings?undefined:setHeaderActionMenu,indexPatterns:indexPatterns,showSaveQuery:dashboardCapabilities.saveQuery,useDefaultBehaviors:true,onQuerySubmit:onQuerySubmit,onSavedQueryUpdated:savedQuery=>{const allFilters=data.query.filterManager.getFilters();data.query.filterManager.setFilters(allFilters);dashboardStateManager.applyFilters(savedQuery.attributes.query,allFilters);if(savedQuery.attributes.timefilter){timefilter.setTime({from:savedQuery.attributes.timefilter.from,to:savedQuery.attributes.timefilter.to});if(savedQuery.attributes.timefilter.refreshInterval){timefilter.setRefreshInterval(savedQuery.attributes.timefilter.refreshInterval)}}setState(s=>({...s,savedQuery:savedQuery}))},savedQuery:state.savedQuery,savedQueryId:dashboardStateManager.getSavedQueryId(),onSavedQueryIdChange:newId=>dashboardStateManager.setSavedQueryId(newId)}};const{TopNavMenu:TopNavMenu}=navigation.ui;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(TopNavMenu,getNavBarProps()),viewMode!==services_embeddable["ViewMode"].VIEW?external_kbnSharedDeps_React_default.a.createElement(PanelToolbar,{onAddPanelClick:createNew,onLibraryClick:addFromLibrary}):null)}var fast_deep_equal=__webpack_require__(202);var fast_deep_equal_default=__webpack_require__.n(fast_deep_equal);var embeddable_saved_object_converters=__webpack_require__(29);const getChangesFromAppStateForContainerState=({dashboardContainer:dashboardContainer,appStateDashboardInput:appStateDashboardInput})=>{if(!dashboardContainer||Object(services_embeddable["isErrorEmbeddable"])(dashboardContainer)){return appStateDashboardInput}const containerInput=dashboardContainer.getInput();const differences={};if(!services_data["esFilters"].compareFilters(containerInput.filters,appStateDashboardInput.filters,services_data["esFilters"].COMPARE_ALL_OPTIONS)){differences.filters=appStateDashboardInput.filters}Object.keys(external_kbnSharedDeps_Lodash_default.a.omit(containerInput,["filters","searchSessionId","lastReloadRequestTime","switchViewMode"])).forEach(key=>{const containerValue=containerInput[key];const appStateValue=appStateDashboardInput[key];if(!external_kbnSharedDeps_Lodash_default.a.isEqual(containerValue,appStateValue)){differences[key]=appStateValue}});if(appStateDashboardInput.lastReloadRequestTime&&containerInput.lastReloadRequestTime!==appStateDashboardInput.lastReloadRequestTime){differences.lastReloadRequestTime=appStateDashboardInput.lastReloadRequestTime}return Object.values(differences).length===0?undefined:external_kbnSharedDeps_Lodash_default.a.cloneDeep(differences)};const getDashboardContainerInput=({query:query,searchSessionId:searchSessionId,incomingEmbeddable:incomingEmbeddable,isEmbeddedExternally:isEmbeddedExternally,lastReloadRequestTime:lastReloadRequestTime,dashboardStateManager:dashboardStateManager,dashboardCapabilities:dashboardCapabilities})=>{const embeddablesMap={};dashboardStateManager.getPanels().forEach(panel=>{embeddablesMap[panel.panelIndex]=Object(embeddable_saved_object_converters["b"])(panel)});if(incomingEmbeddable!==null&&incomingEmbeddable!==void 0&&incomingEmbeddable.embeddableId&&embeddablesMap[incomingEmbeddable.embeddableId]){const originalPanelState=embeddablesMap[incomingEmbeddable.embeddableId];embeddablesMap[incomingEmbeddable.embeddableId]={gridData:originalPanelState.gridData,type:incomingEmbeddable.type,explicitInput:{...originalPanelState.explicitInput,...incomingEmbeddable.input,id:incomingEmbeddable.embeddableId}}}return{refreshConfig:query.timefilter.timefilter.getRefreshInterval(),hidePanelTitles:dashboardStateManager.getHidePanelTitles(),isFullScreenMode:dashboardStateManager.getFullScreenMode(),expandedPanelId:dashboardStateManager.getExpandedPanelId(),description:dashboardStateManager.getDescription(),id:dashboardStateManager.savedDashboard.id||"",useMargins:dashboardStateManager.getUseMargins(),syncColors:dashboardStateManager.getSyncColors(),viewMode:dashboardStateManager.getViewMode(),filters:query.filterManager.getFilters(),query:dashboardStateManager.getQuery(),title:dashboardStateManager.getTitle(),panels:embeddablesMap,lastReloadRequestTime:lastReloadRequestTime,dashboardCapabilities:dashboardCapabilities,isEmbeddedExternally:isEmbeddedExternally,searchSessionId:searchSessionId,timeRange:{...external_kbnSharedDeps_Lodash_default.a.cloneDeep(query.timefilter.timefilter.getTime())}}};const getInputSubscription=({dashboardContainer:dashboardContainer,dashboardStateManager:dashboardStateManager,filterManager:filterManager})=>dashboardContainer.getInput$().subscribe(()=>{if(!services_data["esFilters"].compareFilters(dashboardContainer.getInput().filters,filterManager.getFilters(),services_data["esFilters"].COMPARE_ALL_OPTIONS)){filterManager.addFilters(external_kbnSharedDeps_Lodash_default.a.cloneDeep(dashboardContainer.getInput().filters));dashboardStateManager.applyFilters(dashboardStateManager.getQuery(),dashboardContainer.getInput().filters)}dashboardStateManager.handleDashboardContainerChanges(dashboardContainer)});const getOutputSubscription=({dashboardContainer:dashboardContainer,indexPatterns:indexPatterns,onUpdateIndexPatterns:onUpdateIndexPatterns})=>{const updateIndexPatternsOperator=Object(external_kbnSharedDeps_Rxjs_["pipe"])(Object(external_kbnSharedDeps_RxjsOperators_["filter"])(container=>!!container&&!Object(services_embeddable["isErrorEmbeddable"])(container)),Object(external_kbnSharedDeps_RxjsOperators_["map"])(container=>{let panelIndexPatterns=[];Object.values(container.getChildIds()).forEach(id=>{const embeddableInstance=container.getChild(id);if(Object(services_embeddable["isErrorEmbeddable"])(embeddableInstance))return;const embeddableIndexPatterns=embeddableInstance.getOutput().indexPatterns;if(!embeddableIndexPatterns)return;panelIndexPatterns.push(...embeddableIndexPatterns)});panelIndexPatterns=Object(external_kbnSharedDeps_Lodash_["uniqBy"])(panelIndexPatterns,"id");return panelIndexPatterns}),Object(external_kbnSharedDeps_RxjsOperators_["distinctUntilChanged"])((a,b)=>fast_deep_equal_default()(a.map(ip=>ip.id),b.map(ip=>ip.id))),Object(external_kbnSharedDeps_RxjsOperators_["switchMap"])(panelIndexPatterns=>new external_kbnSharedDeps_Rxjs_["Observable"](observer=>{if(panelIndexPatterns&&panelIndexPatterns.length>0){if(observer.closed)return;onUpdateIndexPatterns(panelIndexPatterns);observer.complete()}else{indexPatterns.getDefault().then(defaultIndexPattern=>{if(observer.closed)return;onUpdateIndexPatterns([defaultIndexPattern]);observer.complete()})}})));return Object(external_kbnSharedDeps_Rxjs_["merge"])(dashboardContainer.getOutput$(),dashboardContainer.getOutput$().pipe(Object(external_kbnSharedDeps_RxjsOperators_["map"])(()=>dashboardContainer.getChildIds()),Object(external_kbnSharedDeps_RxjsOperators_["distinctUntilChanged"])(fast_deep_equal_default.a),Object(external_kbnSharedDeps_RxjsOperators_["switchMap"])(newChildIds=>Object(external_kbnSharedDeps_Rxjs_["merge"])(...newChildIds.map(childId=>dashboardContainer.getChild(childId).getOutput$()))))).pipe(Object(external_kbnSharedDeps_RxjsOperators_["mapTo"])(dashboardContainer),Object(external_kbnSharedDeps_RxjsOperators_["startWith"])(dashboardContainer),updateIndexPatternsOperator).subscribe()};const getFiltersSubscription=({query:query,dashboardStateManager:dashboardStateManager})=>Object(external_kbnSharedDeps_Rxjs_["merge"])(query.filterManager.getUpdates$(),query.queryString.getUpdates$()).pipe(Object(external_kbnSharedDeps_RxjsOperators_["debounceTime"])(100)).subscribe(()=>{dashboardStateManager.applyFilters(query.queryString.getQuery(),query.filterManager.getFilters())});const getSearchSessionIdFromURL=history=>Object(kibana_utils["e"])(history.location)[dashboard_constants["a"].SEARCH_SESSION_ID];var public_0=__webpack_require__(33);const useSavedDashboard=(savedDashboardId,history)=>{const{data:data,core:core,chrome:chrome,savedDashboards:savedDashboards}=Object(kibana_react["g"])().services;const[savedDashboard,setSavedDashboard]=Object(external_kbnSharedDeps_React_["useState"])(null);const{indexPatterns:indexPatterns}=data;const{recentlyAccessed:recentlyAccessedPaths,docTitle:docTitle}=chrome;const{toasts:toasts}=core.notifications;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{(async function loadSavedDashboard(){if(savedDashboardId==="create"){history.replace({...history.location,pathname:public_0["DashboardConstants"].CREATE_NEW_DASHBOARD_URL});toasts.addWarning(Object(dashboard_strings["p"])());return}await indexPatterns.ensureDefaultIndexPattern();try{const dashboard=await savedDashboards.get(savedDashboardId);docTitle.change(dashboard.title||Object(dashboard_strings["u"])());setSavedDashboard(dashboard)}catch(error){toasts.addDanger(error.message);history.push(public_0["DashboardConstants"].LANDING_PAGE_PATH)}})();return()=>setSavedDashboard(null)},[toasts,docTitle,history,indexPatterns,recentlyAccessedPaths,savedDashboardId,savedDashboards]);return savedDashboard};var public_application_0=__webpack_require__(5);const useDashboardContainer=({history:history,timeFilter:timeFilter,setUnsavedChanges:setUnsavedChanges,getIncomingEmbeddable:getIncomingEmbeddable,dashboardStateManager:dashboardStateManager,isEmbeddedExternally:isEmbeddedExternally})=>{const{dashboardCapabilities:dashboardCapabilities,data:data,embeddable:embeddable,scopedHistory:scopedHistory}=Object(kibana_react["g"])().services;const{query:query}=data;const{session:searchSession}=data.search;const[dashboardContainer,setDashboardContainer]=Object(external_kbnSharedDeps_React_["useState"])(null);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!dashboardStateManager){return}const dashboardFactory=embeddable.getEmbeddableFactory(public_application_0["DASHBOARD_CONTAINER_TYPE"]);if(!dashboardFactory){throw new services_embeddable["EmbeddableFactoryNotFoundError"]("dashboard app requires dashboard embeddable factory")}const searchSessionIdFromURL=getSearchSessionIdFromURL(history);if(searchSessionIdFromURL){searchSession.restore(searchSessionIdFromURL)}const incomingEmbeddable=getIncomingEmbeddable(true);let canceled=false;let pendingContainer;(async function createContainer(){pendingContainer=await dashboardFactory.create(getDashboardContainerInput({isEmbeddedExternally:Boolean(isEmbeddedExternally),dashboardCapabilities:dashboardCapabilities,dashboardStateManager:dashboardStateManager,incomingEmbeddable:incomingEmbeddable,query:query,searchSessionId:searchSessionIdFromURL!==null&&searchSessionIdFromURL!==void 0?searchSessionIdFromURL:searchSession.start()}));if(canceled){try{var _pendingContainer;(_pendingContainer=pendingContainer)===null||_pendingContainer===void 0?void 0:_pendingContainer.destroy();pendingContainer=null}catch(e){console.warn(e)}return}if(!pendingContainer||Object(services_embeddable["isErrorEmbeddable"])(pendingContainer)){return}pendingContainer.switchViewMode=newViewMode=>dashboardStateManager.switchViewMode(newViewMode);if(incomingEmbeddable&&(!(incomingEmbeddable!==null&&incomingEmbeddable!==void 0&&incomingEmbeddable.embeddableId)||incomingEmbeddable.embeddableId&&!pendingContainer.getInput().panels[incomingEmbeddable.embeddableId])){pendingContainer.addNewEmbeddable(incomingEmbeddable.type,incomingEmbeddable.input)}setDashboardContainer(pendingContainer);setUnsavedChanges===null||setUnsavedChanges===void 0?void 0:setUnsavedChanges(dashboardStateManager.getIsDirty(data.query.timefilter.timefilter))})();return()=>{canceled=true;try{var _pendingContainer2;(_pendingContainer2=pendingContainer)===null||_pendingContainer2===void 0?void 0:_pendingContainer2.destroy()}catch(e){console.warn(e)}setDashboardContainer(null)}},[data.query.timefilter.timefilter,dashboardCapabilities,dashboardStateManager,getIncomingEmbeddable,isEmbeddedExternally,setUnsavedChanges,searchSession,scopedHistory,timeFilter,embeddable,history,query]);return dashboardContainer};const useDashboardBreadcrumbs=(dashboardStateManager,redirectTo)=>{const{data:data,core:core,chrome:chrome}=Object(kibana_react["g"])().services;const{setBreadcrumbs:setBreadcrumbs}=chrome;const{timefilter:timefilter}=data.query.timefilter;const{openConfirm:openConfirm}=core.overlays;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!dashboardStateManager){return}setBreadcrumbs([{text:Object(dashboard_strings["q"])(),"data-test-subj":"dashboardListingBreadcrumb",onClick:()=>{redirectTo({destination:"listing"})}},{text:Object(dashboard_strings["s"])(dashboardStateManager.getTitle(),dashboardStateManager.getViewMode(),dashboardStateManager.isNew())}])},[dashboardStateManager,timefilter,openConfirm,redirectTo,setBreadcrumbs])};function migrateLegacyQuery(query){if(!Object(external_kbnSharedDeps_Lodash_["has"])(query,"language")){return{query:query,language:"lucene"}}return query}function dashboard_state_manager_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class dashboard_state_manager_DashboardStateManager{get appState(){return this.stateContainer.get()}get appState$(){return this.stateContainer.state$}constructor({toasts:toasts,history:history,kibanaVersion:kibanaVersion,savedDashboard:savedDashboard,usageCollection:usageCollection,hideWriteControls:hideWriteControls,kbnUrlStateStorage:kbnUrlStateStorage,hasPendingEmbeddable:hasPendingEmbeddable,dashboardPanelStorage:dashboardPanelStorage,hasTaggingCapabilities:hasTaggingCapabilities,allowByValueEmbeddables:allowByValueEmbeddables}){dashboard_state_manager_defineProperty(this,"savedDashboard",void 0);dashboard_state_manager_defineProperty(this,"lastSavedDashboardFilters",void 0);dashboard_state_manager_defineProperty(this,"stateDefaults",void 0);dashboard_state_manager_defineProperty(this,"toasts",void 0);dashboard_state_manager_defineProperty(this,"hideWriteControls",void 0);dashboard_state_manager_defineProperty(this,"kibanaVersion",void 0);dashboard_state_manager_defineProperty(this,"isDirty",void 0);dashboard_state_manager_defineProperty(this,"changeListeners",void 0);dashboard_state_manager_defineProperty(this,"hasShownMigrationToast",false);dashboard_state_manager_defineProperty(this,"stateContainer",void 0);dashboard_state_manager_defineProperty(this,"stateContainerChangeSub",void 0);dashboard_state_manager_defineProperty(this,"dashboardPanelStorage",void 0);dashboard_state_manager_defineProperty(this,"kbnUrlStateStorage",void 0);dashboard_state_manager_defineProperty(this,"stateSyncRef",void 0);dashboard_state_manager_defineProperty(this,"allowByValueEmbeddables",void 0);dashboard_state_manager_defineProperty(this,"usageCollection",void 0);dashboard_state_manager_defineProperty(this,"hasTaggingCapabilities",void 0);dashboard_state_manager_defineProperty(this,"hasPendingEmbeddable",void 0);this.toasts=toasts;this.kibanaVersion=kibanaVersion;this.savedDashboard=savedDashboard;this.hideWriteControls=hideWriteControls;this.usageCollection=usageCollection;this.hasTaggingCapabilities=hasTaggingCapabilities;this.allowByValueEmbeddables=allowByValueEmbeddables;this.hasPendingEmbeddable=hasPendingEmbeddable;this.dashboardPanelStorage=dashboardPanelStorage;this.kbnUrlStateStorage=kbnUrlStateStorage;const viewMode=this.getInitialViewMode();this.stateDefaults=migrateAppState(getAppStateDefaults(viewMode,this.savedDashboard,this.hasTaggingCapabilities),kibanaVersion,usageCollection);const initialUrlState=this.kbnUrlStateStorage.get(url_generator["d"]);const initialState=migrateAppState({...this.stateDefaults,...this.getUnsavedPanelState(),...initialUrlState},kibanaVersion,usageCollection);this.isDirty=false;if(initialUrlState!==null&&initialUrlState!==void 0&&initialUrlState.panels&&!external_kbnSharedDeps_Lodash_default.a.isEqual(initialUrlState.panels,this.stateDefaults.panels)){this.isDirty=true;this.setUnsavedPanels(initialState.panels)}this.stateContainer=Object(kibana_utils["d"])(initialState,{set:state=>(prop,value)=>({...state,[prop]:value}),setOption:state=>(option,value)=>({...state,options:{...state.options,[option]:value}})});this.lastSavedDashboardFilters=this.getFilterState();this.changeListeners=[];this.stateContainerChangeSub=this.stateContainer.state$.subscribe(()=>{this.isDirty=this.checkIsDirty();this.changeListeners.forEach(listener=>listener({dirty:this.isDirty}))});this.stateSyncRef=Object(kibana_utils["g"])({storageKey:url_generator["d"],stateContainer:{...this.stateContainer,get:()=>this.toUrlState(this.stateContainer.get()),set:stateFromUrl=>{if(stateFromUrl){const currentDashboardIdInUrl=getDashboardIdFromUrl(history.location.pathname);if(currentDashboardIdInUrl!==this.savedDashboard.id)return;if(this.appState.viewMode!==stateFromUrl.viewMode){this.switchViewMode(stateFromUrl.viewMode)}this.stateContainer.set({...this.stateDefaults,...this.getUnsavedPanelState(),...stateFromUrl})}else{}}},stateStorage:this.kbnUrlStateStorage})}startStateSyncing(){this.saveState({replace:true});this.stateSyncRef.start()}registerChangeListener(callback){this.changeListeners.push(callback)}handleDashboardContainerChanges(dashboardContainer){let dirty=false;let dirtyBecauseOfInitialStateMigration=false;const savedDashboardPanelMap={};const input=dashboardContainer.getInput();this.getPanels().forEach(savedDashboardPanel=>{if(input.panels[savedDashboardPanel.panelIndex]!==undefined){savedDashboardPanelMap[savedDashboardPanel.panelIndex]=savedDashboardPanel}else{dirty=true}});const convertedPanelStateMap={};let expandedPanelValid=false;Object.values(input.panels).forEach(panelState=>{if(savedDashboardPanelMap[panelState.explicitInput.id]===undefined){dirty=true}if(panelState.explicitInput.id===input.expandedPanelId){expandedPanelValid=true}convertedPanelStateMap[panelState.explicitInput.id]=Object(embeddable_saved_object_converters["a"])(panelState,this.kibanaVersion);if(!external_kbnSharedDeps_Lodash_default.a.isEqual(convertedPanelStateMap[panelState.explicitInput.id],savedDashboardPanelMap[panelState.explicitInput.id])){var _savedDashboardPanelM,_convertedPanelStateM;dirty=true;const oldVersion=(_savedDashboardPanelM=savedDashboardPanelMap[panelState.explicitInput.id])===null||_savedDashboardPanelM===void 0?void 0:_savedDashboardPanelM.version;const newVersion=(_convertedPanelStateM=convertedPanelStateMap[panelState.explicitInput.id])===null||_convertedPanelStateM===void 0?void 0:_convertedPanelStateM.version;if(oldVersion&&newVersion&&oldVersion!==newVersion){dirtyBecauseOfInitialStateMigration=true}}});if(dirty){this.stateContainer.transitions.set("panels",Object.values(convertedPanelStateMap));if(dirtyBecauseOfInitialStateMigration){if(this.getIsEditMode()&&!this.hasShownMigrationToast){this.toasts.addSuccess(Object(dashboard_strings["t"])());this.hasShownMigrationToast=true}this.saveState({replace:true})}if(!this.isDirty&&this.getIsEditMode()){this.clearUnsavedPanels()}else{this.setUnsavedPanels(this.getPanels())}}if(input.isFullScreenMode!==this.getFullScreenMode()){this.setFullScreenMode(input.isFullScreenMode)}if(expandedPanelValid&&input.expandedPanelId!==this.getExpandedPanelId()){this.setExpandedPanelId(input.expandedPanelId)}else if(!expandedPanelValid&&this.getExpandedPanelId()){this.setExpandedPanelId(undefined)}if(!external_kbnSharedDeps_Lodash_default.a.isEqual(input.query,this.getQuery())){this.setQuery(input.query)}this.changeListeners.forEach(listener=>listener({dirty:dirty}))}getFullScreenMode(){return this.appState.fullScreenMode}setFullScreenMode(fullScreenMode){this.stateContainer.transitions.set("fullScreenMode",fullScreenMode)}getExpandedPanelId(){return this.appState.expandedPanelId}setExpandedPanelId(expandedPanelId){this.stateContainer.transitions.set("expandedPanelId",expandedPanelId)}setFilters(filters){this.stateContainer.transitions.set("filters",filters)}resetState(){this.savedDashboard.title=this.savedDashboard.lastSavedTitle;const currentViewMode=this.stateContainer.get().viewMode;this.stateDefaults=migrateAppState(getAppStateDefaults(currentViewMode,this.savedDashboard,this.hasTaggingCapabilities),this.kibanaVersion,this.usageCollection);this.stateDefaults.query=this.lastSavedDashboardFilters.query;this.stateDefaults.filters=[...this.getLastSavedFilterBars()];this.isDirty=false;this.stateContainer.set(this.stateDefaults)}getFilterState(){return{timeTo:this.savedDashboard.timeTo,timeFrom:this.savedDashboard.timeFrom,filterBars:this.savedDashboard.getFilters(),query:this.savedDashboard.getQuery()}}getTitle(){return this.appState.title}isSaved(){return!!this.savedDashboard.id}isNew(){return!this.isSaved()}getDescription(){return this.appState.description}getTags(){return this.appState.tags}setDescription(description){this.stateContainer.transitions.set("description",description)}setTitle(title){this.savedDashboard.title=title;this.stateContainer.transitions.set("title",title)}setTags(tags){this.stateContainer.transitions.set("tags",tags)}getAppState(){return this.stateContainer.get()}getQuery(){return migrateLegacyQuery(this.stateContainer.get().query)}getSavedQueryId(){return this.stateContainer.get().savedQuery}setSavedQueryId(id){this.stateContainer.transitions.set("savedQuery",id)}getUseMargins(){return this.appState.options.useMargins===undefined?false:this.appState.options.useMargins}setUseMargins(useMargins){this.stateContainer.transitions.setOption("useMargins",useMargins)}getSyncColors(){return this.appState.options.syncColors===undefined?true:this.appState.options.syncColors}setSyncColors(syncColors){this.stateContainer.transitions.setOption("syncColors",syncColors)}getHidePanelTitles(){return this.appState.options.hidePanelTitles}setHidePanelTitles(hidePanelTitles){this.stateContainer.transitions.setOption("hidePanelTitles",hidePanelTitles)}getTimeRestore(){return this.appState.timeRestore}setTimeRestore(timeRestore){this.stateContainer.transitions.set("timeRestore",timeRestore)}getIsTimeSavedWithDashboard(){return this.savedDashboard.timeRestore}getLastSavedFilterBars(){return this.lastSavedDashboardFilters.filterBars}getLastSavedQuery(){return this.lastSavedDashboardFilters.query}getQueryChanged(){const currentQuery=this.appState.query;const lastSavedQuery=this.getLastSavedQuery();const query=migrateLegacyQuery(currentQuery);const isLegacyStringQuery=external_kbnSharedDeps_Lodash_default.a.isString(lastSavedQuery)&&external_kbnSharedDeps_Lodash_default.a.isPlainObject(currentQuery)&&external_kbnSharedDeps_Lodash_default.a.has(currentQuery,"query");if(isLegacyStringQuery){return lastSavedQuery!==query.query}return!external_kbnSharedDeps_Lodash_default.a.isEqual(currentQuery,lastSavedQuery)}getFilterBarChanged(){return!external_kbnSharedDeps_Lodash_default.a.isEqual(filter_utils_FilterUtils.cleanFiltersForComparison(this.appState.filters),filter_utils_FilterUtils.cleanFiltersForComparison(this.getLastSavedFilterBars()))}getTimeChanged(timeFilter){return!filter_utils_FilterUtils.areTimesEqual(this.lastSavedDashboardFilters.timeFrom,timeFilter.getTime().from)||!filter_utils_FilterUtils.areTimesEqual(this.lastSavedDashboardFilters.timeTo,timeFilter.getTime().to)}getViewMode(){if(this.hideWriteControls){return services_embeddable["ViewMode"].VIEW}if(this.stateContainer){return this.appState.viewMode}return this.getInitialViewMode()}getIsViewMode(){return this.getViewMode()===services_embeddable["ViewMode"].VIEW}getIsEditMode(){return this.getViewMode()===services_embeddable["ViewMode"].EDIT}getIsDirty(timeFilter){const hasTimeFilterChanged=timeFilter?this.getFiltersChanged(timeFilter):false;return this.hasUnsavedPanelState()||this.getIsEditMode()&&(this.isDirty||hasTimeFilterChanged)}getPanels(){return this.appState.panels}updatePanel(panelIndex,panelAttributes){const foundPanel=this.getPanels().find(panel=>panel.panelIndex===panelIndex);Object.assign(foundPanel,panelAttributes);return foundPanel}getChangedFilterTypes(timeFilter){const changedFilters=[];if(this.getFilterBarChanged()){changedFilters.push("filter")}if(this.getQueryChanged()){changedFilters.push("query")}if(this.savedDashboard.timeRestore&&this.getTimeChanged(timeFilter)){changedFilters.push("time range")}return changedFilters}getFiltersChanged(timeFilter){return this.getChangedFilterTypes(timeFilter).length>0}syncTimefilterWithDashboardTime(timeFilter){if(!this.getIsTimeSavedWithDashboard()){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.stateManager.timeNotSavedWithDashboardErrorMessage",{defaultMessage:"The time is not saved with this dashboard so should not be synced."}))}if(this.savedDashboard.timeFrom&&this.savedDashboard.timeTo){timeFilter.setTime({from:this.savedDashboard.timeFrom,to:this.savedDashboard.timeTo})}}syncTimefilterWithDashboardRefreshInterval(timeFilter){if(!this.getIsTimeSavedWithDashboard()){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.stateManager.timeNotSavedWithDashboardErrorMessage",{defaultMessage:"The time is not saved with this dashboard so should not be synced."}))}if(this.savedDashboard.refreshInterval){timeFilter.setRefreshInterval(this.savedDashboard.refreshInterval)}}saveState({replace:replace}){this.kbnUrlStateStorage.set(url_generator["d"],this.toUrlState(this.stateContainer.get()));return!!this.kbnUrlStateStorage.kbnUrlControls.flush(replace)}setQuery(query){this.stateContainer.transitions.set("query",query)}applyFilters(query,filters){this.savedDashboard.searchSource.setField("query",query);this.savedDashboard.searchSource.setField("filter",filters);this.stateContainer.transitions.set("query",query)}switchViewMode(newMode){this.stateContainer.transitions.set("viewMode",newMode);this.restorePanels()}destroy(){this.stateContainerChangeSub.unsubscribe();this.savedDashboard.destroy();if(this.stateSyncRef){this.stateSyncRef.stop()}}restorePanels(){var _unsavedState$panels;const unsavedState=this.getUnsavedPanelState();if(!unsavedState||((_unsavedState$panels=unsavedState.panels)===null||_unsavedState$panels===void 0?void 0:_unsavedState$panels.length)===0){return}this.stateContainer.set(migrateAppState({...this.stateDefaults,...unsavedState,...this.kbnUrlStateStorage.get(url_generator["d"]),viewMode:this.getViewMode()},this.kibanaVersion,this.usageCollection))}clearUnsavedPanels(){var _this$savedDashboard;if(!this.allowByValueEmbeddables||!this.dashboardPanelStorage){return}this.dashboardPanelStorage.clearPanels((_this$savedDashboard=this.savedDashboard)===null||_this$savedDashboard===void 0?void 0:_this$savedDashboard.id)}hasUnsavedPanelState(){var _this$dashboardPanelS,_this$savedDashboard2;const panels=(_this$dashboardPanelS=this.dashboardPanelStorage)===null||_this$dashboardPanelS===void 0?void 0:_this$dashboardPanelS.getPanels((_this$savedDashboard2=this.savedDashboard)===null||_this$savedDashboard2===void 0?void 0:_this$savedDashboard2.id);return panels!==undefined&&panels.length>0}getUnsavedPanelState(){var _this$savedDashboard3;if(!this.allowByValueEmbeddables||this.getIsViewMode()||!this.dashboardPanelStorage){return{}}const panels=this.dashboardPanelStorage.getPanels((_this$savedDashboard3=this.savedDashboard)===null||_this$savedDashboard3===void 0?void 0:_this$savedDashboard3.id);return panels?{panels:panels}:{}}setUnsavedPanels(newPanels){var _this$savedDashboard4;if(!this.allowByValueEmbeddables||this.getIsViewMode()||!this.getIsDirty()||!this.dashboardPanelStorage){return}this.dashboardPanelStorage.setPanels((_this$savedDashboard4=this.savedDashboard)===null||_this$savedDashboard4===void 0?void 0:_this$savedDashboard4.id,newPanels)}toUrlState(state){if(this.getIsEditMode()&&!this.allowByValueEmbeddables){return state}const{panels:panels,...stateWithoutPanels}=state;return stateWithoutPanels}getInitialViewMode(){var _this$kbnUrlStateStor;if(this.hideWriteControls){return services_embeddable["ViewMode"].VIEW}const viewModeFromUrl=(_this$kbnUrlStateStor=this.kbnUrlStateStorage.get(url_generator["d"]))===null||_this$kbnUrlStateStor===void 0?void 0:_this$kbnUrlStateStor.viewMode;if(viewModeFromUrl){return viewModeFromUrl}return!this.savedDashboard.id||this.hasPendingEmbeddable()?services_embeddable["ViewMode"].EDIT:services_embeddable["ViewMode"].VIEW}checkIsDirty(){const propsToIgnore=["viewMode","filters","query"];const initial=external_kbnSharedDeps_Lodash_default.a.omit(this.stateDefaults,propsToIgnore);const current=external_kbnSharedDeps_Lodash_default.a.omit(this.stateContainer.get(),propsToIgnore);return!external_kbnSharedDeps_Lodash_default.a.isEqual(initial,current)}}function defaultTaggingGuard(_obj){return false}const useDashboardStateManager=(savedDashboard,history,getIncomingEmbeddable)=>{const{data:dataPlugin,core:core,uiSettings:uiSettings,usageCollection:usageCollection,initializerContext:initializerContext,savedObjectsTagging:savedObjectsTagging,dashboardCapabilities:dashboardCapabilities,dashboardPanelStorage:dashboardPanelStorage,allowByValueEmbeddables:allowByValueEmbeddables}=Object(kibana_react["g"])().services;const{query:queryService}=dataPlugin;const{session:searchSession}=dataPlugin.search;const{filterManager:filterManager,queryString:queryStringManager}=queryService;const{timefilter:timefilter}=queryService.timefilter;const{toasts:toasts}=core.notifications;const{hideWriteControls:hideWriteControls}=dashboardCapabilities;const{version:kibanaVersion}=initializerContext.env.packageInfo;const[dashboardStateManager,setDashboardStateManager]=Object(external_kbnSharedDeps_React_["useState"])(null);const[viewMode,setViewMode]=Object(external_kbnSharedDeps_React_["useState"])(null);const hasTaggingCapabilities=(savedObjectsTagging===null||savedObjectsTagging===void 0?void 0:savedObjectsTagging.ui.hasTagDecoration)||defaultTaggingGuard;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!savedDashboard){return}const kbnUrlStateStorage=Object(kibana_utils["b"])({history:history,useHash:uiSettings.get("state:storeInSessionStorage"),...Object(kibana_utils["i"])(toasts)});const stateManager=new dashboard_state_manager_DashboardStateManager({hasPendingEmbeddable:()=>Boolean(getIncomingEmbeddable()),toasts:core.notifications.toasts,hasTaggingCapabilities:hasTaggingCapabilities,dashboardPanelStorage:dashboardPanelStorage,hideWriteControls:hideWriteControls,history:history,kbnUrlStateStorage:kbnUrlStateStorage,kibanaVersion:kibanaVersion,savedDashboard:savedDashboard,usageCollection:usageCollection,allowByValueEmbeddables:allowByValueEmbeddables});filterManager.setAppFilters(external_kbnSharedDeps_Lodash_default.a.cloneDeep(stateManager.appState.filters));queryStringManager.setQuery(migrateLegacyQuery(stateManager.appState.query));const stopSyncingAppFilters=Object(services_data["connectToQueryState"])(queryService,{set:({filters:filters,query:query})=>{stateManager.setFilters(filters||[]);stateManager.setQuery(query||queryStringManager.getDefaultQuery())},get:()=>({filters:stateManager.appState.filters,query:stateManager.getQuery()}),state$:stateManager.appState$.pipe(Object(external_kbnSharedDeps_RxjsOperators_["map"])(appState=>({filters:appState.filters,query:queryStringManager.formatQuery(appState.query)})))},{filters:services_data["esFilters"].FilterStateStore.APP_STATE,query:true});stateManager.applyFilters(stateManager.getQuery()||queryStringManager.getDefaultQuery(),filterManager.getFilters());if(stateManager.getIsTimeSavedWithDashboard()){const initialGlobalStateInUrl=kbnUrlStateStorage.get("_g");if(!(initialGlobalStateInUrl!==null&&initialGlobalStateInUrl!==void 0&&initialGlobalStateInUrl.time)){stateManager.syncTimefilterWithDashboardTime(timefilter)}if(!(initialGlobalStateInUrl!==null&&initialGlobalStateInUrl!==void 0&&initialGlobalStateInUrl.refreshInterval)){stateManager.syncTimefilterWithDashboardRefreshInterval(timefilter)}}const{stop:stopSyncingQueryServiceStateWithUrl}=Object(services_data["syncQueryStateWithUrl"])(queryService,kbnUrlStateStorage);stateManager.startStateSyncing();const dashboardTitle=Object(dashboard_strings["s"])(stateManager.getTitle(),stateManager.getViewMode(),stateManager.isNew());searchSession.enableStorage(createSessionRestorationDataProvider({data:dataPlugin,getDashboardTitle:()=>dashboardTitle,getDashboardId:()=>(savedDashboard===null||savedDashboard===void 0?void 0:savedDashboard.id)||"",getAppState:()=>stateManager.getAppState()}),{isDisabled:()=>dashboardCapabilities.storeSearchSession?{disabled:false}:{disabled:true,reasonText:services_data["noSearchSessionStorageCapabilityMessage"]}});setDashboardStateManager(stateManager);setViewMode(stateManager.getViewMode());return()=>{stateManager===null||stateManager===void 0?void 0:stateManager.destroy();setDashboardStateManager(null);stopSyncingAppFilters();stopSyncingQueryServiceStateWithUrl()}},[dataPlugin,filterManager,hasTaggingCapabilities,initializerContext.config,dashboardPanelStorage,getIncomingEmbeddable,hideWriteControls,history,kibanaVersion,queryService,queryStringManager,savedDashboard,searchSession,timefilter,toasts,uiSettings,usageCollection,allowByValueEmbeddables,core.notifications.toasts,dashboardCapabilities.storeSearchSession]);return{dashboardStateManager:dashboardStateManager,viewMode:viewMode,setViewMode:setViewMode}};function dashboard_app_extends(){dashboard_app_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return dashboard_app_extends.apply(this,arguments)}function DashboardApp({savedDashboardId:savedDashboardId,embedSettings:embedSettings,redirectTo:redirectTo,history:history}){const{data:data,core:core,onAppLeave:onAppLeave,uiSettings:uiSettings,embeddable:embeddable,dashboardCapabilities:dashboardCapabilities,indexPatterns:indexPatternService}=Object(kibanaReact_public_["useKibana"])().services;const triggerRefresh$=Object(external_kbnSharedDeps_React_["useMemo"])(()=>new external_kbnSharedDeps_Rxjs_["Subject"],[]);const[indexPatterns,setIndexPatterns]=Object(external_kbnSharedDeps_React_["useState"])([]);const savedDashboard=useSavedDashboard(savedDashboardId,history);const getIncomingEmbeddable=Object(external_kbnSharedDeps_React_["useCallback"])(removeAfterFetch=>embeddable.getStateTransfer().getIncomingEmbeddablePackage(dashboard_constants["a"].DASHBOARDS_ID,removeAfterFetch),[embeddable]);const{dashboardStateManager:dashboardStateManager,viewMode:viewMode,setViewMode:setViewMode}=useDashboardStateManager(savedDashboard,history,getIncomingEmbeddable);const[unsavedChanges,setUnsavedChanges]=Object(external_kbnSharedDeps_React_["useState"])(false);const dashboardContainer=useDashboardContainer({timeFilter:data.query.timefilter.timefilter,dashboardStateManager:dashboardStateManager,getIncomingEmbeddable:getIncomingEmbeddable,setUnsavedChanges:setUnsavedChanges,history:history});const searchSessionIdQuery$=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object(public_["createQueryParamObservable"])(history,dashboard_constants["a"].SEARCH_SESSION_ID),[history]);const refreshDashboardContainer=Object(external_kbnSharedDeps_React_["useCallback"])(force=>{if(!dashboardContainer||!dashboardStateManager){return}const changes=getChangesFromAppStateForContainerState({dashboardContainer:dashboardContainer,appStateDashboardInput:getDashboardContainerInput({isEmbeddedExternally:Boolean(embedSettings),dashboardStateManager:dashboardStateManager,lastReloadRequestTime:force?Date.now():undefined,dashboardCapabilities:dashboardCapabilities,query:data.query})});if(changes){const noRefetchKeys=["viewMode","title","description","expandedPanelId","useMargins","isEmbeddedExternally","isFullScreenMode"];const shouldRefetch=Object.keys(changes).some(changeKey=>!noRefetchKeys.includes(changeKey));const newSearchSessionId=(()=>{var _searchSessionIdFromU;if(!shouldRefetch)return;let searchSessionIdFromURL=getSearchSessionIdFromURL(history);if(searchSessionIdFromURL){if(data.search.session.isRestore()&&data.search.session.isCurrentSession(searchSessionIdFromURL)){dashboardStateManager.kbnUrlStateStorage.kbnUrlControls.updateAsync(nextUrl=>{if(nextUrl.includes(dashboard_constants["a"].SEARCH_SESSION_ID)){return Object(public_["replaceUrlHashQuery"])(nextUrl,query=>{delete query[dashboard_constants["a"].SEARCH_SESSION_ID];return query})}return nextUrl});searchSessionIdFromURL=undefined}else{data.search.session.restore(searchSessionIdFromURL)}}return(_searchSessionIdFromU=searchSessionIdFromURL)!==null&&_searchSessionIdFromU!==void 0?_searchSessionIdFromU:data.search.session.start()})();if(changes.viewMode){setViewMode(changes.viewMode)}dashboardContainer.updateInput({...changes,...newSearchSessionId&&{searchSessionId:newSearchSessionId}})}},[history,data.query,setViewMode,embedSettings,dashboardContainer,data.search.session,dashboardCapabilities,dashboardStateManager]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!dashboardStateManager||!dashboardContainer){return}const timeFilter=data.query.timefilter.timefilter;const subscriptions=new external_kbnSharedDeps_Rxjs_["Subscription"];subscriptions.add(getInputSubscription({dashboardContainer:dashboardContainer,dashboardStateManager:dashboardStateManager,filterManager:data.query.filterManager}));subscriptions.add(getOutputSubscription({dashboardContainer:dashboardContainer,indexPatterns:indexPatternService,onUpdateIndexPatterns:newIndexPatterns=>setIndexPatterns(newIndexPatterns)}));subscriptions.add(getFiltersSubscription({query:data.query,dashboardStateManager:dashboardStateManager}));subscriptions.add(Object(external_kbnSharedDeps_Rxjs_["merge"])(...[timeFilter.getRefreshIntervalUpdate$(),timeFilter.getTimeUpdate$()]).subscribe(()=>triggerRefresh$.next()));subscriptions.add(Object(external_kbnSharedDeps_Rxjs_["merge"])(data.query.timefilter.timefilter.getAutoRefreshFetch$(),searchSessionIdQuery$).subscribe(()=>{triggerRefresh$.next({force:true})}));dashboardStateManager.registerChangeListener(()=>{setUnsavedChanges(dashboardStateManager.getIsDirty(data.query.timefilter.timefilter));triggerRefresh$.next()});let forceRefresh=false;subscriptions.add(triggerRefresh$.pipe(Object(external_kbnSharedDeps_RxjsOperators_["tap"])(trigger=>{var _trigger$force;forceRefresh=forceRefresh||((_trigger$force=trigger===null||trigger===void 0?void 0:trigger.force)!==null&&_trigger$force!==void 0?_trigger$force:false)}),Object(external_kbnSharedDeps_RxjsOperators_["debounceTime"])(50)).subscribe(()=>{refreshDashboardContainer(forceRefresh);forceRefresh=false}));return()=>{subscriptions.unsubscribe()}},[core.http,uiSettings,data.query,dashboardContainer,data.search.session,indexPatternService,dashboardStateManager,searchSessionIdQuery$,triggerRefresh$,refreshDashboardContainer]);useDashboardBreadcrumbs(dashboardStateManager,redirectTo);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!dashboardStateManager||!dashboardContainer){return}onAppLeave(actions=>{if(dashboardStateManager!==null&&dashboardStateManager!==void 0&&dashboardStateManager.getIsDirty()&&!embeddable.getStateTransfer().isTransferInProgress){return actions.confirm(dashboard_strings["v"].getLeaveSubtitle(),dashboard_strings["v"].getLeaveTitle())}return actions.default()});return()=>{onAppLeave(actions=>actions.default())}},[dashboardStateManager,dashboardContainer,onAppLeave,embeddable]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>()=>{data.search.session.clear()},[data.search.session]);return external_kbnSharedDeps_React_default.a.createElement("div",{className:"app-container dshAppContainer"},savedDashboard&&dashboardStateManager&&dashboardContainer&&viewMode&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(DashboardTopNav,dashboard_app_extends({redirectTo:redirectTo,embedSettings:embedSettings,indexPatterns:indexPatterns,savedDashboard:savedDashboard,unsavedChanges:unsavedChanges,dashboardContainer:dashboardContainer,dashboardStateManager:dashboardStateManager},{viewMode:viewMode,lastDashboardId:savedDashboardId,clearUnsavedChanges:()=>setUnsavedChanges(false),timefilter:data.query.timefilter.timefilter,onQuerySubmit:(_payload,isUpdate)=>{if(isUpdate===false){triggerRefresh$.next({force:true})}}})),external_kbnSharedDeps_React_default.a.createElement("div",{className:"dashboardViewport"},external_kbnSharedDeps_React_default.a.createElement(services_embeddable["EmbeddableRenderer"],{embeddable:dashboardContainer}))))}let bannerId;const DashboardNoMatch=({history:history})=>{const{services:services}=Object(kibana_react["g"])();Object(external_kbnSharedDeps_React_["useEffect"])(()=>{services.restorePreviousUrl();const{navigated:navigated}=services.urlForwarding.navigateToLegacyKibanaUrl(history.location.pathname);if(!navigated){const bannerMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("dashboard.noMatchRoute.bannerTitleText",{defaultMessage:"Page not found"});bannerId=services.core.overlays.banners.replace(bannerId,Object(kibana_react["f"])(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"warning",iconType:"iInCircle",title:bannerMessage},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"dashboard.noMatchRoute.bannerText",defaultMessage:"Dashboard application doesn't recognize this route: {route}.",values:{route:history.location.pathname}})))));setTimeout(()=>{if(bannerId){services.core.overlays.banners.remove(bannerId)}},15e3);history.replace(public_0["DashboardConstants"].LANDING_PAGE_PATH)}},[services,history]);return null};const dashboardUrlParams={showTopMenu:"show-top-menu",showQueryInput:"show-query-input",showTimeFilter:"show-time-filter",hideFilterBar:"hide-filter-bar"};async function mountApp({core:core,element:element,onAppLeave:onAppLeave,appUnMounted:appUnMounted,scopedHistory:scopedHistory,usageCollection:usageCollection,initializerContext:initializerContext,restorePreviousUrl:restorePreviousUrl,setHeaderActionMenu:setHeaderActionMenu}){var _pluginsStart$spacesO,_await$spacesApi$acti,_coreStart$applicatio,_coreStart$applicatio2;const[coreStart,pluginsStart,dashboardStart]=await core.getStartServices();const{navigation:navigation,savedObjects:savedObjects,urlForwarding:urlForwarding,data:dataStart,share:shareStart,embeddable:embeddableStart,kibanaLegacy:{dashboardConfig:dashboardConfig},savedObjectsTaggingOss:savedObjectsTaggingOss}=pluginsStart;const spacesApi=(_pluginsStart$spacesO=pluginsStart.spacesOss)!==null&&_pluginsStart$spacesO!==void 0&&_pluginsStart$spacesO.isSpacesAvailable?pluginsStart.spacesOss:undefined;const activeSpaceId=spacesApi&&((_await$spacesApi$acti=await spacesApi.activeSpace$.pipe(Object(external_kbnSharedDeps_RxjsOperators_["first"])()).toPromise())===null||_await$spacesApi$acti===void 0?void 0:_await$spacesApi$acti.id);let globalEmbedSettings;const dashboardServices={navigation:navigation,onAppLeave:onAppLeave,savedObjects:savedObjects,urlForwarding:urlForwarding,usageCollection:usageCollection,core:coreStart,data:dataStart,share:shareStart,initializerContext:initializerContext,restorePreviousUrl:restorePreviousUrl,setHeaderActionMenu:setHeaderActionMenu,chrome:coreStart.chrome,embeddable:embeddableStart,uiSettings:coreStart.uiSettings,scopedHistory:()=>scopedHistory,indexPatterns:dataStart.indexPatterns,savedQueryService:dataStart.query.savedQueries,savedObjectsClient:coreStart.savedObjects.client,dashboardPanelStorage:new dashboard_panel_storage_DashboardPanelStorage(core.notifications.toasts,activeSpaceId||"default"),savedDashboards:dashboardStart.getSavedDashboardLoader(),savedObjectsTagging:savedObjectsTaggingOss===null||savedObjectsTaggingOss===void 0?void 0:savedObjectsTaggingOss.getTaggingApi(),allowByValueEmbeddables:initializerContext.config.get().allowByValueEmbeddables,dashboardCapabilities:{hideWriteControls:dashboardConfig.getHideWriteControls(),show:Boolean(coreStart.application.capabilities.dashboard.show),saveQuery:Boolean(coreStart.application.capabilities.dashboard.saveQuery),createNew:Boolean(coreStart.application.capabilities.dashboard.createNew),mapsCapabilities:{save:Boolean((_coreStart$applicatio=coreStart.application.capabilities.maps)===null||_coreStart$applicatio===void 0?void 0:_coreStart$applicatio.save)},createShortUrl:Boolean(coreStart.application.capabilities.dashboard.createShortUrl),visualizeCapabilities:{save:Boolean((_coreStart$applicatio2=coreStart.application.capabilities.visualize)===null||_coreStart$applicatio2===void 0?void 0:_coreStart$applicatio2.save)},storeSearchSession:Boolean(coreStart.application.capabilities.dashboard.storeSearchSession)}};const getUrlStateStorage=history=>Object(kibana_utils["b"])({history:history,useHash:coreStart.uiSettings.get("state:storeInSessionStorage"),...Object(kibana_utils["i"])(core.notifications.toasts)});const redirect=(routeProps,redirectTo)=>{const historyFunction=redirectTo.useReplace?routeProps.history.replace:routeProps.history.push;let destination;if(redirectTo.destination==="dashboard"){destination=redirectTo.id?Object(dashboard_constants["b"])(redirectTo.id,redirectTo.editMode):dashboard_constants["a"].CREATE_NEW_DASHBOARD_URL}else{destination=Object(dashboard_constants["c"])(redirectTo.filter)}historyFunction(destination)};const getDashboardEmbedSettings=routeParams=>({forceShowTopNavMenu:Boolean(routeParams[dashboardUrlParams.showTopMenu]),forceShowQueryInput:Boolean(routeParams[dashboardUrlParams.showQueryInput]),forceShowDatePicker:Boolean(routeParams[dashboardUrlParams.showTimeFilter]),forceHideFilterBar:Boolean(routeParams[dashboardUrlParams.hideFilterBar])});const renderDashboard=routeProps=>{const routeParams=Object(query_string["parse"])(routeProps.history.location.search);if(routeParams.embed&&!globalEmbedSettings){globalEmbedSettings=getDashboardEmbedSettings(routeParams)}return external_kbnSharedDeps_React_default.a.createElement(DashboardApp,{history:routeProps.history,embedSettings:globalEmbedSettings,savedDashboardId:routeProps.match.params.id,redirectTo:props=>redirect(routeProps,props)})};const renderListingPage=routeProps=>{coreStart.chrome.docTitle.change(Object(dashboard_strings["r"])());const routeParams=Object(query_string["parse"])(routeProps.history.location.search);const title=routeParams.title||undefined;const filter=routeParams.filter||undefined;return external_kbnSharedDeps_React_default.a.createElement(DashboardListing,{initialFilter:filter,title:title,kbnUrlStateStorage:getUrlStateStorage(routeProps.history),redirectTo:props=>redirect(routeProps,props)})};const renderNoMatch=routeProps=>external_kbnSharedDeps_React_default.a.createElement(DashboardNoMatch,{history:routeProps.history});await dataStart.indexPatterns.clearCache();const unlistenParentHistory=scopedHistory.listen(()=>{window.dispatchEvent(new HashChangeEvent("hashchange"))});const app=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement(kibana_react["b"],{services:dashboardServices},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["HashRouter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Switch"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:[dashboard_constants["a"].CREATE_NEW_DASHBOARD_URL,`${dashboard_constants["a"].VIEW_DASHBOARD_URL}/:id`],render:renderDashboard}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:dashboard_constants["a"].LANDING_PAGE_PATH,render:renderListingPage}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:"/"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Redirect"],{to:dashboard_constants["a"].LANDING_PAGE_PATH})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{render:renderNoMatch})))));addHelpMenuToAppChrome(dashboardServices.chrome,coreStart.docLinks);if(dashboardServices.dashboardCapabilities.hideWriteControls){coreStart.chrome.setBadge({text:dashboard_strings["j"].getText(),tooltip:dashboard_strings["j"].getTooltip(),iconType:"glasses"})}Object(external_kbnSharedDeps_ReactDom_["render"])(app,element);return()=>{dataStart.search.session.clear();unlistenParentHistory();Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(element);appUnMounted()}}}])]);