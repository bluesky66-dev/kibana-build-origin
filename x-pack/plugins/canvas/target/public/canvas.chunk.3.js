/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window["canvas_bundle_jsonpfunction"]=window["canvas_bundle_jsonpfunction"]||[]).push([[3],Array(210).concat([function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(217);exports.__esModule=true;var _Provider=_interopRequireDefault(__webpack_require__(287));exports.Provider=_Provider["default"];var _connectAdvanced=_interopRequireDefault(__webpack_require__(257));exports.connectAdvanced=_connectAdvanced["default"];var _Context=__webpack_require__(219);exports.ReactReduxContext=_Context.ReactReduxContext;var _connect=_interopRequireDefault(__webpack_require__(289));exports.connect=_connect["default"];var _useDispatch=__webpack_require__(296);exports.useDispatch=_useDispatch.useDispatch;exports.createDispatchHook=_useDispatch.createDispatchHook;var _useSelector=__webpack_require__(297);exports.useSelector=_useSelector.useSelector;exports.createSelectorHook=_useSelector.createSelectorHook;var _useStore=__webpack_require__(263);exports.useStore=_useStore.useStore;exports.createStoreHook=_useStore.createStoreHook;var _batch=__webpack_require__(256);var _reactBatchedUpdates=__webpack_require__(298);exports.batch=_reactBatchedUpdates.unstable_batchedUpdates;var _shallowEqual=_interopRequireDefault(__webpack_require__(259));exports.shallowEqual=_shallowEqual["default"];(0,_batch.setBatch)(_reactBatchedUpdates.unstable_batchedUpdates)},function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&btoa){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item,useSourceMap);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list};function cssWithMappingToString(item,useSourceMap){var content=item[1]||"";var cssMapping=item[3];if(!cssMapping){return content}if(useSourceMap&&typeof btoa==="function"){var sourceMapping=toComment(cssMapping);var sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));var data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"h",(function(){return useServices}));__webpack_require__.d(__webpack_exports__,"g",(function(){return useNotifyService}));__webpack_require__.d(__webpack_exports__,"i",(function(){return withServices}));__webpack_require__.d(__webpack_exports__,"a",(function(){return ServicesProvider}));__webpack_require__.d(__webpack_exports__,"e",(function(){return services}));__webpack_require__.d(__webpack_exports__,"f",(function(){return startServices}));__webpack_require__.d(__webpack_exports__,"c",(function(){return notifyService}));__webpack_require__.d(__webpack_exports__,"d",(function(){return platformService}));__webpack_require__.d(__webpack_exports__,"b",(function(){return expressionsService}));var external_kbnSharedDeps_Lodash_=__webpack_require__(4);var public_=__webpack_require__(205);const getToast=(err,opts={})=>{const errData=Object(external_kbnSharedDeps_Lodash_["get"])(err,"response")||err;const errMsg=Object(public_["formatMsg"])(errData);const{title:title,...rest}=opts;let text;if(title){text=errMsg}return{...rest,title:title||errMsg,text:text}};const notifyServiceFactory=(setup,start)=>{const toasts=start.notifications.toasts;return{error(err,opts){toasts.addDanger(getToast(err,opts))},warning(err,opts){toasts.addWarning(getToast(err,opts))},info(err,opts){toasts.add(getToast(err,opts))},success(err,opts){toasts.addSuccess(getToast(err,opts))}}};const platformServiceFactory=(_coreSetup,coreStart)=>({getBasePath:coreStart.http.basePath.get,getBasePathInterface:()=>coreStart.http.basePath,getElasticWebsiteUrl:()=>coreStart.docLinks.ELASTIC_WEBSITE_URL,getDocLinkVersion:()=>coreStart.docLinks.DOC_LINK_VERSION,getHasWriteAccess:()=>coreStart.application.capabilities.canvas.save,getUISetting:coreStart.uiSettings.get.bind(coreStart.uiSettings),setBreadcrumbs:coreStart.chrome.setBreadcrumbs,setRecentlyAccessed:coreStart.chrome.recentlyAccessed.add,setFullscreen:coreStart.chrome.setIsVisible,getSavedObjects:()=>coreStart.savedObjects,getSavedObjectsClient:()=>coreStart.savedObjects.client,getUISettings:()=>coreStart.uiSettings});var constants=__webpack_require__(7);var storage=__webpack_require__(50);const navLinkServiceFactory=(coreSetup,_coreStart,_setupPlugins,_startPlugins,appUpdater)=>({updatePath:path=>{appUpdater.next(()=>({defaultPath:`#${path}`}));Object(storage["b"])().set(`${constants["z"]}:${coreSetup.http.basePath.get()}`,path)}});const embeddablesServiceFactory=async(_coreSetup,_coreStart,_setupPlugins,startPlugins)=>({getEmbeddableFactories:startPlugins.embeddable.getEmbeddableFactories});var common_=__webpack_require__(13);const expressionsServiceFactory=async(coreSetup,coreStart,setupPlugins,startPlugins)=>{const{expressions:expressions,bfetch:bfetch}=setupPlugins;let cached=null;const loadServerFunctionWrappers=async()=>{if(!cached){cached=(async()=>{const serverFunctionList=await coreSetup.http.get(constants["c"]);const batchedFunction=bfetch.batchedFunction({url:constants["c"]});const{serialize:serialize}=Object(common_["serializeProvider"])(expressions.getTypes());Object.keys(serverFunctionList).forEach(functionName=>{if(expressions.getFunction(functionName)){return}const fn=()=>({...serverFunctionList[functionName],fn:(input,args)=>batchedFunction({functionName:functionName,args:args,context:serialize(input)})});expressions.registerFunction(fn)})})()}return cached};await loadServerFunctionWrappers();return setupPlugins.expressions.fork()};var external_kbnSharedDeps_React_=__webpack_require__(3);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);const defaultContextValue={embeddables:{},expressions:{},notify:{},platform:{},navLink:{}};const context=Object(external_kbnSharedDeps_React_["createContext"])(defaultContextValue);const useServices=()=>Object(external_kbnSharedDeps_React_["useContext"])(context);const usePlatformService=()=>useServices().platform;const useEmbeddablesService=()=>useServices().embeddables;const useExpressionsService=()=>useServices().expressions;const useNotifyService=()=>useServices().notify;const useNavLinkService=()=>useServices().navLink;const withServices=type=>{const EnhancedType=props=>Object(external_kbnSharedDeps_React_["createElement"])(type,{...props,services:useServices()});return EnhancedType};const ServicesProvider=({providers:providers={},children:children})=>{const specifiedProviders={...services,...providers};const value={embeddables:specifiedProviders.embeddables.getService(),expressions:specifiedProviders.expressions.getService(),notify:specifiedProviders.notify.getService(),platform:specifiedProviders.platform.getService(),navLink:specifiedProviders.navLink.getService()};return external_kbnSharedDeps_React_default.a.createElement(context.Provider,{value:value},children)};function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class CanvasServiceProvider{constructor(factory){_defineProperty(this,"factory",void 0);_defineProperty(this,"service",void 0);this.factory=factory}setService(service){this.service=service}async start(coreSetup,coreStart,canvasSetupPlugins,canvasStartPlugins,appUpdater){this.service=await this.factory(coreSetup,coreStart,canvasSetupPlugins,canvasStartPlugins,appUpdater)}getService(){if(!this.service){throw new Error("Service not ready")}return this.service}stop(){this.service=undefined}}const services={embeddables:new CanvasServiceProvider(embeddablesServiceFactory),expressions:new CanvasServiceProvider(expressionsServiceFactory),notify:new CanvasServiceProvider(notifyServiceFactory),platform:new CanvasServiceProvider(platformServiceFactory),navLink:new CanvasServiceProvider(navLinkServiceFactory)};const startServices=async(coreSetup,coreStart,canvasSetupPlugins,canvasStartPlugins,appUpdater)=>{const startPromises=Object.values(services).map(provider=>provider.start(coreSetup,coreStart,canvasSetupPlugins,canvasStartPlugins,appUpdater));await Promise.all(startPromises)};const stopServices=()=>{Object.values(services).forEach(provider=>provider.stop())};const{embeddables:embeddableService,notify:notifyService,platform:platformService,navLink:navLinkService,expressions:expressionsService}=services},,,function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var _combineActions=_interopRequireDefault(__webpack_require__(299));exports.combineActions=_combineActions.default;var _createAction=_interopRequireDefault(__webpack_require__(242));exports.createAction=_createAction.default;var _createActions=_interopRequireDefault(__webpack_require__(302));exports.createActions=_createActions.default;var _createCurriedAction=_interopRequireDefault(__webpack_require__(311));exports.createCurriedAction=_createCurriedAction.default;var _handleAction=_interopRequireDefault(__webpack_require__(272));exports.handleAction=_handleAction.default;var _handleActions=_interopRequireDefault(__webpack_require__(314));exports.handleActions=_handleActions.default;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=_interopRequireDefault},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getState}));__webpack_require__.d(__webpack_exports__,"c",(function(){return getValue}));__webpack_require__.d(__webpack_exports__,"a",(function(){return getError}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);var lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);function getState(resolvedArg){return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(resolvedArg,"state",null)}function getValue(resolvedArg){return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(resolvedArg,"value",null)}function getError(resolvedArg){if(getState(resolvedArg)!=="error"){return null}return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(resolvedArg,"error",null)}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(217);exports.__esModule=true;exports["default"]=exports.ReactReduxContext=void 0;var _react=_interopRequireDefault(__webpack_require__(3));var ReactReduxContext=_react["default"].createContext(null);exports.ReactReduxContext=ReactReduxContext;if(false){}var _default=ReactReduxContext;exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";var invariant=function(condition,format,a,b,c,d,e,f){if(false){}if(!condition){var error;if(format===undefined){error=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var args=[a,b,c,d,e,f];var argIndex=0;error=new Error(format.replace(/%s/g,(function(){return args[argIndex++]})));error.name="Invariant Violation"}error.framesToPop=1;throw error}};module.exports=invariant},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createStatefulPropHoc}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const getDisplayName=Comp=>Comp.displayName||Comp.name||"UnnamedComponent";function createStatefulPropHoc(fieldname,updater="updateValue"){return Comp=>{class WrappedControlledInput extends react__WEBPACK_IMPORTED_MODULE_0___default.a.PureComponent{constructor(props){super(props);_defineProperty(this,"handleChange",ev=>{if(ev.target){this.setState({value:ev.target.value})}else{this.setState({value:ev})}});this.state={value:props[fieldname]}}UNSAFE_componentWillReceiveProps(nextProps){this.setState({value:nextProps[fieldname]})}render(){const passedProps={...this.props,[fieldname]:this.state.value,[updater]:this.handleChange};return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Comp,passedProps)}}WrappedControlledInput.displayName=`statefulProp(${getDisplayName(Comp)})`;return WrappedControlledInput}}},function(module,exports,__webpack_require__){"use strict";module.exports={ShortcutManager:__webpack_require__(370),Shortcuts:__webpack_require__(375)}},,function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.ACTION_TYPE_DELIMITER=exports.DEFAULT_NAMESPACE=void 0;var DEFAULT_NAMESPACE="/";exports.DEFAULT_NAMESPACE=DEFAULT_NAMESPACE;var ACTION_TYPE_DELIMITER="||";exports.ACTION_TYPE_DELIMITER=ACTION_TYPE_DELIMITER},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){if(typeof value!=="object"||value===null)return false;var proto=value;while(Object.getPrototypeOf(proto)!==null){proto=Object.getPrototypeOf(proto)}return Object.getPrototypeOf(value)===proto};exports.default=_default},,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getFields}));__webpack_require__.d(__webpack_exports__,"c",(function(){return getIndices}));__webpack_require__.d(__webpack_exports__,"a",(function(){return getDefaultIndex}));var _common_lib_constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);var _common_lib_fetch__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(45);var _i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2);var _services__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(213);const{esService:strings}=_i18n__WEBPACK_IMPORTED_MODULE_2__["g"];const getApiPath=function(){const basePath=_services__WEBPACK_IMPORTED_MODULE_3__["d"].getService().getBasePath();return basePath+_common_lib_constants__WEBPACK_IMPORTED_MODULE_0__["a"]};const getSavedObjectsClient=function(){return _services__WEBPACK_IMPORTED_MODULE_3__["d"].getService().getSavedObjectsClient()};const getAdvancedSettings=function(){return _services__WEBPACK_IMPORTED_MODULE_3__["d"].getService().getUISettings()};const getFields=(index="_all")=>_common_lib_fetch__WEBPACK_IMPORTED_MODULE_1__["b"].get(`${getApiPath()}/es_fields?index=${index}`).then(({data:mapping})=>Object.keys(mapping).filter(field=>!field.startsWith("_")).sort()).catch(err=>_services__WEBPACK_IMPORTED_MODULE_3__["c"].getService().error(err,{title:strings.getFieldsFetchErrorMessage(index)}));const getIndices=()=>getSavedObjectsClient().find({type:"index-pattern",fields:["title"],searchFields:["title"],perPage:1e3}).then(resp=>resp.savedObjects.map(savedObject=>savedObject.attributes.title)).catch(err=>_services__WEBPACK_IMPORTED_MODULE_3__["c"].getService().error(err,{title:strings.getIndicesFetchErrorMessage()}));const getDefaultIndex=()=>{const defaultIndexId=getAdvancedSettings().get("defaultIndex");return defaultIndexId?getSavedObjectsClient().get("index-pattern",defaultIndexId).then(defaultIndex=>defaultIndex.attributes.title).catch(err=>_services__WEBPACK_IMPORTED_MODULE_3__["c"].getService().error(err,{title:strings.getDefaultIndexFetchErrorMessage()})):Promise.resolve("")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopDefault(ex){return ex&&typeof ex==="object"&&"default"in ex?ex["default"]:ex}var $$observable=_interopDefault(__webpack_require__(125));var randomString=function randomString(){return Math.random().toString(36).substring(7).split("").join(".")};var ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function PROBE_UNKNOWN_ACTION(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject(obj){if(typeof obj!=="object"||obj===null)return false;var proto=obj;while(Object.getPrototypeOf(proto)!==null){proto=Object.getPrototypeOf(proto)}return Object.getPrototypeOf(obj)===proto}function createStore(reducer,preloadedState,enhancer){var _ref2;if(typeof preloadedState==="function"&&typeof enhancer==="function"||typeof enhancer==="function"&&typeof arguments[3]==="function"){throw new Error("It looks like you are passing several store enhancers to "+"createStore(). This is not supported. Instead, compose them "+"together to a single function.")}if(typeof preloadedState==="function"&&typeof enhancer==="undefined"){enhancer=preloadedState;preloadedState=undefined}if(typeof enhancer!=="undefined"){if(typeof enhancer!=="function"){throw new Error("Expected the enhancer to be a function.")}return enhancer(createStore)(reducer,preloadedState)}if(typeof reducer!=="function"){throw new Error("Expected the reducer to be a function.")}var currentReducer=reducer;var currentState=preloadedState;var currentListeners=[];var nextListeners=currentListeners;var isDispatching=false;function ensureCanMutateNextListeners(){if(nextListeners===currentListeners){nextListeners=currentListeners.slice()}}function getState(){if(isDispatching){throw new Error("You may not call store.getState() while the reducer is executing. "+"The reducer has already received the state as an argument. "+"Pass it down from the top reducer instead of reading it from the store.")}return currentState}function subscribe(listener){if(typeof listener!=="function"){throw new Error("Expected the listener to be a function.")}if(isDispatching){throw new Error("You may not call store.subscribe() while the reducer is executing. "+"If you would like to be notified after the store has been updated, subscribe from a "+"component and invoke store.getState() in the callback to access the latest state. "+"See https://redux.js.org/api-reference/store#subscribelistener for more details.")}var isSubscribed=true;ensureCanMutateNextListeners();nextListeners.push(listener);return function unsubscribe(){if(!isSubscribed){return}if(isDispatching){throw new Error("You may not unsubscribe from a store listener while the reducer is executing. "+"See https://redux.js.org/api-reference/store#subscribelistener for more details.")}isSubscribed=false;ensureCanMutateNextListeners();var index=nextListeners.indexOf(listener);nextListeners.splice(index,1);currentListeners=null}}function dispatch(action){if(!isPlainObject(action)){throw new Error("Actions must be plain objects. "+"Use custom middleware for async actions.")}if(typeof action.type==="undefined"){throw new Error('Actions may not have an undefined "type" property. '+"Have you misspelled a constant?")}if(isDispatching){throw new Error("Reducers may not dispatch actions.")}try{isDispatching=true;currentState=currentReducer(currentState,action)}finally{isDispatching=false}var listeners=currentListeners=nextListeners;for(var i=0;i<listeners.length;i++){var listener=listeners[i];listener()}return action}function replaceReducer(nextReducer){if(typeof nextReducer!=="function"){throw new Error("Expected the nextReducer to be a function.")}currentReducer=nextReducer;dispatch({type:ActionTypes.REPLACE})}function observable(){var _ref;var outerSubscribe=subscribe;return _ref={subscribe:function subscribe(observer){if(typeof observer!=="object"||observer===null){throw new TypeError("Expected the observer to be an object.")}function observeState(){if(observer.next){observer.next(getState())}}observeState();var unsubscribe=outerSubscribe(observeState);return{unsubscribe:unsubscribe}}},_ref[$$observable]=function(){return this},_ref}dispatch({type:ActionTypes.INIT});return _ref2={dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:replaceReducer},_ref2[$$observable]=observable,_ref2}function warning(message){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(message)}try{throw new Error(message)}catch(e){}}function getUndefinedStateErrorMessage(key,action){var actionType=action&&action.type;var actionDescription=actionType&&'action "'+String(actionType)+'"'||"an action";return"Given "+actionDescription+', reducer "'+key+'" returned undefined. '+"To ignore an action, you must explicitly return the previous state. "+"If you want this reducer to hold no value, you can return null instead of undefined."}function getUnexpectedStateShapeWarningMessage(inputState,reducers,action,unexpectedKeyCache){var reducerKeys=Object.keys(reducers);var argumentName=action&&action.type===ActionTypes.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(reducerKeys.length===0){return"Store does not have a valid reducer. Make sure the argument passed "+"to combineReducers is an object whose values are reducers."}if(!isPlainObject(inputState)){return"The "+argumentName+' has unexpected type of "'+{}.toString.call(inputState).match(/\s([a-z|A-Z]+)/)[1]+'". Expected argument to be an object with the following '+('keys: "'+reducerKeys.join('", "')+'"')}var unexpectedKeys=Object.keys(inputState).filter((function(key){return!reducers.hasOwnProperty(key)&&!unexpectedKeyCache[key]}));unexpectedKeys.forEach((function(key){unexpectedKeyCache[key]=true}));if(action&&action.type===ActionTypes.REPLACE)return;if(unexpectedKeys.length>0){return"Unexpected "+(unexpectedKeys.length>1?"keys":"key")+" "+('"'+unexpectedKeys.join('", "')+'" found in '+argumentName+". ")+"Expected to find one of the known reducer keys instead: "+('"'+reducerKeys.join('", "')+'". Unexpected keys will be ignored.')}}function assertReducerShape(reducers){Object.keys(reducers).forEach((function(key){var reducer=reducers[key];var initialState=reducer(undefined,{type:ActionTypes.INIT});if(typeof initialState==="undefined"){throw new Error('Reducer "'+key+'" returned undefined during initialization. '+"If the state passed to the reducer is undefined, you must "+"explicitly return the initial state. The initial state may "+"not be undefined. If you don't want to set a value for this reducer, "+"you can use null instead of undefined.")}if(typeof reducer(undefined,{type:ActionTypes.PROBE_UNKNOWN_ACTION()})==="undefined"){throw new Error('Reducer "'+key+'" returned undefined when probed with a random type. '+("Don't try to handle "+ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the "+"current state for any unknown actions, unless it is undefined, "+"in which case you must return the initial state, regardless of the "+"action type. The initial state may not be undefined, but can be null.")}}))}function combineReducers(reducers){var reducerKeys=Object.keys(reducers);var finalReducers={};for(var i=0;i<reducerKeys.length;i++){var key=reducerKeys[i];if(false){}if(typeof reducers[key]==="function"){finalReducers[key]=reducers[key]}}var finalReducerKeys=Object.keys(finalReducers);var unexpectedKeyCache;if(false){}var shapeAssertionError;try{assertReducerShape(finalReducers)}catch(e){shapeAssertionError=e}return function combination(state,action){if(state===void 0){state={}}if(shapeAssertionError){throw shapeAssertionError}if(false){var warningMessage}var hasChanged=false;var nextState={};for(var _i=0;_i<finalReducerKeys.length;_i++){var _key=finalReducerKeys[_i];var reducer=finalReducers[_key];var previousStateForKey=state[_key];var nextStateForKey=reducer(previousStateForKey,action);if(typeof nextStateForKey==="undefined"){var errorMessage=getUndefinedStateErrorMessage(_key,action);throw new Error(errorMessage)}nextState[_key]=nextStateForKey;hasChanged=hasChanged||nextStateForKey!==previousStateForKey}hasChanged=hasChanged||finalReducerKeys.length!==Object.keys(state).length;return hasChanged?nextState:state}}function bindActionCreator(actionCreator,dispatch){return function(){return dispatch(actionCreator.apply(this,arguments))}}function bindActionCreators(actionCreators,dispatch){if(typeof actionCreators==="function"){return bindActionCreator(actionCreators,dispatch)}if(typeof actionCreators!=="object"||actionCreators===null){throw new Error("bindActionCreators expected an object or a function, instead received "+(actionCreators===null?"null":typeof actionCreators)+". "+'Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?')}var boundActionCreators={};for(var key in actionCreators){var actionCreator=actionCreators[key];if(typeof actionCreator==="function"){boundActionCreators[key]=bindActionCreator(actionCreator,dispatch)}}return boundActionCreators}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){keys.push.apply(keys,Object.getOwnPropertySymbols(object))}if(enumerableOnly)keys=keys.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function compose(){for(var _len=arguments.length,funcs=new Array(_len),_key=0;_key<_len;_key++){funcs[_key]=arguments[_key]}if(funcs.length===0){return function(arg){return arg}}if(funcs.length===1){return funcs[0]}return funcs.reduce((function(a,b){return function(){return a(b.apply(void 0,arguments))}}))}function applyMiddleware(){for(var _len=arguments.length,middlewares=new Array(_len),_key=0;_key<_len;_key++){middlewares[_key]=arguments[_key]}return function(createStore){return function(){var store=createStore.apply(void 0,arguments);var _dispatch=function dispatch(){throw new Error("Dispatching while constructing your middleware is not allowed. "+"Other middleware would not be applied to this dispatch.")};var middlewareAPI={getState:store.getState,dispatch:function dispatch(){return _dispatch.apply(void 0,arguments)}};var chain=middlewares.map((function(middleware){return middleware(middlewareAPI)}));_dispatch=compose.apply(void 0,chain)(store.dispatch);return _objectSpread2({},store,{dispatch:_dispatch})}}}function isCrushed(){}if(false){}exports.__DO_NOT_USE__ActionTypes=ActionTypes;exports.applyMiddleware=applyMiddleware;exports.bindActionCreators=bindActionCreators;exports.combineReducers=combineReducers;exports.compose=compose;exports.createStore=createStore},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return typeof value==="function"};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return typeof Map!=="undefined"&&value instanceof Map};exports.default=_default},,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Loading}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8);var _elastic_eui__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__);var _common_lib_hex_to_rgb__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(55);const Loading=({animated:animated=false,text:text="",backgroundColor:backgroundColor="#000000"})=>{if(animated){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"canvasLoading"},text&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",null,text," "),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiLoadingSpinner"],{size:"m"}))}const rgb=Object(_common_lib_hex_to_rgb__WEBPACK_IMPORTED_MODULE_2__["a"])(backgroundColor);let color="text";if(rgb&&Object(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["isColorDark"])(rgb[0],rgb[1],rgb[2])){color="ghost"}return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"canvasLoading"},text&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",null,text," "),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiIcon"],{color:color,type:"clock"}))};Loading.defaultProps={animated:false,backgroundColor:"#000000",text:""}},function(module,exports,__webpack_require__){(function webpackUniversalModuleDefinition(root,factory){if(true)module.exports=factory(__webpack_require__(3));else{}})(this,(function(__WEBPACK_EXTERNAL_MODULE_2__){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(2);var _react2=_interopRequireDefault(_react);var _reactLibAdler=__webpack_require__(1);var _reactLibAdler2=_interopRequireDefault(_reactLibAdler);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var __DEV__="production"!=="production";var Style=function(_Component){_inherits(Style,_Component);function Style(props){_classCallCheck(this,Style);var _this=_possibleConstructorReturn(this,(Style.__proto__||Object.getPrototypeOf(Style)).call(this,props));_this.getStyleString=function(){if(_this.props.children instanceof Array){var styleString=_this.props.children.filter((function(child){return!(0,_react.isValidElement)(child)&&typeof child==="string"}));if(styleString.length>1){throw new Error("Multiple style objects as direct descedents of a "+"Style component are not supported ("+styleString.length+" style objects detected): \n\n"+styleString[0])}return styleString[0]}else if(typeof _this.props.children==="string"&&!(0,_react.isValidElement)(_this.props.children)){return _this.props.children}else{return null}};_this.getRootElement=function(){if(_this.props.children instanceof Array){var rootElement=_this.props.children.filter((function(child){return(0,_react.isValidElement)(child)}));if(__DEV__){if(rootElement.length>1){console.log(rootElement);throw new Error("Adjacent JSX elements must be wrapped in an enclosing tag ("+rootElement.length+" root elements detected).")}if(typeof rootElement[0]!=="undefined"&&_this.isVoidElement(rootElement[0].type)){throw new Error("Self-closing void elements like "+rootElement.type+" must be wrapped "+"in an enclosing tag. Reactive Style must be able to nest a style element "+"inside of the root element and void element content models never allow"+"it to have contents under any circumstances.")}}return rootElement[0]}else if((0,_react.isValidElement)(_this.props.children)){return _this.props.children}else{return null}};_this.getRootSelectors=function(rootElement){var rootSelectors=[];if(rootElement.props.id){rootSelectors.push("#"+rootElement.props.id)}if(rootElement.props.className){rootElement.props.className.trim().split(/\s+/g).forEach((function(className){return rootSelectors.push(className)}))}if(!rootSelectors.length&&typeof rootElement.type!=="function"){rootSelectors.push(rootElement.type)}return rootSelectors};_this.processCSSText=function(styleString,scopeClassName,rootSelectors){return styleString.replace(/\s*\/\/(?![^(]*\)).*|\s*\/\*.*\*\//g,"").replace(/\s\s+/g," ").split("}").map((function(fragment){var isDeclarationBodyPattern=/.*:.*;/g;var isLastItemDeclarationBodyPattern=/.*:.*(;|$|\s+)/g;var isAtRulePattern=/\s*@/g;var isKeyframeOffsetPattern=/\s*(([0-9][0-9]?|100)\s*%)|\s*(to|from)\s*$/g;return fragment.split("{").map((function(statement,i,arr){if(!statement.trim().length){return""}var isDeclarationBodyItemWithOptionalSemicolon=arr.length-1===i&&statement.match(isLastItemDeclarationBodyPattern);if(statement.match(isDeclarationBodyPattern)||isDeclarationBodyItemWithOptionalSemicolon){return _this.escapeTextContentForBrowser(statement)}else{var selector=statement;if(scopeClassName&&!/:target/gi.test(selector)){if(!selector.match(isAtRulePattern)&&!selector.match(isKeyframeOffsetPattern)){return _this.scopeSelector(scopeClassName,selector,rootSelectors)}else{return selector}}else{return selector}}})).join("{\n")})).join("}\n")};_this.escaper=function(match){var ESCAPE_LOOKUP={">":"&gt;","<":"&lt;"};return ESCAPE_LOOKUP[match]};_this.escapeTextContentForBrowser=function(text){var ESCAPE_REGEX=/[><]/g;return(""+text).replace(ESCAPE_REGEX,_this.escaper)};_this.scopeSelector=function(scopeClassName,selector,rootSelectors){var scopedSelector=[];var groupOfSelectorsPattern=/,(?![^(|[]*\)|\])/g;var selectors=selector.split(groupOfSelectorsPattern);for(var i=0;i<selectors.length;i++){var containsSelector=void 0;var unionSelector=void 0;if(rootSelectors.length&&rootSelectors.some((function(rootSelector){return selector.match(rootSelector)}))){unionSelector=selectors[i];var escapedRootSelectors=rootSelectors.map((function(rootSelector){return rootSelector.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}));unionSelector=unionSelector.replace(new RegExp("("+escapedRootSelectors.join("|")+")"),"$1"+scopeClassName);containsSelector=scopeClassName+" "+selectors[i];scopedSelector.push(unionSelector,containsSelector)}else{containsSelector=scopeClassName+" "+selectors[i];scopedSelector.push(containsSelector)}}return scopedSelector.join(", ")};_this.getScopeClassName=function(styleString,rootElement){var hash=styleString;if(rootElement){_this.pepper="";_this.traverseObjectToGeneratePepper(rootElement);hash+=_this.pepper}return(__DEV__?"scope-":"s")+(0,_reactLibAdler2.default)(hash)};_this.traverseObjectToGeneratePepper=function(obj){var depth=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(depth>32||_this.pepper.length>1e4)return;for(var prop in obj){var isPropReactInternal=/^[_$]|type|ref|^value$/.test(prop);if(!!obj[prop]&&_typeof(obj[prop])==="object"&&!isPropReactInternal){_this.traverseObjectToGeneratePepper(obj[prop],depth+1)}else if(!!obj[prop]&&!isPropReactInternal&&typeof obj[prop]!=="function"){_this.pepper+=obj[prop]}}};_this.isVoidElement=function(type){return["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].some((function(voidType){return type===voidType}))};_this.addCSSTextToHead=function(cssText){if(!cssText.length){return}else{var cssTextHash=(0,_reactLibAdler2.default)(cssText);if(!window._reactiveStyle.cssTextHashesAddedToHead.some((function(hash){return hash===cssTextHash}))){window._reactiveStyle.el.innerHTML+=cssText;window._reactiveStyle.cssTextHashesAddedToHead.push(cssTextHash)}}};_this.createStyleElement=function(cssText,scopeClassName){return _react2.default.createElement("style",{type:"text/css",key:scopeClassName,ref:function ref(c){return _this._style=c},dangerouslySetInnerHTML:{__html:cssText||""}})};_this.getNewChildrenForCloneElement=function(cssText,rootElement,scopeClassName){return[_this.createStyleElement(cssText,scopeClassName)].concat(rootElement.props.children)};_this.scopeClassNameCache={};_this.scopedCSSTextCache={};return _this}_createClass(Style,[{key:"render",value:function render(){if(!this.props.children){return this.createStyleElement()}var styleString=this.getStyleString();var rootElement=this.getRootElement();if(!styleString&&rootElement){return rootElement.props.children}else if(styleString&&!rootElement){return this.createStyleElement(this.processCSSText(styleString),this.getScopeClassName(styleString,rootElement))}else{var rootElementClassNames=rootElement.props.className?rootElement.props.className+" ":"";var rootElementId=rootElement.props.id?rootElement.props.id:"";var scopeClassName=void 0;var scopedCSSText=void 0;var scopeClassNameAddress=rootElementClassNames+rootElementId+styleString;if(this.scopeClassNameCache[scopeClassNameAddress]){scopeClassName=this.scopeClassNameCache[scopeClassNameAddress];scopedCSSText=this.scopedCSSTextCache[scopeClassName]}else{scopeClassName=this.getScopeClassName(styleString,rootElement);scopedCSSText=this.processCSSText(styleString,"."+scopeClassName,this.getRootSelectors(rootElement));this.scopeClassNameCache[scopeClassNameAddress]=scopeClassName;this.scopedCSSTextCache[scopeClassName]=scopedCSSText}return(0,_react.cloneElement)(rootElement,_extends({},rootElement.props,{className:""+rootElementClassNames+scopeClassName}),this.getNewChildrenForCloneElement(scopedCSSText,rootElement,scopeClassName))}}}]);return Style}(_react.Component);Style.it=function(cssText,rootElement){return _react2.default.createElement(Style,null,cssText,rootElement)};exports.default=Style},function(module,exports){"use strict";var MOD=65521;function adler32(data){var a=1;var b=0;var i=0;var l=data.length;var m=l&~3;while(i<m){var n=Math.min(i+4096,m);for(;i<n;i+=4){b+=(a+=data.charCodeAt(i))+(a+=data.charCodeAt(i+1))+(a+=data.charCodeAt(i+2))+(a+=data.charCodeAt(i+3))}a%=MOD;b%=MOD}for(;i<l;i++){b+=a+=data.charCodeAt(i)}a%=MOD;b%=MOD;return a|b<<16}module.exports=adler32},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_2__}])}))},,,,,,function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports["default"]=void 0;var _batch=__webpack_require__(256);var nullListeners={notify:function notify(){}};function createListenerCollection(){var batch=(0,_batch.getBatch)();var first=null;var last=null;return{clear:function clear(){first=null;last=null},notify:function notify(){batch((function(){var listener=first;while(listener){listener.callback();listener=listener.next}}))},get:function get(){var listeners=[];var listener=first;while(listener){listeners.push(listener);listener=listener.next}return listeners},subscribe:function subscribe(callback){var isSubscribed=true;var listener=last={callback:callback,next:null,prev:last};if(listener.prev){listener.prev.next=listener}else{first=listener}return function unsubscribe(){if(!isSubscribed||first===null)return;isSubscribed=false;if(listener.next){listener.next.prev=listener.prev}else{last=listener.prev}if(listener.prev){listener.prev.next=listener.next}else{first=listener.next}}}}}var Subscription=function(){function Subscription(store,parentSub){this.store=store;this.parentSub=parentSub;this.unsubscribe=null;this.listeners=nullListeners;this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var _proto=Subscription.prototype;_proto.addNestedSub=function addNestedSub(listener){this.trySubscribe();return this.listeners.subscribe(listener)};_proto.notifyNestedSubs=function notifyNestedSubs(){this.listeners.notify()};_proto.handleChangeWrapper=function handleChangeWrapper(){if(this.onStateChange){this.onStateChange()}};_proto.isSubscribed=function isSubscribed(){return Boolean(this.unsubscribe)};_proto.trySubscribe=function trySubscribe(){if(!this.unsubscribe){this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper);this.listeners=createListenerCollection()}};_proto.tryUnsubscribe=function tryUnsubscribe(){if(this.unsubscribe){this.unsubscribe();this.unsubscribe=null;this.listeners.clear();this.listeners=nullListeners}};return Subscription}();exports["default"]=Subscription},function(module,exports){function _extends(){module.exports=_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}module.exports=_extends},function(module,exports){function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}module.exports=_objectWithoutPropertiesLoose},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=createAction;var _invariant=_interopRequireDefault(__webpack_require__(220));var _isFunction=_interopRequireDefault(__webpack_require__(229));var _identity=_interopRequireDefault(__webpack_require__(243));var _isNull=_interopRequireDefault(__webpack_require__(301));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createAction(type,payloadCreator,metaCreator){if(payloadCreator===void 0){payloadCreator=_identity.default}(0,_invariant.default)((0,_isFunction.default)(payloadCreator)||(0,_isNull.default)(payloadCreator),"Expected payloadCreator to be a function, undefined or null");var finalPayloadCreator=(0,_isNull.default)(payloadCreator)||payloadCreator===_identity.default?_identity.default:function(head){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}return head instanceof Error?head:payloadCreator.apply(void 0,[head].concat(args))};var hasMeta=(0,_isFunction.default)(metaCreator);var typeString=type.toString();var actionCreator=function actionCreator(){var payload=finalPayloadCreator.apply(void 0,arguments);var action={type:type};if(payload instanceof Error){action.error=true}if(payload!==undefined){action.payload=payload}if(hasMeta){action.meta=metaCreator.apply(void 0,arguments)}return action};actionCreator.toString=function(){return typeString};return actionCreator}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return value};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=ownKeys;var _isMap=_interopRequireDefault(__webpack_require__(230));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object){if((0,_isMap.default)(object)){return Array.from(object.keys())}if(typeof Reflect!=="undefined"&&typeof Reflect.ownKeys==="function"){return Reflect.ownKeys(object)}var keys=Object.getOwnPropertyNames(object);if(typeof Object.getOwnPropertySymbols==="function"){keys=keys.concat(Object.getOwnPropertySymbols(object))}return keys}},function(module,exports,__webpack_require__){"use strict";module.exports=function(key){return key==="shift"||key==="ctrl"||key==="alt"||key==="meta"}},function(module,exports,__webpack_require__){"use strict";var isArray=Array.isArray;var keyList=Object.keys;var hasProp=Object.prototype.hasOwnProperty;var hasElementType=typeof Element!=="undefined";function equal(a,b){if(a===b)return true;if(a&&b&&typeof a=="object"&&typeof b=="object"){var arrA=isArray(a),arrB=isArray(b),i,length,key;if(arrA&&arrB){length=a.length;if(length!=b.length)return false;for(i=length;i--!==0;)if(!equal(a[i],b[i]))return false;return true}if(arrA!=arrB)return false;var dateA=a instanceof Date,dateB=b instanceof Date;if(dateA!=dateB)return false;if(dateA&&dateB)return a.getTime()==b.getTime();var regexpA=a instanceof RegExp,regexpB=b instanceof RegExp;if(regexpA!=regexpB)return false;if(regexpA&&regexpB)return a.toString()==b.toString();var keys=keyList(a);length=keys.length;if(length!==keyList(b).length)return false;for(i=length;i--!==0;)if(!hasProp.call(b,keys[i]))return false;if(hasElementType&&a instanceof Element&&b instanceof Element)return a===b;for(i=length;i--!==0;){key=keys[i];if(key==="_owner"&&a.$$typeof){continue}else{if(!equal(a[key],b[key]))return false}}return true}return a!==a&&b!==b}module.exports=function exportedEqual(a,b){try{return equal(a,b)}catch(error){if(error.message&&error.message.match(/stack|recursion/i)||error.number===-2146828260){console.warn("Warning: react-fast-compare does not handle circular references.",error.name,error.message);return false}throw error}}},,,,,,,,,function(module,exports,__webpack_require__){var _typeof=__webpack_require__(288);function _getRequireWildcardCache(){if(typeof WeakMap!=="function")return null;var cache=new WeakMap;_getRequireWildcardCache=function _getRequireWildcardCache(){return cache};return cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache();if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj)}return newObj}module.exports=_interopRequireWildcard},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.getBatch=exports.setBatch=void 0;function defaultNoopBatch(callback){callback()}var batch=defaultNoopBatch;var setBatch=function setBatch(newBatch){return batch=newBatch};exports.setBatch=setBatch;var getBatch=function getBatch(){return batch};exports.getBatch=getBatch},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(255);var _interopRequireDefault=__webpack_require__(217);exports.__esModule=true;exports["default"]=connectAdvanced;var _extends2=_interopRequireDefault(__webpack_require__(240));var _objectWithoutPropertiesLoose2=_interopRequireDefault(__webpack_require__(241));var _hoistNonReactStatics=_interopRequireDefault(__webpack_require__(127));var _react=_interopRequireWildcard(__webpack_require__(3));var _reactIs=__webpack_require__(128);var _Subscription=_interopRequireDefault(__webpack_require__(239));var _useIsomorphicLayoutEffect=__webpack_require__(258);var _Context=__webpack_require__(219);var EMPTY_ARRAY=[];var NO_SUBSCRIPTION_ARRAY=[null,null];var stringifyComponent=function stringifyComponent(Comp){try{return JSON.stringify(Comp)}catch(err){return String(Comp)}};function storeStateUpdatesReducer(state,action){var updateCount=state[1];return[action.payload,updateCount+1]}function useIsomorphicLayoutEffectWithArgs(effectFunc,effectArgs,dependencies){(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)((function(){return effectFunc.apply(void 0,effectArgs)}),dependencies)}function captureWrapperProps(lastWrapperProps,lastChildProps,renderIsScheduled,wrapperProps,actualChildProps,childPropsFromStoreUpdate,notifyNestedSubs){lastWrapperProps.current=wrapperProps;lastChildProps.current=actualChildProps;renderIsScheduled.current=false;if(childPropsFromStoreUpdate.current){childPropsFromStoreUpdate.current=null;notifyNestedSubs()}}function subscribeUpdates(shouldHandleStateChanges,store,subscription,childPropsSelector,lastWrapperProps,lastChildProps,renderIsScheduled,childPropsFromStoreUpdate,notifyNestedSubs,forceComponentUpdateDispatch){if(!shouldHandleStateChanges)return;var didUnsubscribe=false;var lastThrownError=null;var checkForUpdates=function checkForUpdates(){if(didUnsubscribe){return}var latestStoreState=store.getState();var newChildProps,error;try{newChildProps=childPropsSelector(latestStoreState,lastWrapperProps.current)}catch(e){error=e;lastThrownError=e}if(!error){lastThrownError=null}if(newChildProps===lastChildProps.current){if(!renderIsScheduled.current){notifyNestedSubs()}}else{lastChildProps.current=newChildProps;childPropsFromStoreUpdate.current=newChildProps;renderIsScheduled.current=true;forceComponentUpdateDispatch({type:"STORE_UPDATED",payload:{error:error}})}};subscription.onStateChange=checkForUpdates;subscription.trySubscribe();checkForUpdates();var unsubscribeWrapper=function unsubscribeWrapper(){didUnsubscribe=true;subscription.tryUnsubscribe();subscription.onStateChange=null;if(lastThrownError){throw lastThrownError}};return unsubscribeWrapper}var initStateUpdates=function initStateUpdates(){return[null,0]};function connectAdvanced(selectorFactory,_ref){if(_ref===void 0){_ref={}}var _ref2=_ref,_ref2$getDisplayName=_ref2.getDisplayName,getDisplayName=_ref2$getDisplayName===void 0?function(name){return"ConnectAdvanced("+name+")"}:_ref2$getDisplayName,_ref2$methodName=_ref2.methodName,methodName=_ref2$methodName===void 0?"connectAdvanced":_ref2$methodName,_ref2$renderCountProp=_ref2.renderCountProp,renderCountProp=_ref2$renderCountProp===void 0?undefined:_ref2$renderCountProp,_ref2$shouldHandleSta=_ref2.shouldHandleStateChanges,shouldHandleStateChanges=_ref2$shouldHandleSta===void 0?true:_ref2$shouldHandleSta,_ref2$storeKey=_ref2.storeKey,storeKey=_ref2$storeKey===void 0?"store":_ref2$storeKey,_ref2$withRef=_ref2.withRef,withRef=_ref2$withRef===void 0?false:_ref2$withRef,_ref2$forwardRef=_ref2.forwardRef,forwardRef=_ref2$forwardRef===void 0?false:_ref2$forwardRef,_ref2$context=_ref2.context,context=_ref2$context===void 0?_Context.ReactReduxContext:_ref2$context,connectOptions=(0,_objectWithoutPropertiesLoose2["default"])(_ref2,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);if(false){var customStoreWarningMessage}var Context=context;return function wrapWithConnect(WrappedComponent){if(false){}var wrappedComponentName=WrappedComponent.displayName||WrappedComponent.name||"Component";var displayName=getDisplayName(wrappedComponentName);var selectorFactoryOptions=(0,_extends2["default"])({},connectOptions,{getDisplayName:getDisplayName,methodName:methodName,renderCountProp:renderCountProp,shouldHandleStateChanges:shouldHandleStateChanges,storeKey:storeKey,displayName:displayName,wrappedComponentName:wrappedComponentName,WrappedComponent:WrappedComponent});var pure=connectOptions.pure;function createChildSelector(store){return selectorFactory(store.dispatch,selectorFactoryOptions)}var usePureOnlyMemo=pure?_react.useMemo:function(callback){return callback()};function ConnectFunction(props){var _useMemo=(0,_react.useMemo)((function(){var forwardedRef=props.forwardedRef,wrapperProps=(0,_objectWithoutPropertiesLoose2["default"])(props,["forwardedRef"]);return[props.context,forwardedRef,wrapperProps]}),[props]),propsContext=_useMemo[0],forwardedRef=_useMemo[1],wrapperProps=_useMemo[2];var ContextToUse=(0,_react.useMemo)((function(){return propsContext&&propsContext.Consumer&&(0,_reactIs.isContextConsumer)(_react["default"].createElement(propsContext.Consumer,null))?propsContext:Context}),[propsContext,Context]);var contextValue=(0,_react.useContext)(ContextToUse);var didStoreComeFromProps=Boolean(props.store)&&Boolean(props.store.getState)&&Boolean(props.store.dispatch);var didStoreComeFromContext=Boolean(contextValue)&&Boolean(contextValue.store);if(false){}var store=didStoreComeFromProps?props.store:contextValue.store;var childPropsSelector=(0,_react.useMemo)((function(){return createChildSelector(store)}),[store]);var _useMemo2=(0,_react.useMemo)((function(){if(!shouldHandleStateChanges)return NO_SUBSCRIPTION_ARRAY;var subscription=new _Subscription["default"](store,didStoreComeFromProps?null:contextValue.subscription);var notifyNestedSubs=subscription.notifyNestedSubs.bind(subscription);return[subscription,notifyNestedSubs]}),[store,didStoreComeFromProps,contextValue]),subscription=_useMemo2[0],notifyNestedSubs=_useMemo2[1];var overriddenContextValue=(0,_react.useMemo)((function(){if(didStoreComeFromProps){return contextValue}return(0,_extends2["default"])({},contextValue,{subscription:subscription})}),[didStoreComeFromProps,contextValue,subscription]);var _useReducer=(0,_react.useReducer)(storeStateUpdatesReducer,EMPTY_ARRAY,initStateUpdates),_useReducer$=_useReducer[0],previousStateUpdateResult=_useReducer$[0],forceComponentUpdateDispatch=_useReducer[1];if(previousStateUpdateResult&&previousStateUpdateResult.error){throw previousStateUpdateResult.error}var lastChildProps=(0,_react.useRef)();var lastWrapperProps=(0,_react.useRef)(wrapperProps);var childPropsFromStoreUpdate=(0,_react.useRef)();var renderIsScheduled=(0,_react.useRef)(false);var actualChildProps=usePureOnlyMemo((function(){if(childPropsFromStoreUpdate.current&&wrapperProps===lastWrapperProps.current){return childPropsFromStoreUpdate.current}return childPropsSelector(store.getState(),wrapperProps)}),[store,previousStateUpdateResult,wrapperProps]);useIsomorphicLayoutEffectWithArgs(captureWrapperProps,[lastWrapperProps,lastChildProps,renderIsScheduled,wrapperProps,actualChildProps,childPropsFromStoreUpdate,notifyNestedSubs]);useIsomorphicLayoutEffectWithArgs(subscribeUpdates,[shouldHandleStateChanges,store,subscription,childPropsSelector,lastWrapperProps,lastChildProps,renderIsScheduled,childPropsFromStoreUpdate,notifyNestedSubs,forceComponentUpdateDispatch],[store,subscription,childPropsSelector]);var renderedWrappedComponent=(0,_react.useMemo)((function(){return _react["default"].createElement(WrappedComponent,(0,_extends2["default"])({},actualChildProps,{ref:forwardedRef}))}),[forwardedRef,WrappedComponent,actualChildProps]);var renderedChild=(0,_react.useMemo)((function(){if(shouldHandleStateChanges){return _react["default"].createElement(ContextToUse.Provider,{value:overriddenContextValue},renderedWrappedComponent)}return renderedWrappedComponent}),[ContextToUse,renderedWrappedComponent,overriddenContextValue]);return renderedChild}var Connect=pure?_react["default"].memo(ConnectFunction):ConnectFunction;Connect.WrappedComponent=WrappedComponent;Connect.displayName=displayName;if(forwardRef){var forwarded=_react["default"].forwardRef((function forwardConnectRef(props,ref){return _react["default"].createElement(Connect,(0,_extends2["default"])({},props,{forwardedRef:ref}))}));forwarded.displayName=displayName;forwarded.WrappedComponent=WrappedComponent;return(0,_hoistNonReactStatics["default"])(forwarded,WrappedComponent)}return(0,_hoistNonReactStatics["default"])(Connect,WrappedComponent)}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.useIsomorphicLayoutEffect=void 0;var _react=__webpack_require__(3);var useIsomorphicLayoutEffect=typeof window!=="undefined"&&typeof window.document!=="undefined"&&typeof window.document.createElement!=="undefined"?_react.useLayoutEffect:_react.useEffect;exports.useIsomorphicLayoutEffect=useIsomorphicLayoutEffect},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports["default"]=shallowEqual;function is(x,y){if(x===y){return x!==0||y!==0||1/x===1/y}else{return x!==x&&y!==y}}function shallowEqual(objA,objB){if(is(objA,objB))return true;if(typeof objA!=="object"||objA===null||typeof objB!=="object"||objB===null){return false}var keysA=Object.keys(objA);var keysB=Object.keys(objB);if(keysA.length!==keysB.length)return false;for(var i=0;i<keysA.length;i++){if(!Object.prototype.hasOwnProperty.call(objB,keysA[i])||!is(objA[keysA[i]],objB[keysA[i]])){return false}}return true}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(217);exports.__esModule=true;exports.wrapMapToPropsConstant=wrapMapToPropsConstant;exports.getDependsOnOwnProps=getDependsOnOwnProps;exports.wrapMapToPropsFunc=wrapMapToPropsFunc;var _verifyPlainObject=_interopRequireDefault(__webpack_require__(261));function wrapMapToPropsConstant(getConstant){return function initConstantSelector(dispatch,options){var constant=getConstant(dispatch,options);function constantSelector(){return constant}constantSelector.dependsOnOwnProps=false;return constantSelector}}function getDependsOnOwnProps(mapToProps){return mapToProps.dependsOnOwnProps!==null&&mapToProps.dependsOnOwnProps!==undefined?Boolean(mapToProps.dependsOnOwnProps):mapToProps.length!==1}function wrapMapToPropsFunc(mapToProps,methodName){return function initProxySelector(dispatch,_ref){var displayName=_ref.displayName;var proxy=function mapToPropsProxy(stateOrDispatch,ownProps){return proxy.dependsOnOwnProps?proxy.mapToProps(stateOrDispatch,ownProps):proxy.mapToProps(stateOrDispatch)};proxy.dependsOnOwnProps=true;proxy.mapToProps=function detectFactoryAndVerify(stateOrDispatch,ownProps){proxy.mapToProps=mapToProps;proxy.dependsOnOwnProps=getDependsOnOwnProps(mapToProps);var props=proxy(stateOrDispatch,ownProps);if(typeof props==="function"){proxy.mapToProps=props;proxy.dependsOnOwnProps=getDependsOnOwnProps(props);props=proxy(stateOrDispatch,ownProps)}if(false){}return props};return proxy}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(217);exports.__esModule=true;exports["default"]=verifyPlainObject;var _isPlainObject=_interopRequireDefault(__webpack_require__(291));var _warning=_interopRequireDefault(__webpack_require__(262));function verifyPlainObject(value,displayName,methodName){if(!(0,_isPlainObject["default"])(value)){(0,_warning["default"])(methodName+"() in "+displayName+" must return a plain object. Instead received "+value+".")}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports["default"]=warning;function warning(message){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(message)}try{throw new Error(message)}catch(e){}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.createStoreHook=createStoreHook;exports.useStore=void 0;var _react=__webpack_require__(3);var _Context=__webpack_require__(219);var _useReduxContext2=__webpack_require__(264);function createStoreHook(context){if(context===void 0){context=_Context.ReactReduxContext}var useReduxContext=context===_Context.ReactReduxContext?_useReduxContext2.useReduxContext:function(){return(0,_react.useContext)(context)};return function useStore(){var _useReduxContext=useReduxContext(),store=_useReduxContext.store;return store}}var useStore=createStoreHook();exports.useStore=useStore},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.useReduxContext=useReduxContext;var _react=__webpack_require__(3);var _Context=__webpack_require__(219);function useReduxContext(){var contextValue=(0,_react.useContext)(_Context.ReactReduxContext);if(false){}return contextValue}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return value.length===0};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return value.toString()};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return typeof value==="string"};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return value===null||value===undefined};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _toCamelCase=_interopRequireDefault(__webpack_require__(305));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var namespacer="/";var _default=function _default(type){return type.indexOf(namespacer)===-1?(0,_toCamelCase.default)(type):type.split(namespacer).map(_toCamelCase.default).join(namespacer)};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _constants=__webpack_require__(224);var _ownKeys=_interopRequireDefault(__webpack_require__(244));var _get=_interopRequireDefault(__webpack_require__(271));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=function _default(predicate){return function flatten(map,_temp,partialFlatMap,partialFlatActionType){var _ref=_temp===void 0?{}:_temp,_ref$namespace=_ref.namespace,namespace=_ref$namespace===void 0?_constants.DEFAULT_NAMESPACE:_ref$namespace,prefix=_ref.prefix;if(partialFlatMap===void 0){partialFlatMap={}}if(partialFlatActionType===void 0){partialFlatActionType=""}function connectNamespace(type){var _ref2;if(!partialFlatActionType)return type;var types=type.toString().split(_constants.ACTION_TYPE_DELIMITER);var partials=partialFlatActionType.split(_constants.ACTION_TYPE_DELIMITER);return(_ref2=[]).concat.apply(_ref2,partials.map((function(p){return types.map((function(t){return""+p+namespace+t}))}))).join(_constants.ACTION_TYPE_DELIMITER)}function connectPrefix(type){if(partialFlatActionType||!prefix||prefix&&new RegExp("^"+prefix+namespace).test(type)){return type}return""+prefix+namespace+type}(0,_ownKeys.default)(map).forEach((function(type){var nextNamespace=connectPrefix(connectNamespace(type));var mapValue=(0,_get.default)(type,map);if(predicate(mapValue)){flatten(mapValue,{namespace:namespace,prefix:prefix},partialFlatMap,nextNamespace)}else{partialFlatMap[nextNamespace]=mapValue}}));return partialFlatMap}};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=get;var _isMap=_interopRequireDefault(__webpack_require__(230));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function get(key,x){return(0,_isMap.default)(x)?x.get(key):x[key]}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=handleAction;var _invariant=_interopRequireDefault(__webpack_require__(220));var _isFunction=_interopRequireDefault(__webpack_require__(229));var _isPlainObject=_interopRequireDefault(__webpack_require__(225));var _identity=_interopRequireDefault(__webpack_require__(243));var _isNil=_interopRequireDefault(__webpack_require__(268));var _isUndefined=_interopRequireDefault(__webpack_require__(313));var _toString=_interopRequireDefault(__webpack_require__(266));var _constants=__webpack_require__(224);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function handleAction(type,reducer,defaultState){if(reducer===void 0){reducer=_identity.default}var types=(0,_toString.default)(type).split(_constants.ACTION_TYPE_DELIMITER);(0,_invariant.default)(!(0,_isUndefined.default)(defaultState),"defaultState for reducer handling "+types.join(", ")+" should be defined");(0,_invariant.default)((0,_isFunction.default)(reducer)||(0,_isPlainObject.default)(reducer),"Expected reducer to be a function or object with next and throw reducers");var _ref=(0,_isFunction.default)(reducer)?[reducer,reducer]:[reducer.next,reducer.throw].map((function(aReducer){return(0,_isNil.default)(aReducer)?_identity.default:aReducer})),nextReducer=_ref[0],throwReducer=_ref[1];return function(state,action){if(state===void 0){state=defaultState}var actionType=action.type;if(!actionType||types.indexOf((0,_toString.default)(actionType))===-1){return state}return(action.error===true?throwReducer:nextReducer)(state,action)}}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */var saveAs=saveAs||function(view){"use strict";if(typeof view==="undefined"||typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var doc=view.document,get_URL=function(){return view.URL||view.webkitURL||view},save_link=doc.createElementNS("http://www.w3.org/1999/xhtml","a"),can_use_save_link="download"in save_link,click=function(node){var event=new MouseEvent("click");node.dispatchEvent(event)},is_safari=/constructor/i.test(view.HTMLElement)||view.safari,is_chrome_ios=/CriOS\/[\d]+/.test(navigator.userAgent),throw_outside=function(ex){(view.setImmediate||view.setTimeout)((function(){throw ex}),0)},force_saveable_type="application/octet-stream",arbitrary_revoke_timeout=1e3*40,revoke=function(file){var revoker=function(){if(typeof file==="string"){get_URL().revokeObjectURL(file)}else{file.remove()}};setTimeout(revoker,arbitrary_revoke_timeout)},dispatch=function(filesaver,event_types,event){event_types=[].concat(event_types);var i=event_types.length;while(i--){var listener=filesaver["on"+event_types[i]];if(typeof listener==="function"){try{listener.call(filesaver,event||filesaver)}catch(ex){throw_outside(ex)}}}},auto_bom=function(blob){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)){return new Blob([String.fromCharCode(65279),blob],{type:blob.type})}return blob},FileSaver=function(blob,name,no_auto_bom){if(!no_auto_bom){blob=auto_bom(blob)}var filesaver=this,type=blob.type,force=type===force_saveable_type,object_url,dispatch_all=function(){dispatch(filesaver,"writestart progress write writeend".split(" "))},fs_error=function(){if((is_chrome_ios||force&&is_safari)&&view.FileReader){var reader=new FileReader;reader.onloadend=function(){var url=is_chrome_ios?reader.result:reader.result.replace(/^data:[^;]*;/,"data:attachment/file;");var popup=view.open(url,"_blank");if(!popup)view.location.href=url;url=undefined;filesaver.readyState=filesaver.DONE;dispatch_all()};reader.readAsDataURL(blob);filesaver.readyState=filesaver.INIT;return}if(!object_url){object_url=get_URL().createObjectURL(blob)}if(force){view.location.href=object_url}else{var opened=view.open(object_url,"_blank");if(!opened){view.location.href=object_url}}filesaver.readyState=filesaver.DONE;dispatch_all();revoke(object_url)};filesaver.readyState=filesaver.INIT;if(can_use_save_link){object_url=get_URL().createObjectURL(blob);setTimeout((function(){save_link.href=object_url;save_link.download=name;click(save_link);dispatch_all();revoke(object_url);filesaver.readyState=filesaver.DONE}));return}fs_error()},FS_proto=FileSaver.prototype,saveAs=function(blob,name,no_auto_bom){return new FileSaver(blob,name||blob.name||"download",no_auto_bom)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(blob,name,no_auto_bom){name=name||blob.name||"download";if(!no_auto_bom){blob=auto_bom(blob)}return navigator.msSaveOrOpenBlob(blob,name)}}FS_proto.abort=function(){};FS_proto.readyState=FS_proto.INIT=0;FS_proto.WRITING=1;FS_proto.DONE=2;FS_proto.error=FS_proto.onwritestart=FS_proto.onprogress=FS_proto.onwrite=FS_proto.onabort=FS_proto.onerror=FS_proto.onwriteend=null;return saveAs}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(true&&module.exports){module.exports.saveAs=saveAs}else if(true&&__webpack_require__(320)!==null&&__webpack_require__(274)!==null){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return saveAs}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}},function(module,exports){(function(__webpack_amd_options__){module.exports=__webpack_amd_options__}).call(this,{})},function(module,exports,__webpack_require__){"use strict";if(true){module.exports=__webpack_require__(325)}else{}},function(module,exports,__webpack_require__){"use strict";var isProduction="production"==="production";var prefix="Invariant failed";function invariant(condition,message){if(condition){return}if(isProduction){throw new Error(prefix)}else{throw new Error(prefix+": "+(message||""))}}module.exports=invariant},function(module,exports,__webpack_require__){"use strict";var deselectCurrent=__webpack_require__(335);var defaultMessage="Copy to clipboard: #{key}, Enter";function format(message){var copyKey=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return message.replace(/#{\s*key\s*}/g,copyKey)}function copy(text,options){var debug,message,reselectPrevious,range,selection,mark,success=false;if(!options){options={}}debug=options.debug||false;try{reselectPrevious=deselectCurrent();range=document.createRange();selection=document.getSelection();mark=document.createElement("span");mark.textContent=text;mark.style.all="unset";mark.style.position="fixed";mark.style.top=0;mark.style.clip="rect(0, 0, 0, 0)";mark.style.whiteSpace="pre";mark.style.webkitUserSelect="text";mark.style.MozUserSelect="text";mark.style.msUserSelect="text";mark.style.userSelect="text";mark.addEventListener("copy",(function(e){e.stopPropagation();if(options.format){e.preventDefault();e.clipboardData.clearData();e.clipboardData.setData(options.format,text)}}));document.body.appendChild(mark);range.selectNodeContents(mark);selection.addRange(range);var successful=document.execCommand("copy");if(!successful){throw new Error("copy command was unsuccessful")}success=true}catch(err){debug&&console.error("unable to copy using execCommand: ",err);debug&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(options.format||"text",text);success=true}catch(err){debug&&console.error("unable to copy using clipboardData: ",err);debug&&console.error("falling back to prompt");message=format("message"in options?options.message:defaultMessage);window.prompt(message,text)}}finally{if(selection){if(typeof selection.removeRange=="function"){selection.removeRange(range)}else{selection.removeAllRanges()}}if(mark){document.body.removeChild(mark)}reselectPrevious()}return success}module.exports=copy},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(345);case"v7light":return __webpack_require__(347);case"v8dark":return __webpack_require__(349);case"v8light":return __webpack_require__(351)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _platform=__webpack_require__(373);var _platform2=_interopRequireDefault(_platform);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getPlatformName=function getPlatformName(){var os=_platform2.default.os.family||"";os=os.toLowerCase().replace(/ /g,"");if(/\bwin/.test(os)){os="windows"}else if(/darwin|osx/.test(os)){os="osx"}else if(/linux|freebsd|sunos|ubuntu|debian|fedora|redhat|suse/.test(os)){os="linux"}else{os="other"}return os};var getCharacter=function getCharacter(event){if(event.which==null){return String.fromCharCode(event.keyCode)}else if(event.which!==0&&event.charCode!==0){return String.fromCharCode(event.which)}return null};exports.default={getPlatformName:getPlatformName,getCharacter:getCharacter};module.exports=exports["default"]},function(module,exports){module.exports=on;module.exports.on=on;module.exports.off=off;function on(element,event,callback,capture){!element.addEventListener&&(event="on"+event);(element.addEventListener||element.attachEvent).call(element,event,callback,capture);return callback}function off(element,event,callback,capture){!element.removeEventListener&&(event="on"+event);(element.removeEventListener||element.detachEvent).call(element,event,callback,capture);return callback}},function(module,exports,__webpack_require__){"use strict";module.exports=function(e){var SPECIAL_KEYS_MAP,SPECIAL_CHARACTERS_MAP;SPECIAL_KEYS_MAP=__webpack_require__(282);SPECIAL_CHARACTERS_MAP=__webpack_require__(387);if(e.type==="keypress"){var character=String.fromCharCode(e.which);if(!e.shiftKey){character=character.toLowerCase()}return character}if(SPECIAL_KEYS_MAP[e.which]!==undefined){return SPECIAL_KEYS_MAP[e.which]}if(SPECIAL_CHARACTERS_MAP[e.which]!==undefined){return SPECIAL_CHARACTERS_MAP[e.which]}return String.fromCharCode(e.which).toLowerCase()}},function(module,exports,__webpack_require__){"use strict";module.exports={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",173:"minus",187:"plus",189:"minus",224:"meta"};for(var i=1;i<20;++i){module.exports[111+i]="f"+i}for(i=0;i<=9;++i){module.exports[i+96]=i}},,,,,function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(217);var _interopRequireWildcard=__webpack_require__(255);exports.__esModule=true;exports["default"]=void 0;var _react=_interopRequireWildcard(__webpack_require__(3));var _propTypes=_interopRequireDefault(__webpack_require__(214));var _Context=__webpack_require__(219);var _Subscription=_interopRequireDefault(__webpack_require__(239));function Provider(_ref){var store=_ref.store,context=_ref.context,children=_ref.children;var contextValue=(0,_react.useMemo)((function(){var subscription=new _Subscription["default"](store);subscription.onStateChange=subscription.notifyNestedSubs;return{store:store,subscription:subscription}}),[store]);var previousState=(0,_react.useMemo)((function(){return store.getState()}),[store]);(0,_react.useEffect)((function(){var subscription=contextValue.subscription;subscription.trySubscribe();if(previousState!==store.getState()){subscription.notifyNestedSubs()}return function(){subscription.tryUnsubscribe();subscription.onStateChange=null}}),[contextValue,previousState]);var Context=context||_Context.ReactReduxContext;return _react["default"].createElement(Context.Provider,{value:contextValue},children)}if(false){}var _default=Provider;exports["default"]=_default},function(module,exports){function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){module.exports=_typeof=function _typeof(obj){return typeof obj}}else{module.exports=_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}module.exports=_typeof},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(217);exports.__esModule=true;exports.createConnect=createConnect;exports["default"]=void 0;var _extends2=_interopRequireDefault(__webpack_require__(240));var _objectWithoutPropertiesLoose2=_interopRequireDefault(__webpack_require__(241));var _connectAdvanced=_interopRequireDefault(__webpack_require__(257));var _shallowEqual=_interopRequireDefault(__webpack_require__(259));var _mapDispatchToProps=_interopRequireDefault(__webpack_require__(290));var _mapStateToProps=_interopRequireDefault(__webpack_require__(292));var _mergeProps=_interopRequireDefault(__webpack_require__(293));var _selectorFactory=_interopRequireDefault(__webpack_require__(294));function match(arg,factories,name){for(var i=factories.length-1;i>=0;i--){var result=factories[i](arg);if(result)return result}return function(dispatch,options){throw new Error("Invalid value of type "+typeof arg+" for "+name+" argument when connecting component "+options.wrappedComponentName+".")}}function strictEqual(a,b){return a===b}function createConnect(_temp){var _ref=_temp===void 0?{}:_temp,_ref$connectHOC=_ref.connectHOC,connectHOC=_ref$connectHOC===void 0?_connectAdvanced["default"]:_ref$connectHOC,_ref$mapStateToPropsF=_ref.mapStateToPropsFactories,mapStateToPropsFactories=_ref$mapStateToPropsF===void 0?_mapStateToProps["default"]:_ref$mapStateToPropsF,_ref$mapDispatchToPro=_ref.mapDispatchToPropsFactories,mapDispatchToPropsFactories=_ref$mapDispatchToPro===void 0?_mapDispatchToProps["default"]:_ref$mapDispatchToPro,_ref$mergePropsFactor=_ref.mergePropsFactories,mergePropsFactories=_ref$mergePropsFactor===void 0?_mergeProps["default"]:_ref$mergePropsFactor,_ref$selectorFactory=_ref.selectorFactory,selectorFactory=_ref$selectorFactory===void 0?_selectorFactory["default"]:_ref$selectorFactory;return function connect(mapStateToProps,mapDispatchToProps,mergeProps,_ref2){if(_ref2===void 0){_ref2={}}var _ref3=_ref2,_ref3$pure=_ref3.pure,pure=_ref3$pure===void 0?true:_ref3$pure,_ref3$areStatesEqual=_ref3.areStatesEqual,areStatesEqual=_ref3$areStatesEqual===void 0?strictEqual:_ref3$areStatesEqual,_ref3$areOwnPropsEqua=_ref3.areOwnPropsEqual,areOwnPropsEqual=_ref3$areOwnPropsEqua===void 0?_shallowEqual["default"]:_ref3$areOwnPropsEqua,_ref3$areStatePropsEq=_ref3.areStatePropsEqual,areStatePropsEqual=_ref3$areStatePropsEq===void 0?_shallowEqual["default"]:_ref3$areStatePropsEq,_ref3$areMergedPropsE=_ref3.areMergedPropsEqual,areMergedPropsEqual=_ref3$areMergedPropsE===void 0?_shallowEqual["default"]:_ref3$areMergedPropsE,extraOptions=(0,_objectWithoutPropertiesLoose2["default"])(_ref3,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]);var initMapStateToProps=match(mapStateToProps,mapStateToPropsFactories,"mapStateToProps");var initMapDispatchToProps=match(mapDispatchToProps,mapDispatchToPropsFactories,"mapDispatchToProps");var initMergeProps=match(mergeProps,mergePropsFactories,"mergeProps");return connectHOC(selectorFactory,(0,_extends2["default"])({methodName:"connect",getDisplayName:function getDisplayName(name){return"Connect("+name+")"},shouldHandleStateChanges:Boolean(mapStateToProps),initMapStateToProps:initMapStateToProps,initMapDispatchToProps:initMapDispatchToProps,initMergeProps:initMergeProps,pure:pure,areStatesEqual:areStatesEqual,areOwnPropsEqual:areOwnPropsEqual,areStatePropsEqual:areStatePropsEqual,areMergedPropsEqual:areMergedPropsEqual},extraOptions))}}var _default=createConnect();exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.whenMapDispatchToPropsIsFunction=whenMapDispatchToPropsIsFunction;exports.whenMapDispatchToPropsIsMissing=whenMapDispatchToPropsIsMissing;exports.whenMapDispatchToPropsIsObject=whenMapDispatchToPropsIsObject;exports["default"]=void 0;var _redux=__webpack_require__(228);var _wrapMapToProps=__webpack_require__(260);function whenMapDispatchToPropsIsFunction(mapDispatchToProps){return typeof mapDispatchToProps==="function"?(0,_wrapMapToProps.wrapMapToPropsFunc)(mapDispatchToProps,"mapDispatchToProps"):undefined}function whenMapDispatchToPropsIsMissing(mapDispatchToProps){return!mapDispatchToProps?(0,_wrapMapToProps.wrapMapToPropsConstant)((function(dispatch){return{dispatch:dispatch}})):undefined}function whenMapDispatchToPropsIsObject(mapDispatchToProps){return mapDispatchToProps&&typeof mapDispatchToProps==="object"?(0,_wrapMapToProps.wrapMapToPropsConstant)((function(dispatch){return(0,_redux.bindActionCreators)(mapDispatchToProps,dispatch)})):undefined}var _default=[whenMapDispatchToPropsIsFunction,whenMapDispatchToPropsIsMissing,whenMapDispatchToPropsIsObject];exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports["default"]=isPlainObject;function isPlainObject(obj){if(typeof obj!=="object"||obj===null)return false;var proto=Object.getPrototypeOf(obj);if(proto===null)return true;var baseProto=proto;while(Object.getPrototypeOf(baseProto)!==null){baseProto=Object.getPrototypeOf(baseProto)}return proto===baseProto}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.whenMapStateToPropsIsFunction=whenMapStateToPropsIsFunction;exports.whenMapStateToPropsIsMissing=whenMapStateToPropsIsMissing;exports["default"]=void 0;var _wrapMapToProps=__webpack_require__(260);function whenMapStateToPropsIsFunction(mapStateToProps){return typeof mapStateToProps==="function"?(0,_wrapMapToProps.wrapMapToPropsFunc)(mapStateToProps,"mapStateToProps"):undefined}function whenMapStateToPropsIsMissing(mapStateToProps){return!mapStateToProps?(0,_wrapMapToProps.wrapMapToPropsConstant)((function(){return{}})):undefined}var _default=[whenMapStateToPropsIsFunction,whenMapStateToPropsIsMissing];exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(217);exports.__esModule=true;exports.defaultMergeProps=defaultMergeProps;exports.wrapMergePropsFunc=wrapMergePropsFunc;exports.whenMergePropsIsFunction=whenMergePropsIsFunction;exports.whenMergePropsIsOmitted=whenMergePropsIsOmitted;exports["default"]=void 0;var _extends2=_interopRequireDefault(__webpack_require__(240));var _verifyPlainObject=_interopRequireDefault(__webpack_require__(261));function defaultMergeProps(stateProps,dispatchProps,ownProps){return(0,_extends2["default"])({},ownProps,{},stateProps,{},dispatchProps)}function wrapMergePropsFunc(mergeProps){return function initMergePropsProxy(dispatch,_ref){var displayName=_ref.displayName,pure=_ref.pure,areMergedPropsEqual=_ref.areMergedPropsEqual;var hasRunOnce=false;var mergedProps;return function mergePropsProxy(stateProps,dispatchProps,ownProps){var nextMergedProps=mergeProps(stateProps,dispatchProps,ownProps);if(hasRunOnce){if(!pure||!areMergedPropsEqual(nextMergedProps,mergedProps))mergedProps=nextMergedProps}else{hasRunOnce=true;mergedProps=nextMergedProps;if(false){}}return mergedProps}}}function whenMergePropsIsFunction(mergeProps){return typeof mergeProps==="function"?wrapMergePropsFunc(mergeProps):undefined}function whenMergePropsIsOmitted(mergeProps){return!mergeProps?function(){return defaultMergeProps}:undefined}var _default=[whenMergePropsIsFunction,whenMergePropsIsOmitted];exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(217);exports.__esModule=true;exports.impureFinalPropsSelectorFactory=impureFinalPropsSelectorFactory;exports.pureFinalPropsSelectorFactory=pureFinalPropsSelectorFactory;exports["default"]=finalPropsSelectorFactory;var _objectWithoutPropertiesLoose2=_interopRequireDefault(__webpack_require__(241));var _verifySubselectors=_interopRequireDefault(__webpack_require__(295));function impureFinalPropsSelectorFactory(mapStateToProps,mapDispatchToProps,mergeProps,dispatch){return function impureFinalPropsSelector(state,ownProps){return mergeProps(mapStateToProps(state,ownProps),mapDispatchToProps(dispatch,ownProps),ownProps)}}function pureFinalPropsSelectorFactory(mapStateToProps,mapDispatchToProps,mergeProps,dispatch,_ref){var areStatesEqual=_ref.areStatesEqual,areOwnPropsEqual=_ref.areOwnPropsEqual,areStatePropsEqual=_ref.areStatePropsEqual;var hasRunAtLeastOnce=false;var state;var ownProps;var stateProps;var dispatchProps;var mergedProps;function handleFirstCall(firstState,firstOwnProps){state=firstState;ownProps=firstOwnProps;stateProps=mapStateToProps(state,ownProps);dispatchProps=mapDispatchToProps(dispatch,ownProps);mergedProps=mergeProps(stateProps,dispatchProps,ownProps);hasRunAtLeastOnce=true;return mergedProps}function handleNewPropsAndNewState(){stateProps=mapStateToProps(state,ownProps);if(mapDispatchToProps.dependsOnOwnProps)dispatchProps=mapDispatchToProps(dispatch,ownProps);mergedProps=mergeProps(stateProps,dispatchProps,ownProps);return mergedProps}function handleNewProps(){if(mapStateToProps.dependsOnOwnProps)stateProps=mapStateToProps(state,ownProps);if(mapDispatchToProps.dependsOnOwnProps)dispatchProps=mapDispatchToProps(dispatch,ownProps);mergedProps=mergeProps(stateProps,dispatchProps,ownProps);return mergedProps}function handleNewState(){var nextStateProps=mapStateToProps(state,ownProps);var statePropsChanged=!areStatePropsEqual(nextStateProps,stateProps);stateProps=nextStateProps;if(statePropsChanged)mergedProps=mergeProps(stateProps,dispatchProps,ownProps);return mergedProps}function handleSubsequentCalls(nextState,nextOwnProps){var propsChanged=!areOwnPropsEqual(nextOwnProps,ownProps);var stateChanged=!areStatesEqual(nextState,state);state=nextState;ownProps=nextOwnProps;if(propsChanged&&stateChanged)return handleNewPropsAndNewState();if(propsChanged)return handleNewProps();if(stateChanged)return handleNewState();return mergedProps}return function pureFinalPropsSelector(nextState,nextOwnProps){return hasRunAtLeastOnce?handleSubsequentCalls(nextState,nextOwnProps):handleFirstCall(nextState,nextOwnProps)}}function finalPropsSelectorFactory(dispatch,_ref2){var initMapStateToProps=_ref2.initMapStateToProps,initMapDispatchToProps=_ref2.initMapDispatchToProps,initMergeProps=_ref2.initMergeProps,options=(0,_objectWithoutPropertiesLoose2["default"])(_ref2,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]);var mapStateToProps=initMapStateToProps(dispatch,options);var mapDispatchToProps=initMapDispatchToProps(dispatch,options);var mergeProps=initMergeProps(dispatch,options);if(false){}var selectorFactory=options.pure?pureFinalPropsSelectorFactory:impureFinalPropsSelectorFactory;return selectorFactory(mapStateToProps,mapDispatchToProps,mergeProps,dispatch,options)}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(217);exports.__esModule=true;exports["default"]=verifySubselectors;var _warning=_interopRequireDefault(__webpack_require__(262));function verify(selector,methodName,displayName){if(!selector){throw new Error("Unexpected value for "+methodName+" in "+displayName+".")}else if(methodName==="mapStateToProps"||methodName==="mapDispatchToProps"){if(!Object.prototype.hasOwnProperty.call(selector,"dependsOnOwnProps")){(0,_warning["default"])("The selector for "+methodName+" of "+displayName+" did not specify a value for dependsOnOwnProps.")}}}function verifySubselectors(mapStateToProps,mapDispatchToProps,mergeProps,displayName){verify(mapStateToProps,"mapStateToProps",displayName);verify(mapDispatchToProps,"mapDispatchToProps",displayName);verify(mergeProps,"mergeProps",displayName)}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.createDispatchHook=createDispatchHook;exports.useDispatch=void 0;var _Context=__webpack_require__(219);var _useStore=__webpack_require__(263);function createDispatchHook(context){if(context===void 0){context=_Context.ReactReduxContext}var useStore=context===_Context.ReactReduxContext?_useStore.useStore:(0,_useStore.createStoreHook)(context);return function useDispatch(){var store=useStore();return store.dispatch}}var useDispatch=createDispatchHook();exports.useDispatch=useDispatch},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(217);exports.__esModule=true;exports.createSelectorHook=createSelectorHook;exports.useSelector=void 0;var _react=__webpack_require__(3);var _useReduxContext2=__webpack_require__(264);var _Subscription=_interopRequireDefault(__webpack_require__(239));var _useIsomorphicLayoutEffect=__webpack_require__(258);var _Context=__webpack_require__(219);var refEquality=function refEquality(a,b){return a===b};function useSelectorWithStoreAndSubscription(selector,equalityFn,store,contextSub){var _useReducer=(0,_react.useReducer)((function(s){return s+1}),0),forceRender=_useReducer[1];var subscription=(0,_react.useMemo)((function(){return new _Subscription["default"](store,contextSub)}),[store,contextSub]);var latestSubscriptionCallbackError=(0,_react.useRef)();var latestSelector=(0,_react.useRef)();var latestSelectedState=(0,_react.useRef)();var selectedState;try{if(selector!==latestSelector.current||latestSubscriptionCallbackError.current){selectedState=selector(store.getState())}else{selectedState=latestSelectedState.current}}catch(err){if(latestSubscriptionCallbackError.current){err.message+="\nThe error may be correlated with this previous error:\n"+latestSubscriptionCallbackError.current.stack+"\n\n"}throw err}(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)((function(){latestSelector.current=selector;latestSelectedState.current=selectedState;latestSubscriptionCallbackError.current=undefined}));(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)((function(){function checkForUpdates(){try{var newSelectedState=latestSelector.current(store.getState());if(equalityFn(newSelectedState,latestSelectedState.current)){return}latestSelectedState.current=newSelectedState}catch(err){latestSubscriptionCallbackError.current=err}forceRender({})}subscription.onStateChange=checkForUpdates;subscription.trySubscribe();checkForUpdates();return function(){return subscription.tryUnsubscribe()}}),[store,subscription]);return selectedState}function createSelectorHook(context){if(context===void 0){context=_Context.ReactReduxContext}var useReduxContext=context===_Context.ReactReduxContext?_useReduxContext2.useReduxContext:function(){return(0,_react.useContext)(context)};return function useSelector(selector,equalityFn){if(equalityFn===void 0){equalityFn=refEquality}if(false){}var _useReduxContext=useReduxContext(),store=_useReduxContext.store,contextSub=_useReduxContext.subscription;return useSelectorWithStoreAndSubscription(selector,equalityFn,store,contextSub)}}var useSelector=createSelectorHook();exports.useSelector=useSelector},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.unstable_batchedUpdates=void 0;var _reactDom=__webpack_require__(5);exports.unstable_batchedUpdates=_reactDom.unstable_batchedUpdates},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=combineActions;var _invariant=_interopRequireDefault(__webpack_require__(220));var _isFunction=_interopRequireDefault(__webpack_require__(229));var _isSymbol=_interopRequireDefault(__webpack_require__(300));var _isEmpty=_interopRequireDefault(__webpack_require__(265));var _toString=_interopRequireDefault(__webpack_require__(266));var _isString=_interopRequireDefault(__webpack_require__(267));var _constants=__webpack_require__(224);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function isValidActionType(type){return(0,_isString.default)(type)||(0,_isFunction.default)(type)||(0,_isSymbol.default)(type)}function isValidActionTypes(types){if((0,_isEmpty.default)(types)){return false}return types.every(isValidActionType)}function combineActions(){for(var _len=arguments.length,actionsTypes=new Array(_len),_key=0;_key<_len;_key++){actionsTypes[_key]=arguments[_key]}(0,_invariant.default)(isValidActionTypes(actionsTypes),"Expected action types to be strings, symbols, or action creators");var combinedActionType=actionsTypes.map(_toString.default).join(_constants.ACTION_TYPE_DELIMITER);return{toString:function toString(){return combinedActionType}}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return typeof value==="symbol"||typeof value==="object"&&Object.prototype.toString.call(value)==="[object Symbol]"};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return value===null};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=createActions;var _invariant=_interopRequireDefault(__webpack_require__(220));var _isPlainObject=_interopRequireDefault(__webpack_require__(225));var _isFunction=_interopRequireDefault(__webpack_require__(229));var _identity=_interopRequireDefault(__webpack_require__(243));var _isArray=_interopRequireDefault(__webpack_require__(303));var _isString=_interopRequireDefault(__webpack_require__(267));var _isNil=_interopRequireDefault(__webpack_require__(268));var _getLastElement=_interopRequireDefault(__webpack_require__(304));var _camelCase=_interopRequireDefault(__webpack_require__(269));var _arrayToObject=_interopRequireDefault(__webpack_require__(308));var _flattenActionMap=_interopRequireDefault(__webpack_require__(309));var _unflattenActionCreators=_interopRequireDefault(__webpack_require__(310));var _createAction=_interopRequireDefault(__webpack_require__(242));var _constants=__webpack_require__(224);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter((function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable})))}ownKeys.forEach((function(key){_defineProperty(target,key,source[key])}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createActions(actionMap){for(var _len=arguments.length,identityActions=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){identityActions[_key-1]=arguments[_key]}var options=(0,_isPlainObject.default)((0,_getLastElement.default)(identityActions))?identityActions.pop():{};(0,_invariant.default)(identityActions.every(_isString.default)&&((0,_isString.default)(actionMap)||(0,_isPlainObject.default)(actionMap)),"Expected optional object followed by string action types");if((0,_isString.default)(actionMap)){return actionCreatorsFromIdentityActions([actionMap].concat(identityActions),options)}return _objectSpread({},actionCreatorsFromActionMap(actionMap,options),actionCreatorsFromIdentityActions(identityActions,options))}function actionCreatorsFromActionMap(actionMap,options){var flatActionMap=(0,_flattenActionMap.default)(actionMap,options);var flatActionCreators=actionMapToActionCreators(flatActionMap);return(0,_unflattenActionCreators.default)(flatActionCreators,options)}function actionMapToActionCreators(actionMap,_temp){var _ref=_temp===void 0?{}:_temp,prefix=_ref.prefix,_ref$namespace=_ref.namespace,namespace=_ref$namespace===void 0?_constants.DEFAULT_NAMESPACE:_ref$namespace;function isValidActionMapValue(actionMapValue){if((0,_isFunction.default)(actionMapValue)||(0,_isNil.default)(actionMapValue)){return true}if((0,_isArray.default)(actionMapValue)){var _actionMapValue$=actionMapValue[0],payload=_actionMapValue$===void 0?_identity.default:_actionMapValue$,meta=actionMapValue[1];return(0,_isFunction.default)(payload)&&(0,_isFunction.default)(meta)}return false}return(0,_arrayToObject.default)(Object.keys(actionMap),(function(partialActionCreators,type){var _objectSpread2;var actionMapValue=actionMap[type];(0,_invariant.default)(isValidActionMapValue(actionMapValue),"Expected function, undefined, null, or array with payload and meta "+("functions for "+type));var prefixedType=prefix?""+prefix+namespace+type:type;var actionCreator=(0,_isArray.default)(actionMapValue)?_createAction.default.apply(void 0,[prefixedType].concat(actionMapValue)):(0,_createAction.default)(prefixedType,actionMapValue);return _objectSpread({},partialActionCreators,(_objectSpread2={},_objectSpread2[type]=actionCreator,_objectSpread2))}))}function actionCreatorsFromIdentityActions(identityActions,options){var actionMap=(0,_arrayToObject.default)(identityActions,(function(partialActionMap,type){var _objectSpread3;return _objectSpread({},partialActionMap,(_objectSpread3={},_objectSpread3[type]=_identity.default,_objectSpread3))}));var actionCreators=actionMapToActionCreators(actionMap,options);return(0,_arrayToObject.default)(Object.keys(actionCreators),(function(partialActionCreators,type){var _objectSpread4;return _objectSpread({},partialActionCreators,(_objectSpread4={},_objectSpread4[(0,_camelCase.default)(type)]=actionCreators[type],_objectSpread4))}))}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return Array.isArray(value)};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(array){return array[array.length-1]};exports.default=_default},function(module,exports,__webpack_require__){var space=__webpack_require__(306);module.exports=toCamelCase;function toCamelCase(string){return space(string).replace(/\s(\w)/g,(function(matches,letter){return letter.toUpperCase()}))}},function(module,exports,__webpack_require__){var clean=__webpack_require__(307);module.exports=toSpaceCase;function toSpaceCase(string){return clean(string).replace(/[\W_]+(.|$)/g,(function(matches,match){return match?" "+match:""})).trim()}},function(module,exports){module.exports=toNoCase;var hasSpace=/\s/;var hasSeparator=/(_|-|\.|:)/;var hasCamel=/([a-z][A-Z]|[A-Z][a-z])/;function toNoCase(string){if(hasSpace.test(string))return string.toLowerCase();if(hasSeparator.test(string))return(unseparate(string)||string).toLowerCase();if(hasCamel.test(string))return uncamelize(string).toLowerCase();return string.toLowerCase()}var separatorSplitter=/[\W_]+(.|$)/g;function unseparate(string){return string.replace(separatorSplitter,(function(m,next){return next?" "+next:""}))}var camelSplitter=/(.)([A-Z]+)/g;function uncamelize(string){return string.replace(camelSplitter,(function(m,previous,uppers){return previous+" "+uppers.toLowerCase().split("").join(" ")}))}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(array,callback){return array.reduce((function(partialObject,element){return callback(partialObject,element)}),{})};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _isPlainObject=_interopRequireDefault(__webpack_require__(225));var _flattenWhenNode=_interopRequireDefault(__webpack_require__(270));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=(0,_flattenWhenNode.default)(_isPlainObject.default);exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=unflattenActionCreators;var _constants=__webpack_require__(224);var _isEmpty=_interopRequireDefault(__webpack_require__(265));var _camelCase=_interopRequireDefault(__webpack_require__(269));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function unflattenActionCreators(flatActionCreators,_temp){var _ref=_temp===void 0?{}:_temp,_ref$namespace=_ref.namespace,namespace=_ref$namespace===void 0?_constants.DEFAULT_NAMESPACE:_ref$namespace,prefix=_ref.prefix;function unflatten(flatActionType,partialNestedActionCreators,partialFlatActionTypePath){var nextNamespace=(0,_camelCase.default)(partialFlatActionTypePath.shift());if((0,_isEmpty.default)(partialFlatActionTypePath)){partialNestedActionCreators[nextNamespace]=flatActionCreators[flatActionType]}else{if(!partialNestedActionCreators[nextNamespace]){partialNestedActionCreators[nextNamespace]={}}unflatten(flatActionType,partialNestedActionCreators[nextNamespace],partialFlatActionTypePath)}}var nestedActionCreators={};Object.getOwnPropertyNames(flatActionCreators).forEach((function(type){var unprefixedType=prefix?type.replace(""+prefix+namespace,""):type;return unflatten(type,nestedActionCreators,unprefixedType.split(namespace))}));return nestedActionCreators}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _justCurryIt=_interopRequireDefault(__webpack_require__(312));var _createAction=_interopRequireDefault(__webpack_require__(242));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=function _default(type,payloadCreator){return(0,_justCurryIt.default)((0,_createAction.default)(type,payloadCreator),payloadCreator.length)};exports.default=_default},function(module,exports){module.exports=curry;function curry(fn,arity){return function curried(){if(arity==null){arity=fn.length}var args=[].slice.call(arguments);if(args.length>=arity){return fn.apply(this,args)}else{return function(){return curried.apply(this,args.concat([].slice.call(arguments)))}}}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _default=function _default(value){return value===undefined};exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=handleActions;var _reduceReducers=_interopRequireDefault(__webpack_require__(315));var _invariant=_interopRequireDefault(__webpack_require__(220));var _isPlainObject=_interopRequireDefault(__webpack_require__(225));var _isMap=_interopRequireDefault(__webpack_require__(230));var _ownKeys=_interopRequireDefault(__webpack_require__(244));var _flattenReducerMap=_interopRequireDefault(__webpack_require__(316));var _handleAction=_interopRequireDefault(__webpack_require__(272));var _get=_interopRequireDefault(__webpack_require__(271));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function handleActions(handlers,defaultState,options){if(options===void 0){options={}}(0,_invariant.default)((0,_isPlainObject.default)(handlers)||(0,_isMap.default)(handlers),"Expected handlers to be a plain object.");var flattenedReducerMap=(0,_flattenReducerMap.default)(handlers,options);var reducers=(0,_ownKeys.default)(flattenedReducerMap).map((function(type){return(0,_handleAction.default)(type,(0,_get.default)(type,flattenedReducerMap),defaultState)}));var reducer=_reduceReducers.default.apply(void 0,reducers.concat([defaultState]));return function(state,action){if(state===void 0){state=defaultState}return reducer(state,action)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var initialState=typeof args[args.length-1]!=="function"&&args.pop();var reducers=args;if(typeof initialState==="undefined"){throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.")}return function(prevState,value){for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2]}var prevStateIsUndefined=typeof prevState==="undefined";var valueIsUndefined=typeof value==="undefined";if(prevStateIsUndefined&&valueIsUndefined&&initialState){return initialState}return reducers.reduce((function(newState,reducer){return reducer.apply(undefined,[newState,value].concat(args))}),prevStateIsUndefined&&!valueIsUndefined&&initialState?initialState:prevState)}};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=void 0;var _isPlainObject=_interopRequireDefault(__webpack_require__(225));var _isMap=_interopRequireDefault(__webpack_require__(230));var _hasGeneratorInterface=_interopRequireDefault(__webpack_require__(317));var _flattenWhenNode=_interopRequireDefault(__webpack_require__(270));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=(0,_flattenWhenNode.default)((function(node){return((0,_isPlainObject.default)(node)||(0,_isMap.default)(node))&&!(0,_hasGeneratorInterface.default)(node)}));exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.default=hasGeneratorInterface;var _ownKeys=_interopRequireDefault(__webpack_require__(244));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function hasGeneratorInterface(handler){var keys=(0,_ownKeys.default)(handler);var hasOnlyInterfaceNames=keys.every((function(ownKey){return ownKey==="next"||ownKey==="throw"}));return keys.length&&keys.length<=2&&hasOnlyInterfaceNames}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _create_thunk=__webpack_require__(319);Object.defineProperty(exports,"createThunk",{enumerable:true,get:function get(){return _create_thunk.createThunk}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createThunk=createThunk;function createThunk(type,fn){var actionCreator=function actionCreator(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return function(dispatch,getState){return fn.apply(undefined,[{dispatch:dispatch,getState:getState,type:type}].concat(args))}};actionCreator.toString=function(){return type.toString()};return actionCreator}},function(module,exports){module.exports=function(){throw new Error("define cannot be used indirect")}},function(module,exports,__webpack_require__){
/*!
 * @scant/router v0.1.0
 * (c) 2018-present Joe Fleming (https://github.com/w33ble)
 * Released under the MIT License.
 */
!function(r,e){true?module.exports=e(__webpack_require__(322)):undefined}(this,(function(r){"use strict";r=r&&r.hasOwnProperty("default")?r.default:r;var e=function(r,e){return"object"===r?"object"==typeof e&&null!=e&&!Array.isArray(e):"array"===r?Array.isArray(e):"null"===r?null===e:"unset"===r?null==e:typeof e===r},n=function(r){return/^\//.test(r)},t=function(){};var a=function(r){if(!e("object",r))return!1;var n,t,a=e("unset",r.action)||e("function",r.action),i=e("unset",r.children)||e("array",r.children),o=e("unset",r.meta)||e("object",r.meta);return n=r,t="path",Object.prototype.hasOwnProperty.call(n,t)&&a&&i&&o},i=function(r,e){if(void 0===e&&(e=""),!n(r))return!1;var t=""+e.replace(/\/$/,"")+r;return t.length>1?t.replace(/\/$/,""):t},o=function(r){var e=r.match(/^(\/[^?#\s]*)(\?[^#\s]*)?(#[^\s]*)?$/);if(!e)throw new Error("Failed to extract pathname: "+r);return{url:e[0],pathname:e[1],search:e[2],hash:e[3]}},u=function(r){return{path:r.path,name:r.name,meta:r.meta}};return function(s,c){if(void 0===c&&(c={}),!e("array",s))throw new Error("An array of route objects is required");var f=c.useHash?"#":c.useHashBang?"#!":"",h=n(c.basepath)?i(c.basepath):"",p={configs:[],parsers:[],names:[]};function m(r){return p.parsers.reduce((function(e,n,t){if(!1!==e)return e;var a=n.match(r);return a?Object.assign({},p.configs[t],{params:a,index:t}):e}),!1)}return s.forEach((function(n){(function n(o,u){if(void 0===u&&(u=""),!a(o))throw new Error("Route definition is invalid: "+JSON.stringify(o));var s=i(o.path,u);if(!1===s)throw new Error("Route's path is invalid: "+o.path);return e("array",o.children)?o.children.reduce((function(r,e){return r.concat(n(e,s))}),[]):[{name:o.name,path:s,meta:o.meta||{},action:o.action||t,parser:new r(s,{segmentNameCharset:"a-zA-Z0-9_-",segmentValueCharset:"a-zA-Z0-9-_~ %."})}]})(n).forEach((function(r){var e=r.parser,n=function(r,e){var n={};for(var t in r)e.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t]);return n}(r,["parser"]);if(null!=n.name&&p.names.includes(n.name))throw new Error("Route with name '"+n.name+"' already defined, names must be unique");p.parsers.push(e),p.configs.push(n),p.names.push(n.name)}))})),{match:function(r){var e=m(o(r).pathname);return!1!==e&&u(e)},parse:function(r){return new Promise(function(e,n){var t,a,i;return t=o(r),!1===(a=m(t.pathname))?n(new Error("No matching route found: "+r)):(Object.keys(a.params).forEach((function(r){var e=parseFloat(a.params[r]);Number.isNaN(e)||(a.params[r]=e)})),i={location:t,params:a.params,match:u(a),router:this},Promise.resolve(a.action(i)).then(function(r){try{return e(i)}catch(r){return n(r)}}.bind(this),n))}.bind(this))},create:function(r,e){if(void 0===e&&(e={}),null==r)return!1;if(n(r))return""+f+h+r;if(!p.names.includes(r))return!1;var t=p.configs.findIndex((function(e){return e.name===r}));try{var a=p.parsers[t].stringify(e);return""+f+h+a}catch(r){throw r.message="Route can not be created, "+r.message,r}}}}}))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var slice=[].slice;(function(root,factory){if(true&&__webpack_require__(274)!=null){return!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__=typeof __WEBPACK_AMD_DEFINE_FACTORY__==="function"?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else if(true&&exports!==null){return module.exports=factory()}else{return root.UrlPattern=factory()}})(this,(function(){var P,UrlPattern,astNodeContainsSegmentsForProvidedParams,astNodeToNames,astNodeToRegexString,baseAstNodeToRegexString,concatMap,defaultOptions,escapeForRegex,getParam,keysAndValuesToObject,newParser,regexGroupCount,stringConcatMap,stringify;escapeForRegex=function(string){return string.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")};concatMap=function(array,f){var i,length,results;results=[];i=-1;length=array.length;while(++i<length){results=results.concat(f(array[i]))}return results};stringConcatMap=function(array,f){var i,length,result;result="";i=-1;length=array.length;while(++i<length){result+=f(array[i])}return result};regexGroupCount=function(regex){return new RegExp(regex.toString()+"|").exec("").length-1};keysAndValuesToObject=function(keys,values){var i,key,length,object,value;object={};i=-1;length=keys.length;while(++i<length){key=keys[i];value=values[i];if(value==null){continue}if(object[key]!=null){if(!Array.isArray(object[key])){object[key]=[object[key]]}object[key].push(value)}else{object[key]=value}}return object};P={};P.Result=function(value,rest){this.value=value;this.rest=rest};P.Tagged=function(tag,value){this.tag=tag;this.value=value};P.tag=function(tag,parser){return function(input){var result,tagged;result=parser(input);if(result==null){return}tagged=new P.Tagged(tag,result.value);return new P.Result(tagged,result.rest)}};P.regex=function(regex){return function(input){var matches,result;matches=regex.exec(input);if(matches==null){return}result=matches[0];return new P.Result(result,input.slice(result.length))}};P.sequence=function(){var parsers;parsers=1<=arguments.length?slice.call(arguments,0):[];return function(input){var i,length,parser,rest,result,values;i=-1;length=parsers.length;values=[];rest=input;while(++i<length){parser=parsers[i];result=parser(rest);if(result==null){return}values.push(result.value);rest=result.rest}return new P.Result(values,rest)}};P.pick=function(){var indexes,parsers;indexes=arguments[0],parsers=2<=arguments.length?slice.call(arguments,1):[];return function(input){var array,result;result=P.sequence.apply(P,parsers)(input);if(result==null){return}array=result.value;result.value=array[indexes];return result}};P.string=function(string){var length;length=string.length;return function(input){if(input.slice(0,length)===string){return new P.Result(string,input.slice(length))}}};P.lazy=function(fn){var cached;cached=null;return function(input){if(cached==null){cached=fn()}return cached(input)}};P.baseMany=function(parser,end,stringResult,atLeastOneResultRequired,input){var endResult,parserResult,rest,results;rest=input;results=stringResult?"":[];while(true){if(end!=null){endResult=end(rest);if(endResult!=null){break}}parserResult=parser(rest);if(parserResult==null){break}if(stringResult){results+=parserResult.value}else{results.push(parserResult.value)}rest=parserResult.rest}if(atLeastOneResultRequired&&results.length===0){return}return new P.Result(results,rest)};P.many1=function(parser){return function(input){return P.baseMany(parser,null,false,true,input)}};P.concatMany1Till=function(parser,end){return function(input){return P.baseMany(parser,end,true,true,input)}};P.firstChoice=function(){var parsers;parsers=1<=arguments.length?slice.call(arguments,0):[];return function(input){var i,length,parser,result;i=-1;length=parsers.length;while(++i<length){parser=parsers[i];result=parser(input);if(result!=null){return result}}}};newParser=function(options){var U;U={};U.wildcard=P.tag("wildcard",P.string(options.wildcardChar));U.optional=P.tag("optional",P.pick(1,P.string(options.optionalSegmentStartChar),P.lazy((function(){return U.pattern})),P.string(options.optionalSegmentEndChar)));U.name=P.regex(new RegExp("^["+options.segmentNameCharset+"]+"));U.named=P.tag("named",P.pick(1,P.string(options.segmentNameStartChar),P.lazy((function(){return U.name}))));U.escapedChar=P.pick(1,P.string(options.escapeChar),P.regex(/^./));U["static"]=P.tag("static",P.concatMany1Till(P.firstChoice(P.lazy((function(){return U.escapedChar})),P.regex(/^./)),P.firstChoice(P.string(options.segmentNameStartChar),P.string(options.optionalSegmentStartChar),P.string(options.optionalSegmentEndChar),U.wildcard)));U.token=P.lazy((function(){return P.firstChoice(U.wildcard,U.optional,U.named,U["static"])}));U.pattern=P.many1(P.lazy((function(){return U.token})));return U};defaultOptions={escapeChar:"\\",segmentNameStartChar:":",segmentValueCharset:"a-zA-Z0-9-_~ %",segmentNameCharset:"a-zA-Z0-9",optionalSegmentStartChar:"(",optionalSegmentEndChar:")",wildcardChar:"*"};baseAstNodeToRegexString=function(astNode,segmentValueCharset){if(Array.isArray(astNode)){return stringConcatMap(astNode,(function(node){return baseAstNodeToRegexString(node,segmentValueCharset)}))}switch(astNode.tag){case"wildcard":return"(.*?)";case"named":return"(["+segmentValueCharset+"]+)";case"static":return escapeForRegex(astNode.value);case"optional":return"(?:"+baseAstNodeToRegexString(astNode.value,segmentValueCharset)+")?"}};astNodeToRegexString=function(astNode,segmentValueCharset){if(segmentValueCharset==null){segmentValueCharset=defaultOptions.segmentValueCharset}return"^"+baseAstNodeToRegexString(astNode,segmentValueCharset)+"$"};astNodeToNames=function(astNode){if(Array.isArray(astNode)){return concatMap(astNode,astNodeToNames)}switch(astNode.tag){case"wildcard":return["_"];case"named":return[astNode.value];case"static":return[];case"optional":return astNodeToNames(astNode.value)}};getParam=function(params,key,nextIndexes,sideEffects){var index,maxIndex,result,value;if(sideEffects==null){sideEffects=false}value=params[key];if(value==null){if(sideEffects){throw new Error("no values provided for key `"+key+"`")}else{return}}index=nextIndexes[key]||0;maxIndex=Array.isArray(value)?value.length-1:0;if(index>maxIndex){if(sideEffects){throw new Error("too few values provided for key `"+key+"`")}else{return}}result=Array.isArray(value)?value[index]:value;if(sideEffects){nextIndexes[key]=index+1}return result};astNodeContainsSegmentsForProvidedParams=function(astNode,params,nextIndexes){var i,length;if(Array.isArray(astNode)){i=-1;length=astNode.length;while(++i<length){if(astNodeContainsSegmentsForProvidedParams(astNode[i],params,nextIndexes)){return true}}return false}switch(astNode.tag){case"wildcard":return getParam(params,"_",nextIndexes,false)!=null;case"named":return getParam(params,astNode.value,nextIndexes,false)!=null;case"static":return false;case"optional":return astNodeContainsSegmentsForProvidedParams(astNode.value,params,nextIndexes)}};stringify=function(astNode,params,nextIndexes){if(Array.isArray(astNode)){return stringConcatMap(astNode,(function(node){return stringify(node,params,nextIndexes)}))}switch(astNode.tag){case"wildcard":return getParam(params,"_",nextIndexes,true);case"named":return getParam(params,astNode.value,nextIndexes,true);case"static":return astNode.value;case"optional":if(astNodeContainsSegmentsForProvidedParams(astNode.value,params,nextIndexes)){return stringify(astNode.value,params,nextIndexes)}else{return""}}};UrlPattern=function(arg1,arg2){var groupCount,options,parsed,parser,withoutWhitespace;if(arg1 instanceof UrlPattern){this.isRegex=arg1.isRegex;this.regex=arg1.regex;this.ast=arg1.ast;this.names=arg1.names;return}this.isRegex=arg1 instanceof RegExp;if(!("string"===typeof arg1||this.isRegex)){throw new TypeError("argument must be a regex or a string")}if(this.isRegex){this.regex=arg1;if(arg2!=null){if(!Array.isArray(arg2)){throw new Error("if first argument is a regex the second argument may be an array of group names but you provided something else")}groupCount=regexGroupCount(this.regex);if(arg2.length!==groupCount){throw new Error("regex contains "+groupCount+" groups but array of group names contains "+arg2.length)}this.names=arg2}return}if(arg1===""){throw new Error("argument must not be the empty string")}withoutWhitespace=arg1.replace(/\s+/g,"");if(withoutWhitespace!==arg1){throw new Error("argument must not contain whitespace")}options={escapeChar:(arg2!=null?arg2.escapeChar:void 0)||defaultOptions.escapeChar,segmentNameStartChar:(arg2!=null?arg2.segmentNameStartChar:void 0)||defaultOptions.segmentNameStartChar,segmentNameCharset:(arg2!=null?arg2.segmentNameCharset:void 0)||defaultOptions.segmentNameCharset,segmentValueCharset:(arg2!=null?arg2.segmentValueCharset:void 0)||defaultOptions.segmentValueCharset,optionalSegmentStartChar:(arg2!=null?arg2.optionalSegmentStartChar:void 0)||defaultOptions.optionalSegmentStartChar,optionalSegmentEndChar:(arg2!=null?arg2.optionalSegmentEndChar:void 0)||defaultOptions.optionalSegmentEndChar,wildcardChar:(arg2!=null?arg2.wildcardChar:void 0)||defaultOptions.wildcardChar};parser=newParser(options);parsed=parser.pattern(arg1);if(parsed==null){throw new Error("couldn't parse pattern")}if(parsed.rest!==""){throw new Error("could only partially parse pattern")}this.ast=parsed.value;this.regex=new RegExp(astNodeToRegexString(this.ast,options.segmentValueCharset));this.names=astNodeToNames(this.ast)};UrlPattern.prototype.match=function(url){var groups,match;match=this.regex.exec(url);if(match==null){return null}groups=match.slice(1);if(this.names){return keysAndValuesToObject(this.names,groups)}else{return groups}};UrlPattern.prototype.stringify=function(params){if(params==null){params={}}if(this.isRegex){throw new Error("can't stringify patterns generated from a regex")}if(params!==Object(params)){throw new Error("argument must be an object or undefined")}return stringify(this.ast,params,{})};UrlPattern.escapeForRegex=escapeForRegex;UrlPattern.concatMap=concatMap;UrlPattern.stringConcatMap=stringConcatMap;UrlPattern.regexGroupCount=regexGroupCount;UrlPattern.keysAndValuesToObject=keysAndValuesToObject;UrlPattern.P=P;UrlPattern.newParser=newParser;UrlPattern.defaultOptions=defaultOptions;UrlPattern.astNodeToRegexString=astNodeToRegexString;UrlPattern.astNodeToNames=astNodeToNames;UrlPattern.getParam=getParam;UrlPattern.astNodeContainsSegmentsForProvidedParams=astNodeContainsSegmentsForProvidedParams;UrlPattern.stringify=stringify;return UrlPattern}))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;var LZString=function(){var f=String.fromCharCode;var keyStrBase64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var keyStrUriSafe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$";var baseReverseDic={};function getBaseValue(alphabet,character){if(!baseReverseDic[alphabet]){baseReverseDic[alphabet]={};for(var i=0;i<alphabet.length;i++){baseReverseDic[alphabet][alphabet.charAt(i)]=i}}return baseReverseDic[alphabet][character]}var LZString={compressToBase64:function(input){if(input==null)return"";var res=LZString._compress(input,6,(function(a){return keyStrBase64.charAt(a)}));switch(res.length%4){default:case 0:return res;case 1:return res+"===";case 2:return res+"==";case 3:return res+"="}},decompressFromBase64:function(input){if(input==null)return"";if(input=="")return null;return LZString._decompress(input.length,32,(function(index){return getBaseValue(keyStrBase64,input.charAt(index))}))},compressToUTF16:function(input){if(input==null)return"";return LZString._compress(input,15,(function(a){return f(a+32)}))+" "},decompressFromUTF16:function(compressed){if(compressed==null)return"";if(compressed=="")return null;return LZString._decompress(compressed.length,16384,(function(index){return compressed.charCodeAt(index)-32}))},compressToUint8Array:function(uncompressed){var compressed=LZString.compress(uncompressed);var buf=new Uint8Array(compressed.length*2);for(var i=0,TotalLen=compressed.length;i<TotalLen;i++){var current_value=compressed.charCodeAt(i);buf[i*2]=current_value>>>8;buf[i*2+1]=current_value%256}return buf},decompressFromUint8Array:function(compressed){if(compressed===null||compressed===undefined){return LZString.decompress(compressed)}else{var buf=new Array(compressed.length/2);for(var i=0,TotalLen=buf.length;i<TotalLen;i++){buf[i]=compressed[i*2]*256+compressed[i*2+1]}var result=[];buf.forEach((function(c){result.push(f(c))}));return LZString.decompress(result.join(""))}},compressToEncodedURIComponent:function(input){if(input==null)return"";return LZString._compress(input,6,(function(a){return keyStrUriSafe.charAt(a)}))},decompressFromEncodedURIComponent:function(input){if(input==null)return"";if(input=="")return null;input=input.replace(/ /g,"+");return LZString._decompress(input.length,32,(function(index){return getBaseValue(keyStrUriSafe,input.charAt(index))}))},compress:function(uncompressed){return LZString._compress(uncompressed,16,(function(a){return f(a)}))},_compress:function(uncompressed,bitsPerChar,getCharFromInt){if(uncompressed==null)return"";var i,value,context_dictionary={},context_dictionaryToCreate={},context_c="",context_wc="",context_w="",context_enlargeIn=2,context_dictSize=3,context_numBits=2,context_data=[],context_data_val=0,context_data_position=0,ii;for(ii=0;ii<uncompressed.length;ii+=1){context_c=uncompressed.charAt(ii);if(!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)){context_dictionary[context_c]=context_dictSize++;context_dictionaryToCreate[context_c]=true}context_wc=context_w+context_c;if(Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)){context_w=context_wc}else{if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}}value=context_w.charCodeAt(0);for(i=0;i<8;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}}else{value=1;for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=0}value=context_w.charCodeAt(0);for(i=0;i<16;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}delete context_dictionaryToCreate[context_w]}else{value=context_dictionary[context_w];for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}context_dictionary[context_wc]=context_dictSize++;context_w=String(context_c)}}if(context_w!==""){if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}}value=context_w.charCodeAt(0);for(i=0;i<8;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}}else{value=1;for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=0}value=context_w.charCodeAt(0);for(i=0;i<16;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}delete context_dictionaryToCreate[context_w]}else{value=context_dictionary[context_w];for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}}value=2;for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}while(true){context_data_val=context_data_val<<1;if(context_data_position==bitsPerChar-1){context_data.push(getCharFromInt(context_data_val));break}else context_data_position++}return context_data.join("")},decompress:function(compressed){if(compressed==null)return"";if(compressed=="")return null;return LZString._decompress(compressed.length,32768,(function(index){return compressed.charCodeAt(index)}))},_decompress:function(length,resetValue,getNextValue){var dictionary=[],next,enlargeIn=4,dictSize=4,numBits=3,entry="",result=[],i,w,bits,resb,maxpower,power,c,data={val:getNextValue(0),position:resetValue,index:1};for(i=0;i<3;i+=1){dictionary[i]=i}bits=0;maxpower=Math.pow(2,2);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}switch(next=bits){case 0:bits=0;maxpower=Math.pow(2,8);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}c=f(bits);break;case 1:bits=0;maxpower=Math.pow(2,16);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}c=f(bits);break;case 2:return""}dictionary[3]=c;w=c;result.push(c);while(true){if(data.index>length){return""}bits=0;maxpower=Math.pow(2,numBits);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}switch(c=bits){case 0:bits=0;maxpower=Math.pow(2,8);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}dictionary[dictSize++]=f(bits);c=dictSize-1;enlargeIn--;break;case 1:bits=0;maxpower=Math.pow(2,16);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}dictionary[dictSize++]=f(bits);c=dictSize-1;enlargeIn--;break;case 2:return result.join("")}if(enlargeIn==0){enlargeIn=Math.pow(2,numBits);numBits++}if(dictionary[c]){entry=dictionary[c]}else{if(c===dictSize){entry=w+w.charAt(0)}else{return null}}result.push(entry);dictionary[dictSize++]=w+entry.charAt(0);enlargeIn--;w=entry;if(enlargeIn==0){enlargeIn=Math.pow(2,numBits);numBits++}}}};return LZString}();if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return LZString}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}},function(module,exports,__webpack_require__){(function(global,factory){true?module.exports=factory(__webpack_require__(275)):undefined})(this,(function(history){"use strict";function warning(condition,message){if(condition)return;console.warn(message)}function invariant(condition,message){if(condition)return;throw new Error("Invariant failed: ".concat(message||""))}function createTransitionManager(){var prompt=null;function setPrompt(nextPrompt){warning(prompt==null,"A history supports only one prompt at a time");prompt=nextPrompt;return function(){if(prompt===nextPrompt)prompt=null}}function confirmTransitionTo(location,action,getUserConfirmation,callback){if(prompt!=null){var result=typeof prompt==="function"?prompt(location,action):prompt;if(typeof result==="string"){if(typeof getUserConfirmation==="function"){getUserConfirmation(result,callback)}else{warning(false,"A history needs a getUserConfirmation function in order to use a prompt message");callback(true)}}else{callback(result!==false)}}else{callback(true)}}var listeners=[];function appendListener(fn){var isActive=true;function listener(){if(isActive)fn.apply(void 0,arguments)}listeners.push(listener);return function(){isActive=false;listeners=listeners.filter((function(item){return item!==listener}))}}function notifyListeners(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}listeners.forEach((function(listener){return listener.apply(void 0,args)}))}return{setPrompt:setPrompt,confirmTransitionTo:confirmTransitionTo,appendListener:appendListener,notifyListeners:notifyListeners}}var canUseDOM=!!(typeof window!=="undefined"&&window.document&&window.document.createElement);function getConfirmation(message,callback){callback(window.confirm(message))}function supportsHistory(){var ua=window.navigator.userAgent;if((ua.indexOf("Android 2.")!==-1||ua.indexOf("Android 4.0")!==-1)&&ua.indexOf("Mobile Safari")!==-1&&ua.indexOf("Chrome")===-1&&ua.indexOf("Windows Phone")===-1)return false;return window.history&&"pushState"in window.history}function supportsGoWithoutReloadUsingHash(){return window.navigator.userAgent.indexOf("Firefox")===-1}function addLeadingSlash(path){return path.charAt(0)==="/"?path:"/".concat(path)}function stripLeadingSlash(path){return path.charAt(0)==="/"?path.substr(1):path}function hasBasename(path,prefix){return path.toLowerCase().indexOf(prefix.toLowerCase())===0&&"/?#".indexOf(path.charAt(prefix.length))!==-1}function stripBasename(path,prefix){return hasBasename(path,prefix)?path.substr(prefix.length):path}function stripTrailingSlash(path){return path.charAt(path.length-1)==="/"?path.slice(0,-1):path}function createPath(location){var pathname=location.pathname,search=location.search,hash=location.hash;var path=pathname||"/";if(search&&search!=="?")path+=search.charAt(0)==="?"?search:"?".concat(search);if(hash&&hash!=="#")path+=hash.charAt(0)==="#"?hash:"#".concat(hash);return path}var PopStateEvent="popstate";var HashChangeEvent="hashchange";var getHistoryState=function getHistoryState(){try{return window.history.state||{}}catch(e){return{}}};var HashPathCoders={hashbang:{encodePath:function encodePath(path){return path.charAt(0)==="!"?path:"!/".concat(stripLeadingSlash(path))},decodePath:function decodePath(path){return path.charAt(0)==="!"?path.substr(1):path}},noslash:{encodePath:stripLeadingSlash,decodePath:addLeadingSlash},slash:{encodePath:addLeadingSlash,decodePath:addLeadingSlash}};var getHashPath=function getHashPath(){var href=window.location.href;var hashIndex=href.indexOf("#");return hashIndex===-1?"":href.substring(hashIndex+1)};var pushHashPath=function pushHashPath(path){window.location.hash=path};var replaceHashPath=function replaceHashPath(path){var hashIndex=window.location.href.indexOf("#");window.location.replace("".concat(window.location.href.slice(0,hashIndex>=0?hashIndex:0),"#").concat(path))};var createHashStateHistory=function createHashStateHistory(){var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};invariant(canUseDOM,"Hash history needs a DOM");var globalHistory=window.history;var canGoWithoutReload=supportsGoWithoutReloadUsingHash();var canUseHistory=supportsHistory();var _props$getUserConfirm=props.getUserConfirmation,getUserConfirmation=_props$getUserConfirm===void 0?getConfirmation:_props$getUserConfirm,_props$hashType=props.hashType,hashType=_props$hashType===void 0?"slash":_props$hashType,_props$keyLength=props.keyLength,keyLength=_props$keyLength===void 0?6:_props$keyLength;var basename=props.basename?stripTrailingSlash(addLeadingSlash(props.basename)):"";var _HashPathCoders$hashT=HashPathCoders[hashType],encodePath=_HashPathCoders$hashT.encodePath,decodePath=_HashPathCoders$hashT.decodePath;var getDOMLocation=function getDOMLocation(){var _getHistoryState=getHistoryState(),key=_getHistoryState.key,state=_getHistoryState.state;var path=decodePath(getHashPath());warning(!basename||hasBasename(path,basename),"".concat("You are attempting to use a basename on a page whose URL path does not begin "+'with the basename. Expected path "').concat(path,'" to begin with "').concat(basename,'".'));if(basename)path=stripBasename(path,basename);return history.createLocation(path,state,key)};var createKey=function createKey(){return Math.random().toString(36).substr(2,keyLength)};var transitionManager=createTransitionManager();var setState=function setState(nextState){Object.assign(history$$1,nextState);history$$1.length=globalHistory.length;transitionManager.notifyListeners(history$$1.location,history$$1.action)};var forceNextPop=false;var ignorePath=null;var handleHashChange=function handleHashChange(){var path=getHashPath();var encodedPath=encodePath(path);if(path!==encodedPath){replaceHashPath(encodedPath)}else{var location=getDOMLocation();var prevLocation=history$$1.location;if(!forceNextPop&&history.locationsAreEqual(prevLocation,location))return;if(ignorePath===createPath(location))return;ignorePath=null;handlePop(location)}};var handlePop=function handlePop(location){if(forceNextPop){forceNextPop=false;setState()}else{var action="POP";transitionManager.confirmTransitionTo(location,action,getUserConfirmation,(function(ok){if(ok){setState({action:action,location:location})}else{revertPop(location)}}))}};var revertPop=function revertPop(fromLocation){var toLocation=history$$1.location;var toIndex=allPaths.lastIndexOf(createPath(toLocation));if(toIndex===-1)toIndex=0;var fromIndex=allPaths.lastIndexOf(createPath(fromLocation));if(fromIndex===-1)fromIndex=0;var delta=toIndex-fromIndex;if(delta){forceNextPop=true;go(delta)}};var path=getHashPath();var encodedPath=encodePath(path);if(path!==encodedPath)replaceHashPath(encodedPath);var initialLocation=getDOMLocation();var allPaths=[createPath(initialLocation)];var createHref=function createHref(location){return"#".concat(encodePath(basename+createPath(location)))};var push=function push(path,state){var action="PUSH";var location=history.createLocation(path,state,createKey(),history$$1.location);transitionManager.confirmTransitionTo(location,action,getUserConfirmation,(function(ok){if(!ok)return;var path=createPath(location);var encodedPath=encodePath(basename+path);if(canUseHistory){var key=location.key,_state=location.state;var href=createHref(location);globalHistory.pushState({key:key,state:_state},null,href)}else{ignorePath=path;var hashChanged=getHashPath()!==encodedPath;if(hashChanged){warning(false,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack");setState()}else{warning(state===undefined,"Browser history cannot push state in browsers that do not support HTML5 history, state is ignored")}pushHashPath(encodedPath)}var prevIndex=allPaths.lastIndexOf(createPath(history$$1.location));var nextPaths=allPaths.slice(0,prevIndex===-1?0:prevIndex+1);nextPaths.push(path);allPaths=nextPaths;setState({action:action,location:location})}))};var replace=function replace(path,state){var action="REPLACE";var location=history.createLocation(path,state,createKey(),history$$1.location);transitionManager.confirmTransitionTo(location,action,getUserConfirmation,(function(ok){if(!ok)return;var path=createPath(location);var encodedPath=encodePath(basename+path);if(canUseHistory){var key=location.key,_state2=location.state;var href=createHref(location);globalHistory.replaceState({key:key,state:_state2},null,href)}else{warning(state===undefined,"Browser history cannot push state in browsers that do not support HTML5 history, state is ignored");var hashChanged=getHashPath()!==encodedPath;if(hashChanged){ignorePath=path;replaceHashPath(encodedPath)}}var prevIndex=allPaths.indexOf(createPath(history$$1.location));if(prevIndex!==-1)allPaths[prevIndex]=path;setState({action:action,location:location})}))};var go=function go(n){warning(canGoWithoutReload,"Hash history go(n) causes a full page reload in this browser");globalHistory.go(n)};var goBack=function goBack(){return go(-1)};var goForward=function goForward(){return go(1)};var listenerCount=0;var checkDOMListeners=function checkDOMListeners(delta){listenerCount+=delta;var eventType=canUseHistory?PopStateEvent:HashChangeEvent;if(listenerCount===1&&delta===1){window.addEventListener(eventType,handleHashChange)}else if(listenerCount===0){window.removeEventListener(eventType,handleHashChange)}};var isBlocked=false;var block=function block(){var prompt=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var unblock=transitionManager.setPrompt(prompt);if(!isBlocked){checkDOMListeners(1);isBlocked=true}return function(){if(isBlocked){isBlocked=false;checkDOMListeners(-1)}return unblock()}};var listen=function listen(listener){var unlisten=transitionManager.appendListener(listener);checkDOMListeners(1);return function(){checkDOMListeners(-1);unlisten()}};var history$$1={length:globalHistory.length,action:"POP",location:initialLocation,createHref:createHref,push:push,replace:replace,go:go,goBack:goBack,goForward:goForward,block:block,listen:listen};return history$$1};return createHashStateHistory}))},function(module,exports,__webpack_require__){"use strict";function _interopDefault(n){return n&&"object"==typeof n&&"default"in n?n.default:n}Object.defineProperty(exports,"__esModule",{value:!0});var resolvePathname=_interopDefault(__webpack_require__(326)),valueEqual=_interopDefault(__webpack_require__(327));__webpack_require__(328);var invariant=_interopDefault(__webpack_require__(276));function _extends(){return(_extends=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n}).apply(this,arguments)}function addLeadingSlash(n){return"/"===n.charAt(0)?n:"/"+n}function stripLeadingSlash(n){return"/"===n.charAt(0)?n.substr(1):n}function hasBasename(n,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(n)}function stripBasename(n,t){return hasBasename(n,t)?n.substr(t.length):n}function stripTrailingSlash(n){return"/"===n.charAt(n.length-1)?n.slice(0,-1):n}function parsePath(n){var t=n||"/",e="",a="",o=t.indexOf("#");-1!==o&&(a=t.substr(o),t=t.substr(0,o));var r=t.indexOf("?");return-1!==r&&(e=t.substr(r),t=t.substr(0,r)),{pathname:t,search:"?"===e?"":e,hash:"#"===a?"":a}}function createPath(n){var t=n.pathname,e=n.search,a=n.hash,o=t||"/";return e&&"?"!==e&&(o+="?"===e.charAt(0)?e:"?"+e),a&&"#"!==a&&(o+="#"===a.charAt(0)?a:"#"+a),o}function createLocation(n,t,e,a){var o;"string"==typeof n?(o=parsePath(n)).state=t:(void 0===(o=_extends({},n)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(n){throw n instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):n}return e&&(o.key=e),a?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=resolvePathname(o.pathname,a.pathname)):o.pathname=a.pathname:o.pathname||(o.pathname="/"),o}function locationsAreEqual(n,t){return n.pathname===t.pathname&&n.search===t.search&&n.hash===t.hash&&n.key===t.key&&valueEqual(n.state,t.state)}function createTransitionManager(){var r=null;var a=[];return{setPrompt:function(n){return r=n,function(){r===n&&(r=null)}},confirmTransitionTo:function(n,t,e,a){if(null!=r){var o="function"==typeof r?r(n,t):r;"string"==typeof o?"function"==typeof e?e(o,a):a(!0):a(!1!==o)}else a(!0)},appendListener:function(n){var t=!0;function e(){t&&n.apply(void 0,arguments)}return a.push(e),function(){t=!1,a=a.filter((function(n){return n!==e}))}},notifyListeners:function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];a.forEach((function(n){return n.apply(void 0,t)}))}}}var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement);function getConfirmation(n,t){t(window.confirm(n))}function supportsHistory(){var n=window.navigator.userAgent;return(-1===n.indexOf("Android 2.")&&-1===n.indexOf("Android 4.0")||-1===n.indexOf("Mobile Safari")||-1!==n.indexOf("Chrome")||-1!==n.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}function supportsPopStateOnHashChange(){return-1===window.navigator.userAgent.indexOf("Trident")}function supportsGoWithoutReloadUsingHash(){return-1===window.navigator.userAgent.indexOf("Firefox")}function isExtraneousPopstateEvent(n){void 0===n.state&&navigator.userAgent.indexOf("CriOS")}var PopStateEvent="popstate",HashChangeEvent="hashchange";function getHistoryState(){try{return window.history.state||{}}catch(n){return{}}}function createBrowserHistory(n){void 0===n&&(n={}),canUseDOM||invariant(!1);var c=window.history,s=supportsHistory(),t=!supportsPopStateOnHashChange(),e=n,a=e.forceRefresh,h=void 0!==a&&a,o=e.getUserConfirmation,u=void 0===o?getConfirmation:o,r=e.keyLength,i=void 0===r?6:r,f=n.basename?stripTrailingSlash(addLeadingSlash(n.basename)):"";function l(n){var t=n||{},e=t.key,a=t.state,o=window.location,r=o.pathname+o.search+o.hash;return f&&(r=stripBasename(r,f)),createLocation(r,a,e)}function d(){return Math.random().toString(36).substr(2,i)}var v=createTransitionManager();function p(n){_extends(T,n),T.length=c.length,v.notifyListeners(T.location,T.action)}function g(n){isExtraneousPopstateEvent(n)||w(l(n.state))}function P(){w(l(getHistoryState()))}var m=!1;function w(t){if(m)m=!1,p();else{v.confirmTransitionTo(t,"POP",u,(function(n){n?p({action:"POP",location:t}):function(n){var t=T.location,e=H.indexOf(t.key);-1===e&&(e=0);var a=H.indexOf(n.key);-1===a&&(a=0);var o=e-a;o&&(m=!0,L(o))}(t)}))}}var y=l(getHistoryState()),H=[y.key];function x(n){return f+createPath(n)}function L(n){c.go(n)}var O=0;function E(n){1===(O+=n)&&1===n?(window.addEventListener(PopStateEvent,g),t&&window.addEventListener(HashChangeEvent,P)):0===O&&(window.removeEventListener(PopStateEvent,g),t&&window.removeEventListener(HashChangeEvent,P))}var S=!1;var T={length:c.length,action:"POP",location:y,createHref:x,push:function(n,t){var i=createLocation(n,t,d(),T.location);v.confirmTransitionTo(i,"PUSH",u,(function(n){if(n){var t=x(i),e=i.key,a=i.state;if(s)if(c.pushState({key:e,state:a},null,t),h)window.location.href=t;else{var o=H.indexOf(T.location.key),r=H.slice(0,-1===o?0:o+1);r.push(i.key),H=r,p({action:"PUSH",location:i})}else window.location.href=t}}))},replace:function(n,t){var r="REPLACE",i=createLocation(n,t,d(),T.location);v.confirmTransitionTo(i,r,u,(function(n){if(n){var t=x(i),e=i.key,a=i.state;if(s)if(c.replaceState({key:e,state:a},null,t),h)window.location.replace(t);else{var o=H.indexOf(T.location.key);-1!==o&&(H[o]=i.key),p({action:r,location:i})}else window.location.replace(t)}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(n){void 0===n&&(n=!1);var t=v.setPrompt(n);return S||(E(1),S=!0),function(){return S&&(S=!1,E(-1)),t()}},listen:function(n){var t=v.appendListener(n);return E(1),function(){E(-1),t()}}};return T}var HashChangeEvent$1="hashchange",HashPathCoders={hashbang:{encodePath:function(n){return"!"===n.charAt(0)?n:"!/"+stripLeadingSlash(n)},decodePath:function(n){return"!"===n.charAt(0)?n.substr(1):n}},noslash:{encodePath:stripLeadingSlash,decodePath:addLeadingSlash},slash:{encodePath:addLeadingSlash,decodePath:addLeadingSlash}};function getHashPath(){var n=window.location.href,t=n.indexOf("#");return-1===t?"":n.substring(t+1)}function pushHashPath(n){window.location.hash=n}function replaceHashPath(n){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,0<=t?t:0)+"#"+n)}function createHashHistory(n){void 0===n&&(n={}),canUseDOM||invariant(!1);var t=window.history,e=(supportsGoWithoutReloadUsingHash(),n),a=e.getUserConfirmation,i=void 0===a?getConfirmation:a,o=e.hashType,r=void 0===o?"slash":o,c=n.basename?stripTrailingSlash(addLeadingSlash(n.basename)):"",s=HashPathCoders[r],h=s.encodePath,u=s.decodePath;function f(){var n=u(getHashPath());return c&&(n=stripBasename(n,c)),createLocation(n)}var l=createTransitionManager();function d(n){_extends(E,n),E.length=t.length,l.notifyListeners(E.location,E.action)}var v=!1,p=null;function g(){var n=getHashPath(),t=h(n);if(n!==t)replaceHashPath(t);else{var e=f(),a=E.location;if(!v&&locationsAreEqual(a,e))return;if(p===createPath(e))return;p=null,function(t){if(v)v=!1,d();else{l.confirmTransitionTo(t,"POP",i,(function(n){n?d({action:"POP",location:t}):function(n){var t=E.location,e=y.lastIndexOf(createPath(t));-1===e&&(e=0);var a=y.lastIndexOf(createPath(n));-1===a&&(a=0);var o=e-a;o&&(v=!0,H(o))}(t)}))}}(e)}}var P=getHashPath(),m=h(P);P!==m&&replaceHashPath(m);var w=f(),y=[createPath(w)];function H(n){t.go(n)}var x=0;function L(n){1===(x+=n)&&1===n?window.addEventListener(HashChangeEvent$1,g):0===x&&window.removeEventListener(HashChangeEvent$1,g)}var O=!1;var E={length:t.length,action:"POP",location:w,createHref:function(n){return"#"+h(c+createPath(n))},push:function(n,t){var r=createLocation(n,void 0,void 0,E.location);l.confirmTransitionTo(r,"PUSH",i,(function(n){if(n){var t=createPath(r),e=h(c+t);if(getHashPath()!==e){p=t,pushHashPath(e);var a=y.lastIndexOf(createPath(E.location)),o=y.slice(0,-1===a?0:a+1);o.push(t),y=o,d({action:"PUSH",location:r})}else d()}}))},replace:function(n,t){var o="REPLACE",r=createLocation(n,void 0,void 0,E.location);l.confirmTransitionTo(r,o,i,(function(n){if(n){var t=createPath(r),e=h(c+t);getHashPath()!==e&&(p=t,replaceHashPath(e));var a=y.indexOf(createPath(E.location));-1!==a&&(y[a]=t),d({action:o,location:r})}}))},go:H,goBack:function(){H(-1)},goForward:function(){H(1)},block:function(n){void 0===n&&(n=!1);var t=l.setPrompt(n);return O||(L(1),O=!0),function(){return O&&(O=!1,L(-1)),t()}},listen:function(n){var t=l.appendListener(n);return L(1),function(){L(-1),t()}}};return E}function clamp(n,t,e){return Math.min(Math.max(n,t),e)}function createMemoryHistory(n){void 0===n&&(n={});var t=n,o=t.getUserConfirmation,e=t.initialEntries,a=void 0===e?["/"]:e,r=t.initialIndex,i=void 0===r?0:r,c=t.keyLength,s=void 0===c?6:c,h=createTransitionManager();function u(n){_extends(g,n),g.length=g.entries.length,h.notifyListeners(g.location,g.action)}function f(){return Math.random().toString(36).substr(2,s)}var l=clamp(i,0,a.length-1),d=a.map((function(n){return createLocation(n,void 0,"string"==typeof n?f():n.key||f())})),v=createPath;function p(n){var t=clamp(g.index+n,0,g.entries.length-1),e=g.entries[t];h.confirmTransitionTo(e,"POP",o,(function(n){n?u({action:"POP",location:e,index:t}):u()}))}var g={length:d.length,action:"POP",location:d[l],index:l,entries:d,createHref:v,push:function(n,t){var a=createLocation(n,t,f(),g.location);h.confirmTransitionTo(a,"PUSH",o,(function(n){if(n){var t=g.index+1,e=g.entries.slice(0);e.length>t?e.splice(t,e.length-t,a):e.push(a),u({action:"PUSH",location:a,index:t,entries:e})}}))},replace:function(n,t){var e="REPLACE",a=createLocation(n,t,f(),g.location);h.confirmTransitionTo(a,e,o,(function(n){n&&(g.entries[g.index]=a,u({action:e,location:a}))}))},go:p,goBack:function(){p(-1)},goForward:function(){p(1)},canGo:function(n){var t=g.index+n;return 0<=t&&t<g.entries.length},block:function(n){return void 0===n&&(n=!1),h.setPrompt(n)},listen:function(n){return h.appendListener(n)}};return g}exports.createBrowserHistory=createBrowserHistory,exports.createHashHistory=createHashHistory,exports.createMemoryHistory=createMemoryHistory,exports.createLocation=createLocation,exports.locationsAreEqual=locationsAreEqual,exports.parsePath=parsePath,exports.createPath=createPath},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;function isAbsolute(pathname){return pathname.charAt(0)==="/"}function spliceOne(list,index){for(var i=index,k=i+1,n=list.length;k<n;i+=1,k+=1){list[i]=list[k]}list.pop()}function resolvePathname(to){var from=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var toParts=to&&to.split("/")||[];var fromParts=from&&from.split("/")||[];var isToAbs=to&&isAbsolute(to);var isFromAbs=from&&isAbsolute(from);var mustEndAbs=isToAbs||isFromAbs;if(to&&isAbsolute(to)){fromParts=toParts}else if(toParts.length){fromParts.pop();fromParts=fromParts.concat(toParts)}if(!fromParts.length)return"/";var hasTrailingSlash=void 0;if(fromParts.length){var last=fromParts[fromParts.length-1];hasTrailingSlash=last==="."||last===".."||last===""}else{hasTrailingSlash=false}var up=0;for(var i=fromParts.length;i>=0;i--){var part=fromParts[i];if(part==="."){spliceOne(fromParts,i)}else if(part===".."){spliceOne(fromParts,i);up++}else if(up){spliceOne(fromParts,i);up--}}if(!mustEndAbs)for(;up--;up){fromParts.unshift("..")}if(mustEndAbs&&fromParts[0]!==""&&(!fromParts[0]||!isAbsolute(fromParts[0])))fromParts.unshift("");var result=fromParts.join("/");if(hasTrailingSlash&&result.substr(-1)!=="/")result+="/";return result}exports.default=resolvePathname;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};function valueEqual(a,b){if(a===b)return true;if(a==null||b==null)return false;if(Array.isArray(a)){return Array.isArray(b)&&a.length===b.length&&a.every((function(item,index){return valueEqual(item,b[index])}))}var aType=typeof a==="undefined"?"undefined":_typeof(a);var bType=typeof b==="undefined"?"undefined":_typeof(b);if(aType!==bType)return false;if(aType==="object"){var aValue=a.valueOf();var bValue=b.valueOf();if(aValue!==a||bValue!==b)return valueEqual(aValue,bValue);var aKeys=Object.keys(a);var bKeys=Object.keys(b);if(aKeys.length!==bKeys.length)return false;return aKeys.every((function(key){return valueEqual(a[key],b[key])}))}return false}exports.default=valueEqual;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";var isProduction="production"==="production";function warning(condition,message){if(!isProduction){if(condition){return}var text="Warning: "+message;if(typeof console!=="undefined"){console.warn(text)}try{throw Error(text)}catch(x){}}}module.exports=warning},function(module,exports,__webpack_require__){"use strict";const strictUriEncode=__webpack_require__(330);const decodeComponent=__webpack_require__(331);const splitOnFirst=__webpack_require__(332);const isNullOrUndefined=value=>value===null||value===undefined;function encoderForArrayFormat(options){switch(options.arrayFormat){case"index":return key=>(result,value)=>{const index=result.length;if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}if(value===null){return[...result,[encode(key,options),"[",index,"]"].join("")]}return[...result,[encode(key,options),"[",encode(index,options),"]=",encode(value,options)].join("")]};case"bracket":return key=>(result,value)=>{if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}if(value===null){return[...result,[encode(key,options),"[]"].join("")]}return[...result,[encode(key,options),"[]=",encode(value,options)].join("")]};case"comma":case"separator":return key=>(result,value)=>{if(value===null||value===undefined||value.length===0){return result}if(result.length===0){return[[encode(key,options),"=",encode(value,options)].join("")]}return[[result,encode(value,options)].join(options.arrayFormatSeparator)]};default:return key=>(result,value)=>{if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}if(value===null){return[...result,encode(key,options)]}return[...result,[encode(key,options),"=",encode(value,options)].join("")]}}}function parserForArrayFormat(options){let result;switch(options.arrayFormat){case"index":return(key,value,accumulator)=>{result=/\[(\d*)\]$/.exec(key);key=key.replace(/\[\d*\]$/,"");if(!result){accumulator[key]=value;return}if(accumulator[key]===undefined){accumulator[key]={}}accumulator[key][result[1]]=value};case"bracket":return(key,value,accumulator)=>{result=/(\[\])$/.exec(key);key=key.replace(/\[\]$/,"");if(!result){accumulator[key]=value;return}if(accumulator[key]===undefined){accumulator[key]=[value];return}accumulator[key]=[].concat(accumulator[key],value)};case"comma":case"separator":return(key,value,accumulator)=>{const isArray=typeof value==="string"&&value.split("").indexOf(options.arrayFormatSeparator)>-1;const newValue=isArray?value.split(options.arrayFormatSeparator).map(item=>decode(item,options)):value===null?value:decode(value,options);accumulator[key]=newValue};default:return(key,value,accumulator)=>{if(accumulator[key]===undefined){accumulator[key]=value;return}accumulator[key]=[].concat(accumulator[key],value)}}}function validateArrayFormatSeparator(value){if(typeof value!=="string"||value.length!==1){throw new TypeError("arrayFormatSeparator must be single character string")}}function encode(value,options){if(options.encode){return options.strict?strictUriEncode(value):encodeURIComponent(value)}return value}function decode(value,options){if(options.decode){return decodeComponent(value)}return value}function keysSorter(input){if(Array.isArray(input)){return input.sort()}if(typeof input==="object"){return keysSorter(Object.keys(input)).sort((a,b)=>Number(a)-Number(b)).map(key=>input[key])}return input}function removeHash(input){const hashStart=input.indexOf("#");if(hashStart!==-1){input=input.slice(0,hashStart)}return input}function getHash(url){let hash="";const hashStart=url.indexOf("#");if(hashStart!==-1){hash=url.slice(hashStart)}return hash}function extract(input){input=removeHash(input);const queryStart=input.indexOf("?");if(queryStart===-1){return""}return input.slice(queryStart+1)}function parseValue(value,options){if(options.parseNumbers&&!Number.isNaN(Number(value))&&(typeof value==="string"&&value.trim()!=="")){value=Number(value)}else if(options.parseBooleans&&value!==null&&(value.toLowerCase()==="true"||value.toLowerCase()==="false")){value=value.toLowerCase()==="true"}return value}function parse(input,options){options=Object.assign({decode:true,sort:true,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:false,parseBooleans:false},options);validateArrayFormatSeparator(options.arrayFormatSeparator);const formatter=parserForArrayFormat(options);const ret=Object.create(null);if(typeof input!=="string"){return ret}input=input.trim().replace(/^[?#&]/,"");if(!input){return ret}for(const param of input.split("&")){let[key,value]=splitOnFirst(options.decode?param.replace(/\+/g," "):param,"=");value=value===undefined?null:["comma","separator"].includes(options.arrayFormat)?value:decode(value,options);formatter(decode(key,options),value,ret)}for(const key of Object.keys(ret)){const value=ret[key];if(typeof value==="object"&&value!==null){for(const k of Object.keys(value)){value[k]=parseValue(value[k],options)}}else{ret[key]=parseValue(value,options)}}if(options.sort===false){return ret}return(options.sort===true?Object.keys(ret).sort():Object.keys(ret).sort(options.sort)).reduce((result,key)=>{const value=ret[key];if(Boolean(value)&&typeof value==="object"&&!Array.isArray(value)){result[key]=keysSorter(value)}else{result[key]=value}return result},Object.create(null))}exports.extract=extract;exports.parse=parse;exports.stringify=(object,options)=>{if(!object){return""}options=Object.assign({encode:true,strict:true,arrayFormat:"none",arrayFormatSeparator:","},options);validateArrayFormatSeparator(options.arrayFormatSeparator);const shouldFilter=key=>options.skipNull&&isNullOrUndefined(object[key])||options.skipEmptyString&&object[key]==="";const formatter=encoderForArrayFormat(options);const objectCopy={};for(const key of Object.keys(object)){if(!shouldFilter(key)){objectCopy[key]=object[key]}}const keys=Object.keys(objectCopy);if(options.sort!==false){keys.sort(options.sort)}return keys.map(key=>{const value=object[key];if(value===undefined){return""}if(value===null){return encode(key,options)}if(Array.isArray(value)){return value.reduce(formatter(key),[]).join("&")}return encode(key,options)+"="+encode(value,options)}).filter(x=>x.length>0).join("&")};exports.parseUrl=(input,options)=>{options=Object.assign({decode:true},options);const[url,hash]=splitOnFirst(input,"#");return Object.assign({url:url.split("?")[0]||"",query:parse(extract(input),options)},options&&options.parseFragmentIdentifier&&hash?{fragmentIdentifier:decode(hash,options)}:{})};exports.stringifyUrl=(input,options)=>{options=Object.assign({encode:true,strict:true},options);const url=removeHash(input.url).split("?")[0]||"";const queryFromUrl=exports.extract(input.url);const parsedQueryFromUrl=exports.parse(queryFromUrl,{sort:false});const query=Object.assign(parsedQueryFromUrl,input.query);let queryString=exports.stringify(query,options);if(queryString){queryString=`?${queryString}`}let hash=getHash(input.url);if(input.fragmentIdentifier){hash=`#${encode(input.fragmentIdentifier,options)}`}return`${url}${queryString}${hash}`}},function(module,exports,__webpack_require__){"use strict";module.exports=str=>encodeURIComponent(str).replace(/[!'()*]/g,x=>`%${x.charCodeAt(0).toString(16).toUpperCase()}`)},function(module,exports,__webpack_require__){"use strict";var token="%[a-f0-9]{2}";var singleMatcher=new RegExp(token,"gi");var multiMatcher=new RegExp("("+token+")+","gi");function decodeComponents(components,split){try{return decodeURIComponent(components.join(""))}catch(err){}if(components.length===1){return components}split=split||1;var left=components.slice(0,split);var right=components.slice(split);return Array.prototype.concat.call([],decodeComponents(left),decodeComponents(right))}function decode(input){try{return decodeURIComponent(input)}catch(err){var tokens=input.match(singleMatcher);for(var i=1;i<tokens.length;i++){input=decodeComponents(tokens,i).join("");tokens=input.match(singleMatcher)}return input}}function customDecodeURIComponent(input){var replaceMap={"%FE%FF":"��","%FF%FE":"��"};var match=multiMatcher.exec(input);while(match){try{replaceMap[match[0]]=decodeURIComponent(match[0])}catch(err){var result=decode(match[0]);if(result!==match[0]){replaceMap[match[0]]=result}}match=multiMatcher.exec(input)}replaceMap["%C2"]="�";var entries=Object.keys(replaceMap);for(var i=0;i<entries.length;i++){var key=entries[i];input=input.replace(new RegExp(key,"g"),replaceMap[key])}return input}module.exports=function(encodedURI){if(typeof encodedURI!=="string"){throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof encodedURI+"`")}try{encodedURI=encodedURI.replace(/\+/g," ");return decodeURIComponent(encodedURI)}catch(err){return customDecodeURIComponent(encodedURI)}}},function(module,exports,__webpack_require__){"use strict";module.exports=(string,separator)=>{if(!(typeof string==="string"&&typeof separator==="string")){throw new TypeError("Expected the arguments to be of type `string`")}if(separator===""){return[string]}const separatorIndex=string.indexOf(separator);if(separatorIndex===-1){return[string]}return[string.slice(0,separatorIndex),string.slice(separatorIndex+separator.length)]}},function(module,exports,__webpack_require__){!function(e,t){true?module.exports=t(__webpack_require__(3),__webpack_require__(214)):undefined}(this,(function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=r(f),d=n(2),v=r(d),h=n(3),g=n(5),y=r(g),m=function(e){function t(e,n){a(this,t);var r=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.renderChildren=function(e,t,n,o){return"function"==typeof e?e(s({},r.state,{isDragActive:t,isDragAccept:n,isDragReject:o})):e},r.composeHandlers=r.composeHandlers.bind(r),r.onClick=r.onClick.bind(r),r.onDocumentDrop=r.onDocumentDrop.bind(r),r.onDragEnter=r.onDragEnter.bind(r),r.onDragLeave=r.onDragLeave.bind(r),r.onDragOver=r.onDragOver.bind(r),r.onDragStart=r.onDragStart.bind(r),r.onDrop=r.onDrop.bind(r),r.onFileDialogCancel=r.onFileDialogCancel.bind(r),r.onInputElementClick=r.onInputElementClick.bind(r),r.setRef=r.setRef.bind(r),r.setRefs=r.setRefs.bind(r),r.isFileDialogActive=!1,r.state={draggedFiles:[],acceptedFiles:[],rejectedFiles:[]},r}return c(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props.preventDropOnDocument;this.dragTargets=[],e&&(document.addEventListener("dragover",h.onDocumentDragOver,!1),document.addEventListener("drop",this.onDocumentDrop,!1)),this.fileInputEl.addEventListener("click",this.onInputElementClick,!1),window.addEventListener("focus",this.onFileDialogCancel,!1)}},{key:"componentWillUnmount",value:function(){this.props.preventDropOnDocument&&(document.removeEventListener("dragover",h.onDocumentDragOver),document.removeEventListener("drop",this.onDocumentDrop)),null!=this.fileInputEl&&this.fileInputEl.removeEventListener("click",this.onInputElementClick,!1),window.removeEventListener("focus",this.onFileDialogCancel,!1)}},{key:"composeHandlers",value:function(e){return this.props.disabled?null:e}},{key:"onDocumentDrop",value:function(e){this.node&&this.node.contains(e.target)||(e.preventDefault(),this.dragTargets=[])}},{key:"onDragStart",value:function(e){this.props.onDragStart&&this.props.onDragStart.call(this,e)}},{key:"onDragEnter",value:function(e){var t=this;e.preventDefault(),-1===this.dragTargets.indexOf(e.target)&&this.dragTargets.push(e.target),Promise.resolve(this.props.getDataTransferItems(e)).then((function(e){t.setState({isDragActive:!0,draggedFiles:e})})),this.props.onDragEnter&&this.props.onDragEnter.call(this,e)}},{key:"onDragOver",value:function(e){e.preventDefault(),e.stopPropagation();try{e.dataTransfer.dropEffect=this.isFileDialogActive?"none":"copy"}catch(e){}return this.props.onDragOver&&this.props.onDragOver.call(this,e),!1}},{key:"onDragLeave",value:function(e){var t=this;e.preventDefault(),this.dragTargets=this.dragTargets.filter((function(n){return n!==e.target&&t.node.contains(n)})),this.dragTargets.length>0||(this.setState({isDragActive:!1,draggedFiles:[]}),this.props.onDragLeave&&this.props.onDragLeave.call(this,e))}},{key:"onDrop",value:function(e){var t=this,n=this.props,r=n.onDrop,o=n.onDropAccepted,a=n.onDropRejected,u=n.multiple,c=n.disablePreview,s=n.accept,l=n.getDataTransferItems;e.preventDefault(),this.dragTargets=[],this.isFileDialogActive=!1,this.draggedFiles=null,this.setState({isDragActive:!1,draggedFiles:[]}),Promise.resolve(l(e)).then((function(n){var l=[],f=[];n.forEach((function(e){if(!c)try{e.preview=window.URL.createObjectURL(e)}catch(e){}(0,h.fileAccepted)(e,s)&&(0,h.fileMatchSize)(e,t.props.maxSize,t.props.minSize)?l.push(e):f.push(e)})),u||f.push.apply(f,i(l.splice(1))),r&&r.call(t,l,f,e),f.length>0&&a&&a.call(t,f,e),l.length>0&&o&&o.call(t,l,e)}))}},{key:"onClick",value:function(e){var t=this.props,n=t.onClick;t.disableClick||(e.stopPropagation(),n&&n.call(this,e),(0,h.isIeOrEdge)()?setTimeout(this.open.bind(this),0):this.open())}},{key:"onInputElementClick",value:function(e){e.stopPropagation(),this.props.inputProps&&this.props.inputProps.onClick&&this.props.inputProps.onClick()}},{key:"onFileDialogCancel",value:function(){var e=this,t=this.props.onFileDialogCancel;this.isFileDialogActive&&setTimeout((function(){if(null!=e.fileInputEl){e.fileInputEl.files.length||(e.isFileDialogActive=!1)}"function"==typeof t&&t()}),300)}},{key:"setRef",value:function(e){this.node=e}},{key:"setRefs",value:function(e){this.fileInputEl=e}},{key:"open",value:function(){this.isFileDialogActive=!0,this.fileInputEl.value=null,this.fileInputEl.click()}},{key:"render",value:function(){var e=this.props,t=e.accept,n=e.acceptClassName,r=e.activeClassName,i=e.children,a=e.disabled,u=e.disabledClassName,c=e.inputProps,l=e.multiple,f=e.name,d=e.rejectClassName,v=o(e,["accept","acceptClassName","activeClassName","children","disabled","disabledClassName","inputProps","multiple","name","rejectClassName"]),g=v.acceptStyle,m=v.activeStyle,b=v.className,D=void 0===b?"":b,x=v.disabledStyle,O=v.rejectStyle,S=v.style,C=o(v,["acceptStyle","activeStyle","className","disabledStyle","rejectStyle","style"]),j=this.state,E=j.isDragActive,w=j.draggedFiles,_=w.length,k=l||_<=1,P=_>0&&(0,h.allFilesAccepted)(w,this.props.accept),A=_>0&&(!P||!k),F=!(D||S||m||g||O||x);E&&r&&(D+=" "+r),P&&n&&(D+=" "+n),A&&d&&(D+=" "+d),a&&u&&(D+=" "+u),F&&(S=y.default.default,m=y.default.active,g=y.default.active,O=y.default.rejected,x=y.default.disabled);var T=s({position:"relative"},S);m&&E&&(T=s({},T,m)),g&&P&&(T=s({},T,g)),O&&A&&(T=s({},T,O)),x&&a&&(T=s({},T,x));var I={accept:t,disabled:a,type:"file",style:s({position:"absolute",top:0,right:0,bottom:0,left:0,opacity:1e-5,pointerEvents:"none"},c.style),multiple:h.supportMultiple&&l,ref:this.setRefs,onChange:this.onDrop,autoComplete:"off"};f&&f.length&&(I.name=f);var M=(C.acceptedFiles,C.preventDropOnDocument,C.disablePreview,C.disableClick,C.onDropAccepted,C.onDropRejected,C.onFileDialogCancel,C.maxSize,C.minSize,C.getDataTransferItems,o(C,["acceptedFiles","preventDropOnDocument","disablePreview","disableClick","onDropAccepted","onDropRejected","onFileDialogCancel","maxSize","minSize","getDataTransferItems"]));return p.default.createElement("div",s({className:D,style:T},M,{onClick:this.composeHandlers(this.onClick),onDragStart:this.composeHandlers(this.onDragStart),onDragEnter:this.composeHandlers(this.onDragEnter),onDragOver:this.composeHandlers(this.onDragOver),onDragLeave:this.composeHandlers(this.onDragLeave),onDrop:this.composeHandlers(this.onDrop),ref:this.setRef,"aria-disabled":a}),this.renderChildren(i,E,P,A),p.default.createElement("input",s({},c,I)))}}]),t}(p.default.Component);t.default=m,m.propTypes={accept:v.default.oneOfType([v.default.string,v.default.arrayOf(v.default.string)]),children:v.default.oneOfType([v.default.node,v.default.func]),disableClick:v.default.bool,disabled:v.default.bool,disablePreview:v.default.bool,preventDropOnDocument:v.default.bool,inputProps:v.default.object,multiple:v.default.bool,name:v.default.string,maxSize:v.default.number,minSize:v.default.number,className:v.default.string,activeClassName:v.default.string,acceptClassName:v.default.string,rejectClassName:v.default.string,disabledClassName:v.default.string,style:v.default.object,activeStyle:v.default.object,acceptStyle:v.default.object,rejectStyle:v.default.object,disabledStyle:v.default.object,getDataTransferItems:v.default.func,onClick:v.default.func,onDrop:v.default.func,onDropAccepted:v.default.func,onDropRejected:v.default.func,onDragStart:v.default.func,onDragEnter:v.default.func,onDragOver:v.default.func,onDragLeave:v.default.func,onFileDialogCancel:v.default.func},m.defaultProps={preventDropOnDocument:!0,disabled:!1,disablePreview:!1,disableClick:!1,inputProps:{},multiple:!0,maxSize:1/0,minSize:0,getDataTransferItems:h.getDataTransferItems},e.exports=t.default},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";function r(e){var t=[];if(e.dataTransfer){var n=e.dataTransfer;n.files&&n.files.length?t=n.files:n.items&&n.items.length&&(t=n.items)}else e.target&&e.target.files&&(t=e.target.files);return Array.prototype.slice.call(t)}function o(e,t){return"application/x-moz-file"===e.type||(0,p.default)(e,t)}function i(e,t,n){return e.size<=t&&e.size>=n}function a(e,t){return e.every((function(e){return o(e,t)}))}function u(e){e.preventDefault()}function c(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function s(e){return-1!==e.indexOf("Edge/")}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return c(e)||s(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.supportMultiple=void 0,t.getDataTransferItems=r,t.fileAccepted=o,t.fileMatchSize=i,t.allFilesAccepted=a,t.onDocumentDragOver=u,t.isIeOrEdge=l;var f=n(4),p=function(e){return e&&e.__esModule?e:{default:e}}(f);t.supportMultiple="undefined"==typeof document||!document||!document.createElement||"multiple"in document.createElement("input")},function(e,t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=13)}([function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n=e.exports={version:"2.5.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(4)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(32)("wks"),o=n(9),i=n(0).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},function(e,t,n){var r=n(0),o=n(2),i=n(8),a=n(22),u=n(10),c=function(e,t,n){var s,l,f,p,d=e&c.F,v=e&c.G,h=e&c.S,g=e&c.P,y=e&c.B,m=v?r:h?r[t]||(r[t]={}):(r[t]||{}).prototype,b=v?o:o[t]||(o[t]={}),D=b.prototype||(b.prototype={});v&&(n=t);for(s in n)l=!d&&m&&void 0!==m[s],f=(l?m:n)[s],p=y&&l?u(f,r):g&&"function"==typeof f?u(Function.call,f):f,m&&a(m,s,f,e&c.U),b[s]!=f&&i(b,s,p),g&&D[s]!=f&&(D[s]=f)};r.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){var r=n(16),o=n(21);e.exports=n(3)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(24);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(28),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",o=e.type||"",i=o.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim();return"."===t.charAt(0)?r.toLowerCase().endsWith(t.toLowerCase()):t.endsWith("/*")?i===t.replace(/\/.*$/,""):o===t}))}return!0},n(14),n(34)},function(e,t,n){n(15),e.exports=n(2).Array.some},function(e,t,n){"use strict";var r=n(7),o=n(25)(3);r(r.P+r.F*!n(33)([].some,!0),"Array",{some:function(e){return o(this,e,arguments[1])}})},function(e,t,n){var r=n(17),o=n(18),i=n(20),a=Object.defineProperty;t.f=n(3)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(1);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(3)&&!n(4)((function(){return 7!=Object.defineProperty(n(19)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(1),o=n(0).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(1);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(0),o=n(8),i=n(23),a=n(9)("src"),u=Function.toString,c=(""+u).split("toString");n(2).inspectSource=function(e){return u.call(e)},(e.exports=function(e,t,n,u){var s="function"==typeof n;s&&(i(n,"name")||o(n,"name",t)),e[t]!==n&&(s&&(i(n,a)||o(n,a,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:u?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||u.call(this)}))},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(10),o=n(26),i=n(27),a=n(12),u=n(29);e.exports=function(e,t){var n=1==e,c=2==e,s=3==e,l=4==e,f=6==e,p=5==e||f,d=t||u;return function(t,u,v){for(var h,g,y=i(t),m=o(y),b=r(u,v,3),D=a(m.length),x=0,O=n?d(t,D):c?d(t,0):void 0;D>x;x++)if((p||x in m)&&(h=m[x],g=b(h,x,y),e))if(n)O[x]=g;else if(g)switch(e){case 3:return!0;case 5:return h;case 6:return x;case 2:O.push(h)}else if(l)return!1;return f?-1:s||l?l:O}}},function(e,t,n){var r=n(5);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(11);e.exports=function(e){return Object(r(e))}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(30);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(1),o=n(31),i=n(6)("species");e.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(5);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(0),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t,n){"use strict";var r=n(4);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){n(35),e.exports=n(2).String.endsWith},function(e,t,n){"use strict";var r=n(7),o=n(12),i=n(36),a="".endsWith;r(r.P+r.F*n(38)("endsWith"),"String",{endsWith:function(e){var t=i(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=o(t.length),u=void 0===n?r:Math.min(o(n),r),c=String(e);return a?a.call(t,c,u):t.slice(u-c.length,u)===c}})},function(e,t,n){var r=n(37),o=n(11);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(e))}},function(e,t,n){var r=n(1),o=n(5),i=n(6)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},function(e,t,n){var r=n(6)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={rejected:{borderStyle:"solid",borderColor:"#c66",backgroundColor:"#eee"},disabled:{opacity:.5},active:{borderStyle:"solid",borderColor:"#6c6",backgroundColor:"#eee"},default:{width:200,height:200,borderWidth:2,borderColor:"#666",borderStyle:"dashed",borderRadius:5}},e.exports=t.default}])}))},,function(module,exports){module.exports=function(){var selection=document.getSelection();if(!selection.rangeCount){return function(){}}var active=document.activeElement;var ranges=[];for(var i=0;i<selection.rangeCount;i++){ranges.push(selection.getRangeAt(i))}switch(active.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":active.blur();break;default:active=null;break}selection.removeAllRanges();return function(){selection.type==="Caret"&&selection.removeAllRanges();if(!selection.rangeCount){ranges.forEach((function(range){selection.addRange(range)}))}active&&active.focus()}}},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(337);case"v7light":return __webpack_require__(339);case"v8dark":return __webpack_require__(341);case"v8light":return __webpack_require__(343)}},function(module,exports,__webpack_require__){var api=__webpack_require__(211);var content=__webpack_require__(338);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(212);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".canvasEditVar__typeOption {\n  display: flex;\n  align-items: center; }\n  .canvasEditVar__typeOption .canvasEditVar__tokenIcon {\n    margin-right: 15px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(211);var content=__webpack_require__(340);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(212);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".canvasEditVar__typeOption {\n  display: flex;\n  align-items: center; }\n  .canvasEditVar__typeOption .canvasEditVar__tokenIcon {\n    margin-right: 15px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(211);var content=__webpack_require__(342);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(212);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".canvasEditVar__typeOption {\n  display: flex;\n  align-items: center; }\n  .canvasEditVar__typeOption .canvasEditVar__tokenIcon {\n    margin-right: 15px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(211);var content=__webpack_require__(344);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(212);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".canvasEditVar__typeOption {\n  display: flex;\n  align-items: center; }\n  .canvasEditVar__typeOption .canvasEditVar__tokenIcon {\n    margin-right: 15px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(211);var content=__webpack_require__(346);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(212);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".canvasVarHeader__triggerWrapper {\n  display: flex;\n  align-items: center; }\n\n.canvasVarHeader__button {\n  font-size: 16px;\n  font-size: 1rem;\n  line-height: 1.5;\n  text-align: left;\n  width: 100%;\n  flex-grow: 1;\n  display: flex;\n  align-items: center; }\n\n.canvasVarHeader__iconWrapper {\n  width: 16px;\n  height: 16px;\n  border-radius: 4px;\n  margin-right: 8px;\n  margin-left: 4px;\n  flex-shrink: 0; }\n\n.canvasVarHeader__anchor {\n  display: inline-block; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(211);var content=__webpack_require__(348);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(212);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".canvasVarHeader__triggerWrapper {\n  display: flex;\n  align-items: center; }\n\n.canvasVarHeader__button {\n  font-size: 16px;\n  font-size: 1rem;\n  line-height: 1.5;\n  text-align: left;\n  width: 100%;\n  flex-grow: 1;\n  display: flex;\n  align-items: center; }\n\n.canvasVarHeader__iconWrapper {\n  width: 16px;\n  height: 16px;\n  border-radius: 4px;\n  margin-right: 8px;\n  margin-left: 4px;\n  flex-shrink: 0; }\n\n.canvasVarHeader__anchor {\n  display: inline-block; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(211);var content=__webpack_require__(350);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(212);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".canvasVarHeader__triggerWrapper {\n  display: flex;\n  align-items: center; }\n\n.canvasVarHeader__button {\n  font-size: 14px;\n  font-size: 1rem;\n  line-height: 1.71429rem;\n  text-align: left;\n  width: 100%;\n  flex-grow: 1;\n  display: flex;\n  align-items: center; }\n\n.canvasVarHeader__iconWrapper {\n  width: 16px;\n  height: 16px;\n  border-radius: 6px;\n  margin-right: 8px;\n  margin-left: 4px;\n  flex-shrink: 0; }\n\n.canvasVarHeader__anchor {\n  display: inline-block; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(211);var content=__webpack_require__(352);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(212);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".canvasVarHeader__triggerWrapper {\n  display: flex;\n  align-items: center; }\n\n.canvasVarHeader__button {\n  font-size: 14px;\n  font-size: 1rem;\n  line-height: 1.71429rem;\n  text-align: left;\n  width: 100%;\n  flex-grow: 1;\n  display: flex;\n  align-items: center; }\n\n.canvasVarHeader__iconWrapper {\n  width: 16px;\n  height: 16px;\n  border-radius: 6px;\n  margin-right: 8px;\n  margin-left: 4px;\n  flex-shrink: 0; }\n\n.canvasVarHeader__anchor {\n  display: inline-block; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(354);case"v7light":return __webpack_require__(356);case"v8dark":return __webpack_require__(358);case"v8light":return __webpack_require__(360)}},function(module,exports,__webpack_require__){var api=__webpack_require__(211);var content=__webpack_require__(355);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(212);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".canvasVarConfig__container {\n  width: 100%;\n  position: relative; }\n  .canvasVarConfig__container.canvasVarConfig-isEditMode .canvasVarConfig__innerContainer {\n    transform: translateX(-50%); }\n\n.canvasVarConfig__list table {\n  background-color: transparent; }\n\n.canvasVarConfig__list thead tr th,\n.canvasVarConfig__list thead tr td {\n  border-bottom: none;\n  border-top: none; }\n\n.canvasVarConfig__list tbody tr td {\n  border-top: none;\n  border-bottom: none; }\n\n.canvasVarConfig__list tbody tr:hover {\n  background-color: transparent; }\n\n.canvasVarConfig__list tbody tr:last-child td {\n  border-bottom: none; }\n\n.canvasVarConfig__innerContainer {\n  width: calc(200% + 48px);\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  align-content: stretch; }\n  .canvasVarConfig__innerContainer .canvasVarConfig__editView {\n    margin-left: 0; }\n  .canvasVarConfig__innerContainer .canvasVarConfig__listView {\n    margin-right: 0; }\n\n.canvasVarConfig__editView {\n  width: 50%;\n  height: 100%;\n  flex-shrink: 0; }\n\n.canvasVarConfig__listView {\n  width: 50%;\n  flex-shrink: 0; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(211);var content=__webpack_require__(357);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(212);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".canvasVarConfig__container {\n  width: 100%;\n  position: relative; }\n  .canvasVarConfig__container.canvasVarConfig-isEditMode .canvasVarConfig__innerContainer {\n    transform: translateX(-50%); }\n\n.canvasVarConfig__list table {\n  background-color: transparent; }\n\n.canvasVarConfig__list thead tr th,\n.canvasVarConfig__list thead tr td {\n  border-bottom: none;\n  border-top: none; }\n\n.canvasVarConfig__list tbody tr td {\n  border-top: none;\n  border-bottom: none; }\n\n.canvasVarConfig__list tbody tr:hover {\n  background-color: transparent; }\n\n.canvasVarConfig__list tbody tr:last-child td {\n  border-bottom: none; }\n\n.canvasVarConfig__innerContainer {\n  width: calc(200% + 48px);\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  align-content: stretch; }\n  .canvasVarConfig__innerContainer .canvasVarConfig__editView {\n    margin-left: 0; }\n  .canvasVarConfig__innerContainer .canvasVarConfig__listView {\n    margin-right: 0; }\n\n.canvasVarConfig__editView {\n  width: 50%;\n  height: 100%;\n  flex-shrink: 0; }\n\n.canvasVarConfig__listView {\n  width: 50%;\n  flex-shrink: 0; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(211);var content=__webpack_require__(359);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(212);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".canvasVarConfig__container {\n  width: 100%;\n  position: relative; }\n  .canvasVarConfig__container.canvasVarConfig-isEditMode .canvasVarConfig__innerContainer {\n    transform: translateX(-50%); }\n\n.canvasVarConfig__list table {\n  background-color: transparent; }\n\n.canvasVarConfig__list thead tr th,\n.canvasVarConfig__list thead tr td {\n  border-bottom: none;\n  border-top: none; }\n\n.canvasVarConfig__list tbody tr td {\n  border-top: none;\n  border-bottom: none; }\n\n.canvasVarConfig__list tbody tr:hover {\n  background-color: transparent; }\n\n.canvasVarConfig__list tbody tr:last-child td {\n  border-bottom: none; }\n\n.canvasVarConfig__innerContainer {\n  width: calc(200% + 48px);\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  align-content: stretch; }\n  .canvasVarConfig__innerContainer .canvasVarConfig__editView {\n    margin-left: 0; }\n  .canvasVarConfig__innerContainer .canvasVarConfig__listView {\n    margin-right: 0; }\n\n.canvasVarConfig__editView {\n  width: 50%;\n  height: 100%;\n  flex-shrink: 0; }\n\n.canvasVarConfig__listView {\n  width: 50%;\n  flex-shrink: 0; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(211);var content=__webpack_require__(361);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(212);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".canvasVarConfig__container {\n  width: 100%;\n  position: relative; }\n  .canvasVarConfig__container.canvasVarConfig-isEditMode .canvasVarConfig__innerContainer {\n    transform: translateX(-50%); }\n\n.canvasVarConfig__list table {\n  background-color: transparent; }\n\n.canvasVarConfig__list thead tr th,\n.canvasVarConfig__list thead tr td {\n  border-bottom: none;\n  border-top: none; }\n\n.canvasVarConfig__list tbody tr td {\n  border-top: none;\n  border-bottom: none; }\n\n.canvasVarConfig__list tbody tr:hover {\n  background-color: transparent; }\n\n.canvasVarConfig__list tbody tr:last-child td {\n  border-bottom: none; }\n\n.canvasVarConfig__innerContainer {\n  width: calc(200% + 48px);\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  align-content: stretch; }\n  .canvasVarConfig__innerContainer .canvasVarConfig__editView {\n    margin-left: 0; }\n  .canvasVarConfig__innerContainer .canvasVarConfig__listView {\n    margin-right: 0; }\n\n.canvasVarConfig__editView {\n  width: 50%;\n  height: 100%;\n  flex-shrink: 0; }\n\n.canvasVarConfig__listView {\n  width: 50%;\n  flex-shrink: 0; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopDefault(ex){return ex&&typeof ex==="object"&&"default"in ex?ex["default"]:ex}var React=__webpack_require__(3);var React__default=_interopDefault(React);var _inheritsLoose=_interopDefault(__webpack_require__(363));var _extends=_interopDefault(__webpack_require__(364));var redux=__webpack_require__(365);var reactRedux=__webpack_require__(210);var useMemoOne=__webpack_require__(366);var cssBoxModel=__webpack_require__(367);var memoizeOne=_interopDefault(__webpack_require__(368));var rafSchd=_interopDefault(__webpack_require__(369));var ReactDOM=_interopDefault(__webpack_require__(5));var isProduction="production"==="production";var spacesAndTabs=/[ \t]{2,}/g;var lineStartWithSpaces=/^[ \t]*/gm;var clean=function clean(value){return value.replace(spacesAndTabs," ").replace(lineStartWithSpaces,"").trim()};var getDevMessage=function getDevMessage(message){return clean("\n  %creact-beautiful-dnd\n\n  %c"+clean(message)+"\n\n  %c👷‍ This is a development only message. It will be removed in production builds.\n")};var getFormattedMessage=function getFormattedMessage(message){return[getDevMessage(message),"color: #00C584; font-size: 1.2em; font-weight: bold;","line-height: 1.5","color: #723874;"]};var isDisabledFlag="__react-beautiful-dnd-disable-dev-warnings";function log(type,message){var _console;if(isProduction){return}if(typeof window!=="undefined"&&window[isDisabledFlag]){return}(_console=console)[type].apply(_console,getFormattedMessage(message))}var warning=log.bind(null,"warn");var error=log.bind(null,"error");function noop(){}function getOptions(shared,fromBinding){return _extends({},shared,{},fromBinding)}function bindEvents(el,bindings,sharedOptions){var unbindings=bindings.map((function(binding){var options=getOptions(sharedOptions,binding.options);el.addEventListener(binding.eventName,binding.fn,options);return function unbind(){el.removeEventListener(binding.eventName,binding.fn,options)}}));return function unbindAll(){unbindings.forEach((function(unbind){unbind()}))}}var isProduction$1="production"==="production";var prefix="Invariant failed";function RbdInvariant(message){this.message=message}RbdInvariant.prototype.toString=function toString(){return this.message};function invariant(condition,message){if(condition){return}if(isProduction$1){throw new RbdInvariant(prefix)}else{throw new RbdInvariant(prefix+": "+(message||""))}}var ErrorBoundary=function(_React$Component){_inheritsLoose(ErrorBoundary,_React$Component);function ErrorBoundary(){var _this;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_React$Component.call.apply(_React$Component,[this].concat(args))||this;_this.callbacks=null;_this.unbind=noop;_this.onWindowError=function(event){var callbacks=_this.getCallbacks();if(callbacks.isDragging()){callbacks.tryAbort();false?undefined:void 0}var err=event.error;if(err instanceof RbdInvariant){event.preventDefault();if(false){}}};_this.getCallbacks=function(){if(!_this.callbacks){throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>")}return _this.callbacks};_this.setCallbacks=function(callbacks){_this.callbacks=callbacks};return _this}var _proto=ErrorBoundary.prototype;_proto.componentDidMount=function componentDidMount(){this.unbind=bindEvents(window,[{eventName:"error",fn:this.onWindowError}])};_proto.componentWillUnmount=function componentWillUnmount(){this.unbind()};_proto.componentDidCatch=function componentDidCatch(err){if(err instanceof RbdInvariant){if(false){}this.setState({});return}throw err};_proto.render=function render(){return this.props.children(this.setCallbacks)};return ErrorBoundary}(React__default.Component);var dragHandleUsageInstructions="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n";var position=function position(index){return index+1};var onDragStart=function onDragStart(start){return"\n  You have lifted an item in position "+position(start.source.index)+"\n"};var withLocation=function withLocation(source,destination){var isInHomeList=source.droppableId===destination.droppableId;var startPosition=position(source.index);var endPosition=position(destination.index);if(isInHomeList){return"\n      You have moved the item from position "+startPosition+"\n      to position "+endPosition+"\n    "}return"\n    You have moved the item from position "+startPosition+"\n    in list "+source.droppableId+"\n    to list "+destination.droppableId+"\n    in position "+endPosition+"\n  "};var withCombine=function withCombine(id,source,combine){var inHomeList=source.droppableId===combine.droppableId;if(inHomeList){return"\n      The item "+id+"\n      has been combined with "+combine.draggableId}return"\n      The item "+id+"\n      in list "+source.droppableId+"\n      has been combined with "+combine.draggableId+"\n      in list "+combine.droppableId+"\n    "};var onDragUpdate=function onDragUpdate(update){var location=update.destination;if(location){return withLocation(update.source,location)}var combine=update.combine;if(combine){return withCombine(update.draggableId,update.source,combine)}return"You are over an area that cannot be dropped on"};var returnedToStart=function returnedToStart(source){return"\n  The item has returned to its starting position\n  of "+position(source.index)+"\n"};var onDragEnd=function onDragEnd(result){if(result.reason==="CANCEL"){return"\n      Movement cancelled.\n      "+returnedToStart(result.source)+"\n    "}var location=result.destination;var combine=result.combine;if(location){return"\n      You have dropped the item.\n      "+withLocation(result.source,location)+"\n    "}if(combine){return"\n      You have dropped the item.\n      "+withCombine(result.draggableId,result.source,combine)+"\n    "}return"\n    The item has been dropped while not over a drop area.\n    "+returnedToStart(result.source)+"\n  "};var preset={dragHandleUsageInstructions:dragHandleUsageInstructions,onDragStart:onDragStart,onDragUpdate:onDragUpdate,onDragEnd:onDragEnd};var origin={x:0,y:0};var add=function add(point1,point2){return{x:point1.x+point2.x,y:point1.y+point2.y}};var subtract=function subtract(point1,point2){return{x:point1.x-point2.x,y:point1.y-point2.y}};var isEqual=function isEqual(point1,point2){return point1.x===point2.x&&point1.y===point2.y};var negate=function negate(point){return{x:point.x!==0?-point.x:0,y:point.y!==0?-point.y:0}};var patch=function patch(line,value,otherValue){var _ref;if(otherValue===void 0){otherValue=0}return _ref={},_ref[line]=value,_ref[line==="x"?"y":"x"]=otherValue,_ref};var distance=function distance(point1,point2){return Math.sqrt(Math.pow(point2.x-point1.x,2)+Math.pow(point2.y-point1.y,2))};var closest=function closest(target,points){return Math.min.apply(Math,points.map((function(point){return distance(target,point)})))};var apply=function apply(fn){return function(point){return{x:fn(point.x),y:fn(point.y)}}};var executeClip=function(frame,subject){var result=cssBoxModel.getRect({top:Math.max(subject.top,frame.top),right:Math.min(subject.right,frame.right),bottom:Math.min(subject.bottom,frame.bottom),left:Math.max(subject.left,frame.left)});if(result.width<=0||result.height<=0){return null}return result};var offsetByPosition=function offsetByPosition(spacing,point){return{top:spacing.top+point.y,left:spacing.left+point.x,bottom:spacing.bottom+point.y,right:spacing.right+point.x}};var getCorners=function getCorners(spacing){return[{x:spacing.left,y:spacing.top},{x:spacing.right,y:spacing.top},{x:spacing.left,y:spacing.bottom},{x:spacing.right,y:spacing.bottom}]};var noSpacing={top:0,right:0,bottom:0,left:0};var scroll=function scroll(target,frame){if(!frame){return target}return offsetByPosition(target,frame.scroll.diff.displacement)};var increase=function increase(target,axis,withPlaceholder){if(withPlaceholder&&withPlaceholder.increasedBy){var _extends2;return _extends({},target,(_extends2={},_extends2[axis.end]=target[axis.end]+withPlaceholder.increasedBy[axis.line],_extends2))}return target};var clip=function clip(target,frame){if(frame&&frame.shouldClipSubject){return executeClip(frame.pageMarginBox,target)}return cssBoxModel.getRect(target)};var getSubject=function(_ref){var page=_ref.page,withPlaceholder=_ref.withPlaceholder,axis=_ref.axis,frame=_ref.frame;var scrolled=scroll(page.marginBox,frame);var increased=increase(scrolled,axis,withPlaceholder);var clipped=clip(increased,frame);return{page:page,withPlaceholder:withPlaceholder,active:clipped}};var scrollDroppable=function(droppable,newScroll){!droppable.frame?false?undefined:invariant(false):void 0;var scrollable=droppable.frame;var scrollDiff=subtract(newScroll,scrollable.scroll.initial);var scrollDisplacement=negate(scrollDiff);var frame=_extends({},scrollable,{scroll:{initial:scrollable.scroll.initial,current:newScroll,diff:{value:scrollDiff,displacement:scrollDisplacement},max:scrollable.scroll.max}});var subject=getSubject({page:droppable.subject.page,withPlaceholder:droppable.subject.withPlaceholder,axis:droppable.axis,frame:frame});var result=_extends({},droppable,{frame:frame,subject:subject});return result};function isInteger(value){if(Number.isInteger){return Number.isInteger(value)}return typeof value==="number"&&isFinite(value)&&Math.floor(value)===value}function values(map){if(Object.values){return Object.values(map)}return Object.keys(map).map((function(key){return map[key]}))}function findIndex(list,predicate){if(list.findIndex){return list.findIndex(predicate)}for(var i=0;i<list.length;i++){if(predicate(list[i])){return i}}return-1}function find(list,predicate){if(list.find){return list.find(predicate)}var index=findIndex(list,predicate);if(index!==-1){return list[index]}return undefined}function toArray(list){return Array.prototype.slice.call(list)}var toDroppableMap=memoizeOne((function(droppables){return droppables.reduce((function(previous,current){previous[current.descriptor.id]=current;return previous}),{})}));var toDraggableMap=memoizeOne((function(draggables){return draggables.reduce((function(previous,current){previous[current.descriptor.id]=current;return previous}),{})}));var toDroppableList=memoizeOne((function(droppables){return values(droppables)}));var toDraggableList=memoizeOne((function(draggables){return values(draggables)}));var getDraggablesInsideDroppable=memoizeOne((function(droppableId,draggables){var result=toDraggableList(draggables).filter((function(draggable){return droppableId===draggable.descriptor.droppableId})).sort((function(a,b){return a.descriptor.index-b.descriptor.index}));return result}));function tryGetDestination(impact){if(impact.at&&impact.at.type==="REORDER"){return impact.at.destination}return null}function tryGetCombine(impact){if(impact.at&&impact.at.type==="COMBINE"){return impact.at.combine}return null}var removeDraggableFromList=memoizeOne((function(remove,list){return list.filter((function(item){return item.descriptor.id!==remove.descriptor.id}))}));var moveToNextCombine=function(_ref){var isMovingForward=_ref.isMovingForward,draggable=_ref.draggable,destination=_ref.destination,insideDestination=_ref.insideDestination,previousImpact=_ref.previousImpact;if(!destination.isCombineEnabled){return null}var location=tryGetDestination(previousImpact);if(!location){return null}function getImpact(target){var at={type:"COMBINE",combine:{draggableId:target,droppableId:destination.descriptor.id}};return _extends({},previousImpact,{at:at})}var all=previousImpact.displaced.all;var closestId=all.length?all[0]:null;if(isMovingForward){return closestId?getImpact(closestId):null}var withoutDraggable=removeDraggableFromList(draggable,insideDestination);if(!closestId){if(!withoutDraggable.length){return null}var last=withoutDraggable[withoutDraggable.length-1];return getImpact(last.descriptor.id)}var indexOfClosest=findIndex(withoutDraggable,(function(d){return d.descriptor.id===closestId}));!(indexOfClosest!==-1)?false?undefined:invariant(false):void 0;var proposedIndex=indexOfClosest-1;if(proposedIndex<0){return null}var before=withoutDraggable[proposedIndex];return getImpact(before.descriptor.id)};var isHomeOf=function(draggable,destination){return draggable.descriptor.droppableId===destination.descriptor.id};var noDisplacedBy={point:origin,value:0};var emptyGroups={invisible:{},visible:{},all:[]};var noImpact={displaced:emptyGroups,displacedBy:noDisplacedBy,at:null};var isWithin=function(lowerBound,upperBound){return function(value){return lowerBound<=value&&value<=upperBound}};var isPartiallyVisibleThroughFrame=function(frame){var isWithinVertical=isWithin(frame.top,frame.bottom);var isWithinHorizontal=isWithin(frame.left,frame.right);return function(subject){var isContained=isWithinVertical(subject.top)&&isWithinVertical(subject.bottom)&&isWithinHorizontal(subject.left)&&isWithinHorizontal(subject.right);if(isContained){return true}var isPartiallyVisibleVertically=isWithinVertical(subject.top)||isWithinVertical(subject.bottom);var isPartiallyVisibleHorizontally=isWithinHorizontal(subject.left)||isWithinHorizontal(subject.right);var isPartiallyContained=isPartiallyVisibleVertically&&isPartiallyVisibleHorizontally;if(isPartiallyContained){return true}var isBiggerVertically=subject.top<frame.top&&subject.bottom>frame.bottom;var isBiggerHorizontally=subject.left<frame.left&&subject.right>frame.right;var isTargetBiggerThanFrame=isBiggerVertically&&isBiggerHorizontally;if(isTargetBiggerThanFrame){return true}var isTargetBiggerOnOneAxis=isBiggerVertically&&isPartiallyVisibleHorizontally||isBiggerHorizontally&&isPartiallyVisibleVertically;return isTargetBiggerOnOneAxis}};var isTotallyVisibleThroughFrame=function(frame){var isWithinVertical=isWithin(frame.top,frame.bottom);var isWithinHorizontal=isWithin(frame.left,frame.right);return function(subject){var isContained=isWithinVertical(subject.top)&&isWithinVertical(subject.bottom)&&isWithinHorizontal(subject.left)&&isWithinHorizontal(subject.right);return isContained}};var vertical={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"};var horizontal={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var isTotallyVisibleThroughFrameOnAxis=function(axis){return function(frame){var isWithinVertical=isWithin(frame.top,frame.bottom);var isWithinHorizontal=isWithin(frame.left,frame.right);return function(subject){if(axis===vertical){return isWithinVertical(subject.top)&&isWithinVertical(subject.bottom)}return isWithinHorizontal(subject.left)&&isWithinHorizontal(subject.right)}}};var getDroppableDisplaced=function getDroppableDisplaced(target,destination){var displacement=destination.frame?destination.frame.scroll.diff.displacement:origin;return offsetByPosition(target,displacement)};var isVisibleInDroppable=function isVisibleInDroppable(target,destination,isVisibleThroughFrameFn){if(!destination.subject.active){return false}return isVisibleThroughFrameFn(destination.subject.active)(target)};var isVisibleInViewport=function isVisibleInViewport(target,viewport,isVisibleThroughFrameFn){return isVisibleThroughFrameFn(viewport)(target)};var isVisible=function isVisible(_ref){var toBeDisplaced=_ref.target,destination=_ref.destination,viewport=_ref.viewport,withDroppableDisplacement=_ref.withDroppableDisplacement,isVisibleThroughFrameFn=_ref.isVisibleThroughFrameFn;var displacedTarget=withDroppableDisplacement?getDroppableDisplaced(toBeDisplaced,destination):toBeDisplaced;return isVisibleInDroppable(displacedTarget,destination,isVisibleThroughFrameFn)&&isVisibleInViewport(displacedTarget,viewport,isVisibleThroughFrameFn)};var isPartiallyVisible=function isPartiallyVisible(args){return isVisible(_extends({},args,{isVisibleThroughFrameFn:isPartiallyVisibleThroughFrame}))};var isTotallyVisible=function isTotallyVisible(args){return isVisible(_extends({},args,{isVisibleThroughFrameFn:isTotallyVisibleThroughFrame}))};var isTotallyVisibleOnAxis=function isTotallyVisibleOnAxis(args){return isVisible(_extends({},args,{isVisibleThroughFrameFn:isTotallyVisibleThroughFrameOnAxis(args.destination.axis)}))};var getShouldAnimate=function getShouldAnimate(id,last,forceShouldAnimate){if(typeof forceShouldAnimate==="boolean"){return forceShouldAnimate}if(!last){return true}var invisible=last.invisible,visible=last.visible;if(invisible[id]){return false}var previous=visible[id];return previous?previous.shouldAnimate:true};function getTarget(draggable,displacedBy){var marginBox=draggable.page.marginBox;var expandBy={top:displacedBy.point.y,right:0,bottom:0,left:displacedBy.point.x};return cssBoxModel.getRect(cssBoxModel.expand(marginBox,expandBy))}function getDisplacementGroups(_ref){var afterDragging=_ref.afterDragging,destination=_ref.destination,displacedBy=_ref.displacedBy,viewport=_ref.viewport,forceShouldAnimate=_ref.forceShouldAnimate,last=_ref.last;return afterDragging.reduce((function process(groups,draggable){var target=getTarget(draggable,displacedBy);var id=draggable.descriptor.id;groups.all.push(id);var isVisible=isPartiallyVisible({target:target,destination:destination,viewport:viewport,withDroppableDisplacement:true});if(!isVisible){groups.invisible[draggable.descriptor.id]=true;return groups}var shouldAnimate=getShouldAnimate(id,last,forceShouldAnimate);var displacement={draggableId:id,shouldAnimate:shouldAnimate};groups.visible[id]=displacement;return groups}),{all:[],visible:{},invisible:{}})}function getIndexOfLastItem(draggables,options){if(!draggables.length){return 0}var indexOfLastItem=draggables[draggables.length-1].descriptor.index;return options.inHomeList?indexOfLastItem:indexOfLastItem+1}function goAtEnd(_ref){var insideDestination=_ref.insideDestination,inHomeList=_ref.inHomeList,displacedBy=_ref.displacedBy,destination=_ref.destination;var newIndex=getIndexOfLastItem(insideDestination,{inHomeList:inHomeList});return{displaced:emptyGroups,displacedBy:displacedBy,at:{type:"REORDER",destination:{droppableId:destination.descriptor.id,index:newIndex}}}}function calculateReorderImpact(_ref2){var draggable=_ref2.draggable,insideDestination=_ref2.insideDestination,destination=_ref2.destination,viewport=_ref2.viewport,displacedBy=_ref2.displacedBy,last=_ref2.last,index=_ref2.index,forceShouldAnimate=_ref2.forceShouldAnimate;var inHomeList=isHomeOf(draggable,destination);if(index==null){return goAtEnd({insideDestination:insideDestination,inHomeList:inHomeList,displacedBy:displacedBy,destination:destination})}var match=find(insideDestination,(function(item){return item.descriptor.index===index}));if(!match){return goAtEnd({insideDestination:insideDestination,inHomeList:inHomeList,displacedBy:displacedBy,destination:destination})}var withoutDragging=removeDraggableFromList(draggable,insideDestination);var sliceFrom=insideDestination.indexOf(match);var impacted=withoutDragging.slice(sliceFrom);var displaced=getDisplacementGroups({afterDragging:impacted,destination:destination,displacedBy:displacedBy,last:last,viewport:viewport.frame,forceShouldAnimate:forceShouldAnimate});return{displaced:displaced,displacedBy:displacedBy,at:{type:"REORDER",destination:{droppableId:destination.descriptor.id,index:index}}}}function didStartAfterCritical(draggableId,afterCritical){return Boolean(afterCritical.effected[draggableId])}var fromCombine=function(_ref){var isMovingForward=_ref.isMovingForward,destination=_ref.destination,draggables=_ref.draggables,combine=_ref.combine,afterCritical=_ref.afterCritical;if(!destination.isCombineEnabled){return null}var combineId=combine.draggableId;var combineWith=draggables[combineId];var combineWithIndex=combineWith.descriptor.index;var didCombineWithStartAfterCritical=didStartAfterCritical(combineId,afterCritical);if(didCombineWithStartAfterCritical){if(isMovingForward){return combineWithIndex}return combineWithIndex-1}if(isMovingForward){return combineWithIndex+1}return combineWithIndex};var fromReorder=function(_ref){var isMovingForward=_ref.isMovingForward,isInHomeList=_ref.isInHomeList,insideDestination=_ref.insideDestination,location=_ref.location;if(!insideDestination.length){return null}var currentIndex=location.index;var proposedIndex=isMovingForward?currentIndex+1:currentIndex-1;var firstIndex=insideDestination[0].descriptor.index;var lastIndex=insideDestination[insideDestination.length-1].descriptor.index;var upperBound=isInHomeList?lastIndex:lastIndex+1;if(proposedIndex<firstIndex){return null}if(proposedIndex>upperBound){return null}return proposedIndex};var moveToNextIndex=function(_ref){var isMovingForward=_ref.isMovingForward,isInHomeList=_ref.isInHomeList,draggable=_ref.draggable,draggables=_ref.draggables,destination=_ref.destination,insideDestination=_ref.insideDestination,previousImpact=_ref.previousImpact,viewport=_ref.viewport,afterCritical=_ref.afterCritical;var wasAt=previousImpact.at;!wasAt?false?undefined:invariant(false):void 0;if(wasAt.type==="REORDER"){var _newIndex=fromReorder({isMovingForward:isMovingForward,isInHomeList:isInHomeList,location:wasAt.destination,insideDestination:insideDestination});if(_newIndex==null){return null}return calculateReorderImpact({draggable:draggable,insideDestination:insideDestination,destination:destination,viewport:viewport,last:previousImpact.displaced,displacedBy:previousImpact.displacedBy,index:_newIndex})}var newIndex=fromCombine({isMovingForward:isMovingForward,destination:destination,displaced:previousImpact.displaced,draggables:draggables,combine:wasAt.combine,afterCritical:afterCritical});if(newIndex==null){return null}return calculateReorderImpact({draggable:draggable,insideDestination:insideDestination,destination:destination,viewport:viewport,last:previousImpact.displaced,displacedBy:previousImpact.displacedBy,index:newIndex})};var getCombinedItemDisplacement=function(_ref){var displaced=_ref.displaced,afterCritical=_ref.afterCritical,combineWith=_ref.combineWith,displacedBy=_ref.displacedBy;var isDisplaced=Boolean(displaced.visible[combineWith]||displaced.invisible[combineWith]);if(didStartAfterCritical(combineWith,afterCritical)){return isDisplaced?origin:negate(displacedBy.point)}return isDisplaced?displacedBy.point:origin};var whenCombining=function(_ref){var afterCritical=_ref.afterCritical,impact=_ref.impact,draggables=_ref.draggables;var combine=tryGetCombine(impact);!combine?false?undefined:invariant(false):void 0;var combineWith=combine.draggableId;var center=draggables[combineWith].page.borderBox.center;var displaceBy=getCombinedItemDisplacement({displaced:impact.displaced,afterCritical:afterCritical,combineWith:combineWith,displacedBy:impact.displacedBy});return add(center,displaceBy)};var distanceFromStartToBorderBoxCenter=function distanceFromStartToBorderBoxCenter(axis,box){return box.margin[axis.start]+box.borderBox[axis.size]/2};var distanceFromEndToBorderBoxCenter=function distanceFromEndToBorderBoxCenter(axis,box){return box.margin[axis.end]+box.borderBox[axis.size]/2};var getCrossAxisBorderBoxCenter=function getCrossAxisBorderBoxCenter(axis,target,isMoving){return target[axis.crossAxisStart]+isMoving.margin[axis.crossAxisStart]+isMoving.borderBox[axis.crossAxisSize]/2};var goAfter=function goAfter(_ref){var axis=_ref.axis,moveRelativeTo=_ref.moveRelativeTo,isMoving=_ref.isMoving;return patch(axis.line,moveRelativeTo.marginBox[axis.end]+distanceFromStartToBorderBoxCenter(axis,isMoving),getCrossAxisBorderBoxCenter(axis,moveRelativeTo.marginBox,isMoving))};var goBefore=function goBefore(_ref2){var axis=_ref2.axis,moveRelativeTo=_ref2.moveRelativeTo,isMoving=_ref2.isMoving;return patch(axis.line,moveRelativeTo.marginBox[axis.start]-distanceFromEndToBorderBoxCenter(axis,isMoving),getCrossAxisBorderBoxCenter(axis,moveRelativeTo.marginBox,isMoving))};var goIntoStart=function goIntoStart(_ref3){var axis=_ref3.axis,moveInto=_ref3.moveInto,isMoving=_ref3.isMoving;return patch(axis.line,moveInto.contentBox[axis.start]+distanceFromStartToBorderBoxCenter(axis,isMoving),getCrossAxisBorderBoxCenter(axis,moveInto.contentBox,isMoving))};var whenReordering=function(_ref){var impact=_ref.impact,draggable=_ref.draggable,draggables=_ref.draggables,droppable=_ref.droppable,afterCritical=_ref.afterCritical;var insideDestination=getDraggablesInsideDroppable(droppable.descriptor.id,draggables);var draggablePage=draggable.page;var axis=droppable.axis;if(!insideDestination.length){return goIntoStart({axis:axis,moveInto:droppable.page,isMoving:draggablePage})}var displaced=impact.displaced,displacedBy=impact.displacedBy;var closestAfter=displaced.all[0];if(closestAfter){var closest=draggables[closestAfter];if(didStartAfterCritical(closestAfter,afterCritical)){return goBefore({axis:axis,moveRelativeTo:closest.page,isMoving:draggablePage})}var withDisplacement=cssBoxModel.offset(closest.page,displacedBy.point);return goBefore({axis:axis,moveRelativeTo:withDisplacement,isMoving:draggablePage})}var last=insideDestination[insideDestination.length-1];if(last.descriptor.id===draggable.descriptor.id){return draggablePage.borderBox.center}if(didStartAfterCritical(last.descriptor.id,afterCritical)){var page=cssBoxModel.offset(last.page,negate(afterCritical.displacedBy.point));return goAfter({axis:axis,moveRelativeTo:page,isMoving:draggablePage})}return goAfter({axis:axis,moveRelativeTo:last.page,isMoving:draggablePage})};var withDroppableDisplacement=function(droppable,point){var frame=droppable.frame;if(!frame){return point}return add(point,frame.scroll.diff.displacement)};var getResultWithoutDroppableDisplacement=function getResultWithoutDroppableDisplacement(_ref){var impact=_ref.impact,draggable=_ref.draggable,droppable=_ref.droppable,draggables=_ref.draggables,afterCritical=_ref.afterCritical;var original=draggable.page.borderBox.center;var at=impact.at;if(!droppable){return original}if(!at){return original}if(at.type==="REORDER"){return whenReordering({impact:impact,draggable:draggable,draggables:draggables,droppable:droppable,afterCritical:afterCritical})}return whenCombining({impact:impact,draggables:draggables,afterCritical:afterCritical})};var getPageBorderBoxCenterFromImpact=function(args){var withoutDisplacement=getResultWithoutDroppableDisplacement(args);var droppable=args.droppable;var withDisplacement=droppable?withDroppableDisplacement(droppable,withoutDisplacement):withoutDisplacement;return withDisplacement};var scrollViewport=function(viewport,newScroll){var diff=subtract(newScroll,viewport.scroll.initial);var displacement=negate(diff);var frame=cssBoxModel.getRect({top:newScroll.y,bottom:newScroll.y+viewport.frame.height,left:newScroll.x,right:newScroll.x+viewport.frame.width});var updated={frame:frame,scroll:{initial:viewport.scroll.initial,max:viewport.scroll.max,current:newScroll,diff:{value:diff,displacement:displacement}}};return updated};function getDraggables(ids,draggables){return ids.map((function(id){return draggables[id]}))}function tryGetVisible(id,groups){for(var i=0;i<groups.length;i++){var displacement=groups[i].visible[id];if(displacement){return displacement}}return null}var speculativelyIncrease=function(_ref){var impact=_ref.impact,viewport=_ref.viewport,destination=_ref.destination,draggables=_ref.draggables,maxScrollChange=_ref.maxScrollChange;var scrolledViewport=scrollViewport(viewport,add(viewport.scroll.current,maxScrollChange));var scrolledDroppable=destination.frame?scrollDroppable(destination,add(destination.frame.scroll.current,maxScrollChange)):destination;var last=impact.displaced;var withViewportScroll=getDisplacementGroups({afterDragging:getDraggables(last.all,draggables),destination:destination,displacedBy:impact.displacedBy,viewport:scrolledViewport.frame,last:last,forceShouldAnimate:false});var withDroppableScroll=getDisplacementGroups({afterDragging:getDraggables(last.all,draggables),destination:scrolledDroppable,displacedBy:impact.displacedBy,viewport:viewport.frame,last:last,forceShouldAnimate:false});var invisible={};var visible={};var groups=[last,withViewportScroll,withDroppableScroll];last.all.forEach((function(id){var displacement=tryGetVisible(id,groups);if(displacement){visible[id]=displacement;return}invisible[id]=true}));var newImpact=_extends({},impact,{displaced:{all:last.all,invisible:invisible,visible:visible}});return newImpact};var withViewportDisplacement=function(viewport,point){return add(viewport.scroll.diff.displacement,point)};var getClientFromPageBorderBoxCenter=function(_ref){var pageBorderBoxCenter=_ref.pageBorderBoxCenter,draggable=_ref.draggable,viewport=_ref.viewport;var withoutPageScrollChange=withViewportDisplacement(viewport,pageBorderBoxCenter);var offset=subtract(withoutPageScrollChange,draggable.page.borderBox.center);return add(draggable.client.borderBox.center,offset)};var isTotallyVisibleInNewLocation=function(_ref){var draggable=_ref.draggable,destination=_ref.destination,newPageBorderBoxCenter=_ref.newPageBorderBoxCenter,viewport=_ref.viewport,withDroppableDisplacement=_ref.withDroppableDisplacement,_ref$onlyOnMainAxis=_ref.onlyOnMainAxis,onlyOnMainAxis=_ref$onlyOnMainAxis===void 0?false:_ref$onlyOnMainAxis;var changeNeeded=subtract(newPageBorderBoxCenter,draggable.page.borderBox.center);var shifted=offsetByPosition(draggable.page.borderBox,changeNeeded);var args={target:shifted,destination:destination,withDroppableDisplacement:withDroppableDisplacement,viewport:viewport};return onlyOnMainAxis?isTotallyVisibleOnAxis(args):isTotallyVisible(args)};var moveToNextPlace=function(_ref){var isMovingForward=_ref.isMovingForward,draggable=_ref.draggable,destination=_ref.destination,draggables=_ref.draggables,previousImpact=_ref.previousImpact,viewport=_ref.viewport,previousPageBorderBoxCenter=_ref.previousPageBorderBoxCenter,previousClientSelection=_ref.previousClientSelection,afterCritical=_ref.afterCritical;if(!destination.isEnabled){return null}var insideDestination=getDraggablesInsideDroppable(destination.descriptor.id,draggables);var isInHomeList=isHomeOf(draggable,destination);var impact=moveToNextCombine({isMovingForward:isMovingForward,draggable:draggable,destination:destination,insideDestination:insideDestination,previousImpact:previousImpact})||moveToNextIndex({isMovingForward:isMovingForward,isInHomeList:isInHomeList,draggable:draggable,draggables:draggables,destination:destination,insideDestination:insideDestination,previousImpact:previousImpact,viewport:viewport,afterCritical:afterCritical});if(!impact){return null}var pageBorderBoxCenter=getPageBorderBoxCenterFromImpact({impact:impact,draggable:draggable,droppable:destination,draggables:draggables,afterCritical:afterCritical});var isVisibleInNewLocation=isTotallyVisibleInNewLocation({draggable:draggable,destination:destination,newPageBorderBoxCenter:pageBorderBoxCenter,viewport:viewport.frame,withDroppableDisplacement:false,onlyOnMainAxis:true});if(isVisibleInNewLocation){var clientSelection=getClientFromPageBorderBoxCenter({pageBorderBoxCenter:pageBorderBoxCenter,draggable:draggable,viewport:viewport});return{clientSelection:clientSelection,impact:impact,scrollJumpRequest:null}}var distance=subtract(pageBorderBoxCenter,previousPageBorderBoxCenter);var cautious=speculativelyIncrease({impact:impact,viewport:viewport,destination:destination,draggables:draggables,maxScrollChange:distance});return{clientSelection:previousClientSelection,impact:cautious,scrollJumpRequest:distance}};var getKnownActive=function getKnownActive(droppable){var rect=droppable.subject.active;!rect?false?undefined:invariant(false):void 0;return rect};var getBestCrossAxisDroppable=function(_ref){var isMovingForward=_ref.isMovingForward,pageBorderBoxCenter=_ref.pageBorderBoxCenter,source=_ref.source,droppables=_ref.droppables,viewport=_ref.viewport;var active=source.subject.active;if(!active){return null}var axis=source.axis;var isBetweenSourceClipped=isWithin(active[axis.start],active[axis.end]);var candidates=toDroppableList(droppables).filter((function(droppable){return droppable!==source})).filter((function(droppable){return droppable.isEnabled})).filter((function(droppable){return Boolean(droppable.subject.active)})).filter((function(droppable){return isPartiallyVisibleThroughFrame(viewport.frame)(getKnownActive(droppable))})).filter((function(droppable){var activeOfTarget=getKnownActive(droppable);if(isMovingForward){return active[axis.crossAxisEnd]<activeOfTarget[axis.crossAxisEnd]}return activeOfTarget[axis.crossAxisStart]<active[axis.crossAxisStart]})).filter((function(droppable){var activeOfTarget=getKnownActive(droppable);var isBetweenDestinationClipped=isWithin(activeOfTarget[axis.start],activeOfTarget[axis.end]);return isBetweenSourceClipped(activeOfTarget[axis.start])||isBetweenSourceClipped(activeOfTarget[axis.end])||isBetweenDestinationClipped(active[axis.start])||isBetweenDestinationClipped(active[axis.end])})).sort((function(a,b){var first=getKnownActive(a)[axis.crossAxisStart];var second=getKnownActive(b)[axis.crossAxisStart];if(isMovingForward){return first-second}return second-first})).filter((function(droppable,index,array){return getKnownActive(droppable)[axis.crossAxisStart]===getKnownActive(array[0])[axis.crossAxisStart]}));if(!candidates.length){return null}if(candidates.length===1){return candidates[0]}var contains=candidates.filter((function(droppable){var isWithinDroppable=isWithin(getKnownActive(droppable)[axis.start],getKnownActive(droppable)[axis.end]);return isWithinDroppable(pageBorderBoxCenter[axis.line])}));if(contains.length===1){return contains[0]}if(contains.length>1){return contains.sort((function(a,b){return getKnownActive(a)[axis.start]-getKnownActive(b)[axis.start]}))[0]}return candidates.sort((function(a,b){var first=closest(pageBorderBoxCenter,getCorners(getKnownActive(a)));var second=closest(pageBorderBoxCenter,getCorners(getKnownActive(b)));if(first!==second){return first-second}return getKnownActive(a)[axis.start]-getKnownActive(b)[axis.start]}))[0]};var getCurrentPageBorderBoxCenter=function getCurrentPageBorderBoxCenter(draggable,afterCritical){var original=draggable.page.borderBox.center;return didStartAfterCritical(draggable.descriptor.id,afterCritical)?subtract(original,afterCritical.displacedBy.point):original};var getCurrentPageBorderBox=function getCurrentPageBorderBox(draggable,afterCritical){var original=draggable.page.borderBox;return didStartAfterCritical(draggable.descriptor.id,afterCritical)?offsetByPosition(original,negate(afterCritical.displacedBy.point)):original};var getClosestDraggable=function(_ref){var pageBorderBoxCenter=_ref.pageBorderBoxCenter,viewport=_ref.viewport,destination=_ref.destination,insideDestination=_ref.insideDestination,afterCritical=_ref.afterCritical;var sorted=insideDestination.filter((function(draggable){return isTotallyVisible({target:getCurrentPageBorderBox(draggable,afterCritical),destination:destination,viewport:viewport.frame,withDroppableDisplacement:true})})).sort((function(a,b){var distanceToA=distance(pageBorderBoxCenter,withDroppableDisplacement(destination,getCurrentPageBorderBoxCenter(a,afterCritical)));var distanceToB=distance(pageBorderBoxCenter,withDroppableDisplacement(destination,getCurrentPageBorderBoxCenter(b,afterCritical)));if(distanceToA<distanceToB){return-1}if(distanceToB<distanceToA){return 1}return a.descriptor.index-b.descriptor.index}));return sorted[0]||null};var getDisplacedBy=memoizeOne((function getDisplacedBy(axis,displaceBy){var displacement=displaceBy[axis.line];return{value:displacement,point:patch(axis.line,displacement)}}));var getRequiredGrowthForPlaceholder=function getRequiredGrowthForPlaceholder(droppable,placeholderSize,draggables){var axis=droppable.axis;if(droppable.descriptor.mode==="virtual"){return patch(axis.line,placeholderSize[axis.line])}var availableSpace=droppable.subject.page.contentBox[axis.size];var insideDroppable=getDraggablesInsideDroppable(droppable.descriptor.id,draggables);var spaceUsed=insideDroppable.reduce((function(sum,dimension){return sum+dimension.client.marginBox[axis.size]}),0);var requiredSpace=spaceUsed+placeholderSize[axis.line];var needsToGrowBy=requiredSpace-availableSpace;if(needsToGrowBy<=0){return null}return patch(axis.line,needsToGrowBy)};var withMaxScroll=function withMaxScroll(frame,max){return _extends({},frame,{scroll:_extends({},frame.scroll,{max:max})})};var addPlaceholder=function addPlaceholder(droppable,draggable,draggables){var frame=droppable.frame;!!isHomeOf(draggable,droppable)?false?undefined:invariant(false):void 0;!!droppable.subject.withPlaceholder?false?undefined:invariant(false):void 0;var placeholderSize=getDisplacedBy(droppable.axis,draggable.displaceBy).point;var requiredGrowth=getRequiredGrowthForPlaceholder(droppable,placeholderSize,draggables);var added={placeholderSize:placeholderSize,increasedBy:requiredGrowth,oldFrameMaxScroll:droppable.frame?droppable.frame.scroll.max:null};if(!frame){var _subject=getSubject({page:droppable.subject.page,withPlaceholder:added,axis:droppable.axis,frame:droppable.frame});return _extends({},droppable,{subject:_subject})}var maxScroll=requiredGrowth?add(frame.scroll.max,requiredGrowth):frame.scroll.max;var newFrame=withMaxScroll(frame,maxScroll);var subject=getSubject({page:droppable.subject.page,withPlaceholder:added,axis:droppable.axis,frame:newFrame});return _extends({},droppable,{subject:subject,frame:newFrame})};var removePlaceholder=function removePlaceholder(droppable){var added=droppable.subject.withPlaceholder;!added?false?undefined:invariant(false):void 0;var frame=droppable.frame;if(!frame){var _subject2=getSubject({page:droppable.subject.page,axis:droppable.axis,frame:null,withPlaceholder:null});return _extends({},droppable,{subject:_subject2})}var oldMaxScroll=added.oldFrameMaxScroll;!oldMaxScroll?false?undefined:invariant(false):void 0;var newFrame=withMaxScroll(frame,oldMaxScroll);var subject=getSubject({page:droppable.subject.page,axis:droppable.axis,frame:newFrame,withPlaceholder:null});return _extends({},droppable,{subject:subject,frame:newFrame})};var moveToNewDroppable=function(_ref){var previousPageBorderBoxCenter=_ref.previousPageBorderBoxCenter,moveRelativeTo=_ref.moveRelativeTo,insideDestination=_ref.insideDestination,draggable=_ref.draggable,draggables=_ref.draggables,destination=_ref.destination,viewport=_ref.viewport,afterCritical=_ref.afterCritical;if(!moveRelativeTo){if(insideDestination.length){return null}var proposed={displaced:emptyGroups,displacedBy:noDisplacedBy,at:{type:"REORDER",destination:{droppableId:destination.descriptor.id,index:0}}};var proposedPageBorderBoxCenter=getPageBorderBoxCenterFromImpact({impact:proposed,draggable:draggable,droppable:destination,draggables:draggables,afterCritical:afterCritical});var withPlaceholder=isHomeOf(draggable,destination)?destination:addPlaceholder(destination,draggable,draggables);var isVisibleInNewLocation=isTotallyVisibleInNewLocation({draggable:draggable,destination:withPlaceholder,newPageBorderBoxCenter:proposedPageBorderBoxCenter,viewport:viewport.frame,withDroppableDisplacement:false,onlyOnMainAxis:true});return isVisibleInNewLocation?proposed:null}var isGoingBeforeTarget=Boolean(previousPageBorderBoxCenter[destination.axis.line]<=moveRelativeTo.page.borderBox.center[destination.axis.line]);var proposedIndex=function(){var relativeTo=moveRelativeTo.descriptor.index;if(moveRelativeTo.descriptor.id===draggable.descriptor.id){return relativeTo}if(isGoingBeforeTarget){return relativeTo}return relativeTo+1}();var displacedBy=getDisplacedBy(destination.axis,draggable.displaceBy);return calculateReorderImpact({draggable:draggable,insideDestination:insideDestination,destination:destination,viewport:viewport,displacedBy:displacedBy,last:emptyGroups,index:proposedIndex})};var moveCrossAxis=function(_ref){var isMovingForward=_ref.isMovingForward,previousPageBorderBoxCenter=_ref.previousPageBorderBoxCenter,draggable=_ref.draggable,isOver=_ref.isOver,draggables=_ref.draggables,droppables=_ref.droppables,viewport=_ref.viewport,afterCritical=_ref.afterCritical;var destination=getBestCrossAxisDroppable({isMovingForward:isMovingForward,pageBorderBoxCenter:previousPageBorderBoxCenter,source:isOver,droppables:droppables,viewport:viewport});if(!destination){return null}var insideDestination=getDraggablesInsideDroppable(destination.descriptor.id,draggables);var moveRelativeTo=getClosestDraggable({pageBorderBoxCenter:previousPageBorderBoxCenter,viewport:viewport,destination:destination,insideDestination:insideDestination,afterCritical:afterCritical});var impact=moveToNewDroppable({previousPageBorderBoxCenter:previousPageBorderBoxCenter,destination:destination,draggable:draggable,draggables:draggables,moveRelativeTo:moveRelativeTo,insideDestination:insideDestination,viewport:viewport,afterCritical:afterCritical});if(!impact){return null}var pageBorderBoxCenter=getPageBorderBoxCenterFromImpact({impact:impact,draggable:draggable,droppable:destination,draggables:draggables,afterCritical:afterCritical});var clientSelection=getClientFromPageBorderBoxCenter({pageBorderBoxCenter:pageBorderBoxCenter,draggable:draggable,viewport:viewport});return{clientSelection:clientSelection,impact:impact,scrollJumpRequest:null}};var whatIsDraggedOver=function(impact){var at=impact.at;if(!at){return null}if(at.type==="REORDER"){return at.destination.droppableId}return at.combine.droppableId};var getDroppableOver=function getDroppableOver(impact,droppables){var id=whatIsDraggedOver(impact);return id?droppables[id]:null};var moveInDirection=function(_ref){var state=_ref.state,type=_ref.type;var isActuallyOver=getDroppableOver(state.impact,state.dimensions.droppables);var isMainAxisMovementAllowed=Boolean(isActuallyOver);var home=state.dimensions.droppables[state.critical.droppable.id];var isOver=isActuallyOver||home;var direction=isOver.axis.direction;var isMovingOnMainAxis=direction==="vertical"&&(type==="MOVE_UP"||type==="MOVE_DOWN")||direction==="horizontal"&&(type==="MOVE_LEFT"||type==="MOVE_RIGHT");if(isMovingOnMainAxis&&!isMainAxisMovementAllowed){return null}var isMovingForward=type==="MOVE_DOWN"||type==="MOVE_RIGHT";var draggable=state.dimensions.draggables[state.critical.draggable.id];var previousPageBorderBoxCenter=state.current.page.borderBoxCenter;var _state$dimensions=state.dimensions,draggables=_state$dimensions.draggables,droppables=_state$dimensions.droppables;return isMovingOnMainAxis?moveToNextPlace({isMovingForward:isMovingForward,previousPageBorderBoxCenter:previousPageBorderBoxCenter,draggable:draggable,destination:isOver,draggables:draggables,viewport:state.viewport,previousClientSelection:state.current.client.selection,previousImpact:state.impact,afterCritical:state.afterCritical}):moveCrossAxis({isMovingForward:isMovingForward,previousPageBorderBoxCenter:previousPageBorderBoxCenter,draggable:draggable,isOver:isOver,draggables:draggables,droppables:droppables,viewport:state.viewport,afterCritical:state.afterCritical})};function isMovementAllowed(state){return state.phase==="DRAGGING"||state.phase==="COLLECTING"}function isPositionInFrame(frame){var isWithinVertical=isWithin(frame.top,frame.bottom);var isWithinHorizontal=isWithin(frame.left,frame.right);return function run(point){return isWithinVertical(point.y)&&isWithinHorizontal(point.x)}}function getHasOverlap(first,second){return first.left<second.right&&first.right>second.left&&first.top<second.bottom&&first.bottom>second.top}function getFurthestAway(_ref){var pageBorderBox=_ref.pageBorderBox,draggable=_ref.draggable,candidates=_ref.candidates;var startCenter=draggable.page.borderBox.center;var sorted=candidates.map((function(candidate){var axis=candidate.axis;var target=patch(candidate.axis.line,pageBorderBox.center[axis.line],candidate.page.borderBox.center[axis.crossAxisLine]);return{id:candidate.descriptor.id,distance:distance(startCenter,target)}})).sort((function(a,b){return b.distance-a.distance}));return sorted[0]?sorted[0].id:null}function getDroppableOver$1(_ref2){var pageBorderBox=_ref2.pageBorderBox,draggable=_ref2.draggable,droppables=_ref2.droppables;var candidates=toDroppableList(droppables).filter((function(item){if(!item.isEnabled){return false}var active=item.subject.active;if(!active){return false}if(!getHasOverlap(pageBorderBox,active)){return false}if(isPositionInFrame(active)(pageBorderBox.center)){return true}var axis=item.axis;var childCenter=active.center[axis.crossAxisLine];var crossAxisStart=pageBorderBox[axis.crossAxisStart];var crossAxisEnd=pageBorderBox[axis.crossAxisEnd];var isContained=isWithin(active[axis.crossAxisStart],active[axis.crossAxisEnd]);var isStartContained=isContained(crossAxisStart);var isEndContained=isContained(crossAxisEnd);if(!isStartContained&&!isEndContained){return true}if(isStartContained){return crossAxisStart<childCenter}return crossAxisEnd>childCenter}));if(!candidates.length){return null}if(candidates.length===1){return candidates[0].descriptor.id}return getFurthestAway({pageBorderBox:pageBorderBox,draggable:draggable,candidates:candidates})}var offsetRectByPosition=function offsetRectByPosition(rect,point){return cssBoxModel.getRect(offsetByPosition(rect,point))};var withDroppableScroll=function(droppable,area){var frame=droppable.frame;if(!frame){return area}return offsetRectByPosition(area,frame.scroll.diff.value)};function getIsDisplaced(_ref){var displaced=_ref.displaced,id=_ref.id;return Boolean(displaced.visible[id]||displaced.invisible[id])}function atIndex(_ref){var draggable=_ref.draggable,closest=_ref.closest,inHomeList=_ref.inHomeList;if(!closest){return null}if(!inHomeList){return closest.descriptor.index}if(closest.descriptor.index>draggable.descriptor.index){return closest.descriptor.index-1}return closest.descriptor.index}var getReorderImpact=function(_ref2){var targetRect=_ref2.pageBorderBoxWithDroppableScroll,draggable=_ref2.draggable,destination=_ref2.destination,insideDestination=_ref2.insideDestination,last=_ref2.last,viewport=_ref2.viewport,afterCritical=_ref2.afterCritical;var axis=destination.axis;var displacedBy=getDisplacedBy(destination.axis,draggable.displaceBy);var displacement=displacedBy.value;var targetStart=targetRect[axis.start];var targetEnd=targetRect[axis.end];var withoutDragging=removeDraggableFromList(draggable,insideDestination);var closest=find(withoutDragging,(function(child){var id=child.descriptor.id;var childCenter=child.page.borderBox.center[axis.line];var didStartAfterCritical$1=didStartAfterCritical(id,afterCritical);var isDisplaced=getIsDisplaced({displaced:last,id:id});if(didStartAfterCritical$1){if(isDisplaced){return targetEnd<=childCenter}return targetStart<childCenter-displacement}if(isDisplaced){return targetEnd<=childCenter+displacement}return targetStart<childCenter}));var newIndex=atIndex({draggable:draggable,closest:closest,inHomeList:isHomeOf(draggable,destination)});return calculateReorderImpact({draggable:draggable,insideDestination:insideDestination,destination:destination,viewport:viewport,last:last,displacedBy:displacedBy,index:newIndex})};var combineThresholdDivisor=4;var getCombineImpact=function(_ref){var draggable=_ref.draggable,targetRect=_ref.pageBorderBoxWithDroppableScroll,previousImpact=_ref.previousImpact,destination=_ref.destination,insideDestination=_ref.insideDestination,afterCritical=_ref.afterCritical;if(!destination.isCombineEnabled){return null}var axis=destination.axis;var displacedBy=getDisplacedBy(destination.axis,draggable.displaceBy);var displacement=displacedBy.value;var targetStart=targetRect[axis.start];var targetEnd=targetRect[axis.end];var withoutDragging=removeDraggableFromList(draggable,insideDestination);var combineWith=find(withoutDragging,(function(child){var id=child.descriptor.id;var childRect=child.page.borderBox;var childSize=childRect[axis.size];var threshold=childSize/combineThresholdDivisor;var didStartAfterCritical$1=didStartAfterCritical(id,afterCritical);var isDisplaced=getIsDisplaced({displaced:previousImpact.displaced,id:id});if(didStartAfterCritical$1){if(isDisplaced){return targetEnd>childRect[axis.start]+threshold&&targetEnd<childRect[axis.end]-threshold}return targetStart>childRect[axis.start]-displacement+threshold&&targetStart<childRect[axis.end]-displacement-threshold}if(isDisplaced){return targetEnd>childRect[axis.start]+displacement+threshold&&targetEnd<childRect[axis.end]+displacement-threshold}return targetStart>childRect[axis.start]+threshold&&targetStart<childRect[axis.end]-threshold}));if(!combineWith){return null}var impact={displacedBy:displacedBy,displaced:previousImpact.displaced,at:{type:"COMBINE",combine:{draggableId:combineWith.descriptor.id,droppableId:destination.descriptor.id}}};return impact};var getDragImpact=function(_ref){var pageOffset=_ref.pageOffset,draggable=_ref.draggable,draggables=_ref.draggables,droppables=_ref.droppables,previousImpact=_ref.previousImpact,viewport=_ref.viewport,afterCritical=_ref.afterCritical;var pageBorderBox=offsetRectByPosition(draggable.page.borderBox,pageOffset);var destinationId=getDroppableOver$1({pageBorderBox:pageBorderBox,draggable:draggable,droppables:droppables});if(!destinationId){return noImpact}var destination=droppables[destinationId];var insideDestination=getDraggablesInsideDroppable(destination.descriptor.id,draggables);var pageBorderBoxWithDroppableScroll=withDroppableScroll(destination,pageBorderBox);return getCombineImpact({pageBorderBoxWithDroppableScroll:pageBorderBoxWithDroppableScroll,draggable:draggable,previousImpact:previousImpact,destination:destination,insideDestination:insideDestination,afterCritical:afterCritical})||getReorderImpact({pageBorderBoxWithDroppableScroll:pageBorderBoxWithDroppableScroll,draggable:draggable,destination:destination,insideDestination:insideDestination,last:previousImpact.displaced,viewport:viewport,afterCritical:afterCritical})};var patchDroppableMap=function(droppables,updated){var _extends2;return _extends({},droppables,(_extends2={},_extends2[updated.descriptor.id]=updated,_extends2))};var clearUnusedPlaceholder=function clearUnusedPlaceholder(_ref){var previousImpact=_ref.previousImpact,impact=_ref.impact,droppables=_ref.droppables;var last=whatIsDraggedOver(previousImpact);var now=whatIsDraggedOver(impact);if(!last){return droppables}if(last===now){return droppables}var lastDroppable=droppables[last];if(!lastDroppable.subject.withPlaceholder){return droppables}var updated=removePlaceholder(lastDroppable);return patchDroppableMap(droppables,updated)};var recomputePlaceholders=function(_ref2){var draggable=_ref2.draggable,draggables=_ref2.draggables,droppables=_ref2.droppables,previousImpact=_ref2.previousImpact,impact=_ref2.impact;var cleaned=clearUnusedPlaceholder({previousImpact:previousImpact,impact:impact,droppables:droppables});var isOver=whatIsDraggedOver(impact);if(!isOver){return cleaned}var droppable=droppables[isOver];if(isHomeOf(draggable,droppable)){return cleaned}if(droppable.subject.withPlaceholder){return cleaned}var patched=addPlaceholder(droppable,draggable,draggables);return patchDroppableMap(cleaned,patched)};var update=function(_ref){var state=_ref.state,forcedClientSelection=_ref.clientSelection,forcedDimensions=_ref.dimensions,forcedViewport=_ref.viewport,forcedImpact=_ref.impact,scrollJumpRequest=_ref.scrollJumpRequest;var viewport=forcedViewport||state.viewport;var dimensions=forcedDimensions||state.dimensions;var clientSelection=forcedClientSelection||state.current.client.selection;var offset=subtract(clientSelection,state.initial.client.selection);var client={offset:offset,selection:clientSelection,borderBoxCenter:add(state.initial.client.borderBoxCenter,offset)};var page={selection:add(client.selection,viewport.scroll.current),borderBoxCenter:add(client.borderBoxCenter,viewport.scroll.current),offset:add(client.offset,viewport.scroll.diff.value)};var current={client:client,page:page};if(state.phase==="COLLECTING"){return _extends({phase:"COLLECTING"},state,{dimensions:dimensions,viewport:viewport,current:current})}var draggable=dimensions.draggables[state.critical.draggable.id];var newImpact=forcedImpact||getDragImpact({pageOffset:page.offset,draggable:draggable,draggables:dimensions.draggables,droppables:dimensions.droppables,previousImpact:state.impact,viewport:viewport,afterCritical:state.afterCritical});var withUpdatedPlaceholders=recomputePlaceholders({draggable:draggable,impact:newImpact,previousImpact:state.impact,draggables:dimensions.draggables,droppables:dimensions.droppables});var result=_extends({},state,{current:current,dimensions:{draggables:dimensions.draggables,droppables:withUpdatedPlaceholders},impact:newImpact,viewport:viewport,scrollJumpRequest:scrollJumpRequest||null,forceShouldAnimate:scrollJumpRequest?false:null});return result};function getDraggables$1(ids,draggables){return ids.map((function(id){return draggables[id]}))}var recompute=function(_ref){var impact=_ref.impact,viewport=_ref.viewport,draggables=_ref.draggables,destination=_ref.destination,forceShouldAnimate=_ref.forceShouldAnimate;var last=impact.displaced;var afterDragging=getDraggables$1(last.all,draggables);var displaced=getDisplacementGroups({afterDragging:afterDragging,destination:destination,displacedBy:impact.displacedBy,viewport:viewport.frame,forceShouldAnimate:forceShouldAnimate,last:last});return _extends({},impact,{displaced:displaced})};var getClientBorderBoxCenter=function(_ref){var impact=_ref.impact,draggable=_ref.draggable,droppable=_ref.droppable,draggables=_ref.draggables,viewport=_ref.viewport,afterCritical=_ref.afterCritical;var pageBorderBoxCenter=getPageBorderBoxCenterFromImpact({impact:impact,draggable:draggable,draggables:draggables,droppable:droppable,afterCritical:afterCritical});return getClientFromPageBorderBoxCenter({pageBorderBoxCenter:pageBorderBoxCenter,draggable:draggable,viewport:viewport})};var refreshSnap=function(_ref){var state=_ref.state,forcedDimensions=_ref.dimensions,forcedViewport=_ref.viewport;!(state.movementMode==="SNAP")?false?undefined:invariant(false):void 0;var needsVisibilityCheck=state.impact;var viewport=forcedViewport||state.viewport;var dimensions=forcedDimensions||state.dimensions;var draggables=dimensions.draggables,droppables=dimensions.droppables;var draggable=draggables[state.critical.draggable.id];var isOver=whatIsDraggedOver(needsVisibilityCheck);!isOver?false?undefined:invariant(false):void 0;var destination=droppables[isOver];var impact=recompute({impact:needsVisibilityCheck,viewport:viewport,destination:destination,draggables:draggables});var clientSelection=getClientBorderBoxCenter({impact:impact,draggable:draggable,droppable:destination,draggables:draggables,viewport:viewport,afterCritical:state.afterCritical});return update({impact:impact,clientSelection:clientSelection,state:state,dimensions:dimensions,viewport:viewport})};var getHomeLocation=function(descriptor){return{index:descriptor.index,droppableId:descriptor.droppableId}};var getLiftEffect=function(_ref){var draggable=_ref.draggable,home=_ref.home,draggables=_ref.draggables,viewport=_ref.viewport;var displacedBy=getDisplacedBy(home.axis,draggable.displaceBy);var insideHome=getDraggablesInsideDroppable(home.descriptor.id,draggables);var rawIndex=insideHome.indexOf(draggable);!(rawIndex!==-1)?false?undefined:invariant(false):void 0;var afterDragging=insideHome.slice(rawIndex+1);var effected=afterDragging.reduce((function(previous,item){previous[item.descriptor.id]=true;return previous}),{});var afterCritical={inVirtualList:home.descriptor.mode==="virtual",displacedBy:displacedBy,effected:effected};var displaced=getDisplacementGroups({afterDragging:afterDragging,destination:home,displacedBy:displacedBy,last:null,viewport:viewport.frame,forceShouldAnimate:false});var impact={displaced:displaced,displacedBy:displacedBy,at:{type:"REORDER",destination:getHomeLocation(draggable.descriptor)}};return{impact:impact,afterCritical:afterCritical}};var patchDimensionMap=function(dimensions,updated){return{draggables:dimensions.draggables,droppables:patchDroppableMap(dimensions.droppables,updated)}};var start=function start(key){if(false){}};var finish=function finish(key){if(false){}};var offsetDraggable=function(_ref){var draggable=_ref.draggable,offset=_ref.offset,initialWindowScroll=_ref.initialWindowScroll;var client=cssBoxModel.offset(draggable.client,offset);var page=cssBoxModel.withScroll(client,initialWindowScroll);var moved=_extends({},draggable,{placeholder:_extends({},draggable.placeholder,{client:client}),client:client,page:page});return moved};var getFrame=function(droppable){var frame=droppable.frame;!frame?false?undefined:invariant(false):void 0;return frame};var adjustAdditionsForScrollChanges=function(_ref){var additions=_ref.additions,updatedDroppables=_ref.updatedDroppables,viewport=_ref.viewport;var windowScrollChange=viewport.scroll.diff.value;return additions.map((function(draggable){var droppableId=draggable.descriptor.droppableId;var modified=updatedDroppables[droppableId];var frame=getFrame(modified);var droppableScrollChange=frame.scroll.diff.value;var totalChange=add(windowScrollChange,droppableScrollChange);var moved=offsetDraggable({draggable:draggable,offset:totalChange,initialWindowScroll:viewport.scroll.initial});return moved}))};var publishWhileDraggingInVirtual=function(_ref){var state=_ref.state,published=_ref.published;start();var withScrollChange=published.modified.map((function(update){var existing=state.dimensions.droppables[update.droppableId];var scrolled=scrollDroppable(existing,update.scroll);return scrolled}));var droppables=_extends({},state.dimensions.droppables,{},toDroppableMap(withScrollChange));var updatedAdditions=toDraggableMap(adjustAdditionsForScrollChanges({additions:published.additions,updatedDroppables:droppables,viewport:state.viewport}));var draggables=_extends({},state.dimensions.draggables,{},updatedAdditions);published.removals.forEach((function(id){delete draggables[id]}));var dimensions={droppables:droppables,draggables:draggables};var wasOverId=whatIsDraggedOver(state.impact);var wasOver=wasOverId?dimensions.droppables[wasOverId]:null;var draggable=dimensions.draggables[state.critical.draggable.id];var home=dimensions.droppables[state.critical.droppable.id];var _getLiftEffect=getLiftEffect({draggable:draggable,home:home,draggables:draggables,viewport:state.viewport}),onLiftImpact=_getLiftEffect.impact,afterCritical=_getLiftEffect.afterCritical;var previousImpact=wasOver&&wasOver.isCombineEnabled?state.impact:onLiftImpact;var impact=getDragImpact({pageOffset:state.current.page.offset,draggable:dimensions.draggables[state.critical.draggable.id],draggables:dimensions.draggables,droppables:dimensions.droppables,previousImpact:previousImpact,viewport:state.viewport,afterCritical:afterCritical});finish();var draggingState=_extends({phase:"DRAGGING"},state,{phase:"DRAGGING",impact:impact,onLiftImpact:onLiftImpact,dimensions:dimensions,afterCritical:afterCritical,forceShouldAnimate:false});if(state.phase==="COLLECTING"){return draggingState}var dropPending=_extends({phase:"DROP_PENDING"},draggingState,{phase:"DROP_PENDING",reason:state.reason,isWaiting:false});return dropPending};var isSnapping=function isSnapping(state){return state.movementMode==="SNAP"};var postDroppableChange=function postDroppableChange(state,updated,isEnabledChanging){var dimensions=patchDimensionMap(state.dimensions,updated);if(!isSnapping(state)||isEnabledChanging){return update({state:state,dimensions:dimensions})}return refreshSnap({state:state,dimensions:dimensions})};function removeScrollJumpRequest(state){if(state.isDragging&&state.movementMode==="SNAP"){return _extends({phase:"DRAGGING"},state,{scrollJumpRequest:null})}return state}var idle={phase:"IDLE",completed:null,shouldFlush:false};var reducer=function(state,action){if(state===void 0){state=idle}if(action.type==="FLUSH"){return _extends({},idle,{shouldFlush:true})}if(action.type==="INITIAL_PUBLISH"){!(state.phase==="IDLE")?false?undefined:invariant(false):void 0;var _action$payload=action.payload,critical=_action$payload.critical,clientSelection=_action$payload.clientSelection,viewport=_action$payload.viewport,dimensions=_action$payload.dimensions,movementMode=_action$payload.movementMode;var draggable=dimensions.draggables[critical.draggable.id];var home=dimensions.droppables[critical.droppable.id];var client={selection:clientSelection,borderBoxCenter:draggable.client.borderBox.center,offset:origin};var initial={client:client,page:{selection:add(client.selection,viewport.scroll.initial),borderBoxCenter:add(client.selection,viewport.scroll.initial),offset:add(client.selection,viewport.scroll.diff.value)}};var isWindowScrollAllowed=toDroppableList(dimensions.droppables).every((function(item){return!item.isFixedOnPage}));var _getLiftEffect=getLiftEffect({draggable:draggable,home:home,draggables:dimensions.draggables,viewport:viewport}),impact=_getLiftEffect.impact,afterCritical=_getLiftEffect.afterCritical;var result={phase:"DRAGGING",isDragging:true,critical:critical,movementMode:movementMode,dimensions:dimensions,initial:initial,current:initial,isWindowScrollAllowed:isWindowScrollAllowed,impact:impact,afterCritical:afterCritical,onLiftImpact:impact,viewport:viewport,scrollJumpRequest:null,forceShouldAnimate:null};return result}if(action.type==="COLLECTION_STARTING"){if(state.phase==="COLLECTING"||state.phase==="DROP_PENDING"){return state}!(state.phase==="DRAGGING")?false?undefined:invariant(false):void 0;var _result=_extends({phase:"COLLECTING"},state,{phase:"COLLECTING"});return _result}if(action.type==="PUBLISH_WHILE_DRAGGING"){!(state.phase==="COLLECTING"||state.phase==="DROP_PENDING")?false?undefined:invariant(false):void 0;return publishWhileDraggingInVirtual({state:state,published:action.payload})}if(action.type==="MOVE"){if(state.phase==="DROP_PENDING"){return state}!isMovementAllowed(state)?false?undefined:invariant(false):void 0;var _clientSelection=action.payload.client;if(isEqual(_clientSelection,state.current.client.selection)){return state}return update({state:state,clientSelection:_clientSelection,impact:isSnapping(state)?state.impact:null})}if(action.type==="UPDATE_DROPPABLE_SCROLL"){if(state.phase==="DROP_PENDING"){return removeScrollJumpRequest(state)}if(state.phase==="COLLECTING"){return removeScrollJumpRequest(state)}!isMovementAllowed(state)?false?undefined:invariant(false):void 0;var _action$payload2=action.payload,id=_action$payload2.id,newScroll=_action$payload2.newScroll;var target=state.dimensions.droppables[id];if(!target){return state}var scrolled=scrollDroppable(target,newScroll);return postDroppableChange(state,scrolled,false)}if(action.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(state.phase==="DROP_PENDING"){return state}!isMovementAllowed(state)?false?undefined:invariant(false):void 0;var _action$payload3=action.payload,_id=_action$payload3.id,isEnabled=_action$payload3.isEnabled;var _target=state.dimensions.droppables[_id];!_target?false?undefined:invariant(false):void 0;!(_target.isEnabled!==isEnabled)?false?undefined:invariant(false):void 0;var updated=_extends({},_target,{isEnabled:isEnabled});return postDroppableChange(state,updated,true)}if(action.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(state.phase==="DROP_PENDING"){return state}!isMovementAllowed(state)?false?undefined:invariant(false):void 0;var _action$payload4=action.payload,_id2=_action$payload4.id,isCombineEnabled=_action$payload4.isCombineEnabled;var _target2=state.dimensions.droppables[_id2];!_target2?false?undefined:invariant(false):void 0;!(_target2.isCombineEnabled!==isCombineEnabled)?false?undefined:invariant(false):void 0;var _updated=_extends({},_target2,{isCombineEnabled:isCombineEnabled});return postDroppableChange(state,_updated,true)}if(action.type==="MOVE_BY_WINDOW_SCROLL"){if(state.phase==="DROP_PENDING"||state.phase==="DROP_ANIMATING"){return state}!isMovementAllowed(state)?false?undefined:invariant(false):void 0;!state.isWindowScrollAllowed?false?undefined:invariant(false):void 0;var _newScroll=action.payload.newScroll;if(isEqual(state.viewport.scroll.current,_newScroll)){return removeScrollJumpRequest(state)}var _viewport=scrollViewport(state.viewport,_newScroll);if(isSnapping(state)){return refreshSnap({state:state,viewport:_viewport})}return update({state:state,viewport:_viewport})}if(action.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!isMovementAllowed(state)){return state}var maxScroll=action.payload.maxScroll;if(isEqual(maxScroll,state.viewport.scroll.max)){return state}var withMaxScroll=_extends({},state.viewport,{scroll:_extends({},state.viewport.scroll,{max:maxScroll})});return _extends({phase:"DRAGGING"},state,{viewport:withMaxScroll})}if(action.type==="MOVE_UP"||action.type==="MOVE_DOWN"||action.type==="MOVE_LEFT"||action.type==="MOVE_RIGHT"){if(state.phase==="COLLECTING"||state.phase==="DROP_PENDING"){return state}!(state.phase==="DRAGGING")?false?undefined:invariant(false):void 0;var _result2=moveInDirection({state:state,type:action.type});if(!_result2){return state}return update({state:state,impact:_result2.impact,clientSelection:_result2.clientSelection,scrollJumpRequest:_result2.scrollJumpRequest})}if(action.type==="DROP_PENDING"){var reason=action.payload.reason;!(state.phase==="COLLECTING")?false?undefined:invariant(false):void 0;var newState=_extends({phase:"DROP_PENDING"},state,{phase:"DROP_PENDING",isWaiting:true,reason:reason});return newState}if(action.type==="DROP_ANIMATE"){var _action$payload5=action.payload,completed=_action$payload5.completed,dropDuration=_action$payload5.dropDuration,newHomeClientOffset=_action$payload5.newHomeClientOffset;!(state.phase==="DRAGGING"||state.phase==="DROP_PENDING")?false?undefined:invariant(false):void 0;var _result3={phase:"DROP_ANIMATING",completed:completed,dropDuration:dropDuration,newHomeClientOffset:newHomeClientOffset,dimensions:state.dimensions};return _result3}if(action.type==="DROP_COMPLETE"){var _completed=action.payload.completed;return{phase:"IDLE",completed:_completed,shouldFlush:false}}return state};var beforeInitialCapture=function beforeInitialCapture(args){return{type:"BEFORE_INITIAL_CAPTURE",payload:args}};var lift=function lift(args){return{type:"LIFT",payload:args}};var initialPublish=function initialPublish(args){return{type:"INITIAL_PUBLISH",payload:args}};var publishWhileDragging=function publishWhileDragging(args){return{type:"PUBLISH_WHILE_DRAGGING",payload:args}};var collectionStarting=function collectionStarting(){return{type:"COLLECTION_STARTING",payload:null}};var updateDroppableScroll=function updateDroppableScroll(args){return{type:"UPDATE_DROPPABLE_SCROLL",payload:args}};var updateDroppableIsEnabled=function updateDroppableIsEnabled(args){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:args}};var updateDroppableIsCombineEnabled=function updateDroppableIsCombineEnabled(args){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:args}};var move=function move(args){return{type:"MOVE",payload:args}};var moveByWindowScroll=function moveByWindowScroll(args){return{type:"MOVE_BY_WINDOW_SCROLL",payload:args}};var updateViewportMaxScroll=function updateViewportMaxScroll(args){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:args}};var moveUp=function moveUp(){return{type:"MOVE_UP",payload:null}};var moveDown=function moveDown(){return{type:"MOVE_DOWN",payload:null}};var moveRight=function moveRight(){return{type:"MOVE_RIGHT",payload:null}};var moveLeft=function moveLeft(){return{type:"MOVE_LEFT",payload:null}};var flush=function flush(){return{type:"FLUSH",payload:null}};var animateDrop=function animateDrop(args){return{type:"DROP_ANIMATE",payload:args}};var completeDrop=function completeDrop(args){return{type:"DROP_COMPLETE",payload:args}};var drop=function drop(args){return{type:"DROP",payload:args}};var dropPending=function dropPending(args){return{type:"DROP_PENDING",payload:args}};var dropAnimationFinished=function dropAnimationFinished(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};function checkIndexes(insideDestination){if(insideDestination.length<=1){return}var indexes=insideDestination.map((function(d){return d.descriptor.index}));var errors={};for(var i=1;i<indexes.length;i++){var current=indexes[i];var previous=indexes[i-1];if(current!==previous+1){errors[current]=true}}if(!Object.keys(errors).length){return}var formatted=indexes.map((function(index){var hasError=Boolean(errors[index]);return hasError?"[🔥"+index+"]":""+index})).join(", ");false?undefined:void 0}function validateDimensions(critical,dimensions){if(false){var insideDestination}}var lift$1=function(marshal){return function(_ref){var getState=_ref.getState,dispatch=_ref.dispatch;return function(next){return function(action){if(action.type!=="LIFT"){next(action);return}var _action$payload=action.payload,id=_action$payload.id,clientSelection=_action$payload.clientSelection,movementMode=_action$payload.movementMode;var initial=getState();if(initial.phase==="DROP_ANIMATING"){dispatch(completeDrop({completed:initial.completed}))}!(getState().phase==="IDLE")?false?undefined:invariant(false):void 0;dispatch(flush());dispatch(beforeInitialCapture({draggableId:id,movementMode:movementMode}));var scrollOptions={shouldPublishImmediately:movementMode==="SNAP"};var request={draggableId:id,scrollOptions:scrollOptions};var _marshal$startPublish=marshal.startPublishing(request),critical=_marshal$startPublish.critical,dimensions=_marshal$startPublish.dimensions,viewport=_marshal$startPublish.viewport;validateDimensions(critical,dimensions);dispatch(initialPublish({critical:critical,dimensions:dimensions,clientSelection:clientSelection,movementMode:movementMode,viewport:viewport}))}}}};var style=function(marshal){return function(){return function(next){return function(action){if(action.type==="INITIAL_PUBLISH"){marshal.dragging()}if(action.type==="DROP_ANIMATE"){marshal.dropping(action.payload.completed.result.reason)}if(action.type==="FLUSH"||action.type==="DROP_COMPLETE"){marshal.resting()}next(action)}}}};var curves={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"};var combine={opacity:{drop:0,combining:.7},scale:{drop:.75}};var timings={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55};var outOfTheWayTiming=timings.outOfTheWay+"s "+curves.outOfTheWay;var transitions={fluid:"opacity "+outOfTheWayTiming,snap:"transform "+outOfTheWayTiming+", opacity "+outOfTheWayTiming,drop:function drop(duration){var timing=duration+"s "+curves.drop;return"transform "+timing+", opacity "+timing},outOfTheWay:"transform "+outOfTheWayTiming,placeholder:"height "+outOfTheWayTiming+", width "+outOfTheWayTiming+", margin "+outOfTheWayTiming};var moveTo=function moveTo(offset){return isEqual(offset,origin)?null:"translate("+offset.x+"px, "+offset.y+"px)"};var transforms={moveTo:moveTo,drop:function drop(offset,isCombining){var translate=moveTo(offset);if(!translate){return null}if(!isCombining){return translate}return translate+" scale("+combine.scale.drop+")"}};var minDropTime=timings.minDropTime,maxDropTime=timings.maxDropTime;var dropTimeRange=maxDropTime-minDropTime;var maxDropTimeAtDistance=1500;var cancelDropModifier=.6;var getDropDuration=function(_ref){var current=_ref.current,destination=_ref.destination,reason=_ref.reason;var distance$1=distance(current,destination);if(distance$1<=0){return minDropTime}if(distance$1>=maxDropTimeAtDistance){return maxDropTime}var percentage=distance$1/maxDropTimeAtDistance;var duration=minDropTime+dropTimeRange*percentage;var withDuration=reason==="CANCEL"?duration*cancelDropModifier:duration;return Number(withDuration.toFixed(2))};var getNewHomeClientOffset=function(_ref){var impact=_ref.impact,draggable=_ref.draggable,dimensions=_ref.dimensions,viewport=_ref.viewport,afterCritical=_ref.afterCritical;var draggables=dimensions.draggables,droppables=dimensions.droppables;var droppableId=whatIsDraggedOver(impact);var destination=droppableId?droppables[droppableId]:null;var home=droppables[draggable.descriptor.droppableId];var newClientCenter=getClientBorderBoxCenter({impact:impact,draggable:draggable,draggables:draggables,afterCritical:afterCritical,droppable:destination||home,viewport:viewport});var offset=subtract(newClientCenter,draggable.client.borderBox.center);return offset};var getDropImpact=function(_ref){var draggables=_ref.draggables,reason=_ref.reason,lastImpact=_ref.lastImpact,home=_ref.home,viewport=_ref.viewport,onLiftImpact=_ref.onLiftImpact;if(!lastImpact.at||reason!=="DROP"){var recomputedHomeImpact=recompute({draggables:draggables,impact:onLiftImpact,destination:home,viewport:viewport,forceShouldAnimate:true});return{impact:recomputedHomeImpact,didDropInsideDroppable:false}}if(lastImpact.at.type==="REORDER"){return{impact:lastImpact,didDropInsideDroppable:true}}var withoutMovement=_extends({},lastImpact,{displaced:emptyGroups});return{impact:withoutMovement,didDropInsideDroppable:true}};var drop$1=function(_ref){var getState=_ref.getState,dispatch=_ref.dispatch;return function(next){return function(action){if(action.type!=="DROP"){next(action);return}var state=getState();var reason=action.payload.reason;if(state.phase==="COLLECTING"){dispatch(dropPending({reason:reason}));return}if(state.phase==="IDLE"){return}var isWaitingForDrop=state.phase==="DROP_PENDING"&&state.isWaiting;!!isWaitingForDrop?false?undefined:invariant(false):void 0;!(state.phase==="DRAGGING"||state.phase==="DROP_PENDING")?false?undefined:invariant(false):void 0;var critical=state.critical;var dimensions=state.dimensions;var draggable=dimensions.draggables[state.critical.draggable.id];var _getDropImpact=getDropImpact({reason:reason,lastImpact:state.impact,afterCritical:state.afterCritical,onLiftImpact:state.onLiftImpact,home:state.dimensions.droppables[state.critical.droppable.id],viewport:state.viewport,draggables:state.dimensions.draggables}),impact=_getDropImpact.impact,didDropInsideDroppable=_getDropImpact.didDropInsideDroppable;var destination=didDropInsideDroppable?tryGetDestination(impact):null;var combine=didDropInsideDroppable?tryGetCombine(impact):null;var source={index:critical.draggable.index,droppableId:critical.droppable.id};var result={draggableId:draggable.descriptor.id,type:draggable.descriptor.type,source:source,reason:reason,mode:state.movementMode,destination:destination,combine:combine};var newHomeClientOffset=getNewHomeClientOffset({impact:impact,draggable:draggable,dimensions:dimensions,viewport:state.viewport,afterCritical:state.afterCritical});var completed={critical:state.critical,afterCritical:state.afterCritical,result:result,impact:impact};var isAnimationRequired=!isEqual(state.current.client.offset,newHomeClientOffset)||Boolean(result.combine);if(!isAnimationRequired){dispatch(completeDrop({completed:completed}));return}var dropDuration=getDropDuration({current:state.current.client.offset,destination:newHomeClientOffset,reason:reason});var args={newHomeClientOffset:newHomeClientOffset,dropDuration:dropDuration,completed:completed};dispatch(animateDrop(args))}}};var getWindowScroll=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function getWindowScrollBinding(update){return{eventName:"scroll",options:{passive:true,capture:false},fn:function fn(event){if(event.target!==window&&event.target!==window.document){return}update()}}}function getScrollListener(_ref){var onWindowScroll=_ref.onWindowScroll;function updateScroll(){onWindowScroll(getWindowScroll())}var scheduled=rafSchd(updateScroll);var binding=getWindowScrollBinding(scheduled);var unbind=noop;function isActive(){return unbind!==noop}function start(){!!isActive()?false?undefined:invariant(false):void 0;unbind=bindEvents(window,[binding])}function stop(){!isActive()?false?undefined:invariant(false):void 0;scheduled.cancel();unbind();unbind=noop}return{start:start,stop:stop,isActive:isActive}}var shouldEnd=function shouldEnd(action){return action.type==="DROP_COMPLETE"||action.type==="DROP_ANIMATE"||action.type==="FLUSH"};var scrollListener=function(store){var listener=getScrollListener({onWindowScroll:function onWindowScroll(newScroll){store.dispatch(moveByWindowScroll({newScroll:newScroll}))}});return function(next){return function(action){if(!listener.isActive()&&action.type==="INITIAL_PUBLISH"){listener.start()}if(listener.isActive()&&shouldEnd(action)){listener.stop()}next(action)}}};var getExpiringAnnounce=function(announce){var wasCalled=false;var isExpired=false;var timeoutId=setTimeout((function(){isExpired=true}));var result=function result(message){if(wasCalled){false?undefined:void 0;return}if(isExpired){false?undefined:void 0;return}wasCalled=true;announce(message);clearTimeout(timeoutId)};result.wasCalled=function(){return wasCalled};return result};var getAsyncMarshal=function(){var entries=[];var execute=function execute(timerId){var index=findIndex(entries,(function(item){return item.timerId===timerId}));!(index!==-1)?false?undefined:invariant(false):void 0;var _entries$splice=entries.splice(index,1),entry=_entries$splice[0];entry.callback()};var add=function add(fn){var timerId=setTimeout((function(){return execute(timerId)}));var entry={timerId:timerId,callback:fn};entries.push(entry)};var flush=function flush(){if(!entries.length){return}var shallow=[].concat(entries);entries.length=0;shallow.forEach((function(entry){clearTimeout(entry.timerId);entry.callback()}))};return{add:add,flush:flush}};var areLocationsEqual=function areLocationsEqual(first,second){if(first==null&&second==null){return true}if(first==null||second==null){return false}return first.droppableId===second.droppableId&&first.index===second.index};var isCombineEqual=function isCombineEqual(first,second){if(first==null&&second==null){return true}if(first==null||second==null){return false}return first.draggableId===second.draggableId&&first.droppableId===second.droppableId};var isCriticalEqual=function isCriticalEqual(first,second){if(first===second){return true}var isDraggableEqual=first.draggable.id===second.draggable.id&&first.draggable.droppableId===second.draggable.droppableId&&first.draggable.type===second.draggable.type&&first.draggable.index===second.draggable.index;var isDroppableEqual=first.droppable.id===second.droppable.id&&first.droppable.type===second.droppable.type;return isDraggableEqual&&isDroppableEqual};var withTimings=function withTimings(key,fn){start();fn();finish()};var getDragStart=function getDragStart(critical,mode){return{draggableId:critical.draggable.id,type:critical.droppable.type,source:{droppableId:critical.droppable.id,index:critical.draggable.index},mode:mode}};var execute=function execute(responder,data,announce,getDefaultMessage){if(!responder){announce(getDefaultMessage(data));return}var willExpire=getExpiringAnnounce(announce);var provided={announce:willExpire};responder(data,provided);if(!willExpire.wasCalled()){announce(getDefaultMessage(data))}};var getPublisher=function(getResponders,announce){var asyncMarshal=getAsyncMarshal();var dragging=null;var beforeCapture=function beforeCapture(draggableId,mode){!!dragging?false?undefined:invariant(false):void 0;withTimings("onBeforeCapture",(function(){var fn=getResponders().onBeforeCapture;if(fn){var before={draggableId:draggableId,mode:mode};fn(before)}}))};var beforeStart=function beforeStart(critical,mode){!!dragging?false?undefined:invariant(false):void 0;withTimings("onBeforeDragStart",(function(){var fn=getResponders().onBeforeDragStart;if(fn){fn(getDragStart(critical,mode))}}))};var start=function start(critical,mode){!!dragging?false?undefined:invariant(false):void 0;var data=getDragStart(critical,mode);dragging={mode:mode,lastCritical:critical,lastLocation:data.source,lastCombine:null};asyncMarshal.add((function(){withTimings("onDragStart",(function(){return execute(getResponders().onDragStart,data,announce,preset.onDragStart)}))}))};var update=function update(critical,impact){var location=tryGetDestination(impact);var combine=tryGetCombine(impact);!dragging?false?undefined:invariant(false):void 0;var hasCriticalChanged=!isCriticalEqual(critical,dragging.lastCritical);if(hasCriticalChanged){dragging.lastCritical=critical}var hasLocationChanged=!areLocationsEqual(dragging.lastLocation,location);if(hasLocationChanged){dragging.lastLocation=location}var hasGroupingChanged=!isCombineEqual(dragging.lastCombine,combine);if(hasGroupingChanged){dragging.lastCombine=combine}if(!hasCriticalChanged&&!hasLocationChanged&&!hasGroupingChanged){return}var data=_extends({},getDragStart(critical,dragging.mode),{combine:combine,destination:location});asyncMarshal.add((function(){withTimings("onDragUpdate",(function(){return execute(getResponders().onDragUpdate,data,announce,preset.onDragUpdate)}))}))};var flush=function flush(){!dragging?false?undefined:invariant(false):void 0;asyncMarshal.flush()};var drop=function drop(result){!dragging?false?undefined:invariant(false):void 0;dragging=null;withTimings("onDragEnd",(function(){return execute(getResponders().onDragEnd,result,announce,preset.onDragEnd)}))};var abort=function abort(){if(!dragging){return}var result=_extends({},getDragStart(dragging.lastCritical,dragging.mode),{combine:null,destination:null,reason:"CANCEL"});drop(result)};return{beforeCapture:beforeCapture,beforeStart:beforeStart,start:start,update:update,flush:flush,drop:drop,abort:abort}};var responders=function(getResponders,announce){var publisher=getPublisher(getResponders,announce);return function(store){return function(next){return function(action){if(action.type==="BEFORE_INITIAL_CAPTURE"){publisher.beforeCapture(action.payload.draggableId,action.payload.movementMode);return}if(action.type==="INITIAL_PUBLISH"){var critical=action.payload.critical;publisher.beforeStart(critical,action.payload.movementMode);next(action);publisher.start(critical,action.payload.movementMode);return}if(action.type==="DROP_COMPLETE"){var result=action.payload.completed.result;publisher.flush();next(action);publisher.drop(result);return}next(action);if(action.type==="FLUSH"){publisher.abort();return}var state=store.getState();if(state.phase==="DRAGGING"){publisher.update(state.critical,state.impact)}}}}};var dropAnimationFinish=function(store){return function(next){return function(action){if(action.type!=="DROP_ANIMATION_FINISHED"){next(action);return}var state=store.getState();!(state.phase==="DROP_ANIMATING")?false?undefined:invariant(false):void 0;store.dispatch(completeDrop({completed:state.completed}))}}};var dropAnimationFlushOnScroll=function(store){var unbind=null;var frameId=null;function clear(){if(frameId){cancelAnimationFrame(frameId);frameId=null}if(unbind){unbind();unbind=null}}return function(next){return function(action){if(action.type==="FLUSH"||action.type==="DROP_COMPLETE"||action.type==="DROP_ANIMATION_FINISHED"){clear()}next(action);if(action.type!=="DROP_ANIMATE"){return}var binding={eventName:"scroll",options:{capture:true,passive:false,once:true},fn:function flushDropAnimation(){var state=store.getState();if(state.phase==="DROP_ANIMATING"){store.dispatch(dropAnimationFinished())}}};frameId=requestAnimationFrame((function(){frameId=null;unbind=bindEvents(window,[binding])}))}}};var dimensionMarshalStopper=function(marshal){return function(){return function(next){return function(action){if(action.type==="DROP_COMPLETE"||action.type==="FLUSH"||action.type==="DROP_ANIMATE"){marshal.stopPublishing()}next(action)}}}};var focus=function(marshal){var isWatching=false;return function(){return function(next){return function(action){if(action.type==="INITIAL_PUBLISH"){isWatching=true;marshal.tryRecordFocus(action.payload.critical.draggable.id);next(action);marshal.tryRestoreFocusRecorded();return}next(action);if(!isWatching){return}if(action.type==="FLUSH"){isWatching=false;marshal.tryRestoreFocusRecorded();return}if(action.type==="DROP_COMPLETE"){isWatching=false;var result=action.payload.completed.result;if(result.combine){marshal.tryShiftRecord(result.draggableId,result.combine.draggableId)}marshal.tryRestoreFocusRecorded()}}}}};var shouldStop=function shouldStop(action){return action.type==="DROP_COMPLETE"||action.type==="DROP_ANIMATE"||action.type==="FLUSH"};var autoScroll=function(autoScroller){return function(store){return function(next){return function(action){if(shouldStop(action)){autoScroller.stop();next(action);return}if(action.type==="INITIAL_PUBLISH"){next(action);var state=store.getState();!(state.phase==="DRAGGING")?false?undefined:invariant(false):void 0;autoScroller.start(state);return}next(action);autoScroller.scroll(store.getState())}}}};var pendingDrop=function(store){return function(next){return function(action){next(action);if(action.type!=="PUBLISH_WHILE_DRAGGING"){return}var postActionState=store.getState();if(postActionState.phase!=="DROP_PENDING"){return}if(postActionState.isWaiting){return}store.dispatch(drop({reason:postActionState.reason}))}}};var composeEnhancers=false?undefined:redux.compose;var createStore=function(_ref){var dimensionMarshal=_ref.dimensionMarshal,focusMarshal=_ref.focusMarshal,styleMarshal=_ref.styleMarshal,getResponders=_ref.getResponders,announce=_ref.announce,autoScroller=_ref.autoScroller;return redux.createStore(reducer,composeEnhancers(redux.applyMiddleware(style(styleMarshal),dimensionMarshalStopper(dimensionMarshal),lift$1(dimensionMarshal),drop$1,dropAnimationFinish,dropAnimationFlushOnScroll,pendingDrop,autoScroll(autoScroller),scrollListener,focus(focusMarshal),responders(getResponders,announce))))};var clean$1=function clean(){return{additions:{},removals:{},modified:{}}};function createPublisher(_ref){var registry=_ref.registry,callbacks=_ref.callbacks;var staging=clean$1();var frameId=null;var collect=function collect(){if(frameId){return}callbacks.collectionStarting();frameId=requestAnimationFrame((function(){frameId=null;start();var _staging=staging,additions=_staging.additions,removals=_staging.removals,modified=_staging.modified;var added=Object.keys(additions).map((function(id){return registry.draggable.getById(id).getDimension(origin)})).sort((function(a,b){return a.descriptor.index-b.descriptor.index}));var updated=Object.keys(modified).map((function(id){var entry=registry.droppable.getById(id);var scroll=entry.callbacks.getScrollWhileDragging();return{droppableId:id,scroll:scroll}}));var result={additions:added,removals:Object.keys(removals),modified:updated};staging=clean$1();finish();callbacks.publish(result)}))};var add=function add(entry){var id=entry.descriptor.id;staging.additions[id]=entry;staging.modified[entry.descriptor.droppableId]=true;if(staging.removals[id]){delete staging.removals[id]}collect()};var remove=function remove(entry){var descriptor=entry.descriptor;staging.removals[descriptor.id]=true;staging.modified[descriptor.droppableId]=true;if(staging.additions[descriptor.id]){delete staging.additions[descriptor.id]}collect()};var stop=function stop(){if(!frameId){return}cancelAnimationFrame(frameId);frameId=null;staging=clean$1()};return{add:add,remove:remove,stop:stop}}var getMaxScroll=function(_ref){var scrollHeight=_ref.scrollHeight,scrollWidth=_ref.scrollWidth,height=_ref.height,width=_ref.width;var maxScroll=subtract({x:scrollWidth,y:scrollHeight},{x:width,y:height});var adjustedMaxScroll={x:Math.max(0,maxScroll.x),y:Math.max(0,maxScroll.y)};return adjustedMaxScroll};var getDocumentElement=function(){var doc=document.documentElement;!doc?false?undefined:invariant(false):void 0;return doc};var getMaxWindowScroll=function(){var doc=getDocumentElement();var maxScroll=getMaxScroll({scrollHeight:doc.scrollHeight,scrollWidth:doc.scrollWidth,width:doc.clientWidth,height:doc.clientHeight});return maxScroll};var getViewport=function(){var scroll=getWindowScroll();var maxScroll=getMaxWindowScroll();var top=scroll.y;var left=scroll.x;var doc=getDocumentElement();var width=doc.clientWidth;var height=doc.clientHeight;var right=left+width;var bottom=top+height;var frame=cssBoxModel.getRect({top:top,left:left,right:right,bottom:bottom});var viewport={frame:frame,scroll:{initial:scroll,current:scroll,max:maxScroll,diff:{value:origin,displacement:origin}}};return viewport};var getInitialPublish=function(_ref){var critical=_ref.critical,scrollOptions=_ref.scrollOptions,registry=_ref.registry;start();var viewport=getViewport();var windowScroll=viewport.scroll.current;var home=critical.droppable;var droppables=registry.droppable.getAllByType(home.type).map((function(entry){return entry.callbacks.getDimensionAndWatchScroll(windowScroll,scrollOptions)}));var draggables=registry.draggable.getAllByType(critical.draggable.type).map((function(entry){return entry.getDimension(windowScroll)}));var dimensions={draggables:toDraggableMap(draggables),droppables:toDroppableMap(droppables)};finish();var result={dimensions:dimensions,critical:critical,viewport:viewport};return result};function shouldPublishUpdate(registry,dragging,entry){if(entry.descriptor.id===dragging.id){return false}if(entry.descriptor.type!==dragging.type){return false}var home=registry.droppable.getById(entry.descriptor.droppableId);if(home.descriptor.mode!=="virtual"){false?undefined:void 0;return false}return true}var createDimensionMarshal=function(registry,callbacks){var collection=null;var publisher=createPublisher({callbacks:{publish:callbacks.publishWhileDragging,collectionStarting:callbacks.collectionStarting},registry:registry});var updateDroppableIsEnabled=function updateDroppableIsEnabled(id,isEnabled){!registry.droppable.exists(id)?false?undefined:invariant(false):void 0;if(!collection){return}callbacks.updateDroppableIsEnabled({id:id,isEnabled:isEnabled})};var updateDroppableIsCombineEnabled=function updateDroppableIsCombineEnabled(id,isCombineEnabled){if(!collection){return}!registry.droppable.exists(id)?false?undefined:invariant(false):void 0;callbacks.updateDroppableIsCombineEnabled({id:id,isCombineEnabled:isCombineEnabled})};var updateDroppableScroll=function updateDroppableScroll(id,newScroll){if(!collection){return}!registry.droppable.exists(id)?false?undefined:invariant(false):void 0;callbacks.updateDroppableScroll({id:id,newScroll:newScroll})};var scrollDroppable=function scrollDroppable(id,change){if(!collection){return}registry.droppable.getById(id).callbacks.scroll(change)};var stopPublishing=function stopPublishing(){if(!collection){return}publisher.stop();var home=collection.critical.droppable;registry.droppable.getAllByType(home.type).forEach((function(entry){return entry.callbacks.dragStopped()}));collection.unsubscribe();collection=null};var subscriber=function subscriber(event){!collection?false?undefined:invariant(false):void 0;var dragging=collection.critical.draggable;if(event.type==="ADDITION"){if(shouldPublishUpdate(registry,dragging,event.value)){publisher.add(event.value)}}if(event.type==="REMOVAL"){if(shouldPublishUpdate(registry,dragging,event.value)){publisher.remove(event.value)}}};var startPublishing=function startPublishing(request){!!collection?false?undefined:invariant(false):void 0;var entry=registry.draggable.getById(request.draggableId);var home=registry.droppable.getById(entry.descriptor.droppableId);var critical={draggable:entry.descriptor,droppable:home.descriptor};var unsubscribe=registry.subscribe(subscriber);collection={critical:critical,unsubscribe:unsubscribe};return getInitialPublish({critical:critical,registry:registry,scrollOptions:request.scrollOptions})};var marshal={updateDroppableIsEnabled:updateDroppableIsEnabled,updateDroppableIsCombineEnabled:updateDroppableIsCombineEnabled,scrollDroppable:scrollDroppable,updateDroppableScroll:updateDroppableScroll,startPublishing:startPublishing,stopPublishing:stopPublishing};return marshal};var canStartDrag=function(state,id){if(state.phase==="IDLE"){return true}if(state.phase!=="DROP_ANIMATING"){return false}if(state.completed.result.draggableId===id){return false}return state.completed.result.reason==="DROP"};var scrollWindow=function(change){window.scrollBy(change.x,change.y)};var getScrollableDroppables=memoizeOne((function(droppables){return toDroppableList(droppables).filter((function(droppable){if(!droppable.isEnabled){return false}if(!droppable.frame){return false}return true}))}));var getScrollableDroppableOver=function getScrollableDroppableOver(target,droppables){var maybe=find(getScrollableDroppables(droppables),(function(droppable){!droppable.frame?false?undefined:invariant(false):void 0;return isPositionInFrame(droppable.frame.pageMarginBox)(target)}));return maybe};var getBestScrollableDroppable=function(_ref){var center=_ref.center,destination=_ref.destination,droppables=_ref.droppables;if(destination){var _dimension=droppables[destination];if(!_dimension.frame){return null}return _dimension}var dimension=getScrollableDroppableOver(center,droppables);return dimension};var config={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function ease(percentage){return Math.pow(percentage,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}};var getDistanceThresholds=function(container,axis){var startScrollingFrom=container[axis.size]*config.startFromPercentage;var maxScrollValueAt=container[axis.size]*config.maxScrollAtPercentage;var thresholds={startScrollingFrom:startScrollingFrom,maxScrollValueAt:maxScrollValueAt};return thresholds};var getPercentage=function(_ref){var startOfRange=_ref.startOfRange,endOfRange=_ref.endOfRange,current=_ref.current;var range=endOfRange-startOfRange;if(range===0){false?undefined:void 0;return 0}var currentInRange=current-startOfRange;var percentage=currentInRange/range;return percentage};var minScroll=1;var getValueFromDistance=function(distanceToEdge,thresholds){if(distanceToEdge>thresholds.startScrollingFrom){return 0}if(distanceToEdge<=thresholds.maxScrollValueAt){return config.maxPixelScroll}if(distanceToEdge===thresholds.startScrollingFrom){return minScroll}var percentageFromMaxScrollValueAt=getPercentage({startOfRange:thresholds.maxScrollValueAt,endOfRange:thresholds.startScrollingFrom,current:distanceToEdge});var percentageFromStartScrollingFrom=1-percentageFromMaxScrollValueAt;var scroll=config.maxPixelScroll*config.ease(percentageFromStartScrollingFrom);return Math.ceil(scroll)};var accelerateAt=config.durationDampening.accelerateAt;var stopAt=config.durationDampening.stopDampeningAt;var dampenValueByTime=function(proposedScroll,dragStartTime){var startOfRange=dragStartTime;var endOfRange=stopAt;var now=Date.now();var runTime=now-startOfRange;if(runTime>=stopAt){return proposedScroll}if(runTime<accelerateAt){return minScroll}var betweenAccelerateAtAndStopAtPercentage=getPercentage({startOfRange:accelerateAt,endOfRange:endOfRange,current:runTime});var scroll=proposedScroll*config.ease(betweenAccelerateAtAndStopAtPercentage);return Math.ceil(scroll)};var getValue=function(_ref){var distanceToEdge=_ref.distanceToEdge,thresholds=_ref.thresholds,dragStartTime=_ref.dragStartTime,shouldUseTimeDampening=_ref.shouldUseTimeDampening;var scroll=getValueFromDistance(distanceToEdge,thresholds);if(scroll===0){return 0}if(!shouldUseTimeDampening){return scroll}return Math.max(dampenValueByTime(scroll,dragStartTime),minScroll)};var getScrollOnAxis=function(_ref){var container=_ref.container,distanceToEdges=_ref.distanceToEdges,dragStartTime=_ref.dragStartTime,axis=_ref.axis,shouldUseTimeDampening=_ref.shouldUseTimeDampening;var thresholds=getDistanceThresholds(container,axis);var isCloserToEnd=distanceToEdges[axis.end]<distanceToEdges[axis.start];if(isCloserToEnd){return getValue({distanceToEdge:distanceToEdges[axis.end],thresholds:thresholds,dragStartTime:dragStartTime,shouldUseTimeDampening:shouldUseTimeDampening})}return-1*getValue({distanceToEdge:distanceToEdges[axis.start],thresholds:thresholds,dragStartTime:dragStartTime,shouldUseTimeDampening:shouldUseTimeDampening})};var adjustForSizeLimits=function(_ref){var container=_ref.container,subject=_ref.subject,proposedScroll=_ref.proposedScroll;var isTooBigVertically=subject.height>container.height;var isTooBigHorizontally=subject.width>container.width;if(!isTooBigHorizontally&&!isTooBigVertically){return proposedScroll}if(isTooBigHorizontally&&isTooBigVertically){return null}return{x:isTooBigHorizontally?0:proposedScroll.x,y:isTooBigVertically?0:proposedScroll.y}};var clean$2=apply((function(value){return value===0?0:value}));var getScroll=function(_ref){var dragStartTime=_ref.dragStartTime,container=_ref.container,subject=_ref.subject,center=_ref.center,shouldUseTimeDampening=_ref.shouldUseTimeDampening;var distanceToEdges={top:center.y-container.top,right:container.right-center.x,bottom:container.bottom-center.y,left:center.x-container.left};var y=getScrollOnAxis({container:container,distanceToEdges:distanceToEdges,dragStartTime:dragStartTime,axis:vertical,shouldUseTimeDampening:shouldUseTimeDampening});var x=getScrollOnAxis({container:container,distanceToEdges:distanceToEdges,dragStartTime:dragStartTime,axis:horizontal,shouldUseTimeDampening:shouldUseTimeDampening});var required=clean$2({x:x,y:y});if(isEqual(required,origin)){return null}var limited=adjustForSizeLimits({container:container,subject:subject,proposedScroll:required});if(!limited){return null}return isEqual(limited,origin)?null:limited};var smallestSigned=apply((function(value){if(value===0){return 0}return value>0?1:-1}));var getOverlap=function(){var getRemainder=function getRemainder(target,max){if(target<0){return target}if(target>max){return target-max}return 0};return function(_ref){var current=_ref.current,max=_ref.max,change=_ref.change;var targetScroll=add(current,change);var overlap={x:getRemainder(targetScroll.x,max.x),y:getRemainder(targetScroll.y,max.y)};if(isEqual(overlap,origin)){return null}return overlap}}();var canPartiallyScroll=function canPartiallyScroll(_ref2){var rawMax=_ref2.max,current=_ref2.current,change=_ref2.change;var max={x:Math.max(current.x,rawMax.x),y:Math.max(current.y,rawMax.y)};var smallestChange=smallestSigned(change);var overlap=getOverlap({max:max,current:current,change:smallestChange});if(!overlap){return true}if(smallestChange.x!==0&&overlap.x===0){return true}if(smallestChange.y!==0&&overlap.y===0){return true}return false};var canScrollWindow=function canScrollWindow(viewport,change){return canPartiallyScroll({current:viewport.scroll.current,max:viewport.scroll.max,change:change})};var getWindowOverlap=function getWindowOverlap(viewport,change){if(!canScrollWindow(viewport,change)){return null}var max=viewport.scroll.max;var current=viewport.scroll.current;return getOverlap({current:current,max:max,change:change})};var canScrollDroppable=function canScrollDroppable(droppable,change){var frame=droppable.frame;if(!frame){return false}return canPartiallyScroll({current:frame.scroll.current,max:frame.scroll.max,change:change})};var getDroppableOverlap=function getDroppableOverlap(droppable,change){var frame=droppable.frame;if(!frame){return null}if(!canScrollDroppable(droppable,change)){return null}return getOverlap({current:frame.scroll.current,max:frame.scroll.max,change:change})};var getWindowScrollChange=function(_ref){var viewport=_ref.viewport,subject=_ref.subject,center=_ref.center,dragStartTime=_ref.dragStartTime,shouldUseTimeDampening=_ref.shouldUseTimeDampening;var scroll=getScroll({dragStartTime:dragStartTime,container:viewport.frame,subject:subject,center:center,shouldUseTimeDampening:shouldUseTimeDampening});return scroll&&canScrollWindow(viewport,scroll)?scroll:null};var getDroppableScrollChange=function(_ref){var droppable=_ref.droppable,subject=_ref.subject,center=_ref.center,dragStartTime=_ref.dragStartTime,shouldUseTimeDampening=_ref.shouldUseTimeDampening;var frame=droppable.frame;if(!frame){return null}var scroll=getScroll({dragStartTime:dragStartTime,container:frame.pageMarginBox,subject:subject,center:center,shouldUseTimeDampening:shouldUseTimeDampening});return scroll&&canScrollDroppable(droppable,scroll)?scroll:null};var scroll$1=function(_ref){var state=_ref.state,dragStartTime=_ref.dragStartTime,shouldUseTimeDampening=_ref.shouldUseTimeDampening,scrollWindow=_ref.scrollWindow,scrollDroppable=_ref.scrollDroppable;var center=state.current.page.borderBoxCenter;var draggable=state.dimensions.draggables[state.critical.draggable.id];var subject=draggable.page.marginBox;if(state.isWindowScrollAllowed){var viewport=state.viewport;var _change=getWindowScrollChange({dragStartTime:dragStartTime,viewport:viewport,subject:subject,center:center,shouldUseTimeDampening:shouldUseTimeDampening});if(_change){scrollWindow(_change);return}}var droppable=getBestScrollableDroppable({center:center,destination:whatIsDraggedOver(state.impact),droppables:state.dimensions.droppables});if(!droppable){return}var change=getDroppableScrollChange({dragStartTime:dragStartTime,droppable:droppable,subject:subject,center:center,shouldUseTimeDampening:shouldUseTimeDampening});if(change){scrollDroppable(droppable.descriptor.id,change)}};var createFluidScroller=function(_ref){var scrollWindow=_ref.scrollWindow,scrollDroppable=_ref.scrollDroppable;var scheduleWindowScroll=rafSchd(scrollWindow);var scheduleDroppableScroll=rafSchd(scrollDroppable);var dragging=null;var tryScroll=function tryScroll(state){!dragging?false?undefined:invariant(false):void 0;var _dragging=dragging,shouldUseTimeDampening=_dragging.shouldUseTimeDampening,dragStartTime=_dragging.dragStartTime;scroll$1({state:state,scrollWindow:scheduleWindowScroll,scrollDroppable:scheduleDroppableScroll,dragStartTime:dragStartTime,shouldUseTimeDampening:shouldUseTimeDampening})};var start$1=function start$1(state){start();!!dragging?false?undefined:invariant(false):void 0;var dragStartTime=Date.now();var wasScrollNeeded=false;var fakeScrollCallback=function fakeScrollCallback(){wasScrollNeeded=true};scroll$1({state:state,dragStartTime:0,shouldUseTimeDampening:false,scrollWindow:fakeScrollCallback,scrollDroppable:fakeScrollCallback});dragging={dragStartTime:dragStartTime,shouldUseTimeDampening:wasScrollNeeded};finish();if(wasScrollNeeded){tryScroll(state)}};var stop=function stop(){if(!dragging){return}scheduleWindowScroll.cancel();scheduleDroppableScroll.cancel();dragging=null};return{start:start$1,stop:stop,scroll:tryScroll}};var createJumpScroller=function(_ref){var move=_ref.move,scrollDroppable=_ref.scrollDroppable,scrollWindow=_ref.scrollWindow;var moveByOffset=function moveByOffset(state,offset){var client=add(state.current.client.selection,offset);move({client:client})};var scrollDroppableAsMuchAsItCan=function scrollDroppableAsMuchAsItCan(droppable,change){if(!canScrollDroppable(droppable,change)){return change}var overlap=getDroppableOverlap(droppable,change);if(!overlap){scrollDroppable(droppable.descriptor.id,change);return null}var whatTheDroppableCanScroll=subtract(change,overlap);scrollDroppable(droppable.descriptor.id,whatTheDroppableCanScroll);var remainder=subtract(change,whatTheDroppableCanScroll);return remainder};var scrollWindowAsMuchAsItCan=function scrollWindowAsMuchAsItCan(isWindowScrollAllowed,viewport,change){if(!isWindowScrollAllowed){return change}if(!canScrollWindow(viewport,change)){return change}var overlap=getWindowOverlap(viewport,change);if(!overlap){scrollWindow(change);return null}var whatTheWindowCanScroll=subtract(change,overlap);scrollWindow(whatTheWindowCanScroll);var remainder=subtract(change,whatTheWindowCanScroll);return remainder};var jumpScroller=function jumpScroller(state){var request=state.scrollJumpRequest;if(!request){return}var destination=whatIsDraggedOver(state.impact);!destination?false?undefined:invariant(false):void 0;var droppableRemainder=scrollDroppableAsMuchAsItCan(state.dimensions.droppables[destination],request);if(!droppableRemainder){return}var viewport=state.viewport;var windowRemainder=scrollWindowAsMuchAsItCan(state.isWindowScrollAllowed,viewport,droppableRemainder);if(!windowRemainder){return}moveByOffset(state,windowRemainder)};return jumpScroller};var createAutoScroller=function(_ref){var scrollDroppable=_ref.scrollDroppable,scrollWindow=_ref.scrollWindow,move=_ref.move;var fluidScroller=createFluidScroller({scrollWindow:scrollWindow,scrollDroppable:scrollDroppable});var jumpScroll=createJumpScroller({move:move,scrollWindow:scrollWindow,scrollDroppable:scrollDroppable});var scroll=function scroll(state){if(state.phase!=="DRAGGING"){return}if(state.movementMode==="FLUID"){fluidScroller.scroll(state);return}if(!state.scrollJumpRequest){return}jumpScroll(state)};var scroller={scroll:scroll,start:fluidScroller.start,stop:fluidScroller.stop};return scroller};var prefix$1="data-rbd";var dragHandle=function(){var base=prefix$1+"-drag-handle";return{base:base,draggableId:base+"-draggable-id",contextId:base+"-context-id"}}();var draggable=function(){var base=prefix$1+"-draggable";return{base:base,contextId:base+"-context-id",id:base+"-id"}}();var droppable=function(){var base=prefix$1+"-droppable";return{base:base,contextId:base+"-context-id",id:base+"-id"}}();var scrollContainer={contextId:prefix$1+"-scroll-container-context-id"};var makeGetSelector=function makeGetSelector(context){return function(attribute){return"["+attribute+'="'+context+'"]'}};var getStyles=function getStyles(rules,property){return rules.map((function(rule){var value=rule.styles[property];if(!value){return""}return rule.selector+" { "+value+" }"})).join(" ")};var noPointerEvents="pointer-events: none;";var getStyles$1=function(contextId){var getSelector=makeGetSelector(contextId);var dragHandle$1=function(){var grabCursor="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ";return{selector:getSelector(dragHandle.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:grabCursor,dragging:noPointerEvents,dropAnimating:grabCursor}}}();var draggable$1=function(){var transition="\n      transition: "+transitions.outOfTheWay+";\n    ";return{selector:getSelector(draggable.contextId),styles:{dragging:transition,dropAnimating:transition,userCancel:transition}}}();var droppable$1={selector:getSelector(droppable.contextId),styles:{always:"overflow-anchor: none;"}};var body={selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}};var rules=[draggable$1,dragHandle$1,droppable$1,body];return{always:getStyles(rules,"always"),resting:getStyles(rules,"resting"),dragging:getStyles(rules,"dragging"),dropAnimating:getStyles(rules,"dropAnimating"),userCancel:getStyles(rules,"userCancel")}};var useIsomorphicLayoutEffect=typeof window!=="undefined"&&typeof window.document!=="undefined"&&typeof window.document.createElement!=="undefined"?React.useLayoutEffect:React.useEffect;var getHead=function getHead(){var head=document.querySelector("head");!head?false?undefined:invariant(false):void 0;return head};var createStyleEl=function createStyleEl(nonce){var el=document.createElement("style");if(nonce){el.setAttribute("nonce",nonce)}el.type="text/css";return el};function useStyleMarshal(contextId,nonce){var styles=useMemoOne.useMemo((function(){return getStyles$1(contextId)}),[contextId]);var alwaysRef=React.useRef(null);var dynamicRef=React.useRef(null);var setDynamicStyle=useMemoOne.useCallback(memoizeOne((function(proposed){var el=dynamicRef.current;!el?false?undefined:invariant(false):void 0;el.textContent=proposed})),[]);var setAlwaysStyle=useMemoOne.useCallback((function(proposed){var el=alwaysRef.current;!el?false?undefined:invariant(false):void 0;el.textContent=proposed}),[]);useIsomorphicLayoutEffect((function(){!(!alwaysRef.current&&!dynamicRef.current)?false?undefined:invariant(false):void 0;var always=createStyleEl(nonce);var dynamic=createStyleEl(nonce);alwaysRef.current=always;dynamicRef.current=dynamic;always.setAttribute(prefix$1+"-always",contextId);dynamic.setAttribute(prefix$1+"-dynamic",contextId);getHead().appendChild(always);getHead().appendChild(dynamic);setAlwaysStyle(styles.always);setDynamicStyle(styles.resting);return function(){var remove=function remove(ref){var current=ref.current;!current?false?undefined:invariant(false):void 0;getHead().removeChild(current);ref.current=null};remove(alwaysRef);remove(dynamicRef)}}),[nonce,setAlwaysStyle,setDynamicStyle,styles.always,styles.resting,contextId]);var dragging=useMemoOne.useCallback((function(){return setDynamicStyle(styles.dragging)}),[setDynamicStyle,styles.dragging]);var dropping=useMemoOne.useCallback((function(reason){if(reason==="DROP"){setDynamicStyle(styles.dropAnimating);return}setDynamicStyle(styles.userCancel)}),[setDynamicStyle,styles.dropAnimating,styles.userCancel]);var resting=useMemoOne.useCallback((function(){if(!dynamicRef.current){return}setDynamicStyle(styles.resting)}),[setDynamicStyle,styles.resting]);var marshal=useMemoOne.useMemo((function(){return{dragging:dragging,dropping:dropping,resting:resting}}),[dragging,dropping,resting]);return marshal}var getWindowFromEl=function(el){return el&&el.ownerDocument?el.ownerDocument.defaultView:window};function isHtmlElement(el){return el instanceof getWindowFromEl(el).HTMLElement}function findDragHandle(contextId,draggableId){var selector="["+dragHandle.contextId+'="'+contextId+'"]';var possible=toArray(document.querySelectorAll(selector));if(!possible.length){false?undefined:void 0;return null}var handle=find(possible,(function(el){return el.getAttribute(dragHandle.draggableId)===draggableId}));if(!handle){false?undefined:void 0;return null}if(!isHtmlElement(handle)){false?undefined:void 0;return null}return handle}function useFocusMarshal(contextId){var entriesRef=React.useRef({});var recordRef=React.useRef(null);var restoreFocusFrameRef=React.useRef(null);var isMountedRef=React.useRef(false);var register=useMemoOne.useCallback((function register(id,focus){var entry={id:id,focus:focus};entriesRef.current[id]=entry;return function unregister(){var entries=entriesRef.current;var current=entries[id];if(current!==entry){delete entries[id]}}}),[]);var tryGiveFocus=useMemoOne.useCallback((function tryGiveFocus(tryGiveFocusTo){var handle=findDragHandle(contextId,tryGiveFocusTo);if(handle&&handle!==document.activeElement){handle.focus()}}),[contextId]);var tryShiftRecord=useMemoOne.useCallback((function tryShiftRecord(previous,redirectTo){if(recordRef.current===previous){recordRef.current=redirectTo}}),[]);var tryRestoreFocusRecorded=useMemoOne.useCallback((function tryRestoreFocusRecorded(){if(restoreFocusFrameRef.current){return}if(!isMountedRef.current){return}restoreFocusFrameRef.current=requestAnimationFrame((function(){restoreFocusFrameRef.current=null;var record=recordRef.current;if(record){tryGiveFocus(record)}}))}),[tryGiveFocus]);var tryRecordFocus=useMemoOne.useCallback((function tryRecordFocus(id){recordRef.current=null;var focused=document.activeElement;if(!focused){return}if(focused.getAttribute(dragHandle.draggableId)!==id){return}recordRef.current=id}),[]);useIsomorphicLayoutEffect((function(){isMountedRef.current=true;return function clearFrameOnUnmount(){isMountedRef.current=false;var frameId=restoreFocusFrameRef.current;if(frameId){cancelAnimationFrame(frameId)}}}),[]);var marshal=useMemoOne.useMemo((function(){return{register:register,tryRecordFocus:tryRecordFocus,tryRestoreFocusRecorded:tryRestoreFocusRecorded,tryShiftRecord:tryShiftRecord}}),[register,tryRecordFocus,tryRestoreFocusRecorded,tryShiftRecord]);return marshal}function createRegistry(){var entries={draggables:{},droppables:{}};var subscribers=[];function subscribe(cb){subscribers.push(cb);return function unsubscribe(){var index=subscribers.indexOf(cb);if(index===-1){return}subscribers.splice(index,1)}}function notify(event){if(subscribers.length){subscribers.forEach((function(cb){return cb(event)}))}}function findDraggableById(id){return entries.draggables[id]||null}function getDraggableById(id){var entry=findDraggableById(id);!entry?false?undefined:invariant(false):void 0;return entry}var draggableAPI={register:function register(entry){entries.draggables[entry.descriptor.id]=entry;notify({type:"ADDITION",value:entry})},update:function update(entry,last){var current=entries.draggables[last.descriptor.id];if(!current){return}if(current.uniqueId!==entry.uniqueId){return}delete entries.draggables[last.descriptor.id];entries.draggables[entry.descriptor.id]=entry},unregister:function unregister(entry){var draggableId=entry.descriptor.id;var current=findDraggableById(draggableId);if(!current){return}if(entry.uniqueId!==current.uniqueId){return}delete entries.draggables[draggableId];notify({type:"REMOVAL",value:entry})},getById:getDraggableById,findById:findDraggableById,exists:function exists(id){return Boolean(findDraggableById(id))},getAllByType:function getAllByType(type){return values(entries.draggables).filter((function(entry){return entry.descriptor.type===type}))}};function findDroppableById(id){return entries.droppables[id]||null}function getDroppableById(id){var entry=findDroppableById(id);!entry?false?undefined:invariant(false):void 0;return entry}var droppableAPI={register:function register(entry){entries.droppables[entry.descriptor.id]=entry},unregister:function unregister(entry){var current=findDroppableById(entry.descriptor.id);if(!current){return}if(entry.uniqueId!==current.uniqueId){return}delete entries.droppables[entry.descriptor.id]},getById:getDroppableById,findById:findDroppableById,exists:function exists(id){return Boolean(findDroppableById(id))},getAllByType:function getAllByType(type){return values(entries.droppables).filter((function(entry){return entry.descriptor.type===type}))}};function clean(){entries.draggables={};entries.droppables={};subscribers.length=0}return{draggable:draggableAPI,droppable:droppableAPI,subscribe:subscribe,clean:clean}}function useRegistry(){var registry=useMemoOne.useMemo(createRegistry,[]);React.useEffect((function(){return function unmount(){requestAnimationFrame(registry.clean)}}),[registry]);return registry}var StoreContext=React__default.createContext(null);var getBodyElement=function(){var body=document.body;!body?false?undefined:invariant(false):void 0;return body};var visuallyHidden={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var getId=function getId(contextId){return"rbd-announcement-"+contextId};function useAnnouncer(contextId){var id=useMemoOne.useMemo((function(){return getId(contextId)}),[contextId]);var ref=React.useRef(null);React.useEffect((function setup(){var el=document.createElement("div");ref.current=el;el.id=id;el.setAttribute("aria-live","assertive");el.setAttribute("aria-atomic","true");_extends(el.style,visuallyHidden);getBodyElement().appendChild(el);return function cleanup(){setTimeout((function remove(){var body=getBodyElement();if(body.contains(el)){body.removeChild(el)}if(el===ref.current){ref.current=null}}))}}),[id]);var announce=useMemoOne.useCallback((function(message){var el=ref.current;if(el){el.textContent=message;return}false?undefined:void 0}),[]);return announce}var count=0;var defaults={separator:"::"};function reset(){count=0}function useUniqueId(prefix,options){if(options===void 0){options=defaults}return useMemoOne.useMemo((function(){return""+prefix+options.separator+count++}),[options.separator,prefix])}function getElementId(_ref){var contextId=_ref.contextId,uniqueId=_ref.uniqueId;return"rbd-hidden-text-"+contextId+"-"+uniqueId}function useHiddenTextElement(_ref2){var contextId=_ref2.contextId,text=_ref2.text;var uniqueId=useUniqueId("hidden-text",{separator:"-"});var id=useMemoOne.useMemo((function(){return getElementId({contextId:contextId,uniqueId:uniqueId})}),[uniqueId,contextId]);React.useEffect((function mount(){var el=document.createElement("div");el.id=id;el.textContent=text;el.style.display="none";getBodyElement().appendChild(el);return function unmount(){var body=getBodyElement();if(body.contains(el)){body.removeChild(el)}}}),[id,text]);return id}var AppContext=React__default.createContext(null);var peerDependencies={react:"^16.8.5","react-dom":"^16.8.5"};var semver=/(\d+)\.(\d+)\.(\d+)/;var getVersion=function getVersion(value){var result=semver.exec(value);!(result!=null)?false?undefined:invariant(false):void 0;var major=Number(result[1]);var minor=Number(result[2]);var patch=Number(result[3]);return{major:major,minor:minor,patch:patch,raw:value}};var isSatisfied=function isSatisfied(expected,actual){if(actual.major>expected.major){return true}if(actual.major<expected.major){return false}if(actual.minor>expected.minor){return true}if(actual.minor<expected.minor){return false}return actual.patch>=expected.patch};var checkReactVersion=function(peerDepValue,actualValue){var peerDep=getVersion(peerDepValue);var actual=getVersion(actualValue);if(isSatisfied(peerDep,actual)){return}false?undefined:void 0};var suffix="\n  We expect a html5 doctype: <!doctype html>\n  This is to ensure consistent browser layout and measurement\n\n  More information: https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/guides/doctype.md\n";var checkDoctype=function(doc){var doctype=doc.doctype;if(!doctype){false?undefined:void 0;return}if(doctype.name.toLowerCase()!=="html"){false?undefined:void 0}if(doctype.publicId!==""){false?undefined:void 0}};function useDev(useHook){if(false){}}function useDevSetupWarning(fn,inputs){useDev((function(){React.useEffect((function(){try{fn()}catch(e){error("\n          A setup problem was encountered.\n\n          > "+e.message+"\n        ")}}),inputs)}))}function useStartupValidation(){useDevSetupWarning((function(){checkReactVersion(peerDependencies.react,React__default.version);checkDoctype(document)}),[])}function usePrevious(current){var ref=React.useRef(current);React.useEffect((function(){ref.current=current}));return ref}function create(){var lock=null;function isClaimed(){return Boolean(lock)}function isActive(value){return value===lock}function claim(abandon){!!lock?false?undefined:invariant(false):void 0;var newLock={abandon:abandon};lock=newLock;return newLock}function release(){!lock?false?undefined:invariant(false):void 0;lock=null}function tryAbandon(){if(lock){lock.abandon();release()}}return{isClaimed:isClaimed,isActive:isActive,claim:claim,release:release,tryAbandon:tryAbandon}}var tab=9;var enter=13;var escape=27;var space=32;var pageUp=33;var pageDown=34;var end=35;var home=36;var arrowLeft=37;var arrowUp=38;var arrowRight=39;var arrowDown=40;var _preventedKeys;var preventedKeys=(_preventedKeys={},_preventedKeys[enter]=true,_preventedKeys[tab]=true,_preventedKeys);var preventStandardKeyEvents=function(event){if(preventedKeys[event.keyCode]){event.preventDefault()}};var supportedEventName=function(){var base="visibilitychange";if(typeof document==="undefined"){return base}var candidates=[base,"ms"+base,"webkit"+base,"moz"+base,"o"+base];var supported=find(candidates,(function(eventName){return"on"+eventName in document}));return supported||base}();var primaryButton=0;var sloppyClickThreshold=5;function isSloppyClickThresholdExceeded(original,current){return Math.abs(current.x-original.x)>=sloppyClickThreshold||Math.abs(current.y-original.y)>=sloppyClickThreshold}var idle$1={type:"IDLE"};function getCaptureBindings(_ref){var cancel=_ref.cancel,completed=_ref.completed,getPhase=_ref.getPhase,setPhase=_ref.setPhase;return[{eventName:"mousemove",fn:function fn(event){var button=event.button,clientX=event.clientX,clientY=event.clientY;if(button!==primaryButton){return}var point={x:clientX,y:clientY};var phase=getPhase();if(phase.type==="DRAGGING"){event.preventDefault();phase.actions.move(point);return}!(phase.type==="PENDING")?false?undefined:invariant(false):void 0;var pending=phase.point;if(!isSloppyClickThresholdExceeded(pending,point)){return}event.preventDefault();var actions=phase.actions.fluidLift(point);setPhase({type:"DRAGGING",actions:actions})}},{eventName:"mouseup",fn:function fn(event){var phase=getPhase();if(phase.type!=="DRAGGING"){cancel();return}event.preventDefault();phase.actions.drop({shouldBlockNextClick:true});completed()}},{eventName:"mousedown",fn:function fn(event){if(getPhase().type==="DRAGGING"){event.preventDefault()}cancel()}},{eventName:"keydown",fn:function fn(event){var phase=getPhase();if(phase.type==="PENDING"){cancel();return}if(event.keyCode===escape){event.preventDefault();cancel();return}preventStandardKeyEvents(event)}},{eventName:"resize",fn:cancel},{eventName:"scroll",options:{passive:true,capture:false},fn:function fn(){if(getPhase().type==="PENDING"){cancel()}}},{eventName:"webkitmouseforcedown",fn:function fn(event){var phase=getPhase();!(phase.type!=="IDLE")?false?undefined:invariant(false):void 0;if(phase.actions.shouldRespectForcePress()){cancel();return}event.preventDefault()}},{eventName:supportedEventName,fn:cancel}]}function useMouseSensor(api){var phaseRef=React.useRef(idle$1);var unbindEventsRef=React.useRef(noop);var startCaptureBinding=useMemoOne.useMemo((function(){return{eventName:"mousedown",fn:function onMouseDown(event){if(event.defaultPrevented){return}if(event.button!==primaryButton){return}if(event.ctrlKey||event.metaKey||event.shiftKey||event.altKey){return}var draggableId=api.findClosestDraggableId(event);if(!draggableId){return}var actions=api.tryGetLock(draggableId,stop,{sourceEvent:event});if(!actions){return}event.preventDefault();var point={x:event.clientX,y:event.clientY};unbindEventsRef.current();startPendingDrag(actions,point)}}}),[api]);var preventForcePressBinding=useMemoOne.useMemo((function(){return{eventName:"webkitmouseforcewillbegin",fn:function fn(event){if(event.defaultPrevented){return}var id=api.findClosestDraggableId(event);if(!id){return}var options=api.findOptionsForDraggable(id);if(!options){return}if(options.shouldRespectForcePress){return}if(!api.canGetLock(id)){return}event.preventDefault()}}}),[api]);var listenForCapture=useMemoOne.useCallback((function listenForCapture(){var options={passive:false,capture:true};unbindEventsRef.current=bindEvents(window,[preventForcePressBinding,startCaptureBinding],options)}),[preventForcePressBinding,startCaptureBinding]);var stop=useMemoOne.useCallback((function(){var current=phaseRef.current;if(current.type==="IDLE"){return}phaseRef.current=idle$1;unbindEventsRef.current();listenForCapture()}),[listenForCapture]);var cancel=useMemoOne.useCallback((function(){var phase=phaseRef.current;stop();if(phase.type==="DRAGGING"){phase.actions.cancel({shouldBlockNextClick:true})}if(phase.type==="PENDING"){phase.actions.abort()}}),[stop]);var bindCapturingEvents=useMemoOne.useCallback((function bindCapturingEvents(){var options={capture:true,passive:false};var bindings=getCaptureBindings({cancel:cancel,completed:stop,getPhase:function getPhase(){return phaseRef.current},setPhase:function setPhase(phase){phaseRef.current=phase}});unbindEventsRef.current=bindEvents(window,bindings,options)}),[cancel,stop]);var startPendingDrag=useMemoOne.useCallback((function startPendingDrag(actions,point){!(phaseRef.current.type==="IDLE")?false?undefined:invariant(false):void 0;phaseRef.current={type:"PENDING",point:point,actions:actions};bindCapturingEvents()}),[bindCapturingEvents]);useIsomorphicLayoutEffect((function mount(){listenForCapture();return function unmount(){unbindEventsRef.current()}}),[listenForCapture])}var _scrollJumpKeys;function noop$1(){}var scrollJumpKeys=(_scrollJumpKeys={},_scrollJumpKeys[pageDown]=true,_scrollJumpKeys[pageUp]=true,_scrollJumpKeys[home]=true,_scrollJumpKeys[end]=true,_scrollJumpKeys);function getDraggingBindings(actions,stop){function cancel(){stop();actions.cancel()}function drop(){stop();actions.drop()}return[{eventName:"keydown",fn:function fn(event){if(event.keyCode===escape){event.preventDefault();cancel();return}if(event.keyCode===space){event.preventDefault();drop();return}if(event.keyCode===arrowDown){event.preventDefault();actions.moveDown();return}if(event.keyCode===arrowUp){event.preventDefault();actions.moveUp();return}if(event.keyCode===arrowRight){event.preventDefault();actions.moveRight();return}if(event.keyCode===arrowLeft){event.preventDefault();actions.moveLeft();return}if(scrollJumpKeys[event.keyCode]){event.preventDefault();return}preventStandardKeyEvents(event)}},{eventName:"mousedown",fn:cancel},{eventName:"mouseup",fn:cancel},{eventName:"click",fn:cancel},{eventName:"touchstart",fn:cancel},{eventName:"resize",fn:cancel},{eventName:"wheel",fn:cancel,options:{passive:true}},{eventName:supportedEventName,fn:cancel}]}function useKeyboardSensor(api){var unbindEventsRef=React.useRef(noop$1);var startCaptureBinding=useMemoOne.useMemo((function(){return{eventName:"keydown",fn:function onKeyDown(event){if(event.defaultPrevented){return}if(event.keyCode!==space){return}var draggableId=api.findClosestDraggableId(event);if(!draggableId){return}var preDrag=api.tryGetLock(draggableId,stop,{sourceEvent:event});if(!preDrag){return}event.preventDefault();var isCapturing=true;var actions=preDrag.snapLift();unbindEventsRef.current();function stop(){!isCapturing?false?undefined:invariant(false):void 0;isCapturing=false;unbindEventsRef.current();listenForCapture()}unbindEventsRef.current=bindEvents(window,getDraggingBindings(actions,stop),{capture:true,passive:false})}}}),[api]);var listenForCapture=useMemoOne.useCallback((function tryStartCapture(){var options={passive:false,capture:true};unbindEventsRef.current=bindEvents(window,[startCaptureBinding],options)}),[startCaptureBinding]);useIsomorphicLayoutEffect((function mount(){listenForCapture();return function unmount(){unbindEventsRef.current()}}),[listenForCapture])}var idle$2={type:"IDLE"};var timeForLongPress=120;var forcePressThreshold=.15;function getWindowBindings(_ref){var cancel=_ref.cancel,getPhase=_ref.getPhase;return[{eventName:"orientationchange",fn:cancel},{eventName:"resize",fn:cancel},{eventName:"contextmenu",fn:function fn(event){event.preventDefault()}},{eventName:"keydown",fn:function fn(event){if(getPhase().type!=="DRAGGING"){cancel();return}if(event.keyCode===escape){event.preventDefault()}cancel()}},{eventName:supportedEventName,fn:cancel}]}function getHandleBindings(_ref2){var cancel=_ref2.cancel,completed=_ref2.completed,getPhase=_ref2.getPhase;return[{eventName:"touchmove",options:{capture:false},fn:function fn(event){var phase=getPhase();if(phase.type!=="DRAGGING"){cancel();return}phase.hasMoved=true;var _event$touches$=event.touches[0],clientX=_event$touches$.clientX,clientY=_event$touches$.clientY;var point={x:clientX,y:clientY};event.preventDefault();phase.actions.move(point)}},{eventName:"touchend",fn:function fn(event){var phase=getPhase();if(phase.type!=="DRAGGING"){cancel();return}event.preventDefault();phase.actions.drop({shouldBlockNextClick:true});completed()}},{eventName:"touchcancel",fn:function fn(event){if(getPhase().type!=="DRAGGING"){cancel();return}event.preventDefault();cancel()}},{eventName:"touchforcechange",fn:function fn(event){var phase=getPhase();!(phase.type!=="IDLE")?false?undefined:invariant(false):void 0;var touch=event.touches[0];if(!touch){return}var isForcePress=touch.force>=forcePressThreshold;if(!isForcePress){return}var shouldRespect=phase.actions.shouldRespectForcePress();if(phase.type==="PENDING"){if(shouldRespect){cancel()}return}if(shouldRespect){if(phase.hasMoved){event.preventDefault();return}cancel();return}event.preventDefault()}},{eventName:supportedEventName,fn:cancel}]}function useMouseSensor$1(api){var phaseRef=React.useRef(idle$2);var unbindEventsRef=React.useRef(noop);var getPhase=useMemoOne.useCallback((function getPhase(){return phaseRef.current}),[]);var setPhase=useMemoOne.useCallback((function setPhase(phase){phaseRef.current=phase}),[]);var startCaptureBinding=useMemoOne.useMemo((function(){return{eventName:"touchstart",fn:function onTouchStart(event){if(event.defaultPrevented){return}var draggableId=api.findClosestDraggableId(event);if(!draggableId){return}var actions=api.tryGetLock(draggableId,stop,{sourceEvent:event});if(!actions){return}var touch=event.touches[0];var clientX=touch.clientX,clientY=touch.clientY;var point={x:clientX,y:clientY};unbindEventsRef.current();startPendingDrag(actions,point)}}}),[api]);var listenForCapture=useMemoOne.useCallback((function listenForCapture(){var options={capture:true,passive:false};unbindEventsRef.current=bindEvents(window,[startCaptureBinding],options)}),[startCaptureBinding]);var stop=useMemoOne.useCallback((function(){var current=phaseRef.current;if(current.type==="IDLE"){return}if(current.type==="PENDING"){clearTimeout(current.longPressTimerId)}setPhase(idle$2);unbindEventsRef.current();listenForCapture()}),[listenForCapture,setPhase]);var cancel=useMemoOne.useCallback((function(){var phase=phaseRef.current;stop();if(phase.type==="DRAGGING"){phase.actions.cancel({shouldBlockNextClick:true})}if(phase.type==="PENDING"){phase.actions.abort()}}),[stop]);var bindCapturingEvents=useMemoOne.useCallback((function bindCapturingEvents(){var options={capture:true,passive:false};var args={cancel:cancel,completed:stop,getPhase:getPhase};var unbindTarget=bindEvents(window,getHandleBindings(args),options);var unbindWindow=bindEvents(window,getWindowBindings(args),options);unbindEventsRef.current=function unbindAll(){unbindTarget();unbindWindow()}}),[cancel,getPhase,stop]);var startDragging=useMemoOne.useCallback((function startDragging(){var phase=getPhase();!(phase.type==="PENDING")?false?undefined:invariant(false):void 0;var actions=phase.actions.fluidLift(phase.point);setPhase({type:"DRAGGING",actions:actions,hasMoved:false})}),[getPhase,setPhase]);var startPendingDrag=useMemoOne.useCallback((function startPendingDrag(actions,point){!(getPhase().type==="IDLE")?false?undefined:invariant(false):void 0;var longPressTimerId=setTimeout(startDragging,timeForLongPress);setPhase({type:"PENDING",point:point,actions:actions,longPressTimerId:longPressTimerId});bindCapturingEvents()}),[bindCapturingEvents,getPhase,setPhase,startDragging]);useIsomorphicLayoutEffect((function mount(){listenForCapture();return function unmount(){unbindEventsRef.current();var phase=getPhase();if(phase.type==="PENDING"){clearTimeout(phase.longPressTimerId);setPhase(idle$2)}}}),[getPhase,listenForCapture,setPhase]);useIsomorphicLayoutEffect((function webkitHack(){var unbind=bindEvents(window,[{eventName:"touchmove",fn:function fn(){},options:{capture:false,passive:false}}]);return unbind}),[])}function useValidateSensorHooks(sensorHooks){useDev((function(){var previousRef=usePrevious(sensorHooks);useDevSetupWarning((function(){!(previousRef.current.length===sensorHooks.length)?false?undefined:invariant(false):void 0}))}))}var interactiveTagNames={input:true,button:true,textarea:true,select:true,option:true,optgroup:true,video:true,audio:true};function isAnInteractiveElement(parent,current){if(current==null){return false}var hasAnInteractiveTag=Boolean(interactiveTagNames[current.tagName.toLowerCase()]);if(hasAnInteractiveTag){return true}var attribute=current.getAttribute("contenteditable");if(attribute==="true"||attribute===""){return true}if(current===parent){return false}return isAnInteractiveElement(parent,current.parentElement)}function isEventInInteractiveElement(draggable,event){var target=event.target;if(!isHtmlElement(target)){return false}return isAnInteractiveElement(draggable,target)}var getBorderBoxCenterPosition=function(el){return cssBoxModel.getRect(el.getBoundingClientRect()).center};function isElement(el){return el instanceof getWindowFromEl(el).Element}var supportedMatchesName=function(){var base="matches";if(typeof document==="undefined"){return base}var candidates=[base,"msMatchesSelector","webkitMatchesSelector"];var value=find(candidates,(function(name){return name in Element.prototype}));return value||base}();function closestPonyfill(el,selector){if(el==null){return null}if(el[supportedMatchesName](selector)){return el}return closestPonyfill(el.parentElement,selector)}function closest$1(el,selector){if(el.closest){return el.closest(selector)}return closestPonyfill(el,selector)}function getSelector(contextId){return"["+dragHandle.contextId+'="'+contextId+'"]'}function findClosestDragHandleFromEvent(contextId,event){var target=event.target;if(!isElement(target)){false?undefined:void 0;return null}var selector=getSelector(contextId);var handle=closest$1(target,selector);if(!handle){return null}if(!isHtmlElement(handle)){false?undefined:void 0;return null}return handle}function tryGetClosestDraggableIdFromEvent(contextId,event){var handle=findClosestDragHandleFromEvent(contextId,event);if(!handle){return null}return handle.getAttribute(dragHandle.draggableId)}function findDraggable(contextId,draggableId){var selector="["+draggable.contextId+'="'+contextId+'"]';var possible=toArray(document.querySelectorAll(selector));var draggable$1=find(possible,(function(el){return el.getAttribute(draggable.id)===draggableId}));if(!draggable$1){return null}if(!isHtmlElement(draggable$1)){false?undefined:void 0;return null}return draggable$1}function preventDefault(event){event.preventDefault()}function _isActive(_ref){var expected=_ref.expected,phase=_ref.phase,isLockActive=_ref.isLockActive,shouldWarn=_ref.shouldWarn;if(!isLockActive()){if(shouldWarn){false?undefined:void 0}return false}if(expected!==phase){if(shouldWarn){false?undefined:void 0}return false}return true}function canStart(_ref2){var lockAPI=_ref2.lockAPI,store=_ref2.store,registry=_ref2.registry,draggableId=_ref2.draggableId;if(lockAPI.isClaimed()){return false}var entry=registry.draggable.findById(draggableId);if(!entry){false?undefined:void 0;return false}if(!entry.options.isEnabled){return false}if(!canStartDrag(store.getState(),draggableId)){return false}return true}function tryStart(_ref3){var lockAPI=_ref3.lockAPI,contextId=_ref3.contextId,store=_ref3.store,registry=_ref3.registry,draggableId=_ref3.draggableId,forceSensorStop=_ref3.forceSensorStop,sourceEvent=_ref3.sourceEvent;var shouldStart=canStart({lockAPI:lockAPI,store:store,registry:registry,draggableId:draggableId});if(!shouldStart){return null}var entry=registry.draggable.getById(draggableId);var el=findDraggable(contextId,entry.descriptor.id);if(!el){false?undefined:void 0;return null}if(sourceEvent&&!entry.options.canDragInteractiveElements&&isEventInInteractiveElement(el,sourceEvent)){return null}var lock=lockAPI.claim(forceSensorStop||noop);var phase="PRE_DRAG";function getShouldRespectForcePress(){return entry.options.shouldRespectForcePress}function isLockActive(){return lockAPI.isActive(lock)}function tryDispatch(expected,getAction){if(_isActive({expected:expected,phase:phase,isLockActive:isLockActive,shouldWarn:true})){store.dispatch(getAction())}}var tryDispatchWhenDragging=tryDispatch.bind(null,"DRAGGING");function lift$1(args){function completed(){lockAPI.release();phase="COMPLETED"}if(phase!=="PRE_DRAG"){completed();!(phase==="PRE_DRAG")?false?undefined:invariant(false):void 0}store.dispatch(lift(args.liftActionArgs));phase="DRAGGING";function finish(reason,options){if(options===void 0){options={shouldBlockNextClick:false}}args.cleanup();if(options.shouldBlockNextClick){var unbind=bindEvents(window,[{eventName:"click",fn:preventDefault,options:{once:true,passive:false,capture:true}}]);setTimeout(unbind)}completed();store.dispatch(drop({reason:reason}))}return _extends({isActive:function isActive(){return _isActive({expected:"DRAGGING",phase:phase,isLockActive:isLockActive,shouldWarn:false})},shouldRespectForcePress:getShouldRespectForcePress,drop:function drop(options){return finish("DROP",options)},cancel:function cancel(options){return finish("CANCEL",options)}},args.actions)}function fluidLift(clientSelection){var move$1=rafSchd((function(client){tryDispatchWhenDragging((function(){return move({client:client})}))}));var api=lift$1({liftActionArgs:{id:draggableId,clientSelection:clientSelection,movementMode:"FLUID"},cleanup:function cleanup(){return move$1.cancel()},actions:{move:move$1}});return _extends({},api,{move:move$1})}function snapLift(){var actions={moveUp:function moveUp$1(){return tryDispatchWhenDragging(moveUp)},moveRight:function moveRight$1(){return tryDispatchWhenDragging(moveRight)},moveDown:function moveDown$1(){return tryDispatchWhenDragging(moveDown)},moveLeft:function moveLeft$1(){return tryDispatchWhenDragging(moveLeft)}};return lift$1({liftActionArgs:{id:draggableId,clientSelection:getBorderBoxCenterPosition(el),movementMode:"SNAP"},cleanup:noop,actions:actions})}function abortPreDrag(){var shouldRelease=_isActive({expected:"PRE_DRAG",phase:phase,isLockActive:isLockActive,shouldWarn:true});if(shouldRelease){lockAPI.release()}}var preDrag={isActive:function isActive(){return _isActive({expected:"PRE_DRAG",phase:phase,isLockActive:isLockActive,shouldWarn:false})},shouldRespectForcePress:getShouldRespectForcePress,fluidLift:fluidLift,snapLift:snapLift,abort:abortPreDrag};return preDrag}var defaultSensors=[useMouseSensor,useKeyboardSensor,useMouseSensor$1];function useSensorMarshal(_ref4){var contextId=_ref4.contextId,store=_ref4.store,registry=_ref4.registry,customSensors=_ref4.customSensors,enableDefaultSensors=_ref4.enableDefaultSensors;var useSensors=[].concat(enableDefaultSensors?defaultSensors:[],customSensors||[]);var lockAPI=React.useState((function(){return create()}))[0];var tryAbandonLock=useMemoOne.useCallback((function tryAbandonLock(previous,current){if(previous.isDragging&&!current.isDragging){lockAPI.tryAbandon()}}),[lockAPI]);useIsomorphicLayoutEffect((function listenToStore(){var previous=store.getState();var unsubscribe=store.subscribe((function(){var current=store.getState();tryAbandonLock(previous,current);previous=current}));return unsubscribe}),[lockAPI,store,tryAbandonLock]);useIsomorphicLayoutEffect((function(){return lockAPI.tryAbandon}),[lockAPI.tryAbandon]);var canGetLock=useMemoOne.useCallback((function(draggableId){return canStart({lockAPI:lockAPI,registry:registry,store:store,draggableId:draggableId})}),[lockAPI,registry,store]);var tryGetLock=useMemoOne.useCallback((function(draggableId,forceStop,options){return tryStart({lockAPI:lockAPI,registry:registry,contextId:contextId,store:store,draggableId:draggableId,forceSensorStop:forceStop,sourceEvent:options&&options.sourceEvent?options.sourceEvent:null})}),[contextId,lockAPI,registry,store]);var findClosestDraggableId=useMemoOne.useCallback((function(event){return tryGetClosestDraggableIdFromEvent(contextId,event)}),[contextId]);var findOptionsForDraggable=useMemoOne.useCallback((function(id){var entry=registry.draggable.findById(id);return entry?entry.options:null}),[registry.draggable]);var tryReleaseLock=useMemoOne.useCallback((function tryReleaseLock(){if(!lockAPI.isClaimed()){return}lockAPI.tryAbandon();if(store.getState().phase!=="IDLE"){store.dispatch(flush())}}),[lockAPI,store]);var isLockClaimed=useMemoOne.useCallback(lockAPI.isClaimed,[lockAPI]);var api=useMemoOne.useMemo((function(){return{canGetLock:canGetLock,tryGetLock:tryGetLock,findClosestDraggableId:findClosestDraggableId,findOptionsForDraggable:findOptionsForDraggable,tryReleaseLock:tryReleaseLock,isLockClaimed:isLockClaimed}}),[canGetLock,tryGetLock,findClosestDraggableId,findOptionsForDraggable,tryReleaseLock,isLockClaimed]);useValidateSensorHooks(useSensors);for(var i=0;i<useSensors.length;i++){useSensors[i](api)}}var createResponders=function createResponders(props){return{onBeforeCapture:props.onBeforeCapture,onBeforeDragStart:props.onBeforeDragStart,onDragStart:props.onDragStart,onDragEnd:props.onDragEnd,onDragUpdate:props.onDragUpdate}};function getStore(lazyRef){!lazyRef.current?false?undefined:invariant(false):void 0;return lazyRef.current}function App(props){var contextId=props.contextId,setCallbacks=props.setCallbacks,sensors=props.sensors,nonce=props.nonce,dragHandleUsageInstructions=props.dragHandleUsageInstructions;var lazyStoreRef=React.useRef(null);useStartupValidation();var lastPropsRef=usePrevious(props);var getResponders=useMemoOne.useCallback((function(){return createResponders(lastPropsRef.current)}),[lastPropsRef]);var announce=useAnnouncer(contextId);var dragHandleUsageInstructionsId=useHiddenTextElement({contextId:contextId,text:dragHandleUsageInstructions});var styleMarshal=useStyleMarshal(contextId,nonce);var lazyDispatch=useMemoOne.useCallback((function(action){getStore(lazyStoreRef).dispatch(action)}),[]);var marshalCallbacks=useMemoOne.useMemo((function(){return redux.bindActionCreators({publishWhileDragging:publishWhileDragging,updateDroppableScroll:updateDroppableScroll,updateDroppableIsEnabled:updateDroppableIsEnabled,updateDroppableIsCombineEnabled:updateDroppableIsCombineEnabled,collectionStarting:collectionStarting},lazyDispatch)}),[lazyDispatch]);var registry=useRegistry();var dimensionMarshal=useMemoOne.useMemo((function(){return createDimensionMarshal(registry,marshalCallbacks)}),[registry,marshalCallbacks]);var autoScroller=useMemoOne.useMemo((function(){return createAutoScroller(_extends({scrollWindow:scrollWindow,scrollDroppable:dimensionMarshal.scrollDroppable},redux.bindActionCreators({move:move},lazyDispatch)))}),[dimensionMarshal.scrollDroppable,lazyDispatch]);var focusMarshal=useFocusMarshal(contextId);var store=useMemoOne.useMemo((function(){return createStore({announce:announce,autoScroller:autoScroller,dimensionMarshal:dimensionMarshal,focusMarshal:focusMarshal,getResponders:getResponders,styleMarshal:styleMarshal})}),[announce,autoScroller,dimensionMarshal,focusMarshal,getResponders,styleMarshal]);if(false){}lazyStoreRef.current=store;var tryResetStore=useMemoOne.useCallback((function(){var current=getStore(lazyStoreRef);var state=current.getState();if(state.phase!=="IDLE"){current.dispatch(flush())}}),[]);var isDragging=useMemoOne.useCallback((function(){var state=getStore(lazyStoreRef).getState();return state.isDragging||state.phase==="DROP_ANIMATING"}),[]);var appCallbacks=useMemoOne.useMemo((function(){return{isDragging:isDragging,tryAbort:tryResetStore}}),[isDragging,tryResetStore]);setCallbacks(appCallbacks);var getCanLift=useMemoOne.useCallback((function(id){return canStartDrag(getStore(lazyStoreRef).getState(),id)}),[]);var getIsMovementAllowed=useMemoOne.useCallback((function(){return isMovementAllowed(getStore(lazyStoreRef).getState())}),[]);var appContext=useMemoOne.useMemo((function(){return{marshal:dimensionMarshal,focus:focusMarshal,contextId:contextId,canLift:getCanLift,isMovementAllowed:getIsMovementAllowed,dragHandleUsageInstructionsId:dragHandleUsageInstructionsId,registry:registry}}),[contextId,dimensionMarshal,dragHandleUsageInstructionsId,focusMarshal,getCanLift,getIsMovementAllowed,registry]);useSensorMarshal({contextId:contextId,store:store,registry:registry,customSensors:sensors,enableDefaultSensors:props.enableDefaultSensors!==false});React.useEffect((function(){return tryResetStore}),[tryResetStore]);return React__default.createElement(AppContext.Provider,{value:appContext},React__default.createElement(reactRedux.Provider,{context:StoreContext,store:store},props.children))}var count$1=0;function reset$1(){count$1=0}function useInstanceCount(){return useMemoOne.useMemo((function(){return""+count$1++}),[])}function resetServerContext(){reset$1();reset()}function DragDropContext(props){var contextId=useInstanceCount();var dragHandleUsageInstructions=props.dragHandleUsageInstructions||preset.dragHandleUsageInstructions;return React__default.createElement(ErrorBoundary,null,(function(setCallbacks){return React__default.createElement(App,{nonce:props.nonce,contextId:contextId,setCallbacks:setCallbacks,dragHandleUsageInstructions:dragHandleUsageInstructions,enableDefaultSensors:props.enableDefaultSensors,sensors:props.sensors,onBeforeCapture:props.onBeforeCapture,onBeforeDragStart:props.onBeforeDragStart,onDragStart:props.onDragStart,onDragUpdate:props.onDragUpdate,onDragEnd:props.onDragEnd},props.children)}))}var isEqual$1=function isEqual(base){return function(value){return base===value}};var isScroll=isEqual$1("scroll");var isAuto=isEqual$1("auto");var isVisible$1=isEqual$1("visible");var isEither=function isEither(overflow,fn){return fn(overflow.overflowX)||fn(overflow.overflowY)};var isBoth=function isBoth(overflow,fn){return fn(overflow.overflowX)&&fn(overflow.overflowY)};var isElementScrollable=function isElementScrollable(el){var style=window.getComputedStyle(el);var overflow={overflowX:style.overflowX,overflowY:style.overflowY};return isEither(overflow,isScroll)||isEither(overflow,isAuto)};var isBodyScrollable=function isBodyScrollable(){if(true){return false}var body=getBodyElement();var html=document.documentElement;!html?false?undefined:invariant(false):void 0;if(!isElementScrollable(body)){return false}var htmlStyle=window.getComputedStyle(html);var htmlOverflow={overflowX:htmlStyle.overflowX,overflowY:htmlStyle.overflowY};if(isBoth(htmlOverflow,isVisible$1)){return false}false?undefined:void 0;return false};var getClosestScrollable=function getClosestScrollable(el){if(el==null){return null}if(el===document.body){return isBodyScrollable()?el:null}if(el===document.documentElement){return null}if(!isElementScrollable(el)){return getClosestScrollable(el.parentElement)}return el};var checkForNestedScrollContainers=function(scrollable){if(!scrollable){return}var anotherScrollParent=getClosestScrollable(scrollable.parentElement);if(!anotherScrollParent){return}false?undefined:void 0};var getScroll$1=function(el){return{x:el.scrollLeft,y:el.scrollTop}};var getIsFixed=function getIsFixed(el){if(!el){return false}var style=window.getComputedStyle(el);if(style.position==="fixed"){return true}return getIsFixed(el.parentElement)};var getEnv=function(start){var closestScrollable=getClosestScrollable(start);var isFixedOnPage=getIsFixed(start);return{closestScrollable:closestScrollable,isFixedOnPage:isFixedOnPage}};var getDroppableDimension=function(_ref){var descriptor=_ref.descriptor,isEnabled=_ref.isEnabled,isCombineEnabled=_ref.isCombineEnabled,isFixedOnPage=_ref.isFixedOnPage,direction=_ref.direction,client=_ref.client,page=_ref.page,closest=_ref.closest;var frame=function(){if(!closest){return null}var scrollSize=closest.scrollSize,frameClient=closest.client;var maxScroll=getMaxScroll({scrollHeight:scrollSize.scrollHeight,scrollWidth:scrollSize.scrollWidth,height:frameClient.paddingBox.height,width:frameClient.paddingBox.width});return{pageMarginBox:closest.page.marginBox,frameClient:frameClient,scrollSize:scrollSize,shouldClipSubject:closest.shouldClipSubject,scroll:{initial:closest.scroll,current:closest.scroll,max:maxScroll,diff:{value:origin,displacement:origin}}}}();var axis=direction==="vertical"?vertical:horizontal;var subject=getSubject({page:page,withPlaceholder:null,axis:axis,frame:frame});var dimension={descriptor:descriptor,isCombineEnabled:isCombineEnabled,isFixedOnPage:isFixedOnPage,axis:axis,isEnabled:isEnabled,client:client,page:page,frame:frame,subject:subject};return dimension};var getClient=function getClient(targetRef,closestScrollable){var base=cssBoxModel.getBox(targetRef);if(!closestScrollable){return base}if(targetRef!==closestScrollable){return base}var top=base.paddingBox.top-closestScrollable.scrollTop;var left=base.paddingBox.left-closestScrollable.scrollLeft;var bottom=top+closestScrollable.scrollHeight;var right=left+closestScrollable.scrollWidth;var paddingBox={top:top,right:right,bottom:bottom,left:left};var borderBox=cssBoxModel.expand(paddingBox,base.border);var client=cssBoxModel.createBox({borderBox:borderBox,margin:base.margin,border:base.border,padding:base.padding});return client};var getDimension=function(_ref){var ref=_ref.ref,descriptor=_ref.descriptor,env=_ref.env,windowScroll=_ref.windowScroll,direction=_ref.direction,isDropDisabled=_ref.isDropDisabled,isCombineEnabled=_ref.isCombineEnabled,shouldClipSubject=_ref.shouldClipSubject;var closestScrollable=env.closestScrollable;var client=getClient(ref,closestScrollable);var page=cssBoxModel.withScroll(client,windowScroll);var closest=function(){if(!closestScrollable){return null}var frameClient=cssBoxModel.getBox(closestScrollable);var scrollSize={scrollHeight:closestScrollable.scrollHeight,scrollWidth:closestScrollable.scrollWidth};return{client:frameClient,page:cssBoxModel.withScroll(frameClient,windowScroll),scroll:getScroll$1(closestScrollable),scrollSize:scrollSize,shouldClipSubject:shouldClipSubject}}();var dimension=getDroppableDimension({descriptor:descriptor,isEnabled:!isDropDisabled,isCombineEnabled:isCombineEnabled,isFixedOnPage:env.isFixedOnPage,direction:direction,client:client,page:page,closest:closest});return dimension};var immediate={passive:false};var delayed={passive:true};var getListenerOptions=function(options){return options.shouldPublishImmediately?immediate:delayed};function useRequiredContext(Context){var result=React.useContext(Context);!result?false?undefined:invariant(false):void 0;return result}var getClosestScrollableFromDrag=function getClosestScrollableFromDrag(dragging){return dragging&&dragging.env.closestScrollable||null};function useDroppablePublisher(args){var whileDraggingRef=React.useRef(null);var appContext=useRequiredContext(AppContext);var uniqueId=useUniqueId("droppable");var registry=appContext.registry,marshal=appContext.marshal;var previousRef=usePrevious(args);var descriptor=useMemoOne.useMemo((function(){return{id:args.droppableId,type:args.type,mode:args.mode}}),[args.droppableId,args.mode,args.type]);var publishedDescriptorRef=React.useRef(descriptor);var memoizedUpdateScroll=useMemoOne.useMemo((function(){return memoizeOne((function(x,y){!whileDraggingRef.current?false?undefined:invariant(false):void 0;var scroll={x:x,y:y};marshal.updateDroppableScroll(descriptor.id,scroll)}))}),[descriptor.id,marshal]);var getClosestScroll=useMemoOne.useCallback((function(){var dragging=whileDraggingRef.current;if(!dragging||!dragging.env.closestScrollable){return origin}return getScroll$1(dragging.env.closestScrollable)}),[]);var updateScroll=useMemoOne.useCallback((function(){var scroll=getClosestScroll();memoizedUpdateScroll(scroll.x,scroll.y)}),[getClosestScroll,memoizedUpdateScroll]);var scheduleScrollUpdate=useMemoOne.useMemo((function(){return rafSchd(updateScroll)}),[updateScroll]);var onClosestScroll=useMemoOne.useCallback((function(){var dragging=whileDraggingRef.current;var closest=getClosestScrollableFromDrag(dragging);!(dragging&&closest)?false?undefined:invariant(false):void 0;var options=dragging.scrollOptions;if(options.shouldPublishImmediately){updateScroll();return}scheduleScrollUpdate()}),[scheduleScrollUpdate,updateScroll]);var getDimensionAndWatchScroll=useMemoOne.useCallback((function(windowScroll,options){!!whileDraggingRef.current?false?undefined:invariant(false):void 0;var previous=previousRef.current;var ref=previous.getDroppableRef();!ref?false?undefined:invariant(false):void 0;var env=getEnv(ref);var dragging={ref:ref,descriptor:descriptor,env:env,scrollOptions:options};whileDraggingRef.current=dragging;var dimension=getDimension({ref:ref,descriptor:descriptor,env:env,windowScroll:windowScroll,direction:previous.direction,isDropDisabled:previous.isDropDisabled,isCombineEnabled:previous.isCombineEnabled,shouldClipSubject:!previous.ignoreContainerClipping});var scrollable=env.closestScrollable;if(scrollable){scrollable.setAttribute(scrollContainer.contextId,appContext.contextId);scrollable.addEventListener("scroll",onClosestScroll,getListenerOptions(dragging.scrollOptions));if(false){}}return dimension}),[appContext.contextId,descriptor,onClosestScroll,previousRef]);var getScrollWhileDragging=useMemoOne.useCallback((function(){var dragging=whileDraggingRef.current;var closest=getClosestScrollableFromDrag(dragging);!(dragging&&closest)?false?undefined:invariant(false):void 0;return getScroll$1(closest)}),[]);var dragStopped=useMemoOne.useCallback((function(){var dragging=whileDraggingRef.current;!dragging?false?undefined:invariant(false):void 0;var closest=getClosestScrollableFromDrag(dragging);whileDraggingRef.current=null;if(!closest){return}scheduleScrollUpdate.cancel();closest.removeAttribute(scrollContainer.contextId);closest.removeEventListener("scroll",onClosestScroll,getListenerOptions(dragging.scrollOptions))}),[onClosestScroll,scheduleScrollUpdate]);var scroll=useMemoOne.useCallback((function(change){var dragging=whileDraggingRef.current;!dragging?false?undefined:invariant(false):void 0;var closest=getClosestScrollableFromDrag(dragging);!closest?false?undefined:invariant(false):void 0;closest.scrollTop+=change.y;closest.scrollLeft+=change.x}),[]);var callbacks=useMemoOne.useMemo((function(){return{getDimensionAndWatchScroll:getDimensionAndWatchScroll,getScrollWhileDragging:getScrollWhileDragging,dragStopped:dragStopped,scroll:scroll}}),[dragStopped,getDimensionAndWatchScroll,getScrollWhileDragging,scroll]);var entry=useMemoOne.useMemo((function(){return{uniqueId:uniqueId,descriptor:descriptor,callbacks:callbacks}}),[callbacks,descriptor,uniqueId]);useIsomorphicLayoutEffect((function(){publishedDescriptorRef.current=entry.descriptor;registry.droppable.register(entry);return function(){if(whileDraggingRef.current){false?undefined:void 0;dragStopped()}registry.droppable.unregister(entry)}}),[callbacks,descriptor,dragStopped,entry,marshal,registry.droppable]);useIsomorphicLayoutEffect((function(){if(!whileDraggingRef.current){return}marshal.updateDroppableIsEnabled(publishedDescriptorRef.current.id,!args.isDropDisabled)}),[args.isDropDisabled,marshal]);useIsomorphicLayoutEffect((function(){if(!whileDraggingRef.current){return}marshal.updateDroppableIsCombineEnabled(publishedDescriptorRef.current.id,args.isCombineEnabled)}),[args.isCombineEnabled,marshal])}function noop$2(){}var empty={width:0,height:0,margin:noSpacing};var getSize=function getSize(_ref){var isAnimatingOpenOnMount=_ref.isAnimatingOpenOnMount,placeholder=_ref.placeholder,animate=_ref.animate;if(isAnimatingOpenOnMount){return empty}if(animate==="close"){return empty}return{height:placeholder.client.borderBox.height,width:placeholder.client.borderBox.width,margin:placeholder.client.margin}};var getStyle=function getStyle(_ref2){var isAnimatingOpenOnMount=_ref2.isAnimatingOpenOnMount,placeholder=_ref2.placeholder,animate=_ref2.animate;var size=getSize({isAnimatingOpenOnMount:isAnimatingOpenOnMount,placeholder:placeholder,animate:animate});return{display:placeholder.display,boxSizing:"border-box",width:size.width,height:size.height,marginTop:size.margin.top,marginRight:size.margin.right,marginBottom:size.margin.bottom,marginLeft:size.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:animate!=="none"?transitions.placeholder:null}};function Placeholder(props){var animateOpenTimerRef=React.useRef(null);var tryClearAnimateOpenTimer=useMemoOne.useCallback((function(){if(!animateOpenTimerRef.current){return}clearTimeout(animateOpenTimerRef.current);animateOpenTimerRef.current=null}),[]);var animate=props.animate,onTransitionEnd=props.onTransitionEnd,onClose=props.onClose,contextId=props.contextId;var _useState=React.useState(props.animate==="open"),isAnimatingOpenOnMount=_useState[0],setIsAnimatingOpenOnMount=_useState[1];React.useEffect((function(){if(!isAnimatingOpenOnMount){return noop$2}if(animate!=="open"){tryClearAnimateOpenTimer();setIsAnimatingOpenOnMount(false);return noop$2}if(animateOpenTimerRef.current){return noop$2}animateOpenTimerRef.current=setTimeout((function(){animateOpenTimerRef.current=null;setIsAnimatingOpenOnMount(false)}));return tryClearAnimateOpenTimer}),[animate,isAnimatingOpenOnMount,tryClearAnimateOpenTimer]);var onSizeChangeEnd=useMemoOne.useCallback((function(event){if(event.propertyName!=="height"){return}onTransitionEnd();if(animate==="close"){onClose()}}),[animate,onClose,onTransitionEnd]);var style=getStyle({isAnimatingOpenOnMount:isAnimatingOpenOnMount,animate:props.animate,placeholder:props.placeholder});return React__default.createElement(props.placeholder.tagName,{style:style,"data-rbd-placeholder-context-id":contextId,onTransitionEnd:onSizeChangeEnd,ref:props.innerRef})}var Placeholder$1=React__default.memo(Placeholder);var DroppableContext=React__default.createContext(null);function checkIsValidInnerRef(el){!(el&&isHtmlElement(el))?false?undefined:invariant(false):void 0}function isBoolean(value){return typeof value==="boolean"}function runChecks(args,checks){checks.forEach((function(check){return check(args)}))}var shared=[function required(_ref){var props=_ref.props;!props.droppableId?false?undefined:invariant(false):void 0;!(typeof props.droppableId==="string")?false?undefined:invariant(false):void 0},function _boolean(_ref2){var props=_ref2.props;!isBoolean(props.isDropDisabled)?false?undefined:invariant(false):void 0;!isBoolean(props.isCombineEnabled)?false?undefined:invariant(false):void 0;!isBoolean(props.ignoreContainerClipping)?false?undefined:invariant(false):void 0},function ref(_ref3){var getDroppableRef=_ref3.getDroppableRef;checkIsValidInnerRef(getDroppableRef())}];var standard=[function placeholder(_ref4){var props=_ref4.props,getPlaceholderRef=_ref4.getPlaceholderRef;if(!props.placeholder){return}var ref=getPlaceholderRef();if(ref){return}false?undefined:void 0}];var virtual=[function hasClone(_ref5){var props=_ref5.props;!props.renderClone?false?undefined:invariant(false):void 0},function hasNoPlaceholder(_ref6){var getPlaceholderRef=_ref6.getPlaceholderRef;!!getPlaceholderRef()?false?undefined:invariant(false):void 0}];function useValidation(args){useDevSetupWarning((function(){runChecks(args,shared);if(args.props.mode==="standard"){runChecks(args,standard)}if(args.props.mode==="virtual"){runChecks(args,virtual)}}))}var AnimateInOut=function(_React$PureComponent){_inheritsLoose(AnimateInOut,_React$PureComponent);function AnimateInOut(){var _this;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_React$PureComponent.call.apply(_React$PureComponent,[this].concat(args))||this;_this.state={isVisible:Boolean(_this.props.on),data:_this.props.on,animate:_this.props.shouldAnimate&&_this.props.on?"open":"none"};_this.onClose=function(){if(_this.state.animate!=="close"){return}_this.setState({isVisible:false})};return _this}AnimateInOut.getDerivedStateFromProps=function getDerivedStateFromProps(props,state){if(!props.shouldAnimate){return{isVisible:Boolean(props.on),data:props.on,animate:"none"}}if(props.on){return{isVisible:true,data:props.on,animate:"open"}}if(state.isVisible){return{isVisible:true,data:state.data,animate:"close"}}return{isVisible:false,animate:"close",data:null}};var _proto=AnimateInOut.prototype;_proto.render=function render(){if(!this.state.isVisible){return null}var provided={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(provided)};return AnimateInOut}(React__default.PureComponent);var zIndexOptions={dragging:5e3,dropAnimating:4500};var getDraggingTransition=function getDraggingTransition(shouldAnimateDragMovement,dropping){if(dropping){return transitions.drop(dropping.duration)}if(shouldAnimateDragMovement){return transitions.snap}return transitions.fluid};var getDraggingOpacity=function getDraggingOpacity(isCombining,isDropAnimating){if(!isCombining){return null}return isDropAnimating?combine.opacity.drop:combine.opacity.combining};var getShouldDraggingAnimate=function getShouldDraggingAnimate(dragging){if(dragging.forceShouldAnimate!=null){return dragging.forceShouldAnimate}return dragging.mode==="SNAP"};function getDraggingStyle(dragging){var dimension=dragging.dimension;var box=dimension.client;var offset=dragging.offset,combineWith=dragging.combineWith,dropping=dragging.dropping;var isCombining=Boolean(combineWith);var shouldAnimate=getShouldDraggingAnimate(dragging);var isDropAnimating=Boolean(dropping);var transform=isDropAnimating?transforms.drop(offset,isCombining):transforms.moveTo(offset);var style={position:"fixed",top:box.marginBox.top,left:box.marginBox.left,boxSizing:"border-box",width:box.borderBox.width,height:box.borderBox.height,transition:getDraggingTransition(shouldAnimate,dropping),transform:transform,opacity:getDraggingOpacity(isCombining,isDropAnimating),zIndex:isDropAnimating?zIndexOptions.dropAnimating:zIndexOptions.dragging,pointerEvents:"none"};return style}function getSecondaryStyle(secondary){return{transform:transforms.moveTo(secondary.offset),transition:secondary.shouldAnimateDisplacement?null:"none"}}function getStyle$1(mapped){return mapped.type==="DRAGGING"?getDraggingStyle(mapped):getSecondaryStyle(mapped)}function getDimension$1(descriptor,el,windowScroll){if(windowScroll===void 0){windowScroll=origin}var computedStyles=window.getComputedStyle(el);var borderBox=el.getBoundingClientRect();var client=cssBoxModel.calculateBox(borderBox,computedStyles);var page=cssBoxModel.withScroll(client,windowScroll);var placeholder={client:client,tagName:el.tagName.toLowerCase(),display:computedStyles.display};var displaceBy={x:client.marginBox.width,y:client.marginBox.height};var dimension={descriptor:descriptor,placeholder:placeholder,displaceBy:displaceBy,client:client,page:page};return dimension}function useDraggablePublisher(args){var uniqueId=useUniqueId("draggable");var descriptor=args.descriptor,registry=args.registry,getDraggableRef=args.getDraggableRef,canDragInteractiveElements=args.canDragInteractiveElements,shouldRespectForcePress=args.shouldRespectForcePress,isEnabled=args.isEnabled;var options=useMemoOne.useMemo((function(){return{canDragInteractiveElements:canDragInteractiveElements,shouldRespectForcePress:shouldRespectForcePress,isEnabled:isEnabled}}),[canDragInteractiveElements,isEnabled,shouldRespectForcePress]);var getDimension=useMemoOne.useCallback((function(windowScroll){var el=getDraggableRef();!el?false?undefined:invariant(false):void 0;return getDimension$1(descriptor,el,windowScroll)}),[descriptor,getDraggableRef]);var entry=useMemoOne.useMemo((function(){return{uniqueId:uniqueId,descriptor:descriptor,options:options,getDimension:getDimension}}),[descriptor,getDimension,options,uniqueId]);var publishedRef=React.useRef(entry);var isFirstPublishRef=React.useRef(true);useIsomorphicLayoutEffect((function(){registry.draggable.register(publishedRef.current);return function(){return registry.draggable.unregister(publishedRef.current)}}),[registry.draggable]);useIsomorphicLayoutEffect((function(){if(isFirstPublishRef.current){isFirstPublishRef.current=false;return}var last=publishedRef.current;publishedRef.current=entry;registry.draggable.update(entry,last)}),[entry,registry.draggable])}function useValidation$1(props,contextId,getRef){useDevSetupWarning((function(){function prefix(id){return"Draggable[id: "+id+"]: "}var id=props.draggableId;!id?false?undefined:invariant(false):void 0;!(typeof id==="string")?false?undefined:invariant(false):void 0;!isInteger(props.index)?false?undefined:invariant(false):void 0;if(props.mapped.type==="DRAGGING"){return}checkIsValidInnerRef(getRef());if(props.isEnabled){!findDragHandle(contextId,id)?false?undefined:invariant(false):void 0}}))}function useClonePropValidation(isClone){useDev((function(){var initialRef=React.useRef(isClone);useDevSetupWarning((function(){!(isClone===initialRef.current)?false?undefined:invariant(false):void 0}),[isClone])}))}function preventHtml5Dnd(event){event.preventDefault()}function Draggable(props){var ref=React.useRef(null);var setRef=useMemoOne.useCallback((function(el){ref.current=el}),[]);var getRef=useMemoOne.useCallback((function(){return ref.current}),[]);var _useRequiredContext=useRequiredContext(AppContext),contextId=_useRequiredContext.contextId,dragHandleUsageInstructionsId=_useRequiredContext.dragHandleUsageInstructionsId,registry=_useRequiredContext.registry;var _useRequiredContext2=useRequiredContext(DroppableContext),type=_useRequiredContext2.type,droppableId=_useRequiredContext2.droppableId;var descriptor=useMemoOne.useMemo((function(){return{id:props.draggableId,index:props.index,type:type,droppableId:droppableId}}),[props.draggableId,props.index,type,droppableId]);var children=props.children,draggableId=props.draggableId,isEnabled=props.isEnabled,shouldRespectForcePress=props.shouldRespectForcePress,canDragInteractiveElements=props.canDragInteractiveElements,isClone=props.isClone,mapped=props.mapped,dropAnimationFinishedAction=props.dropAnimationFinished;useValidation$1(props,contextId,getRef);useClonePropValidation(isClone);if(!isClone){var forPublisher=useMemoOne.useMemo((function(){return{descriptor:descriptor,registry:registry,getDraggableRef:getRef,canDragInteractiveElements:canDragInteractiveElements,shouldRespectForcePress:shouldRespectForcePress,isEnabled:isEnabled}}),[descriptor,registry,getRef,canDragInteractiveElements,shouldRespectForcePress,isEnabled]);useDraggablePublisher(forPublisher)}var dragHandleProps=useMemoOne.useMemo((function(){return isEnabled?{tabIndex:0,role:"button","aria-describedby":dragHandleUsageInstructionsId,"data-rbd-drag-handle-draggable-id":draggableId,"data-rbd-drag-handle-context-id":contextId,draggable:false,onDragStart:preventHtml5Dnd}:null}),[contextId,dragHandleUsageInstructionsId,draggableId,isEnabled]);var onMoveEnd=useMemoOne.useCallback((function(event){if(mapped.type!=="DRAGGING"){return}if(!mapped.dropping){return}if(event.propertyName!=="transform"){return}dropAnimationFinishedAction()}),[dropAnimationFinishedAction,mapped]);var provided=useMemoOne.useMemo((function(){var style=getStyle$1(mapped);var onTransitionEnd=mapped.type==="DRAGGING"&&mapped.dropping?onMoveEnd:null;var result={innerRef:setRef,draggableProps:{"data-rbd-draggable-context-id":contextId,"data-rbd-draggable-id":draggableId,style:style,onTransitionEnd:onTransitionEnd},dragHandleProps:dragHandleProps};return result}),[contextId,dragHandleProps,draggableId,mapped,onMoveEnd,setRef]);var rubric=useMemoOne.useMemo((function(){return{draggableId:descriptor.id,type:descriptor.type,source:{index:descriptor.index,droppableId:descriptor.droppableId}}}),[descriptor.droppableId,descriptor.id,descriptor.index,descriptor.type]);return children(provided,mapped.snapshot,rubric)}var isStrictEqual=function(a,b){return a===b};var whatIsDraggedOverFromResult=function(result){var combine=result.combine,destination=result.destination;if(destination){return destination.droppableId}if(combine){return combine.droppableId}return null};var getCombineWithFromResult=function getCombineWithFromResult(result){return result.combine?result.combine.draggableId:null};var getCombineWithFromImpact=function getCombineWithFromImpact(impact){return impact.at&&impact.at.type==="COMBINE"?impact.at.combine.draggableId:null};function getDraggableSelector(){var memoizedOffset=memoizeOne((function(x,y){return{x:x,y:y}}));var getMemoizedSnapshot=memoizeOne((function(mode,isClone,draggingOver,combineWith,dropping){return{isDragging:true,isClone:isClone,isDropAnimating:Boolean(dropping),dropAnimation:dropping,mode:mode,draggingOver:draggingOver,combineWith:combineWith,combineTargetFor:null}}));var getMemoizedProps=memoizeOne((function(offset,mode,dimension,isClone,draggingOver,combineWith,forceShouldAnimate){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:draggingOver,combineWith:combineWith,mode:mode,offset:offset,dimension:dimension,forceShouldAnimate:forceShouldAnimate,snapshot:getMemoizedSnapshot(mode,isClone,draggingOver,combineWith,null)}}}));var selector=function selector(state,ownProps){if(state.isDragging){if(state.critical.draggable.id!==ownProps.draggableId){return null}var offset=state.current.client.offset;var dimension=state.dimensions.draggables[ownProps.draggableId];var draggingOver=whatIsDraggedOver(state.impact);var combineWith=getCombineWithFromImpact(state.impact);var forceShouldAnimate=state.forceShouldAnimate;return getMemoizedProps(memoizedOffset(offset.x,offset.y),state.movementMode,dimension,ownProps.isClone,draggingOver,combineWith,forceShouldAnimate)}if(state.phase==="DROP_ANIMATING"){var completed=state.completed;if(completed.result.draggableId!==ownProps.draggableId){return null}var isClone=ownProps.isClone;var _dimension=state.dimensions.draggables[ownProps.draggableId];var result=completed.result;var mode=result.mode;var _draggingOver=whatIsDraggedOverFromResult(result);var _combineWith=getCombineWithFromResult(result);var duration=state.dropDuration;var dropping={duration:duration,curve:curves.drop,moveTo:state.newHomeClientOffset,opacity:_combineWith?combine.opacity.drop:null,scale:_combineWith?combine.scale.drop:null};return{mapped:{type:"DRAGGING",offset:state.newHomeClientOffset,dimension:_dimension,dropping:dropping,draggingOver:_draggingOver,combineWith:_combineWith,mode:mode,forceShouldAnimate:null,snapshot:getMemoizedSnapshot(mode,isClone,_draggingOver,_combineWith,dropping)}}}return null};return selector}function getSecondarySnapshot(combineTargetFor){return{isDragging:false,isDropAnimating:false,isClone:false,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:combineTargetFor,combineWith:null}}var atRest={mapped:{type:"SECONDARY",offset:origin,combineTargetFor:null,shouldAnimateDisplacement:true,snapshot:getSecondarySnapshot(null)}};function getSecondarySelector(){var memoizedOffset=memoizeOne((function(x,y){return{x:x,y:y}}));var getMemoizedSnapshot=memoizeOne(getSecondarySnapshot);var getMemoizedProps=memoizeOne((function(offset,combineTargetFor,shouldAnimateDisplacement){if(combineTargetFor===void 0){combineTargetFor=null}return{mapped:{type:"SECONDARY",offset:offset,combineTargetFor:combineTargetFor,shouldAnimateDisplacement:shouldAnimateDisplacement,snapshot:getMemoizedSnapshot(combineTargetFor)}}}));var getFallback=function getFallback(combineTargetFor){return combineTargetFor?getMemoizedProps(origin,combineTargetFor,true):null};var getProps=function getProps(ownId,draggingId,impact,afterCritical){var visualDisplacement=impact.displaced.visible[ownId];var isAfterCriticalInVirtualList=Boolean(afterCritical.inVirtualList&&afterCritical.effected[ownId]);var combine=tryGetCombine(impact);var combineTargetFor=combine&&combine.draggableId===ownId?draggingId:null;if(!visualDisplacement){if(!isAfterCriticalInVirtualList){return getFallback(combineTargetFor)}if(impact.displaced.invisible[ownId]){return null}var change=negate(afterCritical.displacedBy.point);var _offset=memoizedOffset(change.x,change.y);return getMemoizedProps(_offset,combineTargetFor,true)}if(isAfterCriticalInVirtualList){return getFallback(combineTargetFor)}var displaceBy=impact.displacedBy.point;var offset=memoizedOffset(displaceBy.x,displaceBy.y);return getMemoizedProps(offset,combineTargetFor,visualDisplacement.shouldAnimate)};var selector=function selector(state,ownProps){if(state.isDragging){if(state.critical.draggable.id===ownProps.draggableId){return null}return getProps(ownProps.draggableId,state.critical.draggable.id,state.impact,state.afterCritical)}if(state.phase==="DROP_ANIMATING"){var completed=state.completed;if(completed.result.draggableId===ownProps.draggableId){return null}return getProps(ownProps.draggableId,completed.result.draggableId,completed.impact,completed.afterCritical)}return null};return selector}var makeMapStateToProps=function makeMapStateToProps(){var draggingSelector=getDraggableSelector();var secondarySelector=getSecondarySelector();var selector=function selector(state,ownProps){return draggingSelector(state,ownProps)||secondarySelector(state,ownProps)||atRest};return selector};var mapDispatchToProps={dropAnimationFinished:dropAnimationFinished};var ConnectedDraggable=reactRedux.connect(makeMapStateToProps,mapDispatchToProps,null,{context:StoreContext,pure:true,areStatePropsEqual:isStrictEqual})(Draggable);function PrivateDraggable(props){var droppableContext=useRequiredContext(DroppableContext);var isUsingCloneFor=droppableContext.isUsingCloneFor;if(isUsingCloneFor===props.draggableId&&!props.isClone){return null}return React__default.createElement(ConnectedDraggable,props)}function PublicDraggable(props){var isEnabled=typeof props.isDragDisabled==="boolean"?!props.isDragDisabled:true;var canDragInteractiveElements=Boolean(props.disableInteractiveElementBlocking);var shouldRespectForcePress=Boolean(props.shouldRespectForcePress);return React__default.createElement(PrivateDraggable,_extends({},props,{isClone:false,isEnabled:isEnabled,canDragInteractiveElements:canDragInteractiveElements,shouldRespectForcePress:shouldRespectForcePress}))}function Droppable(props){var appContext=React.useContext(AppContext);!appContext?false?undefined:invariant(false):void 0;var contextId=appContext.contextId,isMovementAllowed=appContext.isMovementAllowed;var droppableRef=React.useRef(null);var placeholderRef=React.useRef(null);var children=props.children,droppableId=props.droppableId,type=props.type,mode=props.mode,direction=props.direction,ignoreContainerClipping=props.ignoreContainerClipping,isDropDisabled=props.isDropDisabled,isCombineEnabled=props.isCombineEnabled,snapshot=props.snapshot,useClone=props.useClone,updateViewportMaxScroll=props.updateViewportMaxScroll,getContainerForClone=props.getContainerForClone;var getDroppableRef=useMemoOne.useCallback((function(){return droppableRef.current}),[]);var setDroppableRef=useMemoOne.useCallback((function(value){droppableRef.current=value}),[]);var getPlaceholderRef=useMemoOne.useCallback((function(){return placeholderRef.current}),[]);var setPlaceholderRef=useMemoOne.useCallback((function(value){placeholderRef.current=value}),[]);useValidation({props:props,getDroppableRef:getDroppableRef,getPlaceholderRef:getPlaceholderRef});var onPlaceholderTransitionEnd=useMemoOne.useCallback((function(){if(isMovementAllowed()){updateViewportMaxScroll({maxScroll:getMaxWindowScroll()})}}),[isMovementAllowed,updateViewportMaxScroll]);useDroppablePublisher({droppableId:droppableId,type:type,mode:mode,direction:direction,isDropDisabled:isDropDisabled,isCombineEnabled:isCombineEnabled,ignoreContainerClipping:ignoreContainerClipping,getDroppableRef:getDroppableRef});var placeholder=React__default.createElement(AnimateInOut,{on:props.placeholder,shouldAnimate:props.shouldAnimatePlaceholder},(function(_ref){var onClose=_ref.onClose,data=_ref.data,animate=_ref.animate;return React__default.createElement(Placeholder$1,{placeholder:data,onClose:onClose,innerRef:setPlaceholderRef,animate:animate,contextId:contextId,onTransitionEnd:onPlaceholderTransitionEnd})}));var provided=useMemoOne.useMemo((function(){return{innerRef:setDroppableRef,placeholder:placeholder,droppableProps:{"data-rbd-droppable-id":droppableId,"data-rbd-droppable-context-id":contextId}}}),[contextId,droppableId,placeholder,setDroppableRef]);var isUsingCloneFor=useClone?useClone.dragging.draggableId:null;var droppableContext=useMemoOne.useMemo((function(){return{droppableId:droppableId,type:type,isUsingCloneFor:isUsingCloneFor}}),[droppableId,isUsingCloneFor,type]);function getClone(){if(!useClone){return null}var dragging=useClone.dragging,render=useClone.render;var node=React__default.createElement(PrivateDraggable,{draggableId:dragging.draggableId,index:dragging.source.index,isClone:true,isEnabled:true,shouldRespectForcePress:false,canDragInteractiveElements:true},(function(draggableProvided,draggableSnapshot){return render(draggableProvided,draggableSnapshot,dragging)}));return ReactDOM.createPortal(node,getContainerForClone())}return React__default.createElement(DroppableContext.Provider,{value:droppableContext},children(provided,snapshot),getClone())}var isMatchingType=function isMatchingType(type,critical){return type===critical.droppable.type};var getDraggable=function getDraggable(critical,dimensions){return dimensions.draggables[critical.draggable.id]};var makeMapStateToProps$1=function makeMapStateToProps(){var idleWithAnimation={placeholder:null,shouldAnimatePlaceholder:true,snapshot:{isDraggingOver:false,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:false},useClone:null};var idleWithoutAnimation=_extends({},idleWithAnimation,{shouldAnimatePlaceholder:false});var getDraggableRubric=memoizeOne((function(descriptor){return{draggableId:descriptor.id,type:descriptor.type,source:{index:descriptor.index,droppableId:descriptor.droppableId}}}));var getMapProps=memoizeOne((function(id,isEnabled,isDraggingOverForConsumer,isDraggingOverForImpact,dragging,renderClone){var draggableId=dragging.descriptor.id;var isHome=dragging.descriptor.droppableId===id;if(isHome){var useClone=renderClone?{render:renderClone,dragging:getDraggableRubric(dragging.descriptor)}:null;var _snapshot={isDraggingOver:isDraggingOverForConsumer,draggingOverWith:isDraggingOverForConsumer?draggableId:null,draggingFromThisWith:draggableId,isUsingPlaceholder:true};return{placeholder:dragging.placeholder,shouldAnimatePlaceholder:false,snapshot:_snapshot,useClone:useClone}}if(!isEnabled){return idleWithoutAnimation}if(!isDraggingOverForImpact){return idleWithAnimation}var snapshot={isDraggingOver:isDraggingOverForConsumer,draggingOverWith:draggableId,draggingFromThisWith:null,isUsingPlaceholder:true};return{placeholder:dragging.placeholder,shouldAnimatePlaceholder:true,snapshot:snapshot,useClone:null}}));var selector=function selector(state,ownProps){var id=ownProps.droppableId;var type=ownProps.type;var isEnabled=!ownProps.isDropDisabled;var renderClone=ownProps.renderClone;if(state.isDragging){var critical=state.critical;if(!isMatchingType(type,critical)){return idleWithoutAnimation}var dragging=getDraggable(critical,state.dimensions);var isDraggingOver=whatIsDraggedOver(state.impact)===id;return getMapProps(id,isEnabled,isDraggingOver,isDraggingOver,dragging,renderClone)}if(state.phase==="DROP_ANIMATING"){var completed=state.completed;if(!isMatchingType(type,completed.critical)){return idleWithoutAnimation}var _dragging=getDraggable(completed.critical,state.dimensions);return getMapProps(id,isEnabled,whatIsDraggedOverFromResult(completed.result)===id,whatIsDraggedOver(completed.impact)===id,_dragging,renderClone)}if(state.phase==="IDLE"&&state.completed&&!state.shouldFlush){var _completed=state.completed;if(!isMatchingType(type,_completed.critical)){return idleWithoutAnimation}var wasOver=whatIsDraggedOver(_completed.impact)===id;var wasCombining=Boolean(_completed.impact.at&&_completed.impact.at.type==="COMBINE");var isHome=_completed.critical.droppable.id===id;if(wasOver){return wasCombining?idleWithAnimation:idleWithoutAnimation}if(isHome){return idleWithAnimation}return idleWithoutAnimation}return idleWithoutAnimation};return selector};var mapDispatchToProps$1={updateViewportMaxScroll:updateViewportMaxScroll};function getBody(){!document.body?false?undefined:invariant(false):void 0;return document.body}var defaultProps={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:false,isCombineEnabled:false,ignoreContainerClipping:false,renderClone:null,getContainerForClone:getBody};var ConnectedDroppable=reactRedux.connect(makeMapStateToProps$1,mapDispatchToProps$1,null,{context:StoreContext,pure:true,areStatePropsEqual:isStrictEqual})(Droppable);ConnectedDroppable.defaultProps=defaultProps;exports.DragDropContext=DragDropContext;exports.Draggable=PublicDraggable;exports.Droppable=ConnectedDroppable;exports.resetServerContext=resetServerContext},function(module,exports){function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass}module.exports=_inheritsLoose},function(module,exports){function _extends(){module.exports=_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}module.exports=_extends},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopDefault(ex){return ex&&typeof ex==="object"&&"default"in ex?ex["default"]:ex}var $$observable=_interopDefault(__webpack_require__(125));var randomString=function randomString(){return Math.random().toString(36).substring(7).split("").join(".")};var ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function PROBE_UNKNOWN_ACTION(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject(obj){if(typeof obj!=="object"||obj===null)return false;var proto=obj;while(Object.getPrototypeOf(proto)!==null){proto=Object.getPrototypeOf(proto)}return Object.getPrototypeOf(obj)===proto}function createStore(reducer,preloadedState,enhancer){var _ref2;if(typeof preloadedState==="function"&&typeof enhancer==="function"||typeof enhancer==="function"&&typeof arguments[3]==="function"){throw new Error("It looks like you are passing several store enhancers to "+"createStore(). This is not supported. Instead, compose them "+"together to a single function.")}if(typeof preloadedState==="function"&&typeof enhancer==="undefined"){enhancer=preloadedState;preloadedState=undefined}if(typeof enhancer!=="undefined"){if(typeof enhancer!=="function"){throw new Error("Expected the enhancer to be a function.")}return enhancer(createStore)(reducer,preloadedState)}if(typeof reducer!=="function"){throw new Error("Expected the reducer to be a function.")}var currentReducer=reducer;var currentState=preloadedState;var currentListeners=[];var nextListeners=currentListeners;var isDispatching=false;function ensureCanMutateNextListeners(){if(nextListeners===currentListeners){nextListeners=currentListeners.slice()}}function getState(){if(isDispatching){throw new Error("You may not call store.getState() while the reducer is executing. "+"The reducer has already received the state as an argument. "+"Pass it down from the top reducer instead of reading it from the store.")}return currentState}function subscribe(listener){if(typeof listener!=="function"){throw new Error("Expected the listener to be a function.")}if(isDispatching){throw new Error("You may not call store.subscribe() while the reducer is executing. "+"If you would like to be notified after the store has been updated, subscribe from a "+"component and invoke store.getState() in the callback to access the latest state. "+"See https://redux.js.org/api-reference/store#subscribe(listener) for more details.")}var isSubscribed=true;ensureCanMutateNextListeners();nextListeners.push(listener);return function unsubscribe(){if(!isSubscribed){return}if(isDispatching){throw new Error("You may not unsubscribe from a store listener while the reducer is executing. "+"See https://redux.js.org/api-reference/store#subscribe(listener) for more details.")}isSubscribed=false;ensureCanMutateNextListeners();var index=nextListeners.indexOf(listener);nextListeners.splice(index,1)}}function dispatch(action){if(!isPlainObject(action)){throw new Error("Actions must be plain objects. "+"Use custom middleware for async actions.")}if(typeof action.type==="undefined"){throw new Error('Actions may not have an undefined "type" property. '+"Have you misspelled a constant?")}if(isDispatching){throw new Error("Reducers may not dispatch actions.")}try{isDispatching=true;currentState=currentReducer(currentState,action)}finally{isDispatching=false}var listeners=currentListeners=nextListeners;for(var i=0;i<listeners.length;i++){var listener=listeners[i];listener()}return action}function replaceReducer(nextReducer){if(typeof nextReducer!=="function"){throw new Error("Expected the nextReducer to be a function.")}currentReducer=nextReducer;dispatch({type:ActionTypes.REPLACE})}function observable(){var _ref;var outerSubscribe=subscribe;return _ref={subscribe:function subscribe(observer){if(typeof observer!=="object"||observer===null){throw new TypeError("Expected the observer to be an object.")}function observeState(){if(observer.next){observer.next(getState())}}observeState();var unsubscribe=outerSubscribe(observeState);return{unsubscribe:unsubscribe}}},_ref[$$observable]=function(){return this},_ref}dispatch({type:ActionTypes.INIT});return _ref2={dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:replaceReducer},_ref2[$$observable]=observable,_ref2}function warning(message){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(message)}try{throw new Error(message)}catch(e){}}function getUndefinedStateErrorMessage(key,action){var actionType=action&&action.type;var actionDescription=actionType&&'action "'+String(actionType)+'"'||"an action";return"Given "+actionDescription+', reducer "'+key+'" returned undefined. '+"To ignore an action, you must explicitly return the previous state. "+"If you want this reducer to hold no value, you can return null instead of undefined."}function getUnexpectedStateShapeWarningMessage(inputState,reducers,action,unexpectedKeyCache){var reducerKeys=Object.keys(reducers);var argumentName=action&&action.type===ActionTypes.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(reducerKeys.length===0){return"Store does not have a valid reducer. Make sure the argument passed "+"to combineReducers is an object whose values are reducers."}if(!isPlainObject(inputState)){return"The "+argumentName+' has unexpected type of "'+{}.toString.call(inputState).match(/\s([a-z|A-Z]+)/)[1]+'". Expected argument to be an object with the following '+('keys: "'+reducerKeys.join('", "')+'"')}var unexpectedKeys=Object.keys(inputState).filter((function(key){return!reducers.hasOwnProperty(key)&&!unexpectedKeyCache[key]}));unexpectedKeys.forEach((function(key){unexpectedKeyCache[key]=true}));if(action&&action.type===ActionTypes.REPLACE)return;if(unexpectedKeys.length>0){return"Unexpected "+(unexpectedKeys.length>1?"keys":"key")+" "+('"'+unexpectedKeys.join('", "')+'" found in '+argumentName+". ")+"Expected to find one of the known reducer keys instead: "+('"'+reducerKeys.join('", "')+'". Unexpected keys will be ignored.')}}function assertReducerShape(reducers){Object.keys(reducers).forEach((function(key){var reducer=reducers[key];var initialState=reducer(undefined,{type:ActionTypes.INIT});if(typeof initialState==="undefined"){throw new Error('Reducer "'+key+'" returned undefined during initialization. '+"If the state passed to the reducer is undefined, you must "+"explicitly return the initial state. The initial state may "+"not be undefined. If you don't want to set a value for this reducer, "+"you can use null instead of undefined.")}if(typeof reducer(undefined,{type:ActionTypes.PROBE_UNKNOWN_ACTION()})==="undefined"){throw new Error('Reducer "'+key+'" returned undefined when probed with a random type. '+("Don't try to handle "+ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the "+"current state for any unknown actions, unless it is undefined, "+"in which case you must return the initial state, regardless of the "+"action type. The initial state may not be undefined, but can be null.")}}))}function combineReducers(reducers){var reducerKeys=Object.keys(reducers);var finalReducers={};for(var i=0;i<reducerKeys.length;i++){var key=reducerKeys[i];if(false){}if(typeof reducers[key]==="function"){finalReducers[key]=reducers[key]}}var finalReducerKeys=Object.keys(finalReducers);var unexpectedKeyCache;if(false){}var shapeAssertionError;try{assertReducerShape(finalReducers)}catch(e){shapeAssertionError=e}return function combination(state,action){if(state===void 0){state={}}if(shapeAssertionError){throw shapeAssertionError}if(false){var warningMessage}var hasChanged=false;var nextState={};for(var _i=0;_i<finalReducerKeys.length;_i++){var _key=finalReducerKeys[_i];var reducer=finalReducers[_key];var previousStateForKey=state[_key];var nextStateForKey=reducer(previousStateForKey,action);if(typeof nextStateForKey==="undefined"){var errorMessage=getUndefinedStateErrorMessage(_key,action);throw new Error(errorMessage)}nextState[_key]=nextStateForKey;hasChanged=hasChanged||nextStateForKey!==previousStateForKey}return hasChanged?nextState:state}}function bindActionCreator(actionCreator,dispatch){return function(){return dispatch(actionCreator.apply(this,arguments))}}function bindActionCreators(actionCreators,dispatch){if(typeof actionCreators==="function"){return bindActionCreator(actionCreators,dispatch)}if(typeof actionCreators!=="object"||actionCreators===null){throw new Error("bindActionCreators expected an object or a function, instead received "+(actionCreators===null?"null":typeof actionCreators)+". "+'Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?')}var boundActionCreators={};for(var key in actionCreators){var actionCreator=actionCreators[key];if(typeof actionCreator==="function"){boundActionCreators[key]=bindActionCreator(actionCreator,dispatch)}}return boundActionCreators}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){keys.push.apply(keys,Object.getOwnPropertySymbols(object))}if(enumerableOnly)keys=keys.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function compose(){for(var _len=arguments.length,funcs=new Array(_len),_key=0;_key<_len;_key++){funcs[_key]=arguments[_key]}if(funcs.length===0){return function(arg){return arg}}if(funcs.length===1){return funcs[0]}return funcs.reduce((function(a,b){return function(){return a(b.apply(void 0,arguments))}}))}function applyMiddleware(){for(var _len=arguments.length,middlewares=new Array(_len),_key=0;_key<_len;_key++){middlewares[_key]=arguments[_key]}return function(createStore){return function(){var store=createStore.apply(void 0,arguments);var _dispatch=function dispatch(){throw new Error("Dispatching while constructing your middleware is not allowed. "+"Other middleware would not be applied to this dispatch.")};var middlewareAPI={getState:store.getState,dispatch:function dispatch(){return _dispatch.apply(void 0,arguments)}};var chain=middlewares.map((function(middleware){return middleware(middlewareAPI)}));_dispatch=compose.apply(void 0,chain)(store.dispatch);return _objectSpread2({},store,{dispatch:_dispatch})}}}function isCrushed(){}if(false){}exports.__DO_NOT_USE__ActionTypes=ActionTypes;exports.applyMiddleware=applyMiddleware;exports.bindActionCreators=bindActionCreators;exports.combineReducers=combineReducers;exports.compose=compose;exports.createStore=createStore},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react=__webpack_require__(3);function areInputsEqual(newInputs,lastInputs){if(newInputs.length!==lastInputs.length){return false}for(var i=0;i<newInputs.length;i++){if(newInputs[i]!==lastInputs[i]){return false}}return true}function useMemoOne(getResult,inputs){var initial=react.useState((function(){return{inputs:inputs,result:getResult()}}))[0];var committed=react.useRef(initial);var isInputMatch=Boolean(inputs&&committed.current.inputs&&areInputsEqual(inputs,committed.current.inputs));var cache=isInputMatch?committed.current:{inputs:inputs,result:getResult()};react.useEffect((function(){committed.current=cache}),[cache]);return cache.result}function useCallbackOne(callback,inputs){return useMemoOne((function(){return callback}),inputs)}var useMemo=useMemoOne;var useCallback=useCallbackOne;exports.useCallback=useCallback;exports.useCallbackOne=useCallbackOne;exports.useMemo=useMemo;exports.useMemoOne=useMemoOne},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopDefault(ex){return ex&&typeof ex==="object"&&"default"in ex?ex["default"]:ex}var invariant=_interopDefault(__webpack_require__(276));var getRect=function getRect(_ref){var top=_ref.top,right=_ref.right,bottom=_ref.bottom,left=_ref.left;var width=right-left;var height=bottom-top;var rect={top:top,right:right,bottom:bottom,left:left,width:width,height:height,x:left,y:top,center:{x:(right+left)/2,y:(bottom+top)/2}};return rect};var expand=function expand(target,expandBy){return{top:target.top-expandBy.top,left:target.left-expandBy.left,bottom:target.bottom+expandBy.bottom,right:target.right+expandBy.right}};var shrink=function shrink(target,shrinkBy){return{top:target.top+shrinkBy.top,left:target.left+shrinkBy.left,bottom:target.bottom-shrinkBy.bottom,right:target.right-shrinkBy.right}};var shift=function shift(target,shiftBy){return{top:target.top+shiftBy.y,left:target.left+shiftBy.x,bottom:target.bottom+shiftBy.y,right:target.right+shiftBy.x}};var noSpacing={top:0,right:0,bottom:0,left:0};var createBox=function createBox(_ref2){var borderBox=_ref2.borderBox,_ref2$margin=_ref2.margin,margin=_ref2$margin===void 0?noSpacing:_ref2$margin,_ref2$border=_ref2.border,border=_ref2$border===void 0?noSpacing:_ref2$border,_ref2$padding=_ref2.padding,padding=_ref2$padding===void 0?noSpacing:_ref2$padding;var marginBox=getRect(expand(borderBox,margin));var paddingBox=getRect(shrink(borderBox,border));var contentBox=getRect(shrink(paddingBox,padding));return{marginBox:marginBox,borderBox:getRect(borderBox),paddingBox:paddingBox,contentBox:contentBox,margin:margin,border:border,padding:padding}};var parse=function parse(raw){var value=raw.slice(0,-2);var suffix=raw.slice(-2);if(suffix!=="px"){return 0}var result=Number(value);!!isNaN(result)?false?undefined:invariant(false):void 0;return result};var getWindowScroll=function getWindowScroll(){return{x:window.pageXOffset,y:window.pageYOffset}};var offset=function offset(original,change){var borderBox=original.borderBox,border=original.border,margin=original.margin,padding=original.padding;var shifted=shift(borderBox,change);return createBox({borderBox:shifted,border:border,margin:margin,padding:padding})};var withScroll=function withScroll(original,scroll){if(scroll===void 0){scroll=getWindowScroll()}return offset(original,scroll)};var calculateBox=function calculateBox(borderBox,styles){var margin={top:parse(styles.marginTop),right:parse(styles.marginRight),bottom:parse(styles.marginBottom),left:parse(styles.marginLeft)};var padding={top:parse(styles.paddingTop),right:parse(styles.paddingRight),bottom:parse(styles.paddingBottom),left:parse(styles.paddingLeft)};var border={top:parse(styles.borderTopWidth),right:parse(styles.borderRightWidth),bottom:parse(styles.borderBottomWidth),left:parse(styles.borderLeftWidth)};return createBox({borderBox:borderBox,margin:margin,padding:padding,border:border})};var getBox=function getBox(el){var borderBox=el.getBoundingClientRect();var styles=window.getComputedStyle(el);return calculateBox(borderBox,styles)};exports.calculateBox=calculateBox;exports.createBox=createBox;exports.expand=expand;exports.getBox=getBox;exports.getRect=getRect;exports.offset=offset;exports.shrink=shrink;exports.withScroll=withScroll},function(module,exports,__webpack_require__){"use strict";function areInputsEqual(newInputs,lastInputs){if(newInputs.length!==lastInputs.length){return false}for(var i=0;i<newInputs.length;i++){if(newInputs[i]!==lastInputs[i]){return false}}return true}function memoizeOne(resultFn,isEqual){if(isEqual===void 0){isEqual=areInputsEqual}var lastThis;var lastArgs=[];var lastResult;var calledOnce=false;function memoized(){var newArgs=[];for(var _i=0;_i<arguments.length;_i++){newArgs[_i]=arguments[_i]}if(calledOnce&&lastThis===this&&isEqual(newArgs,lastArgs)){return lastResult}lastResult=resultFn.apply(this,newArgs);calledOnce=true;lastThis=this;lastArgs=newArgs;return lastResult}return memoized}module.exports=memoizeOne},function(module,exports,__webpack_require__){"use strict";var rafSchd=function rafSchd(fn){var lastArgs=[];var frameId=null;var wrapperFn=function wrapperFn(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}lastArgs=args;if(frameId){return}frameId=requestAnimationFrame((function(){frameId=null;fn.apply(void 0,lastArgs)}))};wrapperFn.cancel=function(){if(!frameId){return}cancelAnimationFrame(frameId);frameId=null};return wrapperFn};module.exports=rafSchd},function(module,exports,__webpack_require__){"use strict";(function(process){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _justReduceObject=__webpack_require__(371);var _justReduceObject2=_interopRequireDefault(_justReduceObject);var _invariant=__webpack_require__(220);var _invariant2=_interopRequireDefault(_invariant);var _events=__webpack_require__(372);var _helpers=__webpack_require__(279);var _helpers2=_interopRequireDefault(_helpers);var _utils=__webpack_require__(374);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var warning=function warning(text){if(process&&"production"!=="production"){console.warn(text)}};var ShortcutManager=function(_EventEmitter){_inherits(ShortcutManager,_EventEmitter);function ShortcutManager(){var keymap=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,ShortcutManager);var _this=_possibleConstructorReturn(this,(ShortcutManager.__proto__||Object.getPrototypeOf(ShortcutManager)).call(this));_this._platformName=_helpers2.default.getPlatformName();_this._parseShortcutDescriptor=function(item){if((0,_utils.isPlainObject)(item)){return item[_this._platformName]}return item};_this._keymap=keymap;return _this}_createClass(ShortcutManager,[{key:"addUpdateListener",value:function addUpdateListener(callback){(0,_invariant2.default)(callback,"addUpdateListener: callback argument is not defined or falsy");this.on(ShortcutManager.CHANGE_EVENT,callback)}},{key:"removeUpdateListener",value:function removeUpdateListener(callback){this.removeListener(ShortcutManager.CHANGE_EVENT,callback)}},{key:"setKeymap",value:function setKeymap(keymap){(0,_invariant2.default)(keymap,"setKeymap: keymap argument is not defined or falsy.");this._keymap=keymap;this.emit(ShortcutManager.CHANGE_EVENT)}},{key:"extendKeymap",value:function extendKeymap(keymap){(0,_invariant2.default)(keymap,"extendKeymap: keymap argument is not defined or falsy.");this._keymap=Object.assign({},this._keymap,keymap);this.emit(ShortcutManager.CHANGE_EVENT)}},{key:"getAllShortcuts",value:function getAllShortcuts(){return this._keymap}},{key:"getAllShortcutsForPlatform",value:function getAllShortcutsForPlatform(platformName){var _transformShortcuts=function _transformShortcuts(shortcuts){return(0,_justReduceObject2.default)(shortcuts,(function(result,keyName,keyValue){if((0,_utils.isPlainObject)(keyValue)){if(keyValue[platformName]){keyValue=keyValue[platformName]}else{result[keyName]=_transformShortcuts(keyValue);return result}}result[keyName]=keyValue;return result}),{})};return _transformShortcuts(this._keymap)}},{key:"getAllShortcutsForCurrentPlatform",value:function getAllShortcutsForCurrentPlatform(){return this.getAllShortcutsForPlatform(this._platformName)}},{key:"getShortcuts",value:function getShortcuts(componentName){(0,_invariant2.default)(componentName,"getShortcuts: name argument is not defined or falsy.");var cursor=this._keymap[componentName];if(!cursor){warning("getShortcuts: There are no shortcuts with name "+componentName+".");return}var shortcuts=(0,_utils.compact)((0,_utils.flatten)((0,_utils.map)(cursor,this._parseShortcutDescriptor)));return shortcuts}},{key:"_parseShortcutKeyName",value:function _parseShortcutKeyName(obj,keyName){var _this2=this;var result=(0,_utils.findKey)(obj,(function(item){if((0,_utils.isPlainObject)(item)){item=item[_this2._platformName]}if((0,_utils.isArray)(item)){var index=item.indexOf(keyName);if(index>=0){item=item[index]}}return item===keyName}));return result}},{key:"findShortcutName",value:function findShortcutName(keyName,componentName){(0,_invariant2.default)(keyName,"findShortcutName: keyName argument is not defined or falsy.");(0,_invariant2.default)(componentName,"findShortcutName: componentName argument is not defined or falsy.");var cursor=this._keymap[componentName];var result=this._parseShortcutKeyName(cursor,keyName);return result}}]);return ShortcutManager}(_events.EventEmitter);ShortcutManager.CHANGE_EVENT="shortcuts:update";exports.default=ShortcutManager;module.exports=exports["default"]}).call(this,__webpack_require__(126))},function(module,exports){module.exports=reduce;function reduce(obj,predicate){var args=[callback];var hasInitialValue=2 in arguments;hasInitialValue&&args.push(arguments[2]);function callback(previousValue,currentKey,currentIndex,array){if(!hasInitialValue){previousValue=obj[array[0]];hasInitialValue=true}return predicate(previousValue,currentKey,obj[currentKey],currentIndex,array)}return Array.prototype.reduce.apply(Object.keys(obj),args)}},function(module,exports,__webpack_require__){"use strict";var R=typeof Reflect==="object"?Reflect:null;var ReflectApply=R&&typeof R.apply==="function"?R.apply:function ReflectApply(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};var ReflectOwnKeys;if(R&&typeof R.ownKeys==="function"){ReflectOwnKeys=R.ownKeys}else if(Object.getOwnPropertySymbols){ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}}else{ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target)}}function ProcessEmitWarning(warning){if(console&&console.warn)console.warn(warning)}var NumberIsNaN=Number.isNaN||function NumberIsNaN(value){return value!==value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=undefined;var defaultMaxListeners=10;Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:true,get:function(){return defaultMaxListeners},set:function(arg){if(typeof arg!=="number"||arg<0||NumberIsNaN(arg)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".")}defaultMaxListeners=arg}});EventEmitter.init=function(){if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){if(typeof n!=="number"||n<0||NumberIsNaN(n)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".")}this._maxListeners=n;return this};function $getMaxListeners(that){if(that._maxListeners===undefined)return EventEmitter.defaultMaxListeners;return that._maxListeners}EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return $getMaxListeners(this)};EventEmitter.prototype.emit=function emit(type){var args=[];for(var i=1;i<arguments.length;i++)args.push(arguments[i]);var doError=type==="error";var events=this._events;if(events!==undefined)doError=doError&&events.error===undefined;else if(!doError)return false;if(doError){var er;if(args.length>0)er=args[0];if(er instanceof Error){throw er}var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));err.context=er;throw err}var handler=events[type];if(handler===undefined)return false;if(typeof handler==="function"){ReflectApply(handler,this,args)}else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)ReflectApply(listeners[i],this,args)}return true};function _addListener(target,type,listener,prepend){var m;var events;var existing;if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}events=target._events;if(events===undefined){events=target._events=Object.create(null);target._eventsCount=0}else{if(events.newListener!==undefined){target.emit("newListener",type,listener.listener?listener.listener:listener);events=target._events}existing=events[type]}if(existing===undefined){existing=events[type]=listener;++target._eventsCount}else{if(typeof existing==="function"){existing=events[type]=prepend?[listener,existing]:[existing,listener]}else if(prepend){existing.unshift(listener)}else{existing.push(listener)}m=$getMaxListeners(target);if(m>0&&existing.length>m&&!existing.warned){existing.warned=true;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners "+"added. Use emitter.setMaxListeners() to "+"increase limit");w.name="MaxListenersExceededWarning";w.emitter=target;w.type=type;w.count=existing.length;ProcessEmitWarning(w)}}return target}EventEmitter.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,false)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,true)};function onceWrapper(){var args=[];for(var i=0;i<arguments.length;i++)args.push(arguments[i]);if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;ReflectApply(this.listener,this.target,args)}}function _onceWrap(target,type,listener){var state={fired:false,wrapFn:undefined,target:target,type:type,listener:listener};var wrapped=onceWrapper.bind(state);wrapped.listener=listener;state.wrapFn=wrapped;return wrapped}EventEmitter.prototype.once=function once(type,listener){if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}this.on(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.prependOnceListener=function prependOnceListener(type,listener){if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}this.prependListener(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}events=this._events;if(events===undefined)return this;list=events[type];if(list===undefined)return this;if(list===listener||list.listener===listener){if(--this._eventsCount===0)this._events=Object.create(null);else{delete events[type];if(events.removeListener)this.emit("removeListener",type,list.listener||listener)}}else if(typeof list!=="function"){position=-1;for(i=list.length-1;i>=0;i--){if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener;position=i;break}}if(position<0)return this;if(position===0)list.shift();else{spliceOne(list,position)}if(list.length===1)events[type]=list[0];if(events.removeListener!==undefined)this.emit("removeListener",type,originalListener||listener)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events,i;events=this._events;if(events===undefined)return this;if(events.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(events[type]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete events[type]}return this}if(arguments.length===0){var keys=Object.keys(events);var key;for(i=0;i<keys.length;++i){key=keys[i];if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}listeners=events[type];if(typeof listeners==="function"){this.removeListener(type,listeners)}else if(listeners!==undefined){for(i=listeners.length-1;i>=0;i--){this.removeListener(type,listeners[i])}}return this};function _listeners(target,type,unwrap){var events=target._events;if(events===undefined)return[];var evlistener=events[type];if(evlistener===undefined)return[];if(typeof evlistener==="function")return unwrap?[evlistener.listener||evlistener]:[evlistener];return unwrap?unwrapListeners(evlistener):arrayClone(evlistener,evlistener.length)}EventEmitter.prototype.listeners=function listeners(type){return _listeners(this,type,true)};EventEmitter.prototype.rawListeners=function rawListeners(type){return _listeners(this,type,false)};EventEmitter.listenerCount=function(emitter,type){if(typeof emitter.listenerCount==="function"){return emitter.listenerCount(type)}else{return listenerCount.call(emitter,type)}};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(type){var events=this._events;if(events!==undefined){var evlistener=events[type];if(typeof evlistener==="function"){return 1}else if(evlistener!==undefined){return evlistener.length}}return 0}EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(arr,n){var copy=new Array(n);for(var i=0;i<n;++i)copy[i]=arr[i];return copy}function spliceOne(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}function unwrapListeners(arr){var ret=new Array(arr.length);for(var i=0;i<ret.length;++i){ret[i]=arr[i].listener||arr[i]}return ret}},function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;
/*!
 * Platform.js <https://mths.be/platform>
 * Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 * Copyright 2011-2013 John-David Dalton <http://allyoucanleet.com/>
 * Available under MIT license <https://mths.be/mit>
 */(function(){"use strict";var objectTypes={function:true,object:true};var root=objectTypes[typeof window]&&window||this;var oldRoot=root;var freeExports=objectTypes[typeof exports]&&exports;var freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module;var freeGlobal=freeExports&&freeModule&&typeof global=="object"&&global;if(freeGlobal&&(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal)){root=freeGlobal}var maxSafeInteger=Math.pow(2,53)-1;var reOpera=/\bOpera/;var thisBinding=this;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var toString=objectProto.toString;function capitalize(string){string=String(string);return string.charAt(0).toUpperCase()+string.slice(1)}function cleanupOS(os,pattern,label){var data={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};if(pattern&&label&&/^Win/i.test(os)&&!/^Windows Phone /i.test(os)&&(data=data[/[\d.]+$/.exec(os)])){os="Windows "+data}os=String(os);if(pattern&&label){os=os.replace(RegExp(pattern,"i"),label)}os=format(os.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]);return os}function each(object,callback){var index=-1,length=object?object.length:0;if(typeof length=="number"&&length>-1&&length<=maxSafeInteger){while(++index<length){callback(object[index],index,object)}}else{forOwn(object,callback)}}function format(string){string=trim(string);return/^(?:webOS|i(?:OS|P))/.test(string)?string:capitalize(string)}function forOwn(object,callback){for(var key in object){if(hasOwnProperty.call(object,key)){callback(object[key],key,object)}}}function getClassOf(value){return value==null?capitalize(value):toString.call(value).slice(8,-1)}function isHostType(object,property){var type=object!=null?typeof object[property]:"number";return!/^(?:boolean|number|string|undefined)$/.test(type)&&(type=="object"?!!object[property]:true)}function qualify(string){return String(string).replace(/([ -])(?!$)/g,"$1?")}function reduce(array,callback){var accumulator=null;each(array,(function(value,index){accumulator=callback(accumulator,value,index,array)}));return accumulator}function trim(string){return String(string).replace(/^ +| +$/g,"")}function parse(ua){var context=root;var isCustomContext=ua&&typeof ua=="object"&&getClassOf(ua)!="String";if(isCustomContext){context=ua;ua=null}var nav=context.navigator||{};var userAgent=nav.userAgent||"";ua||(ua=userAgent);var isModuleScope=isCustomContext||thisBinding==oldRoot;var likeChrome=isCustomContext?!!nav.likeChrome:/\bChrome\b/.test(ua)&&!/internal|\n/i.test(toString.toString());var objectClass="Object",airRuntimeClass=isCustomContext?objectClass:"ScriptBridgingProxyObject",enviroClass=isCustomContext?objectClass:"Environment",javaClass=isCustomContext&&context.java?"JavaPackage":getClassOf(context.java),phantomClass=isCustomContext?objectClass:"RuntimeObject";var java=/\bJava/.test(javaClass)&&context.java;var rhino=java&&getClassOf(context.environment)==enviroClass;var alpha=java?"a":"α";var beta=java?"b":"β";var doc=context.document||{};var opera=context.operamini||context.opera;var operaClass=reOpera.test(operaClass=isCustomContext&&opera?opera["[[Class]]"]:getClassOf(opera))?operaClass:opera=null;var data;var arch=ua;var description=[];var prerelease=null;var useFeatures=ua==userAgent;var version=useFeatures&&opera&&typeof opera.version=="function"&&opera.version();var isSpecialCasedOS;var layout=getLayout([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]);var name=getName(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]);var product=getProduct([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]);var manufacturer=getManufacturer({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}});var os=getOS(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function getLayout(guesses){return reduce(guesses,(function(result,guess){return result||RegExp("\\b"+(guess.pattern||qualify(guess))+"\\b","i").exec(ua)&&(guess.label||guess)}))}function getManufacturer(guesses){return reduce(guesses,(function(result,value,key){return result||(value[product]||value[/^[a-z]+(?: +[a-z]+\b)*/i.exec(product)]||RegExp("\\b"+qualify(key)+"(?:\\b|\\w*\\d)","i").exec(ua))&&key}))}function getName(guesses){return reduce(guesses,(function(result,guess){return result||RegExp("\\b"+(guess.pattern||qualify(guess))+"\\b","i").exec(ua)&&(guess.label||guess)}))}function getOS(guesses){return reduce(guesses,(function(result,guess){var pattern=guess.pattern||qualify(guess);if(!result&&(result=RegExp("\\b"+pattern+"(?:/[\\d.]+|[ \\w.]*)","i").exec(ua))){result=cleanupOS(result,pattern,guess.label||guess)}return result}))}function getProduct(guesses){return reduce(guesses,(function(result,guess){var pattern=guess.pattern||qualify(guess);if(!result&&(result=RegExp("\\b"+pattern+" *\\d+[.\\w_]*","i").exec(ua)||RegExp("\\b"+pattern+" *\\w+-[\\w]*","i").exec(ua)||RegExp("\\b"+pattern+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(ua))){if((result=String(guess.label&&!RegExp(pattern,"i").test(guess.label)?guess.label:result).split("/"))[1]&&!/[\d.]+/.test(result[0])){result[0]+=" "+result[1]}guess=guess.label||guess;result=format(result[0].replace(RegExp(pattern,"i"),guess).replace(RegExp("; *(?:"+guess+"[_-])?","i")," ").replace(RegExp("("+guess+")[-_.]?(\\w)","i"),"$1 $2"))}return result}))}function getVersion(patterns){return reduce(patterns,(function(result,pattern){return result||(RegExp(pattern+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(ua)||0)[1]||null}))}function toStringPlatform(){return this.description||""}layout&&(layout=[layout]);if(manufacturer&&!product){product=getProduct([manufacturer])}if(data=/\bGoogle TV\b/.exec(product)){product=data[0]}if(/\bSimulator\b/i.test(ua)){product=(product?product+" ":"")+"Simulator"}if(name=="Opera Mini"&&/\bOPiOS\b/.test(ua)){description.push("running in Turbo/Uncompressed mode")}if(name=="IE"&&/\blike iPhone OS\b/.test(ua)){data=parse(ua.replace(/like iPhone OS/,""));manufacturer=data.manufacturer;product=data.product}else if(/^iP/.test(product)){name||(name="Safari");os="iOS"+((data=/ OS ([\d_]+)/i.exec(ua))?" "+data[1].replace(/_/g,"."):"")}else if(name=="Konqueror"&&!/buntu/i.test(os)){os="Kubuntu"}else if(manufacturer&&manufacturer!="Google"&&(/Chrome/.test(name)&&!/\bMobile Safari\b/i.test(ua)||/\bVita\b/.test(product))||/\bAndroid\b/.test(os)&&/^Chrome/.test(name)&&/\bVersion\//i.test(ua)){name="Android Browser";os=/\bAndroid\b/.test(os)?os:"Android"}else if(name=="Silk"){if(!/\bMobi/i.test(ua)){os="Android";description.unshift("desktop mode")}if(/Accelerated *= *true/i.test(ua)){description.unshift("accelerated")}}else if(name=="PaleMoon"&&(data=/\bFirefox\/([\d.]+)\b/.exec(ua))){description.push("identifying as Firefox "+data[1])}else if(name=="Firefox"&&(data=/\b(Mobile|Tablet|TV)\b/i.exec(ua))){os||(os="Firefox OS");product||(product=data[1])}else if(!name||(data=!/\bMinefield\b/i.test(ua)&&/\b(?:Firefox|Safari)\b/.exec(name))){if(name&&!product&&/[\/,]|^[^(]+?\)/.test(ua.slice(ua.indexOf(data+"/")+8))){name=null}if((data=product||manufacturer||os)&&(product||manufacturer||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(os))){name=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(os)?os:data)+" Browser"}}else if(name=="Electron"&&(data=(/\bChrome\/([\d.]+)\b/.exec(ua)||0)[1])){description.push("Chromium "+data)}if(!version){version=getVersion(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",qualify(name),"(?:Firefox|Minefield|NetFront)"])}if(data=layout=="iCab"&&parseFloat(version)>3&&"WebKit"||/\bOpera\b/.test(name)&&(/\bOPR\b/.test(ua)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(ua)&&!/^(?:Trident|EdgeHTML)$/.test(layout)&&"WebKit"||!layout&&/\bMSIE\b/i.test(ua)&&(os=="Mac OS"?"Tasman":"Trident")||layout=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(name)&&"NetFront"){layout=[data]}if(name=="IE"&&(data=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(ua)||0)[1])){name+=" Mobile";os="Windows Phone "+(/\+$/.test(data)?data:data+".x");description.unshift("desktop mode")}else if(/\bWPDesktop\b/i.test(ua)){name="IE Mobile";os="Windows Phone 8.x";description.unshift("desktop mode");version||(version=(/\brv:([\d.]+)/.exec(ua)||0)[1])}else if(name!="IE"&&layout=="Trident"&&(data=/\brv:([\d.]+)/.exec(ua))){if(name){description.push("identifying as "+name+(version?" "+version:""))}name="IE";version=data[1]}if(useFeatures){if(isHostType(context,"global")){if(java){data=java.lang.System;arch=data.getProperty("os.arch");os=os||data.getProperty("os.name")+" "+data.getProperty("os.version")}if(rhino){try{version=context.require("ringo/engine").version.join(".");name="RingoJS"}catch(e){if((data=context.system)&&data.global.system==context.system){name="Narwhal";os||(os=data[0].os||null)}}if(!name){name="Rhino"}}else if(typeof context.process=="object"&&!context.process.browser&&(data=context.process)){if(typeof data.versions=="object"){if(typeof data.versions.electron=="string"){description.push("Node "+data.versions.node);name="Electron";version=data.versions.electron}else if(typeof data.versions.nw=="string"){description.push("Chromium "+version,"Node "+data.versions.node);name="NW.js";version=data.versions.nw}}if(!name){name="Node.js";arch=data.arch;os=data.platform;version=/[\d.]+/.exec(data.version);version=version?version[0]:null}}}else if(getClassOf(data=context.runtime)==airRuntimeClass){name="Adobe AIR";os=data.flash.system.Capabilities.os}else if(getClassOf(data=context.phantom)==phantomClass){name="PhantomJS";version=(data=data.version||null)&&data.major+"."+data.minor+"."+data.patch}else if(typeof doc.documentMode=="number"&&(data=/\bTrident\/(\d+)/i.exec(ua))){version=[version,doc.documentMode];if((data=+data[1]+4)!=version[1]){description.push("IE "+version[1]+" mode");layout&&(layout[1]="");version[1]=data}version=name=="IE"?String(version[1].toFixed(1)):version[0]}else if(typeof doc.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(name)){description.push("masking as "+name+" "+version);name="IE";version="11.0";layout=["Trident"];os="Windows"}os=os&&format(os)}if(version&&(data=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(version)||/(?:alpha|beta)(?: ?\d)?/i.exec(ua+";"+(useFeatures&&nav.appMinorVersion))||/\bMinefield\b/i.test(ua)&&"a")){prerelease=/b/i.test(data)?"beta":"alpha";version=version.replace(RegExp(data+"\\+?$"),"")+(prerelease=="beta"?beta:alpha)+(/\d+\+?/.exec(data)||"")}if(name=="Fennec"||name=="Firefox"&&/\b(?:Android|Firefox OS)\b/.test(os)){name="Firefox Mobile"}else if(name=="Maxthon"&&version){version=version.replace(/\.[\d.]+/,".x")}else if(/\bXbox\b/i.test(product)){if(product=="Xbox 360"){os=null}if(product=="Xbox 360"&&/\bIEMobile\b/.test(ua)){description.unshift("mobile mode")}}else if((/^(?:Chrome|IE|Opera)$/.test(name)||name&&!product&&!/Browser|Mobi/.test(name))&&(os=="Windows CE"||/Mobi/i.test(ua))){name+=" Mobile"}else if(name=="IE"&&useFeatures){try{if(context.external===null){description.unshift("platform preview")}}catch(e){description.unshift("embedded")}}else if((/\bBlackBerry\b/.test(product)||/\bBB10\b/.test(ua))&&(data=(RegExp(product.replace(/ +/g," *")+"/([.\\d]+)","i").exec(ua)||0)[1]||version)){data=[data,/BB10/.test(ua)];os=(data[1]?(product=null,manufacturer="BlackBerry"):"Device Software")+" "+data[0];version=null}else if(this!=forOwn&&product!="Wii"&&(useFeatures&&opera||/Opera/.test(name)&&/\b(?:MSIE|Firefox)\b/i.test(ua)||name=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(os)||name=="IE"&&(os&&!/^Win/.test(os)&&version>5.5||/\bWindows XP\b/.test(os)&&version>8||version==8&&!/\bTrident\b/.test(ua)))&&!reOpera.test(data=parse.call(forOwn,ua.replace(reOpera,"")+";"))&&data.name){data="ing as "+data.name+((data=data.version)?" "+data:"");if(reOpera.test(name)){if(/\bIE\b/.test(data)&&os=="Mac OS"){os=null}data="identify"+data}else{data="mask"+data;if(operaClass){name=format(operaClass.replace(/([a-z])([A-Z])/g,"$1 $2"))}else{name="Opera"}if(/\bIE\b/.test(data)){os=null}if(!useFeatures){version=null}}layout=["Presto"];description.push(data)}if(data=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(ua)||0)[1]){data=[parseFloat(data.replace(/\.(\d)$/,".0$1")),data];if(name=="Safari"&&data[1].slice(-1)=="+"){name="WebKit Nightly";prerelease="alpha";version=data[1].slice(0,-1)}else if(version==data[1]||version==(data[2]=(/\bSafari\/([\d.]+\+?)/i.exec(ua)||0)[1])){version=null}data[1]=(/\bChrome\/([\d.]+)/i.exec(ua)||0)[1];if(data[0]==537.36&&data[2]==537.36&&parseFloat(data[1])>=28&&layout=="WebKit"){layout=["Blink"]}if(!useFeatures||!likeChrome&&!data[1]){layout&&(layout[1]="like Safari");data=(data=data[0],data<400?1:data<500?2:data<526?3:data<533?4:data<534?"4+":data<535?5:data<537?6:data<538?7:data<601?8:"8")}else{layout&&(layout[1]="like Chrome");data=data[1]||(data=data[0],data<530?1:data<532?2:data<532.05?3:data<533?4:data<534.03?5:data<534.07?6:data<534.1?7:data<534.13?8:data<534.16?9:data<534.24?10:data<534.3?11:data<535.01?12:data<535.02?"13+":data<535.07?15:data<535.11?16:data<535.19?17:data<536.05?18:data<536.1?19:data<537.01?20:data<537.11?"21+":data<537.13?23:data<537.18?24:data<537.24?25:data<537.36?26:layout!="Blink"?"27":"28")}layout&&(layout[1]+=" "+(data+=typeof data=="number"?".x":/[.+]/.test(data)?"":"+"));if(name=="Safari"&&(!version||parseInt(version)>45)){version=data}}if(name=="Opera"&&(data=/\bzbov|zvav$/.exec(os))){name+=" ";description.unshift("desktop mode");if(data=="zvav"){name+="Mini";version=null}else{name+="Mobile"}os=os.replace(RegExp(" *"+data+"$"),"")}else if(name=="Safari"&&/\bChrome\b/.exec(layout&&layout[1])){description.unshift("desktop mode");name="Chrome Mobile";version=null;if(/\bOS X\b/.test(os)){manufacturer="Apple";os="iOS 4.3+"}else{os=null}}if(version&&version.indexOf(data=/[\d.]+$/.exec(os))==0&&ua.indexOf("/"+data+"-")>-1){os=trim(os.replace(data,""))}if(layout&&!/\b(?:Avant|Nook)\b/.test(name)&&(/Browser|Lunascape|Maxthon/.test(name)||name!="Safari"&&/^iOS/.test(os)&&/\bSafari\b/.test(layout[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(name)&&layout[1])){(data=layout[layout.length-1])&&description.push(data)}if(description.length){description=["("+description.join("; ")+")"]}if(manufacturer&&product&&product.indexOf(manufacturer)<0){description.push("on "+manufacturer)}if(product){description.push((/^on /.test(description[description.length-1])?"":"on ")+product)}if(os){data=/ ([\d.+]+)$/.exec(os);isSpecialCasedOS=data&&os.charAt(os.length-data[0].length-1)=="/";os={architecture:32,family:data&&!isSpecialCasedOS?os.replace(data[0],""):os,version:data?data[1]:null,toString:function(){var version=this.version;return this.family+(version&&!isSpecialCasedOS?" "+version:"")+(this.architecture==64?" 64-bit":"")}}}if((data=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(arch))&&!/\bi686\b/i.test(arch)){if(os){os.architecture=64;os.family=os.family.replace(RegExp(" *"+data),"")}if(name&&(/\bWOW64\b/i.test(ua)||useFeatures&&/\w(?:86|32)$/.test(nav.cpuClass||nav.platform)&&!/\bWin64; x64\b/i.test(ua))){description.unshift("32-bit")}}else if(os&&/^OS X/.test(os.family)&&name=="Chrome"&&parseFloat(version)>=39){os.architecture=64}ua||(ua=null);var platform={};platform.description=ua;platform.layout=layout&&layout[0];platform.manufacturer=manufacturer;platform.name=name;platform.prerelease=prerelease;platform.product=product;platform.ua=ua;platform.version=name&&version;platform.os=os||{architecture:null,family:null,version:null,toString:function(){return"null"}};platform.parse=parse;platform.toString=toStringPlatform;if(platform.version){description.unshift(version)}if(platform.name){description.unshift(name)}if(os&&name&&!(os==String(os).split(" ")[0]&&(os==name.split(" ")[0]||product))){description.push(product?"("+os+")":"on "+os)}if(description.length){platform.description=description.join(" ")}return platform}var platform=parse();if(true){root.platform=platform;!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return platform}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}}).call(this)}).call(this,__webpack_require__(51)(module),__webpack_require__(52))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var isArray=exports.isArray=function isArray(arr){return Array.isArray(arr)};var isPlainObject=exports.isPlainObject=function isPlainObject(obj){var isObject=(typeof obj==="undefined"?"undefined":_typeof(obj))==="object"&&obj!==null&&!isArray(obj);if(!isObject||obj.toString&&obj.toString()!=="[object Object]")return false;var proto=Object.getPrototypeOf(obj);if(proto===null){return true}var Ctor=Object.prototype.hasOwnProperty.call(proto,"constructor")&&proto.constructor;return typeof Ctor==="function"&&Ctor instanceof Ctor&&Function.prototype.toString.call(Ctor)===Function.prototype.toString.call(Object)};var findKey=exports.findKey=function findKey(obj,fn){if(!isPlainObject(obj)&&!isArray(obj))return;var keys=Object.keys(obj);return keys.find((function(key){return fn(obj[key])}))};var compact=exports.compact=function compact(arr){return arr.filter(Boolean)};var flattenOnce=function flattenOnce(arr){var recurse=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return arr.reduce((function(acc,val){if(isArray(val)&&recurse)return acc.concat(flattenOnce(val,false));acc.push(val);return acc}),[])};var flatten=exports.flatten=function flatten(arr){if(!isArray(arr))throw new Error("flatten expects an array");return flattenOnce(arr)};var map=exports.map=function map(itr,fn){if(isArray(itr))return itr.map(fn);var results=[];var keys=Object.keys(itr);var len=keys.length;for(var i=0;i<len;i+=1){var key=keys[i];results.push(fn(itr[key],key))}return results}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(376)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(3);var _react2=_interopRequireDefault(_react);var _invariant=__webpack_require__(220);var _invariant2=_interopRequireDefault(_invariant);var _combokeys=__webpack_require__(377);var _combokeys2=_interopRequireDefault(_combokeys);var _propTypes=__webpack_require__(214);var _propTypes2=_interopRequireDefault(_propTypes);var _helpers=__webpack_require__(279);var _helpers2=_interopRequireDefault(_helpers);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _class=function(_React$Component){_inherits(_class,_React$Component);function _class(){var _ref;var _temp,_this,_ret;_classCallCheck(this,_class);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=_class.__proto__||Object.getPrototypeOf(_class)).call.apply(_ref,[this].concat(args))),_this),_this._combokeys=null,_this._lastEvent=null,_this._bindShortcuts=function(shortcutsArr){var element=_this._getElementToBind();element.setAttribute("tabindex",_this.props.tabIndex);_this._combokeys=new _combokeys2.default(element,{storeInstancesGlobally:false});_this._decorateCombokeys();_this._combokeys.bind(shortcutsArr,_this._handleShortcuts,_this.props.eventType);if(_this.props.global){element.addEventListener("shortcuts:global",_this._customGlobalHandler)}},_this._customGlobalHandler=function(e){var _e$detail=e.detail,character=_e$detail.character,modifiers=_e$detail.modifiers,event=_e$detail.event;var targetNode=null;if(_this.props.targetNodeSelector){targetNode=document.querySelector(_this.props.targetNodeSelector)}if(e.target!==_this._domNode&&e.target!==targetNode){_this._combokeys.handleKey(character,modifiers,event,true)}},_this._decorateCombokeys=function(){var element=_this._getElementToBind();var originalHandleKey=_this._combokeys.handleKey.bind(_this._combokeys);_this._combokeys.stopCallback=function(event,domElement,combo){var isInputLikeElement=domElement.tagName==="INPUT"||domElement.tagName==="SELECT"||domElement.tagName==="TEXTAREA"||domElement.contentEditable&&domElement.contentEditable==="true";var isReturnString=void 0;if(event.key){isReturnString=event.key.length===1}else{isReturnString=Boolean(_helpers2.default.getCharacter(event))}if(isInputLikeElement&&isReturnString&&!_this.props.alwaysFireHandler){return true}return false};_this._combokeys.handleKey=function(character,modifiers,event,isGlobalHandler){if(_this._lastEvent&&event.timeStamp===_this._lastEvent.timeStamp&&event.type===_this._lastEvent.type){return}_this._lastEvent=event;var isolateOwner=false;if(_this.props.isolate&&!event.__isolateShortcuts){event.__isolateShortcuts=true;isolateOwner=true}if(!isGlobalHandler){element.dispatchEvent(new CustomEvent("shortcuts:global",{detail:{character:character,modifiers:modifiers,event:event},bubbles:true,cancelable:true}))}if(!event.__isolateShortcuts){if(_this.props.preventDefault){event.preventDefault()}if(_this.props.stopPropagation&&!isGlobalHandler){event.stopPropagation()}originalHandleKey(character,modifiers,event);return}if(_this.props.global||isolateOwner){originalHandleKey(character,modifiers,event)}}},_this._getElementToBind=function(){var element=null;if(_this.props.targetNodeSelector){element=document.querySelector(_this.props.targetNodeSelector);(0,_invariant2.default)(element,"Node selector '"+_this.props.targetNodeSelector+"'  was not found.")}else{element=_this._domNode}return element},_this._unbindShortcuts=function(){if(_this._combokeys){_this._combokeys.detach();_this._combokeys.reset()}},_this._onUpdate=function(){var shortcutsArr=_this.props.name&&_this.context.shortcuts.getShortcuts(_this.props.name);_this._unbindShortcuts();_this._bindShortcuts(shortcutsArr||[])},_this._handleShortcuts=function(event,keyName){if(_this.props.name){var shortcutName=_this.context.shortcuts.findShortcutName(keyName,_this.props.name);if(_this.props.handler){_this.props.handler(shortcutName,event)}}},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(_class,[{key:"componentDidMount",value:function componentDidMount(){this._onUpdate();if(this.props.name){this.context.shortcuts.addUpdateListener(this._onUpdate)}}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._unbindShortcuts();if(this.props.name){this.context.shortcuts.removeUpdateListener(this._onUpdate)}if(this.props.global){var element=this._getElementToBind();element.removeEventListener("shortcuts:global",this._customGlobalHandler)}}},{key:"render",value:function render(){var _this2=this;return _react2.default.createElement("div",{ref:function ref(node){_this2._domNode=node},tabIndex:this.props.tabIndex,className:this.props.className},this.props.children)}}]);return _class}(_react2.default.Component);_class.displayName="Shortcuts";_class.contextTypes={shortcuts:_propTypes2.default.object.isRequired};_class.propTypes={children:_propTypes2.default.node,handler:_propTypes2.default.func,name:_propTypes2.default.string,tabIndex:_propTypes2.default.number,className:_propTypes2.default.string,eventType:_propTypes2.default.string,stopPropagation:_propTypes2.default.bool,preventDefault:_propTypes2.default.bool,targetNodeSelector:_propTypes2.default.string,global:_propTypes2.default.bool,isolate:_propTypes2.default.bool,alwaysFireHandler:_propTypes2.default.bool};_class.defaultProps={tabIndex:-1,className:null,eventType:null,stopPropagation:true,preventDefault:false,targetNodeSelector:null,global:false,isolate:false,alwaysFireHandler:false};exports.default=_class;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";module.exports=function(element,options){var self=this;var Combokeys=self.constructor;self.options=Object.assign({storeInstancesGlobally:true},options||{});self.callbacks={};self.directMap={};self.sequenceLevels={};self.resetTimer=null;self.ignoreNextKeyup=false;self.ignoreNextKeypress=false;self.nextExpectedAction=false;self.element=element;self.addEvents();if(self.options.storeInstancesGlobally){Combokeys.instances.push(self)}return self};module.exports.prototype.bind=__webpack_require__(378);module.exports.prototype.bindMultiple=__webpack_require__(379);module.exports.prototype.unbind=__webpack_require__(380);module.exports.prototype.trigger=__webpack_require__(381);module.exports.prototype.reset=__webpack_require__(382);module.exports.prototype.stopCallback=__webpack_require__(383);module.exports.prototype.handleKey=__webpack_require__(384);module.exports.prototype.addEvents=__webpack_require__(385);module.exports.prototype.bindSingle=__webpack_require__(389);module.exports.prototype.getKeyInfo=__webpack_require__(390);module.exports.prototype.pickBestAction=__webpack_require__(394);module.exports.prototype.getReverseMap=__webpack_require__(395);module.exports.prototype.getMatches=__webpack_require__(396);module.exports.prototype.resetSequences=__webpack_require__(398);module.exports.prototype.fireCallback=__webpack_require__(399);module.exports.prototype.bindSequence=__webpack_require__(402);module.exports.prototype.resetSequenceTimer=__webpack_require__(403);module.exports.prototype.detach=__webpack_require__(404);module.exports.instances=[];module.exports.reset=__webpack_require__(405);module.exports.REVERSE_MAP=null},function(module,exports,__webpack_require__){"use strict";module.exports=function(keys,callback,action){var self=this;keys=keys instanceof Array?keys:[keys];self.bindMultiple(keys,callback,action);return self}},function(module,exports,__webpack_require__){"use strict";module.exports=function(combinations,callback,action){var self=this;for(var j=0;j<combinations.length;++j){self.bindSingle(combinations[j],callback,action)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(keys,action){var self=this;return self.bind(keys,(function(){}),action)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(keys,action){var self=this;if(self.directMap[keys+":"+action]){self.directMap[keys+":"+action]({},keys)}return this}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var self=this;self.callbacks={};self.directMap={};return this}},function(module,exports,__webpack_require__){"use strict";module.exports=function(e,element){if((" "+element.className+" ").indexOf(" combokeys ")>-1){return false}var tagName=element.tagName.toLowerCase();return tagName==="input"||tagName==="select"||tagName==="textarea"||element.isContentEditable}},function(module,exports,__webpack_require__){"use strict";module.exports=function(character,modifiers,e){var self=this;var callbacks;var j;var doNotReset={};var maxLevel=0;var processedSequenceCallback=false;var isModifier;var ignoreThisKeypress;callbacks=self.getMatches(character,modifiers,e);for(j=0;j<callbacks.length;++j){if(callbacks[j].seq){maxLevel=Math.max(maxLevel,callbacks[j].level)}}for(j=0;j<callbacks.length;++j){if(callbacks[j].seq){if(callbacks[j].level!==maxLevel){continue}processedSequenceCallback=true;doNotReset[callbacks[j].seq]=1;self.fireCallback(callbacks[j].callback,e,callbacks[j].combo,callbacks[j].seq);continue}if(!processedSequenceCallback){self.fireCallback(callbacks[j].callback,e,callbacks[j].combo)}}ignoreThisKeypress=e.type==="keypress"&&self.ignoreNextKeypress;isModifier=__webpack_require__(245);if(e.type===self.nextExpectedAction&&!isModifier(character)&&!ignoreThisKeypress){self.resetSequences(doNotReset)}self.ignoreNextKeypress=processedSequenceCallback&&e.type==="keydown"}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var self=this;var on=__webpack_require__(280);var element=self.element;self.eventHandler=__webpack_require__(386).bind(self);on(element,"keypress",self.eventHandler);on(element,"keydown",self.eventHandler);on(element,"keyup",self.eventHandler)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(e){var self=this;var characterFromEvent;var eventModifiers;if(typeof e.which!=="number"){e.which=e.keyCode}characterFromEvent=__webpack_require__(281);var character=characterFromEvent(e);if(character===undefined){return}if(e.type==="keyup"&&self.ignoreNextKeyup===character){self.ignoreNextKeyup=false;return}eventModifiers=__webpack_require__(388);self.handleKey(character,eventModifiers(e),e)}},function(module,exports,__webpack_require__){"use strict";module.exports={106:"*",107:"plus",109:"minus",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}},function(module,exports,__webpack_require__){"use strict";module.exports=function(e){var modifiers=[];if(e.shiftKey){modifiers.push("shift")}if(e.altKey){modifiers.push("alt")}if(e.ctrlKey){modifiers.push("ctrl")}if(e.metaKey){modifiers.push("meta")}return modifiers}},function(module,exports,__webpack_require__){"use strict";module.exports=function(combination,callback,action,sequenceName,level){var self=this;self.directMap[combination+":"+action]=callback;combination=combination.replace(/\s+/g," ");var sequence=combination.split(" ");var info;if(sequence.length>1){self.bindSequence(combination,sequence,callback,action);return}info=self.getKeyInfo(combination,action);self.callbacks[info.key]=self.callbacks[info.key]||[];self.getMatches(info.key,info.modifiers,{type:info.action},sequenceName,combination,level);self.callbacks[info.key][sequenceName?"unshift":"push"]({callback:callback,modifiers:info.modifiers,action:info.action,seq:sequenceName,level:level,combo:combination})}},function(module,exports,__webpack_require__){"use strict";module.exports=function(combination,action){var self=this;var keysFromString;var keys;var key;var j;var modifiers=[];var SPECIAL_ALIASES;var SHIFT_MAP;var isModifier;keysFromString=__webpack_require__(391);keys=keysFromString(combination);SPECIAL_ALIASES=__webpack_require__(392);SHIFT_MAP=__webpack_require__(393);isModifier=__webpack_require__(245);for(j=0;j<keys.length;++j){key=keys[j];if(SPECIAL_ALIASES[key]){key=SPECIAL_ALIASES[key]}if(action&&action!=="keypress"&&SHIFT_MAP[key]){key=SHIFT_MAP[key];modifiers.push("shift")}if(isModifier(key)){modifiers.push(key)}}action=self.pickBestAction(key,modifiers,action);return{key:key,modifiers:modifiers,action:action}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(combination){if(combination==="+"){return["+"]}return combination.split("+")}},function(module,exports,__webpack_require__){"use strict";module.exports={option:"alt",command:"meta",return:"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"}},function(module,exports,__webpack_require__){"use strict";module.exports={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"}},function(module,exports,__webpack_require__){"use strict";module.exports=function(key,modifiers,action){var self=this;if(!action){action=self.getReverseMap()[key]?"keydown":"keypress"}if(action==="keypress"&&modifiers.length){action="keydown"}return action}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var self=this;var constructor=self.constructor;var SPECIAL_KEYS_MAP;if(!constructor.REVERSE_MAP){constructor.REVERSE_MAP={};SPECIAL_KEYS_MAP=__webpack_require__(282);for(var key in SPECIAL_KEYS_MAP){if(key>95&&key<112){continue}if(SPECIAL_KEYS_MAP.hasOwnProperty(key)){constructor.REVERSE_MAP[SPECIAL_KEYS_MAP[key]]=key}}}return constructor.REVERSE_MAP}},function(module,exports,__webpack_require__){"use strict";module.exports=function(character,modifiers,e,sequenceName,combination,level){var self=this;var j;var callback;var matches=[];var action=e.type;var isModifier;var modifiersMatch;if(action==="keypress"&&!(e.code&&e.code.slice(0,5)==="Arrow")){var anyCharCallbacks=self.callbacks["any-character"]||[];anyCharCallbacks.forEach((function(callback){matches.push(callback)}))}if(!self.callbacks[character]){return matches}isModifier=__webpack_require__(245);if(action==="keyup"&&isModifier(character)){modifiers=[character]}for(j=0;j<self.callbacks[character].length;++j){callback=self.callbacks[character][j];if(!sequenceName&&callback.seq&&self.sequenceLevels[callback.seq]!==callback.level){continue}if(action!==callback.action){continue}modifiersMatch=__webpack_require__(397);if(action==="keypress"&&!e.metaKey&&!e.ctrlKey||modifiersMatch(modifiers,callback.modifiers)){var deleteCombo=!sequenceName&&callback.combo===combination;var deleteSequence=sequenceName&&callback.seq===sequenceName&&callback.level===level;if(deleteCombo||deleteSequence){self.callbacks[character].splice(j,1)}matches.push(callback)}}return matches}},function(module,exports,__webpack_require__){"use strict";module.exports=function(modifiers1,modifiers2){return modifiers1.sort().join(",")===modifiers2.sort().join(",")}},function(module,exports,__webpack_require__){"use strict";module.exports=function(doNotReset){var self=this;doNotReset=doNotReset||{};var activeSequences=false;var key;for(key in self.sequenceLevels){if(doNotReset[key]){activeSequences=true;continue}self.sequenceLevels[key]=0}if(!activeSequences){self.nextExpectedAction=false}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(callback,e,combo,sequence){var self=this;var preventDefault;var stopPropagation;if(self.stopCallback(e,e.target||e.srcElement,combo,sequence)){return}if(callback(e,combo)===false){preventDefault=__webpack_require__(400);preventDefault(e);stopPropagation=__webpack_require__(401);stopPropagation(e)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(e){if(e.preventDefault){e.preventDefault();return}e.returnValue=false}},function(module,exports,__webpack_require__){"use strict";module.exports=function(e){if(e.stopPropagation){e.stopPropagation();return}e.cancelBubble=true}},function(module,exports,__webpack_require__){"use strict";module.exports=function(combo,keys,callback,action){var self=this;self.sequenceLevels[combo]=0;function increaseSequence(nextAction){return function(){self.nextExpectedAction=nextAction;++self.sequenceLevels[combo];self.resetSequenceTimer()}}function callbackAndReset(e){var characterFromEvent;self.fireCallback(callback,e,combo);if(action!=="keyup"){characterFromEvent=__webpack_require__(281);self.ignoreNextKeyup=characterFromEvent(e)}setTimeout((function(){self.resetSequences()}),10)}for(var j=0;j<keys.length;++j){var isFinal=j+1===keys.length;var wrappedCallback=isFinal?callbackAndReset:increaseSequence(action||self.getKeyInfo(keys[j+1]).action);self.bindSingle(keys[j],wrappedCallback,action,combo,j)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var self=this;clearTimeout(self.resetTimer);self.resetTimer=setTimeout((function(){self.resetSequences()}),1e3)}},function(module,exports,__webpack_require__){var off=__webpack_require__(280).off;module.exports=function(){var self=this;var element=self.element;off(element,"keypress",self.eventHandler);off(element,"keydown",self.eventHandler);off(element,"keyup",self.eventHandler)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var self=this;self.instances.forEach((function(combokeys){combokeys.reset()}))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){(function(root,factory){if(true){module.exports=factory()}else{}})(typeof self!=="undefined"?self:this,(function(){var rison={};rison.uri_ok={"~":true,"!":true,"*":true,"(":true,")":true,"-":true,_:true,".":true,",":true,":":true,"@":true,$:true,"'":true,"/":true};(function(){var l=[];for(var hi=0;hi<16;hi++){for(var lo=0;lo<16;lo++){if(hi+lo===0)continue;var c=String.fromCharCode(hi*16+lo);if(!/\w|[-_./~]/.test(c))l.push("\\u00"+hi.toString(16)+lo.toString(16))}}rison.not_idchar=l.join("")})();rison.not_idchar=" '!:(),*@$";rison.not_idstart="-0123456789";(function(){var idrx="[^"+rison.not_idstart+rison.not_idchar+"][^"+rison.not_idchar+"]*";rison.id_ok=new RegExp("^"+idrx+"$");rison.next_id=new RegExp(idrx,"g")})();rison.quote=function(x){if(/^[-A-Za-z0-9~!*()_.',:@$/]*$/.test(x))return x;return encodeURIComponent(x).replace(/%2C/g,",").replace(/%3A/g,":").replace(/%40/g,"@").replace(/%24/g,"$").replace(/%2F/g,"/").replace(/%20/g,"+")};(function(){var sq={"'":true,"!":true},enc=function(v){if(v&&typeof v.toJSON==="function")v=v.toJSON();var fn=s[typeof v];if(fn)return fn(v)},s={array:function(x){var a=["!("],b,i,l=x.length,v;for(i=0;i<l;i+=1){v=enc(x[i]);if(typeof v=="string"){if(b){a[a.length]=","}a[a.length]=v;b=true}}a[a.length]=")";return a.join("")},boolean:function(x){if(x)return"!t";return"!f"},null:function(){return"!n"},number:function(x){if(!isFinite(x))return"!n";return String(x).replace(/\+/,"")},object:function(x){if(x){if(x instanceof Array){return s.array(x)}if(typeof x.__prototype__==="object"&&typeof x.__prototype__.encode_rison!=="undefined")return x.encode_rison();var a=["("],b,i,v,ki,ks=[];for(i in x)ks[ks.length]=i;ks.sort();for(ki=0;ki<ks.length;ki++){i=ks[ki];v=enc(x[i]);if(typeof v=="string"){if(b){a[a.length]=","}a.push(s.string(i),":",v);b=true}}a[a.length]=")";return a.join("")}return"!n"},string:function(x){if(x==="")return"''";if(rison.id_ok.test(x))return x;x=x.replace(/(['!])/g,(function(a,b){if(sq[b])return"!"+b;return b}));return"'"+x+"'"},undefined:function(){return}};rison.encode=function(v){return enc(v)};rison.encode_object=function(v){if(typeof v!="object"||v===null||v instanceof Array)throw new Error("rison.encode_object expects an object argument");var r=s[typeof v](v);return r.substring(1,r.length-1)};rison.encode_array=function(v){if(!(v instanceof Array))throw new Error("rison.encode_array expects an array argument");var r=s[typeof v](v);return r.substring(2,r.length-1)};rison.encode_uri=function(v){return rison.quote(s[typeof v](v))}})();rison.decode=function(r){var errcb=function(e){throw Error("rison decoder error: "+e)};if(typeof r!=="string")return errcb("decode input must be a string");var p=new rison.parser(errcb);return p.parse(r)};rison.decode_object=function(r){return rison.decode("("+r+")")};rison.decode_array=function(r){return rison.decode("!("+r+")")};rison.parser=function(errcb){this.errorHandler=errcb};rison.parser.WHITESPACE="";rison.parser.prototype.setOptions=function(options){if(options["errorHandler"])this.errorHandler=options.errorHandler};rison.parser.prototype.parse=function(str){this.string=str;this.index=0;this.message=null;var value=this.readValue();if(!this.message&&this.next())value=this.error("unable to parse string as rison: '"+rison.encode(str)+"'");if(this.message&&this.errorHandler)this.errorHandler(this.message,this.index);return value};rison.parser.prototype.error=function(message){if(typeof console!=="undefined")console.log("rison parser error: ",message);this.message=message;return undefined};rison.parser.prototype.readValue=function(){var c=this.next();var fn=c&&this.table[c];if(fn)return fn.apply(this);var s=this.string;var i=this.index-1;rison.next_id.lastIndex=i;var m=rison.next_id.exec(s);if(m.length>0){var id=m[0];this.index=i+id.length;return id}if(c)return this.error("invalid character: '"+c+"'");return this.error("empty expression")};rison.parser.parse_array=function(parser){var ar=[];var c;while((c=parser.next())!==")"){if(!c)return parser.error("unmatched '!('");if(ar.length){if(c!==",")parser.error("missing ','")}else if(c===","){return parser.error("extra ','")}else--parser.index;var n=parser.readValue();if(typeof n=="undefined")return undefined;ar.push(n)}return ar};rison.parser.bangs={t:true,f:false,n:null,"(":rison.parser.parse_array};rison.parser.prototype.table={"!":function(){var s=this.string;var c=s.charAt(this.index++);if(!c)return this.error('"!" at end of input');var x=rison.parser.bangs[c];if(typeof x=="function"){return x.call(null,this)}else if(typeof x=="undefined"){return this.error('unknown literal: "!'+c+'"')}return x},"(":function(){var o={};var c;var count=0;while((c=this.next())!==")"){if(count){if(c!==",")this.error("missing ','")}else if(c===","){return this.error("extra ','")}else--this.index;var k=this.readValue();if(typeof k==="undefined")return undefined;if(this.next()!==":")return this.error("missing ':'");var v=this.readValue();if(typeof v==="undefined")return undefined;o[k]=v;count++}return o},"'":function(){var s=this.string;var i=this.index;var start=i;var segments=[];var c;while((c=s.charAt(i++))!=="'"){if(!c)return this.error('unmatched "\'"');if(c==="!"){if(start<i-1)segments.push(s.slice(start,i-1));c=s.charAt(i++);if("!'".indexOf(c)>=0){segments.push(c)}else{return this.error('invalid string escape: "!'+c+'"')}start=i}}if(start<i-1)segments.push(s.slice(start,i-1));this.index=i;return segments.length===1?segments[0]:segments.join("")},"-":function(){var s=this.string;var i=this.index;var start=i-1;var state="int";var permittedSigns="-";var transitions={"int+.":"frac","int+e":"exp","frac+e":"exp"};do{var c=s.charAt(i++);if(!c)break;if("0"<=c&&c<="9")continue;if(permittedSigns.indexOf(c)>=0){permittedSigns="";continue}state=transitions[state+"+"+c.toLowerCase()];if(state==="exp")permittedSigns="-"}while(state);this.index=--i;s=s.slice(start,i);if(s==="-")return this.error("invalid number");return Number(s)}};(function(table){for(var i=0;i<=9;i++)table[String(i)]=table["-"]})(rison.parser.prototype.table);rison.parser.prototype.next=function(){var c;var s=this.string;var i=this.index;do{if(i===s.length)return undefined;c=s.charAt(i++)}while(rison.parser.WHITESPACE.indexOf(c)>=0);this.index=i;return c};return rison}))},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;function createThunkMiddleware(extraArgument){return function(_ref){var dispatch=_ref.dispatch,getState=_ref.getState;return function(next){return function(action){if(typeof action==="function"){return action(dispatch,getState,extraArgument)}return next(action)}}}}var thunk=createThunkMiddleware();thunk.withExtraArgument=createThunkMiddleware;exports["default"]=thunk},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var initialState=typeof args[0]!=="function"&&args.shift();var reducers=args;if(typeof initialState==="undefined"){throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.")}return function(prevState,value){for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2]}var prevStateIsUndefined=typeof prevState==="undefined";var valueIsUndefined=typeof value==="undefined";if(prevStateIsUndefined&&valueIsUndefined&&initialState){return initialState}return reducers.reduce((function(newState,reducer,index){if(typeof reducer==="undefined"){throw new TypeError("An undefined reducer was passed in at index "+index)}return reducer.apply(undefined,[newState,value].concat(args))}),prevStateIsUndefined&&!valueIsUndefined&&initialState?initialState:prevState)}};module.exports=exports["default"]},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(454);case"v7light":return __webpack_require__(456);case"v8dark":return __webpack_require__(458);case"v8light":return __webpack_require__(460)}},function(module,exports,__webpack_require__){var api=__webpack_require__(211);var content=__webpack_require__(455);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(212);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n  This file contains all the global scope garbage that should be removed\n  when the UI framework implements everything we need\n*/\n.canvasContainerWrapper .euiAccordion__childWrapper {\n  overflow-x: hidden; }\n\n.canvasContainerWrapper .clickable {\n  cursor: pointer; }\n\n.canvasContainerWrapper .canvasPalettePicker__swatchesPopover {\n  display: block; }\n  .canvasContainerWrapper .canvasPalettePicker__swatchesPopover .canvasPalettePicker__swatchesPopoverAnchor {\n    display: block; }\n\n.canvasContainerWrapper .euiImageFullScreen {\n  min-width: 100px; }\n\n@media only screen and (min-width: 768px) and (max-width: 991px) {\n  .canvasModal--fixedSize {\n    width: 75vw;\n    height: 75vh;\n    max-height: 680px; } }\n\n@media only screen and (min-width: 992px) and (max-width: 1199px) {\n  .canvasModal--fixedSize {\n    width: 75vw;\n    height: 75vh;\n    max-height: 680px; } }\n\n@media only screen and (min-width: 1200px) {\n  .canvasModal--fixedSize {\n    width: 75vw;\n    height: 75vh;\n    max-height: 680px; } }\n\n/*\n  Canvas global SASS varialbes\n*/\n.canvas.canvasContainerWrapper {\n  display: flex;\n  flex-grow: 1; }\n\n.canvas.canvasContainer {\n  display: flex;\n  flex-grow: 1;\n  background-color: #1a1b20; }\n\n.canvasContainer--loading {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translateY(-50%);\n  text-align: center; }\n\n.canvasCheckered {\n  background-color: #FFF;\n  background-image: linear-gradient(45deg, #343741 25%, transparent 25%), linear-gradient(-45deg, #343741 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #343741 75%), linear-gradient(-45deg, transparent 75%, #343741 75%);\n  background-size: 8px 8px;\n  position: relative; }\n\n.canvasTextArea__code {\n  scrollbar-width: thin;\n  font-size: 14px;\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace;\n  width: 100%;\n  max-width: 100%; }\n  .canvasTextArea__code::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasTextArea__code::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasTextArea__code::-webkit-scrollbar-corner, .canvasTextArea__code::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasContextMenu--topBorder {\n  border-top: 1px solid #343741; }\n\n#canvas-app {\n  overflow-y: hidden; }\n  #canvas-app .window-error {\n    position: absolute;\n    bottom: 10px;\n    right: 10px;\n    background-color: #F66;\n    color: #FFF;\n    display: block;\n    z-index: 2000;\n    padding: 10px;\n    max-width: 500px; }\n    #canvas-app .window-error a {\n      color: #FFF;\n      font-weight: bold; }\n\n.canvasHomeApp {\n  width: 100%; }\n  .canvasHomeApp .canvasHomeApp__content {\n    width: 100%; }\n  .canvasHomeApp .canvasHomeApp__modalHeader {\n    padding-right: 24px; }\n  .canvasHomeApp .canvasHomeApp__modalHeader,\n  .canvasHomeApp .canvasHomeApp__modalBody {\n    width: auto; }\n  @media only screen and (max-width: 574px) {\n    .canvasHomeApp .euiModalBody__overflow {\n      max-height: 80vh; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .canvasHomeApp .euiModalBody__overflow {\n      max-height: 80vh; } }\n\n.canvasLayout {\n  display: flex;\n  background: #1a1b20;\n  flex-grow: 1;\n  overflow: hidden; }\n\n.canvasLayout__rows {\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  max-height: 100vh;\n  max-width: 100%; }\n\n.canvasLayout__cols {\n  display: flex;\n  align-items: stretch;\n  flex-grow: 1; }\n\n.canvasLayout__stage {\n  flex-grow: 1;\n  flex-basis: auto;\n  display: flex;\n  flex-direction: column; }\n\n.canvasLayout__stageHeader {\n  flex-grow: 0;\n  flex-basis: auto;\n  padding: 1px 16px 0;\n  font-size: 14px;\n  border-bottom: 1px solid #343741;\n  background: #25262E;\n  -webkit-user-select: none;\n          user-select: none; }\n\n.canvasLayout__stageHeaderInner {\n  height: 48px; }\n\n.canvasLayout__stageContent {\n  flex-grow: 1;\n  flex-basis: auto;\n  position: relative; }\n\n.canvasLayout__stageContentOverflow {\n  scrollbar-width: thin;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: auto;\n  display: flex;\n  align-items: center; }\n  .canvasLayout__stageContentOverflow::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasLayout__stageContentOverflow::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasLayout__stageContentOverflow::-webkit-scrollbar-corner, .canvasLayout__stageContentOverflow::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasLayout__sidebar {\n  flex-grow: 0;\n  flex-basis: auto;\n  width: 350px;\n  background: #25262E;\n  display: flex;\n  position: relative;\n  border-left: 1px solid #343741; }\n  .canvasLayout__sidebar .euiPanel {\n    margin-bottom: 8px; }\n\n.canvasLayout__footer {\n  flex-grow: 0;\n  flex-basis: auto;\n  width: 100%;\n  background-color: #1a1b20;\n  z-index: 4000;\n  font-size: 14px; }\n\n.canvasExport .canvasPage {\n  position: relative;\n  overflow: hidden;\n  box-shadow: none; }\n\n.canvasArg__add {\n  padding: 12px;\n  text-align: left;\n  width: 100%; }\n  .canvasArg__add:not(:last-child) {\n    border-bottom: 1px solid #343741; }\n  .canvasArg__add:hover {\n    background-color: #25262E; }\n    .canvasArg__add:hover label {\n      color: #D4DAE5; }\n\n.canvasArg__addArg {\n  margin-right: -8px; }\n\n.canvasArg__addPopover {\n  width: 250px; }\n\n.canvasArg {\n  margin-top: 8px; }\n\n.canvasArg__remove {\n  min-width: 16px;\n  padding: 4px 0; }\n\n.canvasArg__form {\n  position: relative; }\n\n.canvasArg__tooltip {\n  margin-left: -32px; }\n\n.canvasSidebar__accordion .canvasArg__form {\n  position: static; }\n\n.canvasArg__switch {\n  padding-top: calc(8px * .75); }\n\n.canvasAssetManager .canvasAssetManager__modalHeader {\n  flex-wrap: wrap; }\n\n@media only screen and (max-width: 574px) {\n  .canvasAssetManager .canvasAssetManager__modalHeaderTitle {\n    width: 100%;\n    padding-bottom: 16px; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .canvasAssetManager .canvasAssetManager__modalHeaderTitle {\n    width: 100%;\n    padding-bottom: 16px; } }\n\n.canvasAssetManager .canvasAssetManager__meterWrapper {\n  flex-grow: 0;\n  min-width: 40%;\n  align-items: center; }\n  @media only screen and (max-width: 574px) {\n    .canvasAssetManager .canvasAssetManager__meterWrapper {\n      flex-grow: 1; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .canvasAssetManager .canvasAssetManager__meterWrapper {\n      flex-grow: 1; } }\n\n.canvasAssetManager .canvasAssetManager__meterLabel {\n  margin: 0; }\n\n.canvasAssetManager .canvasAssetManager__fileUploadWrapper {\n  justify-content: flex-end;\n  padding-right: 16px; }\n\n.canvasAssetManager .canvasAssetManager__modalFooter {\n  justify-content: space-between; }\n\n.canvasAssetManager .canvasAssetManager__emptyPanel {\n  max-width: 400px;\n  margin: 32px auto 0; }\n\n.canvasAsset {\n  text-align: center;\n  overflow: hidden; }\n  .canvasAsset .canvasAsset__thumb {\n    margin: -8px;\n    margin-bottom: 0;\n    font-size: 0;\n    height: 164px; }\n  .canvasAsset .canvasAsset__img {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%; }\n    .canvasAsset .canvasAsset__img img {\n      width: auto;\n      max-width: 100%;\n      max-height: 164px; }\n\n.canvasAssetPicker {\n  scrollbar-width: thin;\n  max-height: 120px;\n  overflow-x: hidden;\n  overflow-y: auto; }\n  .canvasAssetPicker::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasAssetPicker::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasAssetPicker::-webkit-scrollbar-corner, .canvasAssetPicker::-webkit-scrollbar-track {\n    background-color: transparent; }\n  .canvasAssetPicker .canvasAssetPicker__link {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    text-align: center; }\n    .canvasAssetPicker .canvasAssetPicker__link:hover {\n      outline: solid 4px rgba(27, 169, 245, 0.1); }\n  .canvasAssetPicker .canvasAssetPicker__selected {\n    position: absolute;\n    top: 4px;\n    right: 4px; }\n  .canvasAssetPicker .euiImage {\n    width: 40px;\n    height: 40px; }\n\n.autocomplete {\n  position: relative; }\n\n.autocompletePopup {\n  position: absolute;\n  top: -262px;\n  height: 260px;\n  width: 100%; }\n\n.autocompleteItems {\n  border-right: 1px solid #343741; }\n\n.autocompleteItems,\n.autocompleteReference {\n  scrollbar-width: thin;\n  height: 258px;\n  overflow: auto; }\n  .autocompleteItems::-webkit-scrollbar,\n  .autocompleteReference::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .autocompleteItems::-webkit-scrollbar-thumb,\n  .autocompleteReference::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .autocompleteItems::-webkit-scrollbar-corner, .autocompleteItems::-webkit-scrollbar-track,\n  .autocompleteReference::-webkit-scrollbar-corner,\n  .autocompleteReference::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.autocompleteReference {\n  padding: 8px 12px;\n  background-color: #1e1e25; }\n\n.autocompleteItem {\n  padding: 8px 12px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace;\n  font-weight: 400; }\n\n.autocompleteItem--isActive {\n  color: #1BA9F5;\n  background-color: #08334a; }\n\n.autocompleteType {\n  padding: 8px; }\n\n.autocompleteTable .euiTable {\n  background-color: transparent; }\n\n.autocompleteDescList .euiDescriptionList__description {\n  margin-right: 8px; }\n\n.canvasClipboard {\n  cursor: pointer; }\n\n.canvasColorDot {\n  display: inline-block;\n  position: relative;\n  height: 32px;\n  width: 32px; }\n  .canvasColorDot .canvasColorDot__background {\n    position: absolute;\n    height: 32px;\n    width: 32px;\n    border-radius: 4px;\n    top: 0;\n    left: 0; }\n  .canvasColorDot .canvasColorDot__foreground {\n    position: absolute;\n    border: 1px solid #343741;\n    height: 32px;\n    width: 32px;\n    border-radius: 4px;\n    top: 0;\n    left: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center; }\n\n.canvasColorPalette .canvasColorPalette__dot {\n  display: inline-block;\n  margin: 0 4px 4px 0; }\n\n.canvasColorPickerPopover__popover {\n  width: 256px; }\n\n.canvasCustomElementForm {\n  min-width: 400px; }\n\n.canvasCustomElementForm__preview {\n  max-width: 210px;\n  min-height: 210px; }\n\n.canvasCustomElementForm__thumbnail {\n  padding-bottom: 0; }\n\n.canvasCustomElementForm__thumbnailHelp {\n  color: #98A2B3; }\n\n.canvasDataSource {\n  background-color: #1D1E24;\n  color: #DFE5EF;\n  border-radius: 1px solid #343741;\n  margin: 8px;\n  padding: 0 8px; }\n\n.canvasDataSource__section,\n.canvasDataSource__list {\n  padding: 12px 12px 0; }\n\n.canvasDataSource__sectionFooter {\n  padding: 0 12px; }\n\n.canvasDataSource__triggerButton {\n  color: #DFE5EF;\n  font-size: 16px;\n  font-size: 1rem;\n  line-height: 1.5rem;\n  font-weight: 600;\n  letter-spacing: -0.02em;\n  line-height: 40px; }\n\n.canvasDataSource__triggerButtonIcon {\n  margin-right: 8px; }\n\n.canvasDataSource__card .euiCard__content {\n  padding-top: 0 !important; }\n\n.canvasDataSource__card + .canvasDataSource__card {\n  margin-top: 8px; }\n\n.canvasDataSource__card--isCurrent {\n  border-color: #7DE2D1; }\n\n.canvasDatasourcePreview {\n  max-width: 1000px;\n  max-height: 60vh;\n  height: 100%; }\n  .canvasDatasourcePreview .canvasDatasourcePreview__panel {\n    height: calc(100% - 16px * 3); }\n\n.canvasDataTable {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between; }\n  .canvasDataTable .canvasDataTable__tableWrapper {\n    scrollbar-width: thin;\n    width: 100%;\n    height: 100%;\n    overflow: auto; }\n    .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-thumb {\n      background-color: rgba(152, 162, 179, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner, .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-track {\n      background-color: transparent; }\n    .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner {\n      background: transparent; }\n  .canvasDataTable .canvasDataTable__footer {\n    width: 100%;\n    display: flex;\n    justify-content: space-around;\n    padding: 8px;\n    border-top: 1px solid #343741; }\n  .canvasDataTable .canvasDataTable__table {\n    min-width: 100%; }\n  .canvasDataTable .canvasDataTable__th,\n  .canvasDataTable .canvasDataTable__td {\n    padding: 8px 4px;\n    border-bottom: 1px solid #343741; }\n  .canvasDataTable .canvasDataTable__th {\n    white-space: nowrap;\n    font-weight: bold; }\n\n.canvasDebug.euiCodeBlock {\n  padding: 0;\n  width: 100%;\n  height: 100%; }\n  .canvasDebug.euiCodeBlock .canvasDebug__content {\n    scrollbar-width: thin;\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    padding: 16px; }\n    .canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-thumb {\n      background-color: rgba(152, 162, 179, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-corner, .canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-track {\n      background-color: transparent; }\n\n.dom-preview {\n  pointer-events: none; }\n  .dom-preview .canvasLayoutAnnotation {\n    display: none; }\n\n.canvasElementCard__wrapper {\n  position: relative; }\n  .canvasElementCard__wrapper:hover .canvasElementCard__controls, .canvasElementCard__wrapper:focus .canvasElementCard__controls {\n    visibility: visible;\n    opacity: 1; }\n  .canvasElementCard__wrapper .canvasElementCard__controls {\n    position: absolute;\n    right: 8px;\n    top: 8px;\n    visibility: hidden;\n    opacity: 0;\n    transition: opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    transition-delay: 250ms;\n    background: rgba(255, 255, 255, 0.5);\n    border-radius: 4px; }\n\n.canvasElementCard .euiCard__top {\n  text-align: center;\n  width: calc(100% + 16px * 2);\n  height: 85px;\n  margin: calc(-1 * 16px) calc(-1 * 16px) 0; }\n\n.canvasElementCard .euiCard__image {\n  max-height: 100%;\n  max-width: 100%;\n  width: auto;\n  left: 0;\n  top: 0; }\n\n.canvasElementCard.canvasElementCard--hasIcon .euiCard__top {\n  min-width: 210px;\n  padding-top: 16px; }\n\n.canvasElement {\n  height: 100%;\n  width: 100%;\n  overflow: hidden; }\n\n.canvasElement__content {\n  height: 100%;\n  width: 100%; }\n\n.canvasExpressionInput .euiFormErrorText {\n  padding-left: 16px; }\n\n.canvasExpression--compactSize {\n  max-height: 480px; }\n\n.canvasExpressionInput__editor {\n  height: 256px;\n  padding-top: 16px;\n  flex-grow: 1; }\n\n.canvasExpression--fullSize {\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 5999; }\n  .canvasExpression--fullSize .canvasExpressionInput {\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column; }\n  .canvasExpression--fullSize .canvasExpressionInput__inner {\n    flex-grow: 1;\n    display: flex; }\n  .canvasExpression--fullSize .canvasTextArea__code {\n    flex-grow: 1;\n    padding-right: 40px; }\n\n.canvasExpression__settings {\n  padding: 12px 16px;\n  border-top: 1px solid #343741;\n  background-color: #1D1E24; }\n\n/* stylelint-disable selector-no-qualifying-type */\nbody.canvas-isFullscreen.euiBody--headerIsFixed {\n  padding-top: 0; }\n\nbody.canvas-isFullscreen .headerWrapper ~ .app-wrapper {\n  min-height: 100vh; }\n\nbody.canvas-isFullscreen.euiBody--collapsibleNavIsDocked {\n  padding-left: 0 !important; }\n\nbody.canvas-isFullscreen .kbnLoadingIndicator {\n  display: none; }\n\nbody.canvas-isFullscreen .canvasLayout {\n  background: #000; }\n\nbody.canvas-isFullscreen .canvasLayout__stageHeader,\nbody.canvas-isFullscreen .canvasLayout__sidebar,\nbody.canvas-isFullscreen .canvasLayout__footer,\nbody.canvas-isFullscreen .canvasGrid {\n  display: none; }\n\nbody.canvas-isFullscreen .canvasLayout__stageContentOverflow {\n  display: block;\n  overflow: visible;\n  position: static;\n  top: auto;\n  left: auto;\n  right: auto;\n  bottom: auto; }\n  body.canvas-isFullscreen .canvasLayout__stageContentOverflow .canvasWorkpad__buffer {\n    padding: 0;\n    margin: 0; }\n\nbody.canvas-isFullscreen .canvasLayout__rows {\n  max-width: none; }\n\nbody.canvas-isFullscreen .canvasLayout__rows,\nbody.canvas-isFullscreen .canvasLayout__cols {\n  align-items: center;\n  justify-content: center; }\n\nbody.canvas-isFullscreen .canvasCheckered {\n  display: flex;\n  background: none; }\n\nbody.canvas-isFullscreen .canvasPage {\n  box-shadow: none;\n  overflow: hidden; }\n\n.canvasFunctionForm > .canvasLoading {\n  text-align: center;\n  font-size: 20px; }\n\n.canvasAlignmentGuide {\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d; }\n\n.canvasBorderConnection {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  border-top: 1px dashed #343741;\n  border-left: 1px dashed #343741; }\n\n.canvasBorderResizeHandle {\n  box-shadow: 0 2px 2px -1px rgba(0, 0, 0, 0.3);\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  display: block;\n  position: absolute;\n  height: 8px;\n  width: 8px;\n  margin-left: -4px;\n  margin-top: -4px;\n  background-color: #1D1E24;\n  border: 1px solid #98A2B3; }\n\n.canvasDragBoxAnnotation {\n  position: absolute;\n  background: none;\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  outline: dashed 1px #98A2B3;\n  pointer-events: none; }\n\n.canvasHoverAnnotation {\n  position: absolute;\n  background: none;\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  outline: solid 1px #54B399;\n  pointer-events: none; }\n\n.canvasRotationHandle {\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  display: block;\n  position: absolute;\n  height: 24px;\n  width: 0;\n  margin-left: -1px;\n  margin-top: -12px;\n  border-top: 1px dashed #343741;\n  border-left: 1px dashed #343741; }\n\n.canvasRotationHandle__handle {\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  display: block;\n  position: absolute;\n  height: 9px;\n  width: 9px;\n  margin-left: -5px;\n  margin-top: -6px;\n  border-radius: 50%;\n  background-color: #535966; }\n\n.tooltipAnnotation {\n  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1), 0 6px 12px 0 rgba(0, 0, 0, 0.1), 0 4px 4px 0 rgba(0, 0, 0, 0.1), 0 2px 2px 0 rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  background-color: black;\n  color: #FFF;\n  z-index: 9000;\n  max-width: 256px;\n  overflow-wrap: break-word;\n  font-size: 12px;\n  font-size: 0.75rem;\n  line-height: 1.5;\n  padding: 8px;\n  position: absolute;\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  outline: none;\n  pointer-events: none; }\n\n.canvasLoading {\n  display: flex;\n  color: #343741;\n  align-items: center; }\n\n.canvasPageManager .canvasPageManager__pages {\n  position: relative; }\n\n.canvasPageManager .canvasPageManager__pages,\n.canvasPageManager .canvasPageManager__addPage {\n  height: 144px; }\n\n.canvasPageManager .canvasPageManager--trayPop > div {\n  animation: trayPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  opacity: 0;\n  animation-fill-mode: forwards; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(1n) {\n  animation-delay: 0.05s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(2n) {\n  animation-delay: 0.1s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(3n) {\n  animation-delay: 0.15s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(4n) {\n  animation-delay: 0.2s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(5n) {\n  animation-delay: 0.25s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(6n) {\n  animation-delay: 0.3s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(7n) {\n  animation-delay: 0.35s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(8n) {\n  animation-delay: 0.4s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(9n) {\n  animation-delay: 0.45s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(10n) {\n  animation-delay: 0.5s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(11n) {\n  animation-delay: 0.55s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(12n) {\n  animation-delay: 0.6s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(13n) {\n  animation-delay: 0.65s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(14n) {\n  animation-delay: 0.7s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(15n) {\n  animation-delay: 0.75s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(16n) {\n  animation-delay: 0.8s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(17n) {\n  animation-delay: 0.85s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(18n) {\n  animation-delay: 0.9s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(19n) {\n  animation-delay: 0.95s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(20n) {\n  animation-delay: 1s; }\n\n.canvasPageManager .canvasPageManager__pageList {\n  scrollbar-width: thin;\n  display: flex;\n  overflow-x: auto;\n  overflow-y: hidden;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0; }\n  .canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-corner, .canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasPageManager .canvasPageManager__addPage {\n  width: 56px;\n  background: #7DE2D1;\n  color: #FFF;\n  opacity: 0;\n  animation: buttonPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  animation-fill-mode: forwards; }\n\n.canvasPageManager .canvasPageManager__addPageTip {\n  display: block;\n  height: 100%; }\n\n.canvasPageManager .canvasPageManager__page {\n  padding: 16px 16px 16px 8px; }\n  .canvasPageManager .canvasPageManager__page:focus, .canvasPageManager .canvasPageManager__page-isActive {\n    background-color: rgba(0, 0, 0, 0.5);\n    outline: none;\n    text-decoration: none; }\n  .canvasPageManager .canvasPageManager__page-isActive:focus .canvasPageManager__pagePreview {\n    outline-color: #54B399; }\n  .canvasPageManager .canvasPageManager__page:hover, .canvasPageManager .canvasPageManager__page:focus {\n    text-decoration: none; }\n    .canvasPageManager .canvasPageManager__page:hover .canvasPageManager__pagePreview, .canvasPageManager .canvasPageManager__page:focus .canvasPageManager__pagePreview {\n      box-shadow: 0 6px 12px -1px rgba(0, 0, 0, 0.3), 0 4px 4px -1px rgba(0, 0, 0, 0.3), 0 2px 2px 0 rgba(0, 0, 0, 0.3); }\n    .canvasPageManager .canvasPageManager__page:hover .canvasPageManager__controls, .canvasPageManager .canvasPageManager__page:focus .canvasPageManager__controls {\n      visibility: visible;\n      opacity: 1; }\n  .canvasPageManager .canvasPageManager__page-isActive .canvasPageManager__pagePreview {\n    box-shadow: 0 6px 12px -1px rgba(0, 0, 0, 0.2), 0 4px 4px -1px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.2);\n    outline: 2px solid #343741;\n    outline-color: #98A2B3; }\n\n.canvasPageManager .canvasPageManager__pageNumber {\n  color: #98A2B3; }\n\n.canvasPageManager .canvasPageManager__pagePreview {\n  box-shadow: 0 2px 2px -1px rgba(0, 0, 0, 0.3), 0 1px 5px -2px rgba(0, 0, 0, 0.3);\n  position: relative;\n  overflow: hidden;\n  color: #DFE5EF; }\n  .canvasPageManager .canvasPageManager__pagePreview .canvasPositionable {\n    position: absolute; }\n\n.canvasPageManager .canvasPageManager__controls {\n  position: absolute;\n  right: 8px;\n  top: 8px;\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  transition-delay: 250ms;\n  background: rgba(255, 255, 255, 0.5);\n  border-radius: 4px; }\n\n@keyframes buttonPop {\n  0% {\n    opacity: 0;\n    transform: translateX(100%); }\n  1% {\n    opacity: 0;\n    transform: translateX(100%); }\n  100% {\n    opacity: 1;\n    transform: translateY(0); } }\n\n@keyframes trayPop {\n  0% {\n    opacity: 0;\n    transform: translateY(100%); }\n  1% {\n    opacity: 0;\n    transform: translateY(100%); }\n  100% {\n    opacity: 1;\n    transform: translateY(0); } }\n\n.canvasPositionable {\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d; }\n\n.canvasShapePreview {\n  width: 40px;\n  height: 40px; }\n  .canvasShapePreview svg {\n    width: 100%;\n    height: 100%; }\n\n.canvasShapePicker {\n  width: 192px; }\n\n.canvasSidebar {\n  scrollbar-width: thin;\n  width: 100%;\n  max-height: 100vh;\n  overflow-y: auto;\n  overflow-x: hidden;\n  position: absolute;\n  top: 0;\n  bottom: 0; }\n  .canvasSidebar::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasSidebar::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasSidebar::-webkit-scrollbar-corner, .canvasSidebar::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasSidebar__pop {\n  animation: sidebarPop 150ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n\n.canvasSidebarFlyout {\n  width: 350px;\n  min-width: 350px; }\n\n.canvasSidebar__elementButtons {\n  background: #1a1a20;\n  margin-bottom: 8px; }\n\n.canvasSidebar__panel {\n  border-bottom: 1px solid #343741;\n  padding: 8px 12px; }\n  .canvasSidebar__panel--isEmpty {\n    border-bottom: none; }\n  .canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion {\n    margin-bottom: -8px; }\n  .canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion:after {\n    content: none; }\n  .canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion.euiAccordion-isOpen:after {\n    display: none; }\n\n.canvasSidebar__panel-noMinWidth .euiButton {\n  min-width: 0; }\n\n.canvasSidebar__expandable + .canvasSidebar__expandable {\n  margin-top: 0; }\n  .canvasSidebar__expandable + .canvasSidebar__expandable .canvasSidebar__accordion:before {\n    display: none; }\n\n.canvasSidebar__accordion {\n  padding: 12px;\n  margin: 0 -12px;\n  background: #25262E;\n  position: relative; }\n  .canvasSidebar__accordion.euiAccordion-isOpen {\n    background: transparent; }\n  .canvasSidebar__accordion:before, .canvasSidebar__accordion:after {\n    content: \'\';\n    height: 1px;\n    position: absolute;\n    left: 0;\n    width: 100%;\n    background: #343741; }\n  .canvasSidebar__accordion:before {\n    top: 0; }\n  .canvasSidebar__accordion:after {\n    bottom: 0; }\n\n.canvasSidebar__accordionContent {\n  padding-top: 16px;\n  padding-left: 28px; }\n\n@keyframes sidebarPop {\n  0% {\n    opacity: 0; }\n  1% {\n    opacity: 0; }\n  100% {\n    opacity: 1; } }\n\n.canvasLayout__sidebarHeader {\n  padding: calc(12px + 2px) 8px; }\n\n.canvasLayout__sidebarHeaderWorkpad {\n  padding: calc(8px * .75) 0; }\n\n.canvasToolbar {\n  position: relative; }\n\n.canvasTray__toggle {\n  position: absolute;\n  top: -20px;\n  left: 50%;\n  background-color: #16171c;\n  margin: 0;\n  border-radius: 4px 4px 0 0; }\n  .canvasTray__toggle > .euiFlexItem {\n    margin: 0; }\n  .canvasTray__toggle button {\n    padding: 4px 12px;\n    box-shadow: 0 -2px 1px rgba(255, 255, 255, 0.1); }\n\n.canvasToolbar__controls {\n  padding: 12px;\n  height: 100%; }\n\n.canvasToolbar__container {\n  width: 100%;\n  height: 64px;\n  background-color: #1a1a20;\n  position: relative;\n  z-index: 200; }\n\n.canvasTray {\n  box-shadow: 0 0 12px -1px rgba(0, 0, 0, 0.2), 0 0 4px -1px rgba(0, 0, 0, 0.2), 0 0 2px 0 rgba(0, 0, 0, 0.2);\n  flex-direction: column; }\n\n.canvasTray__panel {\n  background-color: #16171c;\n  border-radius: 0; }\n\n.canvasWorkpad {\n  position: relative; }\n\n.canvasWorkpad__buffer {\n  padding: 16px;\n  margin: auto; }\n\n.canvasGrid {\n  position: absolute;\n  -webkit-user-select: none;\n          user-select: none;\n  pointer-events: none;\n  background-image: linear-gradient(to right, #535966 1px, transparent 1px), linear-gradient(to bottom, #535966 1px, transparent 1px);\n  background-size: 50px 50px;\n  top: 0; }\n\n.canvasElementMenu__popoverButton {\n  margin-right: 8px; }\n\n.canvasShareMenu__panelContent {\n  padding: 16px; }\n\n.canvasShareMenu__reportingConfig .euiCodeBlock__pre {\n  scrollbar-width: thin;\n  overflow-x: auto;\n  white-space: pre; }\n  .canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-corner, .canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasViewMenu__kioskSettings,\n.canvasViewMenu__refreshSettings {\n  padding: 16px; }\n\n.canvasWorkpad__upload--compressed.euiFilePicker--compressed.euiFilePicker .euiFilePicker__prompt {\n  height: 40px;\n  padding: 12px;\n  padding-left: 40px; }\n\n.canvasWorkpad__upload--compressed.euiFilePicker--compressed.euiFilePicker .euiFilePicker__icon {\n  top: 12px; }\n\n@media only screen and (max-width: 574px) {\n  .canvasWorkpad__upload--compressed .euiFilePicker__wrap {\n    max-width: none; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .canvasWorkpad__upload--compressed .euiFilePicker__wrap {\n    max-width: none; } }\n\n.canvasWorkpad__dropzone {\n  border: 2px dashed transparent; }\n\n.canvasWorkpad__dropzone--active {\n  background-color: #25262E;\n  border-color: #343741; }\n\n.canvasWorkpad__dropzoneTable .euiTable {\n  background-color: transparent; }\n\n.canvasWorkpad__dropzoneTable--tags .euiTableCellContent {\n  flex-wrap: wrap; }\n\n.canvasWorkpad__dropzoneTable--tags .euiHealth {\n  width: 100%; }\n\n.canvasPage {\n  box-shadow: 0 0 12px -1px rgba(0, 0, 0, 0.4), 0 0 4px -1px rgba(0, 0, 0, 0.4), 0 0 2px 0 rgba(0, 0, 0, 0.4);\n  z-index: initial;\n  position: absolute;\n  top: 0;\n  transform-style: preserve-3d !important;\n  background-color: #1D1E24; }\n\n.canvasInteractivePage {\n  -webkit-user-select: none;\n          user-select: none; }\n\n.canvasLayout__stage .canvasStaticPage.isInactive {\n  visibility: hidden;\n  opacity: 0; }\n\n.canvasAdvancedFilter {\n  width: 100%;\n  font-size: inherit; }\n  .canvasAdvancedFilter .canvasAdvancedFilter__input {\n    background-color: #1D1E24;\n    width: 100%;\n    padding: 4px 16px;\n    border: 1px solid #343741;\n    border-radius: 4px;\n    font-size: inherit;\n    line-height: 19px;\n    font-family: monospace; }\n    .canvasAdvancedFilter .canvasAdvancedFilter__input:focus {\n      box-shadow: none; }\n  .canvasAdvancedFilter .canvasAdvancedFilter__button {\n    width: 100%;\n    padding: 4px 8px;\n    border: 1px solid #343741;\n    border-radius: 4px;\n    background-color: #1D1E24;\n    font-size: inherit; }\n    .canvasAdvancedFilter .canvasAdvancedFilter__button:hover {\n      background-color: #25262E; }\n\n.canvasDropdownFilter {\n  width: 100%;\n  font-size: inherit;\n  position: relative; }\n  .canvasDropdownFilter .canvasDropdownFilter__select {\n    background-color: #1D1E24;\n    width: 100%;\n    padding: 4px 16px;\n    border: 1px solid #343741;\n    border-radius: 4px;\n    -webkit-appearance: none;\n            appearance: none;\n    font-size: inherit; }\n    .canvasDropdownFilter .canvasDropdownFilter__select:after {\n      display: none; }\n    .canvasDropdownFilter .canvasDropdownFilter__select:focus {\n      box-shadow: none; }\n  .canvasDropdownFilter .canvasDropdownFilter__icon {\n    position: absolute;\n    right: 8px;\n    top: 8px;\n    pointer-events: none; }\n\n.canvasEmbeddable .embPanel {\n  border: none;\n  background: none; }\n  .canvasEmbeddable .embPanel .embPanel__title {\n    margin-bottom: 4px; }\n  .canvasEmbeddable .embPanel .embPanel__optionsMenuButton {\n    border-radius: 4px; }\n  .canvas-isFullscreen .canvasEmbeddable .embPanel .embPanel__optionsMenuButton {\n    opacity: 0; }\n  .canvas-isFullscreen .canvasEmbeddable .embPanel:focus .embPanel__optionsMenuButton,\n  .canvas-isFullscreen .canvasEmbeddable .embPanel:hover .embPanel__optionsMenuButton {\n    opacity: 1; }\n\n.canvasEmbeddable .euiTable {\n  background: none; }\n\n.legendLabel {\n  color: #DFE5EF; }\n\n.legendColorBox > div > div {\n  border-radius: 16px; }\n\n.revealImage {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none; }\n  .revealImage .revealImageAligner {\n    background-size: contain;\n    background-repeat: no-repeat; }\n  .revealImage .revealImage__image {\n    -webkit-user-select: none;\n            user-select: none; }\n\n.canvasTimeFilter .euiSuperDatePicker__flexWrapper {\n  width: 100%; }\n  .canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall {\n    margin: 0; }\n    .canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall > .euiFlexItem {\n      margin: 0; }\n\n.canvasArgImage .canvasArgImage--preview {\n  max-height: 100px;\n  overflow: hidden;\n  border: 1px solid #343741; }\n',""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(211);var content=__webpack_require__(457);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(212);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n  This file contains all the global scope garbage that should be removed\n  when the UI framework implements everything we need\n*/\n.canvasContainerWrapper .euiAccordion__childWrapper {\n  overflow-x: hidden; }\n\n.canvasContainerWrapper .clickable {\n  cursor: pointer; }\n\n.canvasContainerWrapper .canvasPalettePicker__swatchesPopover {\n  display: block; }\n  .canvasContainerWrapper .canvasPalettePicker__swatchesPopover .canvasPalettePicker__swatchesPopoverAnchor {\n    display: block; }\n\n.canvasContainerWrapper .euiImageFullScreen {\n  min-width: 100px; }\n\n@media only screen and (min-width: 768px) and (max-width: 991px) {\n  .canvasModal--fixedSize {\n    width: 75vw;\n    height: 75vh;\n    max-height: 680px; } }\n\n@media only screen and (min-width: 992px) and (max-width: 1199px) {\n  .canvasModal--fixedSize {\n    width: 75vw;\n    height: 75vh;\n    max-height: 680px; } }\n\n@media only screen and (min-width: 1200px) {\n  .canvasModal--fixedSize {\n    width: 75vw;\n    height: 75vh;\n    max-height: 680px; } }\n\n/*\n  Canvas global SASS varialbes\n*/\n.canvas.canvasContainerWrapper {\n  display: flex;\n  flex-grow: 1; }\n\n.canvas.canvasContainer {\n  display: flex;\n  flex-grow: 1;\n  background-color: #fafbfd; }\n\n.canvasContainer--loading {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translateY(-50%);\n  text-align: center; }\n\n.canvasCheckered {\n  background-color: #FFF;\n  background-image: linear-gradient(45deg, #D3DAE6 25%, transparent 25%), linear-gradient(-45deg, #D3DAE6 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #D3DAE6 75%), linear-gradient(-45deg, transparent 75%, #D3DAE6 75%);\n  background-size: 8px 8px;\n  position: relative; }\n\n.canvasTextArea__code {\n  scrollbar-width: thin;\n  font-size: 14px;\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace;\n  width: 100%;\n  max-width: 100%; }\n  .canvasTextArea__code::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasTextArea__code::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasTextArea__code::-webkit-scrollbar-corner, .canvasTextArea__code::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasContextMenu--topBorder {\n  border-top: 1px solid #D3DAE6; }\n\n#canvas-app {\n  overflow-y: hidden; }\n  #canvas-app .window-error {\n    position: absolute;\n    bottom: 10px;\n    right: 10px;\n    background-color: #BD271E;\n    color: #FFF;\n    display: block;\n    z-index: 2000;\n    padding: 10px;\n    max-width: 500px; }\n    #canvas-app .window-error a {\n      color: #FFF;\n      font-weight: bold; }\n\n.canvasHomeApp {\n  width: 100%; }\n  .canvasHomeApp .canvasHomeApp__content {\n    width: 100%; }\n  .canvasHomeApp .canvasHomeApp__modalHeader {\n    padding-right: 24px; }\n  .canvasHomeApp .canvasHomeApp__modalHeader,\n  .canvasHomeApp .canvasHomeApp__modalBody {\n    width: auto; }\n  @media only screen and (max-width: 574px) {\n    .canvasHomeApp .euiModalBody__overflow {\n      max-height: 80vh; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .canvasHomeApp .euiModalBody__overflow {\n      max-height: 80vh; } }\n\n.canvasLayout {\n  display: flex;\n  background: #fafbfd;\n  flex-grow: 1;\n  overflow: hidden; }\n\n.canvasLayout__rows {\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  max-height: 100vh;\n  max-width: 100%; }\n\n.canvasLayout__cols {\n  display: flex;\n  align-items: stretch;\n  flex-grow: 1; }\n\n.canvasLayout__stage {\n  flex-grow: 1;\n  flex-basis: auto;\n  display: flex;\n  flex-direction: column; }\n\n.canvasLayout__stageHeader {\n  flex-grow: 0;\n  flex-basis: auto;\n  padding: 1px 16px 0;\n  font-size: 14px;\n  border-bottom: 1px solid #D3DAE6;\n  background: #F5F7FA;\n  -webkit-user-select: none;\n          user-select: none; }\n\n.canvasLayout__stageHeaderInner {\n  height: 48px; }\n\n.canvasLayout__stageContent {\n  flex-grow: 1;\n  flex-basis: auto;\n  position: relative; }\n\n.canvasLayout__stageContentOverflow {\n  scrollbar-width: thin;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: auto;\n  display: flex;\n  align-items: center; }\n  .canvasLayout__stageContentOverflow::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasLayout__stageContentOverflow::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasLayout__stageContentOverflow::-webkit-scrollbar-corner, .canvasLayout__stageContentOverflow::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasLayout__sidebar {\n  flex-grow: 0;\n  flex-basis: auto;\n  width: 350px;\n  background: #F5F7FA;\n  display: flex;\n  position: relative;\n  border-left: 1px solid #D3DAE6; }\n  .canvasLayout__sidebar .euiPanel {\n    margin-bottom: 8px; }\n\n.canvasLayout__footer {\n  flex-grow: 0;\n  flex-basis: auto;\n  width: 100%;\n  background-color: #fafbfd;\n  z-index: 4000;\n  font-size: 14px; }\n\n.canvasExport .canvasPage {\n  position: relative;\n  overflow: hidden;\n  box-shadow: none; }\n\n.canvasArg__add {\n  padding: 12px;\n  text-align: left;\n  width: 100%; }\n  .canvasArg__add:not(:last-child) {\n    border-bottom: 1px solid #D3DAE6; }\n  .canvasArg__add:hover {\n    background-color: #F5F7FA; }\n    .canvasArg__add:hover label {\n      color: #343741; }\n\n.canvasArg__addArg {\n  margin-right: -8px; }\n\n.canvasArg__addPopover {\n  width: 250px; }\n\n.canvasArg {\n  margin-top: 8px; }\n\n.canvasArg__remove {\n  min-width: 16px;\n  padding: 4px 0; }\n\n.canvasArg__form {\n  position: relative; }\n\n.canvasArg__tooltip {\n  margin-left: -32px; }\n\n.canvasSidebar__accordion .canvasArg__form {\n  position: static; }\n\n.canvasArg__switch {\n  padding-top: calc(8px * .75); }\n\n.canvasAssetManager .canvasAssetManager__modalHeader {\n  flex-wrap: wrap; }\n\n@media only screen and (max-width: 574px) {\n  .canvasAssetManager .canvasAssetManager__modalHeaderTitle {\n    width: 100%;\n    padding-bottom: 16px; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .canvasAssetManager .canvasAssetManager__modalHeaderTitle {\n    width: 100%;\n    padding-bottom: 16px; } }\n\n.canvasAssetManager .canvasAssetManager__meterWrapper {\n  flex-grow: 0;\n  min-width: 40%;\n  align-items: center; }\n  @media only screen and (max-width: 574px) {\n    .canvasAssetManager .canvasAssetManager__meterWrapper {\n      flex-grow: 1; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .canvasAssetManager .canvasAssetManager__meterWrapper {\n      flex-grow: 1; } }\n\n.canvasAssetManager .canvasAssetManager__meterLabel {\n  margin: 0; }\n\n.canvasAssetManager .canvasAssetManager__fileUploadWrapper {\n  justify-content: flex-end;\n  padding-right: 16px; }\n\n.canvasAssetManager .canvasAssetManager__modalFooter {\n  justify-content: space-between; }\n\n.canvasAssetManager .canvasAssetManager__emptyPanel {\n  max-width: 400px;\n  margin: 32px auto 0; }\n\n.canvasAsset {\n  text-align: center;\n  overflow: hidden; }\n  .canvasAsset .canvasAsset__thumb {\n    margin: -8px;\n    margin-bottom: 0;\n    font-size: 0;\n    height: 164px; }\n  .canvasAsset .canvasAsset__img {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%; }\n    .canvasAsset .canvasAsset__img img {\n      width: auto;\n      max-width: 100%;\n      max-height: 164px; }\n\n.canvasAssetPicker {\n  scrollbar-width: thin;\n  max-height: 120px;\n  overflow-x: hidden;\n  overflow-y: auto; }\n  .canvasAssetPicker::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasAssetPicker::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasAssetPicker::-webkit-scrollbar-corner, .canvasAssetPicker::-webkit-scrollbar-track {\n    background-color: transparent; }\n  .canvasAssetPicker .canvasAssetPicker__link {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    text-align: center; }\n    .canvasAssetPicker .canvasAssetPicker__link:hover {\n      outline: solid 4px rgba(0, 107, 180, 0.1); }\n  .canvasAssetPicker .canvasAssetPicker__selected {\n    position: absolute;\n    top: 4px;\n    right: 4px; }\n  .canvasAssetPicker .euiImage {\n    width: 40px;\n    height: 40px; }\n\n.autocomplete {\n  position: relative; }\n\n.autocompletePopup {\n  position: absolute;\n  top: -262px;\n  height: 260px;\n  width: 100%; }\n\n.autocompleteItems {\n  border-right: 1px solid #D3DAE6; }\n\n.autocompleteItems,\n.autocompleteReference {\n  scrollbar-width: thin;\n  height: 258px;\n  overflow: auto; }\n  .autocompleteItems::-webkit-scrollbar,\n  .autocompleteReference::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .autocompleteItems::-webkit-scrollbar-thumb,\n  .autocompleteReference::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .autocompleteItems::-webkit-scrollbar-corner, .autocompleteItems::-webkit-scrollbar-track,\n  .autocompleteReference::-webkit-scrollbar-corner,\n  .autocompleteReference::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.autocompleteReference {\n  padding: 8px 12px;\n  background-color: #fcfcfd; }\n\n.autocompleteItem {\n  padding: 8px 12px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace;\n  font-weight: 400; }\n\n.autocompleteItem--isActive {\n  color: #006BB4;\n  background-color: #e6f0f8; }\n\n.autocompleteType {\n  padding: 8px; }\n\n.autocompleteTable .euiTable {\n  background-color: transparent; }\n\n.autocompleteDescList .euiDescriptionList__description {\n  margin-right: 8px; }\n\n.canvasClipboard {\n  cursor: pointer; }\n\n.canvasColorDot {\n  display: inline-block;\n  position: relative;\n  height: 32px;\n  width: 32px; }\n  .canvasColorDot .canvasColorDot__background {\n    position: absolute;\n    height: 32px;\n    width: 32px;\n    border-radius: 4px;\n    top: 0;\n    left: 0; }\n  .canvasColorDot .canvasColorDot__foreground {\n    position: absolute;\n    border: 1px solid #D3DAE6;\n    height: 32px;\n    width: 32px;\n    border-radius: 4px;\n    top: 0;\n    left: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center; }\n\n.canvasColorPalette .canvasColorPalette__dot {\n  display: inline-block;\n  margin: 0 4px 4px 0; }\n\n.canvasColorPickerPopover__popover {\n  width: 256px; }\n\n.canvasCustomElementForm {\n  min-width: 400px; }\n\n.canvasCustomElementForm__preview {\n  max-width: 210px;\n  min-height: 210px; }\n\n.canvasCustomElementForm__thumbnail {\n  padding-bottom: 0; }\n\n.canvasCustomElementForm__thumbnailHelp {\n  color: #69707D; }\n\n.canvasDataSource {\n  background-color: #FFF;\n  color: #343741;\n  border-radius: 1px solid #D3DAE6;\n  margin: 8px;\n  padding: 0 8px; }\n\n.canvasDataSource__section,\n.canvasDataSource__list {\n  padding: 12px 12px 0; }\n\n.canvasDataSource__sectionFooter {\n  padding: 0 12px; }\n\n.canvasDataSource__triggerButton {\n  color: #1a1c21;\n  font-size: 16px;\n  font-size: 1rem;\n  line-height: 1.5rem;\n  font-weight: 600;\n  letter-spacing: -0.02em;\n  line-height: 40px; }\n\n.canvasDataSource__triggerButtonIcon {\n  margin-right: 8px; }\n\n.canvasDataSource__card .euiCard__content {\n  padding-top: 0 !important; }\n\n.canvasDataSource__card + .canvasDataSource__card {\n  margin-top: 8px; }\n\n.canvasDataSource__card--isCurrent {\n  border-color: #017D73; }\n\n.canvasDatasourcePreview {\n  max-width: 1000px;\n  max-height: 60vh;\n  height: 100%; }\n  .canvasDatasourcePreview .canvasDatasourcePreview__panel {\n    height: calc(100% - 16px * 3); }\n\n.canvasDataTable {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between; }\n  .canvasDataTable .canvasDataTable__tableWrapper {\n    scrollbar-width: thin;\n    width: 100%;\n    height: 100%;\n    overflow: auto; }\n    .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-thumb {\n      background-color: rgba(105, 112, 125, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner, .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-track {\n      background-color: transparent; }\n    .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner {\n      background: transparent; }\n  .canvasDataTable .canvasDataTable__footer {\n    width: 100%;\n    display: flex;\n    justify-content: space-around;\n    padding: 8px;\n    border-top: 1px solid #D3DAE6; }\n  .canvasDataTable .canvasDataTable__table {\n    min-width: 100%; }\n  .canvasDataTable .canvasDataTable__th,\n  .canvasDataTable .canvasDataTable__td {\n    padding: 8px 4px;\n    border-bottom: 1px solid #D3DAE6; }\n  .canvasDataTable .canvasDataTable__th {\n    white-space: nowrap;\n    font-weight: bold; }\n\n.canvasDebug.euiCodeBlock {\n  padding: 0;\n  width: 100%;\n  height: 100%; }\n  .canvasDebug.euiCodeBlock .canvasDebug__content {\n    scrollbar-width: thin;\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    padding: 16px; }\n    .canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-thumb {\n      background-color: rgba(105, 112, 125, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-corner, .canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-track {\n      background-color: transparent; }\n\n.dom-preview {\n  pointer-events: none; }\n  .dom-preview .canvasLayoutAnnotation {\n    display: none; }\n\n.canvasElementCard__wrapper {\n  position: relative; }\n  .canvasElementCard__wrapper:hover .canvasElementCard__controls, .canvasElementCard__wrapper:focus .canvasElementCard__controls {\n    visibility: visible;\n    opacity: 1; }\n  .canvasElementCard__wrapper .canvasElementCard__controls {\n    position: absolute;\n    right: 8px;\n    top: 8px;\n    visibility: hidden;\n    opacity: 0;\n    transition: opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    transition-delay: 250ms;\n    background: rgba(255, 255, 255, 0.5);\n    border-radius: 4px; }\n\n.canvasElementCard .euiCard__top {\n  text-align: center;\n  width: calc(100% + 16px * 2);\n  height: 85px;\n  margin: calc(-1 * 16px) calc(-1 * 16px) 0; }\n\n.canvasElementCard .euiCard__image {\n  max-height: 100%;\n  max-width: 100%;\n  width: auto;\n  left: 0;\n  top: 0; }\n\n.canvasElementCard.canvasElementCard--hasIcon .euiCard__top {\n  min-width: 210px;\n  padding-top: 16px; }\n\n.canvasElement {\n  height: 100%;\n  width: 100%;\n  overflow: hidden; }\n\n.canvasElement__content {\n  height: 100%;\n  width: 100%; }\n\n.canvasExpressionInput .euiFormErrorText {\n  padding-left: 16px; }\n\n.canvasExpression--compactSize {\n  max-height: 480px; }\n\n.canvasExpressionInput__editor {\n  height: 256px;\n  padding-top: 16px;\n  flex-grow: 1; }\n\n.canvasExpression--fullSize {\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 5999; }\n  .canvasExpression--fullSize .canvasExpressionInput {\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column; }\n  .canvasExpression--fullSize .canvasExpressionInput__inner {\n    flex-grow: 1;\n    display: flex; }\n  .canvasExpression--fullSize .canvasTextArea__code {\n    flex-grow: 1;\n    padding-right: 40px; }\n\n.canvasExpression__settings {\n  padding: 12px 16px;\n  border-top: 1px solid #D3DAE6;\n  background-color: #FFF; }\n\n/* stylelint-disable selector-no-qualifying-type */\nbody.canvas-isFullscreen.euiBody--headerIsFixed {\n  padding-top: 0; }\n\nbody.canvas-isFullscreen .headerWrapper ~ .app-wrapper {\n  min-height: 100vh; }\n\nbody.canvas-isFullscreen.euiBody--collapsibleNavIsDocked {\n  padding-left: 0 !important; }\n\nbody.canvas-isFullscreen .kbnLoadingIndicator {\n  display: none; }\n\nbody.canvas-isFullscreen .canvasLayout {\n  background: #000; }\n\nbody.canvas-isFullscreen .canvasLayout__stageHeader,\nbody.canvas-isFullscreen .canvasLayout__sidebar,\nbody.canvas-isFullscreen .canvasLayout__footer,\nbody.canvas-isFullscreen .canvasGrid {\n  display: none; }\n\nbody.canvas-isFullscreen .canvasLayout__stageContentOverflow {\n  display: block;\n  overflow: visible;\n  position: static;\n  top: auto;\n  left: auto;\n  right: auto;\n  bottom: auto; }\n  body.canvas-isFullscreen .canvasLayout__stageContentOverflow .canvasWorkpad__buffer {\n    padding: 0;\n    margin: 0; }\n\nbody.canvas-isFullscreen .canvasLayout__rows {\n  max-width: none; }\n\nbody.canvas-isFullscreen .canvasLayout__rows,\nbody.canvas-isFullscreen .canvasLayout__cols {\n  align-items: center;\n  justify-content: center; }\n\nbody.canvas-isFullscreen .canvasCheckered {\n  display: flex;\n  background: none; }\n\nbody.canvas-isFullscreen .canvasPage {\n  box-shadow: none;\n  overflow: hidden; }\n\n.canvasFunctionForm > .canvasLoading {\n  text-align: center;\n  font-size: 20px; }\n\n.canvasAlignmentGuide {\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d; }\n\n.canvasBorderConnection {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  border-top: 1px dashed #D3DAE6;\n  border-left: 1px dashed #D3DAE6; }\n\n.canvasBorderResizeHandle {\n  box-shadow: 0 2px 2px -1px rgba(152, 162, 179, 0.3);\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  display: block;\n  position: absolute;\n  height: 8px;\n  width: 8px;\n  margin-left: -4px;\n  margin-top: -4px;\n  background-color: #FFF;\n  border: 1px solid #69707D; }\n\n.canvasDragBoxAnnotation {\n  position: absolute;\n  background: none;\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  outline: dashed 1px #69707D;\n  pointer-events: none; }\n\n.canvasHoverAnnotation {\n  position: absolute;\n  background: none;\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  outline: solid 1px #54B399;\n  pointer-events: none; }\n\n.canvasRotationHandle {\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  display: block;\n  position: absolute;\n  height: 24px;\n  width: 0;\n  margin-left: -1px;\n  margin-top: -12px;\n  border-top: 1px dashed #D3DAE6;\n  border-left: 1px dashed #D3DAE6; }\n\n.canvasRotationHandle__handle {\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  display: block;\n  position: absolute;\n  height: 9px;\n  width: 9px;\n  margin-left: -5px;\n  margin-top: -6px;\n  border-radius: 50%;\n  background-color: #98A2B3; }\n\n.tooltipAnnotation {\n  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1), 0 6px 12px 0 rgba(0, 0, 0, 0.1), 0 4px 4px 0 rgba(0, 0, 0, 0.1), 0 2px 2px 0 rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  background-color: #404040;\n  color: #FFF;\n  z-index: 9000;\n  max-width: 256px;\n  overflow-wrap: break-word;\n  font-size: 12px;\n  font-size: 0.75rem;\n  line-height: 1.5;\n  padding: 8px;\n  position: absolute;\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  outline: none;\n  pointer-events: none; }\n\n.canvasLoading {\n  display: flex;\n  color: #D3DAE6;\n  align-items: center; }\n\n.canvasPageManager .canvasPageManager__pages {\n  position: relative; }\n\n.canvasPageManager .canvasPageManager__pages,\n.canvasPageManager .canvasPageManager__addPage {\n  height: 144px; }\n\n.canvasPageManager .canvasPageManager--trayPop > div {\n  animation: trayPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  opacity: 0;\n  animation-fill-mode: forwards; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(1n) {\n  animation-delay: 0.05s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(2n) {\n  animation-delay: 0.1s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(3n) {\n  animation-delay: 0.15s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(4n) {\n  animation-delay: 0.2s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(5n) {\n  animation-delay: 0.25s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(6n) {\n  animation-delay: 0.3s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(7n) {\n  animation-delay: 0.35s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(8n) {\n  animation-delay: 0.4s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(9n) {\n  animation-delay: 0.45s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(10n) {\n  animation-delay: 0.5s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(11n) {\n  animation-delay: 0.55s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(12n) {\n  animation-delay: 0.6s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(13n) {\n  animation-delay: 0.65s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(14n) {\n  animation-delay: 0.7s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(15n) {\n  animation-delay: 0.75s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(16n) {\n  animation-delay: 0.8s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(17n) {\n  animation-delay: 0.85s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(18n) {\n  animation-delay: 0.9s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(19n) {\n  animation-delay: 0.95s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(20n) {\n  animation-delay: 1s; }\n\n.canvasPageManager .canvasPageManager__pageList {\n  scrollbar-width: thin;\n  display: flex;\n  overflow-x: auto;\n  overflow-y: hidden;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0; }\n  .canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-corner, .canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasPageManager .canvasPageManager__addPage {\n  width: 56px;\n  background: #017D73;\n  color: #FFF;\n  opacity: 0;\n  animation: buttonPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  animation-fill-mode: forwards; }\n\n.canvasPageManager .canvasPageManager__addPageTip {\n  display: block;\n  height: 100%; }\n\n.canvasPageManager .canvasPageManager__page {\n  padding: 16px 16px 16px 8px; }\n  .canvasPageManager .canvasPageManager__page:focus, .canvasPageManager .canvasPageManager__page-isActive {\n    background-color: rgba(143, 165, 199, 0.5);\n    outline: none;\n    text-decoration: none; }\n  .canvasPageManager .canvasPageManager__page-isActive:focus .canvasPageManager__pagePreview {\n    outline-color: #54B399; }\n  .canvasPageManager .canvasPageManager__page:hover, .canvasPageManager .canvasPageManager__page:focus {\n    text-decoration: none; }\n    .canvasPageManager .canvasPageManager__page:hover .canvasPageManager__pagePreview, .canvasPageManager .canvasPageManager__page:focus .canvasPageManager__pagePreview {\n      box-shadow: 0 6px 12px -1px rgba(152, 162, 179, 0.3), 0 4px 4px -1px rgba(152, 162, 179, 0.3), 0 2px 2px 0 rgba(152, 162, 179, 0.3); }\n    .canvasPageManager .canvasPageManager__page:hover .canvasPageManager__controls, .canvasPageManager .canvasPageManager__page:focus .canvasPageManager__controls {\n      visibility: visible;\n      opacity: 1; }\n  .canvasPageManager .canvasPageManager__page-isActive .canvasPageManager__pagePreview {\n    box-shadow: 0 6px 12px -1px rgba(152, 162, 179, 0.2), 0 4px 4px -1px rgba(152, 162, 179, 0.2), 0 2px 2px 0 rgba(152, 162, 179, 0.2);\n    outline: 2px solid #D3DAE6;\n    outline-color: #69707D; }\n\n.canvasPageManager .canvasPageManager__pageNumber {\n  color: #69707D; }\n\n.canvasPageManager .canvasPageManager__pagePreview {\n  box-shadow: 0 2px 2px -1px rgba(152, 162, 179, 0.3), 0 1px 5px -2px rgba(152, 162, 179, 0.3);\n  position: relative;\n  overflow: hidden;\n  color: #343741; }\n  .canvasPageManager .canvasPageManager__pagePreview .canvasPositionable {\n    position: absolute; }\n\n.canvasPageManager .canvasPageManager__controls {\n  position: absolute;\n  right: 8px;\n  top: 8px;\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  transition-delay: 250ms;\n  background: rgba(255, 255, 255, 0.5);\n  border-radius: 4px; }\n\n@keyframes buttonPop {\n  0% {\n    opacity: 0;\n    transform: translateX(100%); }\n  1% {\n    opacity: 0;\n    transform: translateX(100%); }\n  100% {\n    opacity: 1;\n    transform: translateY(0); } }\n\n@keyframes trayPop {\n  0% {\n    opacity: 0;\n    transform: translateY(100%); }\n  1% {\n    opacity: 0;\n    transform: translateY(100%); }\n  100% {\n    opacity: 1;\n    transform: translateY(0); } }\n\n.canvasPositionable {\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d; }\n\n.canvasShapePreview {\n  width: 40px;\n  height: 40px; }\n  .canvasShapePreview svg {\n    width: 100%;\n    height: 100%; }\n\n.canvasShapePicker {\n  width: 192px; }\n\n.canvasSidebar {\n  scrollbar-width: thin;\n  width: 100%;\n  max-height: 100vh;\n  overflow-y: auto;\n  overflow-x: hidden;\n  position: absolute;\n  top: 0;\n  bottom: 0; }\n  .canvasSidebar::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasSidebar::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasSidebar::-webkit-scrollbar-corner, .canvasSidebar::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasSidebar__pop {\n  animation: sidebarPop 150ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n\n.canvasSidebarFlyout {\n  width: 350px;\n  min-width: 350px; }\n\n.canvasSidebar__elementButtons {\n  background: #e4e9f2;\n  margin-bottom: 8px; }\n\n.canvasSidebar__panel {\n  border-bottom: 1px solid #D3DAE6;\n  padding: 8px 12px; }\n  .canvasSidebar__panel--isEmpty {\n    border-bottom: none; }\n  .canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion {\n    margin-bottom: -8px; }\n  .canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion:after {\n    content: none; }\n  .canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion.euiAccordion-isOpen:after {\n    display: none; }\n\n.canvasSidebar__panel-noMinWidth .euiButton {\n  min-width: 0; }\n\n.canvasSidebar__expandable + .canvasSidebar__expandable {\n  margin-top: 0; }\n  .canvasSidebar__expandable + .canvasSidebar__expandable .canvasSidebar__accordion:before {\n    display: none; }\n\n.canvasSidebar__accordion {\n  padding: 12px;\n  margin: 0 -12px;\n  background: #F5F7FA;\n  position: relative; }\n  .canvasSidebar__accordion.euiAccordion-isOpen {\n    background: transparent; }\n  .canvasSidebar__accordion:before, .canvasSidebar__accordion:after {\n    content: \'\';\n    height: 1px;\n    position: absolute;\n    left: 0;\n    width: 100%;\n    background: #D3DAE6; }\n  .canvasSidebar__accordion:before {\n    top: 0; }\n  .canvasSidebar__accordion:after {\n    bottom: 0; }\n\n.canvasSidebar__accordionContent {\n  padding-top: 16px;\n  padding-left: 28px; }\n\n@keyframes sidebarPop {\n  0% {\n    opacity: 0; }\n  1% {\n    opacity: 0; }\n  100% {\n    opacity: 1; } }\n\n.canvasLayout__sidebarHeader {\n  padding: calc(12px + 2px) 8px; }\n\n.canvasLayout__sidebarHeaderWorkpad {\n  padding: calc(8px * .75) 0; }\n\n.canvasToolbar {\n  position: relative; }\n\n.canvasTray__toggle {\n  position: absolute;\n  top: -20px;\n  left: 50%;\n  background-color: #fbfcfd;\n  margin: 0;\n  border-radius: 4px 4px 0 0; }\n  .canvasTray__toggle > .euiFlexItem {\n    margin: 0; }\n  .canvasTray__toggle button {\n    padding: 4px 12px;\n    box-shadow: 0 -2px 1px rgba(0, 0, 0, 0.1); }\n\n.canvasToolbar__controls {\n  padding: 12px;\n  height: 100%; }\n\n.canvasToolbar__container {\n  width: 100%;\n  height: 64px;\n  background-color: #e4e9f2;\n  position: relative;\n  z-index: 200; }\n\n.canvasTray {\n  box-shadow: 0 0 12px -1px rgba(152, 162, 179, 0.2), 0 0 4px -1px rgba(152, 162, 179, 0.2), 0 0 2px 0 rgba(152, 162, 179, 0.2);\n  flex-direction: column; }\n\n.canvasTray__panel {\n  background-color: #fbfcfd;\n  border-radius: 0; }\n\n.canvasWorkpad {\n  position: relative; }\n\n.canvasWorkpad__buffer {\n  padding: 16px;\n  margin: auto; }\n\n.canvasGrid {\n  position: absolute;\n  -webkit-user-select: none;\n          user-select: none;\n  pointer-events: none;\n  background-image: linear-gradient(to right, #98A2B3 1px, transparent 1px), linear-gradient(to bottom, #98A2B3 1px, transparent 1px);\n  background-size: 50px 50px;\n  top: 0; }\n\n.canvasElementMenu__popoverButton {\n  margin-right: 8px; }\n\n.canvasShareMenu__panelContent {\n  padding: 16px; }\n\n.canvasShareMenu__reportingConfig .euiCodeBlock__pre {\n  scrollbar-width: thin;\n  overflow-x: auto;\n  white-space: pre; }\n  .canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-corner, .canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasViewMenu__kioskSettings,\n.canvasViewMenu__refreshSettings {\n  padding: 16px; }\n\n.canvasWorkpad__upload--compressed.euiFilePicker--compressed.euiFilePicker .euiFilePicker__prompt {\n  height: 40px;\n  padding: 12px;\n  padding-left: 40px; }\n\n.canvasWorkpad__upload--compressed.euiFilePicker--compressed.euiFilePicker .euiFilePicker__icon {\n  top: 12px; }\n\n@media only screen and (max-width: 574px) {\n  .canvasWorkpad__upload--compressed .euiFilePicker__wrap {\n    max-width: none; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .canvasWorkpad__upload--compressed .euiFilePicker__wrap {\n    max-width: none; } }\n\n.canvasWorkpad__dropzone {\n  border: 2px dashed transparent; }\n\n.canvasWorkpad__dropzone--active {\n  background-color: #F5F7FA;\n  border-color: #D3DAE6; }\n\n.canvasWorkpad__dropzoneTable .euiTable {\n  background-color: transparent; }\n\n.canvasWorkpad__dropzoneTable--tags .euiTableCellContent {\n  flex-wrap: wrap; }\n\n.canvasWorkpad__dropzoneTable--tags .euiHealth {\n  width: 100%; }\n\n.canvasPage {\n  box-shadow: 0 0 12px -1px rgba(152, 162, 179, 0.4), 0 0 4px -1px rgba(152, 162, 179, 0.4), 0 0 2px 0 rgba(152, 162, 179, 0.4);\n  z-index: initial;\n  position: absolute;\n  top: 0;\n  transform-style: preserve-3d !important;\n  background-color: #FFF; }\n\n.canvasInteractivePage {\n  -webkit-user-select: none;\n          user-select: none; }\n\n.canvasLayout__stage .canvasStaticPage.isInactive {\n  visibility: hidden;\n  opacity: 0; }\n\n.canvasAdvancedFilter {\n  width: 100%;\n  font-size: inherit; }\n  .canvasAdvancedFilter .canvasAdvancedFilter__input {\n    background-color: #FFF;\n    width: 100%;\n    padding: 4px 16px;\n    border: 1px solid #D3DAE6;\n    border-radius: 4px;\n    font-size: inherit;\n    line-height: 19px;\n    font-family: monospace; }\n    .canvasAdvancedFilter .canvasAdvancedFilter__input:focus {\n      box-shadow: none; }\n  .canvasAdvancedFilter .canvasAdvancedFilter__button {\n    width: 100%;\n    padding: 4px 8px;\n    border: 1px solid #D3DAE6;\n    border-radius: 4px;\n    background-color: #FFF;\n    font-size: inherit; }\n    .canvasAdvancedFilter .canvasAdvancedFilter__button:hover {\n      background-color: #F5F7FA; }\n\n.canvasDropdownFilter {\n  width: 100%;\n  font-size: inherit;\n  position: relative; }\n  .canvasDropdownFilter .canvasDropdownFilter__select {\n    background-color: #FFF;\n    width: 100%;\n    padding: 4px 16px;\n    border: 1px solid #D3DAE6;\n    border-radius: 4px;\n    -webkit-appearance: none;\n            appearance: none;\n    font-size: inherit; }\n    .canvasDropdownFilter .canvasDropdownFilter__select:after {\n      display: none; }\n    .canvasDropdownFilter .canvasDropdownFilter__select:focus {\n      box-shadow: none; }\n  .canvasDropdownFilter .canvasDropdownFilter__icon {\n    position: absolute;\n    right: 8px;\n    top: 8px;\n    pointer-events: none; }\n\n.canvasEmbeddable .embPanel {\n  border: none;\n  background: none; }\n  .canvasEmbeddable .embPanel .embPanel__title {\n    margin-bottom: 4px; }\n  .canvasEmbeddable .embPanel .embPanel__optionsMenuButton {\n    border-radius: 4px; }\n  .canvas-isFullscreen .canvasEmbeddable .embPanel .embPanel__optionsMenuButton {\n    opacity: 0; }\n  .canvas-isFullscreen .canvasEmbeddable .embPanel:focus .embPanel__optionsMenuButton,\n  .canvas-isFullscreen .canvasEmbeddable .embPanel:hover .embPanel__optionsMenuButton {\n    opacity: 1; }\n\n.canvasEmbeddable .euiTable {\n  background: none; }\n\n.legendLabel {\n  color: #343741; }\n\n.legendColorBox > div > div {\n  border-radius: 16px; }\n\n.revealImage {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none; }\n  .revealImage .revealImageAligner {\n    background-size: contain;\n    background-repeat: no-repeat; }\n  .revealImage .revealImage__image {\n    -webkit-user-select: none;\n            user-select: none; }\n\n.canvasTimeFilter .euiSuperDatePicker__flexWrapper {\n  width: 100%; }\n  .canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall {\n    margin: 0; }\n    .canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall > .euiFlexItem {\n      margin: 0; }\n\n.canvasArgImage .canvasArgImage--preview {\n  max-height: 100px;\n  overflow: hidden;\n  border: 1px solid #D3DAE6; }\n',""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(211);var content=__webpack_require__(459);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(212);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n  This file contains all the global scope garbage that should be removed\n  when the UI framework implements everything we need\n*/\n.canvasContainerWrapper .euiAccordion__childWrapper {\n  overflow-x: hidden; }\n\n.canvasContainerWrapper .clickable {\n  cursor: pointer; }\n\n.canvasContainerWrapper .canvasPalettePicker__swatchesPopover {\n  display: block; }\n  .canvasContainerWrapper .canvasPalettePicker__swatchesPopover .canvasPalettePicker__swatchesPopoverAnchor {\n    display: block; }\n\n.canvasContainerWrapper .euiImageFullScreen {\n  min-width: 100px; }\n\n@media only screen and (min-width: 768px) and (max-width: 991px) {\n  .canvasModal--fixedSize {\n    width: 75vw;\n    height: 75vh;\n    max-height: 680px; } }\n\n@media only screen and (min-width: 992px) and (max-width: 1199px) {\n  .canvasModal--fixedSize {\n    width: 75vw;\n    height: 75vh;\n    max-height: 680px; } }\n\n@media only screen and (min-width: 1200px) {\n  .canvasModal--fixedSize {\n    width: 75vw;\n    height: 75vh;\n    max-height: 680px; } }\n\n/*\n  Canvas global SASS varialbes\n*/\n.canvas.canvasContainerWrapper {\n  display: flex;\n  flex-grow: 1; }\n\n.canvas.canvasContainer {\n  display: flex;\n  flex-grow: 1;\n  background-color: #1a1b20; }\n\n.canvasContainer--loading {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translateY(-50%);\n  text-align: center; }\n\n.canvasCheckered {\n  background-color: #FFF;\n  background-image: linear-gradient(45deg, #343741 25%, transparent 25%), linear-gradient(-45deg, #343741 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #343741 75%), linear-gradient(-45deg, transparent 75%, #343741 75%);\n  background-size: 8px 8px;\n  position: relative; }\n\n.canvasTextArea__code {\n  scrollbar-width: thin;\n  font-size: 14px;\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace;\n  width: 100%;\n  max-width: 100%; }\n  .canvasTextArea__code::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasTextArea__code::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasTextArea__code::-webkit-scrollbar-corner, .canvasTextArea__code::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasContextMenu--topBorder {\n  border-top: 1px solid #343741; }\n\n#canvas-app {\n  overflow-y: hidden; }\n  #canvas-app .window-error {\n    position: absolute;\n    bottom: 10px;\n    right: 10px;\n    background-color: #F86B63;\n    color: #FFF;\n    display: block;\n    z-index: 2000;\n    padding: 10px;\n    max-width: 500px; }\n    #canvas-app .window-error a {\n      color: #FFF;\n      font-weight: bold; }\n\n.canvasHomeApp {\n  width: 100%; }\n  .canvasHomeApp .canvasHomeApp__content {\n    width: 100%; }\n  .canvasHomeApp .canvasHomeApp__modalHeader {\n    padding-right: 24px; }\n  .canvasHomeApp .canvasHomeApp__modalHeader,\n  .canvasHomeApp .canvasHomeApp__modalBody {\n    width: auto; }\n  @media only screen and (max-width: 574px) {\n    .canvasHomeApp .euiModalBody__overflow {\n      max-height: 80vh; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .canvasHomeApp .euiModalBody__overflow {\n      max-height: 80vh; } }\n\n.canvasLayout {\n  display: flex;\n  background: #1a1b20;\n  flex-grow: 1;\n  overflow: hidden; }\n\n.canvasLayout__rows {\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  max-height: 100vh;\n  max-width: 100%; }\n\n.canvasLayout__cols {\n  display: flex;\n  align-items: stretch;\n  flex-grow: 1; }\n\n.canvasLayout__stage {\n  flex-grow: 1;\n  flex-basis: auto;\n  display: flex;\n  flex-direction: column; }\n\n.canvasLayout__stageHeader {\n  flex-grow: 0;\n  flex-basis: auto;\n  padding: 1px 16px 0;\n  font-size: 14px;\n  border-bottom: 1px solid #343741;\n  background: #25262E;\n  -webkit-user-select: none;\n          user-select: none; }\n\n.canvasLayout__stageHeaderInner {\n  height: 48px; }\n\n.canvasLayout__stageContent {\n  flex-grow: 1;\n  flex-basis: auto;\n  position: relative; }\n\n.canvasLayout__stageContentOverflow {\n  scrollbar-width: thin;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: auto;\n  display: flex;\n  align-items: center; }\n  .canvasLayout__stageContentOverflow::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasLayout__stageContentOverflow::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasLayout__stageContentOverflow::-webkit-scrollbar-corner, .canvasLayout__stageContentOverflow::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasLayout__sidebar {\n  flex-grow: 0;\n  flex-basis: auto;\n  width: 350px;\n  background: #25262E;\n  display: flex;\n  position: relative;\n  border-left: 1px solid #343741; }\n  .canvasLayout__sidebar .euiPanel {\n    margin-bottom: 8px; }\n\n.canvasLayout__footer {\n  flex-grow: 0;\n  flex-basis: auto;\n  width: 100%;\n  background-color: #1a1b20;\n  z-index: 4000;\n  font-size: 14px; }\n\n.canvasExport .canvasPage {\n  position: relative;\n  overflow: hidden;\n  box-shadow: none; }\n\n.canvasArg__add {\n  padding: 12px;\n  text-align: left;\n  width: 100%; }\n  .canvasArg__add:not(:last-child) {\n    border-bottom: 1px solid #343741; }\n  .canvasArg__add:hover {\n    background-color: #25262E; }\n    .canvasArg__add:hover label {\n      color: #D4DAE5; }\n\n.canvasArg__addArg {\n  margin-right: -8px; }\n\n.canvasArg__addPopover {\n  width: 250px; }\n\n.canvasArg {\n  margin-top: 8px; }\n\n.canvasArg__remove {\n  min-width: 16px;\n  padding: 4px 0; }\n\n.canvasArg__form {\n  position: relative; }\n\n.canvasArg__tooltip {\n  margin-left: -32px; }\n\n.canvasSidebar__accordion .canvasArg__form {\n  position: static; }\n\n.canvasArg__switch {\n  padding-top: calc(8px * .75); }\n\n.canvasAssetManager .canvasAssetManager__modalHeader {\n  flex-wrap: wrap; }\n\n@media only screen and (max-width: 574px) {\n  .canvasAssetManager .canvasAssetManager__modalHeaderTitle {\n    width: 100%;\n    padding-bottom: 16px; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .canvasAssetManager .canvasAssetManager__modalHeaderTitle {\n    width: 100%;\n    padding-bottom: 16px; } }\n\n.canvasAssetManager .canvasAssetManager__meterWrapper {\n  flex-grow: 0;\n  min-width: 40%;\n  align-items: center; }\n  @media only screen and (max-width: 574px) {\n    .canvasAssetManager .canvasAssetManager__meterWrapper {\n      flex-grow: 1; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .canvasAssetManager .canvasAssetManager__meterWrapper {\n      flex-grow: 1; } }\n\n.canvasAssetManager .canvasAssetManager__meterLabel {\n  margin: 0; }\n\n.canvasAssetManager .canvasAssetManager__fileUploadWrapper {\n  justify-content: flex-end;\n  padding-right: 16px; }\n\n.canvasAssetManager .canvasAssetManager__modalFooter {\n  justify-content: space-between; }\n\n.canvasAssetManager .canvasAssetManager__emptyPanel {\n  max-width: 400px;\n  margin: 32px auto 0; }\n\n.canvasAsset {\n  text-align: center;\n  overflow: hidden; }\n  .canvasAsset .canvasAsset__thumb {\n    margin: -8px;\n    margin-bottom: 0;\n    font-size: 0;\n    height: 164px; }\n  .canvasAsset .canvasAsset__img {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%; }\n    .canvasAsset .canvasAsset__img img {\n      width: auto;\n      max-width: 100%;\n      max-height: 164px; }\n\n.canvasAssetPicker {\n  scrollbar-width: thin;\n  max-height: 120px;\n  overflow-x: hidden;\n  overflow-y: auto; }\n  .canvasAssetPicker::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasAssetPicker::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasAssetPicker::-webkit-scrollbar-corner, .canvasAssetPicker::-webkit-scrollbar-track {\n    background-color: transparent; }\n  .canvasAssetPicker .canvasAssetPicker__link {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    text-align: center; }\n    .canvasAssetPicker .canvasAssetPicker__link:hover {\n      outline: solid 4px rgba(54, 162, 239, 0.1); }\n  .canvasAssetPicker .canvasAssetPicker__selected {\n    position: absolute;\n    top: 4px;\n    right: 4px; }\n  .canvasAssetPicker .euiImage {\n    width: 40px;\n    height: 40px; }\n\n.autocomplete {\n  position: relative; }\n\n.autocompletePopup {\n  position: absolute;\n  top: -262px;\n  height: 260px;\n  width: 100%; }\n\n.autocompleteItems {\n  border-right: 1px solid #343741; }\n\n.autocompleteItems,\n.autocompleteReference {\n  scrollbar-width: thin;\n  height: 258px;\n  overflow: auto; }\n  .autocompleteItems::-webkit-scrollbar,\n  .autocompleteReference::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .autocompleteItems::-webkit-scrollbar-thumb,\n  .autocompleteReference::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .autocompleteItems::-webkit-scrollbar-corner, .autocompleteItems::-webkit-scrollbar-track,\n  .autocompleteReference::-webkit-scrollbar-corner,\n  .autocompleteReference::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.autocompleteReference {\n  padding: 8px 12px;\n  background-color: #1e1e25; }\n\n.autocompleteItem {\n  padding: 8px 12px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace;\n  font-weight: 400; }\n\n.autocompleteItem--isActive {\n  color: #36A2EF;\n  background-color: rgba(54, 162, 239, 0.3); }\n\n.autocompleteType {\n  padding: 8px; }\n\n.autocompleteTable .euiTable {\n  background-color: transparent; }\n\n.autocompleteDescList .euiDescriptionList__description {\n  margin-right: 8px; }\n\n.canvasClipboard {\n  cursor: pointer; }\n\n.canvasColorDot {\n  display: inline-block;\n  position: relative;\n  height: 32px;\n  width: 32px; }\n  .canvasColorDot .canvasColorDot__background {\n    position: absolute;\n    height: 32px;\n    width: 32px;\n    border-radius: 6px;\n    top: 0;\n    left: 0; }\n  .canvasColorDot .canvasColorDot__foreground {\n    position: absolute;\n    border: 1px solid #343741;\n    height: 32px;\n    width: 32px;\n    border-radius: 6px;\n    top: 0;\n    left: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center; }\n\n.canvasColorPalette .canvasColorPalette__dot {\n  display: inline-block;\n  margin: 0 4px 4px 0; }\n\n.canvasColorPickerPopover__popover {\n  width: 256px; }\n\n.canvasCustomElementForm {\n  min-width: 400px; }\n\n.canvasCustomElementForm__preview {\n  max-width: 210px;\n  min-height: 210px; }\n\n.canvasCustomElementForm__thumbnail {\n  padding-bottom: 0; }\n\n.canvasCustomElementForm__thumbnailHelp {\n  color: #98A2B3; }\n\n.canvasDataSource {\n  background-color: #1D1E24;\n  color: #DFE5EF;\n  border-radius: 1px solid #343741;\n  margin: 8px;\n  padding: 0 8px; }\n\n.canvasDataSource__section,\n.canvasDataSource__list {\n  padding: 12px 12px 0; }\n\n.canvasDataSource__sectionFooter {\n  padding: 0 12px; }\n\n.canvasDataSource__triggerButton {\n  color: #DFE5EF;\n  font-size: 16px;\n  font-size: 1.14286rem;\n  line-height: 1.71429rem;\n  font-weight: 700;\n  line-height: 40px; }\n\n.canvasDataSource__triggerButtonIcon {\n  margin-right: 8px; }\n\n.canvasDataSource__card .euiCard__content {\n  padding-top: 0 !important; }\n\n.canvasDataSource__card + .canvasDataSource__card {\n  margin-top: 8px; }\n\n.canvasDataSource__card--isCurrent {\n  border-color: #7DDED8; }\n\n.canvasDatasourcePreview {\n  max-width: 1000px;\n  max-height: 60vh;\n  height: 100%; }\n  .canvasDatasourcePreview .canvasDatasourcePreview__panel {\n    height: calc(100% - 16px * 3); }\n\n.canvasDataTable {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between; }\n  .canvasDataTable .canvasDataTable__tableWrapper {\n    scrollbar-width: thin;\n    width: 100%;\n    height: 100%;\n    overflow: auto; }\n    .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-thumb {\n      background-color: rgba(152, 162, 179, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner, .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-track {\n      background-color: transparent; }\n    .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner {\n      background: transparent; }\n  .canvasDataTable .canvasDataTable__footer {\n    width: 100%;\n    display: flex;\n    justify-content: space-around;\n    padding: 8px;\n    border-top: 1px solid #343741; }\n  .canvasDataTable .canvasDataTable__table {\n    min-width: 100%; }\n  .canvasDataTable .canvasDataTable__th,\n  .canvasDataTable .canvasDataTable__td {\n    padding: 8px 4px;\n    border-bottom: 1px solid #343741; }\n  .canvasDataTable .canvasDataTable__th {\n    white-space: nowrap;\n    font-weight: bold; }\n\n.canvasDebug.euiCodeBlock {\n  padding: 0;\n  width: 100%;\n  height: 100%; }\n  .canvasDebug.euiCodeBlock .canvasDebug__content {\n    scrollbar-width: thin;\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    padding: 16px; }\n    .canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-thumb {\n      background-color: rgba(152, 162, 179, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-corner, .canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-track {\n      background-color: transparent; }\n\n.dom-preview {\n  pointer-events: none; }\n  .dom-preview .canvasLayoutAnnotation {\n    display: none; }\n\n.canvasElementCard__wrapper {\n  position: relative; }\n  .canvasElementCard__wrapper:hover .canvasElementCard__controls, .canvasElementCard__wrapper:focus .canvasElementCard__controls {\n    visibility: visible;\n    opacity: 1; }\n  .canvasElementCard__wrapper .canvasElementCard__controls {\n    position: absolute;\n    right: 8px;\n    top: 8px;\n    visibility: hidden;\n    opacity: 0;\n    transition: opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    transition-delay: 250ms;\n    background: rgba(255, 255, 255, 0.5);\n    border-radius: 6px; }\n\n.canvasElementCard .euiCard__top {\n  text-align: center;\n  width: calc(100% + 16px * 2);\n  height: 85px;\n  margin: calc(-1 * 16px) calc(-1 * 16px) 0; }\n\n.canvasElementCard .euiCard__image {\n  max-height: 100%;\n  max-width: 100%;\n  width: auto;\n  left: 0;\n  top: 0; }\n\n.canvasElementCard.canvasElementCard--hasIcon .euiCard__top {\n  min-width: 210px;\n  padding-top: 16px; }\n\n.canvasElement {\n  height: 100%;\n  width: 100%;\n  overflow: hidden; }\n\n.canvasElement__content {\n  height: 100%;\n  width: 100%; }\n\n.canvasExpressionInput .euiFormErrorText {\n  padding-left: 16px; }\n\n.canvasExpression--compactSize {\n  max-height: 480px; }\n\n.canvasExpressionInput__editor {\n  height: 256px;\n  padding-top: 16px;\n  flex-grow: 1; }\n\n.canvasExpression--fullSize {\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 5999; }\n  .canvasExpression--fullSize .canvasExpressionInput {\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column; }\n  .canvasExpression--fullSize .canvasExpressionInput__inner {\n    flex-grow: 1;\n    display: flex; }\n  .canvasExpression--fullSize .canvasTextArea__code {\n    flex-grow: 1;\n    padding-right: 40px; }\n\n.canvasExpression__settings {\n  padding: 12px 16px;\n  border-top: 1px solid #343741;\n  background-color: #1D1E24; }\n\n/* stylelint-disable selector-no-qualifying-type */\nbody.canvas-isFullscreen.euiBody--headerIsFixed {\n  padding-top: 0; }\n\nbody.canvas-isFullscreen .headerWrapper ~ .app-wrapper {\n  min-height: 100vh; }\n\nbody.canvas-isFullscreen.euiBody--collapsibleNavIsDocked {\n  padding-left: 0 !important; }\n\nbody.canvas-isFullscreen .kbnLoadingIndicator {\n  display: none; }\n\nbody.canvas-isFullscreen .canvasLayout {\n  background: #000; }\n\nbody.canvas-isFullscreen .canvasLayout__stageHeader,\nbody.canvas-isFullscreen .canvasLayout__sidebar,\nbody.canvas-isFullscreen .canvasLayout__footer,\nbody.canvas-isFullscreen .canvasGrid {\n  display: none; }\n\nbody.canvas-isFullscreen .canvasLayout__stageContentOverflow {\n  display: block;\n  overflow: visible;\n  position: static;\n  top: auto;\n  left: auto;\n  right: auto;\n  bottom: auto; }\n  body.canvas-isFullscreen .canvasLayout__stageContentOverflow .canvasWorkpad__buffer {\n    padding: 0;\n    margin: 0; }\n\nbody.canvas-isFullscreen .canvasLayout__rows {\n  max-width: none; }\n\nbody.canvas-isFullscreen .canvasLayout__rows,\nbody.canvas-isFullscreen .canvasLayout__cols {\n  align-items: center;\n  justify-content: center; }\n\nbody.canvas-isFullscreen .canvasCheckered {\n  display: flex;\n  background: none; }\n\nbody.canvas-isFullscreen .canvasPage {\n  box-shadow: none;\n  overflow: hidden; }\n\n.canvasFunctionForm > .canvasLoading {\n  text-align: center;\n  font-size: 20px; }\n\n.canvasAlignmentGuide {\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d; }\n\n.canvasBorderConnection {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  border-top: 1px dashed #343741;\n  border-left: 1px dashed #343741; }\n\n.canvasBorderResizeHandle {\n  box-shadow: 0 0.8px 0.8px rgba(0, 0, 0, 0.1), 0 2.3px 2px rgba(0, 0, 0, 0.075);\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  display: block;\n  position: absolute;\n  height: 8px;\n  width: 8px;\n  margin-left: -4px;\n  margin-top: -4px;\n  background-color: #1D1E24;\n  border: 1px solid #98A2B3; }\n\n.canvasDragBoxAnnotation {\n  position: absolute;\n  background: none;\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  outline: dashed 1px #98A2B3;\n  pointer-events: none; }\n\n.canvasHoverAnnotation {\n  position: absolute;\n  background: none;\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  outline: solid 1px #54B399;\n  pointer-events: none; }\n\n.canvasRotationHandle {\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  display: block;\n  position: absolute;\n  height: 24px;\n  width: 0;\n  margin-left: -1px;\n  margin-top: -12px;\n  border-top: 1px dashed #343741;\n  border-left: 1px dashed #343741; }\n\n.canvasRotationHandle__handle {\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  display: block;\n  position: absolute;\n  height: 9px;\n  width: 9px;\n  margin-left: -5px;\n  margin-top: -6px;\n  border-radius: 50%;\n  background-color: #535966; }\n\n.tooltipAnnotation {\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.25), 0 3.6px 13px rgba(0, 0, 0, 0.175), 0 8.4px 23px rgba(0, 0, 0, 0.15), 0 23px 35px rgba(0, 0, 0, 0.125);\n  border-radius: 6px;\n  background-color: black;\n  color: #FFF;\n  z-index: 9000;\n  max-width: 256px;\n  overflow-wrap: break-word;\n  font-size: 12px;\n  font-size: 0.85714rem;\n  line-height: 1.14286rem;\n  padding: 8px;\n  position: absolute;\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  outline: none;\n  pointer-events: none; }\n\n.canvasLoading {\n  display: flex;\n  color: #343741;\n  align-items: center; }\n\n.canvasPageManager .canvasPageManager__pages {\n  position: relative; }\n\n.canvasPageManager .canvasPageManager__pages,\n.canvasPageManager .canvasPageManager__addPage {\n  height: 144px; }\n\n.canvasPageManager .canvasPageManager--trayPop > div {\n  animation: trayPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  opacity: 0;\n  animation-fill-mode: forwards; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(1n) {\n  animation-delay: 0.05s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(2n) {\n  animation-delay: 0.1s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(3n) {\n  animation-delay: 0.15s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(4n) {\n  animation-delay: 0.2s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(5n) {\n  animation-delay: 0.25s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(6n) {\n  animation-delay: 0.3s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(7n) {\n  animation-delay: 0.35s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(8n) {\n  animation-delay: 0.4s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(9n) {\n  animation-delay: 0.45s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(10n) {\n  animation-delay: 0.5s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(11n) {\n  animation-delay: 0.55s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(12n) {\n  animation-delay: 0.6s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(13n) {\n  animation-delay: 0.65s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(14n) {\n  animation-delay: 0.7s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(15n) {\n  animation-delay: 0.75s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(16n) {\n  animation-delay: 0.8s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(17n) {\n  animation-delay: 0.85s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(18n) {\n  animation-delay: 0.9s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(19n) {\n  animation-delay: 0.95s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(20n) {\n  animation-delay: 1s; }\n\n.canvasPageManager .canvasPageManager__pageList {\n  scrollbar-width: thin;\n  display: flex;\n  overflow-x: auto;\n  overflow-y: hidden;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0; }\n  .canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-corner, .canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasPageManager .canvasPageManager__addPage {\n  width: 56px;\n  background: #7DDED8;\n  color: #FFF;\n  opacity: 0;\n  animation: buttonPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  animation-fill-mode: forwards; }\n\n.canvasPageManager .canvasPageManager__addPageTip {\n  display: block;\n  height: 100%; }\n\n.canvasPageManager .canvasPageManager__page {\n  padding: 16px 16px 16px 8px; }\n  .canvasPageManager .canvasPageManager__page:focus, .canvasPageManager .canvasPageManager__page-isActive {\n    background-color: rgba(0, 0, 0, 0.5);\n    outline: none;\n    text-decoration: none; }\n  .canvasPageManager .canvasPageManager__page-isActive:focus .canvasPageManager__pagePreview {\n    outline-color: #54B399; }\n  .canvasPageManager .canvasPageManager__page:hover, .canvasPageManager .canvasPageManager__page:focus {\n    text-decoration: none; }\n    .canvasPageManager .canvasPageManager__page:hover .canvasPageManager__pagePreview, .canvasPageManager .canvasPageManager__page:focus .canvasPageManager__pagePreview {\n      box-shadow: 0 0.9px 4px -1px rgba(0, 0, 0, 0.2), 0 2.6px 8px -1px rgba(0, 0, 0, 0.15), 0 5.7px 12px -1px rgba(0, 0, 0, 0.125), 0 15px 15px -1px rgba(0, 0, 0, 0.1); }\n    .canvasPageManager .canvasPageManager__page:hover .canvasPageManager__controls, .canvasPageManager .canvasPageManager__page:focus .canvasPageManager__controls {\n      visibility: visible;\n      opacity: 1; }\n  .canvasPageManager .canvasPageManager__page-isActive .canvasPageManager__pagePreview {\n    box-shadow: 0 0.9px 4px -1px rgba(0, 0, 0, 0.2), 0 2.6px 8px -1px rgba(0, 0, 0, 0.15), 0 5.7px 12px -1px rgba(0, 0, 0, 0.125), 0 15px 15px -1px rgba(0, 0, 0, 0.1);\n    outline: 2px solid #343741;\n    outline-color: #98A2B3; }\n\n.canvasPageManager .canvasPageManager__pageNumber {\n  color: #98A2B3; }\n\n.canvasPageManager .canvasPageManager__pagePreview {\n  box-shadow: 0 0.7px 1.4px rgba(0, 0, 0, 0.175), 0 1.9px 4px rgba(0, 0, 0, 0.125), 0 4.5px 10px rgba(0, 0, 0, 0.125);\n  position: relative;\n  overflow: hidden;\n  color: #DFE5EF; }\n  .canvasPageManager .canvasPageManager__pagePreview .canvasPositionable {\n    position: absolute; }\n\n.canvasPageManager .canvasPageManager__controls {\n  position: absolute;\n  right: 8px;\n  top: 8px;\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  transition-delay: 250ms;\n  background: rgba(255, 255, 255, 0.5);\n  border-radius: 6px; }\n\n@keyframes buttonPop {\n  0% {\n    opacity: 0;\n    transform: translateX(100%); }\n  1% {\n    opacity: 0;\n    transform: translateX(100%); }\n  100% {\n    opacity: 1;\n    transform: translateY(0); } }\n\n@keyframes trayPop {\n  0% {\n    opacity: 0;\n    transform: translateY(100%); }\n  1% {\n    opacity: 0;\n    transform: translateY(100%); }\n  100% {\n    opacity: 1;\n    transform: translateY(0); } }\n\n.canvasPositionable {\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d; }\n\n.canvasShapePreview {\n  width: 40px;\n  height: 40px; }\n  .canvasShapePreview svg {\n    width: 100%;\n    height: 100%; }\n\n.canvasShapePicker {\n  width: 192px; }\n\n.canvasSidebar {\n  scrollbar-width: thin;\n  width: 100%;\n  max-height: 100vh;\n  overflow-y: auto;\n  overflow-x: hidden;\n  position: absolute;\n  top: 0;\n  bottom: 0; }\n  .canvasSidebar::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasSidebar::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasSidebar::-webkit-scrollbar-corner, .canvasSidebar::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasSidebar__pop {\n  animation: sidebarPop 150ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n\n.canvasSidebarFlyout {\n  width: 350px;\n  min-width: 350px; }\n\n.canvasSidebar__elementButtons {\n  background: #1a1a20;\n  margin-bottom: 8px; }\n\n.canvasSidebar__panel {\n  border-bottom: 1px solid #343741;\n  padding: 8px 12px; }\n  .canvasSidebar__panel--isEmpty {\n    border-bottom: none; }\n  .canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion {\n    margin-bottom: -8px; }\n  .canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion:after {\n    content: none; }\n  .canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion.euiAccordion-isOpen:after {\n    display: none; }\n\n.canvasSidebar__panel-noMinWidth .euiButton {\n  min-width: 0; }\n\n.canvasSidebar__expandable + .canvasSidebar__expandable {\n  margin-top: 0; }\n  .canvasSidebar__expandable + .canvasSidebar__expandable .canvasSidebar__accordion:before {\n    display: none; }\n\n.canvasSidebar__accordion {\n  padding: 12px;\n  margin: 0 -12px;\n  background: #25262E;\n  position: relative; }\n  .canvasSidebar__accordion.euiAccordion-isOpen {\n    background: transparent; }\n  .canvasSidebar__accordion:before, .canvasSidebar__accordion:after {\n    content: \'\';\n    height: 1px;\n    position: absolute;\n    left: 0;\n    width: 100%;\n    background: #343741; }\n  .canvasSidebar__accordion:before {\n    top: 0; }\n  .canvasSidebar__accordion:after {\n    bottom: 0; }\n\n.canvasSidebar__accordionContent {\n  padding-top: 16px;\n  padding-left: 28px; }\n\n@keyframes sidebarPop {\n  0% {\n    opacity: 0; }\n  1% {\n    opacity: 0; }\n  100% {\n    opacity: 1; } }\n\n.canvasLayout__sidebarHeader {\n  padding: calc(12px + 2px) 8px; }\n\n.canvasLayout__sidebarHeaderWorkpad {\n  padding: calc(8px * .75) 0; }\n\n.canvasToolbar {\n  position: relative; }\n\n.canvasTray__toggle {\n  position: absolute;\n  top: -20px;\n  left: 50%;\n  background-color: #16171c;\n  margin: 0;\n  border-radius: 6px 6px 0 0; }\n  .canvasTray__toggle > .euiFlexItem {\n    margin: 0; }\n  .canvasTray__toggle button {\n    padding: 4px 12px;\n    box-shadow: 0 -2px 1px rgba(255, 255, 255, 0.1); }\n\n.canvasToolbar__controls {\n  padding: 12px;\n  height: 100%; }\n\n.canvasToolbar__container {\n  width: 100%;\n  height: 64px;\n  background-color: #1a1a20;\n  position: relative;\n  z-index: 200; }\n\n.canvasTray {\n  box-shadow: 0 0 0.8px rgba(0, 0, 0, 0.15), 0 0 2px rgba(0, 0, 0, 0.1), 0 0 5px rgba(0, 0, 0, 0.1), 0 0 17px rgba(0, 0, 0, 0.075);\n  flex-direction: column; }\n\n.canvasTray__panel {\n  background-color: #16171c;\n  border-radius: 0; }\n\n.canvasWorkpad {\n  position: relative; }\n\n.canvasWorkpad__buffer {\n  padding: 16px;\n  margin: auto; }\n\n.canvasGrid {\n  position: absolute;\n  -webkit-user-select: none;\n          user-select: none;\n  pointer-events: none;\n  background-image: linear-gradient(to right, #535966 1px, transparent 1px), linear-gradient(to bottom, #535966 1px, transparent 1px);\n  background-size: 50px 50px;\n  top: 0; }\n\n.canvasElementMenu__popoverButton {\n  margin-right: 8px; }\n\n.canvasShareMenu__panelContent {\n  padding: 16px; }\n\n.canvasShareMenu__reportingConfig .euiCodeBlock__pre {\n  scrollbar-width: thin;\n  overflow-x: auto;\n  white-space: pre; }\n  .canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-corner, .canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasViewMenu__kioskSettings,\n.canvasViewMenu__refreshSettings {\n  padding: 16px; }\n\n.canvasWorkpad__upload--compressed.euiFilePicker--compressed.euiFilePicker .euiFilePicker__prompt {\n  height: 40px;\n  padding: 12px;\n  padding-left: 40px; }\n\n.canvasWorkpad__upload--compressed.euiFilePicker--compressed.euiFilePicker .euiFilePicker__icon {\n  top: 12px; }\n\n@media only screen and (max-width: 574px) {\n  .canvasWorkpad__upload--compressed .euiFilePicker__wrap {\n    max-width: none; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .canvasWorkpad__upload--compressed .euiFilePicker__wrap {\n    max-width: none; } }\n\n.canvasWorkpad__dropzone {\n  border: 2px dashed transparent; }\n\n.canvasWorkpad__dropzone--active {\n  background-color: #25262E;\n  border-color: #343741; }\n\n.canvasWorkpad__dropzoneTable .euiTable {\n  background-color: transparent; }\n\n.canvasWorkpad__dropzoneTable--tags .euiTableCellContent {\n  flex-wrap: wrap; }\n\n.canvasWorkpad__dropzoneTable--tags .euiHealth {\n  width: 100%; }\n\n.canvasPage {\n  box-shadow: 0 0 0.8px rgba(0, 0, 0, 0.15), 0 0 2px rgba(0, 0, 0, 0.1), 0 0 5px rgba(0, 0, 0, 0.1), 0 0 17px rgba(0, 0, 0, 0.075);\n  z-index: initial;\n  position: absolute;\n  top: 0;\n  transform-style: preserve-3d !important;\n  background-color: #1D1E24; }\n\n.canvasInteractivePage {\n  -webkit-user-select: none;\n          user-select: none; }\n\n.canvasLayout__stage .canvasStaticPage.isInactive {\n  visibility: hidden;\n  opacity: 0; }\n\n.canvasAdvancedFilter {\n  width: 100%;\n  font-size: inherit; }\n  .canvasAdvancedFilter .canvasAdvancedFilter__input {\n    background-color: #1D1E24;\n    width: 100%;\n    padding: 4px 16px;\n    border: 1px solid #343741;\n    border-radius: 6px;\n    font-size: inherit;\n    line-height: 19px;\n    font-family: monospace; }\n    .canvasAdvancedFilter .canvasAdvancedFilter__input:focus {\n      box-shadow: none; }\n  .canvasAdvancedFilter .canvasAdvancedFilter__button {\n    width: 100%;\n    padding: 4px 8px;\n    border: 1px solid #343741;\n    border-radius: 6px;\n    background-color: #1D1E24;\n    font-size: inherit; }\n    .canvasAdvancedFilter .canvasAdvancedFilter__button:hover {\n      background-color: #25262E; }\n\n.canvasDropdownFilter {\n  width: 100%;\n  font-size: inherit;\n  position: relative; }\n  .canvasDropdownFilter .canvasDropdownFilter__select {\n    background-color: #1D1E24;\n    width: 100%;\n    padding: 4px 16px;\n    border: 1px solid #343741;\n    border-radius: 6px;\n    -webkit-appearance: none;\n            appearance: none;\n    font-size: inherit; }\n    .canvasDropdownFilter .canvasDropdownFilter__select:after {\n      display: none; }\n    .canvasDropdownFilter .canvasDropdownFilter__select:focus {\n      box-shadow: none; }\n  .canvasDropdownFilter .canvasDropdownFilter__icon {\n    position: absolute;\n    right: 8px;\n    top: 8px;\n    pointer-events: none; }\n\n.canvasEmbeddable .embPanel {\n  border: none;\n  background: none; }\n  .canvasEmbeddable .embPanel .embPanel__title {\n    margin-bottom: 4px; }\n  .canvasEmbeddable .embPanel .embPanel__optionsMenuButton {\n    border-radius: 6px; }\n  .canvas-isFullscreen .canvasEmbeddable .embPanel .embPanel__optionsMenuButton {\n    opacity: 0; }\n  .canvas-isFullscreen .canvasEmbeddable .embPanel:focus .embPanel__optionsMenuButton,\n  .canvas-isFullscreen .canvasEmbeddable .embPanel:hover .embPanel__optionsMenuButton {\n    opacity: 1; }\n\n.canvasEmbeddable .euiTable {\n  background: none; }\n\n.legendLabel {\n  color: #DFE5EF; }\n\n.legendColorBox > div > div {\n  border-radius: 16px; }\n\n.revealImage {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none; }\n  .revealImage .revealImageAligner {\n    background-size: contain;\n    background-repeat: no-repeat; }\n  .revealImage .revealImage__image {\n    -webkit-user-select: none;\n            user-select: none; }\n\n.canvasTimeFilter .euiSuperDatePicker__flexWrapper {\n  width: 100%; }\n  .canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall {\n    margin: 0; }\n    .canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall > .euiFlexItem {\n      margin: 0; }\n\n.canvasArgImage .canvasArgImage--preview {\n  max-height: 100px;\n  overflow: hidden;\n  border: 1px solid #343741; }\n',""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(211);var content=__webpack_require__(461);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(212);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n  This file contains all the global scope garbage that should be removed\n  when the UI framework implements everything we need\n*/\n.canvasContainerWrapper .euiAccordion__childWrapper {\n  overflow-x: hidden; }\n\n.canvasContainerWrapper .clickable {\n  cursor: pointer; }\n\n.canvasContainerWrapper .canvasPalettePicker__swatchesPopover {\n  display: block; }\n  .canvasContainerWrapper .canvasPalettePicker__swatchesPopover .canvasPalettePicker__swatchesPopoverAnchor {\n    display: block; }\n\n.canvasContainerWrapper .euiImageFullScreen {\n  min-width: 100px; }\n\n@media only screen and (min-width: 768px) and (max-width: 991px) {\n  .canvasModal--fixedSize {\n    width: 75vw;\n    height: 75vh;\n    max-height: 680px; } }\n\n@media only screen and (min-width: 992px) and (max-width: 1199px) {\n  .canvasModal--fixedSize {\n    width: 75vw;\n    height: 75vh;\n    max-height: 680px; } }\n\n@media only screen and (min-width: 1200px) {\n  .canvasModal--fixedSize {\n    width: 75vw;\n    height: 75vh;\n    max-height: 680px; } }\n\n/*\n  Canvas global SASS varialbes\n*/\n.canvas.canvasContainerWrapper {\n  display: flex;\n  flex-grow: 1; }\n\n.canvas.canvasContainer {\n  display: flex;\n  flex-grow: 1;\n  background-color: #fafbfd; }\n\n.canvasContainer--loading {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translateY(-50%);\n  text-align: center; }\n\n.canvasCheckered {\n  background-color: #FFF;\n  background-image: linear-gradient(45deg, #D3DAE6 25%, transparent 25%), linear-gradient(-45deg, #D3DAE6 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #D3DAE6 75%), linear-gradient(-45deg, transparent 75%, #D3DAE6 75%);\n  background-size: 8px 8px;\n  position: relative; }\n\n.canvasTextArea__code {\n  scrollbar-width: thin;\n  font-size: 14px;\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace;\n  width: 100%;\n  max-width: 100%; }\n  .canvasTextArea__code::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasTextArea__code::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasTextArea__code::-webkit-scrollbar-corner, .canvasTextArea__code::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasContextMenu--topBorder {\n  border-top: 1px solid #D3DAE6; }\n\n#canvas-app {\n  overflow-y: hidden; }\n  #canvas-app .window-error {\n    position: absolute;\n    bottom: 10px;\n    right: 10px;\n    background-color: #BD271E;\n    color: #FFF;\n    display: block;\n    z-index: 2000;\n    padding: 10px;\n    max-width: 500px; }\n    #canvas-app .window-error a {\n      color: #FFF;\n      font-weight: bold; }\n\n.canvasHomeApp {\n  width: 100%; }\n  .canvasHomeApp .canvasHomeApp__content {\n    width: 100%; }\n  .canvasHomeApp .canvasHomeApp__modalHeader {\n    padding-right: 24px; }\n  .canvasHomeApp .canvasHomeApp__modalHeader,\n  .canvasHomeApp .canvasHomeApp__modalBody {\n    width: auto; }\n  @media only screen and (max-width: 574px) {\n    .canvasHomeApp .euiModalBody__overflow {\n      max-height: 80vh; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .canvasHomeApp .euiModalBody__overflow {\n      max-height: 80vh; } }\n\n.canvasLayout {\n  display: flex;\n  background: #fafbfd;\n  flex-grow: 1;\n  overflow: hidden; }\n\n.canvasLayout__rows {\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  max-height: 100vh;\n  max-width: 100%; }\n\n.canvasLayout__cols {\n  display: flex;\n  align-items: stretch;\n  flex-grow: 1; }\n\n.canvasLayout__stage {\n  flex-grow: 1;\n  flex-basis: auto;\n  display: flex;\n  flex-direction: column; }\n\n.canvasLayout__stageHeader {\n  flex-grow: 0;\n  flex-basis: auto;\n  padding: 1px 16px 0;\n  font-size: 14px;\n  border-bottom: 1px solid #D3DAE6;\n  background: #F5F7FA;\n  -webkit-user-select: none;\n          user-select: none; }\n\n.canvasLayout__stageHeaderInner {\n  height: 48px; }\n\n.canvasLayout__stageContent {\n  flex-grow: 1;\n  flex-basis: auto;\n  position: relative; }\n\n.canvasLayout__stageContentOverflow {\n  scrollbar-width: thin;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: auto;\n  display: flex;\n  align-items: center; }\n  .canvasLayout__stageContentOverflow::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasLayout__stageContentOverflow::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasLayout__stageContentOverflow::-webkit-scrollbar-corner, .canvasLayout__stageContentOverflow::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasLayout__sidebar {\n  flex-grow: 0;\n  flex-basis: auto;\n  width: 350px;\n  background: #F5F7FA;\n  display: flex;\n  position: relative;\n  border-left: 1px solid #D3DAE6; }\n  .canvasLayout__sidebar .euiPanel {\n    margin-bottom: 8px; }\n\n.canvasLayout__footer {\n  flex-grow: 0;\n  flex-basis: auto;\n  width: 100%;\n  background-color: #fafbfd;\n  z-index: 4000;\n  font-size: 14px; }\n\n.canvasExport .canvasPage {\n  position: relative;\n  overflow: hidden;\n  box-shadow: none; }\n\n.canvasArg__add {\n  padding: 12px;\n  text-align: left;\n  width: 100%; }\n  .canvasArg__add:not(:last-child) {\n    border-bottom: 1px solid #D3DAE6; }\n  .canvasArg__add:hover {\n    background-color: #F5F7FA; }\n    .canvasArg__add:hover label {\n      color: #343741; }\n\n.canvasArg__addArg {\n  margin-right: -8px; }\n\n.canvasArg__addPopover {\n  width: 250px; }\n\n.canvasArg {\n  margin-top: 8px; }\n\n.canvasArg__remove {\n  min-width: 16px;\n  padding: 4px 0; }\n\n.canvasArg__form {\n  position: relative; }\n\n.canvasArg__tooltip {\n  margin-left: -32px; }\n\n.canvasSidebar__accordion .canvasArg__form {\n  position: static; }\n\n.canvasArg__switch {\n  padding-top: calc(8px * .75); }\n\n.canvasAssetManager .canvasAssetManager__modalHeader {\n  flex-wrap: wrap; }\n\n@media only screen and (max-width: 574px) {\n  .canvasAssetManager .canvasAssetManager__modalHeaderTitle {\n    width: 100%;\n    padding-bottom: 16px; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .canvasAssetManager .canvasAssetManager__modalHeaderTitle {\n    width: 100%;\n    padding-bottom: 16px; } }\n\n.canvasAssetManager .canvasAssetManager__meterWrapper {\n  flex-grow: 0;\n  min-width: 40%;\n  align-items: center; }\n  @media only screen and (max-width: 574px) {\n    .canvasAssetManager .canvasAssetManager__meterWrapper {\n      flex-grow: 1; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .canvasAssetManager .canvasAssetManager__meterWrapper {\n      flex-grow: 1; } }\n\n.canvasAssetManager .canvasAssetManager__meterLabel {\n  margin: 0; }\n\n.canvasAssetManager .canvasAssetManager__fileUploadWrapper {\n  justify-content: flex-end;\n  padding-right: 16px; }\n\n.canvasAssetManager .canvasAssetManager__modalFooter {\n  justify-content: space-between; }\n\n.canvasAssetManager .canvasAssetManager__emptyPanel {\n  max-width: 400px;\n  margin: 32px auto 0; }\n\n.canvasAsset {\n  text-align: center;\n  overflow: hidden; }\n  .canvasAsset .canvasAsset__thumb {\n    margin: -8px;\n    margin-bottom: 0;\n    font-size: 0;\n    height: 164px; }\n  .canvasAsset .canvasAsset__img {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%; }\n    .canvasAsset .canvasAsset__img img {\n      width: auto;\n      max-width: 100%;\n      max-height: 164px; }\n\n.canvasAssetPicker {\n  scrollbar-width: thin;\n  max-height: 120px;\n  overflow-x: hidden;\n  overflow-y: auto; }\n  .canvasAssetPicker::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasAssetPicker::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasAssetPicker::-webkit-scrollbar-corner, .canvasAssetPicker::-webkit-scrollbar-track {\n    background-color: transparent; }\n  .canvasAssetPicker .canvasAssetPicker__link {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    text-align: center; }\n    .canvasAssetPicker .canvasAssetPicker__link:hover {\n      outline: solid 4px rgba(0, 119, 204, 0.1); }\n  .canvasAssetPicker .canvasAssetPicker__selected {\n    position: absolute;\n    top: 4px;\n    right: 4px; }\n  .canvasAssetPicker .euiImage {\n    width: 40px;\n    height: 40px; }\n\n.autocomplete {\n  position: relative; }\n\n.autocompletePopup {\n  position: absolute;\n  top: -262px;\n  height: 260px;\n  width: 100%; }\n\n.autocompleteItems {\n  border-right: 1px solid #D3DAE6; }\n\n.autocompleteItems,\n.autocompleteReference {\n  scrollbar-width: thin;\n  height: 258px;\n  overflow: auto; }\n  .autocompleteItems::-webkit-scrollbar,\n  .autocompleteReference::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .autocompleteItems::-webkit-scrollbar-thumb,\n  .autocompleteReference::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .autocompleteItems::-webkit-scrollbar-corner, .autocompleteItems::-webkit-scrollbar-track,\n  .autocompleteReference::-webkit-scrollbar-corner,\n  .autocompleteReference::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.autocompleteReference {\n  padding: 8px 12px;\n  background-color: #fcfcfd; }\n\n.autocompleteItem {\n  padding: 8px 12px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace;\n  font-weight: 400; }\n\n.autocompleteItem--isActive {\n  color: #07C;\n  background-color: rgba(0, 119, 204, 0.1); }\n\n.autocompleteType {\n  padding: 8px; }\n\n.autocompleteTable .euiTable {\n  background-color: transparent; }\n\n.autocompleteDescList .euiDescriptionList__description {\n  margin-right: 8px; }\n\n.canvasClipboard {\n  cursor: pointer; }\n\n.canvasColorDot {\n  display: inline-block;\n  position: relative;\n  height: 32px;\n  width: 32px; }\n  .canvasColorDot .canvasColorDot__background {\n    position: absolute;\n    height: 32px;\n    width: 32px;\n    border-radius: 6px;\n    top: 0;\n    left: 0; }\n  .canvasColorDot .canvasColorDot__foreground {\n    position: absolute;\n    border: 1px solid #D3DAE6;\n    height: 32px;\n    width: 32px;\n    border-radius: 6px;\n    top: 0;\n    left: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center; }\n\n.canvasColorPalette .canvasColorPalette__dot {\n  display: inline-block;\n  margin: 0 4px 4px 0; }\n\n.canvasColorPickerPopover__popover {\n  width: 256px; }\n\n.canvasCustomElementForm {\n  min-width: 400px; }\n\n.canvasCustomElementForm__preview {\n  max-width: 210px;\n  min-height: 210px; }\n\n.canvasCustomElementForm__thumbnail {\n  padding-bottom: 0; }\n\n.canvasCustomElementForm__thumbnailHelp {\n  color: #69707D; }\n\n.canvasDataSource {\n  background-color: #FFF;\n  color: #343741;\n  border-radius: 1px solid #D3DAE6;\n  margin: 8px;\n  padding: 0 8px; }\n\n.canvasDataSource__section,\n.canvasDataSource__list {\n  padding: 12px 12px 0; }\n\n.canvasDataSource__sectionFooter {\n  padding: 0 12px; }\n\n.canvasDataSource__triggerButton {\n  color: #1a1c21;\n  font-size: 16px;\n  font-size: 1.14286rem;\n  line-height: 1.71429rem;\n  font-weight: 700;\n  line-height: 40px; }\n\n.canvasDataSource__triggerButtonIcon {\n  margin-right: 8px; }\n\n.canvasDataSource__card .euiCard__content {\n  padding-top: 0 !important; }\n\n.canvasDataSource__card + .canvasDataSource__card {\n  margin-top: 8px; }\n\n.canvasDataSource__card--isCurrent {\n  border-color: #00BFB3; }\n\n.canvasDatasourcePreview {\n  max-width: 1000px;\n  max-height: 60vh;\n  height: 100%; }\n  .canvasDatasourcePreview .canvasDatasourcePreview__panel {\n    height: calc(100% - 16px * 3); }\n\n.canvasDataTable {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between; }\n  .canvasDataTable .canvasDataTable__tableWrapper {\n    scrollbar-width: thin;\n    width: 100%;\n    height: 100%;\n    overflow: auto; }\n    .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-thumb {\n      background-color: rgba(105, 112, 125, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner, .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-track {\n      background-color: transparent; }\n    .canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner {\n      background: transparent; }\n  .canvasDataTable .canvasDataTable__footer {\n    width: 100%;\n    display: flex;\n    justify-content: space-around;\n    padding: 8px;\n    border-top: 1px solid #D3DAE6; }\n  .canvasDataTable .canvasDataTable__table {\n    min-width: 100%; }\n  .canvasDataTable .canvasDataTable__th,\n  .canvasDataTable .canvasDataTable__td {\n    padding: 8px 4px;\n    border-bottom: 1px solid #D3DAE6; }\n  .canvasDataTable .canvasDataTable__th {\n    white-space: nowrap;\n    font-weight: bold; }\n\n.canvasDebug.euiCodeBlock {\n  padding: 0;\n  width: 100%;\n  height: 100%; }\n  .canvasDebug.euiCodeBlock .canvasDebug__content {\n    scrollbar-width: thin;\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    padding: 16px; }\n    .canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-thumb {\n      background-color: rgba(105, 112, 125, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-corner, .canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-track {\n      background-color: transparent; }\n\n.dom-preview {\n  pointer-events: none; }\n  .dom-preview .canvasLayoutAnnotation {\n    display: none; }\n\n.canvasElementCard__wrapper {\n  position: relative; }\n  .canvasElementCard__wrapper:hover .canvasElementCard__controls, .canvasElementCard__wrapper:focus .canvasElementCard__controls {\n    visibility: visible;\n    opacity: 1; }\n  .canvasElementCard__wrapper .canvasElementCard__controls {\n    position: absolute;\n    right: 8px;\n    top: 8px;\n    visibility: hidden;\n    opacity: 0;\n    transition: opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    transition-delay: 250ms;\n    background: rgba(255, 255, 255, 0.5);\n    border-radius: 6px; }\n\n.canvasElementCard .euiCard__top {\n  text-align: center;\n  width: calc(100% + 16px * 2);\n  height: 85px;\n  margin: calc(-1 * 16px) calc(-1 * 16px) 0; }\n\n.canvasElementCard .euiCard__image {\n  max-height: 100%;\n  max-width: 100%;\n  width: auto;\n  left: 0;\n  top: 0; }\n\n.canvasElementCard.canvasElementCard--hasIcon .euiCard__top {\n  min-width: 210px;\n  padding-top: 16px; }\n\n.canvasElement {\n  height: 100%;\n  width: 100%;\n  overflow: hidden; }\n\n.canvasElement__content {\n  height: 100%;\n  width: 100%; }\n\n.canvasExpressionInput .euiFormErrorText {\n  padding-left: 16px; }\n\n.canvasExpression--compactSize {\n  max-height: 480px; }\n\n.canvasExpressionInput__editor {\n  height: 256px;\n  padding-top: 16px;\n  flex-grow: 1; }\n\n.canvasExpression--fullSize {\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 5999; }\n  .canvasExpression--fullSize .canvasExpressionInput {\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column; }\n  .canvasExpression--fullSize .canvasExpressionInput__inner {\n    flex-grow: 1;\n    display: flex; }\n  .canvasExpression--fullSize .canvasTextArea__code {\n    flex-grow: 1;\n    padding-right: 40px; }\n\n.canvasExpression__settings {\n  padding: 12px 16px;\n  border-top: 1px solid #D3DAE6;\n  background-color: #FFF; }\n\n/* stylelint-disable selector-no-qualifying-type */\nbody.canvas-isFullscreen.euiBody--headerIsFixed {\n  padding-top: 0; }\n\nbody.canvas-isFullscreen .headerWrapper ~ .app-wrapper {\n  min-height: 100vh; }\n\nbody.canvas-isFullscreen.euiBody--collapsibleNavIsDocked {\n  padding-left: 0 !important; }\n\nbody.canvas-isFullscreen .kbnLoadingIndicator {\n  display: none; }\n\nbody.canvas-isFullscreen .canvasLayout {\n  background: #000; }\n\nbody.canvas-isFullscreen .canvasLayout__stageHeader,\nbody.canvas-isFullscreen .canvasLayout__sidebar,\nbody.canvas-isFullscreen .canvasLayout__footer,\nbody.canvas-isFullscreen .canvasGrid {\n  display: none; }\n\nbody.canvas-isFullscreen .canvasLayout__stageContentOverflow {\n  display: block;\n  overflow: visible;\n  position: static;\n  top: auto;\n  left: auto;\n  right: auto;\n  bottom: auto; }\n  body.canvas-isFullscreen .canvasLayout__stageContentOverflow .canvasWorkpad__buffer {\n    padding: 0;\n    margin: 0; }\n\nbody.canvas-isFullscreen .canvasLayout__rows {\n  max-width: none; }\n\nbody.canvas-isFullscreen .canvasLayout__rows,\nbody.canvas-isFullscreen .canvasLayout__cols {\n  align-items: center;\n  justify-content: center; }\n\nbody.canvas-isFullscreen .canvasCheckered {\n  display: flex;\n  background: none; }\n\nbody.canvas-isFullscreen .canvasPage {\n  box-shadow: none;\n  overflow: hidden; }\n\n.canvasFunctionForm > .canvasLoading {\n  text-align: center;\n  font-size: 20px; }\n\n.canvasAlignmentGuide {\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d; }\n\n.canvasBorderConnection {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  border-top: 1px dashed #D3DAE6;\n  border-left: 1px dashed #D3DAE6; }\n\n.canvasBorderResizeHandle {\n  box-shadow: 0 0.8px 0.8px rgba(0, 0, 0, 0.04), 0 2.3px 2px rgba(0, 0, 0, 0.03);\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  display: block;\n  position: absolute;\n  height: 8px;\n  width: 8px;\n  margin-left: -4px;\n  margin-top: -4px;\n  background-color: #FFF;\n  border: 1px solid #69707D; }\n\n.canvasDragBoxAnnotation {\n  position: absolute;\n  background: none;\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  outline: dashed 1px #69707D;\n  pointer-events: none; }\n\n.canvasHoverAnnotation {\n  position: absolute;\n  background: none;\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  outline: solid 1px #54B399;\n  pointer-events: none; }\n\n.canvasRotationHandle {\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  display: block;\n  position: absolute;\n  height: 24px;\n  width: 0;\n  margin-left: -1px;\n  margin-top: -12px;\n  border-top: 1px dashed #D3DAE6;\n  border-left: 1px dashed #D3DAE6; }\n\n.canvasRotationHandle__handle {\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  display: block;\n  position: absolute;\n  height: 9px;\n  width: 9px;\n  margin-left: -5px;\n  margin-top: -6px;\n  border-radius: 50%;\n  background-color: #98A2B3; }\n\n.tooltipAnnotation {\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.1), 0 3.6px 13px rgba(0, 0, 0, 0.07), 0 8.4px 23px rgba(0, 0, 0, 0.06), 0 23px 35px rgba(0, 0, 0, 0.05);\n  border-radius: 6px;\n  background-color: #404040;\n  color: #FFF;\n  z-index: 9000;\n  max-width: 256px;\n  overflow-wrap: break-word;\n  font-size: 12px;\n  font-size: 0.85714rem;\n  line-height: 1.14286rem;\n  padding: 8px;\n  position: absolute;\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d;\n  outline: none;\n  pointer-events: none; }\n\n.canvasLoading {\n  display: flex;\n  color: #D3DAE6;\n  align-items: center; }\n\n.canvasPageManager .canvasPageManager__pages {\n  position: relative; }\n\n.canvasPageManager .canvasPageManager__pages,\n.canvasPageManager .canvasPageManager__addPage {\n  height: 144px; }\n\n.canvasPageManager .canvasPageManager--trayPop > div {\n  animation: trayPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  opacity: 0;\n  animation-fill-mode: forwards; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(1n) {\n  animation-delay: 0.05s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(2n) {\n  animation-delay: 0.1s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(3n) {\n  animation-delay: 0.15s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(4n) {\n  animation-delay: 0.2s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(5n) {\n  animation-delay: 0.25s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(6n) {\n  animation-delay: 0.3s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(7n) {\n  animation-delay: 0.35s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(8n) {\n  animation-delay: 0.4s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(9n) {\n  animation-delay: 0.45s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(10n) {\n  animation-delay: 0.5s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(11n) {\n  animation-delay: 0.55s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(12n) {\n  animation-delay: 0.6s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(13n) {\n  animation-delay: 0.65s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(14n) {\n  animation-delay: 0.7s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(15n) {\n  animation-delay: 0.75s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(16n) {\n  animation-delay: 0.8s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(17n) {\n  animation-delay: 0.85s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(18n) {\n  animation-delay: 0.9s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(19n) {\n  animation-delay: 0.95s; }\n\n.canvasPageManager .canvasPageManager--trayPop > div:nth-child(20n) {\n  animation-delay: 1s; }\n\n.canvasPageManager .canvasPageManager__pageList {\n  scrollbar-width: thin;\n  display: flex;\n  overflow-x: auto;\n  overflow-y: hidden;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0; }\n  .canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-corner, .canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasPageManager .canvasPageManager__addPage {\n  width: 56px;\n  background: #00BFB3;\n  color: #FFF;\n  opacity: 0;\n  animation: buttonPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  animation-fill-mode: forwards; }\n\n.canvasPageManager .canvasPageManager__addPageTip {\n  display: block;\n  height: 100%; }\n\n.canvasPageManager .canvasPageManager__page {\n  padding: 16px 16px 16px 8px; }\n  .canvasPageManager .canvasPageManager__page:focus, .canvasPageManager .canvasPageManager__page-isActive {\n    background-color: rgba(143, 165, 199, 0.5);\n    outline: none;\n    text-decoration: none; }\n  .canvasPageManager .canvasPageManager__page-isActive:focus .canvasPageManager__pagePreview {\n    outline-color: #54B399; }\n  .canvasPageManager .canvasPageManager__page:hover, .canvasPageManager .canvasPageManager__page:focus {\n    text-decoration: none; }\n    .canvasPageManager .canvasPageManager__page:hover .canvasPageManager__pagePreview, .canvasPageManager .canvasPageManager__page:focus .canvasPageManager__pagePreview {\n      box-shadow: 0 0.9px 4px -1px rgba(0, 0, 0, 0.08), 0 2.6px 8px -1px rgba(0, 0, 0, 0.06), 0 5.7px 12px -1px rgba(0, 0, 0, 0.05), 0 15px 15px -1px rgba(0, 0, 0, 0.04); }\n    .canvasPageManager .canvasPageManager__page:hover .canvasPageManager__controls, .canvasPageManager .canvasPageManager__page:focus .canvasPageManager__controls {\n      visibility: visible;\n      opacity: 1; }\n  .canvasPageManager .canvasPageManager__page-isActive .canvasPageManager__pagePreview {\n    box-shadow: 0 0.9px 4px -1px rgba(0, 0, 0, 0.08), 0 2.6px 8px -1px rgba(0, 0, 0, 0.06), 0 5.7px 12px -1px rgba(0, 0, 0, 0.05), 0 15px 15px -1px rgba(0, 0, 0, 0.04);\n    outline: 2px solid #D3DAE6;\n    outline-color: #69707D; }\n\n.canvasPageManager .canvasPageManager__pageNumber {\n  color: #69707D; }\n\n.canvasPageManager .canvasPageManager__pagePreview {\n  box-shadow: 0 0.7px 1.4px rgba(0, 0, 0, 0.07), 0 1.9px 4px rgba(0, 0, 0, 0.05), 0 4.5px 10px rgba(0, 0, 0, 0.05);\n  position: relative;\n  overflow: hidden;\n  color: #343741; }\n  .canvasPageManager .canvasPageManager__pagePreview .canvasPositionable {\n    position: absolute; }\n\n.canvasPageManager .canvasPageManager__controls {\n  position: absolute;\n  right: 8px;\n  top: 8px;\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  transition-delay: 250ms;\n  background: rgba(255, 255, 255, 0.5);\n  border-radius: 6px; }\n\n@keyframes buttonPop {\n  0% {\n    opacity: 0;\n    transform: translateX(100%); }\n  1% {\n    opacity: 0;\n    transform: translateX(100%); }\n  100% {\n    opacity: 1;\n    transform: translateY(0); } }\n\n@keyframes trayPop {\n  0% {\n    opacity: 0;\n    transform: translateY(100%); }\n  1% {\n    opacity: 0;\n    transform: translateY(100%); }\n  100% {\n    opacity: 1;\n    transform: translateY(0); } }\n\n.canvasPositionable {\n  transform-origin: center center;\n  /* the default, only for clarity */\n  transform-style: preserve-3d; }\n\n.canvasShapePreview {\n  width: 40px;\n  height: 40px; }\n  .canvasShapePreview svg {\n    width: 100%;\n    height: 100%; }\n\n.canvasShapePicker {\n  width: 192px; }\n\n.canvasSidebar {\n  scrollbar-width: thin;\n  width: 100%;\n  max-height: 100vh;\n  overflow-y: auto;\n  overflow-x: hidden;\n  position: absolute;\n  top: 0;\n  bottom: 0; }\n  .canvasSidebar::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasSidebar::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasSidebar::-webkit-scrollbar-corner, .canvasSidebar::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasSidebar__pop {\n  animation: sidebarPop 150ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n\n.canvasSidebarFlyout {\n  width: 350px;\n  min-width: 350px; }\n\n.canvasSidebar__elementButtons {\n  background: #e4e9f2;\n  margin-bottom: 8px; }\n\n.canvasSidebar__panel {\n  border-bottom: 1px solid #D3DAE6;\n  padding: 8px 12px; }\n  .canvasSidebar__panel--isEmpty {\n    border-bottom: none; }\n  .canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion {\n    margin-bottom: -8px; }\n  .canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion:after {\n    content: none; }\n  .canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion.euiAccordion-isOpen:after {\n    display: none; }\n\n.canvasSidebar__panel-noMinWidth .euiButton {\n  min-width: 0; }\n\n.canvasSidebar__expandable + .canvasSidebar__expandable {\n  margin-top: 0; }\n  .canvasSidebar__expandable + .canvasSidebar__expandable .canvasSidebar__accordion:before {\n    display: none; }\n\n.canvasSidebar__accordion {\n  padding: 12px;\n  margin: 0 -12px;\n  background: #F5F7FA;\n  position: relative; }\n  .canvasSidebar__accordion.euiAccordion-isOpen {\n    background: transparent; }\n  .canvasSidebar__accordion:before, .canvasSidebar__accordion:after {\n    content: \'\';\n    height: 1px;\n    position: absolute;\n    left: 0;\n    width: 100%;\n    background: #D3DAE6; }\n  .canvasSidebar__accordion:before {\n    top: 0; }\n  .canvasSidebar__accordion:after {\n    bottom: 0; }\n\n.canvasSidebar__accordionContent {\n  padding-top: 16px;\n  padding-left: 28px; }\n\n@keyframes sidebarPop {\n  0% {\n    opacity: 0; }\n  1% {\n    opacity: 0; }\n  100% {\n    opacity: 1; } }\n\n.canvasLayout__sidebarHeader {\n  padding: calc(12px + 2px) 8px; }\n\n.canvasLayout__sidebarHeaderWorkpad {\n  padding: calc(8px * .75) 0; }\n\n.canvasToolbar {\n  position: relative; }\n\n.canvasTray__toggle {\n  position: absolute;\n  top: -20px;\n  left: 50%;\n  background-color: #fbfcfd;\n  margin: 0;\n  border-radius: 6px 6px 0 0; }\n  .canvasTray__toggle > .euiFlexItem {\n    margin: 0; }\n  .canvasTray__toggle button {\n    padding: 4px 12px;\n    box-shadow: 0 -2px 1px rgba(0, 0, 0, 0.1); }\n\n.canvasToolbar__controls {\n  padding: 12px;\n  height: 100%; }\n\n.canvasToolbar__container {\n  width: 100%;\n  height: 64px;\n  background-color: #e4e9f2;\n  position: relative;\n  z-index: 200; }\n\n.canvasTray {\n  box-shadow: 0 0 0.8px rgba(0, 0, 0, 0.06), 0 0 2px rgba(0, 0, 0, 0.04), 0 0 5px rgba(0, 0, 0, 0.04), 0 0 17px rgba(0, 0, 0, 0.03);\n  flex-direction: column; }\n\n.canvasTray__panel {\n  background-color: #fbfcfd;\n  border-radius: 0; }\n\n.canvasWorkpad {\n  position: relative; }\n\n.canvasWorkpad__buffer {\n  padding: 16px;\n  margin: auto; }\n\n.canvasGrid {\n  position: absolute;\n  -webkit-user-select: none;\n          user-select: none;\n  pointer-events: none;\n  background-image: linear-gradient(to right, #98A2B3 1px, transparent 1px), linear-gradient(to bottom, #98A2B3 1px, transparent 1px);\n  background-size: 50px 50px;\n  top: 0; }\n\n.canvasElementMenu__popoverButton {\n  margin-right: 8px; }\n\n.canvasShareMenu__panelContent {\n  padding: 16px; }\n\n.canvasShareMenu__reportingConfig .euiCodeBlock__pre {\n  scrollbar-width: thin;\n  overflow-x: auto;\n  white-space: pre; }\n  .canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-corner, .canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.canvasViewMenu__kioskSettings,\n.canvasViewMenu__refreshSettings {\n  padding: 16px; }\n\n.canvasWorkpad__upload--compressed.euiFilePicker--compressed.euiFilePicker .euiFilePicker__prompt {\n  height: 40px;\n  padding: 12px;\n  padding-left: 40px; }\n\n.canvasWorkpad__upload--compressed.euiFilePicker--compressed.euiFilePicker .euiFilePicker__icon {\n  top: 12px; }\n\n@media only screen and (max-width: 574px) {\n  .canvasWorkpad__upload--compressed .euiFilePicker__wrap {\n    max-width: none; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .canvasWorkpad__upload--compressed .euiFilePicker__wrap {\n    max-width: none; } }\n\n.canvasWorkpad__dropzone {\n  border: 2px dashed transparent; }\n\n.canvasWorkpad__dropzone--active {\n  background-color: #F5F7FA;\n  border-color: #D3DAE6; }\n\n.canvasWorkpad__dropzoneTable .euiTable {\n  background-color: transparent; }\n\n.canvasWorkpad__dropzoneTable--tags .euiTableCellContent {\n  flex-wrap: wrap; }\n\n.canvasWorkpad__dropzoneTable--tags .euiHealth {\n  width: 100%; }\n\n.canvasPage {\n  box-shadow: 0 0 0.8px rgba(0, 0, 0, 0.06), 0 0 2px rgba(0, 0, 0, 0.04), 0 0 5px rgba(0, 0, 0, 0.04), 0 0 17px rgba(0, 0, 0, 0.03);\n  z-index: initial;\n  position: absolute;\n  top: 0;\n  transform-style: preserve-3d !important;\n  background-color: #FFF; }\n\n.canvasInteractivePage {\n  -webkit-user-select: none;\n          user-select: none; }\n\n.canvasLayout__stage .canvasStaticPage.isInactive {\n  visibility: hidden;\n  opacity: 0; }\n\n.canvasAdvancedFilter {\n  width: 100%;\n  font-size: inherit; }\n  .canvasAdvancedFilter .canvasAdvancedFilter__input {\n    background-color: #FFF;\n    width: 100%;\n    padding: 4px 16px;\n    border: 1px solid #D3DAE6;\n    border-radius: 6px;\n    font-size: inherit;\n    line-height: 19px;\n    font-family: monospace; }\n    .canvasAdvancedFilter .canvasAdvancedFilter__input:focus {\n      box-shadow: none; }\n  .canvasAdvancedFilter .canvasAdvancedFilter__button {\n    width: 100%;\n    padding: 4px 8px;\n    border: 1px solid #D3DAE6;\n    border-radius: 6px;\n    background-color: #FFF;\n    font-size: inherit; }\n    .canvasAdvancedFilter .canvasAdvancedFilter__button:hover {\n      background-color: #F5F7FA; }\n\n.canvasDropdownFilter {\n  width: 100%;\n  font-size: inherit;\n  position: relative; }\n  .canvasDropdownFilter .canvasDropdownFilter__select {\n    background-color: #FFF;\n    width: 100%;\n    padding: 4px 16px;\n    border: 1px solid #D3DAE6;\n    border-radius: 6px;\n    -webkit-appearance: none;\n            appearance: none;\n    font-size: inherit; }\n    .canvasDropdownFilter .canvasDropdownFilter__select:after {\n      display: none; }\n    .canvasDropdownFilter .canvasDropdownFilter__select:focus {\n      box-shadow: none; }\n  .canvasDropdownFilter .canvasDropdownFilter__icon {\n    position: absolute;\n    right: 8px;\n    top: 8px;\n    pointer-events: none; }\n\n.canvasEmbeddable .embPanel {\n  border: none;\n  background: none; }\n  .canvasEmbeddable .embPanel .embPanel__title {\n    margin-bottom: 4px; }\n  .canvasEmbeddable .embPanel .embPanel__optionsMenuButton {\n    border-radius: 6px; }\n  .canvas-isFullscreen .canvasEmbeddable .embPanel .embPanel__optionsMenuButton {\n    opacity: 0; }\n  .canvas-isFullscreen .canvasEmbeddable .embPanel:focus .embPanel__optionsMenuButton,\n  .canvas-isFullscreen .canvasEmbeddable .embPanel:hover .embPanel__optionsMenuButton {\n    opacity: 1; }\n\n.canvasEmbeddable .euiTable {\n  background: none; }\n\n.legendLabel {\n  color: #343741; }\n\n.legendColorBox > div > div {\n  border-radius: 16px; }\n\n.revealImage {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none; }\n  .revealImage .revealImageAligner {\n    background-size: contain;\n    background-repeat: no-repeat; }\n  .revealImage .revealImage__image {\n    -webkit-user-select: none;\n            user-select: none; }\n\n.canvasTimeFilter .euiSuperDatePicker__flexWrapper {\n  width: 100%; }\n  .canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall {\n    margin: 0; }\n    .canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall > .euiFlexItem {\n      margin: 0; }\n\n.canvasArgImage .canvasArgImage--preview {\n  max-height: 100px;\n  overflow: hidden;\n  border: 1px solid #D3DAE6; }\n',""]);module.exports=exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"renderApp",(function(){return renderApp}));__webpack_require__.d(__webpack_exports__,"initializeCanvas",(function(){return initializeCanvas}));__webpack_require__.d(__webpack_exports__,"teardownCanvas",(function(){return teardownCanvas}));var transient_namespaceObject={};__webpack_require__.r(transient_namespaceObject);__webpack_require__.d(transient_namespaceObject,"setFullscreen",(function(){return setFullscreen}));__webpack_require__.d(transient_namespaceObject,"selectToplevelNodes",(function(){return transient_selectToplevelNodes}));__webpack_require__.d(transient_namespaceObject,"setFirstLoad",(function(){return setFirstLoad}));__webpack_require__.d(transient_namespaceObject,"setElementStats",(function(){return setElementStats}));__webpack_require__.d(transient_namespaceObject,"setZoomScale",(function(){return transient_setZoomScale}));var actions_resolved_args_namespaceObject={};__webpack_require__.r(actions_resolved_args_namespaceObject);__webpack_require__.d(actions_resolved_args_namespaceObject,"setLoadingActionType",(function(){return setLoadingActionType}));__webpack_require__.d(actions_resolved_args_namespaceObject,"setValueActionType",(function(){return setValueActionType}));__webpack_require__.d(actions_resolved_args_namespaceObject,"inFlightActiveActionType",(function(){return inFlightActiveActionType}));__webpack_require__.d(actions_resolved_args_namespaceObject,"inFlightCompleteActionType",(function(){return inFlightCompleteActionType}));__webpack_require__.d(actions_resolved_args_namespaceObject,"setLoading",(function(){return setLoading}));__webpack_require__.d(actions_resolved_args_namespaceObject,"setValue",(function(){return resolved_args_setValue}));__webpack_require__.d(actions_resolved_args_namespaceObject,"setValues",(function(){return setValues}));__webpack_require__.d(actions_resolved_args_namespaceObject,"clearValue",(function(){return clearValue}));__webpack_require__.d(actions_resolved_args_namespaceObject,"clearValues",(function(){return clearValues}));__webpack_require__.d(actions_resolved_args_namespaceObject,"inFlightActive",(function(){return resolved_args_inFlightActive}));__webpack_require__.d(actions_resolved_args_namespaceObject,"inFlightComplete",(function(){return inFlightComplete}));var external_kbnSharedDeps_React_=__webpack_require__(3);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(5);var external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(203);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);var lib=__webpack_require__(210);var external_kbnSharedDeps_Lodash_=__webpack_require__(4);var Recompose=__webpack_require__(20);function app_canUserWrite(state){return Object(external_kbnSharedDeps_Lodash_["get"])(state,"transient.canUserWrite",true)}function getFullscreen(state){return Object(external_kbnSharedDeps_Lodash_["get"])(state,"transient.fullscreen",false)}function getZoomScale(state){return Object(external_kbnSharedDeps_Lodash_["get"])(state,"transient.zoomScale",1)}function getServerFunctions(state){return state.app.serverFunctions}function getAppReady(state){return state.app.ready}function getBasePath(state){return state.app.basePath}function isAppReady(state){const appReady=getAppReady(state);return appReady===true}var redux_actions_lib=__webpack_require__(216);const appReady=Object(redux_actions_lib["createAction"])("appReady");const appError=Object(redux_actions_lib["createAction"])("appError");const appUnload=Object(redux_actions_lib["createAction"])("appUnload");var public_services=__webpack_require__(213);var prop_types=__webpack_require__(214);var prop_types_default=__webpack_require__.n(prop_types);const getBaseBreadcrumb=()=>({text:"Canvas",href:"#/"});const getWorkpadBreadcrumb=({name:name="Workpad",id:id}={})=>{const output={text:name};if(id!=null){output.href=`#/workpad/${id}`}return output};const setBreadcrumb=paths=>{public_services["d"].getService().setBreadcrumbs(Array.isArray(paths)?paths:[paths])};var cjs=__webpack_require__(318);const createThunk=cjs["createThunk"];var common=__webpack_require__(9);function prepend(path,value){return Object(external_kbnSharedDeps_Lodash_["toPath"])(value).concat(Object(external_kbnSharedDeps_Lodash_["toPath"])(path))}function append(path,value){return Object(external_kbnSharedDeps_Lodash_["toPath"])(path).concat(Object(external_kbnSharedDeps_Lodash_["toPath"])(value))}function convert(path){return Object(external_kbnSharedDeps_Lodash_["toPath"])(path)}const assetRoot="assets";function getAssets(state){return Object(external_kbnSharedDeps_Lodash_["get"])(state,assetRoot,{})}function getAssetIds(state){return Object.keys(getAssets(state))}function getAssetById(state,id){return state[assetRoot][id]}const workpadRoot="persistent.workpad";const appendAst=element=>({...element,ast:Object(common["safeElementFromExpression"])(element.expression)});function getWorkpad(state){return Object(external_kbnSharedDeps_Lodash_["get"])(state,workpadRoot)}function getFullWorkpadPersisted(state){return{...getWorkpad(state),assets:getAssets(state)}}function getWorkpadPersisted(state){return getWorkpad(state)}function getWorkpadVariables(state){const workpad=getWorkpad(state);return Object(external_kbnSharedDeps_Lodash_["get"])(workpad,"variables",[])}function getWorkpadVariablesAsObject(state){const variables=getWorkpadVariables(state);if(variables.length===0){return{}}return variables.reduce((vars,v)=>({...vars,[v.name]:v.value}),{})}function getWorkpadInfo(state){return{...getWorkpad(state),pages:undefined}}function workpad_isWriteable(state){return Object(external_kbnSharedDeps_Lodash_["get"])(state,append(workpadRoot,"isWriteable"),true)}function getSelectedPageIndex(state){return Object(external_kbnSharedDeps_Lodash_["get"])(state,append(workpadRoot,"page"))}function getSelectedPage(state){const pageIndex=getSelectedPageIndex(state);const pages=getPages(state);return Object(external_kbnSharedDeps_Lodash_["get"])(pages,`[${pageIndex}].id`)}function getPages(state){return Object(external_kbnSharedDeps_Lodash_["get"])(state,append(workpadRoot,"pages"),[])}function getPageById(state,id){const pages=getPages(state);return pages.find(page=>page.id===id)}function getPageIndexById(state,id){const pages=getPages(state);return pages.findIndex(page=>page.id===id)}function getWorkpadName(state){return Object(external_kbnSharedDeps_Lodash_["get"])(state,append(workpadRoot,"name"))}function getWorkpadHeight(state){return Object(external_kbnSharedDeps_Lodash_["get"])(state,append(workpadRoot,"height"))}function getWorkpadWidth(state){return Object(external_kbnSharedDeps_Lodash_["get"])(state,append(workpadRoot,"width"))}function getWorkpadBoundingBox(state){return getPages(state).reduce((boundingBox,page)=>{page.elements.forEach(({position:position})=>{const{left:left,top:top,width:width,height:height}=position;const right=left+width;const bottom=top+height;if(left<boundingBox.left){boundingBox.left=left}if(top<boundingBox.top){boundingBox.top=top}if(right>boundingBox.right){boundingBox.right=right}if(bottom>boundingBox.bottom){boundingBox.bottom=bottom}});return boundingBox},{left:0,right:getWorkpadWidth(state),top:0,bottom:getWorkpadHeight(state)})}function getWorkpadColors(state){return Object(external_kbnSharedDeps_Lodash_["get"])(state,append(workpadRoot,"colors"))}function getAllElements(state){return getPages(state).reduce((elements,page)=>elements.concat(page.elements),[])}function getElementCounts(state){const resolvedArgs=state.transient.resolvedArgs;const results={ready:0,pending:0,error:0};Object.values(resolvedArgs).filter(maybeResolvedArg=>maybeResolvedArg!==undefined).forEach(resolvedArg=>{const{expressionRenderable:expressionRenderable}=resolvedArg;if(!expressionRenderable){results.pending++;return}const{value:value,state:readyState}=expressionRenderable;if(value&&value.as==="error"){results.error++}else if(readyState==="ready"){results.ready++}else{results.pending++}});return results}function getElementStats(state){return Object(external_kbnSharedDeps_Lodash_["get"])(state,"transient.elementStats")}function getGlobalFilters(state){return getAllElements(state).reduce((acc,el)=>{if(el.filter!=null&&el.filter.length){return acc.concat(el.filter)}return acc},[])}function buildGroupValues(args,onValue){const argNames=Object.keys(args);return argNames.reduce((values,argName)=>{if(argName!=="_"&&argName!=="group"){return values}return args[argName].reduce((acc,argValue)=>acc.concat(onValue(argValue,argName,args)||[]),values)},[])}function extractFilterGroups(ast){if(ast.type!=="expression"){throw new Error("AST must be an expression")}return ast.chain.reduce((groups,item)=>{const{function:fn,arguments:args}=item;if(fn==="filters"){return groups.concat(buildGroupValues(args,argValue=>{if(argValue!==null&&typeof argValue!=="object"){return argValue}}))}else{return groups.concat(buildGroupValues(args,argValue=>{if(argValue!==null&&typeof argValue==="object"&&argValue.type==="expression"){return extractFilterGroups(argValue)}}))}},[])}function getGlobalFilterGroups(state){const filterGroups=getAllElements(state).reduce((acc,el)=>{if(el.filter!=null&&el.filter.length){const filterAst=Object(common["fromExpression"])(el.filter);const filterGroup=Object(external_kbnSharedDeps_Lodash_["get"])(filterAst,`chain[0].arguments.filterGroup[0]`);if(filterGroup&&filterGroup!==""&&!acc.includes(String(filterGroup))){acc.push(String(filterGroup))}}if(el.expression!=null&&el.expression.length){const expressionAst=Object(common["fromExpression"])(el.expression);const groups=extractFilterGroups(expressionAst);groups.forEach(group=>{if(!acc.includes(String(group))){acc.push(String(group))}})}return acc},[]);return filterGroups.sort()}function getSelectedToplevelNodes(state){return Object(external_kbnSharedDeps_Lodash_["get"])(state,"transient.selectedToplevelNodes",[])}function getSelectedElementId(state){const toplevelNodes=getSelectedToplevelNodes(state);return toplevelNodes.length===1?toplevelNodes[0]:null}function getSelectedElement(state){return getElementById(state,getSelectedElementId(state))}function getElements(state,pageId=undefined,withAst=true){const id=pageId||getSelectedPage(state);if(!id){return[]}const page=getPageById(state,id);const elements=Object(external_kbnSharedDeps_Lodash_["get"])(page,"elements");if(!elements){return[]}if(!withAst){return elements.map(el=>Object(external_kbnSharedDeps_Lodash_["omit"])(el,["ast"]))}const elementAppendAst=elem=>appendAst(elem);return elements.map(elementAppendAst)}const augment=type=>n=>({...n,position:{...n.position,type:type},...type==="group"&&{expression:'shape fill="rgba(255,255,255,0)" | render'}});const getNodesOfPage=page=>{const elements=Object(external_kbnSharedDeps_Lodash_["get"])(page,"elements").map(augment("element"));const groups=Object(external_kbnSharedDeps_Lodash_["get"])(page,"groups",[]).map(augment("group"));return elements.concat(groups)};function getNodesForPage(page,withAst){const elements=getNodesOfPage(page);if(!elements){return[]}if(!withAst){return elements.map(el=>Object(external_kbnSharedDeps_Lodash_["omit"])(el,["ast"]))}return elements.map(appendAst)}function getNodes(state,pageId,withAst=true){const id=pageId||getSelectedPage(state);if(!id){return[]}const page=getPageById(state,id);if(!page){return[]}return getNodesForPage(page,withAst)}function getElementById(state,id,pageId){const element=getElements(state,pageId,true).find(el=>el.id===id);if(element){return appendAst(element)}}function getNodeById(state,id,pageId){const group=getNodes(state,pageId,true).find(el=>el.id===id);if(group){return appendAst(group)}}function getResolvedArgs(state,elementId,path){if(!elementId){return}const args=Object(external_kbnSharedDeps_Lodash_["get"])(state,["transient","resolvedArgs",elementId]);if(path){return Object(external_kbnSharedDeps_Lodash_["get"])(args,path)}return args}function getSelectedResolvedArgs(state,path){const elementId=getSelectedElementId(state);if(elementId){return getResolvedArgs(state,elementId,path)}}function getContextForIndex(state,index){return getSelectedResolvedArgs(state,["expressionContext",index-1])}function getRefreshInterval(state){return Object(external_kbnSharedDeps_Lodash_["get"])(state,"transient.refresh.interval",0)}function getAutoplay(state){return Object(external_kbnSharedDeps_Lodash_["get"])(state,"transient.autoplay")}function getRenderedWorkpad(state){const currentPages=getPages(state);const args=state.transient.resolvedArgs;const renderedPages=currentPages.map(page=>{const{elements:elements,...rest}=page;return{...rest,elements:elements.map(element=>{const{id:id,position:position}=element;const arg=args[id];if(!arg){return null}const{expressionRenderable:expressionRenderable}=arg;return{id:id,position:position,expressionRenderable:expressionRenderable}})}});const workpad=getWorkpad(state);const{pages:pages,variables:variables,...rest}=workpad;return{pages:renderedPages,...rest}}function getRenderedWorkpadExpressions(state){const workpad=getRenderedWorkpad(state);const{pages:pages}=workpad;const expressions=[];pages.forEach(page=>page.elements.forEach(element=>{if(element&&element.expressionRenderable){const{value:value}=element.expressionRenderable;if(value){const{as:as}=value;if(!expressions.includes(as)){expressions.push(as)}}}}));return expressions}var object_path_immutable=__webpack_require__(44);var object_path_immutable_default=__webpack_require__.n(object_path_immutable);var resolved_arg=__webpack_require__(218);function getArgs(state){return Object(external_kbnSharedDeps_Lodash_["get"])(state,["transient","resolvedArgs"])}function getArg(state,path){return Object(external_kbnSharedDeps_Lodash_["get"])(state,prepend(path,["transient","resolvedArgs"]))}function getValue(state,path){return resolved_arg["c"](getArg(state,path))}function resolved_args_getState(state,path){return resolved_arg["b"](getArg(state,path))}function getError(state,path){return resolved_arg["a"](getArg(state,path))}function getInFlight(state){return Object(external_kbnSharedDeps_Lodash_["get"])(state,["transient","inFlight"],false)}var get_id=__webpack_require__(43);var constants=__webpack_require__(7);const getDefaultElement=()=>({id:Object(get_id["a"])("element"),position:{top:20,left:20,height:300,width:500,angle:0,type:"element"},expression:`\n      demodata\n      | pointseries y="median(cost)" x=time color="project"\n      | plot defaultStyle={seriesStyle points=5}\n    `,filter:null});const getDefaultPage=()=>({id:Object(get_id["a"])("page"),style:{background:"#FFF"},transition:{},elements:[],groups:[]});const getDefaultWorkpad=()=>{const page=getDefaultPage();return{name:"My Canvas Workpad",id:Object(get_id["a"])("workpad"),width:1080,height:720,css:constants["q"],page:0,pages:[page],colors:["#37988d","#c19628","#b83c6f","#3f9939","#1785b0","#ca5f35","#45bdb0","#f2bc33","#e74b8b","#4fbf48","#1ea6dc","#fd7643","#72cec3","#f5cc5d","#ec77a8","#7acf74","#4cbce4","#fd986f","#a1ded7","#f8dd91","#f2a4c5","#a6dfa2","#86d2ed","#fdba9f","#000000","#444444","#777777","#BBBBBB","#FFFFFF","rgba(255,255,255,0)"],variables:[],isWriteable:true}};var i18n=__webpack_require__(2);async function interpretAst(ast,variables){const context={variables:variables};return await public_services["b"].getService().execute(ast,null,context).getData()}async function runInterpreter(ast,input,variables,options={}){const context={variables:variables};try{const renderable=await public_services["b"].getService().execute(ast,input,context).getData();if(Object(common["getType"])(renderable)==="render"){return renderable}if(options.castToRender){return runInterpreter(Object(common["fromExpression"])("render"),renderable,variables,{castToRender:false})}throw new Error(`Ack! I don't know how to render a '${Object(common["getType"])(renderable)}'`)}catch(err){public_services["c"].getService().error(err);throw err}}const flatten=arrays=>[].concat(...arrays);const identity=d=>d;const map=fun=>array=>array.map(value=>fun(value));const disjunctiveUnion=(keyFun,set1,set2)=>set1.filter(s1=>!set2.find(s2=>keyFun(s2)===keyFun(s1))).concat(set2.filter(s2=>!set1.find(s1=>keyFun(s1)===keyFun(s2))));const mean=(a,b)=>(a+b)/2;const shallowEqual=(a,b)=>{if(a===b){return true}if(a.length!==b.length){return false}for(let i=0;i<a.length;i++){if(a[i]!==b[i]){return false}}return true};const not=fun=>(...args)=>!fun(...args);const removeDuplicates=(idFun,a)=>a.filter((d,i)=>a.findIndex(s=>idFun(s)===idFun(d))===i);const arrayToMap=a=>Object.assign({},...a.map(d=>({[d]:true})));const subMultitree=(pk,fk,elements,inputRoots)=>{const getSubgraphs=roots=>{const children=flatten(roots.map(r=>elements.filter(e=>fk(e)===pk(r))));if(children.length){return[...roots,...getSubgraphs(children,elements)]}else{return roots}};return getSubgraphs(inputRoots)};const setFullscreen=Object(redux_actions_lib["createAction"])("setFullscreen");const transient_selectToplevelNodes=Object(redux_actions_lib["createAction"])("selectToplevelNodes");const setFirstLoad=Object(redux_actions_lib["createAction"])("setFirstLoad");const setElementStats=Object(redux_actions_lib["createAction"])("setElementStats");const transient_setZoomScale=Object(redux_actions_lib["createAction"])("setZoomScale");const setLoadingActionType="setResolvedLoading";const setValueActionType="setResolvedValue";const inFlightActiveActionType="inFlightActive";const inFlightCompleteActionType="inFlightComplete";const setLoading=Object(redux_actions_lib["createAction"])(setLoadingActionType);const resolved_args_setValue=Object(redux_actions_lib["createAction"])(setValueActionType);const setValues=Object(redux_actions_lib["createAction"])("setResolvedValues");const clearValue=Object(redux_actions_lib["createAction"])("clearResolvedValue");const clearValues=Object(redux_actions_lib["createAction"])("clearResolvedValues");const resolved_args_inFlightActive=Object(redux_actions_lib["createAction"])(inFlightActiveActionType,()=>undefined);const inFlightComplete=Object(redux_actions_lib["createAction"])(inFlightCompleteActionType,()=>undefined);const{actionsElements:elements_strings}=i18n["g"];const{set:set,del:del}=object_path_immutable_default.a;function getSiblingContext(state,elementId,checkIndex){const prevContextPath=[elementId,"expressionContext",checkIndex];const prevContextValue=getValue(state,prevContextPath);if(prevContextValue!=null){return{index:checkIndex,context:prevContextValue}}const prevContextIndex=checkIndex-1;if(prevContextIndex<0){return{}}return getSiblingContext(state,elementId,prevContextIndex)}function getBareElement(el,includeId=false){const props=["position","expression","filter"];if(includeId){return Object(external_kbnSharedDeps_Lodash_["pick"])(el,props.concat("id"))}return Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(Object(external_kbnSharedDeps_Lodash_["pick"])(el,props))}const elements_elementLayer=Object(redux_actions_lib["createAction"])("elementLayer");const elements_setMultiplePositions=Object(redux_actions_lib["createAction"])("setMultiplePosition",repositionedElements=>({repositionedElements:repositionedElements}));const flushContext=Object(redux_actions_lib["createAction"])("flushContext");const flushContextAfterIndex=Object(redux_actions_lib["createAction"])("flushContextAfterIndex");const fetchContext=createThunk("fetchContext",({dispatch:dispatch,getState:getState},index,element,fullRefresh=false)=>{const chain=Object(external_kbnSharedDeps_Lodash_["get"])(element,"ast.chain");const invalidIndex=chain?index>=chain.length:true;if(!element||!chain||invalidIndex){throw new Error(elements_strings.getInvalidArgIndexErrorMessage(index))}const contextIndex=index-1;const contextPath=[element.id,"expressionContext",contextIndex];dispatch(setLoading({path:contextPath}));const getContext=()=>getSiblingContext(getState(),element.id,contextIndex-1);const{index:prevContextIndex,context:prevContextValue}=fullRefresh!==true?getContext():{};const astChain=element.ast.chain.filter((exp,i)=>{if(prevContextValue!=null){return i>prevContextIndex&&i<index}return i<index});const variables=getWorkpadVariablesAsObject(getState());return interpretAst({...element.ast,chain:astChain},variables).then(value=>{dispatch(resolved_args_setValue({path:contextPath,value:value}))})});const fetchRenderableWithContextFn=({dispatch:dispatch,getState:getState},element,ast,context)=>{const argumentPath=[element.id,"expressionRenderable"];dispatch(setLoading({path:argumentPath}));const getAction=renderable=>resolved_args_setValue({path:argumentPath,value:renderable});const variables=getWorkpadVariablesAsObject(getState());return runInterpreter(ast,context,variables,{castToRender:true}).then(renderable=>{dispatch(getAction(renderable))}).catch(err=>{public_services["e"].notify.getService().error(err);dispatch(getAction(err))})};const fetchRenderableWithContext=createThunk("fetchRenderableWithContext",fetchRenderableWithContextFn);const fetchRenderable=createThunk("fetchRenderable",({dispatch:dispatch},element)=>{const ast=element.ast||Object(common["safeElementFromExpression"])(element.expression);dispatch(fetchRenderableWithContext(element,ast,null))});const fetchAllRenderables=createThunk("fetchAllRenderables",({dispatch:dispatch,getState:getState},{onlyActivePage:onlyActivePage=false}={})=>{const workpadPages=getPages(getState());const currentPageIndex=getSelectedPageIndex(getState());const currentPage=workpadPages[currentPageIndex];const otherPages=Object(external_kbnSharedDeps_Lodash_["without"])(workpadPages,currentPage);dispatch(resolved_args_inFlightActive());function fetchElementsOnPages(pages){const elements=[];pages.forEach(page=>{page.elements.forEach(element=>{elements.push(element)})});const renderablePromises=elements.map(element=>{const ast=element.ast||Object(common["safeElementFromExpression"])(element.expression);const argumentPath=[element.id,"expressionRenderable"];const variables=getWorkpadVariablesAsObject(getState());return runInterpreter(ast,null,variables,{castToRender:true}).then(renderable=>({path:argumentPath,value:renderable})).catch(err=>{public_services["e"].notify.getService().error(err);return{path:argumentPath,value:err}})});return Promise.all(renderablePromises).then(renderables=>{dispatch(setValues(renderables))})}if(onlyActivePage){fetchElementsOnPages([currentPage]).then(()=>dispatch(inFlightComplete()))}else{fetchElementsOnPages([currentPage]).then(()=>otherPages.reduce((chain,page)=>chain.then(()=>fetchElementsOnPages([page])),Promise.resolve())).then(()=>dispatch(inFlightComplete()))}});const elements_insertNodes=createThunk("insertNodes",({dispatch:dispatch,type:type},elements,pageId)=>{const _insertNodes=Object(redux_actions_lib["createAction"])(type);const newElements=elements.map(external_kbnSharedDeps_Lodash_["cloneDeep"]);newElements.forEach(newElement=>{newElement.position.top=newElement.position.top+10;newElement.position.left=newElement.position.left+10});dispatch(_insertNodes({pageId:pageId,elements:newElements}));if(elements.some(element=>element.filter)){dispatch(fetchAllRenderables())}else{newElements.forEach(newElement=>dispatch(fetchRenderable(newElement)))}});const removeElements=createThunk("removeElements",({dispatch:dispatch,getState:getState},rootElementIds,pageId)=>{const state=getState();const allElements=getNodes(state,pageId);const allRoots=rootElementIds.map(id=>allElements.find(e=>id===e.id)).filter(d=>d);const elementIds=subMultitree(e=>e.id,e=>e.position.parent,allElements,allRoots).map(e=>e.id);const shouldRefresh=elementIds.some(elementId=>{const element=getNodeById(state,elementId,pageId);const filterIsApplied=element.filter&&element.filter.length>0;return filterIsApplied});const _removeElements=Object(redux_actions_lib["createAction"])("removeElements",(elementIds,pageId)=>({elementIds:elementIds,pageId:pageId}));dispatch(_removeElements(elementIds,pageId));if(shouldRefresh){dispatch(fetchAllRenderables())}});const setFilter=createThunk("setFilter",({dispatch:dispatch},filter,elementId,doRender=true)=>{const _setFilter=Object(redux_actions_lib["createAction"])("setFilter");dispatch(_setFilter({filter:filter,elementId:elementId}));if(doRender===true){dispatch(fetchAllRenderables())}});const elements_setExpression=createThunk("setExpression",setExpressionFn);function setExpressionFn({dispatch:dispatch,getState:getState},expression,elementId,pageId,doRender=true){const _setExpression=Object(redux_actions_lib["createAction"])("setExpression");dispatch(_setExpression({expression:expression,elementId:elementId,pageId:pageId}));const updatedElement=getNodeById(getState(),elementId,pageId);if(updatedElement.filter&&!["dropdownControl","timefilterControl","exactly"].some(filter=>updatedElement.expression.includes(filter))){const filter="";dispatch(setFilter(filter,elementId,pageId,doRender))}else if(doRender===true){dispatch(fetchRenderable(updatedElement))}}const setAst=createThunk("setAst",({dispatch:dispatch},ast,element,pageId,doRender=true)=>{try{const expression=Object(common["toExpression"])(ast);dispatch(elements_setExpression(expression,element.id,pageId,doRender))}catch(err){public_services["e"].notify.getService().error(err);dispatch(elements_setExpression(element.expression,element.id,pageId,doRender))}});const setAstAtIndex=createThunk("setAstAtIndex",({dispatch:dispatch,getState:getState},index,ast,element,pageId)=>{dispatch(flushContextAfterIndex({elementId:element.id,index:index}));const newElement=set(element,`ast.chain.${index}`,ast);const newAst=Object(external_kbnSharedDeps_Lodash_["get"])(newElement,"ast");const{index:contextIndex,context:contextValue}=getSiblingContext(getState(),element.id,index-1);if(contextValue){dispatch(setAst(newAst,element,pageId,false));const partialAst={...newAst,chain:newAst.chain.filter((exp,i)=>{if(contextValue){return i>contextIndex}return i>=index})};return dispatch(fetchRenderableWithContext(newElement,partialAst,contextValue))}dispatch(setAst(newAst,element,pageId))});const setArgumentAtIndex=createThunk("setArgumentAtIndex",({dispatch:dispatch},args)=>{const{index:index,argName:argName,value:value,valueIndex:valueIndex,element:element,pageId:pageId}=args;let selector=`ast.chain.${index}.arguments.${argName}`;if(valueIndex!=null){selector+="."+valueIndex}const newElement=set(element,selector,value);const newAst=Object(external_kbnSharedDeps_Lodash_["get"])(newElement,["ast","chain",index]);dispatch(setAstAtIndex(index,newAst,element,pageId))});const addArgumentValueAtIndex=createThunk("addArgumentValueAtIndex",({dispatch:dispatch},args)=>{const{index:index,argName:argName,value:value,element:element}=args;const values=Object(external_kbnSharedDeps_Lodash_["get"])(element,["ast","chain",index,"arguments",argName],[]);const newValue=values.concat(value);dispatch(setArgumentAtIndex({...args,value:newValue}))});const deleteArgumentAtIndex=createThunk("deleteArgumentAtIndex",({dispatch:dispatch},args)=>{const{index:index,element:element,pageId:pageId,argName:argName,argIndex:argIndex}=args;const curVal=Object(external_kbnSharedDeps_Lodash_["get"])(element,["ast","chain",index,"arguments",argName]);const newElement=argIndex!=null&&curVal.length>1?del(element,`ast.chain.${index}.arguments.${argName}.${argIndex}`):del(element,`ast.chain.${index}.arguments.${argName}`);dispatch(setAstAtIndex(index,Object(external_kbnSharedDeps_Lodash_["get"])(newElement,["ast","chain",index]),element,pageId))});const elements_addElement=createThunk("addElement",({dispatch:dispatch},pageId,element)=>{const newElement={...getDefaultElement(),...getBareElement(element,true)};if(element.width){newElement.position.width=element.width}if(element.height){newElement.position.height=element.height}const _addElement=Object(redux_actions_lib["createAction"])("addElement");dispatch(_addElement({pageId:pageId,element:newElement}));if(element.filter){dispatch(fetchAllRenderables())}else{dispatch(fetchRenderable(newElement))}dispatch(transient_selectToplevelNodes([newElement.id]))});const sizeWorkpad=Object(redux_actions_lib["createAction"])("sizeWorkpad");const workpad_setName=Object(redux_actions_lib["createAction"])("setName");const setWriteable=Object(redux_actions_lib["createAction"])("setWriteable");const setColors=Object(redux_actions_lib["createAction"])("setColors");const workpad_setRefreshInterval=Object(redux_actions_lib["createAction"])("setRefreshInterval");const workpad_setWorkpadCSS=Object(redux_actions_lib["createAction"])("setWorkpadCSS");const workpad_setWorkpadVariables=Object(redux_actions_lib["createAction"])("setWorkpadVariables");const workpad_enableAutoplay=Object(redux_actions_lib["createAction"])("enableAutoplay");const workpad_setAutoplayInterval=Object(redux_actions_lib["createAction"])("setAutoplayInterval");const resetWorkpad=Object(redux_actions_lib["createAction"])("resetWorkpad");const workpad_initializeWorkpad=createThunk("initializeWorkpad",({dispatch:dispatch})=>{dispatch(fetchAllRenderables())});const addColor=createThunk("addColor",({dispatch:dispatch,getState:getState},color)=>{const colors=getWorkpadColors(getState()).slice(0);if(!Object(external_kbnSharedDeps_Lodash_["includes"])(colors,color)){colors.push(color)}dispatch(setColors(colors))});const removeColor=createThunk("removeColor",({dispatch:dispatch,getState:getState},color)=>{dispatch(setColors(Object(external_kbnSharedDeps_Lodash_["without"])(getWorkpadColors(getState()),color)))});const updateWorkpadVariables=createThunk("updateWorkpadVariables",({dispatch:dispatch},vars)=>{dispatch(workpad_setWorkpadVariables(vars));dispatch(fetchAllRenderables())});const setWorkpad=createThunk("setWorkpad",({dispatch:dispatch,type:type},workpad,{loadPages:loadPages=true}={})=>{dispatch(Object(redux_actions_lib["createAction"])(type)(workpad));if(loadPages){dispatch(workpad_initializeWorkpad())}});var external_kbnSharedDeps_ElasticEui_=__webpack_require__(8);var external_kbnSharedDeps_Moment_=__webpack_require__(11);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);var fetch=__webpack_require__(45);const validKeys=["@created","@timestamp","assets","colors","css","variables","height","id","isWriteable","name","page","pages","width"];const sanitizeWorkpad=function(workpad){const workpadKeys=Object.keys(workpad);for(const key of workpadKeys){if(!validKeys.includes(key)){delete workpad[key]}}return workpad};const getApiPath=function(){const basePath=public_services["d"].getService().getBasePath();return`${basePath}${constants["g"]}`};const getApiPathStructures=function(){const basePath=public_services["d"].getService().getBasePath();return`${basePath}${constants["i"]}`};const getApiPathAssets=function(){const basePath=public_services["d"].getService().getBasePath();return`${basePath}${constants["h"]}`};function create(workpad){return fetch["b"].post(getApiPath(),{...sanitizeWorkpad({...workpad}),assets:workpad.assets||{},variables:workpad.variables||[]})}async function workpad_service_createFromTemplate(templateId){return fetch["b"].post(getApiPath(),{templateId:templateId})}function get(workpadId){return fetch["b"].get(`${getApiPath()}/${workpadId}`).then(({data:workpad})=>({css:constants["q"],variables:[],...workpad}))}function update(id,workpad){return fetch["b"].put(`${getApiPath()}/${id}`,sanitizeWorkpad({...workpad}))}function workpad_service_updateWorkpad(id,workpad){return fetch["b"].put(`${getApiPathStructures()}/${id}`,sanitizeWorkpad({...workpad}))}function updateAssets(id,workpadAssets){return fetch["b"].put(`${getApiPathAssets()}/${id}`,workpadAssets)}function remove(id){return fetch["b"].delete(`${getApiPath()}/${id}`)}function find(searchTerm){const validSearchTerm=typeof searchTerm==="string"&&searchTerm.length>0;return fetch["b"].get(`${getApiPath()}/find?name=${validSearchTerm?searchTerm:""}&perPage=10000`).then(({data:workpads})=>workpads)}var FileSaver=__webpack_require__(273);var FileSaver_default=__webpack_require__.n(FileSaver);const{downloadWorkpad:download_workpad_strings}=i18n["g"];const downloadWorkpad=async workpadId=>{try{const workpad=await get(workpadId);const jsonBlob=new Blob([JSON.stringify(workpad)],{type:"application/json"});FileSaver_default.a.saveAs(jsonBlob,`canvas-workpad-${workpad.name}-${workpad.id}.json`)}catch(err){public_services["c"].getService().error(err,{title:download_workpad_strings.getDownloadFailureErrorMessage()})}};const downloadRenderedWorkpad=async renderedWorkpad=>{try{const jsonBlob=new Blob([JSON.stringify(renderedWorkpad)],{type:"application/json"});FileSaver_default.a.saveAs(jsonBlob,`canvas-embed-workpad-${renderedWorkpad.name}-${renderedWorkpad.id}.json`)}catch(err){public_services["c"].getService().error(err,{title:download_workpad_strings.getDownloadRenderedWorkpadFailureErrorMessage()})}};const downloadRuntime=async basePath=>{try{const path=`${basePath}${constants["d"]}`;window.open(path);return}catch(err){public_services["c"].getService().error(err,{title:download_workpad_strings.getDownloadRuntimeFailureErrorMessage()})}};const downloadZippedRuntime=async data=>{try{const zip=new Blob([data],{type:"octet/stream"});FileSaver_default.a.saveAs(zip,"canvas-workpad-embed.zip")}catch(err){public_services["c"].getService().error(err,{title:download_workpad_strings.getDownloadZippedRuntimeFailureErrorMessage()})}};function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const ConfirmModal=props=>{const{isOpen:isOpen,title:title,message:message,onConfirm:onConfirm,onCancel:onCancel,confirmButtonText:confirmButtonText,cancelButtonText:cancelButtonText,className:className,...rest}=props;if(!isOpen){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],_extends({},rest,{className:`canvasConfirmModal ${className||""}`,title:title,onCancel:onCancel,onConfirm:onConfirm,confirmButtonText:confirmButtonText,cancelButtonText:cancelButtonText,defaultFocusedButton:"confirm",buttonColor:"danger"}),message)};ConfirmModal.defaultProps={title:"Confirm",confirmButtonText:"Confirm",cancelButtonText:"Cancel"};const confirm_modal_ConfirmModal=ConfirmModal;var router_min=__webpack_require__(321);var router_min_default=__webpack_require__.n(router_min);var get_window=__webpack_require__(46);var lz_string=__webpack_require__(323);var lz_string_default=__webpack_require__.n(lz_string);var node_modules_history=__webpack_require__(275);var createHashStateHistory=__webpack_require__(324);var createHashStateHistory_default=__webpack_require__.n(createHashStateHistory);function wrapHistoryInstance(history){const historyState={onChange:[],prevLocation:{},changeUnlisten:null};const locationFormat=(location,action,parser)=>({pathname:location.pathname,hash:location.hash,search:location.search,state:parser(location.state),action:action.toLowerCase()});const wrappedHistory={undo(){history.goBack()},redo(){history.goForward()},go(idx){history.go(idx)},parse(payload){try{const stateJSON=lz_string_default.a.decompress(payload);return JSON.parse(stateJSON)}catch(e){return null}},encode(state){try{const stateJSON=JSON.stringify(state);return lz_string_default.a.compress(stateJSON)}catch(e){throw new Error("Could not encode state: ",e.message)}},getLocation(){const location=history.location;return{...location,state:this.parse(location.state)}},getPath(path){if(path!=null){return Object(node_modules_history["createPath"])(Object(node_modules_history["parsePath"])(path))}return Object(node_modules_history["createPath"])(this.getLocation())},getFullPath(path){if(path!=null){return history.createHref(Object(node_modules_history["parsePath"])(path))}return history.createHref(this.getLocation())},push(state,path){history.push(path||this.getPath(),this.encode(state))},replace(state,path){history.replace(path||this.getPath(),this.encode(state))},onChange(fn){if(fn==null){return}const pushedIndex=historyState.onChange.push(fn)-1;return(()=>{let called=false;return()=>{if(called){return}historyState.onChange.splice(pushedIndex,1);called=true}})()},resetOnChange(){historyState.onChange.splice(0)},get historyInstance(){return history}};historyState.prevLocation=wrappedHistory.getLocation();historyState.changeUnlisten=history.listen((location,action)=>{const{prevLocation:prevLocation}=historyState;const locationObj=locationFormat(location,action,wrappedHistory.parse);const prevLocationObj=locationFormat(prevLocation,action,wrappedHistory.parse);historyState.onChange.forEach(fn=>fn.call(null,locationObj,prevLocationObj));historyState.prevLocation=wrappedHistory.getLocation()});return wrappedHistory}const instances=new WeakMap;const getHistoryInstance=win=>{if(typeof win==="undefined"||!win.history){return Object(node_modules_history["createMemoryHistory"])()}return createHashStateHistory_default()()};const createHistory=(win=Object(get_window["a"])())=>{const historyInstance=getHistoryInstance(win);const wrappedInstance=wrapHistoryInstance(historyInstance);instances.set(win,wrappedInstance);return wrappedInstance};const historyProvider=(win=Object(get_window["a"])())=>{const instance=instances.get(win);if(instance){return instance}return createHistory(win)};const destroyHistory=(win=Object(get_window["a"])())=>{const instance=instances.get(win);if(instance){instance.resetOnChange()}};var query_string=__webpack_require__(329);const getInitialState=path=>{const{getHasWriteAccess:getHasWriteAccess}=public_services["d"].getService();const state={app:{},assets:{},transient:{canUserWrite:getHasWriteAccess(),zoomScale:1,elementStats:{total:0,ready:0,pending:0,error:0},fullscreen:false,selectedToplevelNodes:[],resolvedArgs:{},refresh:{interval:0},autoplay:{enabled:false,interval:1e4}},persistent:{schemaVersion:2,workpad:getDefaultWorkpad()}};if(!path){return state}return Object(external_kbnSharedDeps_Lodash_["get"])(state,path)};var TIME_UNIT;(function(TIME_UNIT){TIME_UNIT["SECONDS"]="s";TIME_UNIT["MINUTES"]="m";TIME_UNIT["HOURS"]="h";TIME_UNIT["DAYS"]="d"})(TIME_UNIT||(TIME_UNIT={}));const multipliers={[TIME_UNIT.SECONDS]:1e3,[TIME_UNIT.MINUTES]:1e3*60,[TIME_UNIT.HOURS]:1e3*60*60,[TIME_UNIT.DAYS]:1e3*60*60*24};function isTimeUnit(unit){return unit!==undefined}const isValidTimeInterval=(val="")=>!!String(val).match(/^([0-9]{1,})([hmsd])$/);const getTimeInterval=(val="")=>{if(!isNaN(Number(val))){return}const match=String(val).match(/^([0-9]{1,})([hmsd])$/);if(!match){return}const interval=parseInt(match[1],10);const unit=match[2];const multiplier=isTimeUnit(unit)?multipliers[unit]:null;if(interval&&multiplier){return interval*multiplier}};const createTimeInterval=seconds=>{if(seconds<multipliers[TIME_UNIT.MINUTES]){return seconds/multipliers[TIME_UNIT.SECONDS]+TIME_UNIT.SECONDS}if(seconds<multipliers[TIME_UNIT.HOURS]){return seconds/multipliers[TIME_UNIT.MINUTES]+TIME_UNIT.MINUTES}if(seconds<multipliers[TIME_UNIT.DAYS]){return seconds/multipliers[TIME_UNIT.HOURS]+TIME_UNIT.HOURS}return seconds/multipliers[TIME_UNIT.DAYS]+TIME_UNIT.DAYS};var types=__webpack_require__(6);function getDefaultAppState(){const transientState=getInitialState("transient");const state={};if(transientState.fullscreen){state[types["AppStateKeys"].FULLSCREEN]=true}if(transientState.refresh.interval>0){state[types["AppStateKeys"].REFRESH_INTERVAL]=createTimeInterval(transientState.refresh.interval)}if(transientState.autoplay.enabled){state[types["AppStateKeys"].AUTOPLAY_INTERVAL]=createTimeInterval(transientState.autoplay.interval)}return state}function getCurrentAppState(){const history=historyProvider(Object(get_window["a"])());const{search:search}=history.getLocation();const qs=!!search?Object(query_string["parse"])(search.replace(/^\?/,""),{sort:false}):{};const appState=assignAppState({},qs);return appState}function getAppState(key){const appState={...getDefaultAppState(),...getCurrentAppState()};return key?Object(external_kbnSharedDeps_Lodash_["get"])(appState,key):appState}function assignAppState(obj,appState){const fullscreen=appState[types["AppStateKeys"].FULLSCREEN];const refreshKey=appState[types["AppStateKeys"].REFRESH_INTERVAL];const autoplayKey=appState[types["AppStateKeys"].AUTOPLAY_INTERVAL];if(fullscreen){obj[types["AppStateKeys"].FULLSCREEN]=true}else{delete obj[types["AppStateKeys"].FULLSCREEN]}const refresh=Array.isArray(refreshKey)?refreshKey[0]:refreshKey;if(refresh&&isValidTimeInterval(refresh)){obj[types["AppStateKeys"].REFRESH_INTERVAL]=refresh}else{delete obj[types["AppStateKeys"].REFRESH_INTERVAL]}const autoplay=Array.isArray(autoplayKey)?autoplayKey[0]:autoplayKey;if(autoplay&&isValidTimeInterval(autoplay)){obj[types["AppStateKeys"].AUTOPLAY_INTERVAL]=autoplay}else{delete obj[types["AppStateKeys"].AUTOPLAY_INTERVAL]}return obj}function app_state_setFullscreen(payload){const appState=getAppState();const appValue=appState[types["AppStateKeys"].FULLSCREEN];if(payload===false&&appValue){delete appState[types["AppStateKeys"].FULLSCREEN];routerProvider().updateAppState(appState)}else if(payload===true&&!appValue){appState[types["AppStateKeys"].FULLSCREEN]=true;routerProvider().updateAppState(appState)}}function app_state_setAutoplayInterval(payload){const appState=getAppState();const appValue=appState[types["AppStateKeys"].AUTOPLAY_INTERVAL];if(payload!==appValue){if(!payload&&appValue){delete appState[types["AppStateKeys"].AUTOPLAY_INTERVAL];routerProvider().updateAppState(appState)}else if(payload){appState[types["AppStateKeys"].AUTOPLAY_INTERVAL]=payload;routerProvider().updateAppState(appState)}}}function app_state_setRefreshInterval(payload){const appState=getAppState();const appValue=appState[types["AppStateKeys"].REFRESH_INTERVAL];if(payload!==appValue){if(getTimeInterval(payload)){appState[types["AppStateKeys"].REFRESH_INTERVAL]=payload;routerProvider().updateAppState(appState)}else{delete appState[types["AppStateKeys"].REFRESH_INTERVAL];routerProvider().updateAppState(appState)}}}var url_url=__webpack_require__(85);function modifyUrl(url,urlModifier){const parsed=Object(url_url["parse"])(url,true);const meaningfulParts={auth:parsed.auth,hash:parsed.hash,hostname:parsed.hostname,pathname:parsed.pathname,port:parsed.port,protocol:parsed.protocol,query:parsed.query||{},slashes:parsed.slashes};const modifiedParts=urlModifier(meaningfulParts)||meaningfulParts;return Object(url_url["format"])({auth:modifiedParts.auth,hash:modifiedParts.hash,hostname:modifiedParts.hostname,pathname:modifiedParts.pathname,port:modifiedParts.port,protocol:modifiedParts.protocol,query:modifiedParts.query,slashes:modifiedParts.slashes})}let router_provider_router;function routerProvider(routes){if(router_provider_router){return router_provider_router}const baseRouter=router_min_default()(routes);const history=historyProvider(Object(get_window["a"])());const componentListeners=[];const isPath=str=>typeof str==="string"&&str.substr(0,1)==="/";const getState=(name,params,state)=>{if(isPath(name)){return params||history.getLocation().state}return state||history.getLocation().state};const appendAppState=(path,appState=getCurrentAppState())=>{const newUrl=modifyUrl(path,parts=>{parts.query=assignAppState(parts.query,appState)});return newUrl};const updateLocation=(name,params,state,replace=false)=>{const currentState=getState(name,params,state);const method=replace?"replace":"push";if(isPath(name)){return history[method](currentState,appendAppState(name))}history[method](currentState,appendAppState(baseRouter.create(name,params)))};router_provider_router={...baseRouter,execute(path=history.getPath()){return this.parse(path)},getPath:()=>history.getPath(),getFullPath:()=>history.getFullPath(),navigateTo(name,params,state){updateLocation(name,params,state)},redirectTo(name,params,state){updateLocation(name,params,state,true)},updateAppState(appState,replace=true){const method=replace?"replace":"push";const newPath=appendAppState(this.getPath(),appState);const currentState=history.getLocation().state;history[method](currentState,newPath)},onPathChange(fn){const execOnMatch=location=>{const{pathname:pathname}=location;const match=this.match(pathname);if(!match){console.error("No route found for path: ",pathname);return}fn({...match,location:location})};const unlisten=history.onChange((locationObj,prevLocationObj)=>{if(locationObj.pathname!==prevLocationObj.pathname||locationObj.search!==prevLocationObj.search){execOnMatch(locationObj)}});componentListeners.push(unlisten);execOnMatch(history.getLocation());return unlisten},stop:()=>{for(const listener of componentListeners){listener()}}};return router_provider_router}const stopRouter=()=>{if(router_provider_router){router_provider_router.stop();router_provider_router=undefined}};const CanvasLoading=({msg:msg})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasContainer--loading"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingChart"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"default",size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,msg))));CanvasLoading.defaultProps={msg:"Loading..."};function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class router_Router extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args);_defineProperty(this,"state",{router:{},activeComponent:CanvasLoading})}getChildContext(){const{router:router}=this.state;return{router:router}}UNSAFE_componentWillMount(){const{routes:routes,onRouteChange:onRouteChange,onLoad:onLoad,onError:onError}=this.props;const router=routerProvider(routes);let firstLoad=true;router.onPathChange(route=>{const{pathname:pathname}=route.location;const{component:component}=route.meta;if(!component){if(false){}return}if(firstLoad){firstLoad=false;router.execute().then(()=>onLoad()).catch(err=>onError(err))}const appState=getAppState();if(appState.__fullscreen){this.props.setFullscreen(appState.__fullscreen)}if(appState.__refreshInterval){this.props.setRefreshInterval(getTimeInterval(appState.__refreshInterval))}if(!!appState.__autoplayInterval){this.props.enableAutoplay(true);this.props.setAutoplayInterval(getTimeInterval(appState.__autoplayInterval))}onRouteChange&&onRouteChange(pathname);this.setState({activeComponent:component})});this.setState({router:router})}render(){if(this.props.showLoading){return external_kbnSharedDeps_React_default.a.createElement(CanvasLoading,{msg:this.props.loadingMessage})}return external_kbnSharedDeps_React_default.a.createElement(RouterContext.Provider,{value:this.state.router},external_kbnSharedDeps_React_default.a.createElement(this.state.activeComponent,null))}}_defineProperty(router_Router,"childContextTypes",{router:prop_types_default.a.object.isRequired});const RouterContext=external_kbnSharedDeps_React_default.a.createContext(undefined);const mapDispatchToProps={enableAutoplay:workpad_enableAutoplay,setAutoplayInterval:workpad_setAutoplayInterval,setFullscreen:setFullscreen,setRefreshInterval:workpad_setRefreshInterval};const mapStateToProps=state=>({refreshInterval:state.transient.refresh.interval,autoplayInterval:state.transient.autoplay.interval,autoplay:state.transient.autoplay.enabled,fullscreen:state.transient.fullScreen});const components_router_Router=Object(lib["connect"])(mapStateToProps,mapDispatchToProps,(stateProps,dispatchProps,ownProps)=>({...ownProps,...dispatchProps,setRefreshInterval:interval=>{if(interval!==stateProps.refreshInterval){dispatchProps.setRefreshInterval(interval)}},setAutoplayInterval:interval=>{if(interval!==stateProps.autoplayInterval){dispatchProps.setRefreshInterval(interval)}},enableAutoplay:autoplay=>{if(autoplay!==stateProps.autoplay){dispatchProps.enableAutoplay(autoplay)}},setFullscreen:fullscreen=>{if(fullscreen!==stateProps.fullscreen){dispatchProps.setFullscreen(fullscreen)}}}))(router_Router);function link_extends(){link_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return link_extends.apply(this,arguments)}const{Link:link_strings}=i18n["e"];const isModifiedEvent=ev=>!!(ev.metaKey||ev.altKey||ev.ctrlKey||ev.shiftKey);const Link=({onClick:onClick,target:target,name:name,params:params,children:children,...linkArgs})=>{const router=Object(external_kbnSharedDeps_React_["useContext"])(RouterContext);if(router){const navigateTo=ev=>{if(onClick){onClick(ev)}if(!ev.defaultPrevented&&ev.button===0&&!target&&!isModifiedEvent(ev)){ev.preventDefault();router.navigateTo(name,params)}};try{return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],link_extends({},linkArgs,{target:target,onClick:navigateTo}),children)}catch(e){return external_kbnSharedDeps_React_default.a.createElement("div",null,link_strings.getErrorMessage(e.message))}}return external_kbnSharedDeps_React_default.a.createElement("div",null,link_strings.getErrorMessage("Router Undefined"))};Link.contextTypes={router:prop_types_default.a.object};var paginate=__webpack_require__(62);const{WorkpadFileUpload:upload_workpad_errors}=i18n["g"];const uploadWorkpad=(file,onUpload,notify)=>{if(!file){return}if(Object(external_kbnSharedDeps_Lodash_["get"])(file,"type")!=="application/json"){return notify.warning(upload_workpad_errors.getAcceptJSONOnlyErrorMessage(),{title:file.name?upload_workpad_errors.getFileUploadFailureWithFileNameErrorMessage(file.name):upload_workpad_errors.getFileUploadFailureWithoutFileNameErrorMessage()})}const reader=new FileReader;reader.onload=()=>{try{const workpad=JSON.parse(reader.result);workpad.id=Object(get_id["a"])("workpad");if(!Array.isArray(workpad.pages)||workpad.pages.length===0||!workpad.assets){throw new Error(upload_workpad_errors.getMissingPropertiesErrorMessage())}onUpload(workpad)}catch(e){notify.error(e,{title:file.name?upload_workpad_errors.getFileUploadFailureWithFileNameErrorMessage(file.name):upload_workpad_errors.getFileUploadFailureWithoutFileNameErrorMessage()})}};reader.readAsText(file)};var dist=__webpack_require__(333);var dist_default=__webpack_require__.n(dist);const WorkpadDropzone=({onDropAccepted:onDropAccepted,onDropRejected:onDropRejected,disabled:disabled,children:children})=>external_kbnSharedDeps_React_default.a.createElement(dist_default.a,{accept:"application/json",onDropAccepted:onDropAccepted,onDropRejected:onDropRejected,disableClick:true,disabled:disabled,className:"canvasWorkpad__dropzone",activeClassName:"canvasWorkpad__dropzone--active"},children);const{WorkpadFileUpload:workpad_dropzone_errors}=i18n["g"];const workpad_dropzone_WorkpadDropzone=Object(Recompose["compose"])(Object(Recompose["withHandlers"])(({notify:notify})=>({onDropAccepted:({onUpload:onUpload})=>([file])=>uploadWorkpad(file,onUpload),onDropRejected:()=>([file])=>{notify.warning(workpad_dropzone_errors.getAcceptJSONOnlyErrorMessage(),{title:file.name?workpad_dropzone_errors.getFileUploadFailureWithFileNameErrorMessage(file.name):workpad_dropzone_errors.getFileUploadFailureWithoutFileNameErrorMessage()})}})))(WorkpadDropzone);workpad_dropzone_WorkpadDropzone.propTypes={onUpload:prop_types_default.a.func.isRequired};function workpad_create_extends(){workpad_create_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return workpad_create_extends.apply(this,arguments)}const{WorkpadCreate:workpad_create_strings}=i18n["e"];const WorkpadCreate=({createPending:createPending,onCreate:onCreate,...rest})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],workpad_create_extends({},rest,{iconType:"plusInCircle",fill:true,onClick:onCreate,isLoading:createPending,"data-test-subj":"create-workpad-button"}),workpad_create_strings.getWorkpadCreateButtonLabel());function workpad_search_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const{WorkpadSearch:workpad_search_strings}=i18n["e"];class workpad_search_WorkpadSearch extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args);workpad_search_defineProperty(this,"state",{searchText:this.props.initialText||""});workpad_search_defineProperty(this,"triggerChange",Object(external_kbnSharedDeps_Lodash_["debounce"])(this.props.onChange,150));workpad_search_defineProperty(this,"setSearchText",ev=>{const text=ev.target.value;this.setState({searchText:text});this.triggerChange(text)})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldSearch"],{placeholder:workpad_search_strings.getWorkpadSearchPlaceholder(),value:this.state.searchText,onChange:this.setSearchText,fullWidth:true,incremental:true})}}function workpad_loader_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const{WorkpadLoader:workpad_loader_strings}=i18n["e"];const getDisplayName=(name,workpad,loadedWorkpad)=>{const workpadName=name.length?name:external_kbnSharedDeps_React_default.a.createElement("em",null,workpad.id);return workpad.id===loadedWorkpad?external_kbnSharedDeps_React_default.a.createElement("strong",null,workpadName):workpadName};class workpad_loader_WorkpadLoader extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args);workpad_loader_defineProperty(this,"state",{createPending:false,deletingWorkpad:false,sortField:"@timestamp",sortDirection:"desc",selectedWorkpads:[],pageSize:10});workpad_loader_defineProperty(this,"createWorkpad",async()=>{this.setState({createPending:true});await this.props.createWorkpad();this._isMounted&&this.setState({createPending:false})});workpad_loader_defineProperty(this,"onUpload",async workpad=>{this.setState({createPending:true});await this.props.createWorkpad(workpad);this._isMounted&&this.setState({createPending:false})});workpad_loader_defineProperty(this,"cloneWorkpad",async workpad=>{this.setState({createPending:true});await this.props.cloneWorkpad(workpad.id);this._isMounted&&this.setState({createPending:false})});workpad_loader_defineProperty(this,"openRemoveConfirm",()=>this.setState({deletingWorkpad:true}));workpad_loader_defineProperty(this,"closeRemoveConfirm",()=>this.setState({deletingWorkpad:false}));workpad_loader_defineProperty(this,"removeWorkpads",()=>{const{selectedWorkpads:selectedWorkpads}=this.state;this.props.removeWorkpads(selectedWorkpads.map(({id:id})=>id)).then(remainingIds=>{const remainingWorkpads=remainingIds.length>0?selectedWorkpads.filter(({id:id})=>remainingIds.includes(id)):[];this._isMounted&&this.setState({deletingWorkpad:false,selectedWorkpads:remainingWorkpads})})});workpad_loader_defineProperty(this,"downloadWorkpads",()=>{this.state.selectedWorkpads.forEach(({id:id})=>this.props.downloadWorkpad(id))});workpad_loader_defineProperty(this,"onSelectionChange",selectedWorkpads=>{this.setState({selectedWorkpads:selectedWorkpads})});workpad_loader_defineProperty(this,"onTableChange",({sort:sort={}})=>{const{field:sortField,direction:sortDirection}=sort;this.setState({sortField:sortField,sortDirection:sortDirection})});workpad_loader_defineProperty(this,"renderWorkpadTable",({rows:rows,pageNumber:pageNumber,totalPages:totalPages,setPage:setPage})=>{const{sortField:sortField,sortDirection:sortDirection}=this.state;const{canUserWrite:canUserWrite,createPending:createPending,workpadId:loadedWorkpad}=this.props;const actions=[{render:workpad=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:workpad_loader_strings.getExportToolTip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"exportAction",onClick:()=>this.props.downloadWorkpad(workpad.id),"aria-label":workpad_loader_strings.getExportToolTip()}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:canUserWrite?workpad_loader_strings.getCloneToolTip():workpad_loader_strings.getNoPermissionToCloneToolTip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"copy",onClick:()=>this.cloneWorkpad(workpad),"aria-label":workpad_loader_strings.getCloneToolTip(),disabled:!canUserWrite}))))}];const columns=[{field:"name",name:workpad_loader_strings.getTableNameColumnTitle(),sortable:true,dataType:"string",render:(name,workpad)=>{const workpadName=getDisplayName(name,workpad,loadedWorkpad);return external_kbnSharedDeps_React_default.a.createElement(Link,{"data-test-subj":"canvasWorkpadLoaderWorkpad",name:"loadWorkpad",params:{id:workpad.id},"aria-label":workpad_loader_strings.getLoadWorkpadArialLabel()},workpadName)}},{field:"@created",name:workpad_loader_strings.getTableCreatedColumnTitle(),sortable:true,dataType:"date",width:"20%",render:date=>this.props.formatDate(date)},{field:"@timestamp",name:workpad_loader_strings.getTableUpdatedColumnTitle(),sortable:true,dataType:"date",width:"20%",render:date=>this.props.formatDate(date)},{name:"",actions:actions,width:"5%"}];const sorting={sort:{field:sortField,direction:sortDirection}};const selection={itemId:"id",onSelectionChange:this.onSelectionChange};const emptyTable=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"importAction",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,workpad_loader_strings.getEmptyPromptTitle()),titleSize:"s",body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,workpad_loader_strings.getEmptyPromptGettingStartedDescription()),external_kbnSharedDeps_React_default.a.createElement("p",null,workpad_loader_strings.getEmptyPromptNewUserDescription()," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:"home#/tutorial_directory/sampleData"},workpad_loader_strings.getSampleDataLinkLabel()),"."))});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(workpad_dropzone_WorkpadDropzone,{onUpload:this.onUpload,disabled:createPending||!canUserWrite,notify:this.props.notify},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBasicTable"],{items:rows,itemId:"id",columns:columns,sorting:sorting,noItemsMessage:emptyTable,onChange:this.onTableChange,isSelectable:true,selection:selection,className:"canvasWorkpad__dropzoneTable","data-test-subj":"canvasWorkpadLoaderTable"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),rows.length>0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"none",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPagination"],{activePage:pageNumber,onPageClick:setPage,pageCount:totalPages})))))})}async componentDidMount(){this.props.findWorkpads();this._isMounted=true}UNSAFE_componentWillReceiveProps(newProps){const{workpadId:workpadId,onClose:onClose}=this.props;if(workpadId!==newProps.workpadId){onClose()}}componentWillUnmount(){this._isMounted=false}render(){const{deletingWorkpad:deletingWorkpad,createPending:createPending,selectedWorkpads:selectedWorkpads,sortField:sortField,sortDirection:sortDirection}=this.state;const{canUserWrite:canUserWrite}=this.props;const isLoading=this.props.workpads==null;let createButton=external_kbnSharedDeps_React_default.a.createElement(WorkpadCreate,{createPending:createPending,onCreate:this.createWorkpad,disabled:!canUserWrite});let deleteButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"danger",iconType:"trash",onClick:this.openRemoveConfirm,disabled:!canUserWrite,"aria-label":workpad_loader_strings.getDeleteButtonAriaLabel(selectedWorkpads.length)},workpad_loader_strings.getDeleteButtonLabel(selectedWorkpads.length));const downloadButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"secondary",onClick:this.downloadWorkpads,iconType:"exportAction","aria-label":workpad_loader_strings.getExportButtonAriaLabel(selectedWorkpads.length)},workpad_loader_strings.getExportButtonLabel(selectedWorkpads.length));let uploadButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilePicker"],{display:"default",compressed:true,className:"canvasWorkpad__upload--compressed",initialPromptText:workpad_loader_strings.getFilePickerPlaceholder(),onChange:([file])=>uploadWorkpad(file,this.onUpload,this.props.notify),accept:"application/json",disabled:createPending||!canUserWrite});if(!canUserWrite){createButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:workpad_loader_strings.getNoPermissionToCreateToolTip()},createButton);deleteButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:workpad_loader_strings.getNoPermissionToDeleteToolTip()},deleteButton);uploadButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:workpad_loader_strings.getNoPermissionToUploadToolTip()},uploadButton)}const modalTitle=selectedWorkpads.length===1?workpad_loader_strings.getDeleteSingleWorkpadModalTitle(selectedWorkpads[0].name):workpad_loader_strings.getDeleteMultipleWorkpadModalTitle(selectedWorkpads.length);const confirmModal=external_kbnSharedDeps_React_default.a.createElement(confirm_modal_ConfirmModal,{isOpen:deletingWorkpad,title:modalTitle,message:workpad_loader_strings.getDeleteModalDescription(),confirmButtonText:workpad_loader_strings.getDeleteModalConfirmButtonLabel(),onConfirm:this.removeWorkpads,onCancel:this.closeRemoveConfirm});let sortedWorkpads=[];if(!createPending&&!isLoading){const{workpads:workpads}=this.props.workpads;sortedWorkpads=Object(external_kbnSharedDeps_Lodash_["orderBy"])(workpads,[sortField,"@timestamp"],[sortDirection,"desc"])}return external_kbnSharedDeps_React_default.a.createElement(paginate["a"],{rows:sortedWorkpads},pagination=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:2},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},selectedWorkpads.length>0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},downloadButton),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},deleteButton)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:1},external_kbnSharedDeps_React_default.a.createElement(workpad_search_WorkpadSearch,{onChange:text=>{pagination.setPage(0);this.props.findWorkpads(text)}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:2},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",justifyContent:"flexEnd",wrap:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},uploadButton),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},createButton)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),createPending&&external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:"100%"}},workpad_loader_strings.getCreateWorkpadLoadingDescription()),!createPending&&isLoading&&external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:"100%"}},workpad_loader_strings.getFetchLoadingDescription()),!createPending&&!isLoading&&this.renderWorkpadTable(pagination),confirmModal))}}const{WorkpadLoader:components_workpad_loader_strings}=i18n["e"];const{WorkpadLoader:workpad_loader_errors}=i18n["g"];const workpad_loader_mapStateToProps=state=>({workpadId:getWorkpad(state).id,canUserWrite:app_canUserWrite(state)});const components_workpad_loader_WorkpadLoader=Object(Recompose["compose"])(Object(Recompose["getContext"])({router:prop_types_default.a.object}),Object(lib["connect"])(workpad_loader_mapStateToProps),Object(Recompose["withState"])("workpads","setWorkpads",null),public_services["i"],Object(Recompose["withProps"])(({services:services})=>({notify:services.notify})),Object(Recompose["withHandlers"])(({services:services})=>({createWorkpad:props=>async workpad=>{if(workpad!=null){try{await create(workpad);props.router.navigateTo("loadWorkpad",{id:workpad.id,page:1})}catch(err){services.notify.error(err,{title:workpad_loader_errors.getUploadFailureErrorMessage()})}return}props.router.navigateTo("createWorkpad")},findWorkpads:({setWorkpads:setWorkpads})=>async text=>{try{const workpads=await find(text);setWorkpads(workpads)}catch(err){services.notify.error(err,{title:workpad_loader_errors.getFindFailureErrorMessage()})}},downloadWorkpad:()=>workpadId=>downloadWorkpad(workpadId),cloneWorkpad:props=>async workpadId=>{try{const workpad=await get(workpadId);workpad.name=components_workpad_loader_strings.getClonedWorkpadName(workpad.name);workpad.id=Object(get_id["a"])("workpad");await create(workpad);props.router.navigateTo("loadWorkpad",{id:workpad.id,page:1})}catch(err){services.notify.error(err,{title:workpad_loader_errors.getCloneFailureErrorMessage()})}},removeWorkpads:props=>async workpadIds=>{const{setWorkpads:setWorkpads,workpads:workpads,workpadId:loadedWorkpad}=props;const removeWorkpads=workpadIds.map(id=>remove(id).then(()=>({id:id,err:null})).catch(err=>({id:id,err:err})));return Promise.all(removeWorkpads).then(results=>{let redirectHome=false;const[passes,errored]=results.reduce(([passes,errors],result)=>{if(result.id===loadedWorkpad&&!result.err){redirectHome=true}if(result.err){errors.push(result.id)}else{passes.push(result.id)}return[passes,errors]},[[],[]]);const remainingWorkpads=workpads.workpads.filter(({id:id})=>!passes.includes(id));const workpadState={total:remainingWorkpads.length,workpads:remainingWorkpads};if(errored.length>0){services.notify.error(workpad_loader_errors.getDeleteFailureErrorMessage())}setWorkpads(workpadState);if(redirectHome){props.router.navigateTo("home")}return errored.map(({id:id})=>id)})}})),Object(Recompose["withProps"])(props=>({formatDate:date=>{const dateFormat=props.services.platform.getUISetting("dateFormat");return date&&external_kbnSharedDeps_Moment_default()(date).format(dateFormat)}})))(workpad_loader_WorkpadLoader);var components=__webpack_require__(42);function tag_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class Tag{constructor(config){tag_defineProperty(this,"name",void 0);tag_defineProperty(this,"color",void 0);this.name=config.name;this.color=config.color}}class tags_registry_TagRegistry extends common["Registry"]{wrapper(obj){return new Tag(obj)}}const tagsRegistry=new tags_registry_TagRegistry;function tag_extends(){tag_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return tag_extends.apply(this,arguments)}const tag_Tag=({name:name,color:color="#666666",type:type="health",...rest})=>{switch(type){case"health":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHealth"],tag_extends({color:color},rest),name);case"badge":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],tag_extends({color:color},rest),name)}};const TagList=({tags:tags=[],tagType:tagType="health",getTag:getTag})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,tags.length?tags.map(tag=>{const{color:color,name:name}=getTag(tag);const id=Object(get_id["a"])("tag");return external_kbnSharedDeps_React_default.a.createElement(tag_Tag,{key:id,color:color,name:name,type:tagType})}):null);const tag_list_TagList=Object(Recompose["compose"])(Object(Recompose["withProps"])(()=>({getTag:tag=>tagsRegistry.get(tag)||{name:tag,color:undefined}})))(TagList);const{WorkpadTemplates:get_tags_filter_strings}=i18n["e"];const getTagsFilter=type=>{const uniqueTags=Object(external_kbnSharedDeps_Lodash_["sortBy"])(Object.values(tagsRegistry.toJS()),"name");const filterType="field_value_selection";return{type:filterType,field:"tag",name:get_tags_filter_strings.getTableTagsColumnTitle(),multiSelect:true,options:uniqueTags.map(({name:name,color:color})=>({value:name,name:name,view:external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(tag_Tag,{key:Object(get_id["a"])("tag"),color:color,name:name,type:type}))}))}};const extractSearch=queryText=>{const filterTags=[];const searchTerms=[];const parts=queryText.split(" ");parts.forEach(part=>{if(part.indexOf(":")>=0){const[key,value]=part.split(":");if(key==="tag"){filterTags.push(value);return}}searchTerms.push(part)});return{searchTerm:searchTerms.join(" "),filterTags:filterTags}};function workpad_templates_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const{WorkpadTemplates:workpad_templates_strings}=i18n["e"];class workpad_templates_WorkpadTemplates extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args);workpad_templates_defineProperty(this,"state",{sortField:"name",sortDirection:external_kbnSharedDeps_ElasticEui_["SortDirection"].ASC,pageSize:10,searchTerm:"",filterTags:[]});workpad_templates_defineProperty(this,"tagType","health");workpad_templates_defineProperty(this,"onTableChange",tableChange=>{if(tableChange.sort){const{field:sortField,direction:sortDirection}=tableChange.sort;this.setState({sortField:sortField,sortDirection:sortDirection})}});workpad_templates_defineProperty(this,"onSearch",({queryText:queryText=""})=>this.setState(extractSearch(queryText)));workpad_templates_defineProperty(this,"cloneTemplate",template=>this.props.onCreateFromTemplate(template).then(()=>this.props.onClose()));workpad_templates_defineProperty(this,"renderWorkpadTable",({rows:rows,pageNumber:pageNumber,totalPages:totalPages,setPage:setPage})=>{const{sortField:sortField,sortDirection:sortDirection}=this.state;const columns=[{field:"name",name:workpad_templates_strings.getTableNameColumnTitle(),sortable:true,width:"30%",dataType:"string",render:(name,template)=>{const templateName=name.length?name:"Unnamed Template";return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:()=>this.cloneTemplate(template),"aria-label":workpad_templates_strings.getCloneTemplateLinkAriaLabel(templateName),type:"button"},templateName)}},{field:"help",name:workpad_templates_strings.getTableDescriptionColumnTitle(),sortable:false,dataType:"string",width:"30%"},{field:"tags",name:workpad_templates_strings.getTableTagsColumnTitle(),sortable:false,dataType:"string",width:"30%",render:tags=>external_kbnSharedDeps_React_default.a.createElement(tag_list_TagList,{tags:tags,tagType:this.tagType})}];const sorting={sort:{field:sortField,direction:sortDirection}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBasicTable"],{compressed:true,items:rows,itemId:"id",columns:columns,sorting:sorting,onChange:this.onTableChange,className:"canvasWorkpad__dropzoneTable canvasWorkpad__dropzoneTable--tags"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),rows.length>0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"none",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPagination"],{activePage:pageNumber,onPageClick:setPage,pageCount:totalPages}))))});workpad_templates_defineProperty(this,"renderSearch",()=>{const{searchTerm:searchTerm}=this.state;const filters=[getTagsFilter(this.tagType)];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSearchBar"],{defaultQuery:searchTerm,box:{placeholder:workpad_templates_strings.getTemplateSearchPlaceholder(),incremental:true},filters:filters,onChange:this.onSearch})})}render(){const{templates:templates}=this.props;const{sortField:sortField,sortDirection:sortDirection,searchTerm:searchTerm,filterTags:filterTags}=this.state;const sortedTemplates=Object(external_kbnSharedDeps_Lodash_["orderBy"])(templates,[sortField,"name"],[sortDirection,"asc"]);const filteredTemplates=sortedTemplates.filter(({name:name="",help:help="",tags:tags=[]})=>{const tagMatch=filterTags.length?filterTags.every(filterTag=>tags.indexOf(filterTag)>-1):true;const lowercaseSearch=searchTerm.toLowerCase();const textMatch=lowercaseSearch?name.toLowerCase().indexOf(lowercaseSearch)>-1||help.toLowerCase().indexOf(lowercaseSearch)>-1:true;return tagMatch&&textMatch});return external_kbnSharedDeps_React_default.a.createElement(paginate["a"],{rows:filteredTemplates},pagination=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,this.renderSearch(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),this.renderWorkpadTable(pagination)))}}const template_service_getApiPath=function(){const basePath=public_services["d"].getService().getBasePath();return`${basePath}${constants["f"]}`};async function list(){const templateResponse=await fetch["b"].get(`${template_service_getApiPath()}`);return templateResponse.data.templates}const getTemplateStrings=()=>({Dark:{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.canvas.templates.darkName",{defaultMessage:"Dark"}),help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.canvas.templates.darkHelp",{defaultMessage:"Dark color themed presentation deck"})},Light:{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.canvas.templates.lightName",{defaultMessage:"Light"}),help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.canvas.templates.lightHelp",{defaultMessage:"Light color themed presentation deck"})},Status:{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.canvas.templates.statusName",{defaultMessage:"Status"}),help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.canvas.templates.statusHelp",{defaultMessage:"Document-style report with live charts"})},Summary:{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.canvas.templates.summaryDisplayName",{defaultMessage:"Summary"}),help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.canvas.templates.summaryHelp",{defaultMessage:"Infographic-style report with live charts"})},Pitch:{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.canvas.templates.pitchName",{defaultMessage:"Pitch"}),help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.canvas.templates.pitchHelp",{defaultMessage:"Branded presentation with large photos"})}});const applyTemplateStrings=templates=>{const templateStrings=getTemplateStrings();return templates.map(template=>{const{name:templateName}=template;const strings=templateStrings[templateName];if(strings){const{name:name,help:help}=strings;if(help){template.help=help}if(name){template.name=name}}if(template.tags){template.tags=template.tags.map(tag=>{if(i18n["o"][tag]){return i18n["o"][tag]()}return tag})}return template})};const Creating=({name:name})=>external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"l"})," ",components["a"].WorkpadTemplates.getCreatingTemplateLabel(name));const components_workpad_templates_WorkpadTemplates=({onClose:onClose})=>{const router=Object(external_kbnSharedDeps_React_["useContext"])(RouterContext);const[templates,setTemplates]=Object(external_kbnSharedDeps_React_["useState"])(undefined);const[creatingFromTemplateName,setCreatingFromTemplateName]=Object(external_kbnSharedDeps_React_["useState"])(undefined);const{error:error}=Object(public_services["g"])();Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!templates){(async()=>{const fetchedTemplates=await list();setTemplates(applyTemplateStrings(fetchedTemplates))})()}},[templates]);let templateProp={};if(templates){templateProp=templates.reduce((reduction,template)=>{reduction[template.name]=template;return reduction},{})}const createFromTemplate=async template=>{setCreatingFromTemplateName(template.name);try{const result=await workpad_service_createFromTemplate(template.id);if(router){router.navigateTo("loadWorkpad",{id:result.data.id,page:1})}}catch(e){setCreatingFromTemplateName(undefined);error(e,{title:`Couldn't create workpad from template`})}};if(creatingFromTemplateName){return external_kbnSharedDeps_React_default.a.createElement(Creating,{name:creatingFromTemplateName})}return external_kbnSharedDeps_React_default.a.createElement(workpad_templates_WorkpadTemplates,{onClose:onClose,templates:templateProp,onCreateFromTemplate:createFromTemplate})};const{WorkpadManager:workpad_manager_strings}=i18n["e"];const WorkpadManager=({onClose:onClose})=>{const tabs=[{id:"workpadLoader",name:workpad_manager_strings.getMyWorkpadsTabLabel(),content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(components_workpad_loader_WorkpadLoader,{onClose:onClose}))},{id:"workpadTemplates",name:workpad_manager_strings.getWorkpadTemplatesTabLabel(),content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(components_workpad_templates_WorkpadTemplates,{onClose:onClose}))}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],{className:"canvasHomeApp__modalHeader"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,workpad_manager_strings.getModalTitle())))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],{className:"canvasHomeApp__modalBody"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTabbedContent"],{tabs:tabs,initialSelectedTab:tabs[0]})))};const setDocTitle=title=>document.title=`${title} - Kibana`;const HomeApp=({onLoad:onLoad=(()=>{})})=>{onLoad();setDocTitle("Canvas");return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPage"],{className:"canvasHomeApp",restrictWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{className:"canvasHomeApp__content",panelPaddingSize:"none",horizontalPosition:"center"},external_kbnSharedDeps_React_default.a.createElement(WorkpadManager,{onClose:()=>{}}))))};const home_app_HomeApp=Object(lib["connect"])(null,dispatch=>({onLoad(){dispatch(resetWorkpad())}}))(HomeApp);const routes_routes=[{name:"home",path:"/",action:()=>()=>{setBreadcrumb([getBaseBreadcrumb()])},meta:{component:home_app_HomeApp}}];const createAsset=Object(redux_actions_lib["createAction"])("createAsset",(type,value,id)=>({type:type,value:value,id:id}));const setAssetValue=Object(redux_actions_lib["createAction"])("setAssetContent",(id,value)=>({id:id,value:value}));const removeAsset=Object(redux_actions_lib["createAction"])("removeAsset");const setAssets=Object(redux_actions_lib["createAction"])("setAssets");const resetAssets=Object(redux_actions_lib["createAction"])("resetAssets");const addPage=Object(redux_actions_lib["createAction"])("addPage");const duplicatePage=Object(redux_actions_lib["createAction"])("duplicatePage");const movePage=Object(redux_actions_lib["createAction"])("movePage",(id,position)=>({id:id,position:position}));const removePage=Object(redux_actions_lib["createAction"])("removePage");const stylePage=Object(redux_actions_lib["createAction"])("stylePage",(pageId,style)=>({pageId:pageId,style:style}));const pages_setPage=Object(redux_actions_lib["createAction"])("setPage");const setPageTransition=Object(redux_actions_lib["createAction"])("setPageTransition",(pageId,transition)=>({pageId:pageId,transition:transition}));var lib_storage=__webpack_require__(50);const setClipboardData=data=>{Object(lib_storage["a"])().set(constants["w"],JSON.stringify(data))};const getClipboardData=()=>Object(lib_storage["a"])().get(constants["w"]);const cloneSubgraphs=nodes=>{const idMap=arrayToMap(nodes.map(n=>n.id));Object.keys(idMap).forEach(key=>idMap[key]=Object(get_id["a"])(key.split("-")[0]));return nodes.map(element=>({...element,id:idMap[element.id],position:{...element.position,parent:element.position.parent?idMap[element.position.parent]:null}}))};const custom_element_service_getApiPath=function(){const basePath=public_services["d"].getService().getBasePath();return`${basePath}${constants["b"]}`};const custom_element_service_create=customElement=>fetch["b"].post(custom_element_service_getApiPath(),customElement);const custom_element_service_get=customElementId=>fetch["b"].get(`${custom_element_service_getApiPath()}/${customElementId}`).then(({data:element})=>element);const custom_element_service_update=(id,element)=>fetch["b"].put(`${custom_element_service_getApiPath()}/${id}`,element);const custom_element_service_remove=id=>fetch["b"].delete(`${custom_element_service_getApiPath()}/${id}`);const custom_element_service_find=async searchTerm=>{const validSearchTerm=typeof searchTerm==="string"&&searchTerm.length>0;return fetch["b"].get(`${custom_element_service_getApiPath()}/find?name=${validSearchTerm?searchTerm:""}&perPage=10000`).then(({data:customElements})=>customElements)};const extractId=node=>node.id;const basicHandlerCreators={cloneNodes:({insertNodes:insertNodes,pageId:pageId,selectToplevelNodes:selectToplevelNodes,selectedNodes:selectedNodes})=>()=>{const clonedNodes=selectedNodes&&cloneSubgraphs(selectedNodes);if(clonedNodes){insertNodes(clonedNodes,pageId);selectToplevelNodes(clonedNodes)}},deleteNodes:({pageId:pageId,removeNodes:removeNodes,selectedNodes:selectedNodes})=>()=>{if(selectedNodes.length){removeNodes(selectedNodes.map(extractId),pageId)}},createCustomElement:({selectedNodes:selectedNodes})=>(name="",description="",image="")=>{if(selectedNodes.length){const content=JSON.stringify({selectedNodes:selectedNodes});const customElement={id:Object(get_id["a"])("custom-element"),name:Object(external_kbnSharedDeps_Lodash_["camelCase"])(name),displayName:name,help:description,image:image,content:content};custom_element_service_create(customElement).then(()=>public_services["c"].getService().success(`Custom element '${customElement.displayName||customElement.id}' was saved`,{"data-test-subj":"canvasCustomElementCreate-success"})).catch(error=>public_services["c"].getService().warning(error,{title:`Custom element '${customElement.displayName||customElement.id}' was not saved`}))}}};const alignmentDistributionHandlerCreators=Object.assign({},...["alignLeft","alignCenter","alignRight","alignTop","alignMiddle","alignBottom","distributeHorizontally","distributeVertically"].map(event=>({[event]:({commit:commit})=>()=>{commit("actionEvent",{event:event})}})));const groupHandlerCreators={groupNodes:({commit:commit})=>()=>{commit("actionEvent",{event:"group"})},ungroupNodes:({commit:commit})=>()=>{commit("actionEvent",{event:"ungroup"})}};const clipboardHandlerCreators={cutNodes:({pageId:pageId,removeNodes:removeNodes,selectedNodes:selectedNodes})=>()=>{if(selectedNodes.length){setClipboardData({selectedNodes:selectedNodes});removeNodes(selectedNodes.map(extractId),pageId);public_services["c"].getService().success("Cut element to clipboard")}},copyNodes:({selectedNodes:selectedNodes})=>()=>{if(selectedNodes.length){setClipboardData({selectedNodes:selectedNodes});public_services["c"].getService().success("Copied element to clipboard")}},pasteNodes:({insertNodes:insertNodes,pageId:pageId,selectToplevelNodes:selectToplevelNodes})=>()=>{const{selectedNodes:selectedNodes=[]}=JSON.parse(getClipboardData())||{};const clonedNodes=selectedNodes&&cloneSubgraphs(selectedNodes);if(clonedNodes){insertNodes(clonedNodes,pageId);selectToplevelNodes(clonedNodes)}}};const layerHandlerCreators={bringToFront:({elementLayer:elementLayer,pageId:pageId,selectedNodes:selectedNodes})=>()=>{if(selectedNodes.length===1){elementLayer(pageId,selectedNodes[0].id,Infinity)}},bringForward:({elementLayer:elementLayer,pageId:pageId,selectedNodes:selectedNodes})=>()=>{if(selectedNodes.length===1){elementLayer(pageId,selectedNodes[0].id,1)}},sendBackward:({elementLayer:elementLayer,pageId:pageId,selectedNodes:selectedNodes})=>()=>{if(selectedNodes.length===1){elementLayer(pageId,selectedNodes[0].id,-1)}},sendToBack:({elementLayer:elementLayer,pageId:pageId,selectedNodes:selectedNodes})=>()=>{if(selectedNodes.length===1){elementLayer(pageId,selectedNodes[0].id,-Infinity)}}};const positionHandlerCreators={shiftUp:({selectedNodes:selectedNodes,setMultiplePositions:setMultiplePositions})=>()=>{setMultiplePositions(selectedNodes.map(element=>{element.position.top-=constants["s"];return element}))},shiftDown:({selectedNodes:selectedNodes,setMultiplePositions:setMultiplePositions})=>()=>{setMultiplePositions(selectedNodes.map(element=>{element.position.top+=constants["s"];return element}))},shiftLeft:({selectedNodes:selectedNodes,setMultiplePositions:setMultiplePositions})=>()=>{setMultiplePositions(selectedNodes.map(element=>{element.position.left-=constants["s"];return element}))},shiftRight:({selectedNodes:selectedNodes,setMultiplePositions:setMultiplePositions})=>()=>{setMultiplePositions(selectedNodes.map(element=>{element.position.left+=constants["s"];return element}))},nudgeUp:({selectedNodes:selectedNodes,setMultiplePositions:setMultiplePositions})=>()=>{setMultiplePositions(selectedNodes.map(element=>{element.position.top-=constants["r"];return element}))},nudgeDown:({selectedNodes:selectedNodes,setMultiplePositions:setMultiplePositions})=>()=>{setMultiplePositions(selectedNodes.map(element=>{element.position.top+=constants["r"];return element}))},nudgeLeft:({selectedNodes:selectedNodes,setMultiplePositions:setMultiplePositions})=>()=>{setMultiplePositions(selectedNodes.map(element=>{element.position.left-=constants["r"];return element}))},nudgeRight:({selectedNodes:selectedNodes,setMultiplePositions:setMultiplePositions})=>()=>{setMultiplePositions(selectedNodes.map(element=>{element.position.left+=constants["r"];return element}))}};const NANMATRIX=[NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN];const ORIGIN=[0,0,0,1];const RIGHT=[1,0,0,1];const UP=[0,1,0,1];const TOP_LEFT=[-1,1,0,1];const TOP_RIGHT=[1,1,0,1];const BOTTOM_LEFT=[-1,-1,0,1];const BOTTOM_RIGHT=[1,-1,0,1];const translate=(x,y,z)=>[1,0,0,0,0,1,0,0,0,0,1,0,x,y,z,1];const matrix_scale=(x,y,z)=>[x,0,0,0,0,y,0,0,0,0,z,0,0,0,0,1];const rotateZ=a=>{const sinA=Math.sin(a);const cosA=Math.cos(a);return[cosA,-sinA,0,0,sinA,cosA,0,0,0,0,1,0,0,0,0,1]};const mult=([a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p],[A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P])=>[a*A+e*B+i*C+m*D,b*A+f*B+j*C+n*D,c*A+g*B+k*C+o*D,d*A+h*B+l*C+p*D,a*E+e*F+i*G+m*H,b*E+f*F+j*G+n*H,c*E+g*F+k*G+o*H,d*E+h*F+l*G+p*H,a*I+e*J+i*K+m*L,b*I+f*J+j*K+n*L,c*I+g*J+k*K+o*L,d*I+h*J+l*K+p*L,a*M+e*N+i*O+m*P,b*M+f*N+j*O+n*P,c*M+g*N+k*O+o*P,d*M+h*N+l*O+p*P];const multiply=(first,...rest)=>rest.reduce((prev,next)=>mult(prev,next),first);const mvMultiply=([a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p],[A,B,C,D])=>[a*A+e*B+i*C+m*D,b*A+f*B+j*C+n*D,c*A+g*B+k*C+o*D,d*A+h*B+l*C+p*D];const normalize=([A,B,C,D])=>D===1?[A,B,C,D]:[A/D,B/D,C/D,1];const invert=([a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p])=>{const inv=[f*k*p-f*l*o-j*g*p+j*h*o+n*g*l-n*h*k,-b*k*p+b*l*o+j*c*p-j*d*o-n*c*l+n*d*k,b*g*p-b*h*o-f*c*p+f*d*o+n*c*h-n*d*g,-b*g*l+b*h*k+f*c*l-f*d*k-j*c*h+j*d*g,-e*k*p+e*l*o+i*g*p-i*h*o-m*g*l+m*h*k,a*k*p-a*l*o-i*c*p+i*d*o+m*c*l-m*d*k,-a*g*p+a*h*o+e*c*p-e*d*o-m*c*h+m*d*g,a*g*l-a*h*k-e*c*l+e*d*k+i*c*h-i*d*g,e*j*p-e*l*n-i*f*p+i*h*n+m*f*l-m*h*j,-a*j*p+a*l*n+i*b*p-i*d*n-m*b*l+m*d*j,a*f*p-a*h*n-e*b*p+e*d*n+m*b*h-m*d*f,-a*f*l+a*h*j+e*b*l-e*d*j-i*b*h+i*d*f,-e*j*o+e*k*n+i*f*o-i*g*n-m*f*k+m*g*j,a*j*o-a*k*n-i*b*o+i*c*n+m*b*k-m*c*j,-a*f*o+a*g*n+e*b*o-e*c*n-m*b*g+m*c*f,a*f*k-a*g*j-e*b*k+e*c*j+i*b*g-i*c*f];const det=a*inv[0]+b*inv[4]+c*inv[8]+d*inv[12];if(det===0){return NANMATRIX}else{const recDet=1/det;for(let index=0;index<16;index++){inv[index]*=recDet}return inv}};const translateComponent=a=>[1,0,0,0,0,1,0,0,0,0,1,0,a[12],a[13],a[14],1];const compositeComponent=([a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p])=>[a,b,c,d,e,f,g,h,i,j,k,l,0,0,0,p];const add=([a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p],[A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P])=>[a+A,b+B,c+C,d+D,e+E,f+F,g+G,h+H,i+I,j+J,k+K,l+L,m+M,n+N,o+O,p+P];const subtract=([a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p],[A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P])=>[a-A,b-B,c-C,d-D,e-E,f-F,g-G,h-H,i-I,j-J,k-K,l-L,m-M,n-N,o-O,p-P];const componentProduct=([a,b,c,d],[A,B,C,D])=>[a*A,b*B,c*C,d*D];const reduceTransforms=transforms=>transforms.length===1?transforms[0]:transforms.slice(1).reduce((prev,next)=>multiply(prev,next),transforms[0]);const clamp=(low,high,value)=>Math.min(high,Math.max(low,value));const matrixToAngle=transformMatrix=>{const z0=Math.acos(clamp(-1,1,transformMatrix[0]));const z1=Math.asin(clamp(-1,1,transformMatrix[1]));return z1>0?z0:-z0};const matrix2d_ORIGIN=[0,0,1];const UNITMATRIX=[1,0,0,0,1,0,0,0,1];const matrix2d_translate=(x,y)=>[1,0,0,0,1,0,x,y,1];const matrix2d_scale=(x,y)=>[x,0,0,0,y,0,0,0,1];const matrix2d_mult=([a,b,c,d,e,f,g,h,i],[A,B,C,D,E,F,G,H,I])=>[a*A+d*B+g*C,b*A+e*B+h*C,c*A+f*B+i*C,a*D+d*E+g*F,b*D+e*E+h*F,c*D+f*E+i*F,a*G+d*H+g*I,b*G+e*H+h*I,c*G+f*H+i*I];const matrix2d_multiply=(first,...rest)=>rest.reduce((prev,next)=>matrix2d_mult(prev,next),first);const matrix2d_mvMultiply=([a,b,c,d,e,f,g,h,i],[A,B,C])=>[a*A+d*B+g*C,b*A+e*B+h*C,c*A+f*B+i*C];const matrix2d_normalize=([A,B,C])=>C===1?[A,B,C]:[A/C,B/C,1];const matrix2d_add=([a,b,c,d,e,f,g,h,i],[A,B,C,D,E,F,G,H,I])=>[a+A,b+B,c+C,d+D,e+E,f+F,g+G,h+H,i+I];const matrix2d_subtract=([a,b,c,d,e,f,g,h,i],[A,B,C,D,E,F,G,H,I])=>[a-A,b-B,c-C,d-D,e-E,f-F,g-G,h-H,i-I];const matrix2d_componentProduct=([a,b,c],[A,B,C])=>[a*A,b*B,c*C];const dotProduct=([a,b,c],[A,B,C])=>a*A+b*B+c*C;const cornerScreenPositions=(transformMatrix,a,b)=>[TOP_LEFT,TOP_RIGHT,BOTTOM_RIGHT,BOTTOM_LEFT].map(corner=>mvMultiply(transformMatrix,componentProduct(corner,[a,b,0,1])));const insideAABB=({x:x,y:y,a:a,b:b})=>(transformMatrix,aa,bb)=>{const corners=cornerScreenPositions(transformMatrix,aa,bb);return corners.every(([xx,yy])=>{const result=x-a<=xx&&xx<=x+a&&y-b<=yy&&yy<=y+b;return result})};const planeTuple=(transformMatrix,x,y)=>{const centerPoint=normalize(mvMultiply(transformMatrix,ORIGIN));const rightPoint=normalize(mvMultiply(transformMatrix,RIGHT));const upPoint=normalize(mvMultiply(transformMatrix,UP));const x0=rightPoint[0]-centerPoint[0];const y0=rightPoint[1]-centerPoint[1];const x1=upPoint[0]-centerPoint[0];const y1=upPoint[1]-centerPoint[1];const rightSlope=y1?rightPoint[2]-centerPoint[2]:0;const upSlope=y1?upPoint[2]-centerPoint[2]:0;const inverseProjection=invert(transformMatrix);const A1=1/(x0-y0/y1*x1);const A2=-(A1*x1/y1);const A0=-A1*centerPoint[0]-A2*centerPoint[1];const invY1=-1/y1;const z0=centerPoint[2]+rightSlope*A0+upSlope*invY1*(centerPoint[1]+A0*y0);const zx=A1*(rightSlope+upSlope*y0*invY1);const zy=-upSlope*invY1+A2*(rightSlope+upSlope*y0*invY1);const planeVector=y1===0?[x,y,centerPoint[2],1]:[zx,zy,z0];return{inverseProjection:inverseProjection,planeVector:planeVector}};const rectangleAtPoint=({transformMatrix:transformMatrix,a:a,b:b},x,y)=>{const{inverseProjection:inverseProjection,planeVector:planeVector}=planeTuple(transformMatrix,x,y);const screenNormalVector=[x,y,1];const z=dotProduct(planeVector,screenNormalVector);const intersection=normalize(mvMultiply(inverseProjection,[x,y,z,1]));const[sx,sy]=intersection;const inside=Math.abs(sx)<=a&&Math.abs(sy)<=b;return{z:z,intersection:intersection,inside:inside}};const shapesAtPoint=(shapes,x,y)=>shapes.map((shape,index)=>({...rectangleAtPoint(shape,x,y),shape:shape,index:index}));const shapesAt=(shapes,{x:x,y:y})=>shapesAtPoint(shapes,x,y).filter(shape=>shape.inside).sort((shape1,shape2)=>shape2.z-shape1.z||shape2.index-shape1.index).map(shape=>shape.shape);const getExtremum=(transformMatrix,a,b)=>normalize(mvMultiply(transformMatrix,[a,b,0,1]));const landmarkPoint=(a,b,transformMatrix,k,l)=>getExtremum(transformMatrix,k*a,l*b);const layout_functions_idMap={};const getId=(name,extension)=>{const key=name+"|"+extension;return layout_functions_idMap[key]||(layout_functions_idMap[key]=Object(get_id["a"])(name))};const resizeVertexTuples=[[-1,-1,315],[1,-1,45],[1,1,135],[-1,1,225],[0,-1,0],[1,0,90],[0,1,180],[-1,0,270]];const connectorVertices=[[[-1,-1],[0,-1]],[[0,-1],[1,-1]],[[1,-1],[1,0]],[[1,0],[1,1]],[[1,1],[0,1]],[[0,1],[-1,1]],[[-1,1],[-1,0]],[[-1,0],[-1,-1]]];const cornerVertices=[[-1,-1],[1,-1],[-1,1],[1,1]];const resizeMultiplierHorizontal={left:-1,center:0,right:1};const resizeMultiplierVertical={top:-1,center:0,bottom:1};const xNames={"-1":"left",0:"center",1:"right"};const yNames={"-1":"top",0:"center",1:"bottom"};const bidirectionalCursors={0:"ns-resize",45:"nesw-resize",90:"ew-resize",135:"nwse-resize",180:"ns-resize",225:"nesw-resize",270:"ew-resize",315:"nwse-resize"};const identityAABB=()=>[[Infinity,Infinity],[-Infinity,-Infinity]];const extend=([[xMin,yMin],[xMax,yMax]],[x0,y0],[x1,y1])=>[[Math.min(xMin,x0,x1),Math.min(yMin,y0,y1)],[Math.max(xMax,x0,x1),Math.max(yMax,y0,y1)]];const shapeAABB=(shape,prevOuter)=>cornerVertices.reduce((prevInner,xyVertex)=>{const cornerPoint=normalize(mvMultiply(shape.transformMatrix,[shape.a*xyVertex[0],shape.b*xyVertex[1],0,1]));return extend(prevInner,cornerPoint,cornerPoint)},prevOuter);const shapesAABB=shapes=>shapes.reduce((prevOuter,shape)=>extend(prevOuter,...shapeAABB(shape,prevOuter)),identityAABB());const projectAABB=([[xMin,yMin],[xMax,yMax]])=>{const a=(xMax-xMin)/2;const b=(yMax-yMin)/2;const xTranslate=xMin+a;const yTranslate=yMin+b;const zTranslate=0;const localTransformMatrix=translate(xTranslate,yTranslate,zTranslate);const rigTransform=translate(-xTranslate,-yTranslate,-zTranslate);return{a:a,b:b,localTransformMatrix:localTransformMatrix,rigTransform:rigTransform}};const draggingShape=({draggedShape:draggedShape,shapes:shapes},hoveredShape,down,mouseDowned)=>{const dragInProgress=down&&shapes.reduce((prev,next)=>prev||draggedShape&&next.id===draggedShape.id,false);const result=dragInProgress&&draggedShape||down&&mouseDowned&&hoveredShape;return result};const getFocusedShape=(draggedShape,hoveredShape)=>draggedShape||hoveredShape;const getAlterSnapGesture=metaHeld=>metaHeld?["relax"]:[];const initialTransformTuple={deltaX:0,deltaY:0,transform:null,cumulativeTransform:null};const getMouseTransformGesturePrev=({mouseTransformState:mouseTransformState})=>mouseTransformState||initialTransformTuple;const getMouseTransformState=(prev,dragging,{x0:x0,y0:y0,x1:x1,y1:y1})=>{if(dragging&&!isNaN(x0)&&!isNaN(y0)&&!isNaN(x1)&&!isNaN(y1)){const deltaX=x1-x0;const deltaY=y1-y0;const transform=translate(deltaX-prev.deltaX,deltaY-prev.deltaY,0);const cumulativeTransform=translate(deltaX,deltaY,0);return{deltaX:deltaX,deltaY:deltaY,transform:transform,cumulativeTransform:cumulativeTransform}}else{return initialTransformTuple}};const getMouseTransformGesture=tuple=>[tuple].filter(tpl=>tpl.transform).map(({transform:transform,cumulativeTransform:cumulativeTransform})=>({transform:transform,cumulativeTransform:cumulativeTransform}));const getLocalTransformMatrix=shapes=>shape=>{if(!shape.parent){return shape.transformMatrix}return multiply(invert(shapes.find(s=>s.id===shape.parent).transformMatrix),shape.transformMatrix)};const getSelectedShapeObjects=(scene,shapes)=>(scene.selectedShapes||[]).map(s=>shapes.find(ss=>ss.id===s));const contentShape=allShapes=>shape=>shape.type==="annotation"?contentShape(allShapes)(allShapes.find(s=>s.id===shape.parent)):shape;const getContentShapes=(allShapes,shapes)=>{const idMap=arrayToMap(allShapes.map(shape=>shape.id));return shapes.filter(shape=>idMap[shape.id]).map(contentShape(allShapes))};const primaryShape=shape=>shape.type==="annotation"?shape.parent:shape.id;const rotationManipulation=config=>({shape:shape,directShape:directShape,cursorPosition:{x:x,y:y},alterSnapGesture:alterSnapGesture})=>{if(!shape||!directShape){return{transforms:[],shapes:[]}}const center=shape.transformMatrix;const centerPosition=mvMultiply(center,ORIGIN);const vector=mvMultiply(multiply(center,directShape.localTransformMatrix),ORIGIN);const oldAngle=Math.atan2(centerPosition[1]-vector[1],centerPosition[0]-vector[0]);const newAngle=Math.atan2(centerPosition[1]-y,centerPosition[0]-x);const closest45deg=Math.round(newAngle/(Math.PI/12))*Math.PI/12;const radius=Math.sqrt(Math.pow(centerPosition[0]-x,2)+Math.pow(centerPosition[1]-y,2));const closest45degPosition=[Math.cos(closest45deg)*radius,Math.sin(closest45deg)*radius];const pixelDifference=Math.sqrt(Math.pow(closest45degPosition[0]-(centerPosition[0]-x),2)+Math.pow(closest45degPosition[1]-(centerPosition[1]-y),2));const relaxed=alterSnapGesture.indexOf("relax")!==-1;const newSnappedAngle=pixelDifference<config.rotateSnapInPixels&&!relaxed?closest45deg:newAngle;const result=rotateZ(oldAngle-newSnappedAngle);return{transforms:[result],shapes:[shape.id]}};const minimumSize=(min,{a:a,b:b,baseAB:baseAB},vector)=>[Math.max(baseAB?min-baseAB[0]:min-a,vector[0]),Math.max(baseAB?min-baseAB[1]:min-b,vector[1])];const centeredResizeManipulation=config=>({gesture:gesture,shape:shape,directShape:directShape})=>{const transform=gesture.cumulativeTransform;if(!shape||!directShape){return{transforms:[],shapes:[]}}const vector=mvMultiply(multiply(invert(compositeComponent(shape.localTransformMatrix)),transform),ORIGIN);const orientationMask=[resizeMultiplierHorizontal[directShape.horizontalPosition],resizeMultiplierVertical[directShape.verticalPosition],0];const orientedVector=matrix2d_componentProduct(vector,orientationMask);const cappedOrientedVector=minimumSize(config.minimumElementSize,shape,orientedVector);return{cumulativeTransforms:[],cumulativeSizes:[gesture.sizes||matrix2d_translate(...cappedOrientedVector)],shapes:[shape.id]}};const asymmetricResizeManipulation=config=>({gesture:gesture,shape:shape,directShape:directShape})=>{const transform=gesture.cumulativeTransform;if(!shape||!directShape){return{transforms:[],shapes:[]}}const composite=compositeComponent(shape.localTransformMatrix);const inv=invert(composite);const vector=mvMultiply(multiply(inv,transform),ORIGIN);const orientationMask=[resizeMultiplierHorizontal[directShape.horizontalPosition]/2,resizeMultiplierVertical[directShape.verticalPosition]/2,0];const orientedVector=matrix2d_componentProduct(vector,orientationMask);const cappedOrientedVector=minimumSize(config.minimumElementSize,shape,orientedVector);const antiRotatedVector=mvMultiply(multiply(composite,matrix_scale(resizeMultiplierHorizontal[directShape.horizontalPosition],resizeMultiplierVertical[directShape.verticalPosition],1),translate(cappedOrientedVector[0],cappedOrientedVector[1],0)),ORIGIN);const sizeMatrix=gesture.sizes||matrix2d_translate(...cappedOrientedVector);return{cumulativeTransforms:[translate(antiRotatedVector[0],antiRotatedVector[1],0)],cumulativeSizes:[sizeMatrix],shapes:[shape.id]}};const directShapeTranslateManipulation=(cumulativeTransforms,directShapes)=>{const shapes=directShapes.map(shape=>shape.type!=="annotation"&&shape.id).filter(identity);return[{cumulativeTransforms:cumulativeTransforms,shapes:shapes}]};const rotationAnnotationManipulation=(config,directTransforms,directShapes,allShapes,cursorPosition,alterSnapGesture)=>{const shapeIds=directShapes.map(shape=>shape.type==="annotation"&&shape.subtype===config.rotationHandleName&&shape.parent);const shapes=shapeIds.map(id=>id&&allShapes.find(shape=>shape.id===id));const tuples=flatten(shapes.map((shape,i)=>directTransforms.map(transform=>({transform:transform,shape:shape,directShape:directShapes[i],cursorPosition:cursorPosition,alterSnapGesture:alterSnapGesture}))));return tuples.map(rotationManipulation(config))};const resizeAnnotationManipulation=(config,transformGestures,directShapes,allShapes,manipulator)=>{const shapeIds=directShapes.map(shape=>shape.type==="annotation"&&shape.subtype===config.resizeHandleName&&shape.parent);const shapes=shapeIds.map(id=>id&&allShapes.find(shape=>shape.id===id));const tuples=flatten(shapes.map((shape,i)=>transformGestures.map(gesture=>({gesture:gesture,shape:shape,directShape:directShapes[i]}))));return tuples.map(manipulator)};const fromScreen=currentTransform=>transform=>{const isTranslate=transform[12]!==0||transform[13]!==0;if(isTranslate){const composite=compositeComponent(currentTransform);const inverse=invert(composite);const result=translateComponent(multiply(inverse,transform));return result}else{return transform}};const horizontalToIndex=horizontal=>horizontal?0:1;const anchorAABB=(aabb,anchorDirection,horizontal)=>{const dimension=horizontalToIndex(horizontal);if(anchorDirection===0){return(aabb[0][dimension]+aabb[1][dimension])/2}else{const index=(anchorDirection+1)/2;return aabb[index][dimension]}};const getAlignDistributeTransformIntents=(alignAction,distributeAction,shapes,selectedShapes)=>{if(selectedShapes.length!==1||selectedShapes[0].subtype!=="adHocGroup"){return[]}const group=selectedShapes[0];const children=shapes.filter(s=>s.parent===group.id&&s.type!=="annotation");if(alignAction&&children.length>1){const{controlledAnchor:controlledAnchor,horizontal:horizontal}=alignAction;const groupBoundingBox=shapeAABB(group,identityAABB());const groupAnchor=anchorAABB(groupBoundingBox,controlledAnchor,horizontal);const results=children.map(c=>{const childBoundingBox=shapeAABB(c,identityAABB());const childAnchor=anchorAABB(childBoundingBox,controlledAnchor,horizontal);const delta=groupAnchor-childAnchor;return{cumulativeTransforms:[translate(horizontal?delta:0,horizontal?0:delta,0)],shapes:[c.id]}});return results}else if(distributeAction&&children.length>2){const{horizontal:horizontal}=distributeAction;const{a:A,b:B}=group;const groupBoundingBox=shapeAABB(group,identityAABB());const groupAnchor=anchorAABB(groupBoundingBox,-1,horizontal);const dimension=horizontalToIndex(horizontal);const childrenBoxes2D=children.map(c=>shapeAABB(c,identityAABB()));const childrenAnchors=childrenBoxes2D.map(childBoundingBox=>anchorAABB(childBoundingBox,-1,horizontal));const childrenBoxes1D=childrenBoxes2D.map(box2D=>[box2D[0][dimension],box2D[1][dimension]]);const childrenCenters=childrenBoxes1D.map(box1D=>(box1D[1]+box1D[0])/2);const childrenSizes=childrenBoxes1D.map(box1D=>box1D[1]-box1D[0]);const totalChildrenSize=childrenSizes.reduce((a,b)=>a+b,0);const groupSize=horizontal?2*A:2*B;const totalFreeSpace=groupSize-totalChildrenSize;const gapCount=children.length-1;const gap=totalFreeSpace/gapCount;const childrenIndex=[...Array(children.length)].map((_,i)=>i);const sortedChildrenIndex=childrenIndex.sort((i,j)=>childrenCenters[i]-childrenCenters[j]);const reduction=sortedChildrenIndex.reduce(({cursor:cursor,deltas:deltas},i)=>{const size=childrenSizes[i];const originalLeft=childrenAnchors[i];const desiredLeft=cursor;const delta=desiredLeft-originalLeft;const nextLeft=cursor+size+gap;return{cursor:nextLeft,deltas:[...deltas,delta]}},{cursor:groupAnchor,deltas:[]});const results=reduction.deltas.map((delta,ii)=>{const i=sortedChildrenIndex[ii];return{cumulativeTransforms:[translate(horizontal?delta:0,horizontal?0:delta,0)],shapes:[children[i].id]}});return results}return[]};const shapeApplyLocalTransforms=intents=>shape=>{const transformIntents=flatten(intents.map(intent=>intent.transforms&&intent.transforms.length&&intent.shapes.find(id=>id===shape.id)&&intent.transforms.map(fromScreen(shape.localTransformMatrix))).filter(identity));const sizeIntents=flatten(intents.map(intent=>intent.sizes&&intent.sizes.length&&intent.shapes.find(id=>id===shape.id)&&intent.sizes).filter(identity));const cumulativeTransformIntents=flatten(intents.map(intent=>intent.cumulativeTransforms&&intent.cumulativeTransforms.length&&intent.shapes.find(id=>id===shape.id)&&intent.cumulativeTransforms.map(fromScreen(shape.localTransformMatrix))).filter(identity));const cumulativeSizeIntents=flatten(intents.map(intent=>intent.cumulativeSizes&&intent.cumulativeSizes.length&&intent.shapes.find(id=>id===shape.id)&&intent.cumulativeSizes).filter(identity));const baselineLocalTransformMatrix=multiply(shape.baselineLocalTransformMatrix||shape.localTransformMatrix,...transformIntents);const cumulativeTransformIntentMatrix=multiply(...cumulativeTransformIntents);const baselineSizeMatrix=matrix2d_multiply(...sizeIntents)||UNITMATRIX;const localTransformMatrix=cumulativeTransformIntents.length?multiply(baselineLocalTransformMatrix,cumulativeTransformIntentMatrix):baselineLocalTransformMatrix;const cumulativeSizeIntentMatrix=matrix2d_multiply(...cumulativeSizeIntents);const sizeVector=matrix2d_mvMultiply(cumulativeSizeIntents.length?matrix2d_multiply(baselineSizeMatrix,cumulativeSizeIntentMatrix):baselineSizeMatrix,shape.baseAB?[...shape.baseAB,1]:[shape.a,shape.b,1]);const absorbChanges=!transformIntents.length&&!sizeIntents.length&&!cumulativeTransformIntents.length&&!cumulativeSizeIntents.length;return{...shape,baselineLocalTransformMatrix:absorbChanges?null:baselineLocalTransformMatrix,baselineSizeMatrix:absorbChanges?null:baselineSizeMatrix,localTransformMatrix:absorbChanges?shape.localTransformMatrix:localTransformMatrix,a:absorbChanges?shape.a:sizeVector[0],b:absorbChanges?shape.b:sizeVector[1],baseAB:absorbChanges?null:shape.baseAB||[shape.a,shape.b]}};const applyLocalTransforms=(shapes,transformIntents)=>shapes.map(shapeApplyLocalTransforms(transformIntents));const getUpstreamTransforms=(shapes,shape)=>shape.parent?getUpstreamTransforms(shapes,shapes.find(s=>s.id===shape.parent)).concat([shape.localTransformMatrix]):[shape.localTransformMatrix];const getUpstreams=(shapes,shape)=>shape.parent?getUpstreams(shapes,shapes.find(s=>s.id===shape.parent)).concat([shape]):[shape];const snappedA=shape=>shape.a+(shape.snapResizeVector?shape.snapResizeVector[0]:0);const snappedB=shape=>shape.b+(shape.snapResizeVector?shape.snapResizeVector[1]:0);const cascadeUnsnappedTransforms=(shapes,shape)=>{if(!shape.parent){return shape.localTransformMatrix}const upstreams=getUpstreams(shapes,shape);const upstreamTransforms=upstreams.map(s=>s.localTransformMatrix);const cascadedTransforms=reduceTransforms(upstreamTransforms);return cascadedTransforms};const cascadeTransforms=(shapes,shape)=>{const cascade=s=>s.snapDeltaMatrix?multiply(s.localTransformMatrix,s.snapDeltaMatrix):s.localTransformMatrix;if(!shape.parent){return cascade(shape)}const upstreams=getUpstreams(shapes,shape);const upstreamTransforms=upstreams.map(cascade);const cascadedTransforms=reduceTransforms(upstreamTransforms);return cascadedTransforms};const shapeCascadeProperties=shapes=>shape=>({...shape,transformMatrix:cascadeTransforms(shapes,shape),width:2*snappedA(shape),height:2*snappedB(shape)});const cascadeProperties=shapes=>shapes.map(shapeCascadeProperties(shapes));const alignmentGuides=(config,shapes,guidedShapes,draggedShape)=>{const result={};let counter=0;const extremeHorizontal=resizeMultiplierHorizontal[draggedShape.horizontalPosition];const extremeVertical=resizeMultiplierVertical[draggedShape.verticalPosition];for(const d of guidedShapes){if(d.type==="annotation"){continue}const a=config.pageWidth/2+1;const b=config.pageHeight/2+1;const pageBordersAndCenterLines=[{a:a,b:b,localTransformMatrix:[1,0,0,0,0,1,0,0,0,0,1,0,a-1,b-1,0,1]}];for(const referenceShape of shapes.concat(pageBordersAndCenterLines)){if(referenceShape.type==="annotation"){continue}if(!config.intraGroupManipulation&&referenceShape.parent){continue}if(config.intraGroupSnapOnly&&d.parent!==referenceShape.parent&&d.parent!==referenceShape.id){continue}const s=d.id===referenceShape.id?{...d,localTransformMatrix:d.baselineLocalTransformMatrix||d.localTransformMatrix,a:d.baseAB?d.baseAB[0]:d.a,b:d.baseAB?d.baseAB[1]:d.b}:referenceShape;for(let k=-1;k<2;k++){for(let l=-1;l<2;l++){if(k&&!l||!k&&l){continue}if(draggedShape.subtype===config.resizeHandleName&&!(extremeHorizontal===k&&extremeVertical===l||extremeHorizontal===0&&k!==0&&extremeVertical===l||extremeVertical===0&&l!==0&&extremeHorizontal===k)){continue}const D=landmarkPoint(d.a,d.b,cascadeUnsnappedTransforms(shapes,d),k,l);for(let m=-1;m<2;m++){for(let n=-1;n<2;n++){if(m&&!n||!m&&n){continue}const S=landmarkPoint(s.a,s.b,cascadeUnsnappedTransforms(shapes,s),m,n);for(let dim=0;dim<2;dim++){const orthogonalDimension=1-dim;const dd=D[dim];const ss=S[dim];const key=k+"|"+l+"|"+dim;const signedDistance=dd-ss;const distance=Math.abs(signedDistance);const currentClosest=result[key];if(Math.round(distance)<=config.guideDistance&&(!currentClosest||distance<=currentClosest.distance)){const orthogonalValues=[D[orthogonalDimension],S[orthogonalDimension],...currentClosest?[currentClosest.lowPoint,currentClosest.highPoint]:[]];const lowPoint=Math.min(...orthogonalValues);const highPoint=Math.max(...orthogonalValues);const midPoint=(lowPoint+highPoint)/2;const radius=midPoint-lowPoint;result[key]={id:counter++,localTransformMatrix:translate(dim?midPoint:ss,dim?ss:midPoint,config.atopZ),a:dim?radius:.5,b:dim?.5:radius,lowPoint:lowPoint,highPoint:highPoint,distance:distance,signedDistance:signedDistance,dimension:dim?"vertical":"horizontal",constrained:d.id,constrainer:s.id}}}}}}}}}return Object.values(result)};const isHorizontal=constraint=>constraint.dimension==="horizontal";const isVertical=constraint=>constraint.dimension==="vertical";const closestConstraint=(prev={distance:Infinity},next)=>next.distance<prev.distance?{constraint:next,distance:next.distance}:prev;const directionalConstraint=(constraints,filterFun)=>{const directionalConstraints=constraints.filter(filterFun);const closest=directionalConstraints.reduce(closestConstraint,undefined);return closest&&closest.constraint};const rotationAnnotation=(config,shapes,selectedShapes,shape,i)=>{const foundShape=shapes.find(s=>shape.id===s.id);if(!foundShape){return false}if(foundShape.type==="annotation"){return rotationAnnotation(config,shapes,selectedShapes,shapes.find(s=>foundShape.parent===s.id),i)}const b=snappedB(foundShape);const centerTop=translate(0,-b,0);const pixelOffset=translate(0,-config.rotateAnnotationOffset,config.atopZ);const transform=multiply(centerTop,pixelOffset);return{id:config.rotationHandleName+"_"+i,type:"annotation",subtype:config.rotationHandleName,interactive:true,parent:foundShape.id,localTransformMatrix:transform,a:config.rotationHandleSize,b:config.rotationHandleSize}};const getRotationTooltipAnnotation=(config,proper,shape,intents,cursorPosition)=>shape&&shape.subtype===config.rotationHandleName?[{id:config.rotationTooltipName+"_"+proper.id,type:"annotation",subtype:config.rotationTooltipName,interactive:false,parent:null,localTransformMatrix:translate(cursorPosition.x,cursorPosition.y,config.tooltipZ),a:0,b:0,text:String(Math.round(matrixToAngle(proper.transformMatrix)/Math.PI*180))}]:[];const resizePointAnnotations=(config,parent,a,b)=>([x,y,cursorAngle])=>{const markerPlace=translate(x*a,y*b,config.resizeAnnotationOffsetZ);const pixelOffset=translate(-x*config.resizeAnnotationOffset,-y*config.resizeAnnotationOffset,config.atopZ+10);const transform=multiply(markerPlace,pixelOffset);const xName=xNames[x];const yName=yNames[y];return{id:[config.resizeHandleName,xName,yName,parent].join("_"),type:"annotation",subtype:config.resizeHandleName,horizontalPosition:xName,verticalPosition:yName,cursorAngle:cursorAngle,interactive:true,parent:parent.id,localTransformMatrix:transform,backgroundColor:"rgb(0,255,0,1)",a:config.resizeAnnotationSize,b:config.resizeAnnotationSize}};const resizeEdgeAnnotations=(config,parent,a,b)=>([[x0,y0],[x1,y1]])=>{const x=a*mean(x0,x1);const y=b*mean(y0,y1);const markerPlace=translate(x,y,config.atopZ-10);const transform=markerPlace;const horizontal=y0===y1;const length=horizontal?a*Math.abs(x1-x0):b*Math.abs(y1-y0);const sectionHalfLength=Math.max(0,length/2-config.resizeAnnotationConnectorOffset);const width=.5;return{id:[config.resizeConnectorName,xNames[x0],yNames[y0],xNames[x1],yNames[y1],parent].join("_"),type:"annotation",subtype:config.resizeConnectorName,interactive:true,parent:parent.id,localTransformMatrix:transform,backgroundColor:config.devColor,a:horizontal?sectionHalfLength:width,b:horizontal?width:sectionHalfLength}};const groupedShape=properShape=>shape=>shape.parent===properShape.id;const magic=(config,shape,shapes)=>{const epsilon=config.rotationEpsilon;const integralOf=Math.PI*2;const isIntegerMultiple=s=>{const zRotation=matrixToAngle(s.localTransformMatrix);const ratio=zRotation/integralOf;return Math.abs(Math.round(ratio)-ratio)<epsilon};function recurse(s){return shapes.filter(groupedShape(s)).every(resizableChild)}function resizableChild(s){return isIntegerMultiple(s)&&recurse(s)}return recurse(shape)};function resizeAnnotation(config,shapes,selectedShapes,shape){const foundShape=shapes.find(s=>shape.id===s.id);const properShape=foundShape&&(foundShape.subtype===config.resizeHandleName?shapes.find(s=>shape.parent===s.id):foundShape);if(!foundShape){return[]}if(foundShape.subtype===config.resizeHandleName){const result=foundShape.interactive?resizeAnnotationsFunction(config,{shapes:shapes,selectedShapes:[shapes.find(s=>shape.parent===s.id)]}):[];return result}if(foundShape.type==="annotation"){return resizeAnnotation(config,shapes,selectedShapes,shapes.find(s=>foundShape.parent===s.id))}const a=snappedA(properShape);const b=snappedB(properShape);const allowResize=properShape.type!=="group"||config.groupResize&&magic(config,properShape,shapes.filter(s=>s.type!=="annotation"));const resizeVertices=allowResize?resizeVertexTuples:[];const resizePoints=resizeVertices.map(resizePointAnnotations(config,shape,a,b));const connectors=connectorVertices.map(resizeEdgeAnnotations(config,shape,a,b));return[...resizePoints,...connectors]}function resizeAnnotationsFunction(config,{shapes:shapes,selectedShapes:selectedShapes}){const shapesToAnnotate=selectedShapes;return flatten(shapesToAnnotate.map(shape=>resizeAnnotation(config,shapes,selectedShapes,shape)).filter(identity))}const crystallizeConstraint=shape=>{const result={...shape};if(shape.snapDeltaMatrix){result.localTransformMatrix=multiply(shape.localTransformMatrix,shape.snapDeltaMatrix);result.snapDeltaMatrix=null}if(shape.snapResizeVector){result.a=snappedA(shape);result.b=snappedB(shape);result.snapResizeVector=null}return result};const translateShapeSnap=(horizontalConstraint,verticalConstraint,draggedElement)=>shape=>{const constrainedX=horizontalConstraint&&horizontalConstraint.constrained===shape.id;const constrainedY=verticalConstraint&&verticalConstraint.constrained===shape.id;const snapOffsetX=constrainedX?-horizontalConstraint.signedDistance:0;const snapOffsetY=constrainedY?-verticalConstraint.signedDistance:0;if(constrainedX||constrainedY){if(!snapOffsetX&&!snapOffsetY){return shape}const snapOffset=translateComponent(multiply(rotateZ(matrixToAngle(draggedElement.localTransformMatrix)),translate(snapOffsetX,snapOffsetY,0)));return{...shape,snapDeltaMatrix:snapOffset}}else if(shape.snapDeltaMatrix||shape.snapResizeVector){return crystallizeConstraint(shape)}else{return shape}};const resizeShapeSnap=(horizontalConstraint,verticalConstraint,draggedElement,symmetric,horizontalPosition,verticalPosition)=>shape=>{const constrainedShape=draggedElement&&shape.id===draggedElement.id;const constrainedX=horizontalConstraint&&horizontalConstraint.constrained===shape.id;const constrainedY=verticalConstraint&&verticalConstraint.constrained===shape.id;const snapOffsetX=constrainedX?horizontalConstraint.signedDistance:0;const snapOffsetY=constrainedY?-verticalConstraint.signedDistance:0;if(constrainedX||constrainedY){const multiplier=symmetric?1:.5;const angle=matrixToAngle(draggedElement.localTransformMatrix);const horizontalSign=-resizeMultiplierHorizontal[horizontalPosition];const verticalSign=resizeMultiplierVertical[verticalPosition];const sin=Math.sin(angle);const cos=Math.cos(angle);const snapOffsetA=horizontalSign*(cos*snapOffsetX-sin*snapOffsetY);const snapOffsetB=verticalSign*(sin*snapOffsetX+cos*snapOffsetY);const snapTranslateOffset=translateComponent(multiply(rotateZ(angle),translate((1-multiplier)*-snapOffsetX,(1-multiplier)*snapOffsetY,0)));const snapSizeOffset=[multiplier*snapOffsetA,multiplier*snapOffsetB];return{...shape,snapDeltaMatrix:snapTranslateOffset,snapResizeVector:snapSizeOffset}}else if(constrainedShape){return{...shape,snapDeltaMatrix:null,snapResizeVector:null}}else{return crystallizeConstraint(shape)}};const dissolveGroups=(groupsToDissolve,shapes,selectedShapes)=>({shapes:shapes.filter(s=>!groupsToDissolve.find(g=>s.id===g.id)).map(shape=>{const preexistingGroupParent=groupsToDissolve.find(groupShape=>groupShape.id===shape.parent);return preexistingGroupParent?{...shape,parent:null,localTransformMatrix:multiply(shapes.find(s=>s.id===preexistingGroupParent.id).localTransformMatrix,shape.localTransformMatrix)}:shape}),selectedShapes:selectedShapes.filter(s=>!groupsToDissolve.find(g=>g.id===s.id))});const hasNoParentWithin=shapes=>shape=>!shapes.some(g=>shape.parent===g.id);const asYetUngroupedShapes=(preexistingAdHocGroups,selectedShapes)=>selectedShapes.filter(hasNoParentWithin(preexistingAdHocGroups));const idMatch=shape=>s=>s.id===shape.id;const idsMatch=selectedShapes=>shape=>selectedShapes.find(idMatch(shape));const axisAlignedBoundingBoxShape=(config,shapesToBox)=>{const axisAlignedBoundingBox=shapesAABB(shapesToBox);const{a:a,b:b,localTransformMatrix:localTransformMatrix,rigTransform:rigTransform}=projectAABB(axisAlignedBoundingBox);const id=getId(config.groupName,shapesToBox.map(s=>s.id).join("|"));const aabbShape={id:id,type:config.groupName,subtype:config.adHocGroupName,a:a,b:b,localTransformMatrix:localTransformMatrix,rigTransform:rigTransform,parent:null};return aabbShape};const resetChild=s=>{if(s.childBaseAB){s.childBaseAB=null;s.baseLocalTransformMatrix=null}};const childScaler=({a:a,b:b},baseAB)=>{const epsilon=1e-6;const groupScaleX=Math.max(a/baseAB[0],epsilon);const groupScaleY=Math.max(b/baseAB[1],epsilon);const groupScale=matrix_scale(groupScaleX,groupScaleY,1);return groupScale};const resizeChild=groupScale=>s=>{const childBaseAB=s.childBaseAB||[s.a,s.b];const impliedScale=matrix_scale(...childBaseAB,1);const inverseImpliedScale=invert(impliedScale);const baseLocalTransformMatrix=s.baseLocalTransformMatrix||s.localTransformMatrix;const normalizedBaseLocalTransformMatrix=multiply(baseLocalTransformMatrix,impliedScale);const T=multiply(groupScale,normalizedBaseLocalTransformMatrix);const backScaler=groupScale.map(d=>Math.abs(d));const inverseBackScaler=invert(backScaler);const abTuple=mvMultiply(multiply(backScaler,impliedScale),[1,1,1,1]);s.localTransformMatrix=multiply(T,multiply(inverseImpliedScale,inverseBackScaler));s.a=abTuple[0];s.b=abTuple[1];s.childBaseAB=childBaseAB;s.baseLocalTransformMatrix=baseLocalTransformMatrix};const resizeGroup=(shapes,rootElement)=>{const idMap={};for(const shape of shapes){idMap[shape.id]=shape}const depths={};const ancestorsLength=shape=>shape.parent?ancestorsLength(idMap[shape.parent])+1:0;for(const shape of shapes){depths[shape.id]=ancestorsLength(shape)}const resizedParents={[rootElement.id]:rootElement};const sortedShapes=shapes.slice().sort((a,b)=>depths[a.id]-depths[b.id]);const parentResized=s=>Boolean(s.childBaseAB||s.baseAB);for(const shape of sortedShapes){const parent=resizedParents[shape.parent];if(parent){resizedParents[shape.id]=shape;if(parentResized(parent)){resizeChild(childScaler(parent,parent.childBaseAB||parent.baseAB))(shape)}else{resetChild(shape)}}}return sortedShapes};const getLeafs=(descendCondition,allShapes,shapes)=>removeDuplicates(s=>s.id,flatten(shapes.map(shape=>descendCondition(shape)?allShapes.filter(s=>s.parent===shape.id):shape)));const preserveCurrentGroups=(shapes,selectedShapes)=>({shapes:shapes,selectedShapes:selectedShapes});const getConfiguration=scene=>scene.configuration;const getShapes=scene=>scene.shapes;const getHoveredShapes=(config,shapes,cursorPosition)=>shapesAt(shapes.filter(s=>(s.type!=="annotation"||s.interactive)&&(config.intraGroupManipulation||!s.parent||s.type==="annotation")),cursorPosition);const getHoveredShape=hoveredShapes=>hoveredShapes.length?hoveredShapes[0]:null;const singleSelect=(prev,config,hoveredShapes,metaHeld,uid,_,boxHighlightedShapes)=>{const down=true;const depthIndex=config.depthSelect&&metaHeld&&(!hoveredShapes.length||hoveredShapes[0].type!=="annotation")?(prev.depthIndex+(down&&!prev.down?1:0))%hoveredShapes.length:0;return{shapes:hoveredShapes.length?[hoveredShapes[depthIndex]]:[],uid:uid,depthIndex:hoveredShapes.length?depthIndex:0,down:down,boxHighlightedShapes:boxHighlightedShapes}};const multiSelect=(prev,config,hoveredShapes,metaHeld,uid,selectedShapeObjects,boxHighlightedShapes)=>{const shapes=hoveredShapes.length>0?disjunctiveUnion(shape=>shape.id,selectedShapeObjects,hoveredShapes.slice(0,1)):[];return{shapes:shapes,uid:uid,depthIndex:0,down:false,boxHighlightedShapes:boxHighlightedShapes}};const getGroupingTuple=(config,shapes,selectedShapes)=>{const childOfGroup=shape=>shape.parent&&shape.parent.startsWith(config.groupName);const isAdHocGroup=shape=>shape.type===config.groupName&&shape.subtype===config.adHocGroupName;const preexistingAdHocGroups=shapes.filter(isAdHocGroup);const matcher=idsMatch(selectedShapes);const selectedFn=shape=>matcher(shape)&&shape.type!=="annotation";const freshSelectedShapes=shapes.filter(selectedFn);const freshNonSelectedShapes=shapes.filter(not(selectedFn));const isGroup=shape=>shape.type===config.groupName;const isOrBelongsToGroup=shape=>isGroup(shape)||childOfGroup(shape);const someSelectedShapesAreGrouped=selectedShapes.some(isOrBelongsToGroup);const selectionOutsideGroup=!someSelectedShapesAreGrouped;return{selectionOutsideGroup:selectionOutsideGroup,freshSelectedShapes:freshSelectedShapes,freshNonSelectedShapes:freshNonSelectedShapes,preexistingAdHocGroups:preexistingAdHocGroups}};const getGrouping=(config,shapes,selectedShapes,groupAction,tuple)=>{const{selectionOutsideGroup:selectionOutsideGroup,freshSelectedShapes:freshSelectedShapes,freshNonSelectedShapes:freshNonSelectedShapes,preexistingAdHocGroups:preexistingAdHocGroups}=tuple;if(groupAction==="group"){const selectedAdHocGroupsToPersist=selectedShapes.filter(s=>s.subtype===config.adHocGroupName);return{shapes:shapes.map(s=>s.subtype===config.adHocGroupName?{...s,subtype:config.persistentGroupName}:s),selectedShapes:selectedShapes.filter(selected=>selected.subtype!==config.adHocGroupName).concat(selectedAdHocGroupsToPersist.map(shape=>({...shape,subtype:config.persistentGroupName})))}}if(groupAction==="ungroup"){return dissolveGroups(selectedShapes.filter(s=>s.subtype===config.persistentGroupName),shapes,asYetUngroupedShapes(preexistingAdHocGroups,freshSelectedShapes))}if(preexistingAdHocGroups.length&&selectionOutsideGroup){return dissolveGroups(preexistingAdHocGroups,shapes,asYetUngroupedShapes(preexistingAdHocGroups,freshSelectedShapes))}const elements=getContentShapes(shapes,selectedShapes);if(elements.length===1&&elements[0].type==="group"){return config.groupResize?{shapes:[...resizeGroup(shapes.filter(s=>s.type!=="annotation"),elements[0]),...shapes.filter(s=>s.type==="annotation")],selectedShapes:selectedShapes}:preserveCurrentGroups(shapes,selectedShapes)}if(selectedShapes.length<2){return preserveCurrentGroups(shapes,selectedShapes)}else{const group=axisAlignedBoundingBoxShape(config,freshSelectedShapes);const selectedLeafShapes=getLeafs(shape=>shape.subtype===config.adHocGroupName,shapes,freshSelectedShapes);const parentedSelectedShapes=selectedLeafShapes.map(shape=>({...shape,parent:group.id,localTransformMatrix:multiply(group.rigTransform,shape.transformMatrix)}));const nonGroupGraphConstituent=s=>s.subtype!==config.adHocGroupName&&!parentedSelectedShapes.find(ss=>s.id===ss.id);const dissociateFromParentIfAny=s=>s.parent&&s.parent.startsWith(config.groupName)&&preexistingAdHocGroups.find(ahg=>ahg.id===s.parent)?{...s,parent:null}:s;const allTerminalShapes=parentedSelectedShapes.concat(freshNonSelectedShapes.filter(nonGroupGraphConstituent).map(dissociateFromParentIfAny));return{shapes:allTerminalShapes.concat([group]),selectedShapes:[group]}}};const getCursor=(config,shape,draggedPrimaryShape)=>{if(!shape){return"auto"}switch(shape.subtype){case config.rotationHandleName:return"crosshair";case config.resizeHandleName:const angle=(matrixToAngle(shape.transformMatrix)*180/Math.PI+360)%360;const screenProjectedAngle=angle+shape.cursorAngle;const discretizedAngle=(Math.round(screenProjectedAngle/45)*45+360)%360;return bidirectionalCursors[discretizedAngle];default:return draggedPrimaryShape?"grabbing":"grab"}};const getSelectedShapesPrev=scene=>scene.selectionState;const getSelectionStateFull=(prev,config,selectedShapeObjects,hoveredShapes,{up:up,down:down,uid:uid},metaHeld,multiselect,boxHighlightedShapes)=>{const uidUnchanged=uid===prev.uid;const mouseButtonUp=!down;if(selectedShapeObjects){prev.shapes=selectedShapeObjects.slice()}if(mouseButtonUp||uidUnchanged){return{...prev,shapes:up&&prev.boxHighlightedShapes.length?prev.shapes.concat(prev.boxHighlightedShapes).filter((d,i,a)=>a.findIndex(dd=>dd.id===d.id)===i):prev.shapes,down:down,uid:uid,metaHeld:metaHeld,boxHighlightedShapes:boxHighlightedShapes}}const selectFunction=config.singleSelect||!multiselect?singleSelect:multiSelect;return selectFunction(prev,config,hoveredShapes,metaHeld,uid,selectedShapeObjects,boxHighlightedShapes)};const getSelectedShapes=selectionTuple=>selectionTuple.shapes;const getSelectionState=({uid:uid,depthIndex:depthIndex,down:down,metaHeld:metaHeld,boxHighlightedShapes:boxHighlightedShapes})=>({uid:uid,depthIndex:depthIndex,down:down,metaHeld:metaHeld,boxHighlightedShapes:boxHighlightedShapes});const getSelectedPrimaryShapeIds=shapes=>shapes.map(primaryShape);const getResizeManipulator=(config,toggle)=>(toggle?centeredResizeManipulation:asymmetricResizeManipulation)(config);const getTransformIntents=(config,transformGestures,directShapes,shapes,cursorPosition,alterSnapGesture,manipulator)=>[...directShapeTranslateManipulation(transformGestures.map(g=>g.cumulativeTransform),directShapes),...rotationAnnotationManipulation(config,transformGestures.map(g=>g.transform),directShapes,shapes,cursorPosition,alterSnapGesture),...resizeAnnotationManipulation(config,transformGestures,directShapes,shapes,manipulator)];const getDraggedPrimaryShape=(shapes,draggedShape)=>draggedShape&&shapes.find(shape=>shape.id===primaryShape(draggedShape));const getAlignmentGuideAnnotations=(config,shapes,draggedPrimaryShape,draggedShape)=>{const guidedShapes=draggedPrimaryShape?[shapes.find(s=>s.id===draggedPrimaryShape.id)].filter(identity):[];return guidedShapes.length?alignmentGuides(config,shapes,guidedShapes,draggedShape).map(shape=>({...shape,id:config.alignmentGuideName+"_"+shape.id,type:"annotation",subtype:config.alignmentGuideName,interactive:false,backgroundColor:"magenta",parent:null})):[]};const borderAnnotation=(subtype,lift)=>shape=>({...shape,id:subtype+"_"+shape.id,type:"annotation",subtype:subtype,interactive:false,localTransformMatrix:multiply(shape.localTransformMatrix,translate(0,0,lift)),parent:shape.parent});const getAdHocChildrenAnnotations=(config,{shapes:shapes})=>{const adHocGroups=shapes.filter(s=>s.subtype===config.adHocGroupName);return shapes.filter(s=>s.type!=="annotation"&&s.parent&&adHocGroups.find(p=>p.id===s.parent)).map(borderAnnotation(config.getAdHocChildAnnotationName,config.hoverLift))};const getHoverAnnotations=(config,shapes,selectedPrimaryShapeIds,draggedShape)=>shapes.filter(shape=>shape&&shape.type!=="annotation"&&selectedPrimaryShapeIds.indexOf(shape.id)===-1&&!draggedShape).map(borderAnnotation(config.hoverAnnotationName,config.hoverLift));const getShapesToHover=(dragBox,hoveredShapes,boxHighlightedShapes)=>dragBox?boxHighlightedShapes:hoveredShapes.slice(0,1);const getSnappedShapes=(config,shapes,draggedShape,draggedElement,alignmentGuideAnnotations,alterSnapGesture,symmetricManipulation)=>{const contentShapes=shapes.filter(shape=>shape.type!=="annotation");const subtype=draggedShape&&draggedShape.subtype;if(subtype&&[config.resizeHandleName,config.adHocGroupName,config.persistentGroupName].indexOf(subtype)===-1){return contentShapes}const constraints=alignmentGuideAnnotations;const relaxed=alterSnapGesture.indexOf("relax")!==-1;const constrained=config.snapConstraint&&!relaxed;const horizontalConstraint=constrained&&directionalConstraint(constraints,isHorizontal);const verticalConstraint=constrained&&directionalConstraint(constraints,isVertical);const snapper=subtype===config.resizeHandleName?resizeShapeSnap(horizontalConstraint,verticalConstraint,draggedElement,symmetricManipulation,draggedShape.horizontalPosition,draggedShape.verticalPosition):translateShapeSnap(horizontalConstraint,verticalConstraint,draggedElement);return contentShapes.map(snapper)};const getConstrainedShapesWithPreexistingAnnotations=(snapped,transformed)=>snapped.concat(transformed.filter(s=>s.type==="annotation"));const getGroupAction=(action,mouseIsDown)=>{const event=action&&action.event;return!mouseIsDown&&(event==="group"||event==="ungroup")?event:null};const alignments={alignLeft:{type:"alignLeftAction",horizontal:true,controlledAnchor:-1,controllingAnchor:-1},alignCenter:{type:"alignCenterAction",horizontal:true,controlledAnchor:0,controllingAnchor:0},alignRight:{type:"alignRightAction",horizontal:true,controlledAnchor:1,controllingAnchor:1},alignTop:{type:"alignTopAction",horizontal:false,controlledAnchor:-1,controllingAnchor:-1},alignMiddle:{type:"alignMiddleAction",horizontal:false,controlledAnchor:0,controllingAnchor:0},alignBottom:{type:"alignBottomAction",horizontal:false,controlledAnchor:1,controllingAnchor:1}};const distributions={distributeHorizontally:{type:"distributeHorizontallyAction",horizontal:true},distributeVertically:{type:"distributeVerticallyAction",horizontal:false}};const getAlignAction=action=>alignments[action&&action.event]||null;const getDistributeAction=action=>distributions[action&&action.event]||null;const getGroupedSelectedShapes=({selectedShapes:selectedShapes})=>selectedShapes;const getGroupedSelectedPrimaryShapeIds=selectedShapes=>selectedShapes.map(primaryShape);const getGroupedSelectedShapeIds=selectedShapes=>selectedShapes.map(shape=>shape.id);const getRotationAnnotations=(config,{shapes:shapes,selectedShapes:selectedShapes})=>{const shapesToAnnotate=selectedShapes;return shapesToAnnotate.map((shape,i)=>rotationAnnotation(config,shapes,selectedShapes,shape,i)).filter(identity)};const getDragBox=(dragging,draggedShape,{x0:x0,y0:y0,x1:x1,y1:y1})=>dragging&&!draggedShape&&{x:(x0+x1)/2,y:(y0+y1)/2,a:Math.abs(x1-x0)/2,b:Math.abs(y1-y0)/2};const getDragboxHighlighted=(box,shapes)=>{if(!box){return[]}const filter=insideAABB(box);return shapes.filter(s=>s.type!=="annotation"&&!s.parent&&filter(s.transformMatrix,s.a,s.b))};const getDragBoxAnnotation=(config,box)=>box?[{id:config.dragBoxAnnotationName,type:"annotation",subtype:config.dragBoxAnnotationName,interactive:false,parent:null,localTransformMatrix:translate(box.x,box.y,config.dragBoxZ),a:box.a,b:box.b}]:[];const getAnnotatedShapes=({shapes:shapes},alignmentGuideAnnotations,hoverAnnotations,rotationAnnotations,resizeAnnotations,rotationTooltipAnnotation,adHocChildrenAnnotations,dragBoxAnnotation)=>{const annotations=[].concat(alignmentGuideAnnotations,hoverAnnotations,rotationAnnotations,resizeAnnotations,rotationTooltipAnnotation,adHocChildrenAnnotations,dragBoxAnnotation);const contentShapes=shapes.filter(shape=>shape.type!=="annotation");return contentShapes.concat(annotations)};const getNextScene=(configuration,hoveredShape,selectedShapes,selectedPrimaryShapes,shapes,gestureEnd,draggedShape,cursor,selectionState,mouseTransformState,gestureState)=>({configuration:configuration,hoveredShape:hoveredShape,selectedShapes:selectedShapes,selectedPrimaryShapes:selectedPrimaryShapes,shapes:shapes,gestureEnd:gestureEnd,draggedShape:draggedShape,cursor:cursor,selectionState:selectionState,mouseTransformState:mouseTransformState,gestureState:gestureState});const updaterFun=(nextScene,primaryUpdate)=>({primaryUpdate:primaryUpdate,currentScene:nextScene});const isGroupId=id=>id.startsWith("group");const headerData=id=>isGroupId(id)?{id:id,type:"group",subtype:"persistentGroup"}:{id:id,type:"rectangleElement",subtype:""};const transformData=({top:top,left:left,width:width,height:height,angle:angle},z)=>multiply(translate(left+width/2,top+height/2,z),rotateZ(-angle/180*Math.PI));const elementToShape=({id:id,position:position},z)=>({...headerData(id),parent:position&&position.parent||null,transformMatrix:transformData(position,z),a:position.width/2,b:position.height/2});const simplePosition=({id:id,position:position,filter:filter},z)=>({...headerData(id),width:position.width,height:position.height,transformMatrix:transformData(position,z),filter:filter});const simplePositioning=({elements:elements})=>({elements:elements.map(simplePosition)});const shapeToElement=shape=>({left:shape.transformMatrix[12]-shape.a,top:shape.transformMatrix[13]-shape.b,width:shape.a*2,height:shape.b*2,angle:Math.round(matrixToAngle(shape.transformMatrix)*180/Math.PI),parent:shape.parent||null,type:shape.type==="group"?"group":"element"});const globalPositionUpdates=(setMultiplePositions,{shapes:shapes,gestureEnd:gestureEnd},unsortedElements)=>{const ascending=(a,b)=>a.id<b.id?-1:1;const relevant=s=>s.type!=="annotation"&&s.subtype!=="adHocGroup";const elements=unsortedElements.filter(relevant).sort(ascending);const repositionings=shapes.filter(relevant).sort(ascending).map((shape,i)=>{const element=elements[i];const elemPos=element&&element.position;if(elemPos&&gestureEnd){const oldProps={left:elemPos.left,top:elemPos.top,width:elemPos.width,height:elemPos.height,angle:Math.round(elemPos.angle),type:elemPos.type,parent:elemPos.parent||null};const newProps=shapeToElement(shape);if(1/newProps.angle===-Infinity){newProps.angle=0}return Object(Recompose["shallowEqual"])(oldProps,newProps)?null:{position:newProps,elementId:shape.id}}}).filter(identity);return repositionings};const dedupe=(d,i,a)=>a.findIndex(s=>s.id===d.id)===i;const missingParentCheck=groups=>{const idMap=arrayToMap(groups.map(g=>g.id));groups.forEach(g=>{if(g.parent&&!idMap[g.parent]){g.parent=null}})};const shapesForNodes=nodes=>{const rawShapes=nodes.map(elementToShape).filter((d,i,a)=>!isGroupId(d.id)||a.find(s=>s.parent===d.id)).filter(dedupe);missingParentCheck(rawShapes);const getLocalMatrix=getLocalTransformMatrix(rawShapes);return rawShapes.map(s=>({...s,localTransformMatrix:getLocalMatrix(s)}))};const updateGlobalPositionsInRedux=(setMultiplePositions,scene,unsortedElements)=>{const repositionings=globalPositionUpdates(setMultiplePositions,scene,unsortedElements);if(repositionings.length){setMultiplePositions(repositionings)}};const globalStateUpdater=(dispatch,globalState)=>state=>{const nextScene=state.currentScene;const page=getSelectedPage(globalState);const elements=getNodes(globalState,page);const shapes=nextScene.shapes;const persistableGroups=shapes.filter(s=>s.subtype==="persistentGroup").filter(dedupe);const persistedGroups=elements.filter(e=>isGroupId(e.id)).filter(dedupe);persistableGroups.forEach(g=>{if(!persistedGroups.find(p=>{if(!p.id){throw new Error("Element has no id")}return p.id===g.id})){const partialElement={id:g.id,filter:undefined,expression:'shape fill="rgba(255,255,255,0)" | render',position:{...shapeToElement(g)}};dispatch(elements_addElement(page,partialElement))}});const elementsToRemove=persistedGroups.filter(p=>!persistableGroups.find(g=>p.id===g.id)||!elements.find(e=>e.position.parent===p.id));updateGlobalPositionsInRedux(positions=>dispatch(elements_setMultiplePositions(positions.map(p=>({...p,pageId:page})))),nextScene,elements);if(elementsToRemove.length){dispatch(removeElements(elementsToRemove.map(e=>e.id),page))}const selectedPrimaryShapes=nextScene.selectedPrimaryShapes;if(!Object(Recompose["shallowEqual"])(selectedPrimaryShapes,globalState.transient.selectedToplevelNodes)){dispatch(transient_selectToplevelNodes(flatten(selectedPrimaryShapes.map(n=>n.startsWith("group")&&(shapes.find(s=>s.id===n)||{}).subtype==="adHocGroup"?shapes.filter(s=>s.type!=="annotation"&&s.parent===n).map(s=>s.id):[n]))))}};const crawlTree=shapes=>shapeId=>{const rec=shapeId=>[shapeId,...flatten(shapes.filter(s=>s.position.parent===shapeId).map(s=>rec(s.id)))];return rec(shapeId)};const ToolTipShortcut=({shortcut:shortcut})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs",textAlign:"center",color:"ghost"},shortcut.replace(/\+/g," + "));const getClientPlatform=()=>{const platform=navigator.platform.toLowerCase();if(platform.indexOf("mac")>=0){return"osx"}if(platform.indexOf("win")>=0){return"windows"}if(platform.indexOf("linux")>=0){return"linux"}return"other"};var i18n_shortcuts=__webpack_require__(48);const shortcutHelp=i18n_shortcuts["a"].getShortcutHelp();const namespaceDisplayNames=i18n_shortcuts["a"].getNamespaceDisplayNames();const getShortcuts=(shortcuts,{modifiers:modifiers=[],help:help})=>{if(!Array.isArray(shortcuts)){shortcuts=[shortcuts]}if(!Array.isArray(modifiers)){modifiers=[modifiers]}let macShortcuts=[...shortcuts];if(modifiers.includes("shift")){macShortcuts=macShortcuts.map(shortcut=>`shift+${shortcut}`);shortcuts=shortcuts.map(shortcut=>`shift+${shortcut}`)}if(modifiers.includes("alt")||modifiers.includes("option")){macShortcuts=macShortcuts.map(shortcut=>`option+${shortcut}`);shortcuts=shortcuts.map(shortcut=>`alt+${shortcut}`)}if(modifiers.includes("ctrl")||modifiers.includes("command")){macShortcuts=macShortcuts.map(shortcut=>`command+${shortcut}`);shortcuts=shortcuts.map(shortcut=>`ctrl+${shortcut}`)}return{osx:macShortcuts,windows:shortcuts,linux:shortcuts,other:shortcuts,help:help}};const refreshShortcut=getShortcuts("r",{modifiers:"alt",help:shortcutHelp.REFRESH});const previousPageShortcut=getShortcuts("[",{modifiers:"alt",help:shortcutHelp.PREV});const nextPageShortcut=getShortcuts("]",{modifiers:"alt",help:shortcutHelp.NEXT});const fullscreenShortcut=getShortcuts(["f","p"],{modifiers:"alt",help:shortcutHelp.FULLSCREEN});const keymap={ELEMENT:{displayName:namespaceDisplayNames.ELEMENT,CUT:getShortcuts("x",{modifiers:"ctrl",help:shortcutHelp.CUT}),COPY:getShortcuts("c",{modifiers:"ctrl",help:shortcutHelp.COPY}),PASTE:getShortcuts("v",{modifiers:"ctrl",help:shortcutHelp.PASTE}),CLONE:getShortcuts("d",{modifiers:"ctrl",help:shortcutHelp.CLONE}),DELETE:getShortcuts(["del","backspace"],{help:shortcutHelp.DELETE}),BRING_FORWARD:getShortcuts("up",{modifiers:"ctrl",help:shortcutHelp.BRING_TO_FRONT}),BRING_TO_FRONT:getShortcuts("up",{modifiers:["ctrl","shift"],help:shortcutHelp.BRING_FORWARD}),SEND_BACKWARD:getShortcuts("down",{modifiers:"ctrl",help:shortcutHelp.SEND_BACKWARD}),SEND_TO_BACK:getShortcuts("down",{modifiers:["ctrl","shift"],help:shortcutHelp.SEND_TO_BACK}),GROUP:getShortcuts("g",{help:shortcutHelp.GROUP}),UNGROUP:getShortcuts("u",{help:shortcutHelp.UNGROUP}),SHIFT_UP:getShortcuts("up",{help:shortcutHelp.SHIFT_UP}),SHIFT_DOWN:getShortcuts("down",{help:shortcutHelp.SHIFT_DOWN}),SHIFT_LEFT:getShortcuts("left",{help:shortcutHelp.SHIFT_LEFT}),SHIFT_RIGHT:getShortcuts("right",{help:shortcutHelp.SHIFT_RIGHT}),NUDGE_UP:getShortcuts("up",{modifiers:["shift"],help:shortcutHelp.NUDGE_UP}),NUDGE_DOWN:getShortcuts("down",{modifiers:["shift"],help:shortcutHelp.NUDGE_DOWN}),NUDGE_LEFT:getShortcuts("left",{modifiers:["shift"],help:shortcutHelp.NUDGE_LEFT}),NUDGE_RIGHT:getShortcuts("right",{modifiers:["shift"],help:shortcutHelp.NUDGE_RIGHT})},EXPRESSION:{displayName:namespaceDisplayNames.EXPRESSION,RUN:getShortcuts("enter",{modifiers:"ctrl",help:shortcutHelp.RUN})},EDITOR:{displayName:namespaceDisplayNames.EDITOR,MULTISELECT:getShortcuts("click",{modifiers:"shift",help:shortcutHelp.MULTISELECT}),RESIZE_FROM_CENTER:getShortcuts("drag",{modifiers:"alt",help:shortcutHelp.RESIZE_FROM_CENTER}),IGNORE_SNAP:getShortcuts("drag",{modifiers:"ctrl",help:shortcutHelp.IGNORE_SNAP}),SELECT_BEHIND:getShortcuts("click",{modifiers:"ctrl",help:shortcutHelp.SELECT_BEHIND}),UNDO:getShortcuts("z",{modifiers:"ctrl",help:shortcutHelp.UNDO}),REDO:getShortcuts("z",{modifiers:["ctrl","shift"],help:shortcutHelp.REDO}),PREV:previousPageShortcut,NEXT:nextPageShortcut,EDITING:getShortcuts("e",{modifiers:"alt",help:shortcutHelp.EDITING}),GRID:getShortcuts("g",{modifiers:"alt",help:shortcutHelp.GRID}),REFRESH:refreshShortcut,ZOOM_IN:getShortcuts("plus",{modifiers:["ctrl","alt"],help:shortcutHelp.ZOOM_IN}),ZOOM_OUT:getShortcuts("minus",{modifiers:["ctrl","alt"],help:shortcutHelp.ZOOM_OUT}),ZOOM_RESET:getShortcuts("[",{modifiers:["ctrl","alt"],help:shortcutHelp.ZOOM_RESET}),FULLSCREEN:fullscreenShortcut},PRESENTATION:{displayName:namespaceDisplayNames.PRESENTATION,FULLSCREEN:fullscreenShortcut,FULLSCREEN_EXIT:getShortcuts("esc",{help:shortcutHelp.FULLSCREEN_EXIT}),PREV:Object(external_kbnSharedDeps_Lodash_["mapValues"])(previousPageShortcut,(osShortcuts,key)=>key==="help"?osShortcuts:osShortcuts.concat(["backspace","left"])),NEXT:Object(external_kbnSharedDeps_Lodash_["mapValues"])(nextPageShortcut,(osShortcuts,key)=>key==="help"?osShortcuts:osShortcuts.concat(["space","right"])),REFRESH:refreshShortcut,PAGE_CYCLE_TOGGLE:getShortcuts("p",{help:shortcutHelp.PAGE_CYCLE_TOGGLE})}};const getPrettyShortcut=shortcut=>{if(!shortcut){return""}let result=shortcut.toUpperCase();result=result.replace(/command/i,"⌘");result=result.replace(/option/i,"⌥");result=result.replace(/left/i,"←");result=result.replace(/right/i,"→");result=result.replace(/up/i,"↑");result=result.replace(/down/i,"↓");result=result.replace(/plus/i,"+");result=result.replace(/minus/i,"-");return result};const os=getClientPlatform();const tool_tip_shortcut_ToolTipShortcut=Object(Recompose["compose"])(Object(Recompose["mapProps"])(({namespace:namespace,action:action})=>{const shortcutMap=keymap[namespace][action];if(typeof shortcutMap==="string"){return{shortcut:""}}const shortcuts=shortcutMap[os]||[];return{shortcut:getPrettyShortcut(shortcuts[0])}}))(ToolTipShortcut);const{SidebarHeader:sidebar_header_strings}=components["a"];const sidebar_header_shortcutHelp=i18n_shortcuts["a"].getShortcutHelp();const SidebarHeader=({title:title,showLayerControls:showLayerControls,bringToFront:bringToFront,bringForward:bringForward,sendBackward:sendBackward,sendToBack:sendToBack})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:"canvasLayout__sidebarHeader",gutterSize:"none",alignItems:"center",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,title))),showLayerControls?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"bottom",content:external_kbnSharedDeps_React_default.a.createElement("span",null,sidebar_header_shortcutHelp.BRING_TO_FRONT,external_kbnSharedDeps_React_default.a.createElement(tool_tip_shortcut_ToolTipShortcut,{namespace:"ELEMENT",action:"BRING_TO_FRONT"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{color:"text",iconType:"sortUp",onClick:bringToFront,"aria-label":sidebar_header_strings.getBringToFrontAriaLabel()}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"bottom",content:external_kbnSharedDeps_React_default.a.createElement("span",null,sidebar_header_shortcutHelp.BRING_FORWARD,external_kbnSharedDeps_React_default.a.createElement(tool_tip_shortcut_ToolTipShortcut,{namespace:"ELEMENT",action:"BRING_FORWARD"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{color:"text",iconType:"arrowUp",onClick:bringForward,"aria-label":sidebar_header_strings.getBringForwardAriaLabel()}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"bottom",content:external_kbnSharedDeps_React_default.a.createElement("span",null,sidebar_header_shortcutHelp.SEND_BACKWARD,external_kbnSharedDeps_React_default.a.createElement(tool_tip_shortcut_ToolTipShortcut,{namespace:"ELEMENT",action:"SEND_BACKWARD"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{color:"text",iconType:"arrowDown",onClick:sendBackward,"aria-label":sidebar_header_strings.getSendBackwardAriaLabel()}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"bottom",content:external_kbnSharedDeps_React_default.a.createElement("span",null,sidebar_header_shortcutHelp.SEND_TO_BACK,external_kbnSharedDeps_React_default.a.createElement(tool_tip_shortcut_ToolTipShortcut,{namespace:"ELEMENT",action:"SEND_TO_BACK"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{color:"text",iconType:"sortDown",onClick:sendToBack,"aria-label":sidebar_header_strings.getSendToBackAriaLabel()}))))):null);SidebarHeader.defaultProps={showLayerControls:false};const sidebar_header_mapStateToProps=state=>{const pageId=getSelectedPage(state);const nodes=getNodes(state,pageId);const selectedToplevelNodes=getSelectedToplevelNodes(state);const selectedPrimaryShapeObjects=selectedToplevelNodes.map(id=>nodes.find(s=>s.id===id)).filter(shape=>shape);const selectedPersistentPrimaryNodes=flatten(selectedPrimaryShapeObjects.map(shape=>nodes.find(n=>n.id===shape.id)?[shape.id]:nodes.filter(s=>s.parent===shape.id).map(s=>s.id)));const selectedNodeIds=flatten(selectedPersistentPrimaryNodes.map(crawlTree(nodes)));return{pageId:pageId,selectedNodes:selectedNodeIds.map(id=>nodes.find(s=>s.id===id))}};const sidebar_header_mapDispatchToProps=dispatch=>({insertNodes:(selectedNodes,pageId)=>dispatch(elements_insertNodes(selectedNodes,pageId)),removeNodes:(nodeIds,pageId)=>dispatch(removeElements(nodeIds,pageId)),selectToplevelNodes:nodes=>dispatch(transient_selectToplevelNodes(nodes.filter(e=>!e.position.parent).map(e=>e.id))),elementLayer:(pageId,elementId,movement)=>{dispatch(elements_elementLayer({pageId:pageId,elementId:elementId,movement:movement}))}});const sidebar_header_SidebarHeader=Object(Recompose["compose"])(Object(lib["connect"])(sidebar_header_mapStateToProps,sidebar_header_mapDispatchToProps),Object(Recompose["withHandlers"])(basicHandlerCreators),Object(Recompose["withHandlers"])(clipboardHandlerCreators),Object(Recompose["withHandlers"])(layerHandlerCreators),Object(Recompose["withHandlers"])(groupHandlerCreators),Object(Recompose["withHandlers"])(alignmentDistributionHandlerCreators))(SidebarHeader);const{MultiElementSettings:multi_element_settings_strings}=components["a"];const MultiElementSettings=()=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__panel canvasSidebar__panel--isEmpty"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,multi_element_settings_strings.getMultipleElementsDescription()),external_kbnSharedDeps_React_default.a.createElement("p",null,multi_element_settings_strings.getMultipleElementsActionsDescription())));const{GroupSettings:group_settings_strings}=components["a"];const GroupSettings=()=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__panel canvasSidebar__panel--isEmpty"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,group_settings_strings.getUngroupDescription()),external_kbnSharedDeps_React_default.a.createElement("p",null,group_settings_strings.getSaveGroupDescription())));const{ElementConfig:element_config_strings}=i18n["e"];const ElementConfig=({elementStats:elementStats})=>{if(!elementStats){return null}const{total:total,ready:ready,error:error}=elementStats;const progress=total>0?Math.round((ready+error)/total*100):100;return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__expandable"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:"canvas-element-stats",buttonContent:element_config_strings.getTitle(),initialIsOpen:false,className:"canvasSidebar__accordion"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__accordionContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{title:total,description:element_config_strings.getTotalLabel(),titleSize:"xs"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{title:ready,description:element_config_strings.getLoadedLabel(),titleSize:"xs"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{title:error,description:element_config_strings.getFailedLabel(),titleSize:"xs"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{title:progress+"%",description:element_config_strings.getProgressLabel(),titleSize:"xs"}))))))};const element_config_mapStateToProps=state=>({elementStats:getElementStats(state)});const element_config_ElementConfig=Object(lib["connect"])(element_config_mapStateToProps)(ElementConfig);function Transition(config){this.name=config.name;this.displayName=config.displayName||this.name;this.help=config.help||"";this.enter=config.enter||"";this.exit=config.exit||""}class transitions_registry_TransitionsRegistry extends common["Registry"]{wrapper(obj){return new Transition(obj)}}const transitionsRegistry=new transitions_registry_TransitionsRegistry;var color_picker_popover=__webpack_require__(223);function workpad_color_picker_component_extends(){workpad_color_picker_component_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return workpad_color_picker_component_extends.apply(this,arguments)}const{WorkpadConfig:workpad_color_picker_component_strings}=i18n["e"];const WorkpadColorPicker=props=>external_kbnSharedDeps_React_default.a.createElement(color_picker_popover["a"],workpad_color_picker_component_extends({},props,{hasButtons:true,ariaLabel:workpad_color_picker_component_strings.getBackgroundColorLabel()}));const workpad_color_picker_mapStateToProps=state=>({colors:getWorkpadColors(state)});const workpad_color_picker_mapDispatchToProps={onAddColor:addColor,onRemoveColor:removeColor};const workpad_color_picker_WorkpadColorPicker=Object(lib["connect"])(workpad_color_picker_mapStateToProps,workpad_color_picker_mapDispatchToProps)(WorkpadColorPicker);const{PageConfig:page_config_strings}=i18n["e"];const PageConfig=({pageIndex:pageIndex,setBackground:setBackground,background:background,transition:transition,transitions:transitions,setTransition:setTransition})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs",className:"canvasSidebar__panelTitleHeading"},external_kbnSharedDeps_React_default.a.createElement("h4",null,page_config_strings.getTitle())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{display:"columnCompressed",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:page_config_strings.getBackgroundColorDescription()},external_kbnSharedDeps_React_default.a.createElement("span",null,page_config_strings.getBackgroundColorLabel()," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"questionInCircle",color:"subdued"})))},external_kbnSharedDeps_React_default.a.createElement(workpad_color_picker_WorkpadColorPicker,{onChange:setBackground,value:background})),pageIndex>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:page_config_strings.getTransitionLabel(),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{value:transition?transition.name:"",options:transitions,compressed:true,onChange:e=>setTransition(e.target.value)})),transition?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:page_config_strings.getTransitionPreviewLabel(),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCard"],{title:"",description:"",className:transition.enter,style:{height:"72px",width:"128px",background:background,animationDuration:"1s"}})):""):"");const{PageConfig:components_page_config_strings}=i18n["e"];const page_config_mapStateToProps=state=>{const pageIndex=getSelectedPageIndex(state);const page=getPages(state)[pageIndex];return{page:page,pageIndex:pageIndex}};const page_config_mapDispatchToProps={stylePage:stylePage,setPageTransition:setPageTransition};const mergeProps=(stateProps,dispatchProps)=>({pageIndex:stateProps.pageIndex,setBackground:background=>{const itsTheNewStyle={...stateProps.page.style,background:background};dispatchProps.stylePage(stateProps.page.id,itsTheNewStyle)},background:Object(external_kbnSharedDeps_Lodash_["get"])(stateProps,"page.style.background"),transition:transitionsRegistry.get(Object(external_kbnSharedDeps_Lodash_["get"])(stateProps,"page.transition.name")),transitions:[{value:"",text:components_page_config_strings.getNoTransitionDropDownOptionLabel()}].concat(transitionsRegistry.toArray().map(({name:name,displayName:displayName})=>({value:name,text:displayName}))),setTransition:name=>{dispatchProps.setPageTransition(stateProps.page.id,{name:name})}});const page_config_PageConfig=Object(lib["connect"])(page_config_mapStateToProps,page_config_mapDispatchToProps,mergeProps)(PageConfig);var copy_to_clipboard=__webpack_require__(277);var copy_to_clipboard_default=__webpack_require__.n(copy_to_clipboard);const{VarConfigVarValueField:var_value_field_strings}=i18n["e"];const VarValueField=({type:type,value:value,onChange:onChange})=>{const idPrefix=Object(external_kbnSharedDeps_ElasticEui_["htmlIdGenerator"])()();const options=[{id:`${idPrefix}-true`,label:var_value_field_strings.getTrueOption()},{id:`${idPrefix}-false`,label:var_value_field_strings.getFalseOption()}];if(type==="number"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{compressed:true,name:"value",value:value,onChange:e=>onChange(e.target.value)})}else if(type==="boolean"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonGroup"],{name:"value",options:options,idSelected:`${idPrefix}-${value}`,onChange:id=>{const val=id.replace(`${idPrefix}-`,"")==="true";onChange(val)},buttonSize:"compressed",isFullWidth:true,legend:var_value_field_strings.getBooleanOptionsLegend()})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{compressed:true,name:"value",value:String(value),onChange:e=>onChange(e.target.value)})};var edit_var=__webpack_require__(336);var var_panel=__webpack_require__(278);const{VarConfigEditVar:edit_var_strings}=i18n["e"];const checkDupeName=(newName,oldName,variables)=>{const match=variables.find(v=>newName===v.name&&(!oldName||v.name!==oldName));return!!match};const EditVar=({variables:variables,selectedVar:selectedVar,onCancel:onCancel,onSave:onSave})=>{const isNew=selectedVar===null;const[type,setType]=Object(external_kbnSharedDeps_React_["useState"])(isNew?"string":selectedVar.type);const[name,setName]=Object(external_kbnSharedDeps_React_["useState"])(isNew?"":selectedVar.name);const[value,setValue]=Object(external_kbnSharedDeps_React_["useState"])(isNew?"":selectedVar.value);const hasDupeName=checkDupeName(name,selectedVar&&selectedVar.name,variables);const typeOptions=[{value:"string",inputDisplay:external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasEditVar__typeOption"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToken"],{iconType:"tokenString",className:"canvasEditVar__tokenIcon"})," ",external_kbnSharedDeps_React_default.a.createElement("span",null,edit_var_strings.getTypeStringLabel()))},{value:"number",inputDisplay:external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasEditVar__typeOption"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToken"],{iconType:"tokenNumber",className:"canvasEditVar__tokenIcon"})," ",external_kbnSharedDeps_React_default.a.createElement("span",null,edit_var_strings.getTypeNumberLabel()))},{value:"boolean",inputDisplay:external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasEditVar__typeOption"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToken"],{iconType:"tokenBoolean",className:"canvasEditVar__tokenIcon"})," ",external_kbnSharedDeps_React_default.a.createElement("span",null,edit_var_strings.getTypeBooleanLabel()))}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasVarHeader__triggerWrapper"},external_kbnSharedDeps_React_default.a.createElement("button",{className:"canvasVarHeader__button",type:"button",onClick:()=>onCancel()},external_kbnSharedDeps_React_default.a.createElement("span",{className:"canvasVarHeader__iconWrapper"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"sortLeft",style:{verticalAlign:"top"}})),external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement("span",{className:"canvasVarHeader__anchor"},isNew?edit_var_strings.getAddTitle():edit_var_strings.getEditTitle())))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__accordionContent"},!isNew&&external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:edit_var_strings.getEditWarning(),color:"warning",iconType:"alert",size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],{component:"form"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:edit_var_strings.getTypeFieldLabel(),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperSelect"],{options:typeOptions,valueOfSelected:type,onChange:v=>{setType(v);if(v==="boolean"){setValue(true)}else if(v==="number"){setValue(0)}else{setValue("")}},compressed:true})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:edit_var_strings.getNameFieldLabel(),display:"rowCompressed",isInvalid:hasDupeName,error:hasDupeName&&edit_var_strings.getDuplicateNameError()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{name:"name",value:name,compressed:true,onChange:e=>setName(e.target.value),isInvalid:hasDupeName})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:edit_var_strings.getValueFieldLabel(),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(VarValueField,{type:type,value:value,onChange:v=>setValue(v)})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"secondary",size:"s",fill:true,onClick:()=>onSave({name:name,value:value,type:type}),disabled:hasDupeName||!name,iconType:"save"},edit_var_strings.getSaveButtonLabel())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",onClick:()=>onCancel()},edit_var_strings.getCancelButtonLabel()))))))};const{VarConfigDeleteVar:delete_var_strings}=i18n["e"];const DeleteVar=({selectedVar:selectedVar,onCancel:onCancel,onDelete:onDelete})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasVarHeader__triggerWrapper"},external_kbnSharedDeps_React_default.a.createElement("button",{className:"canvasVarHeader__button",type:"button",onClick:()=>onCancel()},external_kbnSharedDeps_React_default.a.createElement("span",{className:"canvasVarHeader__iconWrapper"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"sortLeft",style:{verticalAlign:"top"}})),external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement("span",{className:"canvasVarHeader__anchor"},delete_var_strings.getTitle())))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__accordionContent"},external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued",size:"s"},delete_var_strings.getWarningDescription()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"danger",size:"s",fill:true,onClick:()=>onDelete(selectedVar),iconType:"trash"},delete_var_strings.getDeleteButtonLabel())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",onClick:()=>onCancel()},delete_var_strings.getCancelButtonLabel()))))));var var_config=__webpack_require__(353);const{VarConfig:var_config_strings}=i18n["e"];var PanelMode;(function(PanelMode){PanelMode[PanelMode["List"]=0]="List";PanelMode[PanelMode["Edit"]=1]="Edit";PanelMode[PanelMode["Delete"]=2]="Delete"})(PanelMode||(PanelMode={}));const typeToToken={number:"tokenNumber",boolean:"tokenBoolean",string:"tokenString"};const VarConfig=({variables:variables,onCopyVar:onCopyVar,onDeleteVar:onDeleteVar,onAddVar:onAddVar,onEditVar:onEditVar})=>{const[panelMode,setPanelMode]=Object(external_kbnSharedDeps_React_["useState"])(PanelMode.List);const[selectedVar,setSelectedVar]=Object(external_kbnSharedDeps_React_["useState"])(null);const selectAndEditVar=v=>{setSelectedVar(v);setPanelMode(PanelMode.Edit)};const selectAndDeleteVar=v=>{setSelectedVar(v);setPanelMode(PanelMode.Delete)};const actions=[{type:"icon",name:var_config_strings.getCopyActionButtonLabel(),description:var_config_strings.getCopyActionTooltipLabel(),icon:"copyClipboard",onClick:onCopyVar,isPrimary:true},{type:"icon",name:var_config_strings.getEditActionButtonLabel(),description:"",icon:"pencil",onClick:selectAndEditVar},{type:"icon",name:var_config_strings.getDeleteActionButtonLabel(),description:"",icon:"trash",color:"danger",onClick:selectAndDeleteVar}];const varColumns=[{field:"type",name:var_config_strings.getTableTypeLabel(),sortable:true,render:(varType,_v)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToken"],{iconType:typeToToken[varType]}),width:"50px"},{field:"name",name:var_config_strings.getTableNameLabel(),sortable:true},{field:"value",name:var_config_strings.getTableValueLabel(),sortable:true,truncateText:true,render:(value,_v)=>""+value},{actions:actions,width:"60px"}];return external_kbnSharedDeps_React_default.a.createElement("div",{className:`canvasSidebar__expandable canvasVarConfig__container ${panelMode!==PanelMode.List?"canvasVarConfig-isEditMode":""}`},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasVarConfig__innerContainer"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:"accordion-variables",className:"canvasVarConfig__listView canvasSidebar__accordion",buttonContent:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:var_config_strings.getTitleTooltip(),position:"left",className:"canvasArg__tooltip"},external_kbnSharedDeps_React_default.a.createElement("span",null,var_config_strings.getTitle())),extraAction:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:var_config_strings.getAddTooltipLabel()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{color:"primary",iconType:"plusInCircle","aria-label":var_config_strings.getAddTooltipLabel(),onClick:()=>{setSelectedVar(null);setPanelMode(PanelMode.Edit)}}))},variables.length!==0&&external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__accordionContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{className:"canvasVarConfig__list",items:variables,columns:varColumns,hasActions:true,pagination:false,sorting:true,compressed:true})),variables.length===0&&external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__accordionContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued",size:"s"},var_config_strings.getEmptyDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",iconType:"plusInCircle",onClick:()=>setPanelMode(PanelMode.Edit)},var_config_strings.getAddButtonLabel()))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasVarConfig__editView canvasSidebar__accordion"},panelMode===PanelMode.Edit&&external_kbnSharedDeps_React_default.a.createElement(EditVar,{variables:variables,selectedVar:selectedVar,onSave:newVar=>{if(!selectedVar){onAddVar(newVar)}else{onEditVar(selectedVar,newVar)}setSelectedVar(null);setPanelMode(PanelMode.List)},onCancel:()=>{setSelectedVar(null);setPanelMode(PanelMode.List)}}),panelMode===PanelMode.Delete&&selectedVar&&external_kbnSharedDeps_React_default.a.createElement(DeleteVar,{selectedVar:selectedVar,onDelete:v=>{onDeleteVar(v);setSelectedVar(null);setPanelMode(PanelMode.List)},onCancel:()=>{setSelectedVar(null);setPanelMode(PanelMode.List)}}))))};const{VarConfig:components_var_config_strings}=i18n["e"];const var_config_VarConfig=({variables:variables,setVariables:setVariables})=>{const{success:success}=Object(public_services["g"])();const onDeleteVar=v=>{const index=variables.findIndex(targetVar=>targetVar.name===v.name);if(index!==-1){const newVars=[...variables];newVars.splice(index,1);setVariables(newVars);success(components_var_config_strings.getDeleteNotificationDescription())}};const onCopyVar=v=>{const snippetStr=`{var "${v.name}"}`;copy_to_clipboard_default()(snippetStr,{debug:true});success(components_var_config_strings.getCopyNotificationDescription())};const onAddVar=v=>{setVariables([...variables,v])};const onEditVar=(oldVar,newVar)=>{const existingVarIndex=variables.findIndex(v=>oldVar.name===v.name);const newVars=[...variables];newVars[existingVarIndex]=newVar;setVariables(newVars)};return external_kbnSharedDeps_React_default.a.createElement(VarConfig,{variables:variables,onCopyVar:onCopyVar,onDeleteVar:onDeleteVar,onAddVar:onAddVar,onEditVar:onEditVar})};const{WorkpadConfig:workpad_config_component_strings}=i18n["e"];const WorkpadConfig=props=>{const[css,setCSS]=Object(external_kbnSharedDeps_React_["useState"])(props.css);const{size:size,name:name,setSize:setSize,setName:setName,setWorkpadCSS:setWorkpadCSS,variables:variables,setWorkpadVariables:setWorkpadVariables}=props;const rotate=()=>setSize({width:size.height,height:size.width});const badges=[{name:"1080p",size:{height:1080,width:1920}},{name:"720p",size:{height:720,width:1280}},{name:"A4",size:{height:842,width:590}},{name:workpad_config_component_strings.getUSLetterButtonLabel(),size:{height:792,width:612}}];return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasLayout__sidebarHeaderWorkpad"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h4",null,workpad_config_component_strings.getTitle()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:workpad_config_component_strings.getNameLabel(),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{compressed:true,value:name,onChange:e=>setName(e.target.value)})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:workpad_config_component_strings.getPageWidthLabel(),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{compressed:true,onChange:e=>setSize({width:Number(e.target.value),height:size.height}),value:size.width}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{display:"rowCompressed",hasEmptyLabelSpace:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"bottom",content:workpad_config_component_strings.getFlipDimensionTooltip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"merge",color:"text",onClick:rotate,"aria-label":workpad_config_component_strings.getFlipDimensionAriaLabel()})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:workpad_config_component_strings.getPageHeightLabel(),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{compressed:true,onChange:e=>setSize({height:Number(e.target.value),width:size.width}),value:size.height})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement("div",null,badges.map((badge,i)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{key:`page-size-badge-${i}`,color:"hollow",onClick:()=>setSize(badge.size),"aria-label":workpad_config_component_strings.getPageSizeBadgeAriaLabel(badge.name),onClickAriaLabel:workpad_config_component_strings.getPageSizeBadgeOnClickAriaLabel(badge.name)},badge.name))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(var_config_VarConfig,{variables:variables,setVariables:setWorkpadVariables}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__expandable"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:"accordion-global-css",className:"canvasSidebar__accordion",style:{marginBottom:0},buttonContent:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:workpad_config_component_strings.getGlobalCSSTooltip(),position:"left",className:"canvasArg__tooltip"},external_kbnSharedDeps_React_default.a.createElement("span",null,workpad_config_component_strings.getGlobalCSSLabel()))},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__accordionContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextArea"],{"aria-label":workpad_config_component_strings.getGlobalCSSTooltip(),value:css,compressed:true,onChange:e=>setCSS(e.target.value),rows:10}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",onClick:()=>setWorkpadCSS(css||constants["q"])},workpad_config_component_strings.getApplyStylesheetButtonLabel()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"})))))};const workpad_config_mapStateToProps=state=>{const workpad=getWorkpad(state);return{name:Object(external_kbnSharedDeps_Lodash_["get"])(workpad,"name"),size:{width:Object(external_kbnSharedDeps_Lodash_["get"])(workpad,"width"),height:Object(external_kbnSharedDeps_Lodash_["get"])(workpad,"height")},css:Object(external_kbnSharedDeps_Lodash_["get"])(workpad,"css",constants["q"]),variables:Object(external_kbnSharedDeps_Lodash_["get"])(workpad,"variables",[])}};const workpad_config_mapDispatchToProps={setSize:sizeWorkpad,setName:workpad_setName,setWorkpadCSS:workpad_setWorkpadCSS,setWorkpadVariables:vars=>updateWorkpadVariables(vars)};const workpad_config_WorkpadConfig=Object(lib["connect"])(workpad_config_mapStateToProps,workpad_config_mapDispatchToProps)(WorkpadConfig);const SidebarSection=({children:children})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__panel"},children);const GlobalConfig=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(SidebarSection,null,external_kbnSharedDeps_React_default.a.createElement(workpad_config_WorkpadConfig,null),external_kbnSharedDeps_React_default.a.createElement(element_config_ElementConfig,null)),external_kbnSharedDeps_React_default.a.createElement(SidebarSection,null,external_kbnSharedDeps_React_default.a.createElement(page_config_PageConfig,null)));function render_to_dom_extends(){render_to_dom_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return render_to_dom_extends.apply(this,arguments)}const RenderToDom=({render:render,style:style})=>{const ref=Object(external_kbnSharedDeps_React_["useCallback"])(node=>{if(node!==null){render(node)}},[render]);return external_kbnSharedDeps_React_default.a.createElement("div",render_to_dom_extends({className:"render_to_dom"},{ref:ref,style:style}))};var expression_form_handlers=__webpack_require__(53);class BaseForm{constructor(props){if(!props.name){throw new Error("Expression specs require a name property")}this.name=props.name;this.displayName=props.displayName||this.name;this.help=props.help||""}}function datasource_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const defaultTemplate=()=>external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("p",null,"This datasource has no interface. Use the expression editor to make changes."));class datasource_DatasourceWrapper extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args);datasource_defineProperty(this,"callRenderFn",()=>{const{spec:spec,datasourceProps:datasourceProps,handlers:handlers}=this.props;const{template:template}=spec;template(this.domNode,datasourceProps,handlers)})}componentDidUpdate(){this.callRenderFn()}componentWillUnmount(){this.props.handlers.destroy()}render(){return external_kbnSharedDeps_React_default.a.createElement(RenderToDom,{render:domNode=>{this.domNode=domNode;this.callRenderFn()}})}}class datasource_Datasource extends BaseForm{constructor(props){super(props);this.template=props.template||defaultTemplate;this.image=props.image}render(props={}){const expressionFormHandlers=new expression_form_handlers["a"];return external_kbnSharedDeps_React_default.a.createElement(datasource_DatasourceWrapper,{spec:this,handlers:expressionFormHandlers,datasourceProps:props})}}class datasource_DatasourceRegistry extends common["Registry"]{wrapper(obj){return new datasource_Datasource(obj)}}const datasourceRegistry=new datasource_DatasourceRegistry;var popover=__webpack_require__(47);const ArgAdd=({onValueAdd:onValueAdd=(()=>{}),displayName:displayName,help:help})=>external_kbnSharedDeps_React_default.a.createElement("button",{className:"canvasArg__add",onClick:onValueAdd},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{compressed:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,displayName),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,external_kbnSharedDeps_React_default.a.createElement("small",null,help))));const{ArgAddPopover:arg_add_popover_strings}=i18n["e"];const ArgAddPopover=({options:options})=>{const button=handleClick=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"plusInCircle","aria-label":arg_add_popover_strings.getAddAriaLabel(),onClick:handleClick,className:"canvasArg__addArg"});return external_kbnSharedDeps_React_default.a.createElement(popover["a"],{id:"arg-add-popover",panelClassName:"canvasArg__addPopover",panelPaddingSize:"none",button:button},({closePopover:closePopover})=>options.map(opt=>external_kbnSharedDeps_React_default.a.createElement(ArgAdd,{key:`${opt.arg.name}-add`,displayName:opt.arg.displayName,help:opt.arg.help,onValueAdd:()=>{opt.onValueAdd();closePopover()}})))};const SidebarSectionTitle=({title:title,tip:tip,children:children})=>{const formattedTitle=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xxxs",className:"canvasSidebar__panelTitleHeading"},external_kbnSharedDeps_React_default.a.createElement("h4",null,title));const renderTitle=()=>{if(tip){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"left",content:tip},formattedTitle)}return formattedTitle};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:"canvasSidebar__panelTitle",gutterSize:"xs",alignItems:"center",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},renderTitle(tip)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},children))};var error_boundary=__webpack_require__(231);var tooltip_icon=__webpack_require__(254);const{ArgFormArgSimpleForm:arg_simple_form_strings}=i18n["e"];const ArgSimpleForm=({children:children,required:required,valueMissing:valueMissing,onRemove:onRemove})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s",className:"canvasArg__form"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,children),valueMissing&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(tooltip_icon["b"],{position:"left",icon:tooltip_icon["a"].error,content:arg_simple_form_strings.getRequiredTooltip()})),!required&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:arg_simple_form_strings.getRemoveAriaLabel()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{color:"subdued",onClick:onRemove,iconType:"cross",iconSize:"s","aria-label":arg_simple_form_strings.getRemoveAriaLabel(),className:"canvasArg__remove"})));function arg_template_form_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class arg_template_form_ArgTemplateFormComponent extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args);arg_template_form_defineProperty(this,"_domNode",null);arg_template_form_defineProperty(this,"_renderTemplate",domNode=>{const{template:template,argumentProps:argumentProps,handlers:handlers}=this.props;if(template){return template(domNode,argumentProps,handlers)}});arg_template_form_defineProperty(this,"_renderErrorTemplate",()=>{const{errorTemplate:errorTemplate,argumentProps:argumentProps}=this.props;return external_kbnSharedDeps_React_default.a.createElement(errorTemplate,argumentProps)})}UNSAFE_componentWillUpdate(prevProps){if(this.props.error!==prevProps.error){this.props.handlers.destroy()}}componentDidUpdate(){if(this.props.error){return this._renderErrorTemplate()}this._renderTemplate(this._domNode)}componentWillUnmount(){this.props.handlers.destroy()}render(){const{template:template,error:error}=this.props;if(error){return this._renderErrorTemplate()}if(!template){return null}return external_kbnSharedDeps_React_default.a.createElement(RenderToDom,{render:domNode=>{this._domNode=domNode;this._renderTemplate(domNode)}})}}const ArgTemplateForm=Object(Recompose["compose"])(Object(Recompose["withPropsOnChange"])(()=>false,()=>({expressionFormHandlers:new expression_form_handlers["a"]})),Object(Recompose["withProps"])(({handlers:handlers,expressionFormHandlers:expressionFormHandlers})=>({handlers:Object.assign(expressionFormHandlers,handlers)})))(arg_template_form_ArgTemplateFormComponent);const{ArgFormSimpleFailure:simple_failure_strings}=i18n["e"];const SimpleFailure=()=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasArg--error canvasArg--error-simple"},external_kbnSharedDeps_React_default.a.createElement(tooltip_icon["b"],{position:"left",icon:tooltip_icon["a"].warning,content:simple_failure_strings.getFailureTooltip()}));var stateful_prop=__webpack_require__(221);const{ArgFormAdvancedFailure:advanced_failure_strings}=i18n["e"];const AdvancedFailureComponent=props=>{const{onValueChange:onValueChange,defaultValue:defaultValue,argExpression:argExpression,updateArgExpression:updateArgExpression,resetErrorState:resetErrorState,valid:valid,argId:argId}=props;const valueChange=ev=>{ev.preventDefault();resetErrorState();if(valid){return onValueChange(Object(common["fromExpression"])(argExpression.trim(),"argument"))}};const confirmReset=ev=>{ev.preventDefault();resetErrorState();onValueChange(Object(common["fromExpression"])(defaultValue,"argument"))};return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{display:"rowCompressed",id:argId,isInvalid:!valid,error:advanced_failure_strings.getRowErrorMessage()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextArea"],{id:argId,isInvalid:!valid,value:argExpression,compressed:true,onChange:updateArgExpression,rows:3})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{disabled:!valid,onClick:e=>valueChange(e),size:"s",type:"submit"},advanced_failure_strings.getApplyButtonLabel()),defaultValue&&defaultValue.length&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",color:"danger",onClick:confirmReset},advanced_failure_strings.getResetButtonLabel())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))};const AdvancedFailure=Object(Recompose["compose"])(Object(Recompose["withProps"])(({argValue:argValue})=>({argExpression:Object(common["toExpression"])(argValue,"argument")})),Object(stateful_prop["a"])("argExpression","updateArgExpression"),Object(Recompose["withPropsOnChange"])(["argExpression"],({argExpression:argExpression})=>({valid:function(){try{Object(common["fromExpression"])(argExpression,"argument");return true}catch(e){return false}}()})))(AdvancedFailureComponent);AdvancedFailure.propTypes={argValue:prop_types_default.a.any.isRequired};const ArgLabel=props=>{const{argId:argId,className:className,label:label,help:help,expandable:expandable,children:children,simpleArg:simpleArg,initialIsOpen:initialIsOpen}=props;return external_kbnSharedDeps_React_default.a.createElement("div",{className:`canvasArg--header${className&&` ${className}`}`},expandable?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:`accordion-${argId}`,className:"canvasSidebar__accordion",buttonContent:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:help,position:"left",className:"canvasArg__tooltip"},external_kbnSharedDeps_React_default.a.createElement("span",null,label)),extraAction:simpleArg,initialIsOpen:initialIsOpen},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__accordionContent"},children)):simpleArg&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{display:"columnCompressed",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:help},external_kbnSharedDeps_React_default.a.createElement("span",null,label," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"iInCircle",color:"subdued"}))),id:argId},simpleArg))};var loading_loading=__webpack_require__(232);const{ArgFormPendingArgValue:pending_arg_value_strings}=i18n["e"];class pending_arg_value_PendingArgValue extends external_kbnSharedDeps_React_default.a.PureComponent{componentDidMount(){const{setResolvedArgValue:setResolvedArgValue,templateProps:templateProps}=this.props;const{argResolver:argResolver,argValue:argValue}=templateProps;if(argValue==null){setResolvedArgValue(null)}else{argResolver(argValue).then(val=>setResolvedArgValue(val!=null?val:null)).catch(()=>setResolvedArgValue(null))}}render(){const{label:label,argTypeInstance:argTypeInstance}=this.props;return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasArg"},external_kbnSharedDeps_React_default.a.createElement(ArgLabel,{className:"resolve-pending",label:label,help:argTypeInstance.help,expandable:false},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasArg--pending"},external_kbnSharedDeps_React_default.a.createElement(loading_loading["a"],{animated:true,text:pending_arg_value_strings.getLoadingMessage()}))))}}const branches=[Object(Recompose["branch"])(({argTypeInstance:argTypeInstance,resolvedArgValue:resolvedArgValue})=>{const{argType:argType}=argTypeInstance;if(!argType.resolveArgValue){return false}return typeof resolvedArgValue==="undefined"},Object(Recompose["renderComponent"])(pending_arg_value_PendingArgValue))];class arg_form_ArgFormComponent extends external_kbnSharedDeps_React_["PureComponent"]{componentDidMount(){this._isMounted=true}componentWillUnmount(){this._isMounted=false}render(){const{argId:argId,argTypeInstance:argTypeInstance,templateProps:templateProps,valueMissing:valueMissing,label:label,setLabel:setLabel,onValueRemove:onValueRemove,workpad:workpad,assets:assets,renderError:renderError,setRenderError:setRenderError,resolvedArgValue:resolvedArgValue}=this.props;return external_kbnSharedDeps_React_default.a.createElement(error_boundary["a"],null,({error:error,resetErrorState:resetErrorState})=>{const{template:template,simpleTemplate:simpleTemplate}=argTypeInstance.argType;const hasError=Boolean(error)||renderError;const argumentProps={...templateProps,resolvedArgValue:resolvedArgValue,defaultValue:argTypeInstance.default,renderError:()=>{Promise.resolve().then(()=>{this._isMounted&&setRenderError(true)})},error:hasError,setLabel:label=>this._isMounted&&setLabel(label),resetErrorState:()=>{resetErrorState();this._isMounted&&setRenderError(false)},label:label,workpad:workpad,argId:argId,assets:assets};const expandableLabel=Boolean(hasError||template);const simpleArg=external_kbnSharedDeps_React_default.a.createElement(ArgSimpleForm,{required:argTypeInstance.required,valueMissing:valueMissing,onRemove:onValueRemove},external_kbnSharedDeps_React_default.a.createElement(ArgTemplateForm,{template:simpleTemplate,errorTemplate:SimpleFailure,error:hasError,argumentProps:argumentProps}));const extendedArg=external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasArg--controls"},external_kbnSharedDeps_React_default.a.createElement(ArgTemplateForm,{template:template,errorTemplate:AdvancedFailure,error:hasError,argumentProps:argumentProps}));return external_kbnSharedDeps_React_default.a.createElement("div",{className:`canvasArg ${expandableLabel?"canvasSidebar__expandable":null}`},external_kbnSharedDeps_React_default.a.createElement(ArgLabel,{className:"resolved",argId:argId,label:label,help:argTypeInstance.help,expandable:expandableLabel,simpleArg:simpleArg,initialIsOpen:!simpleTemplate},extendedArg))})}}const ArgForm=Object(Recompose["compose"])(...branches)(arg_form_ArgFormComponent);const arg_form_ArgForm=Object(Recompose["compose"])(Object(Recompose["withState"])("label","setLabel",({label:label,argTypeInstance:argTypeInstance})=>label||argTypeInstance.displayName||argTypeInstance.name),Object(Recompose["withState"])("resolvedArgValue","setResolvedArgValue"),Object(Recompose["withState"])("renderError","setRenderError",false),Object(Recompose["lifecycle"])({componentDidUpdate(prevProps){if(prevProps.templateProps.argValue!==this.props.templateProps.argValue){this.props.setRenderError(false);this.props.setResolvedArgValue()}}}),Object(lib["connect"])(state=>({workpad:getWorkpadInfo(state),assets:getAssets(state)})))(ArgForm);arg_form_ArgForm.propTypes={label:prop_types_default.a.string,argTypeInstance:prop_types_default.a.shape({name:prop_types_default.a.string.isRequired,displayName:prop_types_default.a.string,expanded:prop_types_default.a.bool}).isRequired};class arg_type_ArgType extends BaseForm{constructor(props){super(props);this.simpleTemplate=props.simpleTemplate;this.template=props.template;this.default=props.default;this.resolveArgValue=Boolean(props.resolveArgValue)}}class arg_type_ArgTypeRegistry extends common["Registry"]{wrapper(obj){return new arg_type_ArgType(obj)}}const argTypeRegistry=new arg_type_ArgTypeRegistry;class arg_Arg{constructor(props){const argType=argTypeRegistry.get(props.argType);if(!argType){throw new Error(`Invalid arg type: ${props.argType}`)}if(!props.name){throw new Error("Args must have a name property")}const defaultProps={multi:false,required:false,types:[],default:argType.default!=null?argType.default:null,options:{},resolve:()=>({})};const viewOverrides={argType:argType,...Object(external_kbnSharedDeps_Lodash_["pick"])(props,["name","displayName","help","multi","required","types","default","resolve","options"])};Object.assign(this,defaultProps,argType,viewOverrides)}render({onValueChange:onValueChange,onValueRemove:onValueRemove,argValue:argValue,key:key,label:label,...otherProps}){const templateProps={...otherProps,...this.resolve(otherProps),onValueChange:onValueChange,argValue:argValue,typeInstance:this};const formProps={key:key,argTypeInstance:this,valueMissing:this.required&&argValue==null,label:label,onValueChange:onValueChange,onValueRemove:onValueRemove,templateProps:templateProps,argId:key};return Object(external_kbnSharedDeps_React_["createElement"])(arg_form_ArgForm,formProps)}}class function_form_FunctionForm extends BaseForm{constructor(props){super({...props});this.args=props.args||[];this.resolve=props.resolve||(()=>({}))}renderArg(props,dataArg){const{onValueRemove:onValueRemove,onValueChange:onValueChange,...passedProps}=props;const{arg:arg,argValues:argValues,skipRender:skipRender,label:label}=dataArg;const{argType:argType,expressionIndex:expressionIndex}=passedProps;if(!arg||skipRender){return null}const renderArgWithProps=(argValue,valueIndex)=>arg.render({key:`${argType}-${expressionIndex}-${arg.name}-${valueIndex}`,...passedProps,label:label,valueIndex:valueIndex,argValue:argValue,onValueChange:onValueChange(arg.name,valueIndex),onValueRemove:onValueRemove(arg.name,valueIndex)});if(!argValues&&arg.required){return renderArgWithProps({type:undefined,value:""},0)}return argValues&&argValues.map(renderArgWithProps)}getAddableArg(props,dataArg){const{onValueAdd:onValueAdd}=props;const{arg:arg,argValues:argValues,skipRender:skipRender}=dataArg;if(!arg||arg.required||skipRender){return null}if(argValues&&!arg.multi){return null}const value=arg.default==null?null:Object(common["fromExpression"])(arg.default,"argument");return{arg:arg,onValueAdd:onValueAdd(arg.name,value)}}resolveArg(){return{}}render(data={}){const{args:args,argTypeDef:argTypeDef}=data;const argInstances=this.args.map(argSpec=>new arg_Arg(argSpec));if(!Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(args)){throw new Error(`Form "${this.name}" expects "args" object`)}const argNames=Object(external_kbnSharedDeps_Lodash_["uniq"])(argInstances.map(arg=>arg.name).concat(Object.keys(args)));const dataArgs=argNames.map(argName=>{const arg=argInstances.find(arg=>arg.name===argName);const isMulti=arg&&arg.multi;const argValues=args[argName]&&!isMulti?[Object(external_kbnSharedDeps_Lodash_["last"])(args[argName])]:args[argName];return{arg:arg,argValues:argValues}});const props={...data,...this.resolve(data),typeInstance:this};try{const resolvedDataArgs=dataArgs.map(d=>({...d,...this.resolveArg(d,props)}));const argumentForms=Object(external_kbnSharedDeps_Lodash_["compact"])(resolvedDataArgs.map(d=>this.renderArg(props,d)));const addableArgs=Object(external_kbnSharedDeps_Lodash_["compact"])(resolvedDataArgs.map(d=>this.getAddableArg(props,d)));if(!addableArgs.length&&!argumentForms.length){return null}return external_kbnSharedDeps_React_default.a.createElement(SidebarSection,null,external_kbnSharedDeps_React_default.a.createElement(SidebarSectionTitle,{title:argTypeDef.displayName,tip:argTypeDef.help},addableArgs.length===0?null:external_kbnSharedDeps_React_default.a.createElement(ArgAddPopover,{options:addableArgs})),argumentForms)}catch(e){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"danger",iconType:"cross",title:"Expression rendering error"},external_kbnSharedDeps_React_default.a.createElement("p",null,e.message))}}}class transform_Transform extends function_form_FunctionForm{constructor(props){super(props);const propNames=["requiresContext"];const defaultProps={requiresContext:true};Object.assign(this,defaultProps,Object(external_kbnSharedDeps_Lodash_["pick"])(props,propNames))}}class transform_TransformRegistry extends common["Registry"]{wrapper(obj){return new transform_Transform(obj)}}const transformRegistry=new transform_TransformRegistry;const NO_NEXT_EXP="no next expression";const MISSING_MODEL_ARGS="missing model args";function getModelArgs(expressionType){if(!expressionType){return NO_NEXT_EXP}if(!expressionType.modelArgs){return MISSING_MODEL_ARGS}return expressionType.modelArgs.length>0?expressionType.modelArgs:MISSING_MODEL_ARGS}class model_Model extends function_form_FunctionForm{constructor(props){super(props);const propNames=["requiresContext"];const defaultProps={requiresContext:true};Object.assign(this,defaultProps,Object(external_kbnSharedDeps_Lodash_["pick"])(props,propNames))}resolveArg(dataArg,props){const{nextExpressionType:nextExpressionType}=props;const modelArgs=getModelArgs(nextExpressionType);if(modelArgs===NO_NEXT_EXP||modelArgs===MISSING_MODEL_ARGS){return{skipRender:false}}const argName=Object(external_kbnSharedDeps_Lodash_["get"])(dataArg,"arg.name");const modelArg=modelArgs.find(modelArg=>{if(Array.isArray(modelArg)){return modelArg[0]===argName}return modelArg===argName});return{label:Array.isArray(modelArg)?Object(external_kbnSharedDeps_Lodash_["get"])(modelArg[1],"label"):null,skipRender:!modelArg}}}class model_ModelRegistry extends common["Registry"]{wrapper(obj){return new model_Model(obj)}}const modelRegistry=new model_ModelRegistry;class view_View extends function_form_FunctionForm{constructor(props){super(props);const propNames=["help","modelArgs","requiresContext"];const defaultProps={help:`Element: ${props.name}`,requiresContext:true};Object.assign(this,defaultProps,Object(external_kbnSharedDeps_Lodash_["pick"])(props,propNames));this.modelArgs=this.modelArgs||[];if(!Array.isArray(this.modelArgs)){throw new Error(`${this.name} element is invalid, modelArgs must be an array`)}}}class view_ViewRegistry extends common["Registry"]{wrapper(obj){return new view_View(obj)}}const viewRegistry=new view_ViewRegistry;const{DatasourceNoDatasource:no_datasource_strings}=i18n["e"];const NoDatasource=()=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasDataSource__section"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:no_datasource_strings.getPanelTitle(),iconType:"iInCircle"},external_kbnSharedDeps_React_default.a.createElement("p",null,no_datasource_strings.getPanelDescription())));var es_service=__webpack_require__(227);const DatasourceSelector=({onSelect:onSelect,datasources:datasources,current:current})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasDataSource__list"},datasources.map(d=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCard"],{key:d.name,title:d.displayName,titleElement:"h5",titleSize:"xs",icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:d.image,size:"l"}),description:d.help,layout:"horizontal",className:"canvasDataSource__card",selectable:{isSelected:d.name===current?true:false,onClick:()=>onSelect(d.name)}})));var components_datatable=__webpack_require__(113);var components_error=__webpack_require__(111);const{DatasourceDatasourcePreview:datasource_preview_strings}=i18n["e"];const{DatasourceDatasourceComponent:datasourceStrings}=i18n["e"];const DatasourcePreview=({done:done,datatable:datatable})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],{onClose:done,maxWidth:"1000px",className:"canvasModal--fixedSize"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,datasource_preview_strings.getModalTitle())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],{className:"canvasDatasourcePreview"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.canvas.datasourceDatasourcePreview.modalDescription",defaultMessage:"The following data will be available to the selected element upon clicking {saveLabel} in the sidebar.",values:{saveLabel:external_kbnSharedDeps_React_default.a.createElement("strong",null,datasourceStrings.getSaveButtonLabel())}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),datatable.type==="error"?external_kbnSharedDeps_React_default.a.createElement(components_error["a"],{payload:datatable}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{className:"canvasDatasourcePreview__panel",paddingSize:"none"},datatable.rows.length>0?external_kbnSharedDeps_React_default.a.createElement(components_datatable["a"],{datatable:datatable,showHeader:true,paginate:true}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement("h2",null,datasource_preview_strings.getEmptyTitle()),titleSize:"s",body:external_kbnSharedDeps_React_default.a.createElement("p",null,datasource_preview_strings.getEmptyFirstLineDescription(),external_kbnSharedDeps_React_default.a.createElement("br",null),datasource_preview_strings.getEmptySecondLineDescription())}))));const datasource_preview_DatasourcePreview=Object(Recompose["compose"])(Recompose["pure"],Object(Recompose["withState"])("datatable","setDatatable"),Object(Recompose["lifecycle"])({componentDidMount(){interpretAst({type:"expression",chain:[this.props.function]},{}).then(this.props.setDatatable)}}),Object(Recompose["branch"])(({datatable:datatable})=>!datatable,Object(Recompose["renderComponent"])(loading_loading["a"])))(DatasourcePreview);datasource_preview_DatasourcePreview.propTypes={function:prop_types["PropTypes"].object};function datasource_component_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const{DatasourceDatasourceComponent:datasource_component_strings}=i18n["e"];class datasource_component_DatasourceComponent extends external_kbnSharedDeps_React_["PureComponent"]{constructor(..._args){super(..._args);datasource_component_defineProperty(this,"state",{defaultIndex:""});datasource_component_defineProperty(this,"getDatasourceFunctionNode",(name,args)=>({arguments:args,function:name,type:"function"}));datasource_component_defineProperty(this,"setSelectedDatasource",value=>{const{datasource:datasource,resetArgs:resetArgs,updateArgs:updateArgs,selectDatasource:selectDatasource,datasources:datasources,setSelecting:setSelecting}=this.props;if(datasource.name===value){resetArgs&&resetArgs()}else{updateArgs&&updateArgs({})}selectDatasource&&selectDatasource(datasources.find(d=>d.name===value));setSelecting(false)});datasource_component_defineProperty(this,"save",()=>{const{stateDatasource:stateDatasource,stateArgs:stateArgs,setDatasourceAst:setDatasourceAst}=this.props;const datasourceAst=this.getDatasourceFunctionNode(stateDatasource.name,stateArgs);setDatasourceAst&&setDatasourceAst(datasourceAst)})}componentDidMount(){Object(es_service["a"])().then(defaultIndex=>this.setState({defaultIndex:defaultIndex}))}componentDidUpdate(prevProps){const{args:args,resetArgs:resetArgs,datasource:datasource,selectDatasource:selectDatasource}=this.props;if(!Object(external_kbnSharedDeps_Lodash_["isEqual"])(prevProps.args,args)){resetArgs()}if(!Object(external_kbnSharedDeps_Lodash_["isEqual"])(prevProps.datasource,datasource)){selectDatasource(datasource)}}render(){const{datasources:datasources,datasourceDef:datasourceDef,stateDatasource:stateDatasource,stateArgs:stateArgs,updateArgs:updateArgs,selecting:selecting,setSelecting:setSelecting,previewing:previewing,setPreviewing:setPreviewing,isInvalid:isInvalid,setInvalid:setInvalid}=this.props;const{defaultIndex:defaultIndex}=this.state;if(selecting){return external_kbnSharedDeps_React_default.a.createElement(DatasourceSelector,{datasources:datasources,onSelect:this.setSelectedDatasource,current:stateDatasource.name})}const datasourcePreview=previewing?external_kbnSharedDeps_React_default.a.createElement(datasource_preview_DatasourcePreview,{show:previewing,done:()=>setPreviewing(false),function:this.getDatasourceFunctionNode(stateDatasource.name,stateArgs)}):null;const datasourceRender=()=>stateDatasource.render({args:stateArgs,updateArgs:updateArgs,datasourceDef:datasourceDef,isInvalid:isInvalid,setInvalid:setInvalid,defaultIndex:defaultIndex});const hasExpressionArgs=Object.values(stateArgs).some(a=>a&&typeof a[0]==="object");return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasDataSource__section"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconSide:"right",iconType:"arrowRight",onClick:()=>setSelecting(!selecting),className:"canvasDataSource__triggerButton",flush:"left",size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:stateDatasource.image,className:"canvasDataSource__triggerButtonIcon"}),stateDatasource.displayName),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),!hasExpressionArgs?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,datasourceRender(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",onClick:()=>setPreviewing(true)},datasource_component_strings.getPreviewButtonLabel())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{disabled:isInvalid,size:"s",onClick:this.save,fill:true,color:"secondary"},datasource_component_strings.getSaveButtonLabel())))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"warning"},external_kbnSharedDeps_React_default.a.createElement("p",null,datasource_component_strings.getExpressionArgDescription()))),datasourcePreview)}}const datasource_branches=[Object(Recompose["branch"])(({datasource:datasource,stateDatasource:stateDatasource})=>!datasource||!stateDatasource,Object(Recompose["renderComponent"])(NoDatasource))];const datasource_datasource_Datasource=Object(Recompose["compose"])(...datasource_branches)(datasource_component_DatasourceComponent);datasource_datasource_Datasource.propTypes={args:prop_types_default.a.object,datasource:prop_types_default.a.object,unknownArgs:prop_types_default.a.array};const datasource_mapStateToProps=state=>({element:getSelectedElement(state),pageId:getSelectedPage(state),functionDefinitions:getServerFunctions(state)});const datasource_mapDispatchToProps=dispatch=>({dispatchArgumentAtIndex:props=>arg=>dispatch(setArgumentAtIndex({...props,arg:arg})),dispatchAstAtIndex:({index:index,element:element,pageId:pageId})=>ast=>{dispatch(flushContext(element.id));dispatch(setAstAtIndex(index,ast,element,pageId))}});const datasource_mergeProps=(stateProps,dispatchProps,ownProps)=>{const{element:element,pageId:pageId,functionDefinitions:functionDefinitions}=stateProps;const{dispatchArgumentAtIndex:dispatchArgumentAtIndex,dispatchAstAtIndex:dispatchAstAtIndex}=dispatchProps;const getDataTableFunctionsByName=name=>functionDefinitions.find(fn=>fn.name===name&&fn.type==="datatable");const datasourceAst=Object(external_kbnSharedDeps_Lodash_["get"])(element,"ast.chain",[]).map((astDef,i)=>{if(astDef.type!=="function"){return}const args=astDef.arguments;const datasource=datasourceRegistry.get(astDef.function);if(!datasource){return}const datasourceDef=getDataTableFunctionsByName(datasource.name);return{datasource:datasource,datasourceDef:datasourceDef,args:args,expressionIndex:i}}).filter(Boolean)[0];return{...ownProps,...stateProps,...dispatchProps,...datasourceAst,datasources:datasourceRegistry.toArray(),setDatasourceAst:dispatchAstAtIndex({pageId:pageId,element:element,index:datasourceAst&&datasourceAst.expressionIndex}),setDatasourceArgs:dispatchArgumentAtIndex({pageId:pageId,element:element,index:datasourceAst&&datasourceAst.expressionIndex})}};const components_datasource_Datasource=Object(Recompose["compose"])(Object(lib["connect"])(datasource_mapStateToProps,datasource_mapDispatchToProps,datasource_mergeProps),Object(Recompose["withState"])("stateArgs","updateArgs",({args:args})=>args),Object(Recompose["withState"])("selecting","setSelecting",false),Object(Recompose["withState"])("previewing","setPreviewing",false),Object(Recompose["withState"])("isInvalid","setInvalid",false),Object(Recompose["withState"])("stateDatasource","selectDatasource",({datasource:datasource})=>datasource),Object(Recompose["withHandlers"])({resetArgs:({updateArgs:updateArgs,args:args})=>()=>updateArgs(args)}))(datasource_datasource_Datasource);components_datasource_Datasource.propTypes={done:prop_types["PropTypes"].func};const expressionTypes=["view","model","transform","datasource"];function findExpressionType(name,type){const checkTypes=expressionTypes.filter(expressionType=>type==null||expressionType===type);const matches=checkTypes.reduce((acc,checkType)=>{let expression;switch(checkType){case"view":expression=viewRegistry.get(name);return!expression?acc:acc.concat(expression);case"model":expression=modelRegistry.get(name);return!expression?acc:acc.concat(expression);case"transform":expression=transformRegistry.get(name);return!expression?acc:acc.concat(expression);default:return acc}},[]);if(matches.length>1){throw new Error(`Found multiple expressions with name "${name}"`)}return matches[0]||null}const findExistingAsset=(type,content,assets)=>{const existingId=Object.keys(assets).find(assetId=>assets[assetId].type===type&&assets[assetId].value===content);return existingId};const FunctionFormComponent=props=>{const passedProps={argResolver:props.argResolver,args:props.args,argType:props.argType,argTypeDef:props.argTypeDef,filterGroups:props.filterGroups,context:props.context,expressionIndex:props.expressionIndex,expressionType:props.expressionType,nextArgType:props.nextArgType,nextExpressionType:props.nextExpressionType,onAssetAdd:props.onAssetAdd,onValueAdd:props.onValueAdd,onValueChange:props.onValueChange,onValueRemove:props.onValueRemove};return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasFunctionForm"},props.expressionType.render(passedProps))};const{FunctionFormFunctionUnknown:function_unknown_strings}=i18n["e"];const FunctionUnknown=({argType:argType})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasFunctionForm canvasFunctionForm--unknown-expression"},function_unknown_strings.getUnknownArgumentTypeErrorMessage(argType));function function_form_context_pending_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class function_form_context_pending_FunctionFormContextPending extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args);function_form_context_pending_defineProperty(this,"fetchContext",(props,force=false)=>{const{expressionType:expressionType,context:context,updateContext:updateContext}=props;if(force||context==null&&expressionType.requiresContext){updateContext()}})}componentDidMount(){this.fetchContext(this.props)}UNSAFE_componentWillReceiveProps(newProps){const oldContext=this.props.contextExpression;const newContext=newProps.contextExpression;const forceUpdate=newProps.expressionType.requiresContext&&oldContext!==newContext;this.fetchContext(newProps,forceUpdate)}render(){return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasFunctionForm canvasFunctionForm--loading"},external_kbnSharedDeps_React_default.a.createElement(loading_loading["a"],null))}}const{FunctionFormContextError:function_form_context_error_strings}=components["a"];const FunctionFormContextError=({context:context})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasFunctionForm canvasFunctionForm--error"},function_form_context_error_strings.getContextErrorMessage(context.error));function checkState(state){return({context:context,expressionType:expressionType})=>{const matchState=!context||context.state===state;return expressionType&&expressionType.requiresContext&&matchState}}const function_form_branches=[Object(Recompose["branch"])(props=>!props.expressionType,Object(Recompose["renderComponent"])(FunctionUnknown)),Object(Recompose["branch"])(checkState("pending"),Object(Recompose["renderComponent"])(function_form_context_pending_FunctionFormContextPending)),Object(Recompose["branch"])(checkState("error"),Object(Recompose["renderComponent"])(FunctionFormContextError))];const function_form_function_form_FunctionForm=Object(Recompose["compose"])(...function_form_branches)(FunctionFormComponent);function_form_function_form_FunctionForm.propTypes={context:prop_types_default.a.object,expressionType:prop_types_default.a.object};const function_form_mapStateToProps=(state,{expressionIndex:expressionIndex})=>({context:getContextForIndex(state,expressionIndex),element:getSelectedElement(state),pageId:getSelectedPage(state),assets:getAssets(state),filterGroups:getGlobalFilterGroups(state)});const function_form_mapDispatchToProps=(dispatch,{expressionIndex:expressionIndex})=>({addArgument:(element,pageId)=>(argName,argValue)=>()=>{dispatch(addArgumentValueAtIndex({index:expressionIndex,element:element,pageId:pageId,argName:argName,value:argValue}))},updateContext:element=>()=>dispatch(fetchContext(expressionIndex,element)),setArgument:(element,pageId)=>(argName,valueIndex)=>value=>{dispatch(setArgumentAtIndex({index:expressionIndex,element:element,pageId:pageId,argName:argName,value:value,valueIndex:valueIndex}))},deleteArgument:(element,pageId)=>(argName,argIndex)=>()=>{dispatch(deleteArgumentAtIndex({index:expressionIndex,element:element,pageId:pageId,argName:argName,argIndex:argIndex}))},onAssetAdd:(type,content)=>{const assetId=Object(get_id["a"])("asset");dispatch(createAsset(type,content,assetId));return assetId}});const function_form_mergeProps=(stateProps,dispatchProps,ownProps)=>{const{element:element,pageId:pageId,assets:assets}=stateProps;const{argType:argType,nextArgType:nextArgType}=ownProps;const{updateContext:updateContext,setArgument:setArgument,addArgument:addArgument,deleteArgument:deleteArgument,onAssetAdd:onAssetAdd,...dispatchers}=dispatchProps;return{...stateProps,...dispatchers,...ownProps,updateContext:updateContext(element),expressionType:findExpressionType(argType),nextExpressionType:nextArgType?findExpressionType(nextArgType):nextArgType,onValueChange:setArgument(element,pageId),onValueAdd:addArgument(element,pageId),onValueRemove:deleteArgument(element,pageId),onAssetAdd:(type,content)=>{const existingId=findExistingAsset(type,content,assets);if(existingId){return existingId}return onAssetAdd(type,content)}}};const components_function_form_FunctionForm=Object(lib["connect"])(function_form_mapStateToProps,function_form_mapDispatchToProps,function_form_mergeProps)(function_form_function_form_FunctionForm);components_function_form_FunctionForm.propTypes={expressionIndex:prop_types_default.a.number,argType:prop_types_default.a.string,nextArgType:prop_types_default.a.string};function function_form_list_extends(){function_form_list_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return function_form_list_extends.apply(this,arguments)}const FunctionFormList=({functionFormItems:functionFormItems})=>{const argTypeComponents=functionFormItems.map(functionFormProps=>external_kbnSharedDeps_React_default.a.createElement(components_function_form_FunctionForm,function_form_list_extends({},functionFormProps,{key:`${functionFormProps.argType}-${functionFormProps.expressionIndex}`})));return external_kbnSharedDeps_React_default.a.createElement("div",null,argTypeComponents)};function normalizeContext(chain){if(!Array.isArray(chain)||!chain.length){return null}return{type:"expression",chain:chain}}function getExpression(ast){return ast!=null&&ast.type==="expression"?Object(common["toExpression"])(ast):ast}function getArgTypeDef(fn){return modelRegistry.get(fn)||viewRegistry.get(fn)||transformRegistry.get(fn)}const function_form_list_functionFormItems=Object(Recompose["withProps"])(props=>{const selectedElement=props.element;const FunctionFormChain=Object(external_kbnSharedDeps_Lodash_["get"])(selectedElement,"ast.chain",[]);const FunctionFormListItems=FunctionFormChain.reduce((acc,argType,i)=>{const argTypeDef=getArgTypeDef(argType.function);const prevContext=normalizeContext(acc.context);const nextArg=FunctionFormChain[i+1]||null;if(argTypeDef){const component={args:argType.arguments,argType:argType.function,argTypeDef:argTypeDef,argResolver:argAst=>interpretAst(argAst,prevContext),contextExpression:getExpression(prevContext),expressionIndex:i,nextArgType:nextArg&&nextArg.function};acc.mapped.push(component)}acc.context=acc.context.concat(argType);return acc},{mapped:[],context:[]});return{functionFormItems:FunctionFormListItems.mapped}});const function_form_list_FunctionFormList=Object(Recompose["compose"])(function_form_list_functionFormItems)(FunctionFormList);const{ElementSettings:element_settings_component_strings}=i18n["e"];const ElementSettings=({element:element})=>{const tabs=[{id:"edit",name:element_settings_component_strings.getDisplayTabLabel(),content:external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__pop"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar--args"},external_kbnSharedDeps_React_default.a.createElement(function_form_list_FunctionFormList,{element:element})))},{id:"data",name:element_settings_component_strings.getDataTabLabel(),content:external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__pop"},external_kbnSharedDeps_React_default.a.createElement(components_datasource_Datasource,null))}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTabbedContent"],{tabs:tabs,initialSelectedTab:tabs[0],size:"s"})};const element_settings_mapStateToProps=(state,{selectedElementId:selectedElementId})=>({element:getElementById(state,selectedElementId,getSelectedPage(state))});const renderIfElement=props=>{if(props.element){return external_kbnSharedDeps_React_default.a.createElement(ElementSettings,{element:props.element})}return null};const element_settings_ElementSettings=Object(lib["connect"])(element_settings_mapStateToProps)(renderIfElement);const{SidebarContent:sidebar_content_strings}=i18n["e"];const sidebar_content_mapStateToProps=state=>({selectedToplevelNodes:getSelectedToplevelNodes(state),selectedElementId:getSelectedElementId(state)});const MultiElementSidebar=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(sidebar_header_SidebarHeader,{title:sidebar_content_strings.getMultiElementSidebarTitle()}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(MultiElementSettings,null));const GroupedElementSidebar=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(sidebar_header_SidebarHeader,{title:sidebar_content_strings.getGroupedElementSidebarTitle(),groupIsSelected:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(GroupSettings,null));const SingleElementSidebar=({selectedElementId:selectedElementId})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(sidebar_header_SidebarHeader,{title:sidebar_content_strings.getSingleElementSidebarTitle(),showLayerControls:true}),external_kbnSharedDeps_React_default.a.createElement(element_settings_ElementSettings,{selectedElementId:selectedElementId}));const sidebar_content_branches=[Object(Recompose["branch"])(({selectedToplevelNodes:selectedToplevelNodes})=>selectedToplevelNodes.length>1,Object(Recompose["renderComponent"])(MultiElementSidebar)),Object(Recompose["branch"])(({selectedToplevelNodes:selectedToplevelNodes})=>selectedToplevelNodes.length===1&&selectedToplevelNodes[0].includes("group"),Object(Recompose["renderComponent"])(GroupedElementSidebar)),Object(Recompose["branch"])(({selectedToplevelNodes:selectedToplevelNodes})=>selectedToplevelNodes.length===1,Object(Recompose["renderComponent"])(SingleElementSidebar))];const SidebarContent=Object(Recompose["compose"])(Object(lib["connect"])(sidebar_content_mapStateToProps),...sidebar_content_branches)(GlobalConfig);const Sidebar=({commit:commit})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar"},external_kbnSharedDeps_React_default.a.createElement(SidebarContent,{commit:commit}));var react_beautiful_dnd_cjs=__webpack_require__(362);var style_it=__webpack_require__(233);var style_it_default=__webpack_require__.n(style_it);function dom_preview_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class dom_preview_DomPreview extends external_kbnSharedDeps_React_["PureComponent"]{constructor(...args){super(...args);dom_preview_defineProperty(this,"_container",null);dom_preview_defineProperty(this,"_content",null);dom_preview_defineProperty(this,"_observer",null);dom_preview_defineProperty(this,"_original",null);dom_preview_defineProperty(this,"_updateTimeout",0);dom_preview_defineProperty(this,"update",()=>{if(!this._content||!this._container){return}const currentOriginal=document.querySelector(`#${this.props.elementId}`);const originalChanged=currentOriginal!==this._original;if(originalChanged){if(this._observer){this._observer.disconnect()}this._original=currentOriginal;if(this._original){const slowUpdate=Object(external_kbnSharedDeps_Lodash_["debounce"])(this.update,100);this._observer=new MutationObserver(slowUpdate);const config={attributes:true,childList:true,subtree:true};this._observer.observe(this._original,config)}else{clearTimeout(this._updateTimeout);this._updateTimeout=window.setTimeout(this.update,30);return}}if(!this._original){return}const thumb=this._original.cloneNode(true);thumb.id+="-thumb";const originalStyle=window.getComputedStyle(this._original,null);const originalWidth=parseInt(originalStyle.getPropertyValue("width"),10);const originalHeight=parseInt(originalStyle.getPropertyValue("height"),10);const thumbHeight=this.props.height;const scale=thumbHeight/originalHeight;const thumbWidth=originalWidth*scale;if(this._content.firstChild){this._content.removeChild(this._content.firstChild)}this._content.appendChild(thumb);this._content.style.cssText=`transform: scale(${scale}); transform-origin: top left;`;this._container.style.cssText=`width: ${thumbWidth}px; height: ${thumbHeight}px;`;const originalCanvas=this._original.querySelectorAll("canvas");const thumbCanvas=thumb.querySelectorAll("canvas");if(originalCanvas.length>0){Array.from(originalCanvas).map((img,i)=>{const context=thumbCanvas[i].getContext("2d");if(context){context.drawImage(img,0,0)}})}})}componentDidMount(){this.update()}componentWillUnmount(){clearTimeout(this._updateTimeout);if(this._observer){this._observer.disconnect()}}render(){return external_kbnSharedDeps_React_default.a.createElement("div",{ref:container=>{this._container=container},className:"dom-preview"},external_kbnSharedDeps_React_default.a.createElement("div",{ref:content=>{this._content=content}}))}}const{PagePreviewPageControls:page_controls_strings}=i18n["e"];const PageControls=({pageId:pageId,onRemove:onRemove,onDuplicate:onDuplicate})=>{const handleDuplicate=ev=>{ev.preventDefault();onDuplicate(pageId)};const handleRemove=ev=>{ev.preventDefault();onRemove(pageId)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:"canvasPageManager__controls",gutterSize:"xs",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:page_controls_strings.getClonePageTooltip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"copy","aria-label":page_controls_strings.getClonePageAriaLabel(),onClick:handleDuplicate}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:page_controls_strings.getDeletePageTooltip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{color:"danger",iconType:"trash","aria-label":page_controls_strings.getDeletePageAriaLabel(),onClick:handleRemove}))))};const PagePreview=({isWriteable:isWriteable,page:page,height:height,onDuplicate:onDuplicate,onRemove:onRemove})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasPageManager__pagePreview",style:{backgroundColor:page.style.background}},external_kbnSharedDeps_React_default.a.createElement(dom_preview_DomPreview,{elementId:page.id,height:height}),isWriteable&&external_kbnSharedDeps_React_default.a.createElement(PageControls,{pageId:page.id,onDuplicate:onDuplicate,onRemove:onRemove}));const page_preview_mapStateToProps=state=>({isWriteable:workpad_isWriteable(state)&&app_canUserWrite(state)});const page_preview_mapDispatchToProps=dispatch=>({onDuplicate:id=>dispatch(duplicatePage(id))});const page_preview_PagePreview=Object(lib["connect"])(page_preview_mapStateToProps,page_preview_mapDispatchToProps)(PagePreview);function page_manager_component_extends(){page_manager_component_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return page_manager_component_extends.apply(this,arguments)}function page_manager_component_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const{PageManager:page_manager_component_strings}=i18n["e"];class page_manager_component_PageManager extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);page_manager_component_defineProperty(this,"_isMounted",false);page_manager_component_defineProperty(this,"_activePageRef",null);page_manager_component_defineProperty(this,"_pageListRef",null);page_manager_component_defineProperty(this,"scrollToActivePage",()=>{if(this._activePageRef&&this._pageListRef){if(!this._pageListRef.scrollTo){return}const pageOffset=this._activePageRef.offsetLeft;const{left:pageLeft,right:pageRight,width:pageWidth}=this._activePageRef.getBoundingClientRect();const{left:listLeft,right:listRight,width:listWidth}=this._pageListRef.getBoundingClientRect();if(pageLeft<listLeft){this._pageListRef.scrollTo({left:pageOffset,behavior:"smooth"})}if(pageRight>listRight){this._pageListRef.scrollTo({left:pageOffset-listWidth+pageWidth,behavior:"smooth"})}}});page_manager_component_defineProperty(this,"onConfirmRemove",removeId=>{if(this._isMounted){this.setState({removeId:removeId})}});page_manager_component_defineProperty(this,"resetRemove",()=>this._isMounted&&this.setState({removeId:null}));page_manager_component_defineProperty(this,"doRemove",()=>{const{onPreviousPage:onPreviousPage,onRemovePage:onRemovePage,selectedPage:selectedPage}=this.props;const{removeId:removeId}=this.state;this.resetRemove();if(removeId===selectedPage){onPreviousPage()}if(removeId!==null){onRemovePage(removeId)}});page_manager_component_defineProperty(this,"onDragEnd",({draggableId:pageId,source:source,destination:destination})=>{if(!destination){return}const position=destination.index-source.index;this.props.onMovePage(pageId,position)});page_manager_component_defineProperty(this,"renderPage",(page,i)=>{const{isWriteable:isWriteable,selectedPage:selectedPage,workpadId:workpadId,workpadCSS:workpadCSS}=this.props;const pageNumber=i+1;return external_kbnSharedDeps_React_default.a.createElement(react_beautiful_dnd_cjs["Draggable"],{key:page.id,draggableId:page.id,index:i,isDragDisabled:!isWriteable},provided=>external_kbnSharedDeps_React_default.a.createElement("div",page_manager_component_extends({key:page.id,className:`canvasPageManager__page ${page.id===selectedPage?"canvasPageManager__page-isActive":""}`,ref:el=>{if(page.id===selectedPage){this._activePageRef=el}provided.innerRef(el)}},provided.draggableProps,provided.dragHandleProps),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs",className:"canvasPageManager__pageNumber"},pageNumber)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(Link,{name:"loadWorkpad",params:{id:workpadId,page:pageNumber},"aria-label":page_manager_component_strings.getPageNumberAriaLabel(pageNumber)},style_it_default.a.it(workpadCSS,external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(page_preview_PagePreview,{height:100,page:page,onRemove:this.onConfirmRemove}))))))))});this.state={showTrayPop:true,removeId:null}}componentDidMount(){this._isMounted=true;setTimeout(()=>{this.scrollToActivePage();if(this._isMounted){this.setState({showTrayPop:false})}},1e3)}componentDidUpdate(prevProps){if(prevProps.selectedPage!==this.props.selectedPage){setTimeout(this.scrollToActivePage,0)}}componentWillUnmount(){this._isMounted=false}render(){const{pages:pages,onAddPage:onAddPage,isWriteable:isWriteable}=this.props;const{showTrayPop:showTrayPop,removeId:removeId}=this.state;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"none",className:"canvasPageManager"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"canvasPageManager__pages"},external_kbnSharedDeps_React_default.a.createElement(react_beautiful_dnd_cjs["DragDropContext"],{onDragEnd:this.onDragEnd},external_kbnSharedDeps_React_default.a.createElement(react_beautiful_dnd_cjs["Droppable"],{droppableId:"droppable-page-manager",direction:"horizontal"},provided=>external_kbnSharedDeps_React_default.a.createElement("div",page_manager_component_extends({className:`canvasPageManager__pageList ${showTrayPop?"canvasPageManager--trayPop":""}`,ref:el=>{this._pageListRef=el;provided.innerRef(el)}},provided.droppableProps),pages.map(this.renderPage),provided.placeholder)))),isWriteable&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{anchorClassName:"canvasPageManager__addPageTip",content:page_manager_component_strings.getAddPageTooltip(),position:"left"},external_kbnSharedDeps_React_default.a.createElement("button",{onClick:onAddPage,className:"canvasPageManager__addPage kbn-resetFocusState"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{color:"ghost",type:"plusInCircle",size:"l"}))))),external_kbnSharedDeps_React_default.a.createElement(confirm_modal_ConfirmModal,{isOpen:removeId!==null,title:page_manager_component_strings.getConfirmRemoveTitle(),message:page_manager_component_strings.getConfirmRemoveDescription(),confirmButtonText:page_manager_component_strings.getConfirmRemoveButtonLabel(),onConfirm:this.doRemove,onCancel:this.resetRemove}))}}const page_manager_mapStateToProps=state=>({isWriteable:workpad_isWriteable(state)&&app_canUserWrite(state),pages:getPages(state),selectedPage:getSelectedPage(state),workpadId:getWorkpad(state).id,workpadCSS:getWorkpad(state).css||constants["q"]});const page_manager_mapDispatchToProps=dispatch=>({onAddPage:()=>dispatch(addPage()),onMovePage:(id,position)=>dispatch(movePage(id,position)),onRemovePage:id=>dispatch(removePage(id))});const page_manager_PageManager=Object(lib["connect"])(page_manager_mapStateToProps,page_manager_mapDispatchToProps)(page_manager_component_PageManager);const{ExpressionElementNotSelected:element_not_selected_strings}=i18n["e"];const ElementNotSelected=({done:done})=>external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("div",null,element_not_selected_strings.getSelectDescription()),done&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",onClick:done}," ",element_not_selected_strings.getCloseButtonLabel()));var react_shortcuts_lib=__webpack_require__(222);var external_kbnSharedDeps_KbnMonaco_=__webpack_require__(206);var public_=__webpack_require__(56);var autocomplete=__webpack_require__(59);const LANGUAGE_ID="canvas-expression";const language={keywords:[],symbols:/[=|]/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,boolean:["true","false"],null:["null"],tokenizer:{root:[[/[{}]/,"delimiter.bracket"],{include:"common"}],common:[[/[a-z_$][\w$]*=/,"identifier"],[/[a-z_$][\w$]*/,{cases:{"@keywords":"keyword","@null":"keyword","@boolean":"keyword","@default":"identifier"}}],[/(@digits)/,"number"],[/"/,"string","@string_double"],[/'/,"string","@string_single"],[/@symbols/,"delimiter"]],string_double:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],string_single:[[/[^\\']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/'/,"string","@pop"]],bracketCounting:[[/\{/,"delimiter.bracket","@bracketCounting"],[/\}/,"delimiter.bracket","@pop"],{include:"common"}]}};function registerLanguage(functions){language.keywords=functions.map(fn=>fn.name);external_kbnSharedDeps_KbnMonaco_["monaco"].languages.register({id:LANGUAGE_ID});external_kbnSharedDeps_KbnMonaco_["monaco"].languages.setMonarchTokensProvider(LANGUAGE_ID,language)}const{ExpressionInput:reference_strings}=i18n["e"];function getFunctionReferenceStr(fnDef){const{help:help,type:type,inputTypes:inputTypes}=fnDef;const acceptTypes=inputTypes?inputTypes.join(" | "):"null";const returnType=type?type:"null";const doc=`${reference_strings.getFunctionReferenceAcceptsDetail(acceptTypes)} ${reference_strings.getFunctionReferenceReturnsDetail(returnType)}\n\n\n${help}`;return doc}function getArgReferenceStr(argDef){const{aliases:aliases,types:types,default:def,required:required,help:help}=argDef;const secondLineArr=[];if(def!=null){secondLineArr.push(reference_strings.getArgReferenceDefaultDetail(String(def)))}if(aliases&&aliases.length){secondLineArr.push(reference_strings.getArgReferenceAliasesDetail(aliases.join(" | ")))}const typesStr=types&&types.length?types.join(" | "):"null";const requiredStr=String(Boolean(required));const ref=`${reference_strings.getArgReferenceTypesDetail(typesStr)} ${reference_strings.getArgReferenceRequiredDetail(requiredStr)}\n  \n\n${secondLineArr.join(" ")}\n  \n\n${help}`;return ref}function expression_input_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class expression_input_ExpressionInput extends external_kbnSharedDeps_React_default.a.Component{constructor(props){super(props);expression_input_defineProperty(this,"editor",void 0);expression_input_defineProperty(this,"undoHistory",void 0);expression_input_defineProperty(this,"redoHistory",void 0);expression_input_defineProperty(this,"stash",Object(external_kbnSharedDeps_Lodash_["debounce"])(value=>{this.undoHistory.push(value);this.redoHistory=[]},500,{leading:true,trailing:false}));expression_input_defineProperty(this,"onKeyDown",e=>{if(e.ctrlKey||e.metaKey){if(e.key==="z"){e.preventDefault();if(e.shiftKey){this.redo()}else{this.undo()}}if(e.key==="y"){e.preventDefault();this.redo()}}});expression_input_defineProperty(this,"onChange",value=>{this.updateState({value:value})});expression_input_defineProperty(this,"updateState",({value:value})=>{this.stash(this.props.value);this.props.onChange(value)});expression_input_defineProperty(this,"provideSuggestions",(model,position,context)=>{const text=model.getValue();const textRange=model.getFullModelRange();const lengthAfterPosition=model.getValueLengthInRange({startLineNumber:position.lineNumber,startColumn:position.column,endLineNumber:textRange.endLineNumber,endColumn:textRange.endColumn});let wordRange;let aSuggestions;if(context.triggerCharacter==="{"){const wordUntil=model.getWordAtPosition(position.delta(0,-3));if(wordUntil){wordRange=new external_kbnSharedDeps_KbnMonaco_["monaco"].Range(position.lineNumber,position.column,position.lineNumber,position.column);aSuggestions=Object(autocomplete["a"])(this.props.functionDefinitions,text.substring(0,text.length-lengthAfterPosition)+"}",text.length-lengthAfterPosition)}}else{const wordUntil=model.getWordUntilPosition(position);wordRange=new external_kbnSharedDeps_KbnMonaco_["monaco"].Range(position.lineNumber,wordUntil.startColumn,position.lineNumber,wordUntil.endColumn);aSuggestions=Object(autocomplete["a"])(this.props.functionDefinitions,text,text.length-lengthAfterPosition)}if(!aSuggestions){return{suggestions:[]}}const suggestions=aSuggestions.map((s,index)=>{const sortText=String.fromCharCode(index);if(s.type==="argument"){return{label:s.argDef.name,kind:external_kbnSharedDeps_KbnMonaco_["monaco"].languages.CompletionItemKind.Variable,documentation:{value:getArgReferenceStr(s.argDef),isTrusted:true},insertText:s.text,command:{title:"Trigger Suggestion Dialog",id:"editor.action.triggerSuggest"},range:wordRange,sortText:sortText}}else if(s.type==="value"){return{label:s.text,kind:external_kbnSharedDeps_KbnMonaco_["monaco"].languages.CompletionItemKind.Value,insertText:s.text,command:{title:"Trigger Suggestion Dialog",id:"editor.action.triggerSuggest"},range:wordRange,sortText:sortText}}else{return{label:s.fnDef.name,kind:external_kbnSharedDeps_KbnMonaco_["monaco"].languages.CompletionItemKind.Function,documentation:{value:getFunctionReferenceStr(s.fnDef),isTrusted:true},insertText:s.text,command:{title:"Trigger Suggestion Dialog",id:"editor.action.triggerSuggest"},range:wordRange,sortText:sortText}}});return{suggestions:suggestions}});expression_input_defineProperty(this,"providerHover",(model,position)=>{const text=model.getValue();const word=model.getWordAtPosition(position);if(!word){return{contents:[]}}const absPosition=model.getValueLengthInRange({startLineNumber:0,startColumn:0,endLineNumber:position.lineNumber,endColumn:word.endColumn});const{fnDef:fnDef,argDef:argDef,argStart:argStart,argEnd:argEnd}=Object(autocomplete["b"])(this.props.functionDefinitions,text,absPosition);if(argDef&&argStart&&argEnd){const startPos=model.getPositionAt(argStart);const endPos=model.getPositionAt(argEnd);const argRange=new external_kbnSharedDeps_KbnMonaco_["monaco"].Range(startPos.lineNumber,startPos.column,endPos.lineNumber,endPos.column);return{contents:[{value:getArgReferenceStr(argDef),isTrusted:true}],range:argRange}}else if(fnDef){return{contents:[{value:getFunctionReferenceStr(fnDef),isTrusted:true}]}}return{contents:[]}});expression_input_defineProperty(this,"editorDidMount",editor=>{const model=editor.getModel();if(model){model.updateOptions({tabSize:2})}this.editor=editor});this.undoHistory=[];this.redoHistory=[];this.editor=null}undo(){if(!this.undoHistory.length){return}const value=this.undoHistory.pop();this.redoHistory.push(this.props.value);this.props.onChange(value)}redo(){if(!this.redoHistory.length){return}const value=this.redoHistory.pop();this.undoHistory.push(this.props.value);this.props.onChange(value)}render(){const{value:value,error:error,isCompact:isCompact}=this.props;return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasExpressionInput"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{className:"canvasExpressionInput__inner",fullWidth:true,isInvalid:Boolean(error),error:error},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasExpressionInput__editor"},external_kbnSharedDeps_React_default.a.createElement(public_["CodeEditor"],{languageId:LANGUAGE_ID,languageConfiguration:{autoClosingPairs:[{open:"{",close:"}"}]},value:value,onChange:this.onChange,suggestionProvider:{triggerCharacters:[" ","{"],provideCompletionItems:this.provideSuggestions},hoverProvider:{provideHover:this.providerHover},options:{fontSize:isCompact?12:16,scrollBeyondLastLine:false,quickSuggestions:true,minimap:{enabled:false},wordWrap:"on",wrappingIndent:"indent"},editorDidMount:this.editorDidMount}))))}}const{Expression:expression_strings}=i18n["e"];const{useRef:useRef}=external_kbnSharedDeps_React_default.a;const expression_shortcut=(ref,cmd,callback)=>external_kbnSharedDeps_React_default.a.createElement(react_shortcuts_lib["Shortcuts"],{name:"EXPRESSION",handler:command=>{const isInputActive=ref.current&&ref.current.editor&&ref.current.editor.hasTextFocus();if(isInputActive&&command===cmd){callback()}},targetNodeSelector:"body",global:true,stopPropagation:true});const Expression=({functionDefinitions:functionDefinitions,formState:formState,updateValue:updateValue,setExpression:setExpression,done:done,error:error,isCompact:isCompact,toggleCompactView:toggleCompactView})=>{const refExpressionInput=useRef(null);const handleRun=()=>{setExpression(formState.expression);if(!isCompact&&!error){toggleCompactView()}};const expressionPanel=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{className:`canvasTray__panel canvasTray__panel--holdingExpression canvasExpression--${isCompact?"compactSize":"fullSize"}`,paddingSize:"none"},expression_shortcut(refExpressionInput,"RUN",()=>{if(!error){setExpression(formState.expression)}}),external_kbnSharedDeps_React_default.a.createElement(expression_input_ExpressionInput,{ref:refExpressionInput,isCompact:isCompact,functionDefinitions:functionDefinitions,error:error?error:` `,value:formState.expression,onChange:updateValue}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasExpression__settings"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:external_kbnSharedDeps_React_default.a.createElement("span",null,expression_strings.getRunTooltip()," ",external_kbnSharedDeps_React_default.a.createElement(tool_tip_shortcut_ToolTipShortcut,{namespace:"EXPRESSION",action:"RUN"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,disabled:!!error,onClick:handleRun,size:"s"},expression_strings.getRunButtonLabel()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",color:formState.dirty?"danger":"primary",onClick:done},formState.dirty?expression_strings.getCancelButtonLabel():expression_strings.getCloseButtonLabel())))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:"https://www.elastic.co/guide/en/kibana/current/canvas-function-reference.html",target:"_blank"},expression_strings.getLearnLinkText())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"fullScreen",onClick:toggleCompactView,size:"xs"},isCompact?expression_strings.getMaximizeButtonLabel():expression_strings.getMinimizeButtonLabel())))))));if(isCompact){return expressionPanel}else{return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPortal"],null,expressionPanel)}};const expression_Expression=({done:done})=>{const{element:element,pageId:pageId}=Object(lib["useSelector"])(state=>({pageId:getSelectedPage(state),element:getSelectedElement(state)}));if(!element){return external_kbnSharedDeps_React_default.a.createElement(ElementNotSelected,{done:done})}return external_kbnSharedDeps_React_default.a.createElement(ExpressionContainer,{key:element.id,done:done,element:element,pageId:pageId})};const ExpressionContainer=({done:done,element:element,pageId:pageId})=>{const services=Object(public_services["h"])();const dispatch=Object(lib["useDispatch"])();const[isCompact,setCompact]=Object(external_kbnSharedDeps_React_["useState"])(true);const toggleCompactView=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setCompact(!isCompact)},[isCompact,setCompact]);const dispatchSetExpression=Object(external_kbnSharedDeps_React_["useCallback"])(expression=>{dispatch(flushContext(element.id));dispatch(elements_setExpression(expression,element.id,pageId))},[dispatch,element,pageId]);const[formState,setFormState]=Object(external_kbnSharedDeps_React_["useState"])({dirty:false,expression:element.expression});const updateValue=Object(external_kbnSharedDeps_React_["useCallback"])((expression="")=>{setFormState({expression:expression,dirty:true})},[setFormState]);const onSetExpression=Object(external_kbnSharedDeps_React_["useCallback"])(expression=>{setFormState({...formState,dirty:false});dispatchSetExpression(expression)},[setFormState,dispatchSetExpression,formState]);const currentExpression=formState.expression;const error=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{try{Object(common["fromExpression"])(currentExpression);return null}catch(e){return e.message}},[currentExpression]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(element.expression!==formState.expression&&!formState.dirty){setFormState({dirty:false,expression:element.expression})}},[element,setFormState,formState]);return external_kbnSharedDeps_React_default.a.createElement(Expression,{done:done,isCompact:isCompact,functionDefinitions:Object.values(services.expressions.getFunctions()),formState:formState,setExpression:onSetExpression,toggleCompactView:toggleCompactView,updateValue:updateValue,error:error})};const{ToolbarTray:tray_strings}=i18n["e"];const Tray=({children:children,done:done})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:"canvasTray__toggle",justifyContent:"spaceAround"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{size:"s",onClick:done,"aria-label":tray_strings.getCloseTrayAriaLabel(),iconType:"arrowDown"}))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasTray"},children));const{Toolbar:toolbar_component_strings}=i18n["e"];const Toolbar=({isWriteable:isWriteable,selectedElement:selectedElement,selectedPageNumber:selectedPageNumber,totalPages:totalPages,workpadId:workpadId,workpadName:workpadName})=>{const[activeTray,setActiveTray]=Object(external_kbnSharedDeps_React_["useState"])(null);const[showWorkpadManager,setShowWorkpadManager]=Object(external_kbnSharedDeps_React_["useState"])(false);const router=Object(external_kbnSharedDeps_React_["useContext"])(RouterContext);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!isWriteable&&activeTray==="expression"){setActiveTray(null)}},[isWriteable,activeTray]);if(!router){return external_kbnSharedDeps_React_default.a.createElement("div",null,toolbar_component_strings.getErrorMessage("Router Undefined"))}const nextPage=()=>{const page=Math.min(selectedPageNumber+1,totalPages);router.navigateTo("loadWorkpad",{id:workpadId,page:page})};const previousPage=()=>{const page=Math.max(1,selectedPageNumber-1);router.navigateTo("loadWorkpad",{id:workpadId,page:page})};const elementIsSelected=Boolean(selectedElement);const toggleTray=tray=>{if(activeTray===tray){setActiveTray(null)}else{if(!isWriteable&&tray==="expression"){return}setActiveTray(tray)}};const closeWorkpadManager=()=>setShowWorkpadManager(false);const openWorkpadManager=()=>setShowWorkpadManager(true);const workpadManager=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],{onClose:closeWorkpadManager,className:"canvasModal--fixedSize",maxWidth:"1000px"},external_kbnSharedDeps_React_default.a.createElement(WorkpadManager,{onClose:closeWorkpadManager}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",onClick:closeWorkpadManager},toolbar_component_strings.getWorkpadManagerCloseButtonLabel())));const trays={pageManager:external_kbnSharedDeps_React_default.a.createElement(page_manager_PageManager,{onPreviousPage:previousPage}),expression:!elementIsSelected?null:external_kbnSharedDeps_React_default.a.createElement(expression_Expression,{done:()=>setActiveTray(null)})};return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasToolbar hide-for-sharing"},activeTray!==null&&external_kbnSharedDeps_React_default.a.createElement(Tray,{done:()=>setActiveTray(null)},trays[activeTray]),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasToolbar__container"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"none",className:"canvasToolbar__controls"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{color:"text",iconType:"grid",onClick:()=>openWorkpadManager()},workpadName)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{color:"text",onClick:previousPage,iconType:"arrowLeft",disabled:selectedPageNumber<=1,"aria-label":toolbar_component_strings.getPreviousPageAriaLabel()})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{color:"text",onClick:()=>toggleTray("pageManager")},toolbar_component_strings.getPageButtonLabel(selectedPageNumber,totalPages))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{color:"text",onClick:nextPage,iconType:"arrowRight",disabled:selectedPageNumber>=totalPages,"aria-label":toolbar_component_strings.getNextPageAriaLabel()})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null),elementIsSelected&&isWriteable&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{color:"text",iconType:"editorCodeBlock",onClick:()=>toggleTray("expression"),"data-test-subj":"canvasExpressionEditorButton"},toolbar_component_strings.getEditorButtonLabel())))),showWorkpadManager&&workpadManager)};const toolbar_Toolbar=Object(lib["connect"])(state=>({workpadName:getWorkpadName(state),workpadId:getWorkpad(state).id,totalPages:getWorkpad(state).pages.length,selectedPageNumber:getSelectedPageIndex(state)+1,selectedElement:getSelectedElement(state),isWriteable:workpad_isWriteable(state)&&app_canUserWrite(state)}))(Toolbar);const history_undoHistory=Object(redux_actions_lib["createAction"])("undoHistory");const history_redoHistory=Object(redux_actions_lib["createAction"])("redoHistory");const restoreHistory=Object(redux_actions_lib["createAction"])("restoreHistory");const zoomHandlerCreators={zoomIn:({zoomScale:zoomScale,setZoomScale:setZoomScale})=>()=>{const scaleUp=constants["C"].find(zoomLevel=>zoomScale<zoomLevel)||constants["x"];setZoomScale(scaleUp)},zoomOut:({zoomScale:zoomScale,setZoomScale:setZoomScale})=>()=>{const scaleDown=constants["C"].slice().reverse().find(zoomLevel=>zoomScale>zoomLevel)||constants["y"];setZoomScale(scaleDown)},resetZoom:({setZoomScale:setZoomScale})=>()=>{setZoomScale(1)}};function wrapArray(subj){return Array.isArray(subj)?subj:[subj]}class UnreachableCaseError extends Error{constructor(val){super(`Unreachable case: ${val}`)}}function createUiCounterMetric({type:type,appName:appName,eventName:eventName,count:count=1}){return{type:type,appName:appName,eventName:eventName,count:count}}function trackUsageAgent(appName){const userAgent=window&&window.navigator&&window.navigator.userAgent||"";return{type:METRIC_TYPE.USER_AGENT,appName:appName,userAgent:userAgent}}var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(204);var external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_);function createApplicationUsageMetric(appId,viewId){return{type:METRIC_TYPE.APPLICATION_USAGE,appId:appId,viewId:viewId,startTime:external_kbnSharedDeps_MomentTimezone_default()(),numberOfClicks:0}}let METRIC_TYPE;(function(METRIC_TYPE){METRIC_TYPE["COUNT"]="count";METRIC_TYPE["LOADED"]="loaded";METRIC_TYPE["CLICK"]="click";METRIC_TYPE["USER_AGENT"]="user_agent";METRIC_TYPE["APPLICATION_USAGE"]="application_usage"})(METRIC_TYPE||(METRIC_TYPE={}));function storage_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class ReportStorageManager{constructor(storageKey,storage){storage_defineProperty(this,"storageKey",void 0);storage_defineProperty(this,"storage",void 0);this.storageKey=storageKey;this.storage=storage}get(){if(!this.storage)return;return this.storage.get(this.storageKey)}store(report){if(!this.storage)return;this.storage.set(this.storageKey,report)}}function application_usage_tracker_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class application_usage_tracker_ApplicationUsageTracker{constructor(reporter){application_usage_tracker_defineProperty(this,"trackedApplicationViews",{});application_usage_tracker_defineProperty(this,"reporter",void 0);application_usage_tracker_defineProperty(this,"currentAppId",void 0);application_usage_tracker_defineProperty(this,"currentApplicationKeys",[]);application_usage_tracker_defineProperty(this,"beforeUnloadListener",void 0);application_usage_tracker_defineProperty(this,"onVisiblityChangeListener",void 0);this.reporter=reporter}createKey(appId,viewId){return{appId:appId,viewId:viewId}}static serializeKey({appId:appId,viewId:viewId}){return`${appId}-${viewId}`}trackApplications(appKeys){for(const{appId:appId,viewId:viewId}of appKeys.filter(Boolean)){const serializedKey=application_usage_tracker_ApplicationUsageTracker.serializeKey({appId:appId,viewId:viewId});if(typeof this.trackedApplicationViews[serializedKey]!=="undefined"){continue}const metric=createApplicationUsageMetric(appId,viewId);this.trackedApplicationViews[serializedKey]=metric}}attachListeners(){if(typeof window==="undefined"||typeof document==="undefined"){return}this.beforeUnloadListener=()=>{this.flushTrackedViews()};this.onVisiblityChangeListener=()=>{if(document.visibilityState==="visible"){this.resumeTrackingAll()}else if(document.visibilityState==="hidden"){this.pauseTrackingAll()}};window.addEventListener("beforeunload",this.beforeUnloadListener);document.addEventListener("visibilitychange",this.onVisiblityChangeListener)}detachListeners(){if(typeof window==="undefined"||typeof document==="undefined"){return}if(this.beforeUnloadListener){window.removeEventListener("beforeunload",this.beforeUnloadListener)}if(this.onVisiblityChangeListener){document.removeEventListener("visibilitychange",this.onVisiblityChangeListener)}}sendMetricsToReporter(metrics){metrics.forEach(metric=>{this.reporter.reportApplicationUsage(metric)})}updateViewClickCounter(viewId){if(!this.currentAppId){return}const appKey=application_usage_tracker_ApplicationUsageTracker.serializeKey({appId:this.currentAppId,viewId:viewId});if(this.trackedApplicationViews[appKey]){this.trackedApplicationViews[appKey].numberOfClicks++}}flushTrackedViews(){const appViewMetrics=Object.values(this.trackedApplicationViews);this.sendMetricsToReporter(appViewMetrics);this.trackedApplicationViews={}}start(){this.attachListeners()}stop(){this.flushTrackedViews();this.detachListeners()}setCurrentAppId(appId){this.flushTrackedViews();this.currentAppId=appId}trackApplicationViewUsage(viewId){if(!this.currentAppId){return}const appKey=this.createKey(this.currentAppId,viewId);this.trackApplications([appKey])}pauseTrackingAll(){this.currentApplicationKeys=Object.values(this.trackedApplicationViews).map(({appId:appId,viewId:viewId})=>this.createKey(appId,viewId));this.flushTrackedViews()}resumeTrackingAll(){this.trackApplications(this.currentApplicationKeys);this.currentApplicationKeys=[];this.reporter.sendReports()}flushTrackedView(viewId){if(!this.currentAppId){return}const appKey=this.createKey(this.currentAppId,viewId);const serializedKey=application_usage_tracker_ApplicationUsageTracker.serializeKey(appKey);const appViewMetric=this.trackedApplicationViews[serializedKey];this.sendMetricsToReporter([appViewMetric]);delete this.trackedApplicationViews[serializedKey]}}function report_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const REPORT_VERSION=3;class report_ReportManager{constructor(report){report_defineProperty(this,"report",void 0);this.report=report||report_ReportManager.createReport()}static createReport(){return{reportVersion:REPORT_VERSION}}clearReport(){this.report=report_ReportManager.createReport()}isReportEmpty(){const{uiCounter:uiCounter,userAgent:userAgent,application_usage:appUsage}=this.report;const noUiCounters=!uiCounter||Object.keys(uiCounter).length===0;const noUserAgents=!userAgent||Object.keys(userAgent).length===0;const noAppUsage=!appUsage||Object.keys(appUsage).length===0;return noUiCounters&&noUserAgents&&noAppUsage}incrementTotal(count,currentTotal){const currentTotalNumber=typeof currentTotal==="number"?currentTotal:0;return count+currentTotalNumber}assignReports(newMetrics){wrapArray(newMetrics).forEach(newMetric=>this.assignReport(this.report,newMetric));return{report:this.report}}static createMetricKey(metric){switch(metric.type){case METRIC_TYPE.USER_AGENT:{const{appName:appName,type:type}=metric;return`${appName}-${type}`}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{const{appName:appName,eventName:eventName,type:type}=metric;return`${appName}-${type}-${eventName}`}case METRIC_TYPE.APPLICATION_USAGE:{const{appId:appId,viewId:viewId}=metric;return application_usage_tracker_ApplicationUsageTracker.serializeKey({appId:appId,viewId:viewId})}default:throw new UnreachableCaseError(metric)}}assignReport(report,metric){const key=report_ReportManager.createMetricKey(metric);switch(metric.type){case METRIC_TYPE.USER_AGENT:{const{appName:appName,type:type,userAgent:userAgent}=metric;if(userAgent){report.userAgent={[key]:{key:key,appName:appName,type:type,userAgent:metric.userAgent}}}return}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{var _report$uiCounter$key;const{appName:appName,type:type,eventName:eventName,count:count}=metric;report.uiCounter=report.uiCounter||{};const currentTotal=(_report$uiCounter$key=report.uiCounter[key])===null||_report$uiCounter$key===void 0?void 0:_report$uiCounter$key.total;report.uiCounter[key]={key:key,appName:appName,eventName:eventName,type:type,total:this.incrementTotal(count,currentTotal)};return}case METRIC_TYPE.APPLICATION_USAGE:{const{numberOfClicks:numberOfClicks,startTime:startTime,appId:appId,viewId:viewId}=metric;const minutesOnScreen=external_kbnSharedDeps_MomentTimezone_default()().diff(startTime,"minutes",true);report.application_usage=report.application_usage||{};const appExistingData=report.application_usage[key]||{minutesOnScreen:0,numberOfClicks:0,appId:appId,viewId:viewId};report.application_usage[key]={...appExistingData,minutesOnScreen:appExistingData.minutesOnScreen+minutesOnScreen,numberOfClicks:appExistingData.numberOfClicks+numberOfClicks};return}default:throw new UnreachableCaseError(metric)}}}report_defineProperty(report_ReportManager,"REPORT_VERSION",REPORT_VERSION);function reporter_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class reporter_Reporter{constructor(config){reporter_defineProperty(this,"checkInterval",void 0);reporter_defineProperty(this,"interval",void 0);reporter_defineProperty(this,"http",void 0);reporter_defineProperty(this,"reportManager",void 0);reporter_defineProperty(this,"storageManager",void 0);reporter_defineProperty(this,"debug",void 0);reporter_defineProperty(this,"retryCount",0);reporter_defineProperty(this,"maxRetries",3);reporter_defineProperty(this,"start",()=>{if(!this.interval){this.interval=setTimeout(()=>{this.interval=undefined;this.sendReports()},this.checkInterval)}});reporter_defineProperty(this,"reportUiCounter",(appName,type,eventNames,count)=>{const metrics=wrapArray(eventNames).map(eventName=>{this.log(`${type} Metric -> (${appName}:${eventName}):`);const report=createUiCounterMetric({type:type,appName:appName,eventName:eventName,count:count});this.log(report);return report});this.saveToReport(metrics)});reporter_defineProperty(this,"reportUserAgent",appName=>{this.log(`Reporting user-agent.`);const report=trackUsageAgent(appName);this.saveToReport([report])});reporter_defineProperty(this,"sendReports",async()=>{if(!this.reportManager.isReportEmpty()){try{await this.http(this.reportManager.report);this.flushReport()}catch(err){this.log(`Error Sending Metrics Report ${err}`);this.retryCount=this.retryCount+1;const versionMismatch=this.reportManager.report.reportVersion!==report_ReportManager.REPORT_VERSION;if(versionMismatch||this.retryCount>this.maxRetries){this.flushReport()}}}this.start()});const{http:http,storage:storage,debug:debug,checkInterval:checkInterval=9e4,storageKey:storageKey="analytics"}=config;this.http=http;this.checkInterval=checkInterval;this.storageManager=new ReportStorageManager(storageKey,storage);const storedReport=this.storageManager.get();this.reportManager=new report_ReportManager(storedReport);this.debug=!!debug}saveToReport(newMetrics){this.reportManager.assignReports(newMetrics);this.storageManager.store(this.reportManager.report)}flushReport(){this.retryCount=0;this.reportManager.clearReport();this.storageManager.store(this.reportManager.report)}log(message){if(this.debug){console.debug(message)}}reportApplicationUsage(appUsageReport){this.log(`Reporting application usage for ${appUsageReport.appId}, ${appUsageReport.viewId}`);this.saveToReport([appUsageReport])}}let reportUiCounter;function init(_reportUiCounter){reportUiCounter=_reportUiCounter}function trackCanvasUiMetric(metricType,name){if(!reportUiCounter){return}reportUiCounter("canvas",metricType,name)}var react_fast_compare=__webpack_require__(246);var react_fast_compare_default=__webpack_require__.n(react_fast_compare);const positioning_utils_isGroupId=id=>id.startsWith("group");const positioning_utils_headerData=id=>positioning_utils_isGroupId(id)?{id:id,type:"group",subtype:"persistentGroup"}:{id:id,type:"rectangleElement",subtype:""};const positioning_utils_transformData=({top:top,left:left,width:width,height:height,angle:angle},z)=>multiply(translate(left+width/2,top+height/2,z),rotateZ(-angle/180*Math.PI));const positioning_utils_elementToShape=({id:id,position:position},z)=>({...positioning_utils_headerData(id),parent:position&&position.parent||null,transformMatrix:positioning_utils_transformData(position,z),a:position.width/2,b:position.height/2});const positioning_utils_simplePosition=({id:id,position:position,filter:filter},z)=>({...positioning_utils_headerData(id),width:position.width,height:position.height,transformMatrix:positioning_utils_transformData(position,z),filter:filter});const positioning_utils_simplePositioning=({elements:elements})=>({elements:elements.map(positioning_utils_simplePosition)});const UpdateEmbeddableExpressionActionType="updateEmbeddableExpression";const updateEmbeddableExpression=Object(redux_actions_lib["createAction"])(UpdateEmbeddableExpressionActionType);const fetchEmbeddableRenderable=createThunk("fetchEmbeddableRenderable",({dispatch:dispatch,getState:getState},elementId)=>{const pageWithElement=getState().persistent.workpad.pages.find(page=>page.elements.find(element=>element.id===elementId)!==undefined);if(pageWithElement){const element=pageWithElement.elements.find(el=>el.id===elementId);dispatch(fetchRenderable(element))}});const create_handlers_createHandlers=()=>({destroy(){},done(){},event(){},getElementId(){return""},getFilter(){return""},getRenderMode(){return"display"},isSyncColorsEnabled(){return false},onComplete(fn){this.done=fn},onDestroy(fn){this.destroy=fn},onEmbeddableDestroyed(){},onEmbeddableInputChange(){},onResize(fn){this.resize=fn},reload(){},resize(_size){},setFilter(){},update(){}});const assignHandlers=(handlers={})=>Object.assign(create_handlers_createHandlers(),handlers);const createDispatchedHandlerFactory=dispatch=>{let isComplete=false;let oldElement;let completeFn=()=>{};return element=>{if(!Object(external_kbnSharedDeps_Lodash_["isEqual"])(oldElement,element)){isComplete=false;oldElement=element}return assignHandlers({setFilter(text){dispatch(setFilter(text,element.id,true))},getFilter(){return element.filter},onComplete(fn){completeFn=fn},getElementId:()=>element.id,onEmbeddableInputChange(embeddableExpression){dispatch(updateEmbeddableExpression({elementId:element.id,embeddableExpression:embeddableExpression}))},onEmbeddableDestroyed(){dispatch(fetchEmbeddableRenderable(element.id))},done(){if(isComplete){return}isComplete=true;completeFn()}})}};const matrixToCSS=transformMatrix=>transformMatrix?"matrix3d("+transformMatrix.join(",")+")":"translate3d(0,0,0)";const Positionable=({children:children,transformMatrix:transformMatrix,width:width,height:height})=>{const childNode=external_kbnSharedDeps_React_default.a.Children.only(children);const matrix=transformMatrix.map((n,i)=>i<12?n:Math.round(n));const newStyle={width:width,height:height,marginLeft:-width/2,marginTop:-height/2,position:"absolute",transform:matrixToCSS(matrix)};return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasPositionable canvasInteractable",style:newStyle},childNode)};var external_kbnSharedDeps_StyledComponents_=__webpack_require__(207);var external_kbnSharedDeps_StyledComponents_default=__webpack_require__.n(external_kbnSharedDeps_StyledComponents_);const{RenderWithFn:render_with_fn_strings}=i18n["g"];const render_with_fn_style={height:"100%",width:"100%"};const RenderWithFn=({name:functionName,renderFn:renderFn,reuseNode:reuseNode=false,handlers:incomingHandlers,config:config,width:width,height:height})=>{const{error:onError}=Object(public_services["g"])();const[domNode,setDomNode]=Object(external_kbnSharedDeps_React_["useState"])(null);const firstRender=Object(external_kbnSharedDeps_React_["useRef"])(true);const renderTarget=Object(external_kbnSharedDeps_React_["useRef"])(null);const handlers=Object(external_kbnSharedDeps_React_["useRef"])(incomingHandlers);const resetRenderTarget=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{if(!domNode){return}if(!firstRender){handlers.current.destroy()}while(domNode.firstChild){domNode.removeChild(domNode.firstChild)}const div=document.createElement("div");div.style.width="100%";div.style.height="100%";domNode.appendChild(div);renderTarget.current=div;firstRender.current=true},[domNode]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>handlers.current.resize({height:height,width:width}),[height,width]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>()=>{handlers.current.destroy()},[]);const render=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{if(!Object(external_kbnSharedDeps_Lodash_["isEqual"])(handlers.current,incomingHandlers)){handlers.current=incomingHandlers}renderFn(renderTarget.current,config,handlers.current)},[renderTarget,config,renderFn,incomingHandlers]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!domNode){return}if(!reuseNode||!renderTarget.current){resetRenderTarget()}try{render();firstRender.current=false}catch(err){onError(err,{title:render_with_fn_strings.getRenderErrorMessage(functionName)})}},[domNode,functionName,onError,render,resetRenderTarget,reuseNode]);return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasWorkpad--element_render canvasRenderEl",style:render_with_fn_style},external_kbnSharedDeps_React_default.a.createElement(RenderToDom,{style:render_with_fn_style,render:node=>{setDomNode(node)}}))};function element_share_container_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class element_share_container_ElementShareContainer extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args);element_share_container_defineProperty(this,"state",{renderComplete:false});element_share_container_defineProperty(this,"createDoneChecker",()=>{const isDevelopment="production"!=="production";if(!isDevelopment){return}const{functionName:functionName}=this.props;const timeout=15;this.timeout=setTimeout(()=>{console.warn(`done handler not called in render function after ${timeout} seconds: ${functionName}`)},timeout*1e3)});element_share_container_defineProperty(this,"clearDoneChecker",()=>{clearTimeout(this.timeout)})}componentDidMount(){const{onComplete:onComplete}=this.props;this.createDoneChecker();onComplete(()=>{this.clearDoneChecker();if(!this.sharedItemRef){return}const ev=new CustomEvent("renderComplete");this.sharedItemRef.dispatchEvent(ev);this.setState({renderComplete:true})})}getSnapshotBeforeUpdate(prevProps){return{functionName:prevProps.functionName}}componentDidUpdate(prevProps,prevState,snapshot){if(snapshot.functionName!==this.props.functionName){this.clearDoneChecker();this.createDoneChecker()}}componentWillUnmount(){this.clearDoneChecker()}render(){const shouldTrackComplete=this.props.functionName!=="embeddable";return external_kbnSharedDeps_React_default.a.createElement("div",{"data-shared-item":shouldTrackComplete?this.state.renderComplete:undefined,"data-render-complete":shouldTrackComplete?this.state.renderComplete:undefined,className:this.props.className,ref:ref=>this.sharedItemRef=ref},this.props.children)}}const InvalidExpression=({selectElement:selectElement})=>external_kbnSharedDeps_React_default.a.createElement("h3",{onClick:selectElement},"Invalid expression");const InvalidElementType=({renderableType:renderableType,selectElement:selectElement})=>external_kbnSharedDeps_React_default.a.createElement("h3",{onClick:selectElement},"Element not found: ",renderableType);const element_content_branches=[Object(Recompose["branch"])(({renderable:renderable,state:state})=>!state||!renderable,Object(Recompose["renderComponent"])(({backgroundColor:backgroundColor})=>external_kbnSharedDeps_React_default.a.createElement(loading_loading["a"],{backgroundColor:backgroundColor}))),Object(Recompose["branch"])(({renderable:renderable,renderFunction:renderFunction})=>renderable&&Object(common["getType"])(renderable)!=="render"&&!renderFunction,Object(Recompose["renderComponent"])(InvalidElementType)),Object(Recompose["branch"])(({renderable:renderable,renderFunction:renderFunction,state:state})=>state==="error"||Object(common["getType"])(renderable)!=="render"||!renderFunction,Object(Recompose["renderComponent"])(InvalidExpression))];var _StyledRenderWithFn=external_kbnSharedDeps_StyledComponents_default()(RenderWithFn).withConfig({displayName:"_StyledRenderWithFn",componentId:"sc-1kx8mui-0"})(["",""],p=>p._css);const ElementContent=Object(Recompose["compose"])(Recompose["pure"],...element_content_branches)(({renderable:renderable,renderFunction:renderFunction,width:width,height:height,handlers:handlers})=>{const{onComplete:onComplete}=handlers;return style_it_default.a.it(renderable.css,external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvas__element canvasElement",style:{...renderable.containerStyle,width:width,height:height},"data-test-subj":"canvasWorkpadPageElementContent"},external_kbnSharedDeps_React_default.a.createElement(element_share_container_ElementShareContainer,{className:"canvasElement__content",onComplete:onComplete,functionName:renderFunction.name},external_kbnSharedDeps_React_default.a.createElement(_StyledRenderWithFn,{name:renderFunction.name,renderFn:renderFunction.render,reuseNode:renderFunction.reuseDomNode,config:renderable.value,width:width,height:height,handlers:handlers,_css:renderable.css}))))});const element_content_mapStateToProps=state=>({backgroundColor:getPageById(state,getSelectedPage(state)).style.background});const element_content_ElementContent=Object(Recompose["compose"])(Object(lib["connect"])(element_content_mapStateToProps),public_services["i"],Object(Recompose["withProps"])(({renderable:renderable,services:services})=>({renderFunction:services.expressions.getRenderer(Object(external_kbnSharedDeps_Lodash_["get"])(renderable,"as"))})))(ElementContent);element_content_ElementContent.propTypes={renderable:prop_types_default.a.shape({as:prop_types_default.a.string})};const ElementWrapper=props=>{const{renderable:renderable,transformMatrix:transformMatrix,width:width,height:height,state:state,handlers:handlers}=props;return external_kbnSharedDeps_React_default.a.createElement(Positionable,{transformMatrix:transformMatrix,width:width,height:height},external_kbnSharedDeps_React_default.a.createElement(element_content_ElementContent,{renderable:renderable,state:state,handlers:handlers,width:width,height:height}))};function selectorFactory(dispatch){let result={};const createHandlers=createDispatchedHandlerFactory(dispatch);return(nextState,nextOwnProps)=>{const{element:element,...restOwnProps}=nextOwnProps;const{transformMatrix:transformMatrix,width:width,height:height}=element;const resolvedArg=getResolvedArgs(nextState,element.id,"expressionRenderable");const selectedPage=getSelectedPage(nextState);const nextResult={...restOwnProps,selectedPage:selectedPage,state:Object(resolved_arg["b"])(resolvedArg),renderable:Object(resolved_arg["c"])(resolvedArg),createHandlers:createHandlers,transformMatrix:transformMatrix,width:width,height:height,element:{id:element.id,filter:element.filter,expression:element.expression}};if(!react_fast_compare_default()(result,nextResult)){result=nextResult}return result}}const element_wrapper_ElementWrapper=Object(Recompose["compose"])(Object(lib["connectAdvanced"])(selectorFactory),Object(Recompose["withPropsOnChange"])((props,nextProps)=>!react_fast_compare_default()(props.element,nextProps.element),props=>{const{element:element,createHandlers:createHandlers}=props;const handlers=createHandlers(element);return{handlers:handlers}}),Object(Recompose["mapProps"])(props=>{const{element:element,createHandlers:createHandlers,selectedPage:selectedPage,...restProps}=props;return restProps}))(ElementWrapper);element_wrapper_ElementWrapper.propTypes={element:prop_types_default.a.shape({id:prop_types_default.a.string.isRequired,transformMatrix:prop_types_default.a.arrayOf(prop_types_default.a.number).isRequired,width:prop_types_default.a.number.isRequired,height:prop_types_default.a.number.isRequired,expression:prop_types_default.a.string,filter:prop_types_default.a.string}).isRequired};const staticWorkpadPagePropTypes={pageId:prop_types_default.a.string.isRequired,pageStyle:prop_types_default.a.object,className:prop_types_default.a.string.isRequired,animationStyle:prop_types_default.a.object.isRequired,elements:prop_types_default.a.arrayOf(prop_types_default.a.shape({id:prop_types_default.a.string.isRequired,transformMatrix:prop_types_default.a.arrayOf(prop_types_default.a.number).isRequired,width:prop_types_default.a.number.isRequired,height:prop_types_default.a.number.isRequired,type:prop_types_default.a.string})).isRequired,height:prop_types_default.a.number.isRequired,width:prop_types_default.a.number.isRequired,onAnimationEnd:prop_types_default.a.func};const interactiveWorkpadPagePropTypes={...staticWorkpadPagePropTypes,cursor:prop_types_default.a.string,onDoubleClick:prop_types_default.a.func,onKeyDown:prop_types_default.a.func,onMouseDown:prop_types_default.a.func,onMouseLeave:prop_types_default.a.func,onMouseMove:prop_types_default.a.func,onMouseUp:prop_types_default.a.func,onAnimationEnd:prop_types_default.a.func,resetHandler:prop_types_default.a.func,copyElements:prop_types_default.a.func,cutElements:prop_types_default.a.func,duplicateElements:prop_types_default.a.func,pasteElements:prop_types_default.a.func,removeElements:prop_types_default.a.func,bringForward:prop_types_default.a.func,bringToFront:prop_types_default.a.func,sendBackward:prop_types_default.a.func,sendToBack:prop_types_default.a.func,canvasOrigin:prop_types_default.a.func,saveCanvasOrigin:prop_types_default.a.func.isRequired,commit:prop_types_default.a.func.isRequired,setMultiplePositions:prop_types_default.a.func.isRequired,zoomScale:prop_types_default.a.number.isRequired};class static_workpad_page_StaticWorkpadPage extends external_kbnSharedDeps_React_["PureComponent"]{render(){const{pageId:pageId,pageStyle:pageStyle,className:className,animationStyle:animationStyle,elements:elements,height:height,width:width}=this.props;return external_kbnSharedDeps_React_default.a.createElement("div",{key:pageId,id:pageId,"data-test-subj":"canvasWorkpadPage",className:`canvasPage kbn-resetFocusState canvasStaticPage ${className}`,"data-shared-items-container":true,style:{...pageStyle,...animationStyle,height:height,width:width}},elements.filter(node=>!positioning_utils_isGroupId(node.id)).map(element=>external_kbnSharedDeps_React_default.a.createElement(element_wrapper_ElementWrapper,{key:element.id,element:element})))}}const StaticPage=()=>Object(Recompose["withProps"])(positioning_utils_simplePositioning)(static_workpad_page_StaticWorkpadPage);let store_counter=0;const createStore=(initialState,updater)=>{let currentState=initialState;const commit=(type,payload)=>currentState=updater({...currentState,primaryUpdate:{type:type,payload:{...payload,uid:store_counter++}}});const getCurrentState=()=>currentState;const setCurrentState=state=>{currentState=state;commit("flush",{})};return{getCurrentState:getCurrentState,setCurrentState:setCurrentState,commit:commit}};const select_select=fun=>(...fns)=>{let prevId=NaN;let cache=null;const old=object=>prevId===(prevId=object.primaryUpdate.payload.uid);return obj=>old(obj)?cache:cache=fun(...fns.map(f=>f(obj)))};const common_state=d=>d;const getScene=state=>state.currentScene;const scene=select_select(getScene)(common_state);const getPrimaryUpdate=state=>state.primaryUpdate;const primaryUpdate=select_select(getPrimaryUpdate)(common_state);const appleKeyboard=Boolean(window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.match("Macintosh|iPhone|iPad"));const gestures_primaryUpdate=state=>state.primaryUpdate;const gestureStatePrev=select_select(scene=>scene.gestureState)(scene);const rawCursorPosition=select_select(action=>action.type==="cursorPosition"?action.payload:null)(gestures_primaryUpdate);const mouseButtonEvent=select_select(action=>action.type==="mouseEvent"?action.payload:null)(gestures_primaryUpdate);const keyFromMouse=select_select(({type:type,payload:{altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey}})=>type==="cursorPosition"||type==="mouseEvent"?{altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey}:{})(gestures_primaryUpdate);const gestures_metaHeld=select_select(appleKeyboard?e=>e.metaKey:e=>e.altKey)(keyFromMouse);const optionHeld=select_select(appleKeyboard?e=>e.altKey:e=>e.ctrlKey)(keyFromMouse);const shiftHeld=select_select(e=>e.shiftKey)(keyFromMouse);const gestures_cursorPosition=select_select(({cursor:cursor},position)=>position||cursor)(gestureStatePrev,rawCursorPosition);const mouseButton=select_select(next=>{if(!next){return{down:false,up:false,uid:null}}const{event:event,uid:uid}=next;if(event==="mouseDown"){return{down:true,up:false,uid:uid}}else{return event==="mouseUp"?{down:false,up:true,uid:uid}:{down:false,up:false,uid:null}}})(mouseButtonEvent);const mouseIsDown=select_select(({mouseIsDown:mouseIsDown},next)=>next?next.event==="mouseDown":mouseIsDown)(gestureStatePrev,mouseButtonEvent);const gestures_gestureEnd=select_select(action=>action&&(action.type==="actionEvent"||action.type==="mouseEvent"&&action.payload.event==="mouseUp"))(gestures_primaryUpdate);const mouseButtonStateTransitions=(state,mouseNowDown,movedAlready)=>{switch(state){case"up":return mouseNowDown?"downed":"up";case"downed":if(mouseNowDown){return movedAlready?"dragging":"downed"}else{return"up"}case"dragging":return mouseNowDown?"dragging":"up"}};const mouseButtonState=select_select(({mouseButtonState:{buttonState:buttonState,downX:downX,downY:downY}},mouseNowDown,{x:x,y:y})=>{const movedAlready=x!==downX||y!==downY;const newButtonState=mouseButtonStateTransitions(buttonState,mouseNowDown,movedAlready);return{buttonState:newButtonState,downX:newButtonState==="downed"?x:downX,downY:newButtonState==="downed"?y:downY}})(gestureStatePrev,mouseIsDown,gestures_cursorPosition);const mouseDowned=select_select(state=>state.buttonState==="downed")(mouseButtonState);const gestures_dragging=select_select(state=>state.buttonState==="dragging")(mouseButtonState);const dragVector=select_select(({buttonState:buttonState,downX:downX,downY:downY},{x:x,y:y})=>({down:buttonState!=="up",x0:downX,y0:downY,x1:x,y1:y}))(mouseButtonState,gestures_cursorPosition);const actionEvent=select_select(action=>action.type==="actionEvent"?action.payload:null)(gestures_primaryUpdate);const gestureState=select_select((cursor,mouseIsDown,mouseButtonState)=>({cursor:cursor,mouseIsDown:mouseIsDown,mouseButtonState:mouseButtonState}))(gestures_cursorPosition,mouseIsDown,mouseButtonState);const layout_shapes=select_select(getShapes)(scene);const configuration=select_select(getConfiguration)(scene);const layout_hoveredShapes=select_select(getHoveredShapes)(configuration,layout_shapes,gestures_cursorPosition);const hoveredShape=select_select(getHoveredShape)(layout_hoveredShapes);const layout_draggedShape=select_select(draggingShape)(scene,hoveredShape,mouseIsDown,mouseDowned);const focusedShape=select_select(getFocusedShape)(layout_draggedShape,hoveredShape);const layout_alterSnapGesture=select_select(getAlterSnapGesture)(gestures_metaHeld);const multiselectModifier=shiftHeld;const mouseTransformGesturePrev=select_select(getMouseTransformGesturePrev)(scene);const mouseTransformState=select_select(getMouseTransformState)(mouseTransformGesturePrev,gestures_dragging,dragVector);const directManipulationTransformGestures=select_select(getMouseTransformGesture)(mouseTransformState);const dragBox=select_select(getDragBox)(gestures_dragging,layout_draggedShape,dragVector);const layout_selectedShapeObjects=select_select(getSelectedShapeObjects)(scene,layout_shapes);const selectedShapesPrev=select_select(getSelectedShapesPrev)(scene);const layout_boxHighlightedShapes=select_select(getDragboxHighlighted)(dragBox,layout_shapes);const selectionStateFull=select_select(getSelectionStateFull)(selectedShapesPrev,configuration,layout_selectedShapeObjects,layout_hoveredShapes,mouseButton,gestures_metaHeld,multiselectModifier,layout_boxHighlightedShapes);const selectionState=select_select(getSelectionState)(selectionStateFull);const layout_selectedShapes=select_select(getSelectedShapes)(selectionStateFull);const selectedPrimaryShapeIds=select_select(getSelectedPrimaryShapeIds)(layout_selectedShapes);const symmetricManipulation=optionHeld;const resizeManipulator=select_select(getResizeManipulator)(configuration,symmetricManipulation);const directManipulationTransformIntents=select_select(getTransformIntents)(configuration,directManipulationTransformGestures,layout_selectedShapes,layout_shapes,gestures_cursorPosition,layout_alterSnapGesture,resizeManipulator);const layout_alignAction=select_select(getAlignAction)(actionEvent);const layout_distributeAction=select_select(getDistributeAction)(actionEvent);const alignDistributeTransformIntents=select_select(getAlignDistributeTransformIntents)(layout_alignAction,layout_distributeAction,layout_shapes,layout_selectedShapes);const commandTransformIntents=alignDistributeTransformIntents;const layout_transformIntents=select_select((directIntents,commandIntents)=>directIntents.concat(commandIntents))(directManipulationTransformIntents,commandTransformIntents);const transformedShapes=select_select(applyLocalTransforms)(layout_shapes,layout_transformIntents);const layout_draggedPrimaryShape=select_select(getDraggedPrimaryShape)(layout_shapes,layout_draggedShape);const alignmentGuideAnnotations=select_select(getAlignmentGuideAnnotations)(configuration,transformedShapes,layout_draggedPrimaryShape,layout_draggedShape);const shapesToHover=select_select(getShapesToHover)(dragBox,layout_hoveredShapes,layout_boxHighlightedShapes);const hoverAnnotations=select_select(getHoverAnnotations)(configuration,shapesToHover,selectedPrimaryShapeIds,layout_draggedShape);const snappedShapes=select_select(getSnappedShapes)(configuration,transformedShapes,layout_draggedShape,layout_draggedPrimaryShape,alignmentGuideAnnotations,layout_alterSnapGesture,symmetricManipulation);const constrainedShapesWithPreexistingAnnotations=select_select(getConstrainedShapesWithPreexistingAnnotations)(snappedShapes,transformedShapes);const rotationTooltipAnnotation=select_select(getRotationTooltipAnnotation)(configuration,layout_draggedPrimaryShape,layout_draggedShape,layout_transformIntents,gestures_cursorPosition);const layout_groupAction=select_select(getGroupAction)(actionEvent,mouseIsDown);const groupingTuple=select_select(getGroupingTuple)(configuration,constrainedShapesWithPreexistingAnnotations,layout_selectedShapes);const grouping=select_select(getGrouping)(configuration,constrainedShapesWithPreexistingAnnotations,layout_selectedShapes,layout_groupAction,groupingTuple);const groupedSelectedShapes=select_select(getGroupedSelectedShapes)(grouping);const groupedSelectedShapeIds=select_select(getGroupedSelectedShapeIds)(groupedSelectedShapes);const groupedSelectedPrimaryShapeIds=select_select(getGroupedSelectedPrimaryShapeIds)(groupedSelectedShapes);const adHocChildrenAnnotations=select_select(getAdHocChildrenAnnotations)(configuration,grouping);const resizeAnnotations=select_select(resizeAnnotationsFunction)(configuration,grouping);const rotationAnnotations=select_select(getRotationAnnotations)(configuration,grouping);const dragBoxAnnotation=select_select(getDragBoxAnnotation)(configuration,dragBox);const annotatedShapes=select_select(getAnnotatedShapes)(grouping,alignmentGuideAnnotations,hoverAnnotations,rotationAnnotations,resizeAnnotations,rotationTooltipAnnotation,adHocChildrenAnnotations,dragBoxAnnotation);const globalTransformShapes=select_select(cascadeProperties)(annotatedShapes);const layout_cursor=select_select(getCursor)(configuration,focusedShape,layout_draggedPrimaryShape);const layout_nextScene=select_select(getNextScene)(configuration,hoveredShape,groupedSelectedShapeIds,groupedSelectedPrimaryShapeIds,globalTransformShapes,gestures_gestureEnd,layout_draggedShape,layout_cursor,selectionState,mouseTransformState,gestureState);const updater=select_select(updaterFun)(layout_nextScene,primaryUpdate);var common_lib=__webpack_require__(49);const AlignmentGuide=({transformMatrix:transformMatrix,width:width,height:height})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasAlignmentGuide canvasInteractable canvasLayoutAnnotation",style:{background:"magenta",height:height,marginLeft:-width/2,marginTop:-height/2,position:"absolute",transform:matrixToCSS(transformMatrix),width:width}});const DragBoxAnnotation=({transformMatrix:transformMatrix,width:width,height:height})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasDragBoxAnnotation canvasLayoutAnnotation",style:{height:height,marginLeft:-width/2,marginTop:-height/2,transform:matrixToCSS(transformMatrix),width:width}});const HoverAnnotation=({transformMatrix:transformMatrix,width:width,height:height})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasHoverAnnotation canvasLayoutAnnotation",style:{width:width,height:height,marginLeft:-width/2,marginTop:-height/2,transform:matrixToCSS(transformMatrix)}});const TooltipAnnotation=({transformMatrix:transformMatrix,text:text})=>{const newStyle={transform:`${matrixToCSS(transformMatrix)} translate(1em, -1em)`};return external_kbnSharedDeps_React_default.a.createElement("div",{className:"tooltipAnnotation canvasLayoutAnnotation",style:newStyle},external_kbnSharedDeps_React_default.a.createElement("p",null,text,"°"))};const RotationHandle=({transformMatrix:transformMatrix,zoomScale:zoomScale=1})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasRotationHandle canvasLayoutAnnotation",style:{transform:matrixToCSS(transformMatrix)}},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasRotationHandle__handle",style:{transform:`scale3d(${1/zoomScale},${1/zoomScale},1)`}}));const BorderConnection=({transformMatrix:transformMatrix,width:width,height:height})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasBorderConnection canvasLayoutAnnotation",style:{height:height,marginLeft:-width/2,marginTop:-height/2,position:"absolute",transform:matrixToCSS(transformMatrix),width:width}});const BorderResizeHandle=({transformMatrix:transformMatrix,zoomScale:zoomScale=1})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasBorderResizeHandle canvasLayoutAnnotation",style:{transform:`${matrixToCSS(transformMatrix)} scale3d(${1/zoomScale},${1/zoomScale}, 1)`}});const nonTextInputs=["button","checkbox","color","file","image","radio","range","reset","submit"];const isTextInput=({tagName:tagName,type:type})=>{switch(tagName.toLowerCase()){case"input":return!nonTextInputs.includes(type);case"textarea":return true;default:return false}};function workpad_shortcuts_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class workpad_shortcuts_WorkpadShortcuts extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);workpad_shortcuts_defineProperty(this,"_keyMap",{CUT:this.props.cutNodes,COPY:this.props.copyNodes,PASTE:this.props.pasteNodes,CLONE:this.props.cloneNodes,DELETE:this.props.deleteNodes,BRING_TO_FRONT:this.props.bringToFront,BRING_FORWARD:this.props.bringForward,SEND_BACKWARD:this.props.sendBackward,SEND_TO_BACK:this.props.sendToBack,GROUP:this.props.groupNodes,UNGROUP:this.props.ungroupNodes,SHIFT_UP:this.props.shiftUp,SHIFT_DOWN:this.props.shiftDown,SHIFT_LEFT:this.props.shiftLeft,SHIFT_RIGHT:this.props.shiftRight,NUDGE_UP:this.props.nudgeUp,NUDGE_DOWN:this.props.nudgeDown,NUDGE_LEFT:this.props.nudgeLeft,NUDGE_RIGHT:this.props.nudgeRight})}render(){return external_kbnSharedDeps_React_default.a.createElement(react_shortcuts_lib["Shortcuts"],{name:"ELEMENT",handler:(action,event)=>{if(!isTextInput(event.target)&&typeof this._keyMap[action]==="function"){event.preventDefault();this._keyMap[action]()}},targetNodeSelector:`body`,global:true})}shouldComponentUpdate(nextProps){return!react_fast_compare_default()(nextProps,this.props)}}const components_workpad_shortcuts_WorkpadShortcuts=Object(Recompose["compose"])(Object(Recompose["withHandlers"])(groupHandlerCreators),Object(Recompose["withHandlers"])(layerHandlerCreators),Object(Recompose["withHandlers"])(basicHandlerCreators),Object(Recompose["withHandlers"])(clipboardHandlerCreators),Object(Recompose["withHandlers"])(positionHandlerCreators))(workpad_shortcuts_WorkpadShortcuts);components_workpad_shortcuts_WorkpadShortcuts.propTypes={pageId:prop_types_default.a.string.isRequired,selectedNodes:prop_types_default.a.arrayOf(prop_types_default.a.object),elementLayer:prop_types_default.a.func.isRequired,insertNodes:prop_types_default.a.func.isRequired,removeNodes:prop_types_default.a.func.isRequired,selectToplevelNodes:prop_types_default.a.func.isRequired,commit:prop_types_default.a.func.isRequired};const BUFFER=24;class interaction_boundary_InteractionBoundary extends external_kbnSharedDeps_React_["PureComponent"]{constructor(){super();this.state={height:"0",width:"0",marginLeft:"0",marginTop:"0"}}componentDidMount(){const container=$("#"+undefined);const height=container.height();const width=container.width();if(height&&width){this.setState({height:height-BUFFER+"px",width:width-BUFFER+"px",marginLeft:-((width-BUFFER)/2)+"px",marginTop:-((height-BUFFER)/2)+"px"})}}render(){const style={top:"50%",left:"50%",position:"absolute",...this.state};return external_kbnSharedDeps_React_default.a.createElement("div",{id:"canvasInteractionBoundary",style:style})}}class interactive_workpad_page_InteractiveWorkpadPage extends external_kbnSharedDeps_React_["PureComponent"]{componentWillUnmount(){this.props.resetHandler()}render(){const{pageId:pageId,pageStyle:pageStyle,className:className,elements:elements,cursor:cursor="auto",height:height,width:width,onDoubleClick:onDoubleClick,onKeyDown:onKeyDown,onMouseDown:onMouseDown,onMouseLeave:onMouseLeave,onMouseMove:onMouseMove,onMouseUp:onMouseUp,onAnimationEnd:onAnimationEnd,onWheel:onWheel,selectedNodes:selectedNodes,selectToplevelNodes:selectToplevelNodes,insertNodes:insertNodes,removeNodes:removeNodes,elementLayer:elementLayer,canvasOrigin:canvasOrigin,saveCanvasOrigin:saveCanvasOrigin,commit:commit,setMultiplePositions:setMultiplePositions,zoomScale:zoomScale}=this.props;let shortcuts=null;const shortcutProps={elementLayer:elementLayer,insertNodes:insertNodes,pageId:pageId,removeNodes:removeNodes,selectedNodes:selectedNodes,selectToplevelNodes:selectToplevelNodes,commit:commit,setMultiplePositions:setMultiplePositions};shortcuts=external_kbnSharedDeps_React_default.a.createElement(components_workpad_shortcuts_WorkpadShortcuts,shortcutProps);return external_kbnSharedDeps_React_default.a.createElement("div",{key:pageId,id:pageId,ref:node=>{if(!canvasOrigin&&node&&node.getBoundingClientRect){saveCanvasOrigin(()=>()=>node.getBoundingClientRect())}},"data-test-subj":"canvasWorkpadPage",className:`canvasPage kbn-resetFocusState canvasInteractivePage ${className}`,"data-shared-items-container":true,style:{...pageStyle,height:height,width:width,cursor:cursor},onKeyDown:onKeyDown,onMouseMove:onMouseMove,onMouseUp:onMouseUp,onMouseDown:onMouseDown,onMouseLeave:onMouseLeave,onDoubleClick:onDoubleClick,onAnimationEnd:onAnimationEnd,onWheel:onWheel},external_kbnSharedDeps_React_default.a.createElement(interaction_boundary_InteractionBoundary,null),shortcuts,elements.map(node=>{if(node.type==="annotation"){const props={key:node.id,type:node.type,transformMatrix:node.transformMatrix,width:node.width,height:node.height,text:node.text,zoomScale:zoomScale};switch(node.subtype){case"alignmentGuide":return external_kbnSharedDeps_React_default.a.createElement(AlignmentGuide,props);case"adHocChildAnnotation":case"hoverAnnotation":return external_kbnSharedDeps_React_default.a.createElement(HoverAnnotation,props);case"dragBoxAnnotation":return external_kbnSharedDeps_React_default.a.createElement(DragBoxAnnotation,props);case"rotationHandle":return external_kbnSharedDeps_React_default.a.createElement(RotationHandle,props);case"resizeHandle":return external_kbnSharedDeps_React_default.a.createElement(BorderResizeHandle,props);case"resizeConnector":return external_kbnSharedDeps_React_default.a.createElement(BorderConnection,props);case"rotationTooltip":return external_kbnSharedDeps_React_default.a.createElement(TooltipAnnotation,props);default:return[]}}else if(node.type!=="group"){return external_kbnSharedDeps_React_default.a.createElement(element_wrapper_ElementWrapper,{key:node.id,element:node})}}).filter(element=>!!element))}}const localMousePosition=(canvasOrigin,clientX,clientY,zoomScale=1)=>{const{left:left,top:top}=canvasOrigin();return{x:(clientX-left)/zoomScale,y:(clientY-top)/zoomScale}};const resetHandler=()=>{window.onmousemove=null;window.onmouseup=null};const setupHandler=(commit,canvasOrigin,zoomScale)=>{window.onmousemove=({buttons:buttons,clientX:clientX,clientY:clientY,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey})=>{const{x:x,y:y}=localMousePosition(canvasOrigin,clientX,clientY,zoomScale);if(buttons===1||canvasOrigin){commit("cursorPosition",{x:x,y:y,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey})}else{commit("cursorPosition",{})}};window.onmouseup=e=>{e.stopPropagation();const{clientX:clientX,clientY:clientY,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey}=e;const{x:x,y:y}=localMousePosition(canvasOrigin,clientX,clientY,zoomScale);commit("mouseEvent",{event:"mouseUp",x:x,y:y,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey});resetHandler()}};const handleMouseMove=(commit,{clientX:clientX,clientY:clientY,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey},canvasOrigin,zoomScale)=>{const{x:x,y:y}=localMousePosition(canvasOrigin,clientX,clientY,zoomScale);if(commit){commit("cursorPosition",{x:x,y:y,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey})}};const handleMouseLeave=(commit,{buttons:buttons})=>{if(buttons!==1&&commit){commit("cursorPosition",{})}};const handleMouseDown=(commit,e,canvasOrigin,zoomScale,allowDrag=true)=>{e.stopPropagation();const{clientX:clientX,clientY:clientY,buttons:buttons,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey}=e;if(buttons!==1||!commit){resetHandler();return}if(allowDrag){setupHandler(commit,canvasOrigin,zoomScale)}const{x:x,y:y}=localMousePosition(canvasOrigin,clientX,clientY,zoomScale);commit("mouseEvent",{event:"mouseDown",x:x,y:y,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey});if(!allowDrag){commit("mouseEvent",{event:"mouseUp",x:x,y:y,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey})}};const eventHandlers={onMouseDown:props=>e=>handleMouseDown(props.commit,e,props.canvasOrigin,props.zoomScale,props.canDragElement(e.target)),onMouseMove:props=>e=>handleMouseMove(props.commit,e,props.canvasOrigin,props.zoomScale),onMouseLeave:props=>e=>handleMouseLeave(props.commit,e),onWheel:props=>e=>handleMouseMove(props.commit,e,props.canvasOrigin),resetHandler:()=>()=>resetHandler()};const workpad_interactive_page_configuration={getAdHocChildAnnotationName:"adHocChildAnnotation",adHocGroupName:"adHocGroup",alignmentGuideName:"alignmentGuide",atopZ:1e3,depthSelect:true,devColor:"magenta",dragBoxAnnotationName:"dragBoxAnnotation",dragBoxZ:1050,groupName:"group",groupResize:true,guideDistance:3,hoverAnnotationName:"hoverAnnotation",hoverLift:100,intraGroupManipulation:false,intraGroupSnapOnly:false,minimumElementSize:2,persistentGroupName:"persistentGroup",resizeAnnotationConnectorOffset:0,resizeAnnotationOffset:0,resizeAnnotationOffsetZ:.1,resizeAnnotationSize:10,resizeConnectorName:"resizeConnector",resizeHandleName:"resizeHandle",rotateAnnotationOffset:12,rotateSnapInPixels:10,rotationEpsilon:.001,rotationHandleName:"rotationHandle",rotationHandleSize:14,rotationTooltipName:"rotationTooltip",shortcuts:false,singleSelect:false,snapConstraint:true,tooltipZ:1100};function closest(s){let el=this;const matchFn=el.matches?"matches":"msMatchesSelector";do{if(el[matchFn](s)){return el}el=el.parentElement||el.parentNode}while(el!==null&&el.nodeType===1);return null}const isEmbeddableBody=element=>{const hasClosest=typeof element.closest==="function";if(hasClosest){return element.closest(`.${common_lib["CANVAS_EMBEDDABLE_CLASSNAME"]}`)&&!element.closest(".embPanel__header")}else{return closest.call(element,`.${common_lib["CANVAS_EMBEDDABLE_CLASSNAME"]}`)&&!closest.call(element,".embPanel__header")}};const isInWorkpad=element=>{const hasClosest=typeof element.closest==="function";const workpadContainerSelector=".canvasWorkpadContainer";if(hasClosest){return!!element.closest(workpadContainerSelector)}else{return!!closest.call(element,workpadContainerSelector)}};const componentLayoutState=({aeroStore:aeroStore,setAeroStore:setAeroStore,elements:elements,selectedToplevelNodes:selectedToplevelNodes,height:height,width:width})=>{const shapes=shapesForNodes(elements);const selectedShapes=selectedToplevelNodes.filter(e=>shapes.find(s=>s.id===e));const newState={primaryUpdate:null,currentScene:{shapes:shapes,configuration:{...workpad_interactive_page_configuration,pageHeight:height,pageWidth:width},selectedShapes:selectedShapes,selectionState:aeroStore?aeroStore.getCurrentState().currentScene.selectionState:{uid:0,depthIndex:0,down:false},gestureState:aeroStore?aeroStore.getCurrentState().currentScene.gestureState:{cursor:{x:Infinity,y:Infinity},mouseIsDown:false,mouseButtonState:{buttonState:"up",downX:null,downY:null}}}};if(aeroStore){aeroStore.setCurrentState(newState)}else{setAeroStore(aeroStore=createStore(newState,updater))}return{aeroStore:aeroStore}};const workpad_interactive_page_mapStateToProps=(state,ownProps)=>{const selectedToplevelNodes=state.transient.selectedToplevelNodes;const nodes=getNodes(state,ownProps.pageId);const selectedPrimaryShapeObjects=selectedToplevelNodes.map(id=>nodes.find(s=>s.id===id)).filter(shape=>shape);const selectedPersistentPrimaryNodes=flatten(selectedPrimaryShapeObjects.map(shape=>nodes.find(n=>n.id===shape.id)?[shape.id]:nodes.filter(s=>s.parent===shape.id).map(s=>s.id)));const selectedNodeIds=flatten(selectedPersistentPrimaryNodes.map(crawlTree(nodes)));return{state:state,isEditable:!getFullscreen(state)&&workpad_isWriteable(state)&&app_canUserWrite(state),elements:nodes,selectedToplevelNodes:selectedToplevelNodes,selectedNodes:selectedNodeIds.map(id=>nodes.find(s=>s.id===id)),pageStyle:getPageById(state,ownProps.pageId).style,zoomScale:getZoomScale(state)}};const workpad_interactive_page_mapDispatchToProps=dispatch=>({dispatch:dispatch,insertNodes:(selectedNodes,pageId)=>dispatch(elements_insertNodes(selectedNodes,pageId)),removeNodes:(nodeIds,pageId)=>dispatch(removeElements(nodeIds,pageId)),selectToplevelNodes:nodes=>dispatch(transient_selectToplevelNodes(nodes.filter(e=>!e.position.parent).map(e=>e.id))),elementLayer:(pageId,elementId,movement)=>dispatch(elements_elementLayer({pageId:pageId,elementId:elementId,movement:movement})),setMultiplePositions:pageId=>repositionedNodes=>dispatch(elements_setMultiplePositions(repositionedNodes.map(node=>({...node,pageId:pageId,elementId:node.id}))))});const workpad_interactive_page_mergeProps=({state:state,...restStateProps},{dispatch:dispatch,...restDispatchProps},ownProps)=>({...ownProps,...restDispatchProps,...restStateProps,updateGlobalState:globalStateUpdater(dispatch,state),setMultiplePositions:restDispatchProps.setMultiplePositions(ownProps.pageId)});const InteractivePage=Object(Recompose["compose"])(Object(lib["connect"])(workpad_interactive_page_mapStateToProps,workpad_interactive_page_mapDispatchToProps,workpad_interactive_page_mergeProps),Object(Recompose["withState"])("aeroStore","setAeroStore"),Object(Recompose["withProps"])(componentLayoutState),Object(Recompose["withProps"])(({aeroStore:aeroStore,updateGlobalState:updateGlobalState})=>({commit:(type,payload)=>{const newLayoutState=aeroStore.commit(type,payload);if(newLayoutState.currentScene.gestureEnd){updateGlobalState(newLayoutState)}}})),Object(Recompose["lifecycle"])({componentWillUnmount(){this.props.unregisterLayout(this.props.aeroStore)}}),Object(Recompose["withState"])("canvasOrigin","saveCanvasOrigin"),Object(Recompose["withState"])("_forceRerender","forceRerender"),Object(Recompose["withProps"])(({registerLayout:registerLayout,aeroStore:aeroStore,updateGlobalState:updateGlobalState,forceRerender:forceRerender})=>{registerLayout((type,payload)=>{const newLayoutState=aeroStore.commit(type,payload);if(newLayoutState.currentScene.gestureEnd){updateGlobalState(newLayoutState)}forceRerender(newLayoutState);return newLayoutState});return{cursor:aeroStore.getCurrentState().currentScene.cursor}}),Object(Recompose["withProps"])(({aeroStore:aeroStore,elements:elements})=>{const elementLookup=new Map(elements.map(element=>[element.id,element]));const elementsToRender=aeroStore.getCurrentState().currentScene.shapes.map(shape=>{const element=elementLookup.get(shape.id);return element?{...shape,width:shape.a*2,height:shape.b*2,filter:element.filter}:shape});return{elements:elementsToRender}}),Object(Recompose["withProps"])(({commit:commit,forceRerender:forceRerender})=>({commit:(...args)=>forceRerender(commit(...args))})),Object(Recompose["withProps"])((...props)=>({...props,canDragElement:element=>{return!isEmbeddableBody(element)&&isInWorkpad(element);const hasClosest=typeof element.closest==="function";if(hasClosest){return!element.closest(".embeddable")||element.closest(".embPanel__header")}else{return!closest.call(element,".embeddable")||closest.call(element,".embPanel__header")}}})),Object(Recompose["withHandlers"])(eventHandlers),()=>interactive_workpad_page_InteractiveWorkpadPage);const animationProps=({animation:animation,isSelected:isSelected})=>animation?{className:animation.name+" "+(isSelected?"isActive":"isInactive"),animationStyle:{animationDirection:animation.direction,animationDuration:"1s"}}:{className:isSelected?"isActive":"isInactive",animationStyle:{}};const workpad_page_mapStateToProps=(state,{isSelected:isSelected,pageId:pageId})=>({isInteractive:isSelected&&!getFullscreen(state)&&workpad_isWriteable(state)&&app_canUserWrite(state),elements:getNodes(state,pageId),pageStyle:getPageById(state,pageId).style});const WorkpadPage=Object(Recompose["compose"])(Object(Recompose["shouldUpdate"])(not(react_fast_compare_default.a)),Object(Recompose["withProps"])(animationProps),Object(lib["connect"])(workpad_page_mapStateToProps),Object(Recompose["branch"])(({isInteractive:isInteractive})=>isInteractive,InteractivePage,StaticPage))();WorkpadPage.propTypes={pageId:prop_types_default.a.string.isRequired};function fullscreen_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class fullscreen_Fullscreen extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args);fullscreen_defineProperty(this,"state",{width:0,height:0});fullscreen_defineProperty(this,"getWindowSize",()=>({width:this.win.innerWidth,height:this.win.innerHeight}));fullscreen_defineProperty(this,"onWindowResize",Object(external_kbnSharedDeps_Lodash_["debounce"])(()=>{const{width:width,height:height}=this.getWindowSize();this.setState({width:width,height:height})},100))}UNSAFE_componentWillMount(){this.win=Object(get_window["a"])();this.setState({width:this.win.innerWidth,height:this.win.innerHeight})}componentDidMount(){this.win.addEventListener("resize",this.onWindowResize)}componentWillUnmount(){this.win.removeEventListener("resize",this.onWindowResize)}render(){const{isFullscreen:isFullscreen,children:children}=this.props;const windowSize={width:this.state.width,height:this.state.height};return children({isFullscreen:isFullscreen,windowSize:windowSize})}}const fullscreen_mapStateToProps=state=>({isFullscreen:getFullscreen(state)});const components_fullscreen_Fullscreen=Object(lib["connect"])(fullscreen_mapStateToProps)(fullscreen_Fullscreen);function workpad_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class workpad_Workpad extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args);workpad_defineProperty(this,"_toggleFullscreen",()=>{const{setFullscreen:setFullscreen,isFullscreen:isFullscreen}=this.props;setFullscreen(!isFullscreen)});workpad_defineProperty(this,"_keyMap",{REFRESH:this.props.fetchAllRenderables,UNDO:this.props.undoHistory,REDO:this.props.redoHistory,GRID:()=>this.props.setGrid(!this.props.grid),ZOOM_IN:this.props.zoomIn,ZOOM_OUT:this.props.zoomOut,ZOOM_RESET:this.props.resetZoom,PREV:this.props.previousPage,NEXT:this.props.nextPage,FULLSCREEN:this._toggleFullscreen});workpad_defineProperty(this,"_keyHandler",(action,event)=>{if(!isTextInput(event.target)&&typeof this._keyMap[action]==="function"){event.preventDefault();this._keyMap[action]()}})}render(){const{selectedPageNumber:selectedPageNumber,getAnimation:getAnimation,onTransitionEnd:onTransitionEnd,pages:pages,totalElementCount:totalElementCount,width:width,height:height,workpadCss:workpadCss,grid:grid,isFullscreen:isFullscreen,registerLayout:registerLayout,unregisterLayout:unregisterLayout,zoomScale:zoomScale}=this.props;const bufferStyle={height:isFullscreen?height:(height+2*constants["B"])*zoomScale,width:isFullscreen?width:(width+2*constants["B"])*zoomScale};return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasWorkpad__buffer",style:bufferStyle},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasCheckered",style:{height:height,width:width,transformOrigin:"0 0",transform:isFullscreen?undefined:`scale3d(${zoomScale}, ${zoomScale}, 1)`}},!isFullscreen&&external_kbnSharedDeps_React_default.a.createElement(react_shortcuts_lib["Shortcuts"],{name:"EDITOR",handler:this._keyHandler,targetNodeSelector:"body",global:true}),external_kbnSharedDeps_React_default.a.createElement(components_fullscreen_Fullscreen,null,({isFullscreen:isFullscreen,windowSize:windowSize})=>{const scale=Math.min(windowSize.height/height,windowSize.width/width);const fsStyle=isFullscreen?{transform:`scale3d(${scale}, ${scale}, 1)`,WebkitTransform:`scale3d(${scale}, ${scale}, 1)`,msTransform:`scale3d(${scale}, ${scale}, 1)`,height:windowSize.height<height?"auto":height,width:windowSize.width<width?"auto":width}:{};return style_it_default.a.it(workpadCss,external_kbnSharedDeps_React_default.a.createElement("div",{className:`canvasWorkpad ${isFullscreen?"fullscreen":""}`,style:fsStyle,"data-shared-items-count":totalElementCount},isFullscreen&&external_kbnSharedDeps_React_default.a.createElement(react_shortcuts_lib["Shortcuts"],{name:"PRESENTATION",handler:this.keyHandler,targetNodeSelector:"body",global:true}),pages.map((page,i)=>external_kbnSharedDeps_React_default.a.createElement(WorkpadPage,{key:page.id,pageId:page.id,height:height,width:width,isSelected:i+1===selectedPageNumber,animation:getAnimation(i+1),onAnimationEnd:onTransitionEnd,registerLayout:registerLayout,unregisterLayout:unregisterLayout})),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasGrid",style:{height:height,width:width,display:grid?"block":"none"}})))})))}}const workpad_mapStateToProps=state=>{const{width:width,height:height,id:workpadId,css:workpadCss}=getWorkpad(state);return{pages:getPages(state),selectedPageNumber:getSelectedPageIndex(state)+1,totalElementCount:getAllElements(state).length,width:width,height:height,workpadCss:workpadCss,workpadId:workpadId,isFullscreen:getFullscreen(state),zoomScale:getZoomScale(state)}};const workpad_mapDispatchToProps={undoHistory:history_undoHistory,redoHistory:history_redoHistory,fetchAllRenderables:fetchAllRenderables,setZoomScale:transient_setZoomScale,setFullscreen:setFullscreen};const workpad_mergeProps=(stateProps,dispatchProps,ownProps)=>({...ownProps,...stateProps,...dispatchProps,setFullscreen:value=>{dispatchProps.setFullscreen(value);if(value===true){trackCanvasUiMetric(METRIC_TYPE.COUNT,stateProps.autoplayEnabled?[constants["u"],constants["v"]]:constants["u"])}}});const components_workpad_Workpad=Object(Recompose["compose"])(Recompose["pure"],Object(Recompose["getContext"])({router:prop_types_default.a.object}),Object(Recompose["withState"])("grid","setGrid",false),Object(lib["connect"])(workpad_mapStateToProps,workpad_mapDispatchToProps,workpad_mergeProps),Object(Recompose["withState"])("transition","setTransition",null),Object(Recompose["withState"])("prevSelectedPageNumber","setPrevSelectedPageNumber",0),Object(Recompose["withProps"])(({selectedPageNumber:selectedPageNumber,prevSelectedPageNumber:prevSelectedPageNumber,transition:transition})=>{function getAnimation(pageNumber){if(!transition||!transition.name){return null}if(![selectedPageNumber,prevSelectedPageNumber].includes(pageNumber)){return null}const{enter:enter,exit:exit}=transitionsRegistry.get(transition.name);const laterPageNumber=Math.max(selectedPageNumber,prevSelectedPageNumber);const name=pageNumber===laterPageNumber?enter:exit;const direction=prevSelectedPageNumber>selectedPageNumber?"reverse":"normal";return{name:name,direction:direction}}return{getAnimation:getAnimation}}),Object(Recompose["withHandlers"])({onPageChange:props=>pageNumber=>{if(pageNumber===props.selectedPageNumber){return}props.setPrevSelectedPageNumber(props.selectedPageNumber);const transitionPage=Math.max(props.selectedPageNumber,pageNumber)-1;const{transition:transition}=props.pages[transitionPage];if(transition){props.setTransition(transition)}props.router.navigateTo("loadWorkpad",{id:props.workpadId,page:pageNumber})}}),Object(Recompose["withHandlers"])({onTransitionEnd:({setTransition:setTransition})=>()=>setTransition(null),nextPage:props=>()=>{const pageNumber=Math.min(props.selectedPageNumber+1,props.pages.length);props.onPageChange(pageNumber)},previousPage:props=>()=>{const pageNumber=Math.max(1,props.selectedPageNumber-1);props.onPageChange(pageNumber)}}),Object(Recompose["withHandlers"])(zoomHandlerCreators))(workpad_Workpad);const{WorkpadHeaderRefreshControlSettings:refresh_control_component_strings}=i18n["e"];const RefreshControl=({doRefresh:doRefresh,inFlight:inFlight})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"bottom",content:external_kbnSharedDeps_React_default.a.createElement("span",null,refresh_control_component_strings.getRefreshTooltip(),external_kbnSharedDeps_React_default.a.createElement(tool_tip_shortcut_ToolTipShortcut,{namespace:"EDITOR",action:"REFRESH"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{disabled:inFlight,iconType:"refresh","aria-label":refresh_control_component_strings.getRefreshAriaLabel(),onClick:doRefresh,"data-test-subj":"canvas-refresh-control"}));const refresh_control_mapStateToProps=state=>({inFlight:getInFlight(state)});const refresh_control_mapDispatchToProps={doRefresh:fetchAllRenderables};const refresh_control_RefreshControl=Object(lib["connect"])(refresh_control_mapStateToProps,refresh_control_mapDispatchToProps)(RefreshControl);function fullscreen_control_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class fullscreen_control_FullscreenControl extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args);fullscreen_control_defineProperty(this,"_toggleFullscreen",()=>{const{setFullscreen:setFullscreen,isFullscreen:isFullscreen}=this.props;setFullscreen(!isFullscreen)});fullscreen_control_defineProperty(this,"_keyMap",{REFRESH:this.props.fetchAllRenderables,PREV:this.props.previousPage,NEXT:this.props.nextPage,FULLSCREEN:this._toggleFullscreen,FULLSCREEN_EXIT:this._toggleFullscreen,PAGE_CYCLE_TOGGLE:()=>this.props.enableAutoplay(!this.props.autoplayEnabled)});fullscreen_control_defineProperty(this,"_keyHandler",(action,event)=>{if(Object.keys(this._keyMap).indexOf(action)<0){return}if(!isTextInput(event.target)&&typeof this._keyMap[action]==="function"){event.preventDefault();this._keyMap[action]()}})}render(){const{children:children,isFullscreen:isFullscreen}=this.props;return external_kbnSharedDeps_React_default.a.createElement("span",null,isFullscreen&&external_kbnSharedDeps_React_default.a.createElement(react_shortcuts_lib["Shortcuts"],{name:"PRESENTATION",handler:this._keyHandler,targetNodeSelector:"body",global:true,isolate:true}),children({isFullscreen:isFullscreen,toggleFullscreen:this._toggleFullscreen}))}}const fullscreen_control_mapStateToProps=state=>({workpadId:getWorkpad(state).id,pages:getPages(state),selectedPageNumber:getSelectedPageIndex(state)+1,isFullscreen:getFullscreen(state),autoplayEnabled:getAutoplay(state).enabled});const fullscreen_control_mapDispatchToProps=dispatch=>({setFullscreen:value=>{dispatch(setFullscreen(value));value&&dispatch(transient_selectToplevelNodes([]))},enableAutoplay:enabled=>dispatch(workpad_enableAutoplay(enabled)),fetchAllRenderables:()=>dispatch(fetchAllRenderables())});const fullscreen_control_mergeProps=(stateProps,dispatchProps,ownProps)=>({...ownProps,...stateProps,...dispatchProps,setFullscreen:value=>{dispatchProps.setFullscreen(value);if(value===true){trackCanvasUiMetric(METRIC_TYPE.COUNT,stateProps.autoplayEnabled?[constants["u"],constants["v"]]:constants["u"])}}});const workpad_header_fullscreen_control_FullscreenControl=Object(Recompose["compose"])(Object(Recompose["getContext"])({router:prop_types_default.a.object}),Object(lib["connect"])(fullscreen_control_mapStateToProps,fullscreen_control_mapDispatchToProps,fullscreen_control_mergeProps),Object(Recompose["withState"])("transition","setTransition",null),Object(Recompose["withState"])("prevSelectedPageNumber","setPrevSelectedPageNumber",0),Object(Recompose["withProps"])(({selectedPageNumber:selectedPageNumber,prevSelectedPageNumber:prevSelectedPageNumber,transition:transition})=>{function getAnimation(pageNumber){if(!transition||!transition.name){return null}if(![selectedPageNumber,prevSelectedPageNumber].includes(pageNumber)){return null}const{enter:enter,exit:exit}=transitionsRegistry.get(transition.name);const laterPageNumber=Math.max(selectedPageNumber,prevSelectedPageNumber);const name=pageNumber===laterPageNumber?enter:exit;const direction=prevSelectedPageNumber>selectedPageNumber?"reverse":"normal";return{name:name,direction:direction}}return{getAnimation:getAnimation}}),Object(Recompose["withHandlers"])({onPageChange:props=>pageNumber=>{if(pageNumber===props.selectedPageNumber){return}props.setPrevSelectedPageNumber(props.selectedPageNumber);const transitionPage=Math.max(props.selectedPageNumber,pageNumber)-1;const{transition:transition}=props.pages[transitionPage];if(transition){props.setTransition(transition)}props.router.navigateTo("loadWorkpad",{id:props.workpadId,page:pageNumber})}}),Object(Recompose["withHandlers"])({onTransitionEnd:({setTransition:setTransition})=>()=>setTransition(null),nextPage:props=>()=>{const pageNumber=Math.min(props.selectedPageNumber+1,props.pages.length);props.onPageChange(pageNumber)},previousPage:props=>()=>{const pageNumber=Math.max(1,props.selectedPageNumber-1);props.onPageChange(pageNumber)}}))(fullscreen_control_FullscreenControl);const flattenPanelTree=(tree,array=[])=>{array.push(tree);if(tree.items){tree.items.forEach(item=>{const{panel:panel}=item;if(panel){flattenPanelTree(panel,array);item.panel=panel.id}})}return array};var lib_dataurl=__webpack_require__(24);function element_card_extends(){element_card_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return element_card_extends.apply(this,arguments)}const element_card_tagType="badge";const ElementCard=({title:title,description:description,image:image,tags:tags=[],onClick:onClick,...rest})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCard"],element_card_extends({className:image?"canvasElementCard":"canvasElementCard canvasElementCard--hasIcon",textAlign:"left",title:title,description:description,footer:external_kbnSharedDeps_React_default.a.createElement(tag_list_TagList,{tags:tags,tagType:element_card_tagType}),image:image,icon:image?undefined:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"canvasApp",size:"xxl"}),onClick:onClick},rest));function custom_element_modal_extends(){custom_element_modal_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return custom_element_modal_extends.apply(this,arguments)}function custom_element_modal_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const MAX_NAME_LENGTH=40;const MAX_DESCRIPTION_LENGTH=100;const{CustomElementModal:custom_element_modal_strings}=components["a"];class custom_element_modal_CustomElementModal extends external_kbnSharedDeps_React_["PureComponent"]{constructor(...args){super(...args);custom_element_modal_defineProperty(this,"state",{name:this.props.name||"",description:this.props.description||"",image:this.props.image||""});custom_element_modal_defineProperty(this,"_handleChange",(type,value)=>{this.setState({[type]:value})});custom_element_modal_defineProperty(this,"_handleUpload",files=>{if(files==null)return;const file=files[0];const[type,subtype]=Object(external_kbnSharedDeps_Lodash_["get"])(file,"type","").split("/");if(type==="image"&&constants["A"].indexOf(subtype)>=0){Object(lib_dataurl["a"])(file).then(dataurl=>this._handleChange("image",dataurl))}})}render(){const{onSave:onSave,onCancel:onCancel,title:title,...rest}=this.props;const{name:name,description:description,image:image}=this.state;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],custom_element_modal_extends({},rest,{className:`canvasCustomElementModal`,maxWidth:700,onClose:onCancel,initialFocus:".canvasCustomElementForm__name"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h3",null,title))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",alignItems:"flexStart"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"canvasCustomElementForm",grow:2},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:custom_element_modal_strings.getNameInputLabel(),helpText:custom_element_modal_strings.getCharactersRemainingDescription(MAX_NAME_LENGTH-name.length),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{value:name,className:"canvasCustomElementForm__name",onChange:e=>e.target.value.length<=MAX_NAME_LENGTH&&this._handleChange("name",e.target.value),required:true,"data-test-subj":"canvasCustomElementForm-name"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:custom_element_modal_strings.getDescriptionInputLabel(),helpText:custom_element_modal_strings.getCharactersRemainingDescription(MAX_DESCRIPTION_LENGTH-description.length)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextArea"],{value:description,rows:2,onChange:e=>e.target.value.length<=MAX_DESCRIPTION_LENGTH&&this._handleChange("description",e.target.value),"data-test-subj":"canvasCustomElementForm-description"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{className:"canvasCustomElementForm__thumbnail",label:custom_element_modal_strings.getImageInputLabel(),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilePicker"],{initialPromptText:custom_element_modal_strings.getImageFilePickerPlaceholder(),onChange:this._handleUpload,className:"canvasImageUpload",accept:"image/*"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{className:"canvasCustomElementForm__thumbnailHelp",size:"xs"},external_kbnSharedDeps_React_default.a.createElement("p",null,custom_element_modal_strings.getImageInputDescription()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"canvasElementCard__wrapper canvasCustomElementForm__preview",grow:1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xxxs"},external_kbnSharedDeps_React_default.a.createElement("h4",null,custom_element_modal_strings.getElementPreviewTitle())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(ElementCard,{title:name,description:description,image:image})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:onCancel},custom_element_modal_strings.getCancelButtonLabel())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:()=>{onSave(name,description,image)},"data-test-subj":"canvasCustomElementForm-submit"},custom_element_modal_strings.getSaveButtonLabel())))))}}const{WorkpadHeaderEditMenu:edit_menu_component_strings}=components["a"];const edit_menu_component_shortcutHelp=i18n_shortcuts["a"].getShortcutHelp();const EditMenu=({cutNodes:cutNodes,copyNodes:copyNodes,pasteNodes:pasteNodes,deleteNodes:deleteNodes,cloneNodes:cloneNodes,bringToFront:bringToFront,bringForward:bringForward,sendBackward:sendBackward,sendToBack:sendToBack,alignLeft:alignLeft,alignCenter:alignCenter,alignRight:alignRight,alignTop:alignTop,alignMiddle:alignMiddle,alignBottom:alignBottom,distributeHorizontally:distributeHorizontally,distributeVertically:distributeVertically,createCustomElement:createCustomElement,selectedNodes:selectedNodes,groupIsSelected:groupIsSelected,groupNodes:groupNodes,ungroupNodes:ungroupNodes,undoHistory:undoHistory,redoHistory:redoHistory,hasPasteData:hasPasteData})=>{const[isModalVisible,setModalVisible]=Object(external_kbnSharedDeps_React_["useState"])(false);const showModal=()=>setModalVisible(true);const hideModal=()=>setModalVisible(false);const handleSave=(name,description,image)=>{createCustomElement(name,description,image);hideModal()};const editControl=togglePopover=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs","aria-label":edit_menu_component_strings.getEditMenuLabel(),onClick:togglePopover,"data-test-subj":"canvasWorkpadEditMenuButton"},edit_menu_component_strings.getEditMenuButtonLabel());const getPanelTree=closePopover=>{const groupMenuItem=groupIsSelected?{name:edit_menu_component_strings.getUngroupMenuItemLabel(),className:constants["n"],icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"empty",size:"m"}),onClick:()=>{ungroupNodes();closePopover()}}:{name:edit_menu_component_strings.getGroupMenuItemLabel(),className:constants["n"],icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"empty",size:"m"}),disabled:selectedNodes.length<2,onClick:()=>{groupNodes();closePopover()}};const orderMenuItem={name:edit_menu_component_strings.getOrderMenuItemLabel(),disabled:selectedNodes.length!==1,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"empty",size:"m"}),panel:{id:1,title:edit_menu_component_strings.getOrderMenuItemLabel(),items:[{name:edit_menu_component_shortcutHelp.BRING_TO_FRONT,icon:"sortUp",onClick:bringToFront},{name:edit_menu_component_shortcutHelp.BRING_FORWARD,icon:"arrowUp",onClick:bringForward},{name:edit_menu_component_shortcutHelp.SEND_BACKWARD,icon:"arrowDown",onClick:sendBackward},{name:edit_menu_component_shortcutHelp.SEND_TO_BACK,icon:"sortDown",onClick:sendToBack}]}};const alignmentMenuItem={name:edit_menu_component_strings.getAlignmentMenuItemLabel(),className:"canvasContextMenu",disabled:groupIsSelected||selectedNodes.length<2,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"empty",size:"m"}),panel:{id:2,title:edit_menu_component_strings.getAlignmentMenuItemLabel(),items:[{name:edit_menu_component_strings.getLeftAlignMenuItemLabel(),icon:"editorItemAlignLeft",onClick:()=>{alignLeft();closePopover()}},{name:edit_menu_component_strings.getCenterAlignMenuItemLabel(),icon:"editorItemAlignCenter",onClick:()=>{alignCenter();closePopover()}},{name:edit_menu_component_strings.getRightAlignMenuItemLabel(),icon:"editorItemAlignRight",onClick:()=>{alignRight();closePopover()}},{name:edit_menu_component_strings.getTopAlignMenuItemLabel(),icon:"editorItemAlignTop",onClick:()=>{alignTop();closePopover()}},{name:edit_menu_component_strings.getMiddleAlignMenuItemLabel(),icon:"editorItemAlignMiddle",onClick:()=>{alignMiddle();closePopover()}},{name:edit_menu_component_strings.getBottomAlignMenuItemLabel(),icon:"editorItemAlignBottom",onClick:()=>{alignBottom();closePopover()}}]}};const distributionMenuItem={name:edit_menu_component_strings.getDistributionMenuItemLabel(),className:"canvasContextMenu",disabled:groupIsSelected||selectedNodes.length<3,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"empty",size:"m"}),panel:{id:3,title:edit_menu_component_strings.getAlignmentMenuItemLabel(),items:[{name:edit_menu_component_strings.getHorizontalDistributionMenuItemLabel(),icon:"editorDistributeHorizontal",onClick:()=>{distributeHorizontally();closePopover()}},{name:edit_menu_component_strings.getVerticalDistributionMenuItemLabel(),icon:"editorDistributeVertical",onClick:()=>{distributeVertically();closePopover()}}]}};const savedElementMenuItem={name:edit_menu_component_strings.getSaveElementMenuItemLabel(),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"indexOpen",size:"m"}),disabled:selectedNodes.length<1,className:constants["n"],"data-test-subj":"canvasWorkpadEditMenu__saveElementButton",onClick:()=>{showModal();closePopover()}};const items=[{name:edit_menu_component_strings.getUndoMenuItemLabel(),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"editorUndo",size:"m"}),onClick:()=>{undoHistory()}},{name:edit_menu_component_strings.getRedoMenuItemLabel(),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"editorRedo",size:"m"}),onClick:()=>{redoHistory()}},{name:edit_menu_component_shortcutHelp.CUT,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"cut",size:"m"}),className:constants["n"],disabled:selectedNodes.length<1,onClick:()=>{cutNodes();closePopover()}},{name:edit_menu_component_shortcutHelp.COPY,disabled:selectedNodes.length<1,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"copy",size:"m"}),onClick:()=>{copyNodes()}},{name:edit_menu_component_shortcutHelp.PASTE,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"copyClipboard",size:"m"}),disabled:!hasPasteData,onClick:()=>{pasteNodes();closePopover()}},{name:edit_menu_component_shortcutHelp.DELETE,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"trash",size:"m"}),disabled:selectedNodes.length<1,onClick:()=>{deleteNodes();closePopover()}},{name:edit_menu_component_shortcutHelp.CLONE,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"empty",size:"m"}),disabled:selectedNodes.length<1,onClick:()=>{cloneNodes();closePopover()}},groupMenuItem,orderMenuItem,alignmentMenuItem,distributionMenuItem,savedElementMenuItem];return{id:0,items:items}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(popover["a"],{button:editControl,panelPaddingSize:"none",anchorPosition:"downLeft"},({closePopover:closePopover})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:0,panels:flattenPanelTree(getPanelTree(closePopover))})),isModalVisible?external_kbnSharedDeps_React_default.a.createElement(custom_element_modal_CustomElementModal,{title:edit_menu_component_strings.getCreateElementModalTitle(),onSave:handleSave,onCancel:hideModal}):null)};const withGlobalState=(commit,updateGlobalState)=>(type,payload)=>{const newLayoutState=commit(type,payload);if(newLayoutState.currentScene.gestureEnd){updateGlobalState(newLayoutState)}};const edit_menu_mapStateToProps=state=>{const pageId=getSelectedPage(state);const nodes=getNodes(state,pageId);const selectedToplevelNodes=getSelectedToplevelNodes(state);const selectedPrimaryShapeObjects=selectedToplevelNodes.map(id=>nodes.find(s=>s.id===id)).filter(shape=>shape);const selectedPersistentPrimaryNodes=flatten(selectedPrimaryShapeObjects.map(shape=>nodes.find(n=>n.id===shape.id)?[shape.id]:nodes.filter(s=>s.position.parent===shape.id).map(s=>s.id)));const selectedNodeIds=flatten(selectedPersistentPrimaryNodes.map(crawlTree(nodes)));const selectedNodes=selectedNodeIds.map(id=>nodes.find(s=>s.id===id)).filter(node=>!!node);return{pageId:pageId,selectedToplevelNodes:selectedToplevelNodes,selectedNodes:selectedNodes,state:state}};const edit_menu_mapDispatchToProps=dispatch=>({insertNodes:(selectedNodes,pageId)=>dispatch(elements_insertNodes(selectedNodes,pageId)),removeNodes:(nodeIds,pageId)=>dispatch(removeElements(nodeIds,pageId)),selectToplevelNodes:nodes=>dispatch(transient_selectToplevelNodes(nodes.filter(e=>!e.position.parent).map(e=>e.id))),elementLayer:(pageId,elementId,movement)=>{dispatch(elements_elementLayer({pageId:pageId,elementId:elementId,movement:movement}))},undoHistory:()=>dispatch(history_undoHistory()),redoHistory:()=>dispatch(history_redoHistory()),dispatch:dispatch});const edit_menu_mergeProps=({state:state,selectedToplevelNodes:selectedToplevelNodes,...restStateProps},{dispatch:dispatch,...restDispatchProps},{commit:commit})=>{const updateGlobalState=globalStateUpdater(dispatch,state);return{...restDispatchProps,...restStateProps,commit:withGlobalState(commit,updateGlobalState),groupIsSelected:selectedToplevelNodes.length===1&&selectedToplevelNodes[0].includes("group")}};const edit_menu_EditMenu=Object(Recompose["compose"])(Object(lib["connect"])(edit_menu_mapStateToProps,edit_menu_mapDispatchToProps,edit_menu_mergeProps),Object(Recompose["withProps"])(()=>({hasPasteData:Boolean(getClipboardData())})),Object(Recompose["withHandlers"])(basicHandlerCreators),Object(Recompose["withHandlers"])(clipboardHandlerCreators),Object(Recompose["withHandlers"])(layerHandlerCreators),Object(Recompose["withHandlers"])(groupHandlerCreators),Object(Recompose["withHandlers"])(alignmentDistributionHandlerCreators))(EditMenu);function element_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class Element{constructor(config){element_defineProperty(this,"name",void 0);element_defineProperty(this,"displayName",void 0);element_defineProperty(this,"type",void 0);element_defineProperty(this,"icon",void 0);element_defineProperty(this,"help",void 0);element_defineProperty(this,"expression",void 0);element_defineProperty(this,"filter",void 0);element_defineProperty(this,"width",void 0);element_defineProperty(this,"height",void 0);const{name:name,icon:icon,displayName:displayName,type:type,expression:expression,filter:filter,help:help,width:width,height:height}=config;this.name=name;this.displayName=displayName||name;this.icon=icon||"empty";this.help=help||"";if(!config.expression){throw new Error("Element types must have a default expression")}this.type=type;this.expression=expression;this.filter=filter;this.width=width||500;this.height=height||300}}class elements_registry_ElementsRegistry extends common["Registry"]{wrapper(obj){return new Element(obj)}}const elementsRegistry=new elements_registry_ElementsRegistry;var elastic_safer_lodash_set=__webpack_require__(247);function clipboard_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class clipboard_Clipboard extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args);clipboard_defineProperty(this,"onClick",ev=>{const{content:content,onCopy:onCopy}=this.props;ev.preventDefault();onCopy(copy_to_clipboard_default()(content.toString(),{debug:true}))})}render(){return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasClipboard",onClick:this.onClick,onKeyPress:this.onClick,role:"button",tabIndex:0},this.props.children)}}const components_clipboard_Clipboard=clipboard_Clipboard;var base64_js=__webpack_require__(75);function download_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class download_Download extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args);download_defineProperty(this,"onClick",()=>{const{fileName:fileName,content:content}=this.props;const asset=Object(lib_dataurl["c"])(content,true);if(asset&&asset.data){const assetBlob=new Blob([Object(base64_js["toByteArray"])(asset.data)],{type:asset.mimetype});const ext=asset.extension?`.${asset.extension}`:"";FileSaver_default.a.saveAs(assetBlob,`canvas-${fileName}${ext}`)}})}render(){return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasDownload",onClick:this.onClick,onKeyPress:this.onClick,tabIndex:0,role:"button"},this.props.children)}}const components_download_Download=download_Download;const{Asset:asset_component_strings}=i18n["e"];const Asset=({asset:asset,onCreate:onCreate,onDelete:onDelete})=>{const{success:success}=Object(public_services["g"])();const[isConfirmModalVisible,setIsConfirmModalVisible]=Object(external_kbnSharedDeps_React_["useState"])(false);const onCopy=result=>result&&success(`Copied '${asset.id}' to clipboard`);const confirmModal=external_kbnSharedDeps_React_default.a.createElement(confirm_modal_ConfirmModal,{isOpen:isConfirmModalVisible,title:asset_component_strings.getConfirmModalTitle(),message:asset_component_strings.getConfirmModalMessageText(),confirmButtonText:asset_component_strings.getConfirmModalButtonLabel(),onConfirm:()=>{setIsConfirmModalVisible(false);onDelete(asset)},onCancel:()=>setIsConfirmModalVisible(false)});const createImage=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"asset-create-image",grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:asset_component_strings.getCreateImageTooltip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"vector","aria-label":asset_component_strings.getCreateImageTooltip(),onClick:()=>onCreate(asset.id)})));const downloadAsset=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"asset-download",grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:asset_component_strings.getDownloadAssetTooltip()},external_kbnSharedDeps_React_default.a.createElement(components_download_Download,{fileName:asset.id,content:asset.value},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"sortDown","aria-label":asset_component_strings.getDownloadAssetTooltip()}))));const copyAsset=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:asset_component_strings.getCopyAssetTooltip()},external_kbnSharedDeps_React_default.a.createElement(components_clipboard_Clipboard,{content:asset.id,onCopy:onCopy},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"copyClipboard","aria-label":asset_component_strings.getCopyAssetTooltip()}))));const deleteAsset=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:asset_component_strings.getDeleteAssetTooltip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{color:"danger",iconType:"trash","aria-label":asset_component_strings.getDeleteAssetTooltip(),onClick:()=>setIsConfirmModalVisible(true)})));const thumbnail=external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasAsset__thumb canvasCheckered"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiImage"],{className:"canvasAsset__img",size:"original",url:asset.value,fullScreenIconColor:"dark",alt:asset_component_strings.getThumbnailAltText()}));const assetLabel=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs",className:"eui-textBreakAll"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"eui-textBreakAll"},external_kbnSharedDeps_React_default.a.createElement("strong",null,asset.id),external_kbnSharedDeps_React_default.a.createElement("br",null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("small",null,"(",Math.round(asset.value.length/1024)," kb)"))));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{key:asset.id},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{className:"canvasAsset",paddingSize:"s"},thumbnail,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),assetLabel,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"baseline",justifyContent:"center",responsive:false},createImage,downloadAsset,copyAsset,deleteAsset)),isConfirmModalVisible?confirmModal:null)};const asset_Asset=Object(lib["connect"])(state=>({selectedPage:getSelectedPage(state)}),dispatch=>({onCreate:pageId=>assetId=>{const imageElement=elementsRegistry.get("image");const elementAST=Object(common["fromExpression"])(imageElement.expression);const selector=["chain","0","arguments","dataurl"];const subExp=[{type:"expression",chain:[{type:"function",function:"asset",arguments:{_:[assetId]}}]}];const newAST=Object(elastic_safer_lodash_set["set"])(elementAST,selector,subExp);imageElement.expression=Object(common["toExpression"])(newAST);dispatch(elements_addElement(pageId,imageElement))},onDelete:asset=>dispatch(removeAsset(asset.id))}),(stateProps,dispatchProps,ownProps)=>{const{onCreate:onCreate,onDelete:onDelete}=dispatchProps;return{...ownProps,onCreate:onCreate(stateProps.selectedPage),onDelete:onDelete}})(Asset);const{AssetManager:asset_manager_component_strings}=i18n["e"];const AssetManager=props=>{const{assets:assets,onClose:onClose,onAddAsset:onAddAsset}=props;const[isLoading,setIsLoading]=Object(external_kbnSharedDeps_React_["useState"])(false);const assetsTotal=Math.round(assets.reduce((total,{value:value})=>total+value.length,0)/1024);const percentageUsed=Math.round(assetsTotal/constants["k"]*100);const emptyAssets=external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasAssetManager__emptyPanel"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"importAction",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,asset_manager_component_strings.getEmptyAssetsDescription()),titleSize:"xs"}));const onFileUpload=files=>{if(files===null){return}setIsLoading(true);Promise.all(Array.from(files).map(file=>onAddAsset(file))).finally(()=>{setIsLoading(false)})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],{onClose:()=>onClose(),className:"canvasAssetManager canvasModal--fixedSize",maxWidth:"1000px"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],{className:"canvasAssetManager__modalHeader"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],{className:"canvasAssetManager__modalHeaderTitle"},asset_manager_component_strings.getModalTitle()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:"canvasAssetManager__fileUploadWrapper"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},isLoading?external_kbnSharedDeps_React_default.a.createElement(loading_loading["a"],{animated:true,text:asset_manager_component_strings.getLoadingText()}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilePicker"],{initialPromptText:asset_manager_component_strings.getFilePickerPromptText(),compressed:true,display:"default",multiple:true,onChange:onFileUpload,accept:"image/*"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",null,asset_manager_component_strings.getDescription())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),assets.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGrid"],{columns:4},assets.map(asset=>external_kbnSharedDeps_React_default.a.createElement(asset_Asset,{asset:asset,key:asset.id}))):emptyAssets),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalFooter"],{className:"canvasAssetManager__modalFooter"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:"canvasAssetManager__meterWrapper",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiProgress"],{value:assetsTotal,max:constants["k"],color:percentageUsed<90?"secondary":"danger",size:"s","aria-labelledby":"CanvasAssetManagerLabel"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"eui-textNoWrap"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{id:"CanvasAssetManagerLabel"},asset_manager_component_strings.getSpaceUsedText(percentageUsed)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",onClick:()=>onClose()},asset_manager_component_strings.getModalCloseButtonLabel())))};const asset_manager_AssetManager=Object(lib["connect"])(state=>({assets:getAssets(state)}),dispatch=>({onAddAsset:(type,content)=>{const assetId=Object(get_id["a"])("asset");dispatch(createAsset(type,content,assetId));return assetId}}),(stateProps,dispatchProps,ownProps)=>{const{assets:assets}=stateProps;const{onAddAsset:onAddAsset}=dispatchProps;const assetValues=Object.values(assets).filter(asset=>!!asset);return{...ownProps,assets:assetValues,onAddAsset:file=>{const[type,subtype]=Object(external_kbnSharedDeps_Lodash_["get"])(file,"type","").split("/");if(type==="image"&&constants["A"].indexOf(subtype)>=0){return Object(lib_dataurl["a"])(file).then(dataurl=>{const dataurlType="dataurl";const existingId=findExistingAsset(dataurlType,dataurl,assetValues);if(existingId){return existingId}return onAddAsset(dataurlType,dataurl)})}return false}}})(AssetManager);const{ElementControls:element_controls_strings}=components["a"];const ElementControls=({onDelete:onDelete,onEdit:onEdit})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:"canvasElementCard__controls",gutterSize:"xs",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:element_controls_strings.getEditTooltip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"pencil","aria-label":element_controls_strings.getEditAriaLabel(),onClick:onEdit,"data-test-subj":"canvasElementCard__editButton"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:element_controls_strings.getDeleteTooltip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{color:"danger",iconType:"trash","aria-label":element_controls_strings.getDeleteAriaLabel(),onClick:onDelete,"data-test-subj":"canvasElementCard__deleteButton"}))));const ElementGrid=({elements:elements,filterText:filterText,onClick:onClick,onEdit:onEdit,onDelete:onDelete})=>{filterText=filterText.toLowerCase();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGrid"],{gutterSize:"l",columns:4},Object(external_kbnSharedDeps_Lodash_["map"])(elements,(element,index)=>{const{name:name,displayName:displayName="",help:help="",image:image}=element;const whenClicked=()=>onClick(element);if(filterText.length&&!name.toLowerCase().includes(filterText)&&!displayName.toLowerCase().includes(filterText)&&!help.toLowerCase().includes(filterText)){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{key:index,className:"canvasElementCard__wrapper"},external_kbnSharedDeps_React_default.a.createElement(ElementCard,{title:displayName||name,description:help,image:image,onClick:whenClicked}),external_kbnSharedDeps_React_default.a.createElement(ElementControls,{onEdit:()=>onEdit(element),onDelete:()=>onDelete(element)}))}))};ElementGrid.defaultProps={filterText:""};const{SavedElementsModal:saved_elements_modal_component_strings}=i18n["e"];const SavedElementsModal=({search:search,setSearch:setSearch,customElements:customElements,addCustomElement:addCustomElement,findCustomElements:findCustomElements,onClose:onClose,removeCustomElement:removeCustomElement,updateCustomElement:updateCustomElement})=>{const hasLoadedElements=Object(external_kbnSharedDeps_React_["useRef"])(false);const[elementToDelete,setElementToDelete]=Object(external_kbnSharedDeps_React_["useState"])(null);const[elementToEdit,setElementToEdit]=Object(external_kbnSharedDeps_React_["useState"])(null);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!hasLoadedElements.current){hasLoadedElements.current=true;findCustomElements()}},[findCustomElements,hasLoadedElements]);const showEditModal=element=>setElementToEdit(element);const hideEditModal=()=>setElementToEdit(null);const handleEdit=async(name,description,image)=>{if(elementToEdit){updateCustomElement(elementToEdit.id,name,description,image)}hideEditModal()};const showDeleteModal=element=>setElementToDelete(element);const hideDeleteModal=()=>setElementToDelete(null);const handleDelete=async()=>{if(elementToDelete){removeCustomElement(elementToDelete.id)}hideDeleteModal()};const renderEditModal=()=>{if(!elementToEdit){return null}return external_kbnSharedDeps_React_default.a.createElement(custom_element_modal_CustomElementModal,{title:saved_elements_modal_component_strings.getEditElementTitle(),name:elementToEdit.displayName,description:elementToEdit.help,image:elementToEdit.image,onSave:handleEdit,onCancel:hideEditModal})};const renderDeleteModal=()=>{if(!elementToDelete){return null}return external_kbnSharedDeps_React_default.a.createElement(ConfirmModal,{isOpen:true,title:saved_elements_modal_component_strings.getDeleteElementTitle(elementToDelete.displayName),message:saved_elements_modal_component_strings.getDeleteElementDescription(),confirmButtonText:saved_elements_modal_component_strings.getDeleteButtonLabel(),cancelButtonText:saved_elements_modal_component_strings.getCancelButtonLabel(),onConfirm:handleDelete,onCancel:hideDeleteModal})};const sortElements=elements=>Object(external_kbnSharedDeps_Lodash_["sortBy"])(elements,"displayName");const onSearch=e=>setSearch(e.target.value);let customElementContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"vector",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,saved_elements_modal_component_strings.getAddNewElementTitle()),body:external_kbnSharedDeps_React_default.a.createElement("p",null,saved_elements_modal_component_strings.getAddNewElementDescription()),titleSize:"s"});if(customElements.length){customElementContent=external_kbnSharedDeps_React_default.a.createElement(ElementGrid,{elements:sortElements(customElements),filterText:search,onClick:addCustomElement,onEdit:showEditModal,onDelete:showDeleteModal})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],{onClose:onClose,className:"canvasModal--fixedSize",maxWidth:"1000px",initialFocus:".canvasElements__filter input"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],{className:"canvasAssetManager__modalHeader"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],{className:"canvasAssetManager__modalHeaderTitle"},saved_elements_modal_component_strings.getModalTitle())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],{style:{paddingRight:"1px"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldSearch"],{fullWidth:true,value:search,placeholder:saved_elements_modal_component_strings.getFindElementPlaceholder(),onChange:onSearch}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),customElementContent),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",onClick:onClose,"data-test-subj":"saved-elements-modal-close-button"},saved_elements_modal_component_strings.getSavedElementsModalCloseButtonLabel()))),renderDeleteModal(),renderEditModal())};const customElementAdded="elements-custom-added";const saved_elements_modal_mapStateToProps=state=>({pageId:getSelectedPage(state)});const saved_elements_modal_mapDispatchToProps=dispatch=>({selectToplevelNodes:nodes=>dispatch(transient_selectToplevelNodes(nodes.filter(e=>!e.position.parent).map(e=>e.id))),insertNodes:(selectedNodes,pageId)=>dispatch(elements_insertNodes(selectedNodes,pageId))});const saved_elements_modal_mergeProps=(stateProps,dispatchProps,ownProps)=>{const{pageId:pageId}=stateProps;const{onClose:onClose,search:search,setCustomElements:setCustomElements}=ownProps;const findCustomElements=async()=>{const{customElements:customElements}=await custom_element_service_find(search);setCustomElements(customElements)};return{...ownProps,addCustomElement:customElement=>{const{selectedNodes:selectedNodes=[]}=JSON.parse(customElement.content)||{};const clonedNodes=selectedNodes&&cloneSubgraphs(selectedNodes);if(clonedNodes){dispatchProps.insertNodes(clonedNodes,pageId);dispatchProps.selectToplevelNodes(clonedNodes)}onClose();trackCanvasUiMetric(METRIC_TYPE.LOADED,customElementAdded)},findCustomElements:async text=>{try{await findCustomElements()}catch(err){ownProps.services.notify.error(err,{title:`Couldn't find custom elements`})}},removeCustomElement:async id=>{try{await custom_element_service_remove(id);await findCustomElements()}catch(err){ownProps.services.notify.error(err,{title:`Couldn't delete custom elements`})}},updateCustomElement:async(id,name,description,image)=>{try{await custom_element_service_update(id,{name:Object(external_kbnSharedDeps_Lodash_["camelCase"])(name),displayName:name,image:image,help:description});await findCustomElements()}catch(err){ownProps.services.notify.error(err,{title:`Couldn't update custom elements`})}}}};const saved_elements_modal_SavedElementsModal=Object(Recompose["compose"])(public_services["i"],Object(Recompose["withState"])("search","setSearch",""),Object(Recompose["withState"])("customElements","setCustomElements",[]),Object(lib["connect"])(saved_elements_modal_mapStateToProps,saved_elements_modal_mapDispatchToProps,saved_elements_modal_mergeProps))(SavedElementsModal);const{WorkpadHeaderElementMenu:element_menu_component_strings}=components["a"];const elementTypeMeta={chart:{name:element_menu_component_strings.getChartMenuItemLabel(),icon:"visArea"},filter:{name:element_menu_component_strings.getFilterMenuItemLabel(),icon:"filter"},image:{name:element_menu_component_strings.getImageMenuItemLabel(),icon:"image"},other:{name:element_menu_component_strings.getOtherMenuItemLabel(),icon:"empty"},progress:{name:element_menu_component_strings.getProgressMenuItemLabel(),icon:"visGoal"},shape:{name:element_menu_component_strings.getShapeMenuItemLabel(),icon:"node"},text:{name:element_menu_component_strings.getTextMenuItemLabel(),icon:"visText"}};const getElementType=element=>element&&element.type&&Object.keys(elementTypeMeta).includes(element.type)?element.type:"other";const categorizeElementsByType=elements=>{elements=Object(external_kbnSharedDeps_Lodash_["sortBy"])(elements,"displayName");const categories={other:[]};elements.forEach(element=>{const type=getElementType(element);if(categories[type]){categories[type].push(element)}else{categories[type]=[element]}});return categories};const ElementMenu=({elements:elements,addElement:addElement,renderEmbedPanel:renderEmbedPanel})=>{const[isAssetModalVisible,setAssetModalVisible]=Object(external_kbnSharedDeps_React_["useState"])(false);const[isEmbedPanelVisible,setEmbedPanelVisible]=Object(external_kbnSharedDeps_React_["useState"])(false);const[isSavedElementsModalVisible,setSavedElementsModalVisible]=Object(external_kbnSharedDeps_React_["useState"])(false);const hideAssetModal=()=>setAssetModalVisible(false);const showAssetModal=()=>setAssetModalVisible(true);const hideEmbedPanel=()=>setEmbedPanelVisible(false);const showEmbedPanel=()=>setEmbedPanelVisible(true);const hideSavedElementsModal=()=>setSavedElementsModalVisible(false);const showSavedElementsModal=()=>setSavedElementsModalVisible(true);const{chart:chartElements,filter:filterElements,image:imageElements,other:otherElements,progress:progressElements,shape:shapeElements,text:textElements}=categorizeElementsByType(Object.values(elements));const getPanelTree=closePopover=>{const elementToMenuItem=element=>({name:element.displayName||element.name,icon:element.icon,onClick:()=>{addElement(element);closePopover()}});const elementListToMenuItems=elementList=>{const type=getElementType(elementList[0]);const{name:name,icon:icon}=elementTypeMeta[type]||elementTypeMeta.other;if(elementList.length>1){return{name:name,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:icon,size:"m"}),panel:{id:Object(get_id["a"])("element-type"),title:name,items:elementList.map(elementToMenuItem)}}}return elementToMenuItem(elementList[0])};return{id:0,items:[elementListToMenuItems(textElements),elementListToMenuItems(shapeElements),elementListToMenuItems(chartElements),elementListToMenuItems(imageElements),elementListToMenuItems(filterElements),elementListToMenuItems(progressElements),elementListToMenuItems(otherElements),{name:element_menu_component_strings.getMyElementsMenuItemLabel(),className:common_lib["CONTEXT_MENU_TOP_BORDER_CLASSNAME"],"data-test-subj":"saved-elements-menu-option",icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"empty",size:"m"}),onClick:()=>{showSavedElementsModal();closePopover()}},{name:element_menu_component_strings.getAssetsMenuItemLabel(),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"empty",size:"m"}),onClick:()=>{showAssetModal();closePopover()}},{name:element_menu_component_strings.getEmbedObjectMenuItemLabel(),className:common_lib["CONTEXT_MENU_TOP_BORDER_CLASSNAME"],icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"logoKibana",size:"m"}),onClick:()=>{showEmbedPanel();closePopover()}}]}};const exportControl=togglePopover=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,iconType:"plusInCircle",size:"s","aria-label":element_menu_component_strings.getElementMenuLabel(),onClick:togglePopover,className:"canvasElementMenu__popoverButton","data-test-subj":"add-element-button"},element_menu_component_strings.getElementMenuButtonLabel());return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(popover["a"],{button:exportControl,panelPaddingSize:"none",anchorPosition:"downLeft"},({closePopover:closePopover})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:0,panels:flattenPanelTree(getPanelTree(closePopover))})),isAssetModalVisible?external_kbnSharedDeps_React_default.a.createElement(asset_manager_AssetManager,{onClose:hideAssetModal}):null,isEmbedPanelVisible?renderEmbedPanel(hideEmbedPanel):null,isSavedElementsModalVisible?external_kbnSharedDeps_React_default.a.createElement(saved_elements_modal_SavedElementsModal,{onClose:hideSavedElementsModal}):null)};var savedObjects_public_=__webpack_require__(208);const{AddEmbeddableFlyout:flyout_component_strings}=i18n["e"];const AddEmbeddableFlyout=({onSelect:onSelect,availableEmbeddables:availableEmbeddables,onClose:onClose})=>{const services=Object(public_services["h"])();const{embeddables:embeddables,platform:platform}=services;const{getEmbeddableFactories:getEmbeddableFactories}=embeddables;const{getSavedObjects:getSavedObjects,getUISettings:getUISettings}=platform;const onAddPanel=(id,savedObjectType,name)=>{const embeddableFactories=getEmbeddableFactories();const found=Array.from(embeddableFactories).find(embeddableFactory=>Boolean(embeddableFactory.savedObjectMetaData&&embeddableFactory.savedObjectMetaData.type===savedObjectType));const foundEmbeddableType=found?found.type:"unknown";onSelect(id,foundEmbeddableType)};const embeddableFactories=getEmbeddableFactories();const availableSavedObjects=Array.from(embeddableFactories).filter(factory=>availableEmbeddables.includes(factory.type)).map(factory=>factory.savedObjectMetaData).filter((function(maybeSavedObjectMetaData){return maybeSavedObjectMetaData!==undefined}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{ownFocus:true,onClose:onClose,"data-test-subj":"dashboardAddPanel"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,flyout_component_strings.getTitleText()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,external_kbnSharedDeps_React_default.a.createElement(savedObjects_public_["SavedObjectFinderUi"],{onChoose:onAddPanel,savedObjectMetaData:availableSavedObjects,showFilter:true,noItemsMessage:flyout_component_strings.getNoItemsText(),savedObjects:getSavedObjects(),uiSettings:getUISettings()})))};var embeddable=__webpack_require__(29);function flyout_extends(){flyout_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return flyout_extends.apply(this,arguments)}function flyout_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const allowedEmbeddables={[embeddable["b"].map]:id=>`savedMap id="${id}" | render`,[embeddable["b"].lens]:id=>`savedLens id="${id}" | render`,[embeddable["b"].visualization]:id=>`savedVisualization id="${id}" | render`};const flyout_mapStateToProps=state=>({pageId:getSelectedPage(state)});const flyout_mapDispatchToProps=dispatch=>({addEmbeddable:(pageId,partialElement)=>dispatch(elements_addElement(pageId,partialElement))});const flyout_mergeProps=(stateProps,dispatchProps,ownProps)=>{const{pageId:pageId,...remainingStateProps}=stateProps;const{addEmbeddable:addEmbeddable}=dispatchProps;return{...remainingStateProps,...ownProps,onSelect:(id,type)=>{const partialElement={expression:`markdown "Could not find embeddable for type ${type}" | render`};if(allowedEmbeddables[type]){partialElement.expression=allowedEmbeddables[type](id)}addEmbeddable(pageId,partialElement);ownProps.onClose()}}};class flyout_EmbeddableFlyoutPortal extends external_kbnSharedDeps_React_default.a.Component{constructor(props){super(props);flyout_defineProperty(this,"el",void 0);this.el=document.createElement("div")}componentDidMount(){const body=document.querySelector("body");if(body&&this.el){body.appendChild(this.el)}}componentWillUnmount(){const body=document.querySelector("body");if(body&&this.el){body.removeChild(this.el)}}render(){if(this.el){return external_kbnSharedDeps_ReactDom_default.a.createPortal(external_kbnSharedDeps_React_default.a.createElement(AddEmbeddableFlyout,flyout_extends({},this.props,{availableEmbeddables:Object.keys(allowedEmbeddables)})),this.el)}}}const AddEmbeddablePanel=Object(Recompose["compose"])(Object(lib["connect"])(flyout_mapStateToProps,flyout_mapDispatchToProps,flyout_mergeProps))(flyout_EmbeddableFlyoutPortal);const element_menu_mapStateToProps=state=>({pageId:getSelectedPage(state)});const element_menu_mapDispatchToProps=dispatch=>({addElement:pageId=>element=>dispatch(elements_addElement(pageId,element))});const element_menu_mergeProps=(stateProps,dispatchProps)=>({...stateProps,...dispatchProps,addElement:dispatchProps.addElement(stateProps.pageId),renderEmbedPanel:onClose=>external_kbnSharedDeps_React_default.a.createElement(AddEmbeddablePanel,{onClose:onClose})});const element_menu_ElementMenu=Object(Recompose["compose"])(Object(lib["connect"])(element_menu_mapStateToProps,element_menu_mapDispatchToProps,element_menu_mergeProps),Object(Recompose["withProps"])(()=>({elements:elementsRegistry.toJS()})))(ElementMenu);var reporting_public_=__webpack_require__(209);const{WorkpadHeaderShareMenu:pdf_panel_strings}=components["a"];const PDFPanel=({getPdfURL:getPdfURL,onExport:onExport,onCopy:onCopy})=>{const[reportLayout,setReportLayout]=Object(external_kbnSharedDeps_React_["useState"])("preserve_layout");return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasShareMenu__panelContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,pdf_panel_strings.getPDFPanelGenerateDescription())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xxs"},external_kbnSharedDeps_React_default.a.createElement("h6",null,pdf_panel_strings.getPDFPanelOptionsLabel())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{helpText:pdf_panel_strings.getPDFFullPageLayoutHelpText()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:pdf_panel_strings.getPDFFullPageLayoutLabel(),checked:reportLayout==="canvas",onChange:()=>reportLayout==="canvas"?setReportLayout("preserve_layout"):setReportLayout("canvas"),"data-test-subj":"reportModeToggle"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:()=>onExport(reportLayout),size:"s",style:{width:"100%"},"data-test-subj":"generateReportButton"},pdf_panel_strings.getPDFPanelGenerateButtonLabel()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"s",style:{width:"auto",marginLeft:"-16px",marginRight:"-16px"}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:"advanced-options",buttonContent:pdf_panel_strings.getPDFPanelAdvancedOptionsLabel(),paddingSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,pdf_panel_strings.getPDFPanelCopyDescription())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(components_clipboard_Clipboard,{content:getPdfURL(reportLayout),onCopy:onCopy},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{iconType:"copy",size:"s",style:{width:"100%"},"aria-label":pdf_panel_strings.getPDFPanelCopyAriaLabel()},pdf_panel_strings.getPDFPanelCopyButtonLabel()))))};var i18n_constants=__webpack_require__(1);const{ShareWebsiteWorkpadStep:workpad_step_strings}=components["a"];const WorkpadStep=({onDownload:onDownload})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,workpad_step_strings.getStepDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:()=>{onDownload("share")},size:"s"},workpad_step_strings.getDownloadLabel()));const{ShareWebsiteRuntimeStep:runtime_step_strings}=components["a"];const RuntimeStep=({onDownload:onDownload})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,runtime_step_strings.getStepDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:()=>{onDownload("shareRuntime")},size:"s"},runtime_step_strings.getDownloadLabel()));const{ShareWebsiteSnippetsStep:snippets_step_strings}=components["a"];const HTML=`\x3c!-- ${snippets_step_strings.getIncludeRuntimeLabel()} --\x3e\n<script src="kbn_canvas.js"><\/script>\n\n\x3c!-- ${snippets_step_strings.getPlaceholderLabel()} --\x3e\n<div kbn-canvas-shareable="canvas" kbn-canvas-url="workpad.json" />\n\n\x3c!-- ${snippets_step_strings.getCallRuntimeLabel()} --\x3e\n<script type="text/javascript">\n  KbnCanvas.share();\n<\/script>`;const SnippetsStep=({onCopy:onCopy})=>external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,snippets_step_strings.getSnippetsStepDescription())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(components_clipboard_Clipboard,{content:HTML,onCopy:onCopy},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeBlock"],{className:"canvasShareMenu__reportingConfig",paddingSize:"s",fontSize:"s",language:"html"},HTML)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("h4",null,snippets_step_strings.getParametersTitle()),external_kbnSharedDeps_React_default.a.createElement("p",null,snippets_step_strings.getParametersDescription())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,'kbn-canvas-shareable="canvas"')," (",snippets_step_strings.getRequiredLabel(),")"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,snippets_step_strings.getShareableParameterDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"kbn-canvas-url")," (",snippets_step_strings.getRequiredLabel(),")"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,snippets_step_strings.getUrlParameterDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"kbn-canvas-height")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,snippets_step_strings.getHeightParameterDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"kbn-canvas-width")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,snippets_step_strings.getWidthParameterDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"kbn-canvas-page")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,snippets_step_strings.getPageParameterDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"kbn-canvas-autoplay")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,snippets_step_strings.getAutoplayParameterDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"kbn-canvas-interval")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,snippets_step_strings.getIntervalParameterDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"kbn-canvas-toolbar")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,snippets_step_strings.getToolbarParameterDescription())));const{ShareWebsiteFlyout:flyout_flyout_component_strings}=components["a"];const steps=(onDownload,onCopy)=>[{title:flyout_flyout_component_strings.getWorkpadStepTitle(),children:external_kbnSharedDeps_React_default.a.createElement(WorkpadStep,{onDownload:onDownload})},{title:flyout_flyout_component_strings.getRuntimeStepTitle(),children:external_kbnSharedDeps_React_default.a.createElement(RuntimeStep,{onDownload:onDownload})},{title:flyout_flyout_component_strings.getSnippentsStepTitle(),children:external_kbnSharedDeps_React_default.a.createElement(SnippetsStep,{onCopy:onCopy})}];const ShareWebsiteFlyout=({onCopy:onCopy,onDownload:onDownload,onClose:onClose,unsupportedRenderers:unsupportedRenderers})=>{const link=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{style:{textDecoration:"underline"},onClick:()=>{onDownload("shareZip")}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.canvas.shareWebsiteFlyout.zipDownloadLinkLabel",defaultMessage:"download an example {ZIP} file",values:{ZIP:i18n_constants["R"]}}));const title=external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.canvas.shareWebsiteFlyout.flyoutCalloutDescription",defaultMessage:"To try sharing, you can {link} containing this workpad, the {CANVAS} Shareable Workpad runtime, and a sample {HTML} file.",values:{CANVAS:i18n_constants["e"],HTML:i18n_constants["p"],link:link}}));let warningText=null;if(unsupportedRenderers&&unsupportedRenderers.length>0){const warning=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",key:"text"},external_kbnSharedDeps_React_default.a.createElement("span",null,flyout_flyout_component_strings.getUnsupportedRendererWarning()),unsupportedRenderers.map((fn,index)=>[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],{key:`item-${index}`},fn),index<unsupportedRenderers.length-1?", ":""])),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs",key:"spacer"})];warningText=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:warning,color:"warning",size:"s",iconType:"alert",key:"callout"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{key:"spacer"})]}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{onClose:()=>onClose("share"),maxWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement("h2",{id:"flyoutTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},flyout_flyout_component_strings.getTitle())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBetaBadge"],{label:"Beta",color:"accent"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,flyout_flyout_component_strings.getStepsDescription())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{size:"s",title:title,iconType:"iInCircle"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),warningText,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSteps"],{steps:steps(onDownload,onCopy)})))};var renderers_debug=__webpack_require__(96);var renderers_error=__webpack_require__(97);var renderers_image=__webpack_require__(98);var repeat_image=__webpack_require__(103);var reveal_image=__webpack_require__(104);var markdown=__webpack_require__(99);var renderers_metric=__webpack_require__(112);var pie=__webpack_require__(100);var plot=__webpack_require__(101);var renderers_progress=__webpack_require__(102);var renderers_shape=__webpack_require__(105);var table=__webpack_require__(106);var renderers_text=__webpack_require__(107);const renderFunctions=[renderers_debug["a"],renderers_error["a"],renderers_image["a"],repeat_image["a"],reveal_image["a"],markdown["a"],renderers_metric["a"],pie["a"],plot["a"],renderers_progress["a"],renderers_shape["a"],table["a"],renderers_text["a"]];const renderFunctionNames=renderFunctions.map(fn=>fn.name);const{WorkpadHeaderShareMenu:flyout_strings}=components["a"];const getUnsupportedRenderers=state=>{const renderers=[];const expressions=getRenderedWorkpadExpressions(state);expressions.forEach(expression=>{if(!renderFunctionNames.includes(expression)){renderers.push(expression)}});return renderers};const flyout_flyout_mapStateToProps=state=>({renderedWorkpad:getRenderedWorkpad(state),unsupportedRenderers:getUnsupportedRenderers(state),workpad:getWorkpad(state)});const flyout_ShareWebsiteFlyout=Object(Recompose["compose"])(Object(lib["connect"])(flyout_flyout_mapStateToProps),public_["withKibana"],Object(Recompose["withProps"])(({unsupportedRenderers:unsupportedRenderers,renderedWorkpad:renderedWorkpad,onClose:onClose,workpad:workpad,kibana:kibana})=>({unsupportedRenderers:unsupportedRenderers,onClose:onClose,onCopy:()=>{kibana.services.canvas.notify.info(flyout_strings.getCopyShareConfigMessage())},onDownload:type=>{switch(type){case"share":downloadRenderedWorkpad(renderedWorkpad);return;case"shareRuntime":downloadRuntime(kibana.services.http.basePath.get());return;case"shareZip":const basePath=kibana.services.http.basePath.get();fetch["a"].post(`${basePath}${constants["e"]}`,JSON.stringify(renderedWorkpad)).then(blob=>downloadZippedRuntime(blob.data)).catch(err=>{kibana.services.canvas.notify.error(err,{title:flyout_strings.getShareableZipErrorTitle(workpad.name)})});return;default:throw new Error(flyout_strings.getUnknownExportErrorMessage(type))}}})))(ShareWebsiteFlyout);const{WorkpadHeaderShareMenu:share_menu_component_strings}=components["a"];const ShareMenu=({onCopy:onCopy,onExport:onExport,getExportUrl:getExportUrl})=>{const[showFlyout,setShowFlyout]=Object(external_kbnSharedDeps_React_["useState"])(false);const onClose=()=>{setShowFlyout(false)};const getPDFPanel=closePopover=>external_kbnSharedDeps_React_default.a.createElement(PDFPanel,{getPdfURL:layoutType=>getExportUrl("pdf",layoutType),onExport:layoutType=>{onExport("pdf",layoutType);closePopover()},onCopy:()=>{onCopy("pdf");closePopover()}});const getPanelTree=closePopover=>({id:0,items:[{name:share_menu_component_strings.getShareDownloadJSONTitle(),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"exportAction",size:"m"}),onClick:()=>{onExport("json");closePopover()}},{name:share_menu_component_strings.getShareDownloadPDFTitle(),icon:"document",panel:{id:1,title:share_menu_component_strings.getShareDownloadPDFTitle(),content:getPDFPanel(closePopover)},"data-test-subj":"sharePanel-PDFReports"},{name:share_menu_component_strings.getShareWebsiteTitle(),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"globe",size:"m"}),onClick:()=>{setShowFlyout(true);closePopover()}}]});const shareControl=togglePopover=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs","aria-label":share_menu_component_strings.getShareWorkpadMessage(),onClick:togglePopover,"data-test-subj":"shareTopNavButton"},share_menu_component_strings.getShareMenuButtonLabel());const flyout=showFlyout?external_kbnSharedDeps_React_default.a.createElement(flyout_ShareWebsiteFlyout,{onClose:onClose}):null;return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(popover["a"],{button:shareControl,panelPaddingSize:"none",anchorPosition:"downLeft"},({closePopover:closePopover})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:0,panels:flattenPanelTree(getPanelTree(closePopover))})),flyout)};var rison=__webpack_require__(450);var rison_default=__webpack_require__.n(rison);var kibanaUtils_public_=__webpack_require__(64);function getPdfUrlParts({id:id,name:title,width:width,height:height},layoutType,{pageCount:pageCount},basePath){const reportingEntry=basePath.prepend("/api/reporting/generate");const urlPrefix=basePath.get().replace(basePath.serverBasePath,"");const canvasEntry=`${urlPrefix}/app/canvas#`;const workpadUrls=[];for(let i=1;i<=pageCount;i++){workpadUrls.push(rison_default.a.encode(`${canvasEntry}/export/workpad/pdf/${id}/page/${i}`))}const jobParams={browserTimezone:external_kbnSharedDeps_MomentTimezone_default.a.tz.guess(),layout:{dimensions:{width:width,height:height},id:layoutType},objectType:"canvas workpad",relativeUrls:workpadUrls,title:title};return{createPdfUri:`${reportingEntry}/printablePdf`,createPdfPayload:{jobParams:rison_default.a.encode(jobParams)}}}function getPdfUrl(...args){const urlParts=getPdfUrlParts(...args);const param=(key,val)=>kibanaUtils_public_["url"].encodeUriQuery(key,true)+(val===true?"":"="+kibanaUtils_public_["url"].encodeUriQuery(val,true));return`${urlParts.createPdfUri}?${param("jobParams",urlParts.createPdfPayload.jobParams)}`}function createPdf(...args){const{createPdfUri:createPdfUri,createPdfPayload:createPdfPayload}=getPdfUrlParts(...args);return fetch["b"].post(createPdfUri,createPdfPayload)}const{WorkpadHeaderShareMenu:share_menu_strings}=i18n["e"];const share_menu_mapStateToProps=state=>({workpad:getWorkpad(state),pageCount:getPages(state).length});const getAbsoluteUrl=path=>{const{location:location}=Object(get_window["a"])();if(!location){return path}const{protocol:protocol,hostname:hostname,port:port}=location;return`${protocol}//${hostname}:${port}${path}`};const share_menu_ShareMenu=Object(Recompose["compose"])(Object(lib["connect"])(share_menu_mapStateToProps),public_services["i"],Object(Recompose["withProps"])(({workpad:workpad,pageCount:pageCount,services:services})=>({getExportUrl:(type,layout)=>{if(type==="pdf"){const pdfUrl=getPdfUrl(workpad,layout,{pageCount:pageCount},services.platform.getBasePathInterface());return getAbsoluteUrl(pdfUrl)}throw new Error(share_menu_strings.getUnknownExportErrorMessage(type))},onCopy:type=>{switch(type){case"pdf":services.notify.info(share_menu_strings.getCopyPDFMessage());break;case"reportingConfig":services.notify.info(share_menu_strings.getCopyReportingConfigMessage());break;default:throw new Error(share_menu_strings.getUnknownExportErrorMessage(type))}},onExport:(type,layout)=>{switch(type){case"pdf":return createPdf(workpad,layout||"preserve_layout",{pageCount:pageCount},services.platform.getBasePathInterface()).then(({data:data})=>{services.notify.info(share_menu_strings.getExportPDFMessage(),{title:share_menu_strings.getExportPDFTitle(workpad.name)});reporting_public_["jobCompletionNotifications"].add(data.job.id)}).catch(err=>{services.notify.error(err,{title:share_menu_strings.getExportPDFErrorTitle(workpad.name)})});case"json":downloadWorkpad(workpad.id);return;default:throw new Error(share_menu_strings.getUnknownExportErrorMessage(type))}}})))(ShareMenu);const timeDuration=(time,format)=>{const seconds=time/1e3;const minutes=seconds/60;const hours=minutes/60;const days=hours/24;if(format==="days"||days>=1){return{length:days,format:"days"}}if(format==="hours"||hours>=1){return{length:hours,format:"hours"}}if(format==="minutes"||minutes>=1){return{length:seconds/60,format:"minutes"}}return{length:seconds,format:"seconds"}};const{WorkpadHeaderCustomInterval:custom_interval_strings}=i18n["e"];const CustomInterval=({gutterSize:gutterSize,buttonSize:buttonSize,onSubmit:onSubmit,defaultValue:defaultValue})=>{const[customInterval,setCustomInterval]=Object(external_kbnSharedDeps_React_["useState"])(defaultValue);const refreshInterval=getTimeInterval(customInterval);const isInvalid=Boolean(customInterval.length&&!refreshInterval);const handleChange=ev=>setCustomInterval(ev.target.value);return external_kbnSharedDeps_React_default.a.createElement("form",{onSubmit:ev=>{ev.preventDefault();if(!isInvalid&&refreshInterval){onSubmit(refreshInterval)}}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:gutterSize},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:custom_interval_strings.getFormLabel(),helpText:custom_interval_strings.getFormDescription(),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{isInvalid:isInvalid,value:customInterval,onChange:handleChange,compressed:true}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{hasEmptyLabelSpace:true,display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{disabled:isInvalid,size:buttonSize,type:"submit",style:{minWidth:"auto"}},custom_interval_strings.getButtonLabel())))))};CustomInterval.defaultProps={buttonSize:"s",gutterSize:"s",defaultValue:""};function auto_refresh_controls_extends(){auto_refresh_controls_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return auto_refresh_controls_extends.apply(this,arguments)}const{WorkpadHeaderAutoRefreshControls:auto_refresh_controls_strings}=i18n["e"];const{time:timeStrings}=i18n["r"];const{getSecondsText:getSecondsText,getMinutesText:getMinutesText,getHoursText:getHoursText}=timeStrings;const ListGroup=({children:children,...rest})=>external_kbnSharedDeps_React_default.a.createElement("ul",auto_refresh_controls_extends({style:{listStyle:"none",margin:0}},rest),[children]);const generateId=Object(external_kbnSharedDeps_ElasticEui_["htmlIdGenerator"])();const AutoRefreshControls=({refreshInterval:refreshInterval,setRefresh:setRefresh,disableInterval:disableInterval})=>{const RefreshItem=({duration:duration,label:label,descriptionId:descriptionId})=>external_kbnSharedDeps_React_default.a.createElement("li",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:()=>setRefresh(duration),"aria-describedby":descriptionId},label));const interval=timeDuration(refreshInterval);const intervalTitleId=generateId();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"column",justifyContent:"spaceBetween",className:"canvasViewMenu__kioskSettings"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",justifyContent:"spaceAround",gutterSize:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,auto_refresh_controls_strings.getRefreshListTitle()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,refreshInterval>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,timeStrings.getCycleTimeText(interval.length,interval.format)):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,auto_refresh_controls_strings.getRefreshListDurationManualText())))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd",gutterSize:"xs"},refreshInterval>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"bottom",content:auto_refresh_controls_strings.getDisableTooltip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"cross",onClick:disableInterval,"aria-label":auto_refresh_controls_strings.getDisableTooltip()}))):null))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xxxs",id:intervalTitleId},external_kbnSharedDeps_React_default.a.createElement("p",null,auto_refresh_controls_strings.getIntervalFormLabelText())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement(ListGroup,{"aria-labelledby":intervalTitleId,className:"canvasControlSettings__list"},external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:3e4,label:getSecondsText(30),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:6e4,label:getMinutesText(1),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:3e5,label:getMinutesText(5),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:18e5,label:getMinutesText(30),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:36e5,label:getHoursText(1),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:432e5,label:getHoursText(12),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:864e5,label:getHoursText(24),descriptionId:intervalTitleId})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(CustomInterval,{onSubmit:value=>setRefresh(value)})))};function kiosk_controls_extends(){kiosk_controls_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return kiosk_controls_extends.apply(this,arguments)}const{WorkpadHeaderKioskControls:kiosk_controls_strings}=i18n["e"];const{time:kiosk_controls_timeStrings}=i18n["r"];const{getSecondsText:kiosk_controls_getSecondsText,getMinutesText:kiosk_controls_getMinutesText}=kiosk_controls_timeStrings;const kiosk_controls_ListGroup=({children:children,...rest})=>external_kbnSharedDeps_React_default.a.createElement("ul",kiosk_controls_extends({style:{listStyle:"none",margin:0}},rest),[children]);const kiosk_controls_generateId=Object(external_kbnSharedDeps_ElasticEui_["htmlIdGenerator"])();const KioskControls=({autoplayInterval:autoplayInterval,onSetInterval:onSetInterval})=>{const RefreshItem=({duration:duration,label:label,descriptionId:descriptionId})=>external_kbnSharedDeps_React_default.a.createElement("li",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:()=>onSetInterval(duration),"aria-describedby":descriptionId},label));const interval=timeDuration(autoplayInterval);const intervalTitleId=kiosk_controls_generateId();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"column",justifyContent:"spaceBetween",className:"canvasViewMenu__kioskSettings"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],null,kiosk_controls_strings.getTitle()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],null,kiosk_controls_timeStrings.getCycleTimeText(interval.length,interval.format))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xxxs",id:intervalTitleId},external_kbnSharedDeps_React_default.a.createElement("p",null,kiosk_controls_strings.getCycleFormLabel())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement(kiosk_controls_ListGroup,{"aria-labelledby":intervalTitleId,className:"canvasControlSettings__list"},external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:5e3,label:kiosk_controls_getSecondsText(5),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:1e4,label:kiosk_controls_getSecondsText(10),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:3e4,label:kiosk_controls_getSecondsText(30),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:6e4,label:kiosk_controls_getMinutesText(1),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:3e5,label:kiosk_controls_getMinutesText(5),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:9e5,label:kiosk_controls_getMinutesText(15),descriptionId:intervalTitleId})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(CustomInterval,{onSubmit:value=>onSetInterval(value)})))};const{WorkpadHeaderViewMenu:view_menu_component_strings}=components["a"];const QUICK_ZOOM_LEVELS=[.5,1,2];const ViewMenu=({enterFullscreen:enterFullscreen,fitToWindow:fitToWindow,isWriteable:isWriteable,resetZoom:resetZoom,setZoomScale:setZoomScale,toggleWriteable:toggleWriteable,zoomIn:zoomIn,zoomOut:zoomOut,zoomScale:zoomScale,doRefresh:doRefresh,refreshInterval:refreshInterval,setRefreshInterval:setRefreshInterval,autoplayEnabled:autoplayEnabled,autoplayInterval:autoplayInterval,enableAutoplay:enableAutoplay,setAutoplayInterval:setAutoplayInterval})=>{const setRefresh=val=>setRefreshInterval(val);const disableInterval=()=>{setRefresh(0)};const viewControl=togglePopover=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs","aria-label":view_menu_component_strings.getViewMenuLabel(),onClick:togglePopover},view_menu_component_strings.getViewMenuButtonLabel());const getScaleMenuItems=()=>QUICK_ZOOM_LEVELS.map(scale=>({name:view_menu_component_strings.getZoomPercentage(scale),icon:"empty",onClick:()=>setZoomScale(scale)}));const getZoomMenuItems=()=>[{name:view_menu_component_strings.getZoomFitToWindowText(),icon:"empty",onClick:fitToWindow,disabled:zoomScale===constants["x"]},...getScaleMenuItems(),{name:view_menu_component_strings.getZoomInText(),icon:"magnifyWithPlus",onClick:zoomIn,disabled:zoomScale===constants["x"],className:"canvasContextMenu--topBorder"},{name:view_menu_component_strings.getZoomOutText(),icon:"magnifyWithMinus",onClick:zoomOut,disabled:zoomScale<=constants["y"]},{name:view_menu_component_strings.getZoomResetText(),icon:"empty",onClick:resetZoom,disabled:zoomScale>=constants["x"],className:"canvasContextMenu--topBorder"}];const getPanelTree=closePopover=>({id:0,items:[{name:view_menu_component_strings.getRefreshMenuItemLabel(),icon:"refresh",onClick:()=>{doRefresh()}},{name:view_menu_component_strings.getRefreshSettingsMenuItemLabel(),icon:"empty",panel:{id:1,title:view_menu_component_strings.getRefreshSettingsMenuItemLabel(),content:external_kbnSharedDeps_React_default.a.createElement(AutoRefreshControls,{refreshInterval:refreshInterval,setRefresh:val=>setRefresh(val),disableInterval:()=>disableInterval()})}},{name:view_menu_component_strings.getFullscreenMenuItemLabel(),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"fullScreen",size:"m"}),className:constants["n"],onClick:()=>{enterFullscreen();closePopover()}},{name:autoplayEnabled?view_menu_component_strings.getAutoplayOffMenuItemLabel():view_menu_component_strings.getAutoplayOnMenuItemLabel(),icon:autoplayEnabled?"stop":"play",onClick:()=>{enableAutoplay(!autoplayEnabled);closePopover()}},{name:view_menu_component_strings.getAutoplaySettingsMenuItemLabel(),icon:"empty",panel:{id:2,title:view_menu_component_strings.getAutoplaySettingsMenuItemLabel(),content:external_kbnSharedDeps_React_default.a.createElement(KioskControls,{autoplayInterval:autoplayInterval,onSetInterval:setAutoplayInterval})}},{name:isWriteable?view_menu_component_strings.getHideEditModeLabel():view_menu_component_strings.getShowEditModeLabel(),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:isWriteable?"eyeClosed":"eye",size:"m"}),className:constants["n"],onClick:()=>{toggleWriteable();closePopover()}},{name:view_menu_component_strings.getZoomMenuItemLabel(),icon:"magnifyWithPlus",panel:{id:3,title:view_menu_component_strings.getZoomMenuItemLabel(),items:getZoomMenuItems()}}]});return external_kbnSharedDeps_React_default.a.createElement(popover["a"],{button:viewControl,panelPaddingSize:"none",anchorPosition:"downLeft"},({closePopover:closePopover})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:0,panels:flattenPanelTree(getPanelTree(closePopover)),className:"canvasViewMenu"}))};const getFitZoomScale=(boundingBox,workpadWidth,workpadHeight)=>{const canvasLayoutContent=document.querySelector(`#${common_lib["CANVAS_LAYOUT_STAGE_CONTENT_SELECTOR"]}`);const layoutWidth=canvasLayoutContent.clientWidth;const layoutHeight=canvasLayoutContent.clientHeight;const offsetLeft=boundingBox.left;const offsetTop=boundingBox.top;const offsetRight=boundingBox.right-workpadWidth;const offsetBottom=boundingBox.bottom-workpadHeight;const boundingWidth=workpadWidth+Math.max(Math.abs(offsetLeft),Math.abs(offsetRight))*2+common_lib["WORKPAD_CANVAS_BUFFER"];const boundingHeight=workpadHeight+Math.max(Math.abs(offsetTop),Math.abs(offsetBottom))*2+common_lib["WORKPAD_CANVAS_BUFFER"];const xScale=layoutWidth/boundingWidth;const yScale=layoutHeight/boundingHeight;return Math.min(xScale,yScale)};const view_menu_mapStateToProps=state=>{const{enabled:enabled,interval:interval}=getAutoplay(state);return{zoomScale:getZoomScale(state),boundingBox:getWorkpadBoundingBox(state),workpadWidth:getWorkpadWidth(state),workpadHeight:getWorkpadHeight(state),isWriteable:workpad_isWriteable(state)&&app_canUserWrite(state),refreshInterval:getRefreshInterval(state),autoplayEnabled:enabled,autoplayInterval:interval}};const view_menu_mapDispatchToProps=dispatch=>({setZoomScale:scale=>dispatch(transient_setZoomScale(scale)),setWriteable:isWorkpadWriteable=>dispatch(setWriteable(isWorkpadWriteable)),setFullscreen:value=>{dispatch(setFullscreen(value));if(value){dispatch(transient_selectToplevelNodes([]))}},doRefresh:()=>dispatch(fetchAllRenderables()),setRefreshInterval:interval=>dispatch(workpad_setRefreshInterval(interval)),enableAutoplay:autoplay=>dispatch(workpad_enableAutoplay(!!autoplay)),setAutoplayInterval:interval=>dispatch(workpad_setAutoplayInterval(interval))});const view_menu_mergeProps=(stateProps,dispatchProps,ownProps)=>{const{boundingBox:boundingBox,workpadWidth:workpadWidth,workpadHeight:workpadHeight,...remainingStateProps}=stateProps;return{...remainingStateProps,...dispatchProps,...ownProps,toggleWriteable:()=>dispatchProps.setWriteable(!stateProps.isWriteable),enterFullscreen:()=>dispatchProps.setFullscreen(true),fitToWindow:()=>dispatchProps.setZoomScale(getFitZoomScale(boundingBox,workpadWidth,workpadHeight))}};const view_menu_ViewMenu=Object(Recompose["compose"])(Object(lib["connect"])(view_menu_mapStateToProps,view_menu_mapDispatchToProps,view_menu_mergeProps),Object(Recompose["withHandlers"])(zoomHandlerCreators))(ViewMenu);const{WorkpadHeader:workpad_header_component_strings}=i18n["e"];const WorkpadHeader=({isWriteable:isWriteable,canUserWrite:canUserWrite,commit:commit,onSetWriteable:onSetWriteable=(()=>{})})=>{const toggleWriteable=()=>onSetWriteable(!isWriteable);const keyHandler=action=>{if(action==="EDITING"){toggleWriteable()}};const fullscreenButton=({toggleFullscreen:toggleFullscreen})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"bottom",content:external_kbnSharedDeps_React_default.a.createElement("span",null,workpad_header_component_strings.getFullScreenTooltip()," ",external_kbnSharedDeps_React_default.a.createElement(tool_tip_shortcut_ToolTipShortcut,{namespace:"PRESENTATION",action:"FULLSCREEN"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"fullScreen","aria-label":workpad_header_component_strings.getFullScreenButtonAriaLabel(),onClick:toggleFullscreen}));const getEditToggleToolTipText=()=>{if(!canUserWrite){return workpad_header_component_strings.getNoWritePermissionTooltipText()}const content=isWriteable?workpad_header_component_strings.getHideEditControlTooltip():workpad_header_component_strings.getShowEditControlTooltip();return content};const getEditToggleToolTip=({textOnly:textOnly}={textOnly:false})=>{const content=getEditToggleToolTipText();if(textOnly){return content}return external_kbnSharedDeps_React_default.a.createElement("span",null,content," ",external_kbnSharedDeps_React_default.a.createElement(tool_tip_shortcut_ToolTipShortcut,{namespace:"EDITOR",action:"EDITING"}))};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"none",alignItems:"center",justifyContent:"spaceBetween",className:"canvasLayout__stageHeaderInner"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"none"},isWriteable&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(element_menu_ElementMenu,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(view_menu_ViewMenu,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(edit_menu_EditMenu,{commit:commit})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(share_menu_ShareMenu,null)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},canUserWrite&&external_kbnSharedDeps_React_default.a.createElement(react_shortcuts_lib["Shortcuts"],{name:"EDITOR",handler:keyHandler,targetNodeSelector:"body",global:true,isolate:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"bottom",content:getEditToggleToolTip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:isWriteable?"eyeClosed":"eye",onClick:toggleWriteable,size:"s","aria-label":getEditToggleToolTipText(),isDisabled:!canUserWrite}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(refresh_control_RefreshControl,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(workpad_header_fullscreen_control_FullscreenControl,null,fullscreenButton)))))};const workpad_header_mapStateToProps=state=>({isWriteable:workpad_isWriteable(state)&&app_canUserWrite(state),canUserWrite:app_canUserWrite(state),selectedPage:getSelectedPage(state)});const workpad_header_mapDispatchToProps=dispatch=>({onSetWriteable:isWorkpadWriteable=>dispatch(setWriteable(isWorkpadWriteable))});const workpad_header_WorkpadHeader=Object(lib["connect"])(workpad_header_mapStateToProps,workpad_header_mapDispatchToProps)(WorkpadHeader);const WORKPAD_CONTAINER_ID="canvasWorkpadContainer";const WorkpadApp=({deselectElement:deselectElement,isWriteable:isWriteable})=>{const interactivePageLayout=Object(external_kbnSharedDeps_React_["useRef"])(null);const registerLayout=newLayout=>{if(interactivePageLayout.current!==newLayout){interactivePageLayout.current=newLayout}};const unregisterLayout=oldLayout=>{if(interactivePageLayout.current===oldLayout){interactivePageLayout.current=null}};const commit=interactivePageLayout.current||(()=>{});return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasLayout"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasLayout__rows"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasLayout__cols"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasLayout__stage"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasLayout__stageHeader"},external_kbnSharedDeps_React_default.a.createElement(workpad_header_WorkpadHeader,{commit:commit})),external_kbnSharedDeps_React_default.a.createElement("div",{id:constants["m"],className:constants["m"],onMouseDown:deselectElement},external_kbnSharedDeps_React_default.a.createElement("div",{id:WORKPAD_CONTAINER_ID,className:"canvasWorkpadContainer canvasLayout__stageContentOverflow"},external_kbnSharedDeps_React_default.a.createElement(components_workpad_Workpad,{registerLayout:registerLayout,unregisterLayout:unregisterLayout})))),isWriteable&&external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasLayout__sidebar hide-for-sharing"},external_kbnSharedDeps_React_default.a.createElement(Sidebar,{commit:commit}))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasLayout__footer hide-for-sharing"},external_kbnSharedDeps_React_default.a.createElement(toolbar_Toolbar,null))))};function workpad_telemetry_extends(){workpad_telemetry_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return workpad_telemetry_extends.apply(this,arguments)}const WorkpadLoadedMetric="workpad-loaded";const WorkpadLoadedWithErrorsMetric="workpad-loaded-with-errors";const workpad_telemetry_mapStateToProps=state=>({telemetryElementCounts:getElementCounts(state),telemetryResolvedArgs:getArgs(state)});function areAllElementsInResolvedArgs(workpad,resolvedArgs){const resolvedArgsElements=Object.keys(resolvedArgs);const workpadElements=workpad.pages.reduce((reduction,page)=>[...reduction,...page.elements.map(element=>element.id)],[]);return workpadElements.every(element=>resolvedArgsElements.includes(element))}const withUnconnectedElementsLoadedTelemetry=(Component,trackMetric=trackCanvasUiMetric)=>function ElementsLoadedTelemetry(props){const{telemetryElementCounts:telemetryElementCounts,workpad:workpad,telemetryResolvedArgs:telemetryResolvedArgs,...other}=props;const{error:error,pending:pending}=telemetryElementCounts;const[currentWorkpadId,setWorkpadId]=Object(external_kbnSharedDeps_React_["useState"])(undefined);const[hasReported,setHasReported]=Object(external_kbnSharedDeps_React_["useState"])(false);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const resolvedArgsAreForWorkpad=areAllElementsInResolvedArgs(workpad,telemetryResolvedArgs);if(workpad.id!==currentWorkpadId){setWorkpadId(workpad.id);const workpadElementCount=workpad.pages.reduce((reduction,page)=>reduction+page.elements.length,0);if(workpadElementCount===0||resolvedArgsAreForWorkpad&&pending===0){setHasReported(true)}else{setHasReported(false)}}else if(!hasReported&&pending===0&&resolvedArgsAreForWorkpad){if(error>0){trackMetric(METRIC_TYPE.LOADED,[WorkpadLoadedMetric,WorkpadLoadedWithErrorsMetric])}else{trackMetric(METRIC_TYPE.LOADED,WorkpadLoadedMetric)}setHasReported(true)}},[currentWorkpadId,hasReported,error,pending,telemetryResolvedArgs,workpad]);return external_kbnSharedDeps_React_default.a.createElement(Component,workpad_telemetry_extends({},other,{workpad:workpad}))};const connector=Object(lib["connect"])(workpad_telemetry_mapStateToProps,{});const withElementsLoadedTelemetry=Component=>{const telemetry=withUnconnectedElementsLoadedTelemetry(Component);return connector(telemetry)};const workpad_app_mapDispatchToProps=dispatch=>({deselectElement:ev=>{ev.stopPropagation();dispatch(transient_selectToplevelNodes([]))}});const workpad_app_WorkpadApp=Object(lib["connect"])(state=>({isWriteable:workpad_isWriteable(state)&&app_canUserWrite(state),workpad:getWorkpad(state)}),workpad_app_mapDispatchToProps)(withElementsLoadedTelemetry(WorkpadApp));const{workpadRoutes:routes_strings}=i18n["g"];const workpad_routes_routes=[{path:"/workpad",children:[{name:"createWorkpad",path:"/create",action:dispatch=>async({router:router})=>{const newWorkpad=getDefaultWorkpad();try{await create(newWorkpad);dispatch(setWorkpad(newWorkpad));dispatch(resetAssets());router.redirectTo("loadWorkpad",{id:newWorkpad.id,page:1})}catch(err){public_services["c"].getService().error(err,{title:routes_strings.getCreateFailureErrorMessage()});router.redirectTo("home")}},meta:{component:workpad_app_WorkpadApp}},{name:"loadWorkpad",path:"/:id(/page/:page)",action:(dispatch,getState)=>async({params:params,router:router})=>{const state=getState();const currentWorkpad=getWorkpad(state);if(params.id!==currentWorkpad.id){try{const fetchedWorkpad=await get(params.id);const{assets:assets,...workpad}=fetchedWorkpad;dispatch(setWorkpad(workpad));dispatch(setAssets(assets));dispatch(transient_setZoomScale(1))}catch(err){public_services["c"].getService().error(err,{title:routes_strings.getLoadFailureErrorMessage()});return router.redirectTo("home")}}const workpad=getWorkpad(getState());const pageNumber=params.page?parseInt(params.page,10):null;if(!pageNumber||isNaN(pageNumber)){return router.redirectTo("loadWorkpad",{id:workpad.id,page:workpad.page+1})}const pageIndex=pageNumber-1;if(pageIndex!==workpad.page){dispatch(pages_setPage(pageIndex))}setBreadcrumb([getBaseBreadcrumb(),getWorkpadBreadcrumb(workpad)])},meta:{component:workpad_app_WorkpadApp}}]}];const ExportApp=({workpad:workpad,selectedPageIndex:selectedPageIndex,initializeWorkpad:initializeWorkpad})=>{const{id:id,pages:pages,height:height,width:width}=workpad;const activePage=pages[selectedPageIndex];const pageElementCount=activePage.elements.length;Object(external_kbnSharedDeps_React_["useEffect"])(()=>initializeWorkpad());return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasExport","data-shared-page":selectedPageIndex+1},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasExport__stage"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasLayout__stageHeader"},external_kbnSharedDeps_React_default.a.createElement(Link,{name:"loadWorkpad",params:{id:id}},"Edit Workpad")),style_it_default.a.it(workpad.css,external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasExport__stageContent","data-shared-items-count":pageElementCount},external_kbnSharedDeps_React_default.a.createElement(WorkpadPage,{isSelected:true,key:activePage.id,pageId:activePage.id,height:height,width:width,registerLayout:()=>{},unregisterLayout:()=>{}})))))};const export_app_ExportApp=Object(lib["connect"])(state=>({workpad:getWorkpad(state),selectedPageIndex:getSelectedPageIndex(state)}),dispatch=>({initializeWorkpad:()=>dispatch(workpad_initializeWorkpad())}))(ExportApp);const export_routes_routes=[{path:"/export/workpad",children:[{name:"exportWorkpad",path:"/pdf/:id/page/:page",action:dispatch=>async({params:params,router:router})=>{const fetchedWorkpad=await get(params.id);const pageNumber=parseInt(params.page,10);if(fetchedWorkpad==null&&isNaN(pageNumber)){return router.redirectTo("home")}const{assets:assets,...workpad}=fetchedWorkpad;dispatch(setAssets(assets));dispatch(setWorkpad(workpad,{loadPages:false}));dispatch(pages_setPage(pageNumber-1));dispatch(fetchAllRenderables({onlyActivePage:true}))},meta:{component:export_app_ExportApp}}]}];const apps_routes=[].concat(workpad_routes_routes,routes_routes,export_routes_routes);const apps=[workpad_app_WorkpadApp,home_app_HomeApp,export_app_ExportApp];const shortcutManager=new react_shortcuts_lib["ShortcutManager"](keymap);function app_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const{App:app_strings}=i18n["e"];class app_App extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args);app_defineProperty(this,"renderError",()=>{console.error(this.props.appState);return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("div",null,app_strings.getLoadErrorTitle()),external_kbnSharedDeps_React_default.a.createElement("div",null,app_strings.getLoadErrorMessage(this.props.appState.messgae)))})}getChildContext(){return{shortcuts:shortcutManager}}componentDidMount(){const win=Object(get_window["a"])();win.canvasInitErrorHandler&&win.canvasInitErrorHandler()}componentWillUnmount(){const win=Object(get_window["a"])();win.canvasRestoreErrorHandler&&win.canvasRestoreErrorHandler()}render(){if(this.props.appState instanceof Error){return this.renderError()}return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvas canvasContainer"},external_kbnSharedDeps_React_default.a.createElement(components_router_Router,{routes:apps_routes,showLoading:this.props.appState.ready===false,loadingMessage:app_strings.getLoadingMessage(),onRouteChange:this.props.onRouteChange,onLoad:()=>this.props.setAppReady(true),onError:err=>this.props.setAppError(err)}))}}app_defineProperty(app_App,"childContextTypes",{shortcuts:prop_types_default.a.object.isRequired});const app_mapStateToProps=state=>{const appState=getAppReady(state);return{appState:typeof appState==="object"?appState:{ready:appState},basePath:getBasePath(state)}};const app_mapDispatchToProps=dispatch=>({setAppReady:()=>async()=>{try{dispatch(appReady())}catch(e){dispatch(appError(e))}},setAppError:payload=>dispatch(appError(payload))});const app_mergeProps=(stateProps,dispatchProps,ownProps)=>({...ownProps,...stateProps,...dispatchProps,setAppReady:dispatchProps.setAppReady(stateProps.basePath)});const components_app_App=Object(Recompose["compose"])(Object(lib["connect"])(app_mapStateToProps,app_mapDispatchToProps,app_mergeProps),public_services["i"],Object(Recompose["withProps"])(props=>({onRouteChange:props.services.navLink.updatePath})))(app_App);const defaultWorkpad=getDefaultWorkpad();function Template(config){this.name=config.name;this.displayName=config.displayName||this.name;this.id=config.id||Object(get_id["a"])("workpad");this.help=config.help||"";this.tags=config.tags||[];this.tags.forEach(tag=>{if(!tagsRegistry.get(tag)){tagsRegistry.register(()=>({name:tag,color:"#666666"}))}});this.width=config.width||defaultWorkpad.width;this.height=config.height||defaultWorkpad.height;this.page=config.page||defaultWorkpad.page;this.pages=config.pages||defaultWorkpad.pages;this.colors=config.colors||defaultWorkpad.colors;this["@timestamp"]=config["@timestamp"]||defaultWorkpad["@timestamp"];this["@created"]=config["@created"]||defaultWorkpad["@created"];this.assets=config.assets||{};this.css=config.css||defaultWorkpad.css}class templates_registry_TemplateRegistry extends common["Registry"]{wrapper(obj){return new Template(obj)}}const templatesRegistry=new templates_registry_TemplateRegistry;let registries_registries={};function initRegistries(){Object(common["addRegistries"])(registries_registries,{elements:elementsRegistry,transformUIs:transformRegistry,datasourceUIs:datasourceRegistry,modelUIs:modelRegistry,viewUIs:viewRegistry,argumentUIs:argTypeRegistry,templates:templatesRegistry,tagUIs:tagsRegistry,transitions:transitionsRegistry})}async function populateRegistries(setupRegistries){const resolvedRegistries={};const promises=Object.entries(setupRegistries).map(async([key,specs])=>{const resolved=await(await Promise.all(specs.map(fn=>typeof fn==="function"?fn():fn))).flat();resolvedRegistries[key]=resolved});await Promise.all(promises);Object(common["register"])(registries_registries,resolvedRegistries)}function destroyRegistries(){registries_registries={}}const getDocumentationLinks=()=>({canvas:`${public_services["d"].getService().getElasticWebsiteUrl()}guide/en/kibana/${public_services["d"].getService().getDocLinkVersion()}/canvas.html`,numeral:`${public_services["d"].getService().getElasticWebsiteUrl()}guide/en/kibana/${public_services["d"].getService().getDocLinkVersion()}/guide/numeral.html`});const{KeyboardShortcutsDoc:keyboard_shortcuts_doc_strings}=components["a"];const keyboard_shortcuts_doc_os=getClientPlatform();const getDescriptionListItems=shortcuts=>shortcuts.map(shortcutKeyMap=>{const osShortcuts=shortcutKeyMap[keyboard_shortcuts_doc_os];return{title:shortcutKeyMap.help,description:osShortcuts.reduce((acc,shortcut,i)=>{shortcut=shortcut.replace(/\+/g," ");if(i!==0){acc.push(external_kbnSharedDeps_React_default.a.createElement("span",{key:Object(get_id["a"])("span")}," ",keyboard_shortcuts_doc_strings.getShortcutSeparator()," "))}acc.push(external_kbnSharedDeps_React_default.a.createElement("span",{key:Object(get_id["a"])("span")},getPrettyShortcut(shortcut).split(/( )/g).map(key=>key===" "?key:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],{key:Object(get_id["a"])("shortcut")},key))));return acc},[])}});const KeyboardShortcutsDoc=({onClose:onClose})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{closeButtonAriaLabel:keyboard_shortcuts_doc_strings.getFlyoutCloseButtonAriaLabel(),size:"s",onClose:onClose},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,keyboard_shortcuts_doc_strings.getTitle()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,Object.values(keymap).map(namespace=>{const{displayName:displayName,...shortcuts}=namespace;return external_kbnSharedDeps_React_default.a.createElement("div",{key:Object(get_id["a"])("shortcuts"),className:"canvasKeyboardShortcut"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h4",null,displayName)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{textStyle:"reverse",type:"column",listItems:getDescriptionListItems(Object.values(shortcuts)),compressed:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null))})));let FunctionReferenceGenerator=null;if(false){}const{HelpMenu:help_menu_strings}=i18n["e"];const HelpMenu=({functionRegistry:functionRegistry})=>{const[isFlyoutVisible,setFlyoutVisible]=Object(external_kbnSharedDeps_React_["useState"])(false);const showFlyout=()=>{setFlyoutVisible(true)};const hideFlyout=()=>{setFlyoutVisible(false)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs",flush:"left",iconType:"keyboardShortcut",onClick:showFlyout},help_menu_strings.getKeyboardShortcutsLinkLabel()),FunctionReferenceGenerator?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Suspense"],{fallback:null},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(FunctionReferenceGenerator,{functionRegistry:functionRegistry})):null,isFlyoutVisible&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPortal"],null,external_kbnSharedDeps_React_default.a.createElement(KeyboardShortcutsDoc,{onClose:hideFlyout})))};var redux=__webpack_require__(228);var redux_thunk_lib=__webpack_require__(451);var redux_thunk_lib_default=__webpack_require__.n(redux_thunk_lib);const breadcrumbs=({getState:getState})=>next=>action=>{const currentWorkpad=getWorkpad(getState());next(action);const updatedWorkpad=getWorkpad(getState());if(currentWorkpad.name!==updatedWorkpad.name){setBreadcrumb([getBaseBreadcrumb(),getWorkpadBreadcrumb(updatedWorkpad)])}};const{esPersist:es_persist_strings}=i18n["g"];const workpadChanged=(before,after)=>{const workpad=getWorkpad(before);return getWorkpad(after)!==workpad};const assetsChanged=(before,after)=>{const assets=getAssetIds(before);return!Object(external_kbnSharedDeps_Lodash_["isEqual"])(assets,getAssetIds(after))};const esPersistMiddleware=({getState:getState})=>{const skippedActions=[appReady,resetWorkpad,setWorkpad,setAssets,resetAssets,workpad_setRefreshInterval,...Object.values(actions_resolved_args_namespaceObject),...Object.values(transient_namespaceObject)].map(a=>a.toString());return next=>action=>{if(skippedActions.indexOf(action.type)>=0){return next(action)}const curState=getState();next(action);const newState=getState();if(!app_canUserWrite(newState)){return}const notifyError=err=>{const statusCode=err.response&&err.response.status;switch(statusCode){case 400:return public_services["e"].notify.getService().error(err.response,{title:es_persist_strings.getSaveFailureTitle()});case 413:return public_services["e"].notify.getService().error(es_persist_strings.getTooLargeErrorMessage(),{title:es_persist_strings.getSaveFailureTitle()});default:return public_services["e"].notify.getService().error(err,{title:es_persist_strings.getUpdateFailureTitle()})}};const changedWorkpad=workpadChanged(curState,newState);const changedAssets=assetsChanged(curState,newState);if(changedWorkpad&&changedAssets){const persistedWorkpad=getFullWorkpadPersisted(getState());return update(persistedWorkpad.id,persistedWorkpad).catch(notifyError)}else if(changedWorkpad){const persistedWorkpad=getWorkpadPersisted(getState());return workpad_service_updateWorkpad(persistedWorkpad.id,persistedWorkpad).catch(notifyError)}else if(changedAssets){const persistedWorkpad=getFullWorkpadPersisted(getState());return updateAssets(persistedWorkpad.id,persistedWorkpad.assets).catch(notifyError)}}};const fullscreenClass="canvas-isFullscreen";function fullscreen_setFullscreen(fullscreen,doc=document){const enabled=Boolean(fullscreen);const body=doc.querySelector("body");const bodyClassList=body.classList;const isFullscreen=bodyClassList.contains(fullscreenClass);if(enabled&&!isFullscreen){public_services["d"].getService().setFullscreen(false);bodyClassList.add(fullscreenClass)}else if(!enabled&&isFullscreen){bodyClassList.remove(fullscreenClass);public_services["d"].getService().setFullscreen(true)}}const fullscreen_fullscreen=({getState:getState})=>next=>action=>{next(action);if(action.type===setFullscreen.toString()){const fullscreen=getFullscreen(getState());fullscreen_setFullscreen(fullscreen);app_state_setFullscreen(fullscreen)}};function getHistoryState(state){return state.persistent}const historyMiddleware=({dispatch:dispatch,getState:getState})=>{const reduxInject=routes=>routes.map(route=>{if(route.children){return{...route,children:reduxInject(route.children)}}if(!route.action){return route}return{...route,action:route.action(dispatch,getState)}});const handlerState={pendingCount:0};const router=routerProvider(reduxInject(apps_routes));const history=historyProvider();const handleHistoryChanges=async(location,prevLocation)=>{const{pathname:pathname,state:historyState,action:historyAction}=location;const isBrowserNav=historyAction==="pop"&&historyState!=null;const isUrlChange=!isBrowserNav&&historyAction==="pop"||(historyAction==="push"||historyAction==="replace")&&prevLocation.pathname!==pathname;if(isBrowserNav){const currentWorkpadId=getWorkpad(getState()).id;if(currentWorkpadId!==historyState.workpad.id){const newWorkpad=await get(historyState.workpad.id);dispatch(setAssets(newWorkpad.assets))}return dispatch(restoreHistory(historyState))}if(isUrlChange){return await router.parse(pathname)}};history.onChange(async(...args)=>{handlerState.pendingCount+=1;try{await handleHistoryChanges(...args)}catch(e){}finally{handlerState.pendingCount-=1}});return next=>action=>{const oldState=getState();switch(action.type){case history_undoHistory.toString():return history.undo();case history_redoHistory.toString():return history.redo();case restoreHistory.toString():next(action);dispatch(workpad_initializeWorkpad());return}next(action);const newState=getState();if(!isAppReady(newState)){return}if(!isAppReady(oldState)&&isAppReady(newState)){history.replace(getHistoryState(newState));return}const oldHistoryState=getHistoryState(oldState);const historyState=getHistoryState(newState);if(!Object(external_kbnSharedDeps_Lodash_["isEqual"])(historyState,oldHistoryState)){const useReplaceState=handlerState.pendingCount!==0;useReplaceState?history.replace(historyState):history.push(historyState)}}};var loading_indicator=__webpack_require__(63);const pathToKey=path=>convert(path).join("/");const inFlightMiddlewareFactory=({loadingIndicator:loadingIndicator,pendingCache:pendingCache})=>({dispatch:dispatch})=>next=>action=>{if(action.type===setLoadingActionType){const cacheKey=pathToKey(action.payload.path);pendingCache.push(cacheKey);dispatch(resolved_args_inFlightActive())}else if(action.type===setValueActionType){const cacheKey=pathToKey(action.payload.path);const idx=pendingCache.indexOf(cacheKey);if(idx>=0){pendingCache.splice(idx,1)}if(pendingCache.length===0){dispatch(inFlightComplete())}}else if(action.type===inFlightActiveActionType){loadingIndicator.show()}else if(action.type===inFlightCompleteActionType){loadingIndicator.hide()}next(action)};const in_flight_inFlight=inFlightMiddlewareFactory({loadingIndicator:loading_indicator["b"],pendingCache:[]});const workpadUpdate=({dispatch:dispatch,getState:getState})=>next=>action=>{const oldIsWriteable=workpad_isWriteable(getState());const oldName=getWorkpadName(getState());next(action);if(getWorkpadName(getState())!==oldName){setDocTitle(getWorkpadName(getState()))}if(action.type===duplicatePage.toString()){dispatch(fetchAllRenderables())}if(action.type===setWriteable.toString()&&oldIsWriteable!==workpad_isWriteable(getState())){const win=Object(get_window["a"])();if(typeof win.getSelection==="function"){win.getSelection().collapse(document.querySelector("body"),0)}}};const workpadRefresh=({dispatch:dispatch,getState:getState})=>next=>{let refreshTimeout;let refreshInterval=0;function updateWorkpad(){cancelDelayedUpdate();if(refreshInterval===0){return}const inFlightActive=getInFlight(getState());if(inFlightActive){startDelayedUpdate()}else{dispatch(fetchAllRenderables())}}function cancelDelayedUpdate(){clearTimeout(refreshTimeout);refreshTimeout=undefined}function startDelayedUpdate(){if(!refreshTimeout){clearTimeout(refreshTimeout);refreshTimeout=window.setTimeout(()=>{updateWorkpad()},refreshInterval)}}return action=>{const previousRefreshInterval=getRefreshInterval(getState());next(action);refreshInterval=getRefreshInterval(getState());if(action.type===inFlightComplete.toString()&&refreshInterval>0){startDelayedUpdate()}if(action.type===workpad_setRefreshInterval.toString()&&previousRefreshInterval!==refreshInterval){refreshInterval=action.payload;app_state_setRefreshInterval(createTimeInterval(refreshInterval));cancelDelayedUpdate();if(refreshInterval>0){startDelayedUpdate()}}if(action.type===appUnload.toString()){cancelDelayedUpdate()}}};const workpadAutoplay=({getState:getState})=>next=>{let playTimeout;let displayInterval=0;const router=routerProvider();function updateWorkpad(){if(displayInterval===0){return}const inFlightActive=getInFlight(getState());if(!inFlightActive){const workpadId=getWorkpad(getState()).id;const pageIndex=getSelectedPageIndex(getState());const pageCount=getPages(getState()).length;const nextPage=Math.min(pageIndex+1,pageCount-1);if(nextPage===pageIndex){router.navigateTo("loadWorkpad",{id:workpadId,page:1})}else{router.navigateTo("loadWorkpad",{id:workpadId,page:nextPage+1})}}stopAutoUpdate();startDelayedUpdate()}function stopAutoUpdate(){clearTimeout(playTimeout);playTimeout=undefined}function startDelayedUpdate(){if(!playTimeout){stopAutoUpdate();playTimeout=window.setTimeout(()=>{updateWorkpad()},displayInterval)}}return action=>{next(action);const isFullscreen=getFullscreen(getState());const autoplay=getAutoplay(getState());const shouldPlay=isFullscreen&&autoplay.enabled&&autoplay.interval>0;displayInterval=autoplay.interval;if(autoplay.enabled){app_state_setAutoplayInterval(createTimeInterval(autoplay.interval))}else{app_state_setAutoplayInterval(null)}if(shouldPlay){startDelayedUpdate()}else{stopAutoUpdate()}if(action.type===appUnload.toString()){stopAutoUpdate()}}};const app_ready_appReady=({dispatch:dispatch,getState:getState})=>next=>action=>{next(action);const state=getState();if(state.app.ready){return}if(isAppReady(state)){dispatch(appReady())}};const element_stats_elementStats=({dispatch:dispatch,getState:getState})=>next=>action=>{next(action);const state=getState();const stats=getElementStats(state);const total=getAllElements(state).length;const counts=getElementCounts(state);const{ready:ready,error:error}=counts;const pending=total-ready-error;if(total>0&&(ready!==stats.ready||pending!==stats.pending||error!==stats.error||total!==stats.total)){dispatch(setElementStats({total:total,ready:ready,pending:pending,error:error}))}};const resolvedArgs=({dispatch:dispatch,getState:getState})=>next=>action=>{const startElementIds=getAllElements(getState()).map(element=>element.id);next(action);const resolvedElementIds=getAllElements(getState()).map(element=>element.id);const deadIds=startElementIds.filter(id=>!resolvedElementIds.includes(id));if(deadIds.length>0){dispatch(clearValues(deadIds))}};const middlewares=[Object(redux["applyMiddleware"])(redux_thunk_lib_default.a,element_stats_elementStats,resolvedArgs,esPersistMiddleware,historyMiddleware,breadcrumbs,fullscreen_fullscreen,in_flight_inFlight,app_ready_appReady,workpadUpdate,workpadRefresh,workpadAutoplay)];const compose=Object(get_window["a"])().__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||redux["compose"];const middleware=compose(...middlewares);var reduce_reducers_lib=__webpack_require__(452);var reduce_reducers_lib_default=__webpack_require__.n(reduce_reducers_lib);const appReducer=Object(redux_actions_lib["handleActions"])({[appReady]:appState=>({...appState,ready:true}),[appError]:(appState,{payload:payload})=>({...appState,ready:payload})},{});const{set:transient_set,del:transient_del}=object_path_immutable_default.a;const transientReducer=Object(redux_actions_lib["handleActions"])({[restoreHistory]:transientState=>transient_set(transientState,"resolvedArgs",{}),[removeElements]:(transientState,{payload:{elementIds:elementIds}})=>{const{selectedToplevelNodes:selectedToplevelNodes}=transientState;return transient_del({...transientState,selectedToplevelNodes:selectedToplevelNodes.filter(n=>elementIds.indexOf(n)<0)},["resolvedArgs",elementIds])},[setFirstLoad]:(transientState,{payload:payload})=>transient_set(transientState,"isFirstLoad",Boolean(payload)),[setFullscreen]:(transientState,{payload:payload})=>transient_set(transientState,"fullscreen",Boolean(payload)),[setElementStats]:(transientState,{payload:payload})=>transient_set(transientState,"elementStats",payload),[transient_selectToplevelNodes]:(transientState,{payload:payload})=>({...transientState,selectedToplevelNodes:payload}),[transient_setZoomScale]:(transientState,{payload:payload})=>({...transientState,zoomScale:payload||1}),[pages_setPage]:transientState=>({...transientState,selectedToplevelNodes:[]}),[addPage]:transientState=>({...transientState,selectedToplevelNodes:[]}),[duplicatePage]:transientState=>({...transientState,selectedToplevelNodes:[]}),[workpad_setRefreshInterval]:(transientState,{payload:payload})=>({...transientState,refresh:{interval:Number(payload)||0}}),[workpad_enableAutoplay]:(transientState,{payload:payload})=>transient_set(transientState,"autoplay.enabled",Boolean(payload)||false),[workpad_setAutoplayInterval]:(transientState,{payload:payload})=>transient_set(transientState,"autoplay.interval",Number(payload)||0)},{});const{set:resolved_args_set,del:resolved_args_del}=object_path_immutable_default.a;function _getState(hasError,loading){if(hasError){return"error"}if(Boolean(loading)){return"pending"}return"ready"}function _getValue(hasError,value,oldVal){if(hasError||value==null){return oldVal&&oldVal.value}return value}function resolved_args_getContext(value,loading=false,oldVal=null){const hasError=value instanceof Error;return{state:_getState(hasError,loading),value:_getValue(hasError,value,oldVal),error:hasError?value:null}}function getFullPath(path){const isArray=Array.isArray(path);const isString=typeof path==="string";if(!isArray&&!isString){throw new Error(`Resolved argument path is invalid: ${path}`)}return prepend(path,"resolvedArgs")}const resolvedArgsReducer=Object(redux_actions_lib["handleActions"])({[setLoading]:(transientState,{payload:payload})=>{const{path:path,loading:loading=true}=payload;const fullPath=getFullPath(path);const oldVal=Object(external_kbnSharedDeps_Lodash_["get"])(transientState,fullPath,null);return resolved_args_set(transientState,fullPath,resolved_args_getContext(Object(external_kbnSharedDeps_Lodash_["get"])(oldVal,"value",null),loading))},[resolved_args_setValue]:(transientState,{payload:payload})=>{const{path:path,value:value}=payload;const fullPath=getFullPath(path);const oldVal=Object(external_kbnSharedDeps_Lodash_["get"])(transientState,fullPath,null);return resolved_args_set(transientState,fullPath,resolved_args_getContext(value,false,oldVal))},[setValues]:(transientState,{payload:payload})=>payload.reduce((acc,setValueObj)=>{const fullPath=getFullPath(setValueObj.path);const oldVal=Object(external_kbnSharedDeps_Lodash_["get"])(acc,fullPath,null);return resolved_args_set(acc,fullPath,resolved_args_getContext(setValueObj.value,false,oldVal))},transientState),[clearValue]:(transientState,{payload:payload})=>{const{path:path}=payload;return resolved_args_del(transientState,getFullPath(path))},[clearValues]:(transientState,{payload:payload})=>payload.reduce((transientState,path)=>resolved_args_del(transientState,getFullPath(path)),transientState),[resolved_args_inFlightActive]:transientState=>resolved_args_set(transientState,"inFlight",true),[inFlightComplete]:transientState=>resolved_args_set(transientState,"inFlight",false),[flushContext]:(transientState,{payload:elementId})=>resolved_args_del(transientState,getFullPath([elementId,"expressionContext"])),[flushContextAfterIndex]:(transientState,{payload:payload})=>{const{elementId:elementId,index:index}=payload;const expressionContext=Object(external_kbnSharedDeps_Lodash_["get"])(transientState,getFullPath([elementId,"expressionContext"]));if(!expressionContext){return transientState}return Object.keys(expressionContext).reduce((state,indexKey)=>{const indexAsNum=parseInt(indexKey,10);if(indexAsNum>=index){return resolved_args_del(state,getFullPath([elementId,"expressionContext",indexKey]))}return state},transientState)},[setWorkpad]:(transientState,{})=>resolved_args_set(transientState,"resolvedArgs",{})},{});const workpadReducer=Object(redux_actions_lib["handleActions"])({[setWorkpad]:(workpadState,{payload:payload})=>{public_services["d"].getService().setRecentlyAccessed(`${constants["j"]}/${payload.id}`,payload.name,payload.id);return payload},[sizeWorkpad]:(workpadState,{payload:payload})=>({...workpadState,...payload}),[setColors]:(workpadState,{payload:payload})=>({...workpadState,colors:payload}),[workpad_setName]:(workpadState,{payload:payload})=>{public_services["d"].getService().setRecentlyAccessed(`${constants["j"]}/${workpadState.id}`,payload,workpadState.id);return{...workpadState,name:payload}},[setWriteable]:(workpadState,{payload:payload})=>({...workpadState,isWriteable:Boolean(payload)}),[workpad_setWorkpadCSS]:(workpadState,{payload:payload})=>({...workpadState,css:payload}),[workpad_setWorkpadVariables]:(workpadState,{payload:payload})=>({...workpadState,variables:payload}),[resetWorkpad]:()=>({...getDefaultWorkpad()})},{});const{set:pages_set,del:pages_del,insert:insert}=object_path_immutable_default.a;const setPageIndex=(workpadState,index)=>index<0||!workpadState.pages[index]||getSelectedPageIndex(workpadState)===index?workpadState:pages_set(workpadState,"page",index);function pages_getPageIndexById(workpadState,id){return workpadState.pages.findIndex(page=>page.id===id)}function pages_addPage(workpadState,payload,srcIndex=workpadState.pages.length-1){return insert(workpadState,"pages",payload||getDefaultPage(),srcIndex+1)}function clonePage(page){const elements=page.elements;const groups=page.groups||[];const nodes=elements.concat(groups);const newNodes=cloneSubgraphs(nodes);return{...page,id:Object(get_id["a"])("page"),groups:newNodes.filter(n=>positioning_utils_isGroupId(n.id)),elements:newNodes.filter(n=>!positioning_utils_isGroupId(n.id))}}const pagesReducer=Object(redux_actions_lib["handleActions"])({[addPage]:(workpadState,{payload:payload})=>{const{page:activePage}=workpadState;const withNewPage=pages_addPage(workpadState,payload,activePage);const newState=setPageIndex(withNewPage,activePage+1);const router=routerProvider();router.navigateTo("loadWorkpad",{id:newState.id,page:newState.page+1});return newState},[duplicatePage]:(workpadState,{payload:payload})=>{const srcPage=workpadState.pages.find(page=>page.id===payload);if(!srcPage){return workpadState}const srcIndex=workpadState.pages.indexOf(srcPage);const newPageIndex=srcIndex+1;const insertedWorkpadState=pages_addPage(workpadState,clonePage(srcPage),srcIndex);const newState=setPageIndex(insertedWorkpadState,newPageIndex);const router=routerProvider();router.navigateTo("loadWorkpad",{id:newState.id,page:newPageIndex+1});return newState},[pages_setPage]:(workpadState,{payload:payload})=>setPageIndex(workpadState,payload),[movePage]:(workpadState,{payload:payload})=>{const{id:id,position:position}=payload;const pageIndex=pages_getPageIndexById(workpadState,id);const newIndex=pageIndex+position;if(pageIndex<0){return workpadState}if(newIndex<0||newIndex>=workpadState.pages.length){return workpadState}const page={...workpadState.pages[pageIndex]};let newState=insert(pages_del(workpadState,`pages.${pageIndex}`),"pages",page,newIndex);const selectedId=workpadState.pages[workpadState.page].id;const newSelectedIndex=newState.pages.findIndex(page=>page.id===selectedId);newState=pages_set(newState,"page",newSelectedIndex);const router=routerProvider();router.navigateTo("loadWorkpad",{id:newState.id,page:newState.page+1});return newState},[removePage]:(workpadState,{payload:payload})=>{const curIndex=workpadState.page;const delIndex=pages_getPageIndexById(workpadState,payload);if(delIndex>=0){let newState=pages_del(workpadState,`pages.${delIndex}`);const router=routerProvider();const wasSelected=curIndex===delIndex;const wasOnlyPage=newState.pages.length===0;const newSelectedPage=curIndex>=delIndex?curIndex-1:curIndex;if(wasOnlyPage){newState=pages_addPage(newState)}if(wasOnlyPage||wasSelected){newState=pages_set(newState,"page",0)}else{newState=pages_set(newState,"page",newSelectedPage)}router.navigateTo("loadWorkpad",{id:newState.id,page:newState.page+1});return newState}},[stylePage]:(workpadState,{payload:payload})=>{const pageIndex=workpadState.pages.findIndex(page=>page.id===payload.pageId);return pages_set(workpadState,`pages.${pageIndex}.style`,payload.style)},[setPageTransition]:(workpadState,{payload:payload})=>{const pageIndex=workpadState.pages.findIndex(page=>page.id===payload.pageId);return pages_set(workpadState,`pages.${pageIndex}.transition`,payload.transition)}},{});const{assign:elements_assign,push:push,del:elements_del,set:elements_set}=object_path_immutable_default.a;const getLocation=type=>type==="group"?"groups":"elements";const firstOccurrence=(element,index,array)=>array.indexOf(element)===index;const getLocationFromIds=(workpadState,pageId,nodeId)=>{const page=workpadState.pages.find(p=>p.id===pageId);const groups=page==null?[]:page.groups||[];return groups.find(e=>e.id===nodeId)?"groups":"elements"};function elements_getPageIndexById(workpadState,pageId){return Object(external_kbnSharedDeps_Lodash_["get"])(workpadState,"pages",[]).findIndex(page=>page.id===pageId)}function getNodeIndexById(page,nodeId,location){return page[location].findIndex(node=>node.id===nodeId)}function assignNodeProperties(workpadState,pageId,nodeId,props){const pageIndex=elements_getPageIndexById(workpadState,pageId);const location=getLocationFromIds(workpadState,pageId,nodeId);const nodesPath=`pages.${pageIndex}.${location}`;const nodeIndex=Object(external_kbnSharedDeps_Lodash_["get"])(workpadState,nodesPath,[]).findIndex(node=>node.id===nodeId);if(pageIndex===-1||nodeIndex===-1){return workpadState}return elements_assign(workpadState,`${nodesPath}.${nodeIndex}`,props)}function moveNodeLayer(workpadState,pageId,nodeId,movement,location){const pageIndex=elements_getPageIndexById(workpadState,pageId);const nodeIndex=getNodeIndexById(workpadState.pages[pageIndex],nodeId,location);const nodes=Object(external_kbnSharedDeps_Lodash_["get"])(workpadState,["pages",pageIndex,location]);const from=nodeIndex;const to=function(){if(movement<Infinity&&movement>-Infinity){return nodeIndex+movement}if(movement===Infinity){return nodes.length-1}if(movement===-Infinity){return 0}throw new Error("Invalid element layer movement")}();if(to>nodes.length-1||to<0){return workpadState}const newNodes=nodes.slice(0);newNodes.splice(to,0,newNodes.splice(from,1)[0]);return elements_set(workpadState,`pages.${pageIndex}.${location}`,newNodes)}const trimPosition=({left:left,top:top,width:width,height:height,angle:angle,parent:parent})=>({left:left,top:top,width:width,height:height,angle:angle,parent:parent});const trimElement=({id:id,position:position,expression:expression,filter:filter})=>({id:id,position:trimPosition(position),...position.type!=="group"&&{expression:expression},...filter!==void 0&&{filter:filter}});const getPageWithElementId=(workpad,elementId)=>{const matchingPage=workpad.pages.find(page=>page.elements.map(element=>element.id).includes(elementId));if(matchingPage){return matchingPage.id}return undefined};const elementsReducer=Object(redux_actions_lib["handleActions"])({[elements_setExpression]:(workpadState,{payload:payload})=>{const{expression:expression,pageId:pageId,elementId:elementId}=payload;return assignNodeProperties(workpadState,pageId,elementId,{expression:expression})},[setFilter]:(workpadState,{payload:payload})=>{const{filter:filter,elementId:elementId}=payload;const pageId=getPageWithElementId(workpadState,elementId);return assignNodeProperties(workpadState,pageId,elementId,{filter:filter})},[elements_setMultiplePositions]:(workpadState,{payload:payload})=>payload.repositionedElements.reduce((previousWorkpadState,{position:position,pageId:pageId,elementId:elementId})=>assignNodeProperties(previousWorkpadState,pageId,elementId,{position:trimPosition(position)}),workpadState),[elements_elementLayer]:(workpadState,{payload:{pageId:pageId,elementId:elementId,movement:movement}})=>{const location=getLocationFromIds(workpadState,pageId,elementId);return moveNodeLayer(workpadState,pageId,elementId,movement,location)},[elements_addElement]:(workpadState,{payload:{pageId:pageId,element:element}})=>{const pageIndex=elements_getPageIndexById(workpadState,pageId);if(pageIndex<0){return workpadState}if(workpadState.pages[pageIndex][getLocation(element.position.type)].find(e=>e.id===element.id)){return workpadState}return push(workpadState,`pages.${pageIndex}.${getLocation(element.position.type)}`,trimElement(element))},[elements_insertNodes]:(workpadState,{payload:{pageId:pageId,elements:elements}})=>{const pageIndex=elements_getPageIndexById(workpadState,pageId);if(pageIndex<0){return workpadState}return elements.reduce((state,element)=>push(state,`pages.${pageIndex}.${getLocation(element.position.type)}`,trimElement(element)),workpadState)},[removeElements]:(workpadState,{payload:{pageId:pageId,elementIds:elementIds}})=>{const pageIndex=elements_getPageIndexById(workpadState,pageId);if(pageIndex<0){return workpadState}const nodeIndices=elementIds.filter(firstOccurrence).map(nodeId=>{const location=getLocationFromIds(workpadState,pageId,nodeId);return{location:location,index:getNodeIndexById(workpadState.pages[pageIndex],nodeId,location)}}).sort((a,b)=>b.index-a.index);return nodeIndices.reduce((state,{location:location,index:index})=>elements_del(state,`pages.${pageIndex}.${location}.${index}`),workpadState)}},{});const{set:assets_set,assign:assets_assign,del:assets_del}=object_path_immutable_default.a;const assetsReducer=Object(redux_actions_lib["handleActions"])({[createAsset]:(assetState,{payload:payload})=>{const asset={id:Object(get_id["a"])("asset"),"@created":(new Date).toISOString(),...payload};return assets_set(assetState,asset.id,asset)},[setAssetValue]:(assetState,{payload:payload})=>{const{id:id,value:value}=payload;const asset=Object(external_kbnSharedDeps_Lodash_["get"])(assetState,[id]);if(!asset){throw new Error(`Can not set asset data, id not found: ${id}`)}return assets_assign(assetState,id,{value:value})},[removeAsset]:(assetState,{payload:assetId})=>assets_del(assetState,assetId),[Object(redux_actions_lib["combineActions"])(setAssets,resetAssets)]:(_assetState,{payload:payload})=>payload||{}},{});const historyReducer=Object(redux_actions_lib["handleActions"])({[restoreHistory]:(persistedState,{payload:payload})=>payload},{});const embeddableReducer=Object(redux_actions_lib["handleActions"])({[UpdateEmbeddableExpressionActionType]:(workpadState,{payload:payload})=>{if(!payload){return workpadState}const{elementId:elementId,embeddableExpression:embeddableExpression}=payload;const pageWithElement=workpadState.pages.find(page=>page.elements.find(element=>element.id===elementId)!==undefined);if(!pageWithElement){return workpadState}const element=pageWithElement.elements.find(elem=>elem.id===elementId);if(!element){return workpadState}const existingAst=Object(common["fromExpression"])(element.expression);const newAst=Object(common["fromExpression"])(embeddableExpression);const searchForFunction=newAst.chain[0].function;const existingAstFunction=existingAst.chain.find(f=>f.function===searchForFunction);if(!existingAstFunction){return workpadState}existingAstFunction.arguments=newAst.chain[0].arguments;const updatedExpression=Object(common["toExpression"])(existingAst);return assignNodeProperties(workpadState,pageWithElement.id,elementId,{expression:updatedExpression})}},{});function getRootReducer(initialState){return Object(redux["combineReducers"])({assets:assetsReducer,app:appReducer,transient:reduce_reducers_lib_default()(transientReducer,resolvedArgsReducer),persistent:reduce_reducers_lib_default()(historyReducer,Object(redux["combineReducers"])({workpad:reduce_reducers_lib_default()(workpadReducer,pagesReducer,elementsReducer,embeddableReducer),schemaVersion:(state=Object(external_kbnSharedDeps_Lodash_["get"])(initialState,"persistent.schemaVersion"))=>state}))})}let store;function getStore(){return store}function cloneStore(){const state=store.getState();store=undefined;return store_createStore(state)}function store_createStore(initialState){if(typeof store!=="undefined"){throw new Error("Redux store can only be initialized once")}if(!Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(initialState)){throw new Error("Initial state must be a plain object")}const rootReducer=getRootReducer(initialState);store=Object(redux["createStore"])(rootReducer,initialState,middleware);return store}function destroyStore(){if(store){store.replaceReducer(state=>state)}store=undefined}function store_getState(){return store.getState()}async function public_store_createStore(core,plugins){if(getStore()){return cloneStore()}return createFreshStore(core,plugins)}async function createFreshStore(core,plugins){const initialState=getInitialState();const basePath=core.http.basePath.get();const serverFunctionsResponse=await core.http.get(constants["c"]);const serverFunctions=Object.values(serverFunctionsResponse);initialState.app={basePath:basePath,serverFunctions:serverFunctions,ready:false};return store_createStore(initialState)}function store_destroyStore(){destroyStore()}function asset_asset(){const{help:help,args:argHelp}=Object(i18n["u"])().asset;const errors=Object(i18n["t"])().asset;return{name:"asset",aliases:[],type:"string",inputTypes:["null"],help:help,args:{id:{aliases:["_"],types:["string"],help:argHelp.id,required:true}},fn:(input,args)=>{const assetId=args.id;const storedAsset=getAssetById(store_getState(),assetId);if(storedAsset!==undefined){return storedAsset.value}throw errors.invalidAssetId(assetId)}}}function getFiltersByGroup(allFilters,groups,ungrouped=false){if(!groups||groups.length===0){if(!ungrouped){return allFilters}return allFilters.filter(filter=>{const ast=Object(common["fromExpression"])(filter);const expGroups=Object(external_kbnSharedDeps_Lodash_["get"])(ast,"chain[0].arguments.filterGroup",[]);return expGroups.length===0})}return allFilters.filter(filter=>{const ast=Object(common["fromExpression"])(filter);const expGroups=Object(external_kbnSharedDeps_Lodash_["get"])(ast,"chain[0].arguments.filterGroup",[]);return expGroups.length>0&&expGroups.every(expGroup=>groups.includes(expGroup))})}function filtersFunctionFactory(initialize){return function filters(){const{help:help,args:argHelp}=Object(i18n["u"])().filters;return{name:"filters",type:"filter",help:help,context:{types:["null"]},args:{group:{aliases:["_"],types:["string"],help:argHelp.group,multi:true},ungrouped:{aliases:["nogroup","nogroups"],types:["boolean"],help:argHelp.ungrouped,default:false}},fn:(input,{group:group,ungrouped:ungrouped})=>{const filterList=getFiltersByGroup(getGlobalFilters(store_getState()),group,ungrouped);if(filterList&&filterList.length){const filterExpression=filterList.join(" | ");const filterAST=Object(common["fromExpression"])(filterExpression);return interpretAst(filterAST,getWorkpadVariablesAsObject(store_getState()))}else{const filterType=initialize.types.filter;return filterType===null||filterType===void 0?void 0:filterType.from(null,{})}}}}}var build_bool_array=__webpack_require__(110);function parseDateMath(timeRange,timeZone,timefilter){const defaultTimezone=external_kbnSharedDeps_MomentTimezone_default()().zoneName();external_kbnSharedDeps_MomentTimezone_default.a.tz.setDefault(timeZone);const parsedRange=timefilter.calculateBounds(timeRange);external_kbnSharedDeps_MomentTimezone_default.a.tz.setDefault(defaultTimezone);return parsedRange}function timelionFunctionFactory(initialize){return()=>{const{help:help,args:argHelp}=Object(i18n["u"])().timelion;return{name:"timelion",type:"datatable",inputTypes:["filter"],help:help,args:{query:{types:["string"],aliases:["_","q"],help:argHelp.query,default:'".es(*)"'},interval:{types:["string"],help:argHelp.interval,default:"auto"},from:{types:["string"],help:argHelp.from,default:"now-1y"},to:{types:["string"],help:argHelp.to,default:"now"},timezone:{types:["string"],help:argHelp.timezone,default:"UTC"}},fn:(input,args)=>{const timeFilter=input.and.find(and=>and.filterType==="time");const range=timeFilter?{min:timeFilter.from,max:timeFilter.to}:parseDateMath({from:args.from,to:args.to},args.timezone,initialize.timefilter);const body={extended:{es:{filter:{bool:{must:Object(build_bool_array["a"])(input.and)}}}},sheet:[args.query],time:{from:range.min,to:range.max,interval:args.interval,timezone:args.timezone}};return Object(fetch["b"])(initialize.prependBasePath(`/api/timelion/run`),{method:"POST",responseType:"json",data:body}).then(resp=>{const seriesList=resp.data.sheet[0].list;const rows=Object(external_kbnSharedDeps_Lodash_["flatten"])(seriesList.map(series=>series.data.map(row=>({"@timestamp":row[0],value:row[1],label:series.label}))));return{type:"datatable",meta:{source:"timelion"},columns:[{id:"@timestamp",name:"@timestamp",meta:{type:"date"}},{id:"value",name:"value",meta:{type:"number"}},{id:"label",name:"label",meta:{type:"string"}}],rows:rows}})}}}}function toFunctionFactory(initialize){return function to(){const{help:help,args:argHelp}=Object(i18n["u"])().to;const errors=Object(i18n["t"])().to;return{name:"to",aliases:[],help:help,args:{type:{types:["string"],help:argHelp.type,aliases:["_"],multi:true}},fn:(input,args)=>{if(!args.type){throw errors.missingType()}return Object(common["castProvider"])(initialize.types)(input,args.type)}}}}var get_legend_config=__webpack_require__(54);const getFlotAxisConfig=(axis,argValue,{columns:columns,ticks:ticks,font:font}={})=>{if(!argValue||Object(types["isAxisConfig"])(argValue)&&argValue.show===false){return{show:false}}const config={show:true};const axisType=Object(external_kbnSharedDeps_Lodash_["get"])(columns,`${axis}.type`);if(Object(types["isAxisConfig"])(argValue)){const{position:position,min:min,max:max,tickSize:tickSize}=argValue;const acceptedPositions=axis==="x"?["bottom","top"]:["left","right"];config.position=position&&acceptedPositions.includes(position)?position:acceptedPositions[0];if(axisType==="number"||axisType==="date"){if(min!=null){config.min=min}if(max!=null){config.max=max}}if(tickSize&&axisType==="number"){config.tickSize=tickSize}}if(axisType==="string"&&ticks){const tickAxis=ticks[axis];if(tickAxis){config.ticks=Object(external_kbnSharedDeps_Lodash_["map"])(tickAxis.hash,(position,name)=>[position,name])}}if(axisType==="date"){config.mode="time"}if(typeof font==="object"){config.font=font}return config};var fonts=__webpack_require__(19);const defaultSpec={size:14,lHeight:21,style:"normal",weight:"normal",family:fonts["openSans"].value,color:"#000"};const getFontSpec=argFont=>{if(!argFont||!argFont.spec){return defaultSpec}const{fontSize:fontSize,lineHeight:lineHeight,fontStyle:fontStyle,fontWeight:fontWeight,fontFamily:fontFamily,color:color}=argFont.spec;const size=fontSize&&Number(fontSize.replace("px",""));const lHeight=typeof lineHeight==="string"&&Number(lineHeight.replace("px",""));return{size:size&&!isNaN(size)?size:defaultSpec.size,lHeight:size&&!isNaN(size)?lHeight:defaultSpec.lHeight,style:fontStyle||defaultSpec.style,weight:fontWeight||defaultSpec.weight,family:fontFamily||defaultSpec.family,color:color||defaultSpec.color}};const seriesStyleToFlot=seriesStyle=>{if(!seriesStyle){return{}}const lines=Object(external_kbnSharedDeps_Lodash_["get"])(seriesStyle,"lines");const bars=Object(external_kbnSharedDeps_Lodash_["get"])(seriesStyle,"bars");const fill=Object(external_kbnSharedDeps_Lodash_["get"])(seriesStyle,"fill");const color=Object(external_kbnSharedDeps_Lodash_["get"])(seriesStyle,"color");const stack=Object(external_kbnSharedDeps_Lodash_["get"])(seriesStyle,"stack");const horizontal=Object(external_kbnSharedDeps_Lodash_["get"])(seriesStyle,"horizontalBars",false);const flotStyle={numbers:{show:true},lines:{show:lines>0,lineWidth:lines,fillColor:color,fill:fill/10},bars:{show:bars>0,barWidth:bars,fill:1,align:"center",horizontal:horizontal},points:{show:false},bubbles:{show:true,fill:fill}};if(stack!=null){flotStyle.stack=stack}if(color){flotStyle.color=color}return flotStyle};const getTickHash=(columns,rows)=>{const ticks={x:{hash:{},counter:0},y:{hash:{},counter:0}};if(Object(external_kbnSharedDeps_Lodash_["get"])(columns,"x.type")==="string"){Object(external_kbnSharedDeps_Lodash_["sortBy"])(rows,["x"]).reverse().forEach(row=>{if(!ticks.x.hash[row.x]){ticks.x.hash[row.x]=ticks.x.counter++}})}if(Object(external_kbnSharedDeps_Lodash_["get"])(columns,"y.type")==="string"){Object(external_kbnSharedDeps_Lodash_["sortBy"])(rows,["y"]).reverse().forEach(row=>{if(!ticks.y.hash[row.y]){ticks.y.hash[row.y]=ticks.y.counter++}})}return ticks};function plotFunctionFactory(paletteService){return()=>{const{help:help,args:argHelp}=Object(i18n["u"])().plot;return{name:"plot",aliases:[],type:"render",inputTypes:["pointseries"],help:help,args:{defaultStyle:{multi:false,types:["seriesStyle"],help:argHelp.defaultStyle,default:"{seriesStyle points=5}"},font:{types:["style"],help:argHelp.font,default:"{font}"},legend:{types:["string","boolean"],help:argHelp.legend,default:"ne",options:[...Object.values(types["Legend"]),false]},palette:{types:["palette"],help:argHelp.palette,default:"{palette}"},seriesStyle:{multi:true,types:["seriesStyle"],help:argHelp.seriesStyle},xaxis:{types:["boolean","axisConfig"],help:argHelp.xaxis,default:true},yaxis:{types:["boolean","axisConfig"],help:argHelp.yaxis,default:true}},fn:(input,args)=>{const seriesStyles=Object(external_kbnSharedDeps_Lodash_["keyBy"])(args.seriesStyle||[],"label")||{};const sortedRows=Object(external_kbnSharedDeps_Lodash_["sortBy"])(input.rows,["x","y","color","size","text"]);const ticks=getTickHash(input.columns,sortedRows);const font=args.font?getFontSpec(args.font):{};const data=Object(external_kbnSharedDeps_Lodash_["map"])(Object(external_kbnSharedDeps_Lodash_["groupBy"])(sortedRows,"color"),(series,label)=>{const seriesStyle={...args.defaultStyle,...seriesStyles[label]};const flotStyle=seriesStyle?seriesStyleToFlot(seriesStyle):{};return{...flotStyle,label:label,data:series.map(point=>{const attrs={};const x=Object(external_kbnSharedDeps_Lodash_["get"])(input.columns,"x.type")==="string"?ticks.x.hash[point.x]:point.x;const y=Object(external_kbnSharedDeps_Lodash_["get"])(input.columns,"y.type")==="string"?ticks.y.hash[point.y]:point.y;if(point.size!=null){attrs.size=point.size}else if(Object(external_kbnSharedDeps_Lodash_["get"])(seriesStyle,"points")){attrs.size=seriesStyle.points;Object(elastic_safer_lodash_set["set"])(flotStyle,"bubbles.size.min",seriesStyle.points)}if(point.text!=null){attrs.text=point.text}return[x,y,attrs]})}});const gridConfig={borderWidth:0,borderColor:null,color:"rgba(0,0,0,0)",labelMargin:30,margin:{right:30,top:20,bottom:0,left:0}};const output={type:"render",as:"plot",value:{font:args.font,data:Object(external_kbnSharedDeps_Lodash_["sortBy"])(data,"label"),options:{canvas:false,colors:paletteService.get(args.palette.name||"custom").getColors(data.length,args.palette.params),legend:Object(get_legend_config["a"])(args.legend,data.length),grid:gridConfig,xaxis:getFlotAxisConfig("x",args.xaxis,{columns:input.columns,ticks:ticks,font:font}),yaxis:getFlotAxisConfig("y",args.yaxis,{columns:input.columns,ticks:ticks,font:font}),series:{shadowSize:0,...seriesStyleToFlot(args.defaultStyle)}}}};return JSON.parse(JSON.stringify(output))}}}}function pieFunctionFactory(paletteService){return()=>{const{help:help,args:argHelp}=Object(i18n["u"])().pie;return{name:"pie",aliases:[],type:"render",inputTypes:["pointseries"],help:help,args:{font:{types:["style"],help:argHelp.font,default:"{font}"},hole:{types:["number"],default:0,help:argHelp.hole},labelRadius:{types:["number"],default:100,help:argHelp.labelRadius},labels:{types:["boolean"],default:true,help:argHelp.labels},legend:{types:["string","boolean"],help:argHelp.legend,default:false,options:[...Object.values(types["Legend"]),false]},palette:{types:["palette"],help:argHelp.palette,default:"{palette}"},radius:{types:["string","number"],help:argHelp.radius,default:"auto"},seriesStyle:{multi:true,types:["seriesStyle"],help:argHelp.seriesStyle},tilt:{types:["number"],default:1,help:argHelp.tilt}},fn:(input,args)=>{const{tilt:tilt,radius:radius,labelRadius:labelRadius,labels:labels,hole:hole,legend:legend,palette:palette,font:font,seriesStyle:seriesStyle}=args;const seriesStyles=Object(external_kbnSharedDeps_Lodash_["keyBy"])(seriesStyle||[],"label")||{};const data=Object(external_kbnSharedDeps_Lodash_["map"])(Object(external_kbnSharedDeps_Lodash_["groupBy"])(input.rows,"color"),(series,label="")=>{const item={label:label,data:series.map(point=>point.size||1)};const style=seriesStyles[label];if(style){item.color=Object(external_kbnSharedDeps_Lodash_["get"])(style,"color")}return item});return{type:"render",as:"pie",value:{font:font,data:data,options:{canvas:false,colors:paletteService.get(palette.name||"custom").getColors(data.length,palette.params),legend:Object(get_legend_config["a"])(legend,data.length),grid:{show:false},series:{pie:{show:true,innerRadius:Math.max(hole,0)/100,stroke:{width:0},label:{show:labels,radius:(labelRadius>=0?labelRadius:100)/100},tilt:tilt,radius:radius},bubbles:{show:false},shadowSize:0}}}}}}}}function initFunctions(initialize){return[asset_asset,filtersFunctionFactory(initialize),timelionFunctionFactory(initialize),toFunctionFactory(initialize),pieFunctionFactory(initialize.paletteService),plotFunctionFactory(initialize.paletteService)]}var plugins_size=__webpack_require__(38);var plugins_text=__webpack_require__(39);var public_style=__webpack_require__(453);const{ReadOnlyBadge:application_strings}=i18n["d"];const renderApp=(coreStart,plugins,{element:element},canvasStore)=>{element.classList.add("canvas");element.classList.add("canvasContainerWrapper");external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(public_["KibanaContextProvider"],{services:{...plugins,...coreStart}},external_kbnSharedDeps_React_default.a.createElement(public_services["a"],{providers:public_services["e"]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement(lib["Provider"],{store:canvasStore},external_kbnSharedDeps_React_default.a.createElement(components_app_App,null))))),element);return()=>{external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(element);canvasStore.dispatch(appUnload())}};const initializeCanvas=async(coreSetup,coreStart,setupPlugins,startPlugins,registries,appUpdater)=>{await Object(public_services["f"])(coreSetup,coreStart,setupPlugins,startPlugins,appUpdater);const canvasFunctions=initFunctions({timefilter:setupPlugins.data.query.timefilter.timefilter,prependBasePath:coreSetup.http.basePath.prepend,types:setupPlugins.expressions.getTypes(),paletteService:await setupPlugins.charts.palettes.getPalettes()});for(const fn of canvasFunctions){public_services["e"].expressions.getService().registerFunction(fn)}createHistory();const canvasStore=await public_store_createStore(coreSetup,setupPlugins);registerLanguage(Object.values(public_services["e"].expressions.getService().getFunctions()));initRegistries();await populateRegistries(registries);coreStart.chrome.setBadge(coreStart.application.capabilities.canvas&&coreStart.application.capabilities.canvas.save?undefined:{text:application_strings.getText(),tooltip:application_strings.getTooltip(),iconType:"glasses"});coreStart.chrome.setHelpExtension({appName:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.canvas.helpMenu.appName",{defaultMessage:"Canvas"}),links:[{linkType:"documentation",href:getDocumentationLinks().canvas}],content:domNode=>{external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(HelpMenu,{functionRegistry:public_services["e"].expressions.getService().getFunctions()}),domNode);return()=>external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(domNode)}});if(setupPlugins.usageCollection){init(setupPlugins.usageCollection.reportUiCounter)}return canvasStore};const teardownCanvas=(coreStart,startPlugins)=>{destroyRegistries();if(Object(external_kbnSharedDeps_Lodash_["includes"])($.plot.plugins,plugins_size["a"])){Object(external_kbnSharedDeps_Lodash_["remove"])($.plot.plugins,plugins_size["a"])}if(Object(external_kbnSharedDeps_Lodash_["includes"])($.plot.plugins,plugins_text["a"])){Object(external_kbnSharedDeps_Lodash_["remove"])($.plot.plugins,plugins_text["a"])}coreStart.chrome.setBadge(undefined);coreStart.chrome.setHelpExtension(undefined);destroyHistory();stopRouter()}}])]);