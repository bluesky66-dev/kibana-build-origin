/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window["securitySolution_bundle_jsonpfunction"]=window["securitySolution_bundle_jsonpfunction"]||[]).push([[15],{1185:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"EqlTabContentComponent",(function(){return EqlTabContentComponent}));__webpack_require__.d(__webpack_exports__,"default",(function(){return EqlTabContent}));var external_kbnSharedDeps_ElasticEui_=__webpack_require__(72);var external_kbnSharedDeps_LodashFp_=__webpack_require__(7);var external_kbnSharedDeps_React_=__webpack_require__(6);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_StyledComponents_=__webpack_require__(73);var external_kbnSharedDeps_StyledComponents_default=__webpack_require__.n(external_kbnSharedDeps_StyledComponents_);var lib=__webpack_require__(105);var fast_deep_equal=__webpack_require__(107);var fast_deep_equal_default=__webpack_require__.n(fast_deep_equal);var web=__webpack_require__(231);var store_timeline=__webpack_require__(108);var containers=__webpack_require__(407);var default_headers=__webpack_require__(142);var body=__webpack_require__(400);var footer=__webpack_require__(410);var helpers=__webpack_require__(119);var refetch_timeline=__webpack_require__(482);var manage_timeline=__webpack_require__(152);var types_timeline=__webpack_require__(106);var default_config=__webpack_require__(204);var exit_full_screen=__webpack_require__(310);var super_date_picker=__webpack_require__(244);var event_details_width_context=__webpack_require__(272);var pick_events=__webpack_require__(523);var store=__webpack_require__(122);var sourcerer=__webpack_require__(137);var model=__webpack_require__(117);var defaults=__webpack_require__(118);var containers_sourcerer=__webpack_require__(124);var use_timeline_events_count=__webpack_require__(388);var date_picker_lock=__webpack_require__(524);var use_full_screen=__webpack_require__(139);var active_timeline_context=__webpack_require__(223);var side_panel=__webpack_require__(280);var external_kbnSharedDeps_Lodash_=__webpack_require__(19);var use_selector=__webpack_require__(109);var eql_query_bar=__webpack_require__(507);var validators=__webpack_require__(322);var shared_imports=__webpack_require__(110);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);const EQL_QUERY_BAR_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.securitySolution.timeline.EqlQueryBarLabel",{defaultMessage:"EQL query"});var reselect_lib=__webpack_require__(123);var selectors=__webpack_require__(285);const getEqlOptions=()=>Object(reselect_lib["createSelector"])(selectors["selectTimeline"],timeline=>{var _timeline$eqlOptions;return(_timeline$eqlOptions=timeline===null||timeline===void 0?void 0:timeline.eqlOptions)!==null&&_timeline$eqlOptions!==void 0?_timeline$eqlOptions:{eventCategoryField:[{label:"event.category"}],tiebreakerField:[{label:""}],timestampField:[{label:"@timestamp"}],size:100,query:""}});const defaultValues={index:[],eqlQueryBar:{query:{query:"",language:"eql"},filters:[],saved_id:undefined}};const schema={index:{fieldsToValidateOnChange:["index","eqlQueryBar"],validations:[]},eqlQueryBar:{validations:[{validator:Object(validators["a"])(validators["b"],300)}]}};const HiddenUseField=external_kbnSharedDeps_StyledComponents_default()(shared_imports["j"]).withConfig({displayName:"HiddenUseField",componentId:"fj97qw-0"})(["display:none;"]);const EqlQueryBarTimeline=Object(external_kbnSharedDeps_React_["memo"])(({timelineId:timelineId})=>{var _optionsSelected$quer;const dispatch=Object(lib["useDispatch"])();const isInit=Object(external_kbnSharedDeps_React_["useRef"])(true);const[isQueryBarValid,setIsQueryBarValid]=Object(external_kbnSharedDeps_React_["useState"])(false);const[isQueryBarValidating,setIsQueryBarValidating]=Object(external_kbnSharedDeps_React_["useState"])(false);const getOptionsSelected=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getEqlOptions(),[]);const optionsSelected=Object(use_selector["a"])(state=>getOptionsSelected(state,timelineId));const{loading:indexPatternsLoading,indexPattern:indexPattern,selectedPatterns:selectedPatterns}=Object(containers_sourcerer["b"])(model["SourcererScopeName"].timeline);const initialState={...defaultValues,index:selectedPatterns.sort(),eqlQueryBar:{...defaultValues.eqlQueryBar,query:{query:(_optionsSelected$quer=optionsSelected.query)!==null&&_optionsSelected$quer!==void 0?_optionsSelected$quer:"",language:"eql"}}};const{form:form}=Object(shared_imports["I"])({defaultValue:initialState,options:{stripEmptyFields:false},schema:schema});const{getFields:getFields}=form;const onOptionsChange=Object(external_kbnSharedDeps_React_["useCallback"])((field,value)=>dispatch(store_timeline["a"].updateEqlOptions({id:timelineId,field:field,value:value})),[dispatch,timelineId]);const[{eqlQueryBar:formEqlQueryBar}]=Object(shared_imports["K"])({form:form,watch:["eqlQueryBar"]});const optionsData=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object(external_kbnSharedDeps_Lodash_["isEmpty"])(indexPattern.fields)?{keywordFields:[],dateFields:[],nonDateFields:[]}:{keywordFields:indexPattern.fields.filter(f=>{var _f$esTypes;return(_f$esTypes=f.esTypes)===null||_f$esTypes===void 0?void 0:_f$esTypes.includes("keyword")}).map(f=>({label:f.name})),dateFields:indexPattern.fields.filter(f=>f.type==="date").map(f=>({label:f.name})),nonDateFields:indexPattern.fields.filter(f=>f.type!=="date").map(f=>({label:f.name}))},[indexPattern]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const{index:indexField}=getFields();const newIndexValue=selectedPatterns.sort();const indexFieldValue=indexField.value.sort();if(!Object(external_kbnSharedDeps_Lodash_["isEqual"])(indexFieldValue,newIndexValue)){indexField.setValue(newIndexValue)}},[getFields,selectedPatterns]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const{eqlQueryBar:eqlQueryBar}=getFields();if(isInit.current){var _optionsSelected$quer2;isInit.current=false;setIsQueryBarValidating(true);eqlQueryBar.setValue({...defaultValues.eqlQueryBar,query:{query:(_optionsSelected$quer2=optionsSelected.query)!==null&&_optionsSelected$quer2!==void 0?_optionsSelected$quer2:"",language:"eql"}})}return()=>{isInit.current=true}},[getFields,optionsSelected.query]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(formEqlQueryBar!=null&&!Object(external_kbnSharedDeps_Lodash_["isEmpty"])(formEqlQueryBar.query.query)&&isQueryBarValid&&!isQueryBarValidating){dispatch(store_timeline["a"].updateEqlOptions({id:timelineId,field:"query",value:`${formEqlQueryBar.query.query}`}));setIsQueryBarValid(false);setIsQueryBarValidating(false)}},[dispatch,formEqlQueryBar,isQueryBarValid,isQueryBarValidating,timelineId]);return external_kbnSharedDeps_React_default.a.createElement(shared_imports["e"],{form:form,"data-test-subj":"EqlQueryBarTimeline"},external_kbnSharedDeps_React_default.a.createElement(HiddenUseField,{key:"Index",path:"index"}),external_kbnSharedDeps_React_default.a.createElement(shared_imports["j"],{key:"EqlQueryBar",path:"eqlQueryBar",component:eql_query_bar["a"],componentProps:{optionsData:optionsData,optionsSelected:optionsSelected,onOptionsChange:onOptionsChange,onValidityChange:setIsQueryBarValid,onValiditingChange:setIsQueryBarValidating,idAria:"timelineEqlQueryBar",isDisabled:indexPatternsLoading,isLoading:indexPatternsLoading,dataTestSubj:"timelineEqlQueryBar"},config:{...schema.eqlQueryBar,label:EQL_QUERY_BAR_LABEL}}))});const TimelineHeaderContainer=external_kbnSharedDeps_StyledComponents_default.a.div.withConfig({displayName:"TimelineHeaderContainer",componentId:"sc-1f3fsnr-0"})(["margin-top:6px;width:100%;"]);TimelineHeaderContainer.displayName="TimelineHeaderContainer";const StyledEuiFlyoutHeader=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"]).withConfig({displayName:"StyledEuiFlyoutHeader",componentId:"sc-1f3fsnr-1"})(["align-items:stretch;box-shadow:none;display:flex;flex-direction:column;padding:0;&.euiFlyoutHeader{","}"],({theme:theme})=>`padding: 0 ${theme.eui.euiSizeS} ${theme.eui.euiSizeS} ${theme.eui.euiSizeS};`);const StyledEuiFlyoutBody=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"]).withConfig({displayName:"StyledEuiFlyoutBody",componentId:"sc-1f3fsnr-2"})(["overflow-y:hidden;flex:1;.euiFlyoutBody__overflow{overflow:hidden;mask-image:none;}.euiFlyoutBody__overflowContent{padding:0;height:100%;display:flex;}"]);const StyledEuiFlyoutFooter=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"]).withConfig({displayName:"StyledEuiFlyoutFooter",componentId:"sc-1f3fsnr-3"})(["background:none;padding:0;&.euiFlyoutFooter{","}"],({theme:theme})=>`padding: ${theme.eui.euiSizeS} 0 0 0;`);const FullWidthFlexGroup=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"]).withConfig({displayName:"FullWidthFlexGroup",componentId:"sc-1f3fsnr-4"})(["margin:0;width:100%;overflow:hidden;"]);const ScrollableFlexItem=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"]).withConfig({displayName:"ScrollableFlexItem",componentId:"sc-1f3fsnr-5"})(["overflow:hidden;"]);const DatePicker=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"]).withConfig({displayName:"DatePicker",componentId:"sc-1f3fsnr-6"})([".euiSuperDatePicker__flexWrapper{max-width:none;width:auto;}"]);DatePicker.displayName="DatePicker";const VerticalRule=external_kbnSharedDeps_StyledComponents_default.a.div.withConfig({displayName:"VerticalRule",componentId:"sc-1f3fsnr-7"})(["width:2px;height:100%;background:",";"],({theme:theme})=>theme.eui.euiColorLightShade);VerticalRule.displayName="VerticalRule";const EventsCountBadge=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiBadge"]).withConfig({displayName:"EventsCountBadge",componentId:"sc-1f3fsnr-8"})(["margin-left:",";"],({theme:theme})=>theme.eui.paddingSizes.s);const isTimerangeSame=(prevProps,nextProps)=>prevProps.end===nextProps.end&&prevProps.start===nextProps.start&&prevProps.timerangeKind===nextProps.timerangeKind;const EMPTY_EVENTS=[];const NO_SORTING=[];const EqlTabContentComponent=({activeTab:activeTab,columns:columns,end:end,eqlOptions:eqlOptions,eventType:eventType,expandedDetail:expandedDetail,timelineId:timelineId,isLive:isLive,itemsPerPage:itemsPerPage,itemsPerPageOptions:itemsPerPageOptions,onEventClosed:onEventClosed,showExpandedDetails:showExpandedDetails,start:start,timerangeKind:timerangeKind,updateEventTypeAndIndexesName:updateEventTypeAndIndexesName})=>{var _pageInfo$activePage;const{query:eqlQuery="",...restEqlOption}=eqlOptions;const{portalNode:eqlEventsCountPortalNode}=Object(use_timeline_events_count["c"])();const{setTimelineFullScreen:setTimelineFullScreen,timelineFullScreen:timelineFullScreen}=Object(use_full_screen["b"])();const{browserFields:browserFields,docValueFields:docValueFields,loading:loadingSourcerer,selectedPatterns:selectedPatterns}=Object(containers_sourcerer["b"])(model["SourcererScopeName"].timeline);const isBlankTimeline=Object(external_kbnSharedDeps_LodashFp_["isEmpty"])(eqlQuery);const canQueryTimeline=()=>loadingSourcerer!=null&&!loadingSourcerer&&!Object(external_kbnSharedDeps_LodashFp_["isEmpty"])(start)&&!Object(external_kbnSharedDeps_LodashFp_["isEmpty"])(end)&&!isBlankTimeline;const getTimelineQueryFields=()=>{const columnsHeader=Object(external_kbnSharedDeps_LodashFp_["isEmpty"])(columns)?default_headers["c"]:columns;const columnFields=columnsHeader.map(c=>c.id);return[...columnFields,...default_config["f"]]};const{initializeTimeline:initializeTimeline,setIsTimelineLoading:setIsTimelineLoading}=Object(manage_timeline["b"])();Object(external_kbnSharedDeps_React_["useEffect"])(()=>{initializeTimeline({id:timelineId})},[initializeTimeline,timelineId]);const[isQueryLoading,{events:events,inspect:inspect,totalCount:totalCount,pageInfo:pageInfo,loadPage:loadPage,updatedAt:updatedAt,refetch:refetch}]=Object(containers["a"])({docValueFields:docValueFields,endDate:end,eqlOptions:restEqlOption,id:timelineId,indexNames:selectedPatterns,fields:getTimelineQueryFields(),language:"eql",limit:itemsPerPage,filterQuery:eqlQuery!==null&&eqlQuery!==void 0?eqlQuery:"",startDate:start,skip:!canQueryTimeline(),timerangeKind:timerangeKind});const handleOnPanelClosed=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{var _expandedDetail$Timel;onEventClosed({tabType:types_timeline["h"].eql,timelineId:timelineId});if((_expandedDetail$Timel=expandedDetail[types_timeline["h"].eql])!==null&&_expandedDetail$Timel!==void 0&&_expandedDetail$Timel.panelView&&timelineId===types_timeline["e"].active&&showExpandedDetails){active_timeline_context["a"].toggleExpandedDetail({})}},[onEventClosed,timelineId,expandedDetail,showExpandedDetails]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{setIsTimelineLoading({id:timelineId,isLoading:isQueryLoading||loadingSourcerer})},[loadingSourcerer,timelineId,isQueryLoading,setIsTimelineLoading]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(web["a"],{node:eqlEventsCountPortalNode},totalCount>=0?external_kbnSharedDeps_React_default.a.createElement(EventsCountBadge,null,totalCount):null),external_kbnSharedDeps_React_default.a.createElement(refetch_timeline["a"],{id:`${timelineId}-${types_timeline["h"].eql}`,inputId:"timeline",inspect:inspect,loading:isQueryLoading,refetch:refetch}),external_kbnSharedDeps_React_default.a.createElement(FullWidthFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(ScrollableFlexItem,{grow:2},external_kbnSharedDeps_React_default.a.createElement(StyledEuiFlyoutHeader,{"data-test-subj":`${activeTab}-tab-flyout-header`,hasBorder:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s","data-test-subj":"timeline-date-picker-container"},timelineFullScreen&&setTimelineFullScreen!=null&&external_kbnSharedDeps_React_default.a.createElement(exit_full_screen["b"],{fullScreen:timelineFullScreen,setFullScreen:setTimelineFullScreen}),external_kbnSharedDeps_React_default.a.createElement(DatePicker,{grow:1},external_kbnSharedDeps_React_default.a.createElement(super_date_picker["a"],{id:"timeline",timelineId:timelineId})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(date_picker_lock["a"],null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(pick_events["a"],{eventType:eventType,onChangeEventTypeAndIndexesName:updateEventTypeAndIndexesName}))),external_kbnSharedDeps_React_default.a.createElement(TimelineHeaderContainer,{"data-test-subj":"timelineHeader"},external_kbnSharedDeps_React_default.a.createElement(EqlQueryBarTimeline,{timelineId:timelineId}))),external_kbnSharedDeps_React_default.a.createElement(event_details_width_context["a"],null,external_kbnSharedDeps_React_default.a.createElement(StyledEuiFlyoutBody,{"data-test-subj":`${types_timeline["h"].eql}-tab-flyout-body`,className:"timeline-flyout-body"},external_kbnSharedDeps_React_default.a.createElement(body["a"],{activePage:pageInfo.activePage,browserFields:browserFields,data:isBlankTimeline?EMPTY_EVENTS:events,id:timelineId,refetch:refetch,sort:NO_SORTING,tabType:types_timeline["h"].eql,totalPages:Object(helpers["j"])({itemsCount:totalCount,itemsPerPage:itemsPerPage})})),external_kbnSharedDeps_React_default.a.createElement(StyledEuiFlyoutFooter,{"data-test-subj":`${types_timeline["h"].eql}-tab-flyout-footer`,className:"timeline-flyout-footer"},!isBlankTimeline&&external_kbnSharedDeps_React_default.a.createElement(footer["a"],{activePage:(_pageInfo$activePage=pageInfo===null||pageInfo===void 0?void 0:pageInfo.activePage)!==null&&_pageInfo$activePage!==void 0?_pageInfo$activePage:0,"data-test-subj":"timeline-footer",updatedAt:updatedAt,height:footer["b"],id:timelineId,isLive:isLive,isLoading:isQueryLoading||loadingSourcerer,itemsCount:isBlankTimeline?0:events.length,itemsPerPage:itemsPerPage,itemsPerPageOptions:itemsPerPageOptions,onChangePage:loadPage,totalCount:isBlankTimeline?0:totalCount})))),showExpandedDetails&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(VerticalRule,null),external_kbnSharedDeps_React_default.a.createElement(ScrollableFlexItem,{grow:1},external_kbnSharedDeps_React_default.a.createElement(side_panel["a"],{browserFields:browserFields,docValueFields:docValueFields,tabType:types_timeline["h"].eql,timelineId:timelineId,handleOnPanelClosed:handleOnPanelClosed})))))};const makeMapStateToProps=()=>{const getTimeline=store_timeline["b"].getTimelineByIdSelector();const getInputsTimeline=store["inputsSelectors"].getTimelineSelector();const mapStateToProps=(state,{timelineId:timelineId})=>{var _getTimeline,_expandedDetail$Timel2;const timeline=(_getTimeline=getTimeline(state,timelineId))!==null&&_getTimeline!==void 0?_getTimeline:defaults["a"];const input=getInputsTimeline(state);const{activeTab:activeTab,columns:columns,eqlOptions:eqlOptions,eventType:eventType,expandedDetail:expandedDetail,itemsPerPage:itemsPerPage,itemsPerPageOptions:itemsPerPageOptions}=timeline;return{activeTab:activeTab,columns:columns,eqlOptions:eqlOptions,eventType:eventType!==null&&eventType!==void 0?eventType:"raw",end:input.timerange.to,expandedDetail:expandedDetail,timelineId:timelineId,isLive:input.policy.kind==="interval",itemsPerPage:itemsPerPage,itemsPerPageOptions:itemsPerPageOptions,showExpandedDetails:!!expandedDetail[types_timeline["h"].eql]&&!!((_expandedDetail$Timel2=expandedDetail[types_timeline["h"].eql])!==null&&_expandedDetail$Timel2!==void 0&&_expandedDetail$Timel2.panelView),start:input.timerange.from,timerangeKind:input.timerange.kind}};return mapStateToProps};const mapDispatchToProps=(dispatch,{timelineId:timelineId})=>({updateEventTypeAndIndexesName:(newEventType,newIndexNames)=>{dispatch(store_timeline["a"].updateEventType({id:timelineId,eventType:newEventType}));dispatch(store_timeline["a"].updateIndexNames({id:timelineId,indexNames:newIndexNames}));dispatch(sourcerer["a"].setSelectedIndexPatterns({id:model["SourcererScopeName"].timeline,selectedPatterns:newIndexNames}))},onEventClosed:args=>{dispatch(store_timeline["a"].toggleDetailPanel(args))}});const connector=Object(lib["connect"])(makeMapStateToProps,mapDispatchToProps);const EqlTabContent=connector(external_kbnSharedDeps_React_default.a.memo(EqlTabContentComponent,(prevProps,nextProps)=>prevProps.activeTab===nextProps.activeTab&&isTimerangeSame(prevProps,nextProps)&&fast_deep_equal_default()(prevProps.eqlOptions,nextProps.eqlOptions)&&prevProps.eventType===nextProps.eventType&&prevProps.isLive===nextProps.isLive&&prevProps.itemsPerPage===nextProps.itemsPerPage&&prevProps.onEventClosed===nextProps.onEventClosed&&prevProps.showExpandedDetails===nextProps.showExpandedDetails&&prevProps.timelineId===nextProps.timelineId&&prevProps.updateEventTypeAndIndexesName===nextProps.updateEventTypeAndIndexesName&&fast_deep_equal_default()(prevProps.columns,nextProps.columns)&&fast_deep_equal_default()(prevProps.itemsPerPageOptions,nextProps.itemsPerPageOptions)))},186:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"m",(function(){return EQL_VALIDATION_REQUEST_ERROR}));__webpack_require__.d(__webpack_exports__,"k",(function(){return EQL_VALIDATION_ERRORS_TITLE}));__webpack_require__.d(__webpack_exports__,"l",(function(){return EQL_VALIDATION_ERROR_POPOVER_LABEL}));__webpack_require__.d(__webpack_exports__,"i",(function(){return EQL_OVERVIEW_LINK_TEXT}));__webpack_require__.d(__webpack_exports__,"j",(function(){return EQL_SETTINGS_TITLE}));__webpack_require__.d(__webpack_exports__,"h",(function(){return EQL_OPTIONS_SIZE_LABEL}));__webpack_require__.d(__webpack_exports__,"g",(function(){return EQL_OPTIONS_SIZE_HELPER}));__webpack_require__.d(__webpack_exports__,"b",(function(){return EQL_OPTIONS_EVENT_CATEGORY_FIELD_LABEL}));__webpack_require__.d(__webpack_exports__,"a",(function(){return EQL_OPTIONS_EVENT_CATEGORY_FIELD_HELPER}));__webpack_require__.d(__webpack_exports__,"d",(function(){return EQL_OPTIONS_EVENT_TIEBREAKER_FIELD_LABEL}));__webpack_require__.d(__webpack_exports__,"c",(function(){return EQL_OPTIONS_EVENT_TIEBREAKER_FIELD_HELPER}));__webpack_require__.d(__webpack_exports__,"f",(function(){return EQL_OPTIONS_EVENT_TIMESTAMP_FIELD_LABEL}));__webpack_require__.d(__webpack_exports__,"e",(function(){return EQL_OPTIONS_EVENT_TIMESTAMP_FIELD_HELPER}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__);const EQL_VALIDATION_REQUEST_ERROR=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.detectionEngine.eqlValidation.requestError",{defaultMessage:"An error occurred while validating your EQL query"});const EQL_VALIDATION_ERRORS_TITLE=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.detectionEngine.eqlValidation.title",{defaultMessage:"EQL Validation Errors"});const EQL_VALIDATION_ERROR_POPOVER_LABEL=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.detectionEngine.eqlValidation.showErrorsLabel",{defaultMessage:"Show EQL Validation Errors"});const EQL_QUERY_BAR_LABEL=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.detectionEngine.eqlQueryBar.label",{defaultMessage:"Enter an EQL Query"});const EQL_OVERVIEW_LINK_TEXT=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.detectionEngine.eqlOverViewLink.text",{defaultMessage:"Event Query Language (EQL) Overview"});const EQL_SETTINGS_TITLE=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.detectionEngine.eqlSettings.title",{defaultMessage:"EQL settings"});const EQL_OPTIONS_SIZE_LABEL=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.detectionEngine.eqlOptionsSize.label",{defaultMessage:"Size"});const EQL_OPTIONS_SIZE_HELPER=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.detectionEngine.eqlOptionsSize.text",{defaultMessage:"For basic queries, the maximum number of matching events to return. For sequence queries, the maximum number of matching sequences to return."});const EQL_OPTIONS_EVENT_CATEGORY_FIELD_LABEL=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.detectionEngine.eqlOptionsEventCategoryField.label",{defaultMessage:"Event category field"});const EQL_OPTIONS_EVENT_CATEGORY_FIELD_HELPER=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.detectionEngine.eqlOptionsEventCategoryField.text",{defaultMessage:"Field containing the event classification, such as process, file, or network. This field is typically mapped as a field type in the keyword family"});const EQL_OPTIONS_EVENT_TIEBREAKER_FIELD_LABEL=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.detectionEngine.eqlOptionsEventTiebreakerField.label",{defaultMessage:"Tiebreaker field"});const EQL_OPTIONS_EVENT_TIEBREAKER_FIELD_HELPER=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.detectionEngine.eqlOptionsEventTiebreakerField.text",{defaultMessage:"Field used to sort hits with the same timestamp in ascending, lexicographic order"});const EQL_OPTIONS_EVENT_TIMESTAMP_FIELD_LABEL=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.detectionEngine.eqlOptionsEventTimestampField.label",{defaultMessage:"Timestamp field"});const EQL_OPTIONS_EVENT_TIMESTAMP_FIELD_HELPER=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.detectionEngine.eqlOptionsEventTimestampField.text",{defaultMessage:"Field containing event timestamp"})},320:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"f",(function(){return FILTER_DESCRIPTION}));__webpack_require__.d(__webpack_exports__,"i",(function(){return FILTER_KQL_TOOLTIP}));__webpack_require__.d(__webpack_exports__,"g",(function(){return FILTER_KQL_PLACEHOLDER}));__webpack_require__.d(__webpack_exports__,"h",(function(){return FILTER_KQL_SELECTED_TEXT}));__webpack_require__.d(__webpack_exports__,"o",(function(){return SEARCH_DESCRIPTION}));__webpack_require__.d(__webpack_exports__,"r",(function(){return SEARCH_KQL_TOOLTIP}));__webpack_require__.d(__webpack_exports__,"p",(function(){return SEARCH_KQL_PLACEHOLDER}));__webpack_require__.d(__webpack_exports__,"q",(function(){return SEARCH_KQL_SELECTED_TEXT}));__webpack_require__.d(__webpack_exports__,"j",(function(){return FILTER_OR_SEARCH_WITH_KQL}));__webpack_require__.d(__webpack_exports__,"a",(function(){return ALL_EVENT}));__webpack_require__.d(__webpack_exports__,"m",(function(){return RAW_EVENT}));__webpack_require__.d(__webpack_exports__,"e",(function(){return DETECTION_ALERTS_EVENT}));__webpack_require__.d(__webpack_exports__,"c",(function(){return CUSTOM_INDEX_PATTERNS}));__webpack_require__.d(__webpack_exports__,"s",(function(){return SELECT_INDEX_PATTERNS}));__webpack_require__.d(__webpack_exports__,"b",(function(){return CONFIGURE_INDEX_PATTERNS}));__webpack_require__.d(__webpack_exports__,"n",(function(){return SAVE_INDEX_PATTERNS}));__webpack_require__.d(__webpack_exports__,"t",(function(){return SHOW_INDEX_PATTERNS_ADVANCED_SETTINGS}));__webpack_require__.d(__webpack_exports__,"k",(function(){return HIDE_INDEX_PATTERNS_ADVANCED_SETTINGS}));__webpack_require__.d(__webpack_exports__,"d",(function(){return DATA_SOURCES_RESET}));__webpack_require__.d(__webpack_exports__,"l",(function(){return PICK_INDEX_PATTERNS}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__);const FILTER_DESCRIPTION=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.filterDescription",{defaultMessage:"Events from the data providers above are filtered by the adjacent KQL"});const FILTER_KQL_TOOLTIP=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.filterKqlTooltip",{defaultMessage:"Events from the data providers above are filtered by this KQL"});const FILTER_KQL_PLACEHOLDER=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.filterKqlPlaceholder",{defaultMessage:"Filter events"});const FILTER_KQL_SELECTED_TEXT=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.filterKqlSelectedText",{defaultMessage:"Filter"});const SEARCH_DESCRIPTION=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.searchDescription",{defaultMessage:"Events from the data providers above are combined with results from the adjacent KQL"});const SEARCH_KQL_TOOLTIP=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.searchKqlTooltip",{defaultMessage:"Events from the data providers above are combined with results from this KQL"});const SEARCH_KQL_PLACEHOLDER=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.searchKqlPlaceholder",{defaultMessage:"Search events"});const SEARCH_KQL_SELECTED_TEXT=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.searchKqlSelectedText",{defaultMessage:"Search"});const FILTER_OR_SEARCH_WITH_KQL=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.filterOrSearchWithKql",{defaultMessage:"Filter or Search with KQL"});const ALL_EVENT=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.eventTypeAllEvent",{defaultMessage:"All data sources"});const RAW_EVENT=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.eventTypeRawEvent",{defaultMessage:"Events"});const DETECTION_ALERTS_EVENT=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.eventTypeDetectionAlertsEvent",{defaultMessage:"Detection Alerts"});const CUSTOM_INDEX_PATTERNS=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.customeIndexNames",{defaultMessage:"Custom"});const SELECT_INDEX_PATTERNS=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.indexPatterns.help",{defaultMessage:"Data sources selection"});const CONFIGURE_INDEX_PATTERNS=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.indexPatterns.configure",{defaultMessage:"View data sources associated with each of the above selections"});const SAVE_INDEX_PATTERNS=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.indexPatterns.save",{defaultMessage:"Save"});const SHOW_INDEX_PATTERNS_ADVANCED_SETTINGS=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.indexPatterns.showAdvancedSettings",{defaultMessage:"Show Advanced"});const HIDE_INDEX_PATTERNS_ADVANCED_SETTINGS=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.indexPatterns.hideAdvancedSettings",{defaultMessage:"Hide Advanced"});const DATA_SOURCES_RESET=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.indexPatterns.resetSettings",{defaultMessage:"Reset"});const PICK_INDEX_PATTERNS=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.indexPatterns.pickIndexPatternsCombo",{defaultMessage:"Pick index patterns"})},322:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return debounceAsync}));__webpack_require__.d(__webpack_exports__,"b",(function(){return eqlValidator}));__webpack_require__.d(__webpack_exports__,"c",(function(){return getValidationResults}));var external_kbnSharedDeps_Lodash_=__webpack_require__(19);var utils=__webpack_require__(162);var kibana=__webpack_require__(104);var public_=__webpack_require__(91);const PARSING_ERROR_TYPE="parsing_exception";const VERIFICATION_ERROR_TYPE="verification_exception";const MAPPING_ERROR_TYPE="mapping_exception";const isValidationErrorType=type=>type===PARSING_ERROR_TYPE||type===VERIFICATION_ERROR_TYPE||type===MAPPING_ERROR_TYPE;const isErrorResponse=response=>Object(external_kbnSharedDeps_Lodash_["has"])(response,"error.type");const isValidationErrorResponse=response=>isErrorResponse(response)&&isValidationErrorType(Object(external_kbnSharedDeps_Lodash_["get"])(response,"error.type"));const getValidationErrors=response=>response.error.root_cause.filter(cause=>isValidationErrorType(cause.type)).map(cause=>cause.reason);const validateEql=async({data:data,index:index,query:query,signal:signal})=>{const{rawResponse:response}=await data.search.search({params:{index:index.join(),body:{query:query,size:0}},options:{ignore:[400]}},{strategy:public_["EQL_SEARCH_STRATEGY"],abortSignal:signal}).toPromise();if(isValidationErrorResponse(response.body)){return{valid:false,errors:getValidationErrors(response.body)}}else if(isErrorResponse(response.body)){throw new Error(JSON.stringify(response.body))}else{return{valid:true,errors:[]}}};var translations=__webpack_require__(186);let ERROR_CODES;(function(ERROR_CODES){ERROR_CODES["FAILED_REQUEST"]="ERR_FAILED_REQUEST";ERROR_CODES["INVALID_EQL"]="ERR_INVALID_EQL"})(ERROR_CODES||(ERROR_CODES={}));const debounceAsync=(fn,interval)=>{let handle;let resolves=[];return(...args)=>{if(handle){clearTimeout(handle)}handle=setTimeout(()=>{const result=fn(...args);resolves.forEach(resolve=>resolve(result));resolves=[]},interval);return new Promise(resolve=>resolves.push(resolve))}};const eqlValidator=async(...args)=>{const[{value:value,formData:formData}]=args;const{query:queryValue}=value;const query=queryValue.query;const{index:index,ruleType:ruleType}=formData;const needsValidation=ruleType===undefined&&!Object(external_kbnSharedDeps_Lodash_["isEmpty"])(query)||Object(utils["d"])(ruleType)&&!Object(external_kbnSharedDeps_Lodash_["isEmpty"])(query);if(!needsValidation){return}try{const{data:data}=kibana["b"].get();const signal=(new AbortController).signal;const response=await validateEql({data:data,query:query,signal:signal,index:index});if((response===null||response===void 0?void 0:response.valid)===false){return{code:ERROR_CODES.INVALID_EQL,message:"",messages:response.errors}}}catch(error){return{code:ERROR_CODES.FAILED_REQUEST,message:translations["m"],error:error}}};const getValidationResults=field=>{const hasErrors=field.errors.length>0;const isValid=!field.isChangingValue&&!hasErrors;if(hasErrors){const[error]=field.errors;const message=error.message;if(error.code===ERROR_CODES.INVALID_EQL){return{isValid:isValid,message:message,messages:error.messages}}else{return{isValid:isValid,message:message,error:error.error}}}else{return{isValid:isValid,message:""}}}},507:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return EqlQueryBar}));var external_kbnSharedDeps_React_=__webpack_require__(6);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_StyledComponents_=__webpack_require__(73);var external_kbnSharedDeps_StyledComponents_default=__webpack_require__.n(external_kbnSharedDeps_StyledComponents_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(72);var use_app_toasts=__webpack_require__(143);var translations=__webpack_require__(186);var external_kbnSharedDeps_Lodash_=__webpack_require__(19);const ErrorsPopover=({ariaLabel:ariaLabel,errors:errors})=>{const[isOpen,setIsOpen]=Object(external_kbnSharedDeps_React_["useState"])(false);const handleToggle=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setIsOpen(!isOpen)},[isOpen]);const handleClose=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setIsOpen(false)},[]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{"data-test-subj":"eql-validation-errors-popover",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"eql-validation-errors-popover-button",iconType:"crossInACircleFilled",size:"s",color:"danger","aria-label":ariaLabel,onClick:handleToggle},errors.length),isOpen:isOpen,closePopover:handleClose,anchorPosition:"downCenter"},external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"eql-validation-errors-popover-content"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverTitle"],null,translations["k"]),errors.map((message,idx)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{key:idx},message))))};var kibana=__webpack_require__(104);const InlineText=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiText"]).withConfig({displayName:"InlineText",componentId:"i91hzt-0"})(["display:inline-block;"]);const EqlOverviewLink=()=>{const overviewUrl=Object(kibana["h"])().services.docLinks.links.query.eql;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{external:true,href:overviewUrl,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(InlineText,{size:"xs"},translations["i"]))};const Container=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiPanel"]).withConfig({displayName:"Container",componentId:"sc-10yczbx-0"})(["border-radius:0;background:",";padding:"," ",";"],({theme:theme})=>theme.eui.euiPageBackgroundColor,({theme:theme})=>theme.eui.euiSizeXS,({theme:theme})=>theme.eui.euiSizeS);const FlexGroup=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"]).withConfig({displayName:"FlexGroup",componentId:"sc-10yczbx-1"})(["min-height:",";"],({theme:theme})=>theme.eui.euiSizeXL);const FlexItemLeftBorder=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"]).withConfig({displayName:"FlexItemLeftBorder",componentId:"sc-10yczbx-2"})(["border-left:1px solid ",";"],({theme:theme})=>theme.eui.euiColorLightShade);const FlexItemWithMarginRight=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"]).withConfig({displayName:"FlexItemWithMarginRight",componentId:"sc-10yczbx-3"})(["margin-right:",";"],({theme:theme})=>theme.eui.euiSizeS);const Spinner=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"]).withConfig({displayName:"Spinner",componentId:"sc-10yczbx-4"})(["margin:0 ",";"],({theme:theme})=>theme.eui.euiSizeS);const singleSelection={asPlainText:true};const EqlQueryBarFooter=({errors:errors,isLoading:isLoading,optionsData:optionsData,optionsSelected:optionsSelected,onOptionsChange:onOptionsChange})=>{var _optionsSelected$size;const[openEqlSettings,setIsOpenEqlSettings]=Object(external_kbnSharedDeps_React_["useState"])(false);const[localSize,setLocalSize]=Object(external_kbnSharedDeps_React_["useState"])((_optionsSelected$size=optionsSelected===null||optionsSelected===void 0?void 0:optionsSelected.size)!==null&&_optionsSelected$size!==void 0?_optionsSelected$size:100);const debounceSize=Object(external_kbnSharedDeps_React_["useRef"])();const openEqlSettingsHandler=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setIsOpenEqlSettings(true)},[]);const closeEqlSettingsHandler=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setIsOpenEqlSettings(false)},[]);const handleEventCategoryField=Object(external_kbnSharedDeps_React_["useCallback"])(opt=>{if(onOptionsChange){if(opt.length>0){onOptionsChange("eventCategoryField",opt[0].label)}else{onOptionsChange("eventCategoryField",null)}}},[onOptionsChange]);const handleTiebreakerField=Object(external_kbnSharedDeps_React_["useCallback"])(opt=>{if(onOptionsChange){if(opt.length>0){onOptionsChange("tiebreakerField",opt[0].label)}else{onOptionsChange("tiebreakerField",null)}}},[onOptionsChange]);const handleTimestampField=Object(external_kbnSharedDeps_React_["useCallback"])(opt=>{if(onOptionsChange){if(opt.length>0){onOptionsChange("timestampField",opt[0].label)}else{onOptionsChange("timestampField",null)}}},[onOptionsChange]);const handleSizeField=Object(external_kbnSharedDeps_React_["useCallback"])(evt=>{if(onOptionsChange){var _evt$target,_debounceSize$current,_evt$target2;setLocalSize(evt===null||evt===void 0?void 0:(_evt$target=evt.target)===null||_evt$target===void 0?void 0:_evt$target.value);if((_debounceSize$current=debounceSize.current)!==null&&_debounceSize$current!==void 0&&_debounceSize$current.cancel){var _debounceSize$current2;(_debounceSize$current2=debounceSize.current)===null||_debounceSize$current2===void 0?void 0:_debounceSize$current2.cancel()}debounceSize.current=Object(external_kbnSharedDeps_Lodash_["debounce"])(newSize=>onOptionsChange("size",newSize),800);debounceSize.current(evt===null||evt===void 0?void 0:(_evt$target2=evt.target)===null||_evt$target2===void 0?void 0:_evt$target2.value)}},[onOptionsChange]);const eventCategoryField=Object(external_kbnSharedDeps_React_["useMemo"])(()=>(optionsSelected===null||optionsSelected===void 0?void 0:optionsSelected.eventCategoryField)!=null?[{label:optionsSelected===null||optionsSelected===void 0?void 0:optionsSelected.eventCategoryField}]:undefined,[optionsSelected===null||optionsSelected===void 0?void 0:optionsSelected.eventCategoryField]);const tiebreakerField=Object(external_kbnSharedDeps_React_["useMemo"])(()=>(optionsSelected===null||optionsSelected===void 0?void 0:optionsSelected.tiebreakerField)!=null?[{label:optionsSelected===null||optionsSelected===void 0?void 0:optionsSelected.tiebreakerField}]:undefined,[optionsSelected===null||optionsSelected===void 0?void 0:optionsSelected.tiebreakerField]);const timestampField=Object(external_kbnSharedDeps_React_["useMemo"])(()=>(optionsSelected===null||optionsSelected===void 0?void 0:optionsSelected.timestampField)!=null?[{label:optionsSelected===null||optionsSelected===void 0?void 0:optionsSelected.timestampField}]:undefined,[optionsSelected===null||optionsSelected===void 0?void 0:optionsSelected.timestampField]);return external_kbnSharedDeps_React_default.a.createElement(Container,null,external_kbnSharedDeps_React_default.a.createElement(FlexGroup,{alignItems:"center",justifyContent:"spaceBetween",gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,errors.length>0&&external_kbnSharedDeps_React_default.a.createElement(ErrorsPopover,{ariaLabel:translations["l"],errors:errors}),isLoading&&external_kbnSharedDeps_React_default.a.createElement(Spinner,{"data-test-subj":"eql-validation-loading",size:"m"})),!onOptionsChange&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(EqlOverviewLink,null)),onOptionsChange&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(FlexItemWithMarginRight,{grow:false},external_kbnSharedDeps_React_default.a.createElement(EqlOverviewLink,null)),external_kbnSharedDeps_React_default.a.createElement(FlexItemLeftBorder,{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{onClick:openEqlSettingsHandler,iconType:"controlsVertical",isDisabled:openEqlSettings,"aria-label":"eql settings","data-test-subj":"eql-settings-trigger"}),isOpen:openEqlSettings,closePopover:closeEqlSettingsHandler,anchorPosition:"downCenter",ownFocus:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverTitle"],null,translations["j"]),external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:"300px"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:translations["h"],helpText:translations["g"]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{value:localSize,onChange:handleSizeField,min:1,max:1e4})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:translations["b"],helpText:translations["a"]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{options:optionsData===null||optionsData===void 0?void 0:optionsData.keywordFields,selectedOptions:eventCategoryField,singleSelection:singleSelection,onChange:handleEventCategoryField})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:translations["d"],helpText:translations["c"]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{options:optionsData===null||optionsData===void 0?void 0:optionsData.nonDateFields,selectedOptions:tiebreakerField,singleSelection:singleSelection,onChange:handleTiebreakerField})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:translations["f"],helpText:translations["e"]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{options:optionsData===null||optionsData===void 0?void 0:optionsData.dateFields,selectedOptions:timestampField,singleSelection:singleSelection,onChange:handleTimestampField}))))))))};var validators=__webpack_require__(322);const TextArea=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiTextArea"]).withConfig({displayName:"TextArea",componentId:"sc-4u43ce-0"})(["display:block;border:",";border-bottom:0;box-shadow:none;min-height:",";"],({theme:theme})=>theme.eui.euiBorderThin,({theme:theme})=>theme.eui.euiFormControlHeight);const EqlQueryBar=({dataTestSubj:dataTestSubj,field:field,idAria:idAria,optionsData:optionsData,optionsSelected:optionsSelected,onOptionsChange:onOptionsChange,onValidityChange:onValidityChange,onValiditingChange:onValiditingChange})=>{const{addError:addError}=Object(use_app_toasts["a"])();const[errorMessages,setErrorMessages]=Object(external_kbnSharedDeps_React_["useState"])([]);const{isValidating:isValidating,setValue:setValue}=field;const{isValid:isValid,message:message,messages:messages,error:error}=Object(validators["c"])(field);const fieldValue=field.value.query.query;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(onValidityChange!=null){onValidityChange(isValid)}},[isValid,onValidityChange]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{setErrorMessages(messages!==null&&messages!==void 0?messages:[])},[messages]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(error){addError(error,{title:translations["m"]})}},[error,addError]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(onValiditingChange){onValiditingChange(isValidating)}},[isValidating,onValiditingChange]);const handleChange=Object(external_kbnSharedDeps_React_["useCallback"])(e=>{const newQuery=e.target.value;if(onValiditingChange){onValiditingChange(true)}setErrorMessages([]);setValue({filters:[],query:{query:newQuery,language:"eql"}})},[setValue,onValiditingChange]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:field.label,labelAppend:field.labelAppend,helpText:field.helpText,error:message,isInvalid:!isValid&&!isValidating,fullWidth:true,"data-test-subj":dataTestSubj,describedByIds:idAria?[idAria]:undefined},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(TextArea,{"data-test-subj":"eqlQueryBarTextInput",fullWidth:true,isInvalid:!isValid&&!isValidating,value:fieldValue,onChange:handleChange}),external_kbnSharedDeps_React_default.a.createElement(EqlQueryBarFooter,{errors:errorMessages,isLoading:isValidating,optionsData:optionsData,optionsSelected:optionsSelected,onOptionsChange:onOptionsChange})))}},523:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PickEventType}));var external_kbnSharedDeps_ElasticEui_=__webpack_require__(72);var fast_deep_equal=__webpack_require__(107);var fast_deep_equal_default=__webpack_require__.n(fast_deep_equal);var external_kbnSharedDeps_React_=__webpack_require__(6);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var lib=__webpack_require__(105);var external_kbnSharedDeps_StyledComponents_=__webpack_require__(73);var external_kbnSharedDeps_StyledComponents_default=__webpack_require__.n(external_kbnSharedDeps_StyledComponents_);var model=__webpack_require__(117);var selectors=__webpack_require__(284);const getSourcererScopeSelector=()=>{const getkibanaIndexPatternsSelector=selectors["d"].kibanaIndexPatternsSelector();const getScopeIdSelector=selectors["d"].scopeIdSelector();const getConfigIndexPatternsSelector=selectors["d"].configIndexPatternsSelector();const getSignalIndexNameSelector=selectors["d"].signalIndexNameSelector();const mapStateToProps=(state,scopeId)=>{const kibanaIndexPatterns=getkibanaIndexPatternsSelector(state);const scope=getScopeIdSelector(state,scopeId);const configIndexPatterns=getConfigIndexPatternsSelector(state);const signalIndexName=getSignalIndexNameSelector(state);return{kibanaIndexPatterns:kibanaIndexPatterns,configIndexPatterns:configIndexPatterns,signalIndexName:signalIndexName,sourcererScope:scope}};return mapStateToProps};var translations=__webpack_require__(320);const PopoverContent=external_kbnSharedDeps_StyledComponents_default.a.div.withConfig({displayName:"PopoverContent",componentId:"sc-13xuah3-0"})(["width:600px;"]);const ResetButton=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"]).withConfig({displayName:"ResetButton",componentId:"sc-13xuah3-1"})(["width:fit-content;"]);const MyEuiButton=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiButton"]).withConfig({displayName:"MyEuiButton",componentId:"sc-13xuah3-2"})([".euiHealth{vertical-align:middle;}"]);const AllEuiHealth=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiHealth"]).withConfig({displayName:"AllEuiHealth",componentId:"sc-13xuah3-3"})(["margin-left:-2px;svg{stroke:#fff;stroke-width:1px;stroke-linejoin:round;width:19px;height:19px;margin-top:1px;z-index:1;}"]);const WarningEuiHealth=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiHealth"]).withConfig({displayName:"WarningEuiHealth",componentId:"sc-13xuah3-4"})(["margin-left:-17px;svg{z-index:0;}"]);const AdvancedSettings=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiText"]).withConfig({displayName:"AdvancedSettings",componentId:"sc-13xuah3-5"})(["color:",";"],({theme:theme})=>theme.eui.euiColorPrimary);const ConfigHelper=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiText"]).withConfig({displayName:"ConfigHelper",componentId:"sc-13xuah3-6"})(["margin-left:4px;"]);const Filter=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiRadioGroup"]).withConfig({displayName:"Filter",componentId:"sc-13xuah3-7"})(["margin-left:4px;"]);const PickEventContainer=external_kbnSharedDeps_StyledComponents_default.a.div.withConfig({displayName:"PickEventContainer",componentId:"sc-13xuah3-8"})([".euiSuperSelect{width:170px;max-width:170px;button.euiSuperSelectControl{padding-top:3px;}}"]);const getEventTypeOptions=(isCustomDisabled=true)=>[{id:"all",label:external_kbnSharedDeps_React_default.a.createElement(AllEuiHealth,{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(WarningEuiHealth,{color:"warning"},translations["a"]))},{id:"raw",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHealth"],{color:"subdued"}," ",translations["m"])},{id:"alert",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHealth"],{color:"warning"}," ",translations["e"])},{id:"custom",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,translations["c"]),disabled:isCustomDisabled}];const PickEventTypeComponents=({eventType:eventType="all",onChangeEventTypeAndIndexesName:onChangeEventTypeAndIndexesName})=>{const[isPopoverOpen,setPopover]=Object(external_kbnSharedDeps_React_["useState"])(false);const[showAdvanceSettings,setAdvanceSettings]=Object(external_kbnSharedDeps_React_["useState"])(eventType==="custom");const[filterEventType,setFilterEventType]=Object(external_kbnSharedDeps_React_["useState"])(eventType);const sourcererScopeSelector=Object(external_kbnSharedDeps_React_["useMemo"])(getSourcererScopeSelector,[]);const{configIndexPatterns:configIndexPatterns,kibanaIndexPatterns:kibanaIndexPatterns,signalIndexName:signalIndexName,sourcererScope:sourcererScope}=Object(lib["useSelector"])(state=>sourcererScopeSelector(state,model["SourcererScopeName"].timeline),fast_deep_equal_default.a);const[selectedOptions,setSelectedOptions]=Object(external_kbnSharedDeps_React_["useState"])(sourcererScope.selectedPatterns.map(indexSelected=>({label:indexSelected,value:indexSelected})));const indexesPatternOptions=Object(external_kbnSharedDeps_React_["useMemo"])(()=>[...configIndexPatterns,...kibanaIndexPatterns.map(kip=>kip.title),signalIndexName].reduce((acc,index)=>{if(index!=null&&!acc.some(o=>o.label.includes(index))){return[...acc,{label:index,value:index}]}return acc},[]),[configIndexPatterns,kibanaIndexPatterns,signalIndexName]);const renderOption=Object(external_kbnSharedDeps_React_["useCallback"])(option=>{const{value:value}=option;if(kibanaIndexPatterns.some(kip=>kip.title===value)){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"logoKibana",size:"s"})," ",value)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,value)},[kibanaIndexPatterns]);const onChangeCombo=Object(external_kbnSharedDeps_React_["useCallback"])(newSelectedOptions=>{const localSelectedPatterns=newSelectedOptions.map(nso=>nso.label);if(localSelectedPatterns.sort().join()===[...configIndexPatterns,signalIndexName].sort().join()){setFilterEventType("all")}else if(localSelectedPatterns.sort().join()===configIndexPatterns.sort().join()){setFilterEventType("raw")}else if(localSelectedPatterns.sort().join()===signalIndexName){setFilterEventType("alert")}else{setFilterEventType("custom")}setSelectedOptions(newSelectedOptions)},[configIndexPatterns,signalIndexName]);const onChangeFilter=Object(external_kbnSharedDeps_React_["useCallback"])(filter=>{setFilterEventType(filter);if(filter==="all"){setSelectedOptions([...configIndexPatterns,signalIndexName!==null&&signalIndexName!==void 0?signalIndexName:""].map(indexSelected=>({label:indexSelected,value:indexSelected})))}else if(filter==="raw"){setSelectedOptions(configIndexPatterns.map(indexSelected=>({label:indexSelected,value:indexSelected})))}else if(filter==="alert"){setSelectedOptions([{label:signalIndexName!==null&&signalIndexName!==void 0?signalIndexName:"",value:signalIndexName!==null&&signalIndexName!==void 0?signalIndexName:""}])}else if(filter==="kibana"){setSelectedOptions(kibanaIndexPatterns.map(kip=>({label:kip.title,value:kip.title})))}},[configIndexPatterns,kibanaIndexPatterns,signalIndexName]);const togglePopover=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setPopover(prevIsPopoverOpen=>!prevIsPopoverOpen),[]);const closePopover=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setPopover(false),[]);const handleSaveIndices=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{onChangeEventTypeAndIndexesName(filterEventType,selectedOptions.map(so=>so.label));setPopover(false)},[filterEventType,onChangeEventTypeAndIndexesName,selectedOptions]);const resetDataSources=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setSelectedOptions(sourcererScope.selectedPatterns.map(indexSelected=>({label:indexSelected,value:indexSelected})));setFilterEventType(eventType)},[eventType,sourcererScope.selectedPatterns]);const comboBox=Object(external_kbnSharedDeps_React_["useMemo"])(()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{"data-test-subj":"timeline-sourcerer",fullWidth:true,onChange:onChangeCombo,options:indexesPatternOptions,placeholder:translations["l"],renderOption:renderOption,selectedOptions:selectedOptions}),[onChangeCombo,indexesPatternOptions,renderOption,selectedOptions]);const filterOptions=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getEventTypeOptions(filterEventType!=="custom"),[filterEventType]);const filter=Object(external_kbnSharedDeps_React_["useMemo"])(()=>external_kbnSharedDeps_React_default.a.createElement(Filter,{"data-test-subj":"timeline-sourcerer-radio",options:filterOptions,idSelected:filterEventType,onChange:onChangeFilter,name:translations["s"]}),[filterEventType,filterOptions,onChangeFilter]);const button=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{var _options$find;const options=getEventTypeOptions();return external_kbnSharedDeps_React_default.a.createElement(MyEuiButton,{"data-test-subj":"sourcerer-timeline-trigger",iconType:"arrowDown",iconSide:"right",isLoading:sourcererScope.loading,onClick:togglePopover},(_options$find=options.find(opt=>opt.id===eventType))===null||_options$find===void 0?void 0:_options$find.label)},[eventType,sourcererScope.loading,togglePopover]);const tooltipContent=Object(external_kbnSharedDeps_React_["useMemo"])(()=>isPopoverOpen?null:sourcererScope.selectedPatterns.sort().join(", "),[isPopoverOpen,sourcererScope.selectedPatterns]);const ButtonContent=Object(external_kbnSharedDeps_React_["useMemo"])(()=>external_kbnSharedDeps_React_default.a.createElement(AdvancedSettings,{"data-test-subj":"advanced-settings"},showAdvanceSettings?translations["k"]:translations["t"]),[showAdvanceSettings]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const newSelectedOptions=sourcererScope.selectedPatterns.map(indexSelected=>({label:indexSelected,value:indexSelected}));setSelectedOptions(prevSelectedOptions=>{if(!fast_deep_equal_default()(newSelectedOptions,prevSelectedOptions)){return newSelectedOptions}return prevSelectedOptions})},[sourcererScope.selectedPatterns]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{setFilterEventType(prevFilter=>prevFilter!==eventType?eventType:prevFilter);setAdvanceSettings(eventType==="custom")},[eventType]);return external_kbnSharedDeps_React_default.a.createElement(PickEventContainer,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:tooltipContent},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{button:button,closePopover:closePopover,id:"popover",isOpen:isPopoverOpen,ownFocus:true,repositionOnScroll:true},external_kbnSharedDeps_React_default.a.createElement(PopoverContent,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,translations["s"])),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),filter,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:"accordion1",forceState:showAdvanceSettings?"open":"closed",buttonContent:ButtonContent,onToggle:setAdvanceSettings},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),comboBox)),!showAdvanceSettings&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(ConfigHelper,{size:"s",color:"subdued"},translations["b"])),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(ResetButton,{"aria-label":translations["d"],"data-test-subj":"sourcerer-reset",flush:"left",onClick:resetDataSources,size:"l",title:translations["d"]},translations["d"])),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:handleSaveIndices,"data-test-subj":"add-index",fill:true,fullWidth:true,size:"s"},translations["n"])))))))};const PickEventType=Object(external_kbnSharedDeps_React_["memo"])(PickEventTypeComponents)},524:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TimelineDatePickerLock}));var external_kbnSharedDeps_ElasticEui_=__webpack_require__(72);var external_kbnSharedDeps_React_=__webpack_require__(6);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var lib=__webpack_require__(105);var inputs=__webpack_require__(149);var use_selector=__webpack_require__(109);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);const LOCK_SYNC_MAIN_DATE_PICKER_TOOL_TIP=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.securitySolution.timeline.properties.lockDatePickerTooltip",{defaultMessage:"Disable syncing of date/time range bteween the currently viewed page and your timeline"});const UNLOCK_SYNC_MAIN_DATE_PICKER_TOOL_TIP=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.securitySolution.timeline.properties.unlockDatePickerTooltip",{defaultMessage:"Enable syncing of date/time range between the currently viewed page and your timeline"});const LOCK_SYNC_MAIN_DATE_PICKER_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.securitySolution.timeline.properties.lockedDatePickerLabel",{defaultMessage:"Global date picker is locked to timeline date picker"});const UNLOCK_SYNC_MAIN_DATE_PICKER_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.securitySolution.timeline.properties.unlockedDatePickerLabel",{defaultMessage:"Global date picker NOT locked to timeline date picker"});const LOCK_SYNC_MAIN_DATE_PICKER_ARIA=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.securitySolution.timeline.properties.lockDatePickerDescription",{defaultMessage:"Lock global date picker to timeline date picker"});const UNLOCK_SYNC_MAIN_DATE_PICKER_ARIA=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.securitySolution.timeline.properties.unlockDatePickerDescription",{defaultMessage:"Unlock global date picker from timeline date picker"});const TimelineDatePickerLockComponent=()=>{const dispatch=Object(lib["useDispatch"])();const getGlobalInput=Object(external_kbnSharedDeps_React_["useMemo"])(()=>inputs["d"].globalSelector(),[]);const isDatePickerLocked=Object(use_selector["b"])(state=>getGlobalInput(state).linkTo.includes("timeline"));const onToggleLock=Object(external_kbnSharedDeps_React_["useCallback"])(()=>dispatch(inputs["b"].toggleTimelineLinkTo({linkToId:"timeline"})),[dispatch]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{"data-test-subj":"timeline-date-picker-lock-tooltip",position:"top",content:isDatePickerLocked?LOCK_SYNC_MAIN_DATE_PICKER_TOOL_TIP:UNLOCK_SYNC_MAIN_DATE_PICKER_TOOL_TIP},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"data-test-subj":`timeline-date-picker-${isDatePickerLocked?"lock":"unlock"}-button`,color:"primary",onClick:onToggleLock,iconType:isDatePickerLocked?"lock":"lockOpen","aria-label":isDatePickerLocked?UNLOCK_SYNC_MAIN_DATE_PICKER_ARIA:LOCK_SYNC_MAIN_DATE_PICKER_ARIA}))};TimelineDatePickerLockComponent.displayName="TimelineDatePickerLockComponent";const TimelineDatePickerLock=external_kbnSharedDeps_React_default.a.memo(TimelineDatePickerLockComponent)}}]);