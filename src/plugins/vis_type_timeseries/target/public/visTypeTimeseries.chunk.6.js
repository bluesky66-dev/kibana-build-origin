(window["visTypeTimeseries_bundle_jsonpfunction"]=window["visTypeTimeseries_bundle_jsonpfunction"]||[]).push([[6],{104:function(module,exports,__webpack_require__){var baseSet=__webpack_require__(66);function setWith(object,path,value,customizer){customizer=typeof customizer=="function"?customizer:undefined;return object==null?object:baseSet(object,path,value,customizer)}module.exports=setWith},346:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",(function(){return MarkdownVisualization}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(73);var classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__);var uuid__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(38);var uuid__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_2__);var lodash__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(31);var lodash__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);var _plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(33);var _plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_4__);var _error__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(154);var _lib_replace_vars__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(57);var _lib_convert_series_to_vars__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(96);var _lib_set_is_reversed__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(75);const getMarkdownId=id=>`markdown-${id}`;function MarkdownVisualization(props){const{backgroundColor:backgroundColor,model:model,visData:visData,getConfig:getConfig}=props;const series=Object(lodash__WEBPACK_IMPORTED_MODULE_3__["get"])(visData,`${model.id}.series`,[]);const variables=Object(_lib_convert_series_to_vars__WEBPACK_IMPORTED_MODULE_7__["a"])(series,model,getConfig("dateFormat"),props.getConfig);const markdownElementId=getMarkdownId(uuid__WEBPACK_IMPORTED_MODULE_2___default.a.v1());const panelBackgroundColor=model.background_color||backgroundColor;const style={backgroundColor:panelBackgroundColor};let markdown;let markdownCss="";if(model.markdown){const markdownSource=Object(_lib_replace_vars__WEBPACK_IMPORTED_MODULE_6__["a"])(model.markdown,{},{_all:variables,...variables});if(model.markdown_css){markdownCss=model.markdown_css.replace(new RegExp(getMarkdownId(model.id),"g"),markdownElementId)}const markdownClasses=classnames__WEBPACK_IMPORTED_MODULE_1___default()("kbnMarkdown__body",{"kbnMarkdown__body--reversed":Object(_lib_set_is_reversed__WEBPACK_IMPORTED_MODULE_8__["b"])(panelBackgroundColor)});const contentClasses=classnames__WEBPACK_IMPORTED_MODULE_1___default()("tvbMarkdown__content",`tvbMarkdown__content--${model.markdown_vertical_align}`,{"tvbMarkdown__content-isScrolling":model.markdown_scrollbars},markdownClasses);const markdownError=markdownSource instanceof Error?markdownSource:null;markdown=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"tvbMarkdown","data-test-subj":"tsvbMarkdown"},markdownError&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_error__WEBPACK_IMPORTED_MODULE_5__["a"],{error:markdownError}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("style",{type:"text/css"},markdownCss),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:contentClasses},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{id:markdownElementId},!markdownError&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_4__["Markdown"],{markdown:markdownSource,openLinksInNewTab:model.markdown_openLinksInNewTab}))))}return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"tvbVis",style:style},markdown)}},38:function(module,exports,__webpack_require__){var v1=__webpack_require__(93);var v4=__webpack_require__(94);var uuid=v4;uuid.v1=v1;uuid.v4=v4;module.exports=uuid},57:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return replaceVars}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(31);var lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);var handlebars_dist_handlebars__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(65);var handlebars_dist_handlebars__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(handlebars_dist_handlebars__WEBPACK_IMPORTED_MODULE_1__);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__);function replaceVars(str,args={},vars={}){try{const template=handlebars_dist_handlebars__WEBPACK_IMPORTED_MODULE_1___default.a.compile(str,{strict:true,knownHelpersOnly:true});const string=template(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.assign({},vars,{args:args}));return string}catch(e){if(e.toString().indexOf("Parse error")!==-1){return str}else if(e.message.indexOf("not defined in")!==-1){const badVar=e.message.split(/"/)[1];e.error={caused_by:{reason:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("visTypeTimeseries.replaceVars.errors.unknownVarDescription",{defaultMessage:"{badVar} is an unknown variable",values:{badVar:"{{"+badVar+"}}"}}),title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("visTypeTimeseries.replaceVars.errors.unknownVarTitle",{defaultMessage:"Error processing your markdown"})}}}else{e.error={caused_by:{reason:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("visTypeTimeseries.replaceVars.errors.markdownErrorDescription",{defaultMessage:"Please verify you are only using markdown, known variables, and built-in Handlebars expressions"}),title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("visTypeTimeseries.replaceVars.errors.markdownErrorTitle",{defaultMessage:"Error processing your markdown"})}}}return e}}},63:function(module,exports){var getRandomValues=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function whatwgRNG(){getRandomValues(rnds8);return rnds8}}else{var rnds=new Array(16);module.exports=function mathRNG(){for(var i=0,r;i<16;i++){if((i&3)===0)r=Math.random()*4294967296;rnds[i]=r>>>((i&3)<<3)&255}return rnds}}},64:function(module,exports){var byteToHex=[];for(var i=0;i<256;++i){byteToHex[i]=(i+256).toString(16).substr(1)}function bytesToUuid(buf,offset){var i=offset||0;var bth=byteToHex;return[bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]].join("")}module.exports=bytesToUuid},66:function(module,exports,__webpack_require__){var assignValue=__webpack_require__(76),castPath=__webpack_require__(78),isFunction=__webpack_require__(77),isIndex=__webpack_require__(83),isObject=__webpack_require__(47),toKey=__webpack_require__(58);function baseSet(object,path,value,customizer){if(!isObject(object)){return object}path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(key=="prototype"&&isFunction(nested)){throw new Error("Illegal access of function prototype")}if(index!=lastIndex){var objValue=hasOwnProperty.call(nested,key)?nested[key]:undefined;newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{}}}assignValue(nested,key,newValue);nested=nested[key]}return object}module.exports=baseSet},73:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){var classes=[];for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(!arg)continue;var argType=typeof arg;if(argType==="string"||argType==="number"){classes.push(arg)}else if(Array.isArray(arg)&&arg.length){var inner=classNames.apply(null,arg);if(inner){classes.push(inner)}}else if(argType==="object"){for(var key in arg){if(hasOwn.call(arg,key)&&arg[key]){classes.push(key)}}}}return classes.join(" ")}if(true&&module.exports){classNames.default=classNames;module.exports=classNames}else if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})()},75:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isBackgroundDark}));__webpack_require__.d(__webpack_exports__,"b",(function(){return isBackgroundInverted}));var color__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(115);var color__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(color__WEBPACK_IMPORTED_MODULE_0__);var _services__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0);const isDarkTheme=()=>Object(_services__WEBPACK_IMPORTED_MODULE_1__["g"])().get("theme:darkMode");const isColorDark=c=>color__WEBPACK_IMPORTED_MODULE_0___default()(c).luminosity()<.45;const isThemeDark=currentTheme=>{let themeIsDark=currentTheme||isDarkTheme();if(typeof currentTheme==="string"){themeIsDark=isColorDark(currentTheme)}return themeIsDark};const isBackgroundDark=(backgroundColor,currentTheme)=>{const themeIsDark=isThemeDark(currentTheme);if(!backgroundColor||backgroundColor==="inherit"){return themeIsDark}return isColorDark(backgroundColor)};const isBackgroundInverted=(backgroundColor,currentTheme)=>{const backgroundIsDark=isBackgroundDark(backgroundColor,currentTheme);const themeIsDark=isThemeDark(currentTheme);return backgroundIsDark!==themeIsDark}},93:function(module,exports,__webpack_require__){var rng=__webpack_require__(63);var bytesToUuid=__webpack_require__(64);var _nodeId;var _clockseq;var _lastMSecs=0;var _lastNSecs=0;function v1(options,buf,offset){var i=buf&&offset||0;var b=buf||[];options=options||{};var node=options.node||_nodeId;var clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;if(node==null||clockseq==null){var seedBytes=rng();if(node==null){node=_nodeId=[seedBytes[0]|1,seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]}if(clockseq==null){clockseq=_clockseq=(seedBytes[6]<<8|seedBytes[7])&16383}}var msecs=options.msecs!==undefined?options.msecs:(new Date).getTime();var nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1;var dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&options.clockseq===undefined){clockseq=clockseq+1&16383}if((dt<0||msecs>_lastMSecs)&&options.nsecs===undefined){nsecs=0}if(nsecs>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}_lastMSecs=msecs;_lastNSecs=nsecs;_clockseq=clockseq;msecs+=122192928e5;var tl=((msecs&268435455)*1e4+nsecs)%4294967296;b[i++]=tl>>>24&255;b[i++]=tl>>>16&255;b[i++]=tl>>>8&255;b[i++]=tl&255;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255;b[i++]=tmh&255;b[i++]=tmh>>>24&15|16;b[i++]=tmh>>>16&255;b[i++]=clockseq>>>8|128;b[i++]=clockseq&255;for(var n=0;n<6;++n){b[i+n]=node[n]}return buf?buf:bytesToUuid(b)}module.exports=v1},94:function(module,exports,__webpack_require__){var rng=__webpack_require__(63);var bytesToUuid=__webpack_require__(64);function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=="string"){buf=options==="binary"?new Array(16):null;options=null}options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){for(var ii=0;ii<16;++ii){buf[i+ii]=rnds[ii]}}return buf||bytesToUuid(rnds)}module.exports=v4},96:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return convertSeriesToVars}));var _elastic_safer_lodash_set__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(97);var _elastic_safer_lodash_set__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_elastic_safer_lodash_set__WEBPACK_IMPORTED_MODULE_0__);var lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(31);var lodash__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);var _common_get_last_value__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(48);var _tick_formatter__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(46);var _label_date_formatter__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(54);var moment__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(17);var moment__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_5__);const convertSeriesToVars=(series,model,dateFormat="lll",getConfig=null)=>{const variables={};model.series.forEach(seriesModel=>{series.filter(row=>lodash__WEBPACK_IMPORTED_MODULE_1___default.a.startsWith(row.id,seriesModel.id)).forEach(row=>{const varName=[lodash__WEBPACK_IMPORTED_MODULE_1___default.a.snakeCase(row.label),lodash__WEBPACK_IMPORTED_MODULE_1___default.a.snakeCase(seriesModel.var_name)].filter(v=>v).join(".");const formatter=Object(_tick_formatter__WEBPACK_IMPORTED_MODULE_3__["a"])(seriesModel.formatter,seriesModel.value_template,getConfig);const lastValue=Object(_common_get_last_value__WEBPACK_IMPORTED_MODULE_2__["a"])(row.data);const data={last:{raw:lastValue,formatted:formatter(lastValue)},data:{raw:row.data,formatted:row.data.map(point=>[moment__WEBPACK_IMPORTED_MODULE_5___default()(point[0]).format(dateFormat),formatter(point[1])])}};Object(_elastic_safer_lodash_set__WEBPACK_IMPORTED_MODULE_0__["set"])(variables,varName,data);Object(_elastic_safer_lodash_set__WEBPACK_IMPORTED_MODULE_0__["set"])(variables,`${lodash__WEBPACK_IMPORTED_MODULE_1___default.a.snakeCase(row.label)}.label`,row.label);if(row.labelFormatted){const val=Object(_label_date_formatter__WEBPACK_IMPORTED_MODULE_4__["a"])(row.labelFormatted,dateFormat);Object(_elastic_safer_lodash_set__WEBPACK_IMPORTED_MODULE_0__["set"])(variables,`${lodash__WEBPACK_IMPORTED_MODULE_1___default.a.snakeCase(row.label)}.formatted`,val)}})});return variables}},97:function(module,exports,__webpack_require__){exports.set=__webpack_require__(98);exports.setWith=__webpack_require__(104)},98:function(module,exports,__webpack_require__){var baseSet=__webpack_require__(66);function set(object,path,value){return object==null?object:baseSet(object,path,value)}module.exports=set}}]);