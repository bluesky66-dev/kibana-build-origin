(window["data_bundle_jsonpfunction"]=window["data_bundle_jsonpfunction"]||[]).push([[3],{240:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */var saveAs=saveAs||function(view){"use strict";if(typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var doc=view.document,get_URL=function(){return view.URL||view.webkitURL||view},save_link=doc.createElementNS("http://www.w3.org/1999/xhtml","a"),can_use_save_link="download"in save_link,click=function(node){var event=new MouseEvent("click");node.dispatchEvent(event)},webkit_req_fs=view.webkitRequestFileSystem,req_fs=view.requestFileSystem||webkit_req_fs||view.mozRequestFileSystem,throw_outside=function(ex){(view.setImmediate||view.setTimeout)((function(){throw ex}),0)},force_saveable_type="application/octet-stream",fs_min_size=0,arbitrary_revoke_timeout=500,revoke=function(file){var revoker=function(){if(typeof file==="string"){get_URL().revokeObjectURL(file)}else{file.remove()}};if(view.chrome){revoker()}else{setTimeout(revoker,arbitrary_revoke_timeout)}},dispatch=function(filesaver,event_types,event){event_types=[].concat(event_types);var i=event_types.length;while(i--){var listener=filesaver["on"+event_types[i]];if(typeof listener==="function"){try{listener.call(filesaver,event||filesaver)}catch(ex){throw_outside(ex)}}}},auto_bom=function(blob){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)){return new Blob(["\ufeff",blob],{type:blob.type})}return blob},FileSaver=function(blob,name,no_auto_bom){if(!no_auto_bom){blob=auto_bom(blob)}var filesaver=this,type=blob.type,blob_changed=false,object_url,target_view,dispatch_all=function(){dispatch(filesaver,"writestart progress write writeend".split(" "))},fs_error=function(){if(blob_changed||!object_url){object_url=get_URL().createObjectURL(blob)}if(target_view){target_view.location.href=object_url}else{var new_tab=view.open(object_url,"_blank");if(new_tab==undefined&&typeof safari!=="undefined"){view.location.href=object_url}}filesaver.readyState=filesaver.DONE;dispatch_all();revoke(object_url)},abortable=function(func){return function(){if(filesaver.readyState!==filesaver.DONE){return func.apply(this,arguments)}}},create_if_not_found={create:true,exclusive:false},slice;filesaver.readyState=filesaver.INIT;if(!name){name="download"}if(can_use_save_link){object_url=get_URL().createObjectURL(blob);save_link.href=object_url;save_link.download=name;setTimeout((function(){click(save_link);dispatch_all();revoke(object_url);filesaver.readyState=filesaver.DONE}));return}if(view.chrome&&type&&type!==force_saveable_type){slice=blob.slice||blob.webkitSlice;blob=slice.call(blob,0,blob.size,force_saveable_type);blob_changed=true}if(webkit_req_fs&&name!=="download"){name+=".download"}if(type===force_saveable_type||webkit_req_fs){target_view=view}if(!req_fs){fs_error();return}fs_min_size+=blob.size;req_fs(view.TEMPORARY,fs_min_size,abortable((function(fs){fs.root.getDirectory("saved",create_if_not_found,abortable((function(dir){var save=function(){dir.getFile(name,create_if_not_found,abortable((function(file){file.createWriter(abortable((function(writer){writer.onwriteend=function(event){target_view.location.href=file.toURL();filesaver.readyState=filesaver.DONE;dispatch(filesaver,"writeend",event);revoke(file)};writer.onerror=function(){var error=writer.error;if(error.code!==error.ABORT_ERR){fs_error()}};"writestart progress write abort".split(" ").forEach((function(event){writer["on"+event]=filesaver["on"+event]}));writer.write(blob);filesaver.abort=function(){writer.abort();filesaver.readyState=filesaver.DONE};filesaver.readyState=filesaver.WRITING})),fs_error)})),fs_error)};dir.getFile(name,{create:false},abortable((function(file){file.remove();save()})),abortable((function(ex){if(ex.code===ex.NOT_FOUND_ERR){save()}else{fs_error()}})))})),fs_error)})),fs_error)},FS_proto=FileSaver.prototype,saveAs=function(blob,name,no_auto_bom){return new FileSaver(blob,name,no_auto_bom)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(blob,name,no_auto_bom){if(!no_auto_bom){blob=auto_bom(blob)}return navigator.msSaveOrOpenBlob(blob,name||"download")}}FS_proto.abort=function(){var filesaver=this;filesaver.readyState=filesaver.DONE;dispatch(filesaver,"abort")};FS_proto.readyState=FS_proto.INIT=0;FS_proto.WRITING=1;FS_proto.DONE=2;FS_proto.error=FS_proto.onwritestart=FS_proto.onprogress=FS_proto.onwrite=FS_proto.onabort=FS_proto.onerror=FS_proto.onwriteend=null;return saveAs}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(true&&module.exports){module.exports.saveAs=saveAs}else if(true&&__webpack_require__(241)!==null&&__webpack_require__(242)!=null){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return saveAs}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}},241:function(module,exports){module.exports=function(){throw new Error("define cannot be used indirect")}},242:function(module,exports){(function(__webpack_amd_options__){module.exports=__webpack_amd_options__}).call(this,{})},246:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var external_kbnSharedDeps_React_=__webpack_require__(3);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(44);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(13);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);var external_kbnSharedDeps_Lodash_=__webpack_require__(2);var file_saver=__webpack_require__(240);const LINE_FEED_CHARACTER="\r\n";const nonAlphaNumRE=/[^a-zA-Z0-9]/;const allDoubleQuoteRE=/"/g;function export_csv_escape(val,quoteValues){if(Object(external_kbnSharedDeps_Lodash_["isObject"])(val)){val=val.valueOf()}val=String(val);if(quoteValues&&nonAlphaNumRE.test(val)){val=`"${val.replace(allDoubleQuoteRE,'""')}"`}return val}function buildCsv(columns,rows,csvSeparator,quoteValues,isFormatted,fieldFormats){const header=columns.map(col=>export_csv_escape(col.name,quoteValues));const formatters=columns.map(column=>fieldFormats.deserialize(column.originalColumn().meta.params));const csvRows=rows.map(row=>columns.map((column,i)=>export_csv_escape(isFormatted?formatters[i].convert(row[column.field]):row[column.field],quoteValues)));return[header,...csvRows].map(row=>row.join(csvSeparator)).join(LINE_FEED_CHARACTER)+LINE_FEED_CHARACTER}function exportAsCsv({filename:filename,columns:columns,rows:rows,isFormatted:isFormatted,csvSeparator:csvSeparator,quoteValues:quoteValues,fieldFormats:fieldFormats}){const type="text/plain;charset=utf-8";const csv=new Blob([buildCsv(columns,rows,csvSeparator,quoteValues,isFormatted,fieldFormats)],{type:type});Object(file_saver["saveAs"])(csv,filename)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class download_options_DataDownloadOptions extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);_defineProperty(this,"state",{isPopoverOpen:false});_defineProperty(this,"onTogglePopover",()=>{this.setState(state=>({isPopoverOpen:!state.isPopoverOpen}))});_defineProperty(this,"closePopover",()=>{this.setState({isPopoverOpen:false})});_defineProperty(this,"exportCsv",(isFormatted=true)=>{let filename=this.props.title;if(!filename||filename.length===0){filename=external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.inspector.table.downloadOptionsUnsavedFilename",{defaultMessage:"unsaved"})}exportAsCsv({filename:`${filename}.csv`,columns:this.props.columns,rows:this.props.rows,csvSeparator:this.props.csvSeparator,quoteValues:this.props.quoteValues,isFormatted:isFormatted,fieldFormats:this.props.fieldFormats})});_defineProperty(this,"exportFormattedCsv",()=>{this.exportCsv(true)});_defineProperty(this,"exportFormattedAsRawCsv",()=>{this.exportCsv(false)})}renderFormattedDownloads(){const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{iconType:"arrowDown",iconSide:"right",size:"s",onClick:this.onTogglePopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"data.inspector.table.downloadCSVToggleButtonLabel",defaultMessage:"Download CSV"}));const items=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"csv",onClick:this.exportFormattedCsv,toolTipContent:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"data.inspector.table.formattedCSVButtonTooltip",defaultMessage:"Download the data in table format"}),toolTipPosition:"left"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"data.inspector.table.formattedCSVButtonLabel",defaultMessage:"Formatted CSV"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"rawCsv",onClick:this.exportFormattedAsRawCsv,toolTipContent:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"data.inspector.table.rawCSVButtonTooltip",defaultMessage:"Download the data as provided, for example, dates as timestamps"}),toolTipPosition:"left"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"data.inspector.table.rawCSVButtonLabel",defaultMessage:"Raw CSV"}))];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"inspectorDownloadData",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",repositionOnScroll:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],{className:"eui-textNoWrap",items:items}))}render(){return this.renderFormattedDownloads()}}function data_table_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class data_table_DataTableFormat extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);data_table_defineProperty(this,"csvSeparator",this.props.uiSettings.get("csv:separator",","));data_table_defineProperty(this,"quoteValues",this.props.uiSettings.get("csv:quoteValues",true));data_table_defineProperty(this,"state",{})}static renderCell({table:table,columnIndex:columnIndex,rowIndex:rowIndex,formattedValue:formattedValue,uiActions:uiActions,isFilterable:isFilterable}){const column=table.columns[columnIndex];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false,gutterSize:"s",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},formattedValue),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false,gutterSize:"none",alignItems:"center"},isFilterable&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"bottom",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"data.inspector.table.filterForValueButtonTooltip",defaultMessage:"Filter for value"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"plusInCircle",color:"text","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.inspector.table.filterForValueButtonAriaLabel",{defaultMessage:"Filter for value"}),"data-test-subj":"filterForInspectorCellValue",className:"insDataTableFormat__filter",onClick:()=>{const value=table.rows[rowIndex][column.id];const eventData={table:table,column:columnIndex,row:rowIndex,value:value};uiActions.executeTriggerActions("VALUE_CLICK_TRIGGER",{data:{data:[eventData]}})}})),isFilterable&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"bottom",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"data.inspector.table.filterOutValueButtonTooltip",defaultMessage:"Filter out value"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"minusInCircle",color:"text","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.inspector.table.filterOutValueButtonAriaLabel",{defaultMessage:"Filter out value"}),"data-test-subj":"filterOutInspectorCellValue",className:"insDataTableFormat__filter",onClick:()=>{const value=table.rows[rowIndex][column.id];const eventData={table:table,column:columnIndex,row:rowIndex,value:value};uiActions.executeTriggerActions("VALUE_CLICK_TRIGGER",{data:{data:[eventData],negate:true}})}}))))))}static getDerivedStateFromProps({data:data,uiActions:uiActions,fieldFormats:fieldFormats,isFilterable:isFilterable}){if(!data){return{columns:null,rows:null}}const columns=data.columns.map((dataColumn,index)=>{const formatParams={id:"string",...dataColumn.meta.params};const fieldFormatter=fieldFormats.deserialize(formatParams);const filterable=isFilterable(dataColumn);return{originalColumn:()=>dataColumn,name:dataColumn.name,field:dataColumn.id,sortable:true,render:value=>{const formattedValue=fieldFormatter.convert(value);const rowIndex=data.rows.findIndex(row=>row[dataColumn.id]===value)||0;return data_table_DataTableFormat.renderCell({table:data,columnIndex:index,rowIndex:rowIndex,formattedValue:formattedValue,uiActions:uiActions,isFilterable:filterable})}}});return{columns:columns,rows:data.rows}}render(){const{columns:columns,rows:rows}=this.state;const pagination={pageSizeOptions:[10,20,50],initialPageSize:20};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(download_options_DataDownloadOptions,{title:this.props.exportTitle,csvSeparator:this.csvSeparator,quoteValues:this.quoteValues,columns:columns,rows:rows,fieldFormats:this.props.fieldFormats}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{className:"insDataTableFormat__table","data-test-subj":"inspectorTable",columns:columns,items:rows,sorting:true,pagination:pagination}))}}function data_view_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class data_view_DataViewComponent extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);data_view_defineProperty(this,"state",{});data_view_defineProperty(this,"onUpdateData",tables=>{const keys=Object.keys(tables);const datatable=keys.length?tables[keys[0]]:undefined;if(datatable){this.setState({datatable:datatable})}})}static getDerivedStateFromProps(nextProps,state){if(state&&nextProps.adapters===state.adapters){return null}const{tables:tables}=nextProps.adapters.tables;const keys=Object.keys(tables);const datatable=keys.length?tables[keys[0]]:undefined;return{adapters:nextProps.adapters,datatable:datatable}}componentDidMount(){this.props.adapters.tables.on("change",this.onUpdateData)}componentWillUnmount(){this.props.adapters.tables.removeListener("change",this.onUpdateData)}static renderNoData(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"data.inspector.table.noDataAvailableTitle",defaultMessage:"No data available"})),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"data.inspector.table.noDataAvailableDescription",defaultMessage:"The element did not provide any data."})))})}render(){var _this$props$options;if(!this.state.datatable){return data_view_DataViewComponent.renderNoData()}return external_kbnSharedDeps_React_default.a.createElement(data_table_DataTableFormat,{data:this.state.datatable,exportTitle:((_this$props$options=this.props.options)===null||_this$props$options===void 0?void 0:_this$props$options.fileName)||this.props.title,uiSettings:this.props.uiSettings,fieldFormats:this.props.fieldFormats,uiActions:this.props.uiActions,isFilterable:this.props.isFilterable})}}var data_view=__webpack_exports__["default"]=data_view_DataViewComponent}}]);