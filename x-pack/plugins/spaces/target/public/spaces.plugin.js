/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */(function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}}var installedModules={};var installedChunks={0:0};function jsonpScriptSrc(chunkId){return __webpack_require__.p+"spaces.chunk."+chunkId+".js"}function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(chunkId){var promises=[];var installedChunkData=installedChunks[chunkId];if(installedChunkData!==0){if(installedChunkData){promises.push(installedChunkData[2])}else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var script=document.createElement("script");var onScriptComplete;script.charset="utf-8";script.timeout=120;if(__webpack_require__.nc){script.setAttribute("nonce",__webpack_require__.nc)}script.src=jsonpScriptSrc(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null;clearTimeout(timeout);var chunk=installedChunks[chunkId];if(chunk!==0){if(chunk){var errorType=event&&(event.type==="load"?"missing":event.type);var realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")";error.name="ChunkLoadError";error.type=errorType;error.request=realSrc;chunk[1](error)}installedChunks[chunkId]=undefined}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete;document.head.appendChild(script)}}return Promise.all(promises)};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";__webpack_require__.oe=function(err){console.error(err);throw err};var jsonpArray=window["spaces_bundle_jsonpfunction"]=window["spaces_bundle_jsonpfunction"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;return __webpack_require__(__webpack_require__.s=23)})([function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&btoa){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item,useSourceMap);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list};function cssWithMappingToString(item,useSourceMap){var content=item[1]||"";var cssMapping=item[3];if(!cssMapping){return content}if(useSourceMap&&typeof btoa==="function"){var sourceMapping=toComment(cssMapping);var sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));var data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return DEFAULT_SPACE_ID}));__webpack_require__.d(__webpack_exports__,"a",(function(){return ALL_SPACES_ID}));__webpack_require__.d(__webpack_exports__,"f",(function(){return UNKNOWN_SPACE}));__webpack_require__.d(__webpack_exports__,"e",(function(){return SPACE_SEARCH_COUNT_THRESHOLD}));__webpack_require__.d(__webpack_exports__,"d",(function(){return MAX_SPACE_INITIALS}));__webpack_require__.d(__webpack_exports__,"c",(function(){return ENTER_SPACE_PATH}));const DEFAULT_SPACE_ID=`default`;const ALL_SPACES_ID="*";const UNKNOWN_SPACE="?";const SPACE_SEARCH_COUNT_THRESHOLD=8;const MAX_SPACE_INITIALS=2;const ENTER_SPACE_PATH="/spaces/enter"},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SpaceAvatar}));__webpack_require__.d(__webpack_exports__,"b",(function(){return getSpaceColor}));__webpack_require__.d(__webpack_exports__,"d",(function(){return getSpaceInitials}));__webpack_require__.d(__webpack_exports__,"c",(function(){return getSpaceImageUrl}));var external_kbnSharedDeps_ElasticEui_=__webpack_require__(1);var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var common=__webpack_require__(8);const FALLBACK_CODE_POINT=97;function getSpaceColor(space={}){const{color:color,name:name=""}=space;if(color){return color}const firstCodePoint=name.codePointAt(0)||FALLBACK_CODE_POINT;return external_kbnSharedDeps_ElasticEui_["VISUALIZATION_COLORS"][firstCodePoint%external_kbnSharedDeps_ElasticEui_["VISUALIZATION_COLORS"].length]}function getSpaceInitials(space={}){const{initials:initials,name:name=""}=space;if(initials){return initials}const words=name.split(" ");const numInitials=Math.min(common["MAX_SPACE_INITIALS"],words.length);words.splice(numInitials,words.length);return words.map(word=>word.substring(0,1)).join("")}function getSpaceImageUrl(space={}){const{imageUrl:imageUrl}=space;if(imageUrl){return imageUrl}return""}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const SpaceAvatar=props=>{const{space:space,size:size,announceSpaceName:announceSpaceName,...rest}=props;const spaceName=space.name?space.name.trim():"";const spaceColor=getSpaceColor(space);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAvatar"],_extends({type:"space","data-test-subj":`space-avatar-${space.id}`,name:spaceName},!announceSpaceName&&{"aria-label":"","aria-hidden":true},{size:size||"m",initialsLength:common["MAX_SPACE_INITIALS"],initials:getSpaceInitials(space),color:Object(external_kbnSharedDeps_ElasticEui_["isValidHex"])(spaceColor)?spaceColor:"",imageUrl:getSpaceImageUrl(space)},rest))};SpaceAvatar.defaultProps={announceSpaceName:true}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"isReservedSpace",(function(){return is_reserved_space["a"]}));__webpack_require__.d(__webpack_exports__,"MAX_SPACE_INITIALS",(function(){return constants["d"]}));__webpack_require__.d(__webpack_exports__,"SPACE_SEARCH_COUNT_THRESHOLD",(function(){return constants["e"]}));__webpack_require__.d(__webpack_exports__,"ENTER_SPACE_PATH",(function(){return constants["c"]}));__webpack_require__.d(__webpack_exports__,"addSpaceIdToPath",(function(){return addSpaceIdToPath}));__webpack_require__.d(__webpack_exports__,"getSpaceIdFromPath",(function(){return getSpaceIdFromPath}));__webpack_require__.d(__webpack_exports__,"GetAllSpacesOptions",(function(){return types["GetAllSpacesOptions"]}));__webpack_require__.d(__webpack_exports__,"GetAllSpacesPurpose",(function(){return types["GetAllSpacesPurpose"]}));__webpack_require__.d(__webpack_exports__,"GetSpaceResult",(function(){return types["GetSpaceResult"]}));var is_reserved_space=__webpack_require__(15);var constants=__webpack_require__(6);const spaceContextRegex=/^\/s\/([a-z0-9_\-]+)/;function getSpaceIdFromPath(requestBasePath,serverBasePath){if(requestBasePath==null)requestBasePath="/";if(serverBasePath==null)serverBasePath="/";const pathToCheck=stripServerBasePath(requestBasePath,serverBasePath);const matchResult=pathToCheck.match(spaceContextRegex);if(!matchResult||matchResult.length===0){return{spaceId:constants["b"],pathHasExplicitSpaceIdentifier:false}}const[,spaceId]=matchResult;if(!spaceId){throw new Error(`Unable to determine Space ID from request path: ${requestBasePath}`)}return{spaceId:spaceId,pathHasExplicitSpaceIdentifier:true}}function addSpaceIdToPath(basePath="/",spaceId="",requestedPath=""){if(requestedPath&&!requestedPath.startsWith("/")){throw new Error(`path must start with a /`)}const normalizedBasePath=basePath.endsWith("/")?basePath.slice(0,-1):basePath;if(spaceId&&spaceId!==constants["b"]){return`${normalizedBasePath}/s/${spaceId}${requestedPath}`}return`${normalizedBasePath}${requestedPath}`||"/"}function stripServerBasePath(requestBasePath,serverBasePath){if(serverBasePath&&serverBasePath!=="/"&&requestBasePath.startsWith(serverBasePath)){return requestBasePath.substr(serverBasePath.length)}return requestBasePath}var types=__webpack_require__(14)},function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.ReactRouterDom},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/savedObjectsManagement/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isReservedSpace}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9);var lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);function isReservedSpace(space){return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(space,"_reserved",false)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ensureNoUnsafeProperties=exports.getFlattenedObject=exports.unset=exports.getUrlOrigin=exports.modifyUrl=exports.isRelativeUrl=exports.isPromise=exports.withTimeout=exports.pick=exports.merge=exports.mapToObject=exports.get=exports.deepFreeze=exports.assertNever=void 0;const tslib_1=__webpack_require__(115);var assert_never_1=__webpack_require__(116);Object.defineProperty(exports,"assertNever",{enumerable:true,get:function(){return assert_never_1.assertNever}});var deep_freeze_1=__webpack_require__(117);Object.defineProperty(exports,"deepFreeze",{enumerable:true,get:function(){return deep_freeze_1.deepFreeze}});var get_1=__webpack_require__(18);Object.defineProperty(exports,"get",{enumerable:true,get:function(){return get_1.get}});var map_to_object_1=__webpack_require__(118);Object.defineProperty(exports,"mapToObject",{enumerable:true,get:function(){return map_to_object_1.mapToObject}});var merge_1=__webpack_require__(119);Object.defineProperty(exports,"merge",{enumerable:true,get:function(){return merge_1.merge}});var pick_1=__webpack_require__(120);Object.defineProperty(exports,"pick",{enumerable:true,get:function(){return pick_1.pick}});var promise_1=__webpack_require__(121);Object.defineProperty(exports,"withTimeout",{enumerable:true,get:function(){return promise_1.withTimeout}});Object.defineProperty(exports,"isPromise",{enumerable:true,get:function(){return promise_1.isPromise}});var url_1=__webpack_require__(122);Object.defineProperty(exports,"isRelativeUrl",{enumerable:true,get:function(){return url_1.isRelativeUrl}});Object.defineProperty(exports,"modifyUrl",{enumerable:true,get:function(){return url_1.modifyUrl}});Object.defineProperty(exports,"getUrlOrigin",{enumerable:true,get:function(){return url_1.getUrlOrigin}});var unset_1=__webpack_require__(131);Object.defineProperty(exports,"unset",{enumerable:true,get:function(){return unset_1.unset}});var get_flattened_object_1=__webpack_require__(132);Object.defineProperty(exports,"getFlattenedObject",{enumerable:true,get:function(){return get_flattened_object_1.getFlattenedObject}});var ensure_no_unsafe_properties_1=__webpack_require__(133);Object.defineProperty(exports,"ensureNoUnsafeProperties",{enumerable:true,get:function(){return ensure_no_unsafe_properties_1.ensureNoUnsafeProperties}});tslib_1.__exportStar(__webpack_require__(134),exports)},function(module,exports){module.exports=__kbnSharedDeps__.RxjsOperators},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.get=void 0;function get(obj,path){if(typeof path==="string"){if(path.includes(".")){throw new Error("Using dots in `get` with a string is not allowed, use array instead")}return obj[path]}for(const key of path){obj=obj[key]}return obj}exports.get=get},function(module,exports){module.exports=__kbnSharedDeps__.Rxjs},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/home/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.Moment},function(module,exports,__webpack_require__){"use strict";exports.byteLength=byteLength;exports.toByteArray=toByteArray;exports.fromByteArray=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(b64){var len=b64.length;if(len%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var validLen=b64.indexOf("=");if(validLen===-1)validLen=len;var placeHoldersLen=validLen===len?0:4-validLen%4;return[validLen,placeHoldersLen]}function byteLength(b64){var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function _byteLength(b64,validLen,placeHoldersLen){return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function toByteArray(b64){var tmp;var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];var arr=new Arr(_byteLength(b64,validLen,placeHoldersLen));var curByte=0;var len=placeHoldersLen>0?validLen-4:validLen;var i;for(i=0;i<len;i+=4){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[curByte++]=tmp>>16&255;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}if(placeHoldersLen===2){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[curByte++]=tmp&255}if(placeHoldersLen===1){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}return arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[num&63]}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3){tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(uint8[i+2]&255);output.push(tripletToBase64(tmp))}return output.join("")}function fromByteArray(uint8){var tmp;var len=uint8.length;var extraBytes=len%3;var parts=[];var maxChunkLength=16383;for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength){parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength))}if(extraBytes===1){tmp=uint8[len-1];parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")}else if(extraBytes===2){tmp=(uint8[len-2]<<8)+uint8[len-1];parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"=")}return parts.join("")}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_spaces_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(24);var _node_modules_val_loader_dist_cjs_js_key_spaces_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_spaces_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/spaces/public",__webpack_require__,153);__kbnBundles__.define("plugin/spaces/common",__webpack_require__,8)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["spaces"]},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(26);case"v7light":return __webpack_require__(28);case"v8dark":return __webpack_require__(30);case"v8light":return __webpack_require__(32)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(27);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcDescription {\n  max-width: 240px; }\n\n.spcDescription__text,\n.spcDescription__manageButtonWrapper {\n  padding: 12px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(29);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcDescription {\n  max-width: 240px; }\n\n.spcDescription__text,\n.spcDescription__manageButtonWrapper {\n  padding: 12px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(31);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcDescription {\n  max-width: 240px; }\n\n.spcDescription__text,\n.spcDescription__manageButtonWrapper {\n  padding: 12px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(33);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcDescription {\n  max-width: 240px; }\n\n.spcDescription__text,\n.spcDescription__manageButtonWrapper {\n  padding: 12px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(35);case"v7light":return __webpack_require__(37);case"v8dark":return __webpack_require__(39);case"v8light":return __webpack_require__(41)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(36);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcMenu {\n  max-width: 240px; }\n\n.spcMenu__spacesList {\n  max-height: 320px;\n  overflow-y: auto; }\n\n.spcMenu__searchFieldWrapper {\n  padding: 12px; }\n\n.spcMenu__manageButton {\n  margin: 12px;\n  width: calc(100% - 24px); }\n\n.spcMenu__item {\n  margin-left: 12px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(38);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcMenu {\n  max-width: 240px; }\n\n.spcMenu__spacesList {\n  max-height: 320px;\n  overflow-y: auto; }\n\n.spcMenu__searchFieldWrapper {\n  padding: 12px; }\n\n.spcMenu__manageButton {\n  margin: 12px;\n  width: calc(100% - 24px); }\n\n.spcMenu__item {\n  margin-left: 12px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(40);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcMenu {\n  max-width: 240px; }\n\n.spcMenu__spacesList {\n  max-height: 320px;\n  overflow-y: auto; }\n\n.spcMenu__searchFieldWrapper {\n  padding: 12px; }\n\n.spcMenu__manageButton {\n  margin: 12px;\n  width: calc(100% - 24px); }\n\n.spcMenu__item {\n  margin-left: 12px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(42);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcMenu {\n  max-width: 240px; }\n\n.spcMenu__spacesList {\n  max-height: 320px;\n  overflow-y: auto; }\n\n.spcMenu__searchFieldWrapper {\n  padding: 12px; }\n\n.spcMenu__manageButton {\n  margin: 12px;\n  width: calc(100% - 24px); }\n\n.spcMenu__item {\n  margin-left: 12px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(44);case"v7light":return __webpack_require__(46);case"v8dark":return __webpack_require__(48);case"v8light":return __webpack_require__(50)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(45);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpaceResult {\n  padding-bottom: 8px;\n  border-bottom: 1px solid #343741; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(47);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpaceResult {\n  padding-bottom: 8px;\n  border-bottom: 1px solid #D3DAE6; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(49);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpaceResult {\n  padding-bottom: 8px;\n  border-bottom: 1px solid #343741; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(51);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpaceResult {\n  padding-bottom: 8px;\n  border-bottom: 1px solid #D3DAE6; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(53);case"v7light":return __webpack_require__(55);case"v8dark":return __webpack_require__(57);case"v8light":return __webpack_require__(59)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(54);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__summaryCountBadge {\n  margin-left: 4px; }\n\n.spcCopyToSpace__missingReferencesIcon {\n  margin-left: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(56);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__summaryCountBadge {\n  margin-left: 4px; }\n\n.spcCopyToSpace__missingReferencesIcon {\n  margin-left: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(58);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__summaryCountBadge {\n  margin-left: 4px; }\n\n.spcCopyToSpace__missingReferencesIcon {\n  margin-left: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(60);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__summaryCountBadge {\n  margin-left: 4px; }\n\n.spcCopyToSpace__missingReferencesIcon {\n  margin-left: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(62);case"v7light":return __webpack_require__(64);case"v8dark":return __webpack_require__(66);case"v8light":return __webpack_require__(68)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(63);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__resolveAllConflictsLink {\n  font-size: 14px;\n  margin-right: 8px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(65);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__resolveAllConflictsLink {\n  font-size: 14px;\n  margin-right: 8px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(67);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__resolveAllConflictsLink {\n  font-size: 14px;\n  margin-right: 8px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(69);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__resolveAllConflictsLink {\n  font-size: 14px;\n  margin-right: 8px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(71);case"v7light":return __webpack_require__(73);case"v8dark":return __webpack_require__(75);case"v8light":return __webpack_require__(77)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(72);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpaceResultDetails {\n  margin-top: 8px;\n  padding-left: 24px; }\n\n.spcCopyToSpaceResultDetails__row {\n  margin-bottom: 4px; }\n\n.spcCopyToSpaceResultDetails__savedObjectName {\n  min-width: 0; }\n\n.spcCopyToSpaceResultDetails__selectControl {\n  margin-left: 24px; }\n\n.spcCopyToSpaceResultDetails__selectControl__childWrapper {\n  visibility: hidden;\n  opacity: 0;\n  height: 0;\n  overflow: hidden;\n  transform: translatez(0);\n  transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1), opacity 250ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n\n.spcCopyToSpaceResultDetails__selectControl.spcCopyToSpaceResultDetails__selectControl-isOpen .spcCopyToSpaceResultDetails__selectControl__childWrapper {\n  visibility: visible;\n  opacity: 1;\n  height: auto; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(74);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpaceResultDetails {\n  margin-top: 8px;\n  padding-left: 24px; }\n\n.spcCopyToSpaceResultDetails__row {\n  margin-bottom: 4px; }\n\n.spcCopyToSpaceResultDetails__savedObjectName {\n  min-width: 0; }\n\n.spcCopyToSpaceResultDetails__selectControl {\n  margin-left: 24px; }\n\n.spcCopyToSpaceResultDetails__selectControl__childWrapper {\n  visibility: hidden;\n  opacity: 0;\n  height: 0;\n  overflow: hidden;\n  transform: translatez(0);\n  transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1), opacity 250ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n\n.spcCopyToSpaceResultDetails__selectControl.spcCopyToSpaceResultDetails__selectControl-isOpen .spcCopyToSpaceResultDetails__selectControl__childWrapper {\n  visibility: visible;\n  opacity: 1;\n  height: auto; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(76);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpaceResultDetails {\n  margin-top: 8px;\n  padding-left: 24px; }\n\n.spcCopyToSpaceResultDetails__row {\n  margin-bottom: 4px; }\n\n.spcCopyToSpaceResultDetails__savedObjectName {\n  min-width: 0; }\n\n.spcCopyToSpaceResultDetails__selectControl {\n  margin-left: 24px; }\n\n.spcCopyToSpaceResultDetails__selectControl__childWrapper {\n  visibility: hidden;\n  opacity: 0;\n  height: 0;\n  overflow: hidden;\n  transform: translatez(0);\n  transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1), opacity 250ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n\n.spcCopyToSpaceResultDetails__selectControl.spcCopyToSpaceResultDetails__selectControl-isOpen .spcCopyToSpaceResultDetails__selectControl__childWrapper {\n  visibility: visible;\n  opacity: 1;\n  height: auto; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(78);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpaceResultDetails {\n  margin-top: 8px;\n  padding-left: 24px; }\n\n.spcCopyToSpaceResultDetails__row {\n  margin-bottom: 4px; }\n\n.spcCopyToSpaceResultDetails__savedObjectName {\n  min-width: 0; }\n\n.spcCopyToSpaceResultDetails__selectControl {\n  margin-left: 24px; }\n\n.spcCopyToSpaceResultDetails__selectControl__childWrapper {\n  visibility: hidden;\n  opacity: 0;\n  height: 0;\n  overflow: hidden;\n  transform: translatez(0);\n  transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1), opacity 250ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n\n.spcCopyToSpaceResultDetails__selectControl.spcCopyToSpaceResultDetails__selectControl-isOpen .spcCopyToSpaceResultDetails__selectControl__childWrapper {\n  visibility: visible;\n  opacity: 1;\n  height: auto; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(80);case"v7light":return __webpack_require__(82);case"v8dark":return __webpack_require__(84);case"v8light":return __webpack_require__(86)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(81);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__spacesList {\n  margin-top: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(83);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__spacesList {\n  margin-top: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(85);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__spacesList {\n  margin-top: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(87);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__spacesList {\n  margin-top: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(89);case"v7light":return __webpack_require__(91);case"v8dark":return __webpack_require__(93);case"v8light":return __webpack_require__(95)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(90);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcShareToSpaceIncludeRelated .euiIcon {\n  margin-right: 28px; }\n\n.spcShareToSpaceIncludeRelated__label {\n  font-size: 14px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(92);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcShareToSpaceIncludeRelated .euiIcon {\n  margin-right: 28px; }\n\n.spcShareToSpaceIncludeRelated__label {\n  font-size: 14px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(94);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcShareToSpaceIncludeRelated .euiIcon {\n  margin-right: 28px; }\n\n.spcShareToSpaceIncludeRelated__label {\n  font-size: 14px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(96);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcShareToSpaceIncludeRelated .euiIcon {\n  margin-right: 28px; }\n\n.spcShareToSpaceIncludeRelated__label {\n  font-size: 14px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(98);case"v7light":return __webpack_require__(100);case"v8dark":return __webpack_require__(102);case"v8light":return __webpack_require__(104)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(99);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".euiCheckableCard__children {\n  width: 100%; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(101);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".euiCheckableCard__children {\n  width: 100%; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(103);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".euiCheckableCard__children {\n  width: 100%; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(105);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".euiCheckableCard__children {\n  width: 100%; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(107);case"v7light":return __webpack_require__(109);case"v8dark":return __webpack_require__(111);case"v8light":return __webpack_require__(113)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(108);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcShareToSpace__spacesList {\n  margin-top: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(110);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcShareToSpace__spacesList {\n  margin-top: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(112);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcShareToSpace__spacesList {\n  margin-top: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(114);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcShareToSpace__spacesList {\n  margin-top: 4px; }\n",""]);module.exports=exports},function(module,exports){module.exports=__kbnSharedDeps__.TsLib},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.assertNever=void 0;function assertNever(x){throw new Error(`Unexpected object: ${x}`)}exports.assertNever=assertNever},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.deepFreeze=void 0;function deepFreeze(object){for(const value of Object.values(object)){if(value!==null&&typeof value==="object"){deepFreeze(value)}}return Object.freeze(object)}exports.deepFreeze=deepFreeze},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapToObject=void 0;function mapToObject(map){const result=Object.create(null);for(const[key,value]of map){result[key]=value}return result}exports.mapToObject=mapToObject},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.merge=void 0;const lodash_1=__webpack_require__(9);function merge(baseObj,...sources){const firstSource=sources[0];if(firstSource===undefined){return baseObj}return sources.slice(1).reduce((merged,nextSource)=>mergeObjects(merged,nextSource),mergeObjects(baseObj,firstSource))}exports.merge=merge;const isMergable=obj=>lodash_1.isPlainObject(obj);const mergeObjects=(baseObj,overrideObj)=>[...new Set([...Object.keys(baseObj),...Object.keys(overrideObj)])].reduce((merged,key)=>{const baseVal=baseObj[key];const overrideVal=overrideObj[key];if(isMergable(baseVal)&&isMergable(overrideVal)){merged[key]=mergeObjects(baseVal,overrideVal)}else if(overrideVal!==undefined){merged[key]=overrideVal}else if(baseVal!==undefined){merged[key]=baseVal}return merged},{})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.pick=void 0;function pick(obj,keys){return keys.reduce((acc,key)=>{if(obj.hasOwnProperty(key)){acc[key]=obj[key]}return acc},{})}exports.pick=pick},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isPromise=exports.withTimeout=void 0;async function withTimeout({promise:promise,timeoutMs:timeoutMs}){let timeout;try{return await Promise.race([promise.then(v=>({value:v,timedout:false})),new Promise(resolve=>{timeout=setTimeout(()=>resolve({timedout:true}),timeoutMs)})])}finally{if(timeout!==undefined){clearTimeout(timeout)}}}exports.withTimeout=withTimeout;function isPromise(maybePromise){return maybePromise?typeof maybePromise.then==="function":false}exports.isPromise=isPromise},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getUrlOrigin=exports.isRelativeUrl=exports.modifyUrl=void 0;const url_1=__webpack_require__(123);function modifyUrl(url,urlModifier){const parsed=url_1.parse(url,true);const meaningfulParts={auth:parsed.auth,hash:parsed.hash,hostname:parsed.hostname,pathname:parsed.pathname,port:parsed.port,protocol:parsed.protocol,query:parsed.query||{},slashes:parsed.slashes};const modifiedParts=urlModifier(meaningfulParts)||meaningfulParts;return url_1.format({auth:modifiedParts.auth,hash:modifiedParts.hash,hostname:modifiedParts.hostname,pathname:modifiedParts.pathname,port:modifiedParts.port,protocol:modifiedParts.protocol,query:modifiedParts.query,slashes:modifiedParts.slashes})}exports.modifyUrl=modifyUrl;function isRelativeUrl(candidatePath){const all=url_1.parse(candidatePath,false,true);const{protocol:protocol,hostname:hostname,port:port}=all;if(protocol!==null||hostname!==null||port!==null){return false}return true}exports.isRelativeUrl=isRelativeUrl;function getUrlOrigin(url){const obj=url_1.parse(url);if(!obj.protocol&&!obj.hostname){return null}return`${obj.protocol}//${obj.hostname}${obj.port?`:${obj.port}`:""}`}exports.getUrlOrigin=getUrlOrigin},function(module,exports,__webpack_require__){"use strict";var punycode=__webpack_require__(124);var util=__webpack_require__(127);exports.parse=urlParse;exports.resolve=urlResolve;exports.resolveObject=urlResolveObject;exports.format=urlFormat;exports.Url=Url;function Url(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:true,"javascript:":true},hostlessProtocol={javascript:true,"javascript:":true},slashedProtocol={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},querystring=__webpack_require__(128);function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&util.isObject(url)&&url instanceof Url)return url;var u=new Url;u.parse(url,parseQueryString,slashesDenoteHost);return u}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!util.isString(url)){throw new TypeError("Parameter 'url' must be a string, not "+typeof url)}var queryIndex=url.indexOf("?"),splitter=queryIndex!==-1&&queryIndex<url.indexOf("#")?"?":"#",uSplit=url.split(splitter),slashRegex=/\\/g;uSplit[0]=uSplit[0].replace(slashRegex,"/");url=uSplit.join(splitter);var rest=url;rest=rest.trim();if(!slashesDenoteHost&&url.split("#").length===1){var simplePath=simplePathPattern.exec(rest);if(simplePath){this.path=rest;this.href=rest;this.pathname=simplePath[1];if(simplePath[2]){this.search=simplePath[2];if(parseQueryString){this.query=querystring.parse(this.search.substr(1))}else{this.query=this.search.substr(1)}}else if(parseQueryString){this.search="";this.query={}}return this}}var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto;rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes=rest.substr(0,2)==="//";if(slashes&&!(proto&&hostlessProtocol[proto])){rest=rest.substr(2);this.slashes=true}}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){var hostEnd=-1;for(var i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}var auth,atSign;if(hostEnd===-1){atSign=rest.lastIndexOf("@")}else{atSign=rest.lastIndexOf("@",hostEnd)}if(atSign!==-1){auth=rest.slice(0,atSign);rest=rest.slice(atSign+1);this.auth=decodeURIComponent(auth)}hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}if(hostEnd===-1)hostEnd=rest.length;this.host=rest.slice(0,hostEnd);rest=rest.slice(hostEnd);this.parseHost();this.hostname=this.hostname||"";var ipv6Hostname=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ipv6Hostname){var hostparts=this.hostname.split(/\./);for(var i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(!part)continue;if(!part.match(hostnamePartPattern)){var newpart="";for(var j=0,k=part.length;j<k;j++){if(part.charCodeAt(j)>127){newpart+="x"}else{newpart+=part[j]}}if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i);var notHost=hostparts.slice(i+1);var bit=part.match(hostnamePartStart);if(bit){validParts.push(bit[1]);notHost.unshift(bit[2])}if(notHost.length){rest="/"+notHost.join(".")+rest}this.hostname=validParts.join(".");break}}}}if(this.hostname.length>hostnameMaxLen){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!ipv6Hostname){this.hostname=punycode.toASCII(this.hostname)}var p=this.port?":"+this.port:"";var h=this.hostname||"";this.host=h+p;this.href+=this.host;if(ipv6Hostname){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(rest[0]!=="/"){rest="/"+rest}}}if(!unsafeProtocol[lowerProto]){for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];if(rest.indexOf(ae)===-1)continue;var esc=encodeURIComponent(ae);if(esc===ae){esc=escape(ae)}rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");if(hash!==-1){this.hash=rest.substr(hash);rest=rest.slice(0,hash)}var qm=rest.indexOf("?");if(qm!==-1){this.search=rest.substr(qm);this.query=rest.substr(qm+1);if(parseQueryString){this.query=querystring.parse(this.query)}rest=rest.slice(0,qm)}else if(parseQueryString){this.search="";this.query={}}if(rest)this.pathname=rest;if(slashedProtocol[lowerProto]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var p=this.pathname||"";var s=this.search||"";this.path=p+s}this.href=this.format();return this};function urlFormat(obj){if(util.isString(obj))obj=urlParse(obj);if(!(obj instanceof Url))return Url.prototype.format.call(obj);return obj.format()}Url.prototype.format=function(){var auth=this.auth||"";if(auth){auth=encodeURIComponent(auth);auth=auth.replace(/%3A/i,":");auth+="@"}var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=false,query="";if(this.host){host=auth+this.host}else if(this.hostname){host=auth+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){host+=":"+this.port}}if(this.query&&util.isObject(this.query)&&Object.keys(this.query).length){query=querystring.stringify(this.query)}var search=this.search||query&&"?"+query||"";if(protocol&&protocol.substr(-1)!==":")protocol+=":";if(this.slashes||(!protocol||slashedProtocol[protocol])&&host!==false){host="//"+(host||"");if(pathname&&pathname.charAt(0)!=="/")pathname="/"+pathname}else if(!host){host=""}if(hash&&hash.charAt(0)!=="#")hash="#"+hash;if(search&&search.charAt(0)!=="?")search="?"+search;pathname=pathname.replace(/[?#]/g,(function(match){return encodeURIComponent(match)}));search=search.replace("#","%23");return protocol+host+pathname+search+hash};function urlResolve(source,relative){return urlParse(source,false,true).resolve(relative)}Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,false,true)).format()};function urlResolveObject(source,relative){if(!source)return relative;return urlParse(source,false,true).resolveObject(relative)}Url.prototype.resolveObject=function(relative){if(util.isString(relative)){var rel=new Url;rel.parse(relative,false,true);relative=rel}var result=new Url;var tkeys=Object.keys(this);for(var tk=0;tk<tkeys.length;tk++){var tkey=tkeys[tk];result[tkey]=this[tkey]}result.hash=relative.hash;if(relative.href===""){result.href=result.format();return result}if(relative.slashes&&!relative.protocol){var rkeys=Object.keys(relative);for(var rk=0;rk<rkeys.length;rk++){var rkey=rkeys[rk];if(rkey!=="protocol")result[rkey]=relative[rkey]}if(slashedProtocol[result.protocol]&&result.hostname&&!result.pathname){result.path=result.pathname="/"}result.href=result.format();return result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){var keys=Object.keys(relative);for(var v=0;v<keys.length;v++){var k=keys[v];result[k]=relative[k]}result.href=result.format();return result}result.protocol=relative.protocol;if(!relative.host&&!hostlessProtocol[relative.protocol]){var relPath=(relative.pathname||"").split("/");while(relPath.length&&!(relative.host=relPath.shift()));if(!relative.host)relative.host="";if(!relative.hostname)relative.hostname="";if(relPath[0]!=="")relPath.unshift("");if(relPath.length<2)relPath.unshift("");result.pathname=relPath.join("/")}else{result.pathname=relative.pathname}result.search=relative.search;result.query=relative.query;result.host=relative.host||"";result.auth=relative.auth;result.hostname=relative.hostname||relative.host;result.port=relative.port;if(result.pathname||result.search){var p=result.pathname||"";var s=result.search||"";result.path=p+s}result.slashes=result.slashes||relative.slashes;result.href=result.format();return result}var isSourceAbs=result.pathname&&result.pathname.charAt(0)==="/",isRelAbs=relative.host||relative.pathname&&relative.pathname.charAt(0)==="/",mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic){result.hostname="";result.port=null;if(result.host){if(srcPath[0]==="")srcPath[0]=result.host;else srcPath.unshift(result.host)}result.host="";if(relative.protocol){relative.hostname=null;relative.port=null;if(relative.host){if(relPath[0]==="")relPath[0]=relative.host;else relPath.unshift(relative.host)}relative.host=null}mustEndAbs=mustEndAbs&&(relPath[0]===""||srcPath[0]==="")}if(isRelAbs){result.host=relative.host||relative.host===""?relative.host:result.host;result.hostname=relative.hostname||relative.hostname===""?relative.hostname:result.hostname;result.search=relative.search;result.query=relative.query;srcPath=relPath}else if(relPath.length){if(!srcPath)srcPath=[];srcPath.pop();srcPath=srcPath.concat(relPath);result.search=relative.search;result.query=relative.query}else if(!util.isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}result.search=relative.search;result.query=relative.query;if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.href=result.format();return result}if(!srcPath.length){result.pathname=null;if(result.search){result.path="/"+result.search}else{result.path=null}result.href=result.format();return result}var last=srcPath.slice(-1)[0];var hasTrailingSlash=(result.host||relative.host||srcPath.length>1)&&(last==="."||last==="..")||last==="";var up=0;for(var i=srcPath.length;i>=0;i--){last=srcPath[i];if(last==="."){srcPath.splice(i,1)}else if(last===".."){srcPath.splice(i,1);up++}else if(up){srcPath.splice(i,1);up--}}if(!mustEndAbs&&!removeAllDots){for(;up--;up){srcPath.unshift("..")}}if(mustEndAbs&&srcPath[0]!==""&&(!srcPath[0]||srcPath[0].charAt(0)!=="/")){srcPath.unshift("")}if(hasTrailingSlash&&srcPath.join("/").substr(-1)!=="/"){srcPath.push("")}var isAbsolute=srcPath[0]===""||srcPath[0]&&srcPath[0].charAt(0)==="/";if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}mustEndAbs=mustEndAbs||result.host&&srcPath.length;if(mustEndAbs&&!isAbsolute){srcPath.unshift("")}if(!srcPath.length){result.pathname=null;result.path=null}else{result.pathname=srcPath.join("/")}if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.auth=relative.auth||result.auth;result.slashes=result.slashes||relative.slashes;result.href=result.format();return result};Url.prototype.parseHost=function(){var host=this.host;var port=portPattern.exec(host);if(port){port=port[0];if(port!==":"){this.port=port.substr(1)}host=host.substr(0,host.length-port.length)}if(host)this.hostname=host}},function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(root){var freeExports=true&&exports&&!exports.nodeType&&exports;var freeModule=true&&module&&!module.nodeType&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal){root=freeGlobal}var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw new RangeError(errors[type])}function map(array,fn){var length=array.length;var result=[];while(length--){result[length]=fn(array[length])}return result}function mapDomain(string,fn){var parts=string.split("@");var result="";if(parts.length>1){result=parts[0]+"@";string=parts[1]}string=string.replace(regexSeparators,".");var labels=string.split(".");var encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){return map(array,(function(value){var output="";if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value);return output})).join("")}function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error("not-basic")}output.push(input.charCodeAt(j))}for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error("invalid-input")}digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error("overflow")}i+=digit*w;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error("overflow")}w*=baseMinusT}out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<128){output.push(stringFromCharCode(currentValue))}}handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue}}handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error("overflow")}if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}++delta;++n}return output.join("")}function toUnicode(input){return mapDomain(input,(function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string}))}function toASCII(input){return mapDomain(input,(function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string}))}punycode={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode};if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return punycode}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})(this)}).call(this,__webpack_require__(125)(module),__webpack_require__(126))},function(module,exports){module.exports=function(module){if(!module.webpackPolyfill){module.deprecate=function(){};module.paths=[];if(!module.children)module.children=[];Object.defineProperty(module,"loaded",{enumerable:true,get:function(){return module.l}});Object.defineProperty(module,"id",{enumerable:true,get:function(){return module.i}});module.webpackPolyfill=1}return module}},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){if(typeof window==="object")g=window}module.exports=g},function(module,exports,__webpack_require__){"use strict";module.exports={isString:function(arg){return typeof arg==="string"},isObject:function(arg){return typeof arg==="object"&&arg!==null},isNull:function(arg){return arg===null},isNullOrUndefined:function(arg){return arg==null}}},function(module,exports,__webpack_require__){"use strict";exports.decode=exports.parse=__webpack_require__(129);exports.encode=exports.stringify=__webpack_require__(130)},function(module,exports,__webpack_require__){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&";eq=eq||"=";var obj={};if(typeof qs!=="string"||qs.length===0){return obj}var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;if(options&&typeof options.maxKeys==="number"){maxKeys=options.maxKeys}var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys}for(var i=0;i<len;++i){var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1)}else{kstr=x;vstr=""}k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty(obj,k)){obj[k]=v}else if(isArray(obj[k])){obj[k].push(v)}else{obj[k]=[obj[k],v]}}return obj};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},function(module,exports,__webpack_require__){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){sep=sep||"&";eq=eq||"=";if(obj===null){obj=undefined}if(typeof obj==="object"){return map(objectKeys(obj),(function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(isArray(obj[k])){return map(obj[k],(function(v){return ks+encodeURIComponent(stringifyPrimitive(v))})).join(sep)}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]))}})).join(sep)}if(!name)return"";return encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj))};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};function map(xs,f){if(xs.map)return xs.map(f);var res=[];for(var i=0;i<xs.length;i++){res.push(f(xs[i],i))}return res}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))res.push(key)}return res}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.unset=void 0;const get_1=__webpack_require__(18);function unset(obj,atPath){const paths=atPath.split(".").map(s=>s.trim()).filter(v=>v!=="");if(paths.length===0){return}if(paths.length===1){delete obj[paths[0]];return}const property=paths.pop();const parent=get_1.get(obj,paths);if(parent!==undefined){delete parent[property]}}exports.unset=unset},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFlattenedObject=void 0;function shouldReadKeys(value){return typeof value==="object"&&value!==null&&!Array.isArray(value)}function getFlattenedObject(rootValue){if(!shouldReadKeys(rootValue)){throw new TypeError(`Root value is not flatten-able, received ${rootValue}`)}const result={};(function flatten(prefix,object){for(const[key,value]of Object.entries(object)){const path=prefix?`${prefix}.${key}`:key;if(shouldReadKeys(value)){flatten(path,value)}else{result[path]=value}}})("",rootValue);return result}exports.getFlattenedObject=getFlattenedObject},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ensureNoUnsafeProperties=void 0;const hasOwnProperty=(obj,property)=>Object.prototype.hasOwnProperty.call(obj,property);const isObject=obj=>typeof obj==="object"&&obj!==null;function ensureNoUnsafeProperties(obj){if(!isObject(obj)){return}const stack=[{value:obj,previousKey:null}];const seen=new WeakSet([obj]);while(stack.length>0){const{value:value,previousKey:previousKey}=stack.pop();if(!isObject(value)){continue}if(hasOwnProperty(value,"__proto__")){throw new Error(`'__proto__' is an invalid key`)}if(hasOwnProperty(value,"prototype")&&previousKey==="constructor"){throw new Error(`'constructor.prototype' is an invalid key`)}const entries=Object.entries(value);for(let i=entries.length-1;i>=0;--i){const[key,childValue]=entries[i];if(isObject(childValue)){if(seen.has(childValue)){throw new Error("circular reference detected")}seen.add(childValue)}stack.push({value:childValue,previousKey:key})}}}exports.ensureNoUnsafeProperties=ensureNoUnsafeProperties},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.lastValueFrom=exports.firstValueFrom=void 0;const operators_1=__webpack_require__(17);function firstValueFrom(source){return source.pipe(operators_1.first()).toPromise()}exports.firstValueFrom=firstValueFrom;function lastValueFrom(source){return source.pipe(operators_1.last()).toPromise()}exports.lastValueFrom=lastValueFrom},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(136);case"v7light":return __webpack_require__(138);case"v8dark":return __webpack_require__(140);case"v8light":return __webpack_require__(142)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(137);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcConfirmDeleteModal {\n  max-width: 448px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(139);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcConfirmDeleteModal {\n  max-width: 448px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(141);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcConfirmDeleteModal {\n  max-width: 448px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(143);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcConfirmDeleteModal {\n  max-width: 448px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(145);case"v7light":return __webpack_require__(147);case"v8dark":return __webpack_require__(149);case"v8light":return __webpack_require__(151)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(146);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcFeatureTableAccordionContent {\n  padding-left: 32px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(148);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcFeatureTableAccordionContent {\n  padding-left: 32px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(150);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcFeatureTableAccordionContent {\n  padding-left: 32px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(152);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcFeatureTableAccordionContent {\n  padding-left: 32px; }\n",""]);module.exports=exports},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"SpaceAvatar",(function(){return space_avatar["a"]}));__webpack_require__.d(__webpack_exports__,"getSpaceColor",(function(){return space_avatar["b"]}));__webpack_require__.d(__webpack_exports__,"getSpaceImageUrl",(function(){return space_avatar["c"]}));__webpack_require__.d(__webpack_exports__,"getSpaceInitials",(function(){return space_avatar["d"]}));__webpack_require__.d(__webpack_exports__,"SpacesPluginSetup",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SpacesPluginStart",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var external_kbnSharedDeps_Rxjs_=__webpack_require__(19);var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(17);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class spaces_manager_SpacesManager{constructor(http){this.http=http;_defineProperty(this,"activeSpace$",new external_kbnSharedDeps_Rxjs_["BehaviorSubject"](null));_defineProperty(this,"serverBasePath",void 0);_defineProperty(this,"_onActiveSpaceChange$",void 0);this.serverBasePath=http.basePath.serverBasePath;this._onActiveSpaceChange$=this.activeSpace$.asObservable().pipe(Object(external_kbnSharedDeps_RxjsOperators_["skipWhile"])(v=>v==null))}get onActiveSpaceChange$(){if(!this.activeSpace$.value){this.refreshActiveSpace()}return this._onActiveSpaceChange$}async getSpaces(options={}){const{purpose:purpose,includeAuthorizedPurposes:includeAuthorizedPurposes}=options;const query={purpose:purpose,include_authorized_purposes:includeAuthorizedPurposes};return await this.http.get("/api/spaces/space",{query:query})}async getSpace(id){return await this.http.get(`/api/spaces/space/${encodeURIComponent(id)}`)}async getActiveSpace({forceRefresh:forceRefresh=false}={}){if(this.isAnonymousPath()){throw new Error(`Cannot retrieve the active space for anonymous paths`)}if(forceRefresh||!this.activeSpace$.value){await this.refreshActiveSpace()}return this.activeSpace$.value}async createSpace(space){await this.http.post(`/api/spaces/space`,{body:JSON.stringify(space)})}async updateSpace(space){await this.http.put(`/api/spaces/space/${encodeURIComponent(space.id)}`,{query:{overwrite:true},body:JSON.stringify(space)});const activeSpaceId=(await this.getActiveSpace()).id;if(space.id===activeSpaceId){this.refreshActiveSpace()}}async deleteSpace(space){await this.http.delete(`/api/spaces/space/${encodeURIComponent(space.id)}`)}async copySavedObjects(objects,spaces,includeReferences,createNewCopies,overwrite){return this.http.post("/api/spaces/_copy_saved_objects",{body:JSON.stringify({objects:objects,spaces:spaces,includeReferences:includeReferences,createNewCopies:createNewCopies,...createNewCopies?{overwrite:false}:{overwrite:overwrite}})})}async resolveCopySavedObjectsErrors(objects,retries,includeReferences,createNewCopies){return this.http.post(`/api/spaces/_resolve_copy_saved_objects_errors`,{body:JSON.stringify({objects:objects,includeReferences:includeReferences,createNewCopies:createNewCopies,retries:retries})})}async getShareSavedObjectPermissions(type){return this.http.get("/internal/security/_share_saved_object_permissions",{query:{type:type}}).catch(err=>{var _err$body;const isNotFound=(err===null||err===void 0?void 0:(_err$body=err.body)===null||_err$body===void 0?void 0:_err$body.statusCode)===404;if(isNotFound){return{shareToAllSpaces:true}}throw err})}async shareSavedObjectAdd(object,spaces){return this.http.post(`/api/spaces/_share_saved_object_add`,{body:JSON.stringify({object:object,spaces:spaces})})}async shareSavedObjectRemove(object,spaces){return this.http.post(`/api/spaces/_share_saved_object_remove`,{body:JSON.stringify({object:object,spaces:spaces})})}redirectToSpaceSelector(){window.location.href=`${this.serverBasePath}/spaces/space_selector`}async refreshActiveSpace(){if(this.isAnonymousPath()){return}const activeSpace=await this.http.get("/internal/spaces/_active_space");this.activeSpace$.next(activeSpace)}isAnonymousPath(){return this.http.anonymousPaths.isAnonymous(window.location.pathname)}}var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(12);var external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(1);var space_avatar=__webpack_require__(7);var spaces_description=__webpack_require__(25);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(3);function manage_spaces_button_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class manage_spaces_button_ManageSpacesButton extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);manage_spaces_button_defineProperty(this,"navigateToManageSpaces",()=>{if(this.props.onClick){this.props.onClick()}this.props.navigateToApp("management",{path:"kibana/spaces"})})}render(){if(!this.props.capabilities.spaces.manage){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:this.props.size||"s",className:this.props.className,isDisabled:this.props.isDisabled,onClick:this.navigateToManageSpaces,style:this.props.style,"data-test-subj":"manageSpaces"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.manageSpacesButton.manageSpacesButtonLabel",defaultMessage:"Manage spaces"}))}}var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);let spacesFeatureDescription;const getSpacesFeatureDescription=()=>{if(!spacesFeatureDescription){spacesFeatureDescription=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.featureDescription",{defaultMessage:"Organize your dashboards and other saved objects into meaningful categories."})}return spacesFeatureDescription};const SpacesDescription=props=>{const panelProps={id:props.id,className:"spcDescription",title:"Spaces"};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],panelProps,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{className:"spcDescription__text"},external_kbnSharedDeps_React_default.a.createElement("p",null,getSpacesFeatureDescription())),external_kbnSharedDeps_React_default.a.createElement("div",{key:"manageSpacesButton",className:"spcDescription__manageButtonWrapper"},external_kbnSharedDeps_React_default.a.createElement(manage_spaces_button_ManageSpacesButton,{size:"s",style:{width:`100%`},onClick:props.onManageSpacesClick,capabilities:props.capabilities,navigateToApp:props.navigateToApp})))};var spaces_menu=__webpack_require__(34);var common=__webpack_require__(8);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function spaces_menu_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class spaces_menu_SpacesMenuUI extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);spaces_menu_defineProperty(this,"state",{searchTerm:"",allowSpacesListFocus:false});spaces_menu_defineProperty(this,"getVisibleSpaces",searchTerm=>{const{spaces:spaces}=this.props;let filteredSpaces=spaces;if(searchTerm){filteredSpaces=spaces.filter(space=>{const{name:name,description:description=""}=space;return name.toLowerCase().indexOf(searchTerm)>=0||description.toLowerCase().indexOf(searchTerm)>=0})}return filteredSpaces});spaces_menu_defineProperty(this,"renderSpacesListPanel",(items,searchTerm)=>{if(items.length===0){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued",className:"eui-textCenter"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.navControl.spacesMenu.noSpacesFoundTitle",defaultMessage:" no spaces found "}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],{key:`spcMenuList`,"data-search-term":searchTerm,className:"spcMenu__spacesList",hasFocus:this.state.allowSpacesListFocus,initialFocusedItemIndex:this.state.allowSpacesListFocus?0:undefined,items:items})});spaces_menu_defineProperty(this,"renderSearchField",()=>{const{intl:intl}=this.props;return external_kbnSharedDeps_React_default.a.createElement("div",{key:"manageSpacesSearchField",className:"spcMenu__searchFieldWrapper"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldSearch"],{placeholder:intl.formatMessage({id:"xpack.spaces.navControl.spacesMenu.findSpacePlaceholder",defaultMessage:"Find a space"}),incremental:true,onSearch:this.onSearch,onKeyDown:this.onSearchKeyDown,onFocus:this.onSearchFocus,compressed:true}))});spaces_menu_defineProperty(this,"onSearchKeyDown",e=>{const focusableKeyCodes=[9,13,40];const keyCode=e.keyCode;if(focusableKeyCodes.includes(keyCode)){this.setState({allowSpacesListFocus:true})}});spaces_menu_defineProperty(this,"onSearchFocus",()=>{this.setState({allowSpacesListFocus:false})});spaces_menu_defineProperty(this,"renderManageButton",()=>external_kbnSharedDeps_React_default.a.createElement(manage_spaces_button_ManageSpacesButton,{key:"manageSpacesButton",className:"spcMenu__manageButton",size:"s",onClick:this.props.onManageSpacesClick,capabilities:this.props.capabilities,navigateToApp:this.props.navigateToApp}));spaces_menu_defineProperty(this,"onSearch",searchTerm=>{this.setState({searchTerm:searchTerm.trim().toLowerCase()})});spaces_menu_defineProperty(this,"renderSpaceMenuItem",space=>{const icon=external_kbnSharedDeps_React_default.a.createElement(space_avatar["a"],{space:space,size:"s"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:space.id,"data-test-subj":`${space.id}-gotoSpace`,icon:icon,href:Object(common["addSpaceIdToPath"])(this.props.serverBasePath,space.id,common["ENTER_SPACE_PATH"]),toolTipTitle:space.description&&space.name,toolTipContent:space.description},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{className:"spcMenu__item"},space.name))});spaces_menu_defineProperty(this,"renderPlaceholderMenuItem",key=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:key,disabled:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingContent"],{lines:1})))}render(){const{intl:intl,isLoading:isLoading}=this.props;const{searchTerm:searchTerm}=this.state;const items=isLoading?[1,2,3].map(this.renderPlaceholderMenuItem):this.getVisibleSpaces(searchTerm).map(this.renderSpaceMenuItem);const panelProps={id:this.props.id,className:"spcMenu",title:intl.formatMessage({id:"xpack.spaces.navControl.spacesMenu.changeCurrentSpaceTitle",defaultMessage:"Change current space"}),watchedItemProps:["data-search-term"]};if(this.props.spaces.length>=common["SPACE_SEARCH_COUNT_THRESHOLD"]){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],panelProps,this.renderSearchField(),this.renderSpacesListPanel(items,searchTerm),this.renderManageButton())}items.push(this.renderManageButton());return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],_extends({},panelProps,{items:items}))}}const SpacesMenu=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(spaces_menu_SpacesMenuUI);function nav_control_popover_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const popoutContentId="headerSpacesMenuContent";class nav_control_popover_NavControlPopover extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);nav_control_popover_defineProperty(this,"activeSpace$",void 0);nav_control_popover_defineProperty(this,"getActiveSpaceButton",()=>{const{activeSpace:activeSpace}=this.state;if(!activeSpace){return this.getButton(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"m"}),"loading")}return this.getButton(external_kbnSharedDeps_React_default.a.createElement(space_avatar["a"],{space:activeSpace,size:"s"}),activeSpace.name)});nav_control_popover_defineProperty(this,"getButton",(linkIcon,linkTitle)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHeaderSectionItemButton"],{"aria-controls":popoutContentId,"aria-expanded":this.state.showSpaceSelector,"aria-haspopup":"true","aria-label":linkTitle,title:linkTitle,onClick:this.toggleSpaceSelector},linkIcon));nav_control_popover_defineProperty(this,"toggleSpaceSelector",()=>{const isOpening=!this.state.showSpaceSelector;if(isOpening){this.loadSpaces()}this.setState({showSpaceSelector:!this.state.showSpaceSelector})});nav_control_popover_defineProperty(this,"closeSpaceSelector",()=>{this.setState({showSpaceSelector:false})});this.state={showSpaceSelector:false,loading:false,activeSpace:null,spaces:[]}}componentDidMount(){this.activeSpace$=this.props.spacesManager.onActiveSpaceChange$.subscribe({next:activeSpace=>{this.setState({activeSpace:activeSpace})}})}componentWillUnmount(){if(this.activeSpace$){this.activeSpace$.unsubscribe()}}render(){const button=this.getActiveSpaceButton();if(!button){return null}let element;if(!this.state.loading&&this.state.spaces.length<2){element=external_kbnSharedDeps_React_default.a.createElement(SpacesDescription,{id:popoutContentId,onManageSpacesClick:this.toggleSpaceSelector,capabilities:this.props.capabilities,navigateToApp:this.props.navigateToApp})}else{element=external_kbnSharedDeps_React_default.a.createElement(SpacesMenu,{id:popoutContentId,spaces:this.state.spaces,isLoading:this.state.loading,serverBasePath:this.props.serverBasePath,onManageSpacesClick:this.toggleSpaceSelector,capabilities:this.props.capabilities,navigateToApp:this.props.navigateToApp})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"spcMenuPopover","data-test-subj":`spacesNavSelector`,button:button,isOpen:this.state.showSpaceSelector,closePopover:this.closeSpaceSelector,anchorPosition:this.props.anchorPosition,panelPaddingSize:"none",repositionOnScroll:true,ownFocus:true},element)}async loadSpaces(){const{spacesManager:spacesManager}=this.props;if(this.state.loading){return}this.setState({loading:true});const spaces=await spacesManager.getSpaces();this.setState({spaces:spaces,loading:false})}}function initSpacesNavControl(spacesManager,core){const I18nContext=core.i18n.Context;core.chrome.navControls.registerLeft({order:1e3,mount(targetDomElement){if(core.http.anonymousPaths.isAnonymous(window.location.pathname)){return()=>null}external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(nav_control_popover_NavControlPopover,{spacesManager:spacesManager,serverBasePath:core.http.basePath.serverBasePath,anchorPosition:"downLeft",capabilities:core.application.capabilities,navigateToApp:core.application.navigateToApp})),targetDomElement);return()=>{external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(targetDomElement)}}})}var public_=__webpack_require__(20);const createSpacesFeatureCatalogueEntry=()=>({id:"spaces",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.spacesTitle",{defaultMessage:"Spaces"}),description:getSpacesFeatureDescription(),icon:"spacesApp",path:"/app/management/kibana/spaces",showOnHomePage:false,category:public_["FeatureCatalogueCategory"].ADMIN});const isAnyConflict=failure=>failure.error.type==="conflict"||failure.error.type==="ambiguous_conflict";const isMissingReferences=failure=>failure.error.type==="missing_references";const isUnresolvableError=failure=>!isAnyConflict(failure)&&!isMissingReferences(failure);const typeComparator=(a,b)=>a.type>b.type?1:a.type<b.type?-1:0;function summarizeCopyResult(savedObjectTarget,copyResult){var _copyResult$failedImp,_copyResult$failedImp2,_copyResult$failedImp3,_copyResult$failedImp4,_copyResult$successfu;const conflicts=(_copyResult$failedImp=copyResult===null||copyResult===void 0?void 0:copyResult.failedImports.filter(isAnyConflict))!==null&&_copyResult$failedImp!==void 0?_copyResult$failedImp:[];const missingReferences=(_copyResult$failedImp2=copyResult===null||copyResult===void 0?void 0:copyResult.failedImports.filter(isMissingReferences))!==null&&_copyResult$failedImp2!==void 0?_copyResult$failedImp2:[];const unresolvableErrors=(_copyResult$failedImp3=copyResult===null||copyResult===void 0?void 0:copyResult.failedImports.filter(failed=>isUnresolvableError(failed)))!==null&&_copyResult$failedImp3!==void 0?_copyResult$failedImp3:[];const getExtraFields=({type:type,id:id})=>{const conflict=conflicts.find(({obj:obj})=>obj.type===type&&obj.id===id);const missingReference=missingReferences.find(({obj:obj})=>obj.type===type&&obj.id===id);const hasMissingReferences=missingReference!==undefined;const hasUnresolvableErrors=unresolvableErrors.some(({obj:obj})=>obj.type===type&&obj.id===id);const overwrite=conflict?false:missingReference?missingReference.obj.overwrite===true:(copyResult===null||copyResult===void 0?void 0:copyResult.successfulImports.some(obj=>obj.type===type&&obj.id===id&&obj.overwrite))===true;return{conflict:conflict,hasMissingReferences:hasMissingReferences,hasUnresolvableErrors:hasUnresolvableErrors,overwrite:overwrite}};const objectMap=new Map;objectMap.set(`${savedObjectTarget.type}:${savedObjectTarget.id}`,{type:savedObjectTarget.type,id:savedObjectTarget.id,name:savedObjectTarget.title,icon:savedObjectTarget.icon,...getExtraFields(savedObjectTarget)});const addObjectsToMap=objects=>{objects.forEach(obj=>{const{type:type,id:id,meta:meta}=obj;objectMap.set(`${type}:${id}`,{type:type,id:id,name:meta.title||`${type} [id=${id}]`,icon:meta.icon||"apps",...getExtraFields(obj)})})};const failedImports=((_copyResult$failedImp4=copyResult===null||copyResult===void 0?void 0:copyResult.failedImports)!==null&&_copyResult$failedImp4!==void 0?_copyResult$failedImp4:[]).map(({obj:obj})=>obj).sort(typeComparator);addObjectsToMap(failedImports);const successfulImports=((_copyResult$successfu=copyResult===null||copyResult===void 0?void 0:copyResult.successfulImports)!==null&&_copyResult$successfu!==void 0?_copyResult$successfu:[]).sort(typeComparator);addObjectsToMap(successfulImports);if(typeof copyResult==="undefined"){return{processing:true,objects:Array.from(objectMap.values())}}const successful=Boolean(copyResult&&copyResult.failedImports.length===0);if(successful){return{successful:successful,hasConflicts:false,objects:Array.from(objectMap.values()),hasMissingReferences:false,hasUnresolvableErrors:false,processing:false}}const hasConflicts=conflicts.length>0;const hasMissingReferences=missingReferences.length>0;const hasUnresolvableErrors=unresolvableErrors.length>0;return{successful:successful,hasConflicts:hasConflicts,objects:Array.from(objectMap.values()),hasMissingReferences:hasMissingReferences,hasUnresolvableErrors:hasUnresolvableErrors,processing:false}}var savedObjectsManagement_public_=__webpack_require__(13);var external_kbnSharedDeps_Lodash_=__webpack_require__(9);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);var space_result=__webpack_require__(43);var copy_status_summary_indicator=__webpack_require__(52);var resolve_all_conflicts=__webpack_require__(61);function resolve_all_conflicts_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const resolve_all_conflicts_options=[{id:"overwrite",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.overwriteAllConflictsText",{defaultMessage:"Overwrite all"})},{id:"skip",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.skipAllConflictsText",{defaultMessage:"Skip all"})}];class resolve_all_conflicts_ResolveAllConflicts extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);resolve_all_conflicts_defineProperty(this,"state",{isPopoverOpen:false});resolve_all_conflicts_defineProperty(this,"onSelect",selection=>{const{summarizedCopyResult:summarizedCopyResult,retries:retries,onRetriesChange:onRetriesChange,onDestinationMapChange:onDestinationMapChange}=this.props;const overwrite=selection==="overwrite";if(overwrite){const existingOverwrites=retries.filter(retry=>retry.overwrite===true);const newOverwrites=summarizedCopyResult.objects.reduce((acc,{type:type,id:id,conflict:conflict})=>{if(conflict&&!existingOverwrites.some(retry=>retry.type===type&&retry.id===id)){const{error:error}=conflict;const destinationId=error.type==="conflict"?error.destinationId:error.destinations[0].id;return[...acc,{type:type,id:id,overwrite:overwrite,...destinationId&&{destinationId:destinationId}}]}return acc},new Array);onRetriesChange([...retries,...newOverwrites])}else{const objectsToSkip=summarizedCopyResult.objects.reduce((acc,{type:type,id:id,conflict:conflict})=>conflict?acc.add(`${type}:${id}`):acc,new Set);const filtered=retries.filter(({type:type,id:id})=>!objectsToSkip.has(`${type}:${id}`));onRetriesChange(filtered);onDestinationMapChange(undefined)}this.setState({isPopoverOpen:false})});resolve_all_conflicts_defineProperty(this,"onButtonClick",()=>{this.setState({isPopoverOpen:!this.state.isPopoverOpen})});resolve_all_conflicts_defineProperty(this,"closePopover",()=>{this.setState({isPopoverOpen:false})})}render(){const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:this.onButtonClick,className:"spcCopyToSpace__resolveAllConflictsLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.resolveAllConflictsLink",defaultMessage:"(resolve all)"}));const items=resolve_all_conflicts_options.map(item=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{"data-test-subj":`cts-resolve-all-conflicts-${item.id}`,key:item.id,onClick:()=>{this.onSelect(item.id)}},item.text));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"resolveAllConflictsVisibilityPopover",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],{items:items}))}}const renderIcon=props=>{const{space:space,summarizedCopyResult:summarizedCopyResult,conflictResolutionInProgress:conflictResolutionInProgress,retries:retries,onRetriesChange:onRetriesChange,onDestinationMapChange:onDestinationMapChange}=props;const getDataTestSubj=status=>`cts-summary-indicator-${status}-${space.id}`;if(summarizedCopyResult.processing||conflictResolutionInProgress){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{"data-test-subj":getDataTestSubj("loading")})}const{successful:successful,hasUnresolvableErrors:hasUnresolvableErrors,hasMissingReferences:hasMissingReferences,hasConflicts:hasConflicts}=summarizedCopyResult;if(successful){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"checkInCircleFilled",color:"success",iconProps:{"data-test-subj":getDataTestSubj("success")},content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatusSummary.successMessage",defaultMessage:"Copy to the {space} space was successful.",values:{space:space.name}})})}if(hasUnresolvableErrors){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"alert",color:"danger",iconProps:{"data-test-subj":getDataTestSubj("failed")},content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatusSummary.failedMessage",defaultMessage:"Copy to the {space} space failed. Expand this section for details.",values:{space:space.name}})})}const missingReferences=hasMissingReferences?external_kbnSharedDeps_React_default.a.createElement("span",{className:"spcCopyToSpace__missingReferencesIcon"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"link",color:"warning",iconProps:{"data-test-subj":getDataTestSubj("missingReferences")},content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatusSummary.missingReferencesMessage",defaultMessage:"Missing references detected in the {space} space. Expand this section for details.",values:{space:space.name}})})):null;if(hasConflicts){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(resolve_all_conflicts_ResolveAllConflicts,{summarizedCopyResult:summarizedCopyResult,retries:retries,onRetriesChange:onRetriesChange,onDestinationMapChange:onDestinationMapChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"alert",color:"warning",iconProps:{"data-test-subj":getDataTestSubj("conflicts")},content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatusSummary.conflictsMessage",defaultMessage:"Conflicts detected in the {space} space. Expand this section to resolve.",values:{space:space.name}})}),missingReferences)}return missingReferences};const CopyStatusSummaryIndicator=props=>{const{summarizedCopyResult:summarizedCopyResult}=props;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,renderIcon(props),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"#DDD",className:"spcCopyToSpace__summaryCountBadge"},summarizedCopyResult.objects.length))};var space_result_details=__webpack_require__(70);var external_kbnSharedDeps_Moment_=__webpack_require__(21);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);const CopyStatusIndicator=props=>{const{summarizedCopyResult:summarizedCopyResult,conflictResolutionInProgress:conflictResolutionInProgress,pendingObjectRetry:pendingObjectRetry}=props;if(summarizedCopyResult.processing||conflictResolutionInProgress){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],null)}const objectResult=summarizedCopyResult.objects.find(o=>o.type===props.object.type&&o.id===props.object.id);const{conflict:conflict,hasMissingReferences:hasMissingReferences,hasUnresolvableErrors:hasUnresolvableErrors,overwrite:overwrite}=objectResult;const hasConflicts=conflict&&!(pendingObjectRetry!==null&&pendingObjectRetry!==void 0&&pendingObjectRetry.overwrite);const successful=!hasMissingReferences&&!hasUnresolvableErrors&&!hasConflicts;if(successful&&!pendingObjectRetry){const message=overwrite?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.successAutomaticOverwriteMessage",defaultMessage:"Object was overwritten."}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.successMessage",defaultMessage:"Object was copied."});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"checkInCircleFilled",color:"success",content:message})}if(successful&&pendingObjectRetry){const message=overwrite?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.pendingAutomaticOverwriteMessage",defaultMessage:"Object will be overwritten."}):pendingObjectRetry!==null&&pendingObjectRetry!==void 0&&pendingObjectRetry.overwrite?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.pendingOverwriteMessage",defaultMessage:"Object will be overwritten. Disable 'Overwrite' to skip."}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.pendingMessage",defaultMessage:"Object will be copied."});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"check",color:"warning",content:message})}if(hasUnresolvableErrors){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"alert",color:"danger","data-test-subj":`cts-object-result-error-${objectResult.id}`,content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.unresolvableErrorMessage",defaultMessage:"An error occurred copying this object."})})}if(hasConflicts){switch(conflict.error.type){case"conflict":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"alert",color:"warning",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.conflictMessage",defaultMessage:"This conflicts with an existing object. Enable Overwrite to replace it."}))});case"ambiguous_conflict":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"alert",color:"warning",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.ambiguousConflictMessage",defaultMessage:"This conflicts with multiple existing objects. Enable Overwrite to replace one."}))})}}return hasMissingReferences?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"link",color:"warning","data-test-subj":`cts-object-result-missing-references-${objectResult.id}`,content:overwrite?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.missingReferencesAutomaticOverwriteMessage",defaultMessage:"Object will be overwritten, but one or more references are missing."}):conflict?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.missingReferencesOverwriteMessage",defaultMessage:"Object will be overwritten, but one or more references are missing. Disable 'Overwrite' to skip."}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.missingReferencesMessage",defaultMessage:"Object will be copied, but one or more references are missing."})}):null};function getSavedObjectLabel(type){switch(type){case"index-pattern":case"index-patterns":case"indexPatterns":return"index patterns";default:return type}}const isAmbiguousConflictError=error=>error.type==="ambiguous_conflict";const SpaceCopyResultDetails=props=>{const{destinationMap:destinationMap,onDestinationMapChange:onDestinationMapChange,summarizedCopyResult:summarizedCopyResult}=props;const{objects:objects}=summarizedCopyResult;return external_kbnSharedDeps_React_default.a.createElement("div",{className:"spcCopyToSpaceResultDetails"},objects.map((object,index)=>{const{type:type,id:id,name:name,icon:icon,conflict:conflict}=object;const pendingObjectRetry=props.retries.find(r=>r.type===type&&r.id===id);const isOverwritePending=Boolean(pendingObjectRetry===null||pendingObjectRetry===void 0?void 0:pendingObjectRetry.overwrite);const switchProps={show:conflict&&!props.conflictResolutionInProgress,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyDetail.overwriteSwitch",{defaultMessage:"Overwrite?"}),onChange:({target:{checked:checked}})=>{const filtered=props.retries.filter(r=>r.type!==type||r.id!==id);const{error:error}=conflict;if(!checked){props.onRetriesChange(filtered);if(isAmbiguousConflictError(error)){const value=error.destinations[0].id;onDestinationMapChange(new Map(destinationMap.set(`${type}:${id}`,value)))}}else{const destinationId=isAmbiguousConflictError(error)?destinationMap.get(`${type}:${id}`):error.destinationId;const retry={type:type,id:id,overwrite:true,...destinationId&&{destinationId:destinationId}};props.onRetriesChange([...filtered,retry])}}};const selectProps={options:conflict!==null&&conflict!==void 0&&conflict.error&&isAmbiguousConflictError(conflict.error)?conflict.error.destinations.map(destination=>{var _destination$title;const header=(_destination$title=destination.title)!==null&&_destination$title!==void 0?_destination$title:`${type} [id=${destination.id}]`;const lastUpdated=destination.updatedAt?external_kbnSharedDeps_Moment_default()(destination.updatedAt).fromNow():"never";return{value:destination.id,inputDisplay:destination.id,dropdownDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("strong",null,header),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"euiTextColor--subdued"},"ID: ",destination.id,external_kbnSharedDeps_React_default.a.createElement("br",null),"Last updated: ",lastUpdated)))}}):[],onChange:value=>{onDestinationMapChange(new Map(destinationMap.set(`${type}:${id}`,value)));const filtered=props.retries.filter(r=>r.type!==type||r.id!==id);const retry={type:type,id:id,overwrite:true,destinationId:value};props.onRetriesChange([...filtered,retry])}};const selectContainerClass=selectProps.options.length>0&&isOverwritePending?" spcCopyToSpaceResultDetails__selectControl-isOpen":"";return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:index},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false,key:index,alignItems:"center",gutterSize:"s",className:"spcCopyToSpaceResultDetails__row"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:getSavedObjectLabel(type)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{"aria-label":getSavedObjectLabel(type),type:icon,size:"s"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:5,className:"spcCopyToSpaceResultDetails__savedObjectName"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"eui-textTruncate",title:name},name))),switchProps.show&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:switchProps.label,compressed:true,checked:isOverwritePending,onChange:switchProps.onChange,"data-test-subj":`cts-overwrite-conflict-${type}:${id}`})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"spcCopyToSpaceResultDetails__statusIndicator",grow:false},external_kbnSharedDeps_React_default.a.createElement("div",{className:"eui-textRight"},external_kbnSharedDeps_React_default.a.createElement(CopyStatusIndicator,{summarizedCopyResult:props.summarizedCopyResult,object:object,pendingObjectRetry:pendingObjectRetry,conflictResolutionInProgress:props.conflictResolutionInProgress&&isOverwritePending})))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"spcCopyToSpaceResultDetails__selectControl"+selectContainerClass},external_kbnSharedDeps_React_default.a.createElement("div",{className:"spcCopyToSpaceResultDetails__selectControl__childWrapper"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperSelect"],{options:selectProps.options,valueOfSelected:destinationMap.get(`${type}:${id}`),onChange:selectProps.onChange,prepend:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyDetail.selectControlLabel",{defaultMessage:"Object ID"}),hasDividers:true,fullWidth:true,compressed:true}))))}))};const getInitialDestinationMap=objects=>objects.reduce((acc,{type:type,id:id,conflict:conflict})=>{if((conflict===null||conflict===void 0?void 0:conflict.error.type)==="ambiguous_conflict"){acc.set(`${type}:${id}`,conflict.error.destinations[0].id)}return acc},new Map);const SpaceResultProcessing=props=>{const{space:space}=props;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:`copyToSpace-${space.id}`,"data-test-subj":`cts-space-result-${space.id}`,className:"spcCopyToSpaceResult",buttonContent:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(space_avatar["a"],{space:space,size:"s"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,space.name))),extraAction:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],null)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],null))};const SpaceResult=props=>{const{space:space,summarizedCopyResult:summarizedCopyResult,retries:retries,onRetriesChange:onRetriesChange,conflictResolutionInProgress:conflictResolutionInProgress}=props;const{objects:objects}=summarizedCopyResult;const spaceHasPendingOverwrites=retries.some(r=>r.overwrite);const[destinationMap,setDestinationMap]=Object(external_kbnSharedDeps_React_["useState"])(getInitialDestinationMap(objects));const onDestinationMapChange=value=>{setDestinationMap(value||getInitialDestinationMap(objects))};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:`copyToSpace-${space.id}`,"data-test-subj":`cts-space-result-${space.id}`,className:"spcCopyToSpaceResult",buttonContent:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(space_avatar["a"],{space:space,size:"s"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,space.name))),extraAction:external_kbnSharedDeps_React_default.a.createElement(CopyStatusSummaryIndicator,{space:space,retries:retries,onRetriesChange:onRetriesChange,onDestinationMapChange:onDestinationMapChange,summarizedCopyResult:summarizedCopyResult,conflictResolutionInProgress:conflictResolutionInProgress&&spaceHasPendingOverwrites})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(SpaceCopyResultDetails,{summarizedCopyResult:summarizedCopyResult,space:space,retries:retries,onRetriesChange:onRetriesChange,destinationMap:destinationMap,onDestinationMapChange:onDestinationMapChange,conflictResolutionInProgress:conflictResolutionInProgress&&spaceHasPendingOverwrites}))};const renderCopyOptions=({createNewCopies:createNewCopies,overwrite:overwrite,includeRelated:includeRelated})=>{const createNewCopiesLabel=createNewCopies?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.createNewCopiesLabel",defaultMessage:"Create new objects with random IDs"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.dontCreateNewCopiesLabel",defaultMessage:"Check for existing objects"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiListGroup"],{className:"spcCopyToSpaceOptionsView",flush:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiListGroupItem"],{iconType:"copy",label:createNewCopiesLabel}),!createNewCopies&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiListGroupItem"],{iconType:overwrite?"check":"cross",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.overwriteLabel",defaultMessage:"Automatically overwrite conflicts"})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiListGroupItem"],{iconType:includeRelated?"check":"cross",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.includeRelatedLabel",defaultMessage:"Include related saved objects"})}))};const ProcessingCopyToSpace=props=>{function updateRetries(spaceId,updatedRetries){props.onRetriesChange({...props.retries,[spaceId]:updatedRetries})}return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"copy-to-space-processing"},renderCopyOptions(props.copyOptions),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyResultsLabel",defaultMessage:"Results"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),props.copyOptions.selectedSpaceIds.map(id=>{const space=props.spaces.find(s=>s.id===id);const spaceCopyResult=props.copyResult[space.id];const summarizedSpaceCopyResult=summarizeCopyResult(props.savedObjectTarget,spaceCopyResult);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:id},summarizedSpaceCopyResult.processing?external_kbnSharedDeps_React_default.a.createElement(SpaceResultProcessing,{space:space}):external_kbnSharedDeps_React_default.a.createElement(SpaceResult,{space:space,summarizedCopyResult:summarizedSpaceCopyResult,retries:props.retries[space.id]||[],onRetriesChange:retries=>updateRetries(space.id,retries),conflictResolutionInProgress:props.conflictResolutionInProgress}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}))};const isResolvableError=({error:{type:type}})=>["conflict","ambiguous_conflict","missing_references"].includes(type);const copy_to_space_flyout_footer_isUnresolvableError=failure=>!isResolvableError(failure);const CopyToSpaceFlyoutFooter=props=>{const{copyInProgress:copyInProgress,conflictResolutionInProgress:conflictResolutionInProgress,initialCopyFinished:initialCopyFinished,copyResult:copyResult,retries:retries}=props;let summarizedResults={successCount:0,pendingCount:0,skippedCount:0,errorCount:0};if(copyResult){summarizedResults=Object.entries(copyResult).reduce((acc,result)=>{const[spaceId,spaceResult]=result;let successCount=0;let pendingCount=0;let skippedCount=0;let errorCount=0;if(spaceResult.status==="success"){successCount=spaceResult.importCount}else{const uniqueResolvableErrors=spaceResult.failedImports.filter(isResolvableError).reduce((set,{obj:{type:type,id:id}})=>set.add(`${type}:${id}`),new Set);pendingCount=(retries[spaceId]||[]).length;skippedCount=uniqueResolvableErrors.size+spaceResult.successfulImports.length-pendingCount;errorCount=spaceResult.failedImports.filter(copy_to_space_flyout_footer_isUnresolvableError).length}return{loading:false,successCount:acc.successCount+successCount,pendingCount:acc.pendingCount+pendingCount,skippedCount:acc.skippedCount+skippedCount,errorCount:acc.errorCount+errorCount}},summarizedResults)}const getButton=()=>{let actionButton;if(initialCopyFinished){const hasPendingRetries=summarizedResults.pendingCount>0;const buttonText=hasPendingRetries?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.finishPendingOverwritesCopyToSpacesButton",defaultMessage:"Copy {overwriteCount} objects",values:{overwriteCount:summarizedResults.pendingCount}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.finishCopyToSpacesButton",defaultMessage:"Finish"});actionButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,isLoading:conflictResolutionInProgress,"aria-live":"assertive","aria-label":conflictResolutionInProgress?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.inProgressButtonLabel",{defaultMessage:"Copy is in progress. Please wait."}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.finishedButtonLabel",{defaultMessage:"Copy finished."}),onClick:()=>props.onCopyFinish(),"data-test-subj":"cts-finish-button"},buttonText)}else{actionButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,isLoading:copyInProgress,onClick:()=>props.onCopyStart(),"data-test-subj":"cts-initiate-button",disabled:props.numberOfSelectedSpaces===0||copyInProgress},props.numberOfSelectedSpaces>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyToSpacesButton",defaultMessage:"Copy to {spaceCount} {spaceCount, plural, one {space} other {spaces}}",values:{spaceCount:props.numberOfSelectedSpaces}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.disabledCopyToSpacesButton",defaultMessage:"Copy"}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:()=>props.onClose(),"data-test-subj":"cts-cancel-button",disabled:copyInProgress&&!initialCopyFinished||conflictResolutionInProgress||summarizedResults.successCount>0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.cancelButton",defaultMessage:"Cancel"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},actionButton))};if(!copyInProgress){return getButton()}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{"data-test-subj":`cts-summary-success-count`,title:summarizedResults.successCount,titleSize:"s",titleColor:initialCopyFinished?"secondary":"subdued",isLoading:!initialCopyFinished,textAlign:"center",description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpaceFlyoutFooter.successCount",defaultMessage:"Copied"})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{"data-test-subj":`cts-summary-pending-count`,title:summarizedResults.pendingCount,titleSize:"s",titleColor:summarizedResults.pendingCount>0?"primary":"subdued",isLoading:!initialCopyFinished,textAlign:"center",description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpaceFlyoutFooter.pendingCount",defaultMessage:"Pending"})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{"data-test-subj":`cts-summary-skipped-count`,title:summarizedResults.skippedCount,titleSize:"s",titleColor:summarizedResults.skippedCount>0?"primary":"subdued",isLoading:!initialCopyFinished,textAlign:"center",description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpaceFlyoutFooter.skippedCount",defaultMessage:"Skipped"})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{"data-test-subj":`cts-summary-error-count`,title:summarizedResults.errorCount,titleSize:"s",titleColor:summarizedResults.errorCount>0?"danger":"subdued",isLoading:!initialCopyFinished,textAlign:"center",description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpaceFlyoutFooter.errorCount",defaultMessage:"Errors"})}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],null),getButton())};var selectable_spaces_control=__webpack_require__(79);const SelectableSpacesControl=props=>{if(props.spaces.length===0){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],null)}const disabledIndicator=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.selectSpacesControl.disabledTooltip",defaultMessage:"The object already exists in this space."}),position:"left",type:"iInCircle"});const options=props.spaces.map(space=>{const disabled=props.disabledSpaceIds.has(space.id);return{label:space.name,prepend:external_kbnSharedDeps_React_default.a.createElement(space_avatar["a"],{space:space,size:"s"}),append:disabled?disabledIndicator:null,checked:props.selectedSpaceIds.includes(space.id)?"on":undefined,disabled:disabled,["data-space-id"]:space.id,["data-test-subj"]:`cts-space-selector-row-${space.id}`}});function updateSelectedSpaces(selectedOptions){if(props.disabled)return;const selectedSpaceIds=selectedOptions.filter(opt=>opt.checked).map(opt=>opt["data-space-id"]);props.onChange(selectedSpaceIds)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelectable"],{options:options,onChange:newOptions=>updateSelectedSpaces(newOptions),listProps:{bordered:true,rowHeight:40,className:"spcCopyToSpace__spacesList","data-test-subj":"cts-form-space-selector"},searchable:options.length>6},(list,search)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,search,list))};const createNewCopiesDisabled={id:"createNewCopiesDisabled",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.createNewCopies.disabledTitle",{defaultMessage:"Check for existing objects"}),tooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.createNewCopies.disabledText",{defaultMessage:"Check if objects were previously copied or imported into the space."})};const createNewCopiesEnabled={id:"createNewCopiesEnabled",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.createNewCopies.enabledTitle",{defaultMessage:"Create new objects with random IDs"}),tooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.createNewCopies.enabledText",{defaultMessage:"Use this option to create one or more copies of the object in the same space."})};const overwriteEnabled={id:"overwriteEnabled",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.overwrite.enabledLabel",{defaultMessage:"Automatically overwrite conflicts"})};const overwriteDisabled={id:"overwriteDisabled",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.overwrite.disabledLabel",{defaultMessage:"Request action on conflict"})};const copy_mode_control_includeRelated={id:"includeRelated",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.includeRelated.title",{defaultMessage:"Include related objects"}),tooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.includeRelated.text",{defaultMessage:"Copy this object and its related objects. For dashboards, related visualizations, index patterns, and saved searches are also copied."})};const copyOptionsTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.copyOptionsTitle",{defaultMessage:"Copy options"});const relationshipOptionsTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.relationshipOptionsTitle",{defaultMessage:"Relationship"});const createLabel=({text:text,tooltip:tooltip})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,text)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:tooltip,position:"left",type:"iInCircle"})));const CopyModeControl=({initialValues:initialValues,updateSelection:updateSelection})=>{const[createNewCopies,setCreateNewCopies]=Object(external_kbnSharedDeps_React_["useState"])(initialValues.createNewCopies);const[overwrite,setOverwrite]=Object(external_kbnSharedDeps_React_["useState"])(initialValues.overwrite);const onChange=partial=>{if(partial.createNewCopies!==undefined){setCreateNewCopies(partial.createNewCopies)}else if(partial.overwrite!==undefined){setOverwrite(partial.overwrite)}updateSelection({createNewCopies:createNewCopies,overwrite:overwrite,...partial})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormFieldset"],{legend:{children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("span",null,copyOptionsTitle))}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckableCard"],{id:createNewCopiesEnabled.id,label:createLabel(createNewCopiesEnabled),checked:createNewCopies,onChange:()=>onChange({createNewCopies:true})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckableCard"],{id:createNewCopiesDisabled.id,label:createLabel(createNewCopiesDisabled),checked:!createNewCopies,onChange:()=>onChange({createNewCopies:false})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiRadioGroup"],{options:[overwriteEnabled,overwriteDisabled],idSelected:overwrite?overwriteEnabled.id:overwriteDisabled.id,onChange:id=>onChange({overwrite:id===overwriteEnabled.id}),disabled:createNewCopies,"data-test-subj":"cts-copyModeControl-overwriteRadioGroup"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormFieldset"],{legend:{children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("span",null,relationshipOptionsTitle))}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckableCard"],{id:copy_mode_control_includeRelated.id,label:createLabel(copy_mode_control_includeRelated),checkableType:"checkbox",checked:true,onChange:()=>{},disabled:true})))};const CopyToSpaceForm=props=>{const{savedObjectTarget:savedObjectTarget,spaces:spaces,onUpdate:onUpdate,copyOptions:copyOptions}=props;const getDisabledSpaceIds=createNewCopies=>createNewCopies?new Set:savedObjectTarget.namespaces.reduce((acc,cur)=>acc.add(cur),new Set);const changeCopyMode=({createNewCopies:createNewCopies,overwrite:overwrite})=>{const disabled=getDisabledSpaceIds(createNewCopies);const selectedSpaceIds=copyOptions.selectedSpaceIds.filter(x=>!disabled.has(x));onUpdate({...copyOptions,createNewCopies:createNewCopies,overwrite:overwrite,selectedSpaceIds:selectedSpaceIds})};const setSelectedSpaceIds=selectedSpaceIds=>onUpdate({...copyOptions,selectedSpaceIds:selectedSpaceIds});return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"copy-to-space-form"},external_kbnSharedDeps_React_default.a.createElement(CopyModeControl,{initialValues:copyOptions,updateSelection:newValues=>changeCopyMode(newValues)}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.selectSpacesLabel",defaultMessage:"Select spaces"}))),fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(SelectableSpacesControl,{spaces:spaces,selectedSpaceIds:copyOptions.selectedSpaceIds,disabledSpaceIds:getDisabledSpaceIds(copyOptions.createNewCopies),onChange:selection=>setSelectedSpaceIds(selection)})))};const INCLUDE_RELATED_DEFAULT=true;const CREATE_NEW_COPIES_DEFAULT=true;const OVERWRITE_ALL_DEFAULT=true;const CopySavedObjectsToSpaceFlyout=props=>{const{onClose:onClose,savedObjectTarget:object,spacesManager:spacesManager,toastNotifications:toastNotifications}=props;const savedObjectTarget=Object(external_kbnSharedDeps_React_["useMemo"])(()=>({type:object.type,id:object.id,namespaces:object.namespaces,icon:object.icon||"apps",title:object.title||`${object.type} [id=${object.id}]`}),[object]);const[copyOptions,setCopyOptions]=Object(external_kbnSharedDeps_React_["useState"])({includeRelated:INCLUDE_RELATED_DEFAULT,createNewCopies:CREATE_NEW_COPIES_DEFAULT,overwrite:OVERWRITE_ALL_DEFAULT,selectedSpaceIds:[]});const[{isLoading:isLoading,spaces:spaces},setSpacesState]=Object(external_kbnSharedDeps_React_["useState"])({isLoading:true,spaces:[]});Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const getSpaces=spacesManager.getSpaces({includeAuthorizedPurposes:true});const getActiveSpace=spacesManager.getActiveSpace();Promise.all([getSpaces,getActiveSpace]).then(([allSpaces,activeSpace])=>{setSpacesState({isLoading:false,spaces:allSpaces.filter(({id:id,authorizedPurposes:authorizedPurposes})=>id!==activeSpace.id&&(authorizedPurposes===null||authorizedPurposes===void 0?void 0:authorizedPurposes.copySavedObjectsIntoSpace)!==false)})}).catch(e=>{toastNotifications.addError(e,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.spacesLoadErrorTitle",{defaultMessage:"Error loading available spaces"})})})},[spacesManager,toastNotifications]);const[copyInProgress,setCopyInProgress]=Object(external_kbnSharedDeps_React_["useState"])(false);const[conflictResolutionInProgress,setConflictResolutionInProgress]=Object(external_kbnSharedDeps_React_["useState"])(false);const[copyResult,setCopyResult]=Object(external_kbnSharedDeps_React_["useState"])({});const[retries,setRetries]=Object(external_kbnSharedDeps_React_["useState"])({});const initialCopyFinished=Object.values(copyResult).length>0;const onRetriesChange=updatedRetries=>{setRetries(updatedRetries)};async function startCopy(){setCopyInProgress(true);setCopyResult({});try{const copySavedObjectsResult=await spacesManager.copySavedObjects([{type:savedObjectTarget.type,id:savedObjectTarget.id}],copyOptions.selectedSpaceIds,copyOptions.includeRelated,copyOptions.createNewCopies,copyOptions.overwrite);const processedResult=Object(external_kbnSharedDeps_Lodash_["mapValues"])(copySavedObjectsResult,savedObjectsManagement_public_["processImportResponse"]);setCopyResult(processedResult);const getAutomaticRetries=response=>{const{failedImports:failedImports,successfulImports:successfulImports}=response;if(!failedImports.length){return[]}const nonMissingReferencesFailures=failedImports.filter(({error:error})=>error.type!=="missing_references").reduce((acc,{obj:{type:type,id:id}})=>acc.add(`${type}:${id}`),new Set);const missingReferencesToRetry=failedImports.filter(({obj:{type:type,id:id},error:error})=>error.type==="missing_references"&&!nonMissingReferencesFailures.has(`${type}:${id}`));return[...successfulImports.map(({type:type,id:id,overwrite:overwrite,destinationId:destinationId,createNewCopy:createNewCopy})=>({type:type,id:id,overwrite:overwrite===true,destinationId:destinationId,createNewCopy:createNewCopy})),...missingReferencesToRetry.map(({obj:{type:type,id:id}})=>({type:type,id:id,overwrite:false,ignoreMissingReferences:true}))]};const automaticRetries=Object(external_kbnSharedDeps_Lodash_["mapValues"])(processedResult,getAutomaticRetries);setRetries(automaticRetries)}catch(e){setCopyInProgress(false);toastNotifications.addError(e,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyErrorTitle",{defaultMessage:"Error copying saved object"})})}}async function finishCopy(){const needsErrorResolution=Object.values(retries).some(spaceRetry=>spaceRetry.length);if(needsErrorResolution){setConflictResolutionInProgress(true);try{await spacesManager.resolveCopySavedObjectsErrors([{type:savedObjectTarget.type,id:savedObjectTarget.id}],retries,copyOptions.includeRelated,copyOptions.createNewCopies);toastNotifications.addSuccess(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.resolveCopySuccessTitle",{defaultMessage:"Copy successful"}));onClose()}catch(e){setCopyInProgress(false);toastNotifications.addError(e,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.resolveCopyErrorTitle",{defaultMessage:"Error resolving saved object conflicts"})})}}else{onClose()}}const getFlyoutBody=()=>{if(isLoading){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],null)}if(spaces.length===0){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.noSpacesBody",defaultMessage:"There are no eligible spaces to copy into."})),title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.noSpacesTitle",defaultMessage:"No spaces available"}))})}if(!copyInProgress){return external_kbnSharedDeps_React_default.a.createElement(CopyToSpaceForm,{savedObjectTarget:savedObjectTarget,spaces:spaces,copyOptions:copyOptions,onUpdate:setCopyOptions})}return external_kbnSharedDeps_React_default.a.createElement(ProcessingCopyToSpace,{savedObjectTarget:savedObjectTarget,copyInProgress:copyInProgress,conflictResolutionInProgress:conflictResolutionInProgress,copyResult:copyResult,spaces:spaces,copyOptions:copyOptions,retries:retries,onRetriesChange:onRetriesChange})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{onClose:onClose,maxWidth:600,"data-test-subj":"copy-to-space-flyout"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{size:"m",type:"copy"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpaceFlyoutHeader",defaultMessage:"Copy to space"})))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:savedObjectTarget.icon})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,savedObjectTarget.title)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}),getFlyoutBody()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],null,external_kbnSharedDeps_React_default.a.createElement(CopyToSpaceFlyoutFooter,{copyInProgress:copyInProgress,conflictResolutionInProgress:conflictResolutionInProgress,initialCopyFinished:initialCopyFinished,copyResult:copyResult,numberOfSelectedSpaces:copyOptions.selectedSpaceIds.length,retries:retries,onClose:onClose,onCopyStart:startCopy,onCopyFinish:finishCopy})))};function copy_saved_objects_to_space_action_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class copy_saved_objects_to_space_action_CopyToSpaceSavedObjectsManagementAction extends savedObjectsManagement_public_["SavedObjectsManagementAction"]{constructor(spacesManager,notifications){super();this.spacesManager=spacesManager;this.notifications=notifications;copy_saved_objects_to_space_action_defineProperty(this,"id","copy_saved_objects_to_space");copy_saved_objects_to_space_action_defineProperty(this,"euiAction",{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.actionTitle",{defaultMessage:"Copy to space"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.actionDescription",{defaultMessage:"Make a copy of this saved object in one or more spaces"}),icon:"copy",type:"icon",available:object=>object.meta.namespaceType!=="agnostic",onClick:object=>{this.start(object)}});copy_saved_objects_to_space_action_defineProperty(this,"render",()=>{var _this$record$namespac;if(!this.record){throw new Error("No record available! `render()` was likely called before `start()`.")}const savedObjectTarget={type:this.record.type,id:this.record.id,namespaces:(_this$record$namespac=this.record.namespaces)!==null&&_this$record$namespac!==void 0?_this$record$namespac:[],title:this.record.meta.title,icon:this.record.meta.icon};return external_kbnSharedDeps_React_default.a.createElement(CopySavedObjectsToSpaceFlyout,{onClose:this.onClose,savedObjectTarget:savedObjectTarget,spacesManager:this.spacesManager,toastNotifications:this.notifications.toasts})});copy_saved_objects_to_space_action_defineProperty(this,"onClose",()=>{this.finish()})}}class copy_saved_objects_to_space_service_CopySavedObjectsToSpaceService{setup({spacesManager:spacesManager,savedObjectsManagementSetup:savedObjectsManagementSetup,notificationsSetup:notificationsSetup}){const action=new copy_saved_objects_to_space_action_CopyToSpaceSavedObjectsManagementAction(spacesManager,notificationsSetup);savedObjectsManagementSetup.actions.register(action)}}function share_saved_objects_to_space_action_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class share_saved_objects_to_space_action_ShareToSpaceSavedObjectsManagementAction extends savedObjectsManagement_public_["SavedObjectsManagementAction"]{constructor(spacesApiUi){super();this.spacesApiUi=spacesApiUi;share_saved_objects_to_space_action_defineProperty(this,"id","share_saved_objects_to_space");share_saved_objects_to_space_action_defineProperty(this,"euiAction",{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.actionTitle",{defaultMessage:"Share to space"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.actionDescription",{defaultMessage:"Share this saved object to one or more spaces"}),icon:"share",type:"icon",available:object=>{const hasCapability=!this.actionContext||!!this.actionContext.capabilities.savedObjectsManagement.shareIntoSpace;return object.meta.namespaceType==="multiple"&&hasCapability},onClick:object=>{this.isDataChanged=false;this.start(object)}});share_saved_objects_to_space_action_defineProperty(this,"refreshOnFinish",()=>this.isDataChanged);share_saved_objects_to_space_action_defineProperty(this,"isDataChanged",false);share_saved_objects_to_space_action_defineProperty(this,"render",()=>{var _this$record$namespac;if(!this.record){throw new Error("No record available! `render()` was likely called before `start()`.")}const savedObjectTarget={type:this.record.type,id:this.record.id,namespaces:(_this$record$namespac=this.record.namespaces)!==null&&_this$record$namespac!==void 0?_this$record$namespac:[],title:this.record.meta.title,icon:this.record.meta.icon};const{ShareToSpaceFlyout:ShareToSpaceFlyout}=this.spacesApiUi.components;return external_kbnSharedDeps_React_default.a.createElement(ShareToSpaceFlyout,{savedObjectTarget:savedObjectTarget,flyoutIcon:"share",onUpdate:()=>this.isDataChanged=true,onClose:this.onClose,enableCreateCopyCallout:true,enableCreateNewSpaceLink:true})});share_saved_objects_to_space_action_defineProperty(this,"onClose",()=>{this.finish()})}}class share_saved_objects_to_space_service_ShareSavedObjectsToSpaceService{setup({savedObjectsManagementSetup:savedObjectsManagementSetup,spacesApiUi:spacesApiUi}){const action=new share_saved_objects_to_space_action_ShareToSpaceSavedObjectsManagementAction(spacesApiUi);savedObjectsManagementSetup.actions.register(action)}}var constants=__webpack_require__(6);var share_to_space_form=__webpack_require__(88);var share_mode_control=__webpack_require__(97);var components_selectable_spaces_control=__webpack_require__(106);const NoSpacesAvailable=props=>{const{capabilities:capabilities,getUrlForApp:getUrlForApp}=props.application;const canCreateNewSpaces=capabilities.spaces.manage;if(!canCreateNewSpaces){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.shareToSpace.noAvailableSpaces.canCreateNewSpace.text",defaultMessage:"You can {createANewSpaceLink} for sharing your objects.",values:{createANewSpaceLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{"data-test-subj":"sts-new-space-link",href:getUrlForApp("management",{path:"kibana/spaces/create"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.shareToSpace.noAvailableSpaces.canCreateNewSpace.linkText",defaultMessage:"create a new space"}))}})))};function documentation_links_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class DocumentationLinksService{constructor(docLinks){documentation_links_defineProperty(this,"kbnPrivileges",void 0);this.kbnPrivileges=`${docLinks.links.security.kibanaPrivileges}`}getKibanaPrivilegesDocUrl(){return`${this.kbnPrivileges}`}}const{useContext:useContext,createElement:createElement,createContext:createContext}=external_kbnSharedDeps_React_;const context_context=createContext({});const useSpaces=()=>useContext(context_context);const createSpacesReactContext=(services,spacesManager,shareToSpacesDataPromise)=>{const value={spacesManager:spacesManager,shareToSpacesDataPromise:shareToSpacesDataPromise,services:services};const Provider=({children:children})=>createElement(context_context.Provider,{value:value,children:children});return{value:value,Provider:Provider,Consumer:context_context.Consumer}};async function getShareToSpacesData(spacesManager,feature){const spaces=await spacesManager.getSpaces({includeAuthorizedPurposes:true});const activeSpace=await spacesManager.getActiveSpace();const spacesMap=spaces.map(({authorizedPurposes:authorizedPurposes,disabledFeatures:disabledFeatures,...space})=>{const isActiveSpace=space.id===activeSpace.id;const cannotShareToSpace=(authorizedPurposes===null||authorizedPurposes===void 0?void 0:authorizedPurposes.shareSavedObjectsIntoSpace)===false;const isFeatureDisabled=feature!==undefined&&disabledFeatures.includes(feature);return{...space,...isActiveSpace&&{isActiveSpace:isActiveSpace},...cannotShareToSpace&&{cannotShareToSpace:cannotShareToSpace},...isFeatureDisabled&&{isFeatureDisabled:isFeatureDisabled}}}).reduce((acc,cur)=>acc.set(cur.id,cur),new Map);return{spacesMap:spacesMap,activeSpaceId:activeSpace.id}}const SpacesContextWrapper=props=>{const{spacesManager:spacesManager,getStartServices:getStartServices,feature:feature,children:children}=props;const[context,setContext]=Object(external_kbnSharedDeps_React_["useState"])();const shareToSpacesDataPromise=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getShareToSpacesData(spacesManager,feature),[spacesManager,feature]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{getStartServices().then(([coreStart])=>{const{application:application,docLinks:docLinks,notifications:notifications}=coreStart;const services={application:application,docLinks:docLinks,notifications:notifications};setContext(createSpacesReactContext(services,spacesManager,shareToSpacesDataPromise))})},[getStartServices,shareToSpacesDataPromise,spacesManager]);if(!context){return null}return external_kbnSharedDeps_React_default.a.createElement(context.Provider,null,children)};const getSpacesContextWrapper=internalProps=>({children:children,...props})=>external_kbnSharedDeps_React_default.a.createElement(SpacesContextWrapper,{...internalProps,...props,children:children});const ROW_HEIGHT=40;const APPEND_ACTIVE_SPACE=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"hollow"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.currentSpaceBadge",{defaultMessage:"Current"}));const APPEND_CANNOT_SELECT=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.partiallyAuthorizedSpaceTooltip.unchecked",{defaultMessage:"You need additional privileges to select this space."}),position:"left",type:"iInCircle"});const APPEND_CANNOT_DESELECT=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.partiallyAuthorizedSpaceTooltip.checked",{defaultMessage:"You need additional privileges to deselect this space."}),position:"left",type:"iInCircle"});const APPEND_FEATURE_IS_DISABLED=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.featureIsDisabledTooltip",{defaultMessage:"This feature is disabled in this space."}),position:"left",type:"alert",color:"warning"});const selectable_spaces_control_SelectableSpacesControl=props=>{const{spaces:spaces,shareOptions:shareOptions,onChange:onChange,enableCreateNewSpaceLink:enableCreateNewSpaceLink,enableSpaceAgnosticBehavior:enableSpaceAgnosticBehavior}=props;const{services:services}=useSpaces();const{application:application,docLinks:docLinks}=services;const{selectedSpaceIds:selectedSpaceIds,initiallySelectedSpaceIds:initiallySelectedSpaceIds}=shareOptions;const activeSpaceId=!enableSpaceAgnosticBehavior&&spaces.find(space=>space.isActiveSpace).id;const isGlobalControlChecked=selectedSpaceIds.includes(constants["a"]);const options=spaces.filter(({id:id,isFeatureDisabled:isFeatureDisabled})=>!isFeatureDisabled||initiallySelectedSpaceIds.includes(id)).sort(createSpacesComparator(activeSpaceId)).map(space=>{const checked=selectedSpaceIds.includes(space.id);const additionalProps=getAdditionalProps(space,activeSpaceId,checked);return{label:space.name,prepend:external_kbnSharedDeps_React_default.a.createElement(space_avatar["a"],{space:space,size:"s"}),checked:checked?"on":undefined,["data-space-id"]:space.id,["data-test-subj"]:`sts-space-selector-row-${space.id}`,...isGlobalControlChecked&&{disabled:true},...additionalProps}});function updateSelectedSpaces(spaceOptions){const selectedOptions=spaceOptions.filter(x=>x.checked&&x["data-space-id"]!==activeSpaceId).map(x=>x["data-space-id"]);const updatedSpaceIds=[...selectedOptions,...selectedSpaceIds.filter(x=>x===constants["f"])];onChange(updatedSpaceIds)}const getUnknownSpacesLabel=()=>{const count=selectedSpaceIds.filter(id=>id===constants["f"]).length;if(!count){return null}const kibanaPrivilegesUrl=new DocumentationLinksService(docLinks).getKibanaPrivilegesDocUrl();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.shareToSpace.unknownSpacesLabel.text",defaultMessage:"To view hidden spaces, you need {additionalPrivilegesLink}.",values:{additionalPrivilegesLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:kibanaPrivilegesUrl,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.shareToSpace.unknownSpacesLabel.additionalPrivilegesLink",defaultMessage:"additional privileges"}))}})))};const getNoSpacesAvailable=()=>{if(enableCreateNewSpaceLink&&spaces.length<2){return external_kbnSharedDeps_React_default.a.createElement(NoSpacesAvailable,{application:application})}return null};const selectedCountPad=enableSpaceAgnosticBehavior?0:1;const selectedCount=selectedSpaceIds.filter(id=>id!==constants["a"]&&id!==constants["f"]).length+selectedCountPad;const hiddenCount=selectedSpaceIds.filter(id=>id===constants["f"]).length;const selectSpacesLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.shareModeControl.selectSpacesLabel",{defaultMessage:"Select spaces"});const selectedSpacesLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.shareModeControl.selectedCountLabel",{defaultMessage:"{selectedCount} selected",values:{selectedCount:selectedCount}});const hiddenSpacesLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.shareModeControl.hiddenCountLabel",{defaultMessage:"+{hiddenCount} hidden",values:{hiddenCount:hiddenCount}});const hiddenSpaces=hiddenCount?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},hiddenSpacesLabel):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:selectSpacesLabel,labelAppend:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"column",gutterSize:"none",alignItems:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},selectedSpacesLabel)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},hiddenSpaces)),fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelectable"],{options:options,onChange:newOptions=>updateSelectedSpaces(newOptions),listProps:{bordered:true,rowHeight:ROW_HEIGHT,className:"spcShareToSpace__spacesList","data-test-subj":"sts-form-space-selector"},height:ROW_HEIGHT*3.5,searchable:options.length>6},(list,search)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,search,list)),getUnknownSpacesLabel(),getNoSpacesAvailable()))};function getAdditionalProps(space,activeSpaceId,checked){if(space.id===activeSpaceId){return{append:APPEND_ACTIVE_SPACE,disabled:true,checked:"on"}}if(space.cannotShareToSpace){return{append:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,checked?APPEND_CANNOT_DESELECT:APPEND_CANNOT_SELECT,space.isFeatureDisabled?APPEND_FEATURE_IS_DISABLED:null),disabled:true}}if(space.isFeatureDisabled){return{append:APPEND_FEATURE_IS_DISABLED}}}function createSpacesComparator(activeSpaceId){return(a,b)=>{if(a.id===activeSpaceId){return-1}if(b.id===activeSpaceId){return 1}if(a.isFeatureDisabled!==b.isFeatureDisabled){return a.isFeatureDisabled?1:-1}return 0}}function share_mode_control_createLabel({title:title,text:text,disabled:disabled,tooltip:tooltip}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,title)),tooltip&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:tooltip,position:"left",type:"iInCircle"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:disabled?undefined:"subdued",size:"s"},text))}const ShareModeControl=props=>{const{spaces:spaces,objectNoun:objectNoun,canShareToAllSpaces:canShareToAllSpaces,shareOptions:shareOptions,onChange:onChange,enableCreateNewSpaceLink:enableCreateNewSpaceLink,enableSpaceAgnosticBehavior:enableSpaceAgnosticBehavior}=props;const{services:services}=useSpaces();const{docLinks:docLinks}=services;if(spaces.length===0){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],null)}const{selectedSpaceIds:selectedSpaceIds}=shareOptions;const isGlobalControlChecked=selectedSpaceIds.includes(constants["a"]);const shareToAllSpaces={id:"shareToAllSpaces",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.shareModeControl.shareToAllSpaces.title",{defaultMessage:"All spaces"}),text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.shareModeControl.shareToAllSpaces.text",{defaultMessage:"Make {objectNoun} available in all current and future spaces.",values:{objectNoun:objectNoun}}),...!canShareToAllSpaces&&{tooltip:isGlobalControlChecked?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.shareModeControl.shareToAllSpaces.cannotUncheckTooltip",{defaultMessage:"You need additional privileges to change this option."}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.shareModeControl.shareToAllSpaces.cannotCheckTooltip",{defaultMessage:"You need additional privileges to use this option."})},disabled:!canShareToAllSpaces};const shareToExplicitSpaces={id:"shareToExplicitSpaces",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.shareModeControl.shareToExplicitSpaces.title",{defaultMessage:"Select spaces"}),text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.shareModeControl.shareToExplicitSpaces.text",{defaultMessage:"Make {objectNoun} available in selected spaces only.",values:{objectNoun:objectNoun}}),disabled:!canShareToAllSpaces&&isGlobalControlChecked};const toggleShareOption=allSpaces=>{const updatedSpaceIds=allSpaces?[constants["a"],...selectedSpaceIds]:selectedSpaceIds.filter(id=>id!==constants["a"]);onChange(updatedSpaceIds)};const getPrivilegeWarning=()=>{if(!shareToExplicitSpaces.disabled){return null}const kibanaPrivilegesUrl=new DocumentationLinksService(docLinks).getKibanaPrivilegesDocUrl();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{size:"s",iconType:"help",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.shareToSpace.privilegeWarningTitle",defaultMessage:"Additional privileges required"}),color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.shareToSpace.privilegeWarningBody",defaultMessage:"To edit the spaces for this {objectNoun}, you need {readAndWritePrivilegesLink} in all spaces.",values:{objectNoun:objectNoun,readAndWritePrivilegesLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:kibanaPrivilegesUrl,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.shareToSpace.privilegeWarningLink",defaultMessage:"read and write privileges"}))}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,getPrivilegeWarning(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckableCard"],{id:shareToExplicitSpaces.id,label:share_mode_control_createLabel(shareToExplicitSpaces),checked:!isGlobalControlChecked,onChange:()=>toggleShareOption(false),disabled:shareToExplicitSpaces.disabled},external_kbnSharedDeps_React_default.a.createElement(selectable_spaces_control_SelectableSpacesControl,{spaces:spaces,shareOptions:shareOptions,onChange:onChange,enableCreateNewSpaceLink:enableCreateNewSpaceLink,enableSpaceAgnosticBehavior:enableSpaceAgnosticBehavior})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckableCard"],{id:shareToAllSpaces.id,label:share_mode_control_createLabel(shareToAllSpaces),checked:isGlobalControlChecked,onChange:()=>toggleShareOption(true),disabled:shareToAllSpaces.disabled}))};const ShareToSpaceForm=props=>{const{spaces:spaces,objectNoun:objectNoun,onUpdate:onUpdate,shareOptions:shareOptions,showCreateCopyCallout:showCreateCopyCallout,canShareToAllSpaces:canShareToAllSpaces,makeCopy:makeCopy,enableCreateNewSpaceLink:enableCreateNewSpaceLink,enableSpaceAgnosticBehavior:enableSpaceAgnosticBehavior}=props;const setSelectedSpaceIds=selectedSpaceIds=>onUpdate({...shareOptions,selectedSpaceIds:selectedSpaceIds});const createCopyCallout=showCreateCopyCallout?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{size:"s",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.shareToSpace.shareWarningTitle",defaultMessage:"Changes are synchronized across spaces"}),color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.shareToSpace.shareWarningBody",defaultMessage:"Your changes appear in each space you select. {makeACopyLink} if you don't want to synchronize your changes.",values:{makeACopyLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{"data-test-subj":"sts-copy-link",onClick:()=>makeCopy()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.shareToSpace.shareWarningLink",defaultMessage:"Make a copy"}))}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"})):null;return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"share-to-space-form"},createCopyCallout,external_kbnSharedDeps_React_default.a.createElement(ShareModeControl,{spaces:spaces,objectNoun:objectNoun,canShareToAllSpaces:canShareToAllSpaces,shareOptions:shareOptions,onChange:selection=>setSelectedSpaceIds(selection),enableCreateNewSpaceLink:enableCreateNewSpaceLink,enableSpaceAgnosticBehavior:enableSpaceAgnosticBehavior}))};const DEFAULT_OBJECT_NOUN=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.objectNoun",{defaultMessage:"object"});const ALL_SPACES_TARGET=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.allSpacesTarget",{defaultMessage:"all"});const arraysAreEqual=(a,b)=>a.every(x=>b.includes(x))&&b.every(x=>a.includes(x));function createDefaultChangeSpacesHandler(object,spacesManager,toastNotifications){return async(spacesToAdd,spacesToRemove)=>{const{type:type,id:id,title:title}=object;const toastTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.shareSuccessTitle",{values:{objectNoun:object.noun},defaultMessage:"Updated {objectNoun}"});const isSharedToAllSpaces=spacesToAdd.includes(constants["a"]);if(spacesToAdd.length>0){await spacesManager.shareSavedObjectAdd({type:type,id:id},spacesToAdd);const spaceTargets=isSharedToAllSpaces?ALL_SPACES_TARGET:`${spacesToAdd.length}`;const toastText=!isSharedToAllSpaces&&spacesToAdd.length===1?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.shareAddSuccessTextSingular",{defaultMessage:`'{object}' was added to 1 space.`,values:{object:title}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.shareAddSuccessTextPlural",{defaultMessage:`'{object}' was added to {spaceTargets} spaces.`,values:{object:title,spaceTargets:spaceTargets}});toastNotifications.addSuccess({title:toastTitle,text:toastText})}if(spacesToRemove.length>0){await spacesManager.shareSavedObjectRemove({type:type,id:id},spacesToRemove);const isUnsharedFromAllSpaces=spacesToRemove.includes(constants["a"]);const spaceTargets=isUnsharedFromAllSpaces?ALL_SPACES_TARGET:`${spacesToRemove.length}`;const toastText=!isUnsharedFromAllSpaces&&spacesToRemove.length===1?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.shareRemoveSuccessTextSingular",{defaultMessage:`'{object}' was removed from 1 space.`,values:{object:title}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.shareRemoveSuccessTextPlural",{defaultMessage:`'{object}' was removed from {spaceTargets} spaces.`,values:{object:title,spaceTargets:spaceTargets}});if(!isSharedToAllSpaces){toastNotifications.addSuccess({title:toastTitle,text:toastText})}}}}const ShareToSpaceFlyoutInternal=props=>{const{spacesManager:spacesManager,shareToSpacesDataPromise:shareToSpacesDataPromise,services:services}=useSpaces();const{notifications:notifications}=services;const toastNotifications=notifications.toasts;const{savedObjectTarget:object}=props;const savedObjectTarget=Object(external_kbnSharedDeps_React_["useMemo"])(()=>({type:object.type,id:object.id,namespaces:object.namespaces,icon:object.icon,title:object.title||`${object.type} [id=${object.id}]`,noun:object.noun||DEFAULT_OBJECT_NOUN}),[object]);const{flyoutIcon:flyoutIcon,flyoutTitle:flyoutTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.flyoutTitle",{defaultMessage:"Edit spaces for {objectNoun}",values:{objectNoun:savedObjectTarget.noun}}),enableCreateCopyCallout:enableCreateCopyCallout=false,enableCreateNewSpaceLink:enableCreateNewSpaceLink=false,behaviorContext:behaviorContext,changeSpacesHandler:changeSpacesHandler=createDefaultChangeSpacesHandler(savedObjectTarget,spacesManager,toastNotifications),onUpdate:onUpdate=(()=>null),onClose:onClose=(()=>null)}=props;const enableSpaceAgnosticBehavior=behaviorContext==="outside-space";const[shareOptions,setShareOptions]=Object(external_kbnSharedDeps_React_["useState"])({selectedSpaceIds:[],initiallySelectedSpaceIds:[]});const[canShareToAllSpaces,setCanShareToAllSpaces]=Object(external_kbnSharedDeps_React_["useState"])(false);const[showMakeCopy,setShowMakeCopy]=Object(external_kbnSharedDeps_React_["useState"])(false);const[{isLoading:isLoading,spaces:spaces},setSpacesState]=Object(external_kbnSharedDeps_React_["useState"])({isLoading:true,spaces:[]});Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const getPermissions=spacesManager.getShareSavedObjectPermissions(savedObjectTarget.type);Promise.all([shareToSpacesDataPromise,getPermissions]).then(([shareToSpacesData,permissions])=>{const activeSpaceId=!enableSpaceAgnosticBehavior&&shareToSpacesData.activeSpaceId;const selectedSpaceIds=savedObjectTarget.namespaces.filter(spaceId=>spaceId!==activeSpaceId);setShareOptions({selectedSpaceIds:selectedSpaceIds,initiallySelectedSpaceIds:selectedSpaceIds});setCanShareToAllSpaces(permissions.shareToAllSpaces);setSpacesState({isLoading:false,spaces:[...shareToSpacesData.spacesMap].map(([,spaceTarget])=>spaceTarget)})}).catch(e=>{toastNotifications.addError(e,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.spacesLoadErrorTitle",{defaultMessage:"Error loading available spaces"})})})},[savedObjectTarget,spacesManager,shareToSpacesDataPromise,toastNotifications,enableSpaceAgnosticBehavior]);const getSelectionChanges=()=>{if(!spaces.length){return{isSelectionChanged:false,spacesToAdd:[],spacesToRemove:[]}}const activeSpaceId=!enableSpaceAgnosticBehavior&&spaces.find(space=>space.isActiveSpace).id;const initialSelection=savedObjectTarget.namespaces.filter(spaceId=>spaceId!==activeSpaceId&&spaceId!==constants["f"]);const{selectedSpaceIds:selectedSpaceIds}=shareOptions;const filteredSelection=selectedSpaceIds.filter(x=>x!==constants["f"]);const initiallySharedToAllSpaces=initialSelection.includes(constants["a"]);const selectionIncludesAllSpaces=filteredSelection.includes(constants["a"]);const isSharedToAllSpaces=!initiallySharedToAllSpaces&&selectionIncludesAllSpaces;const isUnsharedFromAllSpaces=initiallySharedToAllSpaces&&!selectionIncludesAllSpaces;const selectedSpacesChanged=!selectionIncludesAllSpaces&&!arraysAreEqual(initialSelection,filteredSelection);const isSelectionChanged=isSharedToAllSpaces||isUnsharedFromAllSpaces||!isSharedToAllSpaces&&!isUnsharedFromAllSpaces&&selectedSpacesChanged;const selectedSpacesToAdd=filteredSelection.filter(spaceId=>!initialSelection.includes(spaceId));const selectedSpacesToRemove=initialSelection.filter(spaceId=>!filteredSelection.includes(spaceId));const activeSpaceArray=activeSpaceId?[activeSpaceId]:[];const spacesToAdd=isSharedToAllSpaces?[constants["a"]]:isUnsharedFromAllSpaces?[...activeSpaceArray,...selectedSpacesToAdd]:selectedSpacesToAdd;const spacesToRemove=isUnsharedFromAllSpaces||!isSharedToAllSpaces?selectedSpacesToRemove:[...activeSpaceArray,...initialSelection];return{isSelectionChanged:isSelectionChanged,spacesToAdd:spacesToAdd,spacesToRemove:spacesToRemove}};const{isSelectionChanged:isSelectionChanged,spacesToAdd:spacesToAdd,spacesToRemove:spacesToRemove}=getSelectionChanges();const[shareInProgress,setShareInProgress]=Object(external_kbnSharedDeps_React_["useState"])(false);async function startShare(){setShareInProgress(true);try{await changeSpacesHandler(spacesToAdd,spacesToRemove);onUpdate();onClose()}catch(e){setShareInProgress(false);toastNotifications.addError(e,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.shareErrorTitle",{values:{objectNoun:savedObjectTarget.noun},defaultMessage:"Error updating {objectNoun}"})})}}const getFlyoutBody=()=>{if(isLoading){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],null)}const showCreateCopyCallout=enableCreateCopyCallout&&spaces.length>1&&savedObjectTarget.namespaces.length===1&&!arraysAreEqual(savedObjectTarget.namespaces,[constants["a"]]);return external_kbnSharedDeps_React_default.a.createElement(ShareToSpaceForm,{spaces:spaces,objectNoun:savedObjectTarget.noun,shareOptions:shareOptions,onUpdate:setShareOptions,showCreateCopyCallout:showCreateCopyCallout,canShareToAllSpaces:canShareToAllSpaces,makeCopy:()=>setShowMakeCopy(true),enableCreateNewSpaceLink:enableCreateNewSpaceLink,enableSpaceAgnosticBehavior:enableSpaceAgnosticBehavior})};if(showMakeCopy){return external_kbnSharedDeps_React_default.a.createElement(CopySavedObjectsToSpaceFlyout,{onClose:onClose,savedObjectTarget:savedObjectTarget,spacesManager:spacesManager,toastNotifications:toastNotifications})}const isStartShareButtonDisabled=!isSelectionChanged||shareInProgress||enableSpaceAgnosticBehavior&&!shareOptions.selectedSpaceIds.length;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{onClose:onClose,maxWidth:500,"data-test-subj":"share-to-space-flyout"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"m"},flyoutIcon&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{size:"m",type:flyoutIcon})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,flyoutTitle))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"m"},savedObjectTarget.icon&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:savedObjectTarget.icon})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,savedObjectTarget.title)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}),getFlyoutBody()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:()=>onClose(),"data-test-subj":"sts-cancel-button",disabled:shareInProgress},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.shareToSpace.cancelButton",defaultMessage:"Cancel"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:()=>startShare(),"data-test-subj":"sts-initiate-button",disabled:isStartShareButtonDisabled},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.shareToSpace.shareToSpacesButton",defaultMessage:"Save & close"}))))))};const getShareToSpaceFlyoutComponent=()=>props=>external_kbnSharedDeps_React_default.a.createElement(ShareToSpaceFlyoutInternal,props);var target=__webpack_require__(16);const LegacyUrlConflictInternal=props=>{const{getStartServices:getStartServices,objectNoun:objectNoun=DEFAULT_OBJECT_NOUN,currentObjectId:currentObjectId,otherObjectId:otherObjectId,otherObjectPath:otherObjectPath}=props;const[applicationStart,setApplicationStart]=Object(external_kbnSharedDeps_React_["useState"])();const[isDismissed,setIsDismissed]=Object(external_kbnSharedDeps_React_["useState"])(false);const[appId,setAppId]=Object(external_kbnSharedDeps_React_["useState"])();Object(external_kbnSharedDeps_React_["useEffect"])(()=>{async function setup(){const[{application:application}]=await getStartServices();const appIdValue=await Object(target["firstValueFrom"])(application.currentAppId$);setApplicationStart(application);setAppId(appIdValue)}setup()},[getStartServices]);if(!applicationStart||!appId||isDismissed){return null}function clickLinkButton(){applicationStart.navigateToApp(appId,{path:otherObjectPath})}function clickDismissButton(){setIsDismissed(true)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"warning",iconType:"help",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.shareToSpace.legacyUrlConflictTitle",defaultMessage:"2 objects are associated with this URL"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.shareToSpace.legacyUrlConflictBody",defaultMessage:"You're currently looking at {objectNoun} [id={currentObjectId}]. A legacy URL for this page shows a different {objectNoun} [id={otherObjectId}].",values:{objectNoun:objectNoun,currentObjectId:currentObjectId,otherObjectId:otherObjectId}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"warning",size:"s",onClick:clickLinkButton,"data-test-subj":"legacy-url-conflict-go-to-other-button"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.shareToSpace.legacyUrlConflictLinkButton",defaultMessage:"Go to other {objectNoun}",values:{objectNoun:objectNoun}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{color:"warning",size:"s",onClick:clickDismissButton,"data-test-subj":"legacy-url-conflict-dismiss-button"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.shareToSpace.legacyUrlConflictDismissButton",defaultMessage:"Dismiss"})))))};const getLegacyUrlConflict=internalProps=>props=>external_kbnSharedDeps_React_default.a.createElement(LegacyUrlConflictInternal,{...internalProps,...props});function createRedirectLegacyUrl(getStartServices){return async function(path,objectNoun=DEFAULT_OBJECT_NOUN){const[{notifications:notifications,application:application}]=await getStartServices();const{currentAppId$:currentAppId$,navigateToApp:navigateToApp}=application;const appId=await Object(target["firstValueFrom"])(currentAppId$);const title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.redirectLegacyUrlToast.title",{defaultMessage:`We redirected you to a new URL`});const text=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.shareToSpace.redirectLegacyUrlToast.text",{defaultMessage:`The {objectNoun} you're looking for has a new location. Use this URL from now on.`,values:{objectNoun:objectNoun}});notifications.toasts.addInfo({title:title,text:text});await navigateToApp(appId,{replace:true,path:path})}}const AdvancedSettingsSubtitle=props=>{const[activeSpace,setActiveSpace]=Object(external_kbnSharedDeps_React_["useState"])(null);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{props.getActiveSpace().then(space=>setActiveSpace(space))},[props]);if(!activeSpace)return null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"primary",iconType:"spacesApp",title:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.advancedSettingsSubtitle.applyingSettingsOnPageToSpaceDescription",defaultMessage:"The settings on this page apply to the {spaceName} space, unless otherwise specified.",values:{spaceName:external_kbnSharedDeps_React_default.a.createElement("strong",null,activeSpace.name)}}))}))};const AdvancedSettingsTitle=props=>{const[activeSpace,setActiveSpace]=Object(external_kbnSharedDeps_React_["useState"])(null);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{props.getActiveSpace().then(space=>setActiveSpace(space))},[props]);if(!activeSpace)return null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",responsive:false,alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(space_avatar["a"],{space:activeSpace})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{marginLeft:"10px"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"managementSettingsTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.advancedSettingsTitle.settingsTitle",defaultMessage:"Settings"})))))};class advanced_settings_service_AdvancedSettingsService{setup({getActiveSpace:getActiveSpace,componentRegistry:componentRegistry}){const PageTitle=()=>external_kbnSharedDeps_React_default.a.createElement(AdvancedSettingsTitle,{getActiveSpace:getActiveSpace});const SubTitle=()=>external_kbnSharedDeps_React_default.a.createElement(AdvancedSettingsSubtitle,{getActiveSpace:getActiveSpace});componentRegistry.register(componentRegistry.componentType.PAGE_TITLE_COMPONENT,PageTitle,true);componentRegistry.register(componentRegistry.componentType.PAGE_SUBTITLE_COMPONENT,SubTitle,true)}}var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(11);var kibanaReact_public_=__webpack_require__(10);var confirm_delete_modal=__webpack_require__(135);function confirm_delete_modal_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class confirm_delete_modal_ConfirmDeleteModalUI extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);confirm_delete_modal_defineProperty(this,"state",{confirmSpaceName:"",error:null,deleteInProgress:false,isDeletingCurrentSpace:false});confirm_delete_modal_defineProperty(this,"onSpaceNameChange",e=>{if(typeof this.state.error==="boolean"){this.setState({confirmSpaceName:e.target.value,error:e.target.value!==this.props.space.name})}else{this.setState({confirmSpaceName:e.target.value})}});confirm_delete_modal_defineProperty(this,"onConfirm",async()=>{if(this.state.confirmSpaceName===this.props.space.name){const needsRedirect=this.state.isDeletingCurrentSpace;const spacesManager=this.props.spacesManager;this.setState({deleteInProgress:true});await this.props.onConfirm();this.setState({deleteInProgress:false});if(needsRedirect){spacesManager.redirectToSpaceSelector()}}else{this.setState({error:true})}})}componentDidMount(){isCurrentSpace(this.props.space,this.props.spacesManager).then(result=>{this.setState({isDeletingCurrentSpace:result})})}render(){const{space:space,onCancel:onCancel,intl:intl}=this.props;const{isDeletingCurrentSpace:isDeletingCurrentSpace}=this.state;let warning=null;if(isDeletingCurrentSpace){const name=external_kbnSharedDeps_React_default.a.createElement("span",null,"(",external_kbnSharedDeps_React_default.a.createElement("strong",null,space.name),")");warning=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.confirmDeleteModal.redirectAfterDeletingCurrentSpaceWarningMessage",defaultMessage:"You are about to delete your current space {name}. You will be redirected to choose a different space if you continue.",values:{name:name}}))))}const modalProps={onClose:onCancel,className:"spcConfirmDeleteModal",initialFocus:'input[name="confirmDeleteSpaceInput"]'};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],modalProps,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],{"data-test-subj":"confirmModalTitleText"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.confirmDeleteModal.confirmDeleteSpaceButtonLabel",defaultMessage:"Delete space {spaceName}",values:{spaceName:"'"+space.name+"'"}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{"data-test-subj":"confirmModalBodyText"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.confirmDeleteModal.deletingSpaceWarningMessage",defaultMessage:"Deleting a space permanently removes the space and {allContents}. You can't undo this action.",values:{allContents:external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.confirmDeleteModal.allContentsText",defaultMessage:"all of its contents"}))}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:intl.formatMessage({id:"xpack.spaces.management.confirmDeleteModal.confirmSpaceNameFormRowLabel",defaultMessage:"Confirm space name to delete"}),isInvalid:!!this.state.error,error:intl.formatMessage({id:"xpack.spaces.management.confirmDeleteModal.spaceNamesDoNoMatchErrorMessage",defaultMessage:"Space names do not match."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{"data-test-subj":"deleteSpaceInput",name:"confirmDeleteSpaceInput",value:this.state.confirmSpaceName,onChange:this.onSpaceNameChange,disabled:this.state.deleteInProgress})),warning)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"confirmModalCancelButton",onClick:onCancel,isDisabled:this.state.deleteInProgress},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.confirmDeleteModal.cancelButtonLabel",defaultMessage:"Cancel"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"confirmModalConfirmButton",onClick:this.onConfirm,fill:true,color:"danger",isLoading:this.state.deleteInProgress},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.confirmDeleteModal.deleteSpaceAndAllContentsButtonLabel",defaultMessage:" Delete space and all contents"}))))}}async function isCurrentSpace(space,spacesManager){return space.id===(await spacesManager.getActiveSpace()).id}const ConfirmDeleteModal=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(confirm_delete_modal_ConfirmDeleteModalUI);const UnauthorizedPrompt=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"spacesApp",iconColor:"danger",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.unauthorizedPrompt.permissionDeniedTitle",defaultMessage:"Permission denied"})),body:external_kbnSharedDeps_React_default.a.createElement("p",{"data-test-subj":"permissionDeniedMessage"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.unauthorizedPrompt.permissionDeniedDescription",defaultMessage:"You don't have permission to manage spaces."}))});function getEnabledFeatures(features,space){return features.filter(feature=>!(space.disabledFeatures||[]).includes(feature.id))}function spaces_grid_page_extends(){spaces_grid_page_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return spaces_grid_page_extends.apply(this,arguments)}function spaces_grid_page_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class spaces_grid_page_SpacesGridPage extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);spaces_grid_page_defineProperty(this,"getConfirmDeleteModal",()=>{if(!this.state.showConfirmDeleteModal||!this.state.selectedSpace){return null}const{spacesManager:spacesManager}=this.props;return external_kbnSharedDeps_React_default.a.createElement(ConfirmDeleteModal,{space:this.state.selectedSpace,spacesManager:spacesManager,onCancel:()=>{this.setState({showConfirmDeleteModal:false})},onConfirm:this.deleteSpace})});spaces_grid_page_defineProperty(this,"deleteSpace",async()=>{const{spacesManager:spacesManager}=this.props;const space=this.state.selectedSpace;if(!space){return}this.setState({showConfirmDeleteModal:false});try{await spacesManager.deleteSpace(space)}catch(error){const{message:errorMessage=""}=error.data||error.body||{};this.props.notifications.toasts.addDanger(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.errorDeletingSpaceErrorMessage",{defaultMessage:"Error deleting space: {errorMessage}",values:{errorMessage:errorMessage}}));return}this.loadGrid();const message=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.spaceSuccessfullyDeletedNotificationMessage",{defaultMessage:'Deleted "{spaceName}" space.',values:{spaceName:space.name}});this.props.notifications.toasts.addSuccess(message)});spaces_grid_page_defineProperty(this,"loadGrid",async()=>{const{spacesManager:spacesManager,getFeatures:getFeatures,notifications:notifications}=this.props;this.setState({loading:true,spaces:[],features:[]});const getSpaces=spacesManager.getSpaces();try{const[spaces,features]=await Promise.all([getSpaces,getFeatures()]);this.setState({loading:false,spaces:spaces,features:features})}catch(error){this.setState({loading:false});notifications.toasts.addError(error,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.errorTitle",{defaultMessage:"Error loading spaces"})})}});spaces_grid_page_defineProperty(this,"getEditSpacePath",space=>`edit/${encodeURIComponent(space.id)}`);spaces_grid_page_defineProperty(this,"onDeleteSpaceClick",space=>{this.setState({selectedSpace:space,showConfirmDeleteModal:true})});this.state={spaces:[],features:[],loading:true,showConfirmDeleteModal:false,selectedSpace:null}}componentDidMount(){if(this.props.capabilities.spaces.manage){this.loadGrid()}}render(){return external_kbnSharedDeps_React_default.a.createElement("div",{className:"spcGridPage","data-test-subj":"spaces-grid-page"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{horizontalPosition:"center"},this.getPageContent()),this.getConfirmDeleteModal())}getPageContent(){if(!this.props.capabilities.spaces.manage){return external_kbnSharedDeps_React_default.a.createElement(UnauthorizedPrompt,null)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spacesGridPage.spacesTitle",defaultMessage:"Spaces"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued",size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,getSpacesFeatureDescription()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},this.getPrimaryActionButton())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{itemId:"id",items:this.state.spaces,tableCaption:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.tableCaption",{defaultMessage:"Kibana spaces"}),rowHeader:"name",columns:this.getColumnConfig(),hasActions:true,pagination:true,sorting:true,search:{box:{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.searchPlaceholder",{defaultMessage:"Search"})}},loading:this.state.loading,message:this.state.loading?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spacesGridPage.loadingTitle",defaultMessage:"loading"}):undefined}))}getPrimaryActionButton(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],spaces_grid_page_extends({fill:true},Object(kibanaReact_public_["reactRouterNavigate"])(this.props.history,"/create"),{"data-test-subj":"createSpace"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spacesGridPage.createSpaceButtonLabel",defaultMessage:"Create a space"}))}getColumnConfig(){return[{field:"initials",name:"",width:"50px",render:(value,record)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],Object(kibanaReact_public_["reactRouterNavigate"])(this.props.history,this.getEditSpacePath(record)),external_kbnSharedDeps_React_default.a.createElement(space_avatar["a"],{space:record,size:"s"}))},{field:"name",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.spaceColumnName",{defaultMessage:"Space"}),sortable:true,render:(value,record)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],Object(kibanaReact_public_["reactRouterNavigate"])(this.props.history,this.getEditSpacePath(record)),value)},{field:"description",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.descriptionColumnName",{defaultMessage:"Description"}),sortable:true},{field:"disabledFeatures",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.featuresColumnName",{defaultMessage:"Features"}),sortable:space=>getEnabledFeatures(this.state.features,space).length,render:(disabledFeatures,record)=>{const enabledFeatureCount=getEnabledFeatures(this.state.features,record).length;if(enabledFeatureCount===this.state.features.length){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spacesGridPage.allFeaturesEnabled",defaultMessage:"All features visible"})}if(enabledFeatureCount===0){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"danger"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spacesGridPage.noFeaturesEnabled",defaultMessage:"No features visible"}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spacesGridPage.someFeaturesEnabled",defaultMessage:"{enabledFeatureCount} / {totalFeatureCount} features visible",values:{enabledFeatureCount:enabledFeatureCount,totalFeatureCount:this.state.features.length}})}},{field:"id",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.identifierColumnName",{defaultMessage:"Identifier"}),sortable:true,render(id){if(id===constants["b"]){return""}return id}},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.actionsColumnName",{defaultMessage:"Actions"}),actions:[{render:record=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],spaces_grid_page_extends({"data-test-subj":`${record.name}-editSpace`,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.editSpaceActionName",{defaultMessage:`Edit {spaceName}.`,values:{spaceName:record.name}}),color:"primary",iconType:"pencil"},Object(kibanaReact_public_["reactRouterNavigate"])(this.props.history,this.getEditSpacePath(record))))},{available:record=>!Object(common["isReservedSpace"])(record),render:record=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"data-test-subj":`${record.name}-deleteSpace`,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.deleteActionName",{defaultMessage:`Delete {spaceName}.`,values:{spaceName:record.name}}),color:"danger",iconType:"trash",onClick:()=>this.onDeleteSpaceClick(record)})}]}]}}function toSpaceIdentifier(value=""){return value.toLowerCase().replace(/[^a-z0-9_]/g,"-")}function isValidSpaceIdentifier(value=""){return value===toSpaceIdentifier(value)}var is_reserved_space=__webpack_require__(15);function validate_space_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class validate_space_SpaceValidator{constructor(options={}){validate_space_defineProperty(this,"shouldValidate",void 0);this.shouldValidate=options.shouldValidate||false}enableValidation(){this.shouldValidate=true}disableValidation(){this.shouldValidate=false}validateSpaceName(space){if(!this.shouldValidate){return valid()}if(!space.name||!space.name.trim()){return invalid(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.validateSpace.requiredNameErrorMessage",{defaultMessage:"Name is required."}))}if(space.name.length>1024){return invalid(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.validateSpace.nameMaxLengthErrorMessage",{defaultMessage:"Name must not exceed 1024 characters."}))}return valid()}validateSpaceDescription(space){if(!this.shouldValidate){return valid()}if(space.description&&space.description.length>2e3){return invalid(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.validateSpace.describeMaxLengthErrorMessage",{defaultMessage:"Description must not exceed 2000 characters."}))}return valid()}validateURLIdentifier(space){if(!this.shouldValidate){return valid()}if(Object(is_reserved_space["a"])(space)){return valid()}if(!space.id){return invalid(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.validateSpace.urlIdentifierRequiredErrorMessage",{defaultMessage:"URL identifier is required."}))}if(!isValidSpaceIdentifier(space.id)){return invalid(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.validateSpace.urlIdentifierAllowedCharactersErrorMessage",{defaultMessage:'URL identifier can only contain a-z, 0-9, and the characters "_" and "-".'}))}return valid()}validateEnabledFeatures(space){return valid()}validateForSave(space){const{isInvalid:isNameInvalid}=this.validateSpaceName(space);const{isInvalid:isDescriptionInvalid}=this.validateSpaceDescription(space);const{isInvalid:isIdentifierInvalid}=this.validateURLIdentifier(space);const{isInvalid:areFeaturesInvalid}=this.validateEnabledFeatures(space);if(isNameInvalid||isDescriptionInvalid||isIdentifierInvalid||areFeaturesInvalid){return invalid()}return valid()}}function invalid(error=""){return{isInvalid:true,error:error}}function valid(){return{isInvalid:false}}const ConfirmAlterActiveSpaceModalUI=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{onConfirm:props.onConfirm,onCancel:props.onCancel,title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.confirmAlterActiveSpaceModal.title",defaultMessage:"Confirm update space"}),defaultFocusedButton:"confirm",cancelButtonText:props.intl.formatMessage({id:"xpack.spaces.management.confirmAlterActiveSpaceModal.cancelButton",defaultMessage:"Cancel"}),confirmButtonText:props.intl.formatMessage({id:"xpack.spaces.management.confirmAlterActiveSpaceModal.updateSpaceButton",defaultMessage:"Update space"})},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.confirmAlterActiveSpaceModal.reloadWarningMessage",defaultMessage:"You have updated the visible features in this space. Your page will reload after saving."})));const ConfirmAlterActiveSpaceModal=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(ConfirmAlterActiveSpaceModalUI);function section_panel_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class section_panel_SectionPanel extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);section_panel_defineProperty(this,"getTitle",()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"baseline",gutterSize:"s",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,this.props.iconType&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:this.props.iconType,size:"xl",className:"spcSectionPanel__collapsiblePanelLogo"})," "),this.props.title)))));section_panel_defineProperty(this,"getForm",()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),this.props.children))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,this.getTitle(),this.getForm())}}var base64_js=__webpack_require__(22);const imageTypes=["image/svg+xml","image/jpeg","image/png","image/gif"];function encode(data,type="text/plain"){if(FileReader){return new Promise((resolve,reject)=>{const reader=new FileReader;reader.onloadend=()=>resolve(reader.result);reader.onerror=err=>reject(err);reader.readAsDataURL(data)})}return Promise.resolve(`data:${type};base64,${Object(base64_js["fromByteArray"])(data)}`)}function customize_space_avatar_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class customize_space_avatar_CustomizeSpaceAvatar extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);customize_space_avatar_defineProperty(this,"initialsRef",null);customize_space_avatar_defineProperty(this,"handleImageUpload",imgUrl=>{const thisInstance=this;const image=new Image;image.addEventListener("load",(function(){const MAX_IMAGE_SIZE=64;const imgDimx=image.width;const imgDimy=image.height;if(imgDimx<=MAX_IMAGE_SIZE&&imgDimy<=MAX_IMAGE_SIZE){thisInstance.storeImageChanges(imgUrl)}else{const imageCanvas=document.createElement("canvas");const canvasContext=imageCanvas.getContext("2d");if(imgDimx>=imgDimy){imageCanvas.width=MAX_IMAGE_SIZE;imageCanvas.height=Math.floor(imgDimy*MAX_IMAGE_SIZE/imgDimx);if(canvasContext){canvasContext.drawImage(image,0,0,imageCanvas.width,imageCanvas.height);const resizedImageUrl=imageCanvas.toDataURL();thisInstance.storeImageChanges(resizedImageUrl)}}else{imageCanvas.height=MAX_IMAGE_SIZE;imageCanvas.width=Math.floor(imgDimx*MAX_IMAGE_SIZE/imgDimy);if(canvasContext){canvasContext.drawImage(image,0,0,imageCanvas.width,imageCanvas.height);const resizedImageUrl=imageCanvas.toDataURL();thisInstance.storeImageChanges(resizedImageUrl)}}}}),false);image.src=imgUrl});customize_space_avatar_defineProperty(this,"onFileUpload",files=>{if(files==null)return;const file=files[0];if(imageTypes.indexOf(file.type)>-1){encode(file).then(dataurl=>this.handleImageUpload(dataurl))}});customize_space_avatar_defineProperty(this,"initialsInputRef",ref=>{if(ref){this.initialsRef=ref;this.initialsRef.addEventListener("focus",this.onInitialsFocus);this.initialsRef.addEventListener("blur",this.onInitialsBlur)}else{if(this.initialsRef){this.initialsRef.removeEventListener("focus",this.onInitialsFocus);this.initialsRef.removeEventListener("blur",this.onInitialsBlur);this.initialsRef=null}}});customize_space_avatar_defineProperty(this,"onInitialsFocus",()=>{this.setState({initialsHasFocus:true,pendingInitials:Object(space_avatar["d"])(this.props.space)})});customize_space_avatar_defineProperty(this,"onInitialsBlur",()=>{this.setState({initialsHasFocus:false,pendingInitials:null})});customize_space_avatar_defineProperty(this,"onInitialsChange",e=>{const initials=(e.target.value||"").substring(0,common["MAX_SPACE_INITIALS"]);this.setState({pendingInitials:initials});this.props.onChange({...this.props.space,initials:initials})});customize_space_avatar_defineProperty(this,"onColorChange",color=>{this.props.onChange({...this.props.space,color:color})});this.state={initialsHasFocus:false}}storeImageChanges(imageUrl){this.props.onChange({...this.props.space,imageUrl:imageUrl})}render(){const{space:space}=this.props;const{initialsHasFocus:initialsHasFocus,pendingInitials:pendingInitials}=this.state;const spaceColor=Object(space_avatar["b"])(space);const isInvalidSpaceColor=!Object(external_kbnSharedDeps_ElasticEui_["isValidHex"])(spaceColor)&&spaceColor!=="";return external_kbnSharedDeps_React_default.a.createElement("form",{onSubmit:()=>false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.customizeSpaceAvatar.initialItemsFormRowLabel",{defaultMessage:"Initials (2 max)"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{inputRef:this.initialsInputRef,"data-test-subj":"spaceLetterInitial",name:"spaceInitials",value:initialsHasFocus?pendingInitials||"":Object(space_avatar["d"])(space),onChange:this.onInitialsChange,disabled:this.props.space.imageUrl&&this.props.space.imageUrl!==""?true:false})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.customizeSpaceAvatar.colorFormRowLabel",{defaultMessage:"Color"}),isInvalid:isInvalidSpaceColor},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiColorPicker"],{color:spaceColor,onChange:this.onColorChange,isInvalid:isInvalidSpaceColor})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),this.filePickerOrImage())}removeImageUrl(){this.props.onChange({...this.props.space,imageUrl:""})}filePickerOrImage(){if(!this.props.space.imageUrl){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.customizeSpaceAvatar.imageUrl",{defaultMessage:"Custom image"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilePicker"],{display:"default","data-test-subj":"uploadCustomImageFile",initialPromptText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.customizeSpaceAvatar.selectImageUrl",{defaultMessage:"Select image file"}),onChange:this.onFileUpload,accept:imageTypes.join(",")}))}else{return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:()=>this.removeImageUrl(),color:"danger",iconType:"trash"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.customizeSpaceAvatar.removeImage",{defaultMessage:"Remove custom image"})))}}}function space_identifier_extends(){space_identifier_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return space_identifier_extends.apply(this,arguments)}function space_identifier_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class space_identifier_SpaceIdentifierUI extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);space_identifier_defineProperty(this,"textFieldRef",null);space_identifier_defineProperty(this,"getLabel",()=>{if(!this.props.editable){return external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spaceIdentifier.urlIdentifierTitle",defaultMessage:"URL identifier"}))}const editLinkText=this.state.editing?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spaceIdentifier.resetSpaceNameLinkText",defaultMessage:"[reset]"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spaceIdentifier.customizeSpaceLinkText",defaultMessage:"[customize]"});const editLinkLabel=this.state.editing?this.props.intl.formatMessage({id:"xpack.spaces.management.spaceIdentifier.resetSpaceNameLinkLabel",defaultMessage:"Reset the URL identifier"}):this.props.intl.formatMessage({id:"xpack.spaces.management.spaceIdentifier.customizeSpaceNameLinkLabel",defaultMessage:"Customize the URL identifier"});return external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spaceIdentifier.urlIdentifierLabel",defaultMessage:"URL identifier "}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{"data-test-subj":"CustomizeOrReset",onClick:this.onEditClick,"aria-label":editLinkLabel},editLinkText))});space_identifier_defineProperty(this,"getHelpText",(identifier=this.props.intl.formatMessage({id:"xpack.spaces.management.spaceIdentifier.emptySpaceIdentifierText",defaultMessage:"awesome-space"}))=>external_kbnSharedDeps_React_default.a.createElement("p",{className:"eui-textBreakAll"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spaceIdentifier.kibanaURLForSpaceIdentifierDescription",defaultMessage:"Example: https://my-kibana.example{spaceIdentifier}/app/kibana.",values:{spaceIdentifier:external_kbnSharedDeps_React_default.a.createElement("strong",null,"/s/",identifier)}})));space_identifier_defineProperty(this,"onEditClick",()=>{const currentlyEditing=this.state.editing;if(currentlyEditing){const resetIdentifier=toSpaceIdentifier(this.props.space.name);this.setState({editing:false});this.props.onChange(resetIdentifier)}else{this.setState({editing:true},()=>{if(this.textFieldRef){this.textFieldRef.focus()}})}});space_identifier_defineProperty(this,"onChange",e=>{if(!this.state.editing){return}this.props.onChange(e.target.value)});this.state={editing:false}}render(){const{intl:intl}=this.props;const{id:id=""}=this.props.space;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],space_identifier_extends({label:this.getLabel(),helpText:this.getHelpText(id)},this.props.validator.validateURLIdentifier(this.props.space),{fullWidth:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{readOnly:!this.state.editing,"data-test-subj":"spaceURLDisplay",placeholder:this.state.editing||!this.props.editable?undefined:intl.formatMessage({id:"xpack.spaces.management.spaceIdentifier.urlIdentifierGeneratedFromSpaceNameTooltip",defaultMessage:"awesome-space"}),value:id,onChange:this.onChange,inputRef:ref=>this.textFieldRef=ref,fullWidth:true})))}}const SpaceIdentifier=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(space_identifier_SpaceIdentifierUI);function customize_space_extends(){customize_space_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return customize_space_extends.apply(this,arguments)}function customize_space_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class customize_space_CustomizeSpace extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);customize_space_defineProperty(this,"state",{customizingAvatar:false,usingCustomIdentifier:false});customize_space_defineProperty(this,"togglePopover",()=>{this.setState({customizingAvatar:!this.state.customizingAvatar})});customize_space_defineProperty(this,"closePopover",()=>{this.setState({customizingAvatar:false})});customize_space_defineProperty(this,"getPanelDescription",()=>this.props.editingExistingSpace?external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.manageSpacePage.customizeSpacePanelUrlIdentifierNotEditable",defaultMessage:"The url identifier cannot be changed."})):external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.manageSpacePage.customizeSpacePanelUrlIdentifierEditable",defaultMessage:"Note the URL identifier. You cannot change it after you create the space."})));customize_space_defineProperty(this,"onNameChange",e=>{if(!this.props.space){return}const canUpdateId=!this.props.editingExistingSpace&&!this.state.usingCustomIdentifier;let{id:id}=this.props.space;if(canUpdateId){id=toSpaceIdentifier(e.target.value)}this.props.onChange({...this.props.space,name:e.target.value,id:id})});customize_space_defineProperty(this,"onDescriptionChange",e=>{this.props.onChange({...this.props.space,description:e.target.value})});customize_space_defineProperty(this,"onSpaceIdentifierChange",updatedIdentifier=>{const usingCustomIdentifier=updatedIdentifier!==toSpaceIdentifier(this.props.space.name);this.setState({usingCustomIdentifier:usingCustomIdentifier});this.props.onChange({...this.props.space,id:toSpaceIdentifier(updatedIdentifier)})});customize_space_defineProperty(this,"onAvatarChange",space=>{this.props.onChange(space)})}render(){const{validator:validator,editingExistingSpace:editingExistingSpace}=this.props;const{name:name="",description:description=""}=this.props.space;const panelTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.customizeSpaceTitle",{defaultMessage:"Customize your space"});const extraPopoverProps={initialFocus:'input[name="spaceInitials"]'};return external_kbnSharedDeps_React_default.a.createElement(section_panel_SectionPanel,{title:panelTitle,description:panelTitle},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.manageSpacePage.customizeSpacePanelDescription",defaultMessage:"Name your space and customize its avatar."}))),description:this.getPanelDescription(),fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],customize_space_extends({label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.nameFormRowLabel",{defaultMessage:"Name"})},validator.validateSpaceName(this.props.space),{fullWidth:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{name:"name","data-test-subj":"addSpaceName",placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.awesomeSpacePlaceholder",{defaultMessage:"Awesome space"}),value:name,onChange:this.onNameChange,fullWidth:true})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),this.props.space&&Object(common["isReservedSpace"])(this.props.space)?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(SpaceIdentifier,{space:this.props.space,editable:!editingExistingSpace,onChange:this.onSpaceIdentifierChange,validator:validator})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],customize_space_extends({"data-test-subj":"optionalDescription",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.spaceDescriptionFormRowLabel",{defaultMessage:"Description (optional)"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.spaceDescriptionHelpText",{defaultMessage:"The description appears on the Space selection screen."})},validator.validateSpaceDescription(this.props.space),{fullWidth:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextArea"],{"data-test-subj":"descriptionSpaceText",name:"description",value:description,onChange:this.onDescriptionChange,fullWidth:true,rows:2})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.avatarFormRowLabel",{defaultMessage:"Avatar"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],customize_space_extends({id:"customizeAvatarPopover",button:external_kbnSharedDeps_React_default.a.createElement("button",{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.clickToCustomizeTooltip",{defaultMessage:"Click to customize this space avatar"}),onClick:this.togglePopover},external_kbnSharedDeps_React_default.a.createElement(space_avatar["a"],{space:this.props.space,size:"l"})),closePopover:this.closePopover},extraPopoverProps,{ownFocus:true,isOpen:this.state.customizingAvatar}),external_kbnSharedDeps_React_default.a.createElement("div",{style:{maxWidth:240}},external_kbnSharedDeps_React_default.a.createElement(customize_space_avatar_CustomizeSpaceAvatar,{space:this.props.space,onChange:this.onAvatarChange}))))))}}function delete_spaces_button_extends(){delete_spaces_button_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return delete_spaces_button_extends.apply(this,arguments)}function delete_spaces_button_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class delete_spaces_button_DeleteSpacesButton extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);delete_spaces_button_defineProperty(this,"state",{showConfirmDeleteModal:false,showConfirmRedirectModal:false});delete_spaces_button_defineProperty(this,"onDeleteClick",()=>{this.setState({showConfirmDeleteModal:true})});delete_spaces_button_defineProperty(this,"getConfirmDeleteModal",()=>{if(!this.state.showConfirmDeleteModal){return null}const{spacesManager:spacesManager}=this.props;return external_kbnSharedDeps_React_default.a.createElement(ConfirmDeleteModal,{space:this.props.space,spacesManager:spacesManager,onCancel:()=>{this.setState({showConfirmDeleteModal:false})},onConfirm:this.deleteSpaces})});delete_spaces_button_defineProperty(this,"deleteSpaces",async()=>{const{spacesManager:spacesManager,space:space}=this.props;this.setState({showConfirmDeleteModal:false});try{await spacesManager.deleteSpace(space)}catch(error){const{message:errorMessage=""}=error.data||error.body||{};this.props.notifications.toasts.addDanger(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.deleteSpacesButton.deleteSpaceErrorTitle",{defaultMessage:"Error deleting space: {errorMessage}",values:{errorMessage:errorMessage}}));return}const message=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.deleteSpacesButton.spaceSuccessfullyDeletedNotificationMessage",{defaultMessage:"Deleted {spaceName} space.",values:{spaceName:space.name}});this.props.notifications.toasts.addSuccess(message);if(this.props.onDelete){this.props.onDelete()}})}render(){const buttonText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.deleteSpacesButton.deleteSpaceButtonLabel",defaultMessage:"Delete space"});let ButtonComponent=external_kbnSharedDeps_ElasticEui_["EuiButton"];let extraProps;if(this.props.style==="icon"){ButtonComponent=external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"];extraProps={iconType:"trash"}}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(ButtonComponent,delete_spaces_button_extends({color:"danger",onClick:this.onDeleteClick,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.deleteSpacesButton.deleteSpaceAriaLabel",{defaultMessage:"Delete this space"})},extraProps),buttonText),this.getConfirmDeleteModal())}}var feature_table=__webpack_require__(144);function feature_table_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class feature_table_FeatureTable extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);feature_table_defineProperty(this,"featureCategories",new Map);feature_table_defineProperty(this,"onChange",featureId=>e=>{const updatedSpace={...this.props.space};let disabledFeatures=updatedSpace.disabledFeatures||[];const isFeatureEnabled=e.target.checked;if(isFeatureEnabled){disabledFeatures=disabledFeatures.filter(feature=>feature!==featureId)}else{disabledFeatures=external_kbnSharedDeps_Lodash_default.a.uniq([...disabledFeatures,featureId])}updatedSpace.disabledFeatures=disabledFeatures;this.props.onChange(updatedSpace)});feature_table_defineProperty(this,"getAllFeatureIds",()=>[...this.featureCategories.values()].flat().map(feature=>feature.id));feature_table_defineProperty(this,"hideAll",()=>{this.setFeaturesVisibility(this.getAllFeatureIds(),false)});feature_table_defineProperty(this,"showAll",()=>{this.setFeaturesVisibility(this.getAllFeatureIds(),true)});feature_table_defineProperty(this,"setFeaturesVisibility",(features,visible)=>{const updatedSpace={...this.props.space};if(visible){var _updatedSpace$disable;updatedSpace.disabledFeatures=((_updatedSpace$disable=updatedSpace.disabledFeatures)!==null&&_updatedSpace$disable!==void 0?_updatedSpace$disable:[]).filter(df=>!features.includes(df))}else{var _updatedSpace$disable2;updatedSpace.disabledFeatures=Array.from(new Set([...(_updatedSpace$disable2=updatedSpace.disabledFeatures)!==null&&_updatedSpace$disable2!==void 0?_updatedSpace$disable2:[],...features]))}this.props.onChange(updatedSpace)});feature_table_defineProperty(this,"getCategoryHelpText",category=>{if(category.id==="management"){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.managementCategoryHelpText",{defaultMessage:"Access to Stack Management is determined by your privileges, and cannot be hidden by Spaces."})}});props.features.forEach(feature=>{if(!this.featureCategories.has(feature.category.id)){this.featureCategories.set(feature.category.id,[])}this.featureCategories.get(feature.category.id).push(feature)})}render(){const{space:space}=this.props;const accordions=[];this.featureCategories.forEach(featuresInCategory=>{var _category$order;const{category:category}=featuresInCategory[0];const featureCount=featuresInCategory.length;const enabledCount=getEnabledFeatures(featuresInCategory,space).length;const canExpandCategory=featuresInCategory.length>1;const checkboxProps={id:`featureCategoryCheckbox_${category.id}`,indeterminate:enabledCount>0&&enabledCount<featureCount,checked:featureCount===enabledCount,["aria-label"]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.enabledFeatures.featureCategoryButtonLabel",{defaultMessage:"Category toggle"}),onClick:e=>{e.stopPropagation()},onChange:e=>{this.setFeaturesVisibility(featuresInCategory.map(f=>f.id),e.target.checked)}};const buttonContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{"data-test-subj":`featureCategoryButton_${category.id}`,alignItems:"center",responsive:false,gutterSize:"m",onClick:()=>{if(!canExpandCategory){const isChecked=enabledCount>0;this.setFeaturesVisibility(featuresInCategory.map(f=>f.id),!isChecked)}}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckbox"],checkboxProps)),category.euiIconType?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{size:"m",type:category.euiIconType})):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h4",{className:"eui-displayInlineBlock"},category.label))));const label=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.featureAccordionSwitchLabel",{defaultMessage:"{enabledCount} / {featureCount} features visible",values:{enabledCount:enabledCount,featureCount:featureCount}});const extraAction=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s","aria-hidden":"true",color:"subdued"},label);const helpText=this.getCategoryHelpText(category);const accordion=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:`featureCategory_${category.id}`,"data-test-subj":`featureCategory_${category.id}`,key:category.id,arrowDisplay:canExpandCategory?"right":"none",forceState:canExpandCategory?undefined:"closed",buttonContent:buttonContent,extraAction:canExpandCategory?extraAction:undefined},external_kbnSharedDeps_React_default.a.createElement("div",{className:"spcFeatureTableAccordionContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),helpText&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{iconType:"iInCircle",size:"s"},helpText),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"})),featuresInCategory.map(feature=>{const featureChecked=!(space.disabledFeatures&&space.disabledFeatures.includes(feature.id));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{key:`${feature.id}-toggle`},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckbox"],{id:`featureCheckbox_${feature.id}`,"data-test-subj":`featureCheckbox_${feature.id}`,checked:featureChecked,onChange:this.onChange(feature.id),label:feature.name})))})));accordions.push({order:(_category$order=category.order)!==null&&_category$order!==void 0?_category$order:Number.MAX_SAFE_INTEGER,element:accordion})});accordions.sort((a1,a2)=>a1.order-a2.order);const featureCount=this.props.features.length;const enabledCount=getEnabledFeatures(this.props.features,this.props.space).length;const controls=[];if(enabledCount<featureCount){controls.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:()=>this.showAll(),"data-test-subj":"showAllFeaturesLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.selectAllFeaturesLink",{defaultMessage:"Select all"}))))}if(enabledCount>0){controls.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:()=>this.hideAll(),"data-test-subj":"hideAllFeaturesLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.deselectAllFeaturesLink",{defaultMessage:"Deselect all"}))))}return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("b",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.featureVisibilityTitle",{defaultMessage:"Feature visibility"})))),controls.map((control,idx)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,key:idx},control))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}),accordions.flatMap((a,idx)=>[a.element,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{key:`accordion-hr-${idx}`,margin:"m"})]))}}function enabled_features_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class enabled_features_EnabledFeatures extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);enabled_features_defineProperty(this,"getPanelTitle",()=>{const featureCount=this.props.features.length;const enabledCount=getEnabledFeatures(this.props.features,this.props.space).length;let details=null;if(enabledCount===featureCount){details=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",style:{display:"inline-block"}},external_kbnSharedDeps_React_default.a.createElement("em",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.enabledSpaceFeatures.allFeaturesEnabledMessage",defaultMessage:"(all features visible)"})))}else if(enabledCount===0){details=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"danger",size:"s",style:{display:"inline-block"}},external_kbnSharedDeps_React_default.a.createElement("em",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.enabledSpaceFeatures.noFeaturesEnabledMessage",defaultMessage:"(no features visible)"})))}else{details=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",style:{display:"inline-block"}},external_kbnSharedDeps_React_default.a.createElement("em",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.enabledSpaceFeatures.someFeaturesEnabledMessage",defaultMessage:"({enabledCount} / {featureCount} features visible)",values:{enabledCount:enabledCount,featureCount:featureCount}})))}return external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.enabledSpaceFeatures.enabledFeaturesSectionMessage",defaultMessage:"Features"})," ",details)});enabled_features_defineProperty(this,"getDescription",()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.enabledSpaceFeatures.notASecurityMechanismMessage",defaultMessage:"The feature is hidden in the UI, but is not disabled."})))))}render(){const description=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.customizeVisibleFeatures",{defaultMessage:"Customize visible features"});return external_kbnSharedDeps_React_default.a.createElement(section_panel_SectionPanel,{title:this.getPanelTitle(),description:description,"data-test-subj":"enabled-features-panel"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.enabledSpaceFeatures.enableFeaturesInSpaceMessage",defaultMessage:"Set feature visibility for this space"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),this.getDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(feature_table_FeatureTable,{features:this.props.features,space:this.props.space,onChange:this.props.onChange}))))}}const ReservedSpaceBadge=props=>{const{space:space}=props;if(space&&Object(common["isReservedSpace"])(space)){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.reversedSpaceBadge.reversedSpacesCanBePartiallyModifiedTooltip",defaultMessage:"Reserved spaces are built-in and can only be partially modified."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"warning",iconType:"questionInCircle",iconSide:"right"},"Reserved space"))}return null};function manage_space_page_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class manage_space_page_ManageSpacePage extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);manage_space_page_defineProperty(this,"validator",void 0);manage_space_page_defineProperty(this,"getLoadingIndicator",()=>external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"xl"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h1",null,"Loading..."))));manage_space_page_defineProperty(this,"getForm",()=>{if(!this.props.capabilities.spaces.manage){return external_kbnSharedDeps_React_default.a.createElement(UnauthorizedPrompt,null)}const{showAlteringActiveSpaceDialog:showAlteringActiveSpaceDialog}=this.state;return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"spaces-edit-page"},this.getFormHeading(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.manageSpacePage.manageDescription",defaultMessage:"Organize your saved objects into meaningful categories."})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(customize_space_CustomizeSpace,{space:this.state.space,onChange:this.onSpaceChange,editingExistingSpace:this.editingExistingSpace(),validator:this.validator}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(enabled_features_EnabledFeatures,{space:this.state.space,features:this.state.features,onChange:this.onSpaceChange,getUrlForApp:this.props.getUrlForApp}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),this.getFormButtons(),showAlteringActiveSpaceDialog&&external_kbnSharedDeps_React_default.a.createElement(ConfirmAlterActiveSpaceModal,{onConfirm:()=>this.performSave(true),onCancel:()=>{this.setState({showAlteringActiveSpaceDialog:false})}}))});manage_space_page_defineProperty(this,"getFormHeading",()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h1",{className:"eui-displayInlineBlock"},this.getTitle()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(ReservedSpaceBadge,{space:this.state.space}))));manage_space_page_defineProperty(this,"getTitle",()=>{if(this.editingExistingSpace()){return`Edit space`}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.manageSpacePage.createSpaceTitle",defaultMessage:"Create a space"})});manage_space_page_defineProperty(this,"getFormButtons",()=>{const createSpaceText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.createSpaceButton",{defaultMessage:"Create space"});const updateSpaceText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.updateSpaceButton",{defaultMessage:"Update space"});const cancelButtonText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.cancelSpaceButton",{defaultMessage:"Cancel"});const saveText=this.editingExistingSpace()?updateSpaceText:createSpaceText;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:this.saveSpace,"data-test-subj":"save-space-button",isLoading:this.state.saveInProgress},saveText)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:this.backToSpacesList,"data-test-subj":"cancel-space-button"},cancelButtonText)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true}),this.getActionButton())});manage_space_page_defineProperty(this,"getActionButton",()=>{if(this.state.space&&this.editingExistingSpace()&&!Object(common["isReservedSpace"])(this.state.space)){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(delete_spaces_button_DeleteSpacesButton,{"data-test-subj":"delete-space-button",space:this.state.space,spacesManager:this.props.spacesManager,onDelete:this.backToSpacesList,notifications:this.props.notifications}))}return null});manage_space_page_defineProperty(this,"onSpaceChange",updatedSpace=>{this.setState({space:updatedSpace})});manage_space_page_defineProperty(this,"saveSpace",()=>{this.validator.enableValidation();const result=this.validator.validateForSave(this.state.space);if(result.isInvalid){this.setState({formError:result});return}if(this.editingExistingSpace()){const{spacesManager:spacesManager}=this.props;const originalSpace=this.state.originalSpace;const space=this.state.space;spacesManager.getActiveSpace().then(activeSpace=>{const editingActiveSpace=activeSpace.id===originalSpace.id;const haveDisabledFeaturesChanged=space.disabledFeatures.length!==originalSpace.disabledFeatures.length||external_kbnSharedDeps_Lodash_default.a.difference(space.disabledFeatures,originalSpace.disabledFeatures).length>0;if(editingActiveSpace&&haveDisabledFeaturesChanged){this.setState({showAlteringActiveSpaceDialog:true});return}this.performSave()})}else{this.performSave()}});manage_space_page_defineProperty(this,"loadSpace",async(spaceId,featuresPromise)=>{const{spacesManager:spacesManager,onLoadSpace:onLoadSpace}=this.props;try{const[space,features]=await Promise.all([spacesManager.getSpace(spaceId),featuresPromise]);if(space){if(onLoadSpace){onLoadSpace(space)}this.setState({space:space,features:features,originalSpace:space,isLoading:false})}}catch(error){var _error$body$message,_error$body;const message=(_error$body$message=error===null||error===void 0?void 0:(_error$body=error.body)===null||_error$body===void 0?void 0:_error$body.message)!==null&&_error$body$message!==void 0?_error$body$message:"";this.props.notifications.toasts.addDanger(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.errorLoadingSpaceTitle",{defaultMessage:"Error loading space: {message}",values:{message:message}}));this.backToSpacesList()}});manage_space_page_defineProperty(this,"performSave",(requireRefresh=false)=>{if(!this.state.space){return}const name=this.state.space.name||"";const{id:id=toSpaceIdentifier(name),description:description,initials:initials,color:color,disabledFeatures:disabledFeatures=[],imageUrl:imageUrl}=this.state.space;const params={name:name,id:id,description:description,initials:initials,color:color,disabledFeatures:disabledFeatures,imageUrl:imageUrl};let action;if(this.editingExistingSpace()){action=this.props.spacesManager.updateSpace(params)}else{action=this.props.spacesManager.createSpace(params)}this.setState({saveInProgress:true});action.then(()=>{this.props.notifications.toasts.addSuccess(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.spaceSuccessfullySavedNotificationMessage",{defaultMessage:`Space {name} was saved.`,values:{name:`'${name}'`}}));this.backToSpacesList();if(requireRefresh){setTimeout(()=>{window.location.reload()})}}).catch(error=>{var _error$body$message2,_error$body2;const message=(_error$body$message2=error===null||error===void 0?void 0:(_error$body2=error.body)===null||_error$body2===void 0?void 0:_error$body2.message)!==null&&_error$body$message2!==void 0?_error$body$message2:"";this.setState({saveInProgress:false});this.props.notifications.toasts.addDanger(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.errorSavingSpaceTitle",{defaultMessage:"Error saving space: {message}",values:{message:message}}))})});manage_space_page_defineProperty(this,"backToSpacesList",()=>this.props.history.push("/"));manage_space_page_defineProperty(this,"editingExistingSpace",()=>!!this.props.spaceId);this.validator=new validate_space_SpaceValidator({shouldValidate:false});this.state={isLoading:true,showAlteringActiveSpaceDialog:false,saveInProgress:false,space:{},features:[]}}async componentDidMount(){if(!this.props.capabilities.spaces.manage){return}const{spaceId:spaceId,getFeatures:getFeatures,notifications:notifications}=this.props;try{if(spaceId){await this.loadSpace(spaceId,getFeatures())}else{const features=await getFeatures();this.setState({isLoading:false,features:features})}}catch(e){notifications.toasts.addError(e,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.loadErrorTitle",{defaultMessage:"Error loading available features"})})}}async componentDidUpdate(previousProps){if(this.props.spaceId!==previousProps.spaceId&&this.props.spaceId){await this.loadSpace(this.props.spaceId,Promise.resolve(this.state.features))}}render(){const content=this.state.isLoading?this.getLoadingIndicator():this.getForm();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentBody"],null,content))}}const spacesManagementApp=Object.freeze({id:"spaces",create({getStartServices:getStartServices,spacesManager:spacesManager}){const title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.displayName",{defaultMessage:"Spaces"});return{id:this.id,order:2,title:title,async mount({element:element,setBreadcrumbs:setBreadcrumbs,history:history}){const[{notifications:notifications,i18n:i18nStart,application:application,chrome:chrome},{features:features}]=await getStartServices();const spacesBreadcrumbs=[{text:title,href:`/`}];chrome.docTitle.change(title);const SpacesGridPageWithBreadcrumbs=()=>{setBreadcrumbs(spacesBreadcrumbs);return external_kbnSharedDeps_React_default.a.createElement(spaces_grid_page_SpacesGridPage,{capabilities:application.capabilities,getFeatures:features.getFeatures,notifications:notifications,spacesManager:spacesManager,history:history,getUrlForApp:application.getUrlForApp})};const CreateSpacePageWithBreadcrumbs=()=>{setBreadcrumbs([...spacesBreadcrumbs,{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.createSpaceBreadcrumb",{defaultMessage:"Create"})}]);return external_kbnSharedDeps_React_default.a.createElement(manage_space_page_ManageSpacePage,{capabilities:application.capabilities,getFeatures:features.getFeatures,notifications:notifications,spacesManager:spacesManager,history:history,getUrlForApp:application.getUrlForApp})};const EditSpacePageWithBreadcrumbs=()=>{const{spaceId:spaceId}=Object(external_kbnSharedDeps_ReactRouterDom_["useParams"])();const onLoadSpace=space=>{setBreadcrumbs([...spacesBreadcrumbs,{text:space.name,href:`/edit/${encodeURIComponent(space.id)}`}])};return external_kbnSharedDeps_React_default.a.createElement(manage_space_page_ManageSpacePage,{capabilities:application.capabilities,getFeatures:features.getFeatures,notifications:notifications,spacesManager:spacesManager,spaceId:spaceId,onLoadSpace:onLoadSpace,history:history,getUrlForApp:application.getUrlForApp})};Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(i18nStart.Context,null,external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_["RedirectAppLinks"],{application:application},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Router"],{history:history},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Switch"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:["","/"],exact:true},external_kbnSharedDeps_React_default.a.createElement(SpacesGridPageWithBreadcrumbs,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:"/create"},external_kbnSharedDeps_React_default.a.createElement(CreateSpacePageWithBreadcrumbs,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:"/edit/:spaceId"},external_kbnSharedDeps_React_default.a.createElement(EditSpacePageWithBreadcrumbs,null)))))),element);return()=>{chrome.docTitle.reset();Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(element)}}}}});function management_service_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class management_service_ManagementService{constructor(){management_service_defineProperty(this,"registeredSpacesManagementApp",void 0)}setup({getStartServices:getStartServices,management:management,spacesManager:spacesManager}){this.registeredSpacesManagementApp=management.sections.section.kibana.registerApp(spacesManagementApp.create({getStartServices:getStartServices,spacesManager:spacesManager}))}stop(){this.disableSpacesApp()}disableSpacesApp(){if(this.registeredSpacesManagementApp){this.registeredSpacesManagementApp.disable()}}}const spaceSelectorApp=Object.freeze({id:"space_selector",create({application:application,getStartServices:getStartServices,spacesManager:spacesManager}){application.register({id:this.id,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.spaceSelector.appTitle",{defaultMessage:"Select a space"}),chromeless:true,appRoute:"/spaces/space_selector",mount:async params=>{const[[coreStart],{renderSpaceSelectorApp:renderSpaceSelectorApp}]=await Promise.all([getStartServices(),__webpack_require__.e(1).then(__webpack_require__.bind(null,186))]);return renderSpaceSelectorApp(coreStart.i18n,params.element,{spacesManager:spacesManager,serverBasePath:coreStart.http.basePath.serverBasePath})}})}});const DEFAULT_DISPLAY_LIMIT=5;const SpaceListInternal=({namespaces:namespaces,displayLimit:displayLimit=DEFAULT_DISPLAY_LIMIT,behaviorContext:behaviorContext})=>{const{shareToSpacesDataPromise:shareToSpacesDataPromise}=useSpaces();const[isExpanded,setIsExpanded]=Object(external_kbnSharedDeps_React_["useState"])(false);const[shareToSpacesData,setShareToSpacesData]=Object(external_kbnSharedDeps_React_["useState"])();Object(external_kbnSharedDeps_React_["useEffect"])(()=>{shareToSpacesDataPromise.then(x=>{setShareToSpacesData(x)})},[shareToSpacesDataPromise]);if(!shareToSpacesData){return null}const isSharedToAllSpaces=namespaces.includes(constants["a"]);const unauthorizedSpacesCount=namespaces.filter(namespace=>namespace===constants["f"]).length;let displayedSpaces;let button=null;if(isSharedToAllSpaces){displayedSpaces=[{id:constants["a"],name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.spaceList.allSpacesLabel",{defaultMessage:`* All spaces`}),initials:"*",color:"#D3DAE6"}]}else{const authorized=namespaces.filter(namespace=>namespace!==constants["f"]);const enabledSpaceTargets=[];const disabledSpaceTargets=[];authorized.forEach(namespace=>{const spaceTarget=shareToSpacesData.spacesMap.get(namespace);if(spaceTarget===undefined){enabledSpaceTargets.push({id:namespace,name:namespace})}else if(behaviorContext==="outside-space"||!spaceTarget.isActiveSpace){if(spaceTarget.isFeatureDisabled){disabledSpaceTargets.push(spaceTarget)}else{enabledSpaceTargets.push(spaceTarget)}}});const authorizedSpaceTargets=[...enabledSpaceTargets,...disabledSpaceTargets];displayedSpaces=isExpanded||!displayLimit?authorizedSpaceTargets:authorizedSpaceTargets.slice(0,displayLimit);if(displayLimit&&authorizedSpaceTargets.length>displayLimit){button=isExpanded?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs",onClick:()=>setIsExpanded(false)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.spaceList.showLessSpacesLink",defaultMessage:"show less"})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs",onClick:()=>setIsExpanded(true)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.spaceList.showMoreSpacesLink",defaultMessage:"+{count} more",values:{count:authorizedSpaceTargets.length+unauthorizedSpacesCount-displayedSpaces.length}}))}}const unauthorizedSpacesCountBadge=!isSharedToAllSpaces&&(isExpanded||button===null)&&unauthorizedSpacesCount>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.spaceList.unauthorizedSpacesCountLabel",defaultMessage:"You don't have permission to view these spaces."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"#DDD"},"+",unauthorizedSpacesCount))):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{wrap:true,responsive:false,gutterSize:"xs"},displayedSpaces.map(space=>{const color=space.isFeatureDisabled?"hollow":space.color;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,key:space.id},external_kbnSharedDeps_React_default.a.createElement(space_avatar["a"],{space:{...space,color:color},size:"s"}))}),unauthorizedSpacesCountBadge,button)};const getSpaceListComponent=()=>props=>external_kbnSharedDeps_React_default.a.createElement(SpaceListInternal,props);const getComponents=({spacesManager:spacesManager,getStartServices:getStartServices})=>({SpacesContext:getSpacesContextWrapper({spacesManager:spacesManager,getStartServices:getStartServices}),ShareToSpaceFlyout:getShareToSpaceFlyoutComponent(),SpaceList:getSpaceListComponent(),LegacyUrlConflict:getLegacyUrlConflict({getStartServices:getStartServices})});const getUiApi=({spacesManager:spacesManager,getStartServices:getStartServices})=>{const components=getComponents({spacesManager:spacesManager,getStartServices:getStartServices});return{components:components,redirectLegacyUrl:createRedirectLegacyUrl(getStartServices)}};function plugin_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class plugin_SpacesPlugin{constructor(){plugin_defineProperty(this,"spacesManager",void 0);plugin_defineProperty(this,"spacesApi",void 0);plugin_defineProperty(this,"managementService",void 0)}setup(core,plugins){this.spacesManager=new spaces_manager_SpacesManager(core.http);this.spacesApi={ui:getUiApi({spacesManager:this.spacesManager,getStartServices:core.getStartServices}),activeSpace$:this.spacesManager.onActiveSpaceChange$,getActiveSpace:()=>this.spacesManager.getActiveSpace()};if(plugins.home){plugins.home.featureCatalogue.register(createSpacesFeatureCatalogueEntry())}if(plugins.management){this.managementService=new management_service_ManagementService;this.managementService.setup({management:plugins.management,getStartServices:core.getStartServices,spacesManager:this.spacesManager})}if(plugins.advancedSettings){const advancedSettingsService=new advanced_settings_service_AdvancedSettingsService;advancedSettingsService.setup({getActiveSpace:()=>this.spacesManager.getActiveSpace(),componentRegistry:plugins.advancedSettings.component})}if(plugins.savedObjectsManagement){const shareSavedObjectsToSpaceService=new share_saved_objects_to_space_service_ShareSavedObjectsToSpaceService;shareSavedObjectsToSpaceService.setup({savedObjectsManagementSetup:plugins.savedObjectsManagement,spacesApiUi:this.spacesApi.ui});const copySavedObjectsToSpaceService=new copy_saved_objects_to_space_service_CopySavedObjectsToSpaceService;copySavedObjectsToSpaceService.setup({spacesManager:this.spacesManager,notificationsSetup:core.notifications,savedObjectsManagementSetup:plugins.savedObjectsManagement})}spaceSelectorApp.create({getStartServices:core.getStartServices,application:core.application,spacesManager:this.spacesManager});plugins.spacesOss.registerSpacesApi(this.spacesApi);return{}}start(core){initSpacesNavControl(this.spacesManager,core);return this.spacesApi}stop(){if(this.managementService){this.managementService.stop();this.managementService=undefined}}}const public_plugin=()=>new plugin_SpacesPlugin}]);