/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window["securitySolution_bundle_jsonpfunction"]=window["securitySolution_bundle_jsonpfunction"]||[]).push([[14],{1181:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"QueryTabContentComponent",(function(){return QueryTabContentComponent}));__webpack_require__.d(__webpack_exports__,"default",(function(){return QueryTabContent}));var external_kbnSharedDeps_ElasticEui_=__webpack_require__(72);var external_kbnSharedDeps_LodashFp_=__webpack_require__(7);var external_kbnSharedDeps_React_=__webpack_require__(6);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_StyledComponents_=__webpack_require__(73);var external_kbnSharedDeps_StyledComponents_default=__webpack_require__.n(external_kbnSharedDeps_StyledComponents_);var lib=__webpack_require__(105);var fast_deep_equal=__webpack_require__(107);var fast_deep_equal_default=__webpack_require__.n(fast_deep_equal);var web=__webpack_require__(231);var store_timeline=__webpack_require__(108);var containers=__webpack_require__(407);var kibana=__webpack_require__(104);var default_headers=__webpack_require__(142);var body=__webpack_require__(400);var footer=__webpack_require__(410);var data_providers=__webpack_require__(608);var store=__webpack_require__(122);var defaults=__webpack_require__(118);var super_date_picker=__webpack_require__(244);var query_bar=__webpack_require__(495);var classnames=__webpack_require__(286);var classnames_default=__webpack_require__.n(classnames);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ShiftDirection;(function(ShiftDirection){ShiftDirection["BACK"]="back";ShiftDirection["FORWARD"]="forward"})(ShiftDirection||(ShiftDirection={}));class super_select_EuiSuperSelect extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);_defineProperty(this,"itemNodes",[]);_defineProperty(this,"_isMounted",false);_defineProperty(this,"state",{isPopoverOpen:this.props.isOpen||false});_defineProperty(this,"setItemNode",(node,index)=>{this.itemNodes[index]=node});_defineProperty(this,"openPopover",()=>{this.setState({isPopoverOpen:true});const focusSelected=()=>{const indexOfSelected=this.props.options.reduce((acc,option,index)=>{if(acc!=null)return acc;if(option==null)return null;return option.value===this.props.valueOfSelected?index:null},null);requestAnimationFrame(()=>{if(!this._isMounted){return}if(this.props.valueOfSelected!=null){if(indexOfSelected!=null){this.focusItemAt(indexOfSelected)}else{focusSelected()}}})};requestAnimationFrame(focusSelected)});_defineProperty(this,"closePopover",()=>{this.setState({isPopoverOpen:false})});_defineProperty(this,"itemClicked",value=>{this.setState({isPopoverOpen:false});if(this.props.onChange){this.props.onChange(value)}});_defineProperty(this,"onSelectKeyDown",event=>{if(event.key===external_kbnSharedDeps_ElasticEui_["keys"].ARROW_UP||event.key===external_kbnSharedDeps_ElasticEui_["keys"].ARROW_DOWN){event.preventDefault();event.stopPropagation();this.openPopover()}});_defineProperty(this,"onItemKeyDown",event=>{switch(event.key){case external_kbnSharedDeps_ElasticEui_["keys"].ESCAPE:event.preventDefault();event.stopPropagation();this.closePopover();break;case external_kbnSharedDeps_ElasticEui_["keys"].TAB:event.preventDefault();event.stopPropagation();break;case external_kbnSharedDeps_ElasticEui_["keys"].ARROW_UP:event.preventDefault();event.stopPropagation();this.shiftFocus(ShiftDirection.BACK);break;case external_kbnSharedDeps_ElasticEui_["keys"].ARROW_DOWN:event.preventDefault();event.stopPropagation();this.shiftFocus(ShiftDirection.FORWARD);break}})}componentDidMount(){this._isMounted=true;if(this.props.isOpen){this.openPopover()}}componentWillUnmount(){this._isMounted=false}focusItemAt(index){const targetElement=this.itemNodes[index];if(targetElement!=null){targetElement.focus()}}shiftFocus(direction){const currentIndex=this.itemNodes.indexOf(document.activeElement);let targetElementIndex;if(currentIndex===-1){targetElementIndex=0}else{if(direction===ShiftDirection.BACK){targetElementIndex=currentIndex===0?this.itemNodes.length-1:currentIndex-1}else{targetElementIndex=currentIndex===this.itemNodes.length-1?0:currentIndex+1}}this.focusItemAt(targetElementIndex)}render(){const{className:className,options:options,valueOfSelected:valueOfSelected,onChange:onChange,isOpen:isOpen,isInvalid:isInvalid,hasDividers:hasDividers,itemClassName:itemClassName,itemLayoutAlign:itemLayoutAlign,fullWidth:fullWidth,popoverClassName:popoverClassName,compressed:compressed,...rest}=this.props;const popoverClasses=classnames_default()("euiSuperSelect",popoverClassName);const buttonClasses=classnames_default()({"euiSuperSelect--isOpen__button":this.state.isPopoverOpen},className);const itemClasses=classnames_default()("euiSuperSelect__item",{"euiSuperSelect__item--hasDividers":hasDividers},itemClassName);const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperSelectControl"],_extends({options:options,value:valueOfSelected,onClick:this.state.isPopoverOpen?this.closePopover:this.openPopover,onKeyDown:this.onSelectKeyDown,className:buttonClasses,fullWidth:fullWidth,isInvalid:isInvalid,compressed:compressed},rest));const items=options.map((option,index)=>{const{value:value,dropdownDisplay:dropdownDisplay,inputDisplay:inputDisplay,...optionRest}=option;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],_extends({key:index,className:itemClasses,icon:valueOfSelected===value?"check":"empty",onClick:()=>this.itemClicked(value),onKeyDown:this.onItemKeyDown,layoutAlign:itemLayoutAlign,buttonRef:node=>this.setItemNode(node,index),role:"option",id:value,"aria-selected":valueOfSelected===value},optionRest),dropdownDisplay||inputDisplay)});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInputPopover"],{className:popoverClasses,input:button,isOpen:isOpen||this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",panelClassName:popoverClasses,fullWidth:fullWidth,repositionOnScroll:true,anchorPosition:"downCenter"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiScreenReaderOnly"],null,external_kbnSharedDeps_React_default.a.createElement("p",{role:"alert"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiI18n"],{token:"euiSuperSelect.screenReaderAnnouncement",default:"You are in a form selector of {optionsCount} items and must select a single option. Use the up and down keys to navigate or escape to close.",values:{optionsCount:options.length}}))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"euiSuperSelect__listbox",role:"listbox","aria-activedescendant":valueOfSelected,tabIndex:0},items))}}_defineProperty(super_select_EuiSuperSelect,"defaultProps",{compressed:false,fullWidth:false,hasDividers:false,isInvalid:false,isLoading:false});var and_or_badge=__webpack_require__(188);var translations=__webpack_require__(320);const AndOrContainer=external_kbnSharedDeps_StyledComponents_default.a.div.withConfig({displayName:"AndOrContainer",componentId:"sc-1mndpti-0"})(["position:relative;top:-1px;"]);AndOrContainer.displayName="AndOrContainer";const modes={filter:{mode:"filter",description:translations["f"],kqlBarTooltip:translations["i"],placeholder:translations["g"],selectText:translations["h"]},search:{mode:"search",description:translations["o"],kqlBarTooltip:translations["r"],placeholder:translations["p"],selectText:translations["q"]}};const helpers_options=[{value:modes.filter.mode,inputDisplay:external_kbnSharedDeps_React_default.a.createElement(AndOrContainer,null,external_kbnSharedDeps_React_default.a.createElement(and_or_badge["a"],{type:"and"}),modes.filter.selectText),dropdownDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(and_or_badge["a"],{type:"and"}),external_kbnSharedDeps_React_default.a.createElement("strong",null,modes.filter.selectText),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"euiTextColor--subdued"},modes.filter.description)))},{value:modes.search.mode,inputDisplay:external_kbnSharedDeps_React_default.a.createElement(AndOrContainer,null,external_kbnSharedDeps_React_default.a.createElement(and_or_badge["a"],{type:"or"}),modes.search.selectText),dropdownDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(and_or_badge["a"],{type:"or"}),external_kbnSharedDeps_React_default.a.createElement("strong",null,modes.search.selectText),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"euiTextColor--subdued"},modes.search.description)))}];const getPlaceholderText=kqlMode=>kqlMode==="filter"?translations["g"]:translations["p"];const timelineSelectModeItemsClassName="timelineSelectModeItemsClassName";const searchOrFilterPopoverClassName="searchOrFilterPopover";const searchOrFilterPopoverWidth="352px";const SearchOrFilterGlobalStyle=external_kbnSharedDeps_StyledComponents_["createGlobalStyle"]`
  .${timelineSelectModeItemsClassName} {
    width: 350px !important;
  }

  .${searchOrFilterPopoverClassName}.euiPopover__panel {
    width: ${searchOrFilterPopoverWidth} !important;

    .euiSuperSelect__listbox {
      width: ${searchOrFilterPopoverWidth} !important;
    }
  }
`;const SearchOrFilterContainer=external_kbnSharedDeps_StyledComponents_default.a.div.withConfig({displayName:"SearchOrFilterContainer",componentId:"izkbfu-0"})([""," user-select:none;.globalQueryBar{padding:0px;.kbnQueryBar{div:first-child{margin-right:0px;}}.globalFilterGroup__wrapper.globalFilterGroup__wrapper-isVisible{height:auto !important;}}"],({theme:theme})=>`margin-top: ${theme.eui.euiSizeXS};`);SearchOrFilterContainer.displayName="SearchOrFilterContainer";const ModeFlexItem=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"]).withConfig({displayName:"ModeFlexItem",componentId:"izkbfu-1"})(["user-select:none;"]);ModeFlexItem.displayName="ModeFlexItem";const SearchOrFilter=external_kbnSharedDeps_React_default.a.memo(({dataProviders:dataProviders,isRefreshPaused:isRefreshPaused,filters:filters,filterManager:filterManager,filterQuery:filterQuery,from:from,fromStr:fromStr,kqlMode:kqlMode,timelineId:timelineId,refreshInterval:refreshInterval,savedQueryId:savedQueryId,setFilters:setFilters,setSavedQueryId:setSavedQueryId,to:to,toStr:toStr,updateKqlMode:updateKqlMode,updateReduxTime:updateReduxTime})=>{const handleChange=Object(external_kbnSharedDeps_React_["useCallback"])(mode=>updateKqlMode({id:timelineId,kqlMode:mode}),[timelineId,updateKqlMode]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(SearchOrFilterContainer,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{"data-test-subj":"timeline-search-or-filter",gutterSize:"xs"},external_kbnSharedDeps_React_default.a.createElement(ModeFlexItem,{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:translations["j"]},external_kbnSharedDeps_React_default.a.createElement(super_select_EuiSuperSelect,{"data-test-subj":"timeline-select-search-or-filter",hasDividers:true,itemLayoutAlign:"top",itemClassName:timelineSelectModeItemsClassName,onChange:handleChange,options:helpers_options,popoverClassName:searchOrFilterPopoverClassName,valueOfSelected:kqlMode}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{"data-test-subj":"timeline-search-or-filter-search-container"},external_kbnSharedDeps_React_default.a.createElement(query_bar["a"],{dataProviders:dataProviders,filters:filters,filterManager:filterManager,filterQuery:filterQuery,from:from,fromStr:fromStr,kqlMode:kqlMode,isRefreshPaused:isRefreshPaused,refreshInterval:refreshInterval,savedQueryId:savedQueryId,setFilters:setFilters,setSavedQueryId:setSavedQueryId,timelineId:timelineId,to:to,toStr:toStr,updateReduxTime:updateReduxTime})))),external_kbnSharedDeps_React_default.a.createElement(SearchOrFilterGlobalStyle,null))});SearchOrFilter.displayName="SearchOrFilter";const StatefulSearchOrFilterComponent=external_kbnSharedDeps_React_default.a.memo(({dataProviders:dataProviders,filters:filters,filterManager:filterManager,filterQuery:filterQuery,from:from,fromStr:fromStr,isRefreshPaused:isRefreshPaused,kqlMode:kqlMode,refreshInterval:refreshInterval,savedQueryId:savedQueryId,setFilters:setFilters,setSavedQueryId:setSavedQueryId,timelineId:timelineId,to:to,toStr:toStr,updateKqlMode:updateKqlMode,updateReduxTime:updateReduxTime})=>{const setFiltersInTimeline=Object(external_kbnSharedDeps_React_["useCallback"])(newFilters=>setFilters({id:timelineId,filters:newFilters}),[timelineId,setFilters]);const setSavedQueryInTimeline=Object(external_kbnSharedDeps_React_["useCallback"])(newSavedQueryId=>setSavedQueryId({id:timelineId,savedQueryId:newSavedQueryId}),[timelineId,setSavedQueryId]);return external_kbnSharedDeps_React_default.a.createElement(SearchOrFilter,{dataProviders:dataProviders,filters:filters,filterManager:filterManager,filterQuery:filterQuery,from:from,fromStr:fromStr,isRefreshPaused:isRefreshPaused,kqlMode:kqlMode,refreshInterval:refreshInterval,savedQueryId:savedQueryId,setFilters:setFiltersInTimeline,setSavedQueryId:setSavedQueryInTimeline,timelineId:timelineId,to:to,toStr:toStr,updateKqlMode:updateKqlMode,updateReduxTime:updateReduxTime})},(prevProps,nextProps)=>prevProps.filterManager===nextProps.filterManager&&prevProps.from===nextProps.from&&prevProps.fromStr===nextProps.fromStr&&prevProps.to===nextProps.to&&prevProps.toStr===nextProps.toStr&&prevProps.isRefreshPaused===nextProps.isRefreshPaused&&prevProps.refreshInterval===nextProps.refreshInterval&&prevProps.timelineId===nextProps.timelineId&&fast_deep_equal_default()(prevProps.dataProviders,nextProps.dataProviders)&&fast_deep_equal_default()(prevProps.filters,nextProps.filters)&&fast_deep_equal_default()(prevProps.filterQuery,nextProps.filterQuery)&&fast_deep_equal_default()(prevProps.kqlMode,nextProps.kqlMode)&&fast_deep_equal_default()(prevProps.savedQueryId,nextProps.savedQueryId)&&fast_deep_equal_default()(prevProps.timelineId,nextProps.timelineId));StatefulSearchOrFilterComponent.displayName="StatefulSearchOrFilterComponent";const makeMapStateToProps=()=>{const getTimeline=store_timeline["b"].getTimelineByIdSelector();const getKqlFilterQuery=store_timeline["b"].getKqlFilterKuerySelector();const getInputsTimeline=store["inputsSelectors"].getTimelineSelector();const getInputsPolicy=store["inputsSelectors"].getTimelinePolicySelector();const mapStateToProps=(state,{timelineId:timelineId})=>{var _getTimeline;const timeline=(_getTimeline=getTimeline(state,timelineId))!==null&&_getTimeline!==void 0?_getTimeline:defaults["a"];const input=getInputsTimeline(state);const policy=getInputsPolicy(state);return{dataProviders:timeline.dataProviders,filterQuery:getKqlFilterQuery(state,timelineId),filters:timeline.filters,from:input.timerange.from,fromStr:input.timerange.fromStr,isRefreshPaused:policy.kind==="manual",kqlMode:Object(external_kbnSharedDeps_LodashFp_["getOr"])("filter","kqlMode",timeline),refreshInterval:policy.duration,savedQueryId:Object(external_kbnSharedDeps_LodashFp_["getOr"])(null,"savedQueryId",timeline),to:input.timerange.to,toStr:input.timerange.toStr}};return mapStateToProps};const mapDispatchToProps=dispatch=>({applyKqlFilterQuery:({id:id,filterQuery:filterQuery})=>dispatch(store_timeline["a"].applyKqlFilterQuery({id:id,filterQuery:filterQuery})),updateKqlMode:({id:id,kqlMode:kqlMode})=>dispatch(store_timeline["a"].updateKqlMode({id:id,kqlMode:kqlMode})),setSavedQueryId:({id:id,savedQueryId:savedQueryId})=>dispatch(store_timeline["a"].setSavedQueryId({id:id,savedQueryId:savedQueryId})),setFilters:({id:id,filters:filters})=>dispatch(store_timeline["a"].setFilters({id:id,filters:filters})),updateReduxTime:Object(super_date_picker["b"])(dispatch)});const connector=Object(lib["connect"])(makeMapStateToProps,mapDispatchToProps);const StatefulSearchOrFilter=connector(StatefulSearchOrFilterComponent);var header_translations=__webpack_require__(490);var types_timeline=__webpack_require__(106);const TimelineHeaderComponent=({filterManager:filterManager,show:show,showCallOutUnauthorizedMsg:showCallOutUnauthorizedMsg,status:status,timelineId:timelineId})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,showCallOutUnauthorizedMsg&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"timelineCallOutUnauthorized",title:header_translations["b"],color:"warning",iconType:"alert",size:"s"}),status===types_timeline["g"].immutable&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"timelineImmutableCallOut",title:header_translations["a"],color:"primary",iconType:"alert",size:"s"}),show&&external_kbnSharedDeps_React_default.a.createElement(data_providers["a"],{timelineId:timelineId}),external_kbnSharedDeps_React_default.a.createElement(StatefulSearchOrFilter,{filterManager:filterManager,timelineId:timelineId}));const TimelineHeader=external_kbnSharedDeps_React_default.a.memo(TimelineHeaderComponent);var helpers=__webpack_require__(119);var refetch_timeline=__webpack_require__(482);var public_=__webpack_require__(77);var manage_timeline=__webpack_require__(152);var default_config=__webpack_require__(204);var event_details_width_context=__webpack_require__(272);var pick_events=__webpack_require__(523);var sourcerer=__webpack_require__(137);var model=__webpack_require__(117);var containers_sourcerer=__webpack_require__(124);var use_timeline_events_count=__webpack_require__(388);var date_picker_lock=__webpack_require__(524);var use_full_screen=__webpack_require__(139);var active_timeline_context=__webpack_require__(223);var side_panel=__webpack_require__(280);var exit_full_screen=__webpack_require__(310);const TimelineHeaderContainer=external_kbnSharedDeps_StyledComponents_default.a.div.withConfig({displayName:"TimelineHeaderContainer",componentId:"fm1ksw-0"})(["margin-top:6px;width:100%;"]);TimelineHeaderContainer.displayName="TimelineHeaderContainer";const StyledEuiFlyoutHeader=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"]).withConfig({displayName:"StyledEuiFlyoutHeader",componentId:"fm1ksw-1"})(["align-items:stretch;box-shadow:none;display:flex;flex-direction:column;&.euiFlyoutHeader{","}"],({theme:theme})=>`padding: ${theme.eui.euiSizeM} ${theme.eui.euiSizeS} 0 ${theme.eui.euiSizeS};`);const StyledEuiFlyoutBody=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"]).withConfig({displayName:"StyledEuiFlyoutBody",componentId:"fm1ksw-2"})(["overflow-y:hidden;flex:1;.euiFlyoutBody__overflow{overflow:hidden;mask-image:none;}.euiFlyoutBody__overflowContent{padding:0;height:100%;display:flex;}"]);const StyledEuiFlyoutFooter=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"]).withConfig({displayName:"StyledEuiFlyoutFooter",componentId:"fm1ksw-3"})(["background:none;&.euiFlyoutFooter{","}"],({theme:theme})=>`padding: ${theme.eui.euiSizeS} 0;`);const FullWidthFlexGroup=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"]).withConfig({displayName:"FullWidthFlexGroup",componentId:"fm1ksw-4"})(["margin:0;width:100%;overflow:hidden;"]);const ScrollableFlexItem=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"]).withConfig({displayName:"ScrollableFlexItem",componentId:"fm1ksw-5"})([""," overflow:hidden;"],({theme:theme})=>`margin: 0 ${theme.eui.euiSizeM};`);const DatePicker=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"]).withConfig({displayName:"DatePicker",componentId:"fm1ksw-6"})([".euiSuperDatePicker__flexWrapper{max-width:none;width:auto;}"]);DatePicker.displayName="DatePicker";const VerticalRule=external_kbnSharedDeps_StyledComponents_default.a.div.withConfig({displayName:"VerticalRule",componentId:"fm1ksw-7"})(["width:2px;height:100%;background:",";"],({theme:theme})=>theme.eui.euiColorLightShade);VerticalRule.displayName="VerticalRule";const EventsCountBadge=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiBadge"]).withConfig({displayName:"EventsCountBadge",componentId:"fm1ksw-8"})(["margin-left:",";"],({theme:theme})=>theme.eui.paddingSizes.s);const isTimerangeSame=(prevProps,nextProps)=>prevProps.end===nextProps.end&&prevProps.start===nextProps.start&&prevProps.timerangeKind===nextProps.timerangeKind;const compareQueryProps=(prevProps,nextProps)=>prevProps.kqlMode===nextProps.kqlMode&&prevProps.kqlQueryExpression===nextProps.kqlQueryExpression&&fast_deep_equal_default()(prevProps.filters,nextProps.filters);const EMPTY_EVENTS=[];const QueryTabContentComponent=({activeTab:activeTab,columns:columns,dataProviders:dataProviders,end:end,eventType:eventType,expandedDetail:expandedDetail,filters:filters,timelineId:timelineId,isLive:isLive,itemsPerPage:itemsPerPage,itemsPerPageOptions:itemsPerPageOptions,kqlMode:kqlMode,kqlQueryExpression:kqlQueryExpression,onEventClosed:onEventClosed,show:show,showCallOutUnauthorizedMsg:showCallOutUnauthorizedMsg,showExpandedDetails:showExpandedDetails,start:start,status:status,sort:sort,timerangeKind:timerangeKind,updateEventTypeAndIndexesName:updateEventTypeAndIndexesName})=>{var _combinedQueries$filt,_pageInfo$activePage;const{portalNode:timelineEventsCountPortalNode}=Object(use_timeline_events_count["d"])();const{setTimelineFullScreen:setTimelineFullScreen,timelineFullScreen:timelineFullScreen}=Object(use_full_screen["b"])();const{browserFields:browserFields,docValueFields:docValueFields,loading:loadingSourcerer,indexPattern:indexPattern,selectedPatterns:selectedPatterns}=Object(containers_sourcerer["b"])(model["SourcererScopeName"].timeline);const{uiSettings:uiSettings}=Object(kibana["h"])().services;const[filterManager]=Object(external_kbnSharedDeps_React_["useState"])(new public_["FilterManager"](uiSettings));const esQueryConfig=Object(external_kbnSharedDeps_React_["useMemo"])(()=>public_["esQuery"].getEsQueryConfig(uiSettings),[uiSettings]);const kqlQuery={query:kqlQueryExpression,language:"kuery"};const combinedQueries=Object(helpers["k"])({config:esQueryConfig,dataProviders:dataProviders,indexPattern:indexPattern,browserFields:browserFields,filters:filters,kqlQuery:kqlQuery,kqlMode:kqlMode});const isBlankTimeline=Object(external_kbnSharedDeps_LodashFp_["isEmpty"])(dataProviders)&&Object(external_kbnSharedDeps_LodashFp_["isEmpty"])(filters)&&Object(external_kbnSharedDeps_LodashFp_["isEmpty"])(kqlQuery.query);const canQueryTimeline=()=>combinedQueries!=null&&loadingSourcerer!=null&&!loadingSourcerer&&!Object(external_kbnSharedDeps_LodashFp_["isEmpty"])(start)&&!Object(external_kbnSharedDeps_LodashFp_["isEmpty"])(end);const getTimelineQueryFields=()=>{const columnsHeader=Object(external_kbnSharedDeps_LodashFp_["isEmpty"])(columns)?default_headers["c"]:columns;const columnFields=columnsHeader.map(c=>c.id);return[...columnFields,...default_config["f"]]};const timelineQuerySortField=sort.map(({columnId:columnId,columnType:columnType,sortDirection:sortDirection})=>({field:columnId,direction:sortDirection,type:columnType}));const{initializeTimeline:initializeTimeline,setIsTimelineLoading:setIsTimelineLoading}=Object(manage_timeline["b"])();Object(external_kbnSharedDeps_React_["useEffect"])(()=>{initializeTimeline({filterManager:filterManager,id:timelineId})},[initializeTimeline,filterManager,timelineId]);const[isQueryLoading,{events:events,inspect:inspect,totalCount:totalCount,pageInfo:pageInfo,loadPage:loadPage,updatedAt:updatedAt,refetch:refetch}]=Object(containers["a"])({docValueFields:docValueFields,endDate:end,id:timelineId,indexNames:selectedPatterns,fields:getTimelineQueryFields(),language:kqlQuery.language,limit:itemsPerPage,filterQuery:(_combinedQueries$filt=combinedQueries===null||combinedQueries===void 0?void 0:combinedQueries.filterQuery)!==null&&_combinedQueries$filt!==void 0?_combinedQueries$filt:"",startDate:start,skip:!canQueryTimeline(),sort:timelineQuerySortField,timerangeKind:timerangeKind});const handleOnPanelClosed=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{var _expandedDetail$Timel;onEventClosed({tabType:types_timeline["h"].query,timelineId:timelineId});if((_expandedDetail$Timel=expandedDetail[types_timeline["h"].query])!==null&&_expandedDetail$Timel!==void 0&&_expandedDetail$Timel.panelView&&timelineId===types_timeline["e"].active&&showExpandedDetails){active_timeline_context["a"].toggleExpandedDetail({})}},[onEventClosed,timelineId,expandedDetail,showExpandedDetails]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{setIsTimelineLoading({id:timelineId,isLoading:isQueryLoading||loadingSourcerer})},[loadingSourcerer,timelineId,isQueryLoading,setIsTimelineLoading]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(web["a"],{node:timelineEventsCountPortalNode},totalCount>=0?external_kbnSharedDeps_React_default.a.createElement(EventsCountBadge,null,totalCount):null),external_kbnSharedDeps_React_default.a.createElement(refetch_timeline["a"],{id:`${timelineId}-${types_timeline["h"].query}`,inputId:"timeline",inspect:inspect,loading:isQueryLoading,refetch:refetch}),external_kbnSharedDeps_React_default.a.createElement(FullWidthFlexGroup,{gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(ScrollableFlexItem,{grow:2},external_kbnSharedDeps_React_default.a.createElement(StyledEuiFlyoutHeader,{"data-test-subj":`${activeTab}-tab-flyout-header`,hasBorder:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s","data-test-subj":"timeline-date-picker-container"},timelineFullScreen&&setTimelineFullScreen!=null&&external_kbnSharedDeps_React_default.a.createElement(exit_full_screen["b"],{fullScreen:timelineFullScreen,setFullScreen:setTimelineFullScreen}),external_kbnSharedDeps_React_default.a.createElement(DatePicker,{grow:1},external_kbnSharedDeps_React_default.a.createElement(super_date_picker["a"],{id:"timeline",timelineId:timelineId})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(date_picker_lock["a"],null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(pick_events["a"],{eventType:eventType,onChangeEventTypeAndIndexesName:updateEventTypeAndIndexesName}))),external_kbnSharedDeps_React_default.a.createElement(TimelineHeaderContainer,{"data-test-subj":"timelineHeader"},external_kbnSharedDeps_React_default.a.createElement(TimelineHeader,{filterManager:filterManager,show:show&&activeTab===types_timeline["h"].query,showCallOutUnauthorizedMsg:showCallOutUnauthorizedMsg,status:status,timelineId:timelineId}))),external_kbnSharedDeps_React_default.a.createElement(event_details_width_context["a"],null,external_kbnSharedDeps_React_default.a.createElement(StyledEuiFlyoutBody,{"data-test-subj":`${types_timeline["h"].query}-tab-flyout-body`,className:"timeline-flyout-body"},external_kbnSharedDeps_React_default.a.createElement(body["a"],{activePage:pageInfo.activePage,browserFields:browserFields,data:isBlankTimeline?EMPTY_EVENTS:events,id:timelineId,refetch:refetch,sort:sort,tabType:types_timeline["h"].query,totalPages:Object(helpers["j"])({itemsCount:totalCount,itemsPerPage:itemsPerPage})})),external_kbnSharedDeps_React_default.a.createElement(StyledEuiFlyoutFooter,{"data-test-subj":`${types_timeline["h"].query}-tab-flyout-footer`,className:"timeline-flyout-footer"},!isBlankTimeline&&external_kbnSharedDeps_React_default.a.createElement(footer["a"],{activePage:(_pageInfo$activePage=pageInfo===null||pageInfo===void 0?void 0:pageInfo.activePage)!==null&&_pageInfo$activePage!==void 0?_pageInfo$activePage:0,"data-test-subj":"timeline-footer",updatedAt:updatedAt,height:footer["b"],id:timelineId,isLive:isLive,isLoading:isQueryLoading||loadingSourcerer,itemsCount:isBlankTimeline?0:events.length,itemsPerPage:itemsPerPage,itemsPerPageOptions:itemsPerPageOptions,onChangePage:loadPage,totalCount:isBlankTimeline?0:totalCount})))),showExpandedDetails&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(VerticalRule,null),external_kbnSharedDeps_React_default.a.createElement(ScrollableFlexItem,{grow:1},external_kbnSharedDeps_React_default.a.createElement(side_panel["a"],{browserFields:browserFields,docValueFields:docValueFields,handleOnPanelClosed:handleOnPanelClosed,tabType:types_timeline["h"].query,timelineId:timelineId})))))};const query_tab_content_makeMapStateToProps=()=>{const getShowCallOutUnauthorizedMsg=store_timeline["b"].getShowCallOutUnauthorizedMsg();const getTimeline=store_timeline["b"].getTimelineByIdSelector();const getKqlQueryTimeline=store_timeline["b"].getKqlFilterKuerySelector();const getInputsTimeline=store["inputsSelectors"].getTimelineSelector();const mapStateToProps=(state,{timelineId:timelineId})=>{var _getTimeline,_kqlQueryTimeline$exp,_kqlQueryTimeline$exp2,_expandedDetail$Timel2;const timeline=(_getTimeline=getTimeline(state,timelineId))!==null&&_getTimeline!==void 0?_getTimeline:defaults["a"];const input=getInputsTimeline(state);const{activeTab:activeTab,columns:columns,dataProviders:dataProviders,eventType:eventType,expandedDetail:expandedDetail,filters:filters,itemsPerPage:itemsPerPage,itemsPerPageOptions:itemsPerPageOptions,kqlMode:kqlMode,show:show,sort:sort,status:status,timelineType:timelineType}=timeline;const kqlQueryTimeline=getKqlQueryTimeline(state,timelineId);const timelineFilter=kqlMode==="filter"?filters||[]:[];const kqlQueryExpression=Object(external_kbnSharedDeps_LodashFp_["isEmpty"])(dataProviders)&&Object(external_kbnSharedDeps_LodashFp_["isEmpty"])((_kqlQueryTimeline$exp=kqlQueryTimeline===null||kqlQueryTimeline===void 0?void 0:kqlQueryTimeline.expression)!==null&&_kqlQueryTimeline$exp!==void 0?_kqlQueryTimeline$exp:"")&&timelineType==="template"?" ":(_kqlQueryTimeline$exp2=kqlQueryTimeline===null||kqlQueryTimeline===void 0?void 0:kqlQueryTimeline.expression)!==null&&_kqlQueryTimeline$exp2!==void 0?_kqlQueryTimeline$exp2:"";return{activeTab:activeTab,columns:columns,dataProviders:dataProviders,eventType:eventType!==null&&eventType!==void 0?eventType:"raw",end:input.timerange.to,expandedDetail:expandedDetail,filters:timelineFilter,timelineId:timelineId,isLive:input.policy.kind==="interval",itemsPerPage:itemsPerPage,itemsPerPageOptions:itemsPerPageOptions,kqlMode:kqlMode,kqlQueryExpression:kqlQueryExpression,showCallOutUnauthorizedMsg:getShowCallOutUnauthorizedMsg(state),show:show,showExpandedDetails:!!expandedDetail[types_timeline["h"].query]&&!!((_expandedDetail$Timel2=expandedDetail[types_timeline["h"].query])!==null&&_expandedDetail$Timel2!==void 0&&_expandedDetail$Timel2.panelView),sort:sort,start:input.timerange.from,status:status,timerangeKind:input.timerange.kind}};return mapStateToProps};const query_tab_content_mapDispatchToProps=(dispatch,{timelineId:timelineId})=>({updateEventTypeAndIndexesName:(newEventType,newIndexNames)=>{dispatch(store_timeline["a"].updateEventType({id:timelineId,eventType:newEventType}));dispatch(store_timeline["a"].updateIndexNames({id:timelineId,indexNames:newIndexNames}));dispatch(sourcerer["a"].setSelectedIndexPatterns({id:model["SourcererScopeName"].timeline,selectedPatterns:newIndexNames}))},onEventClosed:args=>{dispatch(store_timeline["a"].toggleDetailPanel(args))}});const query_tab_content_connector=Object(lib["connect"])(query_tab_content_makeMapStateToProps,query_tab_content_mapDispatchToProps);const QueryTabContent=query_tab_content_connector(external_kbnSharedDeps_React_default.a.memo(QueryTabContentComponent,(prevProps,nextProps)=>compareQueryProps(prevProps,nextProps)&&prevProps.activeTab===nextProps.activeTab&&isTimerangeSame(prevProps,nextProps)&&prevProps.eventType===nextProps.eventType&&prevProps.isLive===nextProps.isLive&&prevProps.itemsPerPage===nextProps.itemsPerPage&&prevProps.onEventClosed===nextProps.onEventClosed&&prevProps.show===nextProps.show&&prevProps.showCallOutUnauthorizedMsg===nextProps.showCallOutUnauthorizedMsg&&prevProps.showExpandedDetails===nextProps.showExpandedDetails&&prevProps.status===nextProps.status&&prevProps.timelineId===nextProps.timelineId&&prevProps.updateEventTypeAndIndexesName===nextProps.updateEventTypeAndIndexesName&&fast_deep_equal_default()(prevProps.columns,nextProps.columns)&&fast_deep_equal_default()(prevProps.dataProviders,nextProps.dataProviders)&&fast_deep_equal_default()(prevProps.itemsPerPageOptions,nextProps.itemsPerPageOptions)&&fast_deep_equal_default()(prevProps.sort,nextProps.sort)))},320:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"f",(function(){return FILTER_DESCRIPTION}));__webpack_require__.d(__webpack_exports__,"i",(function(){return FILTER_KQL_TOOLTIP}));__webpack_require__.d(__webpack_exports__,"g",(function(){return FILTER_KQL_PLACEHOLDER}));__webpack_require__.d(__webpack_exports__,"h",(function(){return FILTER_KQL_SELECTED_TEXT}));__webpack_require__.d(__webpack_exports__,"o",(function(){return SEARCH_DESCRIPTION}));__webpack_require__.d(__webpack_exports__,"r",(function(){return SEARCH_KQL_TOOLTIP}));__webpack_require__.d(__webpack_exports__,"p",(function(){return SEARCH_KQL_PLACEHOLDER}));__webpack_require__.d(__webpack_exports__,"q",(function(){return SEARCH_KQL_SELECTED_TEXT}));__webpack_require__.d(__webpack_exports__,"j",(function(){return FILTER_OR_SEARCH_WITH_KQL}));__webpack_require__.d(__webpack_exports__,"a",(function(){return ALL_EVENT}));__webpack_require__.d(__webpack_exports__,"m",(function(){return RAW_EVENT}));__webpack_require__.d(__webpack_exports__,"e",(function(){return DETECTION_ALERTS_EVENT}));__webpack_require__.d(__webpack_exports__,"c",(function(){return CUSTOM_INDEX_PATTERNS}));__webpack_require__.d(__webpack_exports__,"s",(function(){return SELECT_INDEX_PATTERNS}));__webpack_require__.d(__webpack_exports__,"b",(function(){return CONFIGURE_INDEX_PATTERNS}));__webpack_require__.d(__webpack_exports__,"n",(function(){return SAVE_INDEX_PATTERNS}));__webpack_require__.d(__webpack_exports__,"t",(function(){return SHOW_INDEX_PATTERNS_ADVANCED_SETTINGS}));__webpack_require__.d(__webpack_exports__,"k",(function(){return HIDE_INDEX_PATTERNS_ADVANCED_SETTINGS}));__webpack_require__.d(__webpack_exports__,"d",(function(){return DATA_SOURCES_RESET}));__webpack_require__.d(__webpack_exports__,"l",(function(){return PICK_INDEX_PATTERNS}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__);const FILTER_DESCRIPTION=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.filterDescription",{defaultMessage:"Events from the data providers above are filtered by the adjacent KQL"});const FILTER_KQL_TOOLTIP=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.filterKqlTooltip",{defaultMessage:"Events from the data providers above are filtered by this KQL"});const FILTER_KQL_PLACEHOLDER=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.filterKqlPlaceholder",{defaultMessage:"Filter events"});const FILTER_KQL_SELECTED_TEXT=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.filterKqlSelectedText",{defaultMessage:"Filter"});const SEARCH_DESCRIPTION=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.searchDescription",{defaultMessage:"Events from the data providers above are combined with results from the adjacent KQL"});const SEARCH_KQL_TOOLTIP=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.searchKqlTooltip",{defaultMessage:"Events from the data providers above are combined with results from this KQL"});const SEARCH_KQL_PLACEHOLDER=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.searchKqlPlaceholder",{defaultMessage:"Search events"});const SEARCH_KQL_SELECTED_TEXT=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.searchKqlSelectedText",{defaultMessage:"Search"});const FILTER_OR_SEARCH_WITH_KQL=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.filterOrSearchWithKql",{defaultMessage:"Filter or Search with KQL"});const ALL_EVENT=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.eventTypeAllEvent",{defaultMessage:"All data sources"});const RAW_EVENT=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.eventTypeRawEvent",{defaultMessage:"Events"});const DETECTION_ALERTS_EVENT=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.eventTypeDetectionAlertsEvent",{defaultMessage:"Detection Alerts"});const CUSTOM_INDEX_PATTERNS=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.customeIndexNames",{defaultMessage:"Custom"});const SELECT_INDEX_PATTERNS=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.indexPatterns.help",{defaultMessage:"Data sources selection"});const CONFIGURE_INDEX_PATTERNS=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.indexPatterns.configure",{defaultMessage:"View data sources associated with each of the above selections"});const SAVE_INDEX_PATTERNS=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.indexPatterns.save",{defaultMessage:"Save"});const SHOW_INDEX_PATTERNS_ADVANCED_SETTINGS=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.indexPatterns.showAdvancedSettings",{defaultMessage:"Show Advanced"});const HIDE_INDEX_PATTERNS_ADVANCED_SETTINGS=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.indexPatterns.hideAdvancedSettings",{defaultMessage:"Hide Advanced"});const DATA_SOURCES_RESET=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.indexPatterns.resetSettings",{defaultMessage:"Reset"});const PICK_INDEX_PATTERNS=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.securitySolution.timeline.searchOrFilter.indexPatterns.pickIndexPatternsCombo",{defaultMessage:"Pick index patterns"})},394:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return QueryBar}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var fast_deep_equal__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(107);var fast_deep_equal__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(fast_deep_equal__WEBPACK_IMPORTED_MODULE_1__);var _src_plugins_data_public__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(77);var _src_plugins_data_public__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_2__);var _src_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(41);var _src_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_src_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_3__);const QueryBar=Object(react__WEBPACK_IMPORTED_MODULE_0__["memo"])(({dateRangeFrom:dateRangeFrom,dateRangeTo:dateRangeTo,hideSavedQuery:hideSavedQuery=false,indexPattern:indexPattern,isLoading:isLoading=false,isRefreshPaused:isRefreshPaused,filterQuery:filterQuery,filterManager:filterManager,filters:filters,onChangedQuery:onChangedQuery,onSubmitQuery:onSubmitQuery,refreshInterval:refreshInterval,savedQuery:savedQuery,onSavedQuery:onSavedQuery,dataTestSubj:dataTestSubj})=>{const onQuerySubmit=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(payload=>{if(payload.query!=null&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_1___default()(payload.query,filterQuery)){onSubmitQuery(payload.query)}},[filterQuery,onSubmitQuery]);const onQueryChange=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(payload=>{if(onChangedQuery&&payload.query!=null&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_1___default()(payload.query,filterQuery)){onChangedQuery(payload.query)}},[filterQuery,onChangedQuery]);const onSavedQueryUpdated=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(savedQueryUpdated=>{const{query:newQuery,filters:newFilters,timefilter:timefilter}=savedQueryUpdated.attributes;onSubmitQuery(newQuery,timefilter);filterManager.setFilters(newFilters||[]);onSavedQuery(savedQueryUpdated)},[filterManager,onSubmitQuery,onSavedQuery]);const onClearSavedQuery=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(()=>{if(savedQuery!=null){onSubmitQuery({query:"",language:savedQuery.attributes.query.language});filterManager.setFilters([]);onSavedQuery(undefined)}},[filterManager,onSubmitQuery,onSavedQuery,savedQuery]);const onFiltersUpdated=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(newFilters=>{filterManager.setFilters(newFilters)},[filterManager]);const CustomButton=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,null);const indexPatterns=Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(()=>[indexPattern],[indexPattern]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_2__["SearchBar"],{customSubmitButton:CustomButton,dateRangeFrom:dateRangeFrom,dateRangeTo:dateRangeTo,filters:filters,indexPatterns:indexPatterns,isLoading:isLoading,isRefreshPaused:isRefreshPaused,query:filterQuery,onClearSavedQuery:onClearSavedQuery,onFiltersUpdated:onFiltersUpdated,onQueryChange:onQueryChange,onQuerySubmit:onQuerySubmit,onSaved:onSavedQuery,onSavedQueryUpdated:onSavedQueryUpdated,refreshInterval:refreshInterval,showAutoRefreshOnly:false,showFilterBar:!hideSavedQuery,showDatePicker:false,showQueryBar:true,showQueryInput:true,showSaveQuery:true,timeHistory:new _src_plugins_data_public__WEBPACK_IMPORTED_MODULE_2__["TimeHistory"](new _src_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_3__["Storage"](localStorage)),dataTestSubj:dataTestSubj,savedQuery:savedQuery})});QueryBar.displayName="QueryBar"},395:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return useSavedQueryServices}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _src_plugins_data_public__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(77);var _src_plugins_data_public__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_1__);var _lib_kibana__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(104);const useSavedQueryServices=()=>{const kibana=Object(_lib_kibana__WEBPACK_IMPORTED_MODULE_2__["h"])();const client=kibana.services.savedObjects.client;const[savedQueryService,setSavedQueryService]=Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(Object(_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_1__["createSavedQueryService"])(client));Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(()=>{setSavedQueryService(Object(_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_1__["createSavedQueryService"])(client))},[client]);return savedQueryService}},495:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return QueryBarTimeline}));__webpack_require__.d(__webpack_exports__,"b",(function(){return getDataProviderFilter}));var lodash_fp__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);var lodash_fp__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_fp__WEBPACK_IMPORTED_MODULE_0__);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6);var react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);var react_redux__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(105);var react_redux__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_2__);var rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(15);var rxjs__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(rxjs__WEBPACK_IMPORTED_MODULE_3__);var fast_deep_equal__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(107);var fast_deep_equal__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(fast_deep_equal__WEBPACK_IMPORTED_MODULE_4__);var _common_containers_sourcerer__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(124);var _common_store_sourcerer_model__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(117);var _src_plugins_data_public__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(77);var _src_plugins_data_public__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_7__);var _common_lib_keury__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(158);var _common_utils_saved_query_services__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(395);var _common_components_query_bar__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(394);var _helpers__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(119);var _store_timeline__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(108);const TIMELINE_FILTER_DROP_AREA="timeline-filter-drop-area";const getNonDropAreaFilters=(filters=[])=>filters.filter(f=>f.meta.controlledBy!==TIMELINE_FILTER_DROP_AREA);const QueryBarTimeline=Object(react__WEBPACK_IMPORTED_MODULE_1__["memo"])(({dataProviders:dataProviders,filters:filters,filterManager:filterManager,filterQuery:filterQuery,from:from,fromStr:fromStr,kqlMode:kqlMode,isRefreshPaused:isRefreshPaused,savedQueryId:savedQueryId,setFilters:setFilters,setSavedQueryId:setSavedQueryId,refreshInterval:refreshInterval,timelineId:timelineId,to:to,toStr:toStr,updateReduxTime:updateReduxTime})=>{const dispatch=Object(react_redux__WEBPACK_IMPORTED_MODULE_2__["useDispatch"])();const[dateRangeFrom,setDateRangeFrom]=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(fromStr!=null?fromStr:new Date(from).toISOString());const[dateRangeTo,setDateRangTo]=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(toStr!=null?toStr:new Date(to).toISOString());const{browserFields:browserFields,indexPattern:indexPattern}=Object(_common_containers_sourcerer__WEBPACK_IMPORTED_MODULE_5__["b"])(_common_store_sourcerer_model__WEBPACK_IMPORTED_MODULE_6__["SourcererScopeName"].timeline);const[savedQuery,setSavedQuery]=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(undefined);const[filterQueryConverted,setFilterQueryConverted]=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])({query:filterQuery!=null?filterQuery.expression:"",language:filterQuery!=null?filterQuery.kind:"kuery"});const[queryBarFilters,setQueryBarFilters]=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(getNonDropAreaFilters(filters));const[dataProvidersDsl,setDataProvidersDsl]=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(Object(_common_lib_keury__WEBPACK_IMPORTED_MODULE_8__["a"])(Object(_helpers__WEBPACK_IMPORTED_MODULE_11__["i"])(dataProviders,browserFields),indexPattern));const savedQueryServices=Object(_common_utils_saved_query_services__WEBPACK_IMPORTED_MODULE_9__["a"])();const applyKqlFilterQuery=Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])((expression,kind)=>dispatch(_store_timeline__WEBPACK_IMPORTED_MODULE_12__["a"].applyKqlFilterQuery({id:timelineId,filterQuery:{kuery:{kind:kind,expression:expression},serializedQuery:Object(_common_lib_keury__WEBPACK_IMPORTED_MODULE_8__["a"])(expression,indexPattern)}})),[dispatch,indexPattern,timelineId]);Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(()=>{let isSubscribed=true;const subscriptions=new rxjs__WEBPACK_IMPORTED_MODULE_3__["Subscription"];filterManager.setFilters(filters);subscriptions.add(filterManager.getUpdates$().subscribe({next:()=>{if(isSubscribed){const filterWithoutDropArea=getNonDropAreaFilters(filterManager.getFilters());setFilters(filterWithoutDropArea);setQueryBarFilters(filterWithoutDropArea)}}}));return()=>{isSubscribed=false;subscriptions.unsubscribe()}},[]);Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(()=>{const filterWithoutDropArea=getNonDropAreaFilters(filterManager.getFilters());if(!fast_deep_equal__WEBPACK_IMPORTED_MODULE_4___default()(filters,filterWithoutDropArea)){filterManager.setFilters(filters)}},[filters]);Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(()=>{setFilterQueryConverted({query:filterQuery!=null?filterQuery.expression:"",language:filterQuery!=null?filterQuery.kind:"kuery"})},[filterQuery]);Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(()=>{setDataProvidersDsl(Object(_common_lib_keury__WEBPACK_IMPORTED_MODULE_8__["a"])(Object(_helpers__WEBPACK_IMPORTED_MODULE_11__["i"])(dataProviders,browserFields),indexPattern))},[dataProviders,browserFields,indexPattern]);Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(()=>{if(fromStr!=null&&toStr!=null){setDateRangeFrom(fromStr);setDateRangTo(toStr)}else if(from!=null&&to!=null){setDateRangeFrom(new Date(from).toISOString());setDateRangTo(new Date(to).toISOString())}},[from,fromStr,to,toStr]);Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(()=>{let isSubscribed=true;async function setSavedQueryByServices(){if(savedQueryId!=null&&savedQueryServices!=null){try{const mySavedQuery=await savedQueryServices.getSavedQuery(savedQueryId);if(isSubscribed&&mySavedQuery!=null){setSavedQuery({...mySavedQuery,attributes:{...mySavedQuery.attributes,filters:getNonDropAreaFilters(filters)}})}}catch(exc){setSavedQuery(undefined)}}else if(isSubscribed){setSavedQuery(undefined)}}setSavedQueryByServices();return()=>{isSubscribed=false}},[savedQueryId]);const onSubmitQuery=Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])((newQuery,timefilter)=>{if(filterQuery==null||filterQuery!=null&&filterQuery.expression!==newQuery.query||filterQuery.kind!==newQuery.language){applyKqlFilterQuery(newQuery.query,newQuery.language)}if(timefilter!=null){const isQuickSelection=timefilter.from.includes("now")||timefilter.to.includes("now");updateReduxTime({id:"timeline",end:timefilter.to,start:timefilter.from,isInvalid:false,isQuickSelection:isQuickSelection,timelineId:timelineId})}},[filterQuery,timelineId]);const onSavedQuery=Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(newSavedQuery=>{if(newSavedQuery!=null){if(newSavedQuery.id!==savedQueryId){setSavedQueryId(newSavedQuery.id)}if(savedQueryServices!=null&&dataProvidersDsl!==""){const dataProviderFilterExists=newSavedQuery.attributes.filters!=null?newSavedQuery.attributes.filters.findIndex(f=>f.meta.controlledBy===TIMELINE_FILTER_DROP_AREA):-1;savedQueryServices.saveQuery({...newSavedQuery.attributes,filters:newSavedQuery.attributes.filters!=null?dataProviderFilterExists>-1?[...newSavedQuery.attributes.filters.slice(0,dataProviderFilterExists),getDataProviderFilter(dataProvidersDsl),...newSavedQuery.attributes.filters.slice(dataProviderFilterExists+1)]:[...newSavedQuery.attributes.filters,getDataProviderFilter(dataProvidersDsl)]:[]},{overwrite:true})}}else{setSavedQueryId(null)}},[dataProvidersDsl,savedQueryId,savedQueryServices]);return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_common_components_query_bar__WEBPACK_IMPORTED_MODULE_10__["a"],{dateRangeFrom:dateRangeFrom,dateRangeTo:dateRangeTo,hideSavedQuery:kqlMode==="search",indexPattern:indexPattern,isRefreshPaused:isRefreshPaused,filterQuery:filterQueryConverted,filterManager:filterManager,filters:queryBarFilters,onSubmitQuery:onSubmitQuery,refreshInterval:refreshInterval,savedQuery:savedQuery,onSavedQuery:onSavedQuery,dataTestSubj:"timelineQueryInput"})});const getDataProviderFilter=dataProviderDsl=>{const dslObject=JSON.parse(dataProviderDsl);const key=Object.keys(dslObject);return{...dslObject,meta:{alias:TIMELINE_FILTER_DROP_AREA,controlledBy:TIMELINE_FILTER_DROP_AREA,negate:false,disabled:false,type:"custom",key:Object(lodash_fp__WEBPACK_IMPORTED_MODULE_0__["isEmpty"])(key)?"bool":key[0],value:dataProviderDsl},$state:{store:_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_7__["esFilters"].FilterStateStore.APP_STATE}}}},523:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PickEventType}));var external_kbnSharedDeps_ElasticEui_=__webpack_require__(72);var fast_deep_equal=__webpack_require__(107);var fast_deep_equal_default=__webpack_require__.n(fast_deep_equal);var external_kbnSharedDeps_React_=__webpack_require__(6);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var lib=__webpack_require__(105);var external_kbnSharedDeps_StyledComponents_=__webpack_require__(73);var external_kbnSharedDeps_StyledComponents_default=__webpack_require__.n(external_kbnSharedDeps_StyledComponents_);var model=__webpack_require__(117);var selectors=__webpack_require__(284);const getSourcererScopeSelector=()=>{const getkibanaIndexPatternsSelector=selectors["d"].kibanaIndexPatternsSelector();const getScopeIdSelector=selectors["d"].scopeIdSelector();const getConfigIndexPatternsSelector=selectors["d"].configIndexPatternsSelector();const getSignalIndexNameSelector=selectors["d"].signalIndexNameSelector();const mapStateToProps=(state,scopeId)=>{const kibanaIndexPatterns=getkibanaIndexPatternsSelector(state);const scope=getScopeIdSelector(state,scopeId);const configIndexPatterns=getConfigIndexPatternsSelector(state);const signalIndexName=getSignalIndexNameSelector(state);return{kibanaIndexPatterns:kibanaIndexPatterns,configIndexPatterns:configIndexPatterns,signalIndexName:signalIndexName,sourcererScope:scope}};return mapStateToProps};var translations=__webpack_require__(320);const PopoverContent=external_kbnSharedDeps_StyledComponents_default.a.div.withConfig({displayName:"PopoverContent",componentId:"sc-13xuah3-0"})(["width:600px;"]);const ResetButton=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"]).withConfig({displayName:"ResetButton",componentId:"sc-13xuah3-1"})(["width:fit-content;"]);const MyEuiButton=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiButton"]).withConfig({displayName:"MyEuiButton",componentId:"sc-13xuah3-2"})([".euiHealth{vertical-align:middle;}"]);const AllEuiHealth=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiHealth"]).withConfig({displayName:"AllEuiHealth",componentId:"sc-13xuah3-3"})(["margin-left:-2px;svg{stroke:#fff;stroke-width:1px;stroke-linejoin:round;width:19px;height:19px;margin-top:1px;z-index:1;}"]);const WarningEuiHealth=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiHealth"]).withConfig({displayName:"WarningEuiHealth",componentId:"sc-13xuah3-4"})(["margin-left:-17px;svg{z-index:0;}"]);const AdvancedSettings=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiText"]).withConfig({displayName:"AdvancedSettings",componentId:"sc-13xuah3-5"})(["color:",";"],({theme:theme})=>theme.eui.euiColorPrimary);const ConfigHelper=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiText"]).withConfig({displayName:"ConfigHelper",componentId:"sc-13xuah3-6"})(["margin-left:4px;"]);const Filter=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiRadioGroup"]).withConfig({displayName:"Filter",componentId:"sc-13xuah3-7"})(["margin-left:4px;"]);const PickEventContainer=external_kbnSharedDeps_StyledComponents_default.a.div.withConfig({displayName:"PickEventContainer",componentId:"sc-13xuah3-8"})([".euiSuperSelect{width:170px;max-width:170px;button.euiSuperSelectControl{padding-top:3px;}}"]);const getEventTypeOptions=(isCustomDisabled=true)=>[{id:"all",label:external_kbnSharedDeps_React_default.a.createElement(AllEuiHealth,{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(WarningEuiHealth,{color:"warning"},translations["a"]))},{id:"raw",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHealth"],{color:"subdued"}," ",translations["m"])},{id:"alert",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHealth"],{color:"warning"}," ",translations["e"])},{id:"custom",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,translations["c"]),disabled:isCustomDisabled}];const PickEventTypeComponents=({eventType:eventType="all",onChangeEventTypeAndIndexesName:onChangeEventTypeAndIndexesName})=>{const[isPopoverOpen,setPopover]=Object(external_kbnSharedDeps_React_["useState"])(false);const[showAdvanceSettings,setAdvanceSettings]=Object(external_kbnSharedDeps_React_["useState"])(eventType==="custom");const[filterEventType,setFilterEventType]=Object(external_kbnSharedDeps_React_["useState"])(eventType);const sourcererScopeSelector=Object(external_kbnSharedDeps_React_["useMemo"])(getSourcererScopeSelector,[]);const{configIndexPatterns:configIndexPatterns,kibanaIndexPatterns:kibanaIndexPatterns,signalIndexName:signalIndexName,sourcererScope:sourcererScope}=Object(lib["useSelector"])(state=>sourcererScopeSelector(state,model["SourcererScopeName"].timeline),fast_deep_equal_default.a);const[selectedOptions,setSelectedOptions]=Object(external_kbnSharedDeps_React_["useState"])(sourcererScope.selectedPatterns.map(indexSelected=>({label:indexSelected,value:indexSelected})));const indexesPatternOptions=Object(external_kbnSharedDeps_React_["useMemo"])(()=>[...configIndexPatterns,...kibanaIndexPatterns.map(kip=>kip.title),signalIndexName].reduce((acc,index)=>{if(index!=null&&!acc.some(o=>o.label.includes(index))){return[...acc,{label:index,value:index}]}return acc},[]),[configIndexPatterns,kibanaIndexPatterns,signalIndexName]);const renderOption=Object(external_kbnSharedDeps_React_["useCallback"])(option=>{const{value:value}=option;if(kibanaIndexPatterns.some(kip=>kip.title===value)){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"logoKibana",size:"s"})," ",value)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,value)},[kibanaIndexPatterns]);const onChangeCombo=Object(external_kbnSharedDeps_React_["useCallback"])(newSelectedOptions=>{const localSelectedPatterns=newSelectedOptions.map(nso=>nso.label);if(localSelectedPatterns.sort().join()===[...configIndexPatterns,signalIndexName].sort().join()){setFilterEventType("all")}else if(localSelectedPatterns.sort().join()===configIndexPatterns.sort().join()){setFilterEventType("raw")}else if(localSelectedPatterns.sort().join()===signalIndexName){setFilterEventType("alert")}else{setFilterEventType("custom")}setSelectedOptions(newSelectedOptions)},[configIndexPatterns,signalIndexName]);const onChangeFilter=Object(external_kbnSharedDeps_React_["useCallback"])(filter=>{setFilterEventType(filter);if(filter==="all"){setSelectedOptions([...configIndexPatterns,signalIndexName!==null&&signalIndexName!==void 0?signalIndexName:""].map(indexSelected=>({label:indexSelected,value:indexSelected})))}else if(filter==="raw"){setSelectedOptions(configIndexPatterns.map(indexSelected=>({label:indexSelected,value:indexSelected})))}else if(filter==="alert"){setSelectedOptions([{label:signalIndexName!==null&&signalIndexName!==void 0?signalIndexName:"",value:signalIndexName!==null&&signalIndexName!==void 0?signalIndexName:""}])}else if(filter==="kibana"){setSelectedOptions(kibanaIndexPatterns.map(kip=>({label:kip.title,value:kip.title})))}},[configIndexPatterns,kibanaIndexPatterns,signalIndexName]);const togglePopover=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setPopover(prevIsPopoverOpen=>!prevIsPopoverOpen),[]);const closePopover=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setPopover(false),[]);const handleSaveIndices=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{onChangeEventTypeAndIndexesName(filterEventType,selectedOptions.map(so=>so.label));setPopover(false)},[filterEventType,onChangeEventTypeAndIndexesName,selectedOptions]);const resetDataSources=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setSelectedOptions(sourcererScope.selectedPatterns.map(indexSelected=>({label:indexSelected,value:indexSelected})));setFilterEventType(eventType)},[eventType,sourcererScope.selectedPatterns]);const comboBox=Object(external_kbnSharedDeps_React_["useMemo"])(()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{"data-test-subj":"timeline-sourcerer",fullWidth:true,onChange:onChangeCombo,options:indexesPatternOptions,placeholder:translations["l"],renderOption:renderOption,selectedOptions:selectedOptions}),[onChangeCombo,indexesPatternOptions,renderOption,selectedOptions]);const filterOptions=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getEventTypeOptions(filterEventType!=="custom"),[filterEventType]);const filter=Object(external_kbnSharedDeps_React_["useMemo"])(()=>external_kbnSharedDeps_React_default.a.createElement(Filter,{"data-test-subj":"timeline-sourcerer-radio",options:filterOptions,idSelected:filterEventType,onChange:onChangeFilter,name:translations["s"]}),[filterEventType,filterOptions,onChangeFilter]);const button=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{var _options$find;const options=getEventTypeOptions();return external_kbnSharedDeps_React_default.a.createElement(MyEuiButton,{"data-test-subj":"sourcerer-timeline-trigger",iconType:"arrowDown",iconSide:"right",isLoading:sourcererScope.loading,onClick:togglePopover},(_options$find=options.find(opt=>opt.id===eventType))===null||_options$find===void 0?void 0:_options$find.label)},[eventType,sourcererScope.loading,togglePopover]);const tooltipContent=Object(external_kbnSharedDeps_React_["useMemo"])(()=>isPopoverOpen?null:sourcererScope.selectedPatterns.sort().join(", "),[isPopoverOpen,sourcererScope.selectedPatterns]);const ButtonContent=Object(external_kbnSharedDeps_React_["useMemo"])(()=>external_kbnSharedDeps_React_default.a.createElement(AdvancedSettings,{"data-test-subj":"advanced-settings"},showAdvanceSettings?translations["k"]:translations["t"]),[showAdvanceSettings]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const newSelectedOptions=sourcererScope.selectedPatterns.map(indexSelected=>({label:indexSelected,value:indexSelected}));setSelectedOptions(prevSelectedOptions=>{if(!fast_deep_equal_default()(newSelectedOptions,prevSelectedOptions)){return newSelectedOptions}return prevSelectedOptions})},[sourcererScope.selectedPatterns]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{setFilterEventType(prevFilter=>prevFilter!==eventType?eventType:prevFilter);setAdvanceSettings(eventType==="custom")},[eventType]);return external_kbnSharedDeps_React_default.a.createElement(PickEventContainer,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:tooltipContent},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{button:button,closePopover:closePopover,id:"popover",isOpen:isPopoverOpen,ownFocus:true,repositionOnScroll:true},external_kbnSharedDeps_React_default.a.createElement(PopoverContent,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,translations["s"])),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),filter,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:"accordion1",forceState:showAdvanceSettings?"open":"closed",buttonContent:ButtonContent,onToggle:setAdvanceSettings},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),comboBox)),!showAdvanceSettings&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(ConfigHelper,{size:"s",color:"subdued"},translations["b"])),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(ResetButton,{"aria-label":translations["d"],"data-test-subj":"sourcerer-reset",flush:"left",onClick:resetDataSources,size:"l",title:translations["d"]},translations["d"])),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:handleSaveIndices,"data-test-subj":"add-index",fill:true,fullWidth:true,size:"s"},translations["n"])))))))};const PickEventType=Object(external_kbnSharedDeps_React_["memo"])(PickEventTypeComponents)},524:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TimelineDatePickerLock}));var external_kbnSharedDeps_ElasticEui_=__webpack_require__(72);var external_kbnSharedDeps_React_=__webpack_require__(6);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var lib=__webpack_require__(105);var inputs=__webpack_require__(149);var use_selector=__webpack_require__(109);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);const LOCK_SYNC_MAIN_DATE_PICKER_TOOL_TIP=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.securitySolution.timeline.properties.lockDatePickerTooltip",{defaultMessage:"Disable syncing of date/time range bteween the currently viewed page and your timeline"});const UNLOCK_SYNC_MAIN_DATE_PICKER_TOOL_TIP=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.securitySolution.timeline.properties.unlockDatePickerTooltip",{defaultMessage:"Enable syncing of date/time range between the currently viewed page and your timeline"});const LOCK_SYNC_MAIN_DATE_PICKER_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.securitySolution.timeline.properties.lockedDatePickerLabel",{defaultMessage:"Global date picker is locked to timeline date picker"});const UNLOCK_SYNC_MAIN_DATE_PICKER_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.securitySolution.timeline.properties.unlockedDatePickerLabel",{defaultMessage:"Global date picker NOT locked to timeline date picker"});const LOCK_SYNC_MAIN_DATE_PICKER_ARIA=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.securitySolution.timeline.properties.lockDatePickerDescription",{defaultMessage:"Lock global date picker to timeline date picker"});const UNLOCK_SYNC_MAIN_DATE_PICKER_ARIA=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.securitySolution.timeline.properties.unlockDatePickerDescription",{defaultMessage:"Unlock global date picker from timeline date picker"});const TimelineDatePickerLockComponent=()=>{const dispatch=Object(lib["useDispatch"])();const getGlobalInput=Object(external_kbnSharedDeps_React_["useMemo"])(()=>inputs["d"].globalSelector(),[]);const isDatePickerLocked=Object(use_selector["b"])(state=>getGlobalInput(state).linkTo.includes("timeline"));const onToggleLock=Object(external_kbnSharedDeps_React_["useCallback"])(()=>dispatch(inputs["b"].toggleTimelineLinkTo({linkToId:"timeline"})),[dispatch]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{"data-test-subj":"timeline-date-picker-lock-tooltip",position:"top",content:isDatePickerLocked?LOCK_SYNC_MAIN_DATE_PICKER_TOOL_TIP:UNLOCK_SYNC_MAIN_DATE_PICKER_TOOL_TIP},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"data-test-subj":`timeline-date-picker-${isDatePickerLocked?"lock":"unlock"}-button`,color:"primary",onClick:onToggleLock,iconType:isDatePickerLocked?"lock":"lockOpen","aria-label":isDatePickerLocked?UNLOCK_SYNC_MAIN_DATE_PICKER_ARIA:LOCK_SYNC_MAIN_DATE_PICKER_ARIA}))};TimelineDatePickerLockComponent.displayName="TimelineDatePickerLockComponent";const TimelineDatePickerLock=external_kbnSharedDeps_React_default.a.memo(TimelineDatePickerLockComponent)}}]);