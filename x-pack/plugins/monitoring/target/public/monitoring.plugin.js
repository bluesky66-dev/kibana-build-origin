/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */(function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}}var installedModules={};var installedChunks={0:0};function jsonpScriptSrc(chunkId){return __webpack_require__.p+"monitoring.chunk."+chunkId+".js"}function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(chunkId){var promises=[];var installedChunkData=installedChunks[chunkId];if(installedChunkData!==0){if(installedChunkData){promises.push(installedChunkData[2])}else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var script=document.createElement("script");var onScriptComplete;script.charset="utf-8";script.timeout=120;if(__webpack_require__.nc){script.setAttribute("nonce",__webpack_require__.nc)}script.src=jsonpScriptSrc(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null;clearTimeout(timeout);var chunk=installedChunks[chunkId];if(chunk!==0){if(chunk){var errorType=event&&(event.type==="load"?"missing":event.type);var realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")";error.name="ChunkLoadError";error.type=errorType;error.request=realSrc;chunk[1](error)}installedChunks[chunkId]=undefined}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete;document.head.appendChild(script)}}return Promise.all(promises)};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";__webpack_require__.oe=function(err){console.error(err);throw err};var jsonpArray=window["monitoring_bundle_jsonpfunction"]=window["monitoring_bundle_jsonpfunction"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;return __webpack_require__(__webpack_require__.s=7)})([function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"U",(function(){return STORAGE_KEY}));__webpack_require__.d(__webpack_exports__,"I",(function(){return EUI_SORT_ASCENDING}));__webpack_require__.d(__webpack_exports__,"v",(function(){return CHART_LINE_COLOR}));__webpack_require__.d(__webpack_exports__,"w",(function(){return CHART_TEXT_COLOR}));__webpack_require__.d(__webpack_exports__,"J",(function(){return FORMAT_DURATION_TEMPLATE_LONG}));__webpack_require__.d(__webpack_exports__,"K",(function(){return FORMAT_DURATION_TEMPLATE_SHORT}));__webpack_require__.d(__webpack_exports__,"L",(function(){return FORMAT_DURATION_TEMPLATE_TINY}));__webpack_require__.d(__webpack_exports__,"t",(function(){return CALCULATE_DURATION_SINCE}));__webpack_require__.d(__webpack_exports__,"u",(function(){return CALCULATE_DURATION_UNTIL}));__webpack_require__.d(__webpack_exports__,"S",(function(){return ML_SUPPORTED_LICENSES}));__webpack_require__.d(__webpack_exports__,"Q",(function(){return LOGSTASH}));__webpack_require__.d(__webpack_exports__,"G",(function(){return DEBOUNCE_SLOW_MS}));__webpack_require__.d(__webpack_exports__,"F",(function(){return DEBOUNCE_FAST_MS}));__webpack_require__.d(__webpack_exports__,"T",(function(){return STANDALONE_CLUSTER_CLUSTER_UUID}));__webpack_require__.d(__webpack_exports__,"H",(function(){return ELASTICSEARCH_SYSTEM_ID}));__webpack_require__.d(__webpack_exports__,"M",(function(){return INFRA_SOURCE_ID}));__webpack_require__.d(__webpack_exports__,"x",(function(){return CODE_PATH_ALL}));__webpack_require__.d(__webpack_exports__,"B",(function(){return CODE_PATH_KIBANA}));__webpack_require__.d(__webpack_exports__,"A",(function(){return CODE_PATH_ELASTICSEARCH}));__webpack_require__.d(__webpack_exports__,"E",(function(){return CODE_PATH_ML}));__webpack_require__.d(__webpack_exports__,"z",(function(){return CODE_PATH_BEATS}));__webpack_require__.d(__webpack_exports__,"D",(function(){return CODE_PATH_LOGSTASH}));__webpack_require__.d(__webpack_exports__,"y",(function(){return CODE_PATH_APM}));__webpack_require__.d(__webpack_exports__,"C",(function(){return CODE_PATH_LICENSE}));__webpack_require__.d(__webpack_exports__,"N",(function(){return KIBANA_SYSTEM_ID}));__webpack_require__.d(__webpack_exports__,"s",(function(){return BEATS_SYSTEM_ID}));__webpack_require__.d(__webpack_exports__,"r",(function(){return APM_SYSTEM_ID}));__webpack_require__.d(__webpack_exports__,"R",(function(){return LOGSTASH_SYSTEM_ID}));__webpack_require__.d(__webpack_exports__,"i",(function(){return ALERT_LICENSE_EXPIRATION}));__webpack_require__.d(__webpack_exports__,"b",(function(){return ALERT_CLUSTER_HEALTH}));__webpack_require__.d(__webpack_exports__,"c",(function(){return ALERT_CPU_USAGE}));__webpack_require__.d(__webpack_exports__,"e",(function(){return ALERT_DISK_USAGE}));__webpack_require__.d(__webpack_exports__,"m",(function(){return ALERT_NODES_CHANGED}));__webpack_require__.d(__webpack_exports__,"f",(function(){return ALERT_ELASTICSEARCH_VERSION_MISMATCH}));__webpack_require__.d(__webpack_exports__,"g",(function(){return ALERT_KIBANA_VERSION_MISMATCH}));__webpack_require__.d(__webpack_exports__,"j",(function(){return ALERT_LOGSTASH_VERSION_MISMATCH}));__webpack_require__.d(__webpack_exports__,"k",(function(){return ALERT_MEMORY_USAGE}));__webpack_require__.d(__webpack_exports__,"l",(function(){return ALERT_MISSING_MONITORING_DATA}));__webpack_require__.d(__webpack_exports__,"p",(function(){return ALERT_THREAD_POOL_SEARCH_REJECTIONS}));__webpack_require__.d(__webpack_exports__,"q",(function(){return ALERT_THREAD_POOL_WRITE_REJECTIONS}));__webpack_require__.d(__webpack_exports__,"a",(function(){return ALERT_CCR_READ_EXCEPTIONS}));__webpack_require__.d(__webpack_exports__,"h",(function(){return ALERT_LARGE_SHARD_SIZE}));__webpack_require__.d(__webpack_exports__,"P",(function(){return LEGACY_ALERT_DETAILS}));__webpack_require__.d(__webpack_exports__,"d",(function(){return ALERT_DETAILS}));__webpack_require__.d(__webpack_exports__,"n",(function(){return ALERT_PANEL_MENU}));__webpack_require__.d(__webpack_exports__,"O",(function(){return LEGACY_ALERTS}));__webpack_require__.d(__webpack_exports__,"o",(function(){return ALERT_REQUIRES_APP_CONTEXT}));__webpack_require__.d(__webpack_exports__,"V",(function(){return TELEMETRY_METRIC_BUTTON_CLICK}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__);var _enums__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4);const LOGGING_TAG="monitoring";const KIBANA_MONITORING_LOGGING_TAG="kibana-monitoring";const MONITORING_SYSTEM_API_VERSION="7";const KIBANA_STATS_TYPE_MONITORING="kibana_stats";const KIBANA_SETTINGS_TYPE="kibana_settings";const STORAGE_KEY="xpack.monitoring.data";const NORMALIZED_DERIVATIVE_UNIT="1s";const EUI_SORT_ASCENDING="asc";const EUI_SORT_DESCENDING="desc";const SORT_ASCENDING=1;const SORT_DESCENDING=-1;const CHART_LINE_COLOR="#d2d2d2";const CHART_TEXT_COLOR="#9c9c9c";const CLUSTER_ALERTS_SEARCH_SIZE=3;const FORMAT_DURATION_TEMPLATE_LONG="M [months] d [days]";const FORMAT_DURATION_TEMPLATE_SHORT=" d [days] h [hrs] m [min]";const FORMAT_DURATION_TEMPLATE_TINY=" s [seconds]";const CALCULATE_DURATION_SINCE="since";const CALCULATE_DURATION_UNTIL="until";const ML_SUPPORTED_LICENSES=["trial","platinum","enterprise"];const CLOUD_METADATA_SERVICES={AWS_URL:"http://169.254.169.254/2016-09-02/dynamic/instance-identity/document",AZURE_URL:"http://169.254.169.254/metadata/instance?api-version=2017-04-02",GCP_URL_PREFIX:"http://169.254.169.254/computeMetadata/v1/instance"};const LOGSTASH={MAJOR_VER_REQD_FOR_PIPELINES:6,QUEUE_TYPES:{MEMORY:"memory",PERSISTED:"persisted"}};const DEBOUNCE_SLOW_MS=17;const DEBOUNCE_FAST_MS=10;const CLUSTER_ALERTS_ADDRESS_CONFIG_KEY="cluster_alerts.email_notifications.email_address";const STANDALONE_CLUSTER_CLUSTER_UUID="__standalone_cluster__";const INDEX_PATTERN=".monitoring-*-6-*,.monitoring-*-7-*";const INDEX_PATTERN_KIBANA=".monitoring-kibana-6-*,.monitoring-kibana-7-*";const INDEX_PATTERN_LOGSTASH=".monitoring-logstash-6-*,.monitoring-logstash-7-*";const INDEX_PATTERN_BEATS=".monitoring-beats-6-*,.monitoring-beats-7-*";const INDEX_ALERTS=".monitoring-alerts-6*,.monitoring-alerts-7*";const INDEX_PATTERN_ELASTICSEARCH=".monitoring-es-6-*,.monitoring-es-7-*";const METRICBEAT_INDEX_NAME_UNIQUE_TOKEN="-mb-";const ELASTICSEARCH_SYSTEM_ID="elasticsearch";const INFRA_SOURCE_ID="internal-stack-monitoring";const CODE_PATH_ALL="all";const CODE_PATH_ALERTS="alerts";const CODE_PATH_KIBANA="kibana";const CODE_PATH_ELASTICSEARCH="elasticsearch";const CODE_PATH_ML="ml";const CODE_PATH_BEATS="beats";const CODE_PATH_LOGSTASH="logstash";const CODE_PATH_APM="apm";const CODE_PATH_LICENSE="license";const CODE_PATH_LOGS="logs";const TELEMETRY_QUERY_SOURCE="TELEMETRY";const KIBANA_SYSTEM_ID="kibana";const BEATS_SYSTEM_ID="beats";const APM_SYSTEM_ID="apm";const LOGSTASH_SYSTEM_ID="logstash";const REPORTING_SYSTEM_ID="reporting";const TELEMETRY_COLLECTION_INTERVAL=864e5;const CLUSTER_DETAILS_FETCH_INTERVAL=108e5;const USAGE_FETCH_INTERVAL=12e5;const ALERT_PREFIX="monitoring_";const ALERT_LICENSE_EXPIRATION=`${ALERT_PREFIX}alert_license_expiration`;const ALERT_CLUSTER_HEALTH=`${ALERT_PREFIX}alert_cluster_health`;const ALERT_CPU_USAGE=`${ALERT_PREFIX}alert_cpu_usage`;const ALERT_DISK_USAGE=`${ALERT_PREFIX}alert_disk_usage`;const ALERT_NODES_CHANGED=`${ALERT_PREFIX}alert_nodes_changed`;const ALERT_ELASTICSEARCH_VERSION_MISMATCH=`${ALERT_PREFIX}alert_elasticsearch_version_mismatch`;const ALERT_KIBANA_VERSION_MISMATCH=`${ALERT_PREFIX}alert_kibana_version_mismatch`;const ALERT_LOGSTASH_VERSION_MISMATCH=`${ALERT_PREFIX}alert_logstash_version_mismatch`;const ALERT_MEMORY_USAGE=`${ALERT_PREFIX}alert_jvm_memory_usage`;const ALERT_MISSING_MONITORING_DATA=`${ALERT_PREFIX}alert_missing_monitoring_data`;const ALERT_THREAD_POOL_SEARCH_REJECTIONS=`${ALERT_PREFIX}alert_thread_pool_search_rejections`;const ALERT_THREAD_POOL_WRITE_REJECTIONS=`${ALERT_PREFIX}alert_thread_pool_write_rejections`;const ALERT_CCR_READ_EXCEPTIONS=`${ALERT_PREFIX}ccr_read_exceptions`;const ALERT_LARGE_SHARD_SIZE=`${ALERT_PREFIX}shard_size`;const LEGACY_ALERT_DETAILS={[ALERT_CLUSTER_HEALTH]:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.clusterHealth.label",{defaultMessage:"Cluster health"}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.clusterHealth.description",{defaultMessage:"Alert when the health of the cluster changes."})},[ALERT_ELASTICSEARCH_VERSION_MISMATCH]:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.elasticsearchVersionMismatch.label",{defaultMessage:"Elasticsearch version mismatch"}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.elasticsearchVersionMismatch.description",{defaultMessage:"Alert when the cluster has multiple versions of Elasticsearch."})},[ALERT_KIBANA_VERSION_MISMATCH]:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.kibanaVersionMismatch.label",{defaultMessage:"Kibana version mismatch"}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.kibanaVersionMismatch.description",{defaultMessage:"Alert when the cluser has multiple versions of Kibana."})},[ALERT_LICENSE_EXPIRATION]:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.licenseExpiration.label",{defaultMessage:"License expiration"}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.licenseExpiration.description",{defaultMessage:"Alert when the cluster license is about to expire."})},[ALERT_LOGSTASH_VERSION_MISMATCH]:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.logstashVersionMismatch.label",{defaultMessage:"Logstash version mismatch"}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.logstashVersionMismatch.description",{defaultMessage:"Alert when the cluster has multiple versions of Logstash."})},[ALERT_NODES_CHANGED]:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.nodesChanged.label",{defaultMessage:"Nodes changed"}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.nodesChanged.description",{defaultMessage:"Alert when adding, removing, or restarting a node."})}};const ALERT_DETAILS={[ALERT_CPU_USAGE]:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.cpuUsage.label",{defaultMessage:"CPU Usage"}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.cpuUsage.description",{defaultMessage:"Alert when the CPU load for a node is consistently high."}),paramDetails:{threshold:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.cpuUsage.paramDetails.threshold.label",{defaultMessage:`Notify when CPU is over`}),type:_enums__WEBPACK_IMPORTED_MODULE_1__["b"].Percentage},duration:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.cpuUsage.paramDetails.duration.label",{defaultMessage:`Look at the average over`}),type:_enums__WEBPACK_IMPORTED_MODULE_1__["b"].Duration}}},[ALERT_DISK_USAGE]:{paramDetails:{threshold:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.diskUsage.paramDetails.threshold.label",{defaultMessage:`Notify when disk capacity is over`}),type:_enums__WEBPACK_IMPORTED_MODULE_1__["b"].Percentage},duration:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.diskUsage.paramDetails.duration.label",{defaultMessage:`Look at the average over`}),type:_enums__WEBPACK_IMPORTED_MODULE_1__["b"].Duration}},label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.diskUsage.label",{defaultMessage:"Disk Usage"}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.diskUsage.description",{defaultMessage:"Alert when the disk usage for a node is consistently high."})},[ALERT_MEMORY_USAGE]:{paramDetails:{threshold:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.memoryUsage.paramDetails.threshold.label",{defaultMessage:`Notify when memory usage is over`}),type:_enums__WEBPACK_IMPORTED_MODULE_1__["b"].Percentage},duration:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.memoryUsage.paramDetails.duration.label",{defaultMessage:`Look at the average over`}),type:_enums__WEBPACK_IMPORTED_MODULE_1__["b"].Duration}},label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.memoryUsage.label",{defaultMessage:"Memory Usage (JVM)"}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.memoryUsage.description",{defaultMessage:"Alert when a node reports high memory usage."})},[ALERT_MISSING_MONITORING_DATA]:{paramDetails:{duration:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.missingData.paramDetails.duration.label",{defaultMessage:`Notify if monitoring data is missing for the last`}),type:_enums__WEBPACK_IMPORTED_MODULE_1__["b"].Duration},limit:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.missingData.paramDetails.limit.label",{defaultMessage:`looking back`}),type:_enums__WEBPACK_IMPORTED_MODULE_1__["b"].Duration}},label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.missingData.label",{defaultMessage:"Missing monitoring data"}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.missingData.description",{defaultMessage:"Alert when monitoring data is missing."})},[ALERT_THREAD_POOL_SEARCH_REJECTIONS]:{paramDetails:{threshold:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.rejection.paramDetails.threshold.label",{defaultMessage:`Notify when {type} rejection count is over`,values:{type:"search"}}),type:_enums__WEBPACK_IMPORTED_MODULE_1__["b"].Number},duration:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.rejection.paramDetails.duration.label",{defaultMessage:`In the last`}),type:_enums__WEBPACK_IMPORTED_MODULE_1__["b"].Duration}},label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.threadPoolRejections.label",{defaultMessage:"Thread pool {type} rejections",values:{type:"search"}}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.searchThreadPoolRejections.description",{defaultMessage:"Alert when the number of rejections in the search thread pool exceeds the threshold."})},[ALERT_THREAD_POOL_WRITE_REJECTIONS]:{paramDetails:{threshold:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.rejection.paramDetails.threshold.label",{defaultMessage:`Notify when {type} rejection count is over`,values:{type:"write"}}),type:_enums__WEBPACK_IMPORTED_MODULE_1__["b"].Number},duration:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.rejection.paramDetails.duration.label",{defaultMessage:`In the last`}),type:_enums__WEBPACK_IMPORTED_MODULE_1__["b"].Duration}},label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.threadPoolRejections.label",{defaultMessage:"Thread pool {type} rejections",values:{type:"write"}}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.writeThreadPoolRejections.description",{defaultMessage:"Alert when the number of rejections in the write thread pool exceeds the threshold."})},[ALERT_CCR_READ_EXCEPTIONS]:{paramDetails:{duration:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.ccrReadExceptions.paramDetails.duration.label",{defaultMessage:`In the last`}),type:_enums__WEBPACK_IMPORTED_MODULE_1__["b"].Duration}},label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.ccrReadExceptions.label",{defaultMessage:"CCR read exceptions"}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.ccrReadExceptions.description",{defaultMessage:"Alert if any CCR read exceptions have been detected."})},[ALERT_LARGE_SHARD_SIZE]:{paramDetails:{threshold:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.shardSize.paramDetails.threshold.label",{defaultMessage:`Notify when average shard size exceeds this value`}),type:_enums__WEBPACK_IMPORTED_MODULE_1__["b"].Number,append:"GB"},indexPattern:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.shardSize.paramDetails.indexPattern.label",{defaultMessage:`Check the following index patterns`}),placeholder:"eg: data-*, *prod-data, -.internal-data*",type:_enums__WEBPACK_IMPORTED_MODULE_1__["b"].TextField}},label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.shardSize.label",{defaultMessage:"Shard size"}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.shardSize.description",{defaultMessage:"Alert if the average shard size is larger than the configured threshold."})}};const ALERT_PANEL_MENU=[{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.badge.panelCategory.clusterHealth",{defaultMessage:"Cluster health"}),alerts:[{alertName:ALERT_NODES_CHANGED},{alertName:ALERT_CLUSTER_HEALTH},{alertName:ALERT_ELASTICSEARCH_VERSION_MISMATCH},{alertName:ALERT_KIBANA_VERSION_MISMATCH},{alertName:ALERT_LOGSTASH_VERSION_MISMATCH}]},{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.badge.panelCategory.resourceUtilization",{defaultMessage:"Resource utilization"}),alerts:[{alertName:ALERT_CPU_USAGE},{alertName:ALERT_DISK_USAGE},{alertName:ALERT_MEMORY_USAGE},{alertName:ALERT_LARGE_SHARD_SIZE}]},{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.monitoring.alerts.badge.panelCategory.errors",{defaultMessage:"Errors and exceptions"}),alerts:[{alertName:ALERT_MISSING_MONITORING_DATA},{alertName:ALERT_LICENSE_EXPIRATION},{alertName:ALERT_THREAD_POOL_SEARCH_REJECTIONS},{alertName:ALERT_THREAD_POOL_WRITE_REJECTIONS},{alertName:ALERT_CCR_READ_EXCEPTIONS}]}];const ALERTS=[ALERT_LICENSE_EXPIRATION,ALERT_CLUSTER_HEALTH,ALERT_CPU_USAGE,ALERT_DISK_USAGE,ALERT_NODES_CHANGED,ALERT_ELASTICSEARCH_VERSION_MISMATCH,ALERT_KIBANA_VERSION_MISMATCH,ALERT_LOGSTASH_VERSION_MISMATCH,ALERT_MEMORY_USAGE,ALERT_MISSING_MONITORING_DATA,ALERT_THREAD_POOL_SEARCH_REJECTIONS,ALERT_THREAD_POOL_WRITE_REJECTIONS,ALERT_CCR_READ_EXCEPTIONS,ALERT_LARGE_SHARD_SIZE];const LEGACY_ALERTS=[ALERT_LICENSE_EXPIRATION,ALERT_CLUSTER_HEALTH,ALERT_NODES_CHANGED,ALERT_ELASTICSEARCH_VERSION_MISMATCH,ALERT_KIBANA_VERSION_MISMATCH,ALERT_LOGSTASH_VERSION_MISMATCH];const ALERT_ACTION_TYPE_EMAIL=".email";const ALERT_ACTION_TYPE_LOG=".server-log";const ALERT_REQUIRES_APP_CONTEXT=true;const ALERT_EMAIL_SERVICES=["gmail","hotmail","icloud","outlook365","ses","yahoo"];const MONITORING_CONFIG_ALERTING_EMAIL_ADDRESS="monitoring:alertingEmailAddress";const XPACK_DEFAULT_ADMIN_EMAIL_UI_SETTING="xPack:defaultAdminEmail";const SAVED_OBJECT_TELEMETRY="monitoring-telemetry";const TELEMETRY_METRIC_BUTTON_CLICK="btnclick__"},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return AlertSeverity}));__webpack_require__.d(__webpack_exports__,"a",(function(){return AlertMessageTokenType}));__webpack_require__.d(__webpack_exports__,"b",(function(){return AlertParamType}));__webpack_require__.d(__webpack_exports__,"d",(function(){return SetupModeFeature}));let AlertClusterHealthType;(function(AlertClusterHealthType){AlertClusterHealthType["Green"]="green";AlertClusterHealthType["Red"]="red";AlertClusterHealthType["Yellow"]="yellow"})(AlertClusterHealthType||(AlertClusterHealthType={}));let AlertSeverity;(function(AlertSeverity){AlertSeverity["Success"]="success";AlertSeverity["Danger"]="danger";AlertSeverity["Warning"]="warning"})(AlertSeverity||(AlertSeverity={}));let AlertMessageTokenType;(function(AlertMessageTokenType){AlertMessageTokenType["Time"]="time";AlertMessageTokenType["Link"]="link";AlertMessageTokenType["DocLink"]="docLink"})(AlertMessageTokenType||(AlertMessageTokenType={}));let AlertParamType;(function(AlertParamType){AlertParamType["TextField"]="textfield";AlertParamType["Duration"]="duration";AlertParamType["Percentage"]="percentage";AlertParamType["Number"]="number"})(AlertParamType||(AlertParamType={}));let SetupModeFeature;(function(SetupModeFeature){SetupModeFeature["MetricbeatMigration"]="metricbeatMigration";SetupModeFeature["Alerts"]="alerts"})(SetupModeFeature||(SetupModeFeature={}))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/home/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("entry/core/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_monitoring_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8);var _node_modules_val_loader_dist_cjs_js_key_monitoring_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_monitoring_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/monitoring/public",__webpack_require__,9)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["monitoring"]},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);var public_=__webpack_require__(5);var core_public_=__webpack_require__(6);var constants=__webpack_require__(2);var external_kbnSharedDeps_React_=__webpack_require__(1);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);function validate(inputValues){const validationResult={errors:{}};const errors={duration:[],threshold:[]};if(!inputValues.duration){errors.duration.push(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.monitoring.alerts.validation.duration",{defaultMessage:"A valid duration is required."}))}if(isNaN(inputValues.threshold)){errors.threshold.push(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.monitoring.alerts.validation.threshold",{defaultMessage:"A valid number is required."}))}validationResult.errors=errors;return validationResult}var external_kbnSharedDeps_ElasticEui_=__webpack_require__(3);var TIME_UNITS;(function(TIME_UNITS){TIME_UNITS["SECOND"]="s";TIME_UNITS["MINUTE"]="m";TIME_UNITS["HOUR"]="h";TIME_UNITS["DAY"]="d"})(TIME_UNITS||(TIME_UNITS={}));function getTimeUnitLabel(timeUnit=TIME_UNITS.SECOND,timeValue="0"){switch(timeUnit){case TIME_UNITS.SECOND:return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.monitoring.alerts.flyoutExpressions.timeUnits.secondLabel",{defaultMessage:"{timeValue, plural, one {second} other {seconds}}",values:{timeValue:timeValue}});case TIME_UNITS.MINUTE:return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.monitoring.alerts.flyoutExpressions.timeUnits.minuteLabel",{defaultMessage:"{timeValue, plural, one {minute} other {minutes}}",values:{timeValue:timeValue}});case TIME_UNITS.HOUR:return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.monitoring.alerts.flyoutExpressions.timeUnits.hourLabel",{defaultMessage:"{timeValue, plural, one {hour} other {hours}}",values:{timeValue:timeValue}});case TIME_UNITS.DAY:return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.monitoring.alerts.flyoutExpressions.timeUnits.dayLabel",{defaultMessage:"{timeValue, plural, one {day} other {days}}",values:{timeValue:timeValue}})}}const parseRegex=/(\d+)([smhd]{1})/;const AlertParamDuration=props=>{const{name:name,label:label,setAlertParams:setAlertParams,errors:errors}=props;const parsed=parseRegex.exec(props.duration);const defaultValue=parsed&&parsed[1]?parseInt(parsed[1],10):1;const defaultUnit=parsed&&parsed[2]?parsed[2]:TIME_UNITS.MINUTE;const[value,setValue]=external_kbnSharedDeps_React_default.a.useState(defaultValue);const[unit,setUnit]=external_kbnSharedDeps_React_default.a.useState(defaultUnit);const timeUnits=Object.values(TIME_UNITS).map(timeUnit=>({value:timeUnit,text:getTimeUnitLabel(timeUnit)}));external_kbnSharedDeps_React_default.a.useEffect(()=>{setAlertParams(name,`${value}${unit}`)},[unit,value]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:label,error:errors,isInvalid:(errors===null||errors===void 0?void 0:errors.length)>0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:2},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{compressed:true,value:value,onChange:e=>{let newValue=parseInt(e.target.value,10);if(isNaN(newValue)){newValue=0}setValue(newValue)}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:4},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{compressed:true,value:unit,onChange:e=>setUnit(e.target.value),options:timeUnits}))))};var enums=__webpack_require__(4);const AlertParamPercentage=props=>{const{name:name,label:label,setAlertParams:setAlertParams,errors:errors}=props;const[value,setValue]=external_kbnSharedDeps_React_default.a.useState(props.percentage);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:label,error:errors,isInvalid:errors.length>0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{compressed:true,value:value,append:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("strong",null,"%")),onChange:e=>{let newValue=parseInt(e.target.value,10);if(isNaN(newValue)){newValue=0}setValue(newValue);setAlertParams(name,newValue)}}))};const AlertParamNumber=props=>{const{name:name,details:details,setAlertParams:setAlertParams,errors:errors}=props;const[value,setValue]=Object(external_kbnSharedDeps_React_["useState"])(props.value);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:details.label,error:errors,isInvalid:(errors===null||errors===void 0?void 0:errors.length)>0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{compressed:true,value:value,append:details.append,onChange:e=>{let newValue=Number(e.target.value);if(isNaN(newValue)){newValue=0}setValue(newValue);setAlertParams(name,newValue)}}))};const AlertParamTextField=props=>{const{name:name,label:label,setAlertParams:setAlertParams,errors:errors,placeholder:placeholder}=props;const[value,setValue]=Object(external_kbnSharedDeps_React_["useState"])(props.value);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:label,error:errors,isInvalid:(errors===null||errors===void 0?void 0:errors.length)>0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{compressed:true,placeholder:placeholder,value:value,onChange:e=>{const newValue=e.target.value;setValue(newValue);setAlertParams(name,newValue)}}))};const Expression=props=>{const{alertParams:alertParams,paramDetails:paramDetails,setAlertParams:setAlertParams,errors:errors}=props;const alertParamsUi=Object.keys(paramDetails).map(alertParamName=>{const details=paramDetails[alertParamName];const value=alertParams[alertParamName];switch(details===null||details===void 0?void 0:details.type){case enums["b"].Duration:return external_kbnSharedDeps_React_default.a.createElement(AlertParamDuration,{key:alertParamName,name:alertParamName,duration:value,label:details===null||details===void 0?void 0:details.label,errors:errors[alertParamName],setAlertParams:setAlertParams});case enums["b"].Percentage:return external_kbnSharedDeps_React_default.a.createElement(AlertParamPercentage,{key:alertParamName,name:alertParamName,label:details===null||details===void 0?void 0:details.label,percentage:value,errors:errors[alertParamName],setAlertParams:setAlertParams});case enums["b"].Number:return external_kbnSharedDeps_React_default.a.createElement(AlertParamNumber,{key:alertParamName,name:alertParamName,details:details,value:value,errors:errors[alertParamName],setAlertParams:setAlertParams});case enums["b"].TextField:return external_kbnSharedDeps_React_default.a.createElement(AlertParamTextField,{key:alertParamName,name:alertParamName,label:details===null||details===void 0?void 0:details.label,value:value,errors:errors[alertParamName],setAlertParams:setAlertParams})}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],{component:"form"},alertParamsUi),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null))};function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function createCpuUsageAlertType(){return{id:constants["c"],description:constants["d"][constants["c"]].description,iconClass:"bell",documentationUrl(docLinks){return`${docLinks.links.monitoring.alertsKibanaCpuThreshold}`},alertParamsExpression:props=>external_kbnSharedDeps_React_default.a.createElement(Expression,_extends({},props,{paramDetails:constants["d"][constants["c"]].paramDetails})),validate:validate,defaultActionMessage:"{{context.internalFullMessage}}",requiresAppContext:constants["o"]}}function validation_validate(opts){const validationResult={errors:{}};const errors={duration:[],limit:[]};if(!opts.duration){errors.duration.push(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.monitoring.alerts.missingData.validation.duration",{defaultMessage:"A valid duration is required."}))}if(!opts.limit){errors.limit.push(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.monitoring.alerts.missingData.validation.limit",{defaultMessage:"A valid limit is required."}))}validationResult.errors=errors;return validationResult}const expression_Expression=props=>{const{alertParams:alertParams,paramDetails:paramDetails,setAlertParams:setAlertParams,errors:errors}=props;const alertParamsUi=Object.keys(alertParams).map(alertParamName=>{const details=paramDetails[alertParamName];const value=alertParams[alertParamName];switch(details===null||details===void 0?void 0:details.type){case enums["b"].Duration:return external_kbnSharedDeps_React_default.a.createElement(AlertParamDuration,{key:alertParamName,name:alertParamName,duration:value,label:details.label,errors:errors[alertParamName],setAlertParams:setAlertParams});case enums["b"].Percentage:return external_kbnSharedDeps_React_default.a.createElement(AlertParamPercentage,{key:alertParamName,name:alertParamName,label:details.label,percentage:value,errors:errors[alertParamName],setAlertParams:setAlertParams})}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],{component:"form"},alertParamsUi),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null))};function missing_monitoring_data_alert_extends(){missing_monitoring_data_alert_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return missing_monitoring_data_alert_extends.apply(this,arguments)}function createMissingMonitoringDataAlertType(){return{id:constants["l"],description:constants["d"][constants["l"]].description,iconClass:"bell",documentationUrl(docLinks){return`${docLinks.links.monitoring.alertsKibanaMissingData}`},alertParamsExpression:props=>external_kbnSharedDeps_React_default.a.createElement(expression_Expression,missing_monitoring_data_alert_extends({},props,{paramDetails:constants["d"][constants["l"]].paramDetails})),validate:validation_validate,defaultActionMessage:"{{context.internalFullMessage}}",requiresAppContext:constants["o"]}}function createLegacyAlertTypes(){return constants["O"].map(legacyAlert=>({id:legacyAlert,description:constants["P"][legacyAlert].description,iconClass:"bell",documentationUrl(docLinks){return`${docLinks.links.monitoring.alertsKibanaClusterAlerts}`},alertParamsExpression:()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.monitoring.alerts.legacyAlert.expressionText",{defaultMessage:"There is nothing to configure."})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null)),defaultActionMessage:"{{context.internalFullMessage}}",validate:()=>({errors:{}}),requiresAppContext:constants["o"]}))}function disk_usage_alert_extends(){disk_usage_alert_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return disk_usage_alert_extends.apply(this,arguments)}function createDiskUsageAlertType(){return{id:constants["e"],description:constants["d"][constants["e"]].description,iconClass:"bell",documentationUrl(docLinks){return`${docLinks.links.monitoring.alertsKibanaDiskThreshold}`},alertParamsExpression:props=>external_kbnSharedDeps_React_default.a.createElement(Expression,disk_usage_alert_extends({},props,{paramDetails:constants["d"][constants["e"]].paramDetails})),validate:validate,defaultActionMessage:"{{context.internalFullMessage}}",requiresAppContext:constants["o"]}}function thread_pool_rejections_alert_extends(){thread_pool_rejections_alert_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return thread_pool_rejections_alert_extends.apply(this,arguments)}function createThreadPoolRejectionsAlertType(alertId,threadPoolAlertDetails){return{id:alertId,description:threadPoolAlertDetails.description,iconClass:"bell",documentationUrl(docLinks){return`${docLinks.links.monitoring.alertsKibanaThreadpoolRejections}`},alertParamsExpression:props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(Expression,thread_pool_rejections_alert_extends({},props,{paramDetails:threadPoolAlertDetails.paramDetails}))),validate:inputValues=>{const errors={};const value=inputValues.threshold;if(value<0){const errStr=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.monitoring.alerts.validation.lessThanZero",{defaultMessage:"This value can not be less than zero"});errors.threshold=[errStr]}if(!inputValues.duration){const errStr=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.monitoring.alerts.validation.duration",{defaultMessage:"A valid duration is required."});errors.duration=[errStr]}return{errors:errors}},defaultActionMessage:"{{context.internalFullMessage}}",requiresAppContext:constants["o"]}}function memory_usage_alert_extends(){memory_usage_alert_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return memory_usage_alert_extends.apply(this,arguments)}function createMemoryUsageAlertType(){return{id:constants["k"],description:constants["d"][constants["k"]].description,iconClass:"bell",documentationUrl(docLinks){return`${docLinks.links.monitoring.alertsKibanaJvmThreshold}`},alertParamsExpression:props=>external_kbnSharedDeps_React_default.a.createElement(Expression,memory_usage_alert_extends({},props,{paramDetails:constants["d"][constants["k"]].paramDetails})),validate:validate,defaultActionMessage:"{{context.internalFullMessage}}",requiresAppContext:constants["o"]}}function ccr_read_exceptions_alert_extends(){ccr_read_exceptions_alert_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return ccr_read_exceptions_alert_extends.apply(this,arguments)}const ccr_read_exceptions_alert_validate=inputValues=>{const validationResult={errors:{}};const errors={duration:[]};if(!inputValues.duration){errors.duration.push(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.monitoring.alerts.validation.duration",{defaultMessage:"A valid duration is required."}))}validationResult.errors=errors;return validationResult};function createCCRReadExceptionsAlertType(){return{id:constants["a"],description:constants["d"][constants["a"]].description,iconClass:"bell",documentationUrl(docLinks){return`${docLinks.links.monitoring.alertsKibanaCCRReadExceptions}`},alertParamsExpression:props=>external_kbnSharedDeps_React_default.a.createElement(Expression,ccr_read_exceptions_alert_extends({},props,{paramDetails:constants["d"][constants["a"]].paramDetails})),validate:ccr_read_exceptions_alert_validate,defaultActionMessage:"{{context.internalFullMessage}}",requiresAppContext:constants["o"]}}function large_shard_size_alert_extends(){large_shard_size_alert_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return large_shard_size_alert_extends.apply(this,arguments)}const large_shard_size_alert_validate=inputValues=>{const validationResult={errors:{}};const errors={indexPattern:[]};if(!inputValues.indexPattern){errors.indexPattern.push(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.monitoring.alerts.validation.indexPattern",{defaultMessage:"A valid index pattern/s is required."}))}validationResult.errors=errors;return validationResult};function createLargeShardSizeAlertType(){return{id:constants["h"],description:constants["d"][constants["h"]].description,iconClass:"bell",documentationUrl(docLinks){return`${docLinks.links.monitoring.alertsKibanaLargeShardSize}`},alertParamsExpression:props=>external_kbnSharedDeps_React_default.a.createElement(Expression,large_shard_size_alert_extends({},props,{paramDetails:constants["d"][constants["h"]].paramDetails})),validate:large_shard_size_alert_validate,defaultActionMessage:"{{context.internalFullMessage}}",requiresAppContext:constants["o"]}}const HASH_CHANGE="hashchange";class plugin_MonitoringPlugin{constructor(initializerContext){this.initializerContext=initializerContext}setup(core,plugins){const{home:home}=plugins;const id="monitoring";const icon="monitoringApp";const title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.monitoring.stackMonitoringTitle",{defaultMessage:"Stack Monitoring"});const monitoring=this.initializerContext.config.get();if(!monitoring.ui.enabled||!monitoring.enabled){return false}if(home){home.featureCatalogue.register({id:id,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.monitoring.featureCatalogueTitle",{defaultMessage:"Monitor the stack"}),icon:icon,path:"/app/monitoring",showOnHomePage:true,category:public_["FeatureCatalogueCategory"].ADMIN,description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.monitoring.featureCatalogueDescription",{defaultMessage:"Track the real-time health and performance of your deployment."}),order:610})}this.registerAlerts(plugins);const app={id:id,title:title,order:9030,euiIconType:icon,category:core_public_["DEFAULT_APP_CATEGORIES"].management,mount:async params=>{var _plugins$cloud;const[coreStart,pluginsStart]=await core.getStartServices();const{AngularApp:AngularApp}=await __webpack_require__.e(1).then(__webpack_require__.bind(null,288));const deps={navigation:pluginsStart.navigation,kibanaLegacy:pluginsStart.kibanaLegacy,element:params.element,core:coreStart,data:pluginsStart.data,isCloud:Boolean((_plugins$cloud=plugins.cloud)===null||_plugins$cloud===void 0?void 0:_plugins$cloud.isCloudEnabled),pluginInitializerContext:this.initializerContext,externalConfig:this.getExternalConfig(),triggersActionsUi:pluginsStart.triggersActionsUi,usageCollection:plugins.usageCollection};const monitoringApp=new AngularApp(deps);const removeHistoryListener=params.history.listen(location=>{if(location.pathname===""&&location.hash===""){monitoringApp.applyScope()}});const removeHashChange=this.setInitialTimefilter(deps);return()=>{if(removeHashChange){removeHashChange()}removeHistoryListener();monitoringApp.destroy()}}};core.application.register(app);return true}start(core,plugins){}stop(){}setInitialTimefilter({data:data}){const{timefilter:timefilter}=data.query.timefilter;const{pause:pauseByDefault}=timefilter.getRefreshIntervalDefaults();if(pauseByDefault){return}const onHashChange=()=>{const{value:value,pause:pause}=timefilter.getRefreshInterval();if(!value&&pause){window.removeEventListener(HASH_CHANGE,onHashChange);timefilter.setRefreshInterval({value:1e4,pause:false})}};window.addEventListener(HASH_CHANGE,onHashChange,false);return()=>window.removeEventListener(HASH_CHANGE,onHashChange)}getExternalConfig(){const monitoring=this.initializerContext.config.get();return[["minIntervalSeconds",monitoring.ui.min_interval_seconds],["showLicenseExpiration",monitoring.ui.show_license_expiration],["showCgroupMetricsElasticsearch",monitoring.ui.container.elasticsearch.enabled],["showCgroupMetricsLogstash",monitoring.ui.container.logstash.enabled]]}registerAlerts(plugins){const{triggersActionsUi:{alertTypeRegistry:alertTypeRegistry}}=plugins;alertTypeRegistry.register(createCpuUsageAlertType());alertTypeRegistry.register(createDiskUsageAlertType());alertTypeRegistry.register(createMemoryUsageAlertType());alertTypeRegistry.register(createMissingMonitoringDataAlertType());alertTypeRegistry.register(createThreadPoolRejectionsAlertType(constants["p"],constants["d"][constants["p"]]));alertTypeRegistry.register(createThreadPoolRejectionsAlertType(constants["q"],constants["d"][constants["q"]]));alertTypeRegistry.register(createCCRReadExceptionsAlertType());alertTypeRegistry.register(createLargeShardSizeAlertType());const legacyAlertTypes=createLegacyAlertTypes();for(const legacyAlertType of legacyAlertTypes){alertTypeRegistry.register(legacyAlertType)}}}function public_plugin(ctx){return new plugin_MonitoringPlugin(ctx)}},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,exports){module.exports=__kbnSharedDeps__.Moment},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.ElasticNumeral},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaLegacy/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.Jquery},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.Angular},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/observability/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.MomentTimezone},function(module,exports){module.exports=__kbnSharedDeps__.Rxjs},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/alerts/common");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiLibServices},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/licenseManagement/common/constants");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nAngular},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/data/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))}]);