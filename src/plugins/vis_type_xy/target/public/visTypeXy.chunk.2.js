(window["visTypeXy_bundle_jsonpfunction"]=window["visTypeXy_bundle_jsonpfunction"]||[]).push([[2],{31:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return getInterpolationModes}));__webpack_require__.d(__webpack_exports__,"f",(function(){return getThresholdLineStyles}));__webpack_require__.d(__webpack_exports__,"e",(function(){return getRotateOptions}));__webpack_require__.d(__webpack_exports__,"b",(function(){return getFittingFunctions}));__webpack_require__.d(__webpack_exports__,"a",(function(){return getConfigCollections}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__);var _elastic_charts__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3);var _elastic_charts__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_elastic_charts__WEBPACK_IMPORTED_MODULE_1__);var _types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0);var _common__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6);var _charts_public__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5);var _charts_public__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_charts_public__WEBPACK_IMPORTED_MODULE_4__);var _scale_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(18);var _positions__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(17);__webpack_require__.d(__webpack_exports__,"d",(function(){return _positions__WEBPACK_IMPORTED_MODULE_6__["a"]}));const getChartTypes=()=>[{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.chartTypes.lineText",{defaultMessage:"Line"}),value:_common__WEBPACK_IMPORTED_MODULE_3__["a"].Line},{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.chartTypes.areaText",{defaultMessage:"Area"}),value:_common__WEBPACK_IMPORTED_MODULE_3__["a"].Area},{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.chartTypes.barText",{defaultMessage:"Bar"}),value:_common__WEBPACK_IMPORTED_MODULE_3__["a"].Histogram}];const getChartModes=()=>[{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.chartModes.normalText",{defaultMessage:"Normal"}),value:_types__WEBPACK_IMPORTED_MODULE_2__["ChartMode"].Normal},{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.chartModes.stackedText",{defaultMessage:"Stacked"}),value:_types__WEBPACK_IMPORTED_MODULE_2__["ChartMode"].Stacked}];const getInterpolationModes=()=>[{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.interpolationModes.straightText",{defaultMessage:"Straight"}),value:_types__WEBPACK_IMPORTED_MODULE_2__["InterpolationMode"].Linear},{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.interpolationModes.smoothedText",{defaultMessage:"Smoothed"}),value:_types__WEBPACK_IMPORTED_MODULE_2__["InterpolationMode"].Cardinal},{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.interpolationModes.steppedText",{defaultMessage:"Stepped"}),value:_types__WEBPACK_IMPORTED_MODULE_2__["InterpolationMode"].StepAfter}];const getAxisModes=()=>[{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.axisModes.normalText",{defaultMessage:"Normal"}),value:_types__WEBPACK_IMPORTED_MODULE_2__["AxisMode"].Normal},{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.axisModes.percentageText",{defaultMessage:"Percentage"}),value:_types__WEBPACK_IMPORTED_MODULE_2__["AxisMode"].Percentage},{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.axisModes.wiggleText",{defaultMessage:"Wiggle"}),value:_types__WEBPACK_IMPORTED_MODULE_2__["AxisMode"].Wiggle},{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.axisModes.silhouetteText",{defaultMessage:"Silhouette"}),value:_types__WEBPACK_IMPORTED_MODULE_2__["AxisMode"].Silhouette}];const getThresholdLineStyles=()=>[{value:_types__WEBPACK_IMPORTED_MODULE_2__["ThresholdLineStyle"].Full,text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.thresholdLine.style.fullText",{defaultMessage:"Full"})},{value:_types__WEBPACK_IMPORTED_MODULE_2__["ThresholdLineStyle"].Dashed,text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.thresholdLine.style.dashedText",{defaultMessage:"Dashed"})},{value:_types__WEBPACK_IMPORTED_MODULE_2__["ThresholdLineStyle"].DotDashed,text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.thresholdLine.style.dotdashedText",{defaultMessage:"Dot-dashed"})}];const getRotateOptions=()=>[{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.categoryAxis.rotate.horizontalText",{defaultMessage:"Horizontal"}),value:_charts_public__WEBPACK_IMPORTED_MODULE_4__["LabelRotation"].Horizontal},{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.categoryAxis.rotate.verticalText",{defaultMessage:"Vertical"}),value:_charts_public__WEBPACK_IMPORTED_MODULE_4__["LabelRotation"].Vertical},{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.categoryAxis.rotate.angledText",{defaultMessage:"Angled"}),value:_charts_public__WEBPACK_IMPORTED_MODULE_4__["LabelRotation"].Angled}];const getFittingFunctions=()=>[{value:_elastic_charts__WEBPACK_IMPORTED_MODULE_1__["Fit"].None,text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.fittingFunctionsTitle.none",{defaultMessage:"Hide (Do not fill gaps)"})},{value:_elastic_charts__WEBPACK_IMPORTED_MODULE_1__["Fit"].Zero,text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.fittingFunctionsTitle.zero",{defaultMessage:"Zero (Fill gaps with zeros)"})},{value:_elastic_charts__WEBPACK_IMPORTED_MODULE_1__["Fit"].Linear,text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.fittingFunctionsTitle.linear",{defaultMessage:"Linear (Fill gaps with a line)"})},{value:_elastic_charts__WEBPACK_IMPORTED_MODULE_1__["Fit"].Carry,text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.fittingFunctionsTitle.carry",{defaultMessage:"Last (Fill gaps with the last value)"})},{value:_elastic_charts__WEBPACK_IMPORTED_MODULE_1__["Fit"].Lookahead,text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("visTypeXy.fittingFunctionsTitle.lookahead",{defaultMessage:"Next (Fill gaps with the next value)"})}];const getConfigCollections=()=>({legendPositions:Object(_positions__WEBPACK_IMPORTED_MODULE_6__["a"])(),positions:Object(_positions__WEBPACK_IMPORTED_MODULE_6__["a"])(),chartTypes:getChartTypes(),axisModes:getAxisModes(),scaleTypes:Object(_scale_types__WEBPACK_IMPORTED_MODULE_5__["a"])(),chartModes:getChartModes(),interpolationModes:getInterpolationModes(),thresholdLineStyles:getThresholdLineStyles(),fittingFunctions:getFittingFunctions()})},54:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",(function(){return MetricsAxisOptions}));var external_kbnSharedDeps_React_=__webpack_require__(4);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_Lodash_=__webpack_require__(29);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(13);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(16);var public_=__webpack_require__(28);var collections=__webpack_require__(31);const interpolationModes=Object(collections["c"])();function LineOptions({chart:chart,setChart:setChart}){const setLineWidth=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{setChart(paramName,value===""?undefined:value)},[setChart]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(public_["SwitchOption"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.series.showLineLabel",{defaultMessage:"Show line"}),paramName:"drawLinesBetweenPoints",value:chart.drawLinesBetweenPoints,setValue:setChart}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{disabled:!chart.drawLinesBetweenPoints,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.series.lineModeLabel",{defaultMessage:"Line mode"}),options:interpolationModes,paramName:"interpolate",value:chart.interpolate,setValue:setChart})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(public_["NumberInputOption"],{disabled:!chart.drawLinesBetweenPoints,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.series.lineWidthLabel",{defaultMessage:"Line width"}),paramName:"lineWidth",step:.5,min:0,value:chart.lineWidth,setValue:setLineWidth}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(public_["SwitchOption"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.series.showDotsLabel",{defaultMessage:"Show dots"}),paramName:"showCircles",value:chart.showCircles,setValue:setChart}))}var common=__webpack_require__(6);const chart_options_collections=Object(collections["a"])();function ChartOptions({chart:chart,index:index,valueAxes:valueAxes,changeValueAxis:changeValueAxis,setParamByIndex:setParamByIndex}){const setChart=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{setParamByIndex("seriesParams",index,paramName,value)},[setParamByIndex,index]);const setValueAxis=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{changeValueAxis(index,paramName,value)},[changeValueAxis,index]);const valueAxesOptions=Object(external_kbnSharedDeps_React_["useMemo"])(()=>[...valueAxes.map(({id:id,name:name})=>({text:name,value:id})),{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.series.newAxisLabel",{defaultMessage:"New axisâ€¦"}),value:"new"}],[valueAxes]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{id:`seriesValueAxis${index}`,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.series.valueAxisLabel",{defaultMessage:"Value axis"}),options:valueAxesOptions,paramName:"valueAxis",value:chart.valueAxis,setValue:setValueAxis}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{id:`seriesType${index}`,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.series.chartTypeLabel",{defaultMessage:"Chart type"}),options:chart_options_collections.chartTypes,paramName:"type",value:chart.type,setValue:setChart})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{id:`seriesMode${index}`,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.series.modeLabel",{defaultMessage:"Mode"}),options:chart_options_collections.chartModes,paramName:"mode",value:chart.mode,setValue:setChart}))),chart.type===common["a"].Area&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.series.lineModeLabel",{defaultMessage:"Line mode"}),options:chart_options_collections.interpolationModes,paramName:"interpolate",value:chart.interpolate,setValue:setChart})),chart.type===common["a"].Line&&external_kbnSharedDeps_React_default.a.createElement(LineOptions,{chart:chart,setChart:setChart}))}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function SeriesPanel({seriesParams:seriesParams,...chartProps}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visTypeXy.controls.pointSeries.series.metricsTitle",defaultMessage:"Metrics"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),seriesParams.map((chart,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:`visEditorSeriesAccordion${chart.data.id}`,key:index,className:"visEditorSidebar__section visEditorSidebar__collapsible",initialIsOpen:index===0,buttonContent:chart.data.label,buttonContentClassName:"visEditorSidebar__aggGroupAccordionButtonContent eui-textTruncate","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.seriesAccordionAriaLabel",{defaultMessage:"Toggle {agg} options",values:{agg:chart.data.label}})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(ChartOptions,_extends({index:index,chart:chart},chartProps))))))}var components_common=__webpack_require__(14);function LabelOptions({axisLabels:axisLabels,axisFilterCheckboxName:axisFilterCheckboxName,setAxisLabel:setAxisLabel}){const setAxisLabelRotate=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{setAxisLabel(paramName,Number(value))},[setAxisLabel]);const rotateOptions=Object(external_kbnSharedDeps_React_["useMemo"])(collections["e"],[]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xxs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visTypeXy.controls.pointSeries.categoryAxis.labelsTitle",defaultMessage:"Labels"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(public_["SwitchOption"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.categoryAxis.showLabelsLabel",{defaultMessage:"Show labels"}),paramName:"show",value:axisLabels.show,setValue:setAxisLabel}),external_kbnSharedDeps_React_default.a.createElement(public_["SwitchOption"],{"data-test-subj":axisFilterCheckboxName,disabled:!axisLabels.show,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.categoryAxis.filterLabelsLabel",{defaultMessage:"Filter labels"}),paramName:"filter",value:axisLabels.filter,setValue:setAxisLabel}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{disabled:!axisLabels.show,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.categoryAxis.alignLabel",{defaultMessage:"Align"}),options:rotateOptions,paramName:"rotate",value:axisLabels.rotate,setValue:setAxisLabelRotate})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(components_common["a"],{disabled:!axisLabels.show,value:axisLabels.truncate,setValue:setAxisLabel}))))}const positions=Object(collections["d"])();function CategoryAxisPanel({axis:axis,onPositionChanged:onPositionChanged,setCategoryAxis:setCategoryAxis}){const setAxis=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{const updatedAxis={...axis,[paramName]:value};setCategoryAxis(updatedAxis)},[setCategoryAxis,axis]);const setPosition=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{setAxis(paramName,value);onPositionChanged(value)},[setAxis,onPositionChanged]);const setAxisLabel=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{const labels={...axis.labels,[paramName]:value};setAxis("labels",labels)},[axis.labels,setAxis]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visTypeXy.controls.pointSeries.categoryAxis.xAxisTitle",defaultMessage:"X-axis"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.categoryAxis.positionLabel",{defaultMessage:"Position"}),options:positions,paramName:"position",value:axis.position,setValue:setPosition,"data-test-subj":"categoryAxisPosition"}),external_kbnSharedDeps_React_default.a.createElement(public_["SwitchOption"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.categoryAxis.showLabel",{defaultMessage:"Show axis lines and labels"}),paramName:"show",value:axis.show,setValue:setAxis}),axis.show&&external_kbnSharedDeps_React_default.a.createElement(LabelOptions,{axisLabels:axis.labels,axisFilterCheckboxName:`xAxisFilterLabelsCheckbox${axis.id}`,setAxisLabel:setAxisLabel}))}var types=__webpack_require__(0);const rangeError=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.valueAxes.minErrorMessage",{defaultMessage:"Min should be less than Max."});const minError=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.valueAxes.minNeededScaleText",{defaultMessage:"Min must exceed 0 when a log scale is selected."});function areExtentsValid(min=null,max=null){if(min===null||max===null){return true}return max>min}function isNullOrUndefined(value){return value===null||value===undefined}function YExtents({scale:scale,setScale:setScale,setMultipleValidity:setMultipleValidity}){const{min:min,max:max,type:type}=scale;const errors=[];if(!areExtentsValid(min,max)){errors.push(rangeError)}if(type===types["ScaleType"].Log&&(isNullOrUndefined(min)||min<=0)){errors.push(minError)}const isValid=!errors.length;const setExtents=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{setScale(paramName,value===""?null:value)},[setScale]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{setMultipleValidity("yExtents",isValid);return()=>setMultipleValidity("yExtents",true)},[isValid,setMultipleValidity]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{error:errors,isInvalid:!!errors.length,fullWidth:true,display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(public_["NumberInputOption"],{"data-test-subj":"yAxisYExtentsMin",isInvalid:!!errors.length,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.valueAxes.minLabel",{defaultMessage:"Min"}),step:.1,paramName:"min",value:isNullOrUndefined(min)?"":min,setValue:setExtents})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(public_["NumberInputOption"],{"data-test-subj":"yAxisYExtentsMax",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.valueAxes.maxLabel",{defaultMessage:"Max"}),step:.1,paramName:"max",value:isNullOrUndefined(max)?"":max,setValue:setExtents})))))}function CustomExtentsOptions({axisScale:axisScale,setMultipleValidity:setMultipleValidity,setValueAxis:setValueAxis,setValueAxisScale:setValueAxisScale}){const invalidBoundsMarginMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.valueAxes.scaleToDataBounds.minNeededBoundsMargin",{defaultMessage:"Bounds margin must be greater than or equal to 0."});const isBoundsMarginValid=!axisScale.defaultYExtents||!axisScale.boundsMargin||axisScale.boundsMargin>=0;const setBoundsMargin=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>setValueAxisScale(paramName,value===""?undefined:value),[setValueAxisScale]);const onDefaultYExtentsChange=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{const scale={...axisScale,[paramName]:value};if(!scale.defaultYExtents){delete scale.boundsMargin}setValueAxis("scale",scale)},[axisScale,setValueAxis]);const onSetYExtentsChange=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{const scale={...axisScale,[paramName]:value};if(!scale.setYExtents){delete scale.min;delete scale.max}setValueAxis("scale",scale)},[axisScale,setValueAxis]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{setMultipleValidity("boundsMargin",isBoundsMarginValid);return()=>setMultipleValidity("boundsMargin",true)},[isBoundsMarginValid,setMultipleValidity]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(public_["SwitchOption"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.valueAxes.scaleToDataBoundsLabel",{defaultMessage:"Scale to data bounds"}),paramName:"defaultYExtents",value:axisScale.defaultYExtents,setValue:onDefaultYExtentsChange}),axisScale.defaultYExtents&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(public_["NumberInputOption"],{error:!isBoundsMarginValid&&invalidBoundsMarginMessage,isInvalid:!isBoundsMarginValid,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.valueAxes.scaleToDataBounds.boundsMargin",{defaultMessage:"Bounds margin"}),step:.1,min:0,paramName:"boundsMargin",value:axisScale.boundsMargin,setValue:setBoundsMargin})),external_kbnSharedDeps_React_default.a.createElement(public_["SwitchOption"],{"data-test-subj":"yAxisSetYExtents",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.valueAxes.setAxisExtentsLabel",{defaultMessage:"Set axis extents"}),paramName:"setYExtents",value:axisScale.setYExtents,setValue:onSetYExtentsChange}),axisScale.setYExtents&&external_kbnSharedDeps_React_default.a.createElement(YExtents,{scale:axisScale,setScale:setValueAxisScale,setMultipleValidity:setMultipleValidity}))}const value_axis_options_collections=Object(collections["a"])();function ValueAxisOptions({axis:axis,index:index,valueAxis:valueAxis,onValueAxisPositionChanged:onValueAxisPositionChanged,setParamByIndex:setParamByIndex,setMultipleValidity:setMultipleValidity}){const setValueAxis=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>setParamByIndex("valueAxes",index,paramName,value),[setParamByIndex,index]);const setValueAxisTitle=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{const title={...valueAxis.title,[paramName]:value};setParamByIndex("valueAxes",index,"title",title)},[valueAxis.title,setParamByIndex,index]);const setValueAxisScale=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{const scale={...valueAxis.scale,[paramName]:value};setParamByIndex("valueAxes",index,"scale",scale)},[valueAxis.scale,setParamByIndex,index]);const setAxisLabel=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{const labels={...valueAxis.labels,[paramName]:value};setParamByIndex("valueAxes",index,"labels",labels)},[valueAxis.labels,setParamByIndex,index]);const onPositionChanged=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{onValueAxisPositionChanged(index,value)},[index,onValueAxisPositionChanged]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.valueAxes.positionLabel",{defaultMessage:"Position"}),options:value_axis_options_collections.positions,paramName:"position",value:axis.position,setValue:onPositionChanged}),external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{id:`valueAxisMode${index}`,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.valueAxes.modeLabel",{defaultMessage:"Mode"}),options:value_axis_options_collections.axisModes,paramName:"mode",value:axis.scale.mode,setValue:setValueAxisScale}),external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{id:`scaleSelectYAxis-${axis.id}`,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.valueAxes.scaleTypeLabel",{defaultMessage:"Scale type"}),options:value_axis_options_collections.scaleTypes,paramName:"type",value:axis.scale.type,setValue:setValueAxisScale}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}),external_kbnSharedDeps_React_default.a.createElement(public_["SwitchOption"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.valueAxes.showLabel",{defaultMessage:"Show axis lines and labels"}),"data-test-subj":`valueAxisShow-${axis.id}`,paramName:"show",value:axis.show,setValue:setValueAxis}),axis.show?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(public_["TextInputOption"],{"data-test-subj":`valueAxisTitle${index}`,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.valueAxes.titleLabel",{defaultMessage:"Title"}),paramName:"text",value:axis.title.text,setValue:setValueAxisTitle}),external_kbnSharedDeps_React_default.a.createElement(LabelOptions,{axisLabels:axis.labels,axisFilterCheckboxName:`yAxisFilterLabelsCheckbox-${axis.id}`,setAxisLabel:setAxisLabel})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:`yAxisOptionsAccordion${axis.id}`,className:"visEditorSidebar__section visEditorSidebar__collapsible",initialIsOpen:false,buttonContentClassName:"euiText euiText--small",buttonContent:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.valueAxes.customExtentsLabel",{defaultMessage:"Custom extents"}),"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.valueAxes.toggleCustomExtendsAriaLabel",{defaultMessage:"Toggle custom extents"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(CustomExtentsOptions,{axisScale:axis.scale,setMultipleValidity:setMultipleValidity,setValueAxisScale:setValueAxisScale,setValueAxis:setValueAxis}))))}function ValueAxesPanel(props){const{addValueAxis:addValueAxis,removeValueAxis:removeValueAxis,seriesParams:seriesParams,valueAxes:valueAxes}=props;const getSeries=Object(external_kbnSharedDeps_React_["useCallback"])(axis=>{const isFirst=valueAxes[0].id===axis.id;const series=seriesParams.filter(serie=>serie.valueAxis===axis.id||isFirst&&!serie.valueAxis);return series.map(serie=>serie.data.label).join(", ")},[seriesParams,valueAxes]);const removeButtonTooltip=Object(external_kbnSharedDeps_React_["useMemo"])(()=>external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.valueAxes.removeButtonTooltip",{defaultMessage:"Remove Y-axis"}),[]);const renderRemoveButton=Object(external_kbnSharedDeps_React_["useCallback"])(axis=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"bottom",content:removeButtonTooltip},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{color:"danger",iconType:"cross",onClick:()=>removeValueAxis(axis),"aria-label":removeButtonTooltip,"data-test-subj":"removeValueAxisBtn"})),[removeValueAxis,removeButtonTooltip]);const addButtonTooltip=Object(external_kbnSharedDeps_React_["useMemo"])(()=>external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.valueAxes.addButtonTooltip",{defaultMessage:"Add Y-axis"}),[]);const getButtonContent=Object(external_kbnSharedDeps_React_["useCallback"])(axis=>{const description=getSeries(axis);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,axis.name," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:description},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,description)))},[getSeries]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"none",justifyContent:"spaceBetween",alignItems:"baseline"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visTypeXy.controls.pointSeries.valueAxes.yAxisTitle",defaultMessage:"Y-axes"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"bottom",content:addButtonTooltip},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"plusInCircleFilled",onClick:addValueAxis,"aria-label":addButtonTooltip,"data-test-subj":"visualizeAddYAxisButton"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),valueAxes.map((axis,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:`yAxisAccordion${axis.id}`,key:axis.id,"data-test-subj":`toggleYAxisOptions-${axis.id}`,className:"visEditorSidebar__section visEditorSidebar__collapsible",initialIsOpen:false,buttonContent:getButtonContent(axis),buttonClassName:"eui-textTruncate",buttonContentClassName:"visEditorSidebar__aggGroupAccordionButtonContent eui-textTruncate","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.controls.pointSeries.valueAxes.toggleOptionsAriaLabel",{defaultMessage:"Toggle {axisName} options",values:{axisName:axis.name}}),extraAction:valueAxes.length===1?undefined:renderRemoveButton(axis)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(ValueAxisOptions,{axis:axis,index:index,valueAxis:valueAxes[index],onValueAxisPositionChanged:props.onValueAxisPositionChanged,setParamByIndex:props.setParamByIndex,setMultipleValidity:props.setMultipleValidity})))))}var external_kbnSharedDeps_ElasticCharts_=__webpack_require__(3);const makeSerie=(id,label,defaultValueAxis,lastSerie)=>{const data={id:id,label:label};const defaultSerie={show:true,mode:types["ChartMode"].Normal,type:common["a"].Line,drawLinesBetweenPoints:true,showCircles:true,interpolate:types["InterpolationMode"].Linear,lineWidth:2,valueAxis:defaultValueAxis,data:data};return lastSerie?{...lastSerie,data:data}:defaultSerie};const isAxisHorizontal=position=>[external_kbnSharedDeps_ElasticCharts_["Position"].Top,external_kbnSharedDeps_ElasticCharts_["Position"].Bottom].includes(position);const RADIX=10;function countNextAxisNumber(axisName,axisProp="id"){return(value,axis)=>{const nameLength=axisName.length;if(axis[axisProp].substr(0,nameLength)===axisName){const num=parseInt(axis[axisProp].substr(nameLength),RADIX);if(num>=value){value=num+1}}return value}}const AXIS_PREFIX="Axis-";const getUpdatedAxisName=(axisPosition,valueAxes)=>{const axisName=Object(external_kbnSharedDeps_Lodash_["upperFirst"])(axisPosition)+AXIS_PREFIX;const nextAxisNameNumber=valueAxes.reduce(countNextAxisNumber(axisName,"name"),1);return`${axisName}${nextAxisNameNumber}`};function mapPositionOpposite(position){switch(position){case external_kbnSharedDeps_ElasticCharts_["Position"].Bottom:return external_kbnSharedDeps_ElasticCharts_["Position"].Top;case external_kbnSharedDeps_ElasticCharts_["Position"].Top:return external_kbnSharedDeps_ElasticCharts_["Position"].Bottom;case external_kbnSharedDeps_ElasticCharts_["Position"].Left:return external_kbnSharedDeps_ElasticCharts_["Position"].Right;case external_kbnSharedDeps_ElasticCharts_["Position"].Right:return external_kbnSharedDeps_ElasticCharts_["Position"].Left;default:throw new Error("Invalid legend position.")}}function mapPositionOpposingOpposite(position,oldPosition,newPosition){if(position===oldPosition){return newPosition}return mapPositionOpposite(newPosition)}function mapPosition(position){switch(position){case external_kbnSharedDeps_ElasticCharts_["Position"].Bottom:return external_kbnSharedDeps_ElasticCharts_["Position"].Left;case external_kbnSharedDeps_ElasticCharts_["Position"].Top:return external_kbnSharedDeps_ElasticCharts_["Position"].Right;case external_kbnSharedDeps_ElasticCharts_["Position"].Left:return external_kbnSharedDeps_ElasticCharts_["Position"].Bottom;case external_kbnSharedDeps_ElasticCharts_["Position"].Right:return external_kbnSharedDeps_ElasticCharts_["Position"].Top}}const VALUE_AXIS_PREFIX="ValueAxis-";function MetricsAxisOptions(props){const{stateParams:stateParams,setValue:setValue,aggs:aggs,vis:vis,isTabSelected:isTabSelected}=props;const setParamByIndex=Object(external_kbnSharedDeps_React_["useCallback"])((axesName,index,paramName,value)=>{const items=stateParams[axesName];const array=[...items];array[index]={...array[index],[paramName]:value};setValue(axesName,array)},[stateParams,setValue]);const setCategoryAxis=Object(external_kbnSharedDeps_React_["useCallback"])(value=>{const categoryAxes=[...stateParams.categoryAxes];categoryAxes[0]=value;setValue("categoryAxes",categoryAxes)},[setValue,stateParams.categoryAxes]);const[lastCustomLabels,setLastCustomLabels]=Object(external_kbnSharedDeps_React_["useState"])({});const[lastSeriesAgg,setLastSeriesAgg]=Object(external_kbnSharedDeps_React_["useState"])({});const updateAxisTitle=Object(external_kbnSharedDeps_React_["useCallback"])(seriesParams=>{const series=seriesParams||stateParams.seriesParams;let isAxesChanged=false;let lastValuesChanged=false;const lastLabels={...lastCustomLabels};const lastMatchingSeriesAgg={...lastSeriesAgg};const axes=stateParams.valueAxes.map((axis,axisNumber)=>{let newCustomLabel="";let updatedAxis;const matchingSeries=[];series.forEach((serie,seriesIndex)=>{if(axisNumber===0&&!serie.valueAxis||serie.valueAxis===axis.id){const aggByIndex=aggs.bySchemaName("metric")[seriesIndex];matchingSeries.push(aggByIndex)}});if(matchingSeries.length===1){newCustomLabel=matchingSeries[0].makeLabel()}if(lastCustomLabels[axis.id]!==newCustomLabel&&newCustomLabel!==""){const lastSeriesAggType=Object(external_kbnSharedDeps_Lodash_["get"])(lastSeriesAgg,`${matchingSeries[0].id}.type`);const lastSeriesAggField=Object(external_kbnSharedDeps_Lodash_["get"])(lastSeriesAgg,`${matchingSeries[0].id}.field`);const matchingSeriesAggType=Object(external_kbnSharedDeps_Lodash_["get"])(matchingSeries,"[0]type.name","");const matchingSeriesAggField=Object(external_kbnSharedDeps_Lodash_["get"])(matchingSeries,"[0]params.field.name","");const aggTypeIsChanged=lastSeriesAggType!==matchingSeriesAggType;const aggFieldIsChanged=lastSeriesAggField!==matchingSeriesAggField;lastMatchingSeriesAgg[matchingSeries[0].id]={type:matchingSeriesAggType,field:matchingSeriesAggField};lastLabels[axis.id]=newCustomLabel;lastValuesChanged=true;if(Object.keys(lastCustomLabels).length!==0&&(aggTypeIsChanged||aggFieldIsChanged||axis.title.text===""||lastCustomLabels[axis.id]===axis.title.text)&&newCustomLabel!==axis.title.text){updatedAxis={...axis,title:{...axis.title,text:newCustomLabel}};isAxesChanged=true}}return updatedAxis||axis});if(isAxesChanged){setValue("valueAxes",axes)}if(lastValuesChanged){setLastSeriesAgg(lastMatchingSeriesAgg);setLastCustomLabels(lastLabels)}},[aggs,lastCustomLabels,lastSeriesAgg,setValue,stateParams.seriesParams,stateParams.valueAxes]);const onValueAxisPositionChanged=Object(external_kbnSharedDeps_React_["useCallback"])((index,axisPosition)=>{const isHorizontalAxis=isAxisHorizontal(axisPosition);const valueAxes=[...stateParams.valueAxes];const name=getUpdatedAxisName(axisPosition,valueAxes);const[categoryAxes]=stateParams.categoryAxes;if(isAxisHorizontal(categoryAxes.position)===isHorizontalAxis){const updatedCategoryAxes={...categoryAxes,position:mapPosition(categoryAxes.position)};setValue("categoryAxes",[updatedCategoryAxes]);const oldPosition=valueAxes[index].position;const newValueAxes=valueAxes.map(({position:position,...axis},i)=>({...axis,position:i===index?axisPosition:mapPositionOpposingOpposite(position,oldPosition,axisPosition)}));setValue("valueAxes",newValueAxes)}else{valueAxes[index]={...valueAxes[index],name:name,position:axisPosition};setValue("valueAxes",valueAxes)}},[stateParams.valueAxes,stateParams.categoryAxes,setValue]);const onCategoryAxisPositionChanged=Object(external_kbnSharedDeps_React_["useCallback"])(axisPosition=>{const isHorizontalAxis=isAxisHorizontal(axisPosition);if(stateParams.valueAxes.some(({position:position})=>isAxisHorizontal(position)===isHorizontalAxis)){const newValueAxes=stateParams.valueAxes.map(({position:position,...axis})=>({...axis,position:mapPosition(position)}));setValue("valueAxes",newValueAxes)}},[setValue,stateParams.valueAxes]);const addValueAxis=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{const nextAxisIdNumber=stateParams.valueAxes.reduce(countNextAxisNumber(VALUE_AXIS_PREFIX),1);const newAxis=Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(stateParams.valueAxes[0]);newAxis.id=VALUE_AXIS_PREFIX+nextAxisIdNumber;newAxis.position=mapPositionOpposite(newAxis.position);newAxis.name=getUpdatedAxisName(newAxis.position,stateParams.valueAxes);setValue("valueAxes",[...stateParams.valueAxes,newAxis]);return newAxis},[stateParams.valueAxes,setValue]);const removeValueAxis=Object(external_kbnSharedDeps_React_["useCallback"])(axis=>{const newValueAxes=stateParams.valueAxes.filter(valAxis=>valAxis.id!==axis.id);setValue("valueAxes",newValueAxes);let isSeriesUpdated=false;const series=stateParams.seriesParams.map(ser=>{if(axis.id===ser.valueAxis){isSeriesUpdated=true;return{...ser,valueAxis:newValueAxes[0].id}}return ser});if(isSeriesUpdated){setValue("seriesParams",series)}if(stateParams.grid.valueAxis===axis.id){setValue("grid",{...stateParams.grid,valueAxis:undefined})}},[stateParams.seriesParams,stateParams.valueAxes,setValue,stateParams.grid]);const changeValueAxis=Object(external_kbnSharedDeps_React_["useCallback"])((index,paramName,selectedValueAxis)=>{let newValueAxis=selectedValueAxis;if(selectedValueAxis==="new"){const axis=addValueAxis();newValueAxis=axis.id}setParamByIndex("seriesParams",index,paramName,newValueAxis);updateAxisTitle()},[addValueAxis,setParamByIndex,updateAxisTitle]);const schemaName=vis.type.schemas.metrics[0].name;const metrics=Object(external_kbnSharedDeps_React_["useMemo"])(()=>aggs.bySchemaName(schemaName),[schemaName,aggs]);const firstValueAxesId=stateParams.valueAxes[0].id;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const updatedSeries=metrics.map(agg=>{const params=stateParams.seriesParams.find(param=>param.data.id===agg.id);const label=agg.makeLabel();if(params){return{...params,data:{...params.data,label:label}}}else{const series=makeSerie(agg.id,label,firstValueAxesId,stateParams.seriesParams[stateParams.seriesParams.length-1]);return series}});setValue("seriesParams",updatedSeries);updateAxisTitle(updatedSeries)},[metrics,firstValueAxesId,setValue,stateParams.seriesParams,updateAxisTitle]);return isTabSelected?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(SeriesPanel,{changeValueAxis:changeValueAxis,setParamByIndex:setParamByIndex,seriesParams:stateParams.seriesParams,valueAxes:stateParams.valueAxes,vis:vis}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(ValueAxesPanel,{addValueAxis:addValueAxis,removeValueAxis:removeValueAxis,onValueAxisPositionChanged:onValueAxisPositionChanged,setParamByIndex:setParamByIndex,setMultipleValidity:props.setMultipleValidity,seriesParams:stateParams.seriesParams,valueAxes:stateParams.valueAxes}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(CategoryAxisPanel,{axis:stateParams.categoryAxes[0],onPositionChanged:onCategoryAxisPositionChanged,setCategoryAxis:setCategoryAxis})):null}}}]);