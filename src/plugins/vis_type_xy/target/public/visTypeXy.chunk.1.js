(window["visTypeXy_bundle_jsonpfunction"]=window["visTypeXy_bundle_jsonpfunction"]||[]).push([[1],Array(32).concat([function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&btoa){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item,useSourceMap);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list};function cssWithMappingToString(item,useSourceMap){var content=item[1]||"";var cssMapping=item[3];if(!cssMapping){return content}if(useSourceMap&&typeof btoa==="function"){var sourceMapping=toComment(cssMapping);var sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));var data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(35);case"v7light":return __webpack_require__(37);case"v8dark":return __webpack_require__(39);case"v8light":return __webpack_require__(41)}},function(module,exports,__webpack_require__){var api=__webpack_require__(32);var content=__webpack_require__(36);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(33);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".detailedTooltip {\n  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1), 0 6px 12px 0 rgba(0, 0, 0, 0.1), 0 4px 4px 0 rgba(0, 0, 0, 0.1), 0 2px 2px 0 rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  background-color: black;\n  color: #FFF;\n  z-index: 9000;\n  max-width: 256px;\n  overflow-wrap: break-word;\n  font-size: 12px;\n  font-size: 0.75rem;\n  line-height: 1.5;\n  padding: 8px;\n  pointer-events: none;\n  max-width: 320px;\n  overflow: hidden;\n  padding: 8px; }\n  .detailedTooltip table td,\n  .detailedTooltip table th {\n    text-align: left;\n    padding: 4px;\n    overflow-wrap: break-word;\n    word-wrap: break-word; }\n\n.detailedTooltip__header > :last-child {\n  margin-bottom: 8px; }\n\n.detailedTooltip__labelContainer,\n.detailedTooltip__valueContainer {\n  overflow-wrap: break-word;\n  word-wrap: break-word; }\n\n.detailedTooltip__label {\n  font-weight: 500;\n  color: #cccccc; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32);var content=__webpack_require__(38);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(33);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".detailedTooltip {\n  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1), 0 6px 12px 0 rgba(0, 0, 0, 0.1), 0 4px 4px 0 rgba(0, 0, 0, 0.1), 0 2px 2px 0 rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  background-color: #404040;\n  color: #FFF;\n  z-index: 9000;\n  max-width: 256px;\n  overflow-wrap: break-word;\n  font-size: 12px;\n  font-size: 0.75rem;\n  line-height: 1.5;\n  padding: 8px;\n  pointer-events: none;\n  max-width: 320px;\n  overflow: hidden;\n  padding: 8px; }\n  .detailedTooltip table td,\n  .detailedTooltip table th {\n    text-align: left;\n    padding: 4px;\n    overflow-wrap: break-word;\n    word-wrap: break-word; }\n\n.detailedTooltip__header > :last-child {\n  margin-bottom: 8px; }\n\n.detailedTooltip__labelContainer,\n.detailedTooltip__valueContainer {\n  overflow-wrap: break-word;\n  word-wrap: break-word; }\n\n.detailedTooltip__label {\n  font-weight: 500;\n  color: #cccccc; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32);var content=__webpack_require__(40);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(33);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".detailedTooltip {\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.25), 0 3.6px 13px rgba(0, 0, 0, 0.175), 0 8.4px 23px rgba(0, 0, 0, 0.15), 0 23px 35px rgba(0, 0, 0, 0.125);\n  border-radius: 6px;\n  background-color: black;\n  color: #FFF;\n  z-index: 9000;\n  max-width: 256px;\n  overflow-wrap: break-word;\n  font-size: 12px;\n  font-size: 0.85714rem;\n  line-height: 1.14286rem;\n  padding: 8px;\n  pointer-events: none;\n  max-width: 320px;\n  overflow: hidden;\n  padding: 8px; }\n  .detailedTooltip table td,\n  .detailedTooltip table th {\n    text-align: left;\n    padding: 4px;\n    overflow-wrap: break-word;\n    word-wrap: break-word; }\n\n.detailedTooltip__header > :last-child {\n  margin-bottom: 8px; }\n\n.detailedTooltip__labelContainer,\n.detailedTooltip__valueContainer {\n  overflow-wrap: break-word;\n  word-wrap: break-word; }\n\n.detailedTooltip__label {\n  font-weight: 500;\n  color: #cccccc; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32);var content=__webpack_require__(42);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(33);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".detailedTooltip {\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.1), 0 3.6px 13px rgba(0, 0, 0, 0.07), 0 8.4px 23px rgba(0, 0, 0, 0.06), 0 23px 35px rgba(0, 0, 0, 0.05);\n  border-radius: 6px;\n  background-color: #404040;\n  color: #FFF;\n  z-index: 9000;\n  max-width: 256px;\n  overflow-wrap: break-word;\n  font-size: 12px;\n  font-size: 0.85714rem;\n  line-height: 1.14286rem;\n  padding: 8px;\n  pointer-events: none;\n  max-width: 320px;\n  overflow: hidden;\n  padding: 8px; }\n  .detailedTooltip table td,\n  .detailedTooltip table th {\n    text-align: left;\n    padding: 4px;\n    overflow-wrap: break-word;\n    word-wrap: break-word; }\n\n.detailedTooltip__header > :last-child {\n  margin-bottom: 8px; }\n\n.detailedTooltip__labelContainer,\n.detailedTooltip__valueContainer {\n  overflow-wrap: break-word;\n  word-wrap: break-word; }\n\n.detailedTooltip__label {\n  font-weight: 500;\n  color: #cccccc; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(44);case"v7light":return __webpack_require__(46);case"v8dark":return __webpack_require__(48);case"v8light":return __webpack_require__(50)}},function(module,exports,__webpack_require__){var api=__webpack_require__(32);var content=__webpack_require__(45);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(33);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".xyChart__container {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32);var content=__webpack_require__(47);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(33);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".xyChart__container {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32);var content=__webpack_require__(49);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(33);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".xyChart__container {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32);var content=__webpack_require__(51);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(33);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".xyChart__container {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0; }\n",""]);module.exports=exports},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var external_kbnSharedDeps_React_=__webpack_require__(4);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticCharts_=__webpack_require__(3);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(13);var external_kbnSharedDeps_Lodash_=__webpack_require__(29);var public_=__webpack_require__(5);var common=__webpack_require__(6);const getCurveType=type=>{switch(type){case"cardinal":return external_kbnSharedDeps_ElasticCharts_["CurveType"].CURVE_MONOTONE_X;case"step-after":return external_kbnSharedDeps_ElasticCharts_["CurveType"].CURVE_STEP_AFTER;case"linear":default:return external_kbnSharedDeps_ElasticCharts_["CurveType"].LINEAR}};const renderAllSeries=({aspects:aspects,yAxes:yAxes,xAxis:xAxis,showValueLabel:showValueLabel,enableHistogramMode:enableHistogramMode,fittingFunction:fittingFunction},seriesParams,data,getSeriesName,getSeriesColor,timeZone,xAccessor,splitSeriesAccessors)=>seriesParams.map(({show:show,valueAxis:groupId,data:{id:paramId},lineWidth:strokeWidth,showCircles:showCircles,drawLinesBetweenPoints:drawLinesBetweenPoints,mode:mode,interpolate:interpolate,type:type})=>{var _yAxes$find,_aspects$z$accessor,_aspects$z,_aspects$z2;const yAspects=aspects.y.filter(({aggId:aggId,accessor:accessor})=>(aggId===null||aggId===void 0?void 0:aggId.includes(paramId))&&accessor!==null);if(!show||!yAspects.length){return null}const yAccessors=yAspects.map(aspect=>aspect.accessor);const id=`${type}-${yAccessors[0]}`;const yAxisScale=(_yAxes$find=yAxes.find(({groupId:axisGroupId})=>axisGroupId===groupId))===null||_yAxes$find===void 0?void 0:_yAxes$find.scale;const isStacked=mode==="stacked"||(yAxisScale===null||yAxisScale===void 0?void 0:yAxisScale.mode)==="percentage";const stackMode=(yAxisScale===null||yAxisScale===void 0?void 0:yAxisScale.mode)==="normal"?undefined:yAxisScale===null||yAxisScale===void 0?void 0:yAxisScale.mode;const pseudoGroupId=isStacked?`__pseudo_stacked_group-${groupId}__`:groupId;const useDefaultGroupDomain=isStacked?groupId:undefined;switch(type){case common["a"].Histogram:return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["BarSeries"],{key:id,id:id,name:getSeriesName,color:getSeriesColor,tickFormat:yAspects[0].formatter,groupId:pseudoGroupId,useDefaultGroupDomain:useDefaultGroupDomain,xScaleType:xAxis.scale.type,yScaleType:yAxisScale===null||yAxisScale===void 0?void 0:yAxisScale.type,xAccessor:xAccessor,yAccessors:yAccessors,splitSeriesAccessors:splitSeriesAccessors,data:data,timeZone:timeZone,stackAccessors:isStacked?["__any_value__"]:undefined,enableHistogramMode:enableHistogramMode,stackMode:stackMode,minBarHeight:2,displayValueSettings:{showValueLabel:showValueLabel,hideClippedValue:true}});case common["a"].Area:case common["a"].Line:const markSizeAccessor=showCircles?(_aspects$z$accessor=(_aspects$z=aspects.z)===null||_aspects$z===void 0?void 0:_aspects$z.accessor)!==null&&_aspects$z$accessor!==void 0?_aspects$z$accessor:undefined:undefined;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["AreaSeries"],{key:id,id:id,fit:fittingFunction,color:getSeriesColor,tickFormat:yAspects[0].formatter,name:getSeriesName,curve:getCurveType(interpolate),groupId:pseudoGroupId,useDefaultGroupDomain:useDefaultGroupDomain,xScaleType:xAxis.scale.type,yScaleType:yAxisScale===null||yAxisScale===void 0?void 0:yAxisScale.type,xAccessor:xAccessor,yAccessors:yAccessors,markSizeAccessor:markSizeAccessor,markFormat:(_aspects$z2=aspects.z)===null||_aspects$z2===void 0?void 0:_aspects$z2.formatter,splitSeriesAccessors:splitSeriesAccessors,data:data,stackAccessors:isStacked?["__any_value__"]:undefined,displayValueSettings:{showValueLabel:showValueLabel,hideClippedValue:true},timeZone:timeZone,stackMode:stackMode,areaSeriesStyle:{area:{...type===common["a"].Line&&{opacity:0}},line:{strokeWidth:strokeWidth,visible:drawLinesBetweenPoints},point:{visible:showCircles,fill:markSizeAccessor?external_kbnSharedDeps_ElasticCharts_["ColorVariant"].Series:undefined}}});default:return null}});var external_kbnSharedDeps_Moment_=__webpack_require__(24);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);var services=__webpack_require__(8);function getTimeZone(){const uiSettings=Object(services["f"])();if(uiSettings.isDefault("dateFormat:tz")){const detectedTimeZone=external_kbnSharedDeps_Moment_default.a.tz.guess();if(detectedTimeZone)return detectedTimeZone;else return external_kbnSharedDeps_Moment_default()().format("Z")}else{return uiSettings.get("dateFormat:tz","Browser")}}var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);const getLegendActions=(canFilter,getFilterEventData,onFilter,getSeriesName)=>({series:[xySeries]})=>{const[popoverOpen,setPopoverOpen]=Object(external_kbnSharedDeps_React_["useState"])(false);const[isfilterable,setIsfilterable]=Object(external_kbnSharedDeps_React_["useState"])(false);const series=xySeries;const filterData=getFilterEventData(series);(async()=>setIsfilterable(await canFilter(filterData)))();if(!isfilterable||!filterData){return null}const name=getSeriesName(series);const panels=[{id:"main",title:`${name}`,items:[{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.legend.filterForValueButtonAriaLabel",{defaultMessage:"Filter for value"}),"data-test-subj":`legend-${name}-filterIn`,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"plusInCircle",size:"m"}),onClick:()=>{setPopoverOpen(false);onFilter(filterData)}},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.legend.filterOutValueButtonAriaLabel",{defaultMessage:"Filter out value"}),"data-test-subj":`legend-${name}-filterOut`,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"minusInCircle",size:"m"}),onClick:()=>{setPopoverOpen(false);onFilter(filterData,true)}}]}];const Button=external_kbnSharedDeps_React_default.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",marginLeft:4,marginRight:4},"data-test-subj":`legend-${name}`,onKeyPress:()=>undefined,onClick:()=>setPopoverOpen(!popoverOpen)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{size:"s",type:"boxesVertical"}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"contextMenuNormal",button:Button,isOpen:popoverOpen,closePopover:()=>setPopoverOpen(false),panelPaddingSize:"none",anchorPosition:"upLeft",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.legend.filterOptionsLegend",{defaultMessage:"{legendDataLabel}, filter options",values:{legendDataLabel:name}})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:"main",panels:panels}))};const emptyTextLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.emptyTextColumnValue",{defaultMessage:"(empty)"});const fillEmptyValue=value=>value===""?emptyTextLabel:value;function getSplitValues(splitAccessors,seriesAspects){if(splitAccessors.size<1){return[]}const splitValues=[];splitAccessors.forEach((value,key)=>{const split=(seriesAspects!==null&&seriesAspects!==void 0?seriesAspects:[]).find(({accessor:accessor})=>accessor===key);splitValues.push(split!==null&&split!==void 0&&split.formatter?split===null||split===void 0?void 0:split.formatter(value):value)});return splitValues.map(fillEmptyValue)}const getSeriesNameFn=(aspects,multipleY=false)=>Object(external_kbnSharedDeps_Lodash_["memoize"])(({splitAccessors:splitAccessors,yAccessor:yAccessor})=>{var _aspects$y$find$title,_aspects$y$find;const splitValues=getSplitValues(splitAccessors,aspects.series);const yAccessorTitle=(_aspects$y$find$title=(_aspects$y$find=aspects.y.find(({accessor:accessor})=>accessor===yAccessor))===null||_aspects$y$find===void 0?void 0:_aspects$y$find.title)!==null&&_aspects$y$find$title!==void 0?_aspects$y$find$title:null;if(!yAccessorTitle){return null}if(multipleY){if(splitValues.length===0){return yAccessorTitle}return`${splitValues.join(" - ")}: ${yAccessorTitle}`}return splitValues.length>0?splitValues.join(" - "):yAccessorTitle});const getXDomain=params=>{var _interval;const minInterval=(_interval=params===null||params===void 0?void 0:params.interval)!==null&&_interval!==void 0?_interval:undefined;const bounds=params.date?params.bounds:null;if(bounds){return{min:bounds.min,max:bounds.max,minInterval:minInterval}}return{minInterval:minInterval}};const getAdjustedDomain=(data,{accessor:accessor,params:params},timeZone,domain,hasBars)=>{if(accessor&&domain&&"min"in domain&&"max"in domain&&"intervalESValue"in params&&"intervalESUnit"in params){const{interval:interval,intervalESValue:intervalESValue,intervalESUnit:intervalESUnit}=params;const xValues=Object(external_kbnSharedDeps_Lodash_["uniq"])(data.map(d=>d[accessor]).sort());const[firstXValue]=xValues;const lastXValue=xValues[xValues.length-1];const domainMin=Math.min(firstXValue,domain.min);const domainMaxValue=hasBars?domain.max-interval:lastXValue+interval;const domainMax=Math.max(domainMaxValue,lastXValue);const minInterval=Object(public_["getAdjustedInterval"])(xValues,intervalESValue,intervalESUnit,timeZone);return{min:domainMin,max:domainMax,minInterval:minInterval}}return"interval"in params?{minInterval:params.interval}:{}};function getAnchorPosition(legendPosition){switch(legendPosition){case external_kbnSharedDeps_ElasticCharts_["Position"].Bottom:return"upCenter";case external_kbnSharedDeps_ElasticCharts_["Position"].Top:return"downCenter";case external_kbnSharedDeps_ElasticCharts_["Position"].Left:return"rightCenter";default:return"leftCenter"}}const useColorPicker=(legendPosition,setColor,getSeriesName)=>Object(external_kbnSharedDeps_React_["useMemo"])(()=>({anchor:anchor,color:color,onClose:onClose,onChange:onChange,seriesIdentifiers:[seriesIdentifier]})=>{const seriesName=getSeriesName(seriesIdentifier);const handlChange=(newColor,event)=>{if(!seriesName){return}if(newColor){onChange(newColor)}setColor(newColor,seriesName,event);onClose()};const handleOutsideClick=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{onClose===null||onClose===void 0?void 0:onClose()},[onClose]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOutsideClickDetector"],{onOutsideClick:handleOutsideClick},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiWrappingPopover"],{isOpen:true,ownFocus:true,display:"block",button:anchor,anchorPosition:getAnchorPosition(legendPosition),closePopover:onClose,panelPaddingSize:"s"},external_kbnSharedDeps_React_default.a.createElement(public_["ColorPicker"],{color:color,onChange:handlChange,label:seriesName})))},[getSeriesName,legendPosition,setColor]);var data_public_=__webpack_require__(2);const COMPLEX_X_ACCESSOR="__customXAccessor__";const COMPLEX_SPLIT_ACCESSOR="__complexSplitAccessor__";const getXAccessor=aspect=>{var _getComplexAccessor;return(_getComplexAccessor=getComplexAccessor(COMPLEX_X_ACCESSOR)(aspect))!==null&&_getComplexAccessor!==void 0?_getComplexAccessor:()=>{var _aspect$params;return(_aspect$params=aspect.params)===null||_aspect$params===void 0?void 0:_aspect$params.defaultValue}};const getFieldName=(fieldName,index)=>{const indexStr=index!==undefined?`::${index}`:"";return`${fieldName}${indexStr}`};const isRangeAggType=type=>type===data_public_["BUCKET_TYPES"].DATE_RANGE||type===data_public_["BUCKET_TYPES"].RANGE||type===data_public_["BUCKET_TYPES"].IP_RANGE;const getComplexAccessor=(fieldName,isComplex=false)=>(aspect,index)=>{if(!aspect.accessor){return}if(!((isComplex||isRangeAggType(aspect.aggType))&&aspect.formatter)){return aspect.accessor}const formatter=aspect.formatter;const accessor=aspect.accessor;const fn=d=>{const v=d[accessor];if(v===undefined){return}const f=formatter(v);return f};fn.fieldName=getFieldName(fieldName,index);return fn};const getSplitSeriesAccessorFnMap=splitSeriesAccessors=>{const m=new Map;splitSeriesAccessors.forEach((accessor,index)=>{if(typeof accessor==="function"){const fieldName=getFieldName(COMPLEX_SPLIT_ACCESSOR,index);m.set(fieldName,accessor)}});return m};const getAllSeries=(rows,splitAccessors,yAspects)=>{const allSeries=[];if(!splitAccessors)return[];rows.forEach(row=>{let seriesName="";splitAccessors===null||splitAccessors===void 0?void 0:splitAccessors.forEach(({accessor:accessor,formatter:formatter})=>{if(!accessor)return;const name=formatter?formatter(row[accessor]):row[accessor];if(seriesName){seriesName+=` - ${name}`}else{seriesName=name}});if(yAspects.length>1){yAspects.forEach(aspect=>{if(!allSeries.includes(`${seriesName}: ${aspect.title}`)){allSeries.push(`${seriesName}: ${aspect.title}`)}})}else{if(!allSeries.includes(seriesName)){allSeries.push(seriesName)}}});return allSeries};const XYAxis=({id:id,title:title,show:show,position:position,groupId:groupId,grid:grid,ticks:ticks,domain:domain,style:style,integersOnly:integersOnly})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Axis"],{id:`${id}__axis`,groupId:groupId,hide:!show,title:title,style:style,domain:domain,position:position,integersOnly:integersOnly,showGridLines:grid===null||grid===void 0?void 0:grid.show,tickFormat:ticks===null||ticks===void 0?void 0:ticks.formatter,labelFormat:ticks===null||ticks===void 0?void 0:ticks.labelFormatter,showOverlappingLabels:ticks===null||ticks===void 0?void 0:ticks.showOverlappingLabels,showDuplicatedTicks:ticks===null||ticks===void 0?void 0:ticks.showDuplicates});const XYEndzones=({enabled:enabled,isDarkMode:isDarkMode,isFullBin:isFullBin,hideTooltips:hideTooltips,domain:domain,adjustedDomain:adjustedDomain})=>{if(enabled&&domain&&adjustedDomain&&"min"in domain&&"max"in domain&&domain.minInterval!==undefined&&"min"in adjustedDomain&&"max"in adjustedDomain){return external_kbnSharedDeps_React_default.a.createElement(public_["Endzones"],{isFullBin:isFullBin,isDarkMode:isDarkMode,domainStart:domain.min,domainEnd:domain.max,interval:domain.minInterval,domainMin:adjustedDomain.min,domainMax:adjustedDomain.max,hideTooltips:hideTooltips})}return null};const XYCurrentTime=({enabled:enabled,isDarkMode:isDarkMode,domain:domain})=>{if(!enabled){return null}const domainEnd=domain&&"max"in domain?domain.max:undefined;return external_kbnSharedDeps_React_default.a.createElement(public_["CurrentTime"],{isDarkMode:isDarkMode,domainEnd:domainEnd})};function getValueLabelsStyling(isHorizontal){const VALUE_LABELS_MAX_FONTSIZE=15;const VALUE_LABELS_MIN_FONTSIZE=10;const VALUE_LABELS_VERTICAL_OFFSET=-10;const VALUE_LABELS_HORIZONTAL_OFFSET=10;return{displayValue:{fontSize:{min:VALUE_LABELS_MIN_FONTSIZE,max:VALUE_LABELS_MAX_FONTSIZE},fill:{textInverted:true,textBorder:2},alignment:isHorizontal?{vertical:external_kbnSharedDeps_ElasticCharts_["VerticalAlignment"].Middle}:{horizontal:external_kbnSharedDeps_ElasticCharts_["HorizontalAlignment"].Center},offsetX:isHorizontal?VALUE_LABELS_HORIZONTAL_OFFSET:0,offsetY:isHorizontal?0:VALUE_LABELS_VERTICAL_OFFSET}}}const XYSettings=({markSizeRatio:markSizeRatio,rotation:rotation,enableHistogramMode:enableHistogramMode,tooltip:tooltip,isTimeChart:isTimeChart,xAxis:xAxis,orderBucketsBySum:orderBucketsBySum,xDomain:xDomain,adjustedXDomain:adjustedXDomain,showLegend:showLegend,onElementClick:onElementClick,onBrushEnd:onBrushEnd,onRenderChange:onRenderChange,legendAction:legendAction,legendColorPicker:legendColorPicker,legendPosition:legendPosition})=>{var _theme$chartMargins$b,_theme$chartMargins,_theme$chartMargins$r,_theme$chartMargins2,_xAxis$ticks,_window$_echDebugStat;const themeService=Object(services["d"])();const theme=themeService.useChartsTheme();const baseTheme=themeService.useChartsBaseTheme();const dimmingOpacity=Object(services["f"])().get("visualization:dimmingOpacity");const valueLabelsStyling=getValueLabelsStyling(rotation===90||rotation===-90);const themeOverrides={markSizeRatio:markSizeRatio,sharedStyle:{unhighlighted:{opacity:dimmingOpacity}},barSeriesStyle:{...valueLabelsStyling},axes:{axisTitle:{padding:{outer:10}}},chartMargins:legendPosition===external_kbnSharedDeps_ElasticCharts_["Position"].Top||legendPosition===external_kbnSharedDeps_ElasticCharts_["Position"].Right?{bottom:((_theme$chartMargins$b=(_theme$chartMargins=theme.chartMargins)===null||_theme$chartMargins===void 0?void 0:_theme$chartMargins.bottom)!==null&&_theme$chartMargins$b!==void 0?_theme$chartMargins$b:0)+10}:{right:((_theme$chartMargins$r=(_theme$chartMargins2=theme.chartMargins)===null||_theme$chartMargins2===void 0?void 0:_theme$chartMargins2.right)!==null&&_theme$chartMargins$r!==void 0?_theme$chartMargins$r:0)+10}};const headerValueFormatter=(_xAxis$ticks=xAxis.ticks)!==null&&_xAxis$ticks!==void 0&&_xAxis$ticks.formatter?value=>{var _fillEmptyValue,_xAxis$ticks2,_xAxis$ticks2$formatt;return(_fillEmptyValue=fillEmptyValue((_xAxis$ticks2=xAxis.ticks)===null||_xAxis$ticks2===void 0?void 0:(_xAxis$ticks2$formatt=_xAxis$ticks2.formatter)===null||_xAxis$ticks2$formatt===void 0?void 0:_xAxis$ticks2$formatt.call(_xAxis$ticks2,value)))!==null&&_fillEmptyValue!==void 0?_fillEmptyValue:""}:undefined;const headerFormatter=isTimeChart&&xDomain&&adjustedXDomain?Object(public_["renderEndzoneTooltip"])(xDomain.minInterval,"min"in xDomain?xDomain.min:undefined,"max"in xDomain?xDomain.max:undefined,headerValueFormatter,!tooltip.detailedTooltip):headerValueFormatter&&(tooltip.detailedTooltip?undefined:({value:value})=>headerValueFormatter(value));const tooltipProps=tooltip.detailedTooltip?{...tooltip,customTooltip:tooltip.detailedTooltip(headerFormatter),headerFormatter:undefined}:{...tooltip,headerFormatter:headerFormatter};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Settings"],{debugState:(_window$_echDebugStat=window._echDebugStateFlag)!==null&&_window$_echDebugStat!==void 0?_window$_echDebugStat:false,xDomain:adjustedXDomain,rotation:rotation,theme:[themeOverrides,theme],baseTheme:baseTheme,showLegend:showLegend,legendPosition:legendPosition,allowBrushingLastHistogramBucket:isTimeChart,roundHistogramBrushValues:enableHistogramMode&&!isTimeChart,legendColorPicker:legendColorPicker,onElementClick:onElementClick,onBrushEnd:onBrushEnd,onRenderChange:onRenderChange,legendAction:legendAction,tooltip:tooltipProps,orderOrdinalBinsBy:orderBucketsBySum?{direction:external_kbnSharedDeps_ElasticCharts_["Direction"].Descending}:undefined})};const XYThresholdLine=({show:show,value:dataValue,color:color,width:width,groupId:groupId,dash:dash})=>{if(!show){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["LineAnnotation"],{id:"__threshold_line__",groupId:groupId,domainType:external_kbnSharedDeps_ElasticCharts_["AnnotationDomainTypes"].YDomain,dataValues:[{dataValue:dataValue}],style:{line:{stroke:color,strokeWidth:width!==null&&width!==void 0?width:2,opacity:1,dash:dash}}})};var types=__webpack_require__(0);function getThresholdLine({style:style,...rest},yAxes,seriesParams){var _yAxes$find;const groupId=(_yAxes$find=yAxes.find(({id:id})=>seriesParams.some(({valueAxis:valueAxis})=>id===valueAxis)))===null||_yAxes$find===void 0?void 0:_yAxes$find.groupId;return{...rest,dash:getDash(style),groupId:groupId}}function getDash(style){switch(style){case types["ThresholdLineStyle"].Dashed:return[10,5];case types["ThresholdLineStyle"].DotDashed:return[20,5,5,5];case types["ThresholdLineStyle"].Full:default:return}}function getRotation({position:position}){if(position==="left"||position==="right"){return 90}return 0}var _detailed_tooltip=__webpack_require__(34);const getTooltipData=(aspects,header,value)=>{var _aspects$y$find;const data=[];if(header){const xFormatter=isRangeAggType(aspects.x.aggType)?null:aspects.x.formatter;data.push({label:aspects.x.title,value:xFormatter?xFormatter(header.value):`${header.value}`})}const valueSeries=value.seriesIdentifier;const yAccessor=(_aspects$y$find=aspects.y.find(({accessor:accessor})=>accessor===valueSeries.yAccessor))!==null&&_aspects$y$find!==void 0?_aspects$y$find:null;if(yAccessor){data.push({label:yAccessor.title,value:yAccessor.formatter?yAccessor.formatter(value.value):`${value.value}`})}if(aspects.z&&!Object(external_kbnSharedDeps_Lodash_["isNil"])(value.markValue)){data.push({label:aspects.z.title,value:aspects.z.formatter?aspects.z.formatter(value.markValue):`${value.markValue}`})}valueSeries.splitAccessors.forEach((splitValue,key)=>{var _aspects$series;const split=((_aspects$series=aspects.series)!==null&&_aspects$series!==void 0?_aspects$series:[]).find(({accessor:accessor},i)=>accessor===key||key===`${COMPLEX_SPLIT_ACCESSOR}::${i}`);if(split){data.push({label:split===null||split===void 0?void 0:split.title,value:split!==null&&split!==void 0&&split.formatter&&!key.toString().startsWith(COMPLEX_SPLIT_ACCESSOR)?split===null||split===void 0?void 0:split.formatter(splitValue):`${splitValue}`})}});if(aspects.splitColumn&&valueSeries.smHorizontalAccessorValue!==undefined&&valueSeries.smHorizontalAccessorValue!==undefined){data.push({label:aspects.splitColumn.title,value:`${valueSeries.smHorizontalAccessorValue}`})}if(aspects.splitRow&&valueSeries.smVerticalAccessorValue!==undefined&&valueSeries.smVerticalAccessorValue!==undefined){data.push({label:aspects.splitRow.title,value:`${valueSeries.smVerticalAccessorValue}`})}return data};const renderData=({label:label,value:rawValue},index)=>{const value=fillEmptyValue(rawValue);return label&&value?external_kbnSharedDeps_React_default.a.createElement("tr",{key:label+value+index},external_kbnSharedDeps_React_default.a.createElement("td",{className:"detailedTooltip__label"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"detailedTooltip__labelContainer"},label)),external_kbnSharedDeps_React_default.a.createElement("td",{className:"detailedTooltip__value"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"detailedTooltip__valueContainer"},value))):null};const getDetailedTooltip=aspects=>headerFormatter=>function DetailedTooltip({header:header,values:values}){const highlightedValue=values.find(({isHighlighted:isHighlighted})=>isHighlighted);if(!highlightedValue){return null}const tooltipData=getTooltipData(aspects,header,highlightedValue);if(tooltipData.length===0){return null}return external_kbnSharedDeps_React_default.a.createElement("div",{className:"detailedTooltip"},headerFormatter&&header&&external_kbnSharedDeps_React_default.a.createElement("div",{className:"detailedTooltip__header"},headerFormatter(header)),external_kbnSharedDeps_React_default.a.createElement("table",null,external_kbnSharedDeps_React_default.a.createElement("tbody",null,tooltipData.map(renderData))))};function getTooltip(aspects,{addTooltip:addTooltip,detailedTooltip:detailedTooltip}){return{type:addTooltip?external_kbnSharedDeps_ElasticCharts_["TooltipType"].VerticalCursor:external_kbnSharedDeps_ElasticCharts_["TooltipType"].None,detailedTooltip:detailedTooltip?getDetailedTooltip(aspects):undefined}}function getLegend({addLegend:addLegend,legendPosition:legendPosition}){return{show:addLegend,position:legendPosition}}function getAxis({type:type,title:axisTitle,labels:labels,scale:axisScale,...axis},{categoryLines:categoryLines,valueAxis:valueAxis},{params:params,format:format,formatter:formatter,title:fallbackTitle="",aggType:aggType},seriesParams,isDateHistogram=false){const isCategoryAxis=type===types["AxisType"].Category;const show=(isCategoryAxis||seriesParams.some(({valueAxis:id})=>id===axis.id))&&axis.show;const groupId=axis.id;const grid=isCategoryAxis?{show:categoryLines}:{show:valueAxis===axis.id};const tickFormatter=aggType===data_public_["BUCKET_TYPES"].DATE_RANGE||aggType===data_public_["BUCKET_TYPES"].RANGE?external_kbnSharedDeps_Lodash_["identity"]:formatter;const ticks={formatter:tickFormatter,labelFormatter:getLabelFormatter(labels.truncate,tickFormatter),show:labels.show,rotation:labels.rotate,showOverlappingLabels:!labels.filter,showDuplicates:!labels.filter};const scale=getScale(axisScale,params,format,isCategoryAxis);const title=axisTitle.text||fallbackTitle;const fallbackRotation=isCategoryAxis&&isDateHistogram?public_["LabelRotation"].Horizontal:public_["LabelRotation"].Vertical;return{...axis,show:show,groupId:groupId,title:title,ticks:ticks,grid:grid,scale:scale,style:getAxisStyle(ticks,title,fallbackRotation),domain:getAxisDomain(scale,isCategoryAxis),integersOnly:aggType==="count"}}function getLabelFormatter(truncate,formatter){if(truncate===null||truncate===undefined){return formatter}return value=>{const formattedStringValue=`${formatter?formatter(value):value}`;const finalValue=fillEmptyValue(formattedStringValue);if(finalValue.length>truncate){return`${finalValue.slice(0,truncate)}...`}return finalValue}}function getScaleType(scale,isNumber,isTime=false,isHistogram=false){if(isTime)return external_kbnSharedDeps_ElasticCharts_["ScaleType"].Time;if(isHistogram)return external_kbnSharedDeps_ElasticCharts_["ScaleType"].Linear;if(!isNumber){return external_kbnSharedDeps_ElasticCharts_["ScaleType"].Ordinal}const type=scale===null||scale===void 0?void 0:scale.type;if(type===types["ScaleType"].SquareRoot){return external_kbnSharedDeps_ElasticCharts_["ScaleType"].Sqrt}return type}function getScale(scale,params,format,isCategoryAxis){var _format$params;const type=isCategoryAxis?getScaleType(scale,(format===null||format===void 0?void 0:format.id)==="number"||(format===null||format===void 0?void 0:(_format$params=format.params)===null||_format$params===void 0?void 0:_format$params.id)==="number"&&(format===null||format===void 0?void 0:format.id)!=="range","date"in params,"interval"in params):getScaleType(scale,true);return{...scale,type:type}}function getAxisStyle(ticks,title,rotationFallback=public_["LabelRotation"].Vertical){var _ticks$rotation;return{axisTitle:{visible:(title!==null&&title!==void 0?title:"").trim().length>0},tickLabel:{visible:ticks===null||ticks===void 0?void 0:ticks.show,rotation:-((_ticks$rotation=ticks===null||ticks===void 0?void 0:ticks.rotation)!==null&&_ticks$rotation!==void 0?_ticks$rotation:rotationFallback)}}}function getAxisDomain(scale,isCategoryAxis){if(isCategoryAxis||!scale){return}const{min:min,max:max,defaultYExtents:defaultYExtents,boundsMargin:boundsMargin}=scale;const fit=defaultYExtents;const padding=boundsMargin;if(!Object(external_kbnSharedDeps_Lodash_["isNil"])(min)&&!Object(external_kbnSharedDeps_Lodash_["isNil"])(max)){return{fit:fit,padding:padding,min:min,max:max}}if(!Object(external_kbnSharedDeps_Lodash_["isNil"])(min)){return{fit:fit,padding:padding,min:min}}if(!Object(external_kbnSharedDeps_Lodash_["isNil"])(max)){return{fit:fit,padding:padding,max:max}}return{fit:fit,padding:padding}}var get_agg_id=__webpack_require__(19);function getEmptyAspect(){return{accessor:null,aggId:null,aggType:null,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeXy.aggResponse.allDocsTitle",{defaultMessage:"All docs"}),params:{defaultValue:"_all"}}}function getAspects(columns,{x:x,y:y,z:z,series:series,splitColumn:splitColumn,splitRow:splitRow}){var _getAspectsFromDimens,_getAspectsFromDimens2;const seriesDimensions=Array.isArray(series)||series===undefined?series:[series];return{x:(_getAspectsFromDimens=getAspectsFromDimension(columns,x))!==null&&_getAspectsFromDimens!==void 0?_getAspectsFromDimens:getEmptyAspect(),y:(_getAspectsFromDimens2=getAspectsFromDimension(columns,y))!==null&&_getAspectsFromDimens2!==void 0?_getAspectsFromDimens2:[],z:z&&(z===null||z===void 0?void 0:z.length)>0?getAspectsFromDimension(columns,z[0]):undefined,series:getAspectsFromDimension(columns,seriesDimensions),splitColumn:splitColumn!==null&&splitColumn!==void 0&&splitColumn.length?getAspectsFromDimension(columns,splitColumn[0]):undefined,splitRow:splitRow!==null&&splitRow!==void 0&&splitRow.length?getAspectsFromDimension(columns,splitRow[0]):undefined}}function getAspectsFromDimension(columns,dimensions){if(!dimensions){return}if(Array.isArray(dimensions)){return Object(external_kbnSharedDeps_Lodash_["compact"])(dimensions.map(d=>{const column=d&&columns[d.accessor];return column&&getAspect(column,d)}))}const column=columns[dimensions.accessor];return column&&getAspect(column,dimensions)}const getAspect=({id:accessor,name:title},{accessor:column,format:format,params:params,aggType:aggType})=>({accessor:accessor,column:column,title:title,format:format,aggType:aggType,aggId:Object(get_agg_id["a"])(accessor),formatter:value=>Object(services["b"])().deserialize(format).convert(value),params:params});var public_0=__webpack_require__(25);function getConfig(table,params){var _params$dimensions$x,_params$dimensions$x2,_params$dimensions$x3,_date,_labels$show;const{thresholdLine:thresholdLine,orderBucketsBySum:orderBucketsBySum,addTimeMarker:addTimeMarker,radiusRatio:radiusRatio,labels:labels,fittingFunction:fittingFunction,detailedTooltip:detailedTooltip,isVislibVis:isVislibVis}=params;const aspects=getAspects(table.columns,params.dimensions);const xAxis=getAxis(params.categoryAxes[0],params.grid,aspects.x,params.seriesParams,((_params$dimensions$x=params.dimensions.x)===null||_params$dimensions$x===void 0?void 0:_params$dimensions$x.aggType)===data_public_["BUCKET_TYPES"].DATE_HISTOGRAM);const tooltip=getTooltip(aspects,params);const yAxes=params.valueAxes.map(a=>getAxis(a,params.grid,aspects.y[0],params.seriesParams));const enableHistogramMode=(((_params$dimensions$x2=params.dimensions.x)===null||_params$dimensions$x2===void 0?void 0:_params$dimensions$x2.aggType)===data_public_["BUCKET_TYPES"].DATE_HISTOGRAM||((_params$dimensions$x3=params.dimensions.x)===null||_params$dimensions$x3===void 0?void 0:_params$dimensions$x3.aggType)===data_public_["BUCKET_TYPES"].HISTOGRAM)&&shouldEnableHistogramMode(params.seriesParams,aspects.y,yAxes);const isTimeChart=(_date=aspects.x.params.date)!==null&&_date!==void 0?_date:false;return{markSizeRatio:radiusRatio*.6,fittingFunction:fittingFunction,detailedTooltip:detailedTooltip,orderBucketsBySum:orderBucketsBySum,isTimeChart:isTimeChart,isVislibVis:isVislibVis,showCurrentTime:addTimeMarker&&isTimeChart,showValueLabel:(_labels$show=labels.show)!==null&&_labels$show!==void 0?_labels$show:false,enableHistogramMode:enableHistogramMode,tooltip:tooltip,aspects:aspects,xAxis:xAxis,yAxes:yAxes,legend:getLegend(params),rotation:getRotation(params.categoryAxes[0]),thresholdLine:getThresholdLine(thresholdLine,yAxes,params.seriesParams)}}const shouldEnableHistogramMode=(seriesParams,yAspects,yAxes)=>{const bars=seriesParams.filter(({type:type,data:{id:paramId}})=>type===public_0["ChartType"].Histogram&&yAspects.find(({aggId:aggId})=>aggId===paramId)!==undefined);const groupIds=[...bars.reduce((acc,{valueAxis:groupId,mode:mode})=>{acc.add(groupId);return acc},new Set)];if(groupIds.length>1){return false}return bars.every(({valueAxis:groupId,mode:mode})=>{var _yAxes$find;const yAxisScale=(_yAxes$find=yAxes.find(({groupId:axisGroupId})=>axisGroupId===groupId))===null||_yAxes$find===void 0?void 0:_yAxes$find.scale;return mode==="stacked"||(yAxisScale===null||yAxisScale===void 0?void 0:yAxisScale.mode)==="percentage"})};var _chart=__webpack_require__(43);const CHART_SPLITTER_ID="__chart_splitter__";const ChartSplitter=({splitColumnAccessor:splitColumnAccessor,splitRowAccessor:splitRowAccessor,sort:sort})=>splitColumnAccessor||splitRowAccessor?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["GroupBy"],{id:CHART_SPLITTER_ID,by:(spec,datum)=>{const splitTypeAccessor=splitColumnAccessor||splitRowAccessor;if(splitTypeAccessor){return typeof splitTypeAccessor==="function"?splitTypeAccessor(datum):datum[splitTypeAccessor]}return spec.id},sort:sort||"dataIndex"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["SmallMultiples"],{splitVertically:splitRowAccessor?CHART_SPLITTER_ID:undefined,splitHorizontally:splitColumnAccessor?CHART_SPLITTER_ID:undefined})):null;function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const VisComponent=props=>{var _config$aspects$serie,_config$aspects$serie2,_config$aspects$serie3;const[showLegend,setShowLegend]=Object(external_kbnSharedDeps_React_["useState"])(()=>{var _props$uiState;const bwcLegendStateDefault=props.visParams.addLegend==null?true:props.visParams.addLegend;return(_props$uiState=props.uiState)===null||_props$uiState===void 0?void 0:_props$uiState.get("vis.legendOpen",bwcLegendStateDefault)});const[palettesRegistry,setPalettesRegistry]=Object(external_kbnSharedDeps_React_["useState"])(null);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{var _props$uiState3,_props$uiState3$on;const fn=()=>{var _props$uiState2,_props$uiState2$emit;props===null||props===void 0?void 0:(_props$uiState2=props.uiState)===null||_props$uiState2===void 0?void 0:(_props$uiState2$emit=_props$uiState2.emit)===null||_props$uiState2$emit===void 0?void 0:_props$uiState2$emit.call(_props$uiState2,"reload")};props===null||props===void 0?void 0:(_props$uiState3=props.uiState)===null||_props$uiState3===void 0?void 0:(_props$uiState3$on=_props$uiState3.on)===null||_props$uiState3$on===void 0?void 0:_props$uiState3$on.call(_props$uiState3,"change",fn);return()=>{var _props$uiState4,_props$uiState4$off;props===null||props===void 0?void 0:(_props$uiState4=props.uiState)===null||_props$uiState4===void 0?void 0:(_props$uiState4$off=_props$uiState4.off)===null||_props$uiState4$off===void 0?void 0:_props$uiState4$off.call(_props$uiState4,"change",fn)}},[props===null||props===void 0?void 0:props.uiState]);const onRenderChange=Object(external_kbnSharedDeps_React_["useCallback"])(isRendered=>{if(isRendered){props.renderComplete()}},[props]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const fetchPalettes=async()=>{const palettes=await Object(services["c"])().getPalettes();setPalettesRegistry(palettes)};fetchPalettes()},[]);const handleFilterClick=Object(external_kbnSharedDeps_React_["useCallback"])((visData,xAccessor,splitSeriesAccessors,splitChartAccessor)=>{const splitSeriesAccessorFnMap=getSplitSeriesAccessorFnMap(splitSeriesAccessors);return elements=>{if(xAccessor!==null){const event=Object(public_["getFilterFromChartClickEventFn"])(visData,xAccessor,splitSeriesAccessorFnMap,splitChartAccessor)(elements);props.fireEvent(event)}}},[props]);const handleBrush=Object(external_kbnSharedDeps_React_["useCallback"])((visData,xAccessor,isInterval)=>{if(xAccessor!==null&&isInterval){return brushArea=>{const event=Object(public_["getBrushFromChartBrushEventFn"])(visData,xAccessor)(brushArea);props.fireEvent(event)}}},[props]);const getFilterEventData=Object(external_kbnSharedDeps_React_["useCallback"])((visData,xAccessor,splitSeriesAccessors)=>{const splitSeriesAccessorFnMap=getSplitSeriesAccessorFnMap(splitSeriesAccessors);return series=>{if(xAccessor!==null){return Object(public_["getFilterFromSeriesFn"])(visData)(series,splitSeriesAccessorFnMap)}return null}},[]);const handleFilterAction=Object(external_kbnSharedDeps_React_["useCallback"])((event,negate=false)=>{props.fireEvent({...event,data:{...event.data,negate:negate}})},[props]);const canFilter=async event=>{if(!event){return false}const filters=await Object(services["a"])().createFiltersFromValueClickAction(event.data);return Boolean(filters.length)};const toggleLegend=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{setShowLegend(value=>{var _props$uiState5;const newValue=!value;if((_props$uiState5=props.uiState)!==null&&_props$uiState5!==void 0&&_props$uiState5.set){props.uiState.set("vis.legendOpen",newValue)}return newValue})},[props.uiState]);const setColor=Object(external_kbnSharedDeps_React_["useCallback"])((newColor,seriesLabel,event)=>{var _props$uiState6,_props$uiState7;if(event.key&&event.key!==external_kbnSharedDeps_ElasticEui_["keys"].ENTER){return}const colors=((_props$uiState6=props.uiState)===null||_props$uiState6===void 0?void 0:_props$uiState6.get("vis.colors"))||{};if(colors[seriesLabel]===newColor||!newColor){delete colors[seriesLabel]}else{colors[seriesLabel]=newColor}if((_props$uiState7=props.uiState)!==null&&_props$uiState7!==void 0&&_props$uiState7.set){props.uiState.setSilent("vis.colors",null);props.uiState.set("vis.colors",colors);props.uiState.emit("colorChanged")}},[props.uiState]);const{visData:visData,visParams:visParams,syncColors:syncColors}=props;const config=getConfig(visData,visParams);const timeZone=getTimeZone();const xDomain=config.xAxis.scale.type===external_kbnSharedDeps_ElasticCharts_["ScaleType"].Ordinal?undefined:getXDomain(config.aspects.x.params);const hasBars=visParams.seriesParams.some(({type:type,data:{id:paramId}})=>type===common["a"].Histogram&&config.aspects.y.find(({aggId:aggId})=>aggId===paramId)!==undefined);const adjustedXDomain=config.xAxis.scale.type===external_kbnSharedDeps_ElasticCharts_["ScaleType"].Ordinal?undefined:getAdjustedDomain(visData.rows,config.aspects.x,timeZone,xDomain,hasBars);const legendPosition=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{var _config$legend$positi;return(_config$legend$positi=config.legend.position)!==null&&_config$legend$positi!==void 0?_config$legend$positi:external_kbnSharedDeps_ElasticCharts_["Position"].Right},[config.legend.position]);const isDarkMode=Object(services["d"])().useDarkMode();const getSeriesName=getSeriesNameFn(config.aspects,config.aspects.y.length>1);const splitAccessors=(_config$aspects$serie=config.aspects.series)===null||_config$aspects$serie===void 0?void 0:_config$aspects$serie.map(({accessor:accessor,formatter:formatter})=>({accessor:accessor,formatter:formatter}));const allSeries=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getAllSeries(visData.rows,splitAccessors,config.aspects.y),[config.aspects.y,splitAccessors,visData.rows]);const getSeriesColor=Object(external_kbnSharedDeps_React_["useCallback"])(series=>{var _props$uiState8;const seriesName=getSeriesName(series);if(!seriesName){return null}const overwriteColors=(_props$uiState8=props.uiState)!==null&&_props$uiState8!==void 0&&_props$uiState8.get?props.uiState.get("vis.colors",{}):{};if(Object.keys(overwriteColors).includes(seriesName)){return overwriteColors[seriesName]}const outputColor=palettesRegistry===null||palettesRegistry===void 0?void 0:palettesRegistry.get(visParams.palette.name).getColor([{name:seriesName,rankAtDepth:splitAccessors?allSeries.findIndex(name=>name===seriesName):config.aspects.y.findIndex(aspect=>aspect.accessor===series.yAccessor),totalSeriesAtDepth:splitAccessors?allSeries.length:config.aspects.y.length}],{maxDepth:1,totalSeries:splitAccessors?allSeries.length:config.aspects.y.length,behindText:false,syncColors:syncColors});return outputColor||null},[allSeries,config.aspects.y,getSeriesName,props.uiState,splitAccessors,syncColors,visParams.palette.name,palettesRegistry]);const xAccessor=getXAccessor(config.aspects.x);const splitSeriesAccessors=Object(external_kbnSharedDeps_React_["useMemo"])(()=>config.aspects.series?Object(external_kbnSharedDeps_Lodash_["compact"])(config.aspects.series.map(getComplexAccessor(COMPLEX_SPLIT_ACCESSOR))):[],[config.aspects.series]);const splitChartColumnAccessor=config.aspects.splitColumn?getComplexAccessor(COMPLEX_SPLIT_ACCESSOR,true)(config.aspects.splitColumn):undefined;const splitChartRowAccessor=config.aspects.splitRow?getComplexAccessor(COMPLEX_SPLIT_ACCESSOR,true)(config.aspects.splitRow):undefined;const renderSeries=Object(external_kbnSharedDeps_React_["useMemo"])(()=>renderAllSeries(config,visParams.seriesParams,visData.rows,getSeriesName,getSeriesColor,timeZone,xAccessor,splitSeriesAccessors),[config,getSeriesColor,getSeriesName,splitSeriesAccessors,timeZone,visData.rows,visParams.seriesParams,xAccessor]);return external_kbnSharedDeps_React_default.a.createElement("div",{className:"xyChart__container","data-test-subj":"visTypeXyChart"},external_kbnSharedDeps_React_default.a.createElement(public_["LegendToggle"],{onClick:toggleLegend,showLegend:showLegend,legendPosition:legendPosition}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Chart"],{size:"100%"},external_kbnSharedDeps_React_default.a.createElement(ChartSplitter,{splitColumnAccessor:splitChartColumnAccessor,splitRowAccessor:splitChartRowAccessor}),external_kbnSharedDeps_React_default.a.createElement(XYSettings,_extends({},config,{showLegend:showLegend,legendPosition:legendPosition,xDomain:xDomain,adjustedXDomain:adjustedXDomain,legendColorPicker:useColorPicker(legendPosition,setColor,getSeriesName),onElementClick:handleFilterClick(visData,xAccessor,splitSeriesAccessors,splitChartColumnAccessor!==null&&splitChartColumnAccessor!==void 0?splitChartColumnAccessor:splitChartRowAccessor),onBrushEnd:handleBrush(visData,xAccessor,"interval"in config.aspects.x.params),onRenderChange:onRenderChange,legendAction:config.aspects.series&&((_config$aspects$serie2=(_config$aspects$serie3=config.aspects.series)===null||_config$aspects$serie3===void 0?void 0:_config$aspects$serie3.length)!==null&&_config$aspects$serie2!==void 0?_config$aspects$serie2:0)>0?getLegendActions(canFilter,getFilterEventData(visData,xAccessor,splitSeriesAccessors),handleFilterAction,getSeriesName):undefined})),external_kbnSharedDeps_React_default.a.createElement(XYThresholdLine,config.thresholdLine),external_kbnSharedDeps_React_default.a.createElement(XYCurrentTime,{enabled:config.showCurrentTime,isDarkMode:isDarkMode,domain:xDomain}),external_kbnSharedDeps_React_default.a.createElement(XYEndzones,{isFullBin:!config.enableHistogramMode,enabled:config.isTimeChart,isDarkMode:isDarkMode,domain:xDomain,hideTooltips:!config.detailedTooltip,adjustedDomain:adjustedXDomain}),external_kbnSharedDeps_React_default.a.createElement(XYAxis,config.xAxis),config.yAxes.map(axisProps=>external_kbnSharedDeps_React_default.a.createElement(XYAxis,_extends({key:axisProps.id},axisProps))),renderSeries))};var vis_component=__webpack_exports__["default"]=Object(external_kbnSharedDeps_React_["memo"])(VisComponent)}])]);